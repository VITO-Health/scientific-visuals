(function(Ty){typeof define=="function"&&define.amd?define(Ty):Ty()})(function(){"use strict";function Ty(){Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"))}const Sl={get(n,e){var t;return(t=e[Symbol.metadata])==null?void 0:t[n]},define(n,e,...t){var s;let i=(s=Object.getOwnPropertyDescriptor(e,Symbol.metadata))==null?void 0:s.value;i==null&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const r=t.length;switch(r){case 0:throw new Error("At least one key must be provided");case 1:i[t[0]]=n;return;case 2:i[t[0]]=i[t[1]]=n;return;default:{for(let o=0;o<r;++o)i[t[o]]=n;return}}},has(n,e){const t=e[Symbol.metadata];return t==null?!1:n in t},delete(n,e){const t=e[Symbol.metadata];t!=null&&Reflect.deleteProperty(t,n)}},lm=Object.freeze,AH=Object.assign,qX=String,ha=Sl.get,cm=Sl.define,Ti=n=>n instanceof Promise,ni=n=>n instanceof Array,Pf=n=>n instanceof Set,jc=n=>n instanceof Map,PH=n=>n instanceof Object;function My(n){return typeof n=="object"&&n!==null||typeof n=="function"}const Bt=n=>typeof n=="function",wt=n=>typeof n=="string",XX=n=>typeof n=="number",en=()=>Object.create(null),wo=Object.is,Gn=(n,...e)=>new Error(`AUR${qX(n).padStart(4,"0")}: ${QX(n,...e)}`),ZX={1:"No registration for interface: '{{0}}'",2:`'{{0}}' was registered with "none" resolver, are you injecting the right key?`,3:"Cyclic dependency found: {{0}}",4:"Resolver for {{0}} returned a null factory",5:"Invalid resolver strategy specified: {{0}}. Did you assign an invalid strategy value?",6:"Unable to autoregister dependency: {{0}}",7:'Resource key "{{0}}" already registered',8:"Unable to resolve key: {{0}}",9:"Attempted to jitRegister something that is not a constructor: '{{0}}'. Did you forget to register this resource?",10:'Attempted to jitRegister an intrinsic type: "{{0}}". Did you forget to add @inject(Key)',11:"Invalid resolver, null/undefined returned from the static register method.",12:"Attempted to jitRegister an interface: {{0}}",13:"Cannot call resolve '{{0}}' before calling prepare or after calling dispose.",14:"Key cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?A common cause is circular dependency with bundler, did you accidentally introduce circular dependency into your module graph?",15:"'{{0}}' is a native function and cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.",16:'There is not a currently active container to resolve "{{0}}". Are you trying to "new Class(...)" that has a resolve(...) call?',17:"Failed to instantiate '{{0}}' via @newInstanceOf/@newInstanceForScope, there's no registration and no default implementation, or the default implementation does not result in factory for constructing the instances.",18:"Invalid channel name or instance: '{{0}}'.",19:"Invalid channel name or type: {{0}}.",20:"No defined value found when calling firstDefined()",21:"Invalid module transform input: {{0}}. Expected Promise or Object.",22:"The @inject decorator on the target ('{{0}}') type '{{1}}' is not supported.",23:"Resource key '{{0}}' has already been registered."},QX=(n,...e)=>{let t=ZX[n];for(let i=0;i<e.length;++i)t=t.replace(`{{${i}}}`,String(e[i]));return t},If=(...n)=>globalThis.console.error(...n),um=(()=>{const n={};let e=!1,t=0,i=0,r=0;return s=>{switch(typeof s){case"number":return s>=0&&(s|0)===s;case"string":if(e=n[s],e!==void 0)return e;if(t=s.length,t===0)return n[s]=!1;for(i=0,r=0;r<t;++r)if(i=s.charCodeAt(r),r===0&&i===48&&t>1||i<48||i>57)return n[s]=!1;return n[s]=!0;default:return!1}}})(),IH=function(){const n=AH(en(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=t=>t===""?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:n[t]===!0?1:0;return(t,i)=>{const r=t.length;if(r===0)return t;let s=!1,o="",a,l="",c=0,u=t.charAt(0),h=e(u),d=0;for(;d<r;++d)a=c,l=u,c=h,u=t.charAt(d+1),h=e(u),c===0?o.length>0&&(s=!0):(!s&&o.length>0&&c===2&&(s=a===3||h===3),o+=i(l,s),s=!1);return o}}(),Mi=function(){const n=en(),e=(t,i)=>i?t.toUpperCase():t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=IH(t,e)),i}}(),OH=function(){const n=en();return e=>{let t=n[e];return t===void 0&&(t=Mi(e),t.length>0&&(t=t[0].toUpperCase()+t.slice(1)),n[e]=t),t}}(),kH=function(){const n=en(),e=(t,i)=>i?`-${t.toLowerCase()}`:t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=IH(t,e)),i}}(),EE=n=>{const e=n.length,t=Array(e);let i=0;for(;i<e;++i)t[i]=n[i];return t},Of=(n,e)=>{const t=e.name;e.addInitializer(function(){Reflect.defineProperty(this,t,{value:n.bind(this),writable:!0,configurable:!0,enumerable:!1})})},ui=(...n)=>{const e=[];let t=0;const i=n.length;let r=0,s,o=0;for(;o<i;++o)if(s=n[o],s!==void 0){r=s.length;let a=0;for(;a<r;++a)e[t++]=s[a]}return e},zc=(...n)=>{const e=n.length;let t,i=0;for(;e>i;++i)if(t=n[i],t!==void 0)return t;throw Gn(20)},JX=function(){const n=Function.prototype,e=Object.getPrototypeOf,t=new WeakMap;let i=n,r=0,s;return function(o){if(s=t.get(o),s===void 0)for(t.set(o,s=[i=o]),r=0;(i=e(i))!==n;)s[++r]=i;return s}}();function xE(...n){return AH(en(),...n)}const DH=(()=>{const n=new WeakMap;let e=!1,t="",i=0;return r=>(e=n.get(r),e==null&&(i=(t=r.toString()).length,e=i>28&&t.indexOf("[native code] }")===i-15,n.set(r,e)),e)})(),It=(n,e)=>Ti(n)?n.then(e):e(n),Ai=(...n)=>{let e,t,i,r=0,s=n.length;for(;r<s;++r)e=n[r],Ti(e=n[r])&&(t===void 0?t=e:i===void 0?i=[t,e]:i.push(e));return i===void 0?t:Promise.all(i)},eZ=(n,e)=>new Ms(n,0,e),hm=(n,e)=>new Ms(n,1,e),NH=(n,e)=>new Ms(n,2,e),tZ=(n,e)=>new Ms(n,3,e),nZ=(n,e)=>new Ms(n,3,HH(e)),Ay=(n,e)=>new Ms(e,5,n),iZ=(n,...e)=>new vZ(n,e),LH=new WeakMap,HH=n=>(e,t,i)=>{let r=LH.get(e);if(r===void 0&&LH.set(e,r=new WeakMap),r.has(i))return r.get(i);const s=n(e,t,i);return r.set(i,s),s},ch={instance:eZ,singleton:hm,transient:NH,callback:tZ,cachedCallback:nZ,aliasTo:Ay,defer:iZ},dm=function(n){return function(t){t.register(hm(this,this),Ay(this,n))}},uh="au:annotation",Uc=(n,e)=>e===void 0?`${uh}:${n}`:`${uh}:${n}:${e}`,rZ=lm({name:"au:annotation",appendTo:(n,e)=>{const t=ha(uh,n);t===void 0?cm([e],n,uh):t.push(e)},set(n,e,t){cm(t,n,Uc(e))},get:(n,e)=>ha(Uc(e),n),getKeys(n){let e=ha(uh,n);return e===void 0&&cm(e=[],n,uh),e},isKey:n=>n.startsWith(uh),keyFor:Uc}),da="au:resource",hh=(n,e,t)=>`${da}:${n}`,$H={annotation:rZ},FH=Object.prototype.hasOwnProperty;function Ts(n,e,t,i){let r=ha(Uc(n),t);return r===void 0?(r=e[n],r===void 0?(r=t[n],r===void 0||!FH.call(t,n)?i():r):r):r}function yo(n,e,t){let i=ha(Uc(n),e);return i===void 0?(i=e[n],i===void 0||!FH.call(e,n)?t():i):i}function Co(n,e,t){const i=e[n];return i===void 0?t():i}const fa=Symbol.for("au:registrable"),sZ={none(n){throw Gn(2,n)},singleton:n=>new Ms(n,1,n),transient:n=>new Ms(n,2,n)};class ga{constructor(e,t){this.inheritParentResources=e,this.defaultResolver=t}static from(e){return e===void 0||e===ga.DEFAULT?ga.DEFAULT:new ga(e.inheritParentResources??!1,e.defaultResolver??sZ.singleton)}}ga.DEFAULT=ga.from({});const oZ=n=>new fm(null,ga.from(n)),aZ=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let lZ=0,xn=null;class fm{get depth(){return this._parent===null?0:this._parent.depth+1}get parent(){return this._parent}constructor(e,t){if(this.id=++lZ,this._registerDepth=0,this._disposableResolvers=new Map,this._parent=e,this.config=t,this._resolvers=new Map,this.res={},e===null)this.root=this,this._factories=new Map;else if(this.root=e.root,this._factories=e._factories,t.inheritParentResources)for(const i in e.res)this.registerResolver(i,e.res[i]);this._resolvers.set(Df,uZ)}register(...e){var u,h,d,f;if(++this._registerDepth===100)throw Gn(6,...e);let t,i,r,s,o,a=0,l=e.length,c;for(;a<l;++a)if(t=e[a],!!My(t))if(mm(t))t.register(this);else if((c=ha(da,t))!=null)c.register(this);else if(dZ(t)){const g=(u=t[Symbol.metadata])==null?void 0:u[fa];if(mm(g))g.register(this);else if(wt((h=t.$au)==null?void 0:h.type)){const p=t.$au,m=(t.aliases??gt).concat(p.aliases??gt);let v=`${da}:${p.type}:${p.name}`;if(this.has(v,!1)){(d=globalThis.console)==null||d.warn(Gn(7,v));continue}for(Ay(t,v).register(this),this.has(t,!1)||hm(t,t).register(this),s=0,o=m.length;s<o;++s){if(v=`${da}:${p.type}:${m[s]}`,this.has(v,!1)){(f=globalThis.console)==null||f.warn(Gn(7,v));continue}Ay(t,v).register(this)}}else hm(t,t).register(this)}else for(i=Object.keys(t),s=0,o=i.length;s<o;++s)r=t[i[s]],My(r)&&(mm(r)?r.register(this):this.register(r));return--this._registerDepth,this}registerResolver(e,t,i=!1){gm(e);const r=this._resolvers,s=r.get(e);if(s==null){if(r.set(e,t),TE(e)){if(this.res[e]!==void 0)throw Gn(7,e);this.res[e]=t}}else s instanceof Ms&&s._strategy===4?s._state.push(t):r.set(e,new Ms(e,4,[s,t]));return i&&this._disposableResolvers.set(e,t),t}deregister(e){gm(e);const t=this._resolvers.get(e);t!=null&&(this._resolvers.delete(e),TE(e)&&delete this.res[e],this._disposableResolvers.has(e)&&(t.dispose(),this._disposableResolvers.delete(e)))}registerTransformer(e,t){const i=this.getResolver(e);if(i==null)return!1;if(i.getFactory){const r=i.getFactory(this);return r==null?!1:(r.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(gm(e),e.resolve!==void 0)return e;const i=xn;let r=xn=this,s,o;try{for(;r!=null;)if(s=r._resolvers.get(e),s==null){if(r._parent==null)return o=WH(e)?this:r,t?this._jitRegister(e,o):null;r=r._parent}else return s}finally{xn=i}return null}has(e,t=!1){var i;return this._resolvers.has(e)||TE(e)&&e in this.res||((t&&((i=this._parent)==null?void 0:i.has(e,!0)))??!1)}get(e){if(gm(e),e.$isResolver)return e.resolve(this,this);const t=xn;let i=xn=this,r,s;try{for(;i!=null;)if(r=i._resolvers.get(e),r==null){if(i._parent==null)return s=WH(e)?this:i,r=this._jitRegister(e,s),r.resolve(i,this);i=i._parent}else return r.resolve(i,this)}finally{xn=t}throw Gn(8,e)}getAll(e,t=!1){gm(e);const i=xn,r=xn=this;let s=r,o,a=gt;try{if(t){for(;s!=null;)o=s._resolvers.get(e),o!=null&&(a=a.concat(VH(o,s,r))),s=s._parent;return a}for(;s!=null;)if(o=s._resolvers.get(e),o==null){if(s=s._parent,s==null)return gt}else return VH(o,s,r)}finally{xn=i}return gt}invoke(e,t){if(DH(e))throw Gn(15,e);const i=xn;xn=this;{let r,s;try{r=kf(e).map(o=>this.get(s=o))}catch(o){throw If(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}, caused by dependency: ${String(s)}`),xn=i,o}try{return t===void 0?new e(...r):new e(...r,...t)}catch(o){throw If(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}`),o}finally{xn=i}}try{return t===void 0?new e(...kf(e).map(pm,this)):new e(...kf(e).map(pm,this),...t)}finally{xn=i}}hasFactory(e){return this._factories.has(e)}getFactory(e){let t=this._factories.get(e);if(t===void 0){if(DH(e))throw Gn(15,e);this._factories.set(e,t=new cZ(e,kf(e)))}return t}registerFactory(e,t){this._factories.set(e,t)}createChild(e){return e===void 0&&this.config.inheritParentResources?this.config===ga.DEFAULT?new fm(this,this.config):new fm(this,ga.from({...this.config,inheritParentResources:!1})):new fm(this,ga.from(e??this.config))}disposeResolvers(){var s;const e=this._resolvers,t=this._disposableResolvers;let i,r;for([r,i]of t.entries())(s=i.dispose)==null||s.call(i),e.delete(r);t.clear()}useResources(e){const t=e.res;for(const i in t)this.registerResolver(i,t[i])}find(e,t){var o,a;const i=wt(t)?`${da}:${e}:${t}`:e;let r=this,s=r.res[i];return s==null&&(r=r.root,s=r.res[i]),s==null?null:((a=(o=s.getFactory)==null?void 0:o.call(s,r))==null?void 0:a.Type)??null}dispose(){this._disposableResolvers.size>0&&this.disposeResolvers(),this._resolvers.clear(),this.root===this&&(this._factories.clear(),this.res={})}_jitRegister(e,t){const i=mm(e);if(!Bt(e)&&!i)throw Gn(9,e);if(aZ.has(e.name))throw Gn(10,e);if(i){const s=e.register(t,e);if(!(s instanceof Object)||s.resolve==null){const o=t._resolvers.get(e);if(o!=null)return o;throw Gn(11,e)}return s}if(e.$isInterface)throw Gn(12,e.friendlyName);const r=this.config.defaultResolver(e,t);return t._resolvers.set(e,r),r}}class cZ{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){const i=xn;xn=e;let r;{let s,o;try{s=this.dependencies.map(a=>e.get(o=a))}catch(a){throw If(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}, caused by dependency: ${String(o)}`),xn=i,a}try{return t===void 0?r=new this.Type(...s):r=new this.Type(...s,...t),this.transformers==null?r:this.transformers.reduce(BH,r)}catch(a){throw If(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}`),a}finally{xn=i}}try{return t===void 0?r=new this.Type(...this.dependencies.map(pm,e)):r=new this.Type(...this.dependencies.map(pm,e),...t),this.transformers==null?r:this.transformers.reduce(BH,r)}finally{xn=i}}registerTransformer(e){(this.transformers??(this.transformers=[])).push(e)}}function BH(n,e){return e(n)}function gm(n){if(n==null)throw Gn(14)}function pm(n){return this.get(n)}function fe(...n){if(xn==null)throw Gn(16,...n);if(n.length===1)try{return xn.get(n[0])}catch(e){throw If(`[DEV:aurelia] resolve() call error for: ${String(n[0])}`),e}else{let e;try{return n.map(t=>xn.get(e=t))}catch(t){throw If(`[DEV:aurelia] resolve() call error for: ${String(e)}`),t}}return n.length===1?xn.get(n[0]):n.map(pm,xn)}const VH=(n,e,t)=>{if(n instanceof Ms&&n._strategy===4){const i=n._state,r=i.length,s=Array(r);let o=0;for(;o<r;++o)s[o]=i[o].resolve(e,t);return s}return[n.resolve(e,t)]},uZ={$isResolver:!0,resolve(n,e){return e}},mm=n=>Bt(n==null?void 0:n.register),hZ=n=>mm(n)&&typeof n.registerInRequestor=="boolean",WH=n=>hZ(n)&&n.registerInRequestor,dZ=n=>n.prototype!==void 0,TE=n=>wt(n)&&n.indexOf(":")>0;class fZ{constructor(e,t){this._container=e,this._key=t}instance(e){return this._registerResolver(0,e)}singleton(e){return this._registerResolver(1,e)}transient(e){return this._registerResolver(2,e)}callback(e){return this._registerResolver(3,e)}cachedCallback(e){return this._registerResolver(3,HH(e))}aliasTo(e){return this._registerResolver(5,e)}_registerResolver(e,t){const{_container:i,_key:r}=this;return this._container=this._key=void 0,i.registerResolver(r,new Ms(r,e,t))}}const bm=n=>{const e=n.slice(),t=Object.keys(n),i=t.length;let r;for(let s=0;s<i;++s)r=t[s],um(r)||(e[r]=n[r]);return e},Py=Uc("di:paramtypes"),gZ=n=>ha(Py,n),jH=n=>ha("design:paramtypes",n),zH=n=>{var e;return(e=n.metadata)[Py]??(e[Py]=[])},kf=n=>{const e=Uc("di:dependencies");let t=ha(e,n);if(t===void 0){const i=n.inject;if(i===void 0){const r=jH(n),s=gZ(n);if(r===void 0)if(s===void 0){const o=Object.getPrototypeOf(n);Bt(o)&&o!==Function.prototype?t=bm(kf(o)):t=[]}else t=bm(s);else if(s===void 0)t=bm(r);else{t=bm(r);let o=s.length,a,l=0;for(;l<o;++l)a=s[l],a!==void 0&&(t[l]=a);const c=Object.keys(s);let u;for(l=0,o=c.length,l=0;l<o;++l)u=c[l],um(u)||(t[u]=s[u])}}else t=bm(i);cm(t,n,e)}return t},_l=(n,e)=>{const t=Bt(n)?n:e,i=(wt(n)?n:void 0)??"(anonymous)",r={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:t!=null?(s,o)=>t(new fZ(s,o??r)):void 0};return r},ME=(...n)=>(e,t)=>{switch(t.kind){case"class":{const i=zH(t);let r,s=0;for(;s<n.length;++s)r=n[s],r!==void 0&&(i[s]=r);break}case"field":{const i=zH(t),r=n[0];r!==void 0&&(i[t.name]=r);break}default:throw Gn(22,String(t.name),t.kind)}},dh=(Ty(),{createContainer:oZ,getDesignParamtypes:jH,getDependencies:kf,createInterface:_l,inject:ME,transient(n){return n.register=function(e){return NH(n,n).register(e,n)},n.registerInRequestor=!1,n},singleton(n,e=bZ){return n.register=function(t){return hm(n,n).register(t,n)},n.registerInRequestor=e.scoped,n}}),Df=_l("IContainer"),pZ=Df;function UH(n,e){return dh.transient(n)}function mZ(n,e){return n==null?UH:UH(n)}const bZ={scoped:!1};class Ms{get $isResolver(){return!0}constructor(e,t,i){this._resolving=!1,this._cachedFactory=null,this._key=e,this._strategy=t,this._state=i}register(e,t){return e.registerResolver(t||this._key,this)}resolve(e,t){switch(this._strategy){case 0:return this._state;case 1:{if(this._resolving)throw Gn(3,this._state.name);return this._resolving=!0,this._state=(this._cachedFactory=e.getFactory(this._state)).construct(t),this._strategy=0,this._resolving=!1,this._state}case 2:{const i=e.getFactory(this._state);if(i===null)throw Gn(4,this._key);return i.construct(t)}case 3:return this._state(e,t,this);case 4:return this._state[0].resolve(e,t);case 5:return t.get(this._state);default:throw Gn(5,this._strategy)}}getFactory(e){var t,i;switch(this._strategy){case 1:case 2:return e.getFactory(this._state);case 5:return((i=(t=e.getResolver(this._state))==null?void 0:t.getFactory)==null?void 0:i.call(t,e))??null;case 0:return this._cachedFactory;default:return null}}}class Ki{get friendlyName(){return this._name}constructor(e,t=null,i=null){this._name=e,this._instance=t,this._Type=i}prepare(e){this._instance=e}get $isResolver(){return!0}resolve(){if(this._instance==null)throw Gn(13,this._name);return this._instance}getFactory(e){return this._Type==null?null:e.getFactory(this._Type)}dispose(){this._instance=null}}class vZ{constructor(e,t){this.key=e,this.params=t}register(e){e.has(this.key,!0)?e.get(this.key).register(e,...this.params):e.register(...this.params.filter(t=>typeof t=="object"))}}const gt=lm([]),GH=lm({});function pa(){}const Nf=_l("IPlatform");function vm(n){return function(e){function t(i,r){ME(t)(i,r)}return t.$isResolver=!0,t.resolve=function(i,r){return n(e,i,r)},t}}const AE=(n,e=!1)=>{function t(i,r){ME(t)(i,r)}return t.$isResolver=!0,t.resolve=(i,r)=>r.getAll(n,e),t},YH=vm((n,e,t)=>{if(t.has(n,!0))return t.get(n)}),wZ=vm((n,e,t)=>t.has(n,!1)?t.get(n):void 0),Lf=vm((n,e,t)=>t.has(n,!1)?t.get(n):t.root.get(n)),yZ=vm((n,e,t)=>t.has(n,!1)?t.get(n):t.root.has(n,!1)?t.root.get(n):void 0),CZ=vm((n,e,t)=>t===t.root?t.getAll(n,!1):t.has(n,!1)?t.getAll(n,!1).concat(t.root.getAll(n,!1)):t.root.getAll(n,!1));function Hf(n,e,t,i,r,s){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=i.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=n?i.static?n:n.prototype:null,u=c?Object.getOwnPropertyDescriptor(c,i.name):{},h,d=!1,f=t.length-1;f>=0;f--){var g={};for(var p in i)g[p]=p==="access"?{}:i[p];for(var p in i.access)g.access[p]=i.access[p];g.addInitializer=function(v){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(v||null))};var m=(0,t[f])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(h=o(m.get))&&(u.get=h),(h=o(m.set))&&(u.set=h),(h=o(m.init))&&r.unshift(h)}else(h=o(m))&&(a==="field"?r.unshift(h):u[l]=h)}c&&Object.defineProperty(c,i.name,u),d=!0}function SZ(n,e,t){for(var i=arguments.length>2,r=0;r<e.length;r++)t=i?e[r].call(n,t):e[r].call(n);return i?t:void 0}typeof SuppressedError=="function"&&SuppressedError;const wm=0,ym=1,Cm=2,$f=3,Sm=4,_m=5,_Z=lm({trace:wm,debug:ym,info:Cm,warn:$f,error:Sm,fatal:_m,none:6}),KH=_l("ILogConfig",n=>n.instance(new MZ("no-colors",$f))),RZ=_l("ISink"),EZ=_l("ILogEventFactory",n=>n.singleton(PZ)),fh=_l("ILogger",n=>n.singleton(IZ)),xZ=_l("ILogScope"),TZ=lm({key:Uc("logger-sink-handles"),define(n,e){cm(e.handles,n,this.key)},getHandles(n){return ha(this.key,n.constructor)}}),Rl=xE({red(n){return`\x1B[31m${n}\x1B[39m`},green(n){return`\x1B[32m${n}\x1B[39m`},yellow(n){return`\x1B[33m${n}\x1B[39m`},blue(n){return`\x1B[34m${n}\x1B[39m`},magenta(n){return`\x1B[35m${n}\x1B[39m`},cyan(n){return`\x1B[36m${n}\x1B[39m`},white(n){return`\x1B[37m${n}\x1B[39m`},grey(n){return`\x1B[90m${n}\x1B[39m`}});class MZ{constructor(e,t){this.colorOptions=e,this.level=t}}const PE=function(){const n={"no-colors":xE({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:xE({TRC:Rl.grey("TRC"),DBG:Rl.grey("DBG"),INF:Rl.white("INF"),WRN:Rl.yellow("WRN"),ERR:Rl.red("ERR"),FTL:Rl.red("FTL"),QQQ:Rl.grey("???")})};return(e,t)=>e<=wm?n[t].TRC:e<=ym?n[t].DBG:e<=Cm?n[t].INF:e<=$f?n[t].WRN:e<=Sm?n[t].ERR:e<=_m?n[t].FTL:n[t].QQQ}(),qH=(n,e)=>e==="no-colors"?n.join("."):n.map(Rl.cyan).join("."),IE=(n,e)=>e==="no-colors"?new Date(n).toISOString():Rl.grey(new Date(n).toISOString());class AZ{constructor(e,t,i,r,s,o){this.severity=e,this.message=t,this.optionalParams=i,this.scope=r,this.colorOptions=s,this.timestamp=o}toString(){const{severity:e,message:t,scope:i,colorOptions:r,timestamp:s}=this;return i.length===0?`${IE(s,r)} [${PE(e,r)}] ${t}`:`${IE(s,r)} [${PE(e,r)} ${qH(i,r)}] ${t}`}getFormattedLogInfo(e=!1){const{severity:t,message:i,scope:r,colorOptions:s,timestamp:o,optionalParams:a}=this;let l=null,c="";e&&i instanceof Error?l=i:c=i;const u=r.length===0?"":` ${qH(r,s)}`;let h=`${IE(o,s)} [${PE(t,s)}${u}] ${c}`;if(a===void 0||a.length===0)return l===null?[h]:[h,l];let d=0;for(;h.includes("%s");)h=h.replace("%s",String(a[d++]));return l!==null?[h,l,...a.slice(d)]:[h,...a.slice(d)]}}class PZ{constructor(){this.config=fe(KH)}createLogEvent(e,t,i,r){return new AZ(t,i,r,e.scope,this.config.colorOptions,Date.now())}}let IZ=(()=>{var n;let e=[],t,i,r,s,o,a;return n=class{constructor(c=fe(KH),u=fe(EZ),h=fe(AE(RZ)),d=fe(YH(xZ))??[],f=null){this.scope=(SZ(this,e),d),this._scopedLoggers=en();let g,p,m,v,y,w;if(this.config=c,this._factory=u,this.sinks=h,f===null){this.root=this,this.parent=this,g=this._traceSinks=[],p=this._debugSinks=[],m=this._infoSinks=[],v=this._warnSinks=[],y=this._errorSinks=[],w=this._fatalSinks=[];for(const _ of h){const R=TZ.getHandles(_);((R==null?void 0:R.includes(wm))??!0)&&g.push(_),((R==null?void 0:R.includes(ym))??!0)&&p.push(_),((R==null?void 0:R.includes(Cm))??!0)&&m.push(_),((R==null?void 0:R.includes($f))??!0)&&v.push(_),((R==null?void 0:R.includes(Sm))??!0)&&y.push(_),((R==null?void 0:R.includes(_m))??!0)&&w.push(_)}}else this.root=f.root,this.parent=f,g=this._traceSinks=f._traceSinks,p=this._debugSinks=f._debugSinks,m=this._infoSinks=f._infoSinks,v=this._warnSinks=f._warnSinks,y=this._errorSinks=f._errorSinks,w=this._fatalSinks=f._fatalSinks}trace(c,...u){this.config.level<=wm&&this._emit(this._traceSinks,wm,c,u)}debug(c,...u){this.config.level<=ym&&this._emit(this._debugSinks,ym,c,u)}info(c,...u){this.config.level<=Cm&&this._emit(this._infoSinks,Cm,c,u)}warn(c,...u){this.config.level<=$f&&this._emit(this._warnSinks,$f,c,u)}error(c,...u){this.config.level<=Sm&&this._emit(this._errorSinks,Sm,c,u)}fatal(c,...u){this.config.level<=_m&&this._emit(this._fatalSinks,_m,c,u)}scopeTo(c){const u=this._scopedLoggers;let h=u[c];return h===void 0&&(h=u[c]=new n(this.config,this._factory,null,this.scope.concat(c),this)),h}_emit(c,u,h,d){const f=Bt(h)?h():h,g=this._factory.createLogEvent(this,u,f,d);for(let p=0,m=c.length;p<m;++p)c[p].handleEvent(g)}},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[Of],i=[Of],r=[Of],s=[Of],o=[Of],a=[Of],Hf(n,null,t,{kind:"method",name:"trace",static:!1,private:!1,access:{has:c=>"trace"in c,get:c=>c.trace},metadata:l},null,e),Hf(n,null,i,{kind:"method",name:"debug",static:!1,private:!1,access:{has:c=>"debug"in c,get:c=>c.debug},metadata:l},null,e),Hf(n,null,r,{kind:"method",name:"info",static:!1,private:!1,access:{has:c=>"info"in c,get:c=>c.info},metadata:l},null,e),Hf(n,null,s,{kind:"method",name:"warn",static:!1,private:!1,access:{has:c=>"warn"in c,get:c=>c.warn},metadata:l},null,e),Hf(n,null,o,{kind:"method",name:"error",static:!1,private:!1,access:{has:c=>"error"in c,get:c=>c.error},metadata:l},null,e),Hf(n,null,a,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:c=>"fatal"in c,get:c=>c.fatal},metadata:l},null,e),l&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),n})();class OZ{constructor(e,t){this.type=e,this.cb=t}handle(e){e instanceof this.type&&this.cb.call(null,e)}}const XH=_l("IEventAggregator",n=>n.singleton(kZ));class kZ{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(e,t){if(!e)throw Gn(18,e);if(wt(e)){let i=this.eventLookup[e];if(i!==void 0){i=i.slice();let r=i.length;for(;r-- >0;)i[r](t,e)}}else{const i=this.messageHandlers.slice();let r=i.length;for(;r-- >0;)i[r].handle(e)}}subscribe(e,t){if(!e)throw Gn(19,e);let i,r;return wt(e)?(this.eventLookup[e]===void 0&&(this.eventLookup[e]=[]),i=t,r=this.eventLookup[e]):(i=new OZ(e,t),r=this.messageHandlers),r.push(i),{dispose(){const s=r.indexOf(i);s!==-1&&r.splice(s,1)}}}subscribeOnce(e,t){const i=this.subscribe(e,(r,s)=>{i.dispose(),t(r,s)});return i}}const ZH="AccessThis",DZ="AccessBoundary",OE="AccessGlobal",kE="AccessScope",NZ="ArrayLiteral",LZ="ObjectLiteral",HZ="PrimitiveLiteral",$Z="Template",FZ="Unary",BZ="CallScope",VZ="CallMember",WZ="CallFunction",jZ="CallGlobal",Iy="AccessMember",QH="AccessKeyed",zZ="TaggedTemplate",UZ="Binary",GZ="Conditional",YZ="Assign",KZ="ArrowFunction",qZ="ValueConverter",XZ="BindingBehavior",JH="ArrayBindingPattern",e$="ObjectBindingPattern",t$="BindingIdentifier",ZZ="ForOfStatement",QZ="Interpolation",n$="ArrayDestructuring",JZ="ObjectDestructuring",eQ="DestructuringAssignmentLeaf",tQ="Custom";class i${constructor(e){this.value=e,this.$kind=tQ}evaluate(...e){return this.value}assign(...e){return e}bind(...e){}unbind(...e){}accept(e){}}class nQ{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=XZ,this.key=`_bb_${t}`}}class iQ{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=qZ}}class rQ{constructor(e,t,i="="){this.target=e,this.value=t,this.op=i,this.$kind=YZ}}class sQ{constructor(e,t,i){this.condition=e,this.yes=t,this.no=i,this.$kind=GZ}}class oQ{constructor(e){this.name=e,this.$kind=OE}}class Rm{constructor(e=0){this.ancestor=e,this.$kind=ZH}}class aQ{constructor(){this.$kind=DZ}}class Em{constructor(e,t=0){this.name=e,this.ancestor=t,this.$kind=kE}}const r$=n=>n.$kind===OE||(n.$kind===Iy||n.$kind===QH)&&n.accessGlobal;class DE{constructor(e,t,i=!1){this.object=e,this.name=t,this.optional=i,this.$kind=Iy,this.accessGlobal=r$(e)}}class s${constructor(e,t,i=!1){this.object=e,this.key=t,this.optional=i,this.$kind=QH,this.accessGlobal=r$(e)}}class o${constructor(e,t,i=0,r=!1){this.name=e,this.args=t,this.ancestor=i,this.optional=r,this.$kind=BZ}}class Oy{constructor(e,t,i,r=!1,s=!1){this.object=e,this.name=t,this.args=i,this.optionalMember=r,this.optionalCall=s,this.$kind=VZ}}class ky{constructor(e,t,i=!1){this.func=e,this.args=t,this.optional=i,this.$kind=WZ}}class lQ{constructor(e,t){this.name=e,this.args=t,this.$kind=jZ}}class cQ{constructor(e,t,i){this.operation=e,this.left=t,this.right=i,this.$kind=UZ}}class a${constructor(e,t,i=0){this.operation=e,this.expression=t,this.pos=i,this.$kind=FZ}}class Pi{constructor(e){this.value=e,this.$kind=HZ}}Pi.$undefined=new Pi(void 0),Pi.$null=new Pi(null),Pi.$true=new Pi(!0),Pi.$false=new Pi(!1),Pi.$empty=new Pi("");class NE{constructor(e){this.elements=e,this.$kind=NZ}}NE.$empty=new NE(gt);class LE{constructor(e,t){this.keys=e,this.values=t,this.$kind=LZ}}LE.$empty=new LE(gt,gt);class Dy{constructor(e,t=gt){this.cooked=e,this.expressions=t,this.$kind=$Z}}Dy.$empty=new Dy([""]);class l${constructor(e,t,i,r=gt){this.cooked=e,this.func=i,this.expressions=r,this.$kind=zZ,e.raw=t}}class uQ{constructor(e){this.elements=e,this.$kind=JH}}class hQ{constructor(e,t){this.keys=e,this.values=t,this.$kind=e$}}class Ny{constructor(e){this.name=e,this.$kind=t$}}class dQ{constructor(e,t,i){this.declaration=e,this.iterable=t,this.semiIdx=i,this.$kind=ZZ}}class fQ{constructor(e,t=gt){this.parts=e,this.expressions=t,this.$kind=QZ,this.isMulti=t.length>1,this.firstExpression=t[0]}}class gQ{constructor(e,t,i,r){this.$kind=e,this.list=t,this.source=i,this.initializer=r}}class c${constructor(e,t,i){this.target=e,this.source=t,this.initializer=i,this.$kind=eQ}}class HE{constructor(e,t,i=!1){this.args=e,this.body=t,this.rest=i,this.$kind=KZ}}const $E=String,Ly=()=>Object.create(null),cn=(n,...e)=>new Error(`AUR${$E(n).padStart(4,"0")}: ${mQ(n,...e)}`),pQ={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`},mQ=(n,...e)=>{var i;let t=pQ[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=$E(l[a.slice(1)]):l=$E(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t},Ff=dh.createInterface("IExpressionParser");class u${constructor(){this._expressionLookup=Ly(),this._forOfLookup=Ly(),this._interpolationLookup=Ly()}parse(e,t){let i;switch(t){case g$:return new i$(e);case Hy:return i=this._interpolationLookup[e],i===void 0&&(i=this._interpolationLookup[e]=this.$parse(e,t)),i;case xl:return i=this._forOfLookup[e],i===void 0&&(i=this._forOfLookup[e]=this.$parse(e,t)),i;default:{if(e.length===0){if(t===CQ||t===f$)return Pi.$empty;throw HQ()}return i=this._expressionLookup[e],i===void 0&&(i=this._expressionLookup[e]=this.$parse(e,t)),i}}}$parse(e,t){return Ot=e,bt=0,ma=e.length,es=0,gh=0,_e=6291456,mn="",un=ph(0),Vt=!0,kt=!1,Tm=!0,VE=-1,Yn(61,t===void 0?f$:t)}}u$.register=dm(Ff);function FE(n){switch(n){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return n}}const bQ=Pi.$false,vQ=Pi.$true,wQ=Pi.$null,h$=Pi.$undefined,xm=new Rm(0),BE=new Rm(1),yQ=new aQ,El="None",Hy="Interpolation",xl="IsIterator",d$="IsChainable",CQ="IsFunction",f$="IsProperty",g$="IsCustom";let Ot="",bt=0,ma=0,es=0,gh=0,_e=6291456,mn="",un,Vt=!0,kt=!1,Tm=!0,VE=-1;const Mm=String.fromCharCode,ph=n=>Ot.charCodeAt(n),Tl=()=>Ot.slice(gh,bt),SQ="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Yn(n,e){if(e===g$)return new i$(Ot);if(bt===0){if(e===Hy)return PQ();if(Ge(),_e&4194304)throw DQ()}Vt=513>n,kt=!1,Tm=514>n;let t=!1,i,r=0;if(_e&131072){const s=Bf[_e&63];Ge(),i=new a$(s,Yn(514,e)),Vt=!1}else{e:switch(_e){case 12295:r=es,Vt=!1,Tm=!1;do switch(Ge(),++r,_e){case 65546:if(Ge(),!(_e&12288))throw Ml();break;case 11:case 12:throw Ml();case 2162701:if(kt=!0,Ge(),!(_e&12288)){i=r===0?xm:r===1?BE:new Rm(r),t=!0;break e}break;default:if(_e&2097152){i=r===0?xm:r===1?BE:new Rm(r);break e}throw NQ()}while(_e===12295);case 4096:{const s=mn;if(e===xl)i=new Ny(s);else if(Tm&&SQ.includes(s))i=new oQ(s);else{if(Tm&&s==="import")throw WQ();i=new Em(s,r)}if(Vt=!kt,Ge(),ba(51)){if(_e===524297)throw R$();const o=kt,a=es;++es;const l=Yn(62,El);kt=o,es=a,Vt=!1,i=new HE([new Ny(s)],l)}break}case 11:throw YQ();case 12:throw jE();case 12292:switch(Vt=!1,Ge(),es){case 0:i=xm;break;case 1:i=BE;break;default:i=new Rm(es);break}break;case 12293:Vt=!1,Ge(),i=yQ;break;case 2688008:i=EQ(e);break;case 2688019:i=Ot.search(/\s+of\s+/)>bt?_Q():xQ(e);break;case 524297:i=AQ(e);break;case 2163760:i=new Dy([mn]),Vt=!1,Ge();break;case 2163761:i=WE(e,i,!1);break;case 16384:case 32768:i=new Pi(mn),Vt=!1,Ge();break;case 8194:case 8195:case 8193:case 8192:i=Bf[_e&63],Vt=!1,Ge();break;default:throw bt>=ma?LQ():zE()}if(e===xl)return MQ(i);switch(_e){case 2228280:case 2228281:i=new a$(Bf[_e&63],i,1),Ge(),Vt=!1;break}if(514<n)return i;if(_e===11||_e===12)throw Ml();if(i.$kind===ZH)switch(_e){case 2162701:if(kt=!0,Vt=!1,Ge(),!(_e&13312))throw UE();if(_e&12288)i=new Em(mn,i.ancestor),Ge();else if(_e===2688008)i=new ky(i,So(),!0);else if(_e===2688019)i=$y(i,!0);else throw Fy();break;case 65546:if(Vt=!kt,Ge(),!(_e&12288))throw Ml();i=new Em(mn,i.ancestor),Ge();break;case 11:case 12:throw Ml();case 2688008:i=new ky(i,So(),t);break;case 2688019:i=$y(i,t);break;case 2163760:i=m$(i);break;case 2163761:i=WE(e,i,!0);break}for(;(_e&65536)>0;)switch(_e){case 2162701:i=RQ(i);break;case 65546:if(Ge(),!(_e&12288))throw Ml();i=p$(i,!1);break;case 11:case 12:throw Ml();case 2688008:i.$kind===kE?i=new o$(i.name,So(),i.ancestor,!1):i.$kind===Iy?i=new Oy(i.object,i.name,So(),i.optional,!1):i.$kind===OE?i=new lQ(i.name,So()):i=new ky(i,So(),!1);break;case 2688019:i=$y(i,!1);break;case 2163760:if(kt)throw Fy();i=m$(i);break;case 2163761:if(kt)throw Fy();i=WE(e,i,!0);break}}if(_e===11||_e===12)throw Ml();if(513<n)return i;for(;(_e&262144)>0;){const s=_e;if((s&960)<=n)break;Ge(),i=new cQ(Bf[s&63],i,Yn(s&960,e)),Vt=!1}if(63<n)return i;if(ba(6291479)){const s=Yn(62,e);_o(6291477),i=new sQ(i,s,Yn(62,e)),Vt=!1}if(62<n)return i;switch(_e){case 4194350:case 4194356:case 4194357:case 4194358:case 4194359:{if(!Vt)throw $Q();const s=Bf[_e&63];Ge(),i=new rQ(i,Yn(62,e),s);break}}if(61<n)return i;for(;ba(6291481);){if(_e===6291456)throw FQ();const s=mn;Ge();const o=new Array;for(;ba(6291477);)o.push(Yn(62,e));i=new iQ(i,s,o)}for(;ba(6291480);){if(_e===6291456)throw BQ();const s=mn;Ge();const o=new Array;for(;ba(6291477);)o.push(Yn(62,e));i=new nQ(i,s,o)}if(_e!==6291456){if(e===Hy&&_e===7340046)return i;if(e===d$&&_e===6291478){if(bt===ma)throw zE();return VE=bt-1,i}throw Tl()==="of"?VQ():zE()}return i}function _Q(){const n=[],e=new gQ(n$,n,void 0,void 0);let t="",i=!0,r=0;for(;i;)switch(Ge(),_e){case 7340052:i=!1,s();break;case 6291472:s();break;case 4096:t=Tl();break;default:throw UQ()}return _o(7340052),e;function s(){t!==""?(n.push(new c$(new DE(xm,t),new s$(xm,new Pi(r++)),void 0)),t=""):r++}}function So(){const n=kt;Ge();const e=[];for(;_e!==7340047&&(e.push(Yn(62,El)),!!ba(6291472)););return _o(7340047),Vt=!1,kt=n,e}function $y(n,e){const t=kt;return Ge(),n=new s$(n,Yn(62,El),e),_o(7340052),Vt=!t,kt=t,n}function RQ(n){if(kt=!0,Vt=!1,Ge(),!(_e&13312))throw UE();if(_e&12288)return p$(n,!0);if(_e===2688008)return n.$kind===kE?new o$(n.name,So(),n.ancestor,!0):n.$kind===Iy?new Oy(n.object,n.name,So(),n.optional,!0):new ky(n,So(),!0);if(_e===2688019)return $y(n,!0);throw Fy()}function p$(n,e){const t=mn;switch(_e){case 2162701:{kt=!0,Vt=!1;const i=bt,r=gh,s=_e,o=un,a=mn,l=Vt,c=kt;if(Ge(),!(_e&13312))throw UE();return _e===2688008?new Oy(n,t,So(),e,!0):(bt=i,gh=r,_e=s,un=o,mn=a,Vt=l,kt=c,new DE(n,t,e))}case 2688008:return Vt=!1,new Oy(n,t,So(),e,!1);default:return Vt=!kt,Ge(),new DE(n,t,e)}}function EQ(n){Ge();const e=bt,t=gh,i=_e,r=un,s=mn,o=kt,a=[];let l=1,c=!1;e:for(;;){if(_e===12){if(Ge(),_e!==4096)throw Ml();if(a.push(new Ny(mn)),Ge(),_e===6291472)throw GQ();if(_e!==7340047||(Ge(),_e!==51))throw jE();Ge();const d=kt,f=es;++es;const g=Yn(62,El);return kt=d,es=f,Vt=!1,new HE(a,g,!0)}switch(_e){case 4096:a.push(new Ny(mn)),Ge();break;case 7340047:Ge();break e;case 524297:case 2688019:Ge(),l=4;break;case 6291472:l=2,c=!0;break e;case 2688008:l=2;break e;default:Ge(),l=2;break}switch(_e){case 6291472:if(Ge(),c=!0,l===1)break;break e;case 7340047:Ge();break e;case 4194350:l===1&&(l=3);break e;case 51:if(c)throw By();Ge(),l=2;break e;default:l===1&&(l=2);break e}}if(_e===51){if(l===1){if(Ge(),_e===524297)throw R$();const d=kt,f=es;++es;const g=Yn(62,El);return kt=d,es=f,Vt=!1,new HE(a,g)}throw By()}else if(l===1&&a.length===0)throw C$(51);if(c)switch(l){case 2:throw By();case 3:throw S$();case 4:throw _$()}bt=e,gh=t,_e=i,un=r,mn=s,kt=o;const u=kt,h=Yn(62,n);if(kt=u,_o(7340047),_e===51)switch(l){case 2:throw By();case 3:throw S$();case 4:throw _$()}return h}function xQ(n){const e=kt;Ge();const t=new Array;for(;_e!==7340052;)if(ba(6291472)){if(t.push(h$),_e===7340052)break}else if(t.push(Yn(62,n===xl?El:n)),ba(6291472)){if(_e===7340052)break}else break;return kt=e,_o(7340052),n===xl?new uQ(t):(Vt=!1,new NE(t))}const TQ=[JH,e$,t$,n$,JZ];function MQ(n){if(!TQ.includes(n.$kind)||_e!==4204594)throw w$(n.$kind);Ge();const e=n,t=Yn(61,d$);return new dQ(e,t,VE)}function AQ(n){const e=kt,t=new Array,i=new Array;for(Ge();_e!==7340046;){if(t.push(mn),_e&49152)Ge(),_o(6291477),i.push(Yn(62,n===xl?El:n));else if(_e&12288){const r=un,s=_e,o=bt;Ge(),ba(6291477)?i.push(Yn(62,n===xl?El:n)):(un=r,_e=s,bt=o,i.push(Yn(515,n===xl?El:n)))}else throw jQ();_e!==7340046&&_o(6291472)}return kt=e,_o(7340046),n===xl?new hQ(t,i):(Vt=!1,new LE(t,i))}function PQ(){const n=[],e=[],t=ma;let i="";for(;bt<t;){switch(un){case 36:if(ph(bt+1)===123){n.push(i),i="",bt+=2,un=ph(bt),Ge();const r=Yn(61,Hy);e.push(r);continue}else i+="$";break;case 92:i+=Mm(FE(Xe()));break;default:i+=Mm(un)}Xe()}return e.length?(n.push(i),new fQ(n,e)):null}function WE(n,e,t){const i=kt,r=[mn];_o(2163761);const s=[Yn(62,n)];for(;(_e=kQ())!==2163760;)r.push(mn),_o(2163761),s.push(Yn(62,n));return r.push(mn),Vt=!1,kt=i,t?(Ge(),new l$(r,r,e,s)):(Ge(),new Dy(r,s))}function m$(n){Vt=!1;const e=[mn];return Ge(),new l$(e,e,n)}function Ge(){for(;bt<ma;)if(gh=bt,(_e=qQ[un]())!=null)return;_e=6291456}function Xe(){return un=ph(++bt)}function IQ(){for(;XQ[Xe()];);const n=KQ[mn=Tl()];return n===void 0?4096:n}function b$(n){let e=un;if(n===!1){do e=Xe();while(e<=57&&e>=48);if(e!==46)return mn=parseInt(Tl(),10),32768;if(e=Xe(),bt>=ma)return mn=parseInt(Tl().slice(0,-1),10),32768}if(e<=57&&e>=48)do e=Xe();while(e<=57&&e>=48);else un=ph(--bt);return mn=parseFloat(Tl()),32768}function OQ(){const n=un;Xe();let e=0;const t=new Array;let i=bt;for(;un!==n;)if(un===92)t.push(Ot.slice(i,bt)),Xe(),e=FE(un),Xe(),t.push(Mm(e)),i=bt;else{if(bt>=ma)throw zQ();Xe()}const r=Ot.slice(i,bt);return Xe(),t.push(r),mn=t.join(""),16384}function v$(){let n=!0,e="";for(;Xe()!==96;)if(un===36)if(bt+1<ma&&ph(bt+1)===123){bt++,n=!1;break}else e+="$";else if(un===92)e+=Mm(FE(Xe()));else{if(bt>=ma)throw y$();e+=Mm(un)}return Xe(),mn=e,n?2163760:2163761}const kQ=()=>{if(bt>=ma)throw y$();return bt--,v$()},ba=n=>_e===n?(Ge(),!0):!1,_o=n=>{if(_e===n)Ge();else throw C$(n)},DQ=()=>cn(151,Ot),jE=()=>cn(152,Ot),Ml=()=>cn(153,Ot),NQ=()=>cn(154,Ot),LQ=()=>cn(155,Ot),zE=()=>cn(156,Tl(),bt,Ot),HQ=()=>cn(157),$Q=()=>cn(158,Ot),FQ=()=>cn(159,Ot),BQ=()=>cn(160,Ot),VQ=()=>cn(161,Ot),WQ=()=>cn(162,Ot),w$=n=>cn(163,Ot,n),jQ=()=>cn(164,Ot),zQ=()=>cn(165,Ot),y$=()=>cn(166,Ot),C$=n=>cn(167,Bf[n&63],Ot),UQ=()=>cn(170,Tl(),bt,Ot),UE=()=>cn(171,Tl(),bt-1,Ot),Fy=()=>cn(172,Ot),By=()=>cn(173,Ot),S$=()=>cn(174,Ot),_$=()=>cn(175,Ot),GQ=()=>cn(176,Ot),R$=()=>cn(178,Ot),YQ=()=>cn(179,bt-1,Ot),Bf=[bQ,vQ,wQ,h$,"this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163760,2163761,"of","=>","+=","-=","*=","/=","++","--"],KQ=Object.assign(Ly(),{true:8193,null:8194,false:8192,undefined:8195,this:12293,$this:12292,$parent:12295,in:6562213,instanceof:6562214,typeof:139305,void:139306,of:4204594}),{CharScanners:qQ,IdParts:XQ}=(()=>{const n=()=>{throw cn(168,Ot)};n.notMapped=!0;const e={AsciiIdPart:[36,0,48,58,65,91,95,0,97,123],IdStart:[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Digit:[48,58],Skip:[0,33,127,161]},t=(o,a,l,c)=>{const u=l.length;for(let h=0;h<u;h+=2){const d=l[h];let f=l[h+1];f=f>0?f:d+1,o&&o.fill(c,d,f)}},i=(o=>(t(o,null,e.IdStart,1),t(o,null,e.Digit,1),o))(new Uint8Array(65535)),r=o=>()=>(Xe(),o),s=new Array(65535);return s.fill(n,0,65535),t(s,null,e.Skip,()=>(Xe(),null)),t(s,null,e.IdStart,IQ),t(s,null,e.Digit,()=>b$(!1)),s[34]=s[39]=()=>OQ(),s[96]=()=>v$(),s[33]=()=>Xe()!==61?131119:Xe()!==61?6553950:(Xe(),6553952),s[61]=()=>Xe()===62?(Xe(),51):un!==61?4194350:Xe()!==61?6553949:(Xe(),6553951),s[38]=()=>Xe()!==38?6291480:(Xe(),6553884),s[124]=()=>Xe()!==124?6291481:(Xe(),6553819),s[63]=()=>{if(Xe()===46){const o=ph(bt+1);return o<=48||o>=57?(Xe(),2162701):6291479}return un!==63?6291479:(Xe(),6553754)},s[46]=()=>Xe()<=57&&un>=48?b$(!0):un===46?Xe()!==46?11:(Xe(),12):65546,s[60]=()=>Xe()!==61?6554017:(Xe(),6554019),s[62]=()=>Xe()!==61?6554018:(Xe(),6554020),s[37]=r(6554156),s[40]=r(2688008),s[41]=r(7340047),s[42]=()=>Xe()!==61?6554155:(Xe(),4194358),s[43]=()=>Xe()===43?(Xe(),2228280):un!==61?2490855:(Xe(),4194356),s[44]=r(6291472),s[45]=()=>Xe()===45?(Xe(),2228281):un!==61?2490856:(Xe(),4194357),s[47]=()=>Xe()!==61?6554157:(Xe(),4194359),s[58]=r(6291477),s[59]=r(6291478),s[91]=r(2688019),s[93]=r(7340052),s[123]=r(524297),s[125]=r(7340046),{CharScanners:s,IdParts:i}})(),va=dh.createInterface,Vf=Object.freeze,{aliasTo:E$,singleton:GE}=ch,Ro="Interpolation",x$="IsFunction",wa="IsProperty",Wf="custom-element",Am=Vf({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),Vy=va("ITemplateCompiler"),T$=va("IAttrMapper"),Kn=(n,...e)=>new Error(`AUR${String(n).padStart(4,"0")}: ${QQ(n,...e)}`),ZQ={88:"AttributeParser is already initialized; cannot add patterns after initialization.",89:'Attribute pattern "{{0}}" has already been registered.',99:"Method {{0}} not implemented",157:"Binding command {{0}} has already been registered.",701:'Template compilation error in element "{{0:name}}": the root <template> cannot be a local element template.',702:'Template compilation error: attribute "{{0}}" is invalid on element surrogate.',703:'Template compilation error: template controller "{{0}}" is invalid on element surrogate.',704:'Template compilation error: Invalid command "{{0:.command}}" for <let>. Only to-view/bind supported.',706:'Template compilation error: detected projection with [au-slot="{{0}}"] attempted on a non custom element {{1}}.',707:"Template compilation error: creating binding to non-bindable property {{0}} on {{1}}.",708:'Template compilation error: the custom element "{{0}}" does not have any content other than local template(s).',709:'Template compilation error: local element template needs to be defined directly under root of element "{{0}}".',710:'Template compilation error: bindable properties of local element "{{0}}" template needs to be defined directly under <template>.',711:`Template compilation error: the attribute 'property' is missing in {{0:outerHTML}} in local element "{{1}}"`,712:"Template compilation error: Bindable property and attribute needs to be unique; found property: {{0}}, attribute: {{1}}",713:'Template compilation error: unknown binding command: "{{0}}".{{0:bindingCommandHelp}}',714:'Template compilation error: primary already exists on element/attribute "{{0}}"',715:'Template compilation error: the value of "as-custom-element" attribute cannot be empty for local element in element "{{0}}"',716:'Template compilation error: duplicate definition of the local template named "{{0}} in element {{1}}"',717:'Template compilation error: detected a usage of "<slot>" element without specifying shadow DOM options in element: {{0}}',718:'Spreading template controller "{{0}}" is not supported.',719:"Attribute {{0}} has been already registered for {{1:element}}",720:'Spreading syntax "...xxx" is reserved. Encountered "...{{0}}"',721:'Usage of $bindables is only allowed on custom element. Encountered: <{{0}} {{1}}="{{2}}">',722:"Invalid platform object provided to the compilation, no DOM API found.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?"},QQ=(n,...e)=>{var i;let t=ZQ[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=JQ(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=String(l[a.slice(1)]):l=String(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t};function JQ(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}var M$,A$,P$,I$,O$;class YE{constructor(e,t,i,r){if(this.chars=e,this.repeat=t,this.isSymbol=i,this.isInverted=r,r)switch(e.length){case 0:this.has=this._hasOfNoneInverse;break;case 1:this.has=this._hasOfSingleInverse;break;default:this.has=this._hasOfMultipleInverse}else switch(e.length){case 0:this.has=this._hasOfNone;break;case 1:this.has=this._hasOfSingle;break;default:this.has=this._hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}_hasOfMultiple(e){return this.chars.includes(e)}_hasOfSingle(e){return this.chars===e}_hasOfNone(e){return!1}_hasOfMultipleInverse(e){return!this.chars.includes(e)}_hasOfSingleInverse(e){return this.chars!==e}_hasOfNoneInverse(e){return!0}}class eJ{constructor(){this.parts=gt,this._pattern="",this._currentRecord={},this._partsRecord={}}get pattern(){const e=this._pattern;return e===""?null:e}set pattern(e){e==null?(this._pattern="",this.parts=gt):(this._pattern=e,this.parts=this._partsRecord[e])}append(e,t){const i=this._currentRecord;i[e]===void 0?i[e]=t:i[e]+=t}next(e){const t=this._currentRecord;let i;t[e]!==void 0&&(i=this._partsRecord,i[e]===void 0?i[e]=[t[e]]:i[e].push(t[e]),t[e]=void 0)}}class KE{get _pattern(){return this._isEndpoint?this._patterns[0]:null}constructor(e,...t){this.charSpec=e,this._nextStates=[],this._types=null,this._isEndpoint=!1,this._patterns=t}findChild(e){const t=this._nextStates,i=t.length;let r=null,s=0;for(;s<i;++s)if(r=t[s],e.equals(r.charSpec))return r;return null}append(e,t){const i=this._patterns;i.includes(t)||i.push(t);let r=this.findChild(e);return r==null&&(r=new KE(e,t),this._nextStates.push(r),e.repeat&&r._nextStates.push(r)),r}findMatches(e,t){const i=[],r=this._nextStates,s=r.length;let o=0,a=null,l=0,c=0;for(;l<s;++l)if(a=r[l],a.charSpec.has(e))if(i.push(a),o=a._patterns.length,c=0,a.charSpec.isSymbol)for(;c<o;++c)t.next(a._patterns[c]);else for(;c<o;++c)t.append(a._patterns[c],e);return i}}class k${constructor(e){this.text=e;const t=this._len=e.length,i=this._specs=[];let r=0;for(;t>r;++r)i.push(new YE(e[r],!1,!1,!1))}eachChar(e){const t=this._len,i=this._specs;let r=0;for(;t>r;++r)e(i[r])}}class tJ{constructor(e){this.text="PART",this._spec=new YE(e,!0,!1,!0)}eachChar(e){e(this._spec)}}class nJ{constructor(e){this.text=e,this._spec=new YE(e,!1,!0,!1)}eachChar(e){e(this._spec)}}class iJ{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const rJ=va("ISyntaxInterpreter",n=>n.singleton(sJ));class sJ{constructor(){this._rootState=new KE(null),this._initialStates=[this._rootState]}add(e){e=e.slice(0).sort((d,f)=>d.pattern>f.pattern?1:-1);const t=e.length;let i,r,s,o,a,l,c,u=0,h;for(;t>u;){for(i=this._rootState,r=e[u],s=r.pattern,o=new iJ,a=this._parse(r,o),l=a.length,c=d=>i=i.append(d,s),h=0;l>h;++h)a[h].eachChar(c);i._types=o,i._isEndpoint=!0,++u}}interpret(e){const t=new eJ,i=e.length;let r=this._initialStates,s=0,o;for(;s<i&&(r=this._getNextStates(r,e.charAt(s),t),r.length!==0);++s);return r=r.filter(oJ),r.length>0&&(r.sort(aJ),o=r[0],o.charSpec.isSymbol||t.next(o._pattern),t.pattern=o._pattern),t}_getNextStates(e,t,i){const r=[];let s=null;const o=e.length;let a=0;for(;a<o;++a)s=e[a],r.push(...s.findMatches(t,i));return r}_parse(e,t){const i=[],r=e.pattern,s=r.length,o=e.symbols;let a=0,l=0,c="";for(;a<s;)c=r.charAt(a),o.length===0||!o.includes(c)?a===l&&c==="P"&&r.slice(a,a+4)==="PART"?(l=a=a+4,i.push(new tJ(o)),++t.dynamics):++a:a!==l?(i.push(new k$(r.slice(l,a))),++t.statics,l=a):(i.push(new nJ(r.slice(l,a+1))),++t.symbols,l=++a);return l!==a&&(i.push(new k$(r.slice(l,a))),++t.statics),i}}function oJ(n){return n._isEndpoint}function aJ(n,e){const t=n._types,i=e._types;return t.statics!==i.statics?i.statics-t.statics:t.dynamics!==i.dynamics?i.dynamics-t.dynamics:t.symbols!==i.symbols?i.symbols-t.symbols:0}class ts{constructor(e,t,i,r,s=null){this.rawName=e,this.rawValue=t,this.target=i,this.command=r,this.parts=s}}const lJ=va("IAttributePattern"),qE=va("IAttributeParser",n=>n.singleton(cJ));class cJ{constructor(){this._cache={},this._patterns={},this._initialized=!1,this._allDefinitions=[],this._interpreter=fe(rJ),this._container=fe(Df)}registerPattern(e,t){if(this._initialized)throw Kn(88);const i=this._patterns;for(const{pattern:r}of e){if(i[r]!=null)throw Kn(89,r);i[r]={patternType:t}}this._allDefinitions.push(...e)}_initialize(){this._interpreter.add(this._allDefinitions);const e=this._container;for(const[,t]of Object.entries(this._patterns))t.pattern=e.get(t.patternType)}parse(e,t){this._initialized||(this._initialize(),this._initialized=!0);let i=this._cache[e];i==null&&(i=this._cache[e]=this._interpreter.interpret(e));const r=i.pattern;return r==null?new ts(e,t,e,null,null):this._patterns[r].pattern[r](e,t,i.parts)}}const Gc=Vf({name:hh("attribute-pattern"),create(n,e){return{register(t){t.get(qE).registerPattern(n,e),GE(lJ,e).register(t)}}}});class XE{"PART.PART"(e,t,i){return new ts(e,t,i[0],i[1])}"PART.PART.PART"(e,t,i){return new ts(e,t,`${i[0]}.${i[1]}`,i[2])}}M$=Symbol.metadata,XE[M$]={[fa]:Gc.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],XE)};class ZE{ref(e,t,i){return new ts(e,t,"element","ref")}"PART.ref"(e,t,i){let r=i[0];return r==="view-model"&&(r="component",console.warn(`[aurelia] Detected view-model.ref usage: "${e}=${t}". This is deprecated and component.ref should be used instead`)),new ts(e,t,r,"ref")}}A$=Symbol.metadata,ZE[A$]={[fa]:Gc.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],ZE)};class QE{"PART.trigger:PART"(e,t,i){return new ts(e,t,i[0],"trigger",i)}"PART.capture:PART"(e,t,i){return new ts(e,t,i[0],"capture",i)}}P$=Symbol.metadata,QE[P$]={[fa]:Gc.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],QE)};class D${":PART"(e,t,i){return new ts(e,t,i[0],"bind")}}I$=Symbol.metadata,D$[I$]={[fa]:Gc.create([{pattern:":PART",symbols:":"}],D$)};class N${"@PART"(e,t,i){return new ts(e,t,i[0],"trigger")}"@PART:PART"(e,t,i){return new ts(e,t,i[0],"trigger",[i[0],"trigger",...i.slice(1)])}}O$=Symbol.metadata,N$[O$]={[fa]:Gc.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],N$)};const JE=Sl.get,L$=Sl.define,H$="ra",$$="rb",F$="rc",B$="rd",V$="re",W$="rf",ex="rg",j$="ri",z$="rj",U$="rk",G$="rl",Y$="ha",K$="hb",q$="hc",uJ="hd",X$="he",Z$="hf",Q$="hg",J$="hs",e2="hp",t2="svb",hi=Vf({hydrateElement:H$,hydrateAttribute:$$,hydrateTemplateController:F$,hydrateLetElement:B$,setProperty:V$,interpolation:W$,propertyBinding:ex,letBinding:j$,refBinding:z$,iteratorBinding:U$,multiAttr:G$,textBinding:Y$,listenerBinding:K$,attributeBinding:q$,stylePropertyBinding:uJ,setAttribute:X$,setClassAttribute:Z$,setStyleAttribute:Q$,spreadTransferedBinding:J$,spreadElementProp:e2,spreadValueBinding:t2}),jf=va("Instruction");class Al{constructor(e,t){this.from=e,this.to=t,this.type=W$}}class Pm{constructor(e,t,i){this.from=e,this.to=t,this.mode=i,this.type=ex}}class hJ{constructor(e,t,i){this.forOf=e,this.to=t,this.props=i,this.type=U$}}class dJ{constructor(e,t){this.from=e,this.to=t,this.type=z$}}class zf{constructor(e,t){this.value=e,this.to=t,this.type=V$}}class fJ{constructor(e,t,i){this.value=e,this.to=t,this.command=i,this.type=G$}}class gJ{constructor(e,t,i,r,s,o){this.res=e,this.props=t,this.projections=i,this.containerless=r,this.captures=s,this.data=o,this.type=H$}}class tx{constructor(e,t,i){this.res=e,this.alias=t,this.props=i,this.type=$$}}class pJ{constructor(e,t,i,r){this.def=e,this.res=t,this.alias=i,this.props=r,this.type=F$}}class mJ{constructor(e,t){this.instructions=e,this.toBindingContext=t,this.type=B$}}class n2{constructor(e,t){this.from=e,this.to=t,this.type=j$}}class bJ{constructor(e){this.from=e,this.type=Y$}}class i2{constructor(e,t,i,r){this.from=e,this.to=t,this.capture=i,this.modifier=r,this.type=K$}}class r2{constructor(e,t){this.value=e,this.to=t,this.type=X$}}class s2{constructor(e){this.value=e,this.type=Z$}}class o2{constructor(e){this.value=e,this.type=Q$}}class nx{constructor(e,t,i){this.attr=e,this.from=t,this.to=i,this.type=q$}}class a2{constructor(){this.type=J$}}class l2{constructor(e){this.instruction=e,this.type=e2}}class ix{constructor(e,t){this.target=e,this.from=t,this.type=t2}}class Wy{constructor(e,t,i,r){this.Type=e,this.name=t,this.aliases=i,this.key=r}static create(e,t){let i,r;return wt(e)?(i=e,r={name:i}):(i=e.name,r=e),new Wy(t,zc(rx(t,"name"),i),ui(rx(t,"aliases"),r.aliases,t.aliases),Uf(i))}register(e,t){const i=this.Type,r=typeof t=="string"?Uf(t):this.key,s=this.aliases;e.has(r,!1)?console.warn(`[DEV:aurelia] ${Kn(157,this.name)}`):e.register(e.has(i,!1)?null:GE(i,i),E$(i,r),...s.map(o=>E$(i,Uf(o))))}}const qi="binding-command",jy=hh(qi),Uf=n=>`${jy}:${n}`,rx=(n,e)=>JE($H.annotation.keyFor(e),n),vJ=(()=>{const n="__au_static_resource__",e=(t,i,r)=>{var o;let s=JE(n,t);return s==null&&((o=t.$au)==null?void 0:o.type)===i&&(s=r(t.$au,t),L$(s,t,n)),s};return Vf({name:jy,keyFrom:Uf,define(t,i){const r=Wy.create(t,i),s=r.Type;return L$(r,s,jy,da),s},getAnnotation:rx,find(t,i){const r=t.find(qi,i);return r==null?null:JE(jy,r)??e(r,qi,Wy.create)??null},get(t,i){try{return t.get(Lf(Uf(i)))}catch(r){throw console.log(`


[DEV:aurelia] Cannot retrieve binding command with name




`,i),r}return t.get(Lf(Uf(i)))}})})();class c2{get ignoreAttr(){return!1}build(e,t,i){let s=e.attr.target,o=e.attr.rawValue;return o=o===""?Mi(s):o,e.bindable==null?s=i.map(e.node,s)??Mi(s):s=e.bindable.name,new Pm(t.parse(o,wa),s,1)}}c2.$au={type:qi,name:"one-time"};class u2{get ignoreAttr(){return!1}build(e,t,i){let s=e.attr.target,o=e.attr.rawValue;return o=o===""?Mi(s):o,e.bindable==null?s=i.map(e.node,s)??Mi(s):s=e.bindable.name,new Pm(t.parse(o,wa),s,2)}}u2.$au={type:qi,name:"to-view"};class h2{get ignoreAttr(){return!1}build(e,t,i){const r=e.attr;let s=r.target,o=r.rawValue;return o=o===""?Mi(s):o,e.bindable==null?s=i.map(e.node,s)??Mi(s):s=e.bindable.name,new Pm(t.parse(o,wa),s,4)}}h2.$au={type:qi,name:"from-view"};class d2{get ignoreAttr(){return!1}build(e,t,i){const r=e.attr;let s=r.target,o=r.rawValue;return o=o===""?Mi(s):o,e.bindable==null?s=i.map(e.node,s)??Mi(s):s=e.bindable.name,new Pm(t.parse(o,wa),s,6)}}d2.$au={type:qi,name:"two-way"};class f2{get ignoreAttr(){return!1}build(e,t,i){const r=e.attr,s=e.bindable;let o=r.rawValue,a=r.target,l,c;return o=o===""?Mi(a):o,s==null?(c=i.isTwoWay(e.node,a)?6:2,a=i.map(e.node,a)??Mi(a)):(l=e.def.defaultBindingMode??0,c=s.mode===0||s.mode==null?l==null||l===0?2:l:s.mode,a=s.name),new Pm(t.parse(o,wa),a,wt(c)?Am[c]??0:c)}}f2.$au={type:qi,name:"bind"};class g2{constructor(){this._attrParser=fe(qE)}get ignoreAttr(){return!1}build(e,t){const i=e.bindable===null?Mi(e.attr.target):e.bindable.name,r=t.parse(e.attr.rawValue,"IsIterator");let s=gt;if(r.semiIdx>-1){const o=e.attr.rawValue.slice(r.semiIdx+1),a=o.indexOf(":");if(a>-1){const l=o.slice(0,a).trim(),c=o.slice(a+1).trim(),u=this._attrParser.parse(l,c);s=[new fJ(c,u.target,u.command)]}}return new hJ(r,i,s)}}g2.$au={type:qi,name:"for"};class p2{get ignoreAttr(){return!0}build(e,t){var i;return new i2(t.parse(e.attr.rawValue,x$),e.attr.target,!1,((i=e.attr.parts)==null?void 0:i[2])??null)}}p2.$au={type:qi,name:"trigger"};class m2{get ignoreAttr(){return!0}build(e,t){var i;return new i2(t.parse(e.attr.rawValue,x$),e.attr.target,!0,((i=e.attr.parts)==null?void 0:i[2])??null)}}m2.$au={type:qi,name:"capture"};class b2{get ignoreAttr(){return!0}build(e,t){const i=e.attr,r=i.target;let s=i.rawValue;return s=s===""?Mi(r):s,new nx(r,t.parse(s,wa),r)}}b2.$au={type:qi,name:"attr"};class v2{get ignoreAttr(){return!0}build(e,t){return new nx("style",t.parse(e.attr.rawValue,wa),e.attr.target)}}v2.$au={type:qi,name:"style"};class w2{get ignoreAttr(){return!0}build(e,t){return new nx("class",t.parse(e.attr.rawValue,wa),e.attr.target)}}w2.$au={type:qi,name:"class"};class y2{get ignoreAttr(){return!0}build(e,t){return new dJ(t.parse(e.attr.rawValue,wa),e.attr.target)}}y2.$au={type:qi,name:"ref"};class C2{get ignoreAttr(){return!1}build(e){return new ix(e.attr.target,e.attr.rawValue)}}C2.$au={type:qi,name:"spread"},typeof SuppressedError=="function"&&SuppressedError;const wJ=va("ITemplateElementFactory",n=>n.singleton(yJ)),S2={};class yJ{constructor(){this.p=fe(Nf),this._template=this.t()}t(){return this.p.document.createElement("template")}createTemplate(e){var i;if(wt(e)){let r=S2[e];if(r===void 0){const s=this._template;s.innerHTML=e;const o=s.content.firstElementChild;t(o)?(this._template=this.t(),r=s):(s.content.removeChild(o),r=o),S2[e]=r}return r.cloneNode(!0)}if(e.nodeName!=="TEMPLATE"){const r=this.t();return r.content.appendChild(e),r}return(i=e.parentNode)==null||i.removeChild(e),e.cloneNode(!0);function t(r){if(r==null||r.nodeName!=="TEMPLATE"||r.nextElementSibling!=null)return!0;const o=r.previousSibling;if(o!=null)switch(o.nodeType){case 3:return o.textContent.trim().length>0}const a=r.nextSibling;if(a!=null)switch(a.nodeType){case 3:return a.textContent.trim().length>0}return!1}}}const sx="au-start",ox="au-end",ax=(n,e,t)=>n.insertBefore(e,t),_2=(n,e,t)=>{if(n===null)return;const i=t.length;let r=0;for(;i>r;)n.insertBefore(t[r],e),++r},mh=(n,e)=>n.content.appendChild(e),R2=(n,e)=>{const t=e.length;let i=0;for(;t>i;)n.content.appendChild(e[i]),++i},E2=n=>n.nodeType===1,x2=n=>n.nodeType===3,Im="au-slot",T2="default",Om=(n=>()=>`anonymous-${++n}`)(0);class M2{constructor(){this.debug=!1,this.resolveResources=!0}compile(e,t){var h,d;if(e.template==null||e.needsCompile===!1)return e;const i=new zy(e,t,null,null,void 0),r=wt(e.template)||!e.enhance?i._templateFactory.createTemplate(e.template):e.template,s=r.nodeName===lx&&r.content!=null,o=s?r.content:r,a=xJ.findAll(t),l=a.length;let c=0;if(l>0)for(;l>c;)(d=(h=a[c]).compiling)==null||d.call(h,r),++c;if(r.hasAttribute(ux))throw Kn(701,e);return this._compileLocalElement(o,i),this._compileNode(o,i),{...e,name:e.name||Om(),dependencies:(e.dependencies??gt).concat(i.deps??gt),instructions:i.rows,surrogates:s?this._compileSurrogate(r,i):gt,template:r,hasSlots:i.hasSlot,needsCompile:!1}}compileSpread(e,t,i,r,s){const o=new zy(e,i,null,null,void 0),a=[],l=s??o._findElement(r.nodeName.toLowerCase()),c=l!==null,u=o._exprParser,h=t.length;let d=0,f,g=null,p,m,v,y,w,_=null,R,E,x,P;for(;h>d;++d){if(f=t[d],x=f.target,P=f.rawValue,x==="...$attrs"){a.push(new a2);continue}if(_=o._getCommand(f),_!==null&&_.ignoreAttr){Ie.node=r,Ie.attr=f,Ie.bindable=null,Ie.def=null,a.push(_.build(Ie,o._exprParser,o._attrMapper));continue}if(c&&(v=o._getBindables(l),y=v.attrs[x],y!==void 0)){_==null?(R=u.parse(P,Ro),a.push(new l2(R==null?new zf(P,y.name):new Al(R,y.name)))):(Ie.node=r,Ie.attr=f,Ie.bindable=y,Ie.def=l,a.push(new l2(_.build(Ie,o._exprParser,o._attrMapper))));continue}if(g=o._findAttr(x),g!==null){if(g.isTemplateController)throw Kn(9998,x);v=o._getBindables(g),E=g.noMultiBindings===!1&&_===null&&cx(P),E?m=this._compileMultiBindings(r,P,g,o):(w=v.primary,_===null?(R=u.parse(P,Ro),m=[R===null?new zf(P,w.name):new Al(R,w.name)]):(Ie.node=r,Ie.attr=f,Ie.bindable=w,Ie.def=g,m=[_.build(Ie,o._exprParser,o._attrMapper)])),(p??(p=[])).push(new tx(this.resolveResources?g:g.name,g.aliases!=null&&g.aliases.includes(x)?x:void 0,m));continue}if(_==null)if(R=u.parse(P,Ro),R!=null)a.push(new Al(R,o._attrMapper.map(r,x)??Mi(x)));else switch(x){case"class":a.push(new s2(P));break;case"style":a.push(new o2(P));break;default:a.push(new r2(P,x))}else Ie.node=r,Ie.attr=f,Ie.bindable=null,Ie.def=null,a.push(_.build(Ie,o._exprParser,o._attrMapper))}return Uy(),p!=null?p.concat(a):a}_compileSurrogate(e,t){const i=[],r=e.attributes,s=t._exprParser;let o=r.length,a=0,l,c,u,h,d=null,f,g,p,m,v=null,y,w,_,R;for(;o>a;++a){if(l=r[a],c=l.name,u=l.value,h=t._attrParser.parse(c,u),_=h.target,R=h.rawValue,SJ[_])throw Kn(702,c);if(v=t._getCommand(h),v!==null&&v.ignoreAttr){Ie.node=e,Ie.attr=h,Ie.bindable=null,Ie.def=null,i.push(v.build(Ie,t._exprParser,t._attrMapper));continue}if(d=t._findAttr(_),d!==null){if(d.isTemplateController)throw Kn(703,_);p=t._getBindables(d),w=d.noMultiBindings===!1&&v===null&&cx(R),w?g=this._compileMultiBindings(e,R,d,t):(m=p.primary,v===null?(y=s.parse(R,Ro),g=y===null?R===""?[]:[new zf(R,m.name)]:[new Al(y,m.name)]):(Ie.node=e,Ie.attr=h,Ie.bindable=m,Ie.def=d,g=[v.build(Ie,t._exprParser,t._attrMapper)])),e.removeAttribute(c),--a,--o,(f??(f=[])).push(new tx(this.resolveResources?d:d.name,d.aliases!=null&&d.aliases.includes(_)?_:void 0,g));continue}if(v===null)if(y=s.parse(R,Ro),y!=null)e.removeAttribute(c),--a,--o,i.push(new Al(y,t._attrMapper.map(e,_)??Mi(_)));else switch(c){case"class":i.push(new s2(R));break;case"style":i.push(new o2(R));break;default:i.push(new r2(R,c))}else Ie.node=e,Ie.attr=h,Ie.bindable=null,Ie.def=null,i.push(v.build(Ie,t._exprParser,t._attrMapper))}return Uy(),f!=null?f.concat(i):i}_compileNode(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this._compileLet(e,t);default:return this._compileElement(e,t)}case 3:return this._compileText(e,t);case 11:{let i=e.firstChild;for(;i!==null;)i=this._compileNode(i,t);break}}return e.nextSibling}_compileLet(e,t){const i=e.attributes,r=i.length,s=[],o=t._exprParser;let a=!1,l=0,c,u,h,d,f,g,p,m;for(;r>l;++l){if(c=i[l],h=c.name,d=c.value,h==="to-binding-context"){a=!0;continue}if(u=t._attrParser.parse(h,d),g=u.target,p=u.rawValue,f=t._getCommand(u),f!==null){if(u.command==="bind")s.push(new n2(o.parse(p,wa),Mi(g)));else throw Kn(704,u);continue}m=o.parse(p,Ro),m===null&&console.warn(`[DEV:aurelia] Property "${g}" is declared with literal string ${p}. Did you mean ${g}.bind="${p}"?`),s.push(new n2(m===null?new Pi(p):m,Mi(g)))}return t.rows.push([new mJ(s,a)]),this._markAsTarget(e,t).nextSibling}_compileElement(e,t){var Z,re,ue,ae,De,Ee,ee,oe;const i=e.nextSibling,r=(e.getAttribute("as-element")??e.nodeName).toLowerCase(),s=t._findElement(r),o=s!==null,a=o&&s.shadowOptions!=null,l=s==null?void 0:s.capture,c=l!=null&&typeof l!="boolean",u=l?[]:gt,h=t._exprParser,d=this.debug?pa:()=>{e.removeAttribute(y),--m,--p};let f=e.attributes,g,p=f.length,m=0,v,y,w,_,R,E,x=null,P=!1,T,I,N,W,j,K,H,k=null,B,G,z,se,b=!0,C=!1,S=!1,A=!1,L,M=0;if(r==="slot"){if(t.root.def.shadowOptions==null)throw Kn(717,t.root.def.name);t.root.hasSlot=!0}for(o&&(L={},b=(Z=s.processContent)==null?void 0:Z.call(s.Type,e,t.p,L),f=e.attributes,p=f.length);p>m;++m){switch(v=f[m],y=v.name,w=v.value,y){case"as-element":case"containerless":d(),C=C||y==="containerless";continue}if(_=t._attrParser.parse(y,w),k=t._getCommand(_),z=_.target,se=_.rawValue,l&&(!c||c&&l(z))){if(k!=null&&k.ignoreAttr){d(),u.push(_);continue}if(S=z!==Im&&z!=="slot"&&((M=z.indexOf("..."))===-1||M===0&&z==="...$attrs"),S&&(B=t._getBindables(s),B.attrs[z]==null&&!((re=t._findAttr(z))!=null&&re.isTemplateController))){d(),u.push(_);continue}}if(z==="...$attrs"){(R??(R=[])).push(new a2),d();continue}if(k!=null&&k.ignoreAttr){Ie.node=e,Ie.attr=_,Ie.bindable=null,Ie.def=null,(R??(R=[])).push(k.build(Ie,t._exprParser,t._attrMapper)),d();continue}if(z.indexOf("...")===0){if(o&&(z=z.slice(3))!=="$element"){(E??(E=[])).push(new ix("$bindables",z==="$bindables"?se:z)),d();continue}throw(z==="$bindable"||z==="bindables")&&console.warn(`[DEV:aurelia] Detected usage of ${z} on <${e.nodeName}>, did you mean "$bindables"?`),Kn(720,z)}if(o){if(B=t._getBindables(s),T=B.attrs[z],T!==void 0){k===null?(K=h.parse(se,Ro),(E??(E=[])).push(K==null?new zf(se,T.name):new Al(K,T.name))):(Ie.node=e,Ie.attr=_,Ie.bindable=T,Ie.def=s,(E??(E=[])).push(k.build(Ie,t._exprParser,t._attrMapper))),d(),x=t._findAttr(z),x!==null&&console.warn(`[DEV:aurelia] Binding with bindable "${z}" on custom element "${s.name}" is ambiguous.There is a custom attribute with the same name.`);continue}if(z==="$bindables"){if(k!=null){Ie.node=e,Ie.attr=_,Ie.bindable=null,Ie.def=s;{const le=k.build(Ie,t._exprParser,t._attrMapper);le instanceof ix||console.warn(`[DEV:aurelia] Binding with "$bindables" on custom element "${s.name}" with command ${_.command}  did not result in a spread binding instruction. This likely won't work as expected.`),(E??(E=[])).push(le)}}else console.warn(`[DEV:aurelia] Usage of "$bindables" on custom element "<${s.name}>" is ignored.`);d();continue}}if(z==="$bindables")throw Kn(721,e.nodeName,z,se);if(x=t._findAttr(z),x!==null){B=t._getBindables(x),P=x.noMultiBindings===!1&&k===null&&cx(se),P?N=this._compileMultiBindings(e,se,x,t):(G=B.primary,k===null?(K=h.parse(se,Ro),N=K===null?se===""?[]:[new zf(se,G.name)]:[new Al(K,G.name)]):(Ie.node=e,Ie.attr=_,Ie.bindable=G,Ie.def=x,N=[k.build(Ie,t._exprParser,t._attrMapper)])),d(),x.isTemplateController?(W??(W=[])).push(new pJ(CJ,this.resolveResources?x:x.name,void 0,N)):(I??(I=[])).push(new tx(this.resolveResources?x:x.name,x.aliases!=null&&x.aliases.includes(z)?z:void 0,N));continue}if(k===null){K=h.parse(se,Ro),K!=null&&(d(),(R??(R=[])).push(new Al(K,t._attrMapper.map(e,z)??Mi(z))));continue}Ie.node=e,Ie.attr=_,Ie.bindable=null,Ie.def=null,(R??(R=[])).push(k.build(Ie,t._exprParser,t._attrMapper)),d()}Uy(),this._shouldReorderAttrs(e,R)&&R!=null&&R.length>1&&this._reorder(e,R),o&&(H=new gJ(this.resolveResources?s:s.name,E??gt,null,C,u,L)),(R!=null||H!=null||I!=null)&&(g=gt.concat(H??gt,I??gt,R??gt),A=!0);let $;if(W!=null){p=W.length-1,m=p,j=W[m];let le;A2(e)?(le=t.t(),R2(le,[t._marker(),t._comment(sx),t._comment(ox)])):(this._replaceByMarker(e,t),e.nodeName==="TEMPLATE"?le=e:(le=t.t(),mh(le,e)));const je=le,ye=t._createChild(g==null?[]:[g]);let xe,O,D=!1,F,Q,U,ne,X,Y,J=0,te=0,ie=e.firstChild,be=!1;if(b!==!1)for(;ie!==null;){if(O=E2(ie)?ie.getAttribute(Im):null,D=O!==null||o&&!a,xe=ie.nextSibling,D){if(!o)throw Kn(706,O,r);(ue=ie.removeAttribute)==null||ue.call(ie,Im),be=x2(ie)&&ie.textContent.trim()==="",be||((ae=Q??(Q={}))[De=O||T2]??(ae[De]=[])).push(ie),e.removeChild(ie)}ie=xe}if(Q!=null){F={};for(O in Q){for(le=t.t(),U=Q[O],J=0,te=U.length;te>J;++J)ne=U[J],ne.nodeName==="TEMPLATE"?ne.attributes.length>0?mh(le,ne):mh(le,ne.content):mh(le,ne);Y=t._createChild(),this._compileNode(le.content,Y),F[O]={name:Om(),type:Wf,template:le,instructions:Y.rows,needsCompile:!1}}H.projections=F}if(A&&(o&&(C||s.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),$=!o||!s.containerless&&!C&&b!==!1,$)if(e.nodeName===lx)this._compileNode(e.content,ye);else for(ie=e.firstChild;ie!==null;)ie=this._compileNode(ie,ye);for(j.def={name:Om(),type:Wf,template:je,instructions:ye.rows,needsCompile:!1};m-- >0;)j=W[m],le=t.t(),X=t._marker(),R2(le,[X,t._comment(sx),t._comment(ox)]),j.def={name:Om(),type:Wf,template:le,needsCompile:!1,instructions:[[W[m+1]]]};t.rows.push([j])}else{g!=null&&t.rows.push(g);let le=e.firstChild,je,ye,xe=!1,O=null,D,F,Q,U,ne,X=!1,Y=0,J=0;if(b!==!1)for(;le!==null;){if(ye=E2(le)?le.getAttribute(Im):null,xe=ye!==null||o&&!a,je=le.nextSibling,xe){if(!o)throw Kn(706,ye,r);(Ee=le.removeAttribute)==null||Ee.call(le,Im),X=x2(le)&&le.textContent.trim()==="",X||((ee=D??(D={}))[oe=ye||T2]??(ee[oe]=[])).push(le),e.removeChild(le)}le=je}if(D!=null){O={};for(ye in D){for(U=t.t(),F=D[ye],Y=0,J=F.length;J>Y;++Y)Q=F[Y],Q.nodeName===lx?Q.attributes.length>0?mh(U,Q):mh(U,Q.content):mh(U,Q);ne=t._createChild(),this._compileNode(U.content,ne),O[ye]={name:Om(),type:Wf,template:U,instructions:ne.rows,needsCompile:!1}}H.projections=O}if(A&&(o&&(C||s.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),$=!o||!s.containerless&&!C&&b!==!1,$&&e.childNodes.length>0)for(le=e.firstChild;le!==null;)le=this._compileNode(le,t)}return i}_compileText(e,t){const i=e.parentNode,r=t._exprParser.parse(e.textContent,Ro),s=e.nextSibling;let o,a,l,c,u;if(r!==null){for({parts:o,expressions:a}=r,(u=o[0])&&ax(i,t._text(u),e),l=0,c=a.length;c>l;++l)_2(i,e,[t._marker(),t._text(" ")]),(u=o[l+1])&&ax(i,t._text(u),e),t.rows.push([new bJ(a[l])]);i.removeChild(e)}return s}_compileMultiBindings(e,t,i,r){const s=r._getBindables(i),o=t.length,a=[];let l,c,u=0,h=0,d,f,g,p;for(let m=0;m<o;++m)if(h=t.charCodeAt(m),h===92)++m;else if(h===58){for(l=t.slice(u,m);t.charCodeAt(++m)<=32;);for(u=m;m<o;++m)if(h=t.charCodeAt(m),h===92)++m;else if(h===59){c=t.slice(u,m);break}if(c===void 0&&(c=t.slice(u)),f=r._attrParser.parse(l,c),g=r._getCommand(f),p=s.attrs[f.target],p==null)throw Kn(707,f.target,i.name);for(g===null?(d=r._exprParser.parse(c,Ro),a.push(d===null?new zf(c,p.name):new Al(d,p.name))):(Ie.node=e,Ie.attr=f,Ie.bindable=p,Ie.def=i,a.push(g.build(Ie,r._exprParser,r._attrMapper)));m<o&&t.charCodeAt(++m)<=32;);u=m,l=void 0,c=void 0}return Uy(),a}_compileLocalElement(e,t){const i=t.root.def.name,r=e,s=EE(r.querySelectorAll("template[as-custom-element]")),o=s.length;if(o===0)return;if(o===r.childElementCount)throw Kn(708,i);const a=new Set,l=[];for(const u of s){if(u.parentNode!==r)throw Kn(709,i);const h=EJ(i,u,a),d=u.content,f=EE(d.querySelectorAll("bindable")),g=new Set,p=new Set,m=f.reduce((y,w)=>{if(w.parentNode!==d)throw Kn(710,h);const _=w.getAttribute("name");if(_===null)throw Kn(711,w,h);const R=w.getAttribute("attribute");if(R!==null&&p.has(R)||g.has(_))throw Kn(712,g,R);R!==null&&p.add(R),g.add(_);const E=EE(w.attributes).filter(x=>!I2.includes(x.name));return E.length>0&&console.warn(`[DEV:aurelia] The attribute(s) ${E.map(x=>x.name).join(", ")} will be ignored for ${w.outerHTML}. Only ${I2.join(", ")} are processed.`),w.remove(),y[_]={name:_,attribute:R??void 0,mode:w.getAttribute("mode")??"default"},y},{});class v{}v.$au={type:Wf,name:h,template:u,bindables:m},Reflect.defineProperty(v,"name",{value:OH(h)}),l.push(v),r.removeChild(u)}const c=(t.root.def.dependencies??[]).concat(t.root.def.Type==null?gt:[t.root.def.Type]);for(const u of l)u.dependencies=c.concat(l.filter(h=>h!==u)),t._addLocalDep(u)}_shouldReorderAttrs(e,t){const i=e.nodeName;return i==="INPUT"&&_J[e.type]===1||i==="SELECT"&&(e.hasAttribute("multiple")||(t==null?void 0:t.some(r=>r.type===ex&&r.to==="multiple")))}_reorder(e,t){switch(e.nodeName){case"INPUT":{const i=t;let r,s,o=0,a;for(let l=0;l<i.length&&o<3;l++)switch(a=i[l],a.to){case"model":case"value":case"matcher":r=l,o++;break;case"checked":s=l,o++;break}s!==void 0&&r!==void 0&&s<r&&([i[r],i[s]]=[i[s],i[r]]);break}case"SELECT":{const i=t;let r=0,s=0,o=0,a;for(let l=0;l<i.length&&o<2;++l){switch(a=i[l],a.to){case"multiple":s=l,o++;break;case"value":r=l,o++;break}o===2&&r<s&&([i[s],i[r]]=[i[r],i[s]])}}}}_markAsTarget(e,t){return ax(e.parentNode,t._comment("au*"),e),e}_replaceByMarker(e,t){if(A2(e))return e;const i=e.parentNode,r=t._marker();return _2(i,e,[r,t._comment(sx),t._comment(ox)]),i.removeChild(e),r}}M2.register=dm(Vy);const lx="TEMPLATE",A2=n=>n.nodeValue==="au*";class zy{constructor(e,t,i,r,s){var a;this.hasSlot=!1,this.deps=null;const o=i!==null;if(this.c=t,this.root=r===null?this:r,this.def=e,this.parent=i,this._resourceResolver=o?i._resourceResolver:t.get(P2),this._commandResolver=o?i._commandResolver:t.get(RJ),this._templateFactory=o?i._templateFactory:t.get(wJ),this._attrParser=o?i._attrParser:t.get(qE),this._exprParser=o?i._exprParser:t.get(Ff),this._attrMapper=o?i._attrMapper:t.get(T$),this._logger=o?i._logger:t.get(fh),typeof((a=(this.p=o?i.p:t.get(Nf)).document)==null?void 0:a.nodeType)!="number")throw Kn(722);this.localEls=o?i.localEls:new Set,this.rows=s??[]}_addLocalDep(e){var t;return((t=this.root).deps??(t.deps=[])).push(e),this.root.c.register(e),this}_text(e){return this.p.document.createTextNode(e)}_comment(e){return this.p.document.createComment(e)}_marker(){return this._comment("au*")}h(e){const t=this.p.document.createElement(e);return e==="template"&&this.p.document.adoptNode(t.content),t}t(){return this.h("template")}_findElement(e){return this._resourceResolver.el(this.c,e)}_findAttr(e){return this._resourceResolver.attr(this.c,e)}_getBindables(e){return this._resourceResolver.bindables(e)}_createChild(e){return new zy(this.def,this.c,this,this.root,e)}_getCommand(e){const t=e.command;return t===null?null:this._commandResolver.get(this.c,t)}}const cx=n=>{const e=n.length;let t=0,i=0;for(;e>i;){if(t=n.charCodeAt(i),t===92)++i;else{if(t===58)return!0;if(t===36&&n.charCodeAt(i+1)===123)return!1}++i}return!1},Uy=()=>{Ie.node=Ie.attr=Ie.bindable=Ie.def=null},CJ={name:"unnamed",type:Wf},Ie={node:null,attr:null,bindable:null,def:null},SJ={id:!0,name:!0,"au-slot":!0,"as-element":!0},_J={checkbox:1,radio:1},P2=va("IResourceResolver"),RJ=va("IBindingCommandResolver",n=>{class e{constructor(){this._cache=new WeakMap}get(i,r){let s=this._cache.get(i);return s||this._cache.set(i,s={}),r in s?s[r]:s[r]=vJ.get(i,r)}}return n.singleton(e)}),I2=Vf(["name","attribute","mode"]),ux="as-custom-element",EJ=(n,e,t)=>{const i=e.getAttribute(ux);if(i===null||i==="")throw Kn(715,n);if(t.has(i))throw Kn(716,i,n);return t.add(i),e.removeAttribute(ux),i},O2=va("ITemplateCompilerHooks"),xJ=Vf({name:hh("compiler-hooks"),define(n){return{register(e){GE(O2,n).register(e)}}},findAll(n){return n.get(CZ(O2))}}),TJ=Object.prototype.hasOwnProperty,Eo=Reflect.defineProperty;function ya(n,e,t){return Eo(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t}function Pl(n,e,t){e in n||ya(n,e,t)}const k2=Object.assign,hx=Object.freeze,bh=String,Gy=dh.createInterface,MJ=Sl.get,AJ=Sl.define,Je=(n,...e)=>new Error(`AUR${bh(n).padStart(4,"0")}: ${IJ(n,...e)}`),PJ={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`,199:"Trying to observe property {{0}} on null/undefined",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",206:"Trying to switch to a null/undefined connectable",207:"Trying to enter an active connectable",208:"Trying to pop a null/undefined connectable",209:"Trying to exit an inactive connectable",210:"Unrecognised collection type {{0:toString}}.",217:"There is no registration for IDirtyChecker interface. If you want to use your own dirty checker, make sure you register it.",218:"Dirty checked is not permitted in this application. Property key {{0}} is being dirty checked.",219:"Trying to set value for property {{0}} in dirty checker",220:'Map/Set "size" is a readonly property',221:'Trying to assign value to readonly property "{{0}}" through computed observer.',224:"Invalid @observable decorator usage, cannot determine property name",225:"Trying to stop an effect that has already been stopped",226:"Maximum number of recursive effect run reached. Consider handle effect dependencies differently."},IJ=(n,...e)=>{var i;let t=PJ[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"typeof":l=typeof l;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=bh(l[a.slice(1)]):l=bh(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t};class di{constructor(e,t,i,r){this.parent=e,this.bindingContext=t,this.overrideContext=i,this.isBoundary=r}static getContext(e,t,i){if(e==null)throw Je(203);let r=e.overrideContext,s=e;if(i>0){for(;i>0;)if(i--,s=s.parent,s==null)return;return r=s.overrideContext,t in r?r:s.bindingContext}for(;s!=null&&!s.isBoundary&&!(t in s.overrideContext)&&!(t in s.bindingContext);)s=s.parent;return s==null?e.bindingContext:(r=s.overrideContext,t in r?r:s.bindingContext)}static create(e,t,i){if(e==null)throw Je(204);return new di(null,e,t??new N2,i??!1)}static fromParent(e,t,i=new N2){if(e==null)throw Je(203);return new di(e,t,i,!1)}}class D2{constructor(e,t){e!==void 0&&(this[e]=t)}}class N2{}const{astAssign:km,astEvaluate:Tn,astBind:Yc,astUnbind:Kc}=(()=>{const n="AccessThis",e="AccessBoundary",t="AccessGlobal",i="AccessScope",r="ArrayLiteral",s="ObjectLiteral",o="PrimitiveLiteral",a="Template",l="Unary",c="CallScope",u="CallMember",h="CallFunction",d="CallGlobal",f="AccessMember",g="AccessKeyed",p="TaggedTemplate",m="Binary",v="Conditional",y="Assign",w="ArrowFunction",_="ValueConverter",R="BindingBehavior",E="ArrayBindingPattern",x="ObjectBindingPattern",P="BindingIdentifier",T="ForOfStatement",I="Interpolation",N="ArrayDestructuring",W="ObjectDestructuring",j="DestructuringAssignmentLeaf",K="Custom",H=di.getContext;function k(b,C,S,A){var L;switch(b.$kind){case n:{let M=C.overrideContext,$=C,Z=b.ancestor;for(;Z--&&M;)$=$.parent,M=($==null?void 0:$.overrideContext)??null;return Z<1&&$?$.bindingContext:void 0}case e:{let M=C;for(;M!=null&&!M.isBoundary;)M=M.parent;return M?M.bindingContext:void 0}case i:{const M=H(C,b.name,b.ancestor);A!==null&&A.observe(M,b.name);const $=M[b.name];if($==null){if(b.name==="$host")throw Je(105);return $}return S!=null&&S.boundFn&&Bt($)?$.bind(M):$}case t:return globalThis[b.name];case d:{const M=globalThis[b.name];if(Bt(M))return M(...b.args.map($=>k($,C,S,A)));if(!(S!=null&&S.strict)&&M==null)return;throw Je(107)}case r:return b.elements.map(M=>k(M,C,S,A));case s:{const M={};for(let $=0;$<b.keys.length;++$)M[b.keys[$]]=k(b.values[$],C,S,A);return M}case o:return b.value;case a:{let M=b.cooked[0];for(let $=0;$<b.expressions.length;++$)M+=bh(k(b.expressions[$],C,S,A)),M+=b.cooked[$+1];return M}case l:{const M=k(b.expression,C,S,A);switch(b.operation){case"void":return;case"typeof":return typeof M;case"!":return!M;case"-":return-M;case"+":return+M;case"--":if(A!=null)throw Je(113);return B(b.expression,C,S,M-1)+b.pos;case"++":if(A!=null)throw Je(113);return B(b.expression,C,S,M+1)-b.pos;default:throw Je(109,b.operation)}}case c:{const M=H(C,b.name,b.ancestor);if(M==null){if(S!=null&&S.strict)throw Je(114,b.name,M);return}const $=M[b.name];if(Bt($))return $.apply(M,b.args.map(Z=>k(Z,C,S,A)));if($==null){if(S!=null&&S.strict&&!b.optional)throw Je(111,b.name);return}throw Je(111,b.name)}case u:{const M=k(b.object,C,S,A);if(M==null&&S!=null&&S.strict&&!b.optionalMember)throw Je(114,b.name,M);const $=M==null?void 0:M[b.name];if($==null){if(!b.optionalCall&&(S!=null&&S.strict))throw Je(111,b.name);return}if(!Bt($))throw Je(111,b.name);const Z=$.apply(M,b.args.map(re=>k(re,C,S,A)));return ni(M)&&se.includes(b.name)&&(A==null||A.observeCollection(M)),Z}case h:{const M=k(b.func,C,S,A);if(Bt(M))return M(...b.args.map($=>k($,C,S,A)));if(M==null){if(!b.optional&&(S!=null&&S.strict))throw Je(107);return}throw Je(107)}case w:return(...$)=>{const Z=b.args,re=b.rest,ue=Z.length-1,ae=Z.reduce((Ee,ee,oe)=>(re&&oe===ue?Ee[ee.name]=$.slice(oe):Ee[ee.name]=$[oe],Ee),{}),De=di.fromParent(C,ae);return k(b.body,De,S,A)};case f:{const M=k(b.object,C,S,A);if(M==null){if(!b.optional&&(S!=null&&S.strict))throw Je(114,b.name,M);return}A!==null&&!b.accessGlobal&&A.observe(M,b.name);const $=M[b.name];return S!=null&&S.boundFn&&Bt($)?$.bind(M):$}case g:{const M=k(b.object,C,S,A),$=k(b.key,C,S,A);if(M==null){if(!b.optional&&(S!=null&&S.strict))throw Je(115,$,M);return}return A!==null&&!b.accessGlobal&&A.observe(M,$),M[$]}case p:{const M=b.expressions.map(Z=>k(Z,C,S,A)),$=k(b.func,C,S,A);if(!Bt($))throw Je(110);return $(b.cooked,...M)}case m:{const M=b.left,$=b.right;switch(b.operation){case"&&":return k(M,C,S,A)&&k($,C,S,A);case"||":return k(M,C,S,A)||k($,C,S,A);case"??":return k(M,C,S,A)??k($,C,S,A);case"==":return k(M,C,S,A)==k($,C,S,A);case"===":return k(M,C,S,A)===k($,C,S,A);case"!=":return k(M,C,S,A)!=k($,C,S,A);case"!==":return k(M,C,S,A)!==k($,C,S,A);case"instanceof":{const Z=k($,C,S,A);return Bt(Z)?k(M,C,S,A)instanceof Z:!1}case"in":{const Z=k($,C,S,A);return My(Z)?k(M,C,S,A)in Z:!1}case"+":return k(M,C,S,A)+k($,C,S,A);case"-":return k(M,C,S,A)-k($,C,S,A);case"*":return k(M,C,S,A)*k($,C,S,A);case"/":return k(M,C,S,A)/k($,C,S,A);case"%":return k(M,C,S,A)%k($,C,S,A);case"<":return k(M,C,S,A)<k($,C,S,A);case">":return k(M,C,S,A)>k($,C,S,A);case"<=":return k(M,C,S,A)<=k($,C,S,A);case">=":return k(M,C,S,A)>=k($,C,S,A);default:throw Je(108,b.operation)}}case v:return k(b.condition,C,S,A)?k(b.yes,C,S,A):k(b.no,C,S,A);case y:{let M=k(b.value,C,S,A);if(b.op!=="="){if(A!=null)throw Je(113);const $=k(b.target,C,S,A);switch(b.op){case"/=":M=$/M;break;case"*=":M=$*M;break;case"+=":M=$+M;break;case"-=":M=$-M;break;default:throw Je(108,b.op)}}return B(b.target,C,S,M)}case _:return(L=S==null?void 0:S.useConverter)==null?void 0:L.call(S,b.name,"toView",k(b.expression,C,S,A),b.args.map(M=>k(M,C,S,A)));case R:return k(b.expression,C,S,A);case P:return b.name;case T:return k(b.iterable,C,S,A);case I:if(b.isMulti){let M=b.parts[0],$=0;for(;$<b.expressions.length;++$)M+=bh(k(b.expressions[$],C,S,A)),M+=b.parts[$+1];return M}else return`${b.parts[0]}${k(b.firstExpression,C,S,A)}${b.parts[1]}`;case j:return k(b.target,C,S,A);case N:return b.list.map(M=>k(M,C,S,A));case E:case x:case W:default:return;case K:return b.evaluate(C,S,A)}}function B(b,C,S,A){var L;switch(b.$kind){case i:{if(b.name==="$host")throw Je(106);const M=H(C,b.name,b.ancestor);return M[b.name]=A}case f:{const M=k(b.object,C,S,null);if(M==null){if(S!=null&&S.strict)throw Je(116,b.name);B(b.object,C,S,{[b.name]:A})}else My(M)&&(b.name==="length"&&ni(M)&&!isNaN(A)?M.splice(A):M[b.name]=A);return A}case g:{const M=k(b.object,C,S,null),$=k(b.key,C,S,null);if(M==null){if(S!=null&&S.strict)throw Je(116,$);return B(b.object,C,S,{[$]:A}),A}if(ni(M)){if($==="length"&&!isNaN(A))return M.splice(A),A;if(um($))return M.splice($,1,A),A}return M[$]=A}case y:return B(b.value,C,S,A),B(b.target,C,S,A);case _:return A=(L=S==null?void 0:S.useConverter)==null?void 0:L.call(S,b.name,"fromView",A,b.args.map(M=>k(M,C,S,null))),B(b.expression,C,S,A);case R:return B(b.expression,C,S,A);case N:case W:{const M=b.list,$=M.length;let Z,re;for(Z=0;Z<$;Z++)switch(re=M[Z],re.$kind){case j:B(re,C,S,A);break;case N:case W:{if(typeof A!="object"||A===null)throw Je(112);let ue=k(re.source,di.create(A),S,null);ue===void 0&&re.initializer&&(ue=k(re.initializer,C,S,null)),B(re,C,S,ue);break}}break}case j:{if(b instanceof c$){if(A==null)return;if(typeof A!="object")throw Je(112);let M=k(b.source,di.create(A),S,null);M===void 0&&b.initializer&&(M=k(b.initializer,C,S,null)),B(b.target,C,S,M)}else{if(A==null)return;if(typeof A!="object")throw Je(112);const M=b.indexOrProperties;let $;if(um(M)){if(!Array.isArray(A))throw Je(112);$=A.slice(M)}else $=Object.entries(A).reduce((Z,[re,ue])=>(M.includes(re)||(Z[re]=ue),Z),{});B(b.target,C,S,$)}break}case K:return b.assign(C,S,A);default:return}}function G(b,C,S){var A,L,M;switch(b.$kind){case R:{(A=S.bindBehavior)==null||A.call(S,b.name,C,b.args.map($=>k($,C,S,null))),G(b.expression,C,S);break}case _:{(L=S.bindConverter)==null||L.call(S,b.name),G(b.expression,C,S);break}case T:{G(b.iterable,C,S);break}case K:(M=b.bind)==null||M.call(b,C,S)}}function z(b,C,S){var A,L,M;switch(b.$kind){case R:{(A=S.unbindBehavior)==null||A.call(S,b.name,C),z(b.expression,C,S);break}case _:{(L=S.unbindConverter)==null||L.call(S,b.name),z(b.expression,C,S);break}case T:{z(b.iterable,C,S);break}case K:(M=b.unbind)==null||M.call(b,C,S)}}const se="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:k,astAssign:B,astBind:G,astUnbind:z}})(),OJ=n=>{const e=n.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{ya(e,t,()=>{throw Je(99,t)})})},L2=dh.createInterface("ICoercionConfiguration"),Yy=0,Il=1,dx=hx({None:Yy,Observer:Il,Node:2,Layout:4});function vh(n=0){const e=Array(n);let t=0;for(;t<n;)e[t]=t++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}let kJ=!1;const As=(()=>{function n(a,l){return a==null?s:s(a)}function e(){return ya(this,"subs",new o)}function t(a){return this.subs.add(a)}function i(a){return this.subs.remove(a)}const r=new WeakSet;function s(a,l){if(!r.has(a)){r.add(a);const c=a.prototype;Eo(c,"subs",{get:e}),Pl(c,"subscribe",t),Pl(c,"unsubscribe",i)}return a}class o{constructor(){this.count=0,this._subs=[],this._requestDirtySubs=[],this._hasDirtySubs=!1}add(l){return this._subs.includes(l)?!1:(this._subs[this._subs.length]=l,"handleDirty"in l&&(this._requestDirtySubs[this._requestDirtySubs.length]=l,this._hasDirtySubs=!0),++this.count,!0)}remove(l){let c=this._subs.indexOf(l);return c!==-1?(this._subs.splice(c,1),c=this._requestDirtySubs.indexOf(l),c!==-1&&(this._requestDirtySubs.splice(c,1),this._hasDirtySubs=this._requestDirtySubs.length>0),--this.count,!0):!1}notify(l,c){for(const u of this._subs.slice(0))u.handleChange(l,c)}notifyCollection(l,c){const u=this._subs.slice(0),h=u.length;let d=0;for(;d<h;++d)u[d].handleCollectionChange(l,c)}notifyDirty(){if(this._hasDirtySubs)for(const l of this._requestDirtySubs.slice(0))l.handleDirty()}}return n})();class H2{constructor(e){this.owner=e,this.type=Il,this._value=(this._obj=e.collection).length}getValue(){return this._obj.length}setValue(e){e!==this._value&&(Number.isNaN(e)?console.warn(`Invalid value "${e}" for array length`):(this._obj.splice(e),this._value=this._obj.length))}handleDirty(){this._value!==this._obj.length&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,r=this._obj.length;(this._value=r)!==i&&(this.subs.notifyDirty(),this.subs.notify(this._value,i))}}$2(H2);class fx{constructor(e){this.owner=e,this.type=Il,this._value=(this._obj=e.collection).size}getValue(){return this._obj.size}setValue(){throw Je(220)}handleDirty(){this._value!==this._obj.size&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,r=this._obj.size;(this._value=r)!==i&&this.subs.notify(this._value,i)}}$2(fx);function $2(n){const e=n.prototype;return Pl(e,"subscribe",DJ),Pl(e,"unsubscribe",NJ),As(n,null)}function DJ(n){this.subs.add(n)&&this.subs.count===1&&this.owner.subscribe(this)}function NJ(n){this.subs.remove(n)&&this.subs.count===0&&this.owner.subscribe(this)}const Dm=(()=>{const n=Symbol.for("__au_arr_obs__"),e=Array[n]??ya(Array,n,new WeakMap);function t(p,m){return p===m?0:(p=p===null?"null":p.toString(),m=m===null?"null":m.toString(),p<m?-1:1)}function i(p,m){return p===void 0?m===void 0?0:1:m===void 0?-1:0}function r(p,m,v,y,w){let _,R,E,x,P,T,I;for(T=v+1;T<y;T++){for(_=p[T],R=m[T],I=T-1;I>=v&&(E=p[I],x=m[I],P=w(E,_),P>0);I--)p[I+1]=E,m[I+1]=x;p[I+1]=_,m[I+1]=R}}function s(p,m,v,y,w){let _=0,R=0,E,x,P,T,I,N,W,j,K,H,k,B,G,z,se,b,C,S,A;for(;;){if(y-v<=10){r(p,m,v,y,w);return}_=v+(y-v>>1),E=p[v],T=m[v],x=p[y-1],I=m[y-1],P=p[_],N=m[_],W=w(E,x),W>0&&(H=E,k=T,E=x,T=I,x=H,I=k),j=w(E,P),j>=0?(H=E,k=T,E=P,T=N,P=x,N=I,x=H,I=k):(K=w(x,P),K>0&&(H=x,k=I,x=P,I=N,P=H,N=k)),p[v]=E,m[v]=T,p[y-1]=P,m[y-1]=N,B=x,G=I,z=v+1,se=y-1,p[_]=p[z],m[_]=m[z],p[z]=B,m[z]=G;e:for(R=z+1;R<se;R++)if(b=p[R],C=m[R],S=w(b,B),S<0)p[R]=p[z],m[R]=m[z],p[z]=b,m[z]=C,z++;else if(S>0){do{if(se--,se==R)break e;A=p[se],S=w(A,B)}while(S>0);p[R]=p[se],m[R]=m[se],p[se]=b,m[se]=C,S<0&&(b=p[R],C=m[R],p[R]=p[z],m[R]=m[z],p[z]=b,m[z]=C,z++)}y-se<z-v?(s(p,m,se,y,w),y=z):(s(p,m,v,z,w),v=se)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let l;function c(){const p=o.push,m=o.unshift,v=o.pop,y=o.shift,w=o.splice,_=o.reverse,R=o.sort;l={push:function(...E){const x=e.get(this);if(x===void 0)return p.apply(this,E);const P=this.length,T=E.length;if(T===0)return P;this.length=x.indexMap.length=P+T;let I=P;for(;I<this.length;)this[I]=E[I-P],x.indexMap[I]=-2,I++;return x.notify(),this.length},unshift:function(...E){const x=e.get(this);if(x===void 0)return m.apply(this,E);const P=E.length,T=new Array(P);let I=0;for(;I<P;)T[I++]=-2;m.apply(x.indexMap,T);const N=m.apply(this,E);return x.notify(),N},pop:function(){const E=e.get(this);if(E===void 0)return v.call(this);const x=E.indexMap,P=v.call(this),T=x.length-1;return x[T]>-1&&(x.deletedIndices.push(x[T]),x.deletedItems.push(P)),v.call(x),E.notify(),P},shift:function(){const E=e.get(this);if(E===void 0)return y.call(this);const x=E.indexMap,P=y.call(this);return x[0]>-1&&(x.deletedIndices.push(x[0]),x.deletedItems.push(P)),y.call(x),E.notify(),P},splice:function(...E){const x=E[0],P=E[1],T=e.get(this);if(T===void 0)return w.apply(this,E);const I=this.length,N=x|0,W=N<0?Math.max(I+N,0):Math.min(N,I),j=T.indexMap,K=E.length,H=K===0?0:K===1?I-W:P;let k=W;if(H>0){const G=k+H;for(;k<G;)j[k]>-1&&(j.deletedIndices.push(j[k]),j.deletedItems.push(this[k])),k++}if(k=0,K>2){const G=K-2,z=new Array(G);for(;k<G;)z[k++]=-2;w.call(j,x,P,...z)}else w.apply(j,E);const B=w.apply(this,E);return(H>0||k>0)&&T.notify(),B},reverse:function(){const E=e.get(this);if(E===void 0)return _.call(this),this;const x=this.length,P=x/2|0;let T=0;for(;T!==P;){const I=x-T-1,N=this[T],W=E.indexMap[T],j=this[I],K=E.indexMap[I];this[T]=j,E.indexMap[T]=K,this[I]=N,E.indexMap[I]=W,T++}return E.notify(),this},sort:function(E){const x=e.get(this);if(x===void 0)return R.call(this,E),this;let P=this.length;if(P<2)return this;s(this,x.indexMap,0,P,i);let T=0;for(;T<P&&this[T]!==void 0;)T++;(E===void 0||!Bt(E))&&(E=t),s(this,x.indexMap,0,T,E);let I=!1;for(T=0,P=x.indexMap.length;P>T;++T)if(x.indexMap[T]!==T){I=!0;break}return(I||kJ)&&x.notify(),this}};for(const E of a)Eo(l[E],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1})}let u=!1;const h="__au_arr_on__";function d(){if(l===void 0&&c(),!(MJ(h,Array)??!1)){AJ(!0,Array,h);for(const p of a)o[p].observing!==!0&&ya(o,p,l[p])}}class f{constructor(m){this.type=Il,u||(u=!0,d()),this.indexObservers={},this.collection=m,this.indexMap=vh(m.length),this.lenObs=void 0,e.set(m,this)}notify(){const m=this.subs;m.notifyDirty();const v=this.indexMap,y=this.collection,w=y.length;this.indexMap=vh(w),m.notifyCollection(y,v)}getLengthObserver(){return this.lenObs??(this.lenObs=new H2(this))}getIndexObserver(m){var v;return(v=this.indexObservers)[m]??(v[m]=new g(this,m))}}As(f,null);class g{constructor(m,v){this.owner=m,this.index=v,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(m){if(m===this.getValue())return;const v=this.owner,y=this.index,w=v.indexMap;w[y]>-1&&w.deletedIndices.push(w[y]),w[y]=-2,v.collection[y]=m,v.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(m,v){const y=this.index;if(v[y]===y)return;const _=this.value,R=this.value=this.getValue();_!==R&&this.subs.notify(R,_)}subscribe(m){this.subs.add(m)&&this.subs.count===1&&this.owner.subscribe(this)}unsubscribe(m){this.subs.remove(m)&&this.subs.count===0&&this.owner.unsubscribe(this)}}return As(g,null),function(m){let v=e.get(m);return v===void 0&&(e.set(m,v=new f(m)),d()),v}})(),Ky=(()=>{const n=Symbol.for("__au_set_obs__"),e=Set[n]??ya(Set,n,new WeakMap),{add:t,clear:i,delete:r}=Set.prototype,s=["add","clear","delete"],o={add:function(c){const u=e.get(this);if(u===void 0)return t.call(this,c),this;const h=this.size;return t.call(this,c),this.size===h?this:(u.indexMap[h]=-2,u.notify(),this)},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const h=c.indexMap;let d=0;for(const f of this.keys())h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(f)),d++;i.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return r.call(this,c);if(this.size===0)return!1;let d=0;const f=u.indexMap;for(const g of this.keys()){if(g===c){f[d]>-1&&(f.deletedIndices.push(f[d]),f.deletedItems.push(g)),f.splice(d,1);const p=r.call(this,c);return p===!0&&u.notify(),p}d++}return!1}};function a(c){for(const u of s)ya(c,u,o[u])}class l{constructor(u){this.type=Il,this.collection=u,this.indexMap=vh(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,d=this.collection,f=d.size;this.indexMap=vh(f),u.notifyCollection(d,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new fx(this))}}return As(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),qy=(()=>{const n=Symbol.for("__au_map_obs__"),e=Map[n]??ya(Map,n,new WeakMap),{set:t,clear:i,delete:r}=Map.prototype,s=["set","clear","delete"],o={set:function(c,u){const h=e.get(this);if(h===void 0)return t.call(this,c,u),this;const d=this.get(c),f=this.size;if(t.call(this,c,u),this.size===f){let p=0;for(const m of this.entries()){if(m[0]===c)return m[1]!==d&&(h.indexMap.deletedIndices.push(h.indexMap[p]),h.indexMap.deletedItems.push(m),h.indexMap[p]=-2,h.notify()),this;p++}return this}return h.indexMap[f]=-2,h.notify(),this},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const h=c.indexMap;let d=0;for(const f of this.keys())h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(f)),d++;i.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return r.call(this,c);if(this.size===0)return!1;let d=0;const f=u.indexMap;for(const g of this.keys()){if(g===c){f[d]>-1&&(f.deletedIndices.push(f[d]),f.deletedItems.push(g)),f.splice(d,1);const p=r.call(this,c);return p===!0&&u.notify(),p}++d}return!1}};function a(c){for(const u of s)ya(c,u,o[u])}class l{constructor(u){this.type=Il,this.collection=u,this.indexMap=vh(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,d=this.collection,f=d.size;this.indexMap=vh(f),u.notifyCollection(d,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new fx(this))}}return As(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),F2=(()=>{class n{constructor(u){this.version=0,this.count=0,this.o=new Map,this.b=u}add(u){this.o.has(u)||(u.subscribe(this.b),++this.count),this.o.set(u,this.version)}clear(){this.o.forEach(t,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(c,u){u.unsubscribe(this.b)}function t(c,u){this.version!==c&&(u.unsubscribe(this.b),this.o.delete(u))}function i(){return ya(this,"obs",new n(this))}function r(c,u){this.obs.add(this.oL.getObserver(c,u))}function s(c){let u;if(ni(c))u=Dm(c);else if(Pf(c))u=Ky(c);else if(jc(c))u=qy(c);else throw Je(210,c);this.obs.add(u)}function o(c){this.obs.add(c)}function a(){throw Je(99,"handleChange")}function l(){throw Je(99,"handleCollectionChange")}return function(u,h){const d=u.prototype;return Pl(d,"observe",r),Pl(d,"observeCollection",s),Pl(d,"subscribeTo",o),Eo(d,"obs",{get:i}),Pl(d,"handleChange",a),Pl(d,"handleCollectionChange",l),u}})();function xo(n,e){return n==null?F2:F2(n,e)}let St=null;const Gf=[];let Ol=!1;function LJ(){Ol=!1}function HJ(){Ol=!0}function Xy(){return St}function gx(n){if(n==null)throw Je(206);if(St==null){St=n,Gf[0]=St,Ol=!0;return}if(St===n)throw Je(207);Gf.push(n),St=n,Ol=!0}function px(n){if(n==null)throw Je(208);if(St!==n)throw Je(209);Gf.pop(),St=Gf.length>0?Gf[Gf.length-1]:null,Ol=St!=null}const $J=hx({get current(){return St},get connecting(){return Ol},enter:gx,exit:px,pause:LJ,resume:HJ}),Yf=Reflect.get,FJ=Object.prototype.toString,mx=new WeakMap,BJ="__au_nw__",VJ="__au_nw";function B2(n){switch(FJ.call(n)){case"[object Object]":return n.constructor[BJ]!==!0;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Kf="__raw__";function yt(n){return B2(n)?Zy(n):n}function Zy(n){return mx.get(n)??WJ(n)}function Dt(n){return n[Kf]??n}function vr(n){return B2(n)&&n[Kf]||n}function bx(n,e){return e==="constructor"||e==="__proto__"||e==="$observers"||e===Symbol.toPrimitive||e===Symbol.toStringTag||n.constructor[`${VJ}_${bh(e)}__`]===!0}function WJ(n){const e=ni(n)?zJ:jc(n)||Pf(n)?fee:jJ,t=new Proxy(n,e);return mx.set(n,t),mx.set(t,t),t}const jJ={get(n,e,t){if(e===Kf)return n;const i=Xy();return!Ol||bx(n,e)||i==null?Yf(n,e,t):(i.observe(n,e),yt(Yf(n,e,t)))}},zJ={get(n,e,t){if(e===Kf)return n;if(!Ol||bx(n,e)||St==null)return Yf(n,e,t);switch(e){case"length":return St.observe(n,"length"),n.length;case"map":return UJ;case"includes":return KJ;case"indexOf":return qJ;case"lastIndexOf":return XJ;case"every":return GJ;case"filter":return YJ;case"find":return QJ;case"findIndex":return ZJ;case"flat":return JJ;case"flatMap":return eee;case"join":return tee;case"push":return iee;case"pop":return nee;case"reduce":return hee;case"reduceRight":return dee;case"reverse":return aee;case"shift":return ree;case"unshift":return see;case"slice":return uee;case"splice":return oee;case"some":return lee;case"sort":return cee;case"keys":return V2;case"values":case Symbol.iterator:return vx;case"entries":return wx}return St.observe(n,e),yt(Yf(n,e,t))},ownKeys(n){var e;return(e=Xy())==null||e.observe(n,"length"),Reflect.ownKeys(n)}};function UJ(n,e){const t=Dt(this),i=t.map((r,s)=>vr(n.call(e,yt(r),s,this)));return Dn(St,t),yt(i)}function GJ(n,e){const t=Dt(this),i=t.every((r,s)=>n.call(e,yt(r),s,this));return Dn(St,t),i}function YJ(n,e){const t=Dt(this),i=t.filter((r,s)=>vr(n.call(e,yt(r),s,this)));return Dn(St,t),yt(i)}function KJ(n){const e=Dt(this),t=e.includes(vr(n));return Dn(St,e),t}function qJ(n){const e=Dt(this),t=e.indexOf(vr(n));return Dn(St,e),t}function XJ(n){const e=Dt(this),t=e.lastIndexOf(vr(n));return Dn(St,e),t}function ZJ(n,e){const t=Dt(this),i=t.findIndex((r,s)=>vr(n.call(e,yt(r),s,this)));return Dn(St,t),i}function QJ(n,e){const t=Dt(this),i=t.find((r,s)=>n(yt(r),s,this),e);return Dn(St,t),yt(i)}function JJ(){const n=Dt(this);return Dn(St,n),yt(n.flat())}function eee(n,e){const t=Dt(this);return Dn(St,t),Zy(t.flatMap((i,r)=>yt(n.call(e,yt(i),r,this))))}function tee(n){const e=Dt(this);return Dn(St,e),e.join(n)}function nee(){return yt(Dt(this).pop())}function iee(...n){return Dt(this).push(...n)}function ree(){return yt(Dt(this).shift())}function see(...n){return Dt(this).unshift(...n)}function oee(...n){return yt(Dt(this).splice(...n))}function aee(...n){const e=Dt(this),t=e.reverse();return Dn(St,e),yt(t)}function lee(n,e){const t=Dt(this),i=t.some((r,s)=>vr(n.call(e,yt(r),s,this)));return Dn(St,t),i}function cee(n){const e=Dt(this),t=e.sort(n);return Dn(St,e),yt(t)}function uee(n,e){const t=Dt(this);return Dn(St,t),Zy(t.slice(n,e))}function hee(n,e){const t=Dt(this),i=t.reduce((r,s,o)=>n(r,yt(s),o,this),e);return Dn(St,t),yt(i)}function dee(n,e){const t=Dt(this),i=t.reduceRight((r,s,o)=>n(r,yt(s),o,this),e);return Dn(St,t),yt(i)}const fee={get(n,e,t){if(e===Kf)return n;const i=Xy();if(!Ol||bx(n,e)||i==null)return Yf(n,e,t);switch(e){case"size":return i.observe(n,"size"),n.size;case"clear":return wee;case"delete":return yee;case"forEach":return gee;case"add":if(Pf(n))return vee;break;case"get":if(jc(n))return mee;break;case"set":if(jc(n))return bee;break;case"has":return pee;case"keys":return V2;case"values":return vx;case"entries":return wx;case Symbol.iterator:return jc(n)?wx:vx}return yt(Yf(n,e,t))}};function gee(n,e){const t=Dt(this);return Dn(St,t),t.forEach((i,r)=>{n.call(e,yt(i),yt(r),this)})}function pee(n){const e=Dt(this);return Dn(St,e),e.has(vr(n))}function mee(n){const e=Dt(this);return Dn(St,e),yt(e.get(vr(n)))}function bee(n,e){return yt(Dt(this).set(vr(n),vr(e)))}function vee(n){return yt(Dt(this).add(vr(n)))}function wee(){return yt(Dt(this).clear())}function yee(n){return yt(Dt(this).delete(vr(n)))}function V2(){const n=Dt(this);Dn(St,n);const e=n.keys();return{next(){const t=e.next(),i=t.value,r=t.done;return r?{value:void 0,done:r}:{value:yt(i),done:r}},[Symbol.iterator](){return this}}}function vx(){const n=Dt(this);Dn(St,n);const e=n.values();return{next(){const t=e.next(),i=t.value,r=t.done;return r?{value:void 0,done:r}:{value:yt(i),done:r}},[Symbol.iterator](){return this}}}function wx(){const n=Dt(this);Dn(St,n);const e=n.entries();return{next(){const t=e.next(),i=t.value,r=t.done;return r?{value:void 0,done:r}:{value:[yt(i[0]),yt(i[1])],done:r}},[Symbol.iterator](){return this}}}const Dn=(n,e)=>n==null?void 0:n.observeCollection(e),Cee=hx({getProxy:Zy,getRaw:Dt,wrap:yt,unwrap:vr,rawKey:Kf});class Qy{constructor(e,t,i,r,s){this.type=Il,this._value=void 0,this._isRunning=!1,this._isDirty=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._wrapped=s?yt(e):e,this.$get=t,this.$set=i,this.oL=r}init(e){this._value=e,this._isDirty=!1}getValue(){return this.subs.count===0?this.$get.call(this._obj,this._obj,this):(this._isDirty&&(this.compute(),this._isDirty=!1),this._value)}setValue(e){if(Bt(this.$set))this._coercer!==void 0&&(e=this._coercer.call(null,e,this._coercionConfig)),wo(e,this._value)||(this._isRunning=!0,this.$set.call(this._obj,e),this._isRunning=!1,this.run());else throw Je(221)}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,!0}useCallback(e){return this._callback=e,!0}handleDirty(){this._isDirty||(this._isDirty=!0,this.subs.notifyDirty())}handleChange(){this._isDirty=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this._isDirty=!0,this.subs.count>0&&this.run()}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this.compute(),this._isDirty=!1)}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&(this._isDirty=!0,this.obs.clearAll())}run(){var i;if(this._isRunning)return;const e=this._value,t=this.compute();this._isDirty=!1,wo(t,e)||((i=this._callback)==null||i.call(this,t,e),this.subs.notify(this._value,e))}compute(){this._isRunning=!0,this.obs.version++;try{return gx(this),this._value=vr(this.$get.call(this._wrapped,this._wrapped,this))}finally{this.obs.clear(),this._isRunning=!1,px(this)}}}xo(Qy,null),As(Qy,null);const yx=Gy("IDirtyChecker",n=>n.callback(()=>{throw Je(217)})),See={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class _ee{static register(e){e.register(ch.singleton(this,this),ch.aliasTo(this,yx))}constructor(){this.tracked=[],this._task=null,this._elapsedFrames=0,this.p=fe(Nf),this.check=()=>{if(++this._elapsedFrames<See.timeoutsPerCheck)return;this._elapsedFrames=0;const e=this.tracked,t=e.length;let i,r=0;for(;r<t;++r)i=e[r],i.isDirty()&&i.flush()},As(W2,null)}createProperty(e,t){return new W2(this,e,t)}addProperty(e){this.tracked.push(e),this.tracked.length===1&&(this._task=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(e){this.tracked.splice(this.tracked.indexOf(e),1),this.tracked.length===0&&(this._task.cancel(),this._task=null)}}class W2{constructor(e,t,i){this.obj=t,this.key=i,this.type=Yy,this._oldValue=void 0,this._dirtyChecker=e}getValue(){return this.obj[this.key]}setValue(e){throw Je(219,this.key)}isDirty(){return this._oldValue!==this.obj[this.key]}flush(){const e=this._oldValue,t=this.getValue();this._oldValue=t,this.subs.notify(t,e)}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.obj[this.key],this._dirtyChecker.addProperty(this))}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&this._dirtyChecker.removeProperty(this)}}class Ree{get doNotCache(){return!0}constructor(e,t){this.type=Yy,this._obj=e,this._key=t}getValue(){return this._obj[this._key]}setValue(){}subscribe(){}unsubscribe(){}}class j2{constructor(){this.type=Yy}getValue(e,t){return e[t]}setValue(e,t,i){t[i]=e}}class Cx{constructor(e,t){this.type=Il,this._value=void 0,this._observing=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._key=t}getValue(){return this._value}setValue(e){var t,i;if(this._coercer!==void 0&&(e=this._coercer.call(void 0,e,this._coercionConfig)),this._observing){if(wo(e,this._value))return;Jy=this._value,this._value=e,this.subs.notifyDirty(),this.subs.notify(e,Jy),wo(e,this._value)&&((t=this._callback)==null||t.call(this,e,Jy))}else this._value=this._obj[this._key]=e,(i=this._callback)==null||i.call(this,e,Jy)}useCallback(e){return this._callback=e,this.start(),!0}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,this.start(),!0}subscribe(e){this._observing===!1&&this.start(),this.subs.add(e)}start(){return this._observing===!1&&(this._observing=!0,this._value=this._obj[this._key],Eo(this._obj,this._key,{enumerable:!0,configurable:!0,get:k2(()=>this.getValue(),{getObserver:()=>this}),set:e=>{this.setValue(e)}})),this}stop(){return this._observing&&(Eo(this._obj,this._key,{enumerable:!0,configurable:!0,writable:!0,value:this._value}),this._observing=!1),this}}As(Cx,null);let Jy;const Sx=new j2,qf=Gy("IObserverLocator",n=>n.singleton(Tee)),_x=Gy("INodeObserverLocator",n=>n.cachedCallback(e=>(e.getAll(fh).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new Eee)));class Eee{handles(){return!1}getObserver(){return Sx}getAccessor(){return Sx}}const xee=Gy("IComputedObserverLocator",n=>n.singleton(class{getObserver(t,i,r,s){const o=new Qy(t,r.get,r.set,s,!0);return Eo(t,i,{enumerable:r.enumerable,configurable:!0,get:k2(()=>o.getValue(),{getObserver:()=>o}),set:a=>{o.setValue(a)}}),o}}));class Tee{constructor(){this._adapters=[],this._dirtyChecker=fe(yx),this._nodeObserverLocator=fe(_x),this._computedObserverLocator=fe(xee)}addAdapter(e){this._adapters.push(e)}getObserver(e,t){if(e==null)throw Je(199,t);if(!PH(e))return new Ree(e,Bt(t)?"":t);if(Bt(t))return new Qy(e,t,void 0,this,!0);const i=G2(e);let r=i[t];return r===void 0&&(r=this.createObserver(e,t),r.doNotCache||(i[t]=r)),r}getAccessor(e,t){var r;const i=(r=e.$observers)==null?void 0:r[t];return i!==void 0?i:this._nodeObserverLocator.handles(e,t,this)?this._nodeObserverLocator.getAccessor(e,t,this):Sx}getArrayObserver(e){return Dm(e)}getMapObserver(e){return qy(e)}getSetObserver(e){return Ky(e)}createObserver(e,t){var r,s;if(this._nodeObserverLocator.handles(e,t,this))return this._nodeObserverLocator.getObserver(e,t,this);switch(t){case"length":if(ni(e))return Dm(e).getLengthObserver();break;case"size":if(jc(e))return qy(e).getLengthObserver();if(Pf(e))return Ky(e).getLengthObserver();break;default:if(ni(e)&&um(t))return Dm(e).getIndexObserver(Number(t));break}let i=U2(e,t);if(i===void 0){let o=z2(e);for(;o!==null&&(i=U2(o,t),i===void 0);)o=z2(o)}if(i!==void 0&&!TJ.call(i,"value")){let o=this._getAdapterObserver(e,t,i);return o==null&&(o=(s=(r=i.get)==null?void 0:r.getObserver)==null?void 0:s.call(r,e)),o??(i.configurable?this._computedObserverLocator.getObserver(e,t,i,this):this._dirtyChecker.createProperty(e,t))}return new Cx(e,t)}_getAdapterObserver(e,t,i){if(this._adapters.length>0)for(const r of this._adapters){const s=r.getObserver(e,t,i,this);if(s!=null)return s}return null}}const Rx=n=>{let e;return ni(n)?e=Dm(n):jc(n)?e=qy(n):Pf(n)&&(e=Ky(n)),e},z2=Object.getPrototypeOf,U2=Object.getOwnPropertyDescriptor,G2=n=>{let e=n.$observers;return e===void 0&&Eo(n,"$observers",{enumerable:!1,value:e=en()}),e};class Mee{constructor(e,t){this.oL=e,this.fn=t,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this._cleanupTask=void 0,this.run=()=>{var i;if(this.stopped)throw Je(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{(i=this._cleanupTask)==null||i.call(void 0),gx(this),this._cleanupTask=this.fn(this)}finally{this.obs.clear(),this.running=!1,px(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,Je(226);this.run()}else this.runCount=0}},this.stop=()=>{var i;(i=this._cleanupTask)==null||i.call(void 0),this._cleanupTask=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}}xo(Mee,null);class Y2{constructor(e,t,i,r){this.oL=t,this._value=void 0,this.boundFn=!1,this._scope=e,this.ast=i,this._callback=r}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const e=this._value,t=Tn(this.ast,this._scope,this,this);this.obs.clear(),wo(t,e)||(this._value=t,this._callback.call(void 0,t,e))}stop(){this.obs.clearAll(),this._value=void 0}}xo(Y2,null),OJ(Y2);const Aee=(()=>{function n(s){return s.$observers===void 0&&Eo(s,"$observers",{value:{}}),s.$observers}const e={};function t(s,o){r.mixed||(r.mixed=!0,As(r,null));let a=!1,l;if(typeof s=="object"?l=s:s!=null?(l={name:s},a=!0):l=GH,arguments.length===0)return function(h,d){if(d.kind!=="field")throw Je(224);return c(d)};if((o==null?void 0:o.kind)==="field")return c(o);if(a)return function(h,d){u(h,l.name,()=>e,!0)};return function(h,d){switch(d.kind){case"field":return c(d);case"class":return u(h,l.name,()=>e,!0);default:throw Je(224)}};function c(h){let d;return h.addInitializer(function(){u(this,h.name,()=>d,!1)}),function(f){return d=f}}function u(h,d,f,g){const p=l.callback||`${bh(d)}Changed`,m=l.set,v=function(){var _;const w=i(this,d,p,f,m);return(_=Xy())==null||_.subscribeTo(w),w.getValue()};v.getObserver=function(w){return i(w,d,p,f,m)};const y={enumerable:!0,configurable:!0,get:v,set(w){i(this,d,p,f,m).setValue(w)}};Eo(g?h.prototype:h,d,y)}}function i(s,o,a,l,c){const u=n(s);let h=u[o];if(h==null){const d=l();h=new r(s,a,c,d===e?void 0:d),u[o]=h}return h}class r{constructor(o,a,l,c){this.type=Il,this._value=void 0,this._oldValue=void 0,this._obj=o,this._setter=l,this._hasSetter=Bt(l);const u=o[a];this.cb=Bt(u)?u:void 0,this._value=c}getValue(){return this._value}setValue(o){var a;this._hasSetter&&(o=this._setter(o)),wo(o,this._value)||(this._oldValue=this._value,this._value=o,this.subs.notifyDirty(),this.subs.notify(this._value,this._oldValue),wo(o,this._value)&&((a=this.cb)==null||a.call(this._obj,this._value,this._oldValue)))}}return r.mixed=!1,t})();typeof SuppressedError=="function"&&SuppressedError;const Nm="pending",e0="running",Ex="completed",t0="canceled",xx=new Map,K2=n=>()=>{throw wh(`AUR1005: The PLATFORM did not receive a valid reference to the global function '${n}'.`)};class Tx{constructor(e,t={}){var i,r;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=e,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(s=>{this[s]=s in t?t[s]:e[s]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(s=>{var o;this[s]=s in t?t[s]:((o=e[s])==null?void 0:o.bind(e))??K2(s)}),this.performanceNow="performanceNow"in t?t.performanceNow:((r=(i=e.performance)==null?void 0:i.now)==null?void 0:r.bind(e.performance))??K2("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new Mx(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(e,t={}){let i=xx.get(e);return i===void 0&&xx.set(e,i=new Tx(e,t)),i}static set(e,t){xx.set(e,t)}requestMacroTask(){this.macroTaskRequested=!0,this.macroTaskHandle===-1&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,this.macroTaskRequested===!0&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class Mx{get isEmpty(){return this._pendingAsyncCount===0&&this._processing.length===0&&this._pending.length===0&&this._delayed.length===0}get _hasNoMoreFiniteWork(){return this._pendingAsyncCount===0&&this._processing.every(Px)&&this._pending.every(Px)&&this._delayed.every(Px)}constructor(e,t,i){this.platform=e,this.$request=t,this.$cancel=i,this._suspenderTask=void 0,this._pendingAsyncCount=0,this._processing=[],this._pending=[],this._delayed=[],this._flushRequested=!1,this._yieldPromise=void 0,this._lastRequest=0,this._lastFlush=0,this._requestFlush=()=>{this._tracer.enabled&&this._tracer.enter(this,"requestFlush"),this._flushRequested||(this._flushRequested=!0,this._lastRequest=this._now(),this.$request()),this._tracer.enabled&&this._tracer.leave(this,"requestFlush")},this._now=e.performanceNow,this._tracer=new Oee(e.console)}flush(e=this._now()){if(this._tracer.enabled&&this._tracer.enter(this,"flush"),this._flushRequested=!1,this._lastFlush=e,this._suspenderTask===void 0){let t;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let r=0;r<this._delayed.length;++r)t=this._delayed[r],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(r--,1));let i;for(;this._processing.length>0;)if((i=this._processing.shift()).run(),i.status===e0)if(i.suspend===!0){this._suspenderTask=i,this._requestFlush(),this._tracer.enabled&&this._tracer.leave(this,"flush early async");return}else++this._pendingAsyncCount;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let r=0;r<this._delayed.length;++r)t=this._delayed[r],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(r--,1));if((this._processing.length>0||this._delayed.length>0||this._pendingAsyncCount>0)&&this._requestFlush(),this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const r=this._yieldPromise;this._yieldPromise=void 0,r.resolve()}}else this._requestFlush();this._tracer.enabled&&this._tracer.leave(this,"flush full")}cancel(){this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._flushRequested&&(this.$cancel(),this._flushRequested=!1),this._tracer.enabled&&this._tracer.leave(this,"cancel")}async yield(){this._tracer.enabled&&this._tracer.enter(this,"yield"),this.isEmpty?this._tracer.enabled&&this._tracer.leave(this,"yield empty"):(this._yieldPromise===void 0&&(this._tracer.enabled&&this._tracer.trace(this,"yield - creating promise"),this._yieldPromise=Z2()),await this._yieldPromise,this._tracer.enabled&&this._tracer.leave(this,"yield task"))}queueTask(e,t){this._tracer.enabled&&this._tracer.enter(this,"queueTask");const{delay:i,preempt:r,persistent:s,suspend:o}={...kee,...t};if(r){if(i>0)throw Nee();if(s)throw Lee()}this._processing.length===0&&this._requestFlush();const a=this._now(),l=new Iee(this._tracer,this,a,a+i,r,s,o,e);return r?this._processing[this._processing.length]=l:i===0?this._pending[this._pending.length]=l:this._delayed[this._delayed.length]=l,this._tracer.enabled&&this._tracer.leave(this,"queueTask"),l}remove(e){this._tracer.enabled&&this._tracer.enter(this,"remove");let t=this._processing.indexOf(e);if(t>-1){this._processing.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove processing");return}if(t=this._pending.indexOf(e),t>-1){this._pending.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove pending");return}if(t=this._delayed.indexOf(e),t>-1){this._delayed.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove delayed");return}throw this._tracer.enabled&&this._tracer.leave(this,"remove error"),wh(`Task #${e.id} could not be found`)}_resetPersistentTask(e){this._tracer.enabled&&this._tracer.enter(this,"resetPersistentTask"),e.reset(this._now()),e.createdTime===e.queueTime?this._pending[this._pending.length]=e:this._delayed[this._delayed.length]=e,this._tracer.enabled&&this._tracer.leave(this,"resetPersistentTask")}_completeAsyncTask(e){var t;if(this._tracer.enabled&&this._tracer.enter(this,"completeAsyncTask"),e.suspend===!0){if(this._suspenderTask!==e)throw this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask error"),wh(`Async task completion mismatch: suspenderTask=${(t=this._suspenderTask)==null?void 0:t.id}, task=${e.id}`);this._suspenderTask=void 0}else--this._pendingAsyncCount;if(this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const i=this._yieldPromise;this._yieldPromise=void 0,i.resolve()}this.isEmpty&&this.cancel(),this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask")}}class Ax extends Error{constructor(e){super("Task was canceled."),this.task=e}}let Pee=0;class Iee{get result(){const e=this._result;if(e===void 0)switch(this._status){case Nm:{const t=this._result=Z2();return this._resolve=t.resolve,this._reject=t.reject,t}case e0:throw wh("Trying to await task from within task will cause a deadlock.");case Ex:return this._result=Promise.resolve();case t0:return this._result=Promise.reject(new Ax(this))}return e}get status(){return this._status}constructor(e,t,i,r,s,o,a,l){this.taskQueue=t,this.createdTime=i,this.queueTime=r,this.preempt=s,this.persistent=o,this.suspend=a,this.callback=l,this.id=++Pee,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._status=Nm,this._tracer=e}run(e=this.taskQueue.platform.performanceNow()){if(this._tracer.enabled&&this._tracer.enter(this,"run"),this._status!==Nm)throw this._tracer.enabled&&this._tracer.leave(this,"run error"),wh(`Cannot run task in ${this._status} state`);const{persistent:t,taskQueue:i,callback:r,_resolve:s,_reject:o,createdTime:a}=this;let l;this._status=e0;try{l=r(e-a),l instanceof Promise?l.then(c=>{this.persistent?i._resetPersistentTask(this):(t?this._status=t0:this._status=Ex,this.dispose()),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async then"),s!==void 0&&s(c)}).catch(c=>{if(this.persistent||this.dispose(),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async catch"),o!==void 0)o(c);else throw c}):(this.persistent?i._resetPersistentTask(this):(t?this._status=t0:this._status=Ex,this.dispose()),this._tracer.enabled&&this._tracer.leave(this,"run sync success"),s!==void 0&&s(l))}catch(c){if(this.persistent||this.dispose(),this._tracer.enabled&&this._tracer.leave(this,"run sync error"),o!==void 0)o(c);else throw c}}cancel(){if(this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._status===Nm){const e=this.taskQueue,t=this._reject;return e.remove(this),e.isEmpty&&e.cancel(),this._status=t0,this.dispose(),t!==void 0&&t(new Ax(this)),this._tracer.enabled&&this._tracer.leave(this,"cancel true =pending"),!0}else if(this._status===e0&&this.persistent)return this.persistent=!1,this._tracer.enabled&&this._tracer.leave(this,"cancel true =running+persistent"),!0;return this._tracer.enabled&&this._tracer.leave(this,"cancel false"),!1}reset(e){this._tracer.enabled&&this._tracer.enter(this,"reset");const t=this.queueTime-this.createdTime;this.createdTime=e,this.queueTime=e+t,this._status=Nm,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._tracer.enabled&&this._tracer.leave(this,"reset")}dispose(){this._tracer.enabled&&this._tracer.trace(this,"dispose"),this.callback=void 0,this._resolve=void 0,this._reject=void 0,this._result=void 0}}class Oee{constructor(e){this.console=e,this.enabled=!1,this.depth=0}enter(e,t){this.log(`${"  ".repeat(this.depth++)}> `,e,t)}leave(e,t){this.log(`${"  ".repeat(--this.depth)}< `,e,t)}trace(e,t){this.log(`${"  ".repeat(this.depth)}- `,e,t)}log(e,t,i){if(t instanceof Mx){const r=t._processing.length,s=t._pending.length,o=t._delayed.length,a=t._flushRequested,l=!!t._suspenderTask,c=`processing=${r} pending=${s} delayed=${o} flushReq=${a} susTask=${l}`;this.console.log(`${e}[Q.${i}] ${c}`)}else{const r=t.id,s=Math.round(t.createdTime*10)/10,o=Math.round(t.queueTime*10)/10,a=t.preempt,l=t.persistent,c=t.suspend,u=t._status,h=`id=${r} created=${s} queue=${o} preempt=${a} persistent=${l} status=${u} suspend=${c}`;this.console.log(`${e}[T.${i}] ${h}`)}}}const kee={delay:0,preempt:!1,persistent:!1,suspend:!1};let q2,X2;const Dee=(n,e)=>{q2=n,X2=e},Z2=()=>{const n=new Promise(Dee);return n.resolve=q2,n.reject=X2,n},Px=n=>n.persistent,Nee=()=>wh("AUR1006: Invalid arguments: preempt cannot be combined with a greater-than-zero delay"),Lee=()=>wh("AUR1007: Invalid arguments: preempt cannot be combined with persistent"),wh=n=>new Error(n);class qc extends Tx{static getOrCreate(e,t={}){let i=qc._lookup.get(e);return i===void 0&&qc._lookup.set(e,i=new qc(e,t)),i}static set(e,t){qc._lookup.set(e,t)}get domWriteQueue(){return this.console.log("[DEV:aurelia] platform.domQueue is deprecated, please use platform.domQueue instead."),this.domQueue}get domReadQueue(){return this.console.log("[DEV:aurelia] platform.domReadQueue has been removed, please use platform.domQueue instead."),this.domQueue}constructor(e,t={}){super(e,t);const i=r=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${r}'.`)};"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(r=>this[r]=r in t?t[r]:e[r]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(r=>{var s;return this[r]=r in t?t[r]:((s=e[r])==null?void 0:s.bind(e))??i(r)}),this.domQueue=(()=>{let r=!1,s=-1;const o=()=>{r=!0,s===-1&&(s=this.requestAnimationFrame(l))},a=()=>{r=!1,s>-1&&(this.cancelAnimationFrame(s),s=-1)},l=()=>{s=-1,r===!0&&(r=!1,c.flush())},c=new Mx(this,o,a);return c})()}}qc._lookup=new WeakMap,typeof SuppressedError=="function"&&SuppressedError;const{default:Ix,oneTime:n0,toView:qn,fromView:kl,twoWay:Q2}=Am,Xi=Sl.get,i0=Sl.has,To=Sl.define,{annotation:Hee}=$H,Dl=Hee.keyFor,Lm=Object,yh=String,J2=Lm.prototype,Ch=J2.hasOwnProperty,Nl=Lm.freeze,eF=Lm.assign,tF=Lm.getOwnPropertyNames,Ox=Lm.keys,nF=en(),kx=(n,e,t)=>{if(nF[e]===!0)return!0;if(!wt(e))return!1;const i=e.slice(0,5);return nF[e]=i==="aria-"||i==="data-"||t.isStandardSvgAttribute(n,e)},Dx=n=>{throw n},iF=Reflect.defineProperty,ns=(n,e,t)=>(iF(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t),rF=(n,e,t)=>n.addSignalListener(e,t),sF=(n,e,t)=>n.removeSignalListener(e,t),$ee="Interpolation",Fee="IsIterator",Bee="IsFunction",Ca="IsProperty",oF="pending",Nx="running",Lx=dx.Observer,Xc=dx.Node,Sa=dx.Layout,Re=(n,...e)=>new Error(`AUR${yh(n).padStart(4,"0")}: ${Wee(n,...e)}`),Vee={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:"No binding behavior definition found for type {{0:name}}",152:"No value converter definition found for type {{0:name}}",153:'Element "{{0}}" has already been registered.',154:'Attribute "{{0}}" has already been registered.',155:"Value converter {{0}} has already been registered.",156:"Binding behavior {{0}} has already been registered.",157:"Binding command {{0}} has already been registered.",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",227:"@bindable is not supported for properties that uses a symbol for name. Use a string for the property name instead.",228:"@bindable cannot be used as a class decorator when no configuration object is supplied.",229:"@bindable cannot be used as a class decorator when no property name is supplied in the configuration object.",500:"There is no cached controller for the provided ViewModel: {{0}}",501:"Invalid combination: cannot combine the containerless custom element option with Shadow DOM.",502:"Trying to activate a disposed controller: {{0}}.",503:"Controller at {{0}} is in an unexpected state: {{1}} during activation.",504:"Synthetic view at {{0}} is being activated with null/undefined scope.",505:"Controller at {{0}} is in an unexpected state: {{1}} during deactivation.",506:"Invalid callback for @watch decorator: {{0}}",507:"Observer for bindable property {{0}} does not support coercion.",508:"Observer for property {{0}} does not support change handler.",759:"No attribute definition found for type {{0:name}}",760:"No element definition found for type {{0:name}}",761:"Cannot create a custom element definition with only a name and no type: {{0}}",762:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",763:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",764:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",765:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",766:"Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a {{0:typeof}}.",652:"Aurelia is unable to observe property {{0}}. Register observation mapping with .useConfig().",653:"Mapping for property {{0}} of <{{1}} /> already exists",654:"Array values can only be bound to a multi-select.",714:'Template compilation error: primary already exists on element/attribute "{{0}}"',719:"Attribute {{0}} has been already registered for {{1:element}}",767:"Aurelia.root was accessed without a valid root.",768:"An instance of Aurelia is already registered with the container or an ancestor of it.",769:"Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView, did you create the host from a DOMParser and forget to call adoptNode()?",770:"Aurelia.start() was called without a composition root",771:"The aurelia instance must be fully stopped before it can be disposed",750:"view.ref is not supported. If you are migrating from v1, this can be understood as the controller.",751:`Attempted to reference "{{0}}", but it was not found amongst the target's API.`,752:"Element {{0:.res}} is not registered in {{1:name}}.",753:"Attribute {{0:.res}} is not registered in {{1:name}}.",754:"Attribute {{0:.res}} is not registered in {{1:name}}.",755:"Cannot resolve ViewFactory before the provider was prepared.",756:"Cannot resolve ViewFactory without a (valid) name.",757:"AUR0757: The compiled template is not aligned with the render instructions. There are {{0}} targets and {{1}} instructions.",772:"Invalid @watch decorator config. Expected an expression or a fn but received null/undefined.",773:'Invalid @watch decorator change handler config.Method "{{0}}" not found in class {{1}}',774:"Invalid @watch decorator usage: decorated target {{0}} is not a class method.",775:'Invalid command "{{0}}" usage with [repeat]',776:'Invalid [repeat] usage, found extraneous target "{{0}}"',777:"Unsupported: [repeat] cannot iterate over {{0:toString}}",778:"Unsupported: [repeat] cannot count {{0:toString}}",814:"[repeat] encountered an error: number of views != number of items {{0:join(!=)}}",779:"Invalid portal insertion position: {{0}}",801:'"& self" binding behavior only supports listener binding via trigger/capture command.',802:`"& updateTrigger" invalid usage. This binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:'blur'">`,803:'"& updateTrigger" invalid usage. This binding behavior can only be applied to two-way/ from-view bindings.',805:'Invalid scope behavior "{{0}}" on <au-compose />. Only "scoped" or "auto" allowed.',806:`<au-compose /> couldn't find a custom element with name "{{0}}", did you forget to register it locally or globally?`,807:"Composition has already been activated/deactivated. Id: {{0:controller}}",808:"Composition has already been deactivated.",810:"Invalid [else] usage, it should follow an [if]",811:"Invalid portal strict target query, empty query.",812:"Invalid portal strict target resolution, target not found.",813:'Invalid [pending]/[then]/[catch] usage. The parent [promise].resolve not found; only "*[promise.resolve] > *[pending|then|catch]" relation is supported.',815:'Invalid [case/default-case] usage. The parent [switch] not found; only "*[switch] > *[case|default-case]" relation is supported.',816:"Invalid [default-case] usage. Multiple 'default-case's are not allowed.",817:'"& signal" binding behavior can only be used with bindings that have a "handleChange" method',818:`"& signal" invalid usage. At least one signal name must be passed to the signal behavior, e.g. "expr & signal:'my-signal'"`,819:"Spreading to bindables onto non custom element",820:"Invalid spread target {{0}}",9999:"No scope context for spread binding.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?",9997:"Marker is malformed. This likely happens when a compiled template has been modified. Did you accidentally modified some compiled template? You can modify template before compilation with compiling Template compiler hook.",9996:"Invalid usage, a rate limit has already been applied. Did you have both throttle and debounce on the same binding?",9995:"The binding already has a target subscriber.",9994:`"& attr" can be only used on property binding. It's used on {{0:ctor}}`,9993:'"& updateTrigger" binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger',9992:'"& updateTrigger" uses node observer to observe, but it does not know how to use events to observe property <{{0:target@property}} />',9991:"Invalid @children usage. @children decorator can only be used on a field",9990:"Invalid @slotted usage. @slotted decorator can only be used on a field",9989:"Invalid query selector. Only selectors with alpha-numeric characters, or $all are allowed. Got {{0}} instead."},Wee=(n,...e)=>{var i;let t=Vee[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=jee(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=yh(l[a.slice(1)]):l=yh(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t};function jee(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}function Sh(n,e){let t;function i(r,s){var c;let o;switch(s.kind){case"getter":case"field":{const u=s.name;if(typeof u!="string")throw Re(227);o=u;break}case"class":if(t==null)throw Re(228);if(typeof t=="string")o=t;else{const u=t.name;if(!u)throw Re(229);if(typeof u!="string")throw Re(227);o=u}break}const a=t==null||typeof t=="string"?{name:o}:t,l=(c=s.metadata)[Zc]??(c[Zc]=en());l[o]=Ll.create(o,a)}if(arguments.length>1){t={},i(n,e);return}else if(wt(n))return t=n,i;return t=n===void 0?{}:n,i}const Zc=Dl("bindables"),is=Nl({name:Zc,keyFrom:n=>`${Zc}:${n}`,from(...n){const e={},t=Array.isArray;function i(o){e[o]=Ll.create(o)}function r(o,a){e[o]=a instanceof Ll?a:Ll.create(o,a===!0?{}:a)}function s(o){t(o)?o.forEach(a=>wt(a)?i(a):r(a.name,a)):o instanceof Ll?e[o.name]=o:o!==void 0&&Ox(o).forEach(a=>r(a,o[a]))}return n.forEach(s),e},getAll(n){const e=[],t=JX(n);let i=t.length,r;for(;--i>=0;){r=t[i];const s=Xi(Zc,r);s!=null&&e.push(...Object.values(s))}return e},_add(n,e){let t=Xi(Zc,e);t==null&&To(t=en(),e,Zc),t[n.name]=n}});class Ll{constructor(e,t,i,r,s,o){this.attribute=e,this.callback=t,this.mode=i,this.primary=r,this.name=s,this.set=o}static create(e,t={}){const i=t.mode??qn;return new Ll(t.attribute??kH(e),t.callback??`${e}Changed`,wt(i)?Am[i]??Ix:i,t.primary??!1,t.name??e,t.set??zee(t))}}const Hx={key:Dl("coercer"),define(n,e){To(n[e].bind(n),n,Hx.key)},for(n){return Xi(Hx.key,n)}};function zee(n={}){const e=n.type??null;if(e==null)return pa;let t;switch(e){case Number:case Boolean:case String:case BigInt:t=e;break;default:{const i=e.coerce;t=typeof i=="function"?i.bind(e):Hx.for(e)??pa;break}}return t===pa?t:Uee(t,n.nullable)}function Uee(n,e){return function(t,i){return i!=null&&i.enableCoercion?(e??!((i==null?void 0:i.coerceNullish)??!1))&&t==null?t:n(t,i):t}}const Nn=dh.createInterface,_a=ch.singleton,Qc=ch.aliasTo,Gee=ch.instance,fi=(n,e,t)=>n.registerResolver(e,t),Yee="custom-element",Kee="custom-attribute",Jc=(n,e,t,i="__au_static_resource__")=>{var s;let r=Xi(i,n);return r==null&&((s=n.$au)==null?void 0:s.type)===e&&(r=t(n.$au,n),To(r,n,i)),r};class Hm{constructor(e,t,i,r){this.Type=e,this.name=t,this.aliases=i,this.key=r}static create(e,t){let i,r;return wt(e)?(i=e,r={name:i}):(i=e.name,r=e),new Hm(t,zc(aF(t,"name"),i),ui(aF(t,"aliases"),r.aliases,t.aliases),lF.keyFrom(i))}register(e,t){const i=this.Type,r=typeof t=="string"?$m(t):this.key,s=this.aliases;e.has(r,!1)?console.warn(`[DEV:aurelia] ${Re(156,this.name)}`):e.register(e.has(i,!1)?null:_a(i,i),Qc(i,r),...s.map(o=>Qc(i,$m(o))))}}const Ps="binding-behavior",Xf=hh(Ps),aF=(n,e)=>Xi(Dl(e),n),$m=n=>`${Xf}:${n}`,lF=Nl({name:Xf,keyFrom:$m,isType(n){var e;return Bt(n)&&(i0(Xf,n)||((e=n.$au)==null?void 0:e.type)===Ps)},define(n,e){const t=Hm.create(n,e),i=t.Type;return To(t,i,Xf,da),i},getDefinition(n){const e=Xi(Xf,n)??Jc(n,Ps,Hm.create);if(e===void 0)throw Re(151,n);return e},find(n,e){const t=n.find(Ps,e);return t==null?null:Xi(Xf,t)??Jc(t,Ps,Hm.create)??null},get(n,e){try{return n.get(Lf($m(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve binding behavior with name",e),t}return n.get(Lf($m(e)))}}),$x=new Map,r0=n=>({type:Ps,name:n});class s0{bind(e,t){$x.set(t,t.mode),t.mode=this.mode}unbind(e,t){t.mode=$x.get(t),$x.delete(t)}}class cF extends s0{get mode(){return n0}}cF.$au=r0("oneTime");class uF extends s0{get mode(){return qn}}uF.$au=r0("toView");class hF extends s0{get mode(){return kl}}hF.$au=r0("fromView");class dF extends s0{get mode(){return Q2}}dF.$au=r0("twoWay");const Fx=new WeakMap,qee=200;class fF{constructor(){this._platform=fe(Nf)}bind(e,t,i,r){var a;const s={type:"debounce",delay:i??qee,now:this._platform.performanceNow,queue:this._platform.taskQueue,signals:wt(r)?[r]:r??gt},o=(a=t.limit)==null?void 0:a.call(t,s);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):Fx.set(t,o)}unbind(e,t){var i;(i=Fx.get(t))==null||i.dispose(),Fx.delete(t)}}fF.$au={type:Ps,name:"debounce"};const o0=Nn("ISignaler",n=>n.singleton(Xee));class Xee{constructor(){this.signals=en()}dispatchSignal(e){const t=this.signals[e];if(t===void 0)return;let i;for(i of t.keys())i.handleChange(void 0,void 0)}addSignalListener(e,t){var i;((i=this.signals)[e]??(i[e]=new Set)).add(t)}removeSignalListener(e,t){var i;(i=this.signals[e])==null||i.delete(t)}}class gF{constructor(){this._lookup=new Map,this._signaler=fe(o0)}bind(e,t,...i){if(!("handleChange"in t))throw Re(817);if(i.length===0)throw Re(818);this._lookup.set(t,i);let r;for(r of i)rF(this._signaler,r,t)}unbind(e,t){const i=this._lookup.get(t);this._lookup.delete(t);let r;for(r of i)sF(this._signaler,r,t)}}gF.$au={type:Ps,name:"signal"};const Bx=new WeakMap,Zee=200;class pF{constructor(){({performanceNow:this._now,taskQueue:this._taskQueue}=fe(Nf))}bind(e,t,i,r){var a;const s={type:"throttle",delay:i??Zee,now:this._now,queue:this._taskQueue,signals:wt(r)?[r]:r??gt},o=(a=t.limit)==null?void 0:a.call(t,s);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):Bx.set(t,o)}unbind(e,t){var i;(i=Bx.get(t))==null||i.dispose(),Bx.delete(t)}}pF.$au={type:Ps,name:"throttle"};const Is=Nf,Vx=(()=>{const n=new WeakMap;return Nl({add(e,t){let i=n.get(e);i==null&&n.set(e,i=[]),i.push(t)},getDefinitions(e){return n.get(e)??gt}})})();class _h{get type(){return Kee}constructor(e,t,i,r,s,o,a,l,c,u,h){this.Type=e,this.name=t,this.aliases=i,this.key=r,this.defaultBindingMode=s,this.isTemplateController=o,this.bindables=a,this.noMultiBindings=l,this.watches=c,this.dependencies=u,this.containerStrategy=h}static create(e,t){let i,r;wt(e)?(i=e,r={name:i}):(i=e.name,r=e);const s=zc(Hl(t,"defaultBindingMode"),r.defaultBindingMode,t.defaultBindingMode,qn);for(const o of Object.values(is.from(r.bindables)))is._add(o,t);return new _h(t,zc(Hl(t,"name"),i),ui(Hl(t,"aliases"),r.aliases,t.aliases),Qf(i),wt(s)?Am[s]??Ix:s,zc(Hl(t,"isTemplateController"),r.isTemplateController,t.isTemplateController,!1),is.from(...is.getAll(t),Hl(t,"bindables"),t.bindables,r.bindables),zc(Hl(t,"noMultiBindings"),r.noMultiBindings,t.noMultiBindings,!1),ui(Vx.getDefinitions(t),t.watches),ui(Hl(t,"dependencies"),r.dependencies,t.dependencies),zc(Hl(t,"containerStrategy"),r.containerStrategy,t.containerStrategy,"reuse"))}register(e,t){const i=this.Type,r=typeof t=="string"?Qf(t):this.key,s=this.aliases;e.has(r,!1)?(_h.warnDuplicate&&e.get(fh).warn(Re(154,this.name)),console.warn(`[DEV:aurelia] ${Re(154,this.name)}`)):e.register(e.has(i,!1)?null:_a(i,i),Qc(i,r),...s.map(o=>Qc(i,Qf(o))))}toString(){return`au:ca:${this.name}`}}_h.warnDuplicate=!0;const Zi="custom-attribute",Zf=hh(Zi),Qf=n=>`${Zf}:${n}`,Hl=(n,e)=>Xi(Dl(e),n),Qee=n=>{var e;return Bt(n)&&(i0(Zf,n)||((e=n.$au)==null?void 0:e.type)===Zi)},mF=(n,e)=>og(n,Qf(e))??void 0,Wx=(n,e)=>{const t=_h.create(n,e),i=t.Type;return To(t,i,Zf,da),i},jx=n=>{const e=Xi(Zf,n)??Jc(n,Zi,_h.create);if(e===void 0)throw Re(759,n);return e},zx=Nl({name:Zf,keyFrom:Qf,isType:Qee,for:mF,closest:(n,e)=>{let t="",i="";if(wt(e))t=Qf(e),i=e;else{const s=jx(e);t=s.key,i=s.name}let r=n;for(;r!==null;){const s=og(r,t);if(s!=null&&s.is(i))return s;r=b0(r)}return null},define:Wx,getDefinition:jx,annotate(n,e,t){To(t,n,Dl(e))},getAnnotation:Hl,find(n,e){const t=n.find(Zi,e);return t===null?null:Xi(Zf,t)??Jc(t,Zi,_h.create)??null}}),Jf=Nn("ILifecycleHooks");class Jee{constructor(e,t){this.definition=e,this.instance=t}}class Ux{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const i=new Set;let r=t.prototype;for(;r!==J2;){for(const s of tF(r))s!=="constructor"&&!s.startsWith("_")&&i.add(s);r=Object.getPrototypeOf(r)}return new Ux(t,i)}}const bF=(()=>{const n=new WeakMap,e=new WeakMap;return Nl({define(t,i){const r=Ux.create(t,i),s=r.Type;return e.set(s,r),{register(o){_a(Jf,s).register(o)}}},resolve(t){let i=n.get(t);if(i===void 0){n.set(t,i=new ete);const r=t.root,s=r===t?t.getAll(Jf):t.has(Jf,!1)?r.getAll(Jf).concat(t.getAll(Jf)):r.getAll(Jf);let o,a,l,c,u;for(o of s){a=e.get(o.constructor),l=new Jee(a,o);for(c of a.propertyNames)u=i[c],u===void 0?i[c]=[l]:u.push(l)}}return i}})})();class ete{}class Fm{constructor(e,t,i,r){this.Type=e,this.name=t,this.aliases=i,this.key=r}static create(e,t){let i,r;return wt(e)?(i=e,r={name:i}):(i=e.name,r=e),new Fm(t,zc(Gx(t,"name"),i),ui(Gx(t,"aliases"),r.aliases,t.aliases),vF.keyFrom(i))}register(e,t){const i=this.Type,r=typeof t=="string"?Bm(t):this.key,s=this.aliases;e.has(r,!1)?console.warn(`[DEV:aurelia] ${Re(155,this.name)}`):e.register(e.has(i,!1)?null:_a(i,i),Qc(i,r),...s.map(o=>Qc(i,Bm(o))))}}const eg="value-converter",tg=hh(eg),Gx=(n,e)=>Xi(Dl(e),n),Bm=n=>`${tg}:${n}`,vF=Nl({name:tg,keyFrom:Bm,isType(n){var e;return Bt(n)&&(i0(tg,n)||((e=n.$au)==null?void 0:e.type)===eg)},define(n,e){const t=Fm.create(n,e),i=t.Type;return To(t,i,tg,da),i},getDefinition(n){const e=Xi(tg,n)??Jc(n,eg,Fm.create);if(e===void 0)throw Re(152,n);return e},annotate(n,e,t){To(t,n,Dl(e))},getAnnotation:Gx,find(n,e){const t=n.find(eg,e);return t==null?null:Xi(tg,t)??Jc(t,eg,Fm.create)??null},get(n,e){try{return n.get(Lf(Bm(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve value converter with name",e),t}return n.get(Lf(Bm(e)))}});class tte{constructor(e,t){this._value=void 0,this.b=e,this._flushQueue=t}flush(){this.b.updateSource(this._value)}handleChange(e,t){const i=this.b;e!==Tn(i.ast,i._scope,i,null)&&(this._value=e,this._flushQueue.add(this))}}const Rh=(()=>{function n(e){this._scope=e}return e=>{ns(e.prototype,"useScope",n)}})(),$l=(()=>{class n{}const e=new WeakMap,t=new WeakMap,i=new WeakMap;function r(d){return this.l.get(d)}function s(d,f){let g=t.get(d);return g==null&&t.set(d,g=new n),g[f]??(g[f]=lF.get(d.l,f))}function o(d,f,g){var v;const p=s(this,d);if(p==null)throw Re(101,d);let m=i.get(this);if(m==null&&i.set(this,m={}),m[d])throw Re(102,d);(v=p.bind)==null||v.call(p,f,this,...g)}function a(d,f){var m;const g=s(this,d),p=i.get(this);(m=g==null?void 0:g.unbind)==null||m.call(g,f,this),p!=null&&(p[d]=!1)}function l(d,f){let g=e.get(d);return g==null&&e.set(d,g=new n),g[f]??(g[f]=vF.get(d.l,f))}function c(d){const f=l(this,d);if(f==null)throw Re(103,d);const g=f.signals;if(g!=null){const p=this.l.get(o0),m=g.length;let v=0;for(;v<m;++v)p.addSignalListener(g[v],this)}}function u(d){const f=l(this,d);if((f==null?void 0:f.signals)===void 0)return;const g=this.l.get(o0);let p=0;for(;p<f.signals.length;++p)g.removeSignalListener(f.signals[p],this)}function h(d,f,g,p){var v;const m=l(this,d);if(m==null)throw Re(103,d);switch(f){case"toView":return"toView"in m?m.toView(g,...p):g;case"fromView":return"fromView"in m?(v=m.fromView)==null?void 0:v.call(m,g,...p):g}}return d=>{const f=d.prototype;ns(f,"get",r),ns(f,"bindBehavior",o),ns(f,"unbindBehavior",a),ns(f,"bindConverter",c),ns(f,"unbindConverter",u),ns(f,"useConverter",h)}})(),nte=Nn("IFlushQueue",n=>n.singleton(ite));class ite{constructor(){this._flushing=!1,this._items=new Set}get count(){return this._items.size}add(e){if(this._items.add(e),!this._flushing){this._flushing=!0;try{this._items.forEach(rte)}finally{this._flushing=!1}}}clear(){this._items.clear(),this._flushing=!1}}const rte=function(n,e,t){t.delete(n),n.flush()},Eh=(()=>{const n=new WeakSet,e=(i,r,s)=>{let o,a,l,c=!1;const u=i.queue,h=()=>r(l),d=g=>{l=g,s.isBound?(a=o,o=u.queueTask(h,{delay:i.delay}),a==null||a.cancel()):h()},f=d.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return d.flush=()=>{c=(o==null?void 0:o.status)===oF,f(),c&&h()},d},t=(i,r,s)=>{let o,a,l=0,c=0,u,h=!1;const d=i.queue,f=()=>i.now(),g=()=>r(u),p=v=>{u=v,s.isBound?(c=f()-l,a=o,c>i.delay?(l=f(),g()):o=d.queueTask(()=>{l=f(),g()},{delay:i.delay-c}),a==null||a.cancel()):g()},m=p.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return p.flush=()=>{h=(o==null?void 0:o.status)===oF,m(),h&&g()},p};return(i,r)=>{ns(i.prototype,"limit",function(s){if(n.has(this))throw Re(9996);n.add(this);const o=r(this,s),a=s.signals,l=a.length>0?this.get(o0):null,c=this[o],u=(...f)=>c.call(this,...f),h=s.type==="debounce"?e(s,u,this):t(s,u,this),d=l?{handleChange:h.flush}:null;return this[o]=h,l&&a.forEach(f=>rF(l,f,d)),{dispose:()=>{l&&a.forEach(f=>sF(l,f,d)),n.delete(this),h.dispose(),delete this[o]}}})}})(),eu=((n=new WeakSet)=>e=>function(){n.has(this)||(n.add(this),e.call(this))})(),ste={preempt:!0};class xh{constructor(e,t,i,r,s,o,a,l,c,u){this.targetAttribute=a,this.targetProperty=l,this.mode=c,this.strict=u,this.isBound=!1,this._scope=void 0,this._task=null,this._value=void 0,this.boundFn=!1,this.l=t,this.ast=s,this._controller=e,this.target=o,this.oL=i,this._taskQueue=r}updateTarget(e){const t=this.target,i=this.targetAttribute,r=this.targetProperty;switch(i){case"class":t.classList.toggle(r,!!e);break;case"style":{let s="",o=yh(e);wt(o)&&o.includes("!important")&&(s="important",o=o.replace("!important","")),t.style.setProperty(r,o,s);break}default:e==null?t.removeAttribute(i):t.setAttribute(i,yh(e))}}handleChange(){if(!this.isBound)return;let e;this.obs.version++;const t=Tn(this.ast,this._scope,this,(this.mode&qn)>0?this:null);this.obs.clear(),t!==this._value&&(this._value=t,this._controller.state!==os?(e=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(t)},ste),e==null||e.cancel()):this.updateTarget(t))}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Yc(this.ast,e,this),this.mode&(qn|n0)&&this.updateTarget(this._value=Tn(this.ast,e,this,(this.mode&qn)>0?this:null)),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,Kc(this.ast,this._scope,this),this._scope=void 0,this._value=void 0,(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}}xh.mix=eu(()=>{Rh(xh),Eh(xh,()=>"updateTarget"),xo(xh,null),$l(xh)});const ote={preempt:!0};class ate{constructor(e,t,i,r,s,o,a,l,c){this.ast=s,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._task=null,this._controller=e,this.oL=i,this._taskQueue=r,this._targetObserver=i.getAccessor(o,a);const u=s.expressions,h=this.partBindings=Array(u.length),d=u.length;let f=0;for(;d>f;++f)h[f]=new Th(u[f],o,a,t,i,c,this)}_handlePartChange(){this.updateTarget()}updateTarget(){const e=this.partBindings,t=this.ast.parts,i=e.length;let r="",s=0;if(i===1)r=t[0]+e[0]._value+t[1];else for(r=t[0];i>s;++s)r+=e[s]._value+t[s+1];const o=this._targetObserver,a=this._controller.state!==os&&(o.type&Sa)>0;let l;a?(l=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,o.setValue(r,this.target,this.targetProperty)},ote),l==null||l.cancel(),l=null):o.setValue(r,this.target,this.targetProperty)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e;const t=this.partBindings,i=t.length;let r=0;for(;i>r;++r)t[r].bind(e);this.updateTarget(),this.isBound=!0}unbind(){var r;if(!this.isBound)return;this.isBound=!1,this._scope=void 0;const e=this.partBindings,t=e.length;let i=0;for(;t>i;++i)e[i].unbind();(r=this._task)==null||r.cancel(),this._task=null}useAccessor(e){this._targetObserver=e}}class Th{constructor(e,t,i,r,s,o,a){this.ast=e,this.target=t,this.targetProperty=i,this.strict=o,this.owner=a,this.mode=qn,this.task=null,this.isBound=!1,this._value="",this.boundFn=!1,this.l=r,this.oL=s}updateTarget(){this.owner._handlePartChange()}handleChange(){if(!this.isBound)return;this.obs.version++;const e=Tn(this.ast,this._scope,this,(this.mode&qn)>0?this:null);this.obs.clear(),e!=this._value&&(this._value=e,ni(e)&&this.observeCollection(e),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Yc(this.ast,e,this),this._value=Tn(this.ast,this._scope,this,(this.mode&qn)>0?this:null),ni(this._value)&&this.observeCollection(this._value),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Kc(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}Th.mix=eu(()=>{Rh(Th),Eh(Th,()=>"updateTarget"),xo(Th,null),$l(Th)});const lte={preempt:!0};class Mh{constructor(e,t,i,r,s,o,a,l){this.p=s,this.ast=o,this.target=a,this.strict=l,this.isBound=!1,this.mode=qn,this._task=null,this._value="",this._needsRemoveNode=!1,this.boundFn=!1,this.l=t,this._controller=e,this.oL=i,this._taskQueue=r}updateTarget(e){var r,s;const t=this.target,i=this._value;this._value=e,this._needsRemoveNode&&((r=i.parentNode)==null||r.removeChild(i),this._needsRemoveNode=!1),e instanceof this.p.Node&&((s=t.parentNode)==null||s.insertBefore(e,t),e="",this._needsRemoveNode=!0),t.textContent=yh(e??"")}handleChange(){var i;if(!this.isBound)return;this.obs.version++;const e=Tn(this.ast,this._scope,this,(this.mode&qn)>0?this:null);if(this.obs.clear(),e===this._value){(i=this._task)==null||i.cancel(),this._task=null;return}this._controller.state!==os?this._queueUpdate(e):this.updateTarget(e)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const e=this._value=Tn(this.ast,this._scope,this,(this.mode&qn)>0?this:null);this.obs.clear(),ni(e)&&this.observeCollection(e),this._controller.state!==os?this._queueUpdate(e):this.updateTarget(e)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Yc(this.ast,e,this);const t=this._value=Tn(this.ast,this._scope,this,(this.mode&qn)>0?this:null);ni(t)&&this.observeCollection(t),this.updateTarget(t),this.isBound=!0}unbind(){var e,t;this.isBound&&(this.isBound=!1,Kc(this.ast,this._scope,this),this._needsRemoveNode&&((e=this._value.parentNode)==null||e.removeChild(this._value)),this._scope=void 0,this.obs.clearAll(),(t=this._task)==null||t.cancel(),this._task=null)}_queueUpdate(e){const t=this._task;this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(e)},lte),t==null||t.cancel()}}Mh.mix=eu(()=>{Rh(Mh),Eh(Mh,()=>"updateTarget"),xo(Mh,null),$l(Mh)});class Ah{constructor(e,t,i,r,s,o){this.ast=i,this.targetProperty=r,this.isBound=!1,this._scope=void 0,this.target=null,this.boundFn=!1,this.l=e,this.oL=t,this.strict=o,this._toBindingContext=s}updateTarget(){this.target[this.targetProperty]=this._value}handleChange(){this.isBound&&(this.obs.version++,this._value=Tn(this.ast,this._scope,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,this.target=this._toBindingContext?e.bindingContext:e.overrideContext,Yc(this.ast,e,this),this._value=Tn(this.ast,this._scope,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Kc(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}Ah.mix=eu(()=>{Rh(Ah),Eh(Ah,()=>"updateTarget"),xo(Ah,null),$l(Ah)});class wr{constructor(e,t,i,r,s,o,a,l,c){this.ast=s,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._targetObserver=void 0,this._task=null,this._targetSubscriber=null,this.boundFn=!1,this.l=t,this._controller=e,this._taskQueue=r,this.oL=i}updateTarget(e){this._targetObserver.setValue(e,this.target,this.targetProperty)}updateSource(e){km(this.ast,this._scope,this,e)}handleChange(){if(!this.isBound)return;this.obs.version++;const e=Tn(this.ast,this._scope,this,(this.mode&qn)>0?this:null);this.obs.clear(),this._controller.state!==os&&(this._targetObserver.type&Sa)>0?(Vm=this._task,this._task=this._taskQueue.queueTask(()=>{this.updateTarget(e),this._task=null},cte),Vm==null||Vm.cancel(),Vm=null):this.updateTarget(e)}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Yc(this.ast,e,this);const t=this.oL,i=this.mode;let r=this._targetObserver;r||(i&kl?r=t.getObserver(this.target,this.targetProperty):r=t.getAccessor(this.target,this.targetProperty),this._targetObserver=r);const s=(i&qn)>0;i&(qn|n0)&&this.updateTarget(Tn(this.ast,this._scope,this,s?this:null)),i&kl&&(r.subscribe(this._targetSubscriber??(this._targetSubscriber=new tte(this,this.l.get(nte)))),s||this.updateSource(r.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,Kc(this.ast,this._scope,this),this._scope=void 0,this._targetSubscriber&&(this._targetObserver.unsubscribe(this._targetSubscriber),this._targetSubscriber=null),(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}useTargetObserver(e){var t;(t=this._targetObserver)==null||t.unsubscribe(this),(this._targetObserver=e).subscribe(this)}useTargetSubscriber(e){if(this._targetSubscriber!=null)throw Re(9995);this._targetSubscriber=e}}wr.mix=eu(()=>{Rh(wr),Eh(wr,n=>n.mode&kl?"updateSource":"updateTarget"),xo(wr,null),$l(wr)});let Vm=null;const cte={preempt:!0};class Yx{constructor(e,t,i,r){this.ast=t,this.target=i,this.strict=r,this.isBound=!1,this._scope=void 0,this.l=e}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Yc(this.ast,e,this),km(this.ast,this._scope,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Tn(this.ast,this._scope,this,null)===this.target&&km(this.ast,this._scope,this,null),Kc(this.ast,this._scope,this),this._scope=void 0)}}Yx.mix=eu(()=>{$l(Yx)});class ute{constructor(e,t=!1,i){this.prevent=e,this.capture=t,this.onError=i}}class ng{constructor(e,t,i,r,s,o,a){this.ast=t,this.target=i,this.targetEvent=r,this.strict=a,this.isBound=!1,this.self=!1,this.boundFn=!0,this._modifiedEventHandler=null,this.l=e,this._options=s,this._modifiedEventHandler=o}callSource(e){const t=this._scope.overrideContext;t.$event=e;let i=Tn(this.ast,this._scope,this,null);delete t.$event,Bt(i)&&(i=i(e)),i!==!0&&this._options.prevent&&e.preventDefault()}handleEvent(e){var t;if(!(this.self&&this.target!==e.composedPath()[0])&&((t=this._modifiedEventHandler)==null?void 0:t.call(this,e))!==!1)try{this.callSource(e)}catch(i){this._options.onError(e,i)}}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Yc(this.ast,e,this),this.target.addEventListener(this.targetEvent,this,this._options),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Kc(this.ast,this._scope,this),this._scope=void 0,this.target.removeEventListener(this.targetEvent,this,this._options))}}ng.mix=eu(function(){Rh(ng),Eh(ng,()=>"callSource"),$l(ng)});const a0=Nn("IEventModifier"),wF=Nn("IKeyMapping",n=>n.instance({meta:Nl(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((e,t,i)=>{let r=String.fromCharCode(i+65);return e[i+65]=r,r=String.fromCharCode(i+97),e[i+97]=e[r]=r,e},{})}}));class Kx{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this._mapping=fe(wF),this._mouseButtons=["left","middle","right"]}static register(e){e.register(_a(a0,Kx))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let r=!1,s=!1,o;for(o of t){switch(o){case"prevent":r=!0;continue;case"stop":s=!0;continue;case"left":case"middle":case"right":if(i.button!==this._mouseButtons.indexOf(o))return!1;continue}if(this._mapping.meta.includes(o)&&i[`${o}Key`]!==!0)return!1;console.warn(`Modifier '${o}' is not supported for mouse events.`)}return r&&i.preventDefault(),s&&i.stopPropagation(),!0}}}class qx{constructor(){this._mapping=fe(wF),this.type=["keydown","keyup"]}static register(e){e.register(_a(a0,qx))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let r=!1,s=!1,o;for(o of t){switch(o){case"prevent":r=!0;continue;case"stop":s=!0;continue}if(this._mapping.meta.includes(o)){if(i[`${o}Key`]!==!0)return!1;continue}if(this._mapping.keys[o]!==i.key)return!1;console.warn(`Modifier '${o}' is not supported for keyboard event with key "${i.key}".`)}return r&&i.preventDefault(),s&&i.stopPropagation(),!0}}}class Xx{constructor(){this.type=["$ALL"]}static register(e){e.register(_a(a0,Xx))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let r=!1,s=!1,o;for(o of t){switch(o){case"prevent":r=!0;continue;case"stop":s=!0;continue}console.warn(`Modifier '${o}' is not supported for event "${i.type}".`)}return r&&i.preventDefault(),s&&i.stopPropagation(),!0}}}const yF=Nn("IEventModifierHandler",n=>n.instance({getHandler:()=>(console.warn("No event modifier handler registered"),null)}));class Zx{constructor(){this._reg=fe(AE(a0)).reduce((e,t)=>((ni(t.type)?t.type:[t.type]).forEach(r=>e[r]=t),e),{})}static register(e){e.register(_a(yF,Zx))}getHandler(e,t){var i;return wt(t)?((i=this._reg[e]??this._reg.$ALL)==null?void 0:i.getHandler(t))??null:null}}const hte={register(n){n.register(Zx,Kx,qx,Xx)}},rs=Nn("IViewFactory");class l0{constructor(e,t){this.isCaching=!1,this._cache=null,this._cacheSize=-1,this.name=t.name,this.container=e,this.def=t}setCacheSize(e,t){e&&(e==="*"?e=l0.maxCacheSize:wt(e)&&(e=parseInt(e,10)),(this._cacheSize===-1||!t)&&(this._cacheSize=e)),this._cacheSize>0?this._cache=[]:this._cache=null,this.isCaching=this._cacheSize>0}canReturnToCache(e){return this._cache!=null&&this._cache.length<this._cacheSize}tryReturnToCache(e){return this.canReturnToCache(e)?(this._cache.push(e),!0):!1}create(e){const t=this._cache;let i;return t!=null&&t.length>0?(i=t.pop(),i):(i=ss.$view(this,e),i)}}l0.maxCacheSize=65535;const dte=(()=>{const n=(e,t)=>e.document.createComment(t);return e=>{const t=n(e,"au-end");return t.$start=n(e,"au-start"),t}})(),c0=(n,e,t)=>{if(n===null)return;const i=t.length;let r=0;for(;i>r;)n.insertBefore(t[r],e),++r},CF=(n,e)=>new n.ownerDocument.defaultView.MutationObserver(e),fte=n=>n.nodeType===1,SF="default",gte="au-slot",_F=Nn("IAuSlotsInfo");class RF{constructor(e){this.projectedSlots=e}}const pte=Nn("IAuSlotWatcher");class u0{static create(e,t,i,r,s,o,a,l){const c=[],u=r.renderers,h=f=>{let g=f,p=e;for(;p!=null&&g>0;)p=p.parent,--g;if(p==null)throw Re(9999);return p},d=f=>{var y;const g=h(f),p=new u0(g),m=s.compileSpread(g.controller.definition,((y=g.instruction)==null?void 0:y.captures)??gt,g.controller.container,t,i);let v;for(v of m)switch(v.type){case hi.spreadTransferedBinding:d(f+1);break;case hi.spreadElementProp:u[v.instruction.type].render(p,$h(t),v.instruction,o,a,l);break;default:u[v.type].render(p,t,v,o,a,l)}c.push(p)};return d(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(e){this.isBound=!1,this._innerBindings=[],this.locator=(this.$controller=(this._hydrationContext=e).controller).container}get(e){return this.locator.get(e)}bind(e){if(this.isBound)return;this.isBound=!0;const t=this.scope=this._hydrationContext.controller.scope.parent??void 0;if(t==null)throw Re(9999);this._innerBindings.forEach(i=>i.bind(t))}unbind(){this._innerBindings.forEach(e=>e.unbind()),this.isBound=!1}addBinding(e){this._innerBindings.push(e)}addChild(e){if(e.vmKind!==kh)throw Re(9998);this.$controller.addChild(e)}}class Ra{constructor(e,t,i,r,s,o,a,l){this.target=t,this.targetKeys=i,this.ast=r,this.strict=l,this.isBound=!1,this._scope=void 0,this.boundFn=!1,this._bindingCache={},this._scopeCache=new WeakMap,this._controller=e,this.oL=s,this.l=o,this._taskQueue=a}updateTarget(){this.obs.version++;const e=Tn(this.ast,this._scope,this,this);this.obs.clear(),this._createBindings(e,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(e){if(this.isBound){if(e===this._scope)return;this.unbind()}this.isBound=!0,this._scope=e,Yc(this.ast,e,this);const t=Tn(this.ast,e,this,this);this._createBindings(t,!1)}unbind(){if(!this.isBound)return;this.isBound=!1,Kc(this.ast,this._scope,this),this._scope=void 0;let e;for(e in this._bindingCache)this._bindingCache[e].unbind()}_createBindings(e,t){var o,a;let i;if(!PH(e)){console.warn(`[DEV:aurelia] $bindable spread is given a non object for properties: "${this.targetKeys.join(", ")}" of ${this.target.constructor.name}`);for(i in this._bindingCache)(o=this._bindingCache[i])==null||o.unbind();return}let r,s=this._scopeCache.get(e);s==null&&this._scopeCache.set(e,s=di.fromParent(this._scope,e));for(i of this.targetKeys)r=this._bindingCache[i],i in e?(r==null&&(r=this._bindingCache[i]=new wr(this._controller,this.l,this.oL,this._taskQueue,(a=Ra._astCache)[i]??(a[i]=new Em(i,0)),this.target,i,Am.toView,this.strict)),r.bind(s)):t&&(r==null||r.unbind())}}Ra.mix=eu(()=>{Rh(Ra),Eh(Ra,()=>"updateTarget"),xo(Ra,null),$l(Ra)}),Ra._astCache={};const EF=(n,e,t,i)=>{n.addEventListener(e,t,i)},xF=(n,e,t,i)=>{n.removeEventListener(e,t,i)},Qx=n=>{let e;const t=n.prototype;ns(t,"subscribe",function(i){var r;if(this.subs.add(i)&&this.subs.count===1){for(e of this._config.events)EF(this._el,e,this);this._listened=!0,(r=this._start)==null||r.call(this)}}),ns(t,"unsubscribe",function(i){var r;if(this.subs.remove(i)&&this.subs.count===0){for(e of this._config.events)xF(this._el,e,this);this._listened=!1,(r=this._stop)==null||r.call(this)}}),ns(t,"useConfig",function(i){if(this._config=i,this._listened){for(e of this._config.events)xF(this._el,e,this);for(e of this._config.events)EF(this._el,e,this)}})},h0=n=>{ns(n.prototype,"subscribe",pa),ns(n.prototype,"unsubscribe",pa)};class d0{get doNotCache(){return!0}constructor(e,t={}){this.obj=e,this.mapping=t,this.type=Xc|Sa,this._value="",this._nameIndex={},this._version=0}getValue(){return this._value}setValue(e){e!==this._value&&(this._value=e,this._flushChanges())}_flushChanges(){const e=this._nameIndex,t=++this._version,i=this.obj.classList,r=TF(this._value),s=r.length;let o=0,a;if(s>0)for(;o<s;o++)a=r[o],a=this.mapping[a]||a,a.length!==0&&(e[a]=this._version,i.add(a));if(t!==1)for(a in e)a=this.mapping[a]||a,e[a]!==t&&i.remove(a)}}h0(d0);function TF(n){if(wt(n))return MF(n);if(typeof n!="object")return gt;if(ni(n)){const i=n.length;if(i>0){const r=[];let s=0;for(;i>s;++s)r.push(...TF(n[s]));return r}else return gt}const e=[];let t;for(t in n)n[t]&&(t.includes(" ")?e.push(...MF(t)):e.push(t));return e}function MF(n){const e=n.match(/\S+/g);return e===null?gt:e}const AF=n=>({$isResolver:!0,resolve(e,t){return t.get(Nh).controller.container.get(wZ(n))}}),PF=Nn("IRenderer");function Ii(n,e){var i;const t=n[i=Symbol.metadata]??(n[i]=Object.create(null));return t[fa]={register(r){_a(PF,n).register(r)}},n}function Ea(n,e,t){return wt(e)?n.parse(e,t):e}function f0(n){return n.viewModel!=null?n.viewModel:n}function mte(n,e){if(e==="element")return n;switch(e){case"controller":return $h(n);case"view":throw Re(750);case"component":return $h(n).viewModel;default:{const t=mF(n,e);if(t!==void 0)return t.viewModel;const i=$h(n,{name:e});if(i===void 0)throw Re(751,e);return i.viewModel}}}const bte=Ii(class{constructor(){this.target=hi.setProperty}render(e,t,i){var s;const r=f0(t);((s=r.$observers)==null?void 0:s[i.to])!==void 0?r.$observers[i.to].setValue(i.value):r[i.to]=i.value}}),vte=Ii(class{constructor(){this._rendering=fe(tu),this.target=hi.hydrateElement}render(e,t,i,r,s,o){let a,l,c;const u=i.res,h=i.projections,d=e.container;switch(typeof u){case"string":if(a=Nr.find(d,u),a==null)throw Re(752,i,e);break;default:a=u}const g=i.containerless||a.containerless?zm(t):null,p=Bte(r,e,t,i,g,h==null?void 0:new RF(Ox(h)));l=p.invoke(a.Type),c=ss.$el(p,l,t,i,a,g),Ji(t,a.key,c);const m=this._rendering.renderers,v=i.props,y=v.length;let w=0,_;for(;y>w;)_=v[w],m[_.type].render(e,c,_,r,s,o),++w;e.addChild(c)}}),wte=Ii(class{constructor(){this._rendering=fe(tu),this.target=hi.hydrateAttribute}render(e,t,i,r,s,o){let a=e.container,l;switch(typeof i.res){case"string":if(l=zx.find(a,i.res),l==null)throw Re(753,i,e);break;default:l=i.res}const c=NF(r,l,e,t,i,void 0,void 0),u=ss.$attr(c.ctn,c.vm,t,l);Ji(t,l.key,u);const h=this._rendering.renderers,d=i.props,f=d.length;let g=0,p;for(;f>g;)p=d[g],h[p.type].render(e,u,p,r,s,o),++g;e.addChild(u)}}),yte=Ii(class{constructor(){this._rendering=fe(tu),this.target=hi.hydrateTemplateController}render(e,t,i,r,s,o){var y,w;let a=e.container,l;switch(typeof i.res){case"string":if(l=zx.find(a,i.res),l==null)throw Re(754,i,e);break;default:l=i.res}const c=this._rendering.getViewFactory(i.def,l.containerStrategy==="new"?a.createChild({inheritParentResources:!0}):a),u=zm(t),h=NF(r,l,e,t,i,c,u),d=ss.$attr(h.ctn,h.vm,t,l);Ji(u,l.key,d),(w=(y=h.vm).link)==null||w.call(y,e,d,t,i);const f=this._rendering.renderers,g=i.props,p=g.length;let m=0,v;for(;p>m;)v=g[m],f[v.type].render(e,d,v,r,s,o),++m;e.addChild(d)}}),Cte=Ii(class{constructor(){this.target=hi.hydrateLetElement,Ah.mix()}render(e,t,i,r,s,o){t.remove();const a=i.instructions,l=i.toBindingContext,c=e.container,u=a.length;let h,d,f=0;for(;u>f;)h=a[f],d=Ea(s,h.from,Ca),e.addBinding(new Ah(c,o,d,h.to,l,e.strict??!1)),++f}}),Ste=Ii(class{constructor(){this.target=hi.refBinding}render(e,t,i,r,s){e.addBinding(new Yx(e.container,Ea(s,i.from,Ca),mte(t,i.to),e.strict??!1))}}),_te=Ii(class{constructor(){this.target=hi.interpolation,Th.mix()}render(e,t,i,r,s,o){const a=e.container,l=new ate(e,a,o,r.domQueue,Ea(s,i.from,$ee),f0(t),i.to,qn,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(AF(p0));l.useAccessor(new d0(l.target,c))}e.addBinding(l)}}),Rte=Ii(class{constructor(){this.target=hi.propertyBinding,wr.mix()}render(e,t,i,r,s,o){const a=e.container,l=new wr(e,a,o,r.domQueue,Ea(s,i.from,Ca),f0(t),i.to,i.mode,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(AF(p0));l.useTargetObserver(new d0(l.target,c))}e.addBinding(l)}}),Ete=Ii(class{constructor(){this.target=hi.iteratorBinding,wr.mix()}render(e,t,i,r,s,o){e.addBinding(new wr(e,e.container,o,r.domQueue,Ea(s,i.forOf,Fee),f0(t),i.to,qn,e.strict??!1))}}),xte=Ii(class{constructor(){this.target=hi.textBinding,Mh.mix()}render(e,t,i,r,s,o){e.addBinding(new Mh(e,e.container,o,r.domQueue,r,Ea(s,i.from,Ca),t,e.strict??!1))}}),Tte=Nn("IListenerBindingOptions",n=>n.singleton(class{constructor(){this.p=fe(Is),this.prevent=!1,this.onError=(e,t)=>{const i=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:e,error:t}});if(this.p.window.dispatchEvent(i),!i.defaultPrevented)throw t}}})),Mte=Ii(class{constructor(){this.target=hi.listenerBinding,this._modifierHandler=fe(yF),this._defaultOptions=fe(Tte),ng.mix()}render(e,t,i,r,s){e.addBinding(new ng(e.container,Ea(s,i.from,Bee),t,i.to,new ute(this._defaultOptions.prevent,i.capture,this._defaultOptions.onError),this._modifierHandler.getHandler(i.to,i.modifier),e.strict??!1))}}),Ate=Ii(class{constructor(){this.target=hi.setAttribute}render(e,t,i){t.setAttribute(i.to,i.value)}}),Pte=Ii(class{constructor(){this.target=hi.setClassAttribute}render(e,t,i){$te(t.classList,i.value)}}),Ite=Ii(class{constructor(){this.target=hi.setStyleAttribute}render(e,t,i){t.style.cssText+=i.value}}),Ote=["height","width","border-width","padding","padding-left","padding-right","padding-top","padding-right","padding-inline","padding-block","margin","margin-left","margin-right","margin-top","margin-bottom","margin-inline","margin-block","top","right","bottom","left"],kte=Ii(class{constructor(){this.target=hi.stylePropertyBinding,wr.mix()}render(e,t,i,r,s,o){if(Ote.includes(i.to)){e.addBinding(new Dte(e,e.container,o,r.domQueue,Ea(s,i.from,Ca),t.style,i.to,qn,e.strict??!1));return}e.addBinding(new wr(e,e.container,o,r.domQueue,Ea(s,i.from,Ca),t.style,i.to,qn,e.strict??!1))}});class Dte extends wr{updateTarget(e){return typeof e=="number"&&e>0&&console.warn(`[DEV]: Setting number ${e} as value for style.${this.targetProperty}. Did you meant "${e}px"?`),super.updateTarget(e)}}const Nte=Ii(class{constructor(){this.target=hi.attributeBinding,xh.mix()}render(e,t,i,r,s,o){const a=e.container,l=a.has(p0,!1)?a.get(p0):null;e.addBinding(new xh(e,a,o,r.domQueue,Ea(s,i.from,Ca),t,i.attr,l==null?i.to:i.to.split(/\s/g).map(c=>l[c]??c).join(" "),qn,e.strict??!1))}}),Lte=Ii(class{constructor(){this._compiler=fe(Vy),this._rendering=fe(tu),this.target=hi.spreadTransferedBinding}render(e,t,i,r,s,o){u0.create(e.container.get(Nh),t,void 0,this._rendering,this._compiler,r,s,o).forEach(a=>e.addBinding(a))}}),Hte=Ii(class{constructor(){this.target=hi.spreadValueBinding,Ra.mix()}render(e,t,i,r,s,o){const a=i.target;if(a==="$bindables")e.addBinding(new Ra(e,t.viewModel,Ox(t.definition.bindables),s.parse(i.from,Ca),o,e.container,r.domQueue,e.strict??!1));else throw Re(820,a)}});function $te(n,e){const t=e.length;let i=0;for(let r=0;r<t;++r)e.charCodeAt(r)===32?(r!==i&&n.add(e.slice(i,r)),i=r+1):r+1===t&&n.add(e.slice(i))}const IF="IController",OF="IInstruction",Fte="IRenderLocation",kF="ISlotsInfo";function Bte(n,e,t,i,r,s){const o=e.container.createChild();return rT(o,t,n),fi(o,g0,new Ki(IF,e)),fi(o,jf,new Ki(OF,i)),fi(o,yr,r==null?HF:new LF(r)),fi(o,rs,$F),fi(o,_F,s==null?FF:new Ki(kF,s)),o}class DF{get $isResolver(){return!0}constructor(e){this.f=e}resolve(){const e=this.f;if(e===null)throw Re(755);if(!wt(e.name)||e.name.length===0)throw Re(756);return e}}function NF(n,e,t,i,r,s,o,a){const l=t instanceof ss?t:t.$controller,c=l.container.createChild();return rT(c,i,n),fi(c,g0,new Ki(IF,l)),fi(c,jf,new Ki(OF,r)),fi(c,yr,o==null?HF:new Ki(Fte,o)),fi(c,rs,s==null?$F:new DF(s)),fi(c,_F,FF),{vm:c.invoke(e.Type),ctn:c}}class LF{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(e){this._location=e}resolve(){return this._location}}const HF=new LF(null),$F=new DF(null),FF=new Ki(kF,new RF(gt)),tu=Nn("IRendering",n=>n.singleton(Vte));class Vte{get renderers(){return this._renderers??(this._renderers=this._ctn.getAll(PF,!1).reduce((e,t)=>{var i;return e[t.target]!==void 0&&console.warn(`[DEV:aurelia] Renderer for target ${t.target} already exists.`),e[i=t.target]??(e[i]=t),e},en()))}constructor(){this._compilationCache=new WeakMap,this._fragmentCache=new WeakMap;const e=this._ctn=fe(Df).root,t=this._platform=e.get(Is);this._exprParser=e.get(Ff),this._observerLocator=e.get(qf),this._marker=t.document.createElement("au-m"),this._empty=new iT(t,t.document.createDocumentFragment())}compile(e,t){const i=t.get(Vy),r=this._compilationCache;let s=r.get(e);return s==null&&r.set(e,s=Cr.create(e.needsCompile?i.compile(e,t):e)),s}getViewFactory(e,t){return new l0(t,Cr.getOrCreate(e))}createNodes(e){if(e.enhance===!0)return new iT(this._platform,this._transformMarker(e.template));let t,i=!1;const r=this._fragmentCache,s=this._platform,o=s.document;if(r.has(e))t=r.get(e);else{const a=e.template;let l;a==null?t=null:a instanceof s.Node?a.nodeName==="TEMPLATE"?(t=a.content,i=!0):(t=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(l=o.createElement("template"),wt(a)&&(l.innerHTML=a),t=l.content,i=!0),this._transformMarker(t),r.set(e,t)}return t==null?this._empty:new iT(this._platform,i?o.importNode(t,!0):o.adoptNode(t.cloneNode(!0)))}render(e,t,i,r){const s=i.instructions,o=this.renderers,a=t.length;let l=0,c=0,u=s.length,h,d,f;if(a!==u)throw Re(757,a,u);if(a>0)for(;a>l;){for(h=s[l],f=t[l],c=0,u=h.length;u>c;)d=h[c],o[d.type].render(e,f,d,this._platform,this._exprParser,this._observerLocator),++c;++l}if(r!=null&&(h=i.surrogates,(u=h.length)>0))for(c=0;u>c;)d=h[c],o[d.type].render(e,r,d,this._platform,this._exprParser,this._observerLocator),++c}_transformMarker(e){if(e==null)return null;const t=this._platform.document.createTreeWalker(e,128);let i;for(;(i=t.nextNode())!=null;)i.nodeValue==="au*"&&i.parentNode.replaceChild(t.currentNode=this._marker.cloneNode(),i);return e}}const BF=Nn("IShadowDOMStyles"),Wte=Nn("IShadowDOMGlobalStyles",n=>n.instance({applyTo:pa})),{enter:jte,exit:zte}=$J,{wrap:Ute,unwrap:Gte}=Cee;class VF{get value(){return this._value}constructor(e,t,i,r,s){this.obj=e,this.$get=i,this.useProxy=s,this.isBound=!1,this.running=!1,this._value=void 0,this._callback=r,this.oL=t}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const e=this.obj,t=this._value,i=this.compute();wo(i,t)||this._callback.call(e,i,t,e)}compute(){this.running=!0,this.obs.version++;try{return jte(this),this._value=Gte(this.$get.call(void 0,this.useProxy?Ute(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,zte(this)}}}xo(VF,null);class Jx{get value(){return this._value}constructor(e,t,i,r,s){this.scope=e,this.l=t,this.oL=i,this.isBound=!1,this.boundFn=!1,this.obj=e.bindingContext,this._expression=r,this._callback=s}handleChange(e){const t=this._expression,i=this.obj,r=this._value;t.$kind==="AccessScope"&&this.obs.count===1||(this.obs.version++,e=Tn(t,this.scope,this,this),this.obs.clear()),wo(e,r)||(this._value=e,this._callback.call(i,e,r,i))}bind(){this.isBound||(this.obs.version++,this._value=Tn(this._expression,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this._value=void 0)}}xo(Jx,null),$l(Jx);class ss{get lifecycleHooks(){return this._lifecycleHooks}get isActive(){return(this.state&(os|Dh))>0&&(this.state&Wm)===0}get name(){var e;if(this.parent===null)switch(this.vmKind){case kh:return`[${this.definition.name}]`;case Os:return this.definition.name;case Qi:return this.viewFactory.name}switch(this.vmKind){case kh:return`${this.parent.name}>[${this.definition.name}]`;case Os:return`${this.parent.name}>${this.definition.name}`;case Qi:return this.viewFactory.name===((e=this.parent.definition)==null?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this._vm}set viewModel(e){this._vm=e,this._vmHooks=e==null||this.vmKind===Qi?ig.none:new ig(e)}get strict(){var e;return(e=this.definition)==null?void 0:e.strict}constructor(e,t,i,r,s,o,a){this.container=e,this.vmKind=t,this.definition=i,this.viewFactory=r,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this._isBindingDone=!1,this.hostController=null,this.mountTarget=WF,this.shadowRoot=null,this.nodes=null,this.location=null,this._lifecycleHooks=null,this.state=eT,this._fullyNamed=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._activatingStack=0,this._detachingStack=0,this._unbindingStack=0,this._vm=s,this._vmHooks=t===Qi?ig.none:new ig(s),this.logger=null,this.debug=!1,this.location=a,this._rendering=e.root.get(tu),this.coercion=t===Qi?void 0:e.get(qte)}static getCached(e){return nu.get(e)}static getCachedOrThrow(e){const t=ss.getCached(e);if(t===void 0)throw Re(500,e);return t}static $el(e,t,i,r,s=void 0,o=null){if(nu.has(t))return nu.get(t);if(s==null)try{s=XF(t.constructor)}catch(c){throw console.error(`[DEV:aurelia] Custom element definition not found for creating a controller with host: <${i.nodeName} /> and component ${t.constructor.name||"(Anonymous) class"}`),c}fi(e,s.Type,new Ki(s.key,t,s.Type));const a=new ss(e,Os,s,null,t,i,o),l=e.get(YH(Nh));return s.dependencies.length>0&&e.register(...s.dependencies),fi(e,Nh,new Ki("IHydrationContext",new GF(a,r,l))),nu.set(t,a),(r==null||r.hydrate!==!1)&&a._hydrateCustomElement(r),a}static $attr(e,t,i,r){if(nu.has(t))return nu.get(t);r=r??jx(t.constructor),fi(e,r.Type,new Ki(r.key,t,r.Type));const s=new ss(e,kh,r,null,t,i,null);return r.dependencies.length>0&&e.register(...r.dependencies),nu.set(t,s),s._hydrateCustomAttribute(),s}static $view(e,t=void 0){const i=new ss(e.container,Qi,null,e,null,null,null);return i.parent=t??null,i._hydrateSynthetic(),i}_hydrateCustomElement(e){this.logger=this.container.get(fh).root,this.debug=this.logger.config.level<=_Z.debug,this.debug&&(this.logger=this.logger.scopeTo(this.name));const t=this.container,i=this._vm,r=this.definition;this.scope=di.create(i,null,!0),r.watches.length>0&&UF(this,t,r,i),jF(this,r,i),this._lifecycleHooks=bF.resolve(t),t.register(r.Type),r.injectable!==null&&fi(t,r.injectable,new Ki("definition.injectable",i)),(e==null||e.hydrate!==!1)&&(this._hydrate(e==null?void 0:e.hostController),this._hydrateChildren())}_hydrate(e){this._lifecycleHooks.hydrating!=null&&this._lifecycleHooks.hydrating.forEach(ene,this),this._vmHooks._hydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this._vm.hydrating(this));const t=this.definition,i=this._compiledDef=this._rendering.compile(t,this.container),r=i.shadowOptions,s=i.hasSlots,o=i.containerless;let a=this.host,l=this.location,c=!1;if(e!=null?(this.hostController=e,c=!0):(this.hostController=$h(a,Kte))!==null&&(a=this.host=this.container.root.get(Is).document.createElement(t.name),c=!0),c&&o&&l==null&&(l=this.location=zm(a)),Ji(a,Fi,this),Ji(a,t.key,this),r!==null||s){if(l!=null)throw Re(501);Ji(this.shadowRoot=a.attachShadow(r??Zte),Fi,this),Ji(this.shadowRoot,t.key,this),this.mountTarget=Ih}else l!=null?(Ji(l,Fi,this),Ji(l,t.key,this),this.mountTarget=Oh):this.mountTarget=Ph;this._vm.$controller=this,this.nodes=this._rendering.createNodes(i),this._lifecycleHooks.hydrated!==void 0&&this._lifecycleHooks.hydrated.forEach(tne,this),this._vmHooks._hydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this._vm.hydrated(this))}_hydrateChildren(){this._rendering.render(this,this.nodes.findTargets(),this._compiledDef,this.host),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(YF,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateCustomAttribute(){const e=this.definition,t=this._vm;e.watches.length>0&&UF(this,this.container,e,t),jF(this,e,t),t.$controller=this,this._lifecycleHooks=bF.resolve(this.container),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(YF,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateSynthetic(){this._compiledDef=this._rendering.compile(this.viewFactory.def,this.container),this._rendering.render(this,(this.nodes=this._rendering.createNodes(this._compiledDef)).findTargets(),this._compiledDef,void 0)}activate(e,t,i){switch(this.state){case eT:case rg:if(!(t===null||t.isActive))return;this.state=os;break;case Dh:return;case iu:throw Re(502,this.name);default:throw Re(503,this.name,Qte(this.state))}switch(this.parent=t,this.debug&&!this._fullyNamed&&(this._fullyNamed=!0,(this.logger??(this.logger=this.container.get(fh).root.scopeTo(this.name))).trace("activate()")),this.vmKind){case Os:this.scope.parent=i??null;break;case kh:this.scope=i??null;break;case Qi:if(i==null)throw Re(504,this.name);this.hasLockedScope||(this.scope=i);break}this.$initiator=e,this._enterActivating();let r;return this.vmKind!==Qi&&this._lifecycleHooks.binding!=null&&(this.debug&&this.logger.trace("lifecycleHooks.binding()"),r=Ai(...this._lifecycleHooks.binding.map(nne,this))),this._vmHooks._binding&&(this.debug&&this.logger.trace("binding()"),r=Ai(r,this._vm.binding(this.$initiator,this.parent))),Ti(r)?(this._ensurePromise(),r.then(()=>{this._isBindingDone=!0,this.state!==os?this._leaveActivating():this.bind()}).catch(s=>{this._reject(s)}),this.$promise):(this._isBindingDone=!0,this.bind(),this.$promise)}bind(){this.debug&&this.logger.trace("bind()");let e=0,t=0,i;if(this.bindings!==null)for(e=0,t=this.bindings.length;t>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Qi&&this._lifecycleHooks.bound!=null&&(this.debug&&this.logger.trace("lifecycleHooks.bound()"),i=Ai(...this._lifecycleHooks.bound.map(ine,this))),this._vmHooks._bound&&(this.debug&&this.logger.trace("bound()"),i=Ai(i,this._vm.bound(this.$initiator,this.parent))),Ti(i)){this._ensurePromise(),i.then(()=>{this.isBound=!0,this.state!==os?this._leaveActivating():this._attach()}).catch(r=>{this._reject(r)});return}this.isBound=!0,this._attach()}_append(...e){switch(this.mountTarget){case Ph:this.host.append(...e);break;case Ih:this.shadowRoot.append(...e);break;case Oh:{let t=0;for(;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location);break}}}_attach(){if(this.debug&&this.logger.trace("attach()"),this.hostController!==null)switch(this.mountTarget){case Ph:case Ih:this.hostController._append(this.host);break;case Oh:this.hostController._append(this.location.$start,this.location);break}switch(this.mountTarget){case Ph:this.nodes.appendTo(this.host,this.definition!=null&&this.definition.enhance);break;case Ih:{const i=this.container;(i.has(BF,!1)?i.get(BF):i.get(Wte)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case Oh:this.nodes.insertBefore(this.location);break}let e=0,t;if(this.vmKind!==Qi&&this._lifecycleHooks.attaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.attaching()"),t=Ai(...this._lifecycleHooks.attaching.map(rne,this))),this._vmHooks._attaching&&(this.debug&&this.logger.trace("attaching()"),t=Ai(t,this._vm.attaching(this.$initiator,this.parent))),Ti(t)&&(this._ensurePromise(),this._enterActivating(),t.then(()=>{this._leaveActivating()}).catch(i=>{this._reject(i)})),this.children!==null)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this._leaveActivating()}deactivate(e,t){var o;let i;switch(this.state&~sg){case Dh:this.state=Wm;break;case os:this.state=Wm,i=(o=this.$promise)==null?void 0:o.catch(a=>{this.logger.warn("The activation error will be ignored, as the controller is already scheduled for deactivation. The activation was rejected with: %s",a)});break;case eT:case rg:case iu:case rg|iu:return;default:throw Re(505,this.name,this.state)}this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,e===this&&this._enterDetaching();let r=0,s;if(this.children!==null)for(r=0;r<this.children.length;++r)this.children[r].deactivate(e,this);return It(i,()=>{if(this.isBound&&(this.vmKind!==Qi&&this._lifecycleHooks.detaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.detaching()"),s=Ai(...this._lifecycleHooks.detaching.map(one,this))),this._vmHooks._detaching&&(this.debug&&this.logger.trace("detaching()"),s=Ai(s,this._vm.detaching(this.$initiator,this.parent)))),Ti(s)&&(this._ensurePromise(),e._enterDetaching(),s.then(()=>{e._leaveDetaching()}).catch(a=>{e._reject(a)})),e.head===null?e.head=this:e.tail.next=this,e.tail=this,e===this)return this._leaveDetaching(),this.$promise})}removeNodes(){switch(this.vmKind){case Os:case Qi:this.nodes.remove(),this.nodes.unlink()}if(this.hostController!==null)switch(this.mountTarget){case Ph:case Ih:this.host.remove();break;case Oh:this.location.$start.remove(),this.location.remove();break}}unbind(){this.debug&&this.logger.trace("unbind()");let e=0;if(this.bindings!==null)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case kh:this.scope=null;break;case Qi:this.hasLockedScope||(this.scope=null),(this.state&sg)===sg&&!this.viewFactory.tryReturnToCache(this)&&this.$initiator===this&&this.dispose();break;case Os:this.scope.parent=null;break}this.state=rg,this.$initiator=null,this._resolve()}_ensurePromise(){this.$promise===void 0&&(this.$promise=new Promise((e,t)=>{this.$resolve=e,this.$reject=t}),this.$initiator!==this&&this.parent._ensurePromise())}_resolve(){this.$promise!==void 0&&(tT=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,tT(),tT=void 0)}_reject(e){this.$promise!==void 0&&(nT=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,nT(e),nT=void 0),this.$initiator!==this&&this.parent._reject(e)}_enterActivating(){++this._activatingStack,this.$initiator!==this&&this.parent._enterActivating()}_leaveActivating(){if(this.state!==os){--this._activatingStack,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating();return}if(--this._activatingStack===0){if(this.vmKind!==Qi&&this._lifecycleHooks.attached!=null&&(Lh=Ai(...this._lifecycleHooks.attached.map(sne,this))),this._vmHooks._attached&&(this.debug&&this.logger.trace("attached()"),Lh=Ai(Lh,this._vm.attached(this.$initiator))),Ti(Lh)){this._ensurePromise(),Lh.then(()=>{this.state=Dh,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating()}).catch(e=>{this._reject(e)}),Lh=void 0;return}Lh=void 0,this.state=Dh,this._resolve()}this.$initiator!==this&&this.parent._leaveActivating()}_enterDetaching(){++this._detachingStack}_leaveDetaching(){if(--this._detachingStack===0){this.debug&&this.logger.trace("detach()"),this._enterUnbinding(),this.removeNodes();let e=this.$initiator.head,t;for(;e!==null;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e._isBindingDone&&(e.vmKind!==Qi&&e._lifecycleHooks.unbinding!=null&&(t=Ai(...e._lifecycleHooks.unbinding.map(ane,e))),e._vmHooks._unbinding&&(e.debug&&e.logger.trace("unbinding()"),t=Ai(t,e.viewModel.unbinding(e.$initiator,e.parent)))),Ti(t)&&(this._ensurePromise(),this._enterUnbinding(),t.then(()=>{this._leaveUnbinding()}).catch(i=>{this._reject(i)})),t=void 0,e=e.next;this._leaveUnbinding()}}_enterUnbinding(){++this._unbindingStack}_leaveUnbinding(){if(--this._unbindingStack===0){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;e!==null;)e!==this&&(e._isBindingDone=!1,e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this._isBindingDone=!1,this.isBound=!1,this.unbind()}}addBinding(e){this.bindings===null?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){this.children===null?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case kh:case Os:return this.definition.name===e;case Qi:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return this.vmKind===Os&&(Ji(e,Fi,this),Ji(e,this.definition.key,this)),this.host=e,this.mountTarget=Ph,this}setShadowRoot(e){return this.vmKind===Os&&(Ji(e,Fi,this),Ji(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=Ih,this}setLocation(e){return this.vmKind===Os&&(Ji(e,Fi,this),Ji(e,this.definition.key,this)),this.location=e,this.mountTarget=Oh,this}release(){this.state|=sg}dispose(){this.debug&&this.logger.trace("dispose()"),(this.state&iu)!==iu&&(this.state|=iu,this._vmHooks._dispose&&this._vm.dispose(),this.children!==null&&(this.children.forEach(Jte),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,this._vm!==null&&(nu.delete(this._vm),this._vm=null),this._vm=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(e){if(e(this)===!0||this._vmHooks._accept&&this._vm.accept(e)===!0)return!0;if(this.children!==null){const{children:t}=this;for(let i=0,r=t.length;i<r;++i)if(t[i].accept(e)===!0)return!0}}}const nu=new WeakMap,WF=0,Ph=1,Ih=2,Oh=3,Yte=Nl({none:WF,host:Ph,shadowRoot:Ih,location:Oh}),Kte={optional:!0},qte=yZ(L2);function jF(n,e,t){var c,u;const i=e.bindables,r=tF(i),s=r.length,o=n.container.get(qf),a="propertiesChanged"in t;if(s===0)return;const l=a?(()=>{let h={},d,f=0;const g=Promise.resolve(),p=()=>{d==null&&(d=g.then(()=>{var v;const m=h;h={},f=0,d=void 0,n.isBound&&((v=t.propertiesChanged)==null||v.call(t,m),f>0&&p())}))};return(m,v,y)=>{h[m]={newValue:v,oldValue:y},f++,p()}})():pa;for(let h=0;h<s;++h){const d=r[h],f=i[d],g=f.callback,p=o.getObserver(t,d);if(f.set!==pa&&((c=p.useCoercer)==null?void 0:c.call(p,f.set,n.coercion))!==!0)throw Re(507,d);if(t[g]!=null||t.propertyChanged!=null||a){const m=(v,y)=>{var w,_;n.isBound&&((w=t[g])==null||w.call(t,v,y),(_=t.propertyChanged)==null||_.call(t,d,v,y),l(d,v,y))};if(((u=p.useCallback)==null?void 0:u.call(p,m))!==!0)throw Re(508,d)}}}const zF=new Map,Xte=n=>{let e=zF.get(n);return e==null&&(e=new Em(n,0),zF.set(n,e)),e};function UF(n,e,t,i){const r=e.get(qf),s=e.get(Ff),o=t.watches,a=n.vmKind===Os?n.scope:di.create(i,null,!0),l=o.length;let c,u,h,d=0;for(;l>d;++d){if({expression:c,callback:u}=o[d],u=Bt(u)?u:Reflect.get(i,u),!Bt(u))throw Re(506,u);Bt(c)?n.addBinding(new VF(i,r,c,u,!0)):(h=wt(c)?s.parse(c,Ca):Xte(c),n.addBinding(new Jx(a,e,r,h,u)))}}class ig{constructor(e){this._define="define"in e,this._hydrating="hydrating"in e,this._hydrated="hydrated"in e,this._created="created"in e,this._binding="binding"in e,this._bound="bound"in e,this._attaching="attaching"in e,this._attached="attached"in e,this._detaching="detaching"in e,this._unbinding="unbinding"in e,this._dispose="dispose"in e,this._accept="accept"in e}}ig.none=new ig({});const Zte={mode:"open"},Os="customElement",kh="customAttribute",Qi="synthetic",eT=0,os=1,Dh=2,Wm=4,rg=8,sg=16,iu=32;function Qte(n){const e=[];return(n&os)===os&&e.push("activating"),(n&Dh)===Dh&&e.push("activated"),(n&Wm)===Wm&&e.push("deactivating"),(n&rg)===rg&&e.push("deactivated"),(n&sg)===sg&&e.push("released"),(n&iu)===iu&&e.push("disposed"),e.length===0?"none":e.join("|")}const g0=Nn("IController"),Nh=Nn("IHydrationContext");class GF{constructor(e,t,i){this.instruction=t,this.parent=i,this.controller=e}}function Jte(n){n.dispose()}function YF(n){n.instance.created(this._vm,this)}function ene(n){n.instance.hydrating(this._vm,this)}function tne(n){n.instance.hydrated(this._vm,this)}function nne(n){return n.instance.binding(this._vm,this.$initiator,this.parent)}function ine(n){return n.instance.bound(this._vm,this.$initiator,this.parent)}function rne(n){return n.instance.attaching(this._vm,this.$initiator,this.parent)}function sne(n){return n.instance.attached(this._vm,this.$initiator)}function one(n){return n.instance.detaching(this._vm,this.$initiator,this.parent)}function ane(n){return n.instance.unbinding(this._vm,this.$initiator,this.parent)}let tT,nT,Lh;class lne{}function og(n,e){var t;return((t=n.$au)==null?void 0:t[e])??null}function Ji(n,e,t){(n.$au??(n.$au=new lne))[e]=t}const jm=Nn("INode"),yr=Nn("IRenderLocation"),p0=Nn("ICssClassMapping"),m0=new WeakMap;function b0(n){if(m0.has(n))return m0.get(n);let e=0,t=n.nextSibling;for(;t!==null;){if(t.nodeType===8)switch(t.textContent){case"au-start":++e;break;case"au-end":if(e--===0)return t}t=t.nextSibling}if(n.parentNode===null&&n.nodeType===11){const i=$h(n,{optional:!0});if(i==null)return null;if(i.mountTarget===Yte.shadowRoot)return b0(i.host)}return n.parentNode}function cne(n,e){if(n.platform!==void 0&&!(n instanceof n.platform.Node)){const t=n.childNodes;for(let i=0,r=t.length;i<r;++i)m0.set(t[i],e)}else m0.set(n,e)}function zm(n){if(KF(n))return n;const e=n.ownerDocument.createComment("au-end"),t=e.$start=n.ownerDocument.createComment("au-start"),i=n.parentNode;return i!==null&&(i.replaceChild(e,n),i.insertBefore(t,e)),e}function KF(n){return n.textContent==="au-end"}class iT{get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}constructor(e,t){this.platform=e,this.next=void 0,this._isMounted=!1,this._isLinked=!1,this.ref=null;const i=(this.f=t).querySelectorAll("au-m");let r=0,s=i.length,o=this.t=Array(s),a,l;for(;s>r;)l=i[r],a=l.nextSibling,l.remove(),a.nodeType===8&&(l=a,(a=a.nextSibling).$start=l),o[r]=a,++r;const c=t.childNodes,u=this.childNodes=Array(s=c.length);for(r=0;s>r;)u[r]=c[r],++r;this._firstChild=t.firstChild,this._lastChild=t.lastChild}findTargets(){return this.t}insertBefore(e){if(this._isLinked&&this.ref)this.addToLinked();else{const t=e.parentNode;if(this._isMounted){let i=this._firstChild,r;const s=this._lastChild;for(;i!=null&&(r=i.nextSibling,t.insertBefore(i,e),i!==s);)i=r}else this._isMounted=!0,e.parentNode.insertBefore(this.f,e)}}appendTo(e,t=!1){if(this._isMounted){let i=this._firstChild,r;const s=this._lastChild;for(;i!=null&&(r=i.nextSibling,e.appendChild(i),i!==s);)i=r}else this._isMounted=!0,t||e.appendChild(this.f)}remove(){if(this._isMounted){this._isMounted=!1;const e=this.f,t=this._lastChild;let i,r=this._firstChild;for(;r!==null&&(i=r.nextSibling,e.appendChild(r),r!==t);)r=i}}addToLinked(){const e=this.ref,t=e.parentNode;if(this._isMounted){let i=this._firstChild,r;const s=this._lastChild;for(;i!=null&&(r=i.nextSibling,t.insertBefore(i,e),i!==s);)i=r}else this._isMounted=!0,t.insertBefore(this.f,e)}unlink(){this._isLinked=!1,this.next=void 0,this.ref=void 0}link(e){this._isLinked=!0,KF(e)?this.ref=e:(this.next=e,this._obtainRefNode())}_obtainRefNode(){this.next!==void 0?this.ref=this.next.firstChild:this.ref=void 0}}const rT=(n,e,t=n.get(Is))=>(fi(n,t.HTMLElement,fi(n,t.Element,fi(n,jm,new Ki("ElementResolver",e)))),n);function Um(n){return function(e,t){return t.addInitializer(function(){qF(n,this)}),e}}const sT=new WeakMap;class Cr{get type(){return Yee}constructor(e,t,i,r,s,o,a,l,c,u,h,d,f,g,p,m,v,y,w){this.Type=e,this.name=t,this.aliases=i,this.key=r,this.capture=s,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=u,this.surrogates=h,this.bindables=d,this.containerless=f,this.shadowOptions=g,this.hasSlots=p,this.enhance=m,this.watches=v,this.strict=y,this.processContent=w}static create(e,t=null){if(t===null){const r=e;if(wt(r))throw Re(761,e);const s=Co("name",r,lT);Bt(r.Type)?t=r.Type:t=ZF(OH(s));for(const o of Object.values(is.from(r.bindables)))is._add(o,t);return new Cr(t,s,ui(r.aliases),Co("key",r,()=>ag(s)),Ts("capture",r,t,Ds),Co("template",r,ks),ui(r.instructions),ui(as(t,"dependencies"),r.dependencies),Co("injectable",r,ks),Co("needsCompile",r,aT),ui(r.surrogates),is.from(as(t,"bindables"),r.bindables),Ts("containerless",r,t,Ds),Co("shadowOptions",r,ks),Co("hasSlots",r,Ds),Co("enhance",r,Ds),Co("watches",r,hne),Co("strict",r,oT),yo("processContent",t,ks))}if(wt(e))return new Cr(t,e,ui(as(t,"aliases"),t.aliases),ag(e),yo("capture",t,Ds),yo("template",t,ks),ui(as(t,"instructions"),t.instructions),ui(as(t,"dependencies"),t.dependencies),yo("injectable",t,ks),yo("needsCompile",t,aT),ui(as(t,"surrogates"),t.surrogates),is.from(...is.getAll(t),as(t,"bindables"),t.bindables),yo("containerless",t,Ds),yo("shadowOptions",t,ks),yo("hasSlots",t,Ds),yo("enhance",t,Ds),ui(Vx.getDefinitions(t),t.watches),yo("strict",t,oT),yo("processContent",t,ks));const i=Co("name",e,lT);for(const r of Object.values(is.from(e.bindables)))is._add(r,t);return new Cr(t,i,ui(as(t,"aliases"),e.aliases,t.aliases),ag(i),Ts("capture",e,t,Ds),Ts("template",e,t,ks),ui(as(t,"instructions"),e.instructions,t.instructions),ui(as(t,"dependencies"),e.dependencies,t.dependencies),Ts("injectable",e,t,ks),Ts("needsCompile",e,t,aT),ui(as(t,"surrogates"),e.surrogates,t.surrogates),is.from(...is.getAll(t),as(t,"bindables"),t.bindables,e.bindables),Ts("containerless",e,t,Ds),Ts("shadowOptions",e,t,ks),Ts("hasSlots",e,t,Ds),Ts("enhance",e,t,Ds),ui(e.watches,Vx.getDefinitions(t),t.watches),Ts("strict",e,t,oT),Ts("processContent",e,t,ks))}static getOrCreate(e){if(e instanceof Cr)return e;if(sT.has(e))return sT.get(e);const t=Cr.create(e);return sT.set(e,t),To(t,t.Type,Fi),t}register(e,t){const i=this.Type,r=typeof t=="string"?ag(t):this.key,s=this.aliases;if(e.has(r,!1)){console.warn(Re(153,this.name));return}e.register(e.has(i,!1)?null:_a(i,i),Qc(i,r),...s.map(o=>Qc(i,ag(o))))}toString(){return`au:ce:${this.name}`}}const une={name:void 0,searchParents:!1,optional:!1},ks=()=>null,oT=()=>{},Ds=()=>!1,aT=()=>!0,hne=()=>gt,Hh="custom-element",Fi=hh(Hh),ag=n=>`${Fi}:${n}`,lT=(n=>()=>`unnamed-${++n}`)(0),dne=(n,e,t)=>{To(t,n,Dl(e))},qF=(n,e)=>{const t=Cr.create(n,e),i=t.Type;return To(t,i,Fi,da),i},fne=n=>{var e;return Bt(n)&&(i0(Fi,n)||((e=n.$au)==null?void 0:e.type)===Hh)},$h=(n,e=une)=>{if(e.name===void 0&&e.searchParents!==!0){const i=og(n,Fi);if(i===null){if(e.optional===!0)return null;throw Re(762,n)}return i}if(e.name!==void 0){if(e.searchParents!==!0){const s=og(n,Fi);if(s===null)throw Re(763,n);return s.is(e.name)?s:void 0}let i=n,r=!1;for(;i!==null;){const s=og(i,Fi);if(s!==null&&(r=!0,s.is(e.name)))return s;i=b0(i)}if(r)return;throw Re(764,n)}let t=n;for(;t!==null;){const i=og(t,Fi);if(i!==null)return i;t=b0(t)}throw Re(765,n)},as=(n,e)=>Xi(Dl(e),n),XF=n=>{const e=Xi(Fi,n)??Jc(n,Hh,Cr.create);if(e==null)throw Re(760,n);return e},gne=()=>{const n={$isInterface:!1,register(){return{$isResolver:!0,resolve(e,t){return t.has(n,!0)?t.get(n):null}}}};return n},ZF=function(){const n={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(t,i=e){const r=class{};return n.value=t,iF(r,"name",n),i!==e&&eF(r.prototype,i),r}}(),Nr=Nl({name:Fi,keyFrom:ag,isType:fne,for:$h,define:qF,getDefinition:XF,annotate:dne,getAnnotation:as,generateName:lT,createInjectable:gne,generateType:ZF,find(n,e){const t=n.find(Hh,e);return t==null?null:Xi(Fi,t)??Jc(t,Hh,Cr.create)??null}}),QF=Nn("ISVGAnalyzer",n=>n.singleton(pne));class pne{isStandardSvgAttribute(e,t){return!1}}class JF{constructor(){this.fns=[],this._tagAttrMap=en(),this._globalAttrMap=en(),this.svg=fe(QF),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(e){var o;let t,i,r,s;for(r in e){t=e[r],i=(o=this._tagAttrMap)[r]??(o[r]=en());for(s in t){if(i[s]!==void 0)throw eB(s,r);i[s]=t[s]}}}useGlobalMapping(e){const t=this._globalAttrMap;for(const i in e){if(t[i]!==void 0)throw eB(i,"*");t[i]=e[i]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return mne(e,t)||this.fns.length>0&&this.fns.some(i=>i(e,t))}map(e,t){var i;return((i=this._tagAttrMap[e.nodeName])==null?void 0:i[t])??this._globalAttrMap[t]??(kx(e,t,this.svg)?t:null)}}JF.register=dm(T$);function mne(n,e){switch(n.nodeName){case"INPUT":switch(n.type){case"checkbox":case"radio":return e==="checked";default:return e==="value"||e==="files"||e==="value-as-number"||e==="value-as-date"}case"TEXTAREA":case"SELECT":return e==="value";default:switch(e){case"textcontent":case"innerhtml":return n.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}function eB(n,e){return Re(719,n,e)}const bne={register(n){n.register(M2,JF,tB)}};class vne{constructor(e,t,i){this.attrs=e,this.bindables=t,this.primary=i}}class tB{constructor(){this._resourceCache=new WeakMap,this._bindableCache=new WeakMap}el(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new nB),t in i._element?i._element[t]:i._element[t]=Nr.find(e,t)}attr(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new nB),t in i._attr?i._attr[t]:i._attr[t]=zx.find(e,t)}bindables(e){let t=this._bindableCache.get(e);if(t==null){const i=e.bindables,r=en();let s,o,a=!1,l,c;for(o in i){if(s=i[o],c=s.attribute,s.primary===!0){if(a)throw Re(714,e);a=!0,l=s}else!a&&l==null&&(l=s);r[c]=Ll.create(o,s)}s==null&&e.type==="custom-attribute"&&(l=r.value=Ll.create("value",{mode:e.defaultBindingMode??Ix})),this._bindableCache.set(e,t=new vne(r,i,l??null))}return t}}tB.register=dm(P2);class nB{constructor(){this._element=en(),this._attr=en()}}const cT=en();class Gm{static forNs(e){return cT[e]??(cT[e]=new Gm(e))}constructor(e){this.ns=e,this.type=Xc|Sa}getValue(e,t){return e.getAttributeNS(this.ns,t)}setValue(e,t,i){e==null?t.removeAttributeNS(this.ns,i):t.setAttributeNS(this.ns,i,e)}}h0(Gm);class iB{constructor(){this.type=Xc|Sa}getValue(e,t){return e.getAttribute(t)}setValue(e,t,i){e==null?t.removeAttribute(i):t.setAttribute(i,e)}}h0(iB);const v0=new iB;class Fh{static _getSelectedOptions(e){const t=[];if(e.length===0)return t;const i=e.length;let r=0,s;for(;i>r;)s=e[r],s.selected&&(t[t.length]=Ch.call(s,"model")?s.model:s.value),++r;return t}static _defaultMatcher(e,t){return e===t}constructor(e,t,i,r){this.type=Xc|Lx|Sa,this._value=void 0,this._oldValue=void 0,this._hasChanges=!1,this._arrayObserver=void 0,this._nodeObserver=void 0,this._observing=!1,this._listened=!1,this._el=e,this._observerLocator=r,this._config=i}getValue(){return this._observing?this._value:this._el.multiple?Fh._getSelectedOptions(this._el.options):this._el.value}setValue(e){this._oldValue=this._value,this._value=e,this._hasChanges=e!==this._oldValue,this._observeArray(e instanceof Array?e:null),this._flushChanges()}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const e=this._value,t=this._el,i=ni(e),r=t.matcher??Fh._defaultMatcher,s=t.options;let o=s.length;for(;o-- >0;){const a=s[o],l=Ch.call(a,"model")?a.model:a.value;if(i){a.selected=e.findIndex(c=>!!r(l,c))!==-1;continue}a.selected=!!r(l,e)}}syncValue(){const e=this._el,t=e.options,i=t.length,r=this._value;let s=0;if(e.multiple){if(!(r instanceof Array))return!0;let l;const c=e.matcher||Fh._defaultMatcher,u=[];for(;s<i;)l=t[s],l.selected&&u.push(Ch.call(l,"model")?l.model:l.value),++s;let h;for(s=0;s<r.length;)h=r[s],u.findIndex(d=>!!c(h,d))===-1?r.splice(s,1):++s;for(s=0;s<u.length;)h=u[s],r.findIndex(d=>!!c(h,d))===-1&&r.push(h),++s;return!1}let o=null,a;for(;s<i;){if(a=t[s],a.selected){o=Ch.call(a,"model")?a.model:a.value;break}++s}return this._oldValue=this._value,this._value=o,!0}_start(){(this._nodeObserver=CF(this._el,this._handleNodeChange.bind(this))).observe(this._el,{childList:!0,subtree:!0,characterData:!0}),this._observeArray(this._value instanceof Array?this._value:null),this._observing=!0}_stop(){var e;this._nodeObserver.disconnect(),(e=this._arrayObserver)==null||e.unsubscribe(this),this._nodeObserver=this._arrayObserver=void 0,this._observing=!1}_observeArray(e){var t;if((t=this._arrayObserver)==null||t.unsubscribe(this),this._arrayObserver=void 0,e!=null){if(!this._el.multiple)throw Re(654);(this._arrayObserver=this._observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this._flush()}_handleNodeChange(e){this.syncOptions(),this.syncValue()&&this._flush()}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}Qx(Fh),As(Fh,null);const wne="--";class rB{constructor(e){this.obj=e,this.type=Xc|Sa,this._value="",this._oldValue="",this.styles={},this.version=0,this._hasChanges=!1}getValue(){return this.obj.style.cssText}setValue(e){this._value=e,this._hasChanges=e!==this._oldValue,this._flushChanges()}_getStyleTuplesFromString(e){const t=[],i=/url\([^)]+$/;let r=0,s="",o,a,l,c;for(;r<e.length;){if(o=e.indexOf(";",r),o===-1&&(o=e.length),s+=e.substring(r,o),r=o+1,i.test(s)){s+=";";continue}a=s.indexOf(":"),l=s.substring(0,a).trim(),c=s.substring(a+1).trim(),t.push([l,c]),s=""}return t}_getStyleTuplesFromObject(e){let t,i;const r=[];for(i in e)if(t=e[i],t!=null){if(wt(t)){if(i.startsWith(wne)){r.push([i,t]);continue}r.push([kH(i),t]);continue}r.push(...this._getStyleTuples(t))}return r}_getStyleTuplesFromArray(e){const t=e.length;if(t>0){const i=[];let r=0;for(;t>r;++r)i.push(...this._getStyleTuples(e[r]));return i}return gt}_getStyleTuples(e){return wt(e)?this._getStyleTuplesFromString(e):e instanceof Array?this._getStyleTuplesFromArray(e):e instanceof Object?this._getStyleTuplesFromObject(e):gt}_flushChanges(){if(this._hasChanges){this._hasChanges=!1;const e=this._value,t=this.styles,i=this._getStyleTuples(e);let r,s=this.version;this._oldValue=e;let o,a,l,c=0;const u=i.length;for(;c<u;++c)o=i[c],a=o[0],l=o[1],this.setProperty(a,l),t[a]=s;if(this.styles=t,this.version+=1,s===0)return;s-=1;for(r in t)!Ch.call(t,r)||t[r]!==s||this.obj.style.removeProperty(r)}}setProperty(e,t){let i="";t!=null&&Bt(t.indexOf)&&t.includes("!important")&&(i="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,i)}bind(){this._value=this._oldValue=this.obj.style.cssText}}h0(rB);class uT{constructor(e,t,i){this.type=Xc|Lx|Sa,this._value="",this._oldValue="",this._hasChanges=!1,this._listened=!1,this._el=e,this._key=t,this._config=i}getValue(){return this._value}setValue(e){wo(e,this._value)||(this._oldValue=this._value,this._value=e,this._hasChanges=!0,this._config.readonly||this._flushChanges())}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this._el[this._key]=this._value??this._config.default,this._flush())}handleEvent(){this._oldValue=this._value,this._value=this._el[this._key],this._oldValue!==this._value&&(this._hasChanges=!1,this._flush())}_start(){this._value=this._oldValue=this._el[this._key]}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}Qx(uT),As(uT,null);const sB=(()=>{const n="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/2000/xmlns/";return eF(en(),{"xlink:actuate":["actuate",n],"xlink:arcrole":["arcrole",n],"xlink:href":["href",n],"xlink:role":["role",n],"xlink:show":["show",n],"xlink:title":["title",n],"xlink:type":["type",n],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",t],"xmlns:xlink":["xlink",t]})})(),oB=new j2;oB.type=Xc|Sa;class hT{constructor(){this.allowDirtyCheck=!0,this._events=en(),this._globalEvents=en(),this._overrides=en(),this._globalOverrides=en(),this._locator=fe(pZ),this._platform=fe(Is),this._dirtyChecker=fe(yx),this.svg=fe(QF);const e=["change","input"],t={events:e,default:""};this.useConfig({INPUT:{value:t,valueAsNumber:{events:e,default:0},checked:{type:dT,events:e},files:{events:e,readonly:!0}},SELECT:{value:{type:Fh,events:["change"],default:""}},TEXTAREA:{value:t}});const i={events:["change","input","blur","keyup","paste"],default:""},r={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:r,scrollLeft:r,textContent:i,innerHTML:i}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(e,t){return e instanceof this._platform.Node}useConfig(e,t,i){const r=this._events;let s;if(wt(e))s=r[e]??(r[e]=en()),s[t]==null?s[t]=i:w0(e,t);else for(const o in e){s=r[o]??(r[o]=en());const a=e[o];for(t in a)s[t]==null?s[t]=a[t]:w0(o,t)}}useConfigGlobal(e,t){const i=this._globalEvents;if(typeof e=="object")for(const r in e)i[r]==null?i[r]=e[r]:w0("*",r);else i[e]==null?i[e]=t:w0("*",e)}getAccessor(e,t,i){if(t in this._globalOverrides||t in(this._overrides[e.tagName]??GH))return this.getObserver(e,t,i);switch(t){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return(t==="popovertarget"||t==="popovertargetaction")&&e.nodeName!=="INPUT"&&e.nodeName!=="BUTTON"&&console.warn(`[aurelia] Popover API are only valid on <input> or <button>. Detected ${t} on <${e.nodeName.toLowerCase()}>`),v0;default:{const r=sB[t];return r!==void 0?Gm.forNs(r[1]):kx(e,t,this.svg)?v0:oB}}}overrideAccessor(e,t){var r,s;let i;if(wt(e))i=(r=this._overrides)[e]??(r[e]=en()),i[t]=!0;else for(const o in e)for(const a of e[o])i=(s=this._overrides)[o]??(s[o]=en()),i[a]=!0}overrideAccessorGlobal(...e){for(const t of e)this._globalOverrides[t]=!0}getNodeObserverConfig(e,t){var i;return((i=this._events[e.tagName])==null?void 0:i[t])??this._globalEvents[t]}getNodeObserver(e,t,i){var o;const r=((o=this._events[e.tagName])==null?void 0:o[t])??this._globalEvents[t];let s;return r!=null?(s=new(r.type??uT)(e,t,r,i,this._locator),s.doNotCache||(G2(e)[t]=s),s):null}getObserver(e,t,i){switch(t){case"class":return new d0(e);case"css":case"style":return new rB(e)}const r=this.getNodeObserver(e,t,i);if(r!=null)return r;const s=sB[t];if(s!==void 0)return Gm.forNs(s[1]);if(kx(e,t,this.svg))return v0;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this._dirtyChecker.createProperty(e,t);throw Re(652,t)}else return new Cx(e,t)}}hT.register=dm(_x);function yne(n,e){if(n instanceof Array)return e.getArrayObserver(n);if(n instanceof Map)return e.getMapObserver(n);if(n instanceof Set)return e.getSetObserver(n)}function w0(n,e){throw Re(653,n,e)}function aB(n,e){return n===e}class dT{constructor(e,t,i,r){this.type=Xc|Lx|Sa,this._value=void 0,this._oldValue=void 0,this._collectionObserver=void 0,this._valueObserver=void 0,this._listened=!1,this._el=e,this.oL=r,this._config=i}getValue(){return this._value}setValue(e){const t=this._value;e!==t&&(this._value=e,this._oldValue=t,this._observe(),this._synchronizeElement(),this._flush())}handleCollectionChange(){this._synchronizeElement()}handleChange(e,t){this._synchronizeElement()}_synchronizeElement(){const e=this._value,t=this._el,i=Ch.call(t,"model")?t.model:t.value,r=t.type==="radio",s=t.matcher!==void 0?t.matcher:aB;if(r)t.checked=!!s(e,i);else if(e===!0)t.checked=!0;else{let o=!1;if(ni(e))o=e.findIndex(a=>!!s(a,i))!==-1;else if(e instanceof Set){for(const a of e)if(s(a,i)){o=!0;break}}else if(e instanceof Map)for(const a of e){const l=a[0],c=a[1];if(s(l,i)&&c===!0){o=!0;break}}t.checked=o}}handleEvent(){let e=this._oldValue=this._value;const t=this._el,i=Ch.call(t,"model")?t.model:t.value,r=t.checked,s=t.matcher!==void 0?t.matcher:aB;if(t.type==="checkbox"){if(ni(e)){const o=e.findIndex(a=>!!s(a,i));r&&o===-1?e.push(i):!r&&o!==-1&&e.splice(o,1);return}else if(e instanceof Set){const o={};let a=o;for(const l of e)if(s(l,i)===!0){a=l;break}r&&a===o?e.add(i):!r&&a!==o&&e.delete(a);return}else if(e instanceof Map){let o;for(const a of e){const l=a[0];if(s(l,i)===!0){o=l;break}}e.set(o,r);return}e=r}else if(r)e=i;else return;this._value=e,this._flush()}_start(){this._observe()}_stop(){var e,t;this._value=this._oldValue=void 0,(e=this._collectionObserver)==null||e.unsubscribe(this),(t=this._valueObserver)==null||t.unsubscribe(this),this._collectionObserver=this._valueObserver=void 0}_flush(){fT=this._oldValue,this._oldValue=this._value,this.subs.notify(this._value,fT),fT=void 0}_observe(){var t,i,r,s,o;const e=this._el;(r=this._valueObserver??(this._valueObserver=((t=e.$observers)==null?void 0:t.model)??((i=e.$observers)==null?void 0:i.value)))==null||r.subscribe(this),(s=this._collectionObserver)==null||s.unsubscribe(this),this._collectionObserver=void 0,e.type==="checkbox"&&((o=this._collectionObserver=yne(this._value,this.oL))==null||o.subscribe(this))}}Qx(dT),As(dT,null);let fT;class lB{bind(e,t){if(!(t instanceof wr))throw Re(9994,t);t.useTargetObserver(v0)}}lB.$au={type:Ps,name:"attr"};class cB{bind(e,t){if(!("handleEvent"in t))throw Re(801);t.self=!0}unbind(e,t){t.self=!1}}cB.$au={type:Ps,name:"self"};class uB{constructor(){this._observerLocator=fe(qf),this._nodeObserverLocator=fe(_x)}bind(e,t,...i){if(!(this._nodeObserverLocator instanceof hT))throw Re(9993);if(i.length===0)throw Re(802);if(!(t instanceof wr)||!(t.mode&kl))throw Re(803);const r=this._nodeObserverLocator.getNodeObserverConfig(t.target,t.targetProperty);if(r==null)throw Re(9992,t);const s=this._nodeObserverLocator.getNodeObserver(t.target,t.targetProperty,this._observerLocator);s.useConfig({readonly:r.readonly,default:r.default,events:i}),t.useTargetObserver(s)}}uB.$au={type:Ps,name:"updateTrigger"};class y0{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this._wantsDeactivate=!1,this._swapId=0,this._ifFactory=fe(rs),this._location=fe(yr)}attaching(e,t){return this._swap(this.value)}detaching(e,t){return this._wantsDeactivate=!0,It(this.pending,()=>{var i;this._wantsDeactivate=!1,this.pending=void 0,(i=this.view)==null||i.deactivate(e,this.$controller)})}valueChanged(e,t){if(this.$controller.isActive&&(e=!!e,t=!!t,e!==t))return this._swap(e)}_swap(e){const t=this.view,i=this.$controller,r=this._swapId++,s=()=>!this._wantsDeactivate&&this._swapId===r+1;let o;return It(this.pending,()=>this.pending=It(t==null?void 0:t.deactivate(t,i),()=>{var a;if(s()&&(e?o=this.view=this.ifView=this.cache&&this.ifView!=null?this.ifView:this._ifFactory.create():o=this.view=this.elseView=this.cache&&this.elseView!=null?this.elseView:(a=this.elseFactory)==null?void 0:a.create(),o!=null))return o.setLocation(this._location),It(o.activate(o,i,i.scope),()=>{s()&&(this.pending=void 0)})}))}dispose(){var e,t;(e=this.ifView)==null||e.dispose(),(t=this.elseView)==null||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}y0.$au={type:Zi,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:n=>n===""||!!n&&n!=="false"}}};class hB{constructor(){this._factory=fe(rs)}link(e,t,i,r){const s=e.children,o=s[s.length-1];if(o instanceof y0)o.elseFactory=this._factory;else if(o.viewModel instanceof y0)o.viewModel.elseFactory=this._factory;else throw Re(810)}}hB.$au={type:"custom-attribute",name:"else",isTemplateController:!0};function Cne(n){n.dispose()}const Sne=["BindingBehavior","ValueConverter"];class dB{constructor(){this.views=[],this.key=null,this._oldViews=[],this._scopes=[],this._oldScopes=[],this._scopeMap=new Map,this._observer=void 0,this._observingInnerItems=!1,this._reevaluating=!1,this._innerItemsExpression=null,this._normalizedItems=void 0,this._hasDestructuredLocal=!1,this._location=fe(yr),this._parent=fe(g0),this._factory=fe(rs),this._resolver=fe(Rne);const t=fe(jf).props[0].props[0];if(t!==void 0){const{to:i,value:r,command:s}=t;if(i==="key")if(s===null)this.key=r;else if(s==="bind")this.key=fe(Ff).parse(r,Ca);else throw Re(775,s);else throw Re(776,i)}}binding(e,t){const i=this._parent.bindings,r=i.length;let s,o,a=0;for(;r>a;++a)if(s=i[a],s.target===this&&s.targetProperty==="items"){o=this.forOf=s.ast,this._forOfBinding=s;let c=o.iterable;for(;c!=null&&Sne.includes(c.$kind);)c=c.expression,this._observingInnerItems=!0;this._innerItemsExpression=c;break}this._refreshCollectionObserver();const l=o.declaration;(this._hasDestructuredLocal=l.$kind==="ArrayDestructuring"||l.$kind==="ObjectDestructuring")||(this.local=Tn(l,this.$controller.scope,s,null))}attaching(e,t){return this._normalizeToArray(),this._createScopes(),this._activateAllViews(e,this._normalizedItems??gt)}detaching(e,t){return this._refreshCollectionObserver(),this._deactivateAllViews(e)}unbinding(e,t){this._scopeMap.clear()}itemsChanged(){this.$controller.isActive&&(this._refreshCollectionObserver(),this._normalizeToArray(),this._createScopes(),this._applyIndexMap(void 0))}handleCollectionChange(e,t){const i=this.$controller;if(i.isActive){if(this._observingInnerItems){if(this._reevaluating)return;this._reevaluating=!0,this.items=Tn(this.forOf.iterable,i.scope,this._forOfBinding,null),this._reevaluating=!1;return}this._normalizeToArray(),this._createScopes(),this._applyIndexMap(t)}}_applyIndexMap(e){const t=this.views;this._oldViews=t.slice();const i=t.length,r=this.key,s=r!==null,o=this._oldScopes,a=this._scopes;if(s||e===void 0){const l=this.local,u=this._normalizedItems.length,d=this.forOf.declaration,f=this._forOfBinding,g=this._hasDestructuredLocal;e=vh(u);let p=0;if(i===0)for(;p<u;++p)e[p]=-2;else if(u===0)for(p=0;p<i;++p)e.deletedIndices.push(p),e.deletedItems.push(R0(g,d,o[p],f,l));else if(s){const m=Array(i);for(p=0;p<i;++p)m[p]=wB(g,r,d,o[p],f,l);const v=Array(i);for(p=0;p<u;++p)v[p]=wB(g,r,d,a[p],f,l);for(p=0;p<u;++p)m.includes(v[p])?e[p]=m.indexOf(v[p]):e[p]=-2;for(p=0;p<i;++p)v.includes(m[p])||(e.deletedIndices.push(p),e.deletedItems.push(R0(g,d,o[p],f,l)))}else{for(p=0;p<u;++p)o.includes(a[p])?e[p]=o.indexOf(a[p]):e[p]=-2;for(p=0;p<i;++p)a.includes(o[p])||(e.deletedIndices.push(p),e.deletedItems.push(R0(g,d,o[p],f,l)))}}if(e.deletedIndices.length>0){const l=It(this._deactivateAndRemoveViewsByKey(e),()=>this._createAndActivateAndSortViewsByKey(e));Ti(l)&&l.catch(Dx)}else this._createAndActivateAndSortViewsByKey(e)}_refreshCollectionObserver(){var o,a;const e=this.$controller.scope;let t=this._innerItems,i=this._observingInnerItems,r;i&&(t=this._innerItems=Tn(this._innerItemsExpression,e,this._forOfBinding,null)??null,i=this._observingInnerItems=!wo(this.items,t));const s=this._observer;if(this.$controller.isActive){const l=i?t:this.items;r=this._observer=(a=(o=this._resolver.resolve(l)).getObserver)==null?void 0:a.call(o,l),s!==r&&(s==null||s.unsubscribe(this),r==null||r.subscribe(this))}else s==null||s.unsubscribe(this),this._observer=void 0}_createScopes(){const e=this._scopes;this._oldScopes=e.slice();const t=this._normalizedItems,i=t.length,r=this._scopes=Array(t.length),s=this._scopeMap,o=new Map,a=this.$controller.scope,l=this._forOfBinding,c=this.forOf,u=this.local,h=this._hasDestructuredLocal;for(let d=0;d<i;++d)r[d]=Ane(s,o,t[d],c,a,l,u,h);s.clear(),this._scopeMap=o}_normalizeToArray(){const e=this.items;if(ni(e)){this._normalizedItems=e.slice(0);return}const t=[];this._resolver.resolve(e).iterate(e,(i,r)=>{t[r]=i}),this._normalizedItems=t}_activateAllViews(e,t){let i,r,s,o;const{$controller:a,_factory:l,_location:c,_scopes:u}=this,h=t.length,d=this.views=Array(h);for(let f=0;f<h;++f)s=d[f]=l.create().setLocation(c),s.nodes.unlink(),o=u[f],_0(o.overrideContext,f,h),r=s.activate(e??s,a,o),Ti(r)&&(i??(i=[])).push(r);if(i!==void 0)return i.length===1?i[0]:Promise.all(i)}_deactivateAllViews(e){let t,i,r,s=0;const{views:o,$controller:a}=this,l=o.length;for(;l>s;++s)r=o[s],r.release(),i=r.deactivate(e??r,a),Ti(i)&&(t??(t=[])).push(i);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_deactivateAndRemoveViewsByKey(e){let t,i,r;const{$controller:s,views:o}=this,a=e.deletedIndices.slice().sort(Ine),l=a.length;let c=0;for(;l>c;++c)r=o[a[c]],r.release(),i=r.deactivate(r,s),Ti(i)&&(t??(t=[])).push(i);for(c=0;l>c;++c)o.splice(a[c]-c,1);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_createAndActivateAndSortViewsByKey(e){let t,i,r,s=0;const{$controller:o,_factory:a,_location:l,views:c,_scopes:u,_oldViews:h}=this,d=e.length;for(;d>s;++s)e[s]===-2&&(r=a.create(),c.splice(s,0,r));if(c.length!==d)throw Re(814,[c.length,d]);let f=0;for(s=0;s<e.length;++s)(f=e[s])!==-2&&(c[s]=h[f]);const g=_ne(e),p=g.length;let m,v=p-1;for(s=d-1;s>=0;--s)r=c[s],m=c[s+1],r.nodes.link((m==null?void 0:m.nodes)??l),e[s]===-2?(r.setLocation(l),_0(u[s].overrideContext,s,d),i=r.activate(r,o,u[s]),Ti(i)&&(t??(t=[])).push(i)):v<0||p===1||s!==g[v]?(_0(r.scope.overrideContext,s,d),r.nodes.insertBefore(r.location)):(_0(r.scope.overrideContext,s,d),--v);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}dispose(){this.views.forEach(Cne),this.views=void 0}accept(e){const{views:t}=this;if(t!==void 0){for(let i=0,r=t.length;i<r;++i)if(t[i].accept(e)===!0)return!0}}}dB.$au={type:Zi,name:"repeat",isTemplateController:!0,bindables:["items"]};let C0=16,Fl=new Int32Array(C0),S0=new Int32Array(C0);function _ne(n){const e=n.length;e>C0&&(C0=e,Fl=new Int32Array(e),S0=new Int32Array(e));let t=0,i=0,r=0,s=0,o=0,a=0,l=0,c=0;for(;s<e;s++)if(i=n[s],i!==-2){if(o=Fl[t],r=n[o],r!==-2&&r<i){S0[s]=o,Fl[++t]=s;continue}for(a=0,l=t;a<l;)c=a+l>>1,r=n[Fl[c]],r!==-2&&r<i?a=c+1:l=c;r=n[Fl[a]],(i<r||r===-2)&&(a>0&&(S0[s]=Fl[a-1]),Fl[a]=s)}s=++t;const u=new Int32Array(s);for(i=Fl[t-1];t-- >0;)u[t]=i,i=S0[i];for(;s-- >0;)Fl[s]=0;return u}class fB{get $odd(){return!this.$even}get $even(){return this.$index%2===0}get $first(){return this.$index===0}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(e=0,t=1){this.$index=e,this.$length=t}}const _0=(n,e,t)=>{n.$index=e,n.$length=t},Rne=Nn("IRepeatableHandlerResolver",n=>n.singleton(Ene));class Ene{constructor(){this._handlers=fe(AE(xne))}resolve(e){if(gB.handles(e))return gB;if(pB.handles(e))return pB;if(mB.handles(e))return mB;if(bB.handles(e))return bB;if(vB.handles(e))return vB;const t=this._handlers.find(i=>i.handles(e));return t!==void 0?t:Tne}}const xne=Nn("IRepeatableHandler"),gB={handles:ni,getObserver:Rx,iterate(n,e){const t=n.length;let i=0;for(;i<t;++i)e(n[i],i,n)}},pB={handles:Pf,getObserver:Rx,iterate(n,e){let t=0,i;for(i of n.keys())e(i,t++,n)}},mB={handles:jc,getObserver:Rx,iterate(n,e){let t=0,i;for(i of n.entries())e(i,t++,n)}},bB={handles:XX,iterate(n,e){let t=0;for(;t<n;++t)e(t,t,n)}},vB={handles:n=>n==null,iterate(){}},Tne={handles(n){return!1},iterate(n,e){throw Re(777,n)}},Mne=(n,e,t,i,r,s)=>{n?km(e,t,i,s):t.bindingContext[r]=s},R0=(n,e,t,i,r)=>n?Tn(e,t,i,null):t.bindingContext[r],wB=(n,e,t,i,r,s)=>typeof e=="string"?R0(n,t,i,r,s)[e]:Tn(e,i,r,null),Ane=(n,e,t,i,r,s,o,a)=>{let l=n.get(t);if(l===void 0?l=Pne(t,i,r,s,o,a):l instanceof di?n.delete(t):l.length===1?(l=l[0],n.delete(t)):l=l.shift(),e.has(t)){const c=e.get(t);c instanceof di?e.set(t,[c,l]):c.push(l)}else e.set(t,l);return Mne(a,i.declaration,l,s,o,t),l},Pne=(n,e,t,i,r,s)=>{if(s){const o=di.fromParent(t,new D2,new fB);km(e.declaration,o,i,n)}return di.fromParent(t,new D2(r,n),new fB)},Ine=(n,e)=>n-e;class yB{constructor(){this.view=fe(rs).create().setLocation(fe(yr))}valueChanged(e,t){const i=this.$controller,r=this.view.bindings;let s,o=0,a=0;if(i.isActive&&r!=null)for(s=di.fromParent(i.scope,e===void 0?{}:e),a=r.length;a>o;++o)r[o].bind(s)}attaching(e,t){const{$controller:i,value:r}=this,s=di.fromParent(i.scope,r===void 0?{}:r);return this.view.activate(e,i,s)}detaching(e,t){return this.view.deactivate(e,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}yB.$au={type:Zi,name:"with",isTemplateController:!0,bindables:["value"]};class gT{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this._factory=fe(rs),this._location=fe(yr)}link(e,t,i,r){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,r=this.$controller;return this.queue(()=>i.activate(e,r,r.scope)),this.queue(()=>this.swap(e,this.value)),this.promise}detaching(e,t){return this.queue(()=>this.view.deactivate(e,this.$controller)),this.promise}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}valueChanged(e,t){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(e){this.queue(()=>this._handleCaseChange(e))}_handleCaseChange(e){const t=e.isMatch(this.value),i=this.activeCases,r=i.length;if(!t)return r>0&&i[0].id===e.id?this._clearActiveCases(null):void 0;if(r>0&&i[0].id<e.id)return;const s=[];let o=e.fallThrough;if(!o)s.push(e);else{const a=this.cases,l=a.indexOf(e);for(let c=l,u=a.length;c<u&&o;c++){const h=a[c];s.push(h),o=h.fallThrough}}return It(this._clearActiveCases(null,s),()=>(this.activeCases=s,this._activateCases(null)))}swap(e,t){const i=[];let r=!1;for(const o of this.cases)if((r||o.isMatch(t))&&(i.push(o),r=o.fallThrough),i.length>0&&!r)break;const s=this.defaultCase;return i.length===0&&s!==void 0&&i.push(s),It(this.activeCases.length>0?this._clearActiveCases(e,i):void 0,()=>{if(this.activeCases=i,i.length!==0)return this._activateCases(e)})}_activateCases(e){const t=this.$controller;if(!t.isActive)return;const i=this.activeCases,r=i.length;if(r===0)return;const s=t.scope;return r===1?i[0].activate(e,s):Ai(...i.map(o=>o.activate(e,s)))}_clearActiveCases(e,t=[]){const i=this.activeCases,r=i.length;if(r!==0){if(r===1){const s=i[0];return t.includes(s)?void 0:(i.length=0,s.deactivate(e))}return It(Ai(...i.reduce((s,o)=>(t.includes(o)||s.push(o.deactivate(e)),s),[])),()=>{i.length=0})}}queue(e){const t=this.promise;let i;i=this.promise=It(It(t,e),()=>{this.promise===i&&(this.promise=void 0)})}accept(e){if(this.$controller.accept(e)===!0||this.activeCases.some(t=>t.accept(e)))return!0}}gT.$au={type:Zi,name:"switch",isTemplateController:!0,bindables:["value"]};let One=0;const CB=["value",{name:"fallThrough",mode:n0,set(n){switch(n){case"true":return!0;case"false":return!1;default:return!!n}}}];class pT{constructor(){this.id=++One,this.fallThrough=!1,this.view=void 0,this._factory=fe(rs),this._locator=fe(qf),this._location=fe(yr),this._logger=fe(fh).scopeTo(`${this.constructor.name}-#${this.id}`)}link(e,t,i,r){const s=e.parent,o=s==null?void 0:s.viewModel;if(o instanceof gT)this.$switch=o,this.linkToSwitch(o);else throw Re(815)}detaching(e,t){return this.deactivate(e)}isMatch(e){this._logger.debug("isMatch()");const t=this.value;return ni(t)?(this._observer===void 0&&(this._observer=this._observeCollection(t)),t.includes(e)):t===e}valueChanged(e,t){var i;ni(e)?((i=this._observer)==null||i.unsubscribe(this),this._observer=this._observeCollection(e)):this._observer!==void 0&&this._observer.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(e??i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(e??t,this.$controller)}dispose(){var e,t;(e=this._observer)==null||e.unsubscribe(this),(t=this.view)==null||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}_observeCollection(e){const t=this._locator.getArrayObserver(e);return t.subscribe(this),t}accept(e){var t;return this.$controller.accept(e)===!0?!0:(t=this.view)==null?void 0:t.accept(e)}}Wx({name:"case",bindables:CB,isTemplateController:!0},pT);class SB extends pT{linkToSwitch(e){if(e.defaultCase!==void 0)throw Re(816);e.defaultCase=this}}Wx({name:"default-case",bindables:CB,isTemplateController:!0},SB);var _B,RB,EB;class mT{constructor(){this.preSettledTask=null,this.postSettledTask=null,this._factory=fe(rs),this._location=fe(yr),this._platform=fe(Is),this.logger=fe(fh).scopeTo("promise.resolve")}link(e,t,i,r){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,r=this.$controller;return It(i.activate(e,r,this.viewScope=di.fromParent(r.scope,{})),()=>this.swap(e))}valueChanged(e,t){this.$controller.isActive&&this.swap(null)}swap(e){var u,h;const t=this.value;if(!Ti(t)){this.logger.warn(`The value '${yh(t)}' is not a promise. No change will be done.`);return}const i=this._platform.domQueue,r=this.fulfilled,s=this.rejected,o=this.pending,a=this.viewScope;let l;const c=()=>{Ai(l=(this.preSettledTask=i.queueTask(()=>Ai(r==null?void 0:r.deactivate(e),s==null?void 0:s.deactivate(e),o==null?void 0:o.activate(e,a)))).result.catch(d=>{if(!(d instanceof Ax))throw d}),t.then(d=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>Ai(o==null?void 0:o.deactivate(e),s==null?void 0:s.deactivate(e),r==null?void 0:r.activate(e,a,d)))).result};this.preSettledTask.status===Nx?l.then(f):(this.preSettledTask.cancel(),f())},d=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>Ai(o==null?void 0:o.deactivate(e),r==null?void 0:r.deactivate(e),s==null?void 0:s.activate(e,a,d)))).result};this.preSettledTask.status===Nx?l.then(f):(this.preSettledTask.cancel(),f())}))};((u=this.postSettledTask)==null?void 0:u.status)===Nx?this.postSettlePromise.then(c):((h=this.postSettledTask)==null||h.cancel(),c())}detaching(e,t){var i,r;return(i=this.preSettledTask)==null||i.cancel(),(r=this.postSettledTask)==null||r.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}mT.$au={type:Zi,name:"promise",isTemplateController:!0,bindables:["value"]};class xB{constructor(){this.view=void 0,this._factory=fe(rs),this._location=fe(yr)}link(e,t,i,r){bT(e).pending=this}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}xB.$au={type:Zi,name:"pending",isTemplateController:!0,bindables:{value:{mode:qn}}};class TB{constructor(){this.view=void 0,this._factory=fe(rs),this._location=fe(yr)}link(e,t,i,r){bT(e).fulfilled=this}activate(e,t,i){this.value=i;let r=this.view;if(r===void 0&&(r=this.view=this._factory.create().setLocation(this._location)),!r.isActive)return r.activate(r,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}TB.$au={type:Zi,name:"then",isTemplateController:!0,bindables:{value:{mode:kl}}};class MB{constructor(){this.view=void 0,this._factory=fe(rs),this._location=fe(yr)}link(e,t,i,r){bT(e).rejected=this}activate(e,t,i){this.value=i;let r=this.view;if(r===void 0&&(r=this.view=this._factory.create().setLocation(this._location)),!r.isActive)return r.activate(r,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}MB.$au={type:Zi,name:"catch",isTemplateController:!0,bindables:{value:{mode:kl}}};function bT(n){const e=n.parent,t=e==null?void 0:e.viewModel;if(t instanceof mT)return t;throw Re(813)}class vT{"promise.resolve"(e,t){return new ts(e,t,"promise","bind")}}_B=Symbol.metadata,vT[_B]={[fa]:Gc.create([{pattern:"promise.resolve",symbols:""}],vT)};class wT{then(e,t){return new ts(e,t,"then","from-view")}}RB=Symbol.metadata,wT[RB]={[fa]:Gc.create([{pattern:"then",symbols:""}],wT)};class yT{catch(e,t){return new ts(e,t,"catch","from-view")}}EB=Symbol.metadata,yT[EB]={[fa]:Gc.create([{pattern:"catch",symbols:""}],yT)};class AB{constructor(){this._needsApply=!1,this._element=fe(jm),this._platform=fe(Is)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this._apply():this._needsApply=!0}attached(){this._needsApply&&(this._needsApply=!1,this._apply()),this._element.addEventListener("focus",this),this._element.addEventListener("blur",this)}detaching(){const e=this._element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){e.type==="focus"?this.value=!0:this._isElFocused||(this.value=!1)}_apply(){const e=this._element,t=this._isElFocused,i=this.value;i&&!t?e.focus():!i&&t&&e.blur()}get _isElFocused(){return this._element===this._platform.document.activeElement}}AB.$au={type:Zi,name:"focus",bindables:{value:{mode:Q2}}};class PB{constructor(){this.position="beforeend",this.strict=!1;const e=fe(rs),t=fe(yr),i=fe(Is);this._platform=i,this._resolvedTarget=i.document.createElement("div"),(this.view=e.create()).setLocation(this._targetLocation=dte(i)),cne(this.view.nodes,t)}attaching(e){this.callbackContext==null&&(this.callbackContext=this.$controller.scope.bindingContext);const t=this._resolvedTarget=this._getTarget();return this._moveLocation(t,this.position),this._activating(e,t)}detaching(e){return this._deactivating(e,this._resolvedTarget)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this._getTarget();if(this._resolvedTarget===t)return;this._resolvedTarget=t;const i=It(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Ti(i)&&i.catch(Dx)}positionChanged(){const{$controller:e,_resolvedTarget:t}=this;if(!e.isActive)return;const i=It(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Ti(i)&&i.catch(Dx)}_activating(e,t){const{activating:i,callbackContext:r,view:s}=this;return It(i==null?void 0:i.call(r,t,s),()=>this._activate(e,t))}_activate(e,t){const{$controller:i,view:r}=this;if(e===null)r.nodes.insertBefore(this._targetLocation);else return It(r.activate(e??r,i,i.scope),()=>this._activated(t));return this._activated(t)}_activated(e){const{activated:t,callbackContext:i,view:r}=this;return t==null?void 0:t.call(i,e,r)}_deactivating(e,t){const{deactivating:i,callbackContext:r,view:s}=this;return It(i==null?void 0:i.call(r,t,s),()=>this._deactivate(e,t))}_deactivate(e,t){const{$controller:i,view:r}=this;if(e===null)r.nodes.remove();else return It(r.deactivate(e,i),()=>this._deactivated(t));return this._deactivated(t)}_deactivated(e){const{deactivated:t,callbackContext:i,view:r}=this;return It(t==null?void 0:t.call(i,e,r),()=>this._removeLocation())}_getTarget(){const e=this._platform,t=e.document;let i=this.target,r=this.renderContext;if(i===""){if(this.strict)throw Re(811);return t.body}if(wt(i)){let s=t;wt(r)&&(r=t.querySelector(r)),r instanceof e.Node&&(s=r),i=s.querySelector(i)}if(i instanceof e.Node)return i;if(i==null){if(this.strict)throw Re(812);return t.body}return i}_removeLocation(){this._targetLocation.remove(),this._targetLocation.$start.remove()}_moveLocation(e,t){const i=this._targetLocation,r=i.$start,s=e.parentNode,o=[r,i];switch(t){case"beforeend":c0(e,null,o);break;case"afterbegin":c0(e,e.firstChild,o);break;case"beforebegin":c0(s,e,o);break;case"afterend":c0(s,e.nextSibling,o);break;default:throw Re(779,t)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}PB.$au={type:Zi,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};let kne;class E0{constructor(){var h,d,f,g;this._parentScope=null,this._outerScope=null,this._attached=!1,this.expose=null,this.slotchange=null,this._subs=new Set,this._observer=null;const e=fe(Nh),t=fe(yr),i=fe(jf),r=fe(tu),s=this.name=i.data.name,o=(h=i.projections)==null?void 0:h[SF],a=(f=(d=e.instruction)==null?void 0:d.projections)==null?void 0:f[s],l=e.controller.container;let c,u;a==null?(u=l.createChild({inheritParentResources:!0}),c=r.getViewFactory(o??kne??(kne=Cr.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),u),this._hasProjection=!1):(u=l.createChild(),u.useResources(e.parent.controller.container),fi(u,Nh,new Ki(void 0,e.parent)),c=r.getViewFactory(a,u),this._hasProjection=!0,this._slotwatchers=((g=l.getAll(pte,!1))==null?void 0:g.filter(p=>p.slotName==="*"||p.slotName===s))??gt),this._hasSlotWatcher=(this._slotwatchers??(this._slotwatchers=gt)).length>0,this._hdrContext=e,this.view=c.create().setLocation(this._location=t)}get nodes(){const e=[],t=this._location;let i=t.$start.nextSibling;for(;i!=null&&i!==t;)i.nodeType!==8&&e.push(i),i=i.nextSibling;return e}subscribe(e){this._subs.add(e)}unsubscribe(e){this._subs.delete(e)}binding(e,t){var s;for(this._parentScope=t.scope;t.vmKind==="synthetic"&&((s=t.parent)==null?void 0:s.viewModel)instanceof E0;)t=t.parent.parent;const i=t.scope.bindingContext;let r;this._hasProjection&&(r=this._hdrContext.controller.scope.parent,(this._outerScope=di.fromParent(r,r.bindingContext)).overrideContext.$host=this.expose??i)}attaching(e,t){return It(this.view.activate(e,this.$controller,this._hasProjection?this._outerScope:this._parentScope),()=>{this._hasSlotWatcher&&(this._slotwatchers.forEach(i=>i.watch(this)),this._observe(),this._notifySlotChange(),this._attached=!0)})}detaching(e,t){return this._attached=!1,this._unobserve(),this._slotwatchers.forEach(i=>i.unwatch(this)),this.view.deactivate(e,this.$controller)}exposeChanged(e){this._hasProjection&&this._outerScope!=null&&(this._outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}_observe(){if(this._observer!=null)return;const e=this._location,t=e.parentElement;t!=null&&(this._observer=CF(t,i=>{Dne(e,i)&&this._notifySlotChange()})).observe(t,{childList:!0})}_unobserve(){var e;(e=this._observer)==null||e.disconnect(),this._observer=null}_notifySlotChange(){var r;const e=this.nodes,t=new Set(this._subs);let i;this._attached&&((r=this.slotchange)==null||r.call(void 0,this.name,e));for(i of t)i.handleSlotChange(this,e)}}E0.$au={type:Hh,name:"au-slot",template:null,containerless:!0,processContent(n,e,t){t.name=n.getAttribute("name")??SF;let i=n.firstChild,r=null;for(;i!==null;)r=i.nextSibling,fte(i)&&i.hasAttribute(gte)&&(console.warn("[DEV:aurelia] detected [au-slot] attribute on a child node",`of an <au-slot> element: "<${i.nodeName} au-slot>".`,"This element will be ignored and removed"),n.removeChild(i)),i=r},bindables:["expose","slotchange"]};const x0=(n,e)=>n.compareDocumentPosition(e),Dne=(n,e)=>{for(const{addedNodes:t,removedNodes:i,nextSibling:r}of e){let s=0,o=t.length,a;for(;s<o;++s)if(a=t[s],x0(n.$start,a)===4&&x0(n,a)===2)return!0;if(i.length>0&&r!=null&&x0(n.$start,r)===4&&x0(n,r)===2)return!0}};class IB{constructor(){this.scopeBehavior="auto",this._composition=void 0,this.tag=null,this._container=fe(Df),this.parent=fe(g0),this._host=fe(jm),this._location=fe(yr),this._platform=fe(Is),this._rendering=fe(tu),this._instruction=fe(jf),this._contextFactory=fe(mZ(Lne)),this._compiler=fe(Vy),this._hydrationContext=fe(Nh),this._exprParser=fe(Ff),this._observerLocator=fe(qf)}get composing(){return this._composing}get composition(){return this._composition}attaching(e,t){return this._composing=It(this.queue(new OB(this.template,this.component,this.model,void 0),e),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)})}detaching(e){const t=this._composition,i=this._composing;return this._contextFactory.invalidate(),this._composition=this._composing=void 0,It(i,()=>t==null?void 0:t.deactivate(e))}propertyChanged(e){var t;if(!(e==="composing"||e==="composition")){if(e==="model"&&this._composition!=null){this._composition.update(this.model);return}if(e==="tag"&&((t=this._composition)==null?void 0:t.controller.vmKind)===Os){console.warn("[DEV:aurelia] Changing tag name of a custom element composition is ignored.");return}this._composing=It(this._composing,()=>It(this.queue(new OB(this.template,this.component,this.model,e),void 0),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)}))}}queue(e,t){const i=this._contextFactory,r=this._composition;return It(i.create(e),s=>i._isCurrent(s)?It(this.compose(s),o=>i._isCurrent(s)?It(o.activate(t),()=>i._isCurrent(s)?(this._composition=o,It(r==null?void 0:r.deactivate(t),()=>s)):It(o.controller.deactivate(o.controller,this.$controller),()=>(o.controller.dispose(),s))):(o.controller.dispose(),s)):s)}compose(e){const{_template:t,_component:i,_model:r}=e.change,{_container:s,$controller:o,_location:a,_instruction:l}=this,c=this._getDefinition(this._hydrationContext.controller.container,i),u=s.createChild(),h=this._platform.document.createElement(c==null?this.tag??"div":c.name);a.parentNode.insertBefore(h,a);let d;c==null?d=this.tag==null?zm(h):null:d=c.containerless?zm(h):null;const f=()=>{var m;if(h.remove(),d!=null){let v=d.$start.nextSibling,y=null;for(;v!==null&&v!==d;)y=v.nextSibling,v.remove(),v=y;(m=d.$start)==null||m.remove(),d.remove()}},g=this._createComponentInstance(u,typeof i=="string"?c.Type:i,h,d),p=()=>{const m=l.captures??gt;if(c!==null){const v=c.capture,[y,w]=m.reduce((R,E)=>{const x=!(E.target in c.bindables)&&(v===!0||Bt(v)&&!!v(E.target));return R[x?0:1].push(E),R},[[],[]]),_=ss.$el(u,g,h,{projections:l.projections,captures:y},c,d);return this._createSpreadBindings(h,c,w).forEach(R=>_.addBinding(R)),new DB(_,R=>_.activate(R??_,o,o.scope.parent),R=>It(_.deactivate(R??_,o),f),R=>{var E;return(E=g.activate)==null?void 0:E.call(g,R)},e)}else{const v=Cr.create({name:Nr.generateName(),template:t}),y=this._rendering.getViewFactory(v,u),w=ss.$view(y,o),_=this.scopeBehavior==="auto"?di.fromParent(this.parent.scope,g):di.create(g);return w.setHost(h),d==null?this._createSpreadBindings(h,v,m).forEach(R=>w.addBinding(R)):w.setLocation(d),new DB(w,R=>w.activate(R??w,o,_),R=>It(w.deactivate(R??w,o),f),R=>{var E;return(E=g.activate)==null?void 0:E.call(g,R)},e)}};return"activate"in g?It(g.activate(r),()=>p()):p()}_createComponentInstance(e,t,i,r){if(t==null)return new Nne;if(typeof t=="object")return t;const s=this._platform;rT(e,i,s),fi(e,yr,new Ki("IRenderLocation",r));const o=e.invoke(t);return fi(e,t,new Ki("au-compose.component",o)),o}_getDefinition(e,t){if(typeof t=="string"){const r=Nr.find(e,t);if(r==null)throw Re(806,t);return r}const i=Bt(t)?t:t==null?void 0:t.constructor;return Nr.isType(i,void 0)?Nr.getDefinition(i,null):null}_createSpreadBindings(e,t,i){const r=new GF(this.$controller,{projections:null,captures:i},this._hydrationContext.parent);return u0.create(r,e,t,this._rendering,this._compiler,this._platform,this._exprParser,this._observerLocator)}}IB.$au={type:Hh,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:n=>{if(n==="scoped"||n==="auto")return n;throw Re(805,n)}},{name:"composing",mode:kl},{name:"composition",mode:kl},"tag"]};class Nne{}class Lne{constructor(){this.id=0}_isCurrent(e){return e.id===this.id}create(e){return It(e.load(),t=>new Hne(++this.id,t))}invalidate(){this.id++}}class OB{constructor(e,t,i,r){this._template=e,this._component=t,this._model=i,this._src=r}load(){return Ti(this._template)||Ti(this._component)?Promise.all([this._template,this._component]).then(([e,t])=>new kB(e,t,this._model,this._src)):new kB(this._template,this._component,this._model,this._src)}}class kB{constructor(e,t,i,r){this._template=e,this._component=t,this._model=i,this._src=r}}class Hne{constructor(e,t){this.id=e,this.change=t}}class DB{constructor(e,t,i,r,s){this.controller=e,this.start=t,this.stop=i,this.update=r,this.context=s,this.state=0}activate(e){if(this.state!==0)throw Re(807,this);return this.state=1,this.start(e)}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw Re(808);default:this.state=-1}}}const $ne=Nn("ISanitizer",n=>n.singleton(class{sanitize(){throw Re(99,"sanitize")}}));class NB{constructor(){this._sanitizer=fe($ne)}toView(e){return e==null?null:this._sanitizer.sanitize(e)}}NB.$au={type:eg,name:"sanitize"};class LB{constructor(){this.el=fe(jm),this.p=fe(Is),this._isActive=!1,this._task=null,this.$val="",this.$prio="",this.update=()=>{this._task=null,!!this.value!==this._isToggled&&(this._isToggled===this._base?(this._isToggled=!this._base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this._isToggled=this._base,this.el.style.setProperty("display",this.$val,this.$prio),this.el.getAttribute("style")===""&&this.el.removeAttribute("style")))};const e=fe(jf);this._isToggled=this._base=e.alias!=="hide"}binding(){this._isActive=!0,this.update()}detaching(){var e;this._isActive=!1,(e=this._task)==null||e.cancel(),this._task=null}valueChanged(){this._isActive&&this._task===null&&(this._task=this.p.domQueue.queueTask(this.update))}}LB.$au={type:Zi,name:"show",bindables:["value"],aliases:["hide"]};const Fne=[bne,_ee,hT],Bne=[ZE,XE,QE,hte],Vne=[f2,c2,h2,u2,d2,g2,y2,p2,m2,w2,v2,b2,C2],Wne=[fF,cF,uF,hF,gF,pF,dF,NB,y0,hB,dB,yB,gT,pT,SB,mT,xB,TB,MB,vT,wT,yT,lB,cB,uB,IB,PB,AB,LB,E0],jne=[Rte,Ete,Ste,_te,bte,vte,wte,yte,Cte,Mte,Nte,Ate,Pte,Ite,kte,xte,Lte,Hte],zne=HB(pa);function HB(n){return{optionsProvider:n,register(e){const t={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return n(t),e.register(Gee(L2,t.coercingOptions),u$,...Fne,...Wne,...Bne,...Vne,...jne)},customize(e){return HB(e??n)}}}class Une{constructor(){this.ctn=fe(Df),this.p=fe(Is),this.r=fe(tu)}define(e,t,i){if(!e.includes("-"))throw ST('Invalid web-components custom element name. It must include a "-"');let r;if(t==null)throw ST("Invalid custom element definition");switch(typeof t){case"function":r=Nr.isType(t)?Nr.getDefinition(t):Cr.create(Nr.generateName(),t);break;default:r=Cr.getOrCreate(t);break}if(r.containerless)throw ST("Containerless custom element is not supported. Consider using buitl-in extends instead");const s=i!=null&&i.extends?this.p.document.createElement(i.extends).constructor:this.p.HTMLElement,o=this.ctn,a=this.r,l=r.bindables,c=this.p;class u extends s{auInit(){if(this.auInited)return;this.auInited=!0;const d=o.createChild();CT(d,c.HTMLElement,CT(d,c.Element,CT(d,jm,new Ki("ElementProvider",this))));const f=a.compile(r,d),g=d.invoke(f.Type),p=this.auCtrl=ss.$el(d,g,this,null,f);Ji(this,f.key,p)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null)}adoptedCallback(){this.auInit()}attributeChangedCallback(d,f,g){this.auInit(),this.auCtrl.viewModel[d]=g}}u.observedAttributes=Object.keys(l);for(const h in l)Object.defineProperty(u.prototype,h,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[h]},set(d){this.auInited||this.auInit(),this.auCtrl.viewModel[h]=d}});return this.p.customElements.define(e,u,i),u}}const CT=(n,e,t)=>n.registerResolver(e,t),ST=n=>new Error(n),$B="chartjs",_T=`<div>
    <canvas ref="mychart"></canvas>
</div>
`,FB=[],BB={};let RT;function Gne(n){RT||(RT=Nr.define({name:$B,template:_T,dependencies:FB,bindables:BB})),n.register(RT)}const Yne=Object.freeze(Object.defineProperty({__proto__:null,bindables:BB,default:_T,dependencies:FB,name:$B,register:Gne,template:_T},Symbol.toStringTag,{value:"Module"}));/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ym(n){return n+.5|0}const ru=(n,e,t)=>Math.max(Math.min(n,t),e);function Km(n){return ru(Ym(n*2.55),0,255)}function su(n){return ru(Ym(n*255),0,255)}function Bl(n){return ru(Ym(n/2.55)/100,0,1)}function VB(n){return ru(Ym(n*100),0,100)}const Ns={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ET=[..."0123456789ABCDEF"],Kne=n=>ET[n&15],qne=n=>ET[(n&240)>>4]+ET[n&15],T0=n=>(n&240)>>4===(n&15),Xne=n=>T0(n.r)&&T0(n.g)&&T0(n.b)&&T0(n.a);function Zne(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Ns[n[1]]*17,g:255&Ns[n[2]]*17,b:255&Ns[n[3]]*17,a:e===5?Ns[n[4]]*17:255}:(e===7||e===9)&&(t={r:Ns[n[1]]<<4|Ns[n[2]],g:Ns[n[3]]<<4|Ns[n[4]],b:Ns[n[5]]<<4|Ns[n[6]],a:e===9?Ns[n[7]]<<4|Ns[n[8]]:255})),t}const Qne=(n,e)=>n<255?e(n):"";function Jne(n){var e=Xne(n)?Kne:qne;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Qne(n.a,e):void 0}const eie=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function WB(n,e,t){const i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function tie(n,e,t){const i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function nie(n,e,t){const i=WB(n,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function iie(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function xT(n){const t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=iie(t,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function TT(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(su)}function MT(n,e,t){return TT(WB,n,e,t)}function rie(n,e,t){return TT(nie,n,e,t)}function sie(n,e,t){return TT(tie,n,e,t)}function jB(n){return(n%360+360)%360}function oie(n){const e=eie.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Km(+e[5]):su(+e[5]));const r=jB(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=rie(r,s,o):e[1]==="hsv"?i=sie(r,s,o):i=MT(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function aie(n,e){var t=xT(n);t[0]=jB(t[0]+e),t=MT(t),n.r=t[0],n.g=t[1],n.b=t[2]}function lie(n){if(!n)return;const e=xT(n),t=e[0],i=VB(e[1]),r=VB(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${Bl(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}const zB={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},UB={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function cie(){const n={},e=Object.keys(UB),t=Object.keys(zB);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,zB[s]);s=parseInt(UB[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let M0;function uie(n){M0||(M0=cie(),M0.transparent=[0,0,0,0]);const e=M0[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const hie=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function die(n){const e=hie.exec(n);let t=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?Km(o):ru(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Km(i):ru(i,0,255)),r=255&(e[4]?Km(r):ru(r,0,255)),s=255&(e[6]?Km(s):ru(s,0,255)),{r:i,g:r,b:s,a:t}}}function fie(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Bl(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const AT=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,lg=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function gie(n,e,t){const i=lg(Bl(n.r)),r=lg(Bl(n.g)),s=lg(Bl(n.b));return{r:su(AT(i+t*(lg(Bl(e.r))-i))),g:su(AT(r+t*(lg(Bl(e.g))-r))),b:su(AT(s+t*(lg(Bl(e.b))-s))),a:n.a+t*(e.a-n.a)}}function A0(n,e,t){if(n){let i=xT(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=MT(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function GB(n,e){return n&&Object.assign(e||{},n)}function YB(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=su(n[3]))):(e=GB(n,{r:0,g:0,b:0,a:1}),e.a=su(e.a)),e}function pie(n){return n.charAt(0)==="r"?die(n):oie(n)}let KB=class MH{constructor(e){if(e instanceof MH)return e;const t=typeof e;let i;t==="object"?i=YB(e):t==="string"&&(i=Zne(e)||uie(e)||pie(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=GB(this._rgb);return e&&(e.a=Bl(e.a)),e}set rgb(e){this._rgb=YB(e)}rgbString(){return this._valid?fie(this._rgb):void 0}hexString(){return this._valid?Jne(this._rgb):void 0}hslString(){return this._valid?lie(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=gie(this._rgb,e._rgb,t)),this}clone(){return new MH(this.rgb)}alpha(e){return this._rgb.a=su(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Ym(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return A0(this._rgb,2,e),this}darken(e){return A0(this._rgb,2,-e),this}saturate(e){return A0(this._rgb,1,e),this}desaturate(e){return A0(this._rgb,1,-e),this}rotate(e){return aie(this._rgb,e),this}};/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Vl(){}const mie=(()=>{let n=0;return()=>n++})();function Nt(n){return n===null||typeof n>"u"}function Mn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function _t(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Xn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ls(n,e){return Xn(n)?n:e}function et(n,e){return typeof n>"u"?e:n}const bie=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,qB=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function bn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Xt(n,e,t,i){let r,s,o;if(Mn(n))for(s=n.length,r=0;r<s;r++)e.call(t,n[r],r);else if(_t(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function P0(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function I0(n){if(Mn(n))return n.map(I0);if(_t(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let r=0;for(;r<i;++r)e[t[r]]=I0(n[t[r]]);return e}return n}function XB(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function vie(n,e,t,i){if(!XB(n))return;const r=e[n],s=t[n];_t(r)&&_t(s)?cs(r,s,i):e[n]=I0(s)}function cs(n,e,t){const i=Mn(e)?e:[e],r=i.length;if(!_t(n))return n;t=t||{};const s=t.merger||vie;let o;for(let a=0;a<r;++a){if(o=i[a],!_t(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,t)}return n}function qm(n,e){return cs(n,e,{merger:wie})}function wie(n,e,t){if(!XB(n))return;const i=e[n],r=t[n];_t(i)&&_t(r)?qm(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=I0(r))}const ZB={"":n=>n,x:n=>n.x,y:n=>n.y};function yie(n){const e=n.split("."),t=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Cie(n){const e=yie(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function ou(n,e){return(ZB[e]||(ZB[e]=Cie(e)))(n)}function PT(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Xm=n=>typeof n<"u",au=n=>typeof n=="function",QB=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function Sie(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const wn=Math.PI,yn=2*wn,_ie=yn+wn,O0=Number.POSITIVE_INFINITY,Rie=wn/180,ii=wn/2,Bh=wn/4,JB=wn*2/3,lu=Math.log10,xa=Math.sign;function Zm(n,e,t){return Math.abs(n-e)<t}function eV(n){const e=Math.round(n);n=Zm(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(lu(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Eie(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function cg(n){return!isNaN(parseFloat(n))&&isFinite(n)}function xie(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function tV(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Mo(n){return n*(wn/180)}function IT(n){return n*(180/wn)}function nV(n){if(!Xn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function iV(n,e){const t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*wn&&(s+=yn),{angle:s,distance:r}}function OT(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Tie(n,e){return(n-e+_ie)%yn-wn}function us(n){return(n%yn+yn)%yn}function Qm(n,e,t,i){const r=us(n),s=us(e),o=us(t),a=us(s-r),l=us(o-r),c=us(r-s),u=us(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Oi(n,e,t){return Math.max(e,Math.min(t,n))}function Mie(n){return Oi(n,-32768,32767)}function Wl(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function kT(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}const jl=(n,e,t,i)=>kT(n,t,i?r=>{const s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),Aie=(n,e,t)=>kT(n,t,i=>n[i][e]>=t);function Pie(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}const rV=["push","pop","shift","splice","unshift"];function Iie(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),rV.forEach(t=>{const i="_onData"+PT(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function sV(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(rV.forEach(s=>{delete n[s]}),delete n._chartjs)}function oV(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const aV=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function lV(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,aV.call(window,()=>{i=!1,n.apply(e,t)}))}}function Oie(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const DT=n=>n==="start"?"left":n==="end"?"right":"center",er=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,kie=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function cV(n,e,t){const i=e.length;let r=0,s=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=Oi(Math.min(jl(a,l,c).lo,t?i:jl(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?s=Oi(Math.max(jl(a,o.axis,u,!0).hi+1,t?0:jl(e,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function uV(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}const k0=n=>n===0||n===1,hV=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*yn/t)),dV=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*yn/t)+1,Jm={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ii)+1,easeOutSine:n=>Math.sin(n*ii),easeInOutSine:n=>-.5*(Math.cos(wn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>k0(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>k0(n)?n:hV(n,.075,.3),easeOutElastic:n=>k0(n)?n:dV(n,.075,.3),easeInOutElastic(n){return k0(n)?n:n<.5?.5*hV(n*2,.1125,.45):.5+.5*dV(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Jm.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Jm.easeInBounce(n*2)*.5:Jm.easeOutBounce(n*2-1)*.5+.5};function NT(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function fV(n){return NT(n)?n:new KB(n)}function LT(n){return NT(n)?n:new KB(n).saturate(.5).darken(.1).hexString()}const Die=["x","y","borderWidth","radius","tension"],Nie=["color","borderColor","backgroundColor"];function Lie(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Nie},numbers:{type:"number",properties:Die}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Hie(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const gV=new Map;function $ie(n,e){e=e||{};const t=n+JSON.stringify(e);let i=gV.get(t);return i||(i=new Intl.NumberFormat(n,e),gV.set(t,i)),i}function eb(n,e,t){return $ie(e,t).format(n)}const pV={values(n){return Mn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=Fie(n,t)}const o=lu(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),eb(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(lu(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?pV.numeric.call(this,n,e,t):""}};function Fie(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var D0={formatters:pV};function Bie(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:D0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Vh=Object.create(null),HT=Object.create(null);function tb(n,e){if(!e)return n;const t=e.split(".");for(let i=0,r=t.length;i<r;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function $T(n,e,t){return typeof e=="string"?cs(tb(n,e),t):cs(tb(n,""),e)}class Vie{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>LT(r.backgroundColor),this.hoverBorderColor=(i,r)=>LT(r.borderColor),this.hoverColor=(i,r)=>LT(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return $T(this,e,t)}get(e){return tb(this,e)}describe(e,t){return $T(HT,e,t)}override(e,t){return $T(Vh,e,t)}route(e,t,i,r){const s=tb(this,e),o=tb(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[r];return _t(l)?Object.assign({},c,l):et(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var An=new Vie({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Lie,Hie,Bie]);function Wie(n){return!n||Nt(n.size)||Nt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function N0(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function jie(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=t[l],h!=null&&!Mn(h))o=N0(n,r,s,o,h);else if(Mn(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!Mn(d)&&(o=N0(n,r,s,o,d));n.restore();const f=s.length/2;if(f>t.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function Wh(n,e,t){const i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function mV(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function L0(n,e,t,i){bV(n,e,t,i,null)}function bV(n,e,t,i,r){let s,o,a,l,c,u,h,d;const f=e.pointStyle,g=e.rotation,p=e.radius;let m=(g||0)*Rie;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(p)||p<=0)){switch(n.beginPath(),f){default:r?n.ellipse(t,i,r/2,p,0,0,yn):n.arc(t,i,p,0,yn),n.closePath();break;case"triangle":u=r?r/2:p,n.moveTo(t+Math.sin(m)*u,i-Math.cos(m)*p),m+=JB,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*p),m+=JB,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*p),n.closePath();break;case"rectRounded":c=p*.516,l=p-c,o=Math.cos(m+Bh)*l,h=Math.cos(m+Bh)*(r?r/2-c:l),a=Math.sin(m+Bh)*l,d=Math.sin(m+Bh)*(r?r/2-c:l),n.arc(t-h,i-a,c,m-wn,m-ii),n.arc(t+d,i-o,c,m-ii,m),n.arc(t+h,i+a,c,m,m+ii),n.arc(t-d,i+o,c,m+ii,m+wn),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,u=r?r/2:l,n.rect(t-u,i-l,2*u,2*l);break}m+=Bh;case"rectRot":h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+d,i-o),n.lineTo(t+h,i+a),n.lineTo(t-d,i+o),n.closePath();break;case"crossRot":m+=Bh;case"cross":h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"star":h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o),m+=Bh,h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*p,a=Math.sin(m)*p,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*(r?r/2:p),i+Math.sin(m)*p);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function zl(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function jh(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function zh(n){n.restore()}function zie(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Uie(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function Gie(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Nt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Yie(n,e,t,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Kie(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Uh(n,e,t,i,r,s={}){const o=Mn(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,Gie(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Kie(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Nt(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,i,s.maxWidth)),n.fillText(c,t,i,s.maxWidth),Yie(n,t,i,c,s),i+=Number(r.lineHeight);n.restore()}function nb(n,e){const{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*wn,wn,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,wn,ii,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,ii,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-ii,!0),n.lineTo(t+o.topLeft,i)}const qie=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Xie=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Zie(n,e){const t=(""+n).match(qie);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const Qie=n=>+n||0;function FT(n,e){const t={},i=_t(e),r=i?Object.keys(e):e,s=_t(n)?i?o=>et(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of r)t[o]=Qie(s(o));return t}function vV(n){return FT(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Gh(n){return FT(n,["topLeft","topRight","bottomLeft","bottomRight"])}function tr(n){const e=vV(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function mi(n,e){n=n||{},e=e||An.font;let t=et(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=et(n.style,e.style);i&&!(""+i).match(Xie)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:et(n.family,e.family),lineHeight:Zie(et(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:et(n.weight,e.weight),string:""};return r.string=Wie(r),r}function ib(n,e,t,i){let r,s,o;for(r=0,s=n.length;r<s;++r)if(o=n[r],o!==void 0&&o!==void 0)return o}function Jie(n,e,t){const{min:i,max:r}=n,s=qB(e,(r-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function cu(n,e){return Object.assign(Object.create(n),e)}function BT(n,e=[""],t,i,r=()=>n[0]){const s=t||n;typeof i>"u"&&(i=_V("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>BT([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return yV(a,l,()=>are(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return RV(a).includes(l)},ownKeys(a){return RV(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function ug(n,e,t,i){const r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:wV(n,i),setContext:s=>ug(n,s,t,i),override:s=>ug(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return yV(s,o,()=>tre(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function wV(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:au(t)?t:()=>t,isIndexable:au(i)?i:()=>i}}const ere=(n,e)=>n?n+PT(e):e,VT=(n,e)=>_t(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function yV(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function tre(n,e,t){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[e];return au(a)&&o.isScriptable(e)&&(a=nre(e,a,n,t)),Mn(a)&&a.length&&(a=ire(e,a,n,o.isIndexable)),VT(e,a)&&(a=ug(a,r,s&&s[e],o)),a}function nre(n,e,t,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||i);return a.delete(n),VT(n,l)&&(l=WT(r._scopes,r,n,l)),l}function ire(n,e,t,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(_t(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=WT(c,r,n,u);e.push(ug(h,s,o&&o[n],a))}}return e}function CV(n,e,t){return au(n)?n(e,t):n}const rre=(n,e)=>n===!0?e:typeof n=="string"?ou(e,n):void 0;function sre(n,e,t,i,r){for(const s of e){const o=rre(t,s);if(o){n.add(o);const a=CV(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function WT(n,e,t,i){const r=e._rootScopes,s=CV(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let l=SV(a,o,t,s||t,i);return l===null||typeof s<"u"&&s!==t&&(l=SV(a,o,s,l,i),l===null)?!1:BT(Array.from(a),[""],r,s,()=>ore(e,t,i))}function SV(n,e,t,i,r){for(;t;)t=sre(n,e,t,i,r);return t}function ore(n,e,t){const i=n._getTarget();e in i||(i[e]={});const r=i[e];return Mn(r)&&_t(t)?t:r||{}}function are(n,e,t,i){let r;for(const s of e)if(r=_V(ere(s,n),t),typeof r<"u")return VT(n,r)?WT(t,i,n,r):r}function _V(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function RV(n){let e=n._keys;return e||(e=n._keys=lre(n._scopes)),e}function lre(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function EV(n,e,t,i){const{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+t,u=e[c],o[a]={r:r.parse(ou(u,s),c)};return o}const cre=Number.EPSILON||1e-14,hg=(n,e)=>e<n.length&&!n[e].skip&&n[e],xV=n=>n==="x"?"y":"x";function ure(n,e,t,i){const r=n.skip?e:n,s=e,o=t.skip?e:t,a=OT(s,r),l=OT(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function hre(n,e,t){const i=n.length;let r,s,o,a,l,c=hg(n,0);for(let u=0;u<i-1;++u)if(l=c,c=hg(n,u+1),!(!l||!c)){if(Zm(e[u],0,cre)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=r*o*e[u],t[u+1]=s*o*e[u])}}function dre(n,e,t="x"){const i=xV(t),r=n.length;let s,o,a,l=hg(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=hg(n,c+1),!a)continue;const u=a[t],h=a[i];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${i}`]=h-s*e[c]),l&&(s=(l[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${i}`]=h+s*e[c])}}function fre(n,e="x"){const t=xV(e),i=n.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=hg(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=hg(n,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[t]-l[t])/u:0}s[o]=a?c?xa(r[o-1])!==xa(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}hre(n,r,s),dre(n,s,e)}function H0(n,e,t){return Math.max(Math.min(n,t),e)}function gre(n,e){let t,i,r,s,o,a=zl(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&zl(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=H0(r.cp1x,e.left,e.right),r.cp1y=H0(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=H0(r.cp2x,e.left,e.right),r.cp2y=H0(r.cp2y,e.top,e.bottom)))}function pre(n,e,t,i,r){let s,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")fre(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=ure(c,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&gre(n,t)}function jT(){return typeof window<"u"&&typeof document<"u"}function zT(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function $0(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const F0=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function mre(n,e){return F0(n).getPropertyValue(e)}const bre=["top","right","bottom","left"];function Yh(n,e,t){const i={};t=t?"-"+t:"";for(let r=0;r<4;r++){const s=bre[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const vre=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function wre(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(vre(r,s,n.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Kh(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,r=F0(t),s=r.boxSizing==="border-box",o=Yh(r,"padding"),a=Yh(r,"border","width"),{x:l,y:c,box:u}=wre(n,t),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:g}=e;return s&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/f*t.width/i),y:Math.round((c-d)/g*t.height/i)}}function yre(n,e,t){let i,r;if(e===void 0||t===void 0){const s=n&&zT(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),a=F0(s),l=Yh(a,"border","width"),c=Yh(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=$0(a.maxWidth,s,"clientWidth"),r=$0(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||O0,maxHeight:r||O0}}const B0=n=>Math.round(n*10)/10;function Cre(n,e,t,i){const r=F0(n),s=Yh(r,"margin"),o=$0(r.maxWidth,n,"clientWidth")||O0,a=$0(r.maxHeight,n,"clientHeight")||O0,l=yre(n,e,t);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const d=Yh(r,"border","width"),f=Yh(r,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=B0(Math.min(c,o,l.maxWidth)),u=B0(Math.min(u,a,l.maxHeight)),c&&!u&&(u=B0(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=B0(Math.floor(u*i))),{width:c,height:u}}function TV(n,e,t){const i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Sre=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};jT()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function MV(n,e){const t=mre(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function qh(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function _re(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function Rre(n,e,t,i){const r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=qh(n,r,t),a=qh(r,s,t),l=qh(s,e,t),c=qh(o,a,t),u=qh(a,l,t);return qh(c,u,t)}const Ere=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},xre=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function dg(n,e,t){return n?Ere(e,t):xre()}function AV(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function PV(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function IV(n){return n==="angle"?{between:Qm,compare:Tie,normalize:us}:{between:Wl,compare:(e,t)=>e-t,normalize:e=>e}}function OV({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function Tre(n,e,t){const{property:i,start:r,end:s}=t,{between:o,normalize:a}=IV(i),l=e.length;let{start:c,end:u,loop:h}=n,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),r,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:n.style}}function kV(n,e,t){if(!t)return[n];const{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:l,normalize:c}=IV(i),{start:u,end:h,loop:d,style:f}=Tre(n,e,t),g=[];let p=!1,m=null,v,y,w;const _=()=>l(r,w,v)&&a(r,w)!==0,R=()=>a(s,v)===0||l(s,w,v),E=()=>p||_(),x=()=>!p||R();for(let P=u,T=u;P<=h;++P)y=e[P%o],!y.skip&&(v=c(y[i]),v!==w&&(p=l(v,r,s),m===null&&E()&&(m=a(v,r)===0?P:T),m!==null&&x()&&(g.push(OV({start:m,end:P,loop:d,count:o,style:f})),m=null),T=P,w=v));return m!==null&&g.push(OV({start:m,end:h,loop:d,count:o,style:f})),g}function DV(n,e){const t=[],i=n.segments;for(let r=0;r<i.length;r++){const s=kV(i[r],n.points,e);s.length&&t.push(...s)}return t}function Mre(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function Are(n,e,t,i){const r=n.length,s=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function Pre(n,e){const t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];const s=!!n._loop,{start:o,end:a}=Mre(t,r,s,i);if(i===!0)return NV(n,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+r:a,c=!!n._fullLoop&&o===0&&a===r-1;return NV(n,Are(t,o,l,c),t,e)}function NV(n,e,t,i){return!i||!i.setContext||!t?e:Ire(n,e,t,i)}function Ire(n,e,t,i){const r=n._chart.getContext(),s=LV(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=s,h=e[0].start,d=h;function f(g,p,m,v){const y=a?-1:1;if(g!==p){for(g+=l;t[g%l].skip;)g-=y;for(;t[p%l].skip;)p+=y;g%l!==p%l&&(c.push({start:g%l,end:p%l,loop:m,style:v}),u=v,h=p%l)}}for(const g of e){h=a?h:g.start;let p=t[h%l],m;for(d=h+1;d<=g.end;d++){const v=t[d%l];m=LV(i.setContext(cu(r,{type:"segment",p0:p,p1:v,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),Ore(m,u)&&f(h,d-1,g.loop,u),p=v,u=m}h<d-1&&f(h,d-1,g.loop,u)}return c}function LV(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Ore(n,e){if(!e)return!1;const t=[],i=function(r,s){return NT(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class kre{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=aV.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ul=new kre;const HV="transparent",Dre={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=fV(n||HV),r=i.valid&&fV(e||HV);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Nre{constructor(e,t,i,r){const s=t[i];r=ib([e.to,r,s,e.from]);const o=ib([e.from,s,r]);this._active=!0,this._fn=e.fn||Dre[e.type||typeof o],this._easing=Jm[e.easing]||Jm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=ib([e.to,t,r,e.from]),this._from=ib([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}}class $V{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!_t(e))return;const t=Object.keys(An.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!_t(s))return;const o={};for(const a of t)o[a]=s[a];(Mn(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,r=Hre(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&Lre(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,t));continue}const u=t[c];let h=s[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=h=new Nre(d,e,c,u),r.push(h)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Ul.add(this._chart,i),!0}}function Lre(n,e){const t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function Hre(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function FV(n,e){const t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function $re(n,e,t){if(t===!1)return!1;const i=FV(n,t),r=FV(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Fre(n){let e,t,i,r;return _t(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function BV(n,e){const t=[],i=n._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function VV(n,e,t,i={}){const r=n.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===t){if(u=!0,i.all)continue;break}c=n.values[l],Xn(c)&&(s||e===0||xa(e)===xa(c))&&(e+=c)}return!u&&!i.all?0:e}function Bre(n,e){const{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}function UT(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Vre(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Wre(n){const{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function jre(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function WV(n,e,t,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function jV(n,e){const{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=Vre(s,o,i),h=e.length;let d;for(let f=0;f<h;++f){const g=e[f],{[l]:p,[c]:m}=g,v=g._stacks||(g._stacks={});d=v[c]=jre(r,u,p),d[a]=m,d._top=WV(d,o,!0,i.type),d._bottom=WV(d,o,!1,i.type);const y=d._visualValues||(d._visualValues={});y[a]=m}}function GT(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function zre(n,e){return cu(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Ure(n,e,t){return cu(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function rb(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}const YT=n=>n==="reset"||n==="none",zV=(n,e)=>e?n:Object.assign({},n),Gre=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:BV(t,!0),values:null};class Ls{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=UT(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&rb(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,s=t.xAxisID=et(i.xAxisID,GT(e,"x")),o=t.yAxisID=et(i.yAxisID,GT(e,"y")),a=t.rAxisID=et(i.rAxisID,GT(e,"r")),l=t.indexAxis,c=t.iAxisID=r(l,s,o,a),u=t.vAxisID=r(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&sV(this._data,this),e._stacked&&rb(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(_t(t)){const r=this._cachedMeta;this._data=Bre(t,r)}else if(i!==t){if(i){sV(i,this);const r=this._cachedMeta;rb(r),r._parsed=[]}t&&Object.isExtensible(t)&&Iie(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=UT(t.vScale,t),t.stack!==i.stack&&(r=!0,rb(t),t.stack=i.stack),this._resyncElements(e),(r||s!==t._stacked)&&(jV(this,t._parsed),t._stacked=UT(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&t===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=r,i._sorted=!0,d=r;else{Mn(r[e])?d=this.parseArrayData(i,r,e,t):_t(r[e])?d=this.parseObjectData(i,r,e,t):d=this.parsePrimitiveData(i,r,e,t);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<t;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&jV(this,d)}parsePrimitiveData(e,t,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let d,f,g;for(d=0,f=r;d<f;++d)g=d+i,h[d]={[a]:u||s.parse(c[g],g),[l]:o.parse(t[g],g)};return h}parseArrayData(e,t,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=t[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,t,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,d,f;for(u=0,h=r;u<h;++u)d=u+i,f=t[d],c[u]={x:s.parse(ou(f,a),d),y:o.parse(ou(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:BV(r,!0),values:t._stacks[e.axis]._visualValues};return VV(a,o,s.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const s=i[t.axis];let o=s===null?NaN:s;const a=r&&i._stacks[t.axis];r&&a&&(r.values=a,o=VV(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=Gre(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Wre(a);let d,f;function g(){f=r[d];const p=f[a.axis];return!Xn(f[e.axis])||u>p||h<p}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=t.length;r<s;++r)o=t[r][e.axis],Xn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Fre(et(this.options.clip,$re(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Ure(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=zre(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&Xm(i);if(a)return zV(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(An.elements[e]),g=()=>this.getContext(i,r,t),p=c.resolveNamedOptions(d,f,g,h);return p.$shared&&(p.$shared=l,s[o]=Object.freeze(zV(p,l))),p}_resolveAnimations(e,t,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,t))}const c=new $V(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||YT(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:o}}updateElement(e,t,i,r){YT(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!YT(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=t.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t,i=!0){const r=this._cachedMeta,s=r.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&rb(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ls.defaults={},Ls.datasetElementType=null,Ls.dataElementType=null;function Yre(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=oV(i.sort((r,s)=>r-s))}return n._cache.$bar}function Kre(n){const e=n.iScale,t=Yre(e,n.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(Xm(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function qre(n,e,t,i){const r=t.barThickness;let s,o;return Nt(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function Xre(n,e,t,i){const r=e.pixels,s=r[n];let o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null;const l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function Zre(n,e,t,i){const r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function UV(n,e,t,i){return Mn(n)?Zre(n,e,t,i):e[t.axis]=t.parse(n,i),e}function GV(n,e,t,i){const r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=t,u=t+i;c<u;++c)d=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(UV(d,h,s,c));return l}function KT(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Qre(n,e,t){return n!==0?xa(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function Jre(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function ese(n,e,t,i){let r=e.borderSkipped;const s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Jre(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=c:(t._bottom||0)===i?r=u:(s[YV(u,o,a,l)]=!0,r=c)),s[YV(r,o,a,l)]=!0,n.borderSkipped=s}function YV(n,e,t,i){return i?(n=tse(n,e,t),n=KV(n,t,e)):n=KV(n,e,t),n}function tse(n,e,t){return n===e?t:n===t?e:n}function KV(n,e,t){return n==="start"?e:n==="end"?t:n}function nse(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class V0 extends Ls{parsePrimitiveData(e,t,i,r){return GV(e,t,i,r)}parseArrayData(e,t,i,r){return GV(e,t,i,r)}parseObjectData(e,t,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,g,p;for(d=i,f=i+r;d<f;++d)p=t[d],g={},g[s.axis]=s.parse(ou(p,c),d),h.push(UV(ou(p,u),g,o,d));return h}updateRangeFromParsed(e,t,i,r){super.updateRangeFromParsed(e,t,i,r);const s=i._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:r}=t,s=this.getParsed(e),o=s._custom,a=KT(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(t,r);for(let f=t;f<t+i;f++){const g=this.getParsed(f),p=s||Nt(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,u),v=(g._stacks||{})[a.axis],y={horizontal:c,base:p.base,enableBorderRadius:!v||KT(g._custom)||o===v._top||o===v._bottom,x:c?p.head:m.center,y:c?m.center:p.head,height:c?m.size:Math.abs(p.size),width:c?Math.abs(p.size):m.size};d&&(y.options=h||this.resolveDataElementOptions(f,e[f].active?"active":r));const w=y.options||e[f].options;ese(y,w,v,o),nse(y,w,u.ratio),this.updateElement(e[f],f,y,r)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[i.axis],c=u=>{const h=u._parsed.find(f=>f[i.axis]===l),d=h&&h[u.vScale.axis];if(Nt(d)||isNaN(d))return!0};for(const u of r)if(!(t!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const r=this._getStacks(e,i),s=t!==void 0?r.indexOf(t):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,r=[];let s,o;for(s=0,o=t.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||Kre(t),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=KT(c);let h=l[t.axis],d=0,f=i?this.applyStack(t,l,i):h,g,p;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&xa(h)!==xa(c.barEnd)&&(d=0),d+=h);const m=!Nt(s)&&!u?s:d;let v=t.getPixelForValue(m);if(this.chart.getDataVisibility(e)?g=t.getPixelForValue(d+f):g=v,p=g-v,Math.abs(p)<o){p=Qre(p,t,a)*o,h===a&&(v-=p/2);const y=t.getPixelForDecimal(0),w=t.getPixelForDecimal(1),_=Math.min(y,w),R=Math.max(y,w);v=Math.max(Math.min(v,R),_),g=v+p,i&&!u&&(l._stacks[t.axis]._visualValues[r]=t.getValueForPixel(g)-t.getValueForPixel(v))}if(v===t.getPixelForValue(a)){const y=xa(p)*t.getLineWidthForValue(a)/2;v+=y,p-=y}return{size:p,base:v,head:g,center:g+p/2}}_calculateBarIndexPixels(e,t){const i=t.scale,r=this.options,s=r.skipNull,o=et(r.maxBarThickness,1/0);let a,l;if(t.grouped){const c=s?this._getStackCount(e):t.stackCount,u=r.barThickness==="flex"?Xre(e,t,r,c):qre(e,t,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[t.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}V0.id="bar",V0.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},V0.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class W0 extends Ls{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,r){const s=super.parsePrimitiveData(e,t,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(e,t,i,r){const s=super.parseArrayData(e,t,i,r);for(let o=0;o<s.length;o++){const a=t[i+o];s[o]._custom=et(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(e,t,i,r){const s=super.parseObjectData(e,t,i,r);for(let o=0;o<s.length;o++){const a=t[i+o];s[o]._custom=et(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=t,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,r),u=o.axis,h=a.axis;for(let d=t;d<t+i;d++){const f=e[d],g=!s&&this.getParsed(d),p={},m=p[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),v=p[h]=s?a.getBasePixel():a.getPixelForValue(g[h]);p.skip=isNaN(m)||isNaN(v),c&&(p.options=l||this.resolveDataElementOptions(d,f.active?"active":r),s&&(p.options.radius=0)),this.updateElement(f,d,p,r)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return t!=="active"&&(r.radius=0),r.radius+=et(i&&i._custom,s),r}}W0.id="bubble",W0.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},W0.overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};function ise(n,e,t){let i=1,r=1,s=0,o=0;if(e<yn){const a=n,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(w,_,R)=>Qm(w,a,l,!0)?1:Math.max(_,_*t,R,R*t),g=(w,_,R)=>Qm(w,a,l,!0)?-1:Math.min(_,_*t,R,R*t),p=f(0,c,h),m=f(ii,u,d),v=g(wn,c,h),y=g(wn+ii,u,d);i=(p-v)/2,r=(m-y)/2,s=-(p+v)/2,o=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class Xh extends Ls{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(_t(i[e])){const{key:l="value"}=this._parsing;s=c=>+ou(i[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return Mo(this.options.rotation-90)}_getCircumference(){return Mo(this.options.circumference)}_getRotationExtents(){let e=yn,t=-yn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(bie(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:p}=ise(h,u,l),m=(i.width-o)/d,v=(i.height-o)/f,y=Math.max(Math.min(m,v)/2,0),w=qB(this.options.radius,y),_=Math.max(w*l,0),R=(w-_)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=p*w,r.total=this.calculateTotal(),this.outerRadius=w-R*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-R*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/yn)}updateElements(e,t,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&c.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(t,r);let v=this._getRotation(),y;for(y=0;y<t;++y)v+=this._circumference(y,s);for(y=t;y<t+i;++y){const w=this._circumference(y,s),_=e[y],R={x:u+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+w,circumference:w,outerRadius:g,innerRadius:f};m&&(R.options=p||this.resolveDataElementOptions(y,_.active?"active":r)),v+=w,this.updateElement(_,y,R,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,r;for(r=0;r<t.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?yn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=eb(t._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(et(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Xh.id="doughnut",Xh.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Xh.descriptors={_scriptable:n=>n!=="spacing",_indexable:n=>n!=="spacing"&&!n.startsWith("borderDash")&&!n.startsWith("hoverBorderDash")},Xh.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:i}}=n.legend.options;return e.labels.map((r,s)=>{const a=n.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(s),index:s}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}}};class j0 extends Ls{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=cV(t,r,o);this._drawStart=a,this._drawCount=l,uV(t)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r),d=o.axis,f=a.axis,{spanGaps:g,segment:p}=this.options,m=cg(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||r==="none",y=t+i,w=e.length;let _=t>0&&this.getParsed(t-1);for(let R=0;R<w;++R){const E=e[R],x=v?E:{};if(R<t||R>=y){x.skip=!0;continue}const P=this.getParsed(R),T=Nt(P[f]),I=x[d]=o.getPixelForValue(P[d],R),N=x[f]=s||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,P,l):P[f],R);x.skip=isNaN(I)||isNaN(N)||T,x.stop=R>0&&Math.abs(P[d]-_[d])>m,p&&(x.parsed=P,x.raw=c.data[R]),h&&(x.options=u||this.resolveDataElementOptions(R,E.active?"active":r)),v||this.updateElement(E,R,x,r),_=P}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}j0.id="line",j0.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},j0.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class sb extends Ls{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=eb(t._parsed[e].r,i.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,i,r){return EV.bind(this)(e,t,i,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,i,r){const s=r==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*wn;let f=d,g;const p=360/this.countVisibleElements();for(g=0;g<t;++g)f+=this._computeAngle(g,r,p);for(g=t;g<t+i;g++){const m=e[g];let v=f,y=f+this._computeAngle(g,r,p),w=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=y,s&&(l.animateScale&&(w=0),l.animateRotate&&(v=y=d));const _={x:u,y:h,innerRadius:0,outerRadius:w,startAngle:v,endAngle:y,options:this.resolveDataElementOptions(g,m.active?"active":r)};this.updateElement(m,g,_,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?Mo(this.resolveDataElementOptions(e,t).angle||i):0}}sb.id="polarArea",sb.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},sb.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:i}}=n.legend.options;return e.labels.map((r,s)=>{const a=n.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(s),index:s}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class qT extends Xh{}qT.id="pie",qT.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class z0 extends Ls{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,r){return EV.bind(this)(e,t,i,r)}update(e){const t=this._cachedMeta,i=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(i.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=t;a<t+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":r),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:u.x,d=o?s.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,f,r)}}}z0.id="radar",z0.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},z0.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class U0 extends Ls{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=t,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:o}=cV(t,i,r);if(this._drawStart=s,this._drawCount=o,uV(t)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(t,r),h=this.getSharedOptions(u),d=this.includeOptions(r,h),f=o.axis,g=a.axis,{spanGaps:p,segment:m}=this.options,v=cg(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||r==="none";let w=t>0&&this.getParsed(t-1);for(let _=t;_<t+i;++_){const R=e[_],E=this.getParsed(_),x=y?R:{},P=Nt(E[g]),T=x[f]=o.getPixelForValue(E[f],_),I=x[g]=s||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[g],_);x.skip=isNaN(T)||isNaN(I)||P,x.stop=_>0&&Math.abs(E[f]-w[f])>v,m&&(x.parsed=E,x.raw=c.data[_]),d&&(x.options=h||this.resolveDataElementOptions(_,R.active?"active":r)),y||this.updateElement(R,_,x,r),w=E}this.updateSharedOptions(h,r,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,o)/2}}U0.id="scatter",U0.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},U0.overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};var rse=Object.freeze({__proto__:null,BarController:V0,BubbleController:W0,DoughnutController:Xh,LineController:j0,PieController:qT,PolarAreaController:sb,RadarController:z0,ScatterController:U0});function Zh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class XT{static override(e){Object.assign(XT.prototype,e)}constructor(e){this.options=void 0,this.options=e||{}}init(){}formats(){return Zh()}parse(){return Zh()}format(){return Zh()}add(){return Zh()}diff(){return Zh()}startOf(){return Zh()}endOf(){return Zh()}}var sse={_date:XT};function ose(n,e,t,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?Aie:jl;if(i){if(r._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(s,e,t-u),d=l(s,e,t+u);return{lo:h.lo,hi:d.hi}}}}else return l(s,e,t)}return{lo:0,hi:s.length-1}}function ob(n,e,t,i,r){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=ose(s[a],e,o,r);for(let f=h;f<=d;++f){const g=u[f];g.skip||i(g,c,f)}}}function ase(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function ZT(n,e,t,i,r){const s=[];return!r&&!n.isPointInArea(e)||ob(n,t,e,function(a,l,c){!r&&!zl(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function lse(n,e,t,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=iV(o,{x:e.x,y:e.y});Qm(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return ob(n,t,e,s),r}function cse(n,e,t,i,r,s){let o=[];const a=ase(t);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,r);if(i&&!f)return;const g=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(g))&&!f)return;const m=a(e,g);m<l?(o=[{element:u,datasetIndex:h,index:d}],l=m):m===l&&o.push({element:u,datasetIndex:h,index:d})}return ob(n,t,e,c),o}function QT(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?lse(n,e,t,r):cse(n,e,t,i,r,s)}function qV(n,e,t,i,r){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return ob(n,t,e,(l,c,u)=>{l[o]&&l[o](e[t],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var use={evaluateInteractionItems:ob,modes:{index(n,e,t,i){const r=Kh(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?ZT(n,r,s,i,o):QT(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const r=Kh(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?ZT(n,r,s,i,o):QT(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,i){const r=Kh(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return ZT(n,r,s,i,o)},nearest(n,e,t,i){const r=Kh(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return QT(n,r,s,t.intersect,i,o)},x(n,e,t,i){const r=Kh(e,n);return qV(n,r,"x",t.intersect,i)},y(n,e,t,i){const r=Kh(e,n);return qV(n,r,"y",t.intersect,i)}}};const XV=["left","top","right","bottom"];function ab(n,e){return n.filter(t=>t.pos===e)}function ZV(n,e){return n.filter(t=>XV.indexOf(t.pos)===-1&&t.box.axis===e)}function lb(n,e){return n.sort((t,i)=>{const r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function hse(n){const e=[];let t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function dse(n){const e={};for(const t of n){const{stack:i,pos:r,stackWeight:s}=t;if(!i||!XV.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function fse(n,e){const t=dse(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return t}function gse(n){const e=hse(n),t=lb(e.filter(c=>c.box.fullSize),!0),i=lb(ab(e,"left"),!0),r=lb(ab(e,"right")),s=lb(ab(e,"top"),!0),o=lb(ab(e,"bottom")),a=ZV(e,"x"),l=ZV(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:ab(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function QV(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function JV(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function pse(n,e,t,i){const{pos:r,box:s}=t,o=n.maxPadding;if(!_t(r)){t.size&&(n[r]-=t.size);const h=i[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,n[r]+=t.size}s.getPadding&&JV(o,s.getPadding());const a=Math.max(0,e.outerWidth-QV(o,n,"left","right")),l=Math.max(0,e.outerHeight-QV(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function mse(n){const e=n.maxPadding;function t(i){const r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function bse(n,e){const t=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function cb(n,e,t,i){const r=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,bse(a.horizontal,e));const{same:h,other:d}=pse(e,t,a,i);c|=h&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&cb(r,e,t,i)||u}function G0(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function eW(n,e,t,i){const r=t.padding;let{x:s,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;Xm(c.start)&&(o=c.start),l.fullSize?G0(l,r.left,o,t.outerWidth-r.right-r.left,d):G0(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;Xm(c.start)&&(s=c.start),l.fullSize?G0(l,s,r.top,d,t.outerHeight-r.bottom-r.top):G0(l,s,e.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var nr={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const r=tr(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=gse(n.boxes),l=a.vertical,c=a.horizontal;Xt(n.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);JV(d,tr(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),g=fse(l.concat(c),h);cb(a.fullSize,f,h,g),cb(l,f,h,g),cb(c,f,h,g)&&cb(l,f,h,g),mse(f),eW(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,eW(a.rightAndBottom,f,h,g),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Xt(a.chartArea,p=>{const m=p.box;Object.assign(m,n.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class tW{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class vse extends tW{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Y0="$chartjs",wse={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},nW=n=>n===null||n==="";function yse(n,e){const t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Y0]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",nW(r)){const s=MV(n,"width");s!==void 0&&(n.width=s)}if(nW(i))if(n.style.height==="")n.height=n.width/(e||2);else{const s=MV(n,"height");s!==void 0&&(n.height=s)}return n}const iW=Sre?{passive:!0}:!1;function Cse(n,e,t){n&&n.addEventListener(e,t,iW)}function Sse(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,iW)}function _se(n,e){const t=wse[n.type]||n.type,{x:i,y:r}=Kh(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function K0(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function Rse(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||K0(a.addedNodes,i),o=o&&!K0(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function Ese(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||K0(a.removedNodes,i),o=o&&!K0(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const ub=new Map;let rW=0;function sW(){const n=window.devicePixelRatio;n!==rW&&(rW=n,ub.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function xse(n,e){ub.size||window.addEventListener("resize",sW),ub.set(n,e)}function Tse(n){ub.delete(n),ub.size||window.removeEventListener("resize",sW)}function Mse(n,e,t){const i=n.canvas,r=i&&zT(i);if(!r)return;const s=lV((a,l)=>{const c=r.clientWidth;t(a,l),c<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),xse(n,s),o}function JT(n,e,t){t&&t.disconnect(),e==="resize"&&Tse(n)}function Ase(n,e,t){const i=n.canvas,r=lV(s=>{n.ctx!==null&&t(_se(s,n))},n);return Cse(i,e,r),r}class Pse extends tW{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(yse(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Y0])return!1;const i=t[Y0].initial;["height","width"].forEach(s=>{const o=i[s];Nt(o)?t.removeAttribute(s):t.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[Y0],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),o={attach:Rse,detach:Ese,resize:Mse}[t]||Ase;r[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:JT,detach:JT,resize:JT}[t]||Sse)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return Cre(e,t,i,r)}isAttached(e){const t=e&&zT(e);return!!(t&&t.isConnected)}}function Ise(n){return!jT()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?vse:Pse}class Hs{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return cg(this.x)&&cg(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}Hs.defaults={},Hs.defaultRoutes=void 0;function Ose(n,e){const t=n.options.ticks,i=kse(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?Nse(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return Lse(e,c,s,o/r),c;const u=Dse(s,e,r);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(q0(e,c,u,Nt(f)?0:a-f,a),h=0,d=o-1;h<d;h++)q0(e,c,u,s[h],s[h+1]);return q0(e,c,u,l,Nt(f)?e.length:l+f),c}return q0(e,c,u),c}function kse(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function Dse(n,e,t){const i=Hse(n),r=e.length/t;if(!i)return Math.max(r,1);const s=Eie(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function Nse(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function Lse(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function q0(n,e,t,i,r){const s=et(i,0),o=Math.min(et(r,n.length),n.length);let a=0,l,c,u;for(t=Math.ceil(t),r&&(l=r-i,t=l/Math.floor(l/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(s+a*t))}function Hse(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const $se=n=>n==="left"?"right":n==="right"?"left":n,oW=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,aW=(n,e)=>Math.min(e||n,n);function lW(n,e){const t=[],i=n.length/e,r=n.length;let s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function Fse(n,e,t){const i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(r),c;if(!(t&&(i===1?c=Math.max(l-s,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function Bse(n,e){Xt(n,t=>{const i=t.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function hb(n){return n.drawTicks?n.tickLength:0}function cW(n,e){if(!n.display)return 0;const t=mi(n.font,e),i=tr(n.padding);return(Mn(n.text)?n.text.length:1)*t.lineHeight+i.height}function Vse(n,e){return cu(n,{scale:e,type:"scale"})}function Wse(n,e,t){return cu(n,{tick:t,index:e,type:"tick"})}function jse(n,e,t){let i=DT(n);return(t&&e!=="right"||!t&&e==="right")&&(i=$se(i)),i}function zse(n,e,t,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let h=0,d,f,g;const p=o-r,m=a-s;if(n.isHorizontal()){if(f=er(i,s,a),_t(t)){const v=Object.keys(t)[0],y=t[v];g=u[v].getPixelForValue(y)+p-e}else t==="center"?g=(c.bottom+c.top)/2+p-e:g=oW(n,t,e);d=a-s}else{if(_t(t)){const v=Object.keys(t)[0],y=t[v];f=u[v].getPixelForValue(y)-m+e}else t==="center"?f=(c.left+c.right)/2-m+e:f=oW(n,t,e);g=er(i,o,r),h=t==="left"?-ii:ii}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class uu extends Hs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=ls(e,Number.POSITIVE_INFINITY),t=ls(t,Number.NEGATIVE_INFINITY),i=ls(i,Number.POSITIVE_INFINITY),r=ls(r,Number.NEGATIVE_INFINITY),{min:ls(e,i),max:ls(t,r),minDefined:Xn(e),maxDefined:Xn(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:ls(t,ls(i,t)),max:ls(i,ls(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){bn(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Jie(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?lW(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Ose(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){bn(this.options.afterUpdate,[this])}beforeSetDimensions(){bn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){bn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),bn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){bn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=bn(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){bn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){bn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=aW(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=Oi(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-hb(e.grid)-t.padding-cW(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=IT(Math.min(Math.asin(Oi((u.highest.height+6)/a,-1,1)),Math.asin(Oi(l/c,-1,1))-Math.asin(Oi(d/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){bn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){bn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=cW(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=hb(s)+l):(e.height=this.maxHeight,e.width=hb(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,g=Mo(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const v=i.mirror?0:m*h.width+p*d.height;e.height=Math.min(this.maxHeight,e.height+v+f)}else{const v=i.mirror?0:p*h.width+m*d.height;e.width=Math.min(this.maxWidth,e.width+v+f)}this._calculatePadding(c,u,m,p)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=r*e.width,f=i*t.height):(d=i*e.height,f=r*t.width):s==="start"?f=t.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=t.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){bn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Nt(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=lW(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/aW(t,i));let c=0,u=0,h,d,f,g,p,m,v,y,w,_,R;for(h=0;h<t;h+=l){if(g=e[h].label,p=this._resolveTickFontOptions(h),r.font=m=p.string,v=s[m]=s[m]||{data:{},gc:[]},y=p.lineHeight,w=_=0,!Nt(g)&&!Mn(g))w=N0(r,v.data,v.gc,w,g),_=y;else if(Mn(g))for(d=0,f=g.length;d<f;++d)R=g[d],!Nt(R)&&!Mn(R)&&(w=N0(r,v.data,v.gc,w,R),_+=y);o.push(w),a.push(_),c=Math.max(w,c),u=Math.max(_,u)}Bse(s,t);const E=o.indexOf(c),x=a.indexOf(u),P=T=>({width:o[T]||0,height:a[T]||0});return{first:P(0),last:P(t-1),widest:P(E),highest:P(x),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Mie(this._alignToPixels?Wh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=Wse(this.getContext(),e,i))}return this.$context||(this.$context=Vse(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Mo(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=hb(s),f=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,v=function(k){return Wh(i,k,p)};let y,w,_,R,E,x,P,T,I,N,W,j;if(o==="top")y=v(this.bottom),x=this.bottom-d,T=y-m,N=v(e.top)+m,j=e.bottom;else if(o==="bottom")y=v(this.top),N=e.top,j=v(e.bottom)-m,x=y+m,T=this.top+d;else if(o==="left")y=v(this.right),E=this.right-d,P=y-m,I=v(e.left)+m,W=e.right;else if(o==="right")y=v(this.left),I=e.left,W=v(e.right)-m,E=y+m,P=this.left+d;else if(t==="x"){if(o==="center")y=v((e.top+e.bottom)/2+.5);else if(_t(o)){const k=Object.keys(o)[0],B=o[k];y=v(this.chart.scales[k].getPixelForValue(B))}N=e.top,j=e.bottom,x=y+m,T=x+d}else if(t==="y"){if(o==="center")y=v((e.left+e.right)/2);else if(_t(o)){const k=Object.keys(o)[0],B=o[k];y=v(this.chart.scales[k].getPixelForValue(B))}E=y-m,P=E-d,I=e.left,W=e.right}const K=et(r.ticks.maxTicksLimit,h),H=Math.max(1,Math.ceil(h/K));for(w=0;w<h;w+=H){const k=this.getContext(w),B=s.setContext(k),G=a.setContext(k),z=B.lineWidth,se=B.color,b=G.dash||[],C=G.dashOffset,S=B.tickWidth,A=B.tickColor,L=B.tickBorderDash||[],M=B.tickBorderDashOffset;_=Fse(this,w,l),_!==void 0&&(R=Wh(i,_,z),c?E=P=I=W=R:x=T=N=j=R,f.push({tx1:E,ty1:x,tx2:P,ty2:T,x1:I,y1:N,x2:W,y2:j,width:z,color:se,borderDash:b,borderDashOffset:C,tickWidth:S,tickColor:A,tickBorderDash:L,tickBorderDashOffset:M}))}return this._ticksLength=h,this._borderValue=y,f}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=hb(i.grid),f=d+u,g=h?-u:f,p=-Mo(this.labelRotation),m=[];let v,y,w,_,R,E,x,P,T,I,N,W,j="middle";if(r==="top")E=this.bottom-g,x=this._getXAxisLabelAlignment();else if(r==="bottom")E=this.top+g,x=this._getXAxisLabelAlignment();else if(r==="left"){const H=this._getYAxisLabelAlignment(d);x=H.textAlign,R=H.x}else if(r==="right"){const H=this._getYAxisLabelAlignment(d);x=H.textAlign,R=H.x}else if(t==="x"){if(r==="center")E=(e.top+e.bottom)/2+f;else if(_t(r)){const H=Object.keys(r)[0],k=r[H];E=this.chart.scales[H].getPixelForValue(k)+f}x=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")R=(e.left+e.right)/2-f;else if(_t(r)){const H=Object.keys(r)[0],k=r[H];R=this.chart.scales[H].getPixelForValue(k)}x=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));const K=this._getLabelSizes();for(v=0,y=a.length;v<y;++v){w=a[v],_=w.label;const H=s.setContext(this.getContext(v));P=this.getPixelForTick(v)+s.labelOffset,T=this._resolveTickFontOptions(v),I=T.lineHeight,N=Mn(_)?_.length:1;const k=N/2,B=H.color,G=H.textStrokeColor,z=H.textStrokeWidth;let se=x;o?(R=P,x==="inner"&&(v===y-1?se=this.options.reverse?"left":"right":v===0?se=this.options.reverse?"right":"left":se="center"),r==="top"?c==="near"||p!==0?W=-N*I+I/2:c==="center"?W=-K.highest.height/2-k*I+I:W=-K.highest.height+I/2:c==="near"||p!==0?W=I/2:c==="center"?W=K.highest.height/2-k*I:W=K.highest.height-N*I,h&&(W*=-1),p!==0&&!H.showLabelBackdrop&&(R+=I/2*Math.sin(p))):(E=P,W=(1-N)*I/2);let b;if(H.showLabelBackdrop){const C=tr(H.backdropPadding),S=K.heights[v],A=K.widths[v];let L=W-C.top,M=0-C.left;switch(j){case"middle":L-=S/2;break;case"bottom":L-=S;break}switch(x){case"center":M-=A/2;break;case"right":M-=A;break;case"inner":v===y-1?M-=A:v>0&&(M-=A/2);break}b={left:M,top:L,width:A+C.width,height:S+C.height,color:H.backdropColor}}m.push({label:_,font:T,textOffset:W,options:{rotation:p,color:B,strokeColor:G,strokeWidth:z,textAlign:se,textBaseline:j,translation:[R,E],backdrop:b}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Mo(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return t==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){const l=r[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=Wh(e,this.left,o)-o/2,u=Wh(e,this.right,a)+a/2,h=d=l):(h=Wh(e,this.top,o)-o/2,d=Wh(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,h),t.lineTo(u,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&jh(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Uh(i,c,0,u,l,a)}r&&zh(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const s=mi(i.font),o=tr(i.padding),a=i.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||_t(t)?(l+=o.bottom,Mn(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=zse(this,l,t,a);Uh(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:d,textAlign:jse(a,t,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=et(e.grid&&e.grid.z,-1),r=et(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==uu.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return mi(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class X0{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;Yse(t)&&(i=this.register(t));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,Use(e,o,i),this.override&&An.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in An[r]&&(delete An[r][i],this.override&&delete Vh[i])}}function Use(n,e,t){const i=cs(Object.create(null),[t?An.get(t):{},An.get(e),n.defaults]);An.set(e,i),n.defaultRoutes&&Gse(e,n.defaultRoutes),n.descriptors&&An.describe(e,n.descriptors)}function Gse(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");An.route(s,r,l,a)})}function Yse(n){return"id"in n&&"defaults"in n}class Kse{constructor(){this.controllers=new X0(Ls,"datasets",!0),this.elements=new X0(Hs,"elements"),this.plugins=new X0(Object,"plugins"),this.scales=new X0(uu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Xt(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const r=PT(e);bn(i["before"+r],[],i),t[e](i),bn(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Sr=new Kse;class qse{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[t,r,s.options];if(bn(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Nt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=et(i.options&&i.options.plugins,{}),s=Xse(i);return r===!1&&!t?[]:Qse(e,s,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function Xse(n){const e={},t=[],i=Object.keys(Sr.plugins.items);for(let s=0;s<i.length;s++)t.push(Sr.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function Zse(n,e){return!e&&n===!1?null:n===!0?{}:n}function Qse(n,{plugins:e,localIds:t},i,r){const s=[],o=n.getContext();for(const a of e){const l=a.id,c=Zse(i[l],r);c!==null&&s.push({plugin:a,options:Jse(n.config,{plugin:a,local:t[l]},c,o)})}return s}function Jse(n,{plugin:e,local:t},i,r){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function eM(n,e){const t=An.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function eoe(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function toe(n,e){return n===e?"_index_":"_value_"}function uW(n){if(n==="x"||n==="y"||n==="r")return n}function noe(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function tM(n,...e){if(uW(n))return n;for(const t of e){const i=t.axis||noe(t.position)||n.length>1&&uW(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function hW(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function ioe(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return hW(n,"x",t[0])||hW(n,"y",t[0])}return{}}function roe(n,e){const t=Vh[n.type]||{scales:{}},i=e.scales||{},r=eM(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!_t(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=tM(o,a,ioe(o,n),An.scales[a.type]),c=toe(l,r),u=t.scales||{};s[o]=qm(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||eM(a,e),u=(Vh[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=eoe(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),qm(s[f],[{axis:d},i[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];qm(a,[An.scales[a.type],An.scale])}),s}function dW(n){const e=n.options||(n.options={});e.plugins=et(e.plugins,{}),e.scales=roe(n,e)}function fW(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function soe(n){return n=n||{},n.data=fW(n.data),dW(n),n}const gW=new Map,pW=new Set;function Z0(n,e){let t=gW.get(n);return t||(t=e(),gW.set(n,t),pW.add(t)),t}const db=(n,e,t)=>{const i=ou(e,t);i!==void 0&&n.add(i)};class ooe{constructor(e){this._config=soe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=fW(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),dW(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Z0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Z0(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Z0(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Z0(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(h=>db(l,e,h))),u.forEach(h=>db(l,r,h)),u.forEach(h=>db(l,Vh[s]||{},h)),u.forEach(h=>db(l,An,h)),u.forEach(h=>db(l,HT,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),pW.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Vh[t]||{},An.datasets[t]||{},{type:t},An,HT]}resolveNamedOptions(e,t,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=mW(this._resolverCache,e,r);let l=o;if(loe(o,t)){s.$shared=!1,i=au(i)?i():i;const c=this.createResolver(e,i,a);l=ug(o,i,c)}for(const c of t)s[c]=l[c];return s}createResolver(e,t,i=[""],r){const{resolver:s}=mW(this._resolverCache,e,i);return _t(t)?ug(s,t,void 0,r):s}}function mW(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const r=t.join();let s=i.get(r);return s||(s={resolver:BT(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const aoe=n=>_t(n)&&Object.getOwnPropertyNames(n).some(e=>au(n[e]));function loe(n,e){const{isScriptable:t,isIndexable:i}=wV(n);for(const r of e){const s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(au(a)||aoe(a))||o&&Mn(a))return!0}return!1}var coe="4.4.6";const uoe=["top","bottom","left","right","chartArea"];function bW(n,e){return n==="top"||n==="bottom"||uoe.indexOf(n)===-1&&e==="x"}function vW(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function wW(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),bn(t&&t.onComplete,[n],e)}function hoe(n){const e=n.chart,t=e.options.animation;bn(t&&t.onProgress,[n],e)}function yW(n){return jT()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Q0={},CW=n=>{const e=yW(n);return Object.values(Q0).filter(t=>t.canvas===e).pop()};function doe(n,e,t){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=e){const o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function foe(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function J0(n,e,t){return n.options.clip?n[t]:e[t]}function goe(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:J0(t,e,"left"),right:J0(t,e,"right"),top:J0(i,e,"top"),bottom:J0(i,e,"bottom")}:e}class hs{static register(...e){Sr.add(...e),SW()}static unregister(...e){Sr.remove(...e),SW()}constructor(e,t){const i=this.config=new ooe(t),r=yW(e),s=CW(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Ise(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=mie(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qse,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Oie(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Q0[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ul.listen(this,"complete",wW),Ul.listen(this,"progress",hoe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:s}=this;return Nt(e)?t&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Sr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():TV(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return mV(this.canvas,this.ctx),this}stop(){return Ul.stop(this),this}resize(e,t){Ul.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,TV(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),bn(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Xt(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=tM(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Xt(s,o=>{const a=o.options,l=a.id,c=tM(l,a),u=et(a.type,o.dtype);(a.position===void 0||bW(a.position,c)!==bW(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=Sr.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),Xt(r,(o,a)=>{o||delete i[a]}),Xt(i,o=>{nr.configure(this,o,o.options),nr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(vW("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const s=t[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||eM(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Sr.getController(a),{datasetElementType:c,dataElementType:u}=An.datasets[a];Object.assign(l,{dataElementType:Sr.getElement(u),datasetElementType:c&&Sr.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Xt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Xt(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(vW("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Xt(this.scales,e=>{nr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!QB(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of t){const o=i==="_removeElements"?-s:s;doe(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<t;s++)if(!QB(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;nr.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Xt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,au(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ul.has(this)?this.attached&&!Ul.running(this)&&Ul.start(this):(this.draw(),wW({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,s;for(r=0,s=t.length;r<s;++r){const o=t[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,r=!i.disabled,s=goe(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&jh(t,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&zh(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return zl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const s=use.modes[t];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=cu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Xm(t)?(s.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ul.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),mV(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Q0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Xt(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){Xt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Xt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!P0(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(t,e),a=i?e:s(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:s}=this,o=t,a=this._getActiveElements(e,r,i,o),l=Sie(e),c=foe(e,this._lastEvent,i,l);i&&(this._lastEvent=null,bn(s.onHover,[e,a,this],this),l&&bn(s.onClick,[e,a,this],this));const u=!P0(a,r);return(u||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}hs.defaults=An,hs.instances=Q0,hs.overrides=Vh,hs.registry=Sr,hs.version=coe,hs.getChart=CW;function SW(){return Xt(hs.instances,n=>n._plugins.invalidate())}function poe(n,e,t){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;n.beginPath(),n.arc(s,o,a,i-c,t+c),l>r?(c=r/l,n.arc(s,o,l,t+c,i-c,!0)):n.arc(s,o,r,t+ii,i-ii),n.closePath(),n.clip()}function moe(n){return FT(n,["outerStart","outerEnd","innerStart","innerEnd"])}function boe(n,e,t,i){const r=moe(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(t-Math.min(s,l))*i/2;return Oi(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Oi(r.innerStart,0,o),innerEnd:Oi(r.innerEnd,0,o)}}function fg(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function eC(n,e,t,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+t-c,0),d=u>0?u+i+t+c:0;let f=0;const g=r-l;if(i){const H=u>0?u-i:0,k=h>0?h-i:0,B=(H+k)/2,G=B!==0?g*B/(B+i):g;f=(g-G)/2}const p=Math.max(.001,g*h-t/wn)/h,m=(g-p)/2,v=l+m+f,y=r-m-f,{outerStart:w,outerEnd:_,innerStart:R,innerEnd:E}=boe(e,d,h,y-v),x=h-w,P=h-_,T=v+w/x,I=y-_/P,N=d+R,W=d+E,j=v+R/N,K=y-E/W;if(n.beginPath(),s){const H=(T+I)/2;if(n.arc(o,a,h,T,H),n.arc(o,a,h,H,I),_>0){const z=fg(P,I,o,a);n.arc(z.x,z.y,_,I,y+ii)}const k=fg(W,y,o,a);if(n.lineTo(k.x,k.y),E>0){const z=fg(W,K,o,a);n.arc(z.x,z.y,E,y+ii,K+Math.PI)}const B=(y-E/d+(v+R/d))/2;if(n.arc(o,a,d,y-E/d,B,!0),n.arc(o,a,d,B,v+R/d,!0),R>0){const z=fg(N,j,o,a);n.arc(z.x,z.y,R,j+Math.PI,v-ii)}const G=fg(x,v,o,a);if(n.lineTo(G.x,G.y),w>0){const z=fg(x,T,o,a);n.arc(z.x,z.y,w,v-ii,T)}}else{n.moveTo(o,a);const H=Math.cos(T)*h+o,k=Math.sin(T)*h+a;n.lineTo(H,k);const B=Math.cos(I)*h+o,G=Math.sin(I)*h+a;n.lineTo(B,G)}n.closePath()}function voe(n,e,t,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){eC(n,e,t,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%yn||yn))}return eC(n,e,t,i,l,r),n.fill(),l}function woe(n,e,t,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;n.setLineDash(h||[]),n.lineDashOffset=d,f?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let g=e.endAngle;if(s){eC(n,e,t,i,g,r);for(let p=0;p<s;++p)n.stroke();isNaN(a)||(g=o+(a%yn||yn))}f&&poe(n,e,g),s||(eC(n,e,t,i,g,r),n.stroke())}class fb extends Hs{constructor(e){super(),this.circumference=void 0,this.endAngle=void 0,this.fullCircles=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=void 0,this.startAngle=void 0,this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.getProps(["x","y"],i),{angle:s,distance:o}=iV(r,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,f=et(h,l-a),g=Qm(s,a,l)&&a!==l,p=f>=yn||g,m=Wl(o,c+d,u+d);return p&&m}getCenterPoint(e){const{x:t,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(r+s)/2,h=(o+a+c+l)/2;return{x:t+Math.cos(u)*h,y:i+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>yn?Math.floor(i/yn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const l=1-Math.sin(Math.min(wn,i||0)),c=r*l;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,voe(e,this,c,s,o),woe(e,this,c,s,o),e.restore()}}fb.id="arc",fb.defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},fb.defaultRoutes={backgroundColor:"backgroundColor"},fb.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"};function _W(n,e,t=e){n.lineCap=et(t.borderCapStyle,e.borderCapStyle),n.setLineDash(et(t.borderDash,e.borderDash)),n.lineDashOffset=et(t.borderDashOffset,e.borderDashOffset),n.lineJoin=et(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=et(t.borderWidth,e.borderWidth),n.strokeStyle=et(t.borderColor,e.borderColor)}function yoe(n,e,t){n.lineTo(t.x,t.y)}function Coe(n){return n.stepped?zie:n.tension||n.cubicInterpolationMode==="monotone"?Uie:yoe}function RW(n,e,t={}){const i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function Soe(n,e,t,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=RW(r,t,i),u=Coe(s);let{move:h=!0,reverse:d}=i||{},f,g,p;for(f=0;f<=c;++f)g=r[(a+(d?c-f:f))%o],!g.skip&&(h?(n.moveTo(g.x,g.y),h=!1):u(n,p,g,d,s.stepped),p=g);return l&&(g=r[(a+(d?c:0))%o],u(n,p,g,d,s.stepped)),!!l}function _oe(n,e,t,i){const r=e.points,{count:s,start:o,ilen:a}=RW(r,t,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,g,p,m,v;const y=_=>(o+(c?a-_:_))%s,w=()=>{p!==m&&(n.lineTo(u,m),n.lineTo(u,p),n.lineTo(u,v))};for(l&&(f=r[y(0)],n.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=r[y(d)],f.skip)continue;const _=f.x,R=f.y,E=_|0;E===g?(R<p?p=R:R>m&&(m=R),u=(h*u+_)/++h):(w(),n.lineTo(_,R),g=E,h=0,p=m=R),v=R}w()}function nM(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?_oe:Soe}function Roe(n){return n.stepped?_re:n.tension||n.cubicInterpolationMode==="monotone"?Rre:qh}function Eoe(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),_W(n,e.options),n.stroke(r)}function xoe(n,e,t,i){const{segments:r,options:s}=e,o=nM(e);for(const a of r)_W(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const Toe=typeof Path2D=="function";function Moe(n,e,t,i){Toe&&!e.options.segment?Eoe(n,e,t,i):xoe(n,e,t,i)}class hu extends Hs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;pre(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Pre(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],s=this.points,o=DV(this,{property:t,start:r,end:r});if(!o.length)return;const a=[],l=Roe(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=s[h],g=s[d];if(f===g){a.push(f);continue}const p=Math.abs((r-f[t])/(g[t]-f[t])),m=l(f,g,p,i.stepped);m[t]=e[t],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,t,i){return nM(this)(e,this,t,i)}path(e,t,i){const r=this.segments,s=nM(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of r)o&=s(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Moe(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}hu.id="line",hu.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},hu.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},hu.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"&&n!=="fill"};function EW(n,e,t,i){const r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}class gb extends Hs{constructor(e){super(),this.parsed=void 0,this.skip=void 0,this.stop=void 0,this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(e-s,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return EW(this,e,"x",t)}inYRange(e,t){return EW(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!zl(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,L0(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}gb.id="point",gb.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},gb.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function xW(n,e){const{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return n.horizontal?(h=o/2,a=Math.min(t,r),l=Math.max(t,r),c=i-h,u=i+h):(h=s/2,a=t-h,l=t+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function du(n,e,t,i){return n?0:Oi(e,t,i)}function Aoe(n,e,t){const i=n.options.borderWidth,r=n.borderSkipped,s=vV(i);return{t:du(r.top,s.top,0,t),r:du(r.right,s.right,0,e),b:du(r.bottom,s.bottom,0,t),l:du(r.left,s.left,0,e)}}function Poe(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Gh(r),o=Math.min(e,t),a=n.borderSkipped,l=i||_t(r);return{topLeft:du(!l||a.top||a.left,s.topLeft,0,o),topRight:du(!l||a.top||a.right,s.topRight,0,o),bottomLeft:du(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:du(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Ioe(n){const e=xW(n),t=e.right-e.left,i=e.bottom-e.top,r=Aoe(n,t/2,i/2),s=Poe(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function iM(n,e,t,i){const r=e===null,s=t===null,a=n&&!(r&&s)&&xW(n,i);return a&&(r||Wl(e,a.left,a.right))&&(s||Wl(t,a.top,a.bottom))}function Ooe(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function koe(n,e){n.rect(e.x,e.y,e.w,e.h)}function rM(n,e,t={}){const i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}class gg extends Hs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=Ioe(this),a=Ooe(o.radius)?nb:koe;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,rM(o,t,s)),e.clip(),a(e,rM(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,rM(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return iM(this,e,t,i)}inXRange(e,t){return iM(this,e,null,t)}inYRange(e,t){return iM(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}gg.id="bar",gg.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},gg.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Doe=Object.freeze({__proto__:null,ArcElement:fb,BarElement:gg,LineElement:hu,PointElement:gb});const sM=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],TW=sM.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function MW(n){return sM[n%sM.length]}function AW(n){return TW[n%TW.length]}function Noe(n,e){return n.borderColor=MW(e),n.backgroundColor=AW(e),++e}function Loe(n,e){return n.backgroundColor=n.data.map(()=>MW(e++)),e}function Hoe(n,e){return n.backgroundColor=n.data.map(()=>AW(e++)),e}function $oe(n){let e=0;return(t,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof Xh?e=Loe(t,e):r instanceof sb?e=Hoe(t,e):r&&(e=Noe(t,e))}}function PW(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function Foe(n){return n&&(n.borderColor||n.backgroundColor)}function Boe(){return An.borderColor!=="rgba(0,0,0,0.1)"||An.backgroundColor!=="rgba(0,0,0,0.1)"}var Voe={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:s}=r,o=PW(i)||Foe(r)||s&&PW(s)||Boe();if(!t.forceOverride&&o)return;const a=$oe(n);i.forEach(a)}};function Woe(n,e,t,i,r){const s=r.samples||i;if(s>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(s-2);let l=0;const c=e+t-1;let u=e,h,d,f,g,p;for(o[l++]=n[u],h=0;h<s-2;h++){let m=0,v=0,y;const w=Math.floor((h+1)*a)+1+e,_=Math.min(Math.floor((h+2)*a)+1,t)+e,R=_-w;for(y=w;y<_;y++)m+=n[y].x,v+=n[y].y;m/=R,v/=R;const E=Math.floor(h*a)+1+e,x=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:P,y:T}=n[u];for(f=g=-1,y=E;y<x;y++)g=.5*Math.abs((P-m)*(n[y].y-T)-(P-n[y].x)*(v-T)),g>f&&(f=g,d=n[y],p=y);o[l++]=d,u=p}return o[l++]=n[c],o}function joe(n,e,t,i){let r=0,s=0,o,a,l,c,u,h,d,f,g,p;const m=[],v=e+t-1,y=n[e].x,_=n[v].x-y;for(o=e;o<e+t;++o){a=n[o],l=(a.x-y)/_*i,c=a.y;const R=l|0;if(R===u)c<g?(g=c,h=o):c>p&&(p=c,d=o),r=(s*r+a.x)/++s;else{const E=o-1;if(!Nt(h)&&!Nt(d)){const x=Math.min(h,d),P=Math.max(h,d);x!==f&&x!==E&&m.push({...n[x],x:r}),P!==f&&P!==E&&m.push({...n[P],x:r})}o>0&&E!==f&&m.push(n[E]),m.push(a),u=R,s=0,g=p=c,h=d=f=o}}return m}function IW(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function OW(n){n.data.datasets.forEach(e=>{IW(e)})}function zoe(n,e){const t=e.length;let i=0,r;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=Oi(jl(e,s.axis,o).lo,0,t-1)),c?r=Oi(jl(e,s.axis,a).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var Uoe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){OW(n);return}const i=n.width;n.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if(ib([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:h,count:d}=zoe(l,c);const f=t.threshold||4*i;if(d<=f){IW(r);return}Nt(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let g;switch(t.algorithm){case"lttb":g=Woe(c,h,d,i,t);break;case"min-max":g=joe(c,h,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=g})},destroy(n){OW(n)}};function Goe(n,e,t){const i=n.segments,r=n.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=aM(l,c,r);const u=oM(t,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const h=DV(e,u);for(const d of h){const f=oM(t,s[d.start],s[d.end],d.loop),g=kV(a,r,f);for(const p of g)o.push({source:p,target:d,start:{[t]:kW(u,f,"start",Math.max)},end:{[t]:kW(u,f,"end",Math.min)}})}}return o}function oM(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=us(r),s=us(s)),{property:n,start:r,end:s}}function Yoe(n,e){const{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=aM(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:c.y}))}),s}function aM(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function kW(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function DW(n,e){let t=[],i=!1;return Mn(n)?(i=!0,t=n):t=Yoe(n,e),t.length?new hu({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function NW(n){return n&&n.fill!==!1}function Koe(n,e,t){let r=n[e].fill;const s=[e];let o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Xn(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function qoe(n,e,t){const i=Joe(n);if(_t(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Xn(r)&&Math.floor(r)===r?Xoe(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Xoe(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function Zoe(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:_t(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Qoe(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:_t(n)?i=n.value:i=e.getBaseValue(),i}function Joe(n){const e=n.options,t=e.fill;let i=et(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function eae(n){const{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=tae(e,t);a.push(DW({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)nae(r,o[u],a)}return new hu({points:r,options:{}})}function tae(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function nae(n,e,t){const i=[];for(let r=0;r<t.length;r++){const s=t[r],{first:o,last:a,point:l}=iae(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function iae(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const r=i[t],s=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][t],d=o[u.end][t];if(Wl(r,h,d)){a=r===h,l=r===d;break}}return{first:a,last:l,point:i}}class LW{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:r,y:s,radius:o}=this;return t=t||{start:0,end:yn},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function rae(n){const{chart:e,fill:t,line:i}=n;if(Xn(t))return sae(e,t);if(t==="stack")return eae(n);if(t==="shape")return!0;const r=oae(n);return r instanceof LW?r:DW(r,i)}function sae(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function oae(n){return(n.scale||{}).getPointPositionForValue?lae(n):aae(n)}function aae(n){const{scale:e={},fill:t}=n,i=Zoe(t,e);if(Xn(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function lae(n){const{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=Qoe(t,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new LW({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function lM(n,e,t){const i=rae(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&r.points.length&&(jh(n,t),cae(n,{line:r,target:i,above:u,below:h,area:t,scale:s,axis:o}),zh(n))}function cae(n,e){const{line:t,target:i,above:r,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&s!==r&&(HW(n,i,o.top),$W(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore(),n.save(),HW(n,i,o.bottom)),$W(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore()}function HW(n,e,t){const{segments:i,points:r}=e;let s=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,u=r[l],h=r[aM(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function $W(n,e){const{line:t,target:i,property:r,color:s,scale:o}=e,a=Goe(t,i,r);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=s}={}}=l,f=i!==!0;n.save(),n.fillStyle=d,uae(n,o,f&&oM(r,u,h)),n.beginPath();const g=!!t.pathSegment(n,l);let p;if(f){g?n.closePath():FW(n,i,h,r);const m=!!i.pathSegment(n,c,{move:g,reverse:!0});p=g&&m,p||FW(n,i,u,r)}n.closePath(),n.fill(p?"evenodd":"nonzero"),n.restore()}}function uae(n,e,t){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function FW(n,e,t,i){const r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var hae={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof hu&&(l={visible:n.isDatasetVisible(o),index:o,fill:qoe(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=Koe(r,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&lM(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;NW(s)&&lM(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!NW(i)||t.drawTime!=="beforeDatasetDraw"||lM(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const BW=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},dae=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class VW extends Hs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=bn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=mi(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=BW(i,s);let c,u;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((g,p)=>{const m=i+t/2+s.measureText(g.text).width;(p===0||c[c.length-1]+m+2*a>o)&&(h+=u,c[c.length-(p>0?0:1)]=0,f+=u,d++),l[p]={left:0,top:f,row:d,width:m,height:r},c[c.length-1]+=m+a}),h}_fitCols(e,t,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,g=0,p=0;return this.legendItems.forEach((m,v)=>{const{itemWidth:y,itemHeight:w}=fae(i,t,s,m,r);v>0&&f+w+2*a>u&&(h+=d+a,c.push({width:d,height:f}),g+=d+a,p++,d=f=0),l[v]={left:g,top:f,col:p,width:y,height:w},d=Math.max(d,y),f+=w+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=dg(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=er(i,this.left+r,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=er(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=er(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=er(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;jh(e,this),this._draw(),zh(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=An.color,l=dg(e.rtl,this.left,this.width),c=mi(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=BW(o,h),v=function(E,x,P){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;r.save();const T=et(P.lineWidth,1);if(r.fillStyle=et(P.fillStyle,a),r.lineCap=et(P.lineCap,"butt"),r.lineDashOffset=et(P.lineDashOffset,0),r.lineJoin=et(P.lineJoin,"miter"),r.lineWidth=T,r.strokeStyle=et(P.strokeStyle,a),r.setLineDash(et(P.lineDash,[])),o.usePointStyle){const I={radius:p*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:T},N=l.xPlus(E,g/2),W=x+d;bV(r,I,N,W,o.pointStyleWidth&&g)}else{const I=x+Math.max((h-p)/2,0),N=l.leftForLtr(E,g),W=Gh(P.borderRadius);r.beginPath(),Object.values(W).some(j=>j!==0)?nb(r,{x:N,y:I,w:g,h:p,radius:W}):r.rect(N,I,g,p),r.fill(),T!==0&&r.stroke()}r.restore()},y=function(E,x,P){Uh(r,P.text,E,x+m/2,c,{strikethrough:P.hidden,textAlign:l.textAlign(P.textAlign)})},w=this.isHorizontal(),_=this._computeTitleHeight();w?f={x:er(s,this.left+u,this.right-i[0]),y:this.top+u+_,line:0}:f={x:this.left+u,y:er(s,this.top+_+u,this.bottom-t[0].height),line:0},AV(this.ctx,e.textDirection);const R=m+u;this.legendItems.forEach((E,x)=>{r.strokeStyle=E.fontColor,r.fillStyle=E.fontColor;const P=r.measureText(E.text).width,T=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),I=g+d+P;let N=f.x,W=f.y;l.setWidth(this.width),w?x>0&&N+I+u>this.right&&(W=f.y+=R,f.line++,N=f.x=er(s,this.left+u,this.right-i[f.line])):x>0&&W+R>this.bottom&&(N=f.x=N+t[f.line].width+u,f.line++,W=f.y=er(s,this.top+_+u,this.bottom-t[f.line].height));const j=l.x(N);if(v(j,W,E),N=kie(T,N+g+d,w?N+I:this.right,e.rtl),y(l.x(N),W,E),w)f.x+=I+u;else if(typeof E.text!="string"){const K=c.lineHeight;f.y+=WW(E,K)+u}else f.y+=R}),PV(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=mi(t.font),r=tr(t.padding);if(!t.display)return;const s=dg(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=r.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=er(e.align,h,this.right-d);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);u=c+er(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=er(a,h,h+d);o.textAlign=s.textAlign(DT(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Uh(o,t.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,t=mi(e.font),i=tr(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(Wl(e,this.left,this.right)&&Wl(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Wl(e,r.left,r.left+r.width)&&Wl(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!mae(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=dae(r,i);r&&!s&&bn(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&bn(t.onHover,[e,i,this],this)}else i&&bn(t.onClick,[e,i,this],this)}}function fae(n,e,t,i,r){const s=gae(i,n,e,t),o=pae(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function gae(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function pae(n,e,t){let i=n;return typeof e.text!="string"&&(i=WW(e,t)),i}function WW(n,e){const t=n.text?n.text.length:0;return e*t}function mae(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var bae={id:"legend",_element:VW,start(n,e,t){const i=n.legend=new VW({ctx:n.ctx,options:t,chart:n});nr.configure(n,i,t),nr.addBox(n,i)},stop(n){nr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;nr.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=tr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class cM extends Hs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=Mn(i.text)?i.text.length:1;this._padding=tr(i.padding);const s=r*mi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=er(a,i,s),h=t+e,c=s-i):(o.position==="left"?(u=i+e,h=er(a,r,t),l=wn*-.5):(u=s-e,h=er(a,t,r),l=wn*.5),c=r-t),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=mi(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Uh(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:DT(t.align),textBaseline:"middle",translation:[o,a]})}}function vae(n,e){const t=new cM({ctx:n.ctx,options:e,chart:n});nr.configure(n,t,e),nr.addBox(n,t),n.titleBlock=t}var wae={id:"title",_element:cM,start(n,e,t){vae(n,t)},stop(n){const e=n.titleBlock;nr.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;nr.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const tC=new WeakMap;var yae={id:"subtitle",start(n,e,t){const i=new cM({ctx:n.ctx,options:t,chart:n});nr.configure(n,i,t),nr.addBox(n,i),tC.set(n,i)},stop(n){nr.removeBox(n,tC.get(n)),tC.delete(n)},beforeUpdate(n,e,t){const i=tC.get(n);nr.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const pb={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=OT(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Ta(n,e){return e&&(Mn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Gl(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Cae(n,e){const{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function jW(n,e){const t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=mi(e.bodyFont),c=mi(e.titleFont),u=mi(e.footerFont),h=s.length,d=r.length,f=i.length,g=tr(e.padding);let p=g.height,m=0,v=i.reduce((_,R)=>_+R.before.length+R.lines.length+R.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,h&&(p+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const _=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=f*_+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}d&&(p+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let y=0;const w=function(_){m=Math.max(m,t.measureText(_).width+y)};return t.save(),t.font=c.string,Xt(n.title,w),t.font=l.string,Xt(n.beforeBody.concat(n.afterBody),w),y=e.displayColors?o+2+e.boxPadding:0,Xt(i,_=>{Xt(_.before,w),Xt(_.lines,w),Xt(_.after,w)}),y=0,t.font=u.string,Xt(n.footer,w),t.restore(),m+=g.width,{width:m,height:p}}function Sae(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function _ae(n,e,t,i){const{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function Rae(n,e,t,i){const{x:r,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),_ae(c,n,e,t)&&(c="center"),c}function zW(n,e,t){const i=t.yAlign||e.yAlign||Sae(n,t);return{xAlign:t.xAlign||e.xAlign||Rae(n,e,t,i),yAlign:i}}function Eae(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function xae(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function UW(n,e,t,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Gh(o);let g=Eae(e,a);const p=xae(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,d)+r:a==="right"&&(g+=Math.max(h,f)+r),{x:Oi(g,0,i.width-e.width),y:Oi(p,0,i.height-e.height)}}function nC(n,e,t){const i=tr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function GW(n){return Ta([],Gl(n))}function Tae(n,e,t){return cu(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function YW(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const KW={beforeTitle:Vl,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Vl,beforeBody:Vl,beforeLabel:Vl,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Nt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Vl,afterBody:Vl,beforeFooter:Vl,footer:Vl,afterFooter:Vl};function Lr(n,e,t,i){const r=n[e].call(t,i);return typeof r>"u"?KW[e].call(t,i):r}class uM extends Hs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,s=new $V(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Tae(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,r=Lr(i,"beforeTitle",this,e),s=Lr(i,"title",this,e),o=Lr(i,"afterTitle",this,e);let a=[];return a=Ta(a,Gl(r)),a=Ta(a,Gl(s)),a=Ta(a,Gl(o)),a}getBeforeBody(e,t){return GW(Lr(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return Xt(e,s=>{const o={before:[],lines:[],after:[]},a=YW(i,s);Ta(o.before,Gl(Lr(a,"beforeLabel",this,s))),Ta(o.lines,Lr(a,"label",this,s)),Ta(o.after,Gl(Lr(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,t){return GW(Lr(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=Lr(i,"beforeFooter",this,e),s=Lr(i,"footer",this,e),o=Lr(i,"afterFooter",this,e);let a=[];return a=Ta(a,Gl(r)),a=Ta(a,Gl(s)),a=Ta(a,Gl(o)),a}_createItems(e){const t=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(Cae(this.chart,t[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),Xt(a,u=>{const h=YW(e.callbacks,u);r.push(Lr(h,"labelColor",this,u)),s.push(Lr(h,"labelPointStyle",this,u)),o.push(Lr(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=pb[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=jW(this,i),c=Object.assign({},a,l),u=zW(this.chart,i,c),h=UW(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const s=this.getCaretPosition(e,i,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Gh(a),{x:d,y:f}=e,{width:g,height:p}=t;let m,v,y,w,_,R;return s==="center"?(_=f+p/2,r==="left"?(m=d,v=m-o,w=_+o,R=_-o):(m=d+g,v=m+o,w=_-o,R=_+o),y=m):(r==="left"?v=d+Math.max(l,u)+o:r==="right"?v=d+g-Math.max(c,h)-o:v=this.caretX,s==="top"?(w=f,_=w-o,m=v-o,y=v+o):(w=f+p,_=w+o,m=v+o,y=v-o),R=w),{x1:m,x2:v,x3:y,y1:w,y2:_,y3:R}}drawTitle(e,t,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=dg(i.rtl,this.x,this.width);for(e.x=nC(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=mi(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=mi(s.bodyFont),h=nC(this,"left",s),d=r.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=t.y+f;if(s.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=r.leftForLtr(d,c)+c/2,v=g+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,L0(e,p,m,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,L0(e,p,m,v)}else{e.lineWidth=_t(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=r.leftForLtr(d,c),m=r.leftForLtr(r.xPlus(d,1),c-2),v=Gh(o.borderRadius);Object.values(v).some(y=>y!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,nb(e,{x:p,y:g,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),nb(e,{x:m,y:g+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(p,g,c,l),e.strokeRect(p,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=mi(i.bodyFont);let d=h.lineHeight,f=0;const g=dg(i.rtl,this.x,this.width),p=function(P){t.fillText(P,g.x(e.x+f),e.y+d/2),e.y+=d+s},m=g.textAlign(o);let v,y,w,_,R,E,x;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=nC(this,m,i),t.fillStyle=i.bodyColor,Xt(this.beforeBody,p),f=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,_=0,E=r.length;_<E;++_){for(v=r[_],y=this.labelTextColors[_],t.fillStyle=y,Xt(v.before,p),w=v.lines,a&&w.length&&(this._drawColorBox(t,e,_,g,i),d=Math.max(h.lineHeight,l)),R=0,x=w.length;R<x;++R)p(w[R]),d=h.lineHeight;Xt(v.after,p)}f=0,d=h.lineHeight,Xt(this.afterBody,p),e.y-=s}drawFooter(e,t,i){const r=this.footer,s=r.length;let o,a;if(s){const l=dg(i.rtl,this.x,this.width);for(e.x=nC(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=mi(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Gh(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+h,l),o==="top"&&this.drawCaret(e,t,i,r),t.lineTo(a+c-d,l),t.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,t,i,r),t.lineTo(a+c,l+u-g),t.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,t,i,r),t.lineTo(a+f,l+u),t.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,t,i,r),t.lineTo(a,l+h),t.quadraticCurveTo(a,l,a+h,l),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=pb[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=jW(this,e),l=Object.assign({},o,this._size),c=zW(t,e,l),u=UW(e,l,c,t);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=tr(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,t),AV(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),PV(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!P0(i,r),o=this._positionChanged(r,t);(s||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,i),a=this._positionChanged(o,e),l=t||!P0(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:r,options:s}=this,o=pb[s.position].call(this,e,t);return o!==!1&&(i!==o.x||r!==o.y)}}uM.positioners=pb;var Mae={id:"tooltip",_element:uM,positioners:pb,afterInit(n,e,t){t&&(n.tooltip=new uM({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:KW},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Aae=Object.freeze({__proto__:null,Colors:Voe,Decimation:Uoe,Filler:hae,Legend:bae,SubTitle:yae,Title:wae,Tooltip:Mae});const Pae=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Iae(n,e,t,i){const r=n.indexOf(e);if(r===-1)return Pae(n,e,t,i);const s=n.lastIndexOf(e);return r!==s?t:r}const Oae=(n,e)=>n===null?null:Oi(Math.round(n),0,e);function qW(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class hM extends uu{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:r,label:s}of t)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Nt(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:Iae(i,e,et(t,e),this._addedLabels),Oae(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){return qW.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}hM.id="category",hM.defaults={ticks:{callback:qW}};function kae(n,e){const t=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=n,f=s||1,g=u-1,{min:p,max:m}=e,v=!Nt(o),y=!Nt(a),w=!Nt(c),_=(m-p)/(h+1);let R=eV((m-p)/g/f)*f,E,x,P,T;if(R<1e-14&&!v&&!y)return[{value:p},{value:m}];T=Math.ceil(m/R)-Math.floor(p/R),T>g&&(R=eV(T*R/g/f)*f),Nt(l)||(E=Math.pow(10,l),R=Math.ceil(R*E)/E),r==="ticks"?(x=Math.floor(p/R)*R,P=Math.ceil(m/R)*R):(x=p,P=m),v&&y&&s&&xie((a-o)/s,R/1e3)?(T=Math.round(Math.min((a-o)/R,u)),R=(a-o)/T,x=o,P=a):w?(x=v?o:x,P=y?a:P,T=c-1,R=(P-x)/T):(T=(P-x)/R,Zm(T,Math.round(T),R/1e3)?T=Math.round(T):T=Math.ceil(T));const I=Math.max(nV(R),nV(x));E=Math.pow(10,Nt(l)?I:l),x=Math.round(x*E)/E,P=Math.round(P*E)/E;let N=0;for(v&&(d&&x!==o?(t.push({value:o}),x<o&&N++,Zm(Math.round((x+N*R)*E)/E,o,XW(o,_,n))&&N++):x<o&&N++);N<T;++N){const W=Math.round((x+N*R)*E)/E;if(y&&W>a)break;t.push({value:W})}return y&&d&&P!==a?t.length&&Zm(t[t.length-1].value,a,XW(a,_,n))?t[t.length-1].value=a:t.push({value:a}):(!y||P===a)&&t.push({value:P}),t}function XW(n,e,{horizontal:t,minRotation:i}){const r=Mo(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class iC extends uu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Nt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=t?r:l,a=l=>s=i?s:l;if(e){const l=xa(r),c=xa(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=kae(r,s);return e.bounds==="ticks"&&tV(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return eb(e,this.chart.options.locale,this.options.ticks.format)}}class pg extends iC{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Xn(e)?e:0,this.max=Xn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Mo(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}pg.id="linear",pg.defaults={ticks:{callback:D0.formatters.numeric}};const mb=n=>Math.floor(lu(n)),Qh=(n,e)=>Math.pow(10,mb(n)+e);function ZW(n){return n/Math.pow(10,mb(n))===1}function QW(n,e,t){const i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function Dae(n,e){const t=e-n;let i=mb(t);for(;QW(n,e,i)>10;)i++;for(;QW(n,e,i)<10;)i--;return Math.min(i,mb(n))}function Nae(n,{min:e,max:t}){e=ls(n.min,e);const i=[],r=mb(e);let s=Dae(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),d=ls(n.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;d<t;)i.push({value:d,major:ZW(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+u+h*Math.pow(10,s))*o)/o;const f=ls(n.max,d);return i.push({value:f,major:ZW(f),significand:h}),i}class mg extends uu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=iC.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Xn(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Xn(e)?Math.max(0,e):null,this.max=Xn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Xn(this._userMin)&&(this.min=e===Qh(this.min,0)?Qh(this.min,-1):Qh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Qh(i,-1)),o(Qh(r,1)))),i<=0&&s(Qh(r,-1)),r<=0&&o(Qh(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=Nae(t,this);return e.bounds==="ticks"&&tV(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":eb(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=lu(e),this._valueRange=lu(this.max)-lu(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(lu(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}mg.id="logarithmic",mg.defaults={ticks:{callback:D0.formatters.logarithmic,major:{enabled:!0}}};function dM(n){const e=n.ticks;if(e.display&&n.display){const t=tr(e.backdropPadding);return et(e.font&&e.font.size,An.font.size)+t.height}return 0}function Lae(n,e,t){return t=Mn(t)?t:[t],{w:jie(n,e.string,t),h:t.length*e.lineHeight}}function JW(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function Hae(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?wn/s:0;for(let l=0;l<s;l++){const c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],a),h=mi(c.font),d=Lae(n.ctx,h,n._pointLabels[l]);i[l]=d;const f=us(n.getIndexAngle(l)+a),g=Math.round(IT(f)),p=JW(g,u.x,d.w,0,180),m=JW(g,u.y,d.h,90,270);$ae(t,e,f,p,m)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=Vae(n,i,r)}function $ae(n,e,t,i,r){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function Fae(n,e,t){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,l=n.getPointPosition(e,i+r+o,s),c=Math.round(IT(us(l.angle+ii))),u=zae(l.y,a.h,c),h=Wae(c),d=jae(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function Bae(n,e){if(!e)return!0;const{left:t,top:i,right:r,bottom:s}=n;return!(zl({x:t,y:i},e)||zl({x:t,y:s},e)||zl({x:r,y:i},e)||zl({x:r,y:s},e))}function Vae(n,e,t){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:dM(s)/2,additionalAngle:o?wn/r:0};let c;for(let u=0;u<r;u++){l.padding=t[u],l.size=e[u];const h=Fae(n,u,l);i.push(h),a==="auto"&&(h.visible=Bae(h,c),h.visible&&(c=h))}return i}function Wae(n){return n===0||n===180?"center":n<180?"left":"right"}function jae(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function zae(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function Uae(n,e,t){const{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Nt(a)){const l=Gh(e.borderRadius),c=tr(e.backdropPadding);n.fillStyle=a;const u=i-c.left,h=r-c.top,d=s-i+c.width,f=o-r+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),nb(n,{x:u,y:h,w:d,h:f,radius:l}),n.fill()):n.fillRect(u,h,d,f)}}function Gae(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(n.getPointLabelContext(r));Uae(t,o,s);const a=mi(o.font),{x:l,y:c,textAlign:u}=s;Uh(t,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function e3(n,e,t,i){const{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,yn);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function Yae(n,e,t,i,r){const s=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),e3(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function Kae(n,e,t){return cu(n,{label:t,index:e,type:"pointLabel"})}class bb extends iC{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=tr(dM(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Xn(e)&&!isNaN(e)?e:0,this.max=Xn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/dM(this.options))}generateTickLabels(e){iC.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const r=bn(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?Hae(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){const t=yn/(this._pointLabels.length||1),i=this.options.startAngle||0;return us(e*t+Mo(i))}getDistanceFromCenterForValue(e){if(Nt(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Nt(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return Kae(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const r=this.getIndexAngle(e)-ii+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),e3(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&Gae(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=r.setContext(d),g=s.setContext(d);Yae(this,f,l,o,g)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),u=mi(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=tr(c.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Uh(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}bb.id="radialLinear",bb.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:D0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}},bb.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},bb.descriptors={angleLines:{_fallback:"grid"}};const rC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Hr=Object.keys(rC);function t3(n,e){return n-e}function n3(n,e){if(Nt(e))return null;const t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Xn(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(cg(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function i3(n,e,t,i){const r=Hr.length;for(let s=Hr.indexOf(n);s<r-1;++s){const o=rC[Hr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return Hr[s]}return Hr[r-1]}function qae(n,e,t,i,r){for(let s=Hr.length-1;s>=Hr.indexOf(t);s--){const o=Hr[s];if(rC[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return Hr[t?Hr.indexOf(t):0]}function Xae(n){for(let e=Hr.indexOf(n)+1,t=Hr.length;e<t;++e)if(rC[Hr[e]].common)return Hr[e]}function r3(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:r}=kT(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function Zae(n,e,t,i){const r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function s3(n,e,t){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:Zae(n,i,r,t)}class vb extends uu{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),r=this._adapter=new sse._date(e.adapters.date);r.init(t),qm(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:n3(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Xn(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),s=Xn(s)&&!isNaN(s)?s:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=Pie(r,s,o);return this._unit=t.unit||(i.autoSkip?i3(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):qae(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Xae(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),s3(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Oi(t,0,o),i=Oi(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||i3(s.minUnit,t,i,this._getLabelCapacity(t)),a=et(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=cg(l)||l===!0,u={};let h=t,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)r3(u,d,g);return(d===i||r.bounds==="ticks"||f===1)&&r3(u,d,g),Object.keys(u).sort(t3).map(p=>+p)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,s=this._unit,o=t||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,r){const s=this.options,o=s.ticks.callback;if(o)return bn(o,[e,t,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[t],f=c&&h&&d&&d.major;return this._adapter.format(e,r||(f?h:u))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=Mo(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,s3(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,i=r.length;t<i;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(n3(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return oV(e.sort(t3))}}vb.id="time",vb.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};function sC(n,e,t){let i=0,r=n.length-1,s,o,a,l;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=jl(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=jl(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class fM extends vb{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=sC(t,this.min),this._tableRange=sC(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(sC(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return sC(this._table,i*this._tableRange+this._minPos,!0)}}fM.id="timeseries",fM.defaults=vb.defaults;var Qae=Object.freeze({__proto__:null,CategoryScale:hM,LinearScale:pg,LogarithmicScale:mg,RadialLinearScale:bb,TimeScale:vb,TimeSeriesScale:fM});const o3=[rse,Doe,Aae,Qae];hs.register(...o3);function a3(n,e,t,i={}){return new hs(n,{type:e,data:t,options:i})}qc.getOrCreate(globalThis);var l3;let c3;function Jae(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(E,x,P){return function(T,I){x&&(I=T,T=n);for(var N=0;N<E.length;N++)I=E[N].apply(T,P?[I]:[]);return P?I:T}}function w(E,x,P,T){if(typeof E!="function"&&(T||E!==void 0))throw new TypeError(x+" must "+(P||"be")+" a function"+(T?"":" or undefined"));return E}function _(E,x,P,T,I,N,W,j,K,H,k){function B(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(x[0]),z=x[3],se=!W,b=I===1,C=I===3,S=I===4,A=I===2;function L(oe,le,je){return function(ye,xe){return le&&(xe=ye,ye=E),je&&je(ye),M[oe].call(ye,xe)}}if(!se){var M={},$=[],Z=C?"get":S||b?"set":"value";if(K?(H||b?M={get:u3(function(){return z(this)},T,"get"),set:function(oe){x[4](this,oe)}}:M[Z]=z,H||u3(M[Z],T,A?"":Z)):H||(M=Object.getOwnPropertyDescriptor(E,T)),!H&&!K){if((a=m[+j][T])&&(a^I)!=7)throw Error("Decorating two elements with the same name ("+M[Z].name+") is not supported yet");m[+j][T]=I<3?1:I}}for(var re=E,ue=G.length-1;ue>=0;ue-=P?2:1){var ae=w(G[ue],"A decorator","be",!0),De=P?G[ue-1]:void 0,Ee={},ee={kind:["field","accessor","method","getter","setter","class"][I],name:T,metadata:o,addInitializer:(function(oe,le){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(le,"An initializer","be",!0),N.push(le)}).bind(null,Ee)};if(se)a=ae.call(De,re,ee),Ee.v=1,w(a,"class decorators","return")&&(re=a);else if(ee.static=j,ee.private=K,a=ee.access={has:K?k.bind():function(oe){return T in oe}},S||(a.get=K?A?function(oe){return B(oe),M.value}:L("get",0,B):function(oe){return oe[T]}),A||C||(a.set=K?L("set",0,B):function(oe,le){oe[T]=le}),re=ae.call(De,b?{get:M.get,set:M.set}:M[Z],ee),Ee.v=1,b){if(typeof re=="object"&&re)(a=w(re.get,"accessor.get"))&&(M.get=a),(a=w(re.set,"accessor.set"))&&(M.set=a),(a=w(re.init,"accessor.init"))&&$.unshift(a);else if(re!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(re,(H?"field":"method")+" decorators","return")&&(H?$.unshift(re):M[Z]=re)}return I<2&&W.push(y($,j,1),y(N,j,0)),H||se||(K?b?W.splice(-1,0,L("get",j),L("set",j)):W.push(A?M[Z]:w.call.bind(M[Z])):g(E,T,M)),re}function R(E){return g(E,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(E){E&&u.push(y(E))},d=function(E,x){for(var P=0;P<t.length;P++){var T=t[P],I=T[1],N=7&I;if((8&I)==E&&!N==x){var W=T[2],j=!!T[3],K=16&I;_(E?n:n.prototype,T,K,j?"#"+W:ele(W),N,N<2?[]:E?c=c||[]:l=l||[],u,!!E,j,x,E&&j?function(H){return nle(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||R(n),{e:a,get c(){var E=[];return v&&[R(n=_(n,[e],i,n.name,5,E)),y(E,1)]}}}function ele(n){var e=tle(n,"string");return typeof e=="symbol"?e:e+""}function tle(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function u3(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function nle(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let oC;class ile{constructor(){this.mychart=void 0}bind(){}attached(){const e=[{year:2010,count:10},{year:2011,count:20},{year:2012,count:15},{year:2013,count:25},{year:2014,count:22},{year:2015,count:30},{year:2016,count:28}],t={labels:e.map(i=>i.year),datasets:[{label:"Acquisitions by year",data:e.map(i=>i.count)}]};this.chartjs=a3(this.mychart,"bar",t)}}l3=ile,[oC,c3]=Jae(l3,[Um({...Yne,name:"sv-chartjs"})],[]).c,c3();const h3="chartjs-scatter",gM=`<div>
    chart-scatter view - should not be used
    <canvas ref="mychart"></canvas>
</div>
`,d3=[],f3={};let pM;function rle(n){pM||(pM=Nr.define({name:h3,template:gM,dependencies:d3,bindables:f3})),n.register(pM)}const sle=Object.freeze(Object.defineProperty({__proto__:null,bindables:f3,default:gM,dependencies:d3,name:h3,register:rle,template:gM},Symbol.toStringTag,{value:"Module"}));var g3;let p3;function ole(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(E,x,P){return function(T,I){x&&(I=T,T=n);for(var N=0;N<E.length;N++)I=E[N].apply(T,P?[I]:[]);return P?I:T}}function w(E,x,P,T){if(typeof E!="function"&&(T||E!==void 0))throw new TypeError(x+" must "+(P||"be")+" a function"+(T?"":" or undefined"));return E}function _(E,x,P,T,I,N,W,j,K,H,k){function B(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(x[0]),z=x[3],se=!W,b=I===1,C=I===3,S=I===4,A=I===2;function L(oe,le,je){return function(ye,xe){return le&&(xe=ye,ye=E),je&&je(ye),M[oe].call(ye,xe)}}if(!se){var M={},$=[],Z=C?"get":S||b?"set":"value";if(K?(H||b?M={get:m3(function(){return z(this)},T,"get"),set:function(oe){x[4](this,oe)}}:M[Z]=z,H||m3(M[Z],T,A?"":Z)):H||(M=Object.getOwnPropertyDescriptor(E,T)),!H&&!K){if((a=m[+j][T])&&(a^I)!=7)throw Error("Decorating two elements with the same name ("+M[Z].name+") is not supported yet");m[+j][T]=I<3?1:I}}for(var re=E,ue=G.length-1;ue>=0;ue-=P?2:1){var ae=w(G[ue],"A decorator","be",!0),De=P?G[ue-1]:void 0,Ee={},ee={kind:["field","accessor","method","getter","setter","class"][I],name:T,metadata:o,addInitializer:(function(oe,le){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(le,"An initializer","be",!0),N.push(le)}).bind(null,Ee)};if(se)a=ae.call(De,re,ee),Ee.v=1,w(a,"class decorators","return")&&(re=a);else if(ee.static=j,ee.private=K,a=ee.access={has:K?k.bind():function(oe){return T in oe}},S||(a.get=K?A?function(oe){return B(oe),M.value}:L("get",0,B):function(oe){return oe[T]}),A||C||(a.set=K?L("set",0,B):function(oe,le){oe[T]=le}),re=ae.call(De,b?{get:M.get,set:M.set}:M[Z],ee),Ee.v=1,b){if(typeof re=="object"&&re)(a=w(re.get,"accessor.get"))&&(M.get=a),(a=w(re.set,"accessor.set"))&&(M.set=a),(a=w(re.init,"accessor.init"))&&$.unshift(a);else if(re!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(re,(H?"field":"method")+" decorators","return")&&(H?$.unshift(re):M[Z]=re)}return I<2&&W.push(y($,j,1),y(N,j,0)),H||se||(K?b?W.splice(-1,0,L("get",j),L("set",j)):W.push(A?M[Z]:w.call.bind(M[Z])):g(E,T,M)),re}function R(E){return g(E,f,{configurable:!0,enumerable:!0,value:o})}return s!==void 0&&(o=s[f]),o=p(o??null),u=[],h=function(E){E&&u.push(y(E))},d=function(E,x){for(var P=0;P<t.length;P++){var T=t[P],I=T[1],N=7&I;if((8&I)==E&&!N==x){var W=T[2],j=!!T[3],K=16&I;_(E?n:n.prototype,T,K,j?"#"+W:ale(W),N,N<2?[]:E?c=c||[]:l=l||[],u,!!E,j,x,E&&j?function(H){return cle(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||R(n),{e:a,get c(){var E=[];return v&&[R(n=_(n,[e],i,n.name,5,E)),y(E,1)]}}}function ale(n){var e=lle(n,"string");return typeof e=="symbol"?e:e+""}function lle(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function m3(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function cle(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let b3;class ule extends oC{constructor(...e){super(...e),this.mychart=void 0}bind(){}attached(){const e={datasets:[{label:"First Dataset",data:[{x:20,y:30,r:15},{x:40,y:10,r:10},{x:30,y:12,r:5}]},{label:"Second Dataset",data:[{x:19,y:32,r:2},{x:41,y:12,r:5},{x:35,y:11,r:6}]}]};this.chartjs=a3(this.mychart,"bubble",e)}}g3=ule,[b3,p3]=ole(g3,[Um({...sle,name:"sv-chartjs-scatter"})],[],0,void 0,oC).c,p3();const v3="table",mM=`<button class="w3-button w3-grey" click.trigger="submit()" show.bind="showtable">submit</button>
<button class="w3-button w3-grey" click.trigger="addRow()" show.bind="showtable">+ Subject (row)</button>
<button class="w3-button w3-grey" click.trigger="addColumn()" show.bind="showtable">+ Object (column)</button>
<button class="w3-button w3-grey" click.trigger="showHide()">show/hide</button>
<div ref="mytable" show.bind="showtable"></div>`,w3=[],y3={};let bM;function hle(n){bM||(bM=Nr.define({name:v3,template:mM,dependencies:w3,bindables:y3})),n.register(bM)}const dle=Object.freeze(Object.defineProperty({__proto__:null,bindables:y3,default:mM,dependencies:w3,name:v3,register:hle,template:mM},Symbol.toStringTag,{value:"Module"}));var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wb=function(n){return n&&n.Math===Math&&n},Bi=wb(typeof globalThis=="object"&&globalThis)||wb(typeof window=="object"&&window)||wb(typeof self=="object"&&self)||wb(typeof bg=="object"&&bg)||wb(typeof bg=="object"&&bg)||function(){return this}()||Function("return this")(),vM={},$r=function(n){try{return!!n()}catch{return!0}},fle=$r,Ao=!fle(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),gle=$r,aC=!gle(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),ple=aC,lC=Function.prototype.call,Po=ple?lC.bind(lC):function(){return lC.apply(lC,arguments)},C3={},S3={}.propertyIsEnumerable,_3=Object.getOwnPropertyDescriptor,mle=_3&&!S3.call({1:2},1);C3.f=mle?function(e){var t=_3(this,e);return!!t&&t.enumerable}:S3;var cC=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}},R3=aC,E3=Function.prototype,wM=E3.call,ble=R3&&E3.bind.bind(wM,wM),gi=R3?ble:function(n){return function(){return wM.apply(n,arguments)}},x3=gi,vle=x3({}.toString),wle=x3("".slice),Jh=function(n){return wle(vle(n),8,-1)},yle=gi,Cle=$r,Sle=Jh,yM=Object,_le=yle("".split),Rle=Cle(function(){return!yM("z").propertyIsEnumerable(0)})?function(n){return Sle(n)==="String"?_le(n,""):yM(n)}:yM,uC=function(n){return n==null},Ele=uC,xle=TypeError,yb=function(n){if(Ele(n))throw new xle("Can't call method on "+n);return n},Tle=Rle,Mle=yb,hC=function(n){return Tle(Mle(n))},CM=typeof document=="object"&&document.all,Vi=typeof CM>"u"&&CM!==void 0?function(n){return typeof n=="function"||n===CM}:function(n){return typeof n=="function"},Ale=Vi,Ma=function(n){return typeof n=="object"?n!==null:Ale(n)},SM=Bi,Ple=Vi,Ile=function(n){return Ple(n)?n:void 0},wg=function(n,e){return arguments.length<2?Ile(SM[n]):SM[n]&&SM[n][e]},Ole=gi,dC=Ole({}.isPrototypeOf),kle=Bi,T3=kle.navigator,M3=T3&&T3.userAgent,fC=M3?String(M3):"",A3=Bi,_M=fC,P3=A3.process,I3=A3.Deno,O3=P3&&P3.versions||I3&&I3.version,k3=O3&&O3.v8,Io,gC;k3&&(Io=k3.split("."),gC=Io[0]>0&&Io[0]<4?1:+(Io[0]+Io[1])),!gC&&_M&&(Io=_M.match(/Edge\/(\d+)/),(!Io||Io[1]>=74)&&(Io=_M.match(/Chrome\/(\d+)/),Io&&(gC=+Io[1])));var Dle=gC,D3=Dle,Nle=$r,Lle=Bi,Hle=Lle.String,RM=!!Object.getOwnPropertySymbols&&!Nle(function(){var n=Symbol("symbol detection");return!Hle(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&D3&&D3<41}),$le=RM,N3=$le&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Fle=wg,Ble=Vi,Vle=dC,Wle=N3,jle=Object,EM=Wle?function(n){return typeof n=="symbol"}:function(n){var e=Fle("Symbol");return Ble(e)&&Vle(e.prototype,jle(n))},zle=String,pC=function(n){try{return zle(n)}catch{return"Object"}},Ule=Vi,Gle=pC,Yle=TypeError,Cb=function(n){if(Ule(n))return n;throw new Yle(Gle(n)+" is not a function")},Kle=Cb,qle=uC,mC=function(n,e){var t=n[e];return qle(t)?void 0:Kle(t)},xM=Po,TM=Vi,MM=Ma,Xle=TypeError,Zle=function(n,e){var t,i;if(e==="string"&&TM(t=n.toString)&&!MM(i=xM(t,n))||TM(t=n.valueOf)&&!MM(i=xM(t,n))||e!=="string"&&TM(t=n.toString)&&!MM(i=xM(t,n)))return i;throw new Xle("Can't convert object to primitive value")},L3={exports:{}},H3=Bi,Qle=Object.defineProperty,AM=function(n,e){try{Qle(H3,n,{value:e,configurable:!0,writable:!0})}catch{H3[n]=e}return e},Jle=Bi,ece=AM,$3="__core-js_shared__",F3=L3.exports=Jle[$3]||ece($3,{});(F3.versions||(F3.versions=[])).push({version:"3.39.0",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"});var PM=L3.exports,B3=PM,V3=function(n,e){return B3[n]||(B3[n]=e||{})},tce=yb,nce=Object,Sb=function(n){return nce(tce(n))},ice=gi,rce=Sb,sce=ice({}.hasOwnProperty),Aa=Object.hasOwn||function(e,t){return sce(rce(e),t)},oce=gi,ace=0,lce=Math.random(),cce=oce(1 .toString),W3=function(n){return"Symbol("+(n===void 0?"":n)+")_"+cce(++ace+lce,36)},uce=Bi,hce=V3,j3=Aa,dce=W3,fce=RM,gce=N3,yg=uce.Symbol,IM=hce("wks"),pce=gce?yg.for||yg:yg&&yg.withoutSetter||dce,fu=function(n){return j3(IM,n)||(IM[n]=fce&&j3(yg,n)?yg[n]:pce("Symbol."+n)),IM[n]},mce=Po,z3=Ma,U3=EM,bce=mC,vce=Zle,wce=fu,yce=TypeError,Cce=wce("toPrimitive"),Sce=function(n,e){if(!z3(n)||U3(n))return n;var t=bce(n,Cce),i;if(t){if(e===void 0&&(e="default"),i=mce(t,n,e),!z3(i)||U3(i))return i;throw new yce("Can't convert object to primitive value")}return e===void 0&&(e="number"),vce(n,e)},_ce=Sce,Rce=EM,G3=function(n){var e=_ce(n,"string");return Rce(e)?e:e+""},Ece=Bi,Y3=Ma,OM=Ece.document,xce=Y3(OM)&&Y3(OM.createElement),kM=function(n){return xce?OM.createElement(n):{}},Tce=Ao,Mce=$r,Ace=kM,K3=!Tce&&!Mce(function(){return Object.defineProperty(Ace("div"),"a",{get:function(){return 7}}).a!==7}),Pce=Ao,Ice=Po,Oce=C3,kce=cC,Dce=hC,Nce=G3,Lce=Aa,Hce=K3,q3=Object.getOwnPropertyDescriptor;vM.f=Pce?q3:function(e,t){if(e=Dce(e),t=Nce(t),Hce)try{return q3(e,t)}catch{}if(Lce(e,t))return kce(!Ice(Oce.f,e,t),e[t])};var gu={},$ce=Ao,Fce=$r,X3=$ce&&Fce(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Bce=Ma,Vce=String,Wce=TypeError,Yl=function(n){if(Bce(n))return n;throw new Wce(Vce(n)+" is not an object")},jce=Ao,zce=K3,Uce=X3,bC=Yl,Z3=G3,Gce=TypeError,DM=Object.defineProperty,Yce=Object.getOwnPropertyDescriptor,NM="enumerable",LM="configurable",HM="writable";gu.f=jce?Uce?function(e,t,i){if(bC(e),t=Z3(t),bC(i),typeof e=="function"&&t==="prototype"&&"value"in i&&HM in i&&!i[HM]){var r=Yce(e,t);r&&r[HM]&&(e[t]=i.value,i={configurable:LM in i?i[LM]:r[LM],enumerable:NM in i?i[NM]:r[NM],writable:!1})}return DM(e,t,i)}:DM:function(e,t,i){if(bC(e),t=Z3(t),bC(i),zce)try{return DM(e,t,i)}catch{}if("get"in i||"set"in i)throw new Gce("Accessors not supported");return"value"in i&&(e[t]=i.value),e};var Kce=Ao,qce=gu,Xce=cC,_b=Kce?function(n,e,t){return qce.f(n,e,Xce(1,t))}:function(n,e,t){return n[e]=t,n},Q3={exports:{}},$M=Ao,Zce=Aa,J3=Function.prototype,Qce=$M&&Object.getOwnPropertyDescriptor,FM=Zce(J3,"name"),Jce=FM&&(function(){}).name==="something",eue=FM&&(!$M||$M&&Qce(J3,"name").configurable),tue={EXISTS:FM,PROPER:Jce,CONFIGURABLE:eue},nue=gi,iue=Vi,BM=PM,rue=nue(Function.toString);iue(BM.inspectSource)||(BM.inspectSource=function(n){return rue(n)});var sue=BM.inspectSource,oue=Bi,aue=Vi,ej=oue.WeakMap,lue=aue(ej)&&/native code/.test(String(ej)),cue=V3,uue=W3,tj=cue("keys"),nj=function(n){return tj[n]||(tj[n]=uue(n))},VM={},hue=lue,ij=Bi,due=Ma,fue=_b,WM=Aa,jM=PM,gue=nj,pue=VM,rj="Object already initialized",zM=ij.TypeError,mue=ij.WeakMap,vC,Rb,wC,bue=function(n){return wC(n)?Rb(n):vC(n,{})},vue=function(n){return function(e){var t;if(!due(e)||(t=Rb(e)).type!==n)throw new zM("Incompatible receiver, "+n+" required");return t}};if(hue||jM.state){var Pa=jM.state||(jM.state=new mue);Pa.get=Pa.get,Pa.has=Pa.has,Pa.set=Pa.set,vC=function(n,e){if(Pa.has(n))throw new zM(rj);return e.facade=n,Pa.set(n,e),e},Rb=function(n){return Pa.get(n)||{}},wC=function(n){return Pa.has(n)}}else{var Cg=gue("state");pue[Cg]=!0,vC=function(n,e){if(WM(n,Cg))throw new zM(rj);return e.facade=n,fue(n,Cg,e),e},Rb=function(n){return WM(n,Cg)?n[Cg]:{}},wC=function(n){return WM(n,Cg)}}var wue={set:vC,get:Rb,has:wC,enforce:bue,getterFor:vue},UM=gi,yue=$r,Cue=Vi,yC=Aa,GM=Ao,Sue=tue.CONFIGURABLE,_ue=sue,sj=wue,Rue=sj.enforce,Eue=sj.get,oj=String,CC=Object.defineProperty,xue=UM("".slice),Tue=UM("".replace),Mue=UM([].join),Aue=GM&&!yue(function(){return CC(function(){},"length",{value:8}).length!==8}),Pue=String(String).split("String"),Iue=Q3.exports=function(n,e,t){xue(oj(e),0,7)==="Symbol("&&(e="["+Tue(oj(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!yC(n,"name")||Sue&&n.name!==e)&&(GM?CC(n,"name",{value:e,configurable:!0}):n.name=e),Aue&&t&&yC(t,"arity")&&n.length!==t.arity&&CC(n,"length",{value:t.arity});try{t&&yC(t,"constructor")&&t.constructor?GM&&CC(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var i=Rue(n);return yC(i,"source")||(i.source=Mue(Pue,typeof e=="string"?e:"")),n};Function.prototype.toString=Iue(function(){return Cue(this)&&Eue(this).source||_ue(this)},"toString");var Oue=Q3.exports,kue=Vi,Due=gu,Nue=Oue,Lue=AM,Hue=function(n,e,t,i){i||(i={});var r=i.enumerable,s=i.name!==void 0?i.name:e;if(kue(t)&&Nue(t,s,i),i.global)r?n[e]=t:Lue(e,t);else{try{i.unsafe?n[e]&&(r=!0):delete n[e]}catch{}r?n[e]=t:Due.f(n,e,{value:t,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return n},aj={},$ue=Math.ceil,Fue=Math.floor,Bue=Math.trunc||function(e){var t=+e;return(t>0?Fue:$ue)(t)},Vue=Bue,Eb=function(n){var e=+n;return e!==e||e===0?0:Vue(e)},Wue=Eb,jue=Math.max,zue=Math.min,Uue=function(n,e){var t=Wue(n);return t<0?jue(t+e,0):zue(t,e)},Gue=Eb,Yue=Math.min,Kue=function(n){var e=Gue(n);return e>0?Yue(e,9007199254740991):0},que=Kue,xb=function(n){return que(n.length)},Xue=hC,Zue=Uue,Que=xb,lj=function(n){return function(e,t,i){var r=Xue(e),s=Que(r);if(s===0)return!n&&-1;var o=Zue(i,s),a;if(n&&t!==t){for(;s>o;)if(a=r[o++],a!==a)return!0}else for(;s>o;o++)if((n||o in r)&&r[o]===t)return n||o||0;return!n&&-1}},Jue={includes:lj(!0),indexOf:lj(!1)},ehe=gi,YM=Aa,the=hC,nhe=Jue.indexOf,ihe=VM,cj=ehe([].push),uj=function(n,e){var t=the(n),i=0,r=[],s;for(s in t)!YM(ihe,s)&&YM(t,s)&&cj(r,s);for(;e.length>i;)YM(t,s=e[i++])&&(~nhe(r,s)||cj(r,s));return r},KM=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],rhe=uj,she=KM,ohe=she.concat("length","prototype");aj.f=Object.getOwnPropertyNames||function(e){return rhe(e,ohe)};var hj={};hj.f=Object.getOwnPropertySymbols;var ahe=wg,lhe=gi,che=aj,uhe=hj,hhe=Yl,dhe=lhe([].concat),fhe=ahe("Reflect","ownKeys")||function(e){var t=che.f(hhe(e)),i=uhe.f;return i?dhe(t,i(e)):t},dj=Aa,ghe=fhe,phe=vM,mhe=gu,fj=function(n,e,t){for(var i=ghe(e),r=mhe.f,s=phe.f,o=0;o<i.length;o++){var a=i[o];!dj(n,a)&&!(t&&dj(t,a))&&r(n,a,s(e,a))}},bhe=$r,vhe=Vi,whe=/#|\.prototype\./,Tb=function(n,e){var t=Che[yhe(n)];return t===_he?!0:t===She?!1:vhe(e)?bhe(e):!!e},yhe=Tb.normalize=function(n){return String(n).replace(whe,".").toLowerCase()},Che=Tb.data={},She=Tb.NATIVE="N",_he=Tb.POLYFILL="P",Rhe=Tb,SC=Bi,Ehe=vM.f,xhe=_b,The=Hue,Mhe=AM,Ahe=fj,Phe=Rhe,Wi=function(n,e){var t=n.target,i=n.global,r=n.stat,s,o,a,l,c,u;if(i?o=SC:r?o=SC[t]||Mhe(t,{}):o=SC[t]&&SC[t].prototype,o)for(a in e){if(c=e[a],n.dontCallGetSet?(u=Ehe(o,a),l=u&&u.value):l=o[a],s=Phe(i?a:t+(r?".":"#")+a,n.forced),!s&&l!==void 0){if(typeof c==typeof l)continue;Ahe(c,l)}(n.sham||l&&l.sham)&&xhe(c,"sham",!0),The(o,a,c,n)}},Ihe=aC,gj=Function.prototype,pj=gj.apply,mj=gj.call,_C=typeof Reflect=="object"&&Reflect.apply||(Ihe?mj.bind(pj):function(){return mj.apply(pj,arguments)}),Ohe=gi,khe=Cb,bj=function(n,e,t){try{return Ohe(khe(Object.getOwnPropertyDescriptor(n,e)[t]))}catch{}},Dhe=Ma,Nhe=function(n){return Dhe(n)||n===null},Lhe=Nhe,Hhe=String,$he=TypeError,Fhe=function(n){if(Lhe(n))return n;throw new $he("Can't set "+Hhe(n)+" as a prototype")},Bhe=bj,Vhe=Ma,Whe=yb,jhe=Fhe,vj=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,e={},t;try{t=Bhe(Object.prototype,"__proto__","set"),t(e,[]),n=e instanceof Array}catch{}return function(r,s){return Whe(r),jhe(s),Vhe(r)&&(n?t(r,s):r.__proto__=s),r}}():void 0),zhe=gu.f,Uhe=function(n,e,t){t in n||zhe(n,t,{configurable:!0,get:function(){return e[t]},set:function(i){e[t]=i}})},Ghe=Vi,Yhe=Ma,wj=vj,Khe=function(n,e,t){var i,r;return wj&&Ghe(i=e.constructor)&&i!==t&&Yhe(r=i.prototype)&&r!==t.prototype&&wj(n,r),n},qhe=fu,Xhe=qhe("toStringTag"),yj={};yj[Xhe]="z";var Zhe=String(yj)==="[object z]",Qhe=Zhe,Jhe=Vi,RC=Jh,ede=fu,tde=ede("toStringTag"),nde=Object,ide=RC(function(){return arguments}())==="Arguments",rde=function(n,e){try{return n[e]}catch{}},Cj=Qhe?RC:function(n){var e,t,i;return n===void 0?"Undefined":n===null?"Null":typeof(t=rde(e=nde(n),tde))=="string"?t:ide?RC(e):(i=RC(e))==="Object"&&Jhe(e.callee)?"Arguments":i},sde=Cj,ode=String,EC=function(n){if(sde(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return ode(n)},ade=EC,lde=function(n,e){return n===void 0?arguments.length<2?"":e:ade(n)},cde=Ma,ude=_b,hde=function(n,e){cde(e)&&"cause"in e&&ude(n,"cause",e.cause)},dde=gi,Sj=Error,fde=dde("".replace),gde=function(n){return String(new Sj(n).stack)}("zxcasd"),_j=/\n\s*at [^:]*:[^\n]*/,pde=_j.test(gde),mde=function(n,e){if(pde&&typeof n=="string"&&!Sj.prepareStackTrace)for(;e--;)n=fde(n,_j,"");return n},bde=$r,vde=cC,wde=!bde(function(){var n=new Error("a");return"stack"in n?(Object.defineProperty(n,"stack",vde(1,7)),n.stack!==7):!0}),yde=_b,Cde=mde,Sde=wde,Rj=Error.captureStackTrace,_de=function(n,e,t,i){Sde&&(Rj?Rj(n,e):yde(n,"stack",Cde(t,i)))},Ej=wg,Rde=Aa,xj=_b,Ede=dC,Tj=vj,Mj=fj,Aj=Uhe,xde=Khe,Tde=lde,Mde=hde,Ade=_de,Pde=Ao,Ide=function(n,e,t,i){var r="stackTraceLimit",s=i?2:1,o=n.split("."),a=o[o.length-1],l=Ej.apply(null,o);if(l){var c=l.prototype;if(Rde(c,"cause")&&delete c.cause,!t)return l;var u=Ej("Error"),h=e(function(d,f){var g=Tde(i?f:d,void 0),p=i?new l(d):new l;return g!==void 0&&xj(p,"message",g),Ade(p,h,p.stack,2),this&&Ede(c,this)&&xde(p,this,h),arguments.length>s&&Mde(p,arguments[s]),p});h.prototype=c,a!=="Error"?Tj?Tj(h,u):Mj(h,u,{name:!0}):Pde&&r in l&&(Aj(h,l,r),Aj(h,l,"prepareStackTrace")),Mj(h,l);try{c.name!==a&&xj(c,"name",a),c.constructor=h}catch{}return h}},Pj=Wi,Ode=Bi,Ia=_C,Ij=Ide,qM="WebAssembly",Oj=Ode[qM],xC=new Error("e",{cause:7}).cause!==7,ed=function(n,e){var t={};t[n]=Ij(n,e,xC),Pj({global:!0,constructor:!0,arity:1,forced:xC},t)},XM=function(n,e){if(Oj&&Oj[n]){var t={};t[n]=Ij(qM+"."+n,e,xC),Pj({target:qM,stat:!0,constructor:!0,arity:1,forced:xC},t)}};ed("Error",function(n){return function(t){return Ia(n,this,arguments)}}),ed("EvalError",function(n){return function(t){return Ia(n,this,arguments)}}),ed("RangeError",function(n){return function(t){return Ia(n,this,arguments)}}),ed("ReferenceError",function(n){return function(t){return Ia(n,this,arguments)}}),ed("SyntaxError",function(n){return function(t){return Ia(n,this,arguments)}}),ed("TypeError",function(n){return function(t){return Ia(n,this,arguments)}}),ed("URIError",function(n){return function(t){return Ia(n,this,arguments)}}),XM("CompileError",function(n){return function(t){return Ia(n,this,arguments)}}),XM("LinkError",function(n){return function(t){return Ia(n,this,arguments)}}),XM("RuntimeError",function(n){return function(t){return Ia(n,this,arguments)}});var kde=Jh,kj=Array.isArray||function(e){return kde(e)==="Array"},Dde=Ao,Nde=kj,Lde=TypeError,Hde=Object.getOwnPropertyDescriptor,$de=Dde&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(n){return n instanceof TypeError}}(),Dj=$de?function(n,e){if(Nde(n)&&!Hde(n,"length").writable)throw new Lde("Cannot set read only .length");return n.length=e}:function(n,e){return n.length=e},Fde=TypeError,Bde=9007199254740991,Nj=function(n){if(n>Bde)throw Fde("Maximum allowed index exceeded");return n},Vde=Wi,Wde=Sb,jde=xb,zde=Dj,Ude=Nj,Gde=$r,Yde=Gde(function(){return[].push.call({length:4294967296},1)!==4294967297}),Kde=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(n){return n instanceof TypeError}},qde=Yde||!Kde();Vde({target:"Array",proto:!0,arity:1,forced:qde},{push:function(e){var t=Wde(this),i=jde(t),r=arguments.length;Ude(i+r);for(var s=0;s<r;s++)t[i]=arguments[s],i++;return zde(t,i),i}});var ZM=gi,TC=Set.prototype,Oa={Set,add:ZM(TC.add),has:ZM(TC.has),remove:ZM(TC.delete),proto:TC},Xde=Oa.has,td=function(n){return Xde(n),n},Zde=Po,nd=function(n,e,t){for(var i=t?n:n.iterator,r=n.next,s,o;!(s=Zde(r,i)).done;)if(o=e(s.value),o!==void 0)return o},Lj=gi,Qde=nd,Hj=Oa,Jde=Hj.Set,$j=Hj.proto,efe=Lj($j.forEach),Fj=Lj($j.keys),tfe=Fj(new Jde).next,Mb=function(n,e,t){return t?Qde({iterator:Fj(n),next:tfe},e):efe(n,e)},Bj=Oa,nfe=Mb,ife=Bj.Set,rfe=Bj.add,QM=function(n){var e=new ife;return nfe(n,function(t){rfe(e,t)}),e},sfe=bj,ofe=Oa,Ab=sfe(ofe.proto,"size","get")||function(n){return n.size},afe=function(n){return{iterator:n,next:n.next,done:!1}},Vj=Cb,Wj=Yl,jj=Po,lfe=Eb,cfe=afe,zj="Invalid size",ufe=RangeError,hfe=TypeError,dfe=Math.max,Uj=function(n,e){this.set=n,this.size=dfe(e,0),this.has=Vj(n.has),this.keys=Vj(n.keys)};Uj.prototype={getIterator:function(){return cfe(Wj(jj(this.keys,this.set)))},includes:function(n){return jj(this.has,this.set,n)}};var id=function(n){Wj(n);var e=+n.size;if(e!==e)throw new hfe(zj);var t=lfe(e);if(t<0)throw new ufe(zj);return new Uj(n,t)},ffe=td,Gj=Oa,gfe=QM,pfe=Ab,mfe=id,bfe=Mb,vfe=nd,wfe=Gj.has,Yj=Gj.remove,yfe=function(e){var t=ffe(this),i=mfe(e),r=gfe(t);return pfe(t)<=i.size?bfe(t,function(s){i.includes(s)&&Yj(r,s)}):vfe(i.getIterator(),function(s){wfe(t,s)&&Yj(r,s)}),r},Cfe=wg,Kj=function(n){return{size:n,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},rd=function(n){var e=Cfe("Set");try{new e()[n](Kj(0));try{return new e()[n](Kj(-1)),!1}catch{return!0}}catch{return!1}},Sfe=Wi,_fe=yfe,Rfe=rd;Sfe({target:"Set",proto:!0,real:!0,forced:!Rfe("difference")},{difference:_fe});var Efe=td,JM=Oa,xfe=Ab,Tfe=id,Mfe=Mb,Afe=nd,Pfe=JM.Set,qj=JM.add,Ife=JM.has,Ofe=function(e){var t=Efe(this),i=Tfe(e),r=new Pfe;return xfe(t)>i.size?Afe(i.getIterator(),function(s){Ife(t,s)&&qj(r,s)}):Mfe(t,function(s){i.includes(s)&&qj(r,s)}),r},kfe=Wi,Dfe=$r,Nfe=Ofe,Lfe=rd,Hfe=!Lfe("intersection")||Dfe(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});kfe({target:"Set",proto:!0,real:!0,forced:Hfe},{intersection:Nfe});var $fe=Po,Xj=Yl,Ffe=mC,eA=function(n,e,t){var i,r;Xj(n);try{if(i=Ffe(n,"return"),!i){if(e==="throw")throw t;return t}i=$fe(i,n)}catch(s){r=!0,i=s}if(e==="throw")throw t;if(r)throw i;return Xj(i),t},Bfe=td,Vfe=Oa.has,Wfe=Ab,jfe=id,zfe=Mb,Ufe=nd,Gfe=eA,Yfe=function(e){var t=Bfe(this),i=jfe(e);if(Wfe(t)<=i.size)return zfe(t,function(s){if(i.includes(s))return!1},!0)!==!1;var r=i.getIterator();return Ufe(r,function(s){if(Vfe(t,s))return Gfe(r,"normal",!1)})!==!1},Kfe=Wi,qfe=Yfe,Xfe=rd;Kfe({target:"Set",proto:!0,real:!0,forced:!Xfe("isDisjointFrom")},{isDisjointFrom:qfe});var Zfe=td,Qfe=Ab,Jfe=Mb,ege=id,tge=function(e){var t=Zfe(this),i=ege(e);return Qfe(t)>i.size?!1:Jfe(t,function(r){if(!i.includes(r))return!1},!0)!==!1},nge=Wi,ige=tge,rge=rd;nge({target:"Set",proto:!0,real:!0,forced:!rge("isSubsetOf")},{isSubsetOf:ige});var sge=td,oge=Oa.has,age=Ab,lge=id,cge=nd,uge=eA,hge=function(e){var t=sge(this),i=lge(e);if(age(t)<i.size)return!1;var r=i.getIterator();return cge(r,function(s){if(!oge(t,s))return uge(r,"normal",!1)})!==!1},dge=Wi,fge=hge,gge=rd;dge({target:"Set",proto:!0,real:!0,forced:!gge("isSupersetOf")},{isSupersetOf:fge});var pge=td,tA=Oa,mge=QM,bge=id,vge=nd,wge=tA.add,yge=tA.has,Cge=tA.remove,Sge=function(e){var t=pge(this),i=bge(e).getIterator(),r=mge(t);return vge(i,function(s){yge(t,s)?Cge(r,s):wge(r,s)}),r},_ge=Wi,Rge=Sge,Ege=rd;_ge({target:"Set",proto:!0,real:!0,forced:!Ege("symmetricDifference")},{symmetricDifference:Rge});var xge=td,Tge=Oa.add,Mge=QM,Age=id,Pge=nd,Ige=function(e){var t=xge(this),i=Age(e).getIterator(),r=Mge(t);return Pge(i,function(s){Tge(r,s)}),r},Oge=Wi,kge=Ige,Dge=rd;Oge({target:"Set",proto:!0,real:!0,forced:!Dge("union")},{union:kge});var Nge=Jh,Lge=gi,Hge=function(n){if(Nge(n)==="Function")return Lge(n)},Zj=Hge,$ge=Cb,Fge=aC,Bge=Zj(Zj.bind),Qj=function(n,e){return $ge(n),e===void 0?n:Fge?Bge(n,e):function(){return n.apply(e,arguments)}},Vge=wg,Jj=Vge("document","documentElement"),Wge=gi,nA=Wge([].slice),jge=TypeError,e6=function(n,e){if(n<e)throw new jge("Not enough arguments");return n},zge=fC,Uge=/(?:ipad|iphone|ipod).*applewebkit/i.test(zge),Pb=Bi,Gge=fC,Yge=Jh,MC=function(n){return Gge.slice(0,n.length)===n},t6=function(){return MC("Bun/")?"BUN":MC("Cloudflare-Workers")?"CLOUDFLARE":MC("Deno/")?"DENO":MC("Node.js/")?"NODE":Pb.Bun&&typeof Bun.version=="string"?"BUN":Pb.Deno&&typeof Deno.version=="object"?"DENO":Yge(Pb.process)==="process"?"NODE":Pb.window&&Pb.document?"BROWSER":"REST"}(),Kge=t6,qge=Kge==="NODE",ds=Bi,Xge=_C,Zge=Qj,n6=Vi,Qge=Aa,i6=$r,r6=Jj,Jge=nA,s6=kM,epe=e6,tpe=Uge,npe=qge,iA=ds.setImmediate,rA=ds.clearImmediate,ipe=ds.process,sA=ds.Dispatch,rpe=ds.Function,o6=ds.MessageChannel,spe=ds.String,oA=0,Ib={},a6="onreadystatechange",Ob,sd,aA,lA;i6(function(){Ob=ds.location});var cA=function(n){if(Qge(Ib,n)){var e=Ib[n];delete Ib[n],e()}},uA=function(n){return function(){cA(n)}},l6=function(n){cA(n.data)},c6=function(n){ds.postMessage(spe(n),Ob.protocol+"//"+Ob.host)};(!iA||!rA)&&(iA=function(e){epe(arguments.length,1);var t=n6(e)?e:rpe(e),i=Jge(arguments,1);return Ib[++oA]=function(){Xge(t,void 0,i)},sd(oA),oA},rA=function(e){delete Ib[e]},npe?sd=function(n){ipe.nextTick(uA(n))}:sA&&sA.now?sd=function(n){sA.now(uA(n))}:o6&&!tpe?(aA=new o6,lA=aA.port2,aA.port1.onmessage=l6,sd=Zge(lA.postMessage,lA)):ds.addEventListener&&n6(ds.postMessage)&&!ds.importScripts&&Ob&&Ob.protocol!=="file:"&&!i6(c6)?(sd=c6,ds.addEventListener("message",l6,!1)):a6 in s6("script")?sd=function(n){r6.appendChild(s6("script"))[a6]=function(){r6.removeChild(this),cA(n)}}:sd=function(n){setTimeout(uA(n),0)});var u6={set:iA,clear:rA},ope=Wi,ape=Bi,h6=u6.clear;ope({global:!0,bind:!0,enumerable:!0,forced:ape.clearImmediate!==h6},{clearImmediate:h6});var d6=Bi,lpe=_C,cpe=Vi,upe=t6,hpe=fC,dpe=nA,fpe=e6,gpe=d6.Function,ppe=/MSIE .\./.test(hpe)||upe==="BUN"&&function(){var n=d6.Bun.version.split(".");return n.length<3||n[0]==="0"&&(n[1]<3||n[1]==="3"&&n[2]==="0")}(),mpe=function(n,e){var t=e?2:1;return ppe?function(i,r){var s=fpe(arguments.length,1)>t,o=cpe(i)?i:gpe(i),a=s?dpe(arguments,t):[],l=s?function(){lpe(o,this,a)}:o;return e?n(l,r):n(l)}:n},bpe=Wi,f6=Bi,g6=u6.set,vpe=mpe,p6=f6.setImmediate?vpe(g6,!1):g6;bpe({global:!0,bind:!0,enumerable:!0,forced:f6.setImmediate!==p6},{setImmediate:p6});/*! @license DOMPurify 2.5.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.7/LICENSE */function pu(n){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(n)}function hA(n,e){return hA=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},hA(n,e)}function wpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function AC(n,e,t){return wpe()?AC=Reflect.construct:AC=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),c=new l;return o&&hA(c,o.prototype),c},AC.apply(null,arguments)}function Oo(n){return ype(n)||Cpe(n)||Spe(n)||_pe()}function ype(n){if(Array.isArray(n))return dA(n)}function Cpe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Spe(n,e){if(n){if(typeof n=="string")return dA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dA(n,e)}}function dA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function _pe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Rpe=Object.hasOwnProperty,m6=Object.setPrototypeOf,Epe=Object.isFrozen,xpe=Object.getPrototypeOf,Tpe=Object.getOwnPropertyDescriptor,_r=Object.freeze,$s=Object.seal,Mpe=Object.create,b6=typeof Reflect<"u"&&Reflect,PC=b6.apply,fA=b6.construct;PC||(PC=function(e,t,i){return e.apply(t,i)}),_r||(_r=function(e){return e}),$s||($s=function(e){return e}),fA||(fA=function(e,t){return AC(e,Oo(t))});var Ape=Fs(Array.prototype.forEach),v6=Fs(Array.prototype.pop),kb=Fs(Array.prototype.push),IC=Fs(String.prototype.toLowerCase),gA=Fs(String.prototype.toString),w6=Fs(String.prototype.match),ko=Fs(String.prototype.replace),Ppe=Fs(String.prototype.indexOf),Ipe=Fs(String.prototype.trim),ji=Fs(RegExp.prototype.test),pA=Ope(TypeError);function Fs(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return PC(n,e,i)}}function Ope(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return fA(n,t)}}function ht(n,e,t){var i;t=(i=t)!==null&&i!==void 0?i:IC,m6&&m6(n,null);for(var r=e.length;r--;){var s=e[r];if(typeof s=="string"){var o=t(s);o!==s&&(Epe(e)||(e[r]=o),s=o)}n[s]=!0}return n}function od(n){var e=Mpe(null),t;for(t in n)PC(Rpe,n,[t])===!0&&(e[t]=n[t]);return e}function OC(n,e){for(;n!==null;){var t=Tpe(n,e);if(t){if(t.get)return Fs(t.get);if(typeof t.value=="function")return Fs(t.value)}n=xpe(n)}function i(r){return console.warn("fallback value for",r),null}return i}var y6=_r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mA=_r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),bA=_r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kpe=_r(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vA=_r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Dpe=_r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),C6=_r(["#text"]),S6=_r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),wA=_r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_6=_r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),kC=_r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Npe=$s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Lpe=$s(/<%[\w\W]*|[\w\W]*%>/gm),Hpe=$s(/\${[\w\W]*}/gm),$pe=$s(/^data-[\-\w.\u00B7-\uFFFF]/),Fpe=$s(/^aria-[\-\w]+$/),Bpe=$s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Vpe=$s(/^(?:\w+script|data):/i),Wpe=$s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),jpe=$s(/^html$/i),zpe=$s(/^[a-z][.\w]*(-[.\w]+)+$/i),Upe=function(){return typeof window>"u"?null:window},Gpe=function(e,t){if(pu(e)!=="object"||typeof e.createPolicy!="function")return null;var i=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(i=t.currentScript.getAttribute(r));var s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML:function(a){return a},createScriptURL:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function R6(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Upe(),e=function(q){return R6(q)};if(e.version="2.5.7",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;var t=n.document,i=n.document,r=n.DocumentFragment,s=n.HTMLTemplateElement,o=n.Node,a=n.Element,l=n.NodeFilter,c=n.NamedNodeMap,u=c===void 0?n.NamedNodeMap||n.MozNamedAttrMap:c,h=n.HTMLFormElement,d=n.DOMParser,f=n.trustedTypes,g=a.prototype,p=OC(g,"cloneNode"),m=OC(g,"nextSibling"),v=OC(g,"childNodes"),y=OC(g,"parentNode");if(typeof s=="function"){var w=i.createElement("template");w.content&&w.content.ownerDocument&&(i=w.content.ownerDocument)}var _=Gpe(f,t),R=_?_.createHTML(""):"",E=i,x=E.implementation,P=E.createNodeIterator,T=E.createDocumentFragment,I=E.getElementsByTagName,N=t.importNode,W={};try{W=od(i).documentMode?i.documentMode:{}}catch{}var j={};e.isSupported=typeof y=="function"&&x&&x.createHTMLDocument!==void 0&&W!==9;var K=Npe,H=Lpe,k=Hpe,B=$pe,G=Fpe,z=Vpe,se=Wpe,b=zpe,C=Bpe,S=null,A=ht({},[].concat(Oo(y6),Oo(mA),Oo(bA),Oo(vA),Oo(C6))),L=null,M=ht({},[].concat(Oo(S6),Oo(wA),Oo(_6),Oo(kC))),$=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Z=null,re=null,ue=!0,ae=!0,De=!1,Ee=!0,ee=!1,oe=!0,le=!1,je=!1,ye=!1,xe=!1,O=!1,D=!1,F=!0,Q=!1,U="user-content-",ne=!0,X=!1,Y={},J=null,te=ht({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ie=null,be=ht({},["audio","video","img","source","image","track"]),Ae=null,Fe=ht({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),lt="http://www.w3.org/1998/Math/MathML",Et="http://www.w3.org/2000/svg",ft="http://www.w3.org/1999/xhtml",qe=ft,Tt=!1,Un=null,am=ht({},[lt,Et,ft],gA),ua,Ey=["application/xhtml+xml","text/html"],bo="text/html",kn,Ei=null,Gi=i.createElement("form"),En=function(q){return q instanceof RegExp||q instanceof Function},EH=function(q){Ei&&Ei===q||((!q||pu(q)!=="object")&&(q={}),q=od(q),ua=Ey.indexOf(q.PARSER_MEDIA_TYPE)===-1?ua=bo:ua=q.PARSER_MEDIA_TYPE,kn=ua==="application/xhtml+xml"?gA:IC,S="ALLOWED_TAGS"in q?ht({},q.ALLOWED_TAGS,kn):A,L="ALLOWED_ATTR"in q?ht({},q.ALLOWED_ATTR,kn):M,Un="ALLOWED_NAMESPACES"in q?ht({},q.ALLOWED_NAMESPACES,gA):am,Ae="ADD_URI_SAFE_ATTR"in q?ht(od(Fe),q.ADD_URI_SAFE_ATTR,kn):Fe,ie="ADD_DATA_URI_TAGS"in q?ht(od(be),q.ADD_DATA_URI_TAGS,kn):be,J="FORBID_CONTENTS"in q?ht({},q.FORBID_CONTENTS,kn):te,Z="FORBID_TAGS"in q?ht({},q.FORBID_TAGS,kn):{},re="FORBID_ATTR"in q?ht({},q.FORBID_ATTR,kn):{},Y="USE_PROFILES"in q?q.USE_PROFILES:!1,ue=q.ALLOW_ARIA_ATTR!==!1,ae=q.ALLOW_DATA_ATTR!==!1,De=q.ALLOW_UNKNOWN_PROTOCOLS||!1,Ee=q.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ee=q.SAFE_FOR_TEMPLATES||!1,oe=q.SAFE_FOR_XML!==!1,le=q.WHOLE_DOCUMENT||!1,xe=q.RETURN_DOM||!1,O=q.RETURN_DOM_FRAGMENT||!1,D=q.RETURN_TRUSTED_TYPE||!1,ye=q.FORCE_BODY||!1,F=q.SANITIZE_DOM!==!1,Q=q.SANITIZE_NAMED_PROPS||!1,ne=q.KEEP_CONTENT!==!1,X=q.IN_PLACE||!1,C=q.ALLOWED_URI_REGEXP||C,qe=q.NAMESPACE||ft,$=q.CUSTOM_ELEMENT_HANDLING||{},q.CUSTOM_ELEMENT_HANDLING&&En(q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($.tagNameCheck=q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),q.CUSTOM_ELEMENT_HANDLING&&En(q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($.attributeNameCheck=q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),q.CUSTOM_ELEMENT_HANDLING&&typeof q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($.allowCustomizedBuiltInElements=q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ee&&(ae=!1),O&&(xe=!0),Y&&(S=ht({},Oo(C6)),L=[],Y.html===!0&&(ht(S,y6),ht(L,S6)),Y.svg===!0&&(ht(S,mA),ht(L,wA),ht(L,kC)),Y.svgFilters===!0&&(ht(S,bA),ht(L,wA),ht(L,kC)),Y.mathMl===!0&&(ht(S,vA),ht(L,_6),ht(L,kC))),q.ADD_TAGS&&(S===A&&(S=od(S)),ht(S,q.ADD_TAGS,kn)),q.ADD_ATTR&&(L===M&&(L=od(L)),ht(L,q.ADD_ATTR,kn)),q.ADD_URI_SAFE_ATTR&&ht(Ae,q.ADD_URI_SAFE_ATTR,kn),q.FORBID_CONTENTS&&(J===te&&(J=od(J)),ht(J,q.FORBID_CONTENTS,kn)),ne&&(S["#text"]=!0),le&&ht(S,["html","head","body"]),S.table&&(ht(S,["tbody"]),delete Z.tbody),_r&&_r(q),Ei=q)},$X=ht({},["mi","mo","mn","ms","mtext"]),FX=ht({},["annotation-xml"]),d8e=ht({},["title","style","font","a","script"]),_E=ht({},mA);ht(_E,bA),ht(_E,kpe);var xH=ht({},vA);ht(xH,Dpe);var f8e=function(q){var pe=y(q);(!pe||!pe.tagName)&&(pe={namespaceURI:qe,tagName:"template"});var Te=IC(q.tagName),zt=IC(pe.tagName);return Un[q.namespaceURI]?q.namespaceURI===Et?pe.namespaceURI===ft?Te==="svg":pe.namespaceURI===lt?Te==="svg"&&(zt==="annotation-xml"||$X[zt]):!!_E[Te]:q.namespaceURI===lt?pe.namespaceURI===ft?Te==="math":pe.namespaceURI===Et?Te==="math"&&FX[zt]:!!xH[Te]:q.namespaceURI===ft?pe.namespaceURI===Et&&!FX[zt]||pe.namespaceURI===lt&&!$X[zt]?!1:!xH[Te]&&(d8e[Te]||!_E[Te]):!!(ua==="application/xhtml+xml"&&Un[q.namespaceURI]):!1},vo=function(q){kb(e.removed,{element:q});try{q.parentNode.removeChild(q)}catch{try{q.outerHTML=R}catch{q.remove()}}},RE=function(q,pe){try{kb(e.removed,{attribute:pe.getAttributeNode(q),from:pe})}catch{kb(e.removed,{attribute:null,from:pe})}if(pe.removeAttribute(q),q==="is"&&!L[q])if(xe||O)try{vo(pe)}catch{}else try{pe.setAttribute(q,"")}catch{}},BX=function(q){var pe,Te;if(ye)q="<remove></remove>"+q;else{var zt=w6(q,/^[\r\n\t ]+/);Te=zt&&zt[0]}ua==="application/xhtml+xml"&&qe===ft&&(q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+q+"</body></html>");var Jr=_?_.createHTML(q):q;if(qe===ft)try{pe=new d().parseFromString(Jr,ua)}catch{}if(!pe||!pe.documentElement){pe=x.createDocument(qe,"template",null);try{pe.documentElement.innerHTML=Tt?R:Jr}catch{}}var br=pe.body||pe.documentElement;return q&&Te&&br.insertBefore(i.createTextNode(Te),br.childNodes[0]||null),qe===ft?I.call(pe,le?"html":"body")[0]:le?pe.documentElement:br},VX=function(q){return P.call(q.ownerDocument||q,q,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null,!1)},WX=function(q){return q instanceof h&&(typeof q.nodeName!="string"||typeof q.textContent!="string"||typeof q.removeChild!="function"||!(q.attributes instanceof u)||typeof q.removeAttribute!="function"||typeof q.setAttribute!="function"||typeof q.namespaceURI!="string"||typeof q.insertBefore!="function"||typeof q.hasChildNodes!="function")},xy=function(q){return pu(o)==="object"?q instanceof o:q&&pu(q)==="object"&&typeof q.nodeType=="number"&&typeof q.nodeName=="string"},Wc=function(q,pe,Te){j[q]&&Ape(j[q],function(zt){zt.call(e,pe,Te,Ei)})},jX=function(q){var pe;if(Wc("beforeSanitizeElements",q,null),WX(q)||ji(/[\u0080-\uFFFF]/,q.nodeName))return vo(q),!0;var Te=kn(q.nodeName);if(Wc("uponSanitizeElement",q,{tagName:Te,allowedTags:S}),q.hasChildNodes()&&!xy(q.firstElementChild)&&(!xy(q.content)||!xy(q.content.firstElementChild))&&ji(/<[/\w]/g,q.innerHTML)&&ji(/<[/\w]/g,q.textContent)||Te==="select"&&ji(/<template/i,q.innerHTML)||q.nodeType===7||oe&&q.nodeType===8&&ji(/<[/\w]/g,q.data))return vo(q),!0;if(!S[Te]||Z[Te]){if(!Z[Te]&&UX(Te)&&($.tagNameCheck instanceof RegExp&&ji($.tagNameCheck,Te)||$.tagNameCheck instanceof Function&&$.tagNameCheck(Te)))return!1;if(ne&&!J[Te]){var zt=y(q)||q.parentNode,Jr=v(q)||q.childNodes;if(Jr&&zt)for(var br=Jr.length,Yi=br-1;Yi>=0;--Yi){var Af=p(Jr[Yi],!0);Af.__removalCount=(q.__removalCount||0)+1,zt.insertBefore(Af,m(q))}}return vo(q),!0}return q instanceof a&&!f8e(q)||(Te==="noscript"||Te==="noembed"||Te==="noframes")&&ji(/<\/no(script|embed|frames)/i,q.innerHTML)?(vo(q),!0):(ee&&q.nodeType===3&&(pe=q.textContent,pe=ko(pe,K," "),pe=ko(pe,H," "),pe=ko(pe,k," "),q.textContent!==pe&&(kb(e.removed,{element:q.cloneNode()}),q.textContent=pe)),Wc("afterSanitizeElements",q,null),!1)},zX=function(q,pe,Te){if(F&&(pe==="id"||pe==="name")&&(Te in i||Te in Gi))return!1;if(!(ae&&!re[pe]&&ji(B,pe))){if(!(ue&&ji(G,pe))){if(!L[pe]||re[pe]){if(!(UX(q)&&($.tagNameCheck instanceof RegExp&&ji($.tagNameCheck,q)||$.tagNameCheck instanceof Function&&$.tagNameCheck(q))&&($.attributeNameCheck instanceof RegExp&&ji($.attributeNameCheck,pe)||$.attributeNameCheck instanceof Function&&$.attributeNameCheck(pe))||pe==="is"&&$.allowCustomizedBuiltInElements&&($.tagNameCheck instanceof RegExp&&ji($.tagNameCheck,Te)||$.tagNameCheck instanceof Function&&$.tagNameCheck(Te))))return!1}else if(!Ae[pe]){if(!ji(C,ko(Te,se,""))){if(!((pe==="src"||pe==="xlink:href"||pe==="href")&&q!=="script"&&Ppe(Te,"data:")===0&&ie[q])){if(!(De&&!ji(z,ko(Te,se,"")))){if(Te)return!1}}}}}}return!0},UX=function(q){return q!=="annotation-xml"&&w6(q,b)},GX=function(q){var pe,Te,zt,Jr;Wc("beforeSanitizeAttributes",q,null);var br=q.attributes;if(br){var Yi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:L};for(Jr=br.length;Jr--;){pe=br[Jr];var Af=pe,xi=Af.name,TH=Af.namespaceURI;if(Te=xi==="value"?pe.value:Ipe(pe.value),zt=kn(xi),Yi.attrName=zt,Yi.attrValue=Te,Yi.keepAttr=!0,Yi.forceKeepAttr=void 0,Wc("uponSanitizeAttribute",q,Yi),Te=Yi.attrValue,!Yi.forceKeepAttr&&(RE(xi,q),!!Yi.keepAttr)){if(!Ee&&ji(/\/>/i,Te)){RE(xi,q);continue}ee&&(Te=ko(Te,K," "),Te=ko(Te,H," "),Te=ko(Te,k," "));var YX=kn(q.nodeName);if(zX(YX,zt,Te)){if(Q&&(zt==="id"||zt==="name")&&(RE(xi,q),Te=U+Te),oe&&ji(/((--!?|])>)|<\/(style|title)/i,Te)){RE(xi,q);continue}if(_&&pu(f)==="object"&&typeof f.getAttributeType=="function"&&!TH)switch(f.getAttributeType(YX,zt)){case"TrustedHTML":{Te=_.createHTML(Te);break}case"TrustedScriptURL":{Te=_.createScriptURL(Te);break}}try{TH?q.setAttributeNS(TH,xi,Te):q.setAttribute(xi,Te),WX(q)?vo(q):v6(e.removed)}catch{}}}}Wc("afterSanitizeAttributes",q,null)}},g8e=function Be(q){var pe,Te=VX(q);for(Wc("beforeSanitizeShadowDOM",q,null);pe=Te.nextNode();)Wc("uponSanitizeShadowNode",pe,null),!jX(pe)&&(pe.content instanceof r&&Be(pe.content),GX(pe));Wc("afterSanitizeShadowDOM",q,null)};return e.sanitize=function(Be){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe,Te,zt,Jr,br;if(Tt=!Be,Tt&&(Be="<!-->"),typeof Be!="string"&&!xy(Be))if(typeof Be.toString=="function"){if(Be=Be.toString(),typeof Be!="string")throw pA("dirty is not a string, aborting")}else throw pA("toString is not a function");if(!e.isSupported){if(pu(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Be=="string")return n.toStaticHTML(Be);if(xy(Be))return n.toStaticHTML(Be.outerHTML)}return Be}if(je||EH(q),e.removed=[],typeof Be=="string"&&(X=!1),X){if(Be.nodeName){var Yi=kn(Be.nodeName);if(!S[Yi]||Z[Yi])throw pA("root node is forbidden and cannot be sanitized in-place")}}else if(Be instanceof o)pe=BX("<!---->"),Te=pe.ownerDocument.importNode(Be,!0),Te.nodeType===1&&Te.nodeName==="BODY"||Te.nodeName==="HTML"?pe=Te:pe.appendChild(Te);else{if(!xe&&!ee&&!le&&Be.indexOf("<")===-1)return _&&D?_.createHTML(Be):Be;if(pe=BX(Be),!pe)return xe?null:D?R:""}pe&&ye&&vo(pe.firstChild);for(var Af=VX(X?Be:pe);zt=Af.nextNode();)zt.nodeType===3&&zt===Jr||jX(zt)||(zt.content instanceof r&&g8e(zt.content),GX(zt),Jr=zt);if(Jr=null,X)return Be;if(xe){if(O)for(br=T.call(pe.ownerDocument);pe.firstChild;)br.appendChild(pe.firstChild);else br=pe;return(L.shadowroot||L.shadowrootmod)&&(br=N.call(t,br,!0)),br}var xi=le?pe.outerHTML:pe.innerHTML;return le&&S["!doctype"]&&pe.ownerDocument&&pe.ownerDocument.doctype&&pe.ownerDocument.doctype.name&&ji(jpe,pe.ownerDocument.doctype.name)&&(xi="<!DOCTYPE "+pe.ownerDocument.doctype.name+`>
`+xi),ee&&(xi=ko(xi,K," "),xi=ko(xi,H," "),xi=ko(xi,k," ")),_&&D?_.createHTML(xi):xi},e.setConfig=function(Be){EH(Be),je=!0},e.clearConfig=function(){Ei=null,je=!1},e.isValidAttribute=function(Be,q,pe){Ei||EH({});var Te=kn(Be),zt=kn(q);return zX(Te,zt,pe)},e.addHook=function(Be,q){typeof q=="function"&&(j[Be]=j[Be]||[],kb(j[Be],q))},e.removeHook=function(Be){if(j[Be])return v6(j[Be])},e.removeHooks=function(Be){j[Be]&&(j[Be]=[])},e.removeAllHooks=function(){j={}},e}var Ype=R6();//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var E6;function he(){return E6.apply(null,arguments)}function Kpe(n){E6=n}function Do(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function ad(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function $t(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function yA(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var e;for(e in n)if($t(n,e))return!1;return!0}function Fr(n){return n===void 0}function Kl(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function Db(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function x6(n,e){var t=[],i,r=n.length;for(i=0;i<r;++i)t.push(e(n[i],i));return t}function mu(n,e){for(var t in e)$t(e,t)&&(n[t]=e[t]);return $t(e,"toString")&&(n.toString=e.toString),$t(e,"valueOf")&&(n.valueOf=e.valueOf),n}function ka(n,e,t,i){return J6(n,e,t,i,!0).utc()}function qpe(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ct(n){return n._pf==null&&(n._pf=qpe()),n._pf}var CA;Array.prototype.some?CA=Array.prototype.some:CA=function(n){var e=Object(this),t=e.length>>>0,i;for(i=0;i<t;i++)if(i in e&&n.call(this,e[i],i,e))return!0;return!1};function SA(n){var e=null,t=!1,i=n._d&&!isNaN(n._d.getTime());if(i&&(e=ct(n),t=CA.call(e.parsedDateParts,function(r){return r!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),n._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=i;else return i;return n._isValid}function DC(n){var e=ka(NaN);return n!=null?mu(ct(e),n):ct(e).userInvalidated=!0,e}var T6=he.momentProperties=[],_A=!1;function RA(n,e){var t,i,r,s=T6.length;if(Fr(e._isAMomentObject)||(n._isAMomentObject=e._isAMomentObject),Fr(e._i)||(n._i=e._i),Fr(e._f)||(n._f=e._f),Fr(e._l)||(n._l=e._l),Fr(e._strict)||(n._strict=e._strict),Fr(e._tzm)||(n._tzm=e._tzm),Fr(e._isUTC)||(n._isUTC=e._isUTC),Fr(e._offset)||(n._offset=e._offset),Fr(e._pf)||(n._pf=ct(e)),Fr(e._locale)||(n._locale=e._locale),s>0)for(t=0;t<s;t++)i=T6[t],r=e[i],Fr(r)||(n[i]=r);return n}function Nb(n){RA(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),_A===!1&&(_A=!0,he.updateOffset(this),_A=!1)}function No(n){return n instanceof Nb||n!=null&&n._isAMomentObject!=null}function M6(n){he.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function Bs(n,e){var t=!0;return mu(function(){if(he.deprecationHandler!=null&&he.deprecationHandler(null,n),t){var i=[],r,s,o,a=arguments.length;for(s=0;s<a;s++){if(r="",typeof arguments[s]=="object"){r+=`
[`+s+"] ";for(o in arguments[0])$t(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[s];i.push(r)}M6(n+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var A6={};function P6(n,e){he.deprecationHandler!=null&&he.deprecationHandler(n,e),A6[n]||(M6(e),A6[n]=!0)}he.suppressDeprecationWarnings=!1,he.deprecationHandler=null;function Da(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function Xpe(n){var e,t;for(t in n)$t(n,t)&&(e=n[t],Da(e)?this[t]=e:this["_"+t]=e);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function EA(n,e){var t=mu({},n),i;for(i in e)$t(e,i)&&(ad(n[i])&&ad(e[i])?(t[i]={},mu(t[i],n[i]),mu(t[i],e[i])):e[i]!=null?t[i]=e[i]:delete t[i]);for(i in n)$t(n,i)&&!$t(e,i)&&ad(n[i])&&(t[i]=mu({},t[i]));return t}function xA(n){n!=null&&this.set(n)}var TA;Object.keys?TA=Object.keys:TA=function(n){var e,t=[];for(e in n)$t(n,e)&&t.push(e);return t};var Zpe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Qpe(n,e,t){var i=this._calendar[n]||this._calendar.sameElse;return Da(i)?i.call(e,t):i}function Na(n,e,t){var i=""+Math.abs(n),r=e-i.length,s=n>=0;return(s?t?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var MA=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,NC=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,AA={},Sg={};function Ve(n,e,t,i){var r=i;typeof i=="string"&&(r=function(){return this[i]()}),n&&(Sg[n]=r),e&&(Sg[e[0]]=function(){return Na(r.apply(this,arguments),e[1],e[2])}),t&&(Sg[t]=function(){return this.localeData().ordinal(r.apply(this,arguments),n)})}function Jpe(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function eme(n){var e=n.match(MA),t,i;for(t=0,i=e.length;t<i;t++)Sg[e[t]]?e[t]=Sg[e[t]]:e[t]=Jpe(e[t]);return function(r){var s="",o;for(o=0;o<i;o++)s+=Da(e[o])?e[o].call(r,n):e[o];return s}}function LC(n,e){return n.isValid()?(e=I6(e,n.localeData()),AA[e]=AA[e]||eme(e),AA[e](n)):n.localeData().invalidDate()}function I6(n,e){var t=5;function i(r){return e.longDateFormat(r)||r}for(NC.lastIndex=0;t>=0&&NC.test(n);)n=n.replace(NC,i),NC.lastIndex=0,t-=1;return n}var tme={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function nme(n){var e=this._longDateFormat[n],t=this._longDateFormat[n.toUpperCase()];return e||!t?e:(this._longDateFormat[n]=t.match(MA).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[n])}var ime="Invalid date";function rme(){return this._invalidDate}var sme="%d",ome=/\d{1,2}/;function ame(n){return this._ordinal.replace("%d",n)}var lme={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function cme(n,e,t,i){var r=this._relativeTime[t];return Da(r)?r(n,e,t,i):r.replace(/%d/i,n)}function ume(n,e){var t=this._relativeTime[n>0?"future":"past"];return Da(t)?t(e):t.replace(/%s/i,e)}var O6={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Vs(n){return typeof n=="string"?O6[n]||O6[n.toLowerCase()]:void 0}function PA(n){var e={},t,i;for(i in n)$t(n,i)&&(t=Vs(i),t&&(e[t]=n[i]));return e}var hme={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function dme(n){var e=[],t;for(t in n)$t(n,t)&&e.push({unit:t,priority:hme[t]});return e.sort(function(i,r){return i.priority-r.priority}),e}var k6=/\d/,fs=/\d\d/,D6=/\d{3}/,IA=/\d{4}/,HC=/[+-]?\d{6}/,Cn=/\d\d?/,N6=/\d\d\d\d?/,L6=/\d\d\d\d\d\d?/,$C=/\d{1,3}/,OA=/\d{1,4}/,FC=/[+-]?\d{1,6}/,_g=/\d+/,BC=/[+-]?\d+/,fme=/Z|[+-]\d\d:?\d\d/gi,VC=/Z|[+-]\d\d(?::?\d\d)?/gi,gme=/[+-]?\d+(\.\d{1,3})?/,Lb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Rg=/^[1-9]\d?/,kA=/^([1-9]\d|\d)/,WC;WC={};function ke(n,e,t){WC[n]=Da(e)?e:function(i,r){return i&&t?t:e}}function pme(n,e){return $t(WC,n)?WC[n](e._strict,e._locale):new RegExp(mme(n))}function mme(n){return ql(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,r,s){return t||i||r||s}))}function ql(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ws(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function Rt(n){var e=+n,t=0;return e!==0&&isFinite(e)&&(t=Ws(e)),t}var DA={};function tn(n,e){var t,i=e,r;for(typeof n=="string"&&(n=[n]),Kl(e)&&(i=function(s,o){o[e]=Rt(s)}),r=n.length,t=0;t<r;t++)DA[n[t]]=i}function Hb(n,e){tn(n,function(t,i,r,s){r._w=r._w||{},e(t,r._w,r,s)})}function bme(n,e,t){e!=null&&$t(DA,n)&&DA[n](e,t._a,t,n)}function jC(n){return n%4===0&&n%100!==0||n%400===0}var ir=0,Xl=1,La=2,bi=3,Lo=4,Zl=5,ld=6,vme=7,wme=8;Ve("Y",0,0,function(){var n=this.year();return n<=9999?Na(n,4):"+"+n}),Ve(0,["YY",2],0,function(){return this.year()%100}),Ve(0,["YYYY",4],0,"year"),Ve(0,["YYYYY",5],0,"year"),Ve(0,["YYYYYY",6,!0],0,"year"),ke("Y",BC),ke("YY",Cn,fs),ke("YYYY",OA,IA),ke("YYYYY",FC,HC),ke("YYYYYY",FC,HC),tn(["YYYYY","YYYYYY"],ir),tn("YYYY",function(n,e){e[ir]=n.length===2?he.parseTwoDigitYear(n):Rt(n)}),tn("YY",function(n,e){e[ir]=he.parseTwoDigitYear(n)}),tn("Y",function(n,e){e[ir]=parseInt(n,10)});function $b(n){return jC(n)?366:365}he.parseTwoDigitYear=function(n){return Rt(n)+(Rt(n)>68?1900:2e3)};var H6=Eg("FullYear",!0);function yme(){return jC(this.year())}function Eg(n,e){return function(t){return t!=null?($6(this,n,t),he.updateOffset(this,e),this):Fb(this,n)}}function Fb(n,e){if(!n.isValid())return NaN;var t=n._d,i=n._isUTC;switch(e){case"Milliseconds":return i?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return i?t.getUTCSeconds():t.getSeconds();case"Minutes":return i?t.getUTCMinutes():t.getMinutes();case"Hours":return i?t.getUTCHours():t.getHours();case"Date":return i?t.getUTCDate():t.getDate();case"Day":return i?t.getUTCDay():t.getDay();case"Month":return i?t.getUTCMonth():t.getMonth();case"FullYear":return i?t.getUTCFullYear():t.getFullYear();default:return NaN}}function $6(n,e,t){var i,r,s,o,a;if(!(!n.isValid()||isNaN(t))){switch(i=n._d,r=n._isUTC,e){case"Milliseconds":return void(r?i.setUTCMilliseconds(t):i.setMilliseconds(t));case"Seconds":return void(r?i.setUTCSeconds(t):i.setSeconds(t));case"Minutes":return void(r?i.setUTCMinutes(t):i.setMinutes(t));case"Hours":return void(r?i.setUTCHours(t):i.setHours(t));case"Date":return void(r?i.setUTCDate(t):i.setDate(t));case"FullYear":break;default:return}s=t,o=n.month(),a=n.date(),a=a===29&&o===1&&!jC(s)?28:a,r?i.setUTCFullYear(s,o,a):i.setFullYear(s,o,a)}}function Cme(n){return n=Vs(n),Da(this[n])?this[n]():this}function Sme(n,e){if(typeof n=="object"){n=PA(n);var t=dme(n),i,r=t.length;for(i=0;i<r;i++)this[t[i].unit](n[t[i].unit])}else if(n=Vs(n),Da(this[n]))return this[n](e);return this}function _me(n,e){return(n%e+e)%e}var ri;Array.prototype.indexOf?ri=Array.prototype.indexOf:ri=function(n){var e;for(e=0;e<this.length;++e)if(this[e]===n)return e;return-1};function NA(n,e){if(isNaN(n)||isNaN(e))return NaN;var t=_me(e,12);return n+=(e-t)/12,t===1?jC(n)?29:28:31-t%7%2}Ve("M",["MM",2],"Mo",function(){return this.month()+1}),Ve("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)}),Ve("MMMM",0,0,function(n){return this.localeData().months(this,n)}),ke("M",Cn,Rg),ke("MM",Cn,fs),ke("MMM",function(n,e){return e.monthsShortRegex(n)}),ke("MMMM",function(n,e){return e.monthsRegex(n)}),tn(["M","MM"],function(n,e){e[Xl]=Rt(n)-1}),tn(["MMM","MMMM"],function(n,e,t,i){var r=t._locale.monthsParse(n,i,t._strict);r!=null?e[Xl]=r:ct(t).invalidMonth=n});var Rme="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),F6="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),B6=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Eme=Lb,xme=Lb;function Tme(n,e){return n?Do(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||B6).test(e)?"format":"standalone"][n.month()]:Do(this._months)?this._months:this._months.standalone}function Mme(n,e){return n?Do(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[B6.test(e)?"format":"standalone"][n.month()]:Do(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Ame(n,e,t){var i,r,s,o=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)s=ka([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return t?e==="MMM"?(r=ri.call(this._shortMonthsParse,o),r!==-1?r:null):(r=ri.call(this._longMonthsParse,o),r!==-1?r:null):e==="MMM"?(r=ri.call(this._shortMonthsParse,o),r!==-1?r:(r=ri.call(this._longMonthsParse,o),r!==-1?r:null)):(r=ri.call(this._longMonthsParse,o),r!==-1?r:(r=ri.call(this._shortMonthsParse,o),r!==-1?r:null))}function Pme(n,e,t){var i,r,s;if(this._monthsParseExact)return Ame.call(this,n,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=ka([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[i].test(n))return i;if(t&&e==="MMM"&&this._shortMonthsParse[i].test(n))return i;if(!t&&this._monthsParse[i].test(n))return i}}function V6(n,e){if(!n.isValid())return n;if(typeof e=="string"){if(/^\d+$/.test(e))e=Rt(e);else if(e=n.localeData().monthsParse(e),!Kl(e))return n}var t=e,i=n.date();return i=i<29?i:Math.min(i,NA(n.year(),t)),n._isUTC?n._d.setUTCMonth(t,i):n._d.setMonth(t,i),n}function W6(n){return n!=null?(V6(this,n),he.updateOffset(this,!0),this):Fb(this,"Month")}function Ime(){return NA(this.year(),this.month())}function Ome(n){return this._monthsParseExact?($t(this,"_monthsRegex")||j6.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):($t(this,"_monthsShortRegex")||(this._monthsShortRegex=Eme),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function kme(n){return this._monthsParseExact?($t(this,"_monthsRegex")||j6.call(this),n?this._monthsStrictRegex:this._monthsRegex):($t(this,"_monthsRegex")||(this._monthsRegex=xme),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function j6(){function n(l,c){return c.length-l.length}var e=[],t=[],i=[],r,s,o,a;for(r=0;r<12;r++)s=ka([2e3,r]),o=ql(this.monthsShort(s,"")),a=ql(this.months(s,"")),e.push(o),t.push(a),i.push(a),i.push(o);e.sort(n),t.sort(n),i.sort(n),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Dme(n,e,t,i,r,s,o){var a;return n<100&&n>=0?(a=new Date(n+400,e,t,i,r,s,o),isFinite(a.getFullYear())&&a.setFullYear(n)):a=new Date(n,e,t,i,r,s,o),a}function Bb(n){var e,t;return n<100&&n>=0?(t=Array.prototype.slice.call(arguments),t[0]=n+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(n)):e=new Date(Date.UTC.apply(null,arguments)),e}function zC(n,e,t){var i=7+e-t,r=(7+Bb(n,0,i).getUTCDay()-e)%7;return-r+i-1}function z6(n,e,t,i,r){var s=(7+t-i)%7,o=zC(n,i,r),a=1+7*(e-1)+s+o,l,c;return a<=0?(l=n-1,c=$b(l)+a):a>$b(n)?(l=n+1,c=a-$b(n)):(l=n,c=a),{year:l,dayOfYear:c}}function Vb(n,e,t){var i=zC(n.year(),e,t),r=Math.floor((n.dayOfYear()-i-1)/7)+1,s,o;return r<1?(o=n.year()-1,s=r+Ql(o,e,t)):r>Ql(n.year(),e,t)?(s=r-Ql(n.year(),e,t),o=n.year()+1):(o=n.year(),s=r),{week:s,year:o}}function Ql(n,e,t){var i=zC(n,e,t),r=zC(n+1,e,t);return($b(n)-i+r)/7}Ve("w",["ww",2],"wo","week"),Ve("W",["WW",2],"Wo","isoWeek"),ke("w",Cn,Rg),ke("ww",Cn,fs),ke("W",Cn,Rg),ke("WW",Cn,fs),Hb(["w","ww","W","WW"],function(n,e,t,i){e[i.substr(0,1)]=Rt(n)});function Nme(n){return Vb(n,this._week.dow,this._week.doy).week}var Lme={dow:0,doy:6};function Hme(){return this._week.dow}function $me(){return this._week.doy}function Fme(n){var e=this.localeData().week(this);return n==null?e:this.add((n-e)*7,"d")}function Bme(n){var e=Vb(this,1,4).week;return n==null?e:this.add((n-e)*7,"d")}Ve("d",0,"do","day"),Ve("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)}),Ve("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)}),Ve("dddd",0,0,function(n){return this.localeData().weekdays(this,n)}),Ve("e",0,0,"weekday"),Ve("E",0,0,"isoWeekday"),ke("d",Cn),ke("e",Cn),ke("E",Cn),ke("dd",function(n,e){return e.weekdaysMinRegex(n)}),ke("ddd",function(n,e){return e.weekdaysShortRegex(n)}),ke("dddd",function(n,e){return e.weekdaysRegex(n)}),Hb(["dd","ddd","dddd"],function(n,e,t,i){var r=t._locale.weekdaysParse(n,i,t._strict);r!=null?e.d=r:ct(t).invalidWeekday=n}),Hb(["d","e","E"],function(n,e,t,i){e[i]=Rt(n)});function Vme(n,e){return typeof n!="string"?n:isNaN(n)?(n=e.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function Wme(n,e){return typeof n=="string"?e.weekdaysParse(n)%7||7:isNaN(n)?null:n}function LA(n,e){return n.slice(e,7).concat(n.slice(0,e))}var jme="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),U6="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),zme="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ume=Lb,Gme=Lb,Yme=Lb;function Kme(n,e){var t=Do(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return n===!0?LA(t,this._week.dow):n?t[n.day()]:t}function qme(n){return n===!0?LA(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function Xme(n){return n===!0?LA(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function Zme(n,e,t){var i,r,s,o=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)s=ka([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return t?e==="dddd"?(r=ri.call(this._weekdaysParse,o),r!==-1?r:null):e==="ddd"?(r=ri.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=ri.call(this._minWeekdaysParse,o),r!==-1?r:null):e==="dddd"?(r=ri.call(this._weekdaysParse,o),r!==-1||(r=ri.call(this._shortWeekdaysParse,o),r!==-1)?r:(r=ri.call(this._minWeekdaysParse,o),r!==-1?r:null)):e==="ddd"?(r=ri.call(this._shortWeekdaysParse,o),r!==-1||(r=ri.call(this._weekdaysParse,o),r!==-1)?r:(r=ri.call(this._minWeekdaysParse,o),r!==-1?r:null)):(r=ri.call(this._minWeekdaysParse,o),r!==-1||(r=ri.call(this._weekdaysParse,o),r!==-1)?r:(r=ri.call(this._shortWeekdaysParse,o),r!==-1?r:null))}function Qme(n,e,t){var i,r,s;if(this._weekdaysParseExact)return Zme.call(this,n,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=ka([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[i].test(n))return i;if(t&&e==="ddd"&&this._shortWeekdaysParse[i].test(n))return i;if(t&&e==="dd"&&this._minWeekdaysParse[i].test(n))return i;if(!t&&this._weekdaysParse[i].test(n))return i}}function Jme(n){if(!this.isValid())return n!=null?this:NaN;var e=Fb(this,"Day");return n!=null?(n=Vme(n,this.localeData()),this.add(n-e,"d")):e}function ebe(n){if(!this.isValid())return n!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return n==null?e:this.add(n-e,"d")}function tbe(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var e=Wme(n,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function nbe(n){return this._weekdaysParseExact?($t(this,"_weekdaysRegex")||HA.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):($t(this,"_weekdaysRegex")||(this._weekdaysRegex=Ume),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function ibe(n){return this._weekdaysParseExact?($t(this,"_weekdaysRegex")||HA.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):($t(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gme),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function rbe(n){return this._weekdaysParseExact?($t(this,"_weekdaysRegex")||HA.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):($t(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Yme),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function HA(){function n(u,h){return h.length-u.length}var e=[],t=[],i=[],r=[],s,o,a,l,c;for(s=0;s<7;s++)o=ka([2e3,1]).day(s),a=ql(this.weekdaysMin(o,"")),l=ql(this.weekdaysShort(o,"")),c=ql(this.weekdays(o,"")),e.push(a),t.push(l),i.push(c),r.push(a),r.push(l),r.push(c);e.sort(n),t.sort(n),i.sort(n),r.sort(n),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function $A(){return this.hours()%12||12}function sbe(){return this.hours()||24}Ve("H",["HH",2],0,"hour"),Ve("h",["hh",2],0,$A),Ve("k",["kk",2],0,sbe),Ve("hmm",0,0,function(){return""+$A.apply(this)+Na(this.minutes(),2)}),Ve("hmmss",0,0,function(){return""+$A.apply(this)+Na(this.minutes(),2)+Na(this.seconds(),2)}),Ve("Hmm",0,0,function(){return""+this.hours()+Na(this.minutes(),2)}),Ve("Hmmss",0,0,function(){return""+this.hours()+Na(this.minutes(),2)+Na(this.seconds(),2)});function G6(n,e){Ve(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}G6("a",!0),G6("A",!1);function Y6(n,e){return e._meridiemParse}ke("a",Y6),ke("A",Y6),ke("H",Cn,kA),ke("h",Cn,Rg),ke("k",Cn,Rg),ke("HH",Cn,fs),ke("hh",Cn,fs),ke("kk",Cn,fs),ke("hmm",N6),ke("hmmss",L6),ke("Hmm",N6),ke("Hmmss",L6),tn(["H","HH"],bi),tn(["k","kk"],function(n,e,t){var i=Rt(n);e[bi]=i===24?0:i}),tn(["a","A"],function(n,e,t){t._isPm=t._locale.isPM(n),t._meridiem=n}),tn(["h","hh"],function(n,e,t){e[bi]=Rt(n),ct(t).bigHour=!0}),tn("hmm",function(n,e,t){var i=n.length-2;e[bi]=Rt(n.substr(0,i)),e[Lo]=Rt(n.substr(i)),ct(t).bigHour=!0}),tn("hmmss",function(n,e,t){var i=n.length-4,r=n.length-2;e[bi]=Rt(n.substr(0,i)),e[Lo]=Rt(n.substr(i,2)),e[Zl]=Rt(n.substr(r)),ct(t).bigHour=!0}),tn("Hmm",function(n,e,t){var i=n.length-2;e[bi]=Rt(n.substr(0,i)),e[Lo]=Rt(n.substr(i))}),tn("Hmmss",function(n,e,t){var i=n.length-4,r=n.length-2;e[bi]=Rt(n.substr(0,i)),e[Lo]=Rt(n.substr(i,2)),e[Zl]=Rt(n.substr(r))});function obe(n){return(n+"").toLowerCase().charAt(0)==="p"}var abe=/[ap]\.?m?\.?/i,lbe=Eg("Hours",!0);function cbe(n,e,t){return n>11?t?"pm":"PM":t?"am":"AM"}var K6={calendar:Zpe,longDateFormat:tme,invalidDate:ime,ordinal:sme,dayOfMonthOrdinalParse:ome,relativeTime:lme,months:Rme,monthsShort:F6,week:Lme,weekdays:jme,weekdaysMin:zme,weekdaysShort:U6,meridiemParse:abe},Pn={},Wb={},jb;function ube(n,e){var t,i=Math.min(n.length,e.length);for(t=0;t<i;t+=1)if(n[t]!==e[t])return t;return i}function q6(n){return n&&n.toLowerCase().replace("_","-")}function hbe(n){for(var e=0,t,i,r,s;e<n.length;){for(s=q6(n[e]).split("-"),t=s.length,i=q6(n[e+1]),i=i?i.split("-"):null;t>0;){if(r=UC(s.slice(0,t).join("-")),r)return r;if(i&&i.length>=t&&ube(s,i)>=t-1)break;t--}e++}return jb}function dbe(n){return!!(n&&n.match("^[^/\\\\]*$"))}function UC(n){var e=null,t;if(Pn[n]===void 0&&typeof module<"u"&&module&&module.exports&&dbe(n))try{e=jb._abbr,t=require,t("./locale/"+n),bu(e)}catch{Pn[n]=null}return Pn[n]}function bu(n,e){var t;return n&&(Fr(e)?t=Jl(n):t=FA(n,e),t?jb=t:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),jb._abbr}function FA(n,e){if(e!==null){var t,i=K6;if(e.abbr=n,Pn[n]!=null)P6("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Pn[n]._config;else if(e.parentLocale!=null)if(Pn[e.parentLocale]!=null)i=Pn[e.parentLocale]._config;else if(t=UC(e.parentLocale),t!=null)i=t._config;else return Wb[e.parentLocale]||(Wb[e.parentLocale]=[]),Wb[e.parentLocale].push({name:n,config:e}),null;return Pn[n]=new xA(EA(i,e)),Wb[n]&&Wb[n].forEach(function(r){FA(r.name,r.config)}),bu(n),Pn[n]}else return delete Pn[n],null}function fbe(n,e){if(e!=null){var t,i,r=K6;Pn[n]!=null&&Pn[n].parentLocale!=null?Pn[n].set(EA(Pn[n]._config,e)):(i=UC(n),i!=null&&(r=i._config),e=EA(r,e),i==null&&(e.abbr=n),t=new xA(e),t.parentLocale=Pn[n],Pn[n]=t),bu(n)}else Pn[n]!=null&&(Pn[n].parentLocale!=null?(Pn[n]=Pn[n].parentLocale,n===bu()&&bu(n)):Pn[n]!=null&&delete Pn[n]);return Pn[n]}function Jl(n){var e;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return jb;if(!Do(n)){if(e=UC(n),e)return e;n=[n]}return hbe(n)}function gbe(){return TA(Pn)}function BA(n){var e,t=n._a;return t&&ct(n).overflow===-2&&(e=t[Xl]<0||t[Xl]>11?Xl:t[La]<1||t[La]>NA(t[ir],t[Xl])?La:t[bi]<0||t[bi]>24||t[bi]===24&&(t[Lo]!==0||t[Zl]!==0||t[ld]!==0)?bi:t[Lo]<0||t[Lo]>59?Lo:t[Zl]<0||t[Zl]>59?Zl:t[ld]<0||t[ld]>999?ld:-1,ct(n)._overflowDayOfYear&&(e<ir||e>La)&&(e=La),ct(n)._overflowWeeks&&e===-1&&(e=vme),ct(n)._overflowWeekday&&e===-1&&(e=wme),ct(n).overflow=e),n}var pbe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mbe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bbe=/Z|[+-]\d\d(?::?\d\d)?/,GC=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],VA=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vbe=/^\/?Date\((-?\d+)/i,wbe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ybe={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function X6(n){var e,t,i=n._i,r=pbe.exec(i)||mbe.exec(i),s,o,a,l,c=GC.length,u=VA.length;if(r){for(ct(n).iso=!0,e=0,t=c;e<t;e++)if(GC[e][1].exec(r[1])){o=GC[e][0],s=GC[e][2]!==!1;break}if(o==null){n._isValid=!1;return}if(r[3]){for(e=0,t=u;e<t;e++)if(VA[e][1].exec(r[3])){a=(r[2]||" ")+VA[e][0];break}if(a==null){n._isValid=!1;return}}if(!s&&a!=null){n._isValid=!1;return}if(r[4])if(bbe.exec(r[4]))l="Z";else{n._isValid=!1;return}n._f=o+(a||"")+(l||""),jA(n)}else n._isValid=!1}function Cbe(n,e,t,i,r,s){var o=[Sbe(n),F6.indexOf(e),parseInt(t,10),parseInt(i,10),parseInt(r,10)];return s&&o.push(parseInt(s,10)),o}function Sbe(n){var e=parseInt(n,10);return e<=49?2e3+e:e<=999?1900+e:e}function _be(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Rbe(n,e,t){if(n){var i=U6.indexOf(n),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r)return ct(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function Ebe(n,e,t){if(n)return ybe[n];if(e)return 0;var i=parseInt(t,10),r=i%100,s=(i-r)/100;return s*60+r}function Z6(n){var e=wbe.exec(_be(n._i)),t;if(e){if(t=Cbe(e[4],e[3],e[2],e[5],e[6],e[7]),!Rbe(e[1],t,n))return;n._a=t,n._tzm=Ebe(e[8],e[9],e[10]),n._d=Bb.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),ct(n).rfc2822=!0}else n._isValid=!1}function xbe(n){var e=vbe.exec(n._i);if(e!==null){n._d=new Date(+e[1]);return}if(X6(n),n._isValid===!1)delete n._isValid;else return;if(Z6(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:he.createFromInputFallback(n)}he.createFromInputFallback=Bs("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function xg(n,e,t){return n??e??t}function Tbe(n){var e=new Date(he.now());return n._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function WA(n){var e,t,i=[],r,s,o;if(!n._d){for(r=Tbe(n),n._w&&n._a[La]==null&&n._a[Xl]==null&&Mbe(n),n._dayOfYear!=null&&(o=xg(n._a[ir],r[ir]),(n._dayOfYear>$b(o)||n._dayOfYear===0)&&(ct(n)._overflowDayOfYear=!0),t=Bb(o,0,n._dayOfYear),n._a[Xl]=t.getUTCMonth(),n._a[La]=t.getUTCDate()),e=0;e<3&&n._a[e]==null;++e)n._a[e]=i[e]=r[e];for(;e<7;e++)n._a[e]=i[e]=n._a[e]==null?e===2?1:0:n._a[e];n._a[bi]===24&&n._a[Lo]===0&&n._a[Zl]===0&&n._a[ld]===0&&(n._nextDay=!0,n._a[bi]=0),n._d=(n._useUTC?Bb:Dme).apply(null,i),s=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[bi]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==s&&(ct(n).weekdayMismatch=!0)}}function Mbe(n){var e,t,i,r,s,o,a,l,c;e=n._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,o=4,t=xg(e.GG,n._a[ir],Vb(Sn(),1,4).year),i=xg(e.W,1),r=xg(e.E,1),(r<1||r>7)&&(l=!0)):(s=n._locale._week.dow,o=n._locale._week.doy,c=Vb(Sn(),s,o),t=xg(e.gg,n._a[ir],c.year),i=xg(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(l=!0)):e.e!=null?(r=e.e+s,(e.e<0||e.e>6)&&(l=!0)):r=s),i<1||i>Ql(t,s,o)?ct(n)._overflowWeeks=!0:l!=null?ct(n)._overflowWeekday=!0:(a=z6(t,i,r,s,o),n._a[ir]=a.year,n._dayOfYear=a.dayOfYear)}he.ISO_8601=function(){},he.RFC_2822=function(){};function jA(n){if(n._f===he.ISO_8601){X6(n);return}if(n._f===he.RFC_2822){Z6(n);return}n._a=[],ct(n).empty=!0;var e=""+n._i,t,i,r,s,o,a=e.length,l=0,c,u;for(r=I6(n._f,n._locale).match(MA)||[],u=r.length,t=0;t<u;t++)s=r[t],i=(e.match(pme(s,n))||[])[0],i&&(o=e.substr(0,e.indexOf(i)),o.length>0&&ct(n).unusedInput.push(o),e=e.slice(e.indexOf(i)+i.length),l+=i.length),Sg[s]?(i?ct(n).empty=!1:ct(n).unusedTokens.push(s),bme(s,i,n)):n._strict&&!i&&ct(n).unusedTokens.push(s);ct(n).charsLeftOver=a-l,e.length>0&&ct(n).unusedInput.push(e),n._a[bi]<=12&&ct(n).bigHour===!0&&n._a[bi]>0&&(ct(n).bigHour=void 0),ct(n).parsedDateParts=n._a.slice(0),ct(n).meridiem=n._meridiem,n._a[bi]=Abe(n._locale,n._a[bi],n._meridiem),c=ct(n).era,c!==null&&(n._a[ir]=n._locale.erasConvertYear(c,n._a[ir])),WA(n),BA(n)}function Abe(n,e,t){var i;return t==null?e:n.meridiemHour!=null?n.meridiemHour(e,t):(n.isPM!=null&&(i=n.isPM(t),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function Pbe(n){var e,t,i,r,s,o,a=!1,l=n._f.length;if(l===0){ct(n).invalidFormat=!0,n._d=new Date(NaN);return}for(r=0;r<l;r++)s=0,o=!1,e=RA({},n),n._useUTC!=null&&(e._useUTC=n._useUTC),e._f=n._f[r],jA(e),SA(e)&&(o=!0),s+=ct(e).charsLeftOver,s+=ct(e).unusedTokens.length*10,ct(e).score=s,a?s<i&&(i=s,t=e):(i==null||s<i||o)&&(i=s,t=e,o&&(a=!0));mu(n,t||e)}function Ibe(n){if(!n._d){var e=PA(n._i),t=e.day===void 0?e.date:e.day;n._a=x6([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),WA(n)}}function Obe(n){var e=new Nb(BA(Q6(n)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Q6(n){var e=n._i,t=n._f;return n._locale=n._locale||Jl(n._l),e===null||t===void 0&&e===""?DC({nullInput:!0}):(typeof e=="string"&&(n._i=e=n._locale.preparse(e)),No(e)?new Nb(BA(e)):(Db(e)?n._d=e:Do(t)?Pbe(n):t?jA(n):kbe(n),SA(n)||(n._d=null),n))}function kbe(n){var e=n._i;Fr(e)?n._d=new Date(he.now()):Db(e)?n._d=new Date(e.valueOf()):typeof e=="string"?xbe(n):Do(e)?(n._a=x6(e.slice(0),function(t){return parseInt(t,10)}),WA(n)):ad(e)?Ibe(n):Kl(e)?n._d=new Date(e):he.createFromInputFallback(n)}function J6(n,e,t,i,r){var s={};return(e===!0||e===!1)&&(i=e,e=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(ad(n)&&yA(n)||Do(n)&&n.length===0)&&(n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=t,s._i=n,s._f=e,s._strict=i,Obe(s)}function Sn(n,e,t,i){return J6(n,e,t,i,!1)}var Dbe=Bs("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=Sn.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:DC()}),Nbe=Bs("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=Sn.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:DC()});function ez(n,e){var t,i;if(e.length===1&&Do(e[0])&&(e=e[0]),!e.length)return Sn();for(t=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][n](t))&&(t=e[i]);return t}function Lbe(){var n=[].slice.call(arguments,0);return ez("isBefore",n)}function Hbe(){var n=[].slice.call(arguments,0);return ez("isAfter",n)}var $be=function(){return Date.now?Date.now():+new Date},zb=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Fbe(n){var e,t=!1,i,r=zb.length;for(e in n)if($t(n,e)&&!(ri.call(zb,e)!==-1&&(n[e]==null||!isNaN(n[e]))))return!1;for(i=0;i<r;++i)if(n[zb[i]]){if(t)return!1;parseFloat(n[zb[i]])!==Rt(n[zb[i]])&&(t=!0)}return!0}function Bbe(){return this._isValid}function Vbe(){return Ho(NaN)}function YC(n){var e=PA(n),t=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=Fbe(e),this._milliseconds=+u+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+s*7,this._months=+r+i*3+t*12,this._data={},this._locale=Jl(),this._bubble()}function KC(n){return n instanceof YC}function zA(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function Wbe(n,e,t){var i=Math.min(n.length,e.length),r=Math.abs(n.length-e.length),s=0,o;for(o=0;o<i;o++)Rt(n[o])!==Rt(e[o])&&s++;return s+r}function tz(n,e){Ve(n,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+Na(~~(t/60),2)+e+Na(~~t%60,2)})}tz("Z",":"),tz("ZZ",""),ke("Z",VC),ke("ZZ",VC),tn(["Z","ZZ"],function(n,e,t){t._useUTC=!0,t._tzm=UA(VC,n)});var jbe=/([\+\-]|\d\d)/gi;function UA(n,e){var t=(e||"").match(n),i,r,s;return t===null?null:(i=t[t.length-1]||[],r=(i+"").match(jbe)||["-",0,0],s=+(r[1]*60)+Rt(r[2]),s===0?0:r[0]==="+"?s:-s)}function GA(n,e){var t,i;return e._isUTC?(t=e.clone(),i=(No(n)||Db(n)?n.valueOf():Sn(n).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),he.updateOffset(t,!1),t):Sn(n).local()}function YA(n){return-Math.round(n._d.getTimezoneOffset())}he.updateOffset=function(){};function zbe(n,e,t){var i=this._offset||0,r;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=UA(VC,n),n===null)return this}else Math.abs(n)<16&&!t&&(n=n*60);return!this._isUTC&&e&&(r=YA(this)),this._offset=n,this._isUTC=!0,r!=null&&this.add(r,"m"),i!==n&&(!e||this._changeInProgress?sz(this,Ho(n-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,he.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:YA(this)}function Ube(n,e){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,e),this):-this.utcOffset()}function Gbe(n){return this.utcOffset(0,n)}function Ybe(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(YA(this),"m")),this}function Kbe(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=UA(fme,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function qbe(n){return this.isValid()?(n=n?Sn(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function Xbe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Zbe(){if(!Fr(this._isDSTShifted))return this._isDSTShifted;var n={},e;return RA(n,this),n=Q6(n),n._a?(e=n._isUTC?ka(n._a):Sn(n._a),this._isDSTShifted=this.isValid()&&Wbe(n._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Qbe(){return this.isValid()?!this._isUTC:!1}function Jbe(){return this.isValid()?this._isUTC:!1}function nz(){return this.isValid()?this._isUTC&&this._offset===0:!1}var eve=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,tve=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ho(n,e){var t=n,i=null,r,s,o;return KC(n)?t={ms:n._milliseconds,d:n._days,M:n._months}:Kl(n)||!isNaN(+n)?(t={},e?t[e]=+n:t.milliseconds=+n):(i=eve.exec(n))?(r=i[1]==="-"?-1:1,t={y:0,d:Rt(i[La])*r,h:Rt(i[bi])*r,m:Rt(i[Lo])*r,s:Rt(i[Zl])*r,ms:Rt(zA(i[ld]*1e3))*r}):(i=tve.exec(n))?(r=i[1]==="-"?-1:1,t={y:cd(i[2],r),M:cd(i[3],r),w:cd(i[4],r),d:cd(i[5],r),h:cd(i[6],r),m:cd(i[7],r),s:cd(i[8],r)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=nve(Sn(t.from),Sn(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),s=new YC(t),KC(n)&&$t(n,"_locale")&&(s._locale=n._locale),KC(n)&&$t(n,"_isValid")&&(s._isValid=n._isValid),s}Ho.fn=YC.prototype,Ho.invalid=Vbe;function cd(n,e){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*e}function iz(n,e){var t={};return t.months=e.month()-n.month()+(e.year()-n.year())*12,n.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+n.clone().add(t.months,"M"),t}function nve(n,e){var t;return n.isValid()&&e.isValid()?(e=GA(e,n),n.isBefore(e)?t=iz(n,e):(t=iz(e,n),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function rz(n,e){return function(t,i){var r,s;return i!==null&&!isNaN(+i)&&(P6(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=t,t=i,i=s),r=Ho(t,i),sz(this,r,n),this}}function sz(n,e,t,i){var r=e._milliseconds,s=zA(e._days),o=zA(e._months);n.isValid()&&(i=i??!0,o&&V6(n,Fb(n,"Month")+o*t),s&&$6(n,"Date",Fb(n,"Date")+s*t),r&&n._d.setTime(n._d.valueOf()+r*t),i&&he.updateOffset(n,s||o))}var ive=rz(1,"add"),rve=rz(-1,"subtract");function oz(n){return typeof n=="string"||n instanceof String}function sve(n){return No(n)||Db(n)||oz(n)||Kl(n)||ave(n)||ove(n)||n===null||n===void 0}function ove(n){var e=ad(n)&&!yA(n),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,s,o=i.length;for(r=0;r<o;r+=1)s=i[r],t=t||$t(n,s);return e&&t}function ave(n){var e=Do(n),t=!1;return e&&(t=n.filter(function(i){return!Kl(i)&&oz(n)}).length===0),e&&t}function lve(n){var e=ad(n)&&!yA(n),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,s;for(r=0;r<i.length;r+=1)s=i[r],t=t||$t(n,s);return e&&t}function cve(n,e){var t=n.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function uve(n,e){arguments.length===1&&(arguments[0]?sve(arguments[0])?(n=arguments[0],e=void 0):lve(arguments[0])&&(e=arguments[0],n=void 0):(n=void 0,e=void 0));var t=n||Sn(),i=GA(t,this).startOf("day"),r=he.calendarFormat(this,i)||"sameElse",s=e&&(Da(e[r])?e[r].call(this,t):e[r]);return this.format(s||this.localeData().calendar(r,this,Sn(t)))}function hve(){return new Nb(this)}function dve(n,e){var t=No(n)?n:Sn(n);return this.isValid()&&t.isValid()?(e=Vs(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function fve(n,e){var t=No(n)?n:Sn(n);return this.isValid()&&t.isValid()?(e=Vs(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function gve(n,e,t,i){var r=No(n)?n:Sn(n),s=No(e)?e:Sn(e);return this.isValid()&&r.isValid()&&s.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(r,t):!this.isBefore(r,t))&&(i[1]===")"?this.isBefore(s,t):!this.isAfter(s,t))):!1}function pve(n,e){var t=No(n)?n:Sn(n),i;return this.isValid()&&t.isValid()?(e=Vs(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function mve(n,e){return this.isSame(n,e)||this.isAfter(n,e)}function bve(n,e){return this.isSame(n,e)||this.isBefore(n,e)}function vve(n,e,t){var i,r,s;if(!this.isValid())return NaN;if(i=GA(n,this),!i.isValid())return NaN;switch(r=(i.utcOffset()-this.utcOffset())*6e4,e=Vs(e),e){case"year":s=qC(this,i)/12;break;case"month":s=qC(this,i);break;case"quarter":s=qC(this,i)/3;break;case"second":s=(this-i)/1e3;break;case"minute":s=(this-i)/6e4;break;case"hour":s=(this-i)/36e5;break;case"day":s=(this-i-r)/864e5;break;case"week":s=(this-i-r)/6048e5;break;default:s=this-i}return t?s:Ws(s)}function qC(n,e){if(n.date()<e.date())return-qC(e,n);var t=(e.year()-n.year())*12+(e.month()-n.month()),i=n.clone().add(t,"months"),r,s;return e-i<0?(r=n.clone().add(t-1,"months"),s=(e-i)/(i-r)):(r=n.clone().add(t+1,"months"),s=(e-i)/(r-i)),-(t+s)||0}he.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",he.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function wve(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function yve(n){if(!this.isValid())return null;var e=n!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?LC(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Da(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",LC(t,"Z")):LC(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Cve(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",e="",t,i,r,s;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+n+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(t+i+r+s)}function Sve(n){n||(n=this.isUtc()?he.defaultFormatUtc:he.defaultFormat);var e=LC(this,n);return this.localeData().postformat(e)}function _ve(n,e){return this.isValid()&&(No(n)&&n.isValid()||Sn(n).isValid())?Ho({to:this,from:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Rve(n){return this.from(Sn(),n)}function Eve(n,e){return this.isValid()&&(No(n)&&n.isValid()||Sn(n).isValid())?Ho({from:this,to:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function xve(n){return this.to(Sn(),n)}function az(n){var e;return n===void 0?this._locale._abbr:(e=Jl(n),e!=null&&(this._locale=e),this)}var lz=Bs("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function cz(){return this._locale}var XC=1e3,Tg=60*XC,ZC=60*Tg,uz=(365*400+97)*24*ZC;function Mg(n,e){return(n%e+e)%e}function hz(n,e,t){return n<100&&n>=0?new Date(n+400,e,t)-uz:new Date(n,e,t).valueOf()}function dz(n,e,t){return n<100&&n>=0?Date.UTC(n+400,e,t)-uz:Date.UTC(n,e,t)}function Tve(n){var e,t;if(n=Vs(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?dz:hz,n){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Mg(e+(this._isUTC?0:this.utcOffset()*Tg),ZC);break;case"minute":e=this._d.valueOf(),e-=Mg(e,Tg);break;case"second":e=this._d.valueOf(),e-=Mg(e,XC);break}return this._d.setTime(e),he.updateOffset(this,!0),this}function Mve(n){var e,t;if(n=Vs(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?dz:hz,n){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=ZC-Mg(e+(this._isUTC?0:this.utcOffset()*Tg),ZC)-1;break;case"minute":e=this._d.valueOf(),e+=Tg-Mg(e,Tg)-1;break;case"second":e=this._d.valueOf(),e+=XC-Mg(e,XC)-1;break}return this._d.setTime(e),he.updateOffset(this,!0),this}function Ave(){return this._d.valueOf()-(this._offset||0)*6e4}function Pve(){return Math.floor(this.valueOf()/1e3)}function Ive(){return new Date(this.valueOf())}function Ove(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function kve(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function Dve(){return this.isValid()?this.toISOString():null}function Nve(){return SA(this)}function Lve(){return mu({},ct(this))}function Hve(){return ct(this).overflow}function $ve(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Ve("N",0,0,"eraAbbr"),Ve("NN",0,0,"eraAbbr"),Ve("NNN",0,0,"eraAbbr"),Ve("NNNN",0,0,"eraName"),Ve("NNNNN",0,0,"eraNarrow"),Ve("y",["y",1],"yo","eraYear"),Ve("y",["yy",2],0,"eraYear"),Ve("y",["yyy",3],0,"eraYear"),Ve("y",["yyyy",4],0,"eraYear"),ke("N",KA),ke("NN",KA),ke("NNN",KA),ke("NNNN",qve),ke("NNNNN",Xve),tn(["N","NN","NNN","NNNN","NNNNN"],function(n,e,t,i){var r=t._locale.erasParse(n,i,t._strict);r?ct(t).era=r:ct(t).invalidEra=n}),ke("y",_g),ke("yy",_g),ke("yyy",_g),ke("yyyy",_g),ke("yo",Zve),tn(["y","yy","yyy","yyyy"],ir),tn(["yo"],function(n,e,t,i){var r;t._locale._eraYearOrdinalRegex&&(r=n.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[ir]=t._locale.eraYearOrdinalParse(n,r):e[ir]=parseInt(n,10)});function Fve(n,e){var t,i,r,s=this._eras||Jl("en")._eras;for(t=0,i=s.length;t<i;++t){switch(typeof s[t].since){case"string":r=he(s[t].since).startOf("day"),s[t].since=r.valueOf();break}switch(typeof s[t].until){case"undefined":s[t].until=1/0;break;case"string":r=he(s[t].until).startOf("day").valueOf(),s[t].until=r.valueOf();break}}return s}function Bve(n,e,t){var i,r,s=this.eras(),o,a,l;for(n=n.toUpperCase(),i=0,r=s.length;i<r;++i)if(o=s[i].name.toUpperCase(),a=s[i].abbr.toUpperCase(),l=s[i].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(a===n)return s[i];break;case"NNNN":if(o===n)return s[i];break;case"NNNNN":if(l===n)return s[i];break}else if([o,a,l].indexOf(n)>=0)return s[i]}function Vve(n,e){var t=n.since<=n.until?1:-1;return e===void 0?he(n.since).year():he(n.since).year()+(e-n.offset)*t}function Wve(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].name;return""}function jve(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].narrow;return""}function zve(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].abbr;return""}function Uve(){var n,e,t,i,r=this.localeData().eras();for(n=0,e=r.length;n<e;++n)if(t=r[n].since<=r[n].until?1:-1,i=this.clone().startOf("day").valueOf(),r[n].since<=i&&i<=r[n].until||r[n].until<=i&&i<=r[n].since)return(this.year()-he(r[n].since).year())*t+r[n].offset;return this.year()}function Gve(n){return $t(this,"_erasNameRegex")||qA.call(this),n?this._erasNameRegex:this._erasRegex}function Yve(n){return $t(this,"_erasAbbrRegex")||qA.call(this),n?this._erasAbbrRegex:this._erasRegex}function Kve(n){return $t(this,"_erasNarrowRegex")||qA.call(this),n?this._erasNarrowRegex:this._erasRegex}function KA(n,e){return e.erasAbbrRegex(n)}function qve(n,e){return e.erasNameRegex(n)}function Xve(n,e){return e.erasNarrowRegex(n)}function Zve(n,e){return e._eraYearOrdinalRegex||_g}function qA(){var n=[],e=[],t=[],i=[],r,s,o,a,l,c=this.eras();for(r=0,s=c.length;r<s;++r)o=ql(c[r].name),a=ql(c[r].abbr),l=ql(c[r].narrow),e.push(o),n.push(a),t.push(l),i.push(o),i.push(a),i.push(l);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}Ve(0,["gg",2],0,function(){return this.weekYear()%100}),Ve(0,["GG",2],0,function(){return this.isoWeekYear()%100});function QC(n,e){Ve(0,[n,n.length],0,e)}QC("gggg","weekYear"),QC("ggggg","weekYear"),QC("GGGG","isoWeekYear"),QC("GGGGG","isoWeekYear"),ke("G",BC),ke("g",BC),ke("GG",Cn,fs),ke("gg",Cn,fs),ke("GGGG",OA,IA),ke("gggg",OA,IA),ke("GGGGG",FC,HC),ke("ggggg",FC,HC),Hb(["gggg","ggggg","GGGG","GGGGG"],function(n,e,t,i){e[i.substr(0,2)]=Rt(n)}),Hb(["gg","GG"],function(n,e,t,i){e[i]=he.parseTwoDigitYear(n)});function Qve(n){return fz.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Jve(n){return fz.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function ewe(){return Ql(this.year(),1,4)}function twe(){return Ql(this.isoWeekYear(),1,4)}function nwe(){var n=this.localeData()._week;return Ql(this.year(),n.dow,n.doy)}function iwe(){var n=this.localeData()._week;return Ql(this.weekYear(),n.dow,n.doy)}function fz(n,e,t,i,r){var s;return n==null?Vb(this,i,r).year:(s=Ql(n,i,r),e>s&&(e=s),rwe.call(this,n,e,t,i,r))}function rwe(n,e,t,i,r){var s=z6(n,e,t,i,r),o=Bb(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Ve("Q",0,"Qo","quarter"),ke("Q",k6),tn("Q",function(n,e){e[Xl]=(Rt(n)-1)*3});function swe(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}Ve("D",["DD",2],"Do","date"),ke("D",Cn,Rg),ke("DD",Cn,fs),ke("Do",function(n,e){return n?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),tn(["D","DD"],La),tn("Do",function(n,e){e[La]=Rt(n.match(Cn)[0])});var gz=Eg("Date",!0);Ve("DDD",["DDDD",3],"DDDo","dayOfYear"),ke("DDD",$C),ke("DDDD",D6),tn(["DDD","DDDD"],function(n,e,t){t._dayOfYear=Rt(n)});function owe(n){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?e:this.add(n-e,"d")}Ve("m",["mm",2],0,"minute"),ke("m",Cn,kA),ke("mm",Cn,fs),tn(["m","mm"],Lo);var awe=Eg("Minutes",!1);Ve("s",["ss",2],0,"second"),ke("s",Cn,kA),ke("ss",Cn,fs),tn(["s","ss"],Zl);var lwe=Eg("Seconds",!1);Ve("S",0,0,function(){return~~(this.millisecond()/100)}),Ve(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Ve(0,["SSS",3],0,"millisecond"),Ve(0,["SSSS",4],0,function(){return this.millisecond()*10}),Ve(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Ve(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Ve(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Ve(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Ve(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),ke("S",$C,k6),ke("SS",$C,fs),ke("SSS",$C,D6);var vu,pz;for(vu="SSSS";vu.length<=9;vu+="S")ke(vu,_g);function cwe(n,e){e[ld]=Rt(("0."+n)*1e3)}for(vu="S";vu.length<=9;vu+="S")tn(vu,cwe);pz=Eg("Milliseconds",!1),Ve("z",0,0,"zoneAbbr"),Ve("zz",0,0,"zoneName");function uwe(){return this._isUTC?"UTC":""}function hwe(){return this._isUTC?"Coordinated Universal Time":""}var ge=Nb.prototype;ge.add=ive,ge.calendar=uve,ge.clone=hve,ge.diff=vve,ge.endOf=Mve,ge.format=Sve,ge.from=_ve,ge.fromNow=Rve,ge.to=Eve,ge.toNow=xve,ge.get=Cme,ge.invalidAt=Hve,ge.isAfter=dve,ge.isBefore=fve,ge.isBetween=gve,ge.isSame=pve,ge.isSameOrAfter=mve,ge.isSameOrBefore=bve,ge.isValid=Nve,ge.lang=lz,ge.locale=az,ge.localeData=cz,ge.max=Nbe,ge.min=Dbe,ge.parsingFlags=Lve,ge.set=Sme,ge.startOf=Tve,ge.subtract=rve,ge.toArray=Ove,ge.toObject=kve,ge.toDate=Ive,ge.toISOString=yve,ge.inspect=Cve,typeof Symbol<"u"&&Symbol.for!=null&&(ge[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ge.toJSON=Dve,ge.toString=wve,ge.unix=Pve,ge.valueOf=Ave,ge.creationData=$ve,ge.eraName=Wve,ge.eraNarrow=jve,ge.eraAbbr=zve,ge.eraYear=Uve,ge.year=H6,ge.isLeapYear=yme,ge.weekYear=Qve,ge.isoWeekYear=Jve,ge.quarter=ge.quarters=swe,ge.month=W6,ge.daysInMonth=Ime,ge.week=ge.weeks=Fme,ge.isoWeek=ge.isoWeeks=Bme,ge.weeksInYear=nwe,ge.weeksInWeekYear=iwe,ge.isoWeeksInYear=ewe,ge.isoWeeksInISOWeekYear=twe,ge.date=gz,ge.day=ge.days=Jme,ge.weekday=ebe,ge.isoWeekday=tbe,ge.dayOfYear=owe,ge.hour=ge.hours=lbe,ge.minute=ge.minutes=awe,ge.second=ge.seconds=lwe,ge.millisecond=ge.milliseconds=pz,ge.utcOffset=zbe,ge.utc=Gbe,ge.local=Ybe,ge.parseZone=Kbe,ge.hasAlignedHourOffset=qbe,ge.isDST=Xbe,ge.isLocal=Qbe,ge.isUtcOffset=Jbe,ge.isUtc=nz,ge.isUTC=nz,ge.zoneAbbr=uwe,ge.zoneName=hwe,ge.dates=Bs("dates accessor is deprecated. Use date instead.",gz),ge.months=Bs("months accessor is deprecated. Use month instead",W6),ge.years=Bs("years accessor is deprecated. Use year instead",H6),ge.zone=Bs("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ube),ge.isDSTShifted=Bs("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Zbe);function dwe(n){return Sn(n*1e3)}function fwe(){return Sn.apply(null,arguments).parseZone()}function mz(n){return n}var Ft=xA.prototype;Ft.calendar=Qpe,Ft.longDateFormat=nme,Ft.invalidDate=rme,Ft.ordinal=ame,Ft.preparse=mz,Ft.postformat=mz,Ft.relativeTime=cme,Ft.pastFuture=ume,Ft.set=Xpe,Ft.eras=Fve,Ft.erasParse=Bve,Ft.erasConvertYear=Vve,Ft.erasAbbrRegex=Yve,Ft.erasNameRegex=Gve,Ft.erasNarrowRegex=Kve,Ft.months=Tme,Ft.monthsShort=Mme,Ft.monthsParse=Pme,Ft.monthsRegex=kme,Ft.monthsShortRegex=Ome,Ft.week=Nme,Ft.firstDayOfYear=$me,Ft.firstDayOfWeek=Hme,Ft.weekdays=Kme,Ft.weekdaysMin=Xme,Ft.weekdaysShort=qme,Ft.weekdaysParse=Qme,Ft.weekdaysRegex=nbe,Ft.weekdaysShortRegex=ibe,Ft.weekdaysMinRegex=rbe,Ft.isPM=obe,Ft.meridiem=cbe;function JC(n,e,t,i){var r=Jl(),s=ka().set(i,e);return r[t](s,n)}function bz(n,e,t){if(Kl(n)&&(e=n,n=void 0),n=n||"",e!=null)return JC(n,e,t,"month");var i,r=[];for(i=0;i<12;i++)r[i]=JC(n,i,t,"month");return r}function XA(n,e,t,i){typeof n=="boolean"?(Kl(e)&&(t=e,e=void 0),e=e||""):(e=n,t=e,n=!1,Kl(e)&&(t=e,e=void 0),e=e||"");var r=Jl(),s=n?r._week.dow:0,o,a=[];if(t!=null)return JC(e,(t+s)%7,i,"day");for(o=0;o<7;o++)a[o]=JC(e,(o+s)%7,i,"day");return a}function gwe(n,e){return bz(n,e,"months")}function pwe(n,e){return bz(n,e,"monthsShort")}function mwe(n,e,t){return XA(n,e,t,"weekdays")}function bwe(n,e,t){return XA(n,e,t,"weekdaysShort")}function vwe(n,e,t){return XA(n,e,t,"weekdaysMin")}bu("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var e=n%10,t=Rt(n%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return n+t}}),he.lang=Bs("moment.lang is deprecated. Use moment.locale instead.",bu),he.langData=Bs("moment.langData is deprecated. Use moment.localeData instead.",Jl);var ec=Math.abs;function wwe(){var n=this._data;return this._milliseconds=ec(this._milliseconds),this._days=ec(this._days),this._months=ec(this._months),n.milliseconds=ec(n.milliseconds),n.seconds=ec(n.seconds),n.minutes=ec(n.minutes),n.hours=ec(n.hours),n.months=ec(n.months),n.years=ec(n.years),this}function vz(n,e,t,i){var r=Ho(e,t);return n._milliseconds+=i*r._milliseconds,n._days+=i*r._days,n._months+=i*r._months,n._bubble()}function ywe(n,e){return vz(this,n,e,1)}function Cwe(n,e){return vz(this,n,e,-1)}function wz(n){return n<0?Math.floor(n):Math.ceil(n)}function Swe(){var n=this._milliseconds,e=this._days,t=this._months,i=this._data,r,s,o,a,l;return n>=0&&e>=0&&t>=0||n<=0&&e<=0&&t<=0||(n+=wz(ZA(t)+e)*864e5,e=0,t=0),i.milliseconds=n%1e3,r=Ws(n/1e3),i.seconds=r%60,s=Ws(r/60),i.minutes=s%60,o=Ws(s/60),i.hours=o%24,e+=Ws(o/24),l=Ws(yz(e)),t+=l,e-=wz(ZA(l)),a=Ws(t/12),t%=12,i.days=e,i.months=t,i.years=a,this}function yz(n){return n*4800/146097}function ZA(n){return n*146097/4800}function _we(n){if(!this.isValid())return NaN;var e,t,i=this._milliseconds;if(n=Vs(n),n==="month"||n==="quarter"||n==="year")switch(e=this._days+i/864e5,t=this._months+yz(e),n){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(ZA(this._months)),n){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+n)}}function tc(n){return function(){return this.as(n)}}var Cz=tc("ms"),Rwe=tc("s"),Ewe=tc("m"),xwe=tc("h"),Twe=tc("d"),Mwe=tc("w"),Awe=tc("M"),Pwe=tc("Q"),Iwe=tc("y"),Owe=Cz;function kwe(){return Ho(this)}function Dwe(n){return n=Vs(n),this.isValid()?this[n+"s"]():NaN}function ud(n){return function(){return this.isValid()?this._data[n]:NaN}}var Nwe=ud("milliseconds"),Lwe=ud("seconds"),Hwe=ud("minutes"),$we=ud("hours"),Fwe=ud("days"),Bwe=ud("months"),Vwe=ud("years");function Wwe(){return Ws(this.days()/7)}var nc=Math.round,Ag={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function jwe(n,e,t,i,r){return r.relativeTime(e||1,!!t,n,i)}function zwe(n,e,t,i){var r=Ho(n).abs(),s=nc(r.as("s")),o=nc(r.as("m")),a=nc(r.as("h")),l=nc(r.as("d")),c=nc(r.as("M")),u=nc(r.as("w")),h=nc(r.as("y")),d=s<=t.ss&&["s",s]||s<t.s&&["ss",s]||o<=1&&["m"]||o<t.m&&["mm",o]||a<=1&&["h"]||a<t.h&&["hh",a]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(d=d||u<=1&&["w"]||u<t.w&&["ww",u]),d=d||c<=1&&["M"]||c<t.M&&["MM",c]||h<=1&&["y"]||["yy",h],d[2]=e,d[3]=+n>0,d[4]=i,jwe.apply(null,d)}function Uwe(n){return n===void 0?nc:typeof n=="function"?(nc=n,!0):!1}function Gwe(n,e){return Ag[n]===void 0?!1:e===void 0?Ag[n]:(Ag[n]=e,n==="s"&&(Ag.ss=e-1),!0)}function Ywe(n,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=Ag,r,s;return typeof n=="object"&&(e=n,n=!1),typeof n=="boolean"&&(t=n),typeof e=="object"&&(i=Object.assign({},Ag,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),r=this.localeData(),s=zwe(this,!t,i,r),t&&(s=r.pastFuture(+this,s)),r.postformat(s)}var QA=Math.abs;function Pg(n){return(n>0)-(n<0)||+n}function eS(){if(!this.isValid())return this.localeData().invalidDate();var n=QA(this._milliseconds)/1e3,e=QA(this._days),t=QA(this._months),i,r,s,o,a=this.asSeconds(),l,c,u,h;return a?(i=Ws(n/60),r=Ws(i/60),n%=60,i%=60,s=Ws(t/12),t%=12,o=n?n.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=Pg(this._months)!==Pg(a)?"-":"",u=Pg(this._days)!==Pg(a)?"-":"",h=Pg(this._milliseconds)!==Pg(a)?"-":"",l+"P"+(s?c+s+"Y":"")+(t?c+t+"M":"")+(e?u+e+"D":"")+(r||i||n?"T":"")+(r?h+r+"H":"")+(i?h+i+"M":"")+(n?h+o+"S":"")):"P0D"}var Mt=YC.prototype;Mt.isValid=Bbe,Mt.abs=wwe,Mt.add=ywe,Mt.subtract=Cwe,Mt.as=_we,Mt.asMilliseconds=Cz,Mt.asSeconds=Rwe,Mt.asMinutes=Ewe,Mt.asHours=xwe,Mt.asDays=Twe,Mt.asWeeks=Mwe,Mt.asMonths=Awe,Mt.asQuarters=Pwe,Mt.asYears=Iwe,Mt.valueOf=Owe,Mt._bubble=Swe,Mt.clone=kwe,Mt.get=Dwe,Mt.milliseconds=Nwe,Mt.seconds=Lwe,Mt.minutes=Hwe,Mt.hours=$we,Mt.days=Fwe,Mt.weeks=Wwe,Mt.months=Bwe,Mt.years=Vwe,Mt.humanize=Ywe,Mt.toISOString=eS,Mt.toString=eS,Mt.toJSON=eS,Mt.locale=az,Mt.localeData=cz,Mt.toIsoString=Bs("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",eS),Mt.lang=lz,Ve("X",0,0,"unix"),Ve("x",0,0,"valueOf"),ke("x",BC),ke("X",gme),tn("X",function(n,e,t){t._d=new Date(parseFloat(n)*1e3)}),tn("x",function(n,e,t){t._d=new Date(Rt(n))});//! moment.js
he.version="2.30.1",Kpe(Sn),he.fn=ge,he.min=Lbe,he.max=Hbe,he.now=$be,he.utc=ka,he.unix=dwe,he.months=gwe,he.isDate=Db,he.locale=bu,he.invalid=DC,he.duration=Ho,he.isMoment=No,he.weekdays=mwe,he.parseZone=fwe,he.localeData=Jl,he.isDuration=KC,he.monthsShort=pwe,he.weekdaysMin=vwe,he.defineLocale=FA,he.updateLocale=fbe,he.locales=gbe,he.weekdaysShort=bwe,he.normalizeUnits=Vs,he.relativeTimeRounding=Uwe,he.relativeTimeThreshold=Gwe,he.calendarFormat=cve,he.prototype=ge,he.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Sz(n){const e=n.length;let t=0;for(;t<e;)n[t]=[n[t]],t+=1}function JA(n,e){const t=e.length;let i=0;for(;i<t;)n.push(e[i]),i+=1}function Ub(n){const e=[];if(!n||n.length===0||!n[0]||n[0].length===0)return e;const t=n.length,i=n[0].length;for(let r=0;r<t;r++)for(let s=0;s<i;s++)e[s]||(e[s]=[]),e[s][r]=n[r][s];return e}function si(n,e,t,i){let r=-1,s=n,o=t;Array.isArray(n)||(s=Array.from(n));const a=s.length;for(i&&a&&(r+=1,o=s[r]),r+=1;r<a;)o=e(o,s[r],r,s),r+=1;return o}function ic(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const r=i.length,s=[];let o=-1;for(;t<r;){const a=i[t];e(a,t,i)&&(o+=1,s[o]=a),t+=1}return s}function pt(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const r=i.length,s=[];let o=-1;for(;t<r;){const a=i[t];o+=1,s[o]=e(a,t,i),t+=1}return s}function V(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const r=i.length;for(;t<r&&e(i[t],t,i)!==!1;)t+=1;return n}function _z(n){return si(n,(e,t)=>e+t,0)}function Kwe(n){return si(n,(e,t)=>e>t?e:t,Array.isArray(n)?n[0]:void 0)}function qwe(n){return si(n,(e,t)=>e<t?e:t,Array.isArray(n)?n[0]:void 0)}function Xwe(n){return n.length?_z(n)/n.length:0}function Rz(n){return si(n,(e,t)=>e.concat(Array.isArray(t)?Rz(t):t),[])}function eP(n){const e=[];return V(n,t=>{e.indexOf(t)===-1&&e.push(t)}),e}function tP(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=[...e];let s=i;return V(r,o=>{s=s.filter(a=>!o.includes(a))}),s}function Zwe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=[...e];let s=i;return V(r,o=>{s=s.filter(a=>o.includes(a))}),s}function Qwe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=[...e],s=new Set(i);return V(r,o=>{V(o,a=>{s.has(a)||s.add(a)})}),Array.from(s)}function nP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";return n.split(e)}const Jwe=Object.freeze(Object.defineProperty({__proto__:null,arrayAvg:Xwe,arrayEach:V,arrayFilter:ic,arrayFlatten:Rz,arrayMap:pt,arrayMax:Kwe,arrayMin:qwe,arrayReduce:si,arraySum:_z,arrayUnique:eP,extendArray:JA,getDifferenceOfArrays:tP,getIntersectionOfArrays:Zwe,getUnionOfArrays:Qwe,pivot:Ub,stringToArray:nP,to2dArray:Sz},Symbol.toStringTag,{value:"Module"}));function Ut(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return si(n,(s,o,a)=>{const l=o.replace(/\r?\n\s*/g,""),c=t[a]?t[a]:"";return s+l+c},"").trim()}function Ln(n){let e;switch(typeof n){case"string":case"number":e=`${n}`;break;case"object":e=n===null?"":n.toString();break;case"undefined":e="";break;default:e=n.toString();break}return e}function Oe(n){return typeof n<"u"}function hn(n){return typeof n>"u"}function Hn(n){return n===null||n===""||hn(n)}function Ez(n){return Object.prototype.toString.call(n)==="[object RegExp]"}const Gb="length",Yb=n=>parseInt(n,16),xz=n=>parseInt(n,10),tS=(n,e,t)=>n.substr(e,t),Kb=n=>n.codePointAt(0)-65,iP=n=>`${n}`.replace(/\-/g,""),eye=n=>Yb(tS(iP(n),Yb("12"),Kb("F")))/(Yb(tS(iP(n),Kb("B"),~~![][Gb]))||9),tye=()=>typeof location<"u"&&/^([a-z0-9\-]+\.)?\x68\x61\x6E\x64\x73\x6F\x6E\x74\x61\x62\x6C\x65\x2E\x63\x6F\x6D$/i.test(location.host);let Tz=!1;const Mz={invalid:()=>Ut`
    The license key for Handsontable is invalid.\x20
    If you need any help, contact us at support@handsontable.com.`,expired:n=>{let{keyValidityDate:e,hotVersion:t}=n;return Ut`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${t}. Renew your license key at handsontable.com or downgrade to a version released prior\x20
    to ${e}. If you need any help, contact us at sales@handsontable.com.`},missing:()=>Ut`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'. If you need any help, contact\x20
    us at support@handsontable.com.`,non_commercial:()=>""},Az={invalid:()=>Ut`
    The license key for Handsontable is invalid.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> on how to\x20
    install it properly or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,expired:n=>{let{keyValidityDate:e,hotVersion:t}=n;return Ut`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${t}. <a href="https://handsontable.com/pricing" target="_blank">Renew</a> your\x20
    license key or downgrade to a version released prior to ${e}. If you need any\x20
    help, contact us at <a href="mailto:sales@handsontable.com">sales@handsontable.com</a>.`},missing:()=>Ut`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> about it in\x20
    the documentation or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,non_commercial:()=>""};function Pz(n,e){const t=!Hn(n),i=typeof n=="string"&&n.toLowerCase()==="non-commercial-and-evaluation",r="14.6.1";let s,o="invalid",a="invalid";n=iP(n||"");const l=nye(n);if(t||i||l)if(l){const c=he("17/10/2024","DD/MM/YYYY"),u=Math.floor(c.toDate().getTime()/864e5),h=eye(n);s=he((h+1)*864e5,"x").format("MMMM DD, YYYY"),u>h?(o="expired",a="expired"):(o="valid",a="valid")}else i?(o="non_commercial",a="valid"):(o="invalid",a="invalid");else o="missing",a="missing";if(tye()&&(o="valid",a="valid"),!Tz&&o!=="valid"&&(Mz[o]({keyValidityDate:s,hotVersion:r})&&console[o==="non_commercial"?"info":"warn"](Mz[o]({keyValidityDate:s,hotVersion:r})),Tz=!0),a!=="valid"&&e.parentNode&&Az[a]({keyValidityDate:s,hotVersion:r})){const u=document.createElement("div");u.className="hot-display-license-info",u.innerHTML=Az[a]({keyValidityDate:s,hotVersion:r}),e.parentNode.insertBefore(u,e.nextSibling)}}function nye(n){let e=[][Gb],t=e;if(n[Gb]!==Kb("Z"))return!1;for(let i="",r="B<H4P+".split(""),s=Kb(r.shift());s;s=Kb(r.shift()||"A"))--s<""[Gb]?t=t|(xz(`${xz(Yb(i)+(Yb(tS(n,Math.abs(s),2))+[]).padStart(2,"0"))}`)%97||2)>>1:i=tS(n,s,s?r[Gb]===1?9:8:6);return t===e}const iye=Object.freeze(Object.defineProperty({__proto__:null,_injectProductInfo:Pz,isDefined:Oe,isEmpty:Hn,isRegExp:Ez,isUndefined:hn,stringify:Ln},Symbol.toStringTag,{value:"Module"}));function rr(n){return n[0].toUpperCase()+n.substr(1)}function rye(){const n=[];for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];let r=t.length;for(;r;){r-=1;const s=Ln(t[r]).toLowerCase();n.indexOf(s)===-1&&n.push(s)}return n.length===1}function rP(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+n()+n()}function sP(n){return/^([0-9][0-9]?%$)|(^100%$)/.test(n)}function oP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return`${n}`.replace(/(?:\\)?\[([^[\]]+)]/g,(t,i)=>t.charAt(0)==="\\"?t.substr(1,t.length-1):e[i]===void 0?"":e[i])}function aP(n){return nS(`${n}`,{ALLOWED_TAGS:[]})}function nS(n,e){return Ype.sanitize(n,e)}const sye=Object.freeze(Object.defineProperty({__proto__:null,equalsIgnoreCase:rye,isPercentValue:sP,randomString:rP,sanitize:nS,stripTags:aP,substitute:oP,toUpperCaseFirst:rr},Symbol.toStringTag,{value:"Module"})),Ig=n=>["tabindex",n],oye=()=>["role","treegrid"],Ha=()=>["role","presentation"],aye=()=>["role","gridcell"],lye=()=>["role","rowheader"],Iz=()=>["role","rowgroup"],cye=()=>["role","columnheader"],lP=()=>["role","row"],uye=()=>["role","menu"],hye=()=>["role","menuitem"],dye=()=>["role","menuitemcheckbox"],fye=()=>["role","combobox"],Oz=()=>["role","listbox"],gye=()=>["role","option"],pye=()=>["role","checkbox"],mye=()=>["scope","col"],bye=()=>["scope","row"],vye=()=>["type","text"],iS=n=>["aria-label",n],hd=()=>["aria-hidden","true"],wye=()=>["aria-disabled","true"],yye=()=>["aria-multiselectable","true"],kz=n=>["aria-haspopup",n],Dz=n=>["aria-rowcount",n],rS=n=>["aria-colcount",n],Nz=n=>["aria-rowindex",n],cP=n=>["aria-colindex",n],js=n=>["aria-expanded",n],Cye=n=>["aria-sort",n],Lz=()=>["aria-readonly","true"],Hz=()=>["aria-invalid","true"],$z=n=>["aria-checked",n],uP=()=>["aria-selected","true"],Sye=()=>["aria-autocomplete","list"],_ye=n=>["aria-controls",n],Rye=n=>["aria-activedescendant",n],Eye=n=>["aria-live",n],xye=n=>["aria-relevant",n],Tye=n=>["aria-setsize",n],Mye=n=>["aria-posinset",n];function Fz(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,i=null,r=n;for(;r!==null;){if(t===e){i=r;break}r.host&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r=r.host:(t+=1,r=r.parentNode)}return i}function Bz(n,e){const t=n.closest(".handsontable");return!!t&&(t.parentNode===e||t===e)}function Vz(n){return Object.getPrototypeOf(n.parent)&&n.frameElement}function dd(n){return Vz(n)&&n.parent}function Aye(n){return!!Object.getPrototypeOf(n.parent)}function wu(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;const{ELEMENT_NODE:i,DOCUMENT_FRAGMENT_NODE:r}=Node;let s=n;for(;s!=null&&s!==t;){const{nodeType:o,nodeName:a}=s;if(o===i&&(e.includes(a)||e.includes(s)))return s;const{host:l}=s;l&&o===r?s=l:s=s.parentNode}return null}function qb(n,e,t){const i=[];let r=n;for(;r&&(r=wu(r,e,t),!(!r||t&&!t.contains(r)));)i.push(r),r.host&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r=r.host:r=r.parentNode;const s=i.length;return s?i[s-1]:null}function yu(n,e){let t=n.parentNode,i=[];for(typeof e=="string"?n.defaultView?i=Array.prototype.slice.call(n.querySelectorAll(e),0):i=Array.prototype.slice.call(n.ownerDocument.querySelectorAll(e),0):i.push(e);t!==null;){if(i.indexOf(t)>-1)return!0;t=t.parentNode}return!1}function Wz(n){let e=0,t=n;if(t.previousSibling)for(;t=t.previousSibling;)e+=1;return e}function Cu(n,e,t){const i=t.parentElement.querySelector(`.ht_clone_${n}`);return i?i.contains(e):null}function jz(n){return!n||!n.length?[]:n.filter(e=>!!e)}function zz(n,e){if(!n||!n.length)return{regexFree:[],regexes:[]};const t=[],i=[];return i.push(...n.filter(r=>{const s=r instanceof RegExp;return s&&e&&t.push(r),!s})),{regexFree:i,regexes:t}}function Ue(n,e){return n.classList===void 0||typeof e!="string"||e===""?!1:n.classList.contains(e)}function ce(n,e){typeof e=="string"&&(e=e.split(" ")),e=jz(e),e.length>0&&n.classList.add(...e)}function Ze(n,e){typeof e=="string"?e=e.split(" "):e instanceof RegExp&&(e=[e]);let{regexFree:t,regexes:i}=zz(e,!0);t=jz(t),t.length>0&&n.classList.remove(...t),i.forEach(r=>{n.classList.forEach(s=>{r.test(s)&&n.classList.remove(s)})})}function ze(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;Array.isArray(e)||(e=[[e,t]]),e.forEach(i=>{Array.isArray(i)&&i[0]!==""&&n.setAttribute(...i)})}function fd(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];typeof e=="string"?e=e.split(" "):e instanceof RegExp&&(e=[e]);const{regexFree:t,regexes:i}=zz(e,!0);t.forEach(r=>{r!==""&&n.removeAttribute(r)}),i.forEach(r=>{n.getAttributeNames().forEach(s=>{r.test(s)&&n.removeAttribute(s)})})}function hP(n){if(n.nodeType===3)n.parentNode.removeChild(n);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(n.nodeName)>-1){const e=n.childNodes;for(let t=e.length-1;t>=0;t--)hP(e[t])}}function $o(n){let e;for(;e=n.lastChild;)n.removeChild(e)}const Uz=/(<(.*)>|&(.*);)/;function gd(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;Uz.test(e)?n.innerHTML=t?nS(e):e:Su(n,e)}function Su(n,e){const t=n.firstChild;t&&t.nodeType===3&&t.nextSibling===null?t.textContent=e:($o(n),n.appendChild(n.ownerDocument.createTextNode(e)))}function pd(n){const e=n.ownerDocument.documentElement;let t=n;for(;t!==e;){if(t===null)return!1;if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)if(t.host){if(t.host.impl)return pd(t.host.impl);if(t.host)return pd(t.host);throw new Error("Lost in Web Components world")}else return!1;else if($a(t).display==="none")return!1;t=t.parentNode}return!0}function vi(n){const e=n.ownerDocument,t=e.defaultView,i=e.documentElement;let r=n,s,o,a;for(s=r.offsetLeft,o=r.offsetTop,a=r;(r=r.offsetParent)&&!(r===e.body||!("offsetLeft"in r));)s+=r.offsetLeft,o+=r.offsetTop,a=r;return a&&a.style.position==="fixed"&&(s+=t.pageXOffset||i.scrollLeft,o+=t.pageYOffset||i.scrollTop),{left:s,top:o}}function dP(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).scrollY}function sS(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).scrollX}function oS(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n===e?dP(e):n.scrollTop}function fP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n===e?sS(e):n.scrollLeft}function Xb(n){let e=n.ownerDocument,t=e?e.defaultView:void 0;e||(e=n.document?n.document:n,t=e.defaultView);const i=["auto","scroll"];let r=n.parentNode;for(;r&&r.style&&e.body!==r;){let{overflow:s,overflowX:o,overflowY:a}=r.style;if([s,o,a].includes("scroll"))return r;if({overflow:s,overflowX:o,overflowY:a}=t.getComputedStyle(r),i.includes(s)||i.includes(o)||i.includes(a)||r.clientHeight<=r.scrollHeight+1&&(i.includes(a)||i.includes(s))||r.clientWidth<=r.scrollWidth+1&&(i.includes(o)||i.includes(s)))return r;r=r.parentNode}return t}function Gz(n){return n.scrollHeight-n.clientHeight}function Yz(n){return n.scrollWidth-n.clientWidth}function md(n){const e=n.ownerDocument,t=e.defaultView;let i=n.parentNode;for(;i&&i.style&&e.body!==i;){if(i.style.overflow!=="visible"&&i.style.overflow!=="")return i;const r=$a(i,t),s=["scroll","hidden","auto"],o=r.getPropertyValue("overflow"),a=r.getPropertyValue("overflow-y"),l=r.getPropertyValue("overflow-x");if(s.includes(o)||s.includes(a)||s.includes(l))return i;i=i.parentNode}return t}function Og(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window;if(n){if(n===t)return e==="width"?`${t.innerWidth}px`:e==="height"?`${t.innerHeight}px`:void 0}else return;const i=n.style[e];if(i!==""&&i!==void 0)return i;const r=$a(n,t);if(r[e]!==""&&r[e]!==void 0)return r[e]}function Pye(n,e){const{selectorText:t}=e;let i=!1;return e.type===CSSRule.STYLE_RULE&&t&&(n.msMatchesSelector?i=n.msMatchesSelector(t):n.matches&&(i=n.matches(t))),i}function $a(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n.currentStyle||e.getComputedStyle(n)}function dn(n){return n.offsetWidth}function Zn(n){return n.offsetHeight}function bd(n){return n.clientHeight||n.innerHeight}function gP(n){return n.clientWidth||n.innerWidth}function Iye(n,e,t){n.addEventListener(e,t,!1)}function Oye(n,e,t){n.removeEventListener(e,t,!1)}function pP(n){return n.selectionStart?n.selectionStart:0}function Kz(n){return n.selectionEnd?n.selectionEnd:0}function kye(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;const e=n.document;let t="";return n.getSelection?t=n.getSelection().toString():e.selection&&e.selection.type!=="Control"&&(t=e.selection.createRange().text),t}function mP(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;n.getSelection&&(n.getSelection().empty?n.getSelection().empty():n.getSelection().removeAllRanges&&n.getSelection().removeAllRanges())}function Zb(n,e,t){if(t===void 0&&(t=e),n.setSelectionRange){n.focus();try{n.setSelectionRange(e,t)}catch{const r=n.parentNode,s=r.style.display;r.style.display="block",n.setSelectionRange(e,t),r.style.display=s}}}let bP;function Dye(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;const e=n.createElement("div");e.style.height="200px",e.style.width="100%";const t=n.createElement("div");t.style.boxSizing="content-box",t.style.height="150px",t.style.left="0px",t.style.overflow="hidden",t.style.position="absolute",t.style.top="0px",t.style.width="200px",t.style.visibility="hidden",t.appendChild(e),(n.body||n.documentElement).appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return i===r&&(r=t.clientWidth),(n.body||n.documentElement).removeChild(t),i-r}function wi(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return bP===void 0&&(bP=Dye(n)),bP}function qz(n){return n.offsetWidth!==n.clientWidth}function Xz(n){return n.offsetHeight!==n.clientHeight}function aS(n,e,t){n.style.transform=`translate3d(${e},${t},0)`}function Nye(n){let e;return n.style.transform&&(e=n.style.transform)!==""?["transform",e]:-1}function Qb(n){n.style.transform&&n.style.transform!==""&&(n.style.transform="")}function Jb(n){return n&&(["INPUT","SELECT","TEXTAREA"].indexOf(n.nodeName)>-1||n.contentEditable==="true")}function lS(n){return Jb(n)&&n.hasAttribute("data-hot-input")===!1}function Lye(n){const e=n.ownerDocument.activeElement;lS(e)||n.select()}function vP(n){return!n.parentNode}function Zz(n,e){new IntersectionObserver((i,r)=>{i.forEach(s=>{s.isIntersecting&&n.offsetParent!==null&&(e(),r.unobserve(n))})},{root:n.ownerDocument.body}).observe(n)}function wP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=n.ownerDocument,r=i.createRange(),s=i.defaultView.getSelection();ze(n,"contenteditable",!0),t&&ze(n,...hd()),e&&ce(n,"invisibleSelection"),r.selectNodeContents(n),s.removeAllRanges(),s.addRange(r)}function yP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const t=n.ownerDocument.defaultView.getSelection();n.hasAttribute("aria-hidden")&&n.removeAttribute("aria-hidden"),t.removeAllRanges(),e&&Ze(n,"invisibleSelection"),n.removeAttribute("contenteditable")}function Qz(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;wP(n,t),e(),yP(n,t)}const Hye=Object.freeze(Object.defineProperty({__proto__:null,HTML_CHARACTERS:Uz,addClass:ce,addEvent:Iye,clearTextSelection:mP,closest:wu,closestDown:qb,empty:$o,fastInnerHTML:gd,fastInnerText:Su,getCaretPosition:pP,getComputedStyle:$a,getCssTransform:Nye,getFrameElement:Vz,getMaximumScrollLeft:Yz,getMaximumScrollTop:Gz,getParent:Fz,getParentWindow:dd,getScrollLeft:fP,getScrollTop:oS,getScrollableElement:Xb,getScrollbarWidth:wi,getSelectionEndPosition:Kz,getSelectionText:kye,getStyle:Og,getTrimmingContainer:md,getWindowScrollLeft:sS,getWindowScrollTop:dP,hasAccessToParentWindow:Aye,hasClass:Ue,hasHorizontalScrollbar:Xz,hasVerticalScrollbar:qz,index:Wz,innerHeight:bd,innerWidth:gP,isChildOf:yu,isDetached:vP,isInput:Jb,isOutsideInput:lS,isThisHotChild:Bz,isVisible:pd,makeElementContentEditableAndSelectItsContent:wP,matchesCSSRules:Pye,observeVisibilityChangeOnce:Zz,offset:vi,outerHeight:Zn,outerWidth:dn,overlayContainsElement:Cu,removeAttribute:fd,removeClass:Ze,removeContentEditableFromElementAndDeselect:yP,removeEvent:Oye,removeTextNodes:hP,resetCssTransform:Qb,runWithSelectedContendEditableElement:Qz,selectElementIfAllowed:Lye,setAttribute:ze,setCaretPosition:Zb,setOverlayPosition:aS},Symbol.toStringTag,{value:"Module"}));function fn(n){return typeof n=="function"}function Jz(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=0;const i={lastCallThrottled:!0};let r=null;function s(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];const c=Date.now();let u=!1;i.lastCallThrottled=!0,t||(t=c,u=!0);const h=e-(c-t);return u?(i.lastCallThrottled=!1,n.apply(this,a)):(r&&clearTimeout(r),r=setTimeout(()=>{i.lastCallThrottled=!1,n.apply(this,a),t=0,r=void 0},h)),i}return s}function $ye(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10;const i=Jz(n,e);let r=t;function s(){r=t}function o(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return r?(r-=1,n.apply(this,l)):i.apply(this,l)}return o.clearHits=s,o}function cS(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=null,i;function r(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return t&&clearTimeout(t),t=setTimeout(()=>{i=n.apply(this,o)},e),i}return r}function Fye(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=e;return function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return si(r,(c,u)=>u(c),i.apply(this,a))}}function CP(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return n.apply(this,t.concat(o))}}function e5(n){const e=n.length;function t(i){return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const l=i.concat(o);let c;return l.length>=e?c=n.apply(this,l):c=t(l),c}}return t([])}function Bye(n){const e=n.length;function t(i){return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const l=i.concat(o.reverse());let c;return l.length>=e?c=n.apply(this,l):c=t(l),c}}return t([])}function uS(n,e,t,i,r,s,o,a){return Oe(a)?n.call(e,t,i,r,s,o,a):Oe(o)?n.call(e,t,i,r,s,o):Oe(s)?n.call(e,t,i,r,s):Oe(r)?n.call(e,t,i,r):Oe(i)?n.call(e,t,i):Oe(t)?n.call(e,t):n.call(e)}const Vye=Object.freeze(Object.defineProperty({__proto__:null,curry:e5,curryRight:Bye,debounce:cS,fastCall:uS,isFunction:fn,partial:CP,pipe:Fye,throttle:Jz,throttleAfterHits:$ye},Symbol.toStringTag,{value:"Module"}));var Wye=gi,t5=kj,jye=Vi,n5=Jh,zye=EC,i5=Wye([].push),Uye=function(n){if(jye(n))return n;if(t5(n)){for(var e=n.length,t=[],i=0;i<e;i++){var r=n[i];typeof r=="string"?i5(t,r):(typeof r=="number"||n5(r)==="Number"||n5(r)==="String")&&i5(t,zye(r))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(t5(this))return l;for(var c=0;c<s;c++)if(t[c]===a)return l}}},Gye=Wi,r5=wg,s5=_C,Yye=Po,ev=gi,o5=$r,a5=Vi,l5=EM,c5=nA,Kye=Uye,qye=RM,Xye=String,_u=r5("JSON","stringify"),hS=ev(/./.exec),u5=ev("".charAt),Zye=ev("".charCodeAt),Qye=ev("".replace),Jye=ev(1 .toString),e0e=/[\uD800-\uDFFF]/g,h5=/^[\uD800-\uDBFF]$/,d5=/^[\uDC00-\uDFFF]$/,f5=!qye||o5(function(){var n=r5("Symbol")("stringify detection");return _u([n])!=="[null]"||_u({a:n})!=="{}"||_u(Object(n))!=="{}"}),g5=o5(function(){return _u("\uDF06\uD834")!=='"\\udf06\\ud834"'||_u("\uDEAD")!=='"\\udead"'}),t0e=function(n,e){var t=c5(arguments),i=Kye(e);if(!(!a5(i)&&(n===void 0||l5(n))))return t[1]=function(r,s){if(a5(i)&&(s=Yye(i,this,Xye(r),s)),!l5(s))return s},s5(_u,null,t)},n0e=function(n,e,t){var i=u5(t,e-1),r=u5(t,e+1);return hS(h5,n)&&!hS(d5,r)||hS(d5,n)&&!hS(h5,i)?"\\u"+Jye(Zye(n,0),16):n};_u&&Gye({target:"JSON",stat:!0,arity:3,forced:f5||g5},{stringify:function(e,t,i){var r=c5(arguments),s=s5(f5?t0e:_u,null,r);return g5&&typeof s=="string"?Qye(s,e0e,n0e):s}});function kg(n){let e;return Array.isArray(n)?e=n.length?new Array(n.length).fill(null):[]:(e={},ot(n,(t,i)=>{i!=="__children"&&(t&&typeof t=="object"&&!Array.isArray(t)?e[i]=kg(t):Array.isArray(t)?t.length&&typeof t[0]=="object"&&!Array.isArray(t[0])?e[i]=[kg(t[0])]:e[i]=[]:e[i]=null)})),e}function Fo(n,e){return e.prototype.constructor=e,n.prototype=new e,n.prototype.constructor=n,n}function oi(n,e,t){const i=Array.isArray(t);return ot(e,(r,s)=>{(i===!1||t.includes(s))&&(n[s]=r)}),n}function tv(n,e){ot(e,(t,i)=>{e[i]&&typeof e[i]=="object"?(n[i]||(Array.isArray(e[i])?n[i]=[]:Object.prototype.toString.call(e[i])==="[object Date]"?n[i]=e[i]:n[i]={}),tv(n[i],e[i])):n[i]=e[i]})}function sr(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function Bo(n){const e={};return ot(n,(t,i)=>{e[i]=t}),e}function Gt(n){n.MIXINS||(n.MIXINS=[]);for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return V(t,r=>{n.MIXINS.push(r.MIXIN_NAME),ot(r,(s,o)=>{if(n.prototype[o]!==void 0)throw new Error(`Mixin conflict. Property '${o}' already exist and cannot be overwritten.`);if(typeof s=="function")n.prototype[o]=s;else{const a=function(u,h){const d=`_${u}`,f=g=>{let p=g;return(Array.isArray(p)||st(p))&&(p=sr(p)),p};return function(){return this[d]===void 0&&(this[d]=f(h)),this[d]}},l=function(u){const h=`_${u}`;return function(d){this[h]=d}};Object.defineProperty(n.prototype,o,{get:a(o,s),set:l(o),configurable:!0})}})}),n}function dS(n,e){return JSON.stringify(n)===JSON.stringify(e)}function st(n){return Object.prototype.toString.call(n)==="[object Object]"}function Fa(n,e,t,i){i.value=t,i.writable=i.writable!==!1,i.enumerable=i.enumerable!==!1,i.configurable=i.configurable!==!1,Object.defineProperty(n,e,i)}function ot(n,e){for(const t in n)if((!n.hasOwnProperty||n.hasOwnProperty&&Object.prototype.hasOwnProperty.call(n,t))&&e(n[t],t,n)===!1)break;return n}function p5(n,e){const t=e.split(".");let i=n;return ot(t,r=>{if(i=i[r],i===void 0)return i=void 0,!1}),i}function fS(n,e,t){const i=e.split(".");let r=n;i.forEach((s,o)=>{o!==i.length-1?(In(r,s)||(r[s]={}),r=r[s]):r[s]=t})}function gS(n){if(!st(n))return 0;const e=function(t){let i=0;return st(t)?ot(t,(r,s)=>{s!=="__children"&&(i+=e(r))}):i+=1,i};return e(n)}function zs(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"value";const t=`_${e}`,i={_touched:!1,[t]:n,isTouched(){return this._touched}};return Object.defineProperty(i,e,{get(){return this[t]},set(r){this._touched=!0,this[t]=r},enumerable:!0,configurable:!0}),i}function In(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const i0e=Object.freeze(Object.defineProperty({__proto__:null,clone:Bo,createObjectPropListener:zs,deepClone:sr,deepExtend:tv,deepObjectSize:gS,defineGetter:Fa,duckSchema:kg,extend:oi,getProperty:p5,hasOwnProperty:In,inherit:Fo,isObject:st,isObjectEqual:dS,mixin:Gt,objectEach:ot,setProperty:fS},Symbol.toStringTag,{value:"Module"}));function pS(n){return window.requestAnimationFrame(n)}function nv(n){window.cancelAnimationFrame(n)}function SP(){return"ontouchstart"in window}function m5(){return typeof window<"u"}let Dg;function b5(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Dg||(typeof Intl=="object"?Dg=new Intl.Collator(n,e).compare:typeof String.prototype.localeCompare=="function"?Dg=(t,i)=>`${t}`.localeCompare(i):Dg=(t,i)=>t===i?0:t>i?-1:1,Dg)}const r0e=Object.freeze(Object.defineProperty({__proto__:null,cancelAnimationFrame:nv,getComparisonFunction:b5,isCSR:m5,isTouchSupported:SP,requestAnimationFrame:pS},Symbol.toStringTag,{value:"Module"})),Us=n=>{const e={value:!1};return e.test=(t,i)=>{e.value=n(t,i)},e},rc={chrome:Us((n,e)=>/Chrome/.test(n)&&/Google/.test(e)),chromeWebKit:Us(n=>/CriOS/.test(n)),edge:Us(n=>/Edge/.test(n)),edgeWebKit:Us(n=>/EdgiOS/.test(n)),firefox:Us(n=>/Firefox/.test(n)),firefoxWebKit:Us(n=>/FxiOS/.test(n)),mobile:Us(n=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n)),safari:Us((n,e)=>/Safari/.test(n)&&/Apple Computer/.test(e))},Ng={mac:Us(n=>/^Mac/.test(n)),win:Us(n=>/^Win/.test(n)),linux:Us(n=>/^Linux/.test(n)),ios:Us(n=>/iPhone|iPad|iPod/i.test(n))};function v5(){let{userAgent:n=navigator.userAgent,vendor:e=navigator.vendor}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ot(rc,t=>{let{test:i}=t;return void i(n,e)})}function w5(){let{platform:n=navigator.platform}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ot(Ng,e=>{let{test:t}=e;return void t(n)})}m5()&&(v5(),w5());function _P(){return rc.chrome.value}function y5(){return rc.chromeWebKit.value}function mS(){return rc.firefox.value}function C5(){return rc.firefoxWebKit.value}function RP(){return rc.safari.value}function S5(){return rc.edge.value}function s0e(){return rc.edgeWebKit.value}function sc(){return rc.mobile.value}function EP(){return Ng.ios.value}function xP(){let{maxTouchPoints:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:navigator;return n>2&&Ng.mac.value}function TP(){return Ng.win.value}function iv(){return Ng.mac.value}function o0e(){return Ng.linux.value}const a0e=Object.freeze(Object.defineProperty({__proto__:null,isChrome:_P,isChromeWebKit:y5,isEdge:S5,isEdgeWebKit:s0e,isFirefox:mS,isFirefoxWebKit:C5,isIOS:EP,isIpadOS:xP,isLinuxOS:o0e,isMacOS:iv,isMobileBrowser:sc,isSafari:RP,isWindowsOS:TP,setBrowserMeta:v5,setPlatformMeta:w5},Symbol.toStringTag,{value:"Module"})),Le={ALT:18,ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,AUDIO_DOWN:mS()?182:174,AUDIO_MUTE:mS()?181:173,AUDIO_UP:mS()?183:175,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND_LEFT:91,COMMAND_RIGHT:93,COMMAND_FIREFOX:224,CONTROL:17,DELETE:46,END:35,ENTER:13,ESCAPE:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,HOME:36,INSERT:45,MEDIA_NEXT:176,MEDIA_PLAY_PAUSE:179,MEDIA_PREV:177,MEDIA_STOP:178,NULL:0,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PERIOD:190,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,A:65,C:67,D:68,F:70,L:76,O:79,P:80,S:83,V:86,X:88,Y:89,Z:90},l0e=[Le.ALT,Le.ARROW_DOWN,Le.ARROW_LEFT,Le.ARROW_RIGHT,Le.ARROW_UP,Le.AUDIO_DOWN,Le.AUDIO_MUTE,Le.AUDIO_UP,Le.BACKSPACE,Le.CAPS_LOCK,Le.DELETE,Le.END,Le.ENTER,Le.ESCAPE,Le.F1,Le.F2,Le.F3,Le.F4,Le.F5,Le.F6,Le.F7,Le.F8,Le.F9,Le.F10,Le.F11,Le.F12,Le.F13,Le.F14,Le.F15,Le.F16,Le.F17,Le.F18,Le.F19,Le.HOME,Le.INSERT,Le.MEDIA_NEXT,Le.MEDIA_PLAY_PAUSE,Le.MEDIA_PREV,Le.MEDIA_STOP,Le.NULL,Le.NUM_LOCK,Le.PAGE_DOWN,Le.PAGE_UP,Le.PAUSE,Le.SCROLL_LOCK,Le.SHIFT,Le.TAB];function _5(n){return n===32||n>=48&&n<=57||n>=96&&n<=111||n>=186&&n<=192||n>=219&&n<=222||n>=226||n>=65&&n<=90}function MP(n){return l0e.includes(n)}function c0e(n){const e=[];return iv()?e.push(Le.COMMAND_LEFT,Le.COMMAND_RIGHT,Le.COMMAND_FIREFOX):e.push(Le.CONTROL),e.includes(n)}function R5(n){return[Le.CONTROL,Le.COMMAND_LEFT,Le.COMMAND_RIGHT,Le.COMMAND_FIREFOX].includes(n)}function Lg(n,e){const t=e.split("|");let i=!1;return V(t,r=>{if(n===Le[r])return i=!0,!1}),i}const u0e=Object.freeze(Object.defineProperty({__proto__:null,KEY_CODES:Le,isCtrlKey:c0e,isCtrlMetaKey:R5,isFunctionKey:MP,isKey:Lg,isPrintableChar:_5},Symbol.toStringTag,{value:"Module"}));function Gs(n){n.isImmediatePropagationEnabled=!1,n.cancelBubble=!0}function Ru(n){return n.isImmediatePropagationEnabled===!1}function Eu(n){return n.button===2}function bS(n){return n.button===0}function E5(n){return n instanceof TouchEvent}function x5(n,e){const t={x:n.offsetX,y:n.offsetY};let i=n.target;if(!(e instanceof HTMLElement)||i!==e&&i.contains(e))return t;for(;i!==e;)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;return t}const h0e=Object.freeze(Object.defineProperty({__proto__:null,isImmediatePropagationStopped:Ru,isLeftClick:bS,isRightClick:Eu,isTouchEvent:E5,offsetRelativeTo:x5,stopImmediatePropagation:Gs},Symbol.toStringTag,{value:"Module"}));var T5={},d0e=uj,f0e=KM,g0e=Object.keys||function(e){return d0e(e,f0e)},p0e=Ao,m0e=X3,b0e=gu,v0e=Yl,w0e=hC,y0e=g0e;T5.f=p0e&&!m0e?Object.defineProperties:function(e,t){v0e(e);for(var i=w0e(t),r=y0e(t),s=r.length,o=0,a;s>o;)b0e.f(e,a=r[o++],i[a]);return e};var C0e=Yl,S0e=T5,M5=KM,_0e=VM,R0e=Jj,E0e=kM,x0e=nj,A5=">",P5="<",AP="prototype",PP="script",I5=x0e("IE_PROTO"),IP=function(){},O5=function(n){return P5+PP+A5+n+P5+"/"+PP+A5},k5=function(n){n.write(O5("")),n.close();var e=n.parentWindow.Object;return n=null,e},T0e=function(){var n=E0e("iframe"),e="java"+PP+":",t;return n.style.display="none",R0e.appendChild(n),n.src=String(e),t=n.contentWindow.document,t.open(),t.write(O5("document.F=Object")),t.close(),t.F},vS,wS=function(){try{vS=new ActiveXObject("htmlfile")}catch{}wS=typeof document<"u"?document.domain&&vS?k5(vS):T0e():k5(vS);for(var n=M5.length;n--;)delete wS[AP][M5[n]];return wS()};_0e[I5]=!0;var M0e=Object.create||function(e,t){var i;return e!==null?(IP[AP]=C0e(e),i=new IP,IP[AP]=null,i[I5]=e):i=wS(),t===void 0?i:S0e.f(i,t)},A0e=fu,P0e=M0e,I0e=gu.f,OP=A0e("unscopables"),kP=Array.prototype;kP[OP]===void 0&&I0e(kP,OP,{configurable:!0,value:P0e(null)});var DP=function(n){kP[OP][n]=!0},O0e=DP;O0e("flatMap");function Yt(){Oe(console)&&console.warn(...arguments)}function NP(){Oe(console)&&console.error(...arguments)}function k0e(n,e,t){return(e=D0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function D0e(n){var e=N0e(n,"string");return typeof e=="symbol"?e:e+""}function N0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const Hg=["afterCellMetaReset","afterChange","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","beforeContextMenuShow","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterColumnSequenceChange","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterDrawSelection","beforeRemoveCellClassNames","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterUpdateData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseUp","afterOnCellContextMenu","afterOnCellMouseOver","afterOnCellMouseOut","afterRemoveCol","afterRemoveRow","beforeRenderer","afterRenderer","afterRowSequenceChange","beforeViewportScrollVertically","beforeViewportScrollHorizontally","beforeViewportScroll","afterScrollHorizontally","afterScrollVertically","afterScroll","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSelectionFocusSet","beforeSelectColumns","afterSelectColumns","beforeSelectRows","afterSelectRows","afterSetCellMeta","afterRemoveCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterSetSourceDataAtCell","afterUpdateSettings","afterValidate","beforeLanguageChange","afterLanguageChange","beforeAutofill","afterAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeRemoveCellMeta","beforeInit","beforeInitWalkontable","beforeLoadData","beforeUpdateData","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseUp","beforeOnCellContextMenu","beforeOnCellMouseOver","beforeOnCellMouseOut","beforeRemoveCol","beforeRemoveRow","beforeViewRender","afterViewRender","beforeRender","afterRender","beforeRowWrap","beforeColumnWrap","beforeSetCellMeta","beforeSelectionFocusSet","beforeSetRangeStartOnly","beforeSetRangeStart","beforeSetRangeEnd","beforeSelectionHighlightSet","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyColHeader","modifyColWidth","modifyFiltersMultiSelectValue","modifyFocusedElement","modifyRowHeader","modifyRowHeight","modifyRowHeightByOverlayName","modifyData","modifySourceData","modifyRowData","modifyGetCellCoords","modifyFocusOnTabNavigation","beforeHighlightingRowHeader","beforeHighlightingColumnHeader","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeCut","afterCut","beforeCopy","afterCopy","beforePaste","afterPaste","beforeColumnFreeze","afterColumnFreeze","beforeColumnMove","afterColumnMove","beforeColumnUnfreeze","afterColumnUnfreeze","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","afterFormulasValuesUpdate","afterNamedExpressionAdded","afterNamedExpressionRemoved","afterSheetAdded","afterSheetRenamed","afterSheetRemoved","modifyColumnHeaderHeight","modifyColumnHeaderValue","beforeUndo","beforeUndoStackChange","afterUndo","afterUndoStackChange","beforeRedo","beforeRedoStackChange","afterRedo","afterRedoStackChange","modifyRowHeaderWidth","modifyTransformFocus","modifyTransformStart","modifyTransformEnd","afterModifyTransformFocus","afterModifyTransformStart","afterModifyTransformEnd","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","beforeHideRows","afterHideRows","beforeUnhideRows","afterUnhideRows","beforeHideColumns","afterHideColumns","beforeUnhideColumns","afterUnhideColumns","beforeTrimRow","afterTrimRow","beforeUntrimRow","afterUntrimRow","beforeDropdownMenuShow","afterDropdownMenuShow","afterDropdownMenuHide","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","beforeBeginEditing","afterBeginEditing","beforeMergeCells","afterMergeCells","beforeUnmergeCells","afterUnmergeCells","afterListen","afterUnlisten","afterRefreshDimensions","beforeRefreshDimensions","beforeColumnCollapse","afterColumnCollapse","beforeColumnExpand","afterColumnExpand","modifyAutoColumnSizeSeed"],L0e=Ut`The plugin hook "[hookName]" was removed in Handsontable [removedInVersion].\x20
  Please consult release notes https://github.com/handsontable/handsontable/releases/tag/[removedInVersion] to\x20
  learn about the migration path.`,LP=new Map([["modifyRow","8.0.0"],["modifyCol","8.0.0"],["unmodifyRow","8.0.0"],["unmodifyCol","8.0.0"],["skipLengthCache","8.0.0"],["hiddenColumn","8.0.0"],["hiddenRow","8.0.0"]]),HP=new Map([[]]),yS=new WeakMap;class Pe{static getSingleton(){return $0e()}constructor(){k0e(this,"globalBucket",void 0),this.globalBucket=this.createEmptyBucket()}createEmptyBucket(){const e=Object.create(null);return V(Hg,t=>{e[t]=[],this.initOrderMap(e,t)}),e}getBucket(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e?(e.pluginHookBucket||(e.pluginHookBucket=this.createEmptyBucket()),e.pluginHookBucket):this.globalBucket}add(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;if(Array.isArray(t))V(t,s=>this.add(e,s,i));else{LP.has(e)&&Yt(oP(L0e,{hookName:e,removedInVersion:LP.get(e)})),HP.has(e)&&Yt(HP.get(e));const s=this.getBucket(i);if(typeof s[e]>"u"&&(this.register(e),s[e]=[],this.initOrderMap(s,e)),t.skip=!1,s[e].indexOf(t)===-1){let o=!1;t.initialHook&&V(s[e],(a,l)=>{if(a.initialHook)return s[e][l]=t,o=!0,!1}),o||s[e].push(t)}this.setCallbackOrderIndex(s,e,t,r),this.orderBucketByOrderIndex(s,e)}return this}once(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;Array.isArray(t)?V(t,s=>this.once(e,s,i)):(t.runOnce=!0,this.add(e,t,i,r))}remove(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const r=this.getBucket(i);return typeof r[e]<"u"&&r[e].indexOf(t)>=0?(t.skip=!0,!0):!1}has(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const i=this.getBucket(t);return!!(i[e]!==void 0&&i[e].length)}run(e,t,i,r,s,o,a,l){{const c=this.globalBucket[t],u=c?c.length:0;let h=0;if(u)for(;h<u;){if(!c[h]||c[h].skip){h+=1;continue}const d=uS(c[h],e,i,r,s,o,a,l);d!==void 0&&(i=d),c[h]&&c[h].runOnce&&this.remove(t,c[h]),h+=1}}{const c=this.getBucket(e)[t],u=c?c.length:0;let h=0;if(u)for(;h<u;){if(!c[h]||c[h].skip){h+=1;continue}const d=uS(c[h],e,i,r,s,o,a,l);d!==void 0&&(i=d),c[h]&&c[h].runOnce&&this.remove(t,c[h],e),h+=1}}return i}destroy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;ot(this.getBucket(e),(t,i,r)=>r[i].length=0)}register(e){this.isRegistered(e)||Hg.push(e)}deregister(e){this.isRegistered(e)&&Hg.splice(Hg.indexOf(e),1)}isDeprecated(e){return HP.has(e)||LP.has(e)}isRegistered(e){return Hg.indexOf(e)>=0}getRegistered(){return Hg}setCallbackOrderIndex(e,t,i,r){const s=Number.isInteger(r)?r:0,o=this.getCallbackOrderMap(e,t);o.set(s,[...o.get(s)||[],i])}orderBucketByOrderIndex(e,t){const i=this.getCallbackOrderMap(e,t);i===void 0||i.size===0||i.size===1&&i.has(0)||(e[t]=[...i].sort((r,s)=>r[0]-s[0]).flatMap(r=>{let[,s]=r;return s}))}initOrderMap(e,t){yS.has(e)||yS.set(e,[]),yS.get(e)[t]=new Map}getCallbackOrderMap(e,t){return yS.get(e)[t]}}const H0e=new Pe;function $0e(){return H0e}const $P=new Map;function Vo(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"common";$P.has(n)||$P.set(n,new Map);const e=$P.get(n);function t(a,l){e.set(a,l)}function i(a){return e.get(a)}function r(a){return e.has(a)}function s(){return[...e.keys()]}function o(){return[...e.values()]}return{register:t,getItem:i,hasItem:r,getNames:s,getValues:o}}const FP=new WeakMap,{register:F0e,getItem:D5,hasItem:N5,getNames:B0e,getValues:y8e}=Vo("editors");function V0e(n){const e={},t=n;this.getConstructor=function(){return n},this.getInstance=function(i){return i.guid in e||(e[i.guid]=new t(i)),e[i.guid]},Pe.getSingleton().add("afterDestroy",function(){e[this.guid]=null})}function L5(n,e){let t;if(typeof n=="function")FP.get(n)||Br(null,n),t=FP.get(n);else if(typeof n=="string")t=D5(n);else throw Error('Only strings and functions can be passed as "editor" parameter');if(!t)throw Error(`No editor registered under name "${n}"`);return t.getInstance(e)}function CS(n){if(typeof n=="function")return n;if(!N5(n))throw Error(`No registered editor found under "${n}" name`);return D5(n).getConstructor()}function Br(n,e){n&&typeof n!="string"&&(e=n,n=e.EDITOR_TYPE);const t=new V0e(e);typeof n=="string"&&F0e(n,t),FP.set(e,t)}function W0e(n,e,t){return(e=j0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function j0e(n){var e=z0e(n,"string");return typeof e=="symbol"?e:e+""}function z0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let SS=0;class Ys{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;W0e(this,"context",void 0),this.context=e||this,this.context.eventListeners||(this.context.eventListeners=[])}addEventListener(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;function s(o){i.call(this,U0e(o))}return this.context.eventListeners.push({element:e,event:t,callback:i,callbackProxy:s,options:r,eventManager:this}),e.addEventListener(t,s,r),SS+=1,()=>{this.removeEventListener(e,t,i)}}removeEventListener(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=this.context.eventListeners.length,o;for(;s;)if(s-=1,o=this.context.eventListeners[s],o.event===t&&o.element===e){if(i&&i!==o.callback||r&&o.eventManager!==this)continue;this.context.eventListeners.splice(s,1),o.element.removeEventListener(o.event,o.callbackProxy,o.options),SS-=1}}clearEvents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.context)return;let t=this.context.eventListeners.length;for(;t;){t-=1;const i=this.context.eventListeners[t];e&&i.eventManager!==this||(this.context.eventListeners.splice(t,1),i.element.removeEventListener(i.event,i.callbackProxy,i.options),SS-=1)}}clear(){this.clearEvents()}destroy(){this.clearEvents(),this.context=null}destroyWithOwnEventsOnly(){this.clearEvents(!0),this.context=null}fireEvent(e,t){let i=e.document,r=e;i||(i=e.ownerDocument?e.ownerDocument:e,r=i.defaultView);const s={bubbles:!0,cancelable:t!=="mousemove",view:r,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};let o;i.createEvent?(o=i.createEvent("MouseEvents"),o.initMouseEvent(t,s.bubbles,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,i.body.parentNode)):o=i.createEventObject(),e.dispatchEvent?e.dispatchEvent(o):e.fireEvent(`on${t}`,o)}}function U0e(n){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=function(){e.apply(this),Gs(this)},n}function G0e(){return SS}function Y0e(n,e){K0e(n,e),e.add(n)}function K0e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vd(n,e,t){return(e=q0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q0e(n){var e=X0e(n,"string");return typeof e=="symbol"?e:e+""}function X0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function H5(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var BP=new WeakSet;class VP{constructor(e,t,i){Y0e(this,BP),vd(this,"hot",void 0),vd(this,"tableMeta",void 0),vd(this,"selection",void 0),vd(this,"eventManager",void 0),vd(this,"destroyed",!1),vd(this,"activeEditor",void 0),vd(this,"cellProperties",void 0),this.hot=e,this.tableMeta=t,this.selection=i,this.eventManager=new Ys(e),this.hot.addHook("afterDocumentKeyDown",r=>H5(BP,this,Z0e).call(this,r)),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"compositionstart",r=>{!this.destroyed&&this.hot.isListening()&&this.openEditor("",r)}),this.hot.view._wt.update("onCellDblClick",(r,s,o)=>H5(BP,this,Q0e).call(this,r,s,o))}getActiveEditor(){return this.activeEditor}prepareEditor(){var e;if(this.activeEditor&&this.activeEditor.isWaiting()){this.closeEditor(!1,!1,c=>{c&&this.prepareEditor()});return}const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;if(!t||t.isHeader())return;const{row:i,col:r}=t,s=this.hot.runHooks("modifyGetCellCoords",i,r);let o=i,a=r;if(Array.isArray(s)&&([o,a]=s),this.cellProperties=this.hot.getCellMeta(o,a),!this.isCellEditable()){this.clearActiveEditor();return}const l=this.hot.getCell(i,r,!0);if(l){const c=this.hot.getCellEditor(this.cellProperties),u=this.hot.colToProp(a),h=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o),a);this.activeEditor=L5(c,this.hot),this.activeEditor.prepare(i,r,u,l,h,this.cellProperties)}}isEditorOpened(){return this.activeEditor&&this.activeEditor.isOpened()}openEditor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!this.isCellEditable()){this.clearActiveEditor();return}const r=this.hot.getSelectedRangeLast();let s=this.hot.runHooks("beforeBeginEditing",r.highlight.row,r.highlight.col,e,t,i);if(t instanceof MouseEvent&&typeof s!="boolean"&&(s=this.hot.selection.getLayerLevel()===0&&r.isSingle()),s===!1){this.clearActiveEditor();return}this.activeEditor||(this.hot.scrollToFocusedCell(),this.prepareEditor()),this.activeEditor&&(i&&this.activeEditor.enableFullEditMode(),this.activeEditor.beginEditing(e,t))}closeEditor(e,t,i){this.activeEditor?this.activeEditor.finishEditing(e,t,i):i&&i(!1)}closeEditorAndSaveChanges(e){this.closeEditor(!1,e)}closeEditorAndRestoreOriginalValue(e){this.closeEditor(!0,e)}clearActiveEditor(){this.activeEditor=void 0}isCellEditable(){const e=this.hot.getSelectedRangeLast();if(!e)return!1;const t=this.hot.getCellEditor(this.cellProperties),{row:i,col:r}=e.highlight,{rowIndexMapper:s,columnIndexMapper:o}=this.hot,a=s.isHidden(this.hot.toPhysicalRow(i))||o.isHidden(this.hot.toPhysicalColumn(r));return!(this.cellProperties.readOnly||!t||a)}moveSelectionAfterEnter(e){const t={...typeof this.tableMeta.enterMoves=="function"?this.tableMeta.enterMoves(e):this.tableMeta.enterMoves};e.shiftKey&&(t.row=-t.row,t.col=-t.col),this.hot.selection.isMultiple()?this.selection.transformFocus(t.row,t.col):this.selection.transformStart(t.row,t.col,!0)}destroy(){this.destroyed=!0,this.eventManager.destroy()}}function Z0e(n){const e=this.hot.getSelectedRangeLast();if(!this.hot.isListening()||!e||e.highlight.isHeader()||Ru(n))return;const{keyCode:t}=n,i=(n.ctrlKey||n.metaKey)&&!n.altKey;(!this.activeEditor||this.activeEditor&&!this.activeEditor.isWaiting())&&!MP(t)&&!R5(t)&&!i&&!this.isEditorOpened()&&this.openEditor("",n)}function Q0e(n,e){e.isCell()&&this.openEditor(null,n,!0)}const $5=new WeakMap;VP.getInstance=function(n,e,t){let i=$5.get(n);return i||(i=new VP(n,e,t),$5.set(n,i)),i};function J0e(n,e){F5(n,e),e.add(n)}function rv(n,e,t){F5(n,e),e.set(n,t)}function F5(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function On(n,e){return n.get(oc(n,e))}function sv(n,e,t){return n.set(oc(n,e),t),t}function oc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const $g=Object.freeze({CELL:"cell",MIXED:"mixed"});var ki=new WeakMap,_S=new WeakMap,RS=new WeakMap,ES=new WeakMap,xS=new WeakMap,xu=new WeakSet;class eCe{constructor(e){var t=this;J0e(this,xu),rv(this,ki,void 0),rv(this,_S,void 0),rv(this,RS,1),rv(this,ES,null),rv(this,xS,new Map);const i=e.getSettings();sv(ki,this,e),sv(_S,this,i.imeFastEdit?$g.MIXED:$g.CELL),On(ki,this).addHook("afterUpdateSettings",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return oc(xu,t,nCe).call(t,...s)}),On(ki,this).addHook("afterSelection",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return oc(xu,t,B5).call(t,...s)}),On(ki,this).addHook("afterSelectionFocusSet",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return oc(xu,t,B5).call(t,...s)}),On(ki,this).addHook("afterSelectionEnd",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return oc(xu,t,tCe).call(t,...s)})}getFocusMode(){return On(_S,this)}setFocusMode(e){Object.values($g).includes(e)?sv(_S,this,e):Yt(`"${e}" is not a valid focus mode.`)}getRefocusDelay(){return On(RS,this)}setRefocusDelay(e){sv(RS,this,e)}setRefocusElementGetter(e){sv(ES,this,e)}getRefocusElement(){if(typeof On(ES,this)=="function")return On(ES,this).call(this);var e;return(e=On(ki,this).getActiveEditor())===null||e===void 0?void 0:e.TEXTAREA}focusOnHighlightedCell(e){const t=i=>{var r,s;const o=(r=On(ki,this).getSelectedRangeLast())===null||r===void 0?void 0:r.highlight;if(!o)return;let a=On(ki,this).runHooks("modifyFocusedElement",o.row,o.col,i);a instanceof HTMLElement||(a=i),a&&!((s=On(ki,this).getActiveEditor())!==null&&s!==void 0&&s.isOpened())&&a.focus({preventScroll:!0})};e?t(e):oc(xu,this,WP).call(this,i=>t(i))}refocusToEditorTextarea(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:On(RS,this);const i=this.getRefocusElement();On(ki,this).getSettings().imeFastEdit&&!((e=On(ki,this).getActiveEditor())!==null&&e!==void 0&&e.isOpened())&&i&&(On(xS,this).has(t)||On(xS,this).set(t,cS(()=>{i.select()},t)),On(xS,this).get(t)())}}function WP(n){var e;const t=(e=On(ki,this).getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;if(!t||!On(ki,this).selection.isCellVisible(t)){n(null);return}const i=On(ki,this).getCell(t.row,t.col,!0);i===null?On(ki,this).addHookOnce("afterScroll",()=>{n(On(ki,this).getCell(t.row,t.col,!0))}):n(i)}function B5(){oc(xu,this,WP).call(this,n=>{const{activeElement:e}=On(ki,this).rootDocument;e&&lS(e)&&e.blur(),this.focusOnHighlightedCell(n)})}function tCe(){oc(xu,this,WP).call(this,n=>{this.getFocusMode()===$g.MIXED&&n.nodeName==="TD"&&this.refocusToEditorTextarea()})}function nCe(n){typeof n.imeFastEdit=="boolean"&&this.setFocusMode(n.imeFastEdit?$g.MIXED:$g.CELL)}var iCe=Ma,rCe=Jh,sCe=fu,oCe=sCe("match"),aCe=function(n){var e;return iCe(n)&&((e=n[oCe])!==void 0?!!e:rCe(n)==="RegExp")},lCe=Yl,cCe=function(){var n=lCe(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e},uCe=Po,hCe=Aa,dCe=dC,fCe=cCe,V5=RegExp.prototype,gCe=function(n){var e=n.flags;return e===void 0&&!("flags"in V5)&&!hCe(n,"flags")&&dCe(V5,n)?uCe(fCe,n):e},jP=gi,pCe=Sb,mCe=Math.floor,zP=jP("".charAt),bCe=jP("".replace),UP=jP("".slice),vCe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,wCe=/\$([$&'`]|\d{1,2})/g,yCe=function(n,e,t,i,r,s){var o=t+n.length,a=i.length,l=wCe;return r!==void 0&&(r=pCe(r),l=vCe),bCe(s,l,function(c,u){var h;switch(zP(u,0)){case"$":return"$";case"&":return n;case"`":return UP(e,0,t);case"'":return UP(e,o);case"<":h=r[UP(u,1,-1)];break;default:var d=+u;if(d===0)return c;if(d>a){var f=mCe(d/10);return f===0?c:f<=a?i[f-1]===void 0?zP(u,1):i[f-1]+zP(u,1):c}h=i[d-1]}return h===void 0?"":h})},CCe=Wi,SCe=Po,GP=gi,W5=yb,_Ce=Vi,RCe=uC,ECe=aCe,ov=EC,xCe=mC,TCe=gCe,MCe=yCe,ACe=fu,PCe=ACe("replace"),ICe=TypeError,YP=GP("".indexOf);GP("".replace);var j5=GP("".slice),OCe=Math.max;CCe({target:"String",proto:!0},{replaceAll:function(e,t){var i=W5(this),r,s,o,a,l,c,u,h,d,f,g=0,p="";if(!RCe(e)){if(r=ECe(e),r&&(s=ov(W5(TCe(e))),!~YP(s,"g")))throw new ICe("`.replaceAll` does not allow non-global regexes");if(o=xCe(e,PCe),o)return SCe(o,e,i,t)}for(a=ov(i),l=ov(e),c=_Ce(t),c||(t=ov(t)),u=l.length,h=OCe(1,u),d=YP(a,l);d!==-1;)f=c?ov(t(l,d,a)):MCe(l,a,d,[],void 0,t),p+=j5(a,g,d)+f,g=d+u,d=d+h>a.length?-1:YP(a,l,d+h);return g<a.length&&(p+=j5(a,g)),p}});const z5={"&nbsp;":" ","&amp;":"&","&lt;":"<","&gt;":">"},kCe=new RegExp(Object.keys(z5).map(n=>`(${n})`).join("|"),"gi");function DCe(n){return(n&&n.nodeName||"")==="TABLE"}function KP(n){const e=n.hasColHeaders(),t=n.hasRowHeaders(),i=[e?-1:0,t?-1:0,n.countRows()-1,n.countCols()-1],r=n.getData(...i),s=r.length,o=s>0?r[0].length:0,a=["<table>","</table>"],l=e?["<thead>","</thead>"]:[],c=["<tbody>","</tbody>"],u=t?1:0,h=e?1:0;for(let d=0;d<s;d+=1){const f=e&&d===0,g=[];for(let m=0;m<o;m+=1){const v=!f&&t&&m===0;let y="";if(f)y=`<th>${n.getColHeader(m-u)}</th>`;else if(v)y=`<th>${n.getRowHeader(d-h)}</th>`;else{const w=r[d][m],{hidden:_,rowspan:R,colspan:E}=n.getCellMeta(d-h,m-u);if(!_){const x=[];if(R&&x.push(`rowspan="${R}"`),E&&x.push(`colspan="${E}"`),Hn(w))y=`<td ${x.join(" ")}></td>`;else{const P=w.toString().replace("<","&lt;").replace(">","&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20/gi,"&nbsp;").replace(/\t/gi,"&#9;");y=`<td ${x.join(" ")}>${P}</td>`}}}g.push(y)}const p=["<tr>",...g,"</tr>"].join("");f?l.splice(1,0,p):c.splice(-1,0,p)}return a.splice(1,0,l.join(""),c.join("")),a.join("")}function qP(n){const e=n.length,t=["<table>"];for(let i=0;i<e;i+=1){const r=n[i],s=r.length,o=[];i===0&&t.push("<tbody>");for(let a=0;a<s;a+=1){const l=r[a],c=Hn(l)?"":l.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20{2,}/gi,u=>`<span style="mso-spacerun: yes">${"&nbsp;".repeat(u.length-1)} </span>`).replace(/\t/gi,"&#9;");o.push(`<td>${c}</td>`)}t.push("<tr>",...o,"</tr>"),i+1===e&&t.push("</tbody>")}return t.push("</table>"),t.join("")}function U5(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;const t={},i=e.createDocumentFragment(),r=e.createElement("div");i.appendChild(r);let s=n;if(typeof s=="string"){const w=s.replace(/<td\b[^>]*?>([\s\S]*?)<\/\s*td>/g,_=>{const R=_.match(/<td\b[^>]*?>/g)[0],E=/<p.*?>/g,x=_.substring(R.length,_.lastIndexOf("<")).trim().replaceAll(/\n\s+/g," ").replaceAll(E,`
`).replace(`
`,"").replaceAll(/<\/(.*)>\s+$/mg,"</$1>").replace(/(<(?!br)([^>]+)>)/gi,"").replaceAll(/^&nbsp;$/mg,"");return`${R}${x}</td>`});r.insertAdjacentHTML("afterbegin",`${w}`),s=r.querySelector("table")}if(!s||!DCe(s))return;const o=r.querySelector('meta[name$="enerator"]'),a=s.querySelector("tbody th")!==null,l=s.querySelector("tr"),c=l?Array.from(l.cells).reduce((w,_)=>w+_.colSpan,0)-(a?1:0):0,u=s.tFoot&&Array.from(s.tFoot.rows)||[],h=[];let d=!1,f=0,g=0;if(s.tHead){const w=Array.from(s.tHead.rows).filter(_=>{const R=_.querySelector("td")!==null;return R&&h.push(_),!R});f=w.length,d=f>0,f>1?t.nestedHeaders=Array.from(w).reduce((_,R)=>{const E=Array.from(R.cells).reduce((x,P,T)=>{if(a&&T===0)return x;const{colSpan:I,innerHTML:N}=P,W=I>1?{label:N,colspan:I}:N;return x.push(W),x},[]);return _.push(E),_},[]):d&&(t.colHeaders=Array.from(w[0].children).reduce((_,R,E)=>(a&&E===0||_.push(R.innerHTML),_),[]))}h.length&&(t.fixedRowsTop=h.length),u.length&&(t.fixedRowsBottom=u.length);const p=[...h,...Array.from(s.tBodies).reduce((w,_)=>(w.push(...Array.from(_.rows)),w),[]),...u];g=p.length;const m=new Array(g);for(let w=0;w<g;w++)m[w]=new Array(c);const v=[],y=[];for(let w=0;w<g;w++){const _=p[w],R=Array.from(_.cells),E=R.length;for(let x=0;x<E;x++){const P=R[x],{nodeName:T,innerHTML:I,rowSpan:N,colSpan:W}=P,j=m[w].findIndex(K=>K===void 0);if(T==="TD"){if(N>1||W>1){for(let B=w;B<w+N;B++)if(B<g)for(let G=j;G<j+W;G++)m[B][G]=null;const H=P.getAttribute("style");H&&H.includes("mso-ignore:colspan")||v.push({col:j,row:w,rowspan:N,colspan:W})}let K="";o&&/excel/gi.test(o.content)?K=I.replace(/[\r\n][\x20]{0,2}/g," ").replace(/<br(\s*|\/)>[\r\n]?[\x20]{0,3}/gim,`\r
`):K=I.replace(/<br(\s*|\/)>[\r\n]?/gim,`\r
`),m[w][j]=K.replace(kCe,H=>z5[H])}else y.push(I)}}return v.length&&(t.mergeCells=v),y.length&&(t.rowHeaders=y),m.length&&(t.data=m),t}const NCe=Object.freeze(Object.defineProperty({__proto__:null,_dataToHTML:qP,htmlToGridSettings:U5,instanceToHTML:KP},Symbol.toStringTag,{value:"Module"}));function or(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=typeof n;if(t==="number")return!isNaN(n)&&isFinite(n);if(t==="string"){if(n.length===0)return!1;if(n.length===1)return/\d/.test(n);const i=Array.from(new Set([".",...e])).map(r=>`\\${r}`).join("|");return new RegExp(`^[+-]?(((${i})?\\d+((${i})\\d+)?(e[+-]?\\d+)?)|(0x[a-f\\d]+))$`,"i").test(n.trim())}else if(t==="object")return!!n&&typeof n.valueOf()=="number"&&!(n instanceof Date);return!1}function G5(n){return or(n,[","])}function He(n,e,t){let i=-1;for(typeof e=="function"?(t=e,e=n):i=n-1;++i<=e&&t(i)!==!1;);}function XP(n,e,t){let i=n+1;for(typeof e=="function"&&(t=e,e=0);--i>=e&&t(i)!==!1;);}function ZP(n,e){return e=parseInt(e.toString().replace("%",""),10),e=isNaN(e)?0:e,parseInt(n*e/100,10)}function Kt(n,e,t){return Math.min(n,e)===n?e:Math.max(n,t)===n?t:n}const LCe=Object.freeze(Object.defineProperty({__proto__:null,clamp:Kt,isNumeric:or,isNumericLike:G5,rangeEach:He,rangeEachReverse:XP,valueAccordingPercent:ZP},Symbol.toStringTag,{value:"Module"})),QP="asc",HCe="desc",Y5=new Map([[QP,[-1,1]],[HCe,[1,-1]]]),$Ce=n=>`The priority '${n}' is already declared in a map.`,FCe=n=>`The priority '${n}' is not a number.`;function BCe(){let{errorPriorityExists:n,errorPriorityNaN:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=new Map;n=fn(n)?n:$Ce,e=fn(e)?e:FCe;function i(s,o){if(!or(s))throw new Error(e(s));if(t.has(s))throw new Error(n(s));t.set(s,o)}function r(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QP;const[o,a]=Y5.get(s)||Y5.get(QP);return[...t].sort((l,c)=>l[0]<c[0]?o:a).map(l=>l[1])}return{addItem:i,getItems:r}}const VCe=n=>`The id '${n}' is already declared in a map.`;function TS(){let{errorIdExists:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=new Map;n=fn(n)?n:VCe;function t(c,u){if(l(c))throw new Error(n(c));e.set(c,u)}function i(c){return e.delete(c)}function r(){e.clear()}function s(c){const[u]=a().find(h=>{let[d,f]=h;return c===f?d:!1})||[null];return u}function o(c){return e.get(c)}function a(){return[...e]}function l(c){return e.has(c)}return{addItem:t,clear:r,getId:s,getItem:o,getItems:a,hasItem:l,removeItem:i}}const WCe=n=>`'${n}' value is already declared in a unique set.`;function jCe(){let{errorItemExists:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=new Set;n=fn(n)?n:WCe;function t(s){if(e.has(s))throw new Error(n(s));e.add(s)}function i(){return[...e]}function r(){e.clear()}return{addItem:t,clear:r,getItems:i}}const JP=n=>`There is already registered "${n}" plugin.`,K5=BCe({errorPriorityExists:n=>`There is already registered plugin on priority "${n}".`,errorPriorityNaN:n=>`The priority "${n}" is not a number.`}),q5=jCe({errorItemExists:JP}),eI=TS({errorIdExists:JP});function tI(){return[...K5.getItems(),...q5.getItems()]}function av(n){const e=rr(n);return eI.getItem(e)}function zCe(n){return!!av(n)}function At(n,e,t){[n,e,t]=GCe(n,e,t),av(n)===void 0&&UCe(n,e,t)}function UCe(n,e,t){const i=rr(n);if(eI.hasItem(i))throw new Error(JP(i));t===void 0?q5.addItem(i):K5.addItem(t,i),eI.addItem(i,e)}function GCe(n,e,t){return typeof n=="function"&&(e=n,n=e.PLUGIN_KEY,t=e.PLUGIN_PRIORITY),[n,e,t]}const{register:YCe,getItem:KCe,hasItem:X5,getNames:qCe,getValues:_8e}=Vo("renderers");function MS(n){if(typeof n=="function")return n;if(!X5(n))throw Error(`No registered renderer found under "${n}" name`);return KCe(n)}function gs(n,e){typeof n!="string"&&(e=n,n=e.RENDERER_TYPE),YCe(n,e)}const{register:XCe,getItem:ZCe,hasItem:Z5,getNames:QCe,getValues:R8e}=Vo("validators");function nI(n){if(typeof n=="function")return n;if(!Z5(n))throw Error(`No registered validator found under "${n}" name`);return ZCe(n)}function wd(n,e){typeof n!="string"&&(e=n,n=e.VALIDATOR_TYPE),XCe(n,e)}var JCe=Wi,eSe=Sb,tSe=xb,nSe=Eb,iSe=DP;JCe({target:"Array",proto:!0},{at:function(e){var t=eSe(this),i=tSe(t),r=nSe(e),s=r>=0?r:i+r;return s<0||s>=i?void 0:t[s]}}),iSe("at");var rSe=Wi,sSe=gi,oSe=yb,aSe=Eb,lSe=EC,cSe=$r,uSe=sSe("".charAt),hSe=cSe(function(){return"𠮷".at(-2)!=="\uD842"});rSe({target:"String",proto:!0,forced:hSe},{at:function(e){var t=lSe(oSe(this)),i=t.length,r=aSe(e),s=r>=0?r:i+r;return s<0||s>=i?void 0:uSe(t,s)}});function lv(n,e,t){return(e=dSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dSe(n){var e=fSe(n,"string");return typeof e=="symbol"?e:e+""}function fSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class gSe{constructor(){lv(this,"count",0),lv(this,"startColumn",null),lv(this,"endColumn",null),lv(this,"startPosition",null),lv(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedWidth:i,zeroBasedScrollOffset:r,viewportWidth:s,columnWidth:o}=t,a=r>0?s+1:s;i>=r&&i+o<=r+a&&((this.startColumn===null||this.startColumn===void 0)&&(this.startColumn=e),this.endColumn=e)}finalize(e){var t;const{scrollOffset:i,viewportWidth:r,inlineStartOffset:s,zeroBasedScrollOffset:o,totalColumns:a,needReverse:l,startPositions:c,columnWidth:u}=e;if(this.endColumn===a-1&&l)for(this.startColumn=this.endColumn;this.startColumn>0;){const g=c[this.endColumn]+u-c[this.startColumn-1];if(g<=r&&(this.startColumn-=1),g>=r)break}this.startPosition=(t=c[this.startColumn])!==null&&t!==void 0?t:null;const h=o>0?r+1:r,d=i+r-h,f=this.startColumn===null?0:e.getColumnWidth(this.startColumn);d<-1*s||i>c.at(-1)||-1*i-r>-1*f?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}function cv(n,e,t){return(e=pSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pSe(n){var e=mSe(n,"string");return typeof e=="symbol"?e:e+""}function mSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class bSe{constructor(){cv(this,"count",0),cv(this,"startRow",null),cv(this,"endRow",null),cv(this,"startPosition",null),cv(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedHeight:i,zeroBasedScrollOffset:r,innerViewportHeight:s,rowHeight:o}=t;i>=r&&i+o<=s&&(this.startRow===null&&(this.startRow=e),this.endRow=e)}finalize(e){var t;const{scrollOffset:i,viewportHeight:r,horizontalScrollbarHeight:s,totalRows:o,needReverse:a,startPositions:l,rowHeight:c}=e;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){const d=l[this.endRow]+c-l[this.startRow-1];if(d<=r-s&&(this.startRow-=1),d>=r-s)break}this.startPosition=(t=l[this.startRow])!==null&&t!==void 0?t:null;const u=i+r-s,h=this.startRow===null?0:e.getRowHeight(this.startRow);u<h||i>l.at(-1)?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function uv(n,e,t){return(e=vSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vSe(n){var e=wSe(n,"string");return typeof e=="symbol"?e:e+""}function wSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Q5{constructor(){uv(this,"count",0),uv(this,"startColumn",null),uv(this,"endColumn",null),uv(this,"startPosition",null),uv(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedWidth:i,zeroBasedScrollOffset:r,viewportWidth:s}=t;i<=r&&(this.startColumn=e);const o=r>0?s+1:s;i>=r&&i<=r+o&&(this.startColumn===null||this.startColumn===void 0)&&(this.startColumn=e),this.endColumn=e}finalize(e){var t;const{scrollOffset:i,viewportWidth:r,inlineStartOffset:s,zeroBasedScrollOffset:o,totalColumns:a,needReverse:l,startPositions:c,columnWidth:u}=e;if(this.endColumn===a-1&&l)for(this.startColumn=this.endColumn;this.startColumn>0;){const f=c[this.endColumn]+u-c[this.startColumn-1];if(this.startColumn-=1,f>r)break}this.startPosition=(t=c[this.startColumn])!==null&&t!==void 0?t:null;const h=o>0?r+1:r;i+r-h<-1*s||i>c.at(-1)+u||-1*i-r>0?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}function hv(n,e,t){return(e=ySe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ySe(n){var e=CSe(n,"string");return typeof e=="symbol"?e:e+""}function CSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class J5{constructor(){hv(this,"count",0),hv(this,"startRow",null),hv(this,"endRow",null),hv(this,"startPosition",null),hv(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedHeight:i,zeroBasedScrollOffset:r,innerViewportHeight:s}=t;i<=r&&(this.startRow=e),i>=r&&i<=s&&this.startRow===null&&(this.startRow=e),this.endRow=e}finalize(e){var t;const{scrollOffset:i,viewportHeight:r,horizontalScrollbarHeight:s,totalRows:o,needReverse:a,startPositions:l,rowHeight:c}=e;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){const h=l[this.endRow]+c-l[this.startRow-1];if(this.startRow-=1,h>=r-s)break}this.startPosition=(t=l[this.startRow])!==null&&t!==void 0?t:null,i+r-s<0||i>l.at(-1)+c?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function dv(n,e,t){return(e=SSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SSe(n){var e=_Se(n,"string");return typeof e=="symbol"?e:e+""}function _Se(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class RSe{constructor(){dv(this,"count",0),dv(this,"startColumn",0),dv(this,"endColumn",0),dv(this,"startPosition",0),dv(this,"isVisibleInTrimmingContainer",!0)}initialize(e){let{totalColumns:t}=e;this.count=t,this.endColumn=this.count-1}process(){}finalize(){}}function fv(n,e,t){return(e=ESe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ESe(n){var e=xSe(n,"string");return typeof e=="symbol"?e:e+""}function xSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class TSe{constructor(){fv(this,"count",0),fv(this,"startRow",0),fv(this,"endRow",0),fv(this,"startPosition",0),fv(this,"isVisibleInTrimmingContainer",!0)}initialize(e){let{totalRows:t}=e;this.count=t,this.endRow=this.count-1}process(){}finalize(){}}class MSe extends Q5{finalize(e){var t;super.finalize(e);const{overrideFn:i,totalColumns:r,startPositions:s}=e;this.startColumn!==null&&typeof i=="function"&&i(this),this.startColumn<0&&(this.startColumn=0),this.startPosition=(t=s[this.startColumn])!==null&&t!==void 0?t:null,r<this.endColumn&&(this.endColumn=r-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}class ASe extends J5{finalize(e){var t;super.finalize(e);const{overrideFn:i,totalRows:r,startPositions:s}=e;this.startRow!==null&&typeof i=="function"&&i(this),this.startRow<0&&(this.startRow=0),this.startPosition=(t=s[this.startRow])!==null&&t!==void 0?t:null,r<this.endRow&&(this.endRow=r-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function e8(n,e,t){return(e=PSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PSe(n){var e=ISe(n,"string");return typeof e=="symbol"?e:e+""}function ISe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class t8{constructor(e){e8(this,"calculationTypes",[]),e8(this,"calculationResults",new Map),this.calculationTypes=e}_initialize(e){this.calculationTypes.forEach(t=>{let[i,r]=t;this.calculationResults.set(i,r),r.initialize(e)})}_process(e,t){this.calculationTypes.forEach(i=>{let[,r]=i;return r.process(e,t)})}_finalize(e){this.calculationTypes.forEach(t=>{let[,i]=t;return i.finalize(e)})}getResultsFor(e){return this.calculationResults.get(e)}}function Wo(n,e,t){return(e=OSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OSe(n){var e=kSe(n,"string");return typeof e=="symbol"?e:e+""}function kSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const AS=50;class DSe extends t8{constructor(e){let{calculationTypes:t,viewportWidth:i,scrollOffset:r,totalColumns:s,columnWidthFn:o,overrideFn:a,inlineStartOffset:l}=e;super(t),Wo(this,"viewportWidth",0),Wo(this,"scrollOffset",0),Wo(this,"zeroBasedScrollOffset",0),Wo(this,"totalColumns",0),Wo(this,"columnWidthFn",null),Wo(this,"columnWidth",0),Wo(this,"overrideFn",null),Wo(this,"inlineStartOffset",0),Wo(this,"totalCalculatedWidth",0),Wo(this,"startPositions",[]),Wo(this,"needReverse",!0),this.viewportWidth=i,this.scrollOffset=r,this.zeroBasedScrollOffset=Math.max(r,0),this.totalColumns=s,this.columnWidthFn=o,this.overrideFn=a,this.inlineStartOffset=l,this.calculate()}calculate(){this._initialize(this);for(let e=0;e<this.totalColumns;e++)if(this.columnWidth=this.getColumnWidth(e),this._process(e,this),this.startPositions.push(this.totalCalculatedWidth),this.totalCalculatedWidth+=this.columnWidth,this.totalCalculatedWidth>=this.zeroBasedScrollOffset+this.viewportWidth){this.needReverse=!1;break}this._finalize(this)}getColumnWidth(e){const t=this.columnWidthFn(e);return isNaN(t)?AS:t}}function Ks(n,e,t){return(e=NSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NSe(n){var e=LSe(n,"string");return typeof e=="symbol"?e:e+""}function LSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const n8=23;class HSe extends t8{constructor(e){let{calculationTypes:t,viewportHeight:i,scrollOffset:r,totalRows:s,rowHeightFn:o,overrideFn:a,horizontalScrollbarHeight:l}=e;super(t),Ks(this,"viewportHeight",0),Ks(this,"scrollOffset",0),Ks(this,"zeroBasedScrollOffset",0),Ks(this,"totalRows",0),Ks(this,"rowHeightFn",null),Ks(this,"rowHeight",0),Ks(this,"overrideFn",null),Ks(this,"horizontalScrollbarHeight",0),Ks(this,"innerViewportHeight",0),Ks(this,"totalCalculatedHeight",0),Ks(this,"startPositions",[]),Ks(this,"needReverse",!0),this.viewportHeight=i,this.scrollOffset=r,this.zeroBasedScrollOffset=Math.max(r,0),this.totalRows=s,this.rowHeightFn=o,this.overrideFn=a,this.horizontalScrollbarHeight=l??0,this.innerViewportHeight=this.zeroBasedScrollOffset+this.viewportHeight-this.horizontalScrollbarHeight,this.calculate()}calculate(){this._initialize(this);for(let e=0;e<this.totalRows;e++)if(this.rowHeight=this.getRowHeight(e),this._process(e,this),this.startPositions.push(this.totalCalculatedHeight),this.totalCalculatedHeight+=this.rowHeight,this.totalCalculatedHeight>=this.innerViewportHeight){this.needReverse=!1;break}this._finalize(this)}getRowHeight(e){const t=this.rowHeightFn(e);return isNaN(t)?n8:t}}function $Se(n,e,t){FSe(n,e),e.set(n,t)}function FSe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i8(n,e,t){return(e=BSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BSe(n){var e=VSe(n,"string");return typeof e=="symbol"?e:e+""}function VSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Fg(n,e){return n.get(s8(n,e))}function r8(n,e,t){return n.set(s8(n,e),t),t}function s8(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var ac=new WeakMap;class yd{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;i8(this,"row",null),i8(this,"col",null),$Se(this,ac,!1),r8(ac,this,i),typeof e<"u"&&typeof t<"u"&&(this.row=e,this.col=t)}isValid(e){const{countRows:t,countCols:i,countRowHeaders:r,countColHeaders:s}={countRows:0,countCols:0,countRowHeaders:0,countColHeaders:0,...e};return!(!Number.isInteger(this.row)||!Number.isInteger(this.col)||this.row<-s||this.col<-r||this.row>=t||this.col>=i)}isEqual(e){return e===this?!0:this.row===e.row&&this.col===e.col}isHeader(){return!this.isCell()}isCell(){return this.row>=0&&this.col>=0}isRtl(){return Fg(ac,this)}isSouthEastOf(e){return this.row>=e.row&&(Fg(ac,this)?this.col<=e.col:this.col>=e.col)}isNorthWestOf(e){return this.row<=e.row&&(Fg(ac,this)?this.col>=e.col:this.col<=e.col)}isSouthWestOf(e){return this.row>=e.row&&(Fg(ac,this)?this.col>=e.col:this.col<=e.col)}isNorthEastOf(e){return this.row<=e.row&&(Fg(ac,this)?this.col<=e.col:this.col>=e.col)}normalize(){return this.row=this.row===null?this.row:Math.max(this.row,0),this.col=this.col===null?this.col:Math.max(this.col,0),this}assign(e){return Number.isInteger(e==null?void 0:e.row)&&(this.row=e.row),Number.isInteger(e==null?void 0:e.col)&&(this.col=e.col),e instanceof yd&&r8(ac,this,e.isRtl()),this}clone(){return new yd(this.row,this.col,Fg(ac,this))}toObject(){return{row:this.row,col:this.col}}}function WSe(n,e,t){jSe(n,e),e.set(n,t)}function jSe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function iI(n,e,t){return(e=zSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zSe(n){var e=USe(n,"string");return typeof e=="symbol"?e:e+""}function USe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qs(n,e){return n.get(o8(n,e))}function GSe(n,e,t){return n.set(o8(n,e),t),t}function o8(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Vr=new WeakMap;class gv{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;iI(this,"highlight",null),iI(this,"from",null),iI(this,"to",null),WSe(this,Vr,!1),this.highlight=e.clone(),this.from=t.clone(),this.to=i.clone(),GSe(Vr,this,r)}setHighlight(e){return this.highlight=e.clone(),this}setFrom(e){return this.from=e.clone(),this}setTo(e){return this.to=e.clone(),this}isValid(e){return this.from.isValid(e)&&this.to.isValid(e)}isSingle(){return this.isSingleCell()||this.isSingleHeader()}isSingleCell(){return this.from.row>=0&&this.from.row===this.to.row&&this.from.col>=0&&this.from.col===this.to.col}isSingleHeader(){return(this.from.row<0||this.from.col<0)&&this.from.row===this.to.row&&this.from.col===this.to.col}isHeader(){return this.from.isHeader()&&this.to.isHeader()?!0:this.from.col<0&&this.to.col<0||this.from.row<0&&this.to.row<0}containsHeaders(){return this.from.isHeader()||this.to.isHeader()}getOuterHeight(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}getOuterWidth(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}getHeight(){if(this.from.row<0&&this.to.row<0)return 0;const e=Math.max(this.from.row,0),t=Math.max(this.to.row,0);return Math.max(e,t)-Math.min(e,t)+1}getWidth(){if(this.from.col<0&&this.to.col<0)return 0;const e=Math.max(this.from.col,0),t=Math.max(this.to.col,0);return Math.max(e,t)-Math.min(e,t)+1}getCellsCount(){return this.getWidth()*this.getHeight()}includes(e){const{row:t,col:i}=e,r=this.getOuterTopStartCorner(),s=this.getOuterBottomEndCorner();return r.row<=t&&s.row>=t&&r.col<=i&&s.col>=i}includesRange(e){return this.includes(e.getOuterTopStartCorner())&&this.includes(e.getOuterBottomEndCorner())}isEqual(e){return Math.min(this.from.row,this.to.row)===Math.min(e.from.row,e.to.row)&&Math.max(this.from.row,this.to.row)===Math.max(e.from.row,e.to.row)&&Math.min(this.from.col,this.to.col)===Math.min(e.from.col,e.to.col)&&Math.max(this.from.col,this.to.col)===Math.max(e.from.col,e.to.col)}overlaps(e){return e.isSouthEastOf(this.getOuterTopLeftCorner())&&e.isNorthWestOf(this.getOuterBottomRightCorner())}isSouthEastOf(e){return this.getOuterTopLeftCorner().isSouthEastOf(e)||this.getOuterBottomRightCorner().isSouthEastOf(e)}isNorthWestOf(e){return this.getOuterTopLeftCorner().isNorthWestOf(e)||this.getOuterBottomRightCorner().isNorthWestOf(e)}isOverlappingHorizontally(e){return this.getOuterTopEndCorner().col>=e.getOuterTopStartCorner().col&&this.getOuterTopEndCorner().col<=e.getOuterTopEndCorner().col||this.getOuterTopStartCorner().col<=e.getOuterTopEndCorner().col&&this.getOuterTopStartCorner().col>=e.getOuterTopStartCorner().col}isOverlappingVertically(e){return this.getOuterBottomStartCorner().row>=e.getOuterTopRightCorner().row&&this.getOuterBottomStartCorner().row<=e.getOuterBottomStartCorner().row||this.getOuterTopEndCorner().row<=e.getOuterBottomStartCorner().row&&this.getOuterTopEndCorner().row>=e.getOuterTopRightCorner().row}expand(e){const t=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();return e.row<t.row||e.col<t.col||e.row>i.row||e.col>i.col?(this.from=this._createCellCoords(Math.min(t.row,e.row),Math.min(t.col,e.col)),this.to=this._createCellCoords(Math.max(i.row,e.row),Math.max(i.col,e.col)),!0):!1}expandByRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(this.includesRange(e)||!this.overlaps(e))return!1;const i=this.getOuterTopStartCorner(),r=this.getOuterBottomEndCorner(),s=this.getDirection(),o=e.getOuterTopStartCorner(),a=e.getOuterBottomEndCorner(),l=Math.min(i.row,o.row),c=Math.min(i.col,o.col),u=Math.max(r.row,a.row),h=Math.max(r.col,a.col),d=this._createCellCoords(l,c),f=this._createCellCoords(u,h);return this.from=d,this.to=f,this.setDirection(s),t&&(this.highlight.row===this.getOuterBottomRightCorner().row&&this.getVerticalDirection()==="N-S"&&this.flipDirectionVertically(),this.highlight.col===this.getOuterTopRightCorner().col&&this.getHorizontalDirection()==="W-E"&&this.flipDirectionHorizontally()),!0}getDirection(){if(this.from.isNorthWestOf(this.to))return"NW-SE";if(this.from.isNorthEastOf(this.to))return"NE-SW";if(this.from.isSouthEastOf(this.to))return"SE-NW";if(this.from.isSouthWestOf(this.to))return"SW-NE"}setDirection(e){switch(e){case"NW-SE":[this.from,this.to]=[this.getOuterTopLeftCorner(),this.getOuterBottomRightCorner()];break;case"NE-SW":[this.from,this.to]=[this.getOuterTopRightCorner(),this.getOuterBottomLeftCorner()];break;case"SE-NW":[this.from,this.to]=[this.getOuterBottomRightCorner(),this.getOuterTopLeftCorner()];break;case"SW-NE":[this.from,this.to]=[this.getOuterBottomLeftCorner(),this.getOuterTopRightCorner()];break}}getVerticalDirection(){return["NE-SW","NW-SE"].indexOf(this.getDirection())>-1?"N-S":"S-N"}getHorizontalDirection(){return["NW-SE","SW-NE"].indexOf(this.getDirection())>-1?"W-E":"E-W"}flipDirectionVertically(){switch(this.getDirection()){case"NW-SE":this.setDirection("SW-NE");break;case"NE-SW":this.setDirection("SE-NW");break;case"SE-NW":this.setDirection("NE-SW");break;case"SW-NE":this.setDirection("NW-SE");break}}flipDirectionHorizontally(){switch(this.getDirection()){case"NW-SE":this.setDirection("NE-SW");break;case"NE-SW":this.setDirection("NW-SE");break;case"SE-NW":this.setDirection("SW-NE");break;case"SW-NE":this.setDirection("SE-NW");break}}getTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getTopLeftCorner(){return qs(Vr,this)?this.getTopEndCorner():this.getTopStartCorner()}getBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getBottomRightCorner(){return qs(Vr,this)?this.getBottomStartCorner():this.getBottomEndCorner()}getTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getTopRightCorner(){return qs(Vr,this)?this.getTopStartCorner():this.getTopEndCorner()}getBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getBottomLeftCorner(){return qs(Vr,this)?this.getBottomEndCorner():this.getBottomStartCorner()}getOuterTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterTopLeftCorner(){return qs(Vr,this)?this.getOuterTopEndCorner():this.getOuterTopStartCorner()}getOuterBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterBottomRightCorner(){return qs(Vr,this)?this.getOuterBottomStartCorner():this.getOuterBottomEndCorner()}getOuterTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterTopRightCorner(){return qs(Vr,this)?this.getOuterTopStartCorner():this.getOuterTopEndCorner()}getOuterBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterBottomLeftCorner(){return qs(Vr,this)?this.getOuterBottomEndCorner():this.getOuterBottomStartCorner()}isCorner(e){return e.isEqual(this.getOuterTopLeftCorner())||e.isEqual(this.getOuterTopRightCorner())||e.isEqual(this.getOuterBottomLeftCorner())||e.isEqual(this.getOuterBottomRightCorner())}getOppositeCorner(e){if(!(e instanceof yd))return!1;if(e.isEqual(this.getOuterBottomEndCorner()))return this.getOuterTopStartCorner();if(e.isEqual(this.getOuterTopStartCorner()))return this.getOuterBottomEndCorner();if(e.isEqual(this.getOuterTopEndCorner()))return this.getOuterBottomStartCorner();if(e.isEqual(this.getOuterBottomStartCorner()))return this.getOuterTopEndCorner()}getBordersSharedWith(e){if(!this.includesRange(e))return[];const t={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},i={top:Math.min(e.from.row,e.to.row),bottom:Math.max(e.from.row,e.to.row),left:Math.min(e.from.col,e.to.col),right:Math.max(e.from.col,e.to.col)},r=[];return t.top===i.top&&r.push("top"),t.right===i.right&&r.push(qs(Vr,this)?"left":"right"),t.bottom===i.bottom&&r.push("bottom"),t.left===i.left&&r.push(qs(Vr,this)?"right":"left"),r}getInner(){const e=this.getOuterTopStartCorner(),t=this.getOuterBottomEndCorner(),i=[];for(let r=e.row;r<=t.row;r++)for(let s=e.col;s<=t.col;s++)!(this.from.row===r&&this.from.col===s)&&!(this.to.row===r&&this.to.col===s)&&i.push(this._createCellCoords(r,s));return i}getAll(){const e=this.getOuterTopStartCorner(),t=this.getOuterBottomEndCorner(),i=[];for(let r=e.row;r<=t.row;r++)for(let s=e.col;s<=t.col;s++)e.row===r&&e.col===s?i.push(e):t.row===r&&t.col===s?i.push(t):i.push(this._createCellCoords(r,s));return i}forAll(e){const t=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();for(let r=t.row;r<=i.row;r++)for(let s=t.col;s<=i.col;s++)if(e(r,s)===!1)return}clone(){return new gv(this.highlight,this.from,this.to,qs(Vr,this))}toObject(){return{from:this.from.toObject(),to:this.to.toObject()}}_createCellCoords(e,t){return new yd(e,t,qs(Vr,this))}}function Ba(n,e,t){YSe(n,e),e.set(n,t)}function YSe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $e(n,e){return n.get(a8(n,e))}function Tu(n,e,t){return n.set(a8(n,e),t),t}function a8(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Xs=new WeakMap,rI=new WeakMap,Di=new WeakMap,Bg=new WeakMap,PS=new WeakMap,jo=new WeakMap,sI=new WeakMap,pv=new WeakMap,Cd=new WeakMap,Va=new WeakMap;let l8=class{constructor(e,t,i,r,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;Ba(this,Xs,void 0),Ba(this,rI,void 0),Ba(this,Di,void 0),Ba(this,Bg,void 0),Ba(this,PS,void 0),Ba(this,jo,void 0),Ba(this,sI,void 0),Ba(this,pv,void 0),Ba(this,Cd,[null,null]),Ba(this,Va,[null,null]),Tu(Xs,this,i),Tu(rI,this,t),Tu(Di,this,s),Tu(Bg,this,o),Tu(PS,this,a),Tu(jo,this,r),Tu(sI,this,e),this.registerEvents()}registerEvents(){$e(jo,this).addEventListener($e(Di,this).holder,"contextmenu",i=>this.onContextMenu(i)),$e(jo,this).addEventListener($e(Di,this).TABLE,"mouseover",i=>this.onMouseOver(i)),$e(jo,this).addEventListener($e(Di,this).TABLE,"mouseout",i=>this.onMouseOut(i));const e=()=>{$e(jo,this).addEventListener($e(Di,this).holder,"touchstart",i=>this.onTouchStart(i)),$e(jo,this).addEventListener($e(Di,this).holder,"touchend",i=>this.onTouchEnd(i)),this.momentumScrolling||(this.momentumScrolling={}),$e(jo,this).addEventListener($e(Di,this).holder,"scroll",()=>{clearTimeout(this.momentumScrolling._timeout),this.momentumScrolling.ongoing||$e(Xs,this).getSetting("onBeforeTouchScroll"),this.momentumScrolling.ongoing=!0,this.momentumScrolling._timeout=setTimeout(()=>{this.touchApplied||(this.momentumScrolling.ongoing=!1,$e(Xs,this).getSetting("onAfterMomentumScroll"))},200)})},t=()=>{$e(jo,this).addEventListener($e(Di,this).holder,"mouseup",i=>this.onMouseUp(i)),$e(jo,this).addEventListener($e(Di,this).holder,"mousedown",i=>this.onMouseDown(i))};sc()?e():(SP()&&e(),t())}selectedCellWasTouched(e){const i=this.parentCell(e).coords;if($e(pv,this)&&i){const[r,s]=[i.row,$e(pv,this).from.row],[o,a]=[i.col,$e(pv,this).from.col];return r===s&&o===a}return!1}parentCell(e){const t={},i=$e(Di,this).TABLE,r=qb(e,["TD","TH"],i);return r?(t.coords=$e(Di,this).getCoords(r),t.TD=r):Ue(e,"wtBorder")&&Ue(e,"current")?(t.coords=$e(Bg,this).getFocusSelection().cellRange.highlight,t.TD=$e(Di,this).getCell(t.coords)):Ue(e,"wtBorder")&&Ue(e,"area")&&$e(Bg,this).getAreaSelection().cellRange&&(t.coords=$e(Bg,this).getAreaSelection().cellRange.to,t.TD=$e(Di,this).getCell(t.coords)),t}onMouseDown(e){const t=$e(rI,this).rootDocument.activeElement,i=CP(Fz,e.target),r=e.target;if(!["TD","TH"].includes(t.nodeName)&&(r===t||i(0)===t||i(1)===t))return;const s=this.parentCell(r);Ue(r,"corner")?$e(Xs,this).getSetting("onCellCornerMouseDown",e,r):s.TD&&$e(Xs,this).has("onCellMouseDown")&&this.callListener("onCellMouseDown",e,s.coords,s.TD),(e.button===0||this.touchApplied)&&s.TD&&($e(Va,this)[0]=s.TD,clearTimeout($e(Cd,this)[0]),$e(Cd,this)[0]=setTimeout(()=>{$e(Va,this)[0]=null},1e3))}onContextMenu(e){if($e(Xs,this).has("onCellContextMenu")){const t=this.parentCell(e.target);t.TD&&this.callListener("onCellContextMenu",e,t.coords,t.TD)}}onMouseOver(e){if(!$e(Xs,this).has("onCellMouseOver"))return;const t=$e(Di,this).TABLE,i=qb(e.target,["TD","TH"],t),r=$e(PS,this)||this;i&&i!==r.lastMouseOver&&yu(i,t)&&(r.lastMouseOver=i,this.callListener("onCellMouseOver",e,$e(Di,this).getCoords(i),i))}onMouseOut(e){if(!$e(Xs,this).has("onCellMouseOut"))return;const t=$e(Di,this).TABLE,i=qb(e.target,["TD","TH"],t),r=qb(e.relatedTarget,["TD","TH"],t),s=$e(PS,this)||this;i&&i!==r&&yu(i,t)&&(this.callListener("onCellMouseOut",e,$e(Di,this).getCoords(i),i),r===null&&(s.lastMouseOver=null))}onMouseUp(e){const t=this.parentCell(e.target);t.TD&&$e(Xs,this).has("onCellMouseUp")&&this.callListener("onCellMouseUp",e,t.coords,t.TD),!(e.button!==0&&!this.touchApplied)&&(t.TD===$e(Va,this)[0]&&t.TD===$e(Va,this)[1]?(Ue(e.target,"corner")?this.callListener("onCellCornerDblClick",e,t.coords,t.TD):this.callListener("onCellDblClick",e,t.coords,t.TD),$e(Va,this)[0]=null,$e(Va,this)[1]=null):t.TD===$e(Va,this)[0]&&($e(Va,this)[1]=t.TD,clearTimeout($e(Cd,this)[1]),$e(Cd,this)[1]=setTimeout(()=>{$e(Va,this)[1]=null},500)))}onTouchStart(e){Tu(pv,this,$e(Bg,this).getFocusSelection().cellRange),this.touchApplied=!0,this.onMouseDown(e)}onTouchEnd(e){var t;const i=e.target,r=(t=this.parentCell(i))===null||t===void 0?void 0:t.coords,s=Oe(r)&&r.row>=0&&r.col>=0;if(e.cancelable&&s&&$e(Xs,this).getSetting("isDataViewInstance")){const a=["A","BUTTON","INPUT"];EP()&&(y5()||C5())&&this.selectedCellWasTouched(i)&&!a.includes(i.tagName)?e.preventDefault():this.selectedCellWasTouched(i)||e.preventDefault()}this.onMouseUp(e),this.touchApplied=!1}callListener(e,t,i,r){const s=$e(Xs,this).getSettingPure(e);s&&s(t,i,r,$e(sI,this).call(this))}destroy(){clearTimeout($e(Cd,this)[0]),clearTimeout($e(Cd,this)[1]),$e(jo,this).destroy()}};function oI(n,e,t){return(e=KSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KSe(n){var e=qSe(n,"string");return typeof e=="symbol"?e:e+""}function qSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class XSe{constructor(e,t,i){oI(this,"offset",void 0),oI(this,"total",void 0),oI(this,"countTH",void 0),this.offset=e,this.total=t,this.countTH=i}offsetted(e){return e+this.offset}unOffsetted(e){return e-this.offset}renderedToSource(e){return this.offsetted(e)}sourceToRendered(e){return this.unOffsetted(e)}offsettedTH(e){return e-this.countTH}unOffsettedTH(e){return e+this.countTH}visibleRowHeadedColumnToSourceColumn(e){return this.renderedToSource(this.offsettedTH(e))}sourceColumnToVisibleRowHeadedColumn(e){return this.unOffsettedTH(this.sourceToRendered(e))}}function aI(n,e,t){return(e=ZSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZSe(n){var e=QSe(n,"string");return typeof e=="symbol"?e:e+""}function QSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class JSe{constructor(e,t,i){aI(this,"offset",void 0),aI(this,"total",void 0),aI(this,"countTH",void 0),this.offset=e,this.total=t,this.countTH=i}offsetted(e){return e+this.offset}unOffsetted(e){return e-this.offset}renderedToSource(e){return this.offsetted(e)}sourceToRendered(e){return this.unOffsetted(e)}offsettedTH(e){return e-this.countTH}unOffsettedTH(e){return e+this.countTH}visibleColHeadedRowToSourceRow(e){return this.renderedToSource(this.offsettedTH(e))}sourceRowToVisibleColHeadedRow(e){return this.unOffsettedTH(this.sourceToRendered(e))}}const e_e=0,IS=1,OS=2;function kS(n,e,t){return(e=t_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t_e(n){var e=n_e(n,"string");return typeof e=="symbol"?e:e+""}function n_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class c8{constructor(){kS(this,"currentSize",0),kS(this,"nextSize",0),kS(this,"currentOffset",0),kS(this,"nextOffset",0)}setSize(e){this.currentSize=this.nextSize,this.nextSize=e}setOffset(e){this.currentOffset=this.nextOffset,this.nextOffset=e}}function lI(n,e,t){return(e=i_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i_e(n){var e=r_e(n,"string");return typeof e=="symbol"?e:e+""}function r_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class s_e{constructor(){lI(this,"size",new c8),lI(this,"workingSpace",e_e),lI(this,"sharedSize",null)}setSize(e){this.size.setSize(e)}setOffset(e){this.size.setOffset(e)}getViewSize(){return this.size}isShared(){return this.sharedSize instanceof c8}isPlaceOn(e){return this.workingSpace===e}append(e){this.workingSpace=IS,e.workingSpace=OS,this.sharedSize=e.getViewSize()}prepend(e){this.workingSpace=OS,e.workingSpace=IS,this.sharedSize=e.getViewSize()}}function Vg(n,e,t){return(e=o_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o_e(n){var e=a_e(n,"string");return typeof e=="symbol"?e:e+""}function a_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class u8{constructor(e,t,i){Vg(this,"rootNode",void 0),Vg(this,"nodesPool",void 0),Vg(this,"sizeSet",new s_e),Vg(this,"childNodeType",void 0),Vg(this,"visualIndex",0),Vg(this,"collectedNodes",[]),this.rootNode=e,this.nodesPool=t,this.childNodeType=i.toUpperCase()}setSize(e){return this.sizeSet.setSize(e),this}setOffset(e){return this.sizeSet.setOffset(e),this}isSharedViewSet(){return this.sizeSet.isShared()}getNode(e){return e<this.collectedNodes.length?this.collectedNodes[e]:null}getCurrentNode(){const e=this.collectedNodes.length;return e>0?this.collectedNodes[e-1]:null}getRenderedChildCount(){const{rootNode:e,sizeSet:t}=this;let i=0;if(this.isSharedViewSet()){let r=e.firstElementChild;for(;r;){if(r.tagName===this.childNodeType)i+=1;else if(t.isPlaceOn(IS))break;r=r.nextElementSibling}}else i=e.childElementCount;return i}start(){this.collectedNodes.length=0,this.visualIndex=0;const{rootNode:e,sizeSet:t}=this,i=this.isSharedViewSet(),{nextSize:r}=t.getViewSize();let s=this.getRenderedChildCount();for(;s<r;){const a=this.nodesPool();!i||i&&t.isPlaceOn(OS)?e.appendChild(a):e.insertBefore(a,e.firstChild),s+=1}const o=i&&t.isPlaceOn(IS);for(;s>r;)e.removeChild(o?e.firstChild:e.lastChild),s-=1}render(){const{rootNode:e,sizeSet:t}=this;let i=this.visualIndex;this.isSharedViewSet()&&t.isPlaceOn(OS)&&(i+=t.sharedSize.nextSize);let r=e.childNodes[i];if(r.tagName!==this.childNodeType){const s=this.nodesPool();e.replaceChild(s,r),r=s}this.collectedNodes.push(r),this.visualIndex+=1}end(){}}class h8 extends u8{prependView(e){return this.sizeSet.prepend(e.sizeSet),e.sizeSet.append(this.sizeSet),this}appendView(e){return this.sizeSet.append(e.sizeSet),e.sizeSet.prepend(this.sizeSet),this}}function l_e(n,e,t){return(e=c_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c_e(n){var e=u_e(n,"string");return typeof e=="symbol"?e:e+""}function u_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class h_e{constructor(e){l_e(this,"nodeType",void 0),this.nodeType=e.toUpperCase()}setRootDocument(e){this.rootDocument=e}obtain(){return this.rootDocument.createElement(this.nodeType)}}function mv(n,e,t){return(e=d_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function d_e(n){var e=f_e(n,"string");return typeof e=="symbol"?e:e+""}function f_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class bv{constructor(e,t){mv(this,"nodesPool",null),mv(this,"nodeType",void 0),mv(this,"rootNode",void 0),mv(this,"table",null),mv(this,"renderedNodes",0),this.nodesPool=typeof e=="string"?new h_e(e):null,this.nodeType=e,this.rootNode=t}setTable(e){this.nodesPool&&this.nodesPool.setRootDocument(e.rootDocument),this.table=e}adjust(){}render(){}}function d8(n,e,t){return(e=g_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g_e(n){var e=p_e(n,"string");return typeof e=="symbol"?e:e+""}function p_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class m_e extends bv{constructor(){super("TH"),d8(this,"orderViews",new WeakMap),d8(this,"sourceRowIndex",0)}obtainOrderView(e){let t;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new h8(e,i=>this.nodesPool.obtain(this.sourceRowIndex,i),this.nodeType),this.orderViews.set(e,t)),t}render(){const{rowsToRender:e,rowHeaderFunctions:t,rowHeadersCount:i,rows:r,cells:s}=this.table;for(let o=0;o<e;o++){const a=this.table.renderedRowToSource(o),l=r.getRenderedNode(o);this.sourceRowIndex=a;const c=this.obtainOrderView(l),u=s.obtainOrderView(l);c.appendView(u).setSize(i).setOffset(this.table.renderedColumnToSource(0)).start();for(let h=0;h<i;h++){c.render();const d=c.getCurrentNode();d.className="",d.removeAttribute("style"),fd(d,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&ze(d,[lye(),bye(),cP(h+1),Ig(-1)]),t[h](a,d,h)}c.end()}}}class b_e extends bv{constructor(e){super(null,e)}adjust(){const{columnHeadersCount:e,rowHeadersCount:t}=this.table;let i=this.rootNode.firstChild;if(e){const{columnsToRender:r}=this.table,s=r+t;for(let a=0,l=e;a<l;a++){for(i=this.rootNode.childNodes[a],i||(i=this.table.rootDocument.createElement("tr"),this.rootNode.appendChild(i)),this.renderedNodes=i.childNodes.length;this.renderedNodes<s;)i.appendChild(this.table.rootDocument.createElement("th")),this.renderedNodes+=1;for(;this.renderedNodes>s;)i.removeChild(i.lastChild),this.renderedNodes-=1}const o=this.rootNode.childNodes.length;if(o>e)for(let a=e;a<o;a++)this.rootNode.removeChild(this.rootNode.lastChild)}else i&&$o(i)}render(){const{columnHeadersCount:e}=this.table;this.table.isAriaEnabled()&&ze(this.rootNode,[Iz()]);for(let t=0;t<e;t+=1){const{columnHeaderFunctions:i,columnsToRender:r,rowHeadersCount:s}=this.table,o=this.rootNode.childNodes[t];this.table.isAriaEnabled()&&ze(o,[lP(),Nz(t+1)]);for(let a=-1*s;a<r;a+=1){const l=this.table.renderedColumnToSource(a),c=o.childNodes[a+s];c.className="",c.removeAttribute("style"),fd(c,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&ze(c,[cP(a+1+this.table.rowHeadersCount),Ig(-1),cye(),...a>=0?[mye()]:[lP()]]),i[t](l,c,t)}}}}let f8=!1;class v_e extends bv{constructor(e){super(null,e)}adjust(){const{columnsToRender:e,rowHeadersCount:t}=this.table,i=e+t;for(;this.renderedNodes<i;)this.rootNode.appendChild(this.table.rootDocument.createElement("col")),this.renderedNodes+=1;for(;this.renderedNodes>i;)this.rootNode.removeChild(this.rootNode.lastChild),this.renderedNodes-=1}render(){this.adjust();const{columnsToRender:e,rowHeadersCount:t}=this.table;!f8&&e>1e3&&(f8=!0,Yt(Ut`Performance tip: Handsontable rendered more than 1000 visible columns.\x20
        Consider limiting the number of rendered columns by specifying the table width and/or\x20
        turning off the "renderAllColumns" option.`));for(let r=0;r<t;r++){const s=this.table.renderedColumnToSource(r),o=this.table.columnUtils.getHeaderWidth(s);this.rootNode.childNodes[r].style.width=`${o}px`}for(let r=0;r<e;r++){const s=this.table.renderedColumnToSource(r),o=this.table.columnUtils.getStretchedColumnWidth(s);this.rootNode.childNodes[r+t].style.width=`${o}px`}const i=this.rootNode.firstChild;i&&ce(i,"rowHeader")}}function w_e(n,e,t){return(e=y_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function y_e(n){var e=C_e(n,"string");return typeof e=="symbol"?e:e+""}function C_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const DS={rowEven:"ht__row_even",rowOdd:"ht__row_odd"};let g8=!1;class S_e extends bv{constructor(e){super("TR",e),w_e(this,"orderView",void 0),this.orderView=new u8(e,t=>this.nodesPool.obtain(t),this.nodeType)}getRenderedNode(e){return this.orderView.getNode(e)}render(){const{rowsToRender:e}=this.table;!g8&&e>1e3&&(g8=!0,Yt(Ut`Performance tip: Handsontable rendered more than 1000 visible rows.\x20
        Consider limiting the number of rendered rows by specifying the table height and/or\x20
        turning off the "renderAllRows" option.`)),this.table.isAriaEnabled()&&ze(this.rootNode,[Iz()]),this.orderView.setSize(e).setOffset(this.table.renderedRowToSource(0)).start();for(let r=0;r<e;r++){this.orderView.render();const s=this.orderView.getCurrentNode(),o=this.table.renderedRowToSource(r);if(this.table.isAriaEnabled()){var t,i;ze(s,[lP(),Nz(o+((t=(i=this.table.rowUtils)===null||i===void 0||(i=i.dataAccessObject)===null||i===void 0?void 0:i.columnHeaders.length)!==null&&t!==void 0?t:0)+1)])}Ze(s,[DS.rowEven,DS.rowOdd]),(o+1)%2===0?ce(s,DS.rowEven):ce(s,DS.rowOdd)}this.orderView.end()}}function p8(n,e,t){return(e=__e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function __e(n){var e=R_e(n,"string");return typeof e=="symbol"?e:e+""}function R_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class E_e extends bv{constructor(){super("TD"),p8(this,"orderViews",new WeakMap),p8(this,"sourceRowIndex",0)}obtainOrderView(e){let t;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new h8(e,i=>this.nodesPool.obtain(this.sourceRowIndex,i),this.nodeType),this.orderViews.set(e,t)),t}render(){const{rowsToRender:e,columnsToRender:t,rows:i,rowHeaders:r}=this.table;for(let a=0;a<e;a++){const l=this.table.renderedRowToSource(a),c=i.getRenderedNode(a);this.sourceRowIndex=l;const u=this.obtainOrderView(c),h=r.obtainOrderView(c);u.prependView(h).setSize(t).setOffset(this.table.renderedColumnToSource(0)).start();for(let d=0;d<t;d++){u.render();const f=u.getCurrentNode(),g=this.table.renderedColumnToSource(d);if(Ue(f,"hide")||(f.className=""),f.removeAttribute("style"),f.removeAttribute("dir"),fd(f,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.cellRenderer(l,g,f),this.table.isAriaEnabled()){var s,o;ze(f,[...f.hasAttribute("role")?[]:[aye()],Ig(-1),cP(g+((s=(o=this.table.rowUtils)===null||o===void 0||(o=o.dataAccessObject)===null||o===void 0?void 0:o.rowHeaders.length)!==null&&s!==void 0?s:0)+1)])}}u.end()}}}function yi(n,e,t){return(e=x_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function x_e(n){var e=T_e(n,"string");return typeof e=="symbol"?e:e+""}function T_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class M_e{constructor(e){let{cellRenderer:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};yi(this,"rootNode",void 0),yi(this,"rootDocument",void 0),yi(this,"rowHeaders",null),yi(this,"columnHeaders",null),yi(this,"colGroup",null),yi(this,"rows",null),yi(this,"cells",null),yi(this,"rowFilter",null),yi(this,"columnFilter",null),yi(this,"rowUtils",null),yi(this,"columnUtils",null),yi(this,"rowsToRender",0),yi(this,"columnsToRender",0),yi(this,"rowHeaderFunctions",[]),yi(this,"rowHeadersCount",0),yi(this,"columnHeaderFunctions",[]),yi(this,"columnHeadersCount",0),yi(this,"cellRenderer",void 0),yi(this,"activeOverlayName",void 0),this.rootNode=e,this.rootDocument=this.rootNode.ownerDocument,this.cellRenderer=t}setActiveOverlayName(e){this.activeOverlayName=e}setAxisUtils(e,t){this.rowUtils=e,this.columnUtils=t}setViewportSize(e,t){this.rowsToRender=e,this.columnsToRender=t}setFilters(e,t){this.rowFilter=e,this.columnFilter=t}setHeaderContentRenderers(e,t){this.rowHeaderFunctions=e,this.rowHeadersCount=e.length,this.columnHeaderFunctions=t,this.columnHeadersCount=t.length}setRenderers(){let{rowHeaders:e,columnHeaders:t,colGroup:i,rows:r,cells:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.setTable(this),t.setTable(this),i.setTable(this),r.setTable(this),s.setTable(this),this.rowHeaders=e,this.columnHeaders=t,this.colGroup=i,this.rows=r,this.cells=s}renderedRowToSource(e){return this.rowFilter.renderedToSource(e)}renderedColumnToSource(e){return this.columnFilter.renderedToSource(e)}isAriaEnabled(){return this.rowUtils.wtSettings.getSetting("ariaTags")}render(){this.colGroup.adjust(),this.columnHeaders.adjust(),this.rows.adjust(),this.rowHeaders.adjust(),this.columnHeaders.render(),this.rows.render(),this.rowHeaders.render(),this.cells.render(),this.columnUtils.calculateWidths(),this.colGroup.render();const{rowsToRender:e,rows:t}=this;for(let i=0;i<e;i++){const r=t.getRenderedNode(i);if(r.firstChild){const s=this.renderedRowToSource(i),o=this.rowUtils.getHeightByOverlayName(s,this.activeOverlayName);o?r.firstChild.style.height=`${o-1}px`:r.firstChild.style.height=""}}}}class A_e{constructor(){let{TABLE:e,THEAD:t,COLGROUP:i,TBODY:r,rowUtils:s,columnUtils:o,cellRenderer:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.renderer=new M_e(e,{cellRenderer:a}),this.renderer.setRenderers({rowHeaders:new m_e,columnHeaders:new b_e(t),colGroup:new v_e(i),rows:new S_e(r),cells:new E_e}),this.renderer.setAxisUtils(s,o)}setActiveOverlayName(e){return this.renderer.setActiveOverlayName(e),this}setFilters(e,t){return this.renderer.setFilters(e,t),this}setViewportSize(e,t){return this.renderer.setViewportSize(e,t),this}setHeaderContentRenderers(e,t){return this.renderer.setHeaderContentRenderers(e,t),this}adjust(){this.renderer.adjust()}render(){this.renderer.render()}}function vv(n,e,t){P_e(n,e),e.set(n,t)}function P_e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function NS(n,e,t){return(e=I_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function I_e(n){var e=O_e(n,"string");return typeof e=="symbol"?e:e+""}function O_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ar(n,e){return n.get(m8(n,e))}function wv(n,e,t){return n.set(m8(n,e),t),t}function m8(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var LS=new WeakMap,Wg=new WeakMap,yv=new WeakMap,HS=new WeakMap,Sd=new WeakMap;class k_e{constructor(e){let{totalColumns:t,stretchMode:i,stretchingColumnWidthFn:r,columnWidthFn:s}=e;NS(this,"stretchAllRatio",0),NS(this,"stretchLastWidth",0),NS(this,"stretchAllColumnsWidth",[]),vv(this,LS,0),NS(this,"needVerifyLastColumnWidth",!0),vv(this,Wg,()=>0),vv(this,yv,o=>o),vv(this,HS,o=>o),vv(this,Sd,()=>"none"),wv(Wg,this,t),wv(Sd,this,i),wv(yv,this,r??ar(yv,this)),wv(HS,this,s??ar(HS,this))}refreshStretching(e){if(ar(Sd,this).call(this)==="none")return;this.stretchAllRatio=0,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0,this.stretchLastWidth=0,wv(LS,this,e);let t=0;for(let r=0;r<ar(Wg,this).call(this);r++){const s=this._getColumnWidth(r),o=ar(yv,this).call(this,void 0,r);typeof o=="number"?e-=o:t+=s}const i=e-t;if(ar(Sd,this).call(this)==="all"&&i>0)this.stretchAllRatio=e/t,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if(ar(Sd,this).call(this)==="last"&&e!==1/0){const r=this._getColumnWidth(ar(Wg,this).call(this)-1),s=i+r;this.stretchLastWidth=s>=0?s:r}}getStretchedColumnWidth(e,t){let i=null;return ar(Sd,this).call(this)==="all"&&this.stretchAllRatio!==0?i=this._getStretchedAllColumnWidth(e,t):ar(Sd,this).call(this)==="last"&&this.stretchLastWidth!==0&&(i=this._getStretchedLastColumnWidth(e)),i}_getStretchedAllColumnWidth(e,t){let i=0;if(!this.stretchAllColumnsWidth[e]){const r=Math.round(t*this.stretchAllRatio),s=ar(yv,this).call(this,r,e);s===void 0?this.stretchAllColumnsWidth[e]=r:this.stretchAllColumnsWidth[e]=isNaN(s)?this._getColumnWidth(e):s}if(this.stretchAllColumnsWidth.length===ar(Wg,this).call(this)&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(let r=0;r<this.stretchAllColumnsWidth.length;r++)i+=this.stretchAllColumnsWidth[r];i!==ar(LS,this)&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=ar(LS,this)-i)}return this.stretchAllColumnsWidth[e]}_getStretchedLastColumnWidth(e){return e===ar(Wg,this).call(this)-1?this.stretchLastWidth:null}_getColumnWidth(e){let t=ar(HS,this).call(this,e);return isNaN(t)&&(t=AS),t}}function $S(n,e,t){return(e=D_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function D_e(n){var e=N_e(n,"string");return typeof e=="symbol"?e:e+""}function N_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class L_e{constructor(e,t){$S(this,"dataAccessObject",void 0),$S(this,"wtSettings",void 0),$S(this,"headerWidths",new Map),$S(this,"stretching",void 0),this.dataAccessObject=e,this.wtSettings=t,this.stretching=new k_e({totalColumns:()=>this.wtSettings.getSetting("totalColumns"),stretchMode:()=>this.wtSettings.getSetting("stretchH"),stretchingColumnWidthFn:(i,r)=>this.wtSettings.getSetting("onBeforeStretchingColumnWidth",i,r),columnWidthFn:i=>this.dataAccessObject.wtTable.getColumnWidth(i)})}getWidth(e){return this.wtSettings.getSetting("columnWidth",e)||this.wtSettings.getSetting("defaultColumnWidth")}getStretchedColumnWidth(e){let t=this.getWidth(e);const i=this.stretching.getStretchedColumnWidth(e,t);return i&&(t=i),t}getHeaderHeight(e){let t=this.wtSettings.getSetting("defaultRowHeight");const i=this.dataAccessObject.wtViewport.oversizedColumnHeaders[e];return i!==void 0&&(t=t?Math.max(t,i):i),t}getHeaderWidth(e){return this.headerWidths.get(this.dataAccessObject.wtTable.columnFilter.sourceToRendered(e))}refreshStretching(){const{wtTable:e,wtViewport:t,cloneSource:i}=this.dataAccessObject,r=i?i.wtTable.holder:e.holder,s=r.offsetHeight<r.scrollHeight?wi():0;this.stretching.refreshStretching(t.getViewportWidth()-s)}calculateWidths(){const{wtSettings:e}=this;let t=e.getSetting("rowHeaderWidth");if(this.refreshStretching(),t=e.getSetting("onModifyRowHeaderWidth",t),t!=null){const i=e.getSetting("rowHeaders").length,r=e.getSetting("defaultColumnWidth");for(let s=0;s<i;s++){let o=Array.isArray(t)?t[s]:t;o=o??r,this.headerWidths.set(s,o)}}}}function b8(n,e,t){return(e=H_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function H_e(n){var e=$_e(n,"string");return typeof e=="symbol"?e:e+""}function $_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class F_e{constructor(e,t){b8(this,"dataAccessObject",void 0),b8(this,"wtSettings",void 0),this.dataAccessObject=e,this.wtSettings=t}getHeight(e){let t=this.wtSettings.getSetting("rowHeight",e);const i=this.dataAccessObject.wtViewport.oversizedRows[e];return i!==void 0&&(t=t===void 0?i:Math.max(t,i)),t}getHeightByOverlayName(e,t){let i=this.wtSettings.getSetting("rowHeightByOverlayName",e,t);const r=this.dataAccessObject.wtViewport.oversizedRows[e];return r!==void 0&&(i=i===void 0?r:Math.max(i,r)),i}}function Wa(n,e,t){return(e=B_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function B_e(n){var e=V_e(n,"string");return typeof e=="symbol"?e:e+""}function V_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let jg=class{constructor(e,t,i,r,s){Wa(this,"wtSettings",null),Wa(this,"domBindings",void 0),Wa(this,"TBODY",null),Wa(this,"THEAD",null),Wa(this,"COLGROUP",null),Wa(this,"hasTableHeight",!0),Wa(this,"hasTableWidth",!0),Wa(this,"isTableVisible",!1),Wa(this,"tableOffset",0),Wa(this,"holderOffset",0),this.domBindings=i,this.isMaster=s==="master",this.name=s,this.dataAccessObject=e,this.facadeGetter=t,this.wtSettings=r,this.instance=this.dataAccessObject.wot,this.wot=this.dataAccessObject.wot,this.TABLE=i.rootTable,hP(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.isMaster&&this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;const o=this.wtSettings.getSettingPure("rowHeaderWidth");this.wtSettings.update("rowHeaderWidth",()=>this._modifyRowHeaderWidth(o)),this.rowUtils=new F_e(this.dataAccessObject,this.wtSettings),this.columnUtils=new L_e(this.dataAccessObject,this.wtSettings),this.tableRenderer=new A_e({TABLE:this.TABLE,THEAD:this.THEAD,COLGROUP:this.COLGROUP,TBODY:this.TBODY,rowUtils:this.rowUtils,columnUtils:this.columnUtils,cellRenderer:this.wtSettings.getSettingPure("cellRenderer")})}is(e){return this.name===e}fixTableDomTree(){const e=this.domBindings.rootDocument;this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=e.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=e.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=e.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD))}createSpreader(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Ue(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.className="wtSpreader",t&&t.insertBefore(i,e),i.appendChild(e)),i.style.position="relative",this.wtSettings.getSetting("ariaTags")&&ze(i,[Ha()]),i}createHider(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Ue(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.className="wtHider",t&&t.insertBefore(i,e),i.appendChild(e)),this.wtSettings.getSetting("ariaTags")&&ze(i,[Ha()]),i}createHolder(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Ue(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.style.position="relative",i.className="wtHolder",t&&t.insertBefore(i,e),this.isMaster&&(i.parentNode.className+="ht_master handsontable",i.parentNode.setAttribute("dir",this.wtSettings.getSettingPure("rtlMode")?"rtl":"ltr"),this.wtSettings.getSetting("ariaTags")&&ze(i.parentNode,[Ha()])),i.appendChild(e)),this.wtSettings.getSetting("ariaTags")&&ze(i,[Ha()]),i}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{wtSettings:t}=this,{wtOverlays:i,wtViewport:r}=this.dataAccessObject,s=t.getSetting("totalRows"),o=t.getSetting("totalColumns"),a=t.getSetting("rowHeaders"),l=a.length,c=t.getSetting("columnHeaders"),u=c.length;let h=e;if(this.isMaster&&(i.beforeDraw(),this.holderOffset=vi(this.holder),h=r.createCalculators(h),l&&!t.getSetting("fixedColumnsStart"))){const f=i.inlineStartOverlay.getScrollPosition(),g=this.correctHeaderWidth;this.correctHeaderWidth=f!==0,g!==this.correctHeaderWidth&&(h=!1)}if(h)this.isMaster&&i.refresh(!0);else{this.isMaster?this.tableOffset=vi(this.TABLE):this.tableOffset=this.dataAccessObject.parentTableOffset;const f=s>0?this.getFirstRenderedRow():0,g=o>0?this.getFirstRenderedColumn():0;this.rowFilter=new JSe(f,s,u),this.columnFilter=new XSe(g,o,l);let p=!0;if(this.isMaster){this.alignOverlaysWithTrimmingContainer();const m={};this.wtSettings.getSetting("beforeDraw",!0,m),p=m.skipRender!==!0}if(p){this.tableRenderer.setHeaderContentRenderers(a,c),(this.is(ja)||this.is(Mu))&&this.tableRenderer.setHeaderContentRenderers(a,[]),this.resetOversizedRows(),this.tableRenderer.setActiveOverlayName(this.name).setViewportSize(this.getRenderedRowsCount(),this.getRenderedColumnsCount()).setFilters(this.rowFilter,this.columnFilter).render();let m;if(this.isMaster&&(m=this.dataAccessObject.workspaceWidth,r.containerWidth=null,this.markOversizedColumnHeaders()),this.adjustColumnHeaderHeights(),(this.isMaster||this.is(ja))&&this.markOversizedRows(),this.isMaster){this.wtSettings.getSetting("externalRowCalculator")||r.createVisibleCalculators(),i.refresh(!1),i.applyToDOM();const v=dn(this.hider),y=dn(this.TABLE);v!==0&&y!==v&&(this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),m!==r.getWorkspaceWidth()&&(r.containerWidth=null,this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),this.wtSettings.getSetting("onDraw",!0)}else this.is(ja)&&this.dataAccessObject.cloneSource.wtOverlays.adjustElementsSize()}}let d=!1;return this.isMaster&&(d=i.topOverlay.resetFixedPosition(),i.bottomOverlay.clone&&(d=i.bottomOverlay.resetFixedPosition()||d),d=i.inlineStartOverlay.resetFixedPosition()||d,i.topInlineStartCornerOverlay&&i.topInlineStartCornerOverlay.resetFixedPosition(),i.bottomInlineStartCornerOverlay&&i.bottomInlineStartCornerOverlay.clone&&i.bottomInlineStartCornerOverlay.resetFixedPosition()),d?(i.refreshAll(),i.adjustElementsSize()):this.dataAccessObject.selectionManager.setActiveOverlay(this.facadeGetter()).render(h),this.isMaster&&i.afterDraw(),this.dataAccessObject.drawn=!0,this}markIfOversizedColumnHeader(e){const t=this.columnFilter.renderedToSource(e);let i=this.wtSettings.getSetting("columnHeaders").length;const r=this.wtSettings.getSetting("defaultRowHeight");let s,o,a;const l=this.wtSettings.getSetting("columnHeaderHeight")||[];for(;i;)i-=1,s=this.getColumnHeaderHeight(i),o=this.getColumnHeader(t,i),o&&(a=bd(o),(!s&&r<a||s<a)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=a),Array.isArray(l)?l[i]!==null&&l[i]!==void 0&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l[i]):isNaN(l)||(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l),this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]<(l[i]||l)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l[i]||l))}adjustColumnHeaderHeights(){const{wtSettings:e}=this,t=this.THEAD.childNodes,i=this.dataAccessObject.wtViewport.oversizedColumnHeaders,r=e.getSetting("columnHeaders");for(let s=0,o=r.length;s<o;s++)if(i[s]){if(!t[s]||t[s].childNodes.length===0)return;t[s].childNodes[0].style.height=`${i[s]}px`}}resetOversizedRows(){const{wtSettings:e}=this,{wtViewport:t}=this.dataAccessObject;if(!(!this.isMaster&&!this.is(ja))&&!e.getSetting("externalRowCalculator")){const i=this.getRenderedRowsCount();for(let r=0;r<i;r++){const s=this.rowFilter.renderedToSource(r);t.oversizedRows&&t.oversizedRows[s]&&(t.oversizedRows[s]=void 0)}}}getCell(e){let t=e.row,i=e.col;const r=this.wtSettings.getSetting("onModifyGetCellCoords",t,i);if(r&&Array.isArray(r)&&([t,i]=r),this.isRowBeforeRenderedRows(t))return-1;if(this.isRowAfterRenderedRows(t))return-2;if(this.isColumnBeforeRenderedColumns(i))return-3;if(this.isColumnAfterRenderedColumns(i))return-4;const s=this.getRow(t);if(!s&&t>=0)throw new Error("TR was expected to be rendered but is not");const o=s.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(i)];if(!o&&i>=0)throw new Error("TD or TH was expected to be rendered but is not");return o}getRow(e){let t=null,i=null;if(e<0){var r;t=(r=this.rowFilter)===null||r===void 0?void 0:r.sourceRowToVisibleColHeadedRow(e),i=this.THEAD}else{var s;t=(s=this.rowFilter)===null||s===void 0?void 0:s.sourceToRendered(e),i=this.TBODY}return t!==void 0&&i!==void 0?i.childNodes.length<t+1?!1:i.childNodes[t]:!1}getColumnHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.THEAD.childNodes[t];return i==null?void 0:i.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]}getColumnHeaders(e){const t=[],i=this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e);return this.THEAD.childNodes.forEach(r=>{const s=r.childNodes[i];s&&t.push(s)}),t}getRowHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.wtSettings.getSetting("rowHeaders").length;if(t>=i)return;const r=this.rowFilter.sourceToRendered(e),s=r<0?this.rowFilter.sourceRowToVisibleColHeadedRow(e):r,a=(r<0?this.THEAD:this.TBODY).childNodes[s];return a==null?void 0:a.childNodes[t]}getRowHeaders(e){const t=[],i=this.wtSettings.getSetting("rowHeaders").length;for(let r=0;r<i;r++){const s=this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)],o=s==null?void 0:s.childNodes[r];o&&t.push(o)}return t}getCoords(e){let t=e;if(t.nodeName!=="TD"&&t.nodeName!=="TH"&&(t=wu(t,["TD","TH"])),t===null)return null;const i=t.parentNode,r=i.parentNode;let s=Wz(i),o=t.cellIndex;return Cu(Ed,t,this.wtRootElement)||Cu(_d,t,this.wtRootElement)?r.nodeName==="THEAD"&&(s-=r.childNodes.length):Cu(Mu,t,this.wtRootElement)||Cu(ja,t,this.wtRootElement)?s=this.wtSettings.getSetting("totalRows")-r.childNodes.length+s:r===this.THEAD?s=this.rowFilter.visibleColHeadedRowToSourceRow(s):s=this.rowFilter.renderedToSource(s),Cu(Ed,t,this.wtRootElement)||Cu(Rd,t,this.wtRootElement)||Cu(Mu,t,this.wtRootElement)?o=this.columnFilter.offsettedTH(o):o=this.columnFilter.visibleRowHeadedColumnToSourceColumn(o),this.wot.createCellCoords(s,o)}markOversizedRows(){if(this.wtSettings.getSetting("externalRowCalculator"))return;let e=this.TBODY.childNodes.length;const t=e*this.wtSettings.getSetting("defaultRowHeight"),i=bd(this.TBODY)-1;let r,s,o,a,l;if(!(t===i&&!this.wtSettings.getSetting("fixedRowsBottom")))for(;e;)e-=1,o=this.rowFilter.renderedToSource(e),r=this.getRowHeight(o),a=this.getTrForRow(o),l=a.querySelector("th"),l?s=bd(l):s=bd(a)-1,(!r&&this.wtSettings.getSetting("defaultRowHeight")<s||r<s)&&(s+=1,this.dataAccessObject.wtViewport.oversizedRows[o]=s)}getTrForRow(e){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)]}isColumnHeaderRendered(e){if(e>=0)return!1;const i=this.wtSettings.getSetting("rowHeaders").length;return Math.abs(e)<=i}isRowHeaderRendered(e){if(e>=0)return!1;const i=this.wtSettings.getSetting("columnHeaders").length;return Math.abs(e)<=i}isRowBeforeRenderedRows(e){const t=this.getFirstRenderedRow();return e<0&&t<=0?!this.isRowHeaderRendered(e):e<t}isRowAfterRenderedRows(e){return e>this.getLastRenderedRow()}isColumnBeforeRenderedColumns(e){const t=this.getFirstRenderedColumn();return e<0&&t<=0?!this.isColumnHeaderRendered(e):e<t}isColumnAfterRenderedColumns(e){return this.columnFilter&&e>this.getLastRenderedColumn()}isColumnAfterViewport(e){return this.columnFilter&&e>this.getLastVisibleColumn()}isRowAfterViewport(e){return this.rowFilter&&e>this.getLastVisibleRow()}isColumnBeforeViewport(e){return this.columnFilter&&this.columnFilter.sourceToRendered(e)<0&&e>=0}isLastRowFullyVisible(){return this.getLastVisibleRow()===this.getLastRenderedRow()}isLastColumnFullyVisible(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()}allRowsInViewport(){return this.wtSettings.getSetting("totalRows")===this.getVisibleRowsCount()}allColumnsInViewport(){return this.wtSettings.getSetting("totalColumns")===this.getVisibleColumnsCount()}getRowHeight(e){return this.rowUtils.getHeight(e)}getColumnHeaderHeight(e){return this.columnUtils.getHeaderHeight(e)}getColumnWidth(e){return this.columnUtils.getWidth(e)}getStretchedColumnWidth(e){return this.columnUtils.getStretchedColumnWidth(e)}hasDefinedSize(){return this.hasTableHeight&&this.hasTableWidth}getWidth(){return dn(this.TABLE)}getHeight(){return Zn(this.TABLE)}getTotalWidth(){const e=dn(this.hider);return e!==0?e:this.getWidth()}getTotalHeight(){const e=Zn(this.hider);return e!==0?e:this.getHeight()}isVisible(){return pd(this.TABLE)}_modifyRowHeaderWidth(e){let t=fn(e)?e():null;return Array.isArray(t)?(t=[...t],t[t.length-1]=this._correctRowHeaderWidth(t[t.length-1])):t=this._correctRowHeaderWidth(t),t}_correctRowHeaderWidth(e){let t=e;return typeof e!="number"&&(t=this.wtSettings.getSetting("defaultColumnWidth")),this.correctHeaderWidth&&(t+=1),t}};const W_e="stickyRowsBottom",cI={getFirstRenderedRow(){const n=this.wtSettings.getSetting("totalRows"),e=this.wtSettings.getSetting("fixedRowsBottom"),t=n-e;return n===0||e===0?-1:t<0?0:t},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.wtSettings.getSetting("totalRows")-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const n=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsBottom"),n)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return 0}};Fa(cI,"MIXIN_NAME",W_e,{writable:!1,enumerable:!1});const j_e="stickyColumnsStart",FS={getFirstRenderedColumn(){return this.wtSettings.getSetting("totalColumns")===0?-1:0},getFirstVisibleColumn(){return this.getFirstRenderedColumn()},getFirstPartiallyVisibleColumn(){return this.getFirstRenderedColumn()},getLastRenderedColumn(){return this.getRenderedColumnsCount()-1},getLastVisibleColumn(){return this.getLastRenderedColumn()},getLastPartiallyVisibleColumn(){return this.getLastRenderedColumn()},getRenderedColumnsCount(){const n=this.wtSettings.getSetting("totalColumns");return Math.min(this.wtSettings.getSetting("fixedColumnsStart"),n)},getVisibleColumnsCount(){return this.getRenderedColumnsCount()},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};Fa(FS,"MIXIN_NAME",j_e,{writable:!1,enumerable:!1});class uI extends jg{constructor(e,t,i,r){super(e,t,i,r,Mu)}}Gt(uI,cI),Gt(uI,FS);const _d="top",ja="bottom",Rd="inline_start",Ed="top_inline_start_corner",Mu="bottom_inline_start_corner",v8=[_d,ja,Rd,Ed,Mu],z_e=new Map([[_d,`ht_clone_${_d}`],[ja,`ht_clone_${ja}`],[Rd,`ht_clone_${Rd} ht_clone_left`],[Ed,`ht_clone_${Ed} ht_clone_top_left_corner`],[Mu,`ht_clone_${Mu} ht_clone_bottom_left_corner`]]);function U_e(n,e){G_e(n,e),e.add(n)}function G_e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Y_e(n,e,t){return(e=K_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K_e(n){var e=q_e(n,"string");return typeof e=="symbol"?e:e+""}function q_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function BS(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Cv=new WeakSet;class X_e{constructor(e){U_e(this,Cv),Y_e(this,"dataAccessObject",void 0),this.dataAccessObject=e}scrollViewport(e,t,i,r,s){const o=this.scrollViewportHorizontally(e.col,i,s),a=this.scrollViewportVertically(e.row,t,r);return o||a}scrollViewportHorizontally(e,t,i){const{drawn:r,totalColumns:s}=this.dataAccessObject;if(!r||!Number.isInteger(e)||e<0||e>s)return!1;const o=t===void 0&&i===void 0,{fixedColumnsStart:a,inlineStartOverlay:l}=this.dataAccessObject;if(o&&e<a||(e=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollHorizontally",e),!Number.isInteger(e)||e<0||e>s))return!1;const c=this.getFirstVisibleColumn(),u=this.getLastVisibleColumn();let h=!1;return(o&&(e<c||e>u)||!o)&&(h=l.scrollTo(e,o?e>=this.getLastPartiallyVisibleColumn():t)),h}scrollViewportVertically(e,t,i){const{drawn:r,totalRows:s}=this.dataAccessObject;if(!r||!Number.isInteger(e)||e<0||e>s)return!1;const o=t===void 0&&i===void 0,{fixedRowsBottom:a,fixedRowsTop:l,topOverlay:c}=this.dataAccessObject;if(o&&(e<l||e>s-a-1)||(e=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollVertically",e),!Number.isInteger(e)||e<0||e>s))return!1;const u=this.getFirstVisibleRow(),h=this.getLastVisibleRow();let d=!1;return(o&&(e<u||e>h)||!o)&&(d=c.scrollTo(e,o?e>=this.getLastPartiallyVisibleRow():i)),d}getFirstVisibleRow(){return this.dataAccessObject.wtTable.getFirstVisibleRow()}getLastVisibleRow(){return BS(Cv,this,y8).call(this,this.dataAccessObject.wtTable.getLastVisibleRow())}getFirstPartiallyVisibleRow(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleRow()}getLastPartiallyVisibleRow(){return BS(Cv,this,y8).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleRow())}getFirstVisibleColumn(){return this.dataAccessObject.wtTable.getFirstVisibleColumn()}getLastVisibleColumn(){return BS(Cv,this,w8).call(this,this.dataAccessObject.wtTable.getLastVisibleColumn())}getFirstPartiallyVisibleColumn(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleColumn()}getLastPartiallyVisibleColumn(){return BS(Cv,this,w8).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleColumn())}}function w8(n){const{wtSettings:e,inlineStartOverlay:t,wtTable:i,wtViewport:r,totalColumns:s,rootWindow:o}=this.dataAccessObject;if(t.mainTableScrollableElement===o){const a=e.getSetting("rtlMode");let l=null;if(a){const u=i.TABLE.getBoundingClientRect(),d=this.dataAccessObject.rootWindow.document.documentElement.offsetWidth;l=Math.abs(u.right-d)}else l=vi(i.wtRootElement).left;const c=Math.abs(fP(o,o));if(l>c){const u=gP(o);let h=r.getRowHeaderWidth();for(let d=1;d<=s;d++)if(h+=t.sumCellSizes(d-1,d),l+h-c>=u){n=d-2;break}}}return n}function y8(n){const{topOverlay:e,wtTable:t,wtViewport:i,totalRows:r,rootWindow:s}=this.dataAccessObject;if(e.mainTableScrollableElement===s){const o=vi(t.wtRootElement),a=oS(s,s);if(o.top>a){const l=bd(s);let c=i.getColumnHeaderHeight();for(let u=1;u<=r;u++)if(c+=e.sumCellSizes(u-1,u),o.top+c-a>=l){n=u-2;break}}}return n}function zo(n,e,t){return(e=Z_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z_e(n){var e=Q_e(n,"string");return typeof e=="symbol"?e:e+""}function Q_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class hI{get eventManager(){return new Ys(this)}constructor(e,t){zo(this,"wtTable",void 0),zo(this,"wtScroll",void 0),zo(this,"wtViewport",void 0),zo(this,"wtOverlays",void 0),zo(this,"selectionManager",void 0),zo(this,"wtEvent",void 0),zo(this,"guid",`wt_${rP()}`),zo(this,"drawInterrupted",!1),zo(this,"drawn",!1),zo(this,"domBindings",void 0),zo(this,"wtSettings",void 0),this.domBindings={rootTable:e,rootDocument:e.ownerDocument,rootWindow:e.ownerDocument.defaultView},this.wtSettings=t,this.wtScroll=new X_e(this.createScrollDao())}findOriginalHeaders(){const e=[];if(this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(let t=0,i=this.wtTable.THEAD.childNodes[0].childNodes.length;t<i;t++)e.push(this.wtTable.THEAD.childNodes[0].childNodes[t].innerHTML);this.wtSettings.getSetting("columnHeaders").length||this.wtSettings.update("columnHeaders",[function(t,i){Su(i,e[t])}])}}createCellCoords(e,t){return new yd(e,t,this.wtSettings.getSetting("rtlMode"))}createCellRange(e,t,i){return new gv(e,t,i,this.wtSettings.getSetting("rtlMode"))}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.drawInterrupted=!1,this.wtTable.isVisible()?this.wtTable.draw(e):this.drawInterrupted=!0,this}getCell(e){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1))return this.wtTable.getCell(e);const i=this.wtSettings.getSetting("totalRows"),r=this.wtSettings.getSetting("fixedRowsTop"),s=this.wtSettings.getSetting("fixedRowsBottom"),o=this.wtSettings.getSetting("fixedColumnsStart");if(e.row<r&&e.col<o)return this.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.getCell(e);if(e.row<r)return this.wtOverlays.topOverlay.clone.wtTable.getCell(e);if(e.col<o&&e.row>=i-s){if(this.wtOverlays.bottomInlineStartCornerOverlay&&this.wtOverlays.bottomInlineStartCornerOverlay.clone)return this.wtOverlays.bottomInlineStartCornerOverlay.clone.wtTable.getCell(e)}else{if(e.col<o)return this.wtOverlays.inlineStartOverlay.clone.wtTable.getCell(e);if(e.row<i&&e.row>=i-s&&this.wtOverlays.bottomOverlay&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(e)}return this.wtTable.getCell(e)}scrollViewport(e,t,i,r,s){return e.col<0||e.row<0?!1:this.wtScroll.scrollViewport(e,t,i,r,s)}scrollViewportHorizontally(e,t,i){return e<0?!1:this.wtScroll.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return e<0?!1:this.wtScroll.scrollViewportVertically(e,t,i)}getViewport(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]}destroy(){this.wtOverlays.destroy(),this.wtEvent.destroy()}createScrollDao(){const e=this;return{get drawn(){return e.drawn},get topOverlay(){return e.wtOverlays.topOverlay},get inlineStartOverlay(){return e.wtOverlays.inlineStartOverlay},get wtTable(){return e.wtTable},get wtViewport(){return e.wtViewport},get wtSettings(){return e.wtSettings},get rootWindow(){return e.domBindings.rootWindow},get totalRows(){return e.wtSettings.getSetting("totalRows")},get totalColumns(){return e.wtSettings.getSetting("totalColumns")},get fixedRowsTop(){return e.wtSettings.getSetting("fixedRowsTop")},get fixedRowsBottom(){return e.wtSettings.getSetting("fixedRowsBottom")},get fixedColumnsStart(){return e.wtSettings.getSetting("fixedColumnsStart")}}}getTableDao(){const e=this;return{get wot(){return e},get parentTableOffset(){return e.cloneSource.wtTable.tableOffset},get cloneSource(){return e.cloneSource},get workspaceWidth(){return e.wtViewport.getWorkspaceWidth()},get wtViewport(){return e.wtViewport},get wtOverlays(){return e.wtOverlays},get selectionManager(){return e.selectionManager},get drawn(){return e.drawn},set drawn(t){e.drawn=t},get wtTable(){return e.wtTable},get startColumnRendered(){return e.wtViewport.columnsRenderCalculator.startColumn},get startColumnVisible(){return e.wtViewport.columnsVisibleCalculator.startColumn},get startColumnPartiallyVisible(){return e.wtViewport.columnsPartiallyVisibleCalculator.startColumn},get endColumnRendered(){return e.wtViewport.columnsRenderCalculator.endColumn},get endColumnVisible(){return e.wtViewport.columnsVisibleCalculator.endColumn},get endColumnPartiallyVisible(){return e.wtViewport.columnsPartiallyVisibleCalculator.endColumn},get countColumnsRendered(){return e.wtViewport.columnsRenderCalculator.count},get countColumnsVisible(){return e.wtViewport.columnsVisibleCalculator.count},get startRowRendered(){return e.wtViewport.rowsRenderCalculator.startRow},get startRowVisible(){return e.wtViewport.rowsVisibleCalculator.startRow},get startRowPartiallyVisible(){return e.wtViewport.rowsPartiallyVisibleCalculator.startRow},get endRowRendered(){return e.wtViewport.rowsRenderCalculator.endRow},get endRowVisible(){return e.wtViewport.rowsVisibleCalculator.endRow},get endRowPartiallyVisible(){return e.wtViewport.rowsPartiallyVisibleCalculator.endRow},get countRowsRendered(){return e.wtViewport.rowsRenderCalculator.count},get countRowsVisible(){return e.wtViewport.rowsVisibleCalculator.count},get columnHeaders(){return e.wtSettings.getSetting("columnHeaders")},get rowHeaders(){return e.wtSettings.getSetting("rowHeaders")}}}}function C8(n,e,t){return(e=J_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function J_e(n){var e=eRe(n,"string");return typeof e=="symbol"?e:e+""}function eRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class tRe extends hI{constructor(e,t,i){super(e,t),C8(this,"cloneSource",void 0),C8(this,"cloneOverlay",void 0);const r=this.wtSettings.getSetting("facade",this);this.cloneSource=i.source,this.cloneOverlay=i.overlay,this.wtTable=this.cloneOverlay.createTable(this.getTableDao(),r,this.domBindings,this.wtSettings),this.wtViewport=i.viewport,this.selectionManager=i.selectionManager,this.wtEvent=new l8(r,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager,i.event),this.findOriginalHeaders()}}function nRe(n,e,t){return(e=iRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iRe(n){var e=rRe(n,"string");return typeof e=="symbol"?e:e+""}function rRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Sv{constructor(e,t,i,r,s){nRe(this,"wtSettings",null),Fa(this,"wot",e,{writable:!1}),this.domBindings=s,this.facadeGetter=t,this.wtSettings=r;const{TABLE:o,hider:a,spreader:l,holder:c,wtRootElement:u}=this.wot.wtTable;this.instance=this.wot,this.type=i,this.mainTableScrollableElement=null,this.TABLE=o,this.hider=a,this.spreader=l,this.holder=c,this.wtRootElement=u,this.trimmingContainer=md(this.hider.parentNode.parentNode),this.needFullRender=this.shouldBeRendered(),this.clone=this.makeClone()}hasRenderingStateChanged(){return this.needFullRender!==this.shouldBeRendered()}updateStateOfRendering(e){e==="before"&&this.shouldBeRendered()?this.needFullRender=!0:e==="after"&&!this.shouldBeRendered()&&(this.needFullRender=!1)}shouldBeRendered(){return!0}updateTrimmingContainer(){this.trimmingContainer=md(this.hider.parentNode.parentNode)}updateMainScrollableElement(){const{wtTable:e}=this.wot,{rootWindow:t}=this.domBindings;t.getComputedStyle(e.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden"?this.mainTableScrollableElement=this.wot.wtTable.holder:this.mainTableScrollableElement=Xb(e.TABLE)}getRelativeCellPosition(e,t,i){if(this.clone.wtTable.holder.contains(e)===!1){Yt(`The provided element is not a child of the ${this.type} overlay`);return}const r=this.mainTableScrollableElement===this.domBindings.rootWindow,s=i<this.wtSettings.getSetting("fixedColumnsStart"),o=t<this.wtSettings.getSetting("fixedRowsTop"),a=t>=this.wtSettings.getSetting("totalRows")-this.wtSettings.getSetting("fixedRowsBottom"),l=this.clone.wtTable.spreader,c={start:this.getRelativeStartPosition(l),top:l.offsetTop},u={start:this.getRelativeStartPosition(e),top:e.offsetTop};let h=null;return r?h=this.getRelativeCellPositionWithinWindow(o,s,u,c):h=this.getRelativeCellPositionWithinHolder(o,a,s,u,c),h}getRelativeStartPosition(e){return this.isRtl()?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:e.offsetLeft}getRelativeCellPositionWithinWindow(e,t,i,r){const s=this.wot.wtTable.wtRootElement.getBoundingClientRect();let o=0,a=0;if(!t)o=r.start;else{let l=s.left;this.isRtl()&&(l=this.domBindings.rootWindow.innerWidth-(s.left+s.width+wi())),o=l<=0?-1*l:0}return e?a=this.clone.wtTable.TABLE.getBoundingClientRect().top-s.top:a=r.top,{start:i.start+o,top:i.top+a}}getRelativeCellPositionWithinHolder(e,t,i,r,s){const o={horizontal:this.wot.wtOverlays.inlineStartOverlay.getScrollPosition(),vertical:this.wot.wtOverlays.topOverlay.getScrollPosition()};let a=0,l=0;if(i||(a=o.horizontal-s.start),t){const c=this.wot.wtTable.wtRootElement.getBoundingClientRect();l=this.clone.wtTable.TABLE.getBoundingClientRect().top*-1+c.top}else e||(l=o.vertical-s.top);return{start:r.start-a,top:r.top-l}}makeClone(){if(v8.indexOf(this.type)===-1)throw new Error(`Clone type "${this.type}" is not supported.`);const{wtTable:e,wtSettings:t}=this.wot,{rootDocument:i,rootWindow:r}=this.domBindings,s=i.createElement("div"),o=i.createElement("table"),a=e.wtRootElement.parentNode;s.className=`${z_e.get(this.type)} handsontable`,s.setAttribute("dir",this.isRtl()?"rtl":"ltr"),s.style.position="absolute",s.style.top=0,s.style.overflow="visible",this.isRtl()?s.style.right=0:s.style.left=0,t.getSetting("ariaTags")&&ze(s,[Ha()]),o.className=e.TABLE.className,e.TABLE.getAttribute("role")&&o.setAttribute("role",e.TABLE.getAttribute("role")),s.appendChild(o),a.appendChild(s);const c=this.wtSettings.getSetting("preventOverflow");return c===!0||c==="horizontal"&&this.type===_d||c==="vertical"&&this.type===Rd?this.mainTableScrollableElement=r:r.getComputedStyle(a).getPropertyValue("overflow")==="hidden"?this.mainTableScrollableElement=e.holder:this.mainTableScrollableElement=Xb(e.TABLE),new tRe(o,this.wtSettings,{source:this.wot,overlay:this,viewport:this.wot.wtViewport,event:this.wot.wtEvent,selectionManager:this.wot.selectionManager})}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.needFullRender&&this.clone.draw(e)}reset(){const e=this.clone.wtTable.holder,t=this.clone.wtTable.hider,i=e.style,r=t.style,s=e.parentNode.style;[i,r,s].forEach(o=>{o.width="",o.height=""})}isRtl(){return this.wtSettings.getSetting("rtlMode")}destroy(){this.clone.eventManager.destroy()}}class sRe extends Sv{constructor(e,t,i,r,s,o){super(e,t,Mu,i,r),this.bottomOverlay=s,this.inlineStartOverlay=o}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new uI(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wot:e}=this;if(this.updateTrimmingContainer(),!e.wtTable.holder.parentNode)return!1;const t=this.clone.wtTable.holder.parentNode;if(t.style.top="",this.trimmingContainer===this.domBindings.rootWindow){const s=this.inlineStartOverlay.getOverlayOffset(),o=this.bottomOverlay.getOverlayOffset();t.style[this.isRtl()?"right":"left"]=`${s}px`,t.style.bottom=`${o}px`}else Qb(t),this.repositionOverlay();let i=Zn(this.clone.wtTable.TABLE);const r=dn(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(i=0),t.style.height=`${i}px`,t.style.width=`${r}px`,!1}repositionOverlay(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i}=this.domBindings,r=this.clone.wtTable.holder.parentNode;let s=0;t.hasVerticalScroll()||(s+=t.getWorkspaceHeight()-e.getTotalHeight()),t.hasVerticalScroll()&&t.hasHorizontalScroll()&&(s+=wi(i)),r.style.bottom=`${s}px`}}const oRe="calculatedColumns",VS={getFirstRenderedColumn(){const n=this.dataAccessObject.startColumnRendered;return n===null?-1:n},getFirstVisibleColumn(){const n=this.dataAccessObject.startColumnVisible;return n===null?-1:n},getFirstPartiallyVisibleColumn(){const n=this.dataAccessObject.startColumnPartiallyVisible;return n===null?-1:n},getLastRenderedColumn(){const n=this.dataAccessObject.endColumnRendered;return n===null?-1:n},getLastVisibleColumn(){const n=this.dataAccessObject.endColumnVisible;return n===null?-1:n},getLastPartiallyVisibleColumn(){const n=this.dataAccessObject.endColumnPartiallyVisible;return n===null?-1:n},getRenderedColumnsCount(){return this.dataAccessObject.countColumnsRendered},getVisibleColumnsCount(){return this.dataAccessObject.countColumnsVisible},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};Fa(VS,"MIXIN_NAME",oRe,{writable:!1,enumerable:!1});class dI extends jg{constructor(e,t,i,r){super(e,t,i,r,ja)}}Gt(dI,cI),Gt(dI,VS);function aRe(n,e,t){return(e=lRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lRe(n){var e=cRe(n,"string");return typeof e=="symbol"?e:e+""}function cRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class uRe extends Sv{constructor(e,t,i,r){super(e,t,ja,i,r),aRe(this,"cachedFixedRowsBottom",-1),this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom")}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new dI(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const{rootWindow:e}=this.domBindings,t=this.clone.wtTable.holder.parentNode;t.style.top="";let i=0;const r=this.wtSettings.getSetting("preventOverflow");this.trimmingContainer===e&&(!r||r!=="vertical")?(i=this.getOverlayOffset(),t.style.bottom=`${i}px`):(i=this.getScrollPosition(),this.repositionOverlay());const s=this.adjustHeaderBordersPosition(i);return this.adjustElementsSize(),s}repositionOverlay(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i}=this.domBindings,r=this.clone.wtTable.holder.parentNode;let s=0;t.hasVerticalScroll()||(s+=t.getWorkspaceHeight()-e.getTotalHeight()),t.hasVerticalScroll()&&t.hasHorizontalScroll()&&(s+=wi(i)),r.style.bottom=`${s}px`}setScrollPosition(e){const{rootWindow:t}=this.domBindings;let i=!1;return this.mainTableScrollableElement===t?(t.scrollTo(sS(t),e),i=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(e,t){const{wtTable:i,wtSettings:r}=this.wot,s=r.getSetting("defaultRowHeight");let o=e,a=0;for(;o<t;){const l=i.getRowHeight(o);a+=l===void 0?s:l,o+=1}return a}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i,rootWindow:r}=this.domBindings,s=wi(i),a=this.clone.wtTable.holder.parentNode.style,l=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==r||l==="horizontal"){let u=t.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(u-=s),u=Math.min(u,e.wtRootElement.scrollWidth),a.width=`${u}px`}else a.width="";this.clone.wtTable.holder.style.width=a.width;let c=Zn(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(c=0),a.height=`${c}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=e.parentNode.style.height}applyToDOM(){const e=this.wtSettings.getSetting("totalRows");if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number")this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style.top="0";else throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const e=this.isRtl()?"right":"left",{spreader:t}=this.clone.wtTable;typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number"?t.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:t.style[e]=""}scrollTo(e,t){let i=this.getTableParentOffset();const s=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder;let o=0;t&&s.offsetHeight!==s.clientHeight&&(o=wi(this.domBindings.rootDocument)),t?(i+=this.sumCellSizes(0,e+1),i-=this.wot.wtViewport.getViewportHeight(),i+=1):i+=this.sumCellSizes(this.wtSettings.getSetting("fixedRowsBottom"),e),i+=o,this.setScrollPosition(i)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return oS(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="vertical")){const r=this.wot.wtTable.getTotalHeight(),s=this.clone.wtTable.getTotalHeight(),o=r-s,a=this.domBindings.rootDocument.documentElement.clientHeight;i=Math.max(this.getTableParentOffset()-this.getScrollPosition()-a+r,0),i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){const t=this.wtSettings.getSetting("fixedRowsBottom"),i=this.cachedFixedRowsBottom!==t,r=this.wtSettings.getSetting("columnHeaders");let s=!1;if((i||t===0)&&r.length>0){const o=this.wot.wtTable.holder.parentNode,a=Ue(o,"innerBorderBottom");this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom"),e||this.wtSettings.getSetting("totalRows")===0?(ce(o,"innerBorderBottom"),s=!a):(Ze(o,"innerBorderBottom"),s=a)}return s}}const hRe="calculatedRows",fI={getFirstRenderedRow(){const n=this.dataAccessObject.startRowRendered;return n===null?-1:n},getFirstVisibleRow(){const n=this.dataAccessObject.startRowVisible;return n===null?-1:n},getFirstPartiallyVisibleRow(){const n=this.dataAccessObject.startRowPartiallyVisible;return n===null?-1:n},getLastRenderedRow(){const n=this.dataAccessObject.endRowRendered;return n===null?-1:n},getLastVisibleRow(){const n=this.dataAccessObject.endRowVisible;return n===null?-1:n},getLastPartiallyVisibleRow(){const n=this.dataAccessObject.endRowPartiallyVisible;return n===null?-1:n},getRenderedRowsCount(){return this.dataAccessObject.countRowsRendered},getVisibleRowsCount(){return this.dataAccessObject.countRowsVisible},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};Fa(fI,"MIXIN_NAME",hRe,{writable:!1,enumerable:!1});class gI extends jg{constructor(e,t,i,r){super(e,t,i,r,Rd)}}Gt(gI,fI),Gt(gI,FS);const dRe="localHooks",zi={_localHooks:Object.create(null),addLocalHook(n,e){return this._localHooks[n]||(this._localHooks[n]=[]),this._localHooks[n].push(e),this},runLocalHooks(n,e,t,i,r,s,o){if(this._localHooks[n]){const a=this._localHooks[n].length;for(let l=0;l<a;l++)uS(this._localHooks[n][l],this,e,t,i,r,s,o)}},clearLocalHooks(){return this._localHooks={},this}};Fa(zi,"MIXIN_NAME",dRe,{writable:!1,enumerable:!1});let S8=class{constructor(e,t){this.settings=e,this.cellRange=t||null}isEmpty(){return this.cellRange===null}add(e){return this.isEmpty()?this.cellRange=this.settings.createCellRange(e):this.cellRange.expand(e),this}replace(e,t){if(!this.isEmpty()){if(this.cellRange.from.isEqual(e))return this.cellRange.from=t,!0;if(this.cellRange.to.isEqual(e))return this.cellRange.to=t,!0}return!1}clear(){return this.cellRange=null,this}getCorners(){const e=this.cellRange.getOuterTopStartCorner(),t=this.cellRange.getOuterBottomEndCorner();return[e.row,e.col,t.row,t.col]}destroy(){this.runLocalHooks("destroy")}};Gt(S8,zi);const _8="active-header",pI="header",mI="area",bI="focus",fRe="fill",gRe="row",pRe="column",mRe="custom-selection",vI=Object.freeze({width:"6px",height:"6px",borderWidth:"1px",borderStyle:"solid",borderColor:"#FFF"});var bRe=DP;bRe("flat");function vRe(n,e){E8(n,e),e.add(n)}function R8(n,e,t){E8(n,e),e.set(n,t)}function E8(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ai(n,e){return n.get(_v(n,e))}function x8(n,e,t){return n.set(_v(n,e),t),t}function _v(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Uo=new WeakMap,Wr=new WeakMap,WS=new WeakSet;class wRe{constructor(){vRe(this,WS),R8(this,Uo,void 0),R8(this,Wr,void 0)}setActiveOverlay(e){return x8(Wr,this,e),this}setActiveSelection(e){return x8(Uo,this,e),this}scan(){const e=ai(Uo,this).settings.selectionType,t=new Set;return e==="active-header"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i))):e==="area"?this.scanCellsRange(i=>t.add(i)):e==="focus"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i)),this.scanCellsRange(i=>t.add(i))):e==="fill"?this.scanCellsRange(i=>t.add(i)):e==="header"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i))):e==="row"?(this.scanRowsInHeadersRange(i=>t.add(i)),this.scanRowsInCellsRange(i=>t.add(i))):e==="column"&&(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanColumnsInCellsRange(i=>t.add(i))),t}scanColumnsInHeadersRange(e){const[t,i,r,s]=ai(Uo,this).getCorners(),{wtTable:o}=ai(Wr,this),a=o.getRenderedColumnsCount(),l=o.getColumnHeadersCount();let c=0;for(let u=-o.getRowHeadersCount();u<a;u++){const h=o.columnFilter.renderedToSource(u);if(!(h<i||h>s)){for(let d=-l;d<0;d++){if(d<t||d>r)continue;const f=d+l;let g=o.getColumnHeader(h,f);const p=ai(Wr,this).getSetting("onBeforeHighlightingColumnHeader",h,f,{selectionType:ai(Uo,this).settings.selectionType,columnCursor:c,selectionWidth:s-i+1});p!==null&&(p!==h&&(g=o.getColumnHeader(p,f)),e(g))}c+=1}}}scanRowsInHeadersRange(e){const[t,i,r,s]=ai(Uo,this).getCorners(),{wtTable:o}=ai(Wr,this),a=o.getRenderedRowsCount(),l=o.getRowHeadersCount();let c=0;for(let u=-o.getColumnHeadersCount();u<a;u++){const h=o.rowFilter.renderedToSource(u);if(!(h<t||h>r)){for(let d=-l;d<0;d++){if(d<i||d>s)continue;const f=d+l;let g=o.getRowHeader(h,f);const p=ai(Wr,this).getSetting("onBeforeHighlightingRowHeader",h,f,{selectionType:ai(Uo,this).settings.selectionType,rowCursor:c,selectionHeight:r-t+1});p!==null&&(p!==h&&(g=o.getRowHeader(p,f)),e(g))}c+=1}}}scanCellsRange(e){const[t,i,r,s]=ai(Uo,this).getCorners(),{wtTable:o}=ai(Wr,this);_v(WS,this,wI).call(this,(a,l)=>{if(a>=t&&a<=r&&l>=i&&l<=s){const c=o.getCell(ai(Wr,this).createCellCoords(a,l)),u=ai(Wr,this).getSetting("onAfterDrawSelection",a,l,ai(Uo,this).settings.layerLevel);typeof u=="string"&&ce(c,u),e(c)}})}scanRowsInCellsRange(e){const[t,,i]=ai(Uo,this).getCorners(),{wtTable:r}=ai(Wr,this);_v(WS,this,wI).call(this,(s,o)=>{if(s>=t&&s<=i){const a=r.getCell(ai(Wr,this).createCellCoords(s,o));e(a)}})}scanColumnsInCellsRange(e){const[,t,,i]=ai(Uo,this).getCorners(),{wtTable:r}=ai(Wr,this);_v(WS,this,wI).call(this,(s,o)=>{if(o>=t&&o<=i){const a=r.getCell(ai(Wr,this).createCellCoords(s,o));e(a)}})}}function wI(n){const{wtTable:e}=ai(Wr,this),t=e.getRenderedRowsCount(),i=e.getRenderedColumnsCount();for(let r=0;r<t;r+=1){const s=e.rowFilter.renderedToSource(r);for(let o=0;o<i;o+=1)n(s,e.columnFilter.renderedToSource(o))}}class T8{constructor(e,t){t&&(this.eventManager=e.eventManager,this.instance=e,this.wot=e,this.settings=t,this.mouseDown=!1,this.main=null,this.top=null,this.bottom=null,this.start=null,this.end=null,this.topStyle=null,this.bottomStyle=null,this.startStyle=null,this.endStyle=null,this.cornerDefaultStyle=vI,this.cornerCenterPointOffset=-(parseInt(this.cornerDefaultStyle.width,10)/2),this.corner=null,this.cornerStyle=null,this.createBorders(t),this.registerListeners())}registerListeners(){const e=this.wot.rootDocument.body;this.eventManager.addEventListener(e,"mousedown",()=>this.onMouseDown()),this.eventManager.addEventListener(e,"mouseup",()=>this.onMouseUp());for(let t=0,i=this.main.childNodes.length;t<i;t++){const r=this.main.childNodes[t];this.eventManager.addEventListener(r,"mouseenter",s=>this.onMouseEnter(s,this.main.childNodes[t]))}}onMouseDown(){this.mouseDown=!0}onMouseUp(){this.mouseDown=!1}onMouseEnter(e,t){if(!this.mouseDown||!this.wot.getSetting("hideBorderOnMouseDownOver"))return;e.preventDefault(),Gs(e);const i=this,r=this.wot.rootDocument.body,s=t.getBoundingClientRect();t.style.display="none";function o(l){if(l.clientY<Math.floor(s.top)||l.clientY>Math.ceil(s.top+s.height)||l.clientX<Math.floor(s.left)||l.clientX>Math.ceil(s.left+s.width))return!0}function a(l){o(l)&&(i.eventManager.removeEventListener(r,"mousemove",a),t.style.display="block")}this.eventManager.addEventListener(r,"mousemove",a)}createBorders(e){const{rootDocument:t}=this.wot;this.main=t.createElement("div");const i=["top","start","bottom","end","corner"];let r=this.main.style;r.position="absolute",r.top=0,r.left=0;for(let a=0;a<5;a++){const l=i[a],c=t.createElement("div");c.className=`wtBorder ${this.settings.className||""}`,this.settings[l]&&this.settings[l].hide&&(c.className+=" hidden"),r=c.style,r.backgroundColor=this.settings[l]&&this.settings[l].color?this.settings[l].color:e.border.color,r.height=this.settings[l]&&this.settings[l].width?`${this.settings[l].width}px`:`${e.border.width}px`,r.width=this.settings[l]&&this.settings[l].width?`${this.settings[l].width}px`:`${e.border.width}px`,this.main.appendChild(c)}this.top=this.main.childNodes[0],this.start=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.end=this.main.childNodes[3],this.topStyle=this.top.style,this.startStyle=this.start.style,this.bottomStyle=this.bottom.style,this.endStyle=this.end.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),sc()&&this.instance.getSetting("isDataViewInstance")&&this.createMultipleSelectorHandles(),this.disappear();const{wtTable:s}=this.wot;let o=s.bordersHolder;o||(o=t.createElement("div"),o.className="htBorders",s.bordersHolder=o,s.spreader.appendChild(o)),o.appendChild(this.main)}createMultipleSelectorHandles(){const{rootDocument:e}=this.wot;this.selectionHandles={top:e.createElement("DIV"),topHitArea:e.createElement("DIV"),bottom:e.createElement("DIV"),bottomHitArea:e.createElement("DIV")};const t=10,i=40;this.selectionHandles.top.className="topSelectionHandle topLeftSelectionHandle",this.selectionHandles.topHitArea.className="topSelectionHandle-HitArea topLeftSelectionHandle-HitArea",this.selectionHandles.bottom.className="bottomSelectionHandle bottomRightSelectionHandle",this.selectionHandles.bottomHitArea.className="bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={top:this.selectionHandles.top.style,topHitArea:this.selectionHandles.topHitArea.style,bottom:this.selectionHandles.bottom.style,bottomHitArea:this.selectionHandles.bottomHitArea.style};const r={position:"absolute",height:`${i}px`,width:`${i}px`,"border-radius":`${parseInt(i/1.5,10)}px`};ot(r,(o,a)=>{this.selectionHandles.styles.bottomHitArea[a]=o,this.selectionHandles.styles.topHitArea[a]=o});const s={position:"absolute",height:`${t}px`,width:`${t}px`,"border-radius":`${parseInt(t/1.5,10)}px`,background:"#F5F5FF",border:"1px solid #4285c8"};ot(s,(o,a)=>{this.selectionHandles.styles.bottom[a]=o,this.selectionHandles.styles.top[a]=o}),this.main.appendChild(this.selectionHandles.top),this.main.appendChild(this.selectionHandles.bottom),this.main.appendChild(this.selectionHandles.topHitArea),this.main.appendChild(this.selectionHandles.bottomHitArea)}isPartRange(e,t){const i=this.wot.selectionManager.getAreaSelection();return!!(i.cellRange&&(e!==i.cellRange.to.row||t!==i.cellRange.to.col))}updateMultipleSelectionHandlesPosition(e,t,i,r,s,o){const l=this.wot.wtSettings.getSetting("rtlMode")?"right":"left",{top:c,topHitArea:u,bottom:h,bottomHitArea:d}=this.selectionHandles.styles,f=parseInt(c.borderWidth,10),g=parseInt(c.width,10),p=parseInt(u.width,10),m=this.wot.wtTable.getWidth(),v=this.wot.wtTable.getHeight();c.top=`${parseInt(i-g-1,10)}px`,c[l]=`${parseInt(r-g-1,10)}px`,u.top=`${parseInt(i-p/4*3,10)}px`,u[l]=`${parseInt(r-p/4*3,10)}px`;const y=Math.min(parseInt(r+s,10),m-g-f*2),w=Math.min(parseInt(r+s-p/4,10),m-p-f*2);h[l]=`${y}px`,d[l]=`${w}px`;const _=Math.min(parseInt(i+o,10),v-g-f*2),R=Math.min(parseInt(i+o-p/4,10),v-p-f*2);h.top=`${_}px`,d.top=`${R}px`,this.settings.border.cornerVisible&&this.settings.border.cornerVisible()?(c.display="block",u.display="block",this.isPartRange(e,t)?(h.display="none",d.display="none"):(h.display="block",d.display="block")):(c.display="none",h.display="none",u.display="none",d.display="none"),e===this.wot.wtSettings.getSetting("fixedRowsTop")||t===this.wot.wtSettings.getSetting("fixedColumnsStart")?(c.zIndex="9999",u.zIndex="9999"):(c.zIndex="",u.zIndex="")}appear(e){if(this.disabled)return;const{wtTable:t,rootDocument:i,rootWindow:r}=this.wot;let s,o,a,l,c,u;const h=t.getRenderedRowsCount();for(let G=0;G<h;G+=1){const z=t.rowFilter.renderedToSource(G);if(z>=e[0]&&z<=e[2]){s=z,c=e[0];break}}for(let G=h-1;G>=0;G-=1){const z=t.rowFilter.renderedToSource(G);if(z>=e[0]&&z<=e[2]){o=z;break}}const d=t.getRenderedColumnsCount();for(let G=0;G<d;G+=1){const z=t.columnFilter.renderedToSource(G);if(z>=e[1]&&z<=e[3]){a=z,u=e[1];break}}for(let G=d-1;G>=0;G-=1){const z=t.columnFilter.renderedToSource(G);if(z>=e[1]&&z<=e[3]){l=z;break}}if(s===void 0||a===void 0){this.disappear();return}let f=t.getCell(this.wot.createCellCoords(s,a));const g=s!==o||a!==l,p=g?t.getCell(this.wot.createCellCoords(o,l)):f,m=vi(f),v=g?vi(p):m,y=vi(t.TABLE),w=dn(t.TABLE),_=m.top,R=m.left,E=this.wot.wtSettings.getSetting("rtlMode");let x=0,P=0;if(E){const G=dn(f),z=r.innerWidth-y.left-w;P=R+G-v.left,x=r.innerWidth-R-G-z-1}else P=v.left+dn(p)-R,x=R-y.left-1;if(this.isEntireColumnSelected(s,o)){const G=this.getDimensionsFromHeader("columns",a,l,c,y);let z=null;G&&([z,x,P]=G),z&&(f=z)}let T=_-y.top-1,I=v.top+Zn(p)-_;if(this.isEntireRowSelected(a,l)){const G=this.getDimensionsFromHeader("rows",s,o,u,y);let z=null;G&&([z,T,I]=G),z&&(f=z)}const N=$a(f,r);parseInt(N.borderTopWidth,10)>0&&(T+=1,I=I>0?I-1:0),parseInt(N[E?"borderRightWidth":"borderLeftWidth"],10)>0&&(x+=1,P=P>0?P-1:0);const W=E?"right":"left";this.topStyle.top=`${T}px`,this.topStyle[W]=`${x}px`,this.topStyle.width=`${P}px`,this.topStyle.display="block",this.startStyle.top=`${T}px`,this.startStyle[W]=`${x}px`,this.startStyle.height=`${I}px`,this.startStyle.display="block";const j=Math.floor(this.settings.border.width/2);this.bottomStyle.top=`${T+I-j}px`,this.bottomStyle[W]=`${x}px`,this.bottomStyle.width=`${P}px`,this.bottomStyle.display="block",this.endStyle.top=`${T}px`,this.endStyle[W]=`${x+P-j}px`,this.endStyle.height=`${I+1}px`,this.endStyle.display="block";let K=this.settings.border.cornerVisible;K=typeof K=="function"?K(this.settings.layerLevel):K;const H=this.wot.getSetting("onModifyGetCellCoords",o,l);let[k,B]=[o,l];if(H&&Array.isArray(H)&&([,,k,B]=H),sc()||!K||this.isPartRange(k,B))this.cornerStyle.display="none";else{this.cornerStyle.top=`${T+I+this.cornerCenterPointOffset-1}px`,this.cornerStyle[W]=`${x+P+this.cornerCenterPointOffset-1}px`,this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none";let G=md(t.TABLE);const z=G===r;z&&(G=i.documentElement);const se=parseInt(this.cornerDefaultStyle.width,10)/2,b=parseInt(this.cornerDefaultStyle.height,10)/2;if(l===this.wot.getSetting("totalColumns")-1){const C=z?p.getBoundingClientRect().left:p.offsetLeft;let S=!1,A=0;E?(A=C-parseInt(this.cornerDefaultStyle.width,10)/2,S=A<0):(A=C+dn(p)+parseInt(this.cornerDefaultStyle.width,10)/2,S=A>=gP(G)),S&&(this.cornerStyle[W]=`${Math.floor(x+P+this.cornerCenterPointOffset-se)}px`,this.cornerStyle[E?"borderLeftWidth":"borderRightWidth"]=0)}o===this.wot.getSetting("totalRows")-1&&(z?p.getBoundingClientRect().top:p.offsetTop)+Zn(p)+parseInt(this.cornerDefaultStyle.height,10)/2>=bd(G)&&(this.cornerStyle.top=`${Math.floor(T+I+this.cornerCenterPointOffset-b)}px`,this.cornerStyle.borderBottomWidth=0),this.cornerStyle.display="block"}sc()&&this.instance.getSetting("isDataViewInstance")&&this.updateMultipleSelectionHandlesPosition(o,l,T,x,P,I)}isEntireColumnSelected(e,t){return e===this.wot.wtTable.getFirstRenderedRow()&&t===this.wot.wtTable.getLastRenderedRow()}isEntireRowSelected(e,t){return e===this.wot.wtTable.getFirstRenderedColumn()&&t===this.wot.wtTable.getLastRenderedColumn()}getDimensionsFromHeader(e,t,i,r,s){const{wtTable:o}=this.wot,a=o.wtRootElement.parentNode;let l=null,c=null,u=null,h=null,d=null,f=null,g=null,p=null;switch(e){case"rows":l=function(){return o.getRowHeader(...arguments)},c=function(){return Zn(...arguments)},u="ht__selection--rows",f="top";break;case"columns":l=function(){return o.getColumnHeader(...arguments)},c=function(){return dn(...arguments)},u="ht__selection--columns",f="left";break}if(a.classList.contains(u)){const m=this.wot.getSetting("columnHeaders").length;if(g=l(t,m-r),p=l(i,m-r),!g||!p)return!1;const v=vi(g),y=vi(p);return g&&p&&(h=v[f]-s[f]-1,d=y[f]+c(p)-v[f]),[g,h,d]}return!1}changeBorderStyle(e,t){const i=this[e].style,r=t[e];!r||r.hide?ce(this[e],"hidden"):(Ue(this[e],"hidden")&&Ze(this[e],"hidden"),i.backgroundColor=r.color,(e==="top"||e==="bottom")&&(i.height=`${r.width}px`),(e==="start"||e==="end")&&(i.width=`${r.width}px`))}changeBorderToDefaultStyle(e){const t={width:1,color:"#000"},i=this[e].style;i.backgroundColor=t.color,i.width=`${t.width}px`,i.height=`${t.width}px`}toggleHiddenClass(e,t){this.changeBorderToDefaultStyle(e),t?ce(this[e],"hidden"):Ze(this[e],"hidden")}disappear(){this.topStyle.display="none",this.bottomStyle.display="none",this.startStyle.display="none",this.endStyle.display="none",this.cornerStyle.display="none",sc()&&this.instance.getSetting("isDataViewInstance")&&(this.selectionHandles.styles.top.display="none",this.selectionHandles.styles.topHitArea.display="none",this.selectionHandles.styles.bottom.display="none",this.selectionHandles.styles.bottomHitArea.display="none")}destroy(){this.eventManager.destroyWithOwnEventsOnly(),this.main.parentNode.removeChild(this.main)}}function yRe(n,e){M8(n,e),e.add(n)}function zg(n,e,t){M8(n,e),e.set(n,t)}function M8(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dt(n,e){return n.get(yI(n,e))}function A8(n,e,t){return n.set(yI(n,e),t),t}function yI(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var lr=new WeakMap,jr=new WeakMap,CI=new WeakMap,Rv=new WeakMap,SI=new WeakMap,xd=new WeakMap,P8=new WeakSet;class CRe{constructor(e){yRe(this,P8),zg(this,lr,void 0),zg(this,jr,void 0),zg(this,CI,new wRe),zg(this,Rv,new WeakMap),zg(this,SI,new WeakSet),zg(this,xd,new Map),A8(jr,this,e)}setActiveOverlay(e){return A8(lr,this,e),dt(CI,this).setActiveOverlay(dt(lr,this)),dt(Rv,this).has(dt(lr,this))||dt(Rv,this).set(dt(lr,this),new Set),this}getFocusSelection(){return dt(jr,this)!==null?dt(jr,this).getFocus():null}getAreaSelection(){return dt(jr,this)!==null?dt(jr,this).createLayeredArea():null}getBorderInstance(e){if(!e.settings.border)return null;if(dt(xd,this).has(e)){const i=dt(xd,this).get(e);if(i.has(dt(lr,this)))return i.get(dt(lr,this));const r=new T8(dt(lr,this),e.settings);return i.set(dt(lr,this),r),r}const t=new T8(dt(lr,this),e.settings);return dt(xd,this).set(e,new Map([[dt(lr,this),t]])),t}getBorderInstances(e){var t,i;return Array.from((t=(i=dt(xd,this).get(e))===null||i===void 0?void 0:i.values())!==null&&t!==void 0?t:[])}destroyBorders(e){dt(xd,this).get(e).forEach(t=>t.destroy()),dt(xd,this).delete(e)}render(e){if(dt(jr,this)===null)return;e&&yI(P8,this,SRe).call(this);const t=Array.from(dt(jr,this)),i=new Map,r=new Map;for(let s=0;s<t.length;s++){const o=t[s],{className:a,headerAttributes:l,createLayers:c,selectionType:u}=o.settings;dt(SI,this).has(o)||(dt(SI,this).add(o),o.addLocalHook("destroy",()=>this.destroyBorders(o)));const h=this.getBorderInstance(o);if(o.isEmpty()){h==null||h.disappear();continue}a&&dt(CI,this).setActiveSelection(o).scan().forEach(g=>{if(i.has(g)){const p=i.get(g);p.has(a)&&c===!0?p.set(a,p.get(a)+1):p.set(a,1)}else i.set(g,new Map([[a,1]]));l&&(r.has(g)||r.set(g,[]),g.nodeName==="TH"&&r.get(g).push(...l))});const d=o.getCorners();dt(lr,this).getSetting("onBeforeDrawBorders",d,u),h==null||h.appear(d)}i.forEach((s,o)=>{var a;const l=Array.from(s).map(c=>{let[u,h]=c;return h===1?u:[u,...Array.from({length:h-1},(d,f)=>`${u}-${f+1}`)]}).flat();l.forEach(c=>dt(Rv,this).get(dt(lr,this)).add(c)),ce(o,l),o.nodeName==="TD"&&Array.isArray((a=dt(jr,this).options)===null||a===void 0?void 0:a.cellAttributes)&&ze(o,dt(jr,this).options.cellAttributes)}),Array.from(r.keys()).forEach(s=>{ze(s,[...r.get(s)])})}}function SRe(){const n=dt(Rv,this).get(dt(lr,this)),e=dt(lr,this).wtSettings.getSetting("onBeforeRemoveCellClassNames");if(Array.isArray(e))for(let t=0;t<e.length;t++)n.add(e[t]);n.forEach(t=>{var i,r;const s=dt(lr,this).wtTable.TABLE.querySelectorAll(`.${t}`);let o=[];Array.isArray((i=dt(jr,this).options)===null||i===void 0?void 0:i.cellAttributes)&&(o=dt(jr,this).options.cellAttributes.map(a=>a[0])),Array.isArray((r=dt(jr,this).options)===null||r===void 0?void 0:r.headerAttributes)&&(o=[...o,...dt(jr,this).options.headerAttributes.map(a=>a[0])]);for(let a=0,l=s.length;a<l;a++)Ze(s[a],t),fd(s[a],o)}),n.clear()}class _Re extends Sv{constructor(e,t,i,r){super(e,t,Rd,i,r)}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new gI(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wtTable:e}=this.wot;if(!this.needFullRender||!this.shouldBeRendered()||!e.holder.parentNode)return!1;const{rootWindow:t}=this.domBindings,i=this.clone.wtTable.holder.parentNode,r=this.wtSettings.getSetting("preventOverflow");let s=0;this.trimmingContainer===t&&(!r||r!=="horizontal")?(s=this.getOverlayOffset()*(this.isRtl()?-1:1),aS(i,`${s}px`,"0px")):(s=this.getScrollPosition(),Qb(i));const o=this.adjustHeaderBordersPosition(s);return this.adjustElementsSize(),o}setScrollPosition(e){const{rootWindow:t}=this.domBindings;let i=!1;return this.isRtl()&&(e=-e),this.mainTableScrollableElement===t&&t.scrollX!==e?(t.scrollTo(e,dP(t)),i=!0):this.mainTableScrollableElement.scrollLeft!==e&&(this.mainTableScrollableElement.scrollLeft=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollVertically")}sumCellSizes(e,t){const i=this.wtSettings.getSetting("defaultColumnWidth");let r=e,s=0;for(;r<t;)s+=this.wot.wtTable.getStretchedColumnWidth(r)||i,r+=1;return s}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e}=this.wot,{rootDocument:t,rootWindow:i}=this.domBindings,r=wi(t),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||a==="vertical"){let c=this.wot.wtViewport.getWorkspaceHeight();this.wot.wtOverlays.hasScrollbarBottom&&(c-=r),c=Math.min(c,e.wtRootElement.scrollHeight),o.height=`${c}px`}else o.height="";this.clone.wtTable.holder.style.height=o.height;const l=dn(this.clone.wtTable.TABLE);o.width=`${l}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable,t=this.wot.selectionManager.getFocusSelection()?parseInt(vI.width,10)/2:0;this.clone.wtTable.hider.style.height=this.hider.style.height,e.style.height=e.parentNode.style.height,e.style.width=`${parseInt(e.parentNode.style.width,10)+t}px`}applyToDOM(){const e=this.wtSettings.getSetting("totalColumns"),t=this.isRtl()?"right":"left";if(typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number")this.spreader.style[t]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style[t]="0";else throw new Error("Incorrect value of the columnsRenderCalculator");this.isRtl()?this.spreader.style.left="":this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number"?this.clone.wtTable.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`:this.clone.wtTable.spreader.style.top=""}scrollTo(e,t){const{wtSettings:i}=this,r=i.getSetting("rowHeaders"),s=i.getSetting("fixedColumnsStart"),a=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,l=s===0&&r.length>0&&!Ue(a.parentNode,"innerBorderInlineStart")?1:0;let c=this.getTableParentOffset(),u=0;if(t){const h=this.wot.wtTable.getColumnWidth(e),d=this.wot.wtViewport.getViewportWidth();h>d&&(t=!1)}return t&&a.offsetWidth!==a.clientWidth&&(u=wi(this.domBindings.rootDocument)),t?(c+=this.sumCellSizes(0,e+1),c-=this.wot.wtViewport.getViewportWidth(),c+=l):c+=this.sumCellSizes(this.wtSettings.getSetting("fixedColumnsStart"),e),c+=u,Yz(this.mainTableScrollableElement)===c-l&&l>0&&this.wot.wtOverlays.expandHiderHorizontallyBy(l),this.setScrollPosition(c)}getTableParentOffset(){const e=this.wtSettings.getSetting("preventOverflow");let t=0;return!e&&this.trimmingContainer===this.domBindings.rootWindow&&(t=this.wot.wtTable.holderOffset.left),t}getScrollPosition(){return Math.abs(fP(this.mainTableScrollableElement,this.domBindings.rootWindow))}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="horizontal")){this.isRtl()?i=Math.abs(Math.min(this.getTableParentOffset()-this.getScrollPosition(),0)):i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0);const r=this.wot.wtTable.getTotalWidth(),s=this.clone.wtTable.getTotalWidth(),o=r-s;i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){const{wtSettings:t}=this,i=this.wot.wtTable.holder.parentNode,r=t.getSetting("rowHeaders"),s=t.getSetting("fixedColumnsStart"),o=t.getSetting("totalRows"),a=t.getSetting("preventOverflow")==="vertical";o?Ze(i,"emptyRows"):ce(i,"emptyRows");let l=!1;if(!a){if(s&&!r.length)ce(i,"innerBorderLeft innerBorderInlineStart");else if(!s&&r.length){const c=Ue(i,"innerBorderInlineStart");e?(ce(i,"innerBorderLeft innerBorderInlineStart"),l=!c):(Ze(i,"innerBorderLeft innerBorderInlineStart"),l=c)}}return l}}const RRe="stickyRowsTop",_I={getFirstRenderedRow(){return this.wtSettings.getSetting("totalRows")===0?-1:0},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.getRenderedRowsCount()-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const n=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsTop"),n)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};Fa(_I,"MIXIN_NAME",RRe,{writable:!1,enumerable:!1});class RI extends jg{constructor(e,t,i,r){super(e,t,i,r,Ed)}}Gt(RI,_I),Gt(RI,FS);function I8(n,e,t){return(e=ERe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ERe(n){var e=xRe(n,"string");return typeof e=="symbol"?e:e+""}function xRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class TRe extends Sv{constructor(e,t,i,r,s,o){super(e,t,Ed,i,r),I8(this,"topOverlay",void 0),I8(this,"inlineStartOverlay",void 0),this.topOverlay=s,this.inlineStartOverlay=o}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new RI(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){if(this.updateTrimmingContainer(),!this.wot.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode;if(this.trimmingContainer===this.domBindings.rootWindow){const r=this.inlineStartOverlay.getOverlayOffset()*(this.isRtl()?-1:1),s=this.topOverlay.getOverlayOffset();aS(e,`${r}px`,`${s}px`)}else Qb(e);let t=Zn(this.clone.wtTable.TABLE);const i=dn(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(t=0),e.style.height=`${t}px`,e.style.width=`${i}px`,!1}}class EI extends jg{constructor(e,t,i,r){super(e,t,i,r,_d)}}Gt(EI,_I),Gt(EI,VS);function MRe(n,e,t){return(e=ARe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ARe(n){var e=PRe(n,"string");return typeof e=="symbol"?e:e+""}function PRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class IRe extends Sv{constructor(e,t,i,r){super(e,t,_d,i,r),MRe(this,"cachedFixedRowsTop",-1),this.cachedFixedRowsTop=this.wtSettings.getSetting("fixedRowsTop")}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new EI(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode,{rootWindow:t}=this.domBindings,i=this.wtSettings.getSetting("preventOverflow");let r=0,s=!1;if(this.trimmingContainer===t&&(!i||i!=="vertical")){const{wtTable:a}=this.wot,l=a.hider.getBoundingClientRect(),c=Math.ceil(l.bottom),u=e.offsetHeight;s=c===u,r=this.getOverlayOffset(),aS(e,"0px",`${r}px`)}else r=this.getScrollPosition(),Qb(e);const o=this.adjustHeaderBordersPosition(r,s);return this.adjustElementsSize(),o}setScrollPosition(e){const t=this.domBindings.rootWindow;let i=!1;return this.mainTableScrollableElement===t&&t.scrollY!==e?(t.scrollTo(sS(t),e),i=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(e,t){const i=this.wtSettings.getSetting("defaultRowHeight");let r=e,s=0;for(;r<t;){const o=this.wot.wtTable.getRowHeight(r);s+=o===void 0?i:o,r+=1}return s}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e}=this.wot,{rootDocument:t,rootWindow:i}=this.domBindings,r=wi(t),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||a==="horizontal"){let c=this.wot.wtViewport.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(c-=r),c=Math.min(c,e.wtRootElement.scrollWidth),o.width=`${c}px`}else o.width="";this.clone.wtTable.holder.style.width=o.width;let l=Zn(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(l=0),o.height=`${l}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable,t=this.wot.selectionManager.getFocusSelection()?parseInt(vI.height,10)/2:0;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=`${parseInt(e.parentNode.style.height,10)+t}px`}applyToDOM(){const e=this.wtSettings.getSetting("totalRows");if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number")this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style.top="0";else throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const e=this.isRtl()?"right":"left",{spreader:t}=this.clone.wtTable;typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number"?t.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:t.style[e]=""}scrollTo(e,t){const{wot:i,wtSettings:r}=this,o=(i.cloneSource?i.cloneSource:i).wtTable.holder,a=r.getSetting("columnHeaders"),c=r.getSetting("fixedRowsTop")===0&&a.length>0&&!Ue(o.parentNode,"innerBorderTop")?1:0;let u=this.getTableParentOffset(),h=0;if(t){const d=this.wot.wtTable.getRowHeight(e),f=this.wot.wtViewport.getViewportHeight();d>f&&(t=!1)}if(t&&o.offsetHeight!==o.clientHeight&&(h=wi(this.domBindings.rootDocument)),t){const d=r.getSetting("fixedRowsBottom"),f=r.getSetting("totalRows");u+=this.sumCellSizes(0,e+1),u-=i.wtViewport.getViewportHeight()-this.sumCellSizes(f-d,f),u+=1,u+=c}else u+=this.sumCellSizes(r.getSetting("fixedRowsTop"),e);return u+=h,Gz(this.mainTableScrollableElement)===u-c&&c>0&&this.wot.wtOverlays.expandHiderVerticallyBy(c),this.setScrollPosition(u)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return oS(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="vertical")){const r=this.wot.wtTable.getTotalHeight(),s=this.clone.wtTable.getTotalHeight(),o=r-s;i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0),i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{wtSettings:i}=this,r=this.wot.wtTable.holder.parentNode,s=i.getSetting("totalColumns"),o=i.getSetting("preventOverflow")==="horizontal";s?Ze(r,"emptyColumns"):ce(r,"emptyColumns");let a=!1;if(!t&&!o){const l=i.getSetting("fixedRowsTop"),c=this.cachedFixedRowsTop!==l,u=i.getSetting("columnHeaders");if((c||l===0)&&u.length>0){const h=Ue(r,"innerBorderTop");this.cachedFixedRowsTop=i.getSetting("fixedRowsTop"),e||i.getSetting("totalRows")===0?(ce(r,"innerBorderTop"),a=!h):(Ze(r,"innerBorderTop"),a=h)}}return a}}function jS(n,e,t){ORe(n,e),e.set(n,t)}function ORe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lc(n,e,t){return(e=kRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kRe(n){var e=DRe(n,"string");return typeof e=="symbol"?e:e+""}function DRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Td(n,e,t){return n.set(O8(n,e),t),t}function cc(n,e){return n.get(O8(n,e))}function O8(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ug=new WeakMap,zS=new WeakMap,Gg=new WeakMap,US=new WeakMap;class NRe{constructor(e,t,i,r,s,o){lc(this,"wot",null),jS(this,Ug,[]),lc(this,"topOverlay",null),lc(this,"bottomOverlay",null),lc(this,"inlineStartOverlay",null),lc(this,"topInlineStartCornerOverlay",null),lc(this,"bottomInlineStartCornerOverlay",null),lc(this,"browserLineHeight",void 0),lc(this,"wtSettings",null),jS(this,zS,!1),jS(this,Gg,0),jS(this,US,null),lc(this,"resizeObserver",new ResizeObserver(u=>{pS(()=>{!Array.isArray(u)||!u.length||(Td(Gg,this,cc(Gg,this)+1),cc(Gg,this)===100&&(Yt("The ResizeObserver callback was fired too many times in direct succession.\nThis may be due to an infinite loop caused by setting a dynamic height/width (for example, with the `dvh` units) to a Handsontable container's parent. \nThe observer will be disconnected."),this.resizeObserver.disconnect()),cc(US,this)!==null&&clearTimeout(cc(US,this)),Td(US,this,setTimeout(()=>{Td(Gg,this,0)},100)),this.wtSettings.getSetting("onContainerElementResize"))})})),this.wot=e,this.wtSettings=r,this.domBindings=i,this.facadeGetter=t,this.wtTable=o;const{rootDocument:a,rootWindow:l}=this.domBindings;this.instance=this.wot,this.eventManager=s,this.scrollbarSize=wi(a);const c=l.getComputedStyle(o.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden";this.scrollableElement=c?o.holder:Xb(o.TABLE),this.initOverlays(),this.hasScrollbarBottom=!1,this.hasScrollbarRight=!1,this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.initBrowserLineHeight(),this.registerListeners(),this.lastScrollX=l.scrollX,this.lastScrollY=l.scrollY}getOverlays(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=[...cc(Ug,this)];return e&&t.push(this.wtTable),t}initBrowserLineHeight(){const{rootWindow:e,rootDocument:t}=this.domBindings,i=e.getComputedStyle(t.body),r=parseInt(i.lineHeight,10),s=parseInt(i.fontSize,10)*1.2;this.browserLineHeight=r||s}initOverlays(){const e=[this.wot,this.facadeGetter,this.wtSettings,this.domBindings];this.topOverlay=new IRe(...e),this.bottomOverlay=new uRe(...e),this.inlineStartOverlay=new _Re(...e),this.topInlineStartCornerOverlay=new TRe(...e,this.topOverlay,this.inlineStartOverlay),this.bottomInlineStartCornerOverlay=new sRe(...e,this.bottomOverlay,this.inlineStartOverlay),Td(Ug,this,[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay])}beforeDraw(){Td(zS,this,cc(Ug,this).reduce((e,t)=>t.hasRenderingStateChanged()||e,!1)),cc(Ug,this).forEach(e=>e.updateStateOfRendering("before"))}afterDraw(){this.syncScrollWithMaster(),cc(Ug,this).forEach(e=>{const t=e.hasRenderingStateChanged();e.updateStateOfRendering("after"),t&&!e.needFullRender&&e.reset()})}refreshAll(){if(this.wot.drawn){if(!this.wtTable.holder.parentNode){this.destroy();return}this.wot.draw(!0),this.verticalScrolling&&this.inlineStartOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1}}registerListeners(){const{rootDocument:e,rootWindow:t}=this.domBindings,{mainTableScrollableElement:i}=this.topOverlay,{mainTableScrollableElement:r}=this.inlineStartOverlay;this.eventManager.addEventListener(e.documentElement,"keydown",h=>this.onKeyDown(h)),this.eventManager.addEventListener(e.documentElement,"keyup",()=>this.onKeyUp()),this.eventManager.addEventListener(e,"visibilitychange",()=>this.onKeyUp()),this.eventManager.addEventListener(i,"scroll",h=>this.onTableScroll(h),{passive:!0}),i!==r&&this.eventManager.addEventListener(r,"scroll",h=>this.onTableScroll(h),{passive:!0});const s=t.devicePixelRatio&&t.devicePixelRatio>1,o=this.scrollableElement===t,a=this.wtSettings.getSetting("preventWheel"),l={passive:o};(a||s||!_P())&&this.eventManager.addEventListener(this.wtTable.wtRootElement,"wheel",h=>this.onCloneWheel(h,a),l),[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay].forEach(h=>{if(h&&h.needFullRender){const{holder:d}=h.clone.wtTable;this.eventManager.addEventListener(d,"wheel",f=>this.onCloneWheel(f,a),l)}});let u;this.eventManager.addEventListener(t,"resize",()=>{clearTimeout(u),u=setTimeout(()=>{this.wtSettings.getSetting("onWindowResize"),Td(Gg,this,0)},200)}),o||this.resizeObserver.observe(this.wtTable.wtRootElement.parentElement)}deregisterListeners(){this.eventManager.clearEvents(!0)}onTableScroll(e){const t=this.domBindings.rootWindow,i=this.inlineStartOverlay.mainTableScrollableElement,r=this.topOverlay.mainTableScrollableElement,s=e.target;this.keyPressed&&(r!==t&&s!==t&&!e.target.contains(r)||i!==t&&s!==t&&!e.target.contains(i))||this.syncScrollPositions(e)}onCloneWheel(e,t){const{rootWindow:i}=this.domBindings,r=this.inlineStartOverlay.mainTableScrollableElement,s=this.topOverlay.mainTableScrollableElement,o=e.target,a=s!==i&&o!==i&&!o.contains(s),l=r!==i&&o!==i&&!o.contains(r);if(this.keyPressed&&(a||l)||this.scrollableElement===i)return;const c=this.translateMouseWheelToScroll(e);(t||this.scrollableElement!==i&&c)&&e.preventDefault()}onKeyDown(e){this.keyPressed=Lg(e.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")}onKeyUp(){this.keyPressed=!1}translateMouseWheelToScroll(e){let t=isNaN(e.deltaY)?-1*e.wheelDeltaY:e.deltaY,i=isNaN(e.deltaX)?-1*e.wheelDeltaX:e.deltaX;e.deltaMode===1&&(i+=i*this.browserLineHeight,t+=t*this.browserLineHeight);const r=this.scrollVertically(t),s=this.scrollHorizontally(i);return r||s}scrollVertically(e){const t=this.scrollableElement.scrollTop;return this.scrollableElement.scrollTop+=e,t!==this.scrollableElement.scrollTop}scrollHorizontally(e){const t=this.scrollableElement.scrollLeft;return this.scrollableElement.scrollLeft+=e,t!==this.scrollableElement.scrollLeft}syncScrollPositions(){if(this.destroyed)return;const{rootWindow:e}=this.domBindings,t=this.topOverlay.clone.wtTable.holder,i=this.inlineStartOverlay.clone.wtTable.holder,[r,s]=[this.scrollableElement.scrollLeft,this.scrollableElement.scrollTop];if(this.horizontalScrolling=t.scrollLeft!==r||this.lastScrollX!==e.scrollX,this.verticalScrolling=i.scrollTop!==s||this.lastScrollY!==e.scrollY,this.lastScrollX=e.scrollX,this.lastScrollY=e.scrollY,this.horizontalScrolling){t.scrollLeft=r;const o=this.bottomOverlay.needFullRender?this.bottomOverlay.clone.wtTable.holder:null;o&&(o.scrollLeft=r)}this.verticalScrolling&&(i.scrollTop=s),this.refreshAll()}syncScrollWithMaster(){if(!cc(zS,this))return;const e=this.topOverlay.mainTableScrollableElement,{scrollLeft:t,scrollTop:i}=e;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=t),this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=t),this.inlineStartOverlay.needFullRender&&(this.inlineStartOverlay.clone.wtTable.holder.scrollTop=i),Td(zS,this,!1)}updateMainScrollableElements(){this.deregisterListeners(),this.inlineStartOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement();const{wtTable:e}=this,{rootWindow:t}=this.domBindings;t.getComputedStyle(e.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden"?this.scrollableElement=e.holder:this.scrollableElement=Xb(e.TABLE),this.registerListeners()}destroy(){this.resizeObserver.disconnect(),this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.inlineStartOverlay.destroy(),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.destroy(),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.destroy(),this.destroyed=!0}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.updateLastSpreaderSize()&&this.adjustElementsSize(),this.bottomOverlay.clone&&this.bottomOverlay.refresh(e),this.inlineStartOverlay.refresh(e),this.topOverlay.refresh(e),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.refresh(e),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.refresh(e)}updateLastSpreaderSize(){const e=this.wtTable.spreader,t=e.clientWidth,i=e.clientHeight,r=t!==this.spreaderLastSize.width||i!==this.spreaderLastSize.height;return r&&(this.spreaderLastSize.width=t,this.spreaderLastSize.height=i),r}adjustElementsSize(){const{wtViewport:e}=this.wot,{wtTable:t}=this,{rootWindow:i}=this.domBindings,r=this.scrollableElement===i,s=this.wtSettings.getSetting("totalColumns"),o=this.wtSettings.getSetting("totalRows"),a=e.getRowHeaderWidth(),c=e.getColumnHeaderHeight()+this.topOverlay.sumCellSizes(0,o)+1,u=a+this.inlineStartOverlay.sumCellSizes(0,s),d=t.hider.style,f=()=>r?!1:this.scrollableElement.scrollTop>Math.max(0,c-t.holder.clientHeight),g=()=>r?!1:this.scrollableElement.scrollLeft>Math.max(0,u-t.holder.clientWidth),p=f()?1:0,m=g()?1:0;if(d.width=`${u+m}px`,d.height=`${c+p}px`,this.scrollbarSize>0){const{scrollHeight:v,scrollWidth:y}=t.wtRootElement,{scrollHeight:w,scrollWidth:_}=t.holder;this.hasScrollbarRight=v<w,this.hasScrollbarBottom=y<_,this.hasScrollbarRight&&t.hider.scrollWidth+this.scrollbarSize>y?this.hasScrollbarBottom=!0:this.hasScrollbarBottom&&t.hider.scrollHeight+this.scrollbarSize>v&&(this.hasScrollbarRight=!0)}this.topOverlay.adjustElementsSize(),this.inlineStartOverlay.adjustElementsSize(),this.bottomOverlay.adjustElementsSize()}expandHiderVerticallyBy(e){const{wtTable:t}=this;t.hider.style.height=`${parseInt(t.hider.style.height,10)+e}px`}expandHiderHorizontallyBy(e){const{wtTable:t}=this;t.hider.style.width=`${parseInt(t.hider.style.width,10)+e}px`}applyToDOM(){this.wtTable.isVisible()&&(this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.inlineStartOverlay.applyToDOM())}getParentOverlay(e){if(!e)return null;const t=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];let i=null;return V(t,r=>{r&&r.clone&&r.clone.wtTable.TABLE.contains(e)&&(i=r.clone)}),i}syncOverlayTableClassNames(){const e=this.wtTable.TABLE,t=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];V(t,i=>{i&&(i.clone.wtTable.TABLE.className=e.className)})}}function k8(n,e,t){return(e=LRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LRe(n){var e=HRe(n,"string");return typeof e=="symbol"?e:e+""}function HRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class $Re{constructor(e){k8(this,"settings",{}),k8(this,"defaults",Object.freeze(this.getDefaults())),ot(this.defaults,(t,i)=>{if(e[i]!==void 0)this.settings[i]=e[i];else{if(t===void 0)throw new Error(`A required setting "${i}" was not provided`);this.settings[i]=t}})}getDefaults(){return{facade:void 0,table:void 0,isDataViewInstance:!0,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow(){return!1},preventWheel:!1,data:void 0,freezeOverlays:!1,fixedColumnsStart:0,fixedRowsTop:0,fixedRowsBottom:0,shouldRenderInlineStartOverlay:()=>this.getSetting("fixedColumnsStart")>0||this.getSetting("rowHeaders").length>0,shouldRenderTopOverlay:()=>this.getSetting("fixedRowsTop")>0||this.getSetting("columnHeaders").length>0,shouldRenderBottomOverlay:()=>this.getSetting("fixedRowsBottom")>0,minSpareRows:0,rowHeaders(){return[]},columnHeaders(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:(e,t,i)=>{const r=this.getSetting("data",e,t);Su(i,r??"")},columnWidth(){},rowHeight(){},rowHeightByOverlayName(){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellContextMenu:null,onCellMouseOver:null,onCellMouseOut:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeRemoveCellClassNames:null,onAfterDrawSelection:null,onBeforeDrawBorders:null,onBeforeViewportScrollHorizontally:e=>e,onBeforeViewportScrollVertically:e=>e,onScrollHorizontally:null,onScrollVertically:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:e=>e,onModifyRowHeaderWidth:null,onModifyGetCellCoords:null,onBeforeHighlightingRowHeader:e=>e,onBeforeHighlightingColumnHeader:e=>e,onWindowResize:null,onContainerElementResize:null,renderAllColumns:!1,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null,rtlMode:!1,ariaTags:!0}}update(e,t){return t===void 0?ot(e,(i,r)=>{this.settings[r]=i}):this.settings[e]=t,this}getSetting(e,t,i,r,s){return typeof this.settings[e]=="function"?this.settings[e](t,i,r,s):t!==void 0&&Array.isArray(this.settings[e])?this.settings[e][t]:this.settings[e]}getSettingPure(e){return this.settings[e]}has(e){return!!this.settings[e]}}class xI extends jg{constructor(e,t,i,r){super(e,t,i,r,"master")}alignOverlaysWithTrimmingContainer(){const e=md(this.wtRootElement),{rootWindow:t}=this.domBindings;if(e===t)this.wtSettings.getSetting("preventOverflow")||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible");else{const i=e.parentElement,r=Og(e,"height",t),s=Og(e,"overflow",t),o=this.holder.style,{scrollWidth:a,scrollHeight:l}=e;let c=e.offsetWidth,u=e.offsetHeight;if(i&&["auto","hidden","scroll"].includes(s)){const d=e.cloneNode(!1);d.style.overflow="auto",d.style.position="absolute",e.nextElementSibling?i.insertBefore(d,e.nextElementSibling):i.appendChild(d);const f=parseInt($a(d,t).height,10);i.removeChild(d),f===0&&(u=0)}u=Math.min(u,l),o.height=r==="auto"?"auto":`${u}px`,c=Math.min(c,a),o.width=`${c}px`,o.overflow="",this.hasTableHeight=o.height==="auto"?!0:u>0,this.hasTableWidth=c>0}this.isTableVisible=pd(this.TABLE)}markOversizedColumnHeaders(){const{wtSettings:e}=this,{wtViewport:t}=this.dataAccessObject,i="master",s=e.getSetting("columnHeaders").length;if(s&&!t.hasOversizedColumnHeadersMarked[i]){const a=e.getSetting("rowHeaders").length,l=this.getRenderedColumnsCount();for(let c=0;c<s;c++)for(let u=-1*a;u<l;u++)this.markIfOversizedColumnHeader(u);t.hasOversizedColumnHeadersMarked[i]=!0}}}Gt(xI,fI),Gt(xI,VS);class FRe{constructor(e,t,i,r,s){this.dataAccessObject=e,this.wot=e.wot,this.instance=this.wot,this.domBindings=t,this.wtSettings=i,this.wtTable=s,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.rowsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllRows")?new TSe:new ASe],["fullyVisible",()=>new bSe],["partiallyVisible",()=>new J5]]),this.columnsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllColumns")?new RSe:new MSe],["fullyVisible",()=>new gSe],["partiallyVisible",()=>new Q5]]),this.eventManager=r,this.eventManager.addEventListener(this.domBindings.rootWindow,"resize",()=>{this.clientHeight=this.getWorkspaceHeight()})}getWorkspaceHeight(){const e=this.domBindings.rootDocument,t=this.dataAccessObject.topOverlayTrimmingContainer;let i=0;return t===this.domBindings.rootWindow?i=e.documentElement.clientHeight:i=Zn(t)>0&&t.clientHeight>0?t.clientHeight:1/0,i}getWorkspaceWidth(){const{wtSettings:e}=this,{rootDocument:t,rootWindow:i}=this.domBindings,r=this.dataAccessObject.inlineStartOverlayTrimmingContainer,s=t.documentElement.offsetWidth,o=e.getSetting("totalColumns"),a=e.getSetting("preventOverflow"),l=e.getSetting("rtlMode"),c=this.wtTable.TABLE.getBoundingClientRect(),u=l?c.right-s:c.left,h=s-u;let d,f;if(a)return dn(this.wtTable.wtRootElement);if(e.getSetting("freezeOverlays")?d=Math.min(h,s):d=Math.min(this.getContainerFillWidth(),h,s),r===i&&o>0&&this.sumColumnWidths(0,o-1)>d)return t.documentElement.clientWidth;if(r!==i&&(f=Og(this.dataAccessObject.inlineStartOverlayTrimmingContainer,"overflow",i),f==="scroll"||f==="hidden"||f==="auto"))return Math.max(d,r.clientWidth);const g=e.getSetting("stretchH");return g==="none"||!g?Math.max(d,dn(this.wtTable.TABLE)):d}hasVerticalScroll(){return this.wtTable.hider.offsetHeight>this.getWorkspaceHeight()}hasHorizontalScroll(){return this.wtTable.hider.offsetWidth>this.getWorkspaceWidth()}sumColumnWidths(e,t){let i=0,r=e;for(;r<t;)i+=this.wtTable.getColumnWidth(r),r+=1;return i}getContainerFillWidth(){if(this.containerWidth)return this.containerWidth;const e=this.wtTable.holder,t=this.domBindings.rootDocument.createElement("div");t.style.width="100%",t.style.height="1px",e.appendChild(t);const i=t.offsetWidth;return this.containerWidth=i,e.removeChild(t),i}getWorkspaceOffset(){return vi(this.wtTable.TABLE)}getColumnHeaderHeight(){return this.wtSettings.getSetting("columnHeaders").length?isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=Zn(this.wtTable.THEAD)):this.columnHeaderHeight=0,this.columnHeaderHeight}getViewportHeight(){let e=this.getWorkspaceHeight();if(e===1/0)return e;const t=this.getColumnHeaderHeight();return t>0&&(e-=t),e}getRowHeaderWidth(){const e=this.wtSettings.getSetting("rowHeaderWidth"),t=this.wtSettings.getSetting("rowHeaders");if(e){this.rowHeaderWidth=0;for(let i=0,r=t.length;i<r;i++)this.rowHeaderWidth+=e[i]||e}if(isNaN(this.rowHeaderWidth))if(t.length){let i=this.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(let r=0,s=t.length;r<s;r++)i?(this.rowHeaderWidth+=dn(i),i=i.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.wtSettings.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth}getViewportWidth(){const e=this.getWorkspaceWidth();if(e===1/0)return e;const t=this.getRowHeaderWidth();return t>0?e-t:e}createRowsCalculator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:t,wtTable:i}=this;let r=this.getViewportHeight(),s,o;this.rowHeaderWidth=NaN;let a=this.dataAccessObject.topScrollPosition-this.dataAccessObject.topParentOffset;const l=t.getSetting("fixedRowsTop"),c=t.getSetting("fixedRowsBottom"),u=t.getSetting("totalRows");return l&&a>=0&&(o=this.dataAccessObject.topOverlay.sumCellSizes(0,l),a+=o,r-=o),c&&this.dataAccessObject.bottomOverlay.clone&&(o=this.dataAccessObject.bottomOverlay.sumCellSizes(u-c,u),r-=o),i.holder.clientHeight===i.holder.offsetHeight?s=0:s=wi(this.domBindings.rootDocument),new HSe({calculationTypes:e.map(h=>[h,this.rowsCalculatorTypes.get(h)()]),viewportHeight:r,scrollOffset:a,totalRows:t.getSetting("totalRows"),rowHeightFn:h=>i.getRowHeight(h),overrideFn:t.getSettingPure("viewportRowCalculatorOverride"),horizontalScrollbarHeight:s})}createColumnsCalculator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:t,wtTable:i}=this;let r=this.getViewportWidth(),s=Math.abs(this.dataAccessObject.inlineStartScrollPosition)-this.dataAccessObject.inlineStartParentOffset;this.columnHeaderHeight=NaN;const o=t.getSetting("fixedColumnsStart");if(o&&s>=0){const a=this.dataAccessObject.inlineStartOverlay.sumCellSizes(0,o);s+=a,r-=a}return i.holder.clientWidth!==i.holder.offsetWidth&&(r-=wi(this.domBindings.rootDocument)),new DSe({calculationTypes:e.map(a=>[a,this.columnsCalculatorTypes.get(a)()]),viewportWidth:r,scrollOffset:s,totalColumns:t.getSetting("totalColumns"),columnWidthFn:a=>i.getColumnWidth(a),overrideFn:t.getSettingPure("viewportColumnCalculatorOverride"),inlineStartOffset:this.dataAccessObject.inlineStartParentOffset})}createCalculators(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{wtSettings:t}=this,i=this.createRowsCalculator(),r=this.createColumnsCalculator();if(e&&!t.getSetting("renderAllRows")){const s=i.getResultsFor("fullyVisible");e=this.areAllProposedVisibleRowsAlreadyRendered(s)}if(e&&!t.getSetting("renderAllColumns")){const s=r.getResultsFor("fullyVisible");e=this.areAllProposedVisibleColumnsAlreadyRendered(s)}return e||(this.rowsRenderCalculator=i.getResultsFor("rendered"),this.columnsRenderCalculator=r.getResultsFor("rendered")),this.rowsVisibleCalculator=i.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=r.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=i.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=r.getResultsFor("partiallyVisible"),e}createVisibleCalculators(){const e=this.createRowsCalculator(["fullyVisible","partiallyVisible"]),t=this.createColumnsCalculator(["fullyVisible","partiallyVisible"]);this.rowsVisibleCalculator=e.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=t.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=e.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=t.getResultsFor("partiallyVisible")}areAllProposedVisibleRowsAlreadyRendered(e){if(!this.rowsVisibleCalculator)return!1;let{startRow:t,endRow:i}=e;if(t===null&&i===null){if(!e.isVisibleInTrimmingContainer)return!0;t=this.rowsPartiallyVisibleCalculator.startRow,i=this.rowsPartiallyVisibleCalculator.endRow}const{startRow:r,endRow:s}=this.rowsRenderCalculator;return t<r||t===r&&t>0?!1:!(i>s||i===s&&i<this.wtSettings.getSetting("totalRows")-1)}areAllProposedVisibleColumnsAlreadyRendered(e){if(!this.columnsVisibleCalculator)return!1;let{startColumn:t,endColumn:i}=e;if(t===null&&i===null){if(!e.isVisibleInTrimmingContainer)return!0;t=this.columnsPartiallyVisibleCalculator.startColumn,i=this.columnsPartiallyVisibleCalculator.endColumn}const{startColumn:r,endColumn:s}=this.columnsRenderCalculator;return t<r||t===r&&t>0?!1:!(i>s||i===s&&i<this.wtSettings.getSetting("totalColumns")-1)}resetHasOversizedColumnHeadersMarked(){ot(this.hasOversizedColumnHeadersMarked,(e,t,i)=>{i[t]=void 0})}}class BRe extends hI{constructor(e,t){super(e,new $Re(t));const i=this.wtSettings.getSetting("facade",this);this.wtTable=new xI(this.getTableDao(),i,this.domBindings,this.wtSettings),this.wtViewport=new FRe(this.getViewportDao(),this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.selectionManager=new CRe(this.wtSettings.getSetting("selections")),this.wtEvent=new l8(i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager),this.wtOverlays=new NRe(this,i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.exportSettingsAsClassNames(),this.findOriginalHeaders()}exportSettingsAsClassNames(){const e={rowHeaders:"htRowHeaders",columnHeaders:"htColumnHeaders"},t=[],i=[];ot(e,(r,s)=>{this.wtSettings.getSetting(s).length&&i.push(r),t.push(r)}),Ze(this.wtTable.wtRootElement.parentNode,t),ce(this.wtTable.wtRootElement.parentNode,i)}getOverlayByName(e){var t;if(!v8.includes(e))return null;const i=e.replace(/_([a-z])/g,r=>r[1].toUpperCase());return(t=this.wtOverlays[`${i}Overlay`])!==null&&t!==void 0?t:null}getViewportDao(){const e=this;return{get wot(){return e},get topOverlayTrimmingContainer(){return e.wtOverlays.topOverlay.trimmingContainer},get inlineStartOverlayTrimmingContainer(){return e.wtOverlays.inlineStartOverlay.trimmingContainer},get topScrollPosition(){return e.wtOverlays.topOverlay.getScrollPosition()},get topParentOffset(){return e.wtOverlays.topOverlay.getTableParentOffset()},get inlineStartScrollPosition(){return e.wtOverlays.inlineStartOverlay.getScrollPosition()},get inlineStartParentOffset(){return e.wtOverlays.inlineStartOverlay.getTableParentOffset()},get topOverlay(){return e.wtOverlays.topOverlay},get inlineStartOverlay(){return e.wtOverlays.inlineStartOverlay},get bottomOverlay(){return e.wtOverlays.bottomOverlay}}}}class TI{constructor(e){e instanceof hI?this._wot=e:this._initFromSettings(e)}_initFromSettings(e){e.facade=t=>{const i=new TI(t);return()=>i},this._wot=new BRe(e.table,e)}get guid(){return this._wot.guid}get rootDocument(){return this._wot.domBindings.rootDocument}get rootWindow(){return this._wot.domBindings.rootWindow}get wtSettings(){return this._wot.wtSettings}get cloneSource(){return this._wot.cloneSource}get cloneOverlay(){return this._wot.cloneOverlay}get selectionManager(){return this._wot.selectionManager}get wtViewport(){return this._wot.wtViewport}get wtOverlays(){return this._wot.wtOverlays}get wtTable(){return this._wot.wtTable}get wtEvent(){return this._wot.wtEvent}get wtScroll(){return this._wot.wtScroll}get drawn(){return this._wot.drawn}set drawn(e){this._wot.drawn=e}get drawInterrupted(){return this._wot.drawInterrupted}set drawInterrupted(e){this._wot.drawInterrupted=e}get lastMouseOver(){return this._wot.lastMouseOver}set lastMouseOver(e){this._wot.lastMouseOver=e}get momentumScrolling(){return this._wot.momentumScrolling}set momentumScrolling(e){this._wot.momentumScrolling=e}get touchApplied(){return this._wot.touchApplied}set touchApplied(e){this._wot.touchApplied=e}get domBindings(){return this._wot.domBindings}get eventListeners(){return this._wot.eventListeners}set eventListeners(e){this._wot.eventListeners=e}get eventManager(){return this._wot.eventManager}createCellCoords(e,t){return this._wot.createCellCoords(e,t)}createCellRange(e,t,i){return this._wot.createCellRange(e,t,i)}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._wot.draw(e),this}getCell(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._wot.getCell(e,t)}scrollViewport(e,t,i,r,s){return this._wot.scrollViewport(e,t,i,r,s)}scrollViewportHorizontally(e,t,i){return this._wot.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return this._wot.scrollViewportVertically(e,t,i)}getViewport(){return this._wot.getViewport()}getOverlayName(){return this._wot.cloneOverlay?this._wot.cloneOverlay.type:"master"}getOverlayByName(e){return this._wot.getOverlayByName(e)}exportSettingsAsClassNames(){return this._wot.exportSettingsAsClassNames()}update(e,t){return this._wot.wtSettings.update(e,t),this}getSetting(e,t,i,r,s){return this._wot.wtSettings.getSetting(e,t,i,r,s)}hasSetting(e){return this._wot.wtSettings.hasSetting(e)}destroy(){this._wot.destroy()}}function D8(n){let{isShiftKey:e,isLeftClick:t,isRightClick:i,coords:r,selection:s,controller:o,cellCoordsFactory:a}=n;const l=s.isSelected()?s.getSelectedRange().current():null,c=s.isSelectedByCorner(),u=s.isSelectedByRowHeader();if(s.markSource("mouse"),e&&l)r.row>=0&&r.col>=0&&!o.cell?s.setRangeEnd(r):(c||u)&&r.row>=0&&r.col>=0&&!o.cell?s.setRangeEnd(a(r.row,r.col)):c&&r.row<0&&!o.column?s.setRangeEnd(a(l.to.row,r.col)):u&&r.col<0&&!o.row?s.setRangeEnd(a(r.row,l.to.col)):(!c&&!u&&r.col<0||c&&r.col<0)&&!o.row?s.selectRows(Math.max(l.from.row,0),r.row,r.col):(!c&&!u&&r.row<0||u&&r.row<0)&&!o.column&&s.selectColumns(Math.max(l.from.col,0),r.col,r.row);else{const h=!s.inInSelection(r),d=t||i&&h;r.row<0&&r.col>=0&&!o.column?d&&s.selectColumns(r.col,r.col,r.row):r.col<0&&r.row>=0&&!o.row?d&&s.selectRows(r.row,r.row,r.col):r.col>=0&&r.row>=0&&!o.cell?d&&s.setRangeStart(r):r.col<0&&r.row<0&&s.selectAll(!0,!0,{disableHeadersHighlight:!0,focusPosition:{row:0,col:0}})}s.markEndSource()}function VRe(n){let{isLeftClick:e,coords:t,selection:i,controller:r,cellCoordsFactory:s}=n;if(!e)return;const o=i.isSelectedByRowHeader(),a=i.isSelectedByColumnHeader(),l=i.tableProps.countCols(),c=i.tableProps.countRows();i.markSource("mouse"),a&&!r.column?i.setRangeEnd(s(c-1,t.col)):o&&!r.row?i.setRangeEnd(s(t.row,l-1)):r.cell||i.setRangeEnd(t),i.markEndSource()}const WRe=new Map([["mousedown",D8],["mouseover",VRe],["touchstart",D8]]);function N8(n,e){let{coords:t,selection:i,controller:r,cellCoordsFactory:s}=e;WRe.get(n.type)({coords:t,selection:i,controller:r,cellCoordsFactory:s,isShiftKey:n.shiftKey,isLeftClick:bS(n)||n.type==="touchstart",isRightClick:Eu(n)})}const L8=new WeakMap,MI=Symbol("rootInstance");function jRe(n){L8.set(n,!0)}function zRe(n){return n===MI}function GS(n){return L8.has(n)}function URe(n,e){H8(n,e),e.add(n)}function Md(n,e,t){H8(n,e),e.set(n,t)}function H8(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Au(n,e,t){return(e=GRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GRe(n){var e=YRe(n,"string");return typeof e=="symbol"?e:e+""}function YRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ni(n,e){return n.get(Ev(n,e))}function Zs(n,e,t){return n.set(Ev(n,e),t),t}function Ev(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var AI=new WeakMap,YS=new WeakMap,KS=new WeakMap,uc=new WeakMap,Go=new WeakMap,PI=new WeakMap,II=new WeakMap,qS=new WeakSet;class KRe{constructor(e){URe(this,qS),Au(this,"hot",void 0),Au(this,"eventManager",void 0),Au(this,"settings",void 0),Au(this,"THEAD",void 0),Au(this,"TBODY",void 0),Au(this,"_wt",void 0),Au(this,"activeWt",void 0),Md(this,AI,0),Md(this,YS,0),Au(this,"postponedAdjustElementsSize",!1),Md(this,KS,!1),Md(this,uc,void 0),Md(this,Go,void 0),Md(this,PI,0),Md(this,II,0),this.hot=e,this.eventManager=new Ys(this.hot),this.settings=this.hot.getSettings(),this.createElements(),this.registerEvents(),this.initializeWalkontable()}render(){this.hot.isRenderSuspended()||(this.hot.runHooks("beforeRender",this.hot.forceFullRender),this.postponedAdjustElementsSize&&(this.postponedAdjustElementsSize=!1,this.adjustElementsSize(!0)),this._wt.draw(!this.hot.forceFullRender),this.hot.runHooks("afterRender",this.hot.forceFullRender),this.hot.forceFullRender=!1,this.hot.renderCall=!1)}adjustElementsSize(){this.hot.isRenderSuspended()?this.postponedAdjustElementsSize=!0:this._wt.wtOverlays.adjustElementsSize()}getCellAtCoords(e,t){const i=this._wt.getCell(e,t);return i<0?null:i}scrollViewport(e,t,i,r,s){return this._wt.scrollViewport(e,t,i,r,s)}scrollViewportHorizontally(e,t,i){return this._wt.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return this._wt.scrollViewportVertically(e,t,i)}createElements(){const{rootElement:e,rootDocument:t}=this.hot,i=e.getAttribute("style");i&&e.setAttribute("data-originalstyle",i),ce(e,"handsontable"),Zs(Go,this,t.createElement("TABLE")),ce(Ni(Go,this),"htCore"),this.hot.getSettings().tableClassName&&ce(Ni(Go,this),this.hot.getSettings().tableClassName),this.settings.ariaTags&&(ze(Ni(Go,this),[Ha()]),ze(e,[oye(),Dz(-1),rS(this.hot.countCols()),yye()])),this.THEAD=t.createElement("THEAD"),Ni(Go,this).appendChild(this.THEAD),this.TBODY=t.createElement("TBODY"),Ni(Go,this).appendChild(this.TBODY),this.hot.table=Ni(Go,this),this.hot.container.insertBefore(Ni(Go,this),this.hot.container.firstChild)}registerEvents(){const{rootElement:e,rootDocument:t,selection:i,rootWindow:r}=this.hot,s=t.documentElement;this.eventManager.addEventListener(e,"mousedown",a=>{Zs(KS,this,!0),this.isTextSelectionAllowed(a.target)||(mP(r),a.preventDefault(),r.focus())}),this.eventManager.addEventListener(e,"mouseup",()=>{Zs(KS,this,!1)}),this.eventManager.addEventListener(e,"mousemove",a=>{Ni(KS,this)&&!this.isTextSelectionAllowed(a.target)&&(this.settings.fragmentSelection&&mP(r),a.preventDefault())}),this.eventManager.addEventListener(s,"keyup",a=>{i.isInProgress()&&!a.shiftKey&&i.finish()}),this.eventManager.addEventListener(s,"mouseup",a=>{i.isInProgress()&&bS(a)&&i.finish(),Zs(uc,this,!1);const l=lS(t.activeElement);Jb(t.activeElement)&&!l||(l||!i.isSelected()&&!i.isSelectedByAnyHeader()&&!e.contains(a.target)&&!Eu(a))&&this.hot.unlisten()}),this.eventManager.addEventListener(s,"contextmenu",a=>{i.isInProgress()&&Eu(a)&&(i.finish(),Zs(uc,this,!1))}),this.eventManager.addEventListener(s,"touchend",()=>{i.isInProgress()&&i.finish(),Zs(uc,this,!1)}),this.eventManager.addEventListener(s,"mousedown",a=>{const l=a.target,c=a.x||a.clientX,u=a.y||a.clientY;let h=a.target;if(Ni(uc,this)||!e||!this.hot.view)return;const{holder:d}=this._wt.wtTable;if(h===d){const g=wi(t);if(t.elementFromPoint(c+g,u)!==d||t.elementFromPoint(c,u+g)!==d)return}else for(;h!==s;){if(h===null){if(a.isTargetWebComponent)break;return}if(h===e)return;h=h.parentNode}(typeof this.settings.outsideClickDeselects=="function"?this.settings.outsideClickDeselects(l):this.settings.outsideClickDeselects)?this.hot.deselectCell():this.hot.destroyEditor(!1,!1)});let o=dd(r);for(;o!==null;)this.eventManager.addEventListener(o.document.documentElement,"click",()=>{this.hot.unlisten()}),o=dd(o);this.eventManager.addEventListener(Ni(Go,this),"selectstart",a=>{this.settings.fragmentSelection||Jb(a.target)||a.preventDefault()})}translateFromRenderableToVisualCoords(e){let{row:t,col:i}=e;return this.hot._createCellCoords(...this.translateFromRenderableToVisualIndex(t,i))}translateFromRenderableToVisualIndex(e,t){let i=e>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(e):e,r=t>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(t):t;return i===null&&(i=e),r===null&&(r=t),[i,r]}countRenderableIndexes(e,t){const i=Math.min(e.getNotTrimmedIndexesLength(),t),r=e.getNearestNotHiddenIndex(i-1,-1);return r===null?0:e.getRenderableFromVisualIndex(r)+1}countRenderableColumns(){return this.countRenderableIndexes(this.hot.columnIndexMapper,this.settings.maxCols)}countRenderableRows(){return this.countRenderableIndexes(this.hot.rowIndexMapper,this.settings.maxRows)}countNotHiddenRowIndexes(e,t){return this.countNotHiddenIndexes(e,t,this.hot.rowIndexMapper,this.countRenderableRows())}countNotHiddenColumnIndexes(e,t){return this.countNotHiddenIndexes(e,t,this.hot.columnIndexMapper,this.countRenderableColumns())}countNotHiddenIndexes(e,t,i,r){if(isNaN(e)||e<0)return 0;const s=i.getNearestNotHiddenIndex(e,t),o=i.getRenderableFromVisualIndex(s);if(!Number.isInteger(o))return 0;let a=0;return t<0?a=o+1:t>0&&(a=r-o),a}countNotHiddenFixedColumnsStart(){const e=this.hot.countCols(),t=Math.min(parseInt(this.settings.fixedColumnsStart,10),e)-1;return this.countNotHiddenColumnIndexes(t,-1)}countNotHiddenFixedRowsTop(){const e=this.hot.countRows(),t=Math.min(parseInt(this.settings.fixedRowsTop,10),e)-1;return this.countNotHiddenRowIndexes(t,-1)}countNotHiddenFixedRowsBottom(){const e=this.hot.countRows(),t=Math.max(e-parseInt(this.settings.fixedRowsBottom,10),0);return this.countNotHiddenRowIndexes(t,1)}countRenderableColumnsInRange(e,t){let i=0;for(let r=e;r<=t;r++)this.hot.columnIndexMapper.getRenderableFromVisualIndex(r)!==null&&(i+=1);return i}countRenderableRowsInRange(e,t){let i=0;for(let r=e;r<=t;r++)this.hot.rowIndexMapper.getRenderableFromVisualIndex(r)!==null&&(i+=1);return i}isMainTableNotFullyCoveredByOverlays(){const e=this.countNotHiddenFixedRowsTop()+this.countNotHiddenFixedRowsBottom(),t=this.countNotHiddenFixedColumnsStart();return this.hot.countRenderedRows()>e&&this.hot.countRenderedCols()>t}initializeWalkontable(){const e={ariaTags:this.settings.ariaTags,rtlMode:this.hot.isRtl(),externalRowCalculator:this.hot.getPlugin("autoRowSize")&&this.hot.getPlugin("autoRowSize").isEnabled(),table:Ni(Go,this),isDataViewInstance:()=>GS(this.hot),preventOverflow:()=>this.settings.preventOverflow,preventWheel:()=>this.settings.preventWheel,stretchH:()=>this.settings.stretchH,data:(s,o)=>this.hot.getDataAtCell(...this.translateFromRenderableToVisualIndex(s,o)),totalRows:()=>this.countRenderableRows(),totalColumns:()=>this.countRenderableColumns(),fixedColumnsStart:()=>this.countNotHiddenFixedColumnsStart(),fixedRowsTop:()=>this.countNotHiddenFixedRowsTop(),fixedRowsBottom:()=>this.countNotHiddenFixedRowsBottom(),shouldRenderInlineStartOverlay:()=>this.settings.fixedColumnsStart>0||e.rowHeaders().length>0,shouldRenderTopOverlay:()=>this.settings.fixedRowsTop>0||e.columnHeaders().length>0,shouldRenderBottomOverlay:()=>this.settings.fixedRowsBottom>0,minSpareRows:()=>this.settings.minSpareRows,renderAllRows:this.settings.renderAllRows,renderAllColumns:this.settings.renderAllColumns,rowHeaders:()=>{const s=[];return this.hot.hasRowHeaders()&&s.push((o,a)=>{const l=o>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(o):o;this.appendRowHeader(l,a)}),this.hot.runHooks("afterGetRowHeaderRenderers",s),Zs(YS,this,s.length),this.hot.getSettings().ariaTags&&Ev(qS,this,$8).call(this)===this.hot.countCols()&&Ev(qS,this,qRe).call(this,Ni(YS,this)),s},columnHeaders:()=>{const s=[];return this.hot.hasColHeaders()&&s.push((o,a)=>{const l=o>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(o):o;this.appendColHeader(l,a)}),this.hot.runHooks("afterGetColumnHeaderRenderers",s),Zs(AI,this,s.length),s},columnWidth:s=>{const o=this.hot.columnIndexMapper.getVisualFromRenderableIndex(s);return this.hot.getColWidth(o===null?s:o)},rowHeight:s=>{const o=this.hot.rowIndexMapper.getVisualFromRenderableIndex(s);return this.hot.getRowHeight(o===null?s:o)},rowHeightByOverlayName:(s,o)=>{const a=this.hot.rowIndexMapper.getVisualFromRenderableIndex(s),l=a===null?s:a;return this.hot.runHooks("modifyRowHeightByOverlayName",this.hot.getRowHeight(l),l,o)},cellRenderer:(s,o,a)=>{const[l,c]=this.translateFromRenderableToVisualIndex(s,o),u=this.hot.runHooks("modifyGetCellCoords",l,c);let h=l,d=c;Array.isArray(u)&&([h,d]=u);const f=this.hot.getCellMeta(h,d),g=this.hot.colToProp(d);let p=this.hot.getDataAtRowProp(h,g);this.hot.hasHook("beforeValueRender")&&(p=this.hot.runHooks("beforeValueRender",p,f)),this.hot.runHooks("beforeRenderer",a,l,c,g,p,f),this.hot.getCellRenderer(f)(this.hot,a,l,c,g,p,f),this.hot.runHooks("afterRenderer",a,l,c,g,p,f)},selections:this.hot.selection.highlight,hideBorderOnMouseDownOver:()=>this.settings.fragmentSelection,onWindowResize:()=>{this.hot&&!this.hot.isDestroyed&&this.hot.refreshDimensions()},onContainerElementResize:()=>{this.hot&&!this.hot.isDestroyed&&pd(this.hot.rootElement)&&this.hot.refreshDimensions()},onCellMouseDown:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o),u={row:!1,column:!1,cell:!1};this.hot.listen(),this.activeWt=l,Zs(uc,this,!0),this.hot.runHooks("beforeOnCellMouseDown",s,c,a,u),!Ru(s)&&(N8(s,{coords:c,selection:this.hot.selection,controller:u,cellCoordsFactory:(h,d)=>this.hot._createCellCoords(h,d)}),this.hot.runHooks("afterOnCellMouseDown",s,c,a),this.activeWt=this._wt)},onCellContextMenu:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,Zs(uc,this,!1),this.hot.selection.isInProgress()&&this.hot.selection.finish(),this.hot.runHooks("beforeOnCellContextMenu",s,c,a),!Ru(s)&&(this.hot.runHooks("afterOnCellContextMenu",s,c,a),this.activeWt=this._wt)},onCellMouseOut:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,this.hot.runHooks("beforeOnCellMouseOut",s,c,a),!Ru(s)&&(this.hot.runHooks("afterOnCellMouseOut",s,c,a),this.activeWt=this._wt)},onCellMouseOver:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o),u={row:!1,column:!1,cell:!1};this.activeWt=l,this.hot.runHooks("beforeOnCellMouseOver",s,c,a,u),!Ru(s)&&(Ni(uc,this)&&N8(s,{coords:c,selection:this.hot.selection,controller:u,cellCoordsFactory:(h,d)=>this.hot._createCellCoords(h,d)}),this.hot.runHooks("afterOnCellMouseOver",s,c,a),this.activeWt=this._wt)},onCellMouseUp:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,this.hot.runHooks("beforeOnCellMouseUp",s,c,a),!(Ru(s)||this.hot.isDestroyed)&&(this.hot.runHooks("afterOnCellMouseUp",s,c,a),this.activeWt=this._wt)},onCellCornerMouseDown:s=>{s.preventDefault(),this.hot.runHooks("afterOnCellCornerMouseDown",s)},onCellCornerDblClick:s=>{s.preventDefault(),this.hot.runHooks("afterOnCellCornerDblClick",s)},beforeDraw:(s,o)=>this.beforeRender(s,o),onDraw:s=>this.afterRender(s),onBeforeViewportScrollVertically:s=>{const o=this.hot.rowIndexMapper,a=s<0;let l=s;return!a&&(l=o.getVisualFromRenderableIndex(s),l===null)?s:(l=this.hot.runHooks("beforeViewportScrollVertically",l),this.hot.runHooks("beforeViewportScroll"),a?l:o.getRenderableFromVisualIndex(l))},onBeforeViewportScrollHorizontally:s=>{const o=this.hot.columnIndexMapper,a=s<0;let l=s;return!a&&(l=o.getVisualFromRenderableIndex(s),l===null)?s:(l=this.hot.runHooks("beforeViewportScrollHorizontally",l),this.hot.runHooks("beforeViewportScroll"),a?l:o.getRenderableFromVisualIndex(l))},onScrollVertically:()=>{this.hot.runHooks("afterScrollVertically"),this.hot.runHooks("afterScroll")},onScrollHorizontally:()=>{this.hot.runHooks("afterScrollHorizontally"),this.hot.runHooks("afterScroll")},onBeforeRemoveCellClassNames:()=>this.hot.runHooks("beforeRemoveCellClassNames"),onBeforeHighlightingRowHeader:(s,o,a)=>{const l=this.hot.rowIndexMapper,c=s<0;let u=s;c||(u=l.getVisualFromRenderableIndex(s));const h=this.hot.runHooks("beforeHighlightingRowHeader",u,o,a);return c?h:l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(h,1))},onBeforeHighlightingColumnHeader:(s,o,a)=>{const l=this.hot.columnIndexMapper,c=s<0;let u=s;c||(u=l.getVisualFromRenderableIndex(s));const h=this.hot.runHooks("beforeHighlightingColumnHeader",u,o,a);return c?h:l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(h,1))},onAfterDrawSelection:(s,o,a)=>{let l;const[c,u]=this.translateFromRenderableToVisualIndex(s,o),h=this.hot.selection.getSelectedRange();if(h.size()>0){const f=h.peekByIndex(a??0);l=[f.from.row,f.from.col,f.to.row,f.to.col]}return this.hot.runHooks("afterDrawSelection",c,u,l,a)},onBeforeDrawBorders:(s,o)=>{const[a,l,c,u]=s,h=[this.hot.rowIndexMapper.getVisualFromRenderableIndex(a),this.hot.columnIndexMapper.getVisualFromRenderableIndex(l),this.hot.rowIndexMapper.getVisualFromRenderableIndex(c),this.hot.columnIndexMapper.getVisualFromRenderableIndex(u)];return this.hot.runHooks("beforeDrawBorders",h,o)},onBeforeTouchScroll:()=>this.hot.runHooks("beforeTouchScroll"),onAfterMomentumScroll:()=>this.hot.runHooks("afterMomentumScroll"),onBeforeStretchingColumnWidth:(s,o)=>{const a=this.hot.columnIndexMapper.getVisualFromRenderableIndex(o);return this.hot.runHooks("beforeStretchingColumnWidth",s,a)},onModifyRowHeaderWidth:s=>this.hot.runHooks("modifyRowHeaderWidth",s),onModifyGetCellCoords:(s,o,a)=>{const l=this.hot.rowIndexMapper,c=this.hot.columnIndexMapper,u=o>=0?c.getVisualFromRenderableIndex(o):o,h=s>=0?l.getVisualFromRenderableIndex(s):s,d=this.hot.runHooks("modifyGetCellCoords",h,u,a);if(Array.isArray(d)){const[f,g,p,m]=d;return[f>=0?l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(f,1)):f,g>=0?c.getRenderableFromVisualIndex(c.getNearestNotHiddenIndex(g,1)):g,p>=0?l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(p,-1)):p,m>=0?c.getRenderableFromVisualIndex(c.getNearestNotHiddenIndex(m,-1)):m]}},viewportRowCalculatorOverride:s=>{let o=this.settings.viewportRowRenderingOffset;if(o==="auto"&&this.settings.fixedRowsTop&&(o=10),o>0||o==="auto"){const a=this.countRenderableRows(),l=s.startRow,c=s.endRow;if(typeof o=="number")s.startRow=Math.max(l-o,0),s.endRow=Math.min(c+o,a-1);else if(o==="auto"){const u=Math.ceil(c/a*12);s.startRow=Math.max(l-u,0),s.endRow=Math.min(c+u,a-1)}}this.hot.runHooks("afterViewportRowCalculatorOverride",s)},viewportColumnCalculatorOverride:s=>{let o=this.settings.viewportColumnRenderingOffset;if(o==="auto"&&this.settings.fixedColumnsStart&&(o=10),o>0||o==="auto"){const a=this.countRenderableColumns(),l=s.startColumn,c=s.endColumn;if(typeof o=="number"&&(s.startColumn=Math.max(l-o,0),s.endColumn=Math.min(c+o,a-1)),o==="auto"){const u=Math.ceil(c/a*6);s.startColumn=Math.max(l-u,0),s.endColumn=Math.min(c+u,a-1)}}this.hot.runHooks("afterViewportColumnCalculatorOverride",s)},rowHeaderWidth:()=>this.settings.rowHeaderWidth,columnHeaderHeight:()=>{const s=this.hot.runHooks("modifyColumnHeaderHeight");return this.settings.columnHeaderHeight||s}};this.hot.runHooks("beforeInitWalkontable",e),this._wt=new TI(e),this.activeWt=this._wt;const t=this._wt.wtTable.spreader,{width:i,height:r}=this.hot.rootElement.getBoundingClientRect();this.setLastSize(i,r),this.eventManager.addEventListener(t,"mousedown",s=>{s.target===t&&s.which===3&&s.stopPropagation()}),this.eventManager.addEventListener(t,"contextmenu",s=>{s.target===t&&s.which===3&&s.stopPropagation()}),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"click",()=>{this.settings.observeDOMVisibility&&this._wt.drawInterrupted&&(this.hot.forceFullRender=!0,this.render())})}isTextSelectionAllowed(e){if(Jb(e))return!0;const t=yu(e,this._wt.wtTable.spreader);return!!(this.settings.fragmentSelection===!0&&t||this.settings.fragmentSelection==="cell"&&this.isSelectedOnlyCell()&&t||!this.settings.fragmentSelection&&this.isCellEdited()&&this.isSelectedOnlyCell())}isMouseDown(){return Ni(uc,this)}isSelectedOnlyCell(){var e,t;return(e=(t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingleCell())!==null&&e!==void 0?e:!1}isCellEdited(){const e=this.hot.getActiveEditor();return e&&e.isOpened()}beforeRender(e,t){e&&this.hot.runHooks("beforeViewRender",this.hot.forceFullRender,t)}afterRender(e){e&&this.hot.runHooks("afterViewRender",this.hot.forceFullRender)}appendRowHeader(e,t){if(t.firstChild){const i=t.firstChild;if(!Ue(i,"relative")){$o(t),this.appendRowHeader(e,t);return}this.updateCellHeader(i.querySelector(".rowHeader"),e,this.hot.getRowHeader)}else{const{rootDocument:i,getRowHeader:r}=this.hot,s=i.createElement("div"),o=i.createElement("span");s.className="relative",o.className="rowHeader",this.updateCellHeader(o,e,r),s.appendChild(o),t.appendChild(s)}this.hot.runHooks("afterGetRowHeader",e,t)}appendColHeader(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hot.getColHeader,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const s=()=>{const o=e>=0?this.hot.getColumnMeta(e).headerClassName:null;return o?o.split(" "):[]};if(t.firstChild){const o=t.firstChild;Ue(o,"relative")?(this.updateCellHeader(o.querySelector(".colHeader"),e,i,r),o.className="",ce(o,["relative",...s()])):($o(t),this.appendColHeader(e,t,i,r))}else{const{rootDocument:o}=this.hot,a=o.createElement("div"),l=o.createElement("span"),c=s();a.classList.add("relative",...c),l.className="colHeader",this.settings.ariaTags&&(ze(a,...Ha()),ze(l,...Ha())),this.updateCellHeader(l,e,i,r),a.appendChild(l),t.appendChild(a)}this.hot.runHooks("afterGetColHeader",e,t,r)}updateCellHeader(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=t;const o=this._wt.wtOverlays.getParentOverlay(e)||this._wt;e.parentNode&&(Ue(e,"colHeader")?s=o.wtTable.columnFilter.sourceToRendered(t):Ue(e,"rowHeader")&&(s=o.wtTable.rowFilter.sourceToRendered(t))),s>-1?gd(e,i(t,r)):(Su(e," "),ce(e,"cornerHeader"))}maximumVisibleElementWidth(e){const i=this._wt.wtViewport.getWorkspaceWidth()-e;return i>0?i:0}maximumVisibleElementHeight(e){const i=this._wt.wtViewport.getWorkspaceHeight()-e;return i>0?i:0}setLastSize(e,t){Zs(PI,this,e),Zs(II,this,t)}getLastSize(){return{width:Ni(PI,this),height:Ni(II,this)}}getFirstRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedRow(),1):null}getLastRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedRow(),-1):null}getFirstRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedColumn(),1):null}getLastRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedColumn(),-1):null}getFirstFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleRow())}getLastFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleRow())}getFirstFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleColumn())}getLastFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleColumn())}getFirstPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleRow())}getLastPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleRow())}getFirstPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleColumn())}getLastPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleColumn())}getColumnHeadersCount(){return Ni(AI,this)}getRowHeadersCount(){return Ni(YS,this)}getViewportWidth(){return this._wt.wtViewport.getViewportWidth()}getWorkspaceWidth(){return this._wt.wtViewport.getWorkspaceWidth()}getViewportHeight(){return this._wt.wtViewport.getViewportHeight()}getWorkspaceHeight(){return this._wt.wtViewport.getWorkspaceHeight()}getElementOverlayName(e){var t;return((t=this._wt.wtOverlays.getParentOverlay(e))!==null&&t!==void 0?t:this._wt).wtTable.name}getOverlayByName(e){return this._wt.getOverlayByName(e)}isVisible(){return this._wt.wtTable.isVisible()}destroy(){this._wt.destroy(),this.eventManager.destroy()}}function $8(){return parseInt(this.hot.rootElement.getAttribute(rS()[0]),10)}function qRe(n){const e=Ev(qS,this,$8).call(this)+n;ze(this.hot.rootElement,...rS(e))}const F8="ABCDEFGHIJKLMNOPQRSTUVWXYZ",OI=F8.length;function XS(n){let e=n+1,t="",i;for(;e>0;)i=(e-1)%OI,t=String.fromCharCode(65+i)+t,e=parseInt((e-i)/OI,10);return t}function XRe(n){let e=0;if(n)for(let t=0,i=n.length-1;t<n.length;t+=1,i-=1)e+=OI**i*(F8.indexOf(n[t])+1);return e-=1,e}function ZRe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;const t=[];let i,r;for(i=0;i<n;i++){const s=[];for(r=0;r<e;r++)s.push(XS(r)+(i+1));t.push(s)}return t}function QRe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;const t=[];let i,r;for(i=0;i<n;i++){const s={};for(r=0;r<e;r++)s[`prop${r}`]=XS(r)+(i+1);t.push(s)}return t}function JRe(n,e){const t=[];let i;for(let r=0;r<n;r++){i=[];for(let s=0;s<e;s++)i.push("");t.push(i)}return t}function kI(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=n;const i=[];return(!Array.isArray(n)||!Array.isArray(n[0]))&&(t=[n]),t.forEach((r,s)=>{Array.isArray(r)?r.forEach((o,a)=>{i.push([s+e,a,o])}):Object.keys(r).forEach(o=>{i.push([s+e,o,r[o]])})}),i}function DI(n){let e=0;return Array.isArray(n)&&(n[0]&&Array.isArray(n[0])?e=n[0].length:n[0]&&st(n[0])&&(e=gS(n[0]))),e}function B8(n){return!!(Array.isArray(n)&&n.length&&n.every(e=>Array.isArray(e)))}function V8(n){return!!(Array.isArray(n)&&n.length&&n.every(e=>typeof e=="object"&&!Array.isArray(e)&&e!==null))}const e1e=Object.freeze(Object.defineProperty({__proto__:null,countFirstRowKeys:DI,createEmptySpreadsheetData:JRe,createSpreadsheetData:ZRe,createSpreadsheetObjectData:QRe,dataRowToChangesArray:kI,isArrayOfArrays:B8,isArrayOfObjects:V8,spreadsheetColumnIndex:XRe,spreadsheetColumnLabel:XS},Symbol.toStringTag,{value:"Module"}));function xv(n,e,t){return(e=t1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t1e(n){var e=n1e(n,"string");return typeof e=="symbol"?e:e+""}function n1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class i1e{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];xv(this,"hot",void 0),xv(this,"data",void 0),xv(this,"dataType","array"),xv(this,"colToProp",()=>{}),xv(this,"propToCol",()=>{}),this.hot=e,this.data=t}modifyRowData(e){let t;return this.hot.hasHook("modifyRowData")&&(t=this.hot.runHooks("modifyRowData",e)),t!==void 0&&!Number.isInteger(t)?t:this.data[e]}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return!this.data||this.data.length===0?this.data:this.getByRange(null,null,e)}setData(e){this.data=e}getAtColumn(e){const t=[];return V(this.data,(i,r)=>{const s=this.getAtCell(r,e);t.push(s)}),t}getAtRow(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=t===void 0&&i===void 0,{dataDotNotation:o}=this.hot.getSettings();let a=null,l=null;if(a=this.modifyRowData(e),Array.isArray(a))l=[],s?a.forEach((c,u)=>{l[u]=this.getAtPhysicalCell(e,u,a)}):He(t,i,c=>{l[c-t]=this.getAtPhysicalCell(e,c,a)});else if(st(a)||fn(a))if(r?l=[]:l={},!s||r){const u=this.countFirstRowKeys()-1;He(0,u,h=>{const d=this.colToProp(h);if(h>=(t||0)&&h<=(i||u)&&!Number.isInteger(d)){const f=this.getAtPhysicalCell(e,d,a);r?l.push(f):o?fS(l,d,f):l[d]=f}})}else ot(a,(c,u)=>{const h=this.getAtPhysicalCell(e,u,a);o?fS(l,u,h):l[u]=h});return l}setAtCell(e,t,i){if(!(e>=this.countRows()||t>=this.countFirstRowKeys())){if(this.hot.hasHook("modifySourceData")){const r=zs(i);this.hot.runHooks("modifySourceData",e,t,r,"set"),r.isTouched()&&(i=r.value)}Number.isInteger(t)?this.data[e][t]=i:fS(this.data[e],t,i)}}getAtPhysicalCell(e,t,i){let r=null;if(i)if(typeof t=="string"){const{dataDotNotation:s}=this.hot.getSettings();r=s?p5(i,t):i[t]}else typeof t=="function"?r=t(i):r=i[t];if(this.hot.hasHook("modifySourceData")){const s=zs(r);this.hot.runHooks("modifySourceData",e,t,s,"get"),s.isTouched()&&(r=s.value)}return r}getAtCell(e,t){const i=this.modifyRowData(e);return this.getAtPhysicalCell(e,this.colToProp(t),i)}getByRange(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=!1,s=null,o=null,a=null,l=null;e===null||t===null?(r=!0,s=0,a=this.countRows()-1):(s=Math.min(e.row,t.row),o=Math.min(e.col,t.col),a=Math.max(e.row,t.row),l=Math.max(e.col,t.col));const c=[];return He(s,a,u=>{c.push(r?this.getAtRow(u,void 0,void 0,i):this.getAtRow(u,o,l,i))}),c}countRows(){if(this.hot.hasHook("modifySourceLength")){const e=this.hot.runHooks("modifySourceLength");if(Number.isInteger(e))return e}return this.data.length}countFirstRowKeys(){return DI(this.data)}destroy(){this.data=null,this.hot=null}}function W8(n,e,t){return(e=r1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r1e(n){var e=s1e(n,"string");return typeof e=="symbol"?e:e+""}function s1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Ad{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;W8(this,"indexedValues",[]),W8(this,"initValueOrFn",void 0),this.initValueOrFn=e}getValues(){return this.indexedValues}getValueAtIndex(e){const t=this.indexedValues;if(e<t.length)return t[e]}setValues(e){this.indexedValues=e.slice(),this.runLocalHooks("change")}setValueAtIndex(e,t){return e<this.indexedValues.length?(this.indexedValues[e]=t,this.runLocalHooks("change"),!0):!1}clear(){this.setDefaultValues()}getLength(){return this.getValues().length}setDefaultValues(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.indexedValues.length;this.indexedValues.length=0,fn(this.initValueOrFn)?He(e-1,t=>this.indexedValues.push(this.initValueOrFn(t))):He(e-1,()=>this.indexedValues.push(this.initValueOrFn)),this.runLocalHooks("change")}init(e){return this.setDefaultValues(e),this.runLocalHooks("init"),this}insert(){this.runLocalHooks("change")}remove(){this.runLocalHooks("change")}destroy(){this.clearLocalHooks(),this.indexedValues=null,this.initValueOrFn=null}}Gt(Ad,zi);function NI(n,e,t,i){const r=t.length?t[0]:void 0;return[...n.slice(0,r),...t.map((s,o)=>fn(i)?i(s,o):i),...r===void 0?[]:n.slice(r)]}function LI(n,e){return ic(n,(t,i)=>e.includes(i)===!1)}class Pu extends Ad{insert(e,t){this.indexedValues=NI(this.indexedValues,e,t,this.initValueOrFn),super.insert(e,t)}remove(e){this.indexedValues=LI(this.indexedValues,e),super.remove(e)}}class ZS extends Pu{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;super(e)}getHiddenIndexes(){return si(this.getValues(),(e,t,i)=>(t&&e.push(i),e),[])}}function HI(n,e,t){return[...n.slice(0,e),...t,...n.slice(e)]}function Tv(n,e){return ic(n,t=>e.includes(t)===!1)}function $I(n,e){return pt(n,t=>t-e.filter(i=>i<t).length)}function FI(n,e){const t=e[0],i=e.length;return pt(n,r=>r>=t?r+i:r)}function o1e(n,e,t){return(e=a1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a1e(n){var e=l1e(n,"string");return typeof e=="symbol"?e:e+""}function l1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class QS extends Ad{constructor(){super(...arguments),o1e(this,"orderOfIndexes",[])}getValues(){return this.orderOfIndexes.map(e=>this.indexedValues[e])}setValues(e){this.orderOfIndexes=[...Array(e.length).keys()],super.setValues(e)}setValueAtIndex(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.orderOfIndexes.length;return e<this.indexedValues.length?(this.indexedValues[e]=t,this.orderOfIndexes.includes(e)===!1&&this.orderOfIndexes.splice(i,0,e),this.runLocalHooks("change"),!0):!1}clearValue(e){this.orderOfIndexes=Tv(this.orderOfIndexes,[e]),fn(this.initValueOrFn)?super.setValueAtIndex(e,this.initValueOrFn(e)):super.setValueAtIndex(e,this.initValueOrFn)}getLength(){return this.orderOfIndexes.length}setDefaultValues(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.indexedValues.length;this.orderOfIndexes.length=0,super.setDefaultValues(e)}insert(e,t){this.indexedValues=NI(this.indexedValues,e,t,this.initValueOrFn),this.orderOfIndexes=FI(this.orderOfIndexes,t),super.insert(e,t)}remove(e){this.indexedValues=LI(this.indexedValues,e),this.orderOfIndexes=Tv(this.orderOfIndexes,e),this.orderOfIndexes=$I(this.orderOfIndexes,e),super.remove(e)}getEntries(){return this.orderOfIndexes.map(e=>[e,this.getValueAtIndex(e)])}}class Mv extends Pu{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;super(e)}getTrimmedIndexes(){return si(this.getValues(),(e,t,i)=>(t&&e.push(i),e),[])}}const j8=new Map([["indexesSequence",{getListWithInsertedItems:HI,getListWithRemovedItems:Tv}],["physicallyIndexed",{getListWithInsertedItems:NI,getListWithRemovedItems:LI}]]),z8=n=>{if(j8.has(n)===!1)throw new Error(`Alter strategy with ID '${n}' does not exist.`);return j8.get(n)};class U8 extends Ad{constructor(){super(e=>e)}insert(e,t){const i=FI(this.indexedValues,t);this.indexedValues=HI(i,e,t),super.insert(e,t)}remove(e){const t=Tv(this.indexedValues,e);this.indexedValues=$I(t,e),super.remove(e)}}const G8=new Map([["hiding",ZS],["index",Ad],["linkedPhysicalIndexToValue",QS],["physicalIndexToValue",Pu],["trimming",Mv]]);function c1e(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!G8.has(n))throw new Error(`The provided map type ("${n}") does not exist.`);return new(G8.get(n))(e)}function u1e(n,e,t){return(e=h1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function h1e(n){var e=d1e(n,"string");return typeof e=="symbol"?e:e+""}function d1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let BI=0;class VI{constructor(){u1e(this,"collection",new Map)}register(e,t){this.collection.has(e)===!1&&(this.collection.set(e,t),t.addLocalHook("change",()=>this.runLocalHooks("change",t)),BI+=1)}unregister(e){const t=this.collection.get(e);Oe(t)&&(t.destroy(),this.collection.delete(e),this.runLocalHooks("change",t),BI-=1)}unregisterAll(){this.collection.forEach((e,t)=>this.unregister(t)),this.collection.clear()}get(e){return hn(e)?Array.from(this.collection.values()):this.collection.get(e)}getLength(){return this.collection.size}removeFromEvery(e){this.collection.forEach(t=>{t.remove(e)})}insertToEvery(e,t){this.collection.forEach(i=>{i.insert(e,t)})}initEvery(e){this.collection.forEach(t=>{t.init(e)})}}Gt(VI,zi);function f1e(){return BI}function WI(n,e,t){return(e=g1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g1e(n){var e=p1e(n,"string");return typeof e=="symbol"?e:e+""}function p1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Y8 extends VI{constructor(e,t){super(),WI(this,"mergedValuesCache",[]),WI(this,"aggregationFunction",void 0),WI(this,"fallbackValue",void 0),this.aggregationFunction=e,this.fallbackValue=t}getMergedValues(){if((arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0)return this.mergedValuesCache;if(this.getLength()===0)return[];const t=pt(this.get(),s=>s.getValues()),i=[],r=Oe(t[0])&&t[0].length||0;for(let s=0;s<r;s+=1){const o=[];for(let a=0;a<this.getLength();a+=1)o.push(t[a][s]);i.push(o)}return pt(i,this.aggregationFunction)}getMergedValueAtIndex(e,t){const i=this.getMergedValues(t)[e];return Oe(i)?i:this.fallbackValue}updateCache(){this.mergedValuesCache=this.getMergedValues(!1)}}function m1e(n,e,t){b1e(n,e),e.set(n,t)}function b1e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v1e(n,e,t){return n.set(K8(n,e),t),t}function w1e(n,e){return n.get(K8(n,e))}function K8(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var jI=new WeakMap;class q8{constructor(){m1e(this,jI,[])}subscribe(e){return this.addLocalHook("change",e),this._write(w1e(jI,this)),this}unsubscribe(){return this.runLocalHooks("unsubscribe"),this.clearLocalHooks(),this}_write(e){return e.length>0&&this.runLocalHooks("change",e),this}_writeInitialChanges(e){v1e(jI,this,e)}}Gt(q8,zi);function X8(n,e){const t=[];let i=0,r=0;for(;i<n.length&&r<e.length;i++,r++)n[i]!==e[r]&&t.push({op:"replace",index:r,oldValue:n[i],newValue:e[r]});for(;i<e.length;i++)t.push({op:"insert",index:i,oldValue:void 0,newValue:e[i]});for(;r<n.length;r++)t.push({op:"remove",index:r,oldValue:n[r],newValue:void 0});return t}function Av(n,e,t){y1e(n,e),e.set(n,t)}function y1e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qs(n,e){return n.get(Z8(n,e))}function JS(n,e,t){return n.set(Z8(n,e),t),t}function Z8(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var e_=new WeakMap,Pv=new WeakMap,t_=new WeakMap,n_=new WeakMap,i_=new WeakMap;class C1e{constructor(){let{initialIndexValue:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Av(this,e_,new Set),Av(this,Pv,[]),Av(this,t_,[]),Av(this,n_,!1),Av(this,i_,!1),JS(i_,this,e??!1)}createObserver(){const e=new q8;return Qs(e_,this).add(e),e.addLocalHook("unsubscribe",()=>{Qs(e_,this).delete(e)}),e._writeInitialChanges(X8(Qs(Pv,this),Qs(t_,this))),e}emit(e){let t=Qs(t_,this);(!Qs(n_,this)||Qs(Pv,this).length!==e.length)&&(e.length===0?e=new Array(t.length).fill(Qs(i_,this)):JS(Pv,this,new Array(e.length).fill(Qs(i_,this))),Qs(n_,this)||(JS(n_,this,!0),t=Qs(Pv,this)));const i=X8(t,e);Qs(e_,this).forEach(r=>r._write(i)),JS(t_,this,e)}}function Rr(n,e,t){return(e=S1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function S1e(n){var e=_1e(n,"string");return typeof e=="symbol"?e:e+""}function _1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class zI{constructor(){Rr(this,"indexesSequence",new U8),Rr(this,"trimmingMapsCollection",new Y8(e=>e.some(t=>t===!0),!1)),Rr(this,"hidingMapsCollection",new Y8(e=>e.some(t=>t===!0),!1)),Rr(this,"variousMapsCollection",new VI),Rr(this,"hidingChangesObservable",new C1e({initialIndexValue:!1})),Rr(this,"notTrimmedIndexesCache",[]),Rr(this,"notHiddenIndexesCache",[]),Rr(this,"isBatched",!1),Rr(this,"indexesSequenceChanged",!1),Rr(this,"indexesChangeSource",void 0),Rr(this,"trimmedIndexesChanged",!1),Rr(this,"hiddenIndexesChanged",!1),Rr(this,"renderablePhysicalIndexesCache",[]),Rr(this,"fromPhysicalToVisualIndexesCache",new Map),Rr(this,"fromVisualToRenderableIndexesCache",new Map),this.indexesSequence.addLocalHook("change",()=>{this.indexesSequenceChanged=!0,this.updateCache(),this.runLocalHooks("indexesSequenceChange",this.indexesChangeSource),this.runLocalHooks("change",this.indexesSequence,null)}),this.trimmingMapsCollection.addLocalHook("change",e=>{this.trimmedIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",e,this.trimmingMapsCollection)}),this.hidingMapsCollection.addLocalHook("change",e=>{this.hiddenIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",e,this.hidingMapsCollection)}),this.variousMapsCollection.addLocalHook("change",e=>{this.runLocalHooks("change",e,this.variousMapsCollection)})}suspendOperations(){this.isBatched=!0}resumeOperations(){this.isBatched=!1,this.updateCache()}createChangesObserver(e){if(e!=="hiding")throw new Error(`Unsupported index map type "${e}".`);return this.hidingChangesObservable.createObserver()}createAndRegisterIndexMap(e,t,i){return this.registerMap(e,c1e(t,i))}registerMap(e,t){if(this.trimmingMapsCollection.get(e)||this.hidingMapsCollection.get(e)||this.variousMapsCollection.get(e))throw Error(`Map with name "${e}" has been already registered.`);t instanceof Mv?this.trimmingMapsCollection.register(e,t):t instanceof ZS?this.hidingMapsCollection.register(e,t):this.variousMapsCollection.register(e,t);const i=this.getNumberOfIndexes();return i>0&&t.init(i),t}unregisterMap(e){this.trimmingMapsCollection.unregister(e),this.hidingMapsCollection.unregister(e),this.variousMapsCollection.unregister(e)}unregisterAll(){this.trimmingMapsCollection.unregisterAll(),this.hidingMapsCollection.unregisterAll(),this.variousMapsCollection.unregisterAll()}getPhysicalFromVisualIndex(e){const t=this.notTrimmedIndexesCache[e];return Oe(t)?t:null}getPhysicalFromRenderableIndex(e){const t=this.renderablePhysicalIndexesCache[e];return Oe(t)?t:null}getVisualFromPhysicalIndex(e){const t=this.fromPhysicalToVisualIndexesCache.get(e);return Oe(t)?t:null}getVisualFromRenderableIndex(e){return this.getVisualFromPhysicalIndex(this.getPhysicalFromRenderableIndex(e))}getRenderableFromVisualIndex(e){const t=this.fromVisualToRenderableIndexesCache.get(e);return Oe(t)?t:null}getNearestNotHiddenIndex(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.getPhysicalFromVisualIndex(e)===null)return null;if(this.fromVisualToRenderableIndexesCache.has(e))return e;const s=Array.from(this.fromVisualToRenderableIndexesCache.keys());let o=-1;return t>0?o=s.findIndex(a=>a>e):o=s.reverse().findIndex(a=>a<e),o===-1?i?this.getNearestNotHiddenIndex(e,-t,!1):null:s[o]}initToLength(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNumberOfIndexes();this.notTrimmedIndexesCache=[...new Array(e).keys()],this.notHiddenIndexesCache=[...new Array(e).keys()],this.suspendOperations(),this.indexesChangeSource="init",this.indexesSequence.init(e),this.indexesChangeSource=void 0,this.trimmingMapsCollection.initEvery(e),this.resumeOperations(),this.suspendOperations(),this.hidingMapsCollection.initEvery(e),this.variousMapsCollection.initEvery(e),this.resumeOperations(),this.runLocalHooks("init")}fitToLength(e){const t=this.getNumberOfIndexes();if(e<t){const i=[...Array(this.getNumberOfIndexes()-e).keys()].map(r=>r+e);this.removeIndexes(i)}else this.insertIndexes(t,e-t)}getIndexesSequence(){return this.indexesSequence.getValues()}setIndexesSequence(e){this.indexesChangeSource===void 0&&(this.indexesChangeSource="update"),this.indexesSequence.setValues(e),this.indexesChangeSource==="update"&&(this.indexesChangeSource=void 0)}getNotTrimmedIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.notTrimmedIndexesCache:this.getIndexesSequence().filter(i=>this.isTrimmed(i)===!1)}getNotTrimmedIndexesLength(){return this.getNotTrimmedIndexes().length}getNotHiddenIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.notHiddenIndexesCache:this.getIndexesSequence().filter(i=>this.isHidden(i)===!1)}getNotHiddenIndexesLength(){return this.getNotHiddenIndexes().length}getRenderableIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.renderablePhysicalIndexesCache:this.getNotTrimmedIndexes().filter(i=>this.isHidden(i)===!1)}getRenderableIndexesLength(){return this.getRenderableIndexes().length}getNumberOfIndexes(){return this.getIndexesSequence().length}moveIndexes(e,t){typeof e=="number"&&(e=[e]);const i=pt(e,c=>this.getPhysicalFromVisualIndex(c)),r=this.getNotTrimmedIndexesLength(),s=e.length,o=Tv(this.getIndexesSequence(),i),a=o.filter(c=>this.isTrimmed(c)===!1);let l=o.indexOf(a[a.length-1])+1;if(t+s<r){const c=a[t];l=o.indexOf(c)}this.indexesChangeSource="move",this.setIndexesSequence(HI(o,l,i)),this.indexesChangeSource=void 0}isTrimmed(e){return this.trimmingMapsCollection.getMergedValueAtIndex(e)}isHidden(e){return this.hidingMapsCollection.getMergedValueAtIndex(e)}insertIndexes(e,t){const i=this.getNotTrimmedIndexes()[e],r=Oe(i)?i:this.getNumberOfIndexes(),s=this.getIndexesSequence().includes(i)?this.getIndexesSequence().indexOf(i):this.getNumberOfIndexes(),o=pt(new Array(t).fill(r),(a,l)=>a+l);this.suspendOperations(),this.indexesChangeSource="insert",this.indexesSequence.insert(s,o),this.indexesChangeSource=void 0,this.trimmingMapsCollection.insertToEvery(s,o),this.hidingMapsCollection.insertToEvery(s,o),this.variousMapsCollection.insertToEvery(s,o),this.resumeOperations()}removeIndexes(e){this.suspendOperations(),this.indexesChangeSource="remove",this.indexesSequence.remove(e),this.indexesChangeSource=void 0,this.trimmingMapsCollection.removeFromEvery(e),this.hidingMapsCollection.removeFromEvery(e),this.variousMapsCollection.removeFromEvery(e),this.resumeOperations()}updateCache(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=this.indexesSequenceChanged||this.trimmedIndexesChanged||this.hiddenIndexesChanged;(e===!0||this.isBatched===!1&&t===!0)&&(this.trimmingMapsCollection.updateCache(),this.hidingMapsCollection.updateCache(),this.notTrimmedIndexesCache=this.getNotTrimmedIndexes(!1),this.notHiddenIndexesCache=this.getNotHiddenIndexes(!1),this.renderablePhysicalIndexesCache=this.getRenderableIndexes(!1),this.cacheFromPhysicalToVisualIndexes(),this.cacheFromVisualToRenderableIndexes(),this.hiddenIndexesChanged&&this.hidingChangesObservable.emit(this.hidingMapsCollection.getMergedValues()),this.runLocalHooks("cacheUpdated",{indexesSequenceChanged:this.indexesSequenceChanged,trimmedIndexesChanged:this.trimmedIndexesChanged,hiddenIndexesChanged:this.hiddenIndexesChanged}),this.indexesSequenceChanged=!1,this.trimmedIndexesChanged=!1,this.hiddenIndexesChanged=!1)}cacheFromPhysicalToVisualIndexes(){const e=this.getNotTrimmedIndexesLength();this.fromPhysicalToVisualIndexesCache.clear();for(let t=0;t<e;t+=1){const i=this.getPhysicalFromVisualIndex(t);this.fromPhysicalToVisualIndexesCache.set(i,t)}}cacheFromVisualToRenderableIndexes(){const e=this.getRenderableIndexesLength();this.fromVisualToRenderableIndexesCache.clear();for(let t=0;t<e;t+=1){const i=this.getPhysicalFromRenderableIndex(t),r=this.getVisualFromPhysicalIndex(i);this.fromVisualToRenderableIndexesCache.set(r,t)}}}Gt(zI,zi);function R1e(n,e){return ot(e,(t,i)=>{hn(n[i])&&(n[i]=t)}),n}function Q8(n){const t=/^([a-zA-Z]{2})-([a-zA-Z]{2})$/.exec(n);return t?`${t[1].toLowerCase()}-${t[2].toUpperCase()}`:n}function J8(n){Oe(n)&&NP(Ut`Language with code "${n}" was not found. You should register particular language\x20
    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.`)}function E1e(n,e){return Array.isArray(n)&&Number.isInteger(e)?n[e]:n}const{register:x1e,getValues:T1e}=Vo("phraseFormatters");function M1e(n,e){x1e(n,e)}function A1e(){return T1e()}M1e("pluralize",E1e);const e4="ContextMenu:items",it=e4,UI=`${it}.noItems`,GI=`${it}.insertRowAbove`,YI=`${it}.insertRowBelow`,KI=`${it}.insertColumnOnTheLeft`,qI=`${it}.insertColumnOnTheRight`,XI=`${it}.removeRow`,ZI=`${it}.removeColumn`,QI=`${it}.undo`,JI=`${it}.redo`,r_=`${it}.readOnly`,eO=`${it}.clearColumn`,tO=`${it}.copy`,nO=`${it}.copyWithHeaders`,iO=`${it}.copyWithGroupHeaders`,rO=`${it}.copyHeadersOnly`,sO=`${it}.cut`,oO=`${it}.freezeColumn`,aO=`${it}.unfreezeColumn`,lO=`${it}.mergeCells`,cO=`${it}.unmergeCells`,uO=`${it}.addComment`,hO=`${it}.editComment`,dO=`${it}.removeComment`,fO=`${it}.readOnlyComment`,gO=`${it}.align`,s_=`${it}.align.left`,o_=`${it}.align.center`,a_=`${it}.align.right`,l_=`${it}.align.justify`,c_=`${it}.align.top`,u_=`${it}.align.middle`,h_=`${it}.align.bottom`,pO=`${it}.borders`,mO=`${it}.borders.top`,bO=`${it}.borders.right`,vO=`${it}.borders.bottom`,wO=`${it}.borders.left`,yO=`${it}.borders.remove`,CO=`${it}.nestedHeaders.insertChildRow`,SO=`${it}.nestedHeaders.detachFromParent`,_O=`${it}.hideColumn`,RO=`${it}.showColumn`,EO=`${it}.hideRow`,xO=`${it}.showRow`,Er="Filters:",$n=`${Er}conditions`,d_=`${$n}.none`,TO=`${$n}.isEmpty`,MO=`${$n}.isNotEmpty`,AO=`${$n}.isEqualTo`,PO=`${$n}.isNotEqualTo`,IO=`${$n}.beginsWith`,OO=`${$n}.endsWith`,kO=`${$n}.contains`,DO=`${$n}.doesNotContain`,P1e=`${$n}.byValue`,NO=`${$n}.greaterThan`,LO=`${$n}.greaterThanOrEqualTo`,HO=`${$n}.lessThan`,$O=`${$n}.lessThanOrEqualTo`,FO=`${$n}.isBetween`,BO=`${$n}.isNotBetween`,VO=`${$n}.after`,WO=`${$n}.before`,jO=`${$n}.today`,zO=`${$n}.tomorrow`,UO=`${$n}.yesterday`,GO=`${Er}labels.filterByCondition`,YO=`${Er}labels.filterByValue`,KO=`${Er}labels.conjunction`,f_=`${Er}labels.disjunction`,g_=`${Er}values.blankCells`,qO=`${Er}buttons.selectAll`,XO=`${Er}buttons.clear`,ZO=`${Er}buttons.ok`,QO=`${Er}buttons.cancel`,JO=`${Er}buttons.placeholder.search`,ek=`${Er}buttons.placeholder.value`,tk=`${Er}buttons.placeholder.secondValue`,nk="CheckboxRenderer:",ik=`${nk}checked`,rk=`${nk}unchecked`,I1e=Object.freeze(Object.defineProperty({__proto__:null,CHECKBOX_CHECKED:ik,CHECKBOX_RENDERER_NAMESPACE:nk,CHECKBOX_UNCHECKED:rk,CONTEXTMENU_ITEMS_ADD_COMMENT:uO,CONTEXTMENU_ITEMS_ALIGNMENT:gO,CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM:h_,CONTEXTMENU_ITEMS_ALIGNMENT_CENTER:o_,CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY:l_,CONTEXTMENU_ITEMS_ALIGNMENT_LEFT:s_,CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE:u_,CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT:a_,CONTEXTMENU_ITEMS_ALIGNMENT_TOP:c_,CONTEXTMENU_ITEMS_BORDERS:pO,CONTEXTMENU_ITEMS_BORDERS_BOTTOM:vO,CONTEXTMENU_ITEMS_BORDERS_LEFT:wO,CONTEXTMENU_ITEMS_BORDERS_RIGHT:bO,CONTEXTMENU_ITEMS_BORDERS_TOP:mO,CONTEXTMENU_ITEMS_CLEAR_COLUMN:eO,CONTEXTMENU_ITEMS_COPY:tO,CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY:rO,CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS:iO,CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS:nO,CONTEXTMENU_ITEMS_CUT:sO,CONTEXTMENU_ITEMS_EDIT_COMMENT:hO,CONTEXTMENU_ITEMS_FREEZE_COLUMN:oO,CONTEXTMENU_ITEMS_HIDE_COLUMN:_O,CONTEXTMENU_ITEMS_HIDE_ROW:EO,CONTEXTMENU_ITEMS_INSERT_LEFT:KI,CONTEXTMENU_ITEMS_INSERT_RIGHT:qI,CONTEXTMENU_ITEMS_MERGE_CELLS:lO,CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD:SO,CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD:CO,CONTEXTMENU_ITEMS_NO_ITEMS:UI,CONTEXTMENU_ITEMS_READ_ONLY:r_,CONTEXTMENU_ITEMS_READ_ONLY_COMMENT:fO,CONTEXTMENU_ITEMS_REDO:JI,CONTEXTMENU_ITEMS_REMOVE_BORDERS:yO,CONTEXTMENU_ITEMS_REMOVE_COLUMN:ZI,CONTEXTMENU_ITEMS_REMOVE_COMMENT:dO,CONTEXTMENU_ITEMS_REMOVE_ROW:XI,CONTEXTMENU_ITEMS_ROW_ABOVE:GI,CONTEXTMENU_ITEMS_ROW_BELOW:YI,CONTEXTMENU_ITEMS_SHOW_COLUMN:RO,CONTEXTMENU_ITEMS_SHOW_ROW:xO,CONTEXTMENU_ITEMS_UNDO:QI,CONTEXTMENU_ITEMS_UNFREEZE_COLUMN:aO,CONTEXTMENU_ITEMS_UNMERGE_CELLS:cO,CONTEXT_MENU_ITEMS_NAMESPACE:e4,FILTERS_BUTTONS_CANCEL:QO,FILTERS_BUTTONS_CLEAR:XO,FILTERS_BUTTONS_OK:ZO,FILTERS_BUTTONS_PLACEHOLDER_SEARCH:JO,FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE:tk,FILTERS_BUTTONS_PLACEHOLDER_VALUE:ek,FILTERS_BUTTONS_SELECT_ALL:qO,FILTERS_CONDITIONS_AFTER:VO,FILTERS_CONDITIONS_BEFORE:WO,FILTERS_CONDITIONS_BEGINS_WITH:IO,FILTERS_CONDITIONS_BETWEEN:FO,FILTERS_CONDITIONS_BY_VALUE:P1e,FILTERS_CONDITIONS_CONTAINS:kO,FILTERS_CONDITIONS_EMPTY:TO,FILTERS_CONDITIONS_ENDS_WITH:OO,FILTERS_CONDITIONS_EQUAL:AO,FILTERS_CONDITIONS_GREATER_THAN:NO,FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL:LO,FILTERS_CONDITIONS_LESS_THAN:HO,FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL:$O,FILTERS_CONDITIONS_NAMESPACE:$n,FILTERS_CONDITIONS_NONE:d_,FILTERS_CONDITIONS_NOT_BETWEEN:BO,FILTERS_CONDITIONS_NOT_CONTAIN:DO,FILTERS_CONDITIONS_NOT_EMPTY:MO,FILTERS_CONDITIONS_NOT_EQUAL:PO,FILTERS_CONDITIONS_TODAY:jO,FILTERS_CONDITIONS_TOMORROW:zO,FILTERS_CONDITIONS_YESTERDAY:UO,FILTERS_DIVS_FILTER_BY_CONDITION:GO,FILTERS_DIVS_FILTER_BY_VALUE:YO,FILTERS_LABELS_CONJUNCTION:KO,FILTERS_LABELS_DISJUNCTION:f_,FILTERS_NAMESPACE:Er,FILTERS_VALUES_BLANK_CELLS:g_},Symbol.toStringTag,{value:"Module"}));/**
 * @preserve
 * Authors: Handsoncode
 * Last updated: Nov 15, 2017
 *
 * Description: Definition file for English - United States language-country.
 */const t4={languageCode:"en-US",[UI]:"No available options",[GI]:"Insert row above",[YI]:"Insert row below",[KI]:"Insert column left",[qI]:"Insert column right",[XI]:["Remove row","Remove rows"],[ZI]:["Remove column","Remove columns"],[QI]:"Undo",[JI]:"Redo",[r_]:"Read only",[eO]:"Clear column",[gO]:"Alignment",[s_]:"Left",[o_]:"Center",[a_]:"Right",[l_]:"Justify",[c_]:"Top",[u_]:"Middle",[h_]:"Bottom",[oO]:"Freeze column",[aO]:"Unfreeze column",[pO]:"Borders",[mO]:"Top",[bO]:"Right",[vO]:"Bottom",[wO]:"Left",[yO]:"Remove border(s)",[uO]:"Add comment",[hO]:"Edit comment",[dO]:"Delete comment",[fO]:"Read-only comment",[lO]:"Merge cells",[cO]:"Unmerge cells",[tO]:"Copy",[nO]:["Copy with header","Copy with headers"],[iO]:["Copy with group header","Copy with group headers"],[rO]:["Copy header only","Copy headers only"],[sO]:"Cut",[CO]:"Insert child row",[SO]:"Detach from parent",[_O]:["Hide column","Hide columns"],[RO]:["Show column","Show columns"],[EO]:["Hide row","Hide rows"],[xO]:["Show row","Show rows"],[d_]:"None",[TO]:"Is empty",[MO]:"Is not empty",[AO]:"Is equal to",[PO]:"Is not equal to",[IO]:"Begins with",[OO]:"Ends with",[kO]:"Contains",[DO]:"Does not contain",[NO]:"Greater than",[LO]:"Greater than or equal to",[HO]:"Less than",[$O]:"Less than or equal to",[FO]:"Is between",[BO]:"Is not between",[VO]:"After",[WO]:"Before",[jO]:"Today",[zO]:"Tomorrow",[UO]:"Yesterday",[g_]:"Blank cells",[GO]:"Filter by condition",[YO]:"Filter by value",[KO]:"And",[f_]:"Or",[qO]:"Select all",[XO]:"Clear",[ZO]:"OK",[QO]:"Cancel",[JO]:"Search",[ek]:"Value",[tk]:"Second value",[ik]:"Checked",[rk]:"Unchecked"},O1e=I1e,sk=t4.languageCode,{register:k1e,getItem:n4,hasItem:D1e,getValues:N1e}=Vo("languagesDictionaries");i4(t4);function i4(n,e){let t=n,i=e;return st(n)&&(i=n,t=i.languageCode),L1e(t,i),k1e(t,sr(i)),sr(i)}function L1e(n,e){n!==sk&&R1e(e,n4(sk))}function r4(n){return ok(n)?sr(n4(n)):null}function ok(n){return D1e(n)}function H1e(){return N1e()}function s4(n,e,t){const i=r4(n);if(i===null)return null;const r=i[e];if(hn(r))return null;const s=$1e(r,t);return Array.isArray(s)?s[0]:s}function $1e(n,e){let t=n;return V(A1e(),i=>{t=i(n,e)}),t}function F1e(n){let e=Q8(n);return ok(e)||(e=sk,J8(n)),e}function B1e(n,e,t){return(e=V1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function V1e(n){var e=W1e(n,"string");return typeof e=="symbol"?e:e+""}function W1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class hc extends S8{constructor(e,t){super(e,null),B1e(this,"visualCellRange",null),this.visualCellRange=t||null,this.commit()}add(e){return this.visualCellRange===null?this.visualCellRange=this.settings.createCellRange(e):this.visualCellRange.expand(e),this}clear(){return this.visualCellRange=null,super.clear()}trimToVisibleCellsRangeOnly(e){let{from:t,to:i}=e,r=this.getNearestNotHiddenCoords(t,1),s=this.getNearestNotHiddenCoords(i,-1);return r===null||s===null?null:((r.row>s.row||r.col>s.col)&&(r=t,s=i),this.settings.createCellRange(r,r,s))}getNearestNotHiddenCoords(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t;const r=this.getNearestNotHiddenIndex(this.settings.rowIndexMapper,e.row,t);if(r===null)return null;const s=this.getNearestNotHiddenIndex(this.settings.columnIndexMapper,e.col,i);return s===null?null:this.settings.createCellCoords(r,s)}getNearestNotHiddenIndex(e,t,i){return t<0?t:e.getNearestNotHiddenIndex(t,i)}commit(){if(this.visualCellRange===null)return this;const e=this.trimToVisibleCellsRangeOnly(this.visualCellRange);return e===null?this.cellRange=null:this.cellRange=this.createRenderableCellRange(e.from,e.to),this}syncWith(e){const t=e.from.clone().normalize(),i=e.getVerticalDirection()==="N-S"?1:-1,r=e.getHorizontalDirection()==="W-E"?1:-1,s=this.settings.visualToRenderableCoords(this.visualCellRange.highlight);let o=null;if((s===null||s.col===null||s.row===null)&&(o=this.getNearestNotHiddenCoords(t,i,r)),o!==null&&e.overlaps(o)){const a=e.highlight.clone();if(a.row>=0&&(a.row=o.row),a.col>=0&&(a.col=o.col),this.cellRange===null){const l=this.settings.visualToRenderableCoords(a);this.cellRange=this.settings.createCellRange(l)}e.setHighlight(a)}return this.settings.selectionType==="focus"&&s!==null&&o===null&&e.setHighlight(this.visualCellRange.highlight),this}getCorners(){const{from:e,to:t}=this.cellRange;return[Math.min(e.row,t.row),Math.min(e.col,t.col),Math.max(e.row,t.row),Math.max(e.col,t.col)]}getVisualCorners(){const e=this.settings.renderableToVisualCoords(this.cellRange.getTopStartCorner()),t=this.settings.renderableToVisualCoords(this.cellRange.getBottomEndCorner());return[e.row,e.col,t.row,t.col]}createRenderableCellRange(e,t){const i=this.settings.visualToRenderableCoords(e),r=this.settings.visualToRenderableCoords(t);return i.row===null||i.col===null||r.row===null||r.col===null?null:this.settings.createCellRange(i,i,r)}}function ak(n){let{activeHeaderClassName:e,...t}=n;return new hc({className:e,...t,selectionType:_8})}function j1e(n){let{areaCornerVisible:e,...t}=n;return new hc({className:"area",createLayers:!0,border:{width:1,color:"#4b89ff",cornerVisible:e},...t,selectionType:mI})}function z1e(n){let{...e}=n;return new hc({className:"highlight",...e,selectionType:mI})}function U1e(n){let{columnClassName:e,...t}=n;return new hc({className:e,...t,selectionType:pRe})}function G1e(n){let{cellCornerVisible:e,...t}=n;return new hc({className:"current",headerAttributes:[uP()],border:{width:2,color:"#4b89ff",cornerVisible:e},...t,selectionType:bI})}function Y1e(n){let{border:e,visualCellRange:t,...i}=n;return new hc({...e,...i,selectionType:mRe},t)}function K1e(n){let{...e}=n;return new hc({className:"fill",border:{width:1,color:"#ff0000"},...e,selectionType:fRe})}function o4(n){let{headerClassName:e,...t}=n;return new hc({className:e,...t,selectionType:pI})}function q1e(n){let{rowClassName:e,...t}=n;return new hc({className:e,...t,selectionType:gRe})}function X1e(n,e){Z1e(n,e),e.add(n)}function Z1e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zr(n,e,t){return(e=Q1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Q1e(n){var e=J1e(n,"string");return typeof e=="symbol"?e:e+""}function J1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function dc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var za=new WeakSet;class eEe{constructor(e){X1e(this,za),zr(this,"options",void 0),zr(this,"layerLevel",0),zr(this,"focus",void 0),zr(this,"fill",void 0),zr(this,"layeredAreas",new Map),zr(this,"areas",new Map),zr(this,"rowHeaders",new Map),zr(this,"columnHeaders",new Map),zr(this,"activeRowHeaders",new Map),zr(this,"activeColumnHeaders",new Map),zr(this,"activeCornerHeaders",new Map),zr(this,"rowHighlights",new Map),zr(this,"columnHighlights",new Map),zr(this,"customSelections",[]),this.options=e,this.focus=G1e(e),this.fill=K1e(e)}isEnabledFor(e,t){let i=e;e===bI&&(i="current");let r=this.options.disabledCellSelection(t.row,t.col);return typeof r=="string"&&(r=[r]),r===!1||Array.isArray(r)&&!r.includes(i)}useLayerLevel(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.layerLevel=e,this}getFocus(){return this.focus}getFill(){return this.fill}createLayeredArea(){return dc(za,this,fc).call(this,this.layeredAreas,j1e)}getLayeredAreas(){return[...this.layeredAreas.values()]}createArea(){return dc(za,this,fc).call(this,this.areas,z1e)}getAreas(){return[...this.areas.values()]}createRowHeader(){return dc(za,this,fc).call(this,this.rowHeaders,o4)}getRowHeaders(){return[...this.rowHeaders.values()]}createColumnHeader(){return dc(za,this,fc).call(this,this.columnHeaders,o4)}getColumnHeaders(){return[...this.columnHeaders.values()]}createActiveRowHeader(){return dc(za,this,fc).call(this,this.activeRowHeaders,ak)}getActiveRowHeaders(){return[...this.activeRowHeaders.values()]}createActiveColumnHeader(){return dc(za,this,fc).call(this,this.activeColumnHeaders,ak)}getActiveColumnHeaders(){return[...this.activeColumnHeaders.values()]}createActiveCornerHeader(){return dc(za,this,fc).call(this,this.activeCornerHeaders,ak)}getActiveCornerHeaders(){return[...this.activeCornerHeaders.values()]}createRowHighlight(){return dc(za,this,fc).call(this,this.rowHighlights,q1e)}getRowHighlights(){return[...this.rowHighlights.values()]}createColumnHighlight(){return dc(za,this,fc).call(this,this.columnHighlights,U1e)}getColumnHighlights(){return[...this.columnHighlights.values()]}getCustomSelections(){return[...this.customSelections.values()]}addCustomSelection(e){this.customSelections.push(Y1e({...this.options,...e}))}clear(){this.focus.clear(),this.fill.clear(),V(this.areas.values(),e=>void e.clear()),V(this.layeredAreas.values(),e=>void e.clear()),V(this.rowHeaders.values(),e=>void e.clear()),V(this.columnHeaders.values(),e=>void e.clear()),V(this.activeRowHeaders.values(),e=>void e.clear()),V(this.activeColumnHeaders.values(),e=>void e.clear()),V(this.activeCornerHeaders.values(),e=>void e.clear()),V(this.rowHighlights.values(),e=>void e.clear()),V(this.columnHighlights.values(),e=>void e.clear())}[Symbol.iterator](){return[this.focus,this.fill,...this.areas.values(),...this.layeredAreas.values(),...this.rowHeaders.values(),...this.columnHeaders.values(),...this.activeRowHeaders.values(),...this.activeColumnHeaders.values(),...this.activeCornerHeaders.values(),...this.rowHighlights.values(),...this.columnHighlights.values(),...this.customSelections][Symbol.iterator]()}}function fc(n,e){const t=this.layerLevel;if(n.has(t))return n.get(t);const i=e({layerLevel:t,...this.options});return n.set(t,i),i}function a4(n,e,t){return(e=tEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tEe(n){var e=nEe(n,"string");return typeof e=="symbol"?e:e+""}function nEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class iEe{constructor(e){a4(this,"ranges",[]),a4(this,"createCellRange",void 0),this.createCellRange=e}isEmpty(){return this.size()===0}set(e){return this.clear(),this.ranges.push(this.createCellRange(e)),this}add(e){return this.ranges.push(this.createCellRange(e)),this}pop(){return this.ranges.pop(),this}current(){return this.peekByIndex(this.size()-1)}previous(){return this.peekByIndex(this.size()-2)}includes(e){return this.ranges.some(t=>t.includes(e))}clear(){return this.ranges.length=0,this}size(){return this.ranges.length}peekByIndex(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t;return e>=0&&e<this.size()&&(t=this.ranges[e]),t}[Symbol.iterator](){return this.ranges[Symbol.iterator]()}}function rEe(n,e){l4(n,e),e.add(n)}function lk(n,e,t){l4(n,e),e.set(n,t)}function l4(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pt(n,e){return n.get(pi(n,e))}function p_(n,e,t){return n.set(pi(n,e),t),t}function pi(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var m_=new WeakMap,vn=new WeakMap,Yo=new WeakMap,Ci=new WeakSet;class ck{constructor(e,t){rEe(this,Ci),lk(this,m_,void 0),lk(this,vn,void 0),lk(this,Yo,{x:0,y:0}),p_(m_,this,e),p_(vn,this,t)}transformStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=Pt(vn,this).createCellCoords(e,t);let s=Pt(m_,this).current().highlight;const o=Pt(vn,this).visualToRenderableCoords(s);let a=0,l=0;if(this.runLocalHooks("beforeTransformStart",r),o.row!==null&&o.col!==null){const{width:c,height:u}=pi(Ci,this,u4).call(this),{row:h,col:d}=pi(Ci,this,h4).call(this,s),f=Pt(vn,this).fixedRowsBottom(),g=Pt(vn,this).minSpareRows(),p=Pt(vn,this).minSpareCols(),m=Pt(vn,this).autoWrapRow(),v=Pt(vn,this).autoWrapCol(),y=Pt(vn,this).createCellCoords(h+r.row,d+r.col);if(y.row>=u){const R=zs(i&&g>0&&f===0),E=y.col+1,x=Pt(vn,this).createCellCoords(y.row-u,E>=c?E-c:E);this.runLocalHooks("beforeColumnWrap",R,pi(Ci,this,Yg).call(this,x),E>=c),R.value?this.runLocalHooks("insertRowRequire",Pt(vn,this).countRenderableRows()):v&&y.assign(x)}else if(y.row<0){const R=zs(v),E=y.col-1,x=Pt(vn,this).createCellCoords(u+y.row,E<0?c+E:E);this.runLocalHooks("beforeColumnWrap",R,pi(Ci,this,Yg).call(this,x),E<0),v&&y.assign(x)}if(y.col>=c){const R=zs(i&&p>0),E=y.row+1,x=Pt(vn,this).createCellCoords(E>=u?E-u:E,y.col-c);this.runLocalHooks("beforeRowWrap",R,pi(Ci,this,Yg).call(this,x),E>=u),R.value?this.runLocalHooks("insertColRequire",Pt(vn,this).countRenderableColumns()):m&&y.assign(x)}else if(y.col<0){const R=zs(m),E=y.row-1,x=Pt(vn,this).createCellCoords(E<0?u+E:E,c+y.col);this.runLocalHooks("beforeRowWrap",R,pi(Ci,this,Yg).call(this,x),E<0),m&&y.assign(x)}const{rowDir:w,colDir:_}=pi(Ci,this,c4).call(this,y);a=w,l=_,s=pi(Ci,this,Yg).call(this,y)}return this.runLocalHooks("afterTransformStart",s,a,l),s}transformEnd(e,t){const i=Pt(vn,this).createCellCoords(e,t),r=Pt(m_,this).current(),s=Pt(vn,this).visualToRenderableCoords(r.highlight),o=pi(Ci,this,uk).call(this,r.to.row,r.from.row),a=pi(Ci,this,hk).call(this,r.to.col,r.from.col),l=r.to.clone();let c=0,u=0;if(this.runLocalHooks("beforeTransformEnd",i),s.row!==null&&s.col!==null&&o!==null&&a!==null){const{row:h,col:d}=pi(Ci,this,h4).call(this,r.highlight),f=Pt(vn,this).createCellCoords(o+i.row,a+i.col),g=r.getTopStartCorner(),p=r.getTopEndCorner(),m=r.getBottomEndCorner();if(i.col<0&&a>=d&&f.col<d){const _=f.col-d;f.col=pi(Ci,this,hk).call(this,g.col,p.col)+_}else if(i.col>0&&a<=d&&f.col>d){const _=pi(Ci,this,hk).call(this,p.col,g.col),R=Math.max(f.col-_,1);f.col=_+R}if(i.row<0&&o>=h&&f.row<h){const _=f.row-h;f.row=pi(Ci,this,uk).call(this,g.row,m.row)+_}else if(i.row>0&&o<=h&&f.row>h){const _=pi(Ci,this,uk).call(this,m.row,g.row),R=Math.max(f.row-_,1);f.row=_+R}const{rowDir:v,colDir:y}=pi(Ci,this,c4).call(this,f);c=v,u=y;const w=pi(Ci,this,Yg).call(this,f);i.row===0&&i.col!==0?l.col=w.col:i.row!==0&&i.col===0?l.row=w.row:(l.row=w.row,l.col=w.col)}return this.runLocalHooks("afterTransformEnd",l,c,u),l}setOffsetSize(e){let{x:t,y:i}=e;p_(Yo,this,{x:t,y:i})}resetOffsetSize(){p_(Yo,this,{x:0,y:0})}}function c4(n){const{width:e,height:t}=pi(Ci,this,u4).call(this);let i=0,r=0;return n.row<0?(i=-1,n.row=0):n.row>0&&n.row>=t&&(i=1,n.row=t-1),n.col<0?(r=-1,n.col=0):n.col>0&&n.col>=e&&(r=1,n.col=e-1),{rowDir:i,colDir:r}}function u4(){return{width:Pt(Yo,this).x+Pt(vn,this).countRenderableColumns(),height:Pt(Yo,this).y+Pt(vn,this).countRenderableRows()}}function uk(n,e){const t=Pt(vn,this).findFirstNonHiddenRenderableRow(n,e);return t===null?null:Pt(Yo,this).y+t}function hk(n,e){const t=Pt(vn,this).findFirstNonHiddenRenderableColumn(n,e);return t===null?null:Pt(Yo,this).x+t}function h4(n){const{row:e,col:t}=Pt(vn,this).visualToRenderableCoords(n);if(e===null||t===null)throw new Error("Renderable coords are not visible.");return Pt(vn,this).createCellCoords(Pt(Yo,this).y+e,Pt(Yo,this).x+t)}function Yg(n){const e=n.clone();return e.col=n.col-Pt(Yo,this).x,e.row=n.row-Pt(Yo,this).y,Pt(vn,this).renderableToVisualCoords(e)}Gt(ck,zi);const b_=0,v_=1,d4=2,dk=3,sEe=[dk,d4],oEe=[["number"],["number","string"],["number","undefined"],["number","string","undefined"]],fk=Symbol("root"),f4=Symbol("child");function Kg(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fk;if(e!==fk&&e!==f4)throw new Error("The second argument is used internally only and cannot be overwritten.");const t=Array.isArray(n),i=e===fk;let r=b_;if(t){const s=n[0];n.length===0?r=v_:i&&s instanceof gv?r=dk:i&&Array.isArray(s)?r=Kg(s,f4):n.length>=2&&n.length<=4&&!n.some((a,l)=>!oEe[l].includes(typeof a))&&(r=d4)}return r}function Iv(n){let{createCellCoords:e,createCellRange:t,keepDirection:i=!1,propToCol:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!sEe.includes(n))throw new Error("Unsupported selection ranges schema type was provided.");return function(s){const o=n===dk;let a=o?s.from.row:s[0],l=o?s.from.col:s[1],c=o?s.to.row:s[2],u=o?s.to.col:s[3];if(typeof r=="function"&&(typeof l=="string"&&(l=r(l)),typeof u=="string"&&(u=r(u))),hn(c)&&(c=a),hn(u)&&(u=l),!i){const f=a,g=l,p=c,m=u;a=Math.min(f,p),l=Math.min(g,m),c=Math.max(f,p),u=Math.max(g,m)}const h=e(a,l),d=e(c,u);return t(h,h,d)}}function aEe(n){const e=Kg(n.getSelected());if(e===b_||e===v_)return[];const t=Iv(e,{createCellCoords:n._createCellCoords.bind(n),createCellRange:n._createCellRange.bind(n)}),i=new Set;V(n.getSelected(),o=>{const{from:a,to:l}=t(o),c=Math.max(a.col,0),u=l.col-c+1;V(Array.from(new Array(u),(h,d)=>c+d),h=>{i.has(h)||i.add(h)})});const r=Array.from(i).sort((o,a)=>o-a);return si(r,(o,a,l,c)=>(l!==0&&a===c[l-1]+1?o[o.length-1][1]+=1:o.push([a,1]),o),[])}function lEe(n){const e=Kg(n.getSelected());if(e===b_||e===v_)return[];const t=Iv(e,{createCellCoords:n._createCellCoords.bind(n),createCellRange:n._createCellRange.bind(n)}),i=new Set;V(n.getSelected(),o=>{const{from:a,to:l}=t(o),c=Math.max(a.row,0),u=l.row-c+1;V(Array.from(new Array(u),(h,d)=>c+d),h=>{i.has(h)||i.add(h)})});const r=Array.from(i).sort((o,a)=>o-a);return si(r,(o,a,l,c)=>(l!==0&&a===c[l-1]+1?o[o.length-1][1]+=1:o.push([a,1]),o),[])}function qg(n,e,t){cEe(n,e),e.set(n,t)}function cEe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pd(n,e,t){return(e=uEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uEe(n){var e=hEe(n,"string");return typeof e=="symbol"?e:e+""}function hEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _n(n,e){return n.get(g4(n,e))}function Ua(n,e,t){return n.set(g4(n,e),t),t}function g4(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var cr=new WeakMap,Id=new WeakMap,w_=new WeakMap,Ov=new WeakMap,y_=new WeakMap,kv=new WeakMap;class p4{constructor(e,t){var i=this;Pd(this,"settings",void 0),Pd(this,"tableProps",void 0),Pd(this,"inProgress",!1),Pd(this,"selectedRange",new iEe((r,s,o)=>this.tableProps.createCellRange(r,s,o))),Pd(this,"highlight",void 0),qg(this,cr,void 0),qg(this,Id,void 0),Pd(this,"selectedByRowHeader",new Set),Pd(this,"selectedByColumnHeader",new Set),qg(this,w_,!1),qg(this,Ov,!1),qg(this,y_,"unknown"),qg(this,kv,-1),this.settings=e,this.tableProps=t,this.highlight=new eEe({headerClassName:e.currentHeaderClassName,activeHeaderClassName:e.activeHeaderClassName,rowClassName:e.currentRowClassName,columnClassName:e.currentColClassName,cellAttributes:[uP()],rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,disabledCellSelection:(r,s)=>this.tableProps.isDisabledCellSelection(r,s),cellCornerVisible:function(){return i.isCellCornerVisible(...arguments)},areaCornerVisible:function(){return i.isAreaCornerVisible(...arguments)},visualToRenderableCoords:r=>this.tableProps.visualToRenderableCoords(r),renderableToVisualCoords:r=>this.tableProps.renderableToVisualCoords(r),createCellCoords:(r,s)=>this.tableProps.createCellCoords(r,s),createCellRange:(r,s,o)=>this.tableProps.createCellRange(r,s,o)}),Ua(cr,this,new ck(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>this.tableProps.countRenderableRows(),countRenderableColumns:()=>this.tableProps.countRenderableColumns(),visualToRenderableCoords:r=>this.tableProps.visualToRenderableCoords(r),renderableToVisualCoords:r=>this.tableProps.renderableToVisualCoords(r),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(r,s)=>this.tableProps.createCellCoords(r,s),fixedRowsBottom:()=>e.fixedRowsBottom,minSpareRows:()=>e.minSpareRows,minSpareCols:()=>e.minSpareCols,autoWrapRow:()=>e.autoWrapRow,autoWrapCol:()=>e.autoWrapCol})),Ua(Id,this,new ck(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>{const r=this.selectedRange.current();return this.tableProps.countRenderableRowsInRange(0,r.getOuterBottomEndCorner().row)},countRenderableColumns:()=>{const r=this.selectedRange.current();return this.tableProps.countRenderableColumnsInRange(0,r.getOuterBottomEndCorner().col)},visualToRenderableCoords:r=>this.tableProps.visualToRenderableCoords(r),renderableToVisualCoords:r=>this.tableProps.renderableToVisualCoords(r),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(r,s)=>this.tableProps.createCellCoords(r,s),fixedRowsBottom:()=>0,minSpareRows:()=>0,minSpareCols:()=>0,autoWrapRow:()=>!0,autoWrapCol:()=>!0})),_n(cr,this).addLocalHook("beforeTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformStart",...s)}),_n(cr,this).addLocalHook("afterTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("afterModifyTransformStart",...s)}),_n(cr,this).addLocalHook("beforeTransformEnd",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformEnd",...s)}),_n(cr,this).addLocalHook("afterTransformEnd",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("afterModifyTransformEnd",...s)}),_n(cr,this).addLocalHook("insertRowRequire",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("insertRowRequire",...s)}),_n(cr,this).addLocalHook("insertColRequire",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("insertColRequire",...s)}),_n(cr,this).addLocalHook("beforeRowWrap",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeRowWrap",...s)}),_n(cr,this).addLocalHook("beforeColumnWrap",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeColumnWrap",...s)}),_n(Id,this).addLocalHook("beforeTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformFocus",...s)}),_n(Id,this).addLocalHook("afterTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("afterModifyTransformFocus",...s)})}getSelectedRange(){return this.selectedRange}markSource(e){Ua(y_,this,e)}markEndSource(){Ua(y_,this,"unknown")}getSelectionSource(){return _n(y_,this)}setExpectedLayers(e){Ua(kv,this,e)}begin(){this.inProgress=!0}finish(){this.runLocalHooks("afterSelectionFinished",Array.from(this.selectedRange)),this.inProgress=!1,Ua(kv,this,-1)}isInProgress(){return this.inProgress}setRangeStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e;const s=this.settings.selectionMode==="multiple",o=hn(t)?this.tableProps.getShortcutManager().isCtrlPressed():t,a=e.clone();Ua(w_,this,!1),this.runLocalHooks(`beforeSetRangeStart${i?"Only":""}`,a),(!s||s&&!o&&hn(t))&&this.selectedRange.clear(),this.selectedRange.add(a).current().setHighlight(r.clone()),this.getLayerLevel()===0&&(this.selectedByRowHeader.clear(),this.selectedByColumnHeader.clear()),i||this.setRangeEnd(e)}setRangeStartOnly(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;this.setRangeStart(e,t,!0,i)}setRangeEnd(e){if(this.selectedRange.isEmpty())return;const t=e.clone(),i=this.tableProps.countRows(),r=this.tableProps.countCols(),s=this.selectedRange.current().clone().setTo(e).isSingleHeader();if((i>0||r>0)&&(i===0&&t.col<0&&!s||r===0&&t.row<0&&!s))return;this.runLocalHooks("beforeSetRangeEnd",t),this.begin();const o=this.selectedRange.current();if(this.settings.navigableHeaders||o.highlight.normalize(),this.settings.selectionMode==="single")o.setFrom(o.highlight),o.setTo(o.highlight);else{const l=o.getHorizontalDirection(),c=o.getVerticalDirection(),u=this.isMultiple();o.setTo(t),u&&(l!==o.getHorizontalDirection()||o.getWidth()===1&&!o.includes(o.highlight))&&o.from.assign({col:o.highlight.col}),u&&(c!==o.getVerticalDirection()||o.getHeight()===1&&!o.includes(o.highlight))&&o.from.assign({row:o.highlight.row})}i>0&&r>0&&(!this.settings.navigableHeaders||this.settings.navigableHeaders&&!o.isSingleHeader())&&o.to.normalize(),this.runLocalHooks("beforeHighlightSet"),this.setRangeFocus(this.selectedRange.current().highlight),this.applyAndCommit();const a=_n(kv,this)===-1||this.selectedRange.size()===_n(kv,this);this.runLocalHooks("afterSetRangeEnd",e,a)}applyAndCommit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectedRange.current(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLayerLevel();const i=this.tableProps.countRows(),r=this.tableProps.countCols();t<this.highlight.layerLevel&&(V(this.highlight.getAreas(),g=>void g.clear()),V(this.highlight.getLayeredAreas(),g=>void g.clear()),V(this.highlight.getRowHeaders(),g=>void g.clear()),V(this.highlight.getColumnHeaders(),g=>void g.clear()),V(this.highlight.getActiveRowHeaders(),g=>void g.clear()),V(this.highlight.getActiveColumnHeaders(),g=>void g.clear()),V(this.highlight.getActiveCornerHeaders(),g=>void g.clear()),V(this.highlight.getRowHighlights(),g=>void g.clear()),V(this.highlight.getColumnHighlights(),g=>void g.clear())),this.highlight.useLayerLevel(t);const s=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),l=this.highlight.createColumnHeader(),c=this.highlight.createActiveRowHeader(),u=this.highlight.createActiveColumnHeader(),h=this.highlight.createActiveCornerHeader(),d=this.highlight.createRowHighlight(),f=this.highlight.createColumnHighlight();if(s.clear(),o.clear(),a.clear(),l.clear(),c.clear(),u.clear(),h.clear(),d.clear(),f.clear(),this.highlight.isEnabledFor(mI,e.highlight)&&(this.isMultiple()||t>=1)&&(s.add(e.from).add(e.to).commit(),o.add(e.from).add(e.to).commit(),t===1)){const g=this.selectedRange.previous();this.highlight.useLayerLevel(t-1),this.highlight.createArea().add(g.from).commit().syncWith(g),this.highlight.createLayeredArea().add(g.from).commit().syncWith(g),this.highlight.useLayerLevel(t)}if(this.highlight.isEnabledFor(pI,e.highlight)){if(!e.isSingleHeader()){const m=this.tableProps.createCellCoords(Math.max(e.from.row,0),-1),v=this.tableProps.createCellCoords(e.to.row,-1),y=this.tableProps.createCellCoords(-1,Math.max(e.from.col,0)),w=this.tableProps.createCellCoords(-1,e.to.col);this.settings.selectionMode==="single"?(a.add(m).commit(),l.add(y).commit(),d.add(m).commit(),f.add(y).commit()):(a.add(m).add(v).commit(),l.add(y).add(w).commit(),d.add(m).add(v).commit(),f.add(y).add(w).commit())}const g=!_n(Ov,this)&&this.isEntireRowSelected()&&(r>0&&r===e.getWidth()||r===0&&this.isSelectedByRowHeader()),p=!_n(Ov,this)&&this.isEntireColumnSelected()&&(i>0&&i===e.getHeight()||i===0&&this.isSelectedByColumnHeader());g&&c.add(this.tableProps.createCellCoords(Math.max(e.from.row,0),Math.min(-this.tableProps.countRowHeaders(),-1))).add(this.tableProps.createCellCoords(Math.max(e.to.row,0),-1)).commit(),p&&u.add(this.tableProps.createCellCoords(Math.min(-this.tableProps.countColHeaders(),-1),Math.max(e.from.col,0))).add(this.tableProps.createCellCoords(-1,Math.max(e.to.col,0))).commit(),g&&p&&h.add(this.tableProps.createCellCoords(-this.tableProps.countColHeaders(),-this.tableProps.countRowHeaders())).add(this.tableProps.createCellCoords(-1,-1)).commit()}}setRangeFocus(e){if(this.selectedRange.isEmpty())return;const t=this.selectedRange.current();this.inProgress||this.runLocalHooks("beforeSetFocus",e);const i=this.highlight.getFocus();i.clear(),t.setHighlight(e),this.inProgress||this.runLocalHooks("beforeHighlightSet"),this.highlight.isEnabledFor(bI,t.highlight)&&i.add(t.highlight).commit().syncWith(t),this.inProgress||(Ua(w_,this,!0),this.runLocalHooks("afterSetFocus",t.highlight))}transformStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.settings.navigableHeaders?_n(cr,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):_n(cr,this).resetOffsetSize(),this.setRangeStart(_n(cr,this).transformStart(e,t,i))}transformEnd(e,t){this.settings.navigableHeaders?_n(cr,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):_n(cr,this).resetOffsetSize(),this.setRangeEnd(_n(cr,this).transformEnd(e,t))}transformFocus(e,t){const i=this.selectedRange.current(),{row:r,col:s}=i.getOuterTopStartCorner(),o=this.tableProps.countRenderableColumnsInRange(0,s-1),a=this.tableProps.countRenderableRowsInRange(0,r-1);i.highlight.isHeader()?_n(Id,this).setOffsetSize({x:s<0?Math.abs(s):-o,y:r<0?Math.abs(r):-a}):_n(Id,this).setOffsetSize({x:s<0?0:-o,y:r<0?0:-a});const l=_n(Id,this).transformStart(e,t);this.setRangeFocus(l.normalize())}shiftRows(e,t){if(!this.isSelected())return;const i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByColumnHeader()||i.getOuterTopStartCorner().row>=e){const{from:r,to:s,highlight:o}=i,a=this.tableProps.countRows(),l=this.isSelectedByRowHeader(),c=this.isSelectedByColumnHeader(),u=c?-1:0,h=c?0:t;this.getSelectedRange().pop();const d=this.tableProps.createCellCoords(Kt(r.row+h,u,a-1),r.col),f=this.tableProps.createCellCoords(Kt(s.row+t,u,a-1),s.col);this.markSource("shift"),o.row>=e?this.setRangeStartOnly(d,!0,this.tableProps.createCellCoords(Kt(o.row+t,0,a-1),o.col)):this.setRangeStartOnly(d,!0),l&&this.selectedByRowHeader.add(this.getLayerLevel()),c&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.markEndSource()}}shiftColumns(e,t){if(!this.isSelected())return;const i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByRowHeader()||i.getOuterTopStartCorner().col>=e){const{from:r,to:s,highlight:o}=i,a=this.tableProps.countCols(),l=this.isSelectedByRowHeader(),c=this.isSelectedByColumnHeader(),u=l?-1:0,h=l?0:t;this.getSelectedRange().pop();const d=this.tableProps.createCellCoords(r.row,Kt(r.col+h,u,a-1)),f=this.tableProps.createCellCoords(s.row,Kt(s.col+t,u,a-1));this.markSource("shift"),o.col>=e?this.setRangeStartOnly(d,!0,this.tableProps.createCellCoords(o.row,Kt(o.col+t,0,a-1))):this.setRangeStartOnly(d,!0),l&&this.selectedByRowHeader.add(this.getLayerLevel()),c&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.markEndSource()}}getLayerLevel(){return this.selectedRange.size()-1}isSelected(){return!this.selectedRange.isEmpty()}isMultiple(){if(!this.isSelected())return!1;const e=zs(!this.selectedRange.current().isSingle());return this.runLocalHooks("afterIsMultipleSelection",e),e.value}isFocusSelectionChanged(){return this.isSelected()&&_n(w_,this)}isSelectedByRowHeader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner(e)&&(e===-1?this.selectedByRowHeader.size>0:this.selectedByRowHeader.has(e))}isEntireRowSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();const t=r=>{const{col:s}=r.getOuterTopStartCorner(),o=this.tableProps.countRowHeaders(),a=this.tableProps.countCols();return(o>0&&s<0||o===0)&&r.getWidth()===a};if(e===-1)return Array.from(this.selectedRange).some(r=>t(r));const i=this.selectedRange.peekByIndex(e);return i?t(i):!1}isSelectedByColumnHeader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner()&&(e===-1?this.selectedByColumnHeader.size>0:this.selectedByColumnHeader.has(e))}isEntireColumnSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();const t=r=>{const{row:s}=r.getOuterTopStartCorner(),o=this.tableProps.countColHeaders(),a=this.tableProps.countRows();return(o>0&&s<0||o===0)&&r.getHeight()===a};if(e===-1)return Array.from(this.selectedRange).some(r=>t(r));const i=this.selectedRange.peekByIndex(e);return i?t(i):!1}isSelectedByAnyHeader(){return this.isSelectedByRowHeader(-1)||this.isSelectedByColumnHeader(-1)||this.isSelectedByCorner()}isSelectedByCorner(){return this.selectedByColumnHeader.has(this.getLayerLevel())&&this.selectedByRowHeader.has(this.getLayerLevel())}inInSelection(e){return this.selectedRange.includes(e)}isCellCornerVisible(){return this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&!this.isMultiple()}isCellVisible(e){const t=this.tableProps.visualToRenderableCoords(e);return t.row!==null&&t.col!==null}isAreaCornerVisible(e){return Number.isInteger(e)&&e!==this.getLayerLevel()?!1:this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&this.isMultiple()}clear(){this.selectedRange.clear(),this.highlight.clear()}deselect(){this.isSelected()&&(this.inProgress=!1,this.clear(),this.runLocalHooks("afterDeselect"))}selectAll(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{focusPosition:!1,disableHeadersHighlight:!1};const s=this.tableProps.countRows(),o=this.tableProps.countCols(),a=this.tableProps.countRowHeaders(),l=this.tableProps.countColHeaders(),c=i?-l:0,u=t?-a:0;if(c===0&&u===0&&(s===0||o===0))return;let h=(e=this.getSelectedRange().current())===null||e===void 0?void 0:e.highlight;const{focusPosition:d,disableHeadersHighlight:f}=r;Ua(Ov,this,f),d&&Number.isInteger(d==null?void 0:d.row)&&Number.isInteger(d==null?void 0:d.col)&&(h=this.tableProps.createCellCoords(Kt(d.row,c,s-1),Kt(d.col,u,o-1)));const g=this.tableProps.createCellCoords(c,u),p=this.tableProps.createCellCoords(s-1,o-1);this.clear(),this.setRangeStartOnly(g,void 0,h),u<0&&this.selectedByRowHeader.add(this.getLayerLevel()),c<0&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(p),this.finish(),Ua(Ov,this,!1)}selectCells(e){var t=this;const i=Kg(e);if(i===v_)return!1;if(i===b_)throw new Error(Ut`Unsupported format of the selection ranges was passed. To select cells pass\x20
        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd,\x20
        columnEnd/columnPropEnd]]) or as an array of CellRange objects.`);const r=Iv(i,{createCellCoords:function(){return t.tableProps.createCellCoords(...arguments)},createCellRange:function(){return t.tableProps.createCellRange(...arguments)},propToCol:l=>this.tableProps.propToCol(l),keepDirection:!0}),s=this.settings.navigableHeaders,o={countRows:this.tableProps.countRows(),countCols:this.tableProps.countCols(),countRowHeaders:s?this.tableProps.countRowHeaders():0,countColHeaders:s?this.tableProps.countColHeaders():0},a=!e.some(l=>{const c=r(l),u=c.isValid(o);return!(u&&!c.containsHeaders()||u&&c.containsHeaders()&&c.isSingleHeader())});return a&&(this.clear(),this.setExpectedLayers(e.length),V(e,l=>{const{from:c,to:u}=r(l);this.setRangeStartOnly(c.clone(),!1),this.setRangeEnd(u.clone())}),this.finish()),a}selectColumns(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=typeof e=="string"?this.tableProps.propToCol(e):e,s=typeof t=="string"?this.tableProps.propToCol(t):t,o=this.tableProps.countRows(),a=this.tableProps.countCols(),l=this.tableProps.countColHeaders(),c=l===0?0:-l,u=this.tableProps.createCellCoords(c,r),h=this.tableProps.createCellCoords(o-1,s),d=this.tableProps.createCellRange(u,u,h).isValid({countRows:o,countCols:a,countRowHeaders:0,countColHeaders:l});if(d){let f=0,g=0;Number.isInteger(i==null?void 0:i.row)&&Number.isInteger(i==null?void 0:i.col)?(f=Kt(i.row,c,o-1),g=Kt(i.col,Math.min(r,s),Math.max(r,s))):(f=Kt(i,c,o-1),g=r);const p=this.tableProps.createCellCoords(f,g),m=l===0?0:Kt(p.row,c,-1),v=o-1,y=this.tableProps.createCellCoords(m,r),w=this.tableProps.createCellCoords(v,s);this.runLocalHooks("beforeSelectColumns",y,w,p),y.row=m,w.row=v,this.setRangeStartOnly(y,void 0,p),this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(w),this.runLocalHooks("afterSelectColumns",y,w,p),this.finish()}return d}selectRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=this.tableProps.countRows(),s=this.tableProps.countCols(),o=this.tableProps.countRowHeaders(),a=o===0?0:-o,l=this.tableProps.createCellCoords(e,a),c=this.tableProps.createCellCoords(t,s-1),u=this.tableProps.createCellRange(l,l,c).isValid({countRows:r,countCols:s,countRowHeaders:o,countColHeaders:0});if(u){let h=0,d=0;Number.isInteger(i==null?void 0:i.row)&&Number.isInteger(i==null?void 0:i.col)?(h=Kt(i.row,Math.min(e,t),Math.max(e,t)),d=Kt(i.col,a,s-1)):(h=e,d=Kt(i,a,s-1));const f=this.tableProps.createCellCoords(h,d),g=o===0?0:Kt(f.col,a,-1),p=s-1,m=this.tableProps.createCellCoords(e,g),v=this.tableProps.createCellCoords(t,p);this.runLocalHooks("beforeSelectRows",m,v,f),m.col=g,v.col=p,this.setRangeStartOnly(m,void 0,f),this.selectedByRowHeader.add(this.getLayerLevel()),this.setRangeEnd(v),this.runLocalHooks("afterSelectRows",m,v,f),this.finish()}return u}refresh(){if(!this.isSelected())return;const e=this.tableProps.countRows(),t=this.tableProps.countCols();if(e===0||t===0){this.deselect();return}const i=this.selectedRange.peekByIndex(this.selectedRange.size()-1),{from:r,to:s,highlight:o}=i;this.clear(),o.assign({row:Kt(o.row,-1/0,e-1),col:Kt(o.col,-1/0,t-1)}),r.assign({row:Kt(r.row,-1/0,e-1),col:Kt(r.col,-1/0,t-1)}),s.assign({row:Kt(s.row,0,e-1),col:Kt(s.col,0,t-1)}),this.selectedRange.ranges.push(i),this.highlight.getFocus().add(o).commit().syncWith(i),this.applyAndCommit(i)}commit(){if(this.highlight.getCustomSelections().forEach(r=>{r.commit()}),!this.isSelected())return;const t=this.highlight.getFocus(),i=this.getLayerLevel();t.commit().syncWith(this.selectedRange.current());for(let r=0;r<this.selectedRange.size();r+=1){this.highlight.useLayerLevel(r);const s=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),l=this.highlight.createColumnHeader(),c=this.highlight.createActiveRowHeader(),u=this.highlight.createActiveColumnHeader(),h=this.highlight.createActiveCornerHeader(),d=this.highlight.createRowHighlight(),f=this.highlight.createColumnHighlight();s.commit(),o.commit(),a.commit(),l.commit(),c.commit(),u.commit(),h.commit(),d.commit(),f.commit()}this.highlight.useLayerLevel(i)}}Gt(p4,zi);const m4=/^(\r\n|\n\r|\r|\n)/,dEe=/^[^\t\r\n]+/,b4=/^\t/;function fEe(n){const e=[[""]];if(n.length===0)return e;let t=0,i=0,r;for(;n.length>0&&r!==n.length;)if(r=n.length,n.match(b4))n=n.replace(b4,""),t+=1,e[i][t]="";else if(n.match(m4))n=n.replace(m4,""),t=0,i+=1,e[i]=[""];else{let s="";if(n.startsWith('"')){let o=0,a=!0;for(;a;){const l=n.slice(0,1);l==='"'&&(o+=1),s+=l,n=n.slice(1),(n.length===0||n.match(/^[\t\r\n]/)&&o%2===0)&&(a=!1)}s=s.replace(/^"/,"").replace(/"$/,"").replace(/["]*/g,l=>new Array(Math.floor(l.length/2)).fill('"').join(""))}else{const o=n.match(dEe);s=o?o[0]:"",n=n.slice(s.length)}e[i][t]=s}return e}function Dv(n){let e,t,i,r,s="",o;for(e=0,t=n.length;e<t;e+=1){for(r=n[e].length,i=0;i<r;i+=1)i>0&&(s+="	"),o=n[e][i],typeof o=="string"?o.indexOf(`
`)>-1?s+=`"${o.replace(/"/g,'""')}"`:s+=o:o==null?s+="":s+=o;e!==t-1&&(s+=`
`)}return s}function Od(n,e,t){return(e=gEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gEe(n){var e=pEe(n,"string");return typeof e=="symbol"?e:e+""}function pEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Xg{static get DESTINATION_RENDERER(){return 1}static get DESTINATION_CLIPBOARD_GENERATOR(){return 2}constructor(e,t,i){Od(this,"hot",void 0),Od(this,"metaManager",void 0),Od(this,"tableMeta",void 0),Od(this,"dataSource",void 0),Od(this,"duckSchema",void 0),Od(this,"colToPropCache",void 0),Od(this,"propToColCache",void 0),this.hot=e,this.metaManager=i,this.tableMeta=i.getTableMeta(),this.dataSource=t,this.duckSchema=this.createDuckSchema(),this.createMap()}createMap(){const e=this.getSchema();if(typeof e>"u")throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");const t=this.tableMeta.columns;let i;if(this.colToPropCache=[],this.propToColCache=new Map,t){let r=0,s=0,o=!1;if(typeof t=="function"){const a=gS(e);r=a>0?a:this.countFirstRowKeys(),o=!0}else{const a=this.tableMeta.maxCols;r=Math.min(a,t.length)}for(i=0;i<r;i++){const a=o?t(i):t[i];if(st(a)){if(typeof a.data<"u"){const l=o?s:i;this.colToPropCache[l]=a.data,this.propToColCache.set(a.data,l)}s+=1}}}else this.recursiveDuckColumns(e)}countFirstRowKeys(){return DI(this.dataSource)}recursiveDuckColumns(e,t,i){let r=t,s=i,o;return typeof r>"u"&&(r=0,s=""),typeof e=="object"&&!Array.isArray(e)&&ot(e,(a,l)=>{a===null?(o=s+l,this.colToPropCache.push(o),this.propToColCache.set(o,r),r+=1):r=this.recursiveDuckColumns(a,r,`${l}.`)}),r}colToProp(e){if(Number.isInteger(e)===!1)return e;const t=this.hot.toPhysicalColumn(e);return t===null?e:this.colToPropCache&&Oe(this.colToPropCache[t])?this.colToPropCache[t]:t}propToCol(e){const t=this.propToColCache.get(e);if(Oe(t))return this.hot.toVisualColumn(t);const i=this.hot.toVisualColumn(e);return i===null?e:i}getSchema(){const e=this.tableMeta.dataSchema;return e?typeof e=="function"?e():e:this.duckSchema}createDuckSchema(){return this.dataSource&&this.dataSource[0]?kg(this.dataSource[0]):{}}refreshDuckSchema(){this.duckSchema=this.createDuckSchema()}createRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,{source:i,mode:r="above"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.hot.countSourceRows();let o=s,a=0,l=e;if((typeof l!="number"||l>=s)&&(l=s),l<this.hot.countRows()&&(o=this.hot.toPhysicalRow(l)),this.hot.runHooks("beforeCreateRow",l,t,i)===!1||o===null)return{delta:0};const u=this.tableMeta.maxRows,h=this.getSchema().length,d=[];for(;a<t&&s+a<u;){let g=null;this.hot.dataType==="array"?this.tableMeta.dataSchema?g=sr(this.getSchema()):(g=[],He(h-1,()=>g.push(null))):this.hot.dataType==="function"?g=this.tableMeta.dataSchema(l+a):(g={},tv(g,this.getSchema())),d.push(g),a+=1}this.hot.rowIndexMapper.insertIndexes(l,a),r==="below"&&(o=Math.min(o+1,s)),this.spliceData(o,0,d);const f=this.hot.toVisualRow(o);return this.hot.countSourceRows()===d.length&&this.hot.columnIndexMapper.initToLength(this.hot.getInitialColumnCount()),a>0&&(e==null?this.metaManager.createRow(null,a):i!=="auto"&&this.metaManager.createRow(o,t)),this.hot.runHooks("afterCreateRow",f,a,i),this.hot.forceFullRender=!0,{delta:a,startPhysicalIndex:o}}createCol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,{source:i,mode:r="start"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!this.hot.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");const s=this.dataSource,o=this.tableMeta.maxCols,a=this.hot.countSourceCols();let l=e;if((typeof l!="number"||l>=a)&&(l=a),this.hot.runHooks("beforeCreateCol",l,t,i)===!1)return{delta:0};let u=a;l<this.hot.countCols()&&(u=this.hot.toPhysicalColumn(l));const h=this.hot.countSourceRows();let d=this.hot.countCols(),f=0,g=u;r==="end"&&(g=Math.min(g+1,a));const p=g;for(;f<t&&d<o;){if(typeof l!="number"||l>=d)if(h>0)for(let v=0;v<h;v+=1)typeof s[v]>"u"&&(s[v]=[]),s[v].push(null);else s.push([null]);else for(let v=0;v<h;v++)s[v].splice(g,0,null);f+=1,g+=1,d+=1}this.hot.columnIndexMapper.insertIndexes(l,f),f>0&&(e==null?this.metaManager.createColumn(null,f):i!=="auto"&&this.metaManager.createColumn(p,t));const m=this.hot.toVisualColumn(p);return this.hot.runHooks("afterCreateCol",m,f,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),{delta:f,startPhysicalIndex:p}}removeRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,r=Number.isInteger(e)?e:-t;const s=this.visualRowsToPhysical(r,t),o=this.hot.countSourceRows();if(r=(o+r)%o,this.hot.runHooks("beforeRemoveRow",r,s.length,s,i)===!1)return!1;const l=s.length;if(this.filterData(r,l,s),r<this.hot.countRows()){this.hot.rowIndexMapper.removeIndexes(s);const u=Oe(this.tableMeta.columns)||Oe(this.tableMeta.dataSchema);this.hot.rowIndexMapper.getNotTrimmedIndexesLength()===0&&u===!1&&this.hot.columnIndexMapper.setIndexesSequence([])}return s.slice(0).sort((u,h)=>h-u).forEach(u=>{this.metaManager.removeRow(u,1)}),this.hot.runHooks("afterRemoveRow",r,l,s,i),this.hot.forceFullRender=!0,!0}removeCol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;if(this.hot.dataType==="object"||this.tableMeta.columns)throw new Error("cannot remove column with object data source or columns option specified");let r=typeof e!="number"?-t:e;r=(this.hot.countCols()+r)%this.hot.countCols();const s=this.visualColumnsToPhysical(r,t),o=s.slice(0).sort((h,d)=>d-h);if(this.hot.runHooks("beforeRemoveCol",r,t,s,i)===!1)return!1;let l=!0;const c=o.length,u=this.dataSource;for(let h=0;h<c;h++)l&&s[0]!==s[h]-h&&(l=!1);if(l)for(let h=0,d=this.hot.countSourceRows();h<d;h++)u[h].splice(s[0],t),h===0&&this.metaManager.removeColumn(s[0],t);else for(let h=0,d=this.hot.countSourceRows();h<d;h++)for(let f=0;f<c;f++)u[h].splice(o[f],1),h===0&&this.metaManager.removeColumn(o[f],1);return r<this.hot.countCols()&&(this.hot.columnIndexMapper.removeIndexes(s),this.hot.columnIndexMapper.getNotTrimmedIndexesLength()===0&&this.hot.rowIndexMapper.setIndexesSequence([])),this.hot.runHooks("afterRemoveCol",r,t,s,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),!0}spliceCol(e,t,i){const r=this.hot.getDataAtCol(e),s=r.slice(t,t+i),o=r.slice(t+i);for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];JA(l,o);let u=0;for(;u<i;)l.push(null),u+=1;return Sz(l),this.hot.populateFromArray(t,e,l,null,null,"spliceCol"),s}spliceRow(e,t,i){const r=this.hot.getSourceDataAtRow(e),s=r.slice(t,t+i),o=r.slice(t+i);for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];JA(l,o);let u=0;for(;u<i;)l.push(null),u+=1;return this.hot.populateFromArray(e,t,[l],null,null,"spliceRow"),s}spliceData(e,t,i){if(this.hot.runHooks("beforeDataSplice",e,t,i)!==!1){const s=[...this.dataSource.slice(0,e),...i,...this.dataSource.slice(e)];this.dataSource.length=0,s.forEach(o=>this.dataSource.push(o))}}filterData(e,t,i){let r=this.hot.runHooks("filterData",e,t,i);Array.isArray(r)===!1&&(r=this.dataSource.filter((s,o)=>i.indexOf(o)===-1)),this.dataSource.length=0,Array.prototype.push.apply(this.dataSource,r)}get(e,t){const i=this.hot.toPhysicalRow(e);let r=this.dataSource[i];const s=this.hot.runHooks("modifyRowData",i);r=isNaN(s)?s:r;const{dataDotNotation:o}=this.hot.getSettings();let a=null;if(r&&r.hasOwnProperty&&In(r,t))a=r[t];else if(o&&typeof t=="string"&&t.indexOf(".")>-1){let l=r;if(!l)return null;const c=t.split(".");for(let u=0,h=c.length;u<h;u++)if(l=l[c[u]],typeof l>"u")return null;a=l}else typeof t=="function"&&(a=t(this.dataSource.slice(i,i+1)[0]));if(this.hot.hasHook("modifyData")){const l=zs(a);this.hot.runHooks("modifyData",i,this.propToCol(t),l,"get"),l.isTouched()&&(a=l.value)}return a}getCopyable(e,t){return this.hot.getCellMeta(e,this.propToCol(t)).copyable?this.get(e,t):""}set(e,t,i){const r=this.hot.toPhysicalRow(e);let s=i,o=this.dataSource[r];const a=this.hot.runHooks("modifyRowData",r);if(o=isNaN(a)?a:o,this.hot.hasHook("modifyData")){const c=zs(s);this.hot.runHooks("modifyData",r,this.propToCol(t),c,"set"),c.isTouched()&&(s=c.value)}const{dataDotNotation:l}=this.hot.getSettings();if(o&&o.hasOwnProperty&&In(o,t))o[t]=s;else if(l&&typeof t=="string"&&t.indexOf(".")>-1){let c=o,u=0,h;const d=t.split(".");for(u=0,h=d.length-1;u<h;u++)typeof c[d[u]]>"u"&&(c[d[u]]={}),c=c[d[u]];c[d[u]]=s}else typeof t=="function"?t(this.dataSource.slice(r,r+1)[0],s):o[t]=s}visualRowsToPhysical(e,t){const i=this.hot.countSourceRows(),r=[];let s=(i+e)%i,o=t,a;for(;s<i&&o;)a=this.hot.toPhysicalRow(s),r.push(a),o-=1,s+=1;return r}visualColumnsToPhysical(e,t){const i=this.hot.countCols(),r=[];let s=(i+e)%i,o=t;for(;s<i&&o;){const a=this.hot.toPhysicalColumn(s);r.push(a),o-=1,s+=1}return r}clear(){for(let e=0;e<this.hot.countSourceRows();e++)for(let t=0;t<this.hot.countCols();t++)this.set(e,this.colToProp(t),"")}getLength(){const e=this.tableMeta.maxRows;let t;e<0||e===0?t=0:t=e||1/0;const i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength();return Math.min(i,t)}getAll(){const e={row:0,col:0},t={row:Math.max(this.hot.countRows()-1,0),col:Math.max(this.hot.countCols()-1,0)};return e.row-t.row===0&&!this.hot.countSourceRows()?[]:this.getRange(e,t,Xg.DESTINATION_RENDERER)}countCachedColumns(){return this.colToPropCache.length}getRange(e,t,i){const r=[];let s,o,a;const l=this.tableMeta.maxRows,c=this.tableMeta.maxCols;if(l===0||c===0)return[];const u=i===Xg.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get,h=Math.min(Math.max(l-1,0),Math.max(e.row,t.row)),d=Math.min(Math.max(c-1,0),Math.max(e.col,t.col));for(s=Math.min(e.row,t.row);s<=h;s++){a=[];const f=s>=0?this.hot.toPhysicalRow(s):s;for(o=Math.min(e.col,t.col);o<=d&&f!==null;o++)a.push(u.call(this,s,this.colToProp(o)));f!==null&&r.push(a)}return r}getText(e,t){return Dv(this.getRange(e,t,Xg.DESTINATION_RENDERER))}getCopyableText(e,t){return Dv(this.getRange(e,t,Xg.DESTINATION_CLIPBOARD_GENERATOR))}destroy(){this.hot=null,this.metaManager=null,this.dataSource=null,this.duckSchema=null,this.colToPropCache.length=0,this.propToColCache.clear(),this.propToColCache=void 0}}const{register:mEe,getItem:bEe,hasItem:v4,getNames:vEe,getValues:E8e}=Vo("cellTypes");function gk(n){if(!v4(n))throw Error(`You declared cell type "${n}" as a string that is not mapped to a known object.
                 Cell type must be an object or a string mapped to an object registered by
                 "Handsontable.cellTypes.registerCellType" method`);return bEe(n)}function Js(n,e){typeof n!="string"&&(e=n,n=e.CELL_TYPE);const{editor:t,renderer:i,validator:r}=e;t&&Br(n,t),i&&gs(n,i),r&&wd(n,r),mEe(n,e)}function wEe(n,e){var t;return n==="CELL_TYPE"?!1:((t=e._automaticallyAssignedMetaProps)===null||t===void 0?void 0:t.has(n))||!In(e,n)}function C_(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n;const i=typeof e.type=="string"?gk(e.type):e.type;if(n._automaticallyAssignedMetaProps&&ot(e,(s,o)=>void n._automaticallyAssignedMetaProps.delete(o)),!st(i))return;t===n&&!n._automaticallyAssignedMetaProps&&(n._automaticallyAssignedMetaProps=new Set);const r={};ot(i,(s,o)=>{if(wEe(o,t)){var a;r[o]=s,(a=n._automaticallyAssignedMetaProps)===null||a===void 0||a.add(o)}}),oi(n,r)}function yEe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];function t(){}Fo(t,n);for(let i=0;i<e.length;i++)t.prototype[e[i]]=void 0;return t}function S_(n){return Number.isInteger(n)&&n>=0}function __(n,e){if(!n())throw new Error(`Assertion failed: ${e}`)}function R_(n){return n==null}const w4=()=>({_automaticallyAssignedMetaProps:void 0,activeHeaderClassName:"ht__active_highlight",allowEmpty:!0,allowHtml:!1,allowInsertColumn:!0,allowInsertRow:!0,allowInvalid:!0,allowRemoveColumn:!0,allowRemoveRow:!0,ariaTags:!0,autoColumnSize:void 0,autoRowSize:void 0,autoWrapCol:!1,autoWrapRow:!1,bindRowsWithHeaders:void 0,cell:[],cells:void 0,checkedTemplate:void 0,className:void 0,colHeaders:null,collapsibleColumns:void 0,columnHeaderHeight:void 0,columns:void 0,columnSorting:void 0,columnSummary:void 0,colWidths:void 0,commentedCellClassName:"htCommentCell",comments:!1,contextMenu:void 0,copyable:!0,copyPaste:!0,correctFormat:!1,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",currentRowClassName:void 0,customBorders:!1,data:void 0,dataDotNotation:!0,dataSchema:void 0,dateFormat:"DD/MM/YYYY",timeFormat:"h:mm:ss a",datePickerConfig:void 0,defaultDate:void 0,disableVisualSelection:!1,dragToScroll:!0,dropdownMenu:void 0,editor:void 0,enterBeginsEditing:!0,enterMoves:{col:0,row:1},fillHandle:{autoInsertRow:!1},filter:!0,filteringCaseSensitive:!1,filters:void 0,fixedColumnsLeft:0,fixedColumnsStart:0,fixedRowsBottom:0,fixedRowsTop:0,formulas:void 0,fragmentSelection:!1,headerClassName:void 0,height:void 0,hiddenColumns:void 0,hiddenRows:void 0,invalidCellClassName:"htInvalid",imeFastEdit:!1,isEmptyCol(n){let e,t,i;for(e=0,t=this.countRows();e<t;e++)if(i=this.getDataAtCell(e,n),Hn(i)===!1)return!1;return!0},isEmptyRow(n){let e,t,i,r;for(e=0,t=this.countCols();e<t;e++)if(i=this.getDataAtCell(n,e),Hn(i)===!1)return typeof i=="object"?(r=this.getCellMeta(n,e),dS(this.getSchema()[r.prop],i)):!1;return!0},label:void 0,language:"en-US",layoutDirection:"inherit",licenseKey:void 0,locale:"en-US",manualColumnFreeze:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,maxCols:1/0,maxRows:1/0,mergeCells:!1,minCols:0,minRows:0,minSpareCols:0,minSpareRows:0,multiColumnSorting:void 0,navigableHeaders:!1,tabNavigation:!0,nestedHeaders:void 0,nestedRows:void 0,noWordWrapClassName:"htNoWrap",numericFormat:void 0,observeDOMVisibility:!0,outsideClickDeselects:!0,persistentState:void 0,placeholder:void 0,placeholderCellClassName:"htPlaceholder",preventOverflow:!1,preventWheel:!1,readOnly:!1,readOnlyCellClassName:"htDimmed",renderAllRows:!1,renderAllColumns:!1,renderer:void 0,rowHeaders:void 0,rowHeaderWidth:void 0,rowHeights:void 0,search:!1,selectionMode:"multiple",selectOptions:void 0,skipColumnOnPaste:!1,skipRowOnPaste:!1,sortByRelevance:!0,source:void 0,startCols:5,startRows:5,stretchH:"none",strict:void 0,tableClassName:void 0,tabMoves:{row:0,col:1},title:void 0,trimDropdown:!0,trimRows:void 0,trimWhitespace:!0,type:"text",uncheckedTemplate:void 0,undo:void 0,validator:void 0,viewportColumnRenderingOffset:"auto",viewportRowRenderingOffset:"auto",visibleRows:10,width:void 0,wordWrap:!0});function y4(n,e,t){return(e=CEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function CEe(n){var e=SEe(n,"string");return typeof e=="symbol"?e:e+""}function SEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _Ee(){return class{}}class REe{constructor(e){y4(this,"metaCtor",_Ee()),y4(this,"meta",void 0),this.meta=this.metaCtor.prototype,oi(this.meta,w4()),this.meta.instance=e}getMetaConstructor(){return this.metaCtor}getMeta(){return this.meta}updateMeta(e){var t;oi(this.meta,e),C_(this.meta,{...e,type:(t=e.type)!==null&&t!==void 0?t:this.meta.type},e)}}function EEe(n,e,t){return(e=xEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xEe(n){var e=TEe(n,"string");return typeof e=="symbol"?e:e+""}function TEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class MEe{constructor(e){EEe(this,"meta",void 0);const t=e.getMetaConstructor();this.meta=new t}getMeta(){return this.meta}updateMeta(e){oi(this.meta,e),C_(this.meta,e,e)}}function E_(n,e,t){return(e=AEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function AEe(n){var e=PEe(n,"string");return typeof e=="symbol"?e:e+""}function PEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class x_{constructor(e){E_(this,"valueFactory",void 0),E_(this,"data",[]),E_(this,"index",[]),E_(this,"holes",new Set),this.valueFactory=e}obtain(e){__(()=>S_(e),"Expecting an unsigned number.");const t=this._getStorageIndexByKey(e);let i;if(t>=0)i=this.data[t],i===void 0&&(i=this.valueFactory(e),this.data[t]=i);else if(i=this.valueFactory(e),this.holes.size>0){const r=this.holes.values().next().value;this.holes.delete(r),this.data[r]=i,this.index[e]=r}else this.data.push(i),this.index[e]=this.data.length-1;return i}insert(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;__(()=>S_(e)||R_(e),"Expecting an unsigned number or null/undefined argument.");const i=[],r=this.data.length;for(let o=0;o<t;o++)i.push(r+o),this.data.push(void 0);const s=R_(e)?this.index.length:e;this.index=[...this.index.slice(0,s),...i,...this.index.slice(s)]}remove(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;__(()=>S_(e)||R_(e),"Expecting an unsigned number or null/undefined argument.");const i=this.index.splice(R_(e)?this.index.length-t:e,t);for(let r=0;r<i.length;r++){const s=i[r];typeof s=="number"&&this.holes.add(s)}}size(){return this.data.length-this.holes.size}values(){return ic(this.data,(e,t)=>!this.holes.has(t))[Symbol.iterator]()}entries(){const e=[];for(let i=0;i<this.data.length;i++){const r=this._getKeyByStorageIndex(i);r!==-1&&e.push([r,this.data[i]])}let t=0;return{next:()=>{if(t<e.length){const i=e[t];return t+=1,{value:i,done:!1}}return{done:!0}}}}clear(){this.data=[],this.index=[],this.holes.clear()}_getStorageIndexByKey(e){return this.index.length>e?this.index[e]:-1}_getKeyByStorageIndex(e){return this.index.indexOf(e)}[Symbol.iterator](){return this.entries()}}function C4(n,e,t){return(e=IEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IEe(n){var e=OEe(n,"string");return typeof e=="symbol"?e:e+""}function OEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const kEe=["data","width"];class DEe{constructor(e){C4(this,"globalMeta",void 0),C4(this,"metas",new x_(()=>this._createMeta())),this.globalMeta=e,this.metas=new x_(()=>this._createMeta())}updateMeta(e,t){const i=this.getMeta(e);oi(i,t),C_(i,t)}createColumn(e,t){this.metas.insert(e,t)}removeColumn(e,t){this.metas.remove(e,t)}getMeta(e){return this.metas.obtain(e)}getMetaConstructor(e){return this.metas.obtain(e).constructor}clearCache(){this.metas.clear()}_createMeta(){return yEe(this.globalMeta.getMetaConstructor(),kEe).prototype}}function S4(n,e,t){return(e=NEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NEe(n){var e=LEe(n,"string");return typeof e=="symbol"?e:e+""}function LEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class HEe{constructor(e){S4(this,"columnMeta",void 0),S4(this,"metas",new x_(()=>this._createRow())),this.columnMeta=e}updateMeta(e,t,i){const r=this.getMeta(e,t);oi(r,i),C_(r,i)}createRow(e,t){this.metas.insert(e,t)}createColumn(e,t){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).insert(e,t)}removeRow(e,t){this.metas.remove(e,t)}removeColumn(e,t){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).remove(e,t)}getMeta(e,t,i){const r=this.metas.obtain(e).obtain(t);return i===void 0?r:r[i]}setMeta(e,t,i,r){var s;const o=this.metas.obtain(e).obtain(t);(s=o._automaticallyAssignedMetaProps)===null||s===void 0||s.delete(i),o[i]=r}removeMeta(e,t,i){const r=this.metas.obtain(e).obtain(t);delete r[i]}getMetas(){const e=[],t=Array.from(this.metas.values());for(let i=0;i<t.length;i++)Oe(t[i])&&e.push(...t[i].values());return e}getMetasAtRow(e){__(()=>S_(e),"Expecting an unsigned number.");const t=new Map(this.metas);return t.has(e)?Array.from(t.get(e).values()):[]}clearCache(){this.metas.clear()}_createRow(){return new x_(e=>this._createMeta(e))}_createMeta(e){const t=this.columnMeta.getMetaConstructor(e);return new t}}class _4{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];this.hot=e,this.globalMeta=new REe(e),this.tableMeta=new MEe(this.globalMeta),this.columnMeta=new DEe(this.globalMeta),this.cellMeta=new HEe(this.columnMeta),i.forEach(r=>new r(this)),this.globalMeta.updateMeta(t)}getGlobalMeta(){return this.globalMeta.getMeta()}updateGlobalMeta(e){this.globalMeta.updateMeta(e)}getTableMeta(){return this.tableMeta.getMeta()}updateTableMeta(e){this.tableMeta.updateMeta(e)}getColumnMeta(e){return this.columnMeta.getMeta(e)}updateColumnMeta(e,t){this.columnMeta.updateMeta(e,t)}getCellMeta(e,t,i){let{visualRow:r,visualColumn:s}=i;const o=this.cellMeta.getMeta(e,t);return o.visualRow=r,o.visualCol=s,o.row=e,o.col=t,this.runLocalHooks("afterGetCellMeta",o),o}getCellMetaKeyValue(e,t,i){if(typeof i!="string")throw new Error("The passed cell meta object key is not a string");return this.cellMeta.getMeta(e,t,i)}setCellMeta(e,t,i,r){this.cellMeta.setMeta(e,t,i,r)}updateCellMeta(e,t,i){this.cellMeta.updateMeta(e,t,i)}removeCellMeta(e,t,i){this.cellMeta.removeMeta(e,t,i)}getCellsMeta(){return this.cellMeta.getMetas()}getCellsMetaAtRow(e){return this.cellMeta.getMetasAtRow(e)}createRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.createRow(e,t)}removeRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.removeRow(e,t)}createColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.createColumn(e,t),this.columnMeta.createColumn(e,t)}removeColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.removeColumn(e,t),this.columnMeta.removeColumn(e,t)}clearCellsCache(){this.cellMeta.clearCache()}clearCache(){this.cellMeta.clearCache(),this.columnMeta.clearCache()}}Gt(_4,zi);function R4(n,e,t,i){const{hotInstance:r,dataMap:s,dataSource:o,internalSource:a,source:l,metaManager:c,firstRun:u}=i,h=rr(a),d=r.getSettings();Array.isArray(d.dataSchema)?r.dataType="array":fn(d.dataSchema)?r.dataType="function":r.dataType="object",s&&s.destroy(),n=r.runHooks(`before${h}`,n,u,l);const f=new Xg(r,n,c);if(e(f),typeof n=="object"&&n!==null)n.push&&n.splice||(n=[n]);else if(n===null){const g=f.getSchema();n=[];let p,m=0,v=0;for(m=0,v=d.startRows;m<v;m++)if((r.dataType==="object"||r.dataType==="function")&&d.dataSchema)p=sr(g),n.push(p);else if(r.dataType==="array")p=sr(g[0]),n.push(p);else{p=[];for(let y=0,w=d.startCols;y<w;y++)p.push(null);n.push(p)}}else throw new Error(`${a} only accepts array of objects or array of arrays (${typeof n} given)`);Array.isArray(n[0])&&(r.dataType="array"),d.data=n,f.dataSource=n,o.data=n,o.dataType=r.dataType,o.colToProp=f.colToProp.bind(f),o.propToCol=f.propToCol.bind(f),o.countCachedColumns=f.countCachedColumns.bind(f),t(f),r.runHooks(`after${h}`,n,u,l),u||(r.runHooks("afterChange",null,a),r.render()),r.getSettings().ariaTags&&ze(r.rootElement,[Dz(-1),rS(r.countCols()+(r.view?r.countRowHeaders():0))])}function E4(n,e,t){return(e=$Ee(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Ee(n){var e=FEe(n,"string");return typeof e=="symbol"?e:e+""}function FEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class BEe{constructor(e){E4(this,"metaManager",void 0),E4(this,"metaSyncMemo",new Map),this.metaManager=e,e.addLocalHook("afterGetCellMeta",t=>this.extendCellMeta(t)),Pe.getSingleton().add("beforeRender",t=>{t&&this.metaSyncMemo.clear()},this.metaManager.hot)}extendCellMeta(e){var t;const{row:i,col:r}=e;if((t=this.metaSyncMemo.get(i))!==null&&t!==void 0&&t.has(r))return;const{visualRow:s,visualCol:o}=e,a=this.metaManager.hot,l=a.colToProp(o);e.prop=l,a.runHooks("beforeGetCellMeta",s,o,e);const c=In(e,"type")?e.type:null;let u=fn(e.cells)?e.cells(i,r,l):null;if(c)if(u){var h;u.type=(h=u.type)!==null&&h!==void 0?h:c}else u={type:c};u&&this.metaManager.updateCellMeta(i,r,u),a.runHooks("afterGetCellMeta",s,o,e),this.metaSyncMemo.has(i)||this.metaSyncMemo.set(i,new Set),this.metaSyncMemo.get(i).add(r)}}function VEe(n,e,t){WEe(n,e),e.set(n,t)}function WEe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pk(n,e,t){return(e=jEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jEe(n){var e=zEe(n,"string");return typeof e=="symbol"?e:e+""}function zEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function UEe(n,e){return n.get(GEe(n,e))}function GEe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var x4=new WeakMap;class YEe{constructor(e){pk(this,"metaManager",void 0),pk(this,"usageTracker",new Set),pk(this,"propDescriptors",new Map([["ariaTags",{initOnly:!0}],["fixedColumnsLeft",{target:"fixedColumnsStart",onChange(t){if(this.metaManager.hot.isRtl()&&t==="fixedColumnsLeft")throw new Error("The `fixedColumnsLeft` is not supported for RTL. Please use option `fixedColumnsStart`.");if(this.usageTracker.has("fixedColumnsLeft")&&this.usageTracker.has("fixedColumnsStart"))throw new Error("The `fixedColumnsLeft` and `fixedColumnsStart` should not be used together. Please use only the option `fixedColumnsStart`.")}}],["layoutDirection",{initOnly:!0}],["renderAllColumns",{initOnly:!0}],["renderAllRows",{initOnly:!0}]])),VEe(this,x4,(t,i,r)=>{if(!r)throw new Error(`The \`${t}\` option can not be updated after the Handsontable is initialized.`)}),this.metaManager=e,this.extendMetaProps()}extendMetaProps(){this.propDescriptors.forEach((e,t)=>{const{initOnly:i,target:r,onChange:s}=e,o=typeof r=="string",a=o?r:t,l=`_${a}`;this.metaManager.globalMeta.meta[l]=this.metaManager.globalMeta.meta[a],s?(this.installPropWatcher(t,l,s),o&&this.installPropWatcher(r,l,s)):i&&(this.installPropWatcher(t,l,UEe(x4,this)),this.metaManager.globalMeta.meta._initOnlySettings||(this.metaManager.globalMeta.meta._initOnlySettings=[]),this.metaManager.globalMeta.meta._initOnlySettings.push(t))})}installPropWatcher(e,t,i){const r=this;Object.defineProperty(this.metaManager.globalMeta.meta,e,{get(){return this[t]},set(s){const o=!r.usageTracker.has(e);r.usageTracker.add(e),i.call(r,e,s,o),this[t]=s},enumerable:!0,configurable:!0})}}const T4="gridDefault",Iu="editorManager.handlingEditor",KEe={name:"editorCloseAndSave",callback(n){n._getEditorManager().closeEditorAndSaveChanges()}},qEe="hooksRefRegisterer",M4={_hooksStorage:Object.create(null),addHook(n,e){return this._hooksStorage[n]||(this._hooksStorage[n]=[]),this.hot.addHook(n,e),this._hooksStorage[n].push(e),this},removeHooksByKey(n){V(this._hooksStorage[n]||[],e=>{this.hot.removeHook(n,e)})},clearHooks(){ot(this._hooksStorage,(n,e)=>this.removeHooksByKey(e)),this._hooksStorage={}}};Fa(M4,"MIXIN_NAME",qEe,{writable:!1,enumerable:!1});function Ko(n,e,t){return(e=XEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XEe(n){var e=ZEe(n,"string");return typeof e=="symbol"?e:e+""}function ZEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const QEe="base",Qn=Object.freeze({VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"});class Zg{static get EDITOR_TYPE(){return QEe}constructor(e){Ko(this,"hot",void 0),Ko(this,"state",Qn.VIRGIN),Ko(this,"_opened",!1),Ko(this,"_fullEditMode",!1),Ko(this,"_closeCallback",null),Ko(this,"TD",null),Ko(this,"row",null),Ko(this,"col",null),Ko(this,"prop",null),Ko(this,"originalValue",null),Ko(this,"cellProperties",null),this.hot=e,this.init()}_fireCallbacks(e){this._closeCallback&&(this._closeCallback(e),this._closeCallback=null)}init(){}getValue(){throw Error("Editor getValue() method unimplemented")}setValue(){throw Error("Editor setValue() method unimplemented")}open(){throw Error("Editor open() method unimplemented")}close(){throw Error("Editor close() method unimplemented")}prepare(e,t,i,r,s,o){this.TD=r,this.row=e,this.col=t,this.prop=i,this.originalValue=s,this.cellProperties=o,this.state=this.isOpened()?this.state:Qn.VIRGIN}extend(){return class extends this.constructor{}}saveValue(e,t){let i,r,s,o;if(t){const l=this.hot.getSelectedLast();i=Math.max(Math.min(l[0],l[2]),0),r=Math.max(Math.min(l[1],l[3]),0),s=Math.max(l[0],l[2]),o=Math.max(l[1],l[3])}else[i,r,s,o]=[this.row,this.col,null,null];const a=this.hot.runHooks("modifyGetCellCoords",i,r);Array.isArray(a)&&([i,r]=a),this.hot.populateFromArray(i,r,e,s,o,"edit")}beginEditing(e,t){if(this.state!==Qn.VIRGIN)return;const i=this.hot,r=i.rowIndexMapper.getRenderableFromVisualIndex(this.row),s=i.columnIndexMapper.getRenderableFromVisualIndex(this.col);if(i.view.scrollViewport(i._createCellCoords(r,s)),this.state=Qn.EDITING,this.isInFullEditMode()){const o=typeof e=="string"?e:Ln(this.originalValue);this.setValue(o)}this.open(t),this._opened=!0,this.focus(),i.view.render(),i.runHooks("afterBeginEditing",this.row,this.col)}finishEditing(e,t,i){let r;if(i){const s=this._closeCallback;this._closeCallback=o=>{s&&s(o),i(o),this.hot.view.render()}}if(!this.isWaiting()){if(this.state===Qn.VIRGIN){this.hot._registerTimeout(()=>{this._fireCallbacks(!0)});return}if(this.state===Qn.EDITING){if(e){this.cancelChanges(),this.hot.view.render();return}const s=this.getValue();this.cellProperties.trimWhitespace?r=[[typeof s=="string"?String.prototype.trim.call(s||""):s]]:r=[[s]],this.state=Qn.WAITING,this.saveValue(r,t),this.hot.getCellValidator(this.cellProperties)?this.hot.addHookOnce("postAfterValidate",o=>{this.state=Qn.FINISHED,this.discardEditor(o)}):(this.state=Qn.FINISHED,this.discardEditor(!0))}}}cancelChanges(){this.state=Qn.FINISHED,this.discardEditor()}discardEditor(e){this.state===Qn.FINISHED&&(e===!1&&this.cellProperties.allowInvalid!==!0?(this.hot.selectCell(this.row,this.col),this.focus(),this.state=Qn.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=Qn.VIRGIN,this._fireCallbacks(!0),this.hot.getShortcutManager().setActiveContextName("grid")))}enableFullEditMode(){this._fullEditMode=!0}isInFullEditMode(){return this._fullEditMode}isOpened(){return this._opened}isWaiting(){return this.state===Qn.WAITING}getEditedCellRect(){var e;const t=this.getEditedCell();if(!t)return;const{wtOverlays:i,wtViewport:r}=this.hot.view._wt,s=this.hot.rootWindow,o=vi(t),a=dn(t),l=vi(this.hot.rootElement),c=dn(this.hot.rootElement),u=i.topOverlay.holder,h=i.inlineStartOverlay.holder,d=u!==s?u.scrollTop:0,f=h!==s?h.scrollLeft:0,g=s.innerWidth-l.left-c,{wtTable:p}=(e=i.getParentOverlay(t))!==null&&e!==void 0?e:this.hot.view._wt,m=p.name,v=["master","inline_start"].includes(m)?d:0,y=["master","top","bottom"].includes(m)?f:0,w=o.top===l.top?0:1;let _=o.top-l.top-w-v,R=0;this.hot.isRtl()?R=s.innerWidth-o.left-a-g-1+y:R=o.left-l.left-1-y,["top","top_inline_start_corner"].includes(m)&&(_+=i.topOverlay.getOverlayOffset()),["inline_start","top_inline_start_corner"].includes(m)&&(R+=Math.abs(i.inlineStartOverlay.getOverlayOffset()));const E=this.hot.hasColHeaders(),x=this.hot.rowIndexMapper.getRenderableFromVisualIndex(this.row),P=this.hot.columnIndexMapper.getRenderableFromVisualIndex(this.col),I=this.hot.rowIndexMapper.getRenderableIndexesLength()-this.hot.view._wt.getSetting("fixedRowsBottom");(E&&x<=0||x===I)&&(_+=1),P<=0&&(R+=1);const N=r.rowsRenderCalculator.startPosition,W=r.columnsRenderCalculator.startPosition,j=Math.abs(i.inlineStartOverlay.getScrollPosition()),K=i.topOverlay.getScrollPosition(),H=wi(this.hot.rootDocument);let k=t.offsetTop;if(["inline_start","master"].includes(m)&&(k+=N-K),["bottom","bottom_inline_start_corner"].includes(m)){const{wtViewport:Z,wtTable:re}=i.bottomOverlay.clone;k+=Z.getWorkspaceHeight()-re.getHeight()-H}let B=t.offsetLeft;this.hot.isRtl()?(B>=0?B=p.getWidth()-t.offsetLeft:B=Math.abs(B),B+=W-j-a):["top","master","bottom"].includes(m)&&(B+=W-j);const G=$a(this.TD,this.hot.rootWindow),z=this.hot.isRtl()?"borderRightWidth":"borderLeftWidth",se=parseInt(G[z],10)>0?0:1,b=parseInt(G.borderTopWidth,10)>0?0:1,C=dn(t)+se,S=Zn(t)+b,A=qz(u)?H:0,L=Xz(h)?H:0,M=this.hot.view.maximumVisibleElementWidth(B)-A+se,$=Math.max(this.hot.view.maximumVisibleElementHeight(k)-L+b,23);return{top:_,start:R,height:S,maxHeight:$,width:C,maxWidth:M}}getEditedCellsLayerClass(){switch(this.checkEditorSection()){case"inline-start":return"ht_clone_left ht_clone_inline_start";case"bottom":return"ht_clone_bottom";case"bottom-inline-start-corner":return"ht_clone_bottom_left_corner ht_clone_bottom_inline_start_corner";case"top":return"ht_clone_top";case"top-inline-start-corner":return"ht_clone_top_left_corner ht_clone_top_inline_start_corner";default:return"ht_clone_master"}}getEditedCell(){return this.hot.getCell(this.row,this.col,!0)}checkEditorSection(){const e=this.hot.countRows();let t="";return this.row<this.hot.getSettings().fixedRowsTop?this.col<this.hot.getSettings().fixedColumnsStart?t="top-inline-start-corner":t="top":this.hot.getSettings().fixedRowsBottom&&this.row>=e-this.hot.getSettings().fixedRowsBottom?this.col<this.hot.getSettings().fixedColumnsStart?t="bottom-inline-start-corner":t="bottom":this.col<this.hot.getSettings().fixedColumnsStart&&(t="inline-start"),t}}Gt(Zg,M4);const JEe={name:"editorCloseAndSaveByArrowKeys",callback(n,e,t){const i=n._getEditorManager(),r=i.getActiveEditor();r.isInFullEditMode()&&r.state===Qn.EDITING||(i.closeEditorAndSaveChanges(),n.getSelected()&&(t.includes("arrowdown")?n.selection.transformStart(1,0):t.includes("arrowup")?n.selection.transformStart(-1,0):t.includes("arrowleft")?n.selection.transformStart(0,-1*n.getDirectionFactor()):t.includes("arrowright")&&n.selection.transformStart(0,n.getDirectionFactor())),e.preventDefault())}},exe={name:"editorCloseAndSaveByEnter",callback(n,e){const t=n._getEditorManager();t.closeEditorAndSaveChanges(e.ctrlKey||e.metaKey),t.moveSelectionAfterEnter(e)}},txe={name:"editorCloseWithoutSaving",callback(n){const e=n._getEditorManager();e.closeEditorAndRestoreOriginalValue(n.getShortcutManager().isCtrlPressed()),e.activeEditor.focus()}},nxe={name:"editorFastOpen",callback(n,e){const{highlight:t}=n.getSelectedRangeLast();t.isHeader()||n._getEditorManager().openEditor(null,e,!0)}},ixe={name:"editorOpen",callback(n,e,t){const i=n._getEditorManager(),r=n.getSelectedRangeLast(),{highlight:s}=r;if(n.selection.isMultiple()&&!r.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0){const o=n.getSettings(),a=typeof o.enterMoves=="function"?o.enterMoves(e):o.enterMoves;t.includes("shift")?n.selection.transformFocus(-a.row,-a.col):n.selection.transformFocus(a.row,a.col);return}s.isHeader()||(n.getSettings().enterBeginsEditing?i.cellProperties.readOnly?i.moveSelectionAfterEnter(e):i.openEditor(null,e,!0):i.moveSelectionAfterEnter(e),Gs(e))}};function rxe(){return[KEe,JEe,exe,txe,nxe,ixe]}const sxe={name:"extendCellsSelectionDown",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByColumnHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByRowHeader())&&n.selection.transformEnd(1,0)}},oxe={name:"extendCellsSelectionDownByViewportHeight",callback(n){const{to:e}=n.getSelectedRangeLast(),t=Math.min(e.row+n.countVisibleRows(),n.countRows()-1),i=n.rowIndexMapper.getNearestNotHiddenIndex(t,-1);if(i!==null){const r=n._createCellCoords(i,e.col),s=e.row-n.view.getFirstFullyVisibleRow(),o=Math.min(r.row-s,n.countRows()-1);n.selection.setRangeEnd(r),n.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}},axe={name:"extendCellsSelectionLeft",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByColumnHeader())&&n.selection.transformEnd(0,-1*n.getDirectionFactor())}},lxe={name:"extendCellsSelectionRight",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByColumnHeader())&&n.selection.transformEnd(0,n.getDirectionFactor())}},cxe={name:"extendCellsSelectionToColumns",callback(n){const{highlight:e,from:t,to:i}=n.getSelectedRangeLast();n.selection.isSelectedByRowHeader()?n.selection.selectAll(!0,!0):n.selectColumns(t.col,i.col,e)}},uxe={name:"extendCellsSelectionToMostBottom",callback(n){const{selection:e,rowIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByRowHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(n.countRows()-1,-1),l=r.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(a,s.col))}}},hxe={name:"extendCellsSelectionToMostInlineEnd",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast();if(!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&i.isCell()){const o=t.getNearestNotHiddenIndex(n.countCols()-1,-1),a=r.clone();a.col=i.col,e.setRangeStart(a,void 0,!1,i.clone()),e.setRangeEnd(n._createCellCoords(s.row,o))}}},dxe={name:"extendCellsSelectionToMostInlineStart",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast();if(!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&i.isCell()){const o=parseInt(n.getSettings().fixedColumnsStart,10),a=t.getNearestNotHiddenIndex(o,1),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),e.setRangeEnd(n._createCellCoords(s.row,a))}}},fxe={name:"extendCellsSelectionToMostLeft",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByColumnHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(...n.isRtl()?[n.countCols()-1,-1]:[0,1]),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(s.row,a))}}},gxe={name:"extendCellsSelectionToMostRight",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByColumnHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(...n.isRtl()?[0,1]:[n.countCols()-1,-1]),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(s.row,a))}}},pxe={name:"extendCellsSelectionToMostTop",callback(n){const{selection:e,rowIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByRowHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(0,1),l=r.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(a,s.col))}}},mxe={name:"extendCellsSelectionToRows",callback(n){const{highlight:e,from:t,to:i}=n.getSelectedRangeLast();n.selection.isSelectedByColumnHeader()?n.selection.selectAll(!0,!0):n.selectRows(t.row,i.row,e)}},bxe={name:"extendCellsSelectionUp",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByColumnHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByRowHeader())&&n.selection.transformEnd(-1,0)}},vxe={name:"extendCellsSelectionUpByViewportHeight",callback(n){const{to:e}=n.getSelectedRangeLast(),t=Math.max(e.row-n.countVisibleRows(),0),i=n.rowIndexMapper.getNearestNotHiddenIndex(t,1);if(i!==null){const r=n._createCellCoords(i,e.col),s=e.row-n.view.getFirstFullyVisibleRow(),o=Math.max(r.row-s,0);n.selection.setRangeEnd(r),n.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}};function wxe(){return[sxe,oxe,axe,lxe,cxe,uxe,hxe,dxe,fxe,gxe,pxe,mxe,bxe,vxe]}const yxe={name:"moveCellSelectionDown",callback(n){let{selection:e}=n;e.transformStart(1,0)}},Cxe={name:"moveCellSelectionDownByViewportHeight",callback(n){const{navigableHeaders:e}=n.getSettings(),t=e?n.countColHeaders():0,{row:i}=n.getSelectedRangeLast().highlight;let r=n.countVisibleRows()+t;i===n.countRows()-1?r=1:i+r>n.countRows()&&(r=n.countRows()-i-1),n.selection.transformStart(r,0),n.getSelectedRangeLast().highlight.row<0&&n.scrollViewportTo({row:0})}},Sxe={name:"moveCellSelectionInlineEnd",callback(n,e){const t=n.getSettings(),i=n.getSelectedRangeLast(),r=typeof t.tabMoves=="function"?t.tabMoves(e):t.tabMoves;n.selection.isMultiple()&&!i.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0?n.selection.transformFocus(-r.row,-r.col):n.selection.transformStart(-r.row,-r.col)}},_xe={name:"moveCellSelectionInlineStart",callback(n,e){const t=n.getSettings(),i=n.getSelectedRangeLast(),r=typeof t.tabMoves=="function"?t.tabMoves(e):t.tabMoves;n.selection.isMultiple()&&!i.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0?n.selection.transformFocus(r.row,r.col):n.selection.transformStart(r.row,r.col)}},Rxe={name:"moveCellSelectionLeft",callback(n){n.selection.transformStart(0,-1*n.getDirectionFactor())}},Exe={name:"moveCellSelectionRight",callback(n){n.selection.transformStart(0,n.getDirectionFactor())}},xxe={name:"moveCellSelectionToMostBottom",callback(n){const{col:e}=n.getSelectedRangeLast().highlight;let t=n.rowIndexMapper.getNearestNotHiddenIndex(n.countRows()-1,-1);t===null&&(t=-1),n.selection.setRangeStart(n._createCellCoords(t,e))}},Txe={name:"moveCellSelectionToMostBottomInlineEnd",callback(n){const{selection:e,rowIndexMapper:t,columnIndexMapper:i}=n,r=parseInt(n.getSettings().fixedRowsBottom,10),s=t.getNearestNotHiddenIndex(n.countRows()-r-1,-1),o=i.getNearestNotHiddenIndex(n.countCols()-1,-1);e.setRangeStart(n._createCellCoords(s,o))}},Mxe={name:"moveCellSelectionToMostInlineEnd",callback(n){const{selection:e,columnIndexMapper:t}=n;e.setRangeStart(n._createCellCoords(n.getSelectedRangeLast().highlight.row,t.getNearestNotHiddenIndex(n.countCols()-1,-1)))}},Axe={name:"moveCellSelectionToMostInlineStart",callback(n){const{selection:e,columnIndexMapper:t}=n,i=parseInt(n.getSettings().fixedColumnsStart,10),r=n.getSelectedRangeLast().highlight.row,s=t.getNearestNotHiddenIndex(i,1);e.setRangeStart(n._createCellCoords(r,s))}},Pxe={name:"moveCellSelectionToMostLeft",callback(n){const{selection:e,columnIndexMapper:t}=n,i=n.getSelectedRangeLast().highlight.row;let r=t.getNearestNotHiddenIndex(...n.isRtl()?[n.countCols()-1,-1]:[0,1]);r===null&&(r=n.isRtl()?-1:-n.countRowHeaders()),e.setRangeStart(n._createCellCoords(i,r))}},Ixe={name:"moveCellSelectionToMostRight",callback(n){const{selection:e,columnIndexMapper:t}=n,{row:i}=n.getSelectedRangeLast().highlight;let r=t.getNearestNotHiddenIndex(...n.isRtl()?[0,1]:[n.countCols()-1,-1]);r===null&&(r=n.isRtl()?-n.countRowHeaders():-1),e.setRangeStart(n._createCellCoords(i,r))}},Oxe={name:"moveCellSelectionToMostTop",callback(n){const{col:e}=n.getSelectedRangeLast().highlight;let t=n.rowIndexMapper.getNearestNotHiddenIndex(0,1);t===null&&(t=-n.countColHeaders()),n.selection.setRangeStart(n._createCellCoords(t,e))}},kxe={name:"moveCellSelectionToMostTopInlineStart",callback(n){const{selection:e,rowIndexMapper:t,columnIndexMapper:i}=n,r=parseInt(n.getSettings().fixedRowsTop,10),s=parseInt(n.getSettings().fixedColumnsStart,10),o=t.getNearestNotHiddenIndex(r,1),a=i.getNearestNotHiddenIndex(s,1);e.setRangeStart(n._createCellCoords(o,a))}},Dxe={name:"moveCellSelectionUp",callback(n){let{selection:e}=n;e.transformStart(-1,0)}},Nxe={name:"moveCellSelectionUpByViewportHight",callback(n){const{navigableHeaders:e}=n.getSettings(),t=e?n.countColHeaders():0,{row:i}=n.getSelectedRangeLast().highlight;let r=-(n.countVisibleRows()+t);i===-t?r=-1:i+r<t&&(r=-(i+t)),n.selection.transformStart(r,0),n.getSelectedRangeLast().highlight.row<0&&n.scrollViewportTo({row:0})}};function Lxe(){return[yxe,Cxe,Sxe,_xe,Rxe,Exe,xxe,Txe,Mxe,Axe,Pxe,Ixe,Oxe,kxe,Dxe,Nxe]}const Hxe={name:"emptySelectedCells",callback(n){n.emptySelectedCells(),n._getEditorManager().prepareEditor()}},$xe={name:"scrollToFocusedCell",callback(n){const{highlight:e}=n.getSelectedRangeLast(),t=n.view.getFirstFullyVisibleRow()-1,i=n.view.getFirstFullyVisibleColumn()-1,r=n.view.getLastFullyVisibleRow()+1,s=n.view.getLastFullyVisibleColumn()+1,o=n._createCellCoords(t,i),a=n._createCellCoords(r,s);if(!n._createCellRange(o,o,a).includes(e)&&(e.row>=0||e.col>=0)){const c={};if(e.col>=0){const u=Math.floor(n.countVisibleCols()/2);c.col=Math.max(e.col-u,0)}if(e.row>=0){const u=Math.floor(n.countVisibleRows()/2);c.row=Math.max(e.row-u,0)}n.scrollViewportTo({...c,verticalSnap:"top",horizontalSnap:"start"})}}},Fxe={name:"selectAllCells",callback(n){n.selection.selectAll(!0,!0,{disableHeadersHighlight:!0})}},Bxe={name:"selectAllCellsAndHeaders",callback(n){n.selection.selectAll(!0,!0,{disableHeadersHighlight:!1})}},Vxe={name:"populateSelectedCellsData",callback(n){const e=n.getSelectedRange(),{row:t,col:i}=e[e.length-1].highlight.normalize(),r=n.getDataAtCell(t,i),s=new Map;for(let o=0;o<e.length;o++)e[o].forAll((a,l)=>{if(a>=0&&l>=0&&(a!==t||l!==i)){const{readOnly:c}=n.getCellMeta(a,l);c||s.set(`${a}x${l}`,[a,l,r])}});n.setDataAtCell(Array.from(s.values()))}},Wxe=[...rxe(),...wxe(),...Lxe(),Hxe,$xe,Fxe,Bxe,Vxe];function A4(n){const e={};return Wxe.forEach(t=>{let{name:i,callback:r}=t;e[i]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return r(n,...o)}}),e}function jxe(n){const e=n.getShortcutManager().addContext("editor"),t=A4(n),i={group:Iu};e.addShortcuts([{keys:[["Enter"],["Enter","Shift"]],callback:(r,s)=>t.editorCloseAndSaveByEnter(r,s)},{keys:[["Enter","Control/Meta"],["Enter","Control/Meta","Shift"]],captureCtrl:!0,callback:(r,s)=>t.editorCloseAndSaveByEnter(r,s)},{keys:[["Tab"],["Tab","Shift"],["PageDown"],["PageUp"]],forwardToContext:n.getShortcutManager().getContext("grid"),callback:(r,s)=>t.editorCloseAndSave(r,s)},{keys:[["ArrowDown"],["ArrowUp"],["ArrowLeft"],["ArrowRight"]],preventDefault:!1,callback:(r,s)=>t.editorCloseAndSaveByArrowKeys(r,s)},{keys:[["Escape"],["Escape","Control/Meta"]],callback:()=>t.editorCloseWithoutSaving()}],i)}function zxe(n){const e=n.getShortcutManager().addContext("grid"),t=A4(n),i={runOnlyIf:()=>{const{navigableHeaders:r}=n.getSettings();return Oe(n.getSelected())&&(r||!r&&n.countRenderedRows()>0&&n.countRenderedCols()>0)},group:T4};e.addShortcuts([{keys:[["F2"]],callback:r=>t.editorFastOpen(r)},{keys:[["Enter"],["Enter","Shift"]],callback:(r,s)=>t.editorOpen(r,s)},{keys:[["Backspace"],["Delete"]],callback:()=>t.emptySelectedCells()}],{group:Iu,runOnlyIf:()=>Oe(n.getSelected())}),e.addShortcuts([{keys:[["Control/Meta","A"]],callback:()=>t.selectAllCells(),runOnlyIf:()=>{var r;return!((r=n.getSelectedRangeLast())!==null&&r!==void 0&&r.highlight.isHeader())}},{keys:[["Control/Meta","A"]],callback:()=>{},runOnlyIf:()=>{var r;return(r=n.getSelectedRangeLast())===null||r===void 0?void 0:r.highlight.isHeader()},preventDefault:!0},{keys:[["Control/Meta","Shift","Space"]],callback:()=>t.selectAllCellsAndHeaders()},{keys:[["Control/Meta","Enter"]],callback:()=>t.populateSelectedCellsData(),runOnlyIf:()=>{var r,s;return!((r=n.getSelectedRangeLast())!==null&&r!==void 0&&r.highlight.isHeader())&&((s=n.getSelectedRangeLast())===null||s===void 0?void 0:s.getCellsCount())>1}},{keys:[["Control","Space"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToColumns()},{keys:[["Shift","Space"]],stopPropagation:!0,callback:()=>t.extendCellsSelectionToRows()},{keys:[["ArrowUp"]],callback:()=>t.moveCellSelectionUp()},{keys:[["ArrowUp","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostTop()},{keys:[["ArrowUp","Shift"]],callback:()=>t.extendCellsSelectionUp()},{keys:[["ArrowUp","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostTop(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByColumnHeader())},{keys:[["ArrowDown"]],callback:()=>t.moveCellSelectionDown()},{keys:[["ArrowDown","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostBottom()},{keys:[["ArrowDown","Shift"]],callback:()=>t.extendCellsSelectionDown()},{keys:[["ArrowDown","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostBottom(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByColumnHeader())},{keys:[["ArrowLeft"]],callback:()=>t.moveCellSelectionLeft()},{keys:[["ArrowLeft","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostLeft()},{keys:[["ArrowLeft","Shift"]],callback:()=>t.extendCellsSelectionLeft()},{keys:[["ArrowLeft","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostLeft(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByRowHeader())},{keys:[["ArrowRight"]],callback:()=>t.moveCellSelectionRight()},{keys:[["ArrowRight","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostRight()},{keys:[["ArrowRight","Shift"]],callback:()=>t.extendCellsSelectionRight()},{keys:[["ArrowRight","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostRight(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByRowHeader())},{keys:[["Home"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostInlineStart(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["Home","Shift"]],callback:()=>t.extendCellsSelectionToMostInlineStart()},{keys:[["Home","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostTopInlineStart(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostInlineEnd(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End","Shift"]],callback:()=>t.extendCellsSelectionToMostInlineEnd()},{keys:[["End","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostBottomInlineEnd(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["PageUp"]],callback:()=>t.moveCellSelectionUpByViewportHight()},{keys:[["PageUp","Shift"]],callback:()=>t.extendCellsSelectionUpByViewportHeight()},{keys:[["PageDown"]],callback:()=>t.moveCellSelectionDownByViewportHeight()},{keys:[["PageDown","Shift"]],callback:()=>t.extendCellsSelectionDownByViewportHeight()},{keys:[["Tab"]],preventDefault:!1,callback:r=>t.moveCellSelectionInlineStart(r)},{keys:[["Shift","Tab"]],preventDefault:!1,callback:r=>t.moveCellSelectionInlineEnd(r)},{keys:[["Control/Meta","Backspace"]],callback:()=>t.scrollToFocusedCell()}],i)}function Uxe(n){[zxe,jxe].forEach(e=>e(n))}function Gxe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=n.rootElement,i=P4(n),r=P4(n);return i.addEventListener("focus",()=>e==null?void 0:e.onFocusFromTop()),r.addEventListener("focus",()=>e==null?void 0:e.onFocusFromBottom()),t.firstChild.before(i),t.lastChild.after(r),{activate(){n._registerTimeout(()=>{i.tabIndex=0,r.tabIndex=0},10)},deactivate(){n._registerTimeout(()=>{i.tabIndex=-1,r.tabIndex=-1},10)}}}function P4(n){const t=n.rootDocument.createElement("input");return t.type="text",t.classList.add("htFocusCatcher"),n.getSettings().ariaTags&&ze(t,[Ha(),hd()]),t}function Yxe(n){const e=Kxe(n);let t;const{activate:i,deactivate:r}=Gxe(n,{onFocusFromTop(){var h;const d=(h=e(t))!==null&&h!==void 0?h:mk(n);d&&(n.runHooks("modifyFocusOnTabNavigation","from_above",d),n.selectCell(d.row,d.col)),n.listen()},onFocusFromBottom(){var h;const d=(h=e(t))!==null&&h!==void 0?h:bk(n);d&&(n.runHooks("modifyFocusOnTabNavigation","from_below",d),n.selectCell(d.row,d.col)),n.listen()}}),s={wrapped:!1,flipped:!1};let o=!0,a=!1,l=!1;n.addHook("afterListen",()=>r()),n.addHook("afterUnlisten",()=>i()),n.addHook("afterSelection",(h,d,f,g,p)=>{if(a&&(s.wrapped&&s.flipped||l)&&(l=!1,p.value=!0),o){var m;t=(m=n.getSelectedRangeLast())===null||m===void 0?void 0:m.highlight}}),n.addHook("beforeRowWrap",(h,d,f)=>{s.wrapped=!0,s.flipped=f});function c(){s.wrapped=!1,s.flipped=!1,n.deselectCell(),n.unlisten()}const u={keys:[["Tab"],["Shift","Tab"]],preventDefault:!1,stopPropagation:!1,relativeToGroup:T4,group:"focusCatcher"};n.getShortcutManager().getContext("grid").addShortcuts([{...u,callback:()=>{const{tabNavigation:h}=n.getSettings();a=!0,n.getSelectedRangeLast()&&!h&&(o=!1),h||(l=!0)},position:"before"},{...u,callback:h=>{const{tabNavigation:d,autoWrapRow:f}=n.getSettings();if(a=!1,o=!0,!d||!n.selection.isSelected()||f&&s.wrapped&&s.flipped||!f&&s.wrapped)return f&&s.wrapped&&s.flipped&&(t=h.shiftKey?mk(n):bk(n)),c(),!1;h.preventDefault()},position:"after"}])}function mk(n){const{rowIndexMapper:e,columnIndexMapper:t}=n,{navigableHeaders:i}=n.getSettings();let r=i&&n.countColHeaders()>0?-n.countColHeaders():0,s=i&&n.countRowHeaders()>0?-n.countRowHeaders():0;return r===0&&(r=e.getVisualFromRenderableIndex(r)),s===0&&(s=t.getVisualFromRenderableIndex(s)),r===null||s===null?null:n._createCellCoords(r,s)}function bk(n){var e,t;const{rowIndexMapper:i,columnIndexMapper:r}=n,{navigableHeaders:s}=n.getSettings();let o=i.getRenderableIndexesLength()-1,a=r.getRenderableIndexesLength()-1;if(o<0){if(!s||n.countColHeaders()===0)return null;o=-1}if(a<0){if(!s||n.countColHeaders()===0)return null;a=-1}return n._createCellCoords((e=i.getVisualFromRenderableIndex(o))!==null&&e!==void 0?e:o,(t=r.getVisualFromRenderableIndex(a))!==null&&t!==void 0?t:a)}function Kxe(n){return e=>{if(!e)return null;const t=mk(n),i=bk(n);return e.col<t.col&&(e.col=t.col),e.col>i.col&&(e.col=i.col),e.row<t.row&&(e.row=t.row),e.row>i.row&&(e.row=i.row),e}}function qxe(n){return e=>{let{col:t}=e;n.scrollViewportTo({col:t})}}function Xxe(){return()=>{}}function Zxe(n){return e=>{n.scrollViewportTo(e.toObject())}}function Qxe(n){return e=>{n.scrollViewportTo(e.toObject())}}function Jxe(n){return e=>{n.scrollViewportTo(e.toObject())}}function eTe(n){return e=>{let{row:t}=e;n.scrollViewportTo({row:t})}}function tTe(n){return e=>{const t=n.selection.getSelectionSource(),{row:i,col:r}=e;if(i<0&&r>=0)n.scrollViewportTo({col:r});else if(r<0&&i>=0)n.scrollViewportTo({row:i});else{if(t==="mouse"&&(r===n.view.getLastPartiallyVisibleColumn()||i===n.view.getLastPartiallyVisibleRow()))return;n.scrollViewportTo({row:i,col:r})}}}function nTe(n){const{selection:e}=n;let t=!1,i=!1;return{resume(){i=!1},suspend(){i=!0},skipNextScrollCycle(){t=!0},scrollTo(r){var s;if(t||i){t=!1;return}let o;e.isFocusSelectionChanged()?o=Zxe(n):e.isSelectedByCorner()?o=Xxe():e.isSelectedByRowHeader()?o=eTe(n):e.isSelectedByColumnHeader()?o=qxe(n):e.getSelectedRange().size()===1&&e.isMultiple()?o=Qxe(n):e.getSelectedRange().size()===1&&!e.isMultiple()?o=tTe(n):e.getSelectedRange().size()>1&&(o=Jxe(n)),(s=o)===null||s===void 0||s(r)}}}const I4=new Map([[" ","space"],["spacebar","space"],["scroll","scrolllock"],["del","delete"],["esc","escape"],["medianexttrack","mediatracknext"],["mediaprevioustrack","mediatrackprevious"],["volumeup","audiovolumeup"],["volumedown","audiovolumedown"],["volumemute","audiovolumemute"],["multiply","*"],["add","+"],["divide","/"],["subtract","-"],["left","arrowleft"],["right","arrowright"],["up","arrowup"],["down","arrowdown"]]),T_=n=>n.map(e=>{const t=e.toLowerCase();return I4.has(t)?I4.get(t):t}).sort().join("+"),iTe=n=>n.split("+"),O4=new Map([[96,"numpad0"],[97,"numpad1"],[98,"numpad2"],[99,"numpad3"],[100,"numpad4"],[101,"numpad5"],[102,"numpad6"],[103,"numpad7"],[104,"numpad8"],[105,"numpad9"],[106,"multiply"],[107,"add"],[108,"decimal"],[109,"subtract"],[110,"decimal"],[111,"divide"],[112,"f1"],[113,"f2"],[114,"f3"],[115,"f4"],[116,"f5"],[117,"f6"],[118,"f7"],[119,"f8"],[120,"f9"],[121,"f10"],[122,"f11"],[123,"f12"],[186,"semicolon"],[187,"equal"],[188,"comma"],[189,"minus"],[190,"period"],[191,"slash"],[192,"backquote"],[219,"bracketleft"],[220,"backslash"],[221,"bracketright"],[222,"quote"]]),vk=n=>{let{which:e,key:t}=n;if(O4.has(e))return O4.get(e);const i=String.fromCharCode(e).toLowerCase();return/^[a-z0-9]$/.test(i)?i:t.toLowerCase()},k4=Symbol("shortcut-context");function D4(n){return st(n)&&n.__kindOf===k4}const rTe=n=>{const e=TS({errorIdExists:l=>`The "${l}" shortcut is already registered in the "${n}" context.`}),t=function(){let{keys:l,callback:c,group:u,runOnlyIf:h=()=>!0,captureCtrl:d=!1,preventDefault:f=!0,stopPropagation:g=!1,relativeToGroup:p,position:m,forwardToContext:v}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(hn(u))throw new Error("You need to define the shortcut's group.");if(fn(c)===!1)throw new Error("The shortcut's callback needs to be a function.");if(Array.isArray(l)===!1)throw new Error(Ut`Pass the shortcut\'s keys as an array of arrays,\x20
      using the KeyboardEvent.key properties:\x20
      https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values.`);const y={callback:c,group:u,runOnlyIf:h,captureCtrl:d,preventDefault:f,stopPropagation:g};Oe(p)&&(y.relativeToGroup=p,y.position=m),D4(v)&&(y.forwardToContext=v),l.forEach(w=>{const _=T_(w);if(e.hasItem(_)){const E=e.getItem(_);let x=E.findIndex(P=>P.group===p);x!==-1?m==="before"?x-=1:x+=1:x=E.length,E.splice(x,0,y)}else e.addItem(_,[y])})},i=function(l){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.forEach(u=>{ot(c,(h,d)=>{Object.prototype.hasOwnProperty.call(u,d)===!1&&(u[d]=c[d])}),t(u)})},r=l=>{const c=T_(l);e.removeItem(c)};return{__kindOf:k4,addShortcut:t,addShortcuts:i,getShortcuts:l=>{const c=T_(l),u=e.getItem(c);return Oe(u)?u.slice():[]},hasShortcut:l=>{const c=T_(l);return e.hasItem(c)},removeShortcutsByKeys:r,removeShortcutsByGroup:l=>{e.getItems().forEach(u=>{let[h,d]=u;const f=d.filter(g=>g.group!==l);f.length===0?r(iTe(h)):(d.length=0,d.push(...f))})}}};function sTe(){const n=new Set;return{press(e){n.add(e)},release(e){n.delete(e)},releaseAll(){n.clear()},isPressed(e){return n.has(e)}}}const oTe=["meta","alt","shift","control"],Nv=sTe(),Lv=[];let M_=0;function aTe(n,e,t,i,r){const s=f=>oTe.includes(f),o=function(f){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const p=[];return f.altKey&&p.push("alt"),g&&(f.ctrlKey||f.metaKey)?p.push("control/meta"):(f.ctrlKey&&p.push("control"),f.metaKey&&p.push("meta")),f.shiftKey&&p.push("shift"),p},a=f=>{if(e(f)===!1)return;const g=t(f);if(f.keyCode===229||g===!1||Ru(f))return;const p=vk(f);let m=[];s(p)||(m=o(f));const v=[p].concat(m);!r(f,v)&&(iv()&&m.includes("meta")||!iv()&&m.includes("control"))&&r(f,[p].concat(o(f,!0))),i(f)},l=f=>{if(f.key){const g=vk(f);s(g)&&Nv.press(g)}},c=f=>{if(f.key){const g=vk(f);s(g)&&Nv.release(g)}},u=()=>{Nv.releaseAll()};return{mount:()=>{let f=n;for(M_+=1;f;)M_===1&&(f.document.documentElement.addEventListener("keydown",l),Lv.push({event:"keydown",listener:l}),f.document.documentElement.addEventListener("keyup",c),Lv.push({event:"keyup",listener:c})),f.document.documentElement.addEventListener("keydown",a),f.document.documentElement.addEventListener("blur",u),f=dd(f)},unmount:()=>{let f=n;for(M_-=1;f;){if(M_===0){for(let g=0;g<Lv.length;g++){const{event:p,listener:m}=Lv[g];f.document.documentElement.removeEventListener(p,m)}Lv.length=0}f.document.documentElement.removeEventListener("keydown",a),f.document.documentElement.removeEventListener("blur",u),f=dd(f)}},isPressed:f=>Nv.isPressed(f),releasePressedKeys:()=>Nv.releaseAll()}}const lTe=n=>{let{ownerWindow:e,handleEvent:t,beforeKeyDown:i,afterKeyDown:r}=n;const s=TS({errorIdExists:g=>`The "${g}" context name is already registered.`});let o="grid";const a=g=>{const p=rTe(g);return s.addItem(g,p),p},l=()=>o,c=g=>s.getItem(g),u=g=>{if(!s.hasItem(g))throw new Error(Ut`You've tried to activate the "${g}" shortcut context\x20
        that does not exist. Before activation, register the context using the "addContext" method.`);o=g};let h=!1;const d=function(g,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l();const v=D4(m)?m:c(m);let y=!1;if(!v.hasShortcut(p))return y;const w=v.getShortcuts(p);for(let _=0;_<w.length;_++){const{callback:R,runOnlyIf:E,preventDefault:x,stopPropagation:P,captureCtrl:T,forwardToContext:I}=w[_];if(E(g)===!0){if(h=T,y=R(g,p)===!1,h=!1,x&&g.preventDefault(),P&&(Gs(g),g.stopPropagation()),y)break;I&&d(g,p,I)}}return y},f=aTe(e,t,i,r,d);return f.mount(),{addContext:a,getActiveContextName:l,getContext:c,setActiveContextName:u,isCtrlPressed:()=>!h&&(f.isPressed("control")||f.isPressed("meta")),releasePressedKeys:()=>f.releasePressedKeys(),destroy:()=>f.unmount()}};let wk=null;const yk=new Map;function N4(n,e){var t,i=this;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this;const o=new Ys(s);let a,l,c,u,h,d,f=!0;zRe(r)&&jRe(this),this.rootElement=n,this.rootDocument=n.ownerDocument,this.rootWindow=this.rootDocument.defaultView,this.isDestroyed=!1,this.renderSuspendedCounter=0,this.executionSuspendedCounter=0;const g=(t=e==null?void 0:e.layoutDirection)!==null&&t!==void 0?t:"inherit",p=["rtl","ltr"].includes(g)?g:this.rootWindow.getComputedStyle(this.rootElement).direction;this.rootElement.setAttribute("dir",p),this.isRtl=function(){return p==="rtl"},this.isLtr=function(){return!s.isRtl()},this.getDirectionFactor=function(){return s.isLtr()?1:-1},e.language=F1e(e.language);const m=new _4(s,e,[BEe,YEe]),v=m.getTableMeta(),y=m.getGlobalMeta(),w=TS();this.container=this.rootDocument.createElement("div"),this.renderCall=!1,n.insertBefore(this.container,n.firstChild),GS(this)&&Pz(e.licenseKey,n),this.guid=`ht_${rP()}`,yk.set(this.guid,this),this.columnIndexMapper=new zI,this.rowIndexMapper=new zI,this.columnIndexMapper.addLocalHook("indexesSequenceChange",b=>{s.runHooks("afterColumnSequenceChange",b)}),this.rowIndexMapper.addLocalHook("indexesSequenceChange",b=>{s.runHooks("afterRowSequenceChange",b)}),l=new i1e(s),(!this.rootElement.id||this.rootElement.id.substring(0,3)==="ht_")&&(this.rootElement.id=this.guid);const _=b=>{const{row:C,col:S}=b;return s._createCellCoords(C>=0?s.rowIndexMapper.getRenderableFromVisualIndex(C):C,S>=0?s.columnIndexMapper.getRenderableFromVisualIndex(S):S)},R=b=>{const{row:C,col:S}=b;return s._createCellCoords(C>=0?s.rowIndexMapper.getVisualFromRenderableIndex(C):C,S>=0?s.columnIndexMapper.getVisualFromRenderableIndex(S):S)},E=(b,C)=>{const S=C>b?1:-1,A=Math.min(b,C),L=Math.max(b,C),M=s.rowIndexMapper.getNearestNotHiddenIndex(b,S);return M===null||S===1&&M>L||S===-1&&M<A?null:M>=0?s.rowIndexMapper.getRenderableFromVisualIndex(M):M},x=(b,C)=>{const S=C>b?1:-1,A=Math.min(b,C),L=Math.max(b,C),M=s.columnIndexMapper.getNearestNotHiddenIndex(b,S);return M===null||S===1&&M>L||S===-1&&M<A?null:M>=0?s.columnIndexMapper.getRenderableFromVisualIndex(M):M};let P=new p4(v,{rowIndexMapper:s.rowIndexMapper,columnIndexMapper:s.columnIndexMapper,countCols:()=>s.countCols(),countRows:()=>s.countRows(),propToCol:b=>a.propToCol(b),isEditorOpened:()=>s.getActiveEditor()?s.getActiveEditor().isOpened():!1,countRenderableColumns:()=>this.view.countRenderableColumns(),countRenderableRows:()=>this.view.countRenderableRows(),countRowHeaders:()=>this.countRowHeaders(),countColHeaders:()=>this.countColHeaders(),countRenderableRowsInRange:function(){return i.view.countRenderableRowsInRange(...arguments)},countRenderableColumnsInRange:function(){return i.view.countRenderableColumnsInRange(...arguments)},getShortcutManager:()=>s.getShortcutManager(),createCellCoords:(b,C)=>s._createCellCoords(b,C),createCellRange:(b,C,S)=>s._createCellRange(b,C,S),visualToRenderableCoords:_,renderableToVisualCoords:R,findFirstNonHiddenRenderableRow:E,findFirstNonHiddenRenderableColumn:x,isDisabledCellSelection:(b,C)=>b<0||C<0?s.getSettings().disableVisualSelection:s.getCellMeta(b,C).disableVisualSelection});this.selection=P;const T=b=>{let{hiddenIndexesChanged:C}=b;C&&this.selection.commit()};this.columnIndexMapper.addLocalHook("cacheUpdated",T),this.rowIndexMapper.addLocalHook("cacheUpdated",T),this.selection.addLocalHook("afterSetRangeEnd",(b,C)=>{const S=zs(!1),A=this.selection.getSelectedRange(),{from:L,to:M}=A.current(),$=A.size()-1;this.runHooks("afterSelection",L.row,L.col,M.row,M.col,S,$),this.runHooks("afterSelectionByProp",L.row,s.colToProp(L.col),M.row,s.colToProp(M.col),S,$),C&&(!S.isTouched()||S.isTouched()&&!S.value)&&d.scrollTo(b);const Z=P.isSelectedByRowHeader(),re=P.isSelectedByColumnHeader();Z&&re?ce(this.rootElement,["ht__selection--rows","ht__selection--columns"]):Z?(Ze(this.rootElement,"ht__selection--columns"),ce(this.rootElement,"ht__selection--rows")):re?(Ze(this.rootElement,"ht__selection--rows"),ce(this.rootElement,"ht__selection--columns")):Ze(this.rootElement,["ht__selection--rows","ht__selection--columns"]),P.getSelectionSource()!=="shift"&&u.closeEditor(null),s.view.render(),u.prepareEditor()}),this.selection.addLocalHook("beforeSetFocus",b=>{this.runHooks("beforeSelectionFocusSet",b.row,b.col)}),this.selection.addLocalHook("afterSetFocus",b=>{const C=zs(!1);this.runHooks("afterSelectionFocusSet",b.row,b.col,C),(!C.isTouched()||C.isTouched()&&!C.value)&&d.scrollTo(b),u.closeEditor(),s.view.render(),u.prepareEditor()}),this.selection.addLocalHook("afterSelectionFinished",b=>{const C=b.length-1,{from:S,to:A}=b[C];this.runHooks("afterSelectionEnd",S.row,S.col,A.row,A.col,C),this.runHooks("afterSelectionEndByProp",S.row,s.colToProp(S.col),A.row,s.colToProp(A.col),C)}),this.selection.addLocalHook("afterIsMultipleSelection",b=>{const C=this.runHooks("afterIsMultipleSelection",b.value);b.value&&(b.value=C)}),this.selection.addLocalHook("afterDeselect",()=>{u.closeEditor(),s.view.render(),Ze(this.rootElement,["ht__selection--rows","ht__selection--columns"]),this.runHooks("afterDeselect")}),this.selection.addLocalHook("beforeHighlightSet",()=>this.runHooks("beforeSelectionHighlightSet")).addLocalHook("beforeSetRangeStart",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("beforeSetRangeStart",...C)}).addLocalHook("beforeSetRangeStartOnly",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("beforeSetRangeStartOnly",...C)}).addLocalHook("beforeSetRangeEnd",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("beforeSetRangeEnd",...C)}).addLocalHook("beforeSelectColumns",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("beforeSelectColumns",...C)}).addLocalHook("afterSelectColumns",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("afterSelectColumns",...C)}).addLocalHook("beforeSelectRows",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("beforeSelectRows",...C)}).addLocalHook("afterSelectRows",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("afterSelectRows",...C)}).addLocalHook("beforeModifyTransformStart",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("modifyTransformStart",...C)}).addLocalHook("afterModifyTransformStart",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("afterModifyTransformStart",...C)}).addLocalHook("beforeModifyTransformFocus",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("modifyTransformFocus",...C)}).addLocalHook("afterModifyTransformFocus",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("afterModifyTransformFocus",...C)}).addLocalHook("beforeModifyTransformEnd",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("modifyTransformEnd",...C)}).addLocalHook("afterModifyTransformEnd",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("afterModifyTransformEnd",...C)}).addLocalHook("beforeRowWrap",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("beforeRowWrap",...C)}).addLocalHook("beforeColumnWrap",function(){for(var b=arguments.length,C=new Array(b),S=0;S<b;S++)C[S]=arguments[S];return i.runHooks("beforeColumnWrap",...C)}).addLocalHook("insertRowRequire",b=>this.alter("insert_row_above",b,1,"auto")).addLocalHook("insertColRequire",b=>this.alter("insert_col_start",b,1,"auto")),c={alter(b,C){var S,A;let L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=arguments.length>3?arguments[3]:void 0,$=arguments.length>4?arguments[4]:void 0;const Z=re=>{if(re.length===0)return[];const ue=[...re];return ue.sort((De,Ee)=>{let[ee]=De,[oe]=Ee;return ee===oe?0:ee>oe?1:-1}),si(ue,(De,Ee)=>{let[ee,oe]=Ee;const le=De[De.length-1],[je,ye]=le,xe=je+ye;if(ee<=xe){const O=Math.max(oe-(xe-ee),0);le[1]+=O}else De.push([ee,oe]);return De},[ue[0]])};switch(b){case"insert_row_below":case"insert_row_above":const re=s.countSourceRows();if(v.maxRows===re)return;const ue=b==="insert_row_below"?"below":"above";C=(S=C)!==null&&S!==void 0?S:ue==="below"?re:0;const{delta:ae,startPhysicalIndex:De}=a.createRow(C,L,{source:M,mode:ue});P.shiftRows(s.toVisualRow(De),ae);break;case"insert_col_start":case"insert_col_end":const Ee=b==="insert_col_end"?"end":"start";C=(A=C)!==null&&A!==void 0?A:Ee==="end"?s.countSourceCols():0;const{delta:ee,startPhysicalIndex:oe}=a.createCol(C,L,{source:M,mode:Ee});if(ee){if(Array.isArray(v.colHeaders)){const ye=[s.toVisualColumn(oe),0];ye.length+=ee,Array.prototype.splice.apply(v.colHeaders,ye)}P.shiftColumns(s.toVisualColumn(oe),ee)}break;case"remove_row":const le=ye=>{let xe=0;V(ye,O=>{let[D,F]=O;const Q=Hn(D)?s.countRows()-1:Math.max(D-xe,0);if(Number.isInteger(D)&&(D=Math.max(D-xe,0)),!a.removeRow(D,F,M))return;if(P.isSelected()){const{row:J}=s.getSelectedRangeLast().highlight;J>=D&&J<=D+F-1&&u.closeEditor(!0)}const ne=s.countRows();ne===0?P.deselect():M==="ContextMenu.removeRow"?P.refresh():P.shiftRows(D,-F);const X=v.fixedRowsTop;X>=Q+1&&(v.fixedRowsTop-=Math.min(F,X-Q));const Y=v.fixedRowsBottom;Y&&Q>=ne-Y&&(v.fixedRowsBottom-=Math.min(F,Y)),xe+=F})};Array.isArray(C)?le(Z(C)):le([[C,L]]);break;case"remove_col":const je=ye=>{let xe=0;V(ye,O=>{let[D,F]=O;const Q=Hn(D)?s.countCols()-1:Math.max(D-xe,0);let U=s.toPhysicalColumn(Q);if(Number.isInteger(D)&&(D=Math.max(D-xe,0)),!a.removeCol(D,F,M))return;if(P.isSelected()){const{col:J}=s.getSelectedRangeLast().highlight;J>=D&&J<=D+F-1&&u.closeEditor(!0)}s.countCols()===0?P.deselect():M==="ContextMenu.removeColumn"?P.refresh():P.shiftColumns(D,-F);const Y=v.fixedColumnsStart;Y>=Q+1&&(v.fixedColumnsStart-=Math.min(F,Y-Q)),Array.isArray(v.colHeaders)&&(typeof U>"u"&&(U=-1),v.colHeaders.splice(U,F)),xe+=F})};Array.isArray(C)?je(Z(C)):je([[C,L]]);break;default:throw new Error(`There is no such action "${b}"`)}s.view.render(),$||c.adjustRowsAndCols()},adjustRowsAndCols(){const b=v.minRows,C=v.minSpareRows,S=v.minCols,A=v.minSpareCols;if(b){const L=s.countRows();L<b&&a.createRow(L,b-L,{source:"auto"})}if(C){const L=s.countEmptyRows(!0);if(L<C){const M=C-L,$=Math.min(M,v.maxRows-s.countSourceRows());a.createRow(s.countRows(),$,{source:"auto"})}}{let L;(S||A)&&(L=s.countEmptyCols(!0));let M=s.countCols();if(S&&!v.columns&&M<S){const $=S-M;L+=$,a.createCol(M,$,{source:"auto"})}if(A&&!v.columns&&s.dataType==="array"&&L<A){M=s.countCols();const $=A-L,Z=Math.min($,v.maxCols-M);a.createCol(M,Z,{source:"auto"})}}s.view&&s.view.adjustElementsSize()},populateFromArray(b,C,S,A,L){let M,$,Z,re;const ue=[],ae={},De=[],Ee=b.row,ee=b.col;if($=C.length,$===0)return!1;let oe=0,le=0;switch(st(S)&&(oe=S.col-ee+1,le=S.row-Ee+1),L){case"shift_down":const je=Ub(C),ye=je.length,xe=Math.max(ye,oe),O=s.getData().slice(Ee),D=Ub(O).slice(ee,ee+xe);for(Z=0;Z<xe;Z+=1)if(Z<ye){for(M=0,$=je[Z].length;M<le-$;M+=1)je[Z].push(je[Z][M%$]);Z<D.length?De.push(je[Z].concat(D[Z])):De.push(je[Z].concat(new Array(O.length).fill(null)))}else De.push(je[Z%ye].concat(D[Z]));s.populateFromArray(Ee,ee,Ub(De));break;case"shift_right":const F=C.length,Q=Math.max(F,le),U=s.getData().slice(Ee).map(Ae=>Ae.slice(ee));for(M=0;M<Q;M+=1)if(M<F){for(Z=0,re=C[M].length;Z<oe-re;Z+=1)C[M].push(C[M][Z%re]);if(M<U.length)for(let Ae=0;Ae<U[M].length;Ae+=1)C[M].push(U[M][Ae]);else C[M].push(...new Array(U[0].length).fill(null))}else C.push(C[M%$].slice(0,Q).concat(U[M]));s.populateFromArray(Ee,ee,C);break;case"overwrite":default:ae.row=b.row,ae.col=b.col;let ne=0,X=0,Y=!0,J;const te=function(Fe){let lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const Et=C[Fe%C.length];return lt!==null?Et[lt%Et.length]:Et},ie=C.length,be=S?S.row-b.row+1:0;for(S?$=be:$=Math.max(ie,be),M=0;M<$&&!(S&&ae.row>S.row&&be>ie||!v.allowInsertRow&&ae.row>s.countRows()-1||ae.row>=v.maxRows);M++){const Ae=M-ne,Fe=te(Ae).length,lt=S?S.col-b.col+1:0;if(S?re=lt:re=Math.max(Fe,lt),ae.col=b.col,J=s.getCellMeta(ae.row,ae.col),(A==="CopyPaste.paste"||A==="Autofill.fill")&&J.skipRowOnPaste){ne+=1,ae.row+=1,$+=1;continue}for(X=0,Z=0;Z<re&&!(S&&ae.col>S.col&&lt>Fe||!v.allowInsertColumn&&ae.col>s.countCols()-1||ae.col>=v.maxCols);Z++){if(J=s.getCellMeta(ae.row,ae.col),(A==="CopyPaste.paste"||A==="Autofill.fill")&&J.skipColumnOnPaste){X+=1,ae.col+=1,re+=1;continue}if(J.readOnly&&A!=="UndoRedo.undo"){ae.col+=1;continue}const Et=Z-X;let ft=te(Ae,Et),qe=s.getDataAtCell(ae.row,ae.col);if(ft!==null&&typeof ft=="object")if(Array.isArray(ft)&&qe===null&&(qe=[]),qe===null||typeof qe!="object")Y=!1;else{const Tt=kg(Array.isArray(qe)?qe:qe[0]||qe),Un=kg(Array.isArray(ft)?ft:ft[0]||ft);dS(Tt,Un)||Array.isArray(Tt)&&Array.isArray(Un)?ft=sr(ft):Y=!1}else qe!==null&&typeof qe=="object"&&(Y=!1);Y&&ue.push([ae.row,ae.col,ft]),Y=!0,ae.col+=1}ae.row+=1}s.setDataAtCell(ue,null,null,A||"populateFromArray");break}}};function I(b){const C=Q8(b);ok(C)?(s.runHooks("beforeLanguageChange",C),y.language=C,s.runHooks("afterLanguageChange",C)):J8(b)}function N(b,C){const S=b==="className"?s.rootElement:s.table;if(f)ce(S,C);else{let A=[],L=[];y[b]&&(A=Array.isArray(y[b])?y[b]:nP(y[b])),C&&(L=Array.isArray(C)?C:nP(C));const M=tP(A,L),$=tP(L,A);M.length&&Ze(S,M),$.length&&ce(S,$)}y[b]=C}this.init=function(){l.setData(v.data),s.runHooks("beforeInit"),(sc()||xP())&&ce(s.rootElement,"mobile"),this.updateSettings(v,!0),this.view=new KRe(this),u=VP.getInstance(s,v,P),d=nTe(s),h=new eCe(s),GS(this)&&Yxe(s),s.runHooks("init"),this.forceFullRender=!0,this.view.render(),f&&s.rootElement.offsetParent===null&&Zz(s.rootElement,()=>{s.view._wt.wtOverlays.updateLastSpreaderSize(),s.render(),s.view.adjustElementsSize()}),typeof f=="object"&&(s.runHooks("afterChange",f[0],f[1]),f=!1),s.runHooks("afterInit")};function W(){let b=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue(){this.validatorsInQueue+=1,b=!1},removeValidatorFormQueue(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty(){},checkIfQueueIsEmpty(){this.validatorsInQueue===0&&b===!1&&(b=!0,this.onQueueEmpty(this.valid))}}}function j(b){const C=b.replace(",",".");return isNaN(parseFloat(C))===!1?parseFloat(C):b}function K(b,C,S){if(!b.length){S();return}const A=s.getActiveEditor(),L=new W;let M=!0;L.onQueueEmpty=()=>{A&&M&&A.cancelChanges(),S()};for(let $=b.length-1;$>=0;$--){const[Z,re,,ue]=b[$],ae=a.propToCol(re);let De;Number.isInteger(ae)?De=s.getCellMeta(Z,ae):De={...Object.getPrototypeOf(v),...v},De.type==="numeric"&&typeof ue=="string"&&G5(ue)&&(b[$][3]=j(ue)),s.getCellValidator(De)&&(L.addValidatorToQueue(),s.validateCell(b[$][3],De,function(Ee,ee){return function(oe){if(typeof oe!="boolean")throw new Error("Validation error: result is not boolean");oe===!1&&ee.allowInvalid===!1&&(M=!1,b.splice(Ee,1),ee.valid=!0),L.removeValidatorFormQueue()}}($,De),C))}L.checkIfQueueIsEmpty()}function H(b,C){for(let A=b.length-1;A>=0;A--){let L=!1;if(b[A]===null){b.splice(A,1);continue}if(!((b[A][2]===null||b[A][2]===void 0)&&(b[A][3]===null||b[A][3]===void 0))){if(v.allowInsertRow)for(;b[A][0]>s.countRows()-1;){const{delta:M}=a.createRow(void 0,void 0,{source:C});if(M===0){L=!0;break}}if(s.dataType==="array"&&(!v.columns||v.columns.length===0)&&v.allowInsertColumn)for(;a.propToCol(b[A][1])>s.countCols()-1;){const{delta:M}=a.createCol(void 0,void 0,{source:C});if(M===0){L=!0;break}}L||a.set(b[A][0],b[A][1],b[A][3])}}const S=b.length>0;if(s.forceFullRender=!0,S){c.adjustRowsAndCols(),s.runHooks("beforeChangeRender",b,C),u.closeEditor(),s.view.render(),u.prepareEditor(),s.view.adjustElementsSize(),s.runHooks("afterChange",b,C||"edit");const A=s.getActiveEditor();A&&Oe(A.refreshValue)&&A.refreshValue()}else s.view.render()}this._createCellCoords=function(b,C){return s.view._wt.createCellCoords(b,C)},this._createCellRange=function(b,C,S){return s.view._wt.createCellRange(b,C,S)},this.validateCell=function(b,C,S,A){let L=s.getCellValidator(C);function M($){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)||C.hidden===!0){S($);return}const re=C.visualCol,ue=C.visualRow,ae=s.getCell(ue,re,!0);if(ae&&ae.nodeName!=="TH"){const De=s.rowIndexMapper.getRenderableFromVisualIndex(ue),Ee=s.columnIndexMapper.getRenderableFromVisualIndex(re);s.view._wt.getSetting("cellRenderer",De,Ee,ae)}S($)}Ez(L)&&(L=function($){return function(Z,re){re($.test(Z))}}(L)),fn(L)?(b=s.runHooks("beforeValidate",b,C.visualRow,C.prop,A),s._registerImmediate(()=>{L.call(C,b,$=>{s&&($=s.runHooks("afterValidate",$,b,C.visualRow,C.prop,A),C.valid=$,M($),s.runHooks("postAfterValidate",$,b,C.visualRow,C.prop,A))})})):s._registerImmediate(()=>{C.valid=!0,M(C.valid,!1)})};function k(b,C,S){return Array.isArray(b)?b:[[b,C,S]]}function B(b,C){const S=s.getActiveEditor(),A=s.runHooks("beforeChange",b,C||"edit"),L=b.filter(M=>M!==null);return A===!1||L.length===0?(S&&S.cancelChanges(),[]):L}this.setDataAtCell=function(b,C,S,A){const L=k(b,C,S),M=[];let $=A,Z,re,ue;for(Z=0,re=L.length;Z<re;Z++){if(typeof L[Z]!="object")throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if(typeof L[Z][1]!="number")throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");L[Z][1]>=this.countCols()?ue=L[Z][1]:ue=a.colToProp(L[Z][1]),M.push([L[Z][0],ue,l.getAtCell(this.toPhysicalRow(L[Z][0]),L[Z][1]),L[Z][2]])}!$&&typeof b=="object"&&($=C);const ae=B(M,A);s.runHooks("afterSetDataAtCell",ae,$),K(ae,$,()=>{H(ae,$)})},this.setDataAtRowProp=function(b,C,S,A){const L=k(b,C,S),M=[];let $=A,Z,re;for(Z=0,re=L.length;Z<re;Z++)M.push([L[Z][0],L[Z][1],l.getAtCell(this.toPhysicalRow(L[Z][0]),L[Z][1]),L[Z][2]]);!$&&typeof b=="object"&&($=C);const ue=B(M,A);s.runHooks("afterSetDataAtRowProp",ue,$),K(ue,$,()=>{H(ue,$)})},this.listen=function(){s&&!s.isListening()&&(yk.forEach(b=>{s!==b&&b.unlisten()}),wk=s.guid,s.runHooks("afterListen"))},this.unlisten=function(){this.isListening()&&(wk=null,s.runHooks("afterUnlisten"))},this.isListening=function(){return wk===s.guid},this.destroyEditor=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;u.closeEditor(b),s.view.render(),C&&P.isSelected()&&u.prepareEditor()},this.populateFromArray=function(b,C,S,A,L,M,$){if(!(typeof S=="object"&&typeof S[0]=="object"))throw new Error("populateFromArray parameter `input` must be an array of arrays");const Z=typeof A=="number"?s._createCellCoords(A,L):null;return c.populateFromArray(s._createCellCoords(b,C),S,Z,M,$)},this.spliceCol=function(b,C,S){for(var A=arguments.length,L=new Array(A>3?A-3:0),M=3;M<A;M++)L[M-3]=arguments[M];return a.spliceCol(b,C,S,...L)},this.spliceRow=function(b,C,S){for(var A=arguments.length,L=new Array(A>3?A-3:0),M=3;M<A;M++)L[M-3]=arguments[M];return a.spliceRow(b,C,S,...L)},this.getSelected=function(){if(P.isSelected())return pt(P.getSelectedRange(),b=>{let{from:C,to:S}=b;return[C.row,C.col,S.row,S.col]})},this.getSelectedLast=function(){const b=this.getSelected();let C;return b&&b.length>0&&(C=b[b.length-1]),C},this.getSelectedRange=function(){if(P.isSelected())return Array.from(P.getSelectedRange())},this.getSelectedRangeLast=function(){const b=this.getSelectedRange();let C;return b&&b.length>0&&(C=b[b.length-1]),C},this.emptySelectedCells=function(b){if(!P.isSelected()||this.countRows()===0||this.countCols()===0)return;const C=[];V(P.getSelectedRange(),S=>{if(S.isSingleHeader())return;const A=S.getTopStartCorner(),L=S.getBottomEndCorner();He(A.row,L.row,M=>{He(A.col,L.col,$=>{this.getCellMeta(M,$).readOnly||C.push([M,$,null])})})}),C.length>0&&this.setDataAtCell(C,b)},this.isRenderSuspended=function(){return this.renderSuspendedCounter>0},this.suspendRender=function(){this.renderSuspendedCounter+=1},this.resumeRender=function(){const b=this.renderSuspendedCounter-1;this.renderSuspendedCounter=Math.max(b,0),!this.isRenderSuspended()&&b===this.renderSuspendedCounter&&(this.renderCall?this.render():s.view.render())},this.render=function(){this.view&&(this.renderCall=!0,this.forceFullRender=!0,this.isRenderSuspended()||s.view.render())},this.batchRender=function(b){this.suspendRender();const C=b();return this.resumeRender(),C},this.isExecutionSuspended=function(){return this.executionSuspendedCounter>0},this.suspendExecution=function(){this.executionSuspendedCounter+=1,this.columnIndexMapper.suspendOperations(),this.rowIndexMapper.suspendOperations()},this.resumeExecution=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const C=this.executionSuspendedCounter-1;this.executionSuspendedCounter=Math.max(C,0),(!this.isExecutionSuspended()&&C===this.executionSuspendedCounter||b)&&(this.columnIndexMapper.resumeOperations(),this.rowIndexMapper.resumeOperations())},this.batchExecution=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.suspendExecution();const S=b();return this.resumeExecution(C),S},this.batch=function(b){this.suspendRender(),this.suspendExecution();const C=b();return this.resumeExecution(),this.resumeRender(),C},this.refreshDimensions=function(){if(!s.view)return;const{width:b,height:C}=s.view.getLastSize(),{width:S,height:A}=s.rootElement.getBoundingClientRect(),L=S!==b||A!==C;s.runHooks("beforeRefreshDimensions",{width:b,height:C},{width:S,height:A},L)!==!1&&((L||s.view._wt.wtOverlays.scrollableElement===s.rootWindow)&&(s.view.setLastSize(S,A),s.render()),s.runHooks("afterRefreshDimensions",{width:b,height:C},{width:S,height:A},L))},this.updateData=function(b,C){R4(b,S=>{a=S},S=>{a=S,s.columnIndexMapper.fitToLength(this.getInitialColumnCount()),s.rowIndexMapper.fitToLength(this.countSourceRows()),c.adjustRowsAndCols(),P.refresh()},{hotInstance:s,dataMap:a,dataSource:l,internalSource:"updateData",source:C,metaManager:m,firstRun:f})},this.loadData=function(b,C){R4(b,S=>{a=S},()=>{m.clearCellsCache(),s.initIndexMappers(),c.adjustRowsAndCols(),P.refresh(),f&&(f=[null,"loadData"])},{hotInstance:s,dataMap:a,dataSource:l,internalSource:"loadData",source:C,metaManager:m,firstRun:f})},this.getInitialColumnCount=function(){const b=v.columns;let C=0;if(Array.isArray(b))C=b.length;else if(fn(b))if(s.dataType==="array"){const S=this.countSourceCols();for(let A=0;A<S;A+=1)b(A)&&(C+=1)}else(s.dataType==="object"||s.dataType==="function")&&(C=a.colToPropCache.length);else if(Oe(v.dataSchema)){const S=a.getSchema();C=Array.isArray(S)?S.length:gS(S)}else C=this.countSourceCols();return C},this.initIndexMappers=function(){this.columnIndexMapper.initToLength(this.getInitialColumnCount()),this.rowIndexMapper.initToLength(this.countSourceRows())},this.getData=function(b,C,S,A){return hn(b)?a.getAll():a.getRange(s._createCellCoords(b,C),s._createCellCoords(S,A),a.DESTINATION_RENDERER)},this.getCopyableText=function(b,C,S,A){return a.getCopyableText(s._createCellCoords(b,C),s._createCellCoords(S,A))},this.getCopyableData=function(b,C){return a.getCopyable(b,a.colToProp(C))},this.getSchema=function(){return a.getSchema()},this.updateSettings=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const S=(f?s.loadData:s.updateData).bind(this);let A=!1,L,M;if(Oe(b.rows))throw new Error('The "rows" setting is no longer supported. Do you mean startRows, minRows or maxRows?');if(Oe(b.cols))throw new Error('The "cols" setting is no longer supported. Do you mean startCols, minCols or maxCols?');if(Oe(b.ganttChart))throw new Error('Since 8.0.0 the "ganttChart" setting is no longer supported.');for(L in b)L==="data"||(L==="language"?I(b.language):L==="className"?N("className",b.className):L==="tableClassName"&&s.table?(N("tableClassName",b.tableClassName),s.view._wt.wtOverlays.syncOverlayTableClassNames()):Pe.getSingleton().isRegistered(L)||Pe.getSingleton().isDeprecated(L)?(fn(b[L])||Array.isArray(b[L]))&&(b[L].initialHook=!0,s.addHook(L,b[L])):!C&&In(b,L)&&(y[L]=b[L]));b.data===void 0&&v.data===void 0?S(null,"updateSettings"):b.data!==void 0?S(b.data,"updateSettings"):b.columns!==void 0&&(a.createMap(),s.initIndexMappers());const $=s.countCols(),Z=v.columns;if(Z&&fn(Z)&&(A=!0),(b.cell!==void 0||b.cells!==void 0||b.columns!==void 0)&&m.clearCache(),$>0)for(L=0,M=0;L<$;L++){if(Z){const ae=A?Z(L):Z[M];ae&&m.updateColumnMeta(M,ae)}M+=1}Oe(b.cell)&&ot(b.cell,ae=>{s.setCellMetaObject(ae.row,ae.col,ae)}),s.runHooks("afterCellMetaReset");let re=s.rootElement.style.height;re!==""&&(re=parseInt(s.rootElement.style.height,10));let ue=b.height;if(fn(ue)&&(ue=ue()),C&&s.rootElement.getAttribute("style")&&s.rootElement.setAttribute("data-initialstyle",s.rootElement.getAttribute("style")),ue===null){const ae=s.rootElement.getAttribute("data-initialstyle");ae&&(ae.indexOf("height")>-1||ae.indexOf("overflow")>-1)?s.rootElement.setAttribute("style",ae):(s.rootElement.style.height="",s.rootElement.style.overflow="")}else ue!==void 0&&(s.rootElement.style.height=isNaN(ue)?`${ue}`:`${ue}px`,s.rootElement.style.overflow="hidden");if(typeof b.width<"u"){let ae=b.width;fn(ae)&&(ae=ae()),s.rootElement.style.width=isNaN(ae)?`${ae}`:`${ae}px`}C||(s.view&&(s.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked(),s.view._wt.exportSettingsAsClassNames()),s.runHooks("afterUpdateSettings",b)),c.adjustRowsAndCols(),s.view&&!f&&(s.forceFullRender=!0,s.view.render(),s.view._wt.wtOverlays.adjustElementsSize()),!C&&s.view&&(re===""||ue===""||ue===void 0)&&re!==ue&&s.view._wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){const b=s.getSelectedLast();if(v.getValue){if(fn(v.getValue))return v.getValue.call(s);if(b)return s.getData()[b[0][0]][v.getValue]}else if(b)return s.getDataAtCell(b[0],b[1])},this.getSettings=function(){return v},this.clear=function(){this.selectAll(),this.emptySelectedCells()},this.alter=function(b,C,S,A,L){c.alter(b,C,S,A,L)},this.getCell=function(b,C){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,A=C,L=b;if(C>=0){if(this.columnIndexMapper.isHidden(this.toPhysicalColumn(C)))return null;A=this.columnIndexMapper.getRenderableFromVisualIndex(C)}if(b>=0){if(this.rowIndexMapper.isHidden(this.toPhysicalRow(b)))return null;L=this.rowIndexMapper.getRenderableFromVisualIndex(b)}return L===null||A===null||L===void 0||A===void 0?null:s.view.getCellAtCoords(s._createCellCoords(L,A),S)},this.getCoords=function(b){const C=this.view._wt.wtTable.getCoords(b);if(C===null)return null;const{row:S,col:A}=C;let L=S,M=A;return S>=0&&(L=this.rowIndexMapper.getVisualFromRenderableIndex(S)),A>=0&&(M=this.columnIndexMapper.getVisualFromRenderableIndex(A)),s._createCellCoords(L,M)},this.colToProp=function(b){return a.colToProp(b)},this.propToCol=function(b){return a.propToCol(b)},this.toVisualRow=b=>this.rowIndexMapper.getVisualFromPhysicalIndex(b),this.toVisualColumn=b=>this.columnIndexMapper.getVisualFromPhysicalIndex(b),this.toPhysicalRow=b=>this.rowIndexMapper.getPhysicalFromVisualIndex(b),this.toPhysicalColumn=b=>this.columnIndexMapper.getPhysicalFromVisualIndex(b),this.getDataAtCell=function(b,C){return a.get(b,a.colToProp(C))},this.getDataAtRowProp=function(b,C){return a.get(b,C)},this.getDataAtCol=function(b){const C=[],S=a.getRange(s._createCellCoords(0,b),s._createCellCoords(v.data.length-1,b),a.DESTINATION_RENDERER);for(let A=0;A<S.length;A+=1)for(let L=0;L<S[A].length;L+=1)C.push(S[A][L]);return C},this.getDataAtProp=function(b){const C=[],S=a.getRange(s._createCellCoords(0,a.propToCol(b)),s._createCellCoords(v.data.length-1,a.propToCol(b)),a.DESTINATION_RENDERER);for(let A=0;A<S.length;A+=1)for(let L=0;L<S[A].length;L+=1)C.push(S[A][L]);return C},this.getSourceData=function(b,C,S,A){let L;return b===void 0?L=l.getData():L=l.getByRange(s._createCellCoords(b,C),s._createCellCoords(S,A)),L},this.getSourceDataArray=function(b,C,S,A){let L;return b===void 0?L=l.getData(!0):L=l.getByRange(s._createCellCoords(b,C),s._createCellCoords(S,A),!0),L},this.getSourceDataAtCol=function(b){return l.getAtColumn(b)},this.setSourceDataAtCell=function(b,C,S,A){const L=k(b,C,S),M=this.hasHook("afterSetSourceDataAtCell"),$=[];M&&V(L,re=>{let[ue,ae,De]=re;$.push([ue,ae,l.getAtCell(ue,ae),De])}),V(L,re=>{let[ue,ae,De]=re;l.setAtCell(ue,ae,De)}),M&&this.runHooks("afterSetSourceDataAtCell",$,A),this.render();const Z=s.getActiveEditor();Z&&Oe(Z.refreshValue)&&Z.refreshValue()},this.getSourceDataAtRow=function(b){return l.getAtRow(b)},this.getSourceDataAtCell=function(b,C){return l.getAtCell(b,C)},this.getDataAtRow=function(b){return a.getRange(s._createCellCoords(b,0),s._createCellCoords(b,this.countCols()-1),a.DESTINATION_RENDERER)[0]||[]},this.getDataType=function(b,C,S,A){const L=b===void 0?[0,0,this.countRows(),this.countCols()]:[b,C,S,A],[M,$]=L;let[,,Z,re]=L,ue=null,ae=null;Z===void 0&&(Z=M),re===void 0&&(re=$);let De="mixed";return He(Math.max(Math.min(M,Z),0),Math.max(M,Z),Ee=>{let ee=!0;return He(Math.max(Math.min($,re),0),Math.max($,re),oe=>(ae=this.getCellMeta(Ee,oe).type,ue?ee=ue===ae:ue=ae,ee)),De=ee?ae:"mixed",ee}),De},this.removeCellMeta=function(b,C,S){const[A,L]=[this.toPhysicalRow(b),this.toPhysicalColumn(C)];let M=m.getCellMetaKeyValue(A,L,S);s.runHooks("beforeRemoveCellMeta",b,C,S,M)!==!1&&(m.removeCellMeta(A,L,S),s.runHooks("afterRemoveCellMeta",b,C,S,M)),M=null},this.spliceCellsMeta=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;for(var S=arguments.length,A=new Array(S>2?S-2:0),L=2;L<S;L++)A[L-2]=arguments[L];if(A.length>0&&!Array.isArray(A[0]))throw new Error("The 3rd argument (cellMetaRows) has to be passed as an array of cell meta objects array.");C>0&&m.removeRow(this.toPhysicalRow(b),C),A.length>0&&V(A.reverse(),M=>{m.createRow(this.toPhysicalRow(b)),V(M,($,Z)=>this.setCellMetaObject(b,Z,$))}),s.render()},this.setCellMetaObject=function(b,C,S){typeof S=="object"&&ot(S,(A,L)=>{this.setCellMeta(b,C,L,A)})},this.setCellMeta=function(b,C,S,A){if(s.runHooks("beforeSetCellMeta",b,C,S,A)===!1)return;let M=b,$=C;b<this.countRows()&&(M=this.toPhysicalRow(b)),C<this.countCols()&&($=this.toPhysicalColumn(C)),m.setCellMeta(M,$,S,A),s.runHooks("afterSetCellMeta",b,C,S,A)},this.getCellsMeta=function(){return m.getCellsMeta()},this.getCellMeta=function(b,C){let S=this.toPhysicalRow(b),A=this.toPhysicalColumn(C);return S===null&&(S=b),A===null&&(A=C),m.getCellMeta(S,A,{visualRow:b,visualColumn:C})},this.getColumnMeta=function(b){return m.getColumnMeta(this.toPhysicalColumn(b))},this.getCellMetaAtRow=function(b){return m.getCellsMetaAtRow(b)},this.isColumnModificationAllowed=function(){return!(s.dataType==="object"||v.columns)},this.getCellRenderer=function(b,C){const S=typeof b=="number"?s.getCellMeta(b,C).renderer:b.renderer;return typeof S=="string"?MS(S):hn(S)?MS("text"):S},this.getCellEditor=function(b,C){const S=typeof b=="number"?s.getCellMeta(b,C).editor:b.editor;return typeof S=="string"?CS(S):hn(S)?CS("text"):S},this.getCellValidator=function(b,C){const S=typeof b=="number"?s.getCellMeta(b,C).validator:b.validator;return typeof S=="string"?nI(S):S},this.validateCells=function(b){this._validateCells(b)},this.validateRows=function(b,C){if(!Array.isArray(b))throw new Error("validateRows parameter `rows` must be an array");this._validateCells(C,b)},this.validateColumns=function(b,C){if(!Array.isArray(b))throw new Error("validateColumns parameter `columns` must be an array");this._validateCells(C,void 0,b)},this._validateCells=function(b,C,S){const A=new W;b&&(A.onQueueEmpty=b);let L=s.countRows()-1;for(;L>=0;){if(C!==void 0&&C.indexOf(L)===-1){L-=1;continue}let M=s.countCols()-1;for(;M>=0;){if(S!==void 0&&S.indexOf(M)===-1){M-=1;continue}A.addValidatorToQueue(),s.validateCell(s.getDataAtCell(L,M),s.getCellMeta(L,M),$=>{if(typeof $!="boolean")throw new Error("Validation error: result is not boolean");$===!1&&(A.valid=!1),A.removeValidatorFormQueue()},"validateCells"),M-=1}L-=1}A.checkIfQueueIsEmpty()},this.getRowHeader=function(b){let C=v.rowHeaders,S=b;return S!==void 0&&(S=s.runHooks("modifyRowHeader",S)),S===void 0?(C=[],He(s.countRows()-1,A=>{C.push(s.getRowHeader(A))})):Array.isArray(C)&&C[S]!==void 0?C=C[S]:fn(C)?C=C(S):C&&typeof C!="string"&&typeof C!="number"&&(C=S+1),C},this.hasRowHeaders=function(){return!!v.rowHeaders},this.hasColHeaders=function(){if(v.colHeaders!==void 0&&v.colHeaders!==null)return!!v.colHeaders;for(let b=0,C=s.countCols();b<C;b++)if(s.getColHeader(b))return!0;return!1},this.getColHeader=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;const S=s.runHooks("modifyColHeader",b);if(S===void 0){const Z=[],re=s.countCols();for(let ue=0;ue<re;ue++)Z.push(s.getColHeader(ue));return Z}let A=v.colHeaders;const L=function(Z){const re=[],ue=s.countCols();let ae=0;for(;ae<ue;ae++)fn(v.columns)&&v.columns(ae)&&re.push(ae);return re[Z]},M=s.toPhysicalColumn(S),$=L(M);return v.colHeaders===!1?A=null:v.columns&&fn(v.columns)&&v.columns($)&&v.columns($).title?A=v.columns($).title:v.columns&&v.columns[M]&&v.columns[M].title?A=v.columns[M].title:Array.isArray(v.colHeaders)&&v.colHeaders[M]!==void 0?A=v.colHeaders[M]:fn(v.colHeaders)?A=v.colHeaders(M):v.colHeaders&&typeof v.colHeaders!="string"&&typeof v.colHeaders!="number"&&(A=XS(S)),A=s.runHooks("modifyColumnHeaderValue",A,b,C),A},this._getColWidthFromSettings=function(b){let C;if(b>=0&&(C=s.getCellMeta(0,b).width),(C===void 0||C===v.width)&&(C=v.colWidths),C!=null){switch(typeof C){case"object":C=C[b];break;case"function":C=C(b);break}typeof C=="string"&&(C=parseInt(C,10))}return C},this.getColWidth=function(b){let C=s._getColWidthFromSettings(b);return C=s.runHooks("modifyColWidth",C,b),C===void 0&&(C=AS),C},this._getRowHeightFromSettings=function(b){let C=v.rowHeights;if(C!=null){switch(typeof C){case"object":C=C[b];break;case"function":C=C(b);break}typeof C=="string"&&(C=parseInt(C,10))}return C},this.getRowHeight=function(b){let C=s._getRowHeightFromSettings(b);return C=s.runHooks("modifyRowHeight",C,b),C},this.countSourceRows=function(){return l.countRows()},this.countSourceCols=function(){return l.countFirstRowKeys()},this.countRows=function(){return a.getLength()},this.countCols=function(){const b=v.maxCols,C=this.columnIndexMapper.getNotTrimmedIndexesLength();return Math.min(b,C)},this.countRenderedRows=function(){return s.view._wt.drawn?s.view._wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return s.view._wt.drawn?s.view._wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return s.view._wt.drawn?s.view._wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return s.view._wt.drawn?s.view._wt.wtTable.getVisibleColumnsCount():-1},this.countRowHeaders=function(){return this.view.getRowHeadersCount()},this.countColHeaders=function(){return this.view.getColumnHeadersCount()},this.countEmptyRows=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=0;return XP(s.countRows()-1,S=>{if(s.isEmptyRow(S))C+=1;else if(b===!0)return!1}),C},this.countEmptyCols=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=0;return XP(s.countCols()-1,S=>{if(s.isEmptyCol(S))C+=1;else if(b===!0)return!1}),C},this.isEmptyRow=function(b){return v.isEmptyRow.call(s,b)},this.isEmptyCol=function(b){return v.isEmptyCol.call(s,b)},this.selectCell=function(b,C,S,A){let L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,M=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;return hn(b)||hn(C)?!1:this.selectCells([[b,C,S,A]],L,M)},this.selectCells=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[[]],C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;C===!1&&d.suspend();const A=P.selectCells(b);return A&&S&&s.listen(),d.resume(),A},this.selectColumns=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,S=arguments.length>2?arguments[2]:void 0;return P.selectColumns(b,C,S)},this.selectRows=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,S=arguments.length>2?arguments[2]:void 0;return P.selectRows(b,C,S)},this.deselectCell=function(){P.deselect()},this.selectAll=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,S=arguments.length>2?arguments[2]:void 0;d.skipNextScrollCycle(),P.selectAll(b,C,S)};const G=(b,C)=>b.getNearestNotHiddenIndex(C,1,!0);this.scrollViewportTo=function(b){var C;if(typeof b=="number"){var S;b={row:arguments[0],col:arguments[1],verticalSnap:arguments[2]?"bottom":"top",horizontalSnap:arguments[3]?"end":"start",considerHiddenIndexes:(S=arguments[4])!==null&&S!==void 0?S:!0}}const{row:A,col:L,verticalSnap:M,horizontalSnap:$,considerHiddenIndexes:Z}=(C=b)!==null&&C!==void 0?C:{};let re,ue,ae,De;M!==void 0&&(re=M==="top",ue=!re),$!==void 0&&(ae=$==="start",De=!ae);let Ee=A,ee=L;if(Z===void 0||Z){const je=Number.isInteger(A)&&A>=0,ye=Number.isInteger(L)&&L>=0,xe=je?G(this.rowIndexMapper,A):void 0,O=ye?G(this.columnIndexMapper,L):void 0;if(xe===null||O===null)return!1;Ee=je?s.rowIndexMapper.getRenderableFromVisualIndex(xe):A,ee=ye?s.columnIndexMapper.getRenderableFromVisualIndex(O):L}const oe=Number.isInteger(Ee),le=Number.isInteger(ee);return oe&&Ee>=0&&le&&ee>=0?s.view.scrollViewport(s._createCellCoords(Ee,ee),re,De,ue,ae):oe&&Ee>=0&&(le&&ee<0||!le)?s.view.scrollViewportVertically(Ee,re,ue):le&&ee>=0&&(oe&&Ee<0||!oe)?s.view.scrollViewportHorizontally(ee,De,ae):!1},this.scrollToFocusedCell=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};if(!this.selection.isSelected())return;this.addHookOnce("afterScroll",b);const{highlight:C}=this.getSelectedRangeLast();this.scrollViewportTo(C.toObject())?this.view.render():(this.removeHook("afterScroll",b),this._registerImmediate(()=>b()))},this.destroy=function(){if(s._clearTimeouts(),s._clearImmediates(),s.view&&s.view.destroy(),l&&l.destroy(),l=null,this.getShortcutManager().destroy(),m.clearCache(),yk.delete(this.guid),GS(s)){const b=this.rootDocument.querySelector(".hot-display-license-info");b&&b.parentNode.removeChild(b)}$o(s.rootElement),o.destroy(),u&&u.destroy(),s.batchExecution(()=>{s.rowIndexMapper.unregisterAll(),s.columnIndexMapper.unregisterAll(),w.getItems().forEach(b=>{let[,C]=b;C.destroy()}),w.clear(),s.runHooks("afterDestroy")},!0),Pe.getSingleton().destroy(s),ot(s,(b,C,S)=>{fn(b)?S[C]=z(C):C!=="guid"&&(S[C]=null)}),s.isDestroyed=!0,a&&a.destroy(),a=null,c=null,P=null,u=null,s=null};function z(b){return()=>{throw new Error(`The "${b}" method cannot be called because this Handsontable instance has been destroyed`)}}this.getActiveEditor=function(){return u.getActiveEditor()},this.getFirstRenderedVisibleRow=function(){return s.view.getFirstRenderedVisibleRow()},this.getLastRenderedVisibleRow=function(){return s.view.getLastRenderedVisibleRow()},this.getFirstRenderedVisibleColumn=function(){return s.view.getFirstRenderedVisibleColumn()},this.getLastRenderedVisibleColumn=function(){return s.view.getLastRenderedVisibleColumn()},this.getFirstFullyVisibleRow=function(){return s.view.getFirstFullyVisibleRow()},this.getLastFullyVisibleRow=function(){return s.view.getLastFullyVisibleRow()},this.getFirstFullyVisibleColumn=function(){return s.view.getFirstFullyVisibleColumn()},this.getLastFullyVisibleColumn=function(){return s.view.getLastFullyVisibleColumn()},this.getFirstPartiallyVisibleRow=function(){return s.view.getFirstPartiallyVisibleRow()},this.getLastPartiallyVisibleRow=function(){return s.view.getLastPartiallyVisibleRow()},this.getFirstPartiallyVisibleColumn=function(){return s.view.getFirstPartiallyVisibleColumn()},this.getLastPartiallyVisibleColumn=function(){return s.view.getLastPartiallyVisibleColumn()},this.getPlugin=function(b){const C=rr(b);return C==="UndoRedo"?this.undoRedo:w.getItem(C)},this.getPluginName=function(b){return b===this.undoRedo?this.undoRedo.constructor.PLUGIN_KEY:w.getId(b)},this.getInstance=function(){return s},this.addHook=function(b,C,S){Pe.getSingleton().add(b,C,s,S)},this.hasHook=function(b){return Pe.getSingleton().has(b,s)||Pe.getSingleton().has(b)},this.addHookOnce=function(b,C,S){Pe.getSingleton().once(b,C,s,S)},this.removeHook=function(b,C){Pe.getSingleton().remove(b,C,s)},this.runHooks=function(b,C,S,A,L,M,$){return Pe.getSingleton().run(s,b,C,S,A,L,M,$)},this.getTranslatedPhrase=function(b,C){return s4(v.language,b,C)},this.toHTML=()=>KP(this),this.toTableElement=()=>{const b=this.rootDocument.createElement("div");return b.insertAdjacentHTML("afterbegin",KP(this)),b.firstElementChild},this.timeouts=[],this._registerTimeout=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=b;typeof S=="function"&&(S=setTimeout(S,C)),this.timeouts.push(S)},this._clearTimeouts=function(){V(this.timeouts,b=>{clearTimeout(b)})},this.immediates=[],this._registerImmediate=function(b){this.immediates.push(setImmediate(b))},this._clearImmediates=function(){V(this.immediates,b=>{clearImmediate(b)})},this._getEditorManager=function(){return u},this.isRtl=function(){return s.rootWindow.getComputedStyle(s.rootElement).direction==="rtl"},this.isLtr=function(){return!s.isRtl()},this.getDirectionFactor=function(){return s.isLtr()?1:-1};const se=lTe({handleEvent(){return s.isListening()},beforeKeyDown:b=>this.runHooks("beforeKeyDown",b),afterKeyDown:b=>{this.isDestroyed||s.runHooks("afterDocumentKeyDown",b)},ownerWindow:this.rootWindow});this.addHook("beforeOnCellMouseDown",b=>{b.ctrlKey===!1&&b.metaKey===!1&&se.releasePressedKeys()}),this.getShortcutManager=function(){return se},this.getFocusManager=function(){return h},tI().forEach(b=>{const C=av(b);w.addItem(b,new C(this))}),Uxe(s),se.setActiveContextName("grid"),Pe.getSingleton().run(s,"construct")}function L4(n,e,t){n.addEventListener(e,t,!1)}function H4(n,e,t){n.removeEventListener(e,t,!1)}function $4(n){return n.ownerDocument.defaultView.getComputedStyle(n)}function cTe(n){const e={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},t=n.body,i=n.createTextNode(""),r=n.createElement("span");let s;function o(){i.textContent=s.value,r.style.position="absolute",r.style.fontSize=$4(s).fontSize,r.style.fontFamily=$4(s).fontFamily,r.style.whiteSpace="pre",t.appendChild(r);const u=r.clientWidth+2;t.removeChild(r);const h=s.style;h.height=`${e.minHeight}px`,e.minWidth>u?h.width=`${e.minWidth}px`:u>e.maxWidth?h.width=`${e.maxWidth}px`:h.width=`${u}px`;const d=s.scrollHeight?s.scrollHeight-1:0;e.minHeight>d?h.height=`${e.minHeight}px`:e.maxHeight<d?(h.height=`${e.maxHeight}px`,h.overflowY="visible"):h.height=`${d}px`}function a(){n.defaultView.setTimeout(o,0)}function l(u){if(u&&u.minHeight)if(u.minHeight==="inherit")e.minHeight=s.clientHeight;else{const h=parseInt(u.minHeight,10);isNaN(h)||(e.minHeight=h)}if(u&&u.maxHeight)if(u.maxHeight==="inherit")e.maxHeight=s.clientHeight;else{const h=parseInt(u.maxHeight,10);isNaN(h)||(e.maxHeight=h)}if(u&&u.minWidth)if(u.minWidth==="inherit")e.minWidth=s.clientWidth;else{const h=parseInt(u.minWidth,10);isNaN(h)||(e.minWidth=h)}if(u&&u.maxWidth)if(u.maxWidth==="inherit")e.maxWidth=s.clientWidth;else{const h=parseInt(u.maxWidth,10);isNaN(h)||(e.maxWidth=h)}r.firstChild||(r.className="autoResize",r.style.display="inline-block",r.appendChild(i))}function c(u,h){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;s=u,l(h),s.nodeName==="TEXTAREA"&&(s.style.resize="none",s.style.height=`${e.minHeight}px`,s.style.minWidth=`${e.minWidth}px`,s.style.maxWidth=`${e.maxWidth}px`,s.style.overflowY="hidden"),d&&(L4(s,"input",o),L4(s,"keydown",a)),o()}return{init:c,resize:o,unObserve(){H4(s,"input",o),H4(s,"keydown",a)}}}function F4(n,e){const t=pP(e),i=e.value.split(`
`);let r=t,s=0;for(let o=0;o<i.length;o++){const a=i[o];o!==0&&(s+=i[o-1].length+1);const l=s+a.length;if(n==="home"?r=s:n==="end"&&(r=l),t<=l)break}Zb(e,r)}function kd(n,e,t){return(e=uTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uTe(n){var e=hTe(n,"string");return typeof e=="symbol"?e:e+""}function hTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const dTe="ht_editor_visible",A_="ht_editor_hidden",B4="textEditor",fTe="text";class Dd extends Zg{static get EDITOR_TYPE(){return fTe}constructor(e){super(e),kd(this,"eventManager",new Ys(this)),kd(this,"autoResize",cTe(this.hot.rootDocument)),kd(this,"TEXTAREA",void 0),kd(this,"textareaStyle",void 0),kd(this,"TEXTAREA_PARENT",void 0),kd(this,"textareaParentStyle",void 0),kd(this,"layerClass",void 0),this.eventManager=new Ys(this),this.createElements(),this.bindEvents(),this.hot.addHookOnce("afterDestroy",()=>this.destroy())}getValue(){return this.TEXTAREA.value}setValue(e){this.TEXTAREA.value=e}open(){this.refreshDimensions(),this.showEditableElement(),this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this.autoResize.unObserve(),Bz(this.hot.rootDocument.activeElement,this.hot.rootElement)&&this.hot.listen(),this.hideEditableElement(),this.unregisterShortcuts()}prepare(e,t,i,r,s,o){const a=this.state;if(super.prepare(e,t,i,r,s,o),!o.readOnly){this.refreshDimensions(!0);const{allowInvalid:l}=o;l&&!this.isOpened()&&(this.TEXTAREA.value=""),a!==Qn.FINISHED&&!this.isOpened()&&this.hideEditableElement()}}beginEditing(e,t){this.state===Qn.VIRGIN&&(this.TEXTAREA.value="",super.beginEditing(e,t))}focus(){this.TEXTAREA.select(),Zb(this.TEXTAREA,this.TEXTAREA.value.length)}createElements(){const{rootDocument:e}=this.hot;this.TEXTAREA=e.createElement("TEXTAREA"),ze(this.TEXTAREA,[["data-hot-input",""],Ig(-1)]),ce(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.textareaStyle.overflowY="visible",this.TEXTAREA_PARENT=e.createElement("DIV"),ce(this.TEXTAREA_PARENT,"handsontableInputHolder"),Ue(this.TEXTAREA_PARENT,this.layerClass)&&Ze(this.TEXTAREA_PARENT,this.layerClass),ce(this.TEXTAREA_PARENT,A_),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.hot.rootElement.appendChild(this.TEXTAREA_PARENT)}hideEditableElement(){S5()&&(this.textareaStyle.textIndent="-99999px"),this.textareaStyle.overflowY="visible",this.textareaParentStyle.opacity="0",this.textareaParentStyle.height="1px",Ze(this.TEXTAREA_PARENT,this.layerClass),ce(this.TEXTAREA_PARENT,A_)}showEditableElement(){this.textareaParentStyle.height="",this.textareaParentStyle.overflow="",this.textareaParentStyle.position="",this.textareaParentStyle[this.hot.isRtl()?"left":"right"]="auto",this.textareaParentStyle.opacity="1",this.textareaStyle.textIndent="";const e=this.TEXTAREA_PARENT.childNodes;let t=!1;He(e.length-1,i=>{const r=e[i];if(Ue(r,"handsontableEditor"))return t=!0,!1}),Ue(this.TEXTAREA_PARENT,A_)&&Ze(this.TEXTAREA_PARENT,A_),t?(this.layerClass=dTe,ce(this.TEXTAREA_PARENT,this.layerClass)):(this.layerClass=this.getEditedCellsLayerClass(),ce(this.TEXTAREA_PARENT,this.layerClass))}refreshValue(){const e=this.hot.toPhysicalRow(this.row),t=this.hot.getSourceDataAtCell(e,this.col);this.originalValue=t,this.setValue(t),this.refreshDimensions()}refreshDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.state!==Qn.EDITING&&!e)return;if(this.TD=this.getEditedCell(),!this.TD){e||this.close();return}const{top:t,start:i,width:r,maxWidth:s,height:o,maxHeight:a}=this.getEditedCellRect();this.textareaParentStyle.top=`${t}px`,this.textareaParentStyle[this.hot.isRtl()?"right":"left"]=`${i}px`,this.showEditableElement();const l=$a(this.TD,this.hot.rootWindow);this.TEXTAREA.style.fontSize=l.fontSize,this.TEXTAREA.style.fontFamily=l.fontFamily,this.TEXTAREA.style.backgroundColor=this.TD.style.backgroundColor;const c=$a(this.TEXTAREA),u=parseInt(c.paddingLeft,10)+parseInt(c.paddingRight,10),h=parseInt(c.paddingTop,10)+parseInt(c.paddingBottom,10),d=r-u,f=o-h,g=s-u,p=a-h;this.autoResize.init(this.TEXTAREA,{minWidth:Math.min(d,g),minHeight:Math.min(f,p),maxWidth:g,maxHeight:p},!0)}bindEvents(){EP()&&this.eventManager.addEventListener(this.TEXTAREA,"focusout",()=>this.finishEditing(!1)),this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>{this.refreshDimensions(),this.state===Qn.EDITING&&this.focus()}),this.addHook("afterRowResize",()=>{this.refreshDimensions(),this.state===Qn.EDITING&&this.focus()})}allowKeyEventPropagation(){}destroy(){this.eventManager.destroy(),this.clearHooks()}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),i={runOnlyIf:()=>Oe(this.hot.getSelected()),group:B4},r=()=>{this.hot.rootDocument.execCommand("insertText",!1,`
`)};t.addShortcuts([{keys:[["Control","Enter"]],callback:()=>(r(),!1),runOnlyIf:s=>!this.hot.selection.isMultiple()&&!s.altKey},{keys:[["Meta","Enter"]],callback:()=>(r(),!1),runOnlyIf:()=>!this.hot.selection.isMultiple()},{keys:[["Alt","Enter"]],callback:()=>(r(),!1)},{keys:[["Home"]],callback:(s,o)=>{let[a]=o;F4(a,this.TEXTAREA)}},{keys:[["End"]],callback:(s,o)=>{let[a]=o;F4(a,this.TEXTAREA)}}],i)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(B4)}}const gTe="base";function Hv(n,e,t,i,r,s,o){const a=o.ariaTags,l=[],c=[],u=[],h=[];o.className&&ce(e,o.className),o.readOnly?(l.push(o.readOnlyCellClassName),a&&h.push(Lz())):a&&u.push(Lz()[0]),o.valid===!1&&o.invalidCellClassName?(l.push(o.invalidCellClassName),a&&h.push(Hz())):(c.push(o.invalidCellClassName),a&&u.push(Hz()[0])),o.wordWrap===!1&&o.noWordWrapClassName&&l.push(o.noWordWrapClassName),!s&&o.placeholder&&l.push(o.placeholderCellClassName),Ze(e,c),ce(e,l),fd(e,u),ze(e,h)}Hv.RENDERER_TYPE=gTe;const pTe="text";function gc(n,e,t,i,r,s,o){Hv.apply(this,[n,e,t,i,r,s,o]);let a=s;if(!a&&o.placeholder&&(a=o.placeholder),a=Ln(a),o.trimWhitespace&&(a=a.trim()),o.rendererTemplate){$o(e);const l=n.rootDocument.createElement("TEMPLATE");l.setAttribute("bind","{{}}"),l.innerHTML=o.rendererTemplate,HTMLTemplateElement.decorate(l),l.model=n.getSourceDataAtRow(t),e.appendChild(l)}else Su(e,a)}gc.RENDERER_TYPE=pTe;const V4={CELL_TYPE:"text",editor:Dd,renderer:gc};Js(V4),Qe.editors={BaseEditor:Zg};function Qe(n,e){const t=new N4(n,e||{},MI);return t.init(),t}Qe.Core=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new N4(n,e,MI)},Qe.DefaultSettings=w4(),Qe.hooks=Pe.getSingleton(),Qe.CellCoords=yd,Qe.CellRange=gv,Qe.packageName="handsontable",Qe.buildDate="17/10/2024 09:16:16",Qe.version="14.6.1",Qe.languages={dictionaryKeys:O1e,getLanguageDictionary:r4,getLanguagesDictionaries:H1e,registerLanguageDictionary:i4,getTranslatedPhrase:s4};const W4="handsontableEditor",mTe="handsontable";class Ck extends Dd{static get EDITOR_TYPE(){return mTe}open(){super.open(),this.htEditor&&this.htEditor.destroy(),this.htContainer.style.display==="none"&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),Zb(this.TEXTAREA,0,this.TEXTAREA.value.length),this.refreshDimensions()}close(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),super.close()}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o);const a=this,l={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,ariaTags:!1,afterOnCellMouseDown(c,u){const h=this.getSourceData(u.row,u.col);h!==void 0&&a.setValue(h),a.hot.destroyEditor()},preventWheel:!0,layoutDirection:this.hot.isRtl()?"rtl":"ltr"};this.cellProperties.handsontable&&oi(l,o.handsontable),this.htOptions=l}beginEditing(e,t){const i=this.hot.getSettings().onBeginEditing;i&&i()===!1||super.beginEditing(e,t)}createElements(){super.createElements();const e=this.hot.rootDocument.createElement("DIV");e.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(e),this.htContainer=e,this.assignHooks()}finishEditing(e,t,i){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){const r=this.htEditor.getValue();r!==void 0&&this.setValue(r)}super.finishEditing(e,t,i)}assignHooks(){this.hot.addHook("afterDestroy",()=>{this.htEditor&&this.htEditor.destroy()})}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor");super.registerShortcuts();const i={group:W4,relativeToGroup:Iu,position:"before"},r=(s,o)=>{const a=this.htEditor;if(s!==void 0&&(s<0||a.flipped&&s>a.countRows()-1?a.deselectCell():a.selectCell(s,0),a.getData().length))return o.preventDefault(),Gs(o),this.hot.listen(),this.TEXTAREA.focus(),!1};t.addShortcuts([{keys:[["ArrowUp"]],callback:s=>{const o=this.htEditor;let a,l;return!o.getSelectedLast()&&o.flipped?a=o.countRows()-1:o.getSelectedLast()&&(o.flipped?(l=o.getSelectedLast()[0],a=Math.max(0,l-1)):(l=o.getSelectedLast()[0],a=l-1)),r(a,s)},preventDefault:!1},{keys:[["ArrowDown"]],callback:s=>{const o=this.htEditor;let a,l;if(!o.getSelectedLast()&&!o.flipped)a=0;else if(o.getSelectedLast()){if(o.flipped)a=o.getSelectedLast()[0]+1;else if(!o.flipped){const c=o.countRows()-1;l=o.getSelectedLast()[0],a=Math.min(c,l+1)}}return r(a,s)},preventDefault:!1}],i)}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(W4)}}function bTe(n,e,t){vTe(n,e),e.set(n,t)}function vTe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function P_(n,e,t){return(e=wTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wTe(n){var e=yTe(n,"string");return typeof e=="symbol"?e:e+""}function yTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function j4(n,e){return n.get(CTe(n,e))}function CTe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const STe="autocomplete";var Sk=new WeakMap;class _k extends Ck{constructor(){super(...arguments),P_(this,"query",null),P_(this,"strippedChoices",[]),P_(this,"rawChoices",[]),bTe(this,Sk,this.hot.guid.slice(0,9)),P_(this,"sortByRelevance",function(e,t,i){const r=[],s=[],o=e.length;let a=t.length,l,c,u,h;if(o===0){for(u=0;u<a;u++)s.push(u);return s}for(u=0;u<a;u++){if(c=aP(Ln(t[u])),i)h=c.indexOf(e);else{const d=this.cellProperties.locale;h=c.toLocaleLowerCase(d).indexOf(e.toLocaleLowerCase(d))}h!==-1&&(l=c.length-h-o,r.push({baseIndex:u,index:h,charsLeft:l,value:c}))}for(r.sort((d,f)=>{if(f.index===-1)return-1;if(d.index===-1)return 1;if(d.index<f.index)return-1;if(f.index<d.index)return 1;if(d.index===f.index){if(d.charsLeft<f.charsLeft)return-1;if(d.charsLeft>f.charsLeft)return 1}return 0}),u=0,a=r.length;u<a;u++)s.push(r[u].baseIndex);return s})}static get EDITOR_TYPE(){return STe}getValue(){const e=this.rawChoices.find(t=>this.stripValueIfNeeded(t)===this.TEXTAREA.value);return Oe(e)?e:this.TEXTAREA.value}createElements(){super.createElements(),ce(this.htContainer,"autocompleteEditor"),ce(this.htContainer,this.hot.rootWindow.navigator.platform.indexOf("Mac")===-1?"":"htMacScroll"),this.hot.getSettings().ariaTags&&ze(this.TEXTAREA,[vye(),fye(),kz("listbox"),Sye()])}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o),this.hot.getSettings().ariaTags&&ze(this.TEXTAREA,[js("false"),_ye(`${j4(Sk,this)}-listbox-${e}-${t}`)])}open(){super.open();const e=this.cellProperties.trimDropdown===void 0?!0:this.cellProperties.trimDropdown,t=this.hot.getSettings().ariaTags,i=Array.isArray(this.cellProperties.source)?this.cellProperties.source:null,r=i==null?void 0:i.length,{row:s,col:o}=this;this.showEditableElement(),this.focus();let a=wi();a===0&&iv()&&(a+=15),this.addHook("beforeKeyDown",l=>this.onBeforeKeyDown(l)),this.htEditor.updateSettings({colWidths:e?[dn(this.TEXTAREA)-2]:void 0,width:e?dn(this.TEXTAREA)+a:void 0,autoColumnSize:!0,renderer:(l,c,u,h,d,f,g)=>{gc(l,c,u,h,d,f,g);const{filteringCaseSensitive:p,allowHtml:m,locale:v}=this.cellProperties,y=this.query;let w=Ln(f),_,R;w&&!m&&(_=p===!0?w.indexOf(y):w.toLocaleLowerCase(v).indexOf(y.toLocaleLowerCase(v)),_!==-1&&(R=w.substr(_,y.length),w=w.replace(R,`<strong>${R}</strong>`))),t&&ze(c,[gye(),...i?[Tye(r)]:[],...i?[Mye(i.indexOf(f)+1)]:[],["id",`${this.htEditor.rootElement.id}_${u}-${h}`]]),c.innerHTML=w},afterSelectionEnd:(l,c)=>{if(t){const u=this.htEditor.getCell(l,c,!0);ze(u,[uP()]),ze(this.TEXTAREA,...Rye(u.id))}}}),t&&(ze(this.htEditor.view._wt.wtOverlays.wtTable.TABLE,...Ha()),ze(this.htEditor.rootElement,[Oz(),Eye("polite"),xye("text"),["id",`${j4(Sk,this)}-listbox-${s}-${o}`]]),ze(this.TEXTAREA,...js("true"))),this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)})}close(){this.removeHooksByKey("beforeKeyDown"),super.close(),this.hot.getSettings().ariaTags&&ze(this.TEXTAREA,[js("false")])}discardEditor(e){super.discardEditor(e),this.hot.view.render()}queryChoices(e){const t=this.cellProperties.source;this.query=e,typeof t=="function"?t.call(this.cellProperties,e,i=>{this.rawChoices=i,this.updateChoicesList(this.stripValuesIfNeeded(i))}):Array.isArray(t)?(this.rawChoices=t,this.updateChoicesList(this.stripValuesIfNeeded(t))):this.updateChoicesList([])}updateChoicesList(e){const t=pP(this.TEXTAREA),i=Kz(this.TEXTAREA),r=this.cellProperties.sortByRelevance,s=this.cellProperties.filter;let o=null,a=null,l=e;r&&(o=this.sortByRelevance(this.stripValueIfNeeded(this.getValue()),l,this.cellProperties.filteringCaseSensitive));const c=Array.isArray(o)?o.length:0;if(s===!1)c&&(a=o[0]);else{const u=[];for(let h=0,d=l.length;h<d&&!(r&&c<=h);h++)c?u.push(l[o[h]]):u.push(l[h]);a=0,l=u}this.strippedChoices=l,l.length===0?this.htEditor.rootElement.style.display="none":this.htEditor.rootElement.style.display="",this.htEditor.loadData(Ub([l])),l.length>0&&(this.updateDropdownDimensions(),this.flipDropdownIfNeeded(),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(a)),this.hot.listen(),Zb(this.TEXTAREA,t,t===i?void 0:i)}flipDropdownIfNeeded(){const e=md(this.hot.view._wt.wtTable.TABLE),t=e===this.hot.rootWindow,i=this.cellProperties.preventOverflow;if(t||!t&&(i||i==="horizontal"))return!1;const r=vi(this.TEXTAREA),s=Zn(this.TEXTAREA),o=this.getDropdownHeight(),a=e.scrollTop,l=Zn(this.hot.view._wt.wtTable.THEAD),c=vi(e),u=r.top-c.top-l+a,h=e.scrollHeight-u-l-s,d=o>h&&u>h;return d?this.flipDropdown(o):this.unflipDropdown(),this.limitDropdownIfNeeded(d?u:h,o),d}limitDropdownIfNeeded(e,t){if(t>e){let i=0,r=0,s=0,o=null;do s=this.htEditor.getRowHeight(r)||this.htEditor.view._wt.getSetting("defaultRowHeight"),i+=s,r+=1;while(i<e);o=i-s,this.htEditor.flipped&&(this.htEditor.rootElement.style.top=`${parseInt(this.htEditor.rootElement.style.top,10)+t-o}px`),this.setDropdownHeight(i-s)}}flipDropdown(e){const t=this.htEditor.rootElement.style;t.position="absolute",t.top=`${-e}px`,this.htEditor.flipped=!0}unflipDropdown(){const e=this.htEditor.rootElement.style;e.position="absolute",e.top="",this.htEditor.flipped=void 0}updateDropdownDimensions(){const e=this.htEditor.getColWidth(0)+wi(this.hot.rootDocument)+2,t=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:t?void 0:e}),this.htEditor.view._wt.wtTable.alignOverlaysWithTrimmingContainer()}setDropdownHeight(e){this.htEditor.updateSettings({height:e})}highlightBestMatchingChoice(e){typeof e=="number"?this.htEditor.selectCell(e,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}getDropdownHeight(){const e=this.htEditor.getRowHeight(0)||23,t=this.cellProperties.visibleRows;return this.strippedChoices.length>=t?t*e:this.strippedChoices.length*e+8}stripValueIfNeeded(e){return this.stripValuesIfNeeded([e])[0]}stripValuesIfNeeded(e){const{allowHtml:t}=this.cellProperties,i=pt(e,s=>Ln(s));return pt(i,s=>t?s:aP(s))}allowKeyEventPropagation(e){const t=this.htEditor.getSelectedRangeLast(),i={row:t?t.from.row:-1};let r=!1;return e===Le.ARROW_DOWN&&i.row>0&&i.row<this.htEditor.countRows()-1&&(r=!0),e===Le.ARROW_UP&&i.row>-1&&(r=!0),r}onBeforeKeyDown(e){if(_5(e.keyCode)||e.keyCode===Le.BACKSPACE||e.keyCode===Le.DELETE||e.keyCode===Le.INSERT){let t=10;if(e.keyCode===Le.C&&(e.ctrlKey||e.metaKey))return;this.isOpened()||(t+=10),this.htEditor&&this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)},t)}}}const _Te="checkbox";class z4 extends Zg{static get EDITOR_TYPE(){return _Te}beginEditing(e,t){if(t&&t.type==="mouseup"&&t.target.nodeName==="TD"){const i=this.TD.querySelector('input[type="checkbox"]');Ue(i,"htBadValue")||i.click()}}finishEditing(){}init(){}open(){}close(){}getValue(){}setValue(){}focus(){}}/*!
 * Pikaday
 *
 * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday
 */const Ou=()=>window,eo=()=>window.document,Rk=(n,e)=>window.setTimeout(n,e),Ga=function(n,e,t,i){n.addEventListener(e,t,!!i)},pc=function(n,e,t,i){n.removeEventListener(e,t,!!i)},RTe=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},ps=function(n,e){return(" "+n.className+" ").indexOf(" "+e+" ")!==-1},Ek=function(n,e){ps(n,e)||(n.className=n.className===""?e:n.className+" "+e)},xk=function(n,e){n.className=RTe((" "+n.className+" ").replace(" "+e+" "," "))},Tk=function(n){return/Array/.test(Object.prototype.toString.call(n))},ms=function(n){return/Date/.test(Object.prototype.toString.call(n))&&!isNaN(n.getTime())},ETe=function(n){let e=n.getDay();return e===0||e===6},xTe=function(n){return n%4===0&&n%100!==0||n%400===0},U4=function(n,e){return[31,xTe(n)?29:28,31,30,31,30,31,31,30,31,30,31][e]},I_=function(n){ms(n)&&n.setHours(0,0,0,0)},O_=function(n,e){return n.getTime()===e.getTime()},k_=function(n,e,t){let i,r;for(i in e)r=n[i]!==void 0,r&&typeof e[i]=="object"&&e[i]!==null&&e[i].nodeName===void 0?ms(e[i])?t&&(n[i]=new Date(e[i].getTime())):Tk(e[i])?t&&(n[i]=e[i].slice(0)):n[i]=k_({},e[i],t):(t||!r)&&(n[i]=e[i]);return n},G4=function(n,e,t){let i=eo().createEvent("HTMLEvents");i.initEvent(e,!0,!1),i=k_(i,t),n.dispatchEvent(i)},Y4=function(n){return n.month<0&&(n.year-=Math.ceil(Math.abs(n.month)/12),n.month+=12),n.month>11&&(n.year+=Math.floor(Math.abs(n.month)/12),n.month-=12),n},Ya={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},K4=function(n,e,t){for(e+=n.firstDay;e>=7;)e-=7;return t?n.i18n.weekdaysShort[e]:n.i18n.weekdays[e]},TTe=function(n){let e=[],t="false";if(n.isEmpty)if(n.showDaysInNextAndPreviousMonths)e.push("is-outside-current-month"),n.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled");else return'<td class="is-empty"></td>';return n.isDisabled&&e.push("is-disabled"),n.isToday&&e.push("is-today"),n.isSelected&&(e.push("is-selected"),t="true"),n.hasEvent&&e.push("has-event"),n.isInRange&&e.push("is-inrange"),n.isStartRange&&e.push("is-startrange"),n.isEndRange&&e.push("is-endrange"),'<td data-day="'+n.day+'" class="'+e.join(" ")+'" aria-selected="'+t+'"><button class="pika-button pika-day" type="button" data-pika-year="'+n.year+'" data-pika-month="'+n.month+'" data-pika-day="'+n.day+'">'+n.day+"</button></td>"},MTe=function(n,e){n.setHours(0,0,0,0);let t=n.getDate(),i=n.getDay(),r=e,s=r-1,o=7,a=function(d){return(d+o-1)%o};n.setDate(t+s-a(i));let l=new Date(n.getFullYear(),0,r),c=24*60*60*1e3,u=(n.getTime()-l.getTime())/c;return 1+Math.round((u-s+a(l.getDay()))/o)},ATe=function(n,e,t,i,r){let s=new Date(i,t,e);return'<td class="pika-week">'+(n.hasMoment?n.moment(s).isoWeek():MTe(s,r))+"</td>"},PTe=function(n,e,t,i){return'<tr class="pika-row'+(t?" pick-whole-week":"")+(i?" is-selected":"")+'">'+(e?n.reverse():n).join("")+"</tr>"},ITe=function(n){return"<tbody>"+n.join("")+"</tbody>"},OTe=function(n){let e,t=[];for(n.showWeekNumber&&t.push("<th></th>"),e=0;e<7;e++)t.push('<th scope="col"><abbr title="'+K4(n,e)+'">'+K4(n,e,!0)+"</abbr></th>");return"<thead><tr>"+(n.isRTL?t.reverse():t).join("")+"</tr></thead>"},kTe=function(n,e,t,i,r,s){let o,a,l,c=n._o,u=t===c.minYear,h=t===c.maxYear,d='<div id="'+s+'" class="pika-title" role="heading" aria-live="polite">',f,g,p=!0,m=!0;for(l=[],o=0;o<12;o++)l.push('<option value="'+(t===r?o-e:12+o-e)+'"'+(o===i?' selected="selected"':"")+(u&&o<c.minMonth||h&&o>c.maxMonth?' disabled="disabled"':"")+">"+c.i18n.months[o]+"</option>");for(f='<div class="pika-label">'+c.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",Tk(c.yearRange)?(o=c.yearRange[0],a=c.yearRange[1]+1):(o=t-c.yearRange,a=1+t+c.yearRange),l=[];o<a&&o<=c.maxYear;o++)o>=c.minYear&&l.push('<option value="'+o+'"'+(o===t?' selected="selected"':"")+">"+o+"</option>");return g='<div class="pika-label">'+t+c.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",c.showMonthAfterYear?d+=g+f:d+=f+g,u&&(i===0||c.minMonth>=i)&&(p=!1),h&&(i===11||c.maxMonth<=i)&&(m=!1),e===0&&(d+='<button class="pika-prev'+(p?"":" is-disabled")+'" type="button">'+c.i18n.previousMonth+"</button>"),e===n._o.numberOfMonths-1&&(d+='<button class="pika-next'+(m?"":" is-disabled")+'" type="button">'+c.i18n.nextMonth+"</button>"),d+="</div>"},DTe=function(n,e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+t+'">'+OTe(n)+ITe(e)+"</table>"};function Mk(n){let e=this,t=e.config(n);e._onMouseDown=function(r){if(!e._v)return;r=r||Ou().event;let s=r.target||r.srcElement;if(s)if(ps(s,"is-disabled")||(ps(s,"pika-button")&&!ps(s,"is-empty")&&!ps(s.parentNode,"is-disabled")?(e.setDate(new Date(s.getAttribute("data-pika-year"),s.getAttribute("data-pika-month"),s.getAttribute("data-pika-day"))),t.bound&&Rk(function(){e.hide(),t.blurFieldOnSelect&&t.field&&t.field.blur()},100)):ps(s,"pika-prev")?e.prevMonth():ps(s,"pika-next")&&e.nextMonth()),ps(s,"pika-select"))e._c=!0;else if(r.preventDefault)r.preventDefault();else return r.returnValue=!1,!1},e._onChange=function(r){r=r||Ou().event;let s=r.target||r.srcElement;s&&(ps(s,"pika-select-month")?e.gotoMonth(s.value):ps(s,"pika-select-year")&&e.gotoYear(s.value))},e._onKeyChange=function(r){if(r=r||Ou().event,e.isVisible())switch(r.keyCode){case 13:case 27:t.field&&t.field.blur();break;case 37:e.adjustDate("subtract",1);break;case 38:e.adjustDate("subtract",7);break;case 39:e.adjustDate("add",1);break;case 40:e.adjustDate("add",7);break;case 8:case 46:e.setDate(null);break}},e._parseFieldValue=function(){if(t.parse)return t.parse(t.field.value,t.format);if(this.hasMoment){let r=this.moment(t.field.value,t.format,t.formatStrict);return r&&r.isValid()?r.toDate():null}else return new Date(Date.parse(t.field.value))},e._onInputChange=function(r){let s;r.firedBy!==e&&(s=e._parseFieldValue(),ms(s)&&e.setDate(s),e._v||e.show())},e._onInputFocus=function(){e.show()},e._onInputClick=function(){e.show()},e._onInputBlur=function(){let r=eo().activeElement;do if(ps(r,"pika-single"))return;while(r=r.parentNode);e._c||(e._b=Rk(function(){e.hide()},50)),e._c=!1},e._onClick=function(r){r=r||Ou().event;let s=r.target||r.srcElement,o=s;if(s){!hasEventListeners&&ps(s,"pika-select")&&(s.onchange||(s.setAttribute("onchange","return;"),Ga(s,"change",e._onChange)));do if(ps(o,"pika-single")||o===t.trigger)return;while(o=o.parentNode);e._v&&s!==t.trigger&&o!==t.trigger&&e.hide()}},e.el=eo().createElement("div"),e.el.className="pika-single"+(t.isRTL?" is-rtl":"")+(t.theme?" "+t.theme:""),Ga(e.el,"mousedown",e._onMouseDown,!0),Ga(e.el,"touchend",e._onMouseDown,!0),Ga(e.el,"change",e._onChange),t.keyboardInput&&Ga(eo(),"keydown",e._onKeyChange),t.field&&(t.container?t.container.appendChild(e.el):t.bound?eo().body.appendChild(e.el):t.field.parentNode.insertBefore(e.el,t.field.nextSibling),Ga(t.field,"change",e._onInputChange),t.defaultDate||(t.defaultDate=e._parseFieldValue(),t.setDefaultDate=!0));let i=t.defaultDate;ms(i)?t.setDefaultDate?e.setDate(i,!0):e.gotoDate(i):e.gotoDate(new Date),t.bound?(this.hide(),e.el.className+=" is-bound",Ga(t.trigger,"click",e._onInputClick),Ga(t.trigger,"focus",e._onInputFocus),Ga(t.trigger,"blur",e._onInputBlur)):this.show()}Mk.prototype={config:function(n){this._o||(this._o=k_({},Ya,!0));let e=k_(this._o,n,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme=typeof e.theme=="string"&&e.theme?e.theme:null,e.bound=!!(e.bound!==void 0?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn=typeof e.disableDayFn=="function"?e.disableDayFn:null;let t=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=t>4?4:t,ms(e.minDate)||(e.minDate=!1),ms(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),Tk(e.yearRange)){let i=new Date().getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||i,e.yearRange[1]=parseInt(e.yearRange[1],10)||i}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||Ya.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(n){return n=n||this._o.format,ms(this._d)?this._o.toString?this._o.toString(this._d,n):this.hasMoment?this.moment(this._d).format(n):this._d.toDateString():""},getMoment:function(){return this.hasMoment?this.moment(this._d):null},setMoment:function(n,e){this.hasMoment&&this.moment.isMoment(n)&&this.setDate(n.toDate(),e)},useMoment:function(n){this.hasMoment=!0,this.moment=n},getDate:function(){return ms(this._d)?new Date(this._d.getTime()):null},setDate:function(n,e){if(!n)return this._d=null,this._o.field&&(this._o.field.value="",G4(this._o.field,"change",{firedBy:this})),this.draw();if(typeof n=="string"&&(n=new Date(Date.parse(n))),!ms(n))return;let t=this._o.minDate,i=this._o.maxDate;ms(t)&&n<t?n=t:ms(i)&&n>i&&(n=i),this._d=new Date(n.getTime()),I_(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),G4(this._o.field,"change",{firedBy:this})),!e&&typeof this._o.onSelect=="function"&&this._o.onSelect.call(this,this.getDate())},clear:function(){this.setDate(null)},gotoDate:function(n){let e=!0;if(ms(n)){if(this.calendars){let t=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=n.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),e=r<t.getTime()||i.getTime()<r}e&&(this.calendars=[{month:n.getMonth(),year:n.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(n,e){let t=this.getDate()||new Date,i=parseInt(e)*24*60*60*1e3,r;n==="add"?r=new Date(t.valueOf()+i):n==="subtract"&&(r=new Date(t.valueOf()-i)),this.setDate(r)},adjustCalendars:function(){this.calendars[0]=Y4(this.calendars[0]);for(let n=1;n<this._o.numberOfMonths;n++)this.calendars[n]=Y4({month:this.calendars[0].month+n,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(n){isNaN(n)||(this.calendars[0].month=parseInt(n,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(n){isNaN(n)||(this.calendars[0].year=parseInt(n,10),this.adjustCalendars())},setMinDate:function(n){n instanceof Date?(I_(n),this._o.minDate=n,this._o.minYear=n.getFullYear(),this._o.minMonth=n.getMonth()):(this._o.minDate=Ya.minDate,this._o.minYear=Ya.minYear,this._o.minMonth=Ya.minMonth,this._o.startRange=Ya.startRange),this.draw()},setMaxDate:function(n){n instanceof Date?(I_(n),this._o.maxDate=n,this._o.maxYear=n.getFullYear(),this._o.maxMonth=n.getMonth()):(this._o.maxDate=Ya.maxDate,this._o.maxYear=Ya.maxYear,this._o.maxMonth=Ya.maxMonth,this._o.endRange=Ya.endRange),this.draw()},setStartRange:function(n){this._o.startRange=n},setEndRange:function(n){this._o.endRange=n},draw:function(n){if(!this._v&&!n)return;let e=this._o,t=e.minYear,i=e.maxYear,r=e.minMonth,s=e.maxMonth,o="",a;this._y<=t&&(this._y=t,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=i&&(this._y=i,!isNaN(s)&&this._m>s&&(this._m=s));for(let l=0;l<e.numberOfMonths;l++)a="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),o+='<div class="pika-lendar">'+kTe(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,a)+this.render(this.calendars[l].year,this.calendars[l].month,a)+"</div>";this.el.innerHTML=o,e.bound&&e.field.type!=="hidden"&&Rk(function(){e.trigger.focus()},1),typeof this._o.onDraw=="function"&&this._o.onDraw(this),e.bound&&e.field.setAttribute("aria-label",e.ariaLabel)},adjustPosition:function(){let n,e,t,i,r,s,o,a,l,c,u;this._o.container||(this.el.style.position="absolute",n=this._o.trigger,e=this.el.offsetWidth,t=this.el.offsetHeight,i=Ou().innerWidth||eo().documentElement.clientWidth,r=Ou().innerHeight||eo().documentElement.clientHeight,s=eo().body.scrollTop||eo().documentElement.scrollTop,c=!0,u=!0,l=n.getBoundingClientRect(),o=l.left+Ou().pageXOffset,a=l.bottom+Ou().pageYOffset,(this._o.reposition&&o+e>i||this._o.position.indexOf("right")>-1&&o-e+n.offsetWidth>0)&&(o=o-e+n.offsetWidth,c=!1),(this._o.reposition&&a+t>r+s||this._o.position.indexOf("top")>-1&&a-t-n.offsetHeight>0)&&(a=a-t-n.offsetHeight,u=!1),o<0&&(o=0),a<0&&(a=0),this.el.style.left=o+"px",this.el.style.top=a+"px",Ek(this.el,c?"left-aligned":"right-aligned"),Ek(this.el,u?"bottom-aligned":"top-aligned"),xk(this.el,c?"right-aligned":"left-aligned"),xk(this.el,u?"top-aligned":"bottom-aligned"))},render:function(n,e,t){let i=this._o,r=new Date,s=U4(n,e),o=new Date(n,e,1).getDay(),a=[],l=[];I_(r),i.firstDay>0&&(o-=i.firstDay,o<0&&(o+=7));let c=e===0?11:e-1,u=e===11?0:e+1,h=e===0?n-1:n,d=e===11?n+1:n,f=U4(h,c),g=s+o,p=g;for(;p>7;)p-=7;g+=7-p;let m=!1;for(let v=0,y=0;v<g;v++){let w=new Date(n,e,1+(v-o)),_=ms(this._d)?O_(w,this._d):!1,R=O_(w,r),E=i.events.indexOf(w.toDateString())!==-1,x=v<o||v>=s+o,P=1+(v-o),T=e,I=n,N=i.startRange&&O_(i.startRange,w),W=i.endRange&&O_(i.endRange,w),j=i.startRange&&i.endRange&&i.startRange<w&&w<i.endRange,K=i.minDate&&w<i.minDate||i.maxDate&&w>i.maxDate||i.disableWeekends&&ETe(w)||i.disableDayFn&&i.disableDayFn(w);x&&(v<o?(P=f+P,T=c,I=h):(P=P-s,T=u,I=d));let H={day:P,month:T,year:I,hasEvent:E,isSelected:_,isToday:R,isDisabled:K,isEmpty:x,isStartRange:N,isEndRange:W,isInRange:j,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&_&&(m=!0),l.push(TTe(H)),++y===7&&(i.showWeekNumber&&l.unshift(ATe(this,v-o,e,n,i.firstWeekOfYearMinDays)),a.push(PTe(l,i.isRTL,i.pickWholeWeek,m)),l=[],y=0,m=!1)}return DTe(i,a,t)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),xk(this.el,"is-hidden"),this._o.bound&&(Ga(eo(),"click",this._onClick),this.adjustPosition()),typeof this._o.onOpen=="function"&&this._o.onOpen.call(this))},hide:function(){let n=this._v;n!==!1&&(this._o.bound&&pc(eo(),"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),Ek(this.el,"is-hidden"),this._v=!1,n!==void 0&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){let n=this._o;this.hide(),pc(this.el,"mousedown",this._onMouseDown,!0),pc(this.el,"touchend",this._onMouseDown,!0),pc(this.el,"change",this._onChange),n.keyboardInput&&pc(eo(),"keydown",this._onKeyChange),n.field&&(pc(n.field,"change",this._onInputChange),n.bound&&(pc(n.trigger,"click",this._onInputClick),pc(n.trigger,"focus",this._onInputFocus),pc(n.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}};function Ak(n,e,t){return(e=NTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NTe(n){var e=LTe(n,"string");return typeof e=="symbol"?e:e+""}function LTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const q4="date",X4="dateEditor";class Z4 extends Dd{constructor(){super(...arguments),Ak(this,"defaultDateFormat","DD/MM/YYYY"),Ak(this,"parentDestroyed",!1),Ak(this,"$datePicker",null)}static get EDITOR_TYPE(){return q4}init(){if(typeof he!="function")throw new Error("You need to include moment.js to your project.");if(typeof Mk!="function")throw new Error("You need to include Pikaday to your project.");super.init(),this.hot.addHook("afterDestroy",()=>{this.parentDestroyed=!0,this.destroyElements()})}createElements(){super.createElements(),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,this.datePicker.setAttribute("dir",this.hot.isRtl()?"rtl":"ltr"),ce(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),this.eventManager.addEventListener(this.datePicker,"mousedown",e=>{Ue(e.target,"pika-day")&&this.hideDatepicker(),e.stopPropagation()})}destroyElements(){const e=this.datePicker.parentNode;this.$datePicker&&this.$datePicker.destroy(),e&&e.removeChild(this.datePicker)}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o)}open(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const i=this.hot.getShortcutManager().getContext("editor");this.showDatepicker(e),super.open(),i.addShortcuts([{keys:[["ArrowLeft"]],callback:()=>{this.$datePicker.adjustDate("subtract",1)}},{keys:[["ArrowRight"]],callback:()=>{this.$datePicker.adjustDate("add",1)}},{keys:[["ArrowUp"]],callback:()=>{this.$datePicker.adjustDate("subtract",7)}},{keys:[["ArrowDown"]],callback:()=>{this.$datePicker.adjustDate("add",7)}}],{group:X4})}close(){var e;this._opened=!1,(e=this.$datePicker)!==null&&e!==void 0&&e.destroy&&this.$datePicker.destroy(),this.hot._registerTimeout(()=>{const r=this.hot._getEditorManager();r.closeEditor(),this.hot.view.render(),r.prepareEditor()}),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(X4),super.close()}finishEditing(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.finishEditing(e,t)}showDatepicker(e){const t=this.cellProperties.dateFormat||this.defaultDateFormat,i=this.hot.view.isMouseDown(),r=e?MP(e.keyCode):!1;let s;this.datePicker.style.display="block",this.$datePicker=new Mk(this.getDatePickerConfig()),typeof this.$datePicker.useMoment=="function"&&this.$datePicker.useMoment(he),this.$datePicker._onInputFocus=function(){},this.originalValue?(s=this.originalValue,he(s,t,!0).isValid()&&this.$datePicker.setMoment(he(s,t),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),!r&&!i&&this.setValue("")):this.cellProperties.defaultDate?(s=this.cellProperties.defaultDate,he(s,t,!0).isValid()&&this.$datePicker.setMoment(he(s,t),!0),!r&&!i&&this.setValue("")):this.$datePicker.gotoToday()}hideDatepicker(){this.datePickerStyle.display="none",this.$datePicker.hide()}getDatePickerConfig(){const e=this.TEXTAREA,t={};this.cellProperties&&this.cellProperties.datePickerConfig&&tv(t,this.cellProperties.datePickerConfig);const i=t.onSelect,r=t.onClose;return t.field=e,t.trigger=e,t.container=this.datePicker,t.bound=!1,t.keyboardInput=!1,t.format=t.format||this.defaultDateFormat,t.reposition=t.reposition||!1,t.isRTL=!1,t.onSelect=s=>{let o=s;isNaN(o.getTime())||(o=he(o).format(this.cellProperties.dateFormat||this.defaultDateFormat)),this.setValue(o),i&&i()},t.onClose=()=>{this.parentDestroyed||this.finishEditing(!1),r&&r()},t}refreshDimensions(e){var t;if(super.refreshDimensions(e),this.state!==Qn.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.hideDatepicker();return}const{rowIndexMapper:i,columnIndexMapper:r}=this.hot,{wtOverlays:s}=this.hot.view._wt,{wtTable:o}=(t=s.getParentOverlay(this.TD))!==null&&t!==void 0?t:this.hot.view._wt,a=i.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleRow()),l=i.getVisualFromRenderableIndex(o.getLastPartiallyVisibleRow()),c=r.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleColumn()),u=r.getVisualFromRenderableIndex(o.getLastPartiallyVisibleColumn());if(this.row>=a&&this.row<=l&&this.col>=c&&this.col<=u){const h=this.TD.getBoundingClientRect();this.datePickerStyle.top=`${this.hot.rootWindow.pageYOffset+h.top+Zn(this.TD)}px`;let d=this.hot.rootWindow.pageXOffset;this.hot.isRtl()?d+=h.right-dn(this.datePicker):d+=h.left,this.datePickerStyle.left=`${d}px`}else this.hideDatepicker()}}const HTe="dropdown";class Pk extends _k{static get EDITOR_TYPE(){return HTe}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}Pe.getSingleton().add("beforeValidate",function(n,e,t){const i=this.propToCol(t);if(Number.isInteger(i)){const r=this.getCellMeta(e,i);r.editor===Pk&&r.strict===void 0&&(r.filter=!1,r.strict=!0)}});const $Te="numeric";class Q4 extends Dd{static get EDITOR_TYPE(){return $Te}}const FTe="password";class J4 extends Dd{static get EDITOR_TYPE(){return FTe}createElements(){super.createElements(),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,$o(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}const Ik="ht_editor_visible",eU="selectEditor",BTe="select";class tU extends Zg{static get EDITOR_TYPE(){return BTe}init(){this.select=this.hot.rootDocument.createElement("select"),this.select.setAttribute("data-hot-input","true"),this.select.style.display="none",ce(this.select,"htSelectEditor"),this.hot.rootElement.appendChild(this.select),this.registerHooks()}getValue(){return this.select.value}setValue(e){this.select.value=e}open(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this._opened=!1,this.select.style.display="none",Ue(this.select,Ik)&&Ze(this.select,Ik),this.unregisterShortcuts(),this.clearHooks()}focus(){this.select.focus()}registerHooks(){this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>this.refreshDimensions()),this.addHook("afterRowResize",()=>this.refreshDimensions())}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o);const a=this.cellProperties.selectOptions;let l;typeof a=="function"?l=this.prepareOptions(a(this.row,this.col,this.prop)):l=this.prepareOptions(a),$o(this.select),ot(l,(c,u)=>{const h=this.hot.rootDocument.createElement("OPTION");h.value=u,gd(h,c),this.select.appendChild(h)})}prepareOptions(e){let t={};if(Array.isArray(e))for(let i=0,r=e.length;i<r;i++)t[e[i]]=e[i];else typeof e=="object"&&(t=e);return t}refreshValue(){const e=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=e,this.setValue(e),this.refreshDimensions()}refreshDimensions(){if(this.state!==Qn.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.close();return}const{top:e,start:t,width:i,height:r}=this.getEditedCellRect(),s=this.select.style;s.height=`${r}px`,s.width=`${i}px`,s.top=`${e}px`,s[this.hot.isRtl()?"right":"left"]=`${t}px`,s.margin="0px",ce(this.select,Ik)}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),i={group:eU};this.isInFullEditMode()&&t.addShortcuts([{keys:[["ArrowUp"]],callback:()=>{const r=this.select.selectedIndex-1;r>=0&&(this.select[r].selected=!0)}},{keys:[["ArrowDown"]],callback:()=>{const r=this.select.selectedIndex+1;r<=this.select.length-1&&(this.select[r].selected=!0)}}],i)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(eU)}}const VTe="time";class nU extends Dd{static get EDITOR_TYPE(){return VTe}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o),this.TEXTAREA.dir="ltr"}}function WTe(){Br(Zg),Br(_k),Br(z4),Br(Z4),Br(Pk),Br(Ck),Br(Q4),Br(J4),Br(tU),Br(Dd),Br(nU)}const jTe="html";function Ok(n,e,t,i,r,s,o){Hv.apply(this,[n,e,t,i,r,s,o]),gd(e,s??"",!1)}Ok.RENDERER_TYPE=jTe;const zTe="autocomplete";function Qg(n,e,t,i,r,s,o){const{rootDocument:a}=n,l=o.allowHtml?Ok:gc,c=a.createElement("DIV"),u=n.getSettings().ariaTags;if(c.className="htAutocompleteArrow",u&&c.setAttribute(...hd()),c.appendChild(a.createTextNode("▼")),l.apply(this,[n,e,t,i,r,s,o]),e.firstChild||e.appendChild(a.createTextNode(" ")),e.insertBefore(c,e.firstChild),ce(e,"htAutocomplete"),!n.acArrowListener){const h=new Ys(n);n.acArrowListener=function(d){Ue(d.target,"htAutocompleteArrow")&&n.view._wt.getSetting("onCellDblClick",null,n._createCellCoords(t,i),e)},h.addEventListener(n.rootElement,"mousedown",n.acArrowListener),n.addHookOnce("afterDestroy",()=>{h.destroy()})}}Qg.RENDERER_TYPE=zTe;const UTe="dropdown";function kk(n,e,t,i,r,s,o){Qg.apply(this,[n,e,t,i,r,s,o])}kk.RENDERER_TYPE=UTe;const iU=new WeakMap,rU=new WeakMap,GTe="htBadValue",Jg="data-row",ep="data-col",YTe="checkboxRenderer",sU="checkbox";Pe.getSingleton().add("modifyAutoColumnSizeSeed",function(n,e,t){const{label:i,type:r,row:s,column:o,prop:a}=e;if(r===sU){if(i){const{value:l,property:c}=i;let u=t;if(l)u=typeof l=="function"?l(s,o,a,t):l;else if(c){const h=this.getDataAtRowProp(s,c);u=h!==null?h:t}n=u}return n}});function Dk(n,e,t,i,r,s,o){const{rootDocument:a}=n,l=n.getSettings().ariaTags;Hv.apply(this,[n,e,t,i,r,s,o]),KTe(n);let c=qTe(a);const u=o.label;let h=!1;if(typeof o.checkedTemplate>"u"&&(o.checkedTemplate=!0),typeof o.uncheckedTemplate>"u"&&(o.uncheckedTemplate=!1),$o(e),s===o.checkedTemplate||Ln(s).toLocaleLowerCase(o.locale)===Ln(o.checkedTemplate).toLocaleLowerCase(o.locale)?c.checked=!0:s===o.uncheckedTemplate||Ln(s).toLocaleLowerCase(o.locale)===Ln(o.uncheckedTemplate).toLocaleLowerCase(o.locale)?c.checked=!1:Hn(s)?ce(c,"noValue"):(c.style.display="none",ce(c,GTe),h=!0),ze(c,[[Jg,t],[ep,i]]),l&&ze(c,[iS(c.checked?n.getTranslatedPhrase(ik):n.getTranslatedPhrase(rk)),$z(c.checked),pye()]),!h&&u){let p="";if(u.value)p=typeof u.value=="function"?u.value.call(this,t,i,r,s):u.value;else if(u.property){const v=n.getDataAtRowProp(t,u.property);p=v!==null?v:""}const m=XTe(a,p,u.separated!==!0);u.position==="before"?u.separated?(e.appendChild(m),e.appendChild(c)):(m.appendChild(c),c=m):(!u.position||u.position==="after")&&(u.separated?(e.appendChild(c),e.appendChild(m)):(m.insertBefore(c,m.firstChild),c=m))}(!u||u&&!u.separated)&&e.appendChild(c),h&&e.appendChild(a.createTextNode("#bad-value#")),iU.has(n)||(iU.set(n,!0),d());function d(){const m=n.getShortcutManager().getContext("grid"),v={group:YTe,relativeToGroup:Iu,position:"before"};m.addShortcuts([{keys:[["space"]],callback:()=>(f(),!g()),runOnlyIf:()=>{var y;return(y=n.getSelectedRangeLast())===null||y===void 0?void 0:y.highlight.isCell()}},{keys:[["enter"]],callback:()=>(f(),!g()),runOnlyIf:()=>{const y=n.getSelectedRangeLast();return n.getSettings().enterBeginsEditing&&(y==null?void 0:y.isSingle())&&y.highlight.isCell()}},{keys:[["delete"],["backspace"]],callback:()=>(f(!0),!g()),runOnlyIf:()=>{var y;return(y=n.getSelectedRangeLast())===null||y===void 0?void 0:y.highlight.isCell()}}],v)}function f(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const m=n.getSelectedRange(),v=[],y=new Map;let w=[],_=0;if(m){for(let R=0;R<m.length;R++){const{row:E,col:x}=m[R].getTopStartCorner(),{row:P,col:T}=m[R].getBottomEndCorner();for(let I=E;I<=P;I+=1)for(let N=x;N<=T;N+=1){const W=n.getCellMeta(I,N),j={checkedTemplate:W.checkedTemplate,uncheckedTemplate:W.uncheckedTemplate};if(W.type!=="checkbox"){p===!0&&!W.readOnly&&(y.has(v.length)?y.set(v.length,[...y.get(v.length),[I,N,null]]):y.set(v.length,[[I,N,null]]));continue}if(W.readOnly===!0)continue;typeof W.checkedTemplate>"u"&&(W.checkedTemplate=!0),typeof W.uncheckedTemplate>"u"&&(W.uncheckedTemplate=!1);const K=n.getDataAtCell(I,N);p===!1?[W.checkedTemplate,W.checkedTemplate.toString()].includes(K)?w.push([I,N,W.uncheckedTemplate,j]):[W.uncheckedTemplate,W.uncheckedTemplate.toString(),null,void 0].includes(K)&&w.push([I,N,W.checkedTemplate,j]):w.push([I,N,W.uncheckedTemplate,j]),_+=1}v.push(_),_=0}w.every(R=>{let[,,E]=R;return E===w[0][2]})?w=w.map(R=>{let[E,x,P]=R;return[E,x,P]}):w=w.map(R=>{let[E,x,,P]=R;return[E,x,P.checkedTemplate]}),w.length>0&&v.forEach((R,E)=>{let x=w.splice(0,R);y.size&&y.has(E)&&(x=[...x,...y.get(E)]),n.setDataAtCell(x)})}}function g(){const p=n.getSelectedRange();if(p){for(let m=0;m<p.length;m++){const v=p[m].getTopStartCorner(),y=p[m].getBottomEndCorner();for(let w=v.row;w<=y.row;w++)for(let _=v.col;_<=y.col;_++){const R=n.getCellMeta(w,_),E=n.getCell(w,_);if(E==null)return!0;if(E.querySelectorAll("input[type=checkbox]").length>0&&!R.readOnly)return!0}}return!1}}}Dk.RENDERER_TYPE=sU;function KTe(n){let e=rU.get(n);if(!e){const{rootElement:t}=n;e=new Ys(n),e.addEventListener(t,"click",i=>QTe(i,n)),e.addEventListener(t,"mouseup",i=>ZTe(i,n)),e.addEventListener(t,"change",i=>JTe(i,n)),rU.set(n,e)}return e}function qTe(n){const e=n.createElement("input");return e.className="htCheckboxRendererInput",e.type="checkbox",e.setAttribute("tabindex","-1"),e.cloneNode(!1)}function XTe(n,e,t){const i=n.createElement("label");return i.className=`htCheckboxRendererLabel ${t?"fullWidth":""}`,i.appendChild(n.createTextNode(e)),i.cloneNode(!0)}function ZTe(n,e){const{target:t}=n;Nk(t)&&(!t.hasAttribute(Jg)||!t.hasAttribute(ep)||setTimeout(e.listen,10))}function QTe(n,e){const{target:t}=n;if(!Nk(t)||!t.hasAttribute(Jg)||!t.hasAttribute(ep))return;const i=parseInt(t.getAttribute(Jg),10),r=parseInt(t.getAttribute(ep),10);e.getCellMeta(i,r).readOnly&&n.preventDefault()}function JTe(n,e){const{target:t}=n;if(!Nk(t)||!t.hasAttribute(Jg)||!t.hasAttribute(ep))return;const i=parseInt(t.getAttribute(Jg),10),r=parseInt(t.getAttribute(ep),10),s=e.getCellMeta(i,r);if(!s.readOnly){let o=null;n.target.checked?o=s.uncheckedTemplate===void 0?!0:s.checkedTemplate:o=s.uncheckedTemplate===void 0?!1:s.uncheckedTemplate,e.setDataAtCell(i,r,o)}}function Nk(n){return n.tagName==="INPUT"&&n.getAttribute("type")==="checkbox"}const eMe="handsontable";function Lk(n,e,t,i,r,s,o){Qg.apply(this,[n,e,t,i,r,s,o])}Lk.RENDERER_TYPE=eMe;function D_(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oU={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,r,s){function o(c,u){if(!r[c]){if(!i[c]){var h=typeof D_=="function"&&D_;if(!u&&h)return h(c,!0);if(a)return a(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var f=r[c]={exports:{}};i[c][0].call(f.exports,function(g){return o(i[c][1][g]||g)},f,f.exports,t,i,r,s)}return r[c].exports}for(var a=typeof D_=="function"&&D_,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,i,r){(function(s){var o,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,l=Math.ceil,c=Math.floor,u="[BigNumber Error] ",h=u+"Number primitive has more than 15 significant digits: ",d=1e14,f=14,g=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,v=1e9;function y(T){var I=0|T;return 0<T||T===I?I:I-1}function w(T){for(var I,N,W=1,j=T.length,K=T[0]+"";W<j;){for(I=T[W++]+"",N=f-I.length;N--;I="0"+I);K+=I}for(j=K.length;K.charCodeAt(--j)===48;);return K.slice(0,j+1||1)}function _(T,I){var N,W,j=T.c,K=I.c,H=T.s,k=I.s,B=T.e,G=I.e;if(!H||!k)return null;if(N=j&&!j[0],W=K&&!K[0],N||W)return N?W?0:-k:H;if(H!=k)return H;if(N=H<0,W=B==G,!j||!K)return W?0:!j^N?1:-1;if(!W)return G<B^N?1:-1;for(k=(B=j.length)<(G=K.length)?B:G,H=0;H<k;H++)if(j[H]!=K[H])return j[H]>K[H]^N?1:-1;return B==G?0:G<B^N?1:-1}function R(T,I,N,W){if(T<I||N<T||T!==(T<0?l(T):c(T)))throw Error(u+(W||"Argument")+(typeof T=="number"?T<I||N<T?" out of range: ":" not an integer: ":" not a primitive number: ")+String(T))}function E(T){var I=T.c.length-1;return y(T.e/f)==I&&T.c[I]%2!=0}function x(T,I){return(1<T.length?T.charAt(0)+"."+T.slice(1):T)+(I<0?"e":"e+")+I}function P(T,I,N){var W,j;if(I<0){for(j=N+".";++I;j+=N);T=j+T}else if(++I>(W=T.length)){for(j=N,I-=W;--I;j+=N);T+=j}else I<W&&(T=T.slice(0,I)+"."+T.slice(I));return T}(o=function T(I){var N,W,j,K,H,k,B,G,z,se,b=ee.prototype={constructor:ee,toString:null,valueOf:null},C=new ee(1),S=20,A=4,L=-7,M=21,$=-1e7,Z=1e7,re=!1,ue=1,ae=0,De={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Ee="0123456789abcdefghijklmnopqrstuvwxyz";function ee(O,D){var F,Q,U,ne,X,Y,J,te,ie=this;if(!(ie instanceof ee))return new ee(O,D);if(D==null){if(O instanceof ee)return ie.s=O.s,ie.e=O.e,void(ie.c=(O=O.c)?O.slice():O);if((Y=typeof O=="number")&&0*O==0){if(ie.s=1/O<0?(O=-O,-1):1,O===~~O){for(ne=0,X=O;10<=X;X/=10,ne++);return ie.e=ne,void(ie.c=[O])}te=String(O)}else{if(te=String(O),!a.test(te))return j(ie,te,Y);ie.s=te.charCodeAt(0)==45?(te=te.slice(1),-1):1}-1<(ne=te.indexOf("."))&&(te=te.replace(".","")),0<(X=te.search(/e/i))?(ne<0&&(ne=X),ne+=+te.slice(X+1),te=te.substring(0,X)):ne<0&&(ne=te.length)}else{if(R(D,2,Ee.length,"Base"),te=String(O),D==10)return ye(ie=new ee(O instanceof ee?O:te),S+ie.e+1,A);if(Y=typeof O=="number"){if(0*O!=0)return j(ie,te,Y,D);if(ie.s=1/O<0?(te=te.slice(1),-1):1,ee.DEBUG&&15<te.replace(/^0\.0*|\./,"").length)throw Error(h+O);Y=!1}else ie.s=te.charCodeAt(0)===45?(te=te.slice(1),-1):1;for(F=Ee.slice(0,D),ne=X=0,J=te.length;X<J;X++)if(F.indexOf(Q=te.charAt(X))<0){if(Q=="."){if(ne<X){ne=J;continue}}else if(!U&&(te==te.toUpperCase()&&(te=te.toLowerCase())||te==te.toLowerCase()&&(te=te.toUpperCase()))){U=!0,X=-1,ne=0;continue}return j(ie,String(O),Y,D)}-1<(ne=(te=W(te,D,10,ie.s)).indexOf("."))?te=te.replace(".",""):ne=te.length}for(X=0;te.charCodeAt(X)===48;X++);for(J=te.length;te.charCodeAt(--J)===48;);if(te=te.slice(X,++J)){if(J-=X,Y&&ee.DEBUG&&15<J&&(g<O||O!==c(O)))throw Error(h+ie.s*O);if(Z<(ne=ne-X-1))ie.c=ie.e=null;else if(ne<$)ie.c=[ie.e=0];else{if(ie.e=ne,ie.c=[],X=(ne+1)%f,ne<0&&(X+=f),X<J){for(X&&ie.c.push(+te.slice(0,X)),J-=f;X<J;)ie.c.push(+te.slice(X,X+=f));te=te.slice(X),X=f-te.length}else X-=J;for(;X--;te+="0");ie.c.push(+te)}}else ie.c=[ie.e=0]}function oe(O,D,F,Q){var U,ne,X,Y,J;if(F==null?F=A:R(F,0,8),!O.c)return O.toString();if(U=O.c[0],X=O.e,D==null)J=w(O.c),J=Q==1||Q==2&&(X<=L||M<=X)?x(J,X):P(J,X,"0");else if(ne=(O=ye(new ee(O),D,F)).e,Y=(J=w(O.c)).length,Q==1||Q==2&&(D<=ne||ne<=L)){for(;Y<D;J+="0",Y++);J=x(J,ne)}else if(D-=X,J=P(J,ne,"0"),Y<ne+1){if(0<--D)for(J+=".";D--;J+="0");}else if(0<(D+=ne-Y))for(ne+1==Y&&(J+=".");D--;J+="0");return O.s<0&&U?"-"+J:J}function le(O,D){for(var F,Q=1,U=new ee(O[0]);Q<O.length;Q++){if(!(F=new ee(O[Q])).s){U=F;break}D.call(U,F)&&(U=F)}return U}function je(O,D,F){for(var Q=1,U=D.length;!D[--U];D.pop());for(U=D[0];10<=U;U/=10,Q++);return(F=Q+F*f-1)>Z?O.c=O.e=null:O.c=F<$?[O.e=0]:(O.e=F,D),O}function ye(O,D,F,Q){var U,ne,X,Y,J,te,ie,be=O.c,Ae=p;if(be){e:{for(U=1,Y=be[0];10<=Y;Y/=10,U++);if((ne=D-U)<0)ne+=f,X=D,ie=(J=be[te=0])/Ae[U-X-1]%10|0;else if((te=l((ne+1)/f))>=be.length){if(!Q)break e;for(;be.length<=te;be.push(0));J=ie=0,X=(ne%=f)-f+(U=1)}else{for(J=Y=be[te],U=1;10<=Y;Y/=10,U++);ie=(X=(ne%=f)-f+U)<0?0:J/Ae[U-X-1]%10|0}if(Q=Q||D<0||be[te+1]!=null||(X<0?J:J%Ae[U-X-1]),Q=F<4?(ie||Q)&&(F==0||F==(O.s<0?3:2)):5<ie||ie==5&&(F==4||Q||F==6&&(0<ne?0<X?J/Ae[U-X]:0:be[te-1])%10&1||F==(O.s<0?8:7)),D<1||!be[0])return be.length=0,Q?(D-=O.e+1,be[0]=Ae[(f-D%f)%f],O.e=-D||0):be[0]=O.e=0,O;if(ne==0?(be.length=te,Y=1,te--):(be.length=te+1,Y=Ae[f-ne],be[te]=0<X?c(J/Ae[U-X]%Ae[X])*Y:0),Q)for(;;){if(te==0){for(ne=1,X=be[0];10<=X;X/=10,ne++);for(X=be[0]+=Y,Y=1;10<=X;X/=10,Y++);ne!=Y&&(O.e++,be[0]==d&&(be[0]=1));break}if(be[te]+=Y,be[te]!=d)break;be[te--]=0,Y=1}for(ne=be.length;be[--ne]===0;be.pop());}O.e>Z?O.c=O.e=null:O.e<$&&(O.c=[O.e=0])}return O}function xe(O){var D,F=O.e;return F===null?O.toString():(D=w(O.c),D=F<=L||M<=F?x(D,F):P(D,F,"0"),O.s<0?"-"+D:D)}return ee.clone=T,ee.ROUND_UP=0,ee.ROUND_DOWN=1,ee.ROUND_CEIL=2,ee.ROUND_FLOOR=3,ee.ROUND_HALF_UP=4,ee.ROUND_HALF_DOWN=5,ee.ROUND_HALF_EVEN=6,ee.ROUND_HALF_CEIL=7,ee.ROUND_HALF_FLOOR=8,ee.EUCLID=9,ee.config=ee.set=function(O){var D,F;if(O!=null){if(typeof O!="object")throw Error(u+"Object expected: "+O);if(O.hasOwnProperty(D="DECIMAL_PLACES")&&(R(F=O[D],0,v,D),S=F),O.hasOwnProperty(D="ROUNDING_MODE")&&(R(F=O[D],0,8,D),A=F),O.hasOwnProperty(D="EXPONENTIAL_AT")&&((F=O[D])&&F.pop?(R(F[0],-v,0,D),R(F[1],0,v,D),L=F[0],M=F[1]):(R(F,-v,v,D),L=-(M=F<0?-F:F))),O.hasOwnProperty(D="RANGE"))if((F=O[D])&&F.pop)R(F[0],-v,-1,D),R(F[1],1,v,D),$=F[0],Z=F[1];else{if(R(F,-v,v,D),!F)throw Error(u+D+" cannot be zero: "+F);$=-(Z=F<0?-F:F)}if(O.hasOwnProperty(D="CRYPTO")){if((F=O[D])!==!!F)throw Error(u+D+" not true or false: "+F);if(F){if(typeof crypto>"u"||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw re=!F,Error(u+"crypto unavailable");re=F}else re=F}if(O.hasOwnProperty(D="MODULO_MODE")&&(R(F=O[D],0,9,D),ue=F),O.hasOwnProperty(D="POW_PRECISION")&&(R(F=O[D],0,v,D),ae=F),O.hasOwnProperty(D="FORMAT")){if(typeof(F=O[D])!="object")throw Error(u+D+" not an object: "+F);De=F}if(O.hasOwnProperty(D="ALPHABET")){if(typeof(F=O[D])!="string"||/^.$|[+-.\s]|(.).*\1/.test(F))throw Error(u+D+" invalid: "+F);Ee=F}}return{DECIMAL_PLACES:S,ROUNDING_MODE:A,EXPONENTIAL_AT:[L,M],RANGE:[$,Z],CRYPTO:re,MODULO_MODE:ue,POW_PRECISION:ae,FORMAT:De,ALPHABET:Ee}},ee.isBigNumber=function(O){return O instanceof ee||O&&O._isBigNumber===!0||!1},ee.maximum=ee.max=function(){return le(arguments,b.lt)},ee.minimum=ee.min=function(){return le(arguments,b.gt)},ee.random=(K=9007199254740992,H=Math.random()*K&2097151?function(){return c(Math.random()*K)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(O){var D,F,Q,U,ne,X=0,Y=[],J=new ee(C);if(O==null?O=S:R(O,0,v),U=l(O/f),re)if(crypto.getRandomValues){for(D=crypto.getRandomValues(new Uint32Array(U*=2));X<U;)9e15<=(ne=131072*D[X]+(D[X+1]>>>11))?(F=crypto.getRandomValues(new Uint32Array(2)),D[X]=F[0],D[X+1]=F[1]):(Y.push(ne%1e14),X+=2);X=U/2}else{if(!crypto.randomBytes)throw re=!1,Error(u+"crypto unavailable");for(D=crypto.randomBytes(U*=7);X<U;)9e15<=(ne=281474976710656*(31&D[X])+1099511627776*D[X+1]+4294967296*D[X+2]+16777216*D[X+3]+(D[X+4]<<16)+(D[X+5]<<8)+D[X+6])?crypto.randomBytes(7).copy(D,X):(Y.push(ne%1e14),X+=7);X=U/7}if(!re)for(;X<U;)(ne=H())<9e15&&(Y[X++]=ne%1e14);for(U=Y[--X],O%=f,U&&O&&(ne=p[f-O],Y[X]=c(U/ne)*ne);Y[X]===0;Y.pop(),X--);if(X<0)Y=[Q=0];else{for(Q=-1;Y[0]===0;Y.splice(0,1),Q-=f);for(X=1,ne=Y[0];10<=ne;ne/=10,X++);X<f&&(Q-=f-X)}return J.e=Q,J.c=Y,J}),ee.sum=function(){for(var O=1,D=arguments,F=new ee(D[0]);O<D.length;)F=F.plus(D[O++]);return F},W=function(){var O="0123456789";function D(F,Q,U,ne){for(var X,Y,J=[0],te=0,ie=F.length;te<ie;){for(Y=J.length;Y--;J[Y]*=Q);for(J[0]+=ne.indexOf(F.charAt(te++)),X=0;X<J.length;X++)J[X]>U-1&&(J[X+1]==null&&(J[X+1]=0),J[X+1]+=J[X]/U|0,J[X]%=U)}return J.reverse()}return function(F,Q,U,ne,X){var Y,J,te,ie,be,Ae,Fe,lt,Et=F.indexOf("."),ft=S,qe=A;for(0<=Et&&(ie=ae,ae=0,F=F.replace(".",""),Ae=(lt=new ee(Q)).pow(F.length-Et),ae=ie,lt.c=D(P(w(Ae.c),Ae.e,"0"),10,U,O),lt.e=lt.c.length),te=ie=(Fe=D(F,Q,U,X?(Y=Ee,O):(Y=O,Ee))).length;Fe[--ie]==0;Fe.pop());if(!Fe[0])return Y.charAt(0);if(Et<0?--te:(Ae.c=Fe,Ae.e=te,Ae.s=ne,Fe=(Ae=N(Ae,lt,ft,qe,U)).c,be=Ae.r,te=Ae.e),Et=Fe[J=te+ft+1],ie=U/2,be=be||J<0||Fe[J+1]!=null,be=qe<4?(Et!=null||be)&&(qe==0||qe==(Ae.s<0?3:2)):ie<Et||Et==ie&&(qe==4||be||qe==6&&1&Fe[J-1]||qe==(Ae.s<0?8:7)),J<1||!Fe[0])F=be?P(Y.charAt(1),-ft,Y.charAt(0)):Y.charAt(0);else{if(Fe.length=J,be)for(--U;++Fe[--J]>U;)Fe[J]=0,J||(++te,Fe=[1].concat(Fe));for(ie=Fe.length;!Fe[--ie];);for(Et=0,F="";Et<=ie;F+=Y.charAt(Fe[Et++]));F=P(F,te,Y.charAt(0))}return F}}(),N=function(){function O(Q,U,ne){var X,Y,J,te,ie=0,be=Q.length,Ae=U%m,Fe=U/m|0;for(Q=Q.slice();be--;)ie=((Y=Ae*(J=Q[be]%m)+(X=Fe*J+(te=Q[be]/m|0)*Ae)%m*m+ie)/ne|0)+(X/m|0)+Fe*te,Q[be]=Y%ne;return ie&&(Q=[ie].concat(Q)),Q}function D(Q,U,ne,X){var Y,J;if(ne!=X)J=X<ne?1:-1;else for(Y=J=0;Y<ne;Y++)if(Q[Y]!=U[Y]){J=Q[Y]>U[Y]?1:-1;break}return J}function F(Q,U,ne,X){for(var Y=0;ne--;)Q[ne]-=Y,Y=Q[ne]<U[ne]?1:0,Q[ne]=Y*X+Q[ne]-U[ne];for(;!Q[0]&&1<Q.length;Q.splice(0,1));}return function(Q,U,ne,X,Y){var J,te,ie,be,Ae,Fe,lt,Et,ft,qe,Tt,Un,am,ua,Ey,bo,kn,Ei=Q.s==U.s?1:-1,Gi=Q.c,En=U.c;if(!(Gi&&Gi[0]&&En&&En[0]))return new ee(Q.s&&U.s&&(Gi?!En||Gi[0]!=En[0]:En)?Gi&&Gi[0]==0||!En?0*Ei:Ei/0:NaN);for(ft=(Et=new ee(Ei)).c=[],Ei=ne+(te=Q.e-U.e)+1,Y||(Y=d,te=y(Q.e/f)-y(U.e/f),Ei=Ei/f|0),ie=0;En[ie]==(Gi[ie]||0);ie++);if(En[ie]>(Gi[ie]||0)&&te--,Ei<0)ft.push(1),be=!0;else{for(ua=Gi.length,bo=En.length,Ei+=2,1<(Ae=c(Y/(En[ie=0]+1)))&&(En=O(En,Ae,Y),Gi=O(Gi,Ae,Y),bo=En.length,ua=Gi.length),am=bo,Tt=(qe=Gi.slice(0,bo)).length;Tt<bo;qe[Tt++]=0);kn=En.slice(),kn=[0].concat(kn),Ey=En[0],En[1]>=Y/2&&Ey++;do{if(Ae=0,(J=D(En,qe,bo,Tt))<0){if(Un=qe[0],bo!=Tt&&(Un=Un*Y+(qe[1]||0)),1<(Ae=c(Un/Ey)))for(Y<=Ae&&(Ae=Y-1),lt=(Fe=O(En,Ae,Y)).length,Tt=qe.length;D(Fe,qe,lt,Tt)==1;)Ae--,F(Fe,bo<lt?kn:En,lt,Y),lt=Fe.length,J=1;else Ae==0&&(J=Ae=1),lt=(Fe=En.slice()).length;if(lt<Tt&&(Fe=[0].concat(Fe)),F(qe,Fe,Tt,Y),Tt=qe.length,J==-1)for(;D(En,qe,bo,Tt)<1;)Ae++,F(qe,bo<Tt?kn:En,Tt,Y),Tt=qe.length}else J===0&&(Ae++,qe=[0]);ft[ie++]=Ae,qe[0]?qe[Tt++]=Gi[am]||0:(qe=[Gi[am]],Tt=1)}while((am++<ua||qe[0]!=null)&&Ei--);be=qe[0]!=null,ft[0]||ft.splice(0,1)}if(Y==d){for(ie=1,Ei=ft[0];10<=Ei;Ei/=10,ie++);ye(Et,ne+(Et.e=ie+te*f-1)+1,X,be)}else Et.e=te,Et.r=+be;return Et}}(),k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,B=/^([^.]+)\.$/,G=/^\.([^.]+)$/,z=/^-?(Infinity|NaN)$/,se=/^\s*\+(?=[\w.])|^\s+|\s+$/g,j=function(O,D,F,Q){var U,ne=F?D:D.replace(se,"");if(z.test(ne))O.s=isNaN(ne)?null:ne<0?-1:1,O.c=O.e=null;else{if(!F&&(ne=ne.replace(k,function(X,Y,J){return U=(J=J.toLowerCase())=="x"?16:J=="b"?2:8,Q&&Q!=U?X:Y}),Q&&(U=Q,ne=ne.replace(B,"$1").replace(G,"0.$1")),D!=ne))return new ee(ne,U);if(ee.DEBUG)throw Error(u+"Not a"+(Q?" base "+Q:"")+" number: "+D);O.c=O.e=O.s=null}},b.absoluteValue=b.abs=function(){var O=new ee(this);return O.s<0&&(O.s=1),O},b.comparedTo=function(O,D){return _(this,new ee(O,D))},b.decimalPlaces=b.dp=function(O,D){var F,Q,U;if(O!=null)return R(O,0,v),D==null?D=A:R(D,0,8),ye(new ee(this),O+this.e+1,D);if(!(F=this.c))return null;if(Q=((U=F.length-1)-y(this.e/f))*f,U=F[U])for(;U%10==0;U/=10,Q--);return Q<0&&(Q=0),Q},b.dividedBy=b.div=function(O,D){return N(this,new ee(O,D),S,A)},b.dividedToIntegerBy=b.idiv=function(O,D){return N(this,new ee(O,D),0,1)},b.exponentiatedBy=b.pow=function(O,D){var F,Q,U,ne,X,Y,J,te,ie=this;if((O=new ee(O)).c&&!O.isInteger())throw Error(u+"Exponent not an integer: "+xe(O));if(D!=null&&(D=new ee(D)),X=14<O.e,!ie.c||!ie.c[0]||ie.c[0]==1&&!ie.e&&ie.c.length==1||!O.c||!O.c[0])return te=new ee(Math.pow(+xe(ie),X?2-E(O):+xe(O))),D?te.mod(D):te;if(Y=O.s<0,D){if(D.c?!D.c[0]:!D.s)return new ee(NaN);(Q=!Y&&ie.isInteger()&&D.isInteger())&&(ie=ie.mod(D))}else{if(9<O.e&&(0<ie.e||ie.e<-1||(ie.e==0?1<ie.c[0]||X&&24e7<=ie.c[1]:ie.c[0]<8e13||X&&ie.c[0]<=9999975e7)))return ne=ie.s<0&&E(O)?-0:0,-1<ie.e&&(ne=1/ne),new ee(Y?1/ne:ne);ae&&(ne=l(ae/f+2))}for(J=X?(F=new ee(.5),Y&&(O.s=1),E(O)):(U=Math.abs(+xe(O)))%2,te=new ee(C);;){if(J){if(!(te=te.times(ie)).c)break;ne?te.c.length>ne&&(te.c.length=ne):Q&&(te=te.mod(D))}if(U){if((U=c(U/2))===0)break;J=U%2}else if(ye(O=O.times(F),O.e+1,1),14<O.e)J=E(O);else{if((U=+xe(O))==0)break;J=U%2}ie=ie.times(ie),ne?ie.c&&ie.c.length>ne&&(ie.c.length=ne):Q&&(ie=ie.mod(D))}return Q?te:(Y&&(te=C.div(te)),D?te.mod(D):ne?ye(te,ae,A,void 0):te)},b.integerValue=function(O){var D=new ee(this);return O==null?O=A:R(O,0,8),ye(D,D.e+1,O)},b.isEqualTo=b.eq=function(O,D){return _(this,new ee(O,D))===0},b.isFinite=function(){return!!this.c},b.isGreaterThan=b.gt=function(O,D){return 0<_(this,new ee(O,D))},b.isGreaterThanOrEqualTo=b.gte=function(O,D){return(D=_(this,new ee(O,D)))===1||D===0},b.isInteger=function(){return!!this.c&&y(this.e/f)>this.c.length-2},b.isLessThan=b.lt=function(O,D){return _(this,new ee(O,D))<0},b.isLessThanOrEqualTo=b.lte=function(O,D){return(D=_(this,new ee(O,D)))===-1||D===0},b.isNaN=function(){return!this.s},b.isNegative=function(){return this.s<0},b.isPositive=function(){return 0<this.s},b.isZero=function(){return!!this.c&&this.c[0]==0},b.minus=function(O,D){var F,Q,U,ne,X=this,Y=X.s;if(D=(O=new ee(O,D)).s,!Y||!D)return new ee(NaN);if(Y!=D)return O.s=-D,X.plus(O);var J=X.e/f,te=O.e/f,ie=X.c,be=O.c;if(!J||!te){if(!ie||!be)return ie?(O.s=-D,O):new ee(be?X:NaN);if(!ie[0]||!be[0])return be[0]?(O.s=-D,O):new ee(ie[0]?X:A==3?-0:0)}if(J=y(J),te=y(te),ie=ie.slice(),Y=J-te){for((U=(ne=Y<0)?(Y=-Y,ie):(te=J,be)).reverse(),D=Y;D--;U.push(0));U.reverse()}else for(Q=(ne=(Y=ie.length)<(D=be.length))?Y:D,Y=D=0;D<Q;D++)if(ie[D]!=be[D]){ne=ie[D]<be[D];break}if(ne&&(U=ie,ie=be,be=U,O.s=-O.s),0<(D=(Q=be.length)-(F=ie.length)))for(;D--;ie[F++]=0);for(D=d-1;Y<Q;){if(ie[--Q]<be[Q]){for(F=Q;F&&!ie[--F];ie[F]=D);--ie[F],ie[Q]+=d}ie[Q]-=be[Q]}for(;ie[0]==0;ie.splice(0,1),--te);return ie[0]?je(O,ie,te):(O.s=A==3?-1:1,O.c=[O.e=0],O)},b.modulo=b.mod=function(O,D){var F,Q,U=this;return O=new ee(O,D),!U.c||!O.s||O.c&&!O.c[0]?new ee(NaN):!O.c||U.c&&!U.c[0]?new ee(U):(ue==9?(Q=O.s,O.s=1,F=N(U,O,0,3),O.s=Q,F.s*=Q):F=N(U,O,0,ue),(O=U.minus(F.times(O))).c[0]||ue!=1||(O.s=U.s),O)},b.multipliedBy=b.times=function(O,D){var F,Q,U,ne,X,Y,J,te,ie,be,Ae,Fe,lt,Et,ft,qe=this,Tt=qe.c,Un=(O=new ee(O,D)).c;if(!(Tt&&Un&&Tt[0]&&Un[0]))return!qe.s||!O.s||Tt&&!Tt[0]&&!Un||Un&&!Un[0]&&!Tt?O.c=O.e=O.s=null:(O.s*=qe.s,Tt&&Un?(O.c=[0],O.e=0):O.c=O.e=null),O;for(Q=y(qe.e/f)+y(O.e/f),O.s*=qe.s,(J=Tt.length)<(be=Un.length)&&(lt=Tt,Tt=Un,Un=lt,U=J,J=be,be=U),U=J+be,lt=[];U--;lt.push(0));for(Et=d,ft=m,U=be;0<=--U;){for(F=0,Ae=Un[U]%ft,Fe=Un[U]/ft|0,ne=U+(X=J);U<ne;)F=((te=Ae*(te=Tt[--X]%ft)+(Y=Fe*te+(ie=Tt[X]/ft|0)*Ae)%ft*ft+lt[ne]+F)/Et|0)+(Y/ft|0)+Fe*ie,lt[ne--]=te%Et;lt[ne]=F}return F?++Q:lt.splice(0,1),je(O,lt,Q)},b.negated=function(){var O=new ee(this);return O.s=-O.s||null,O},b.plus=function(O,D){var F,Q=this,U=Q.s;if(D=(O=new ee(O,D)).s,!U||!D)return new ee(NaN);if(U!=D)return O.s=-D,Q.minus(O);var ne=Q.e/f,X=O.e/f,Y=Q.c,J=O.c;if(!ne||!X){if(!Y||!J)return new ee(U/0);if(!Y[0]||!J[0])return J[0]?O:new ee(Y[0]?Q:0*U)}if(ne=y(ne),X=y(X),Y=Y.slice(),U=ne-X){for((F=0<U?(X=ne,J):(U=-U,Y)).reverse();U--;F.push(0));F.reverse()}for((U=Y.length)-(D=J.length)<0&&(F=J,J=Y,Y=F,D=U),U=0;D;)U=(Y[--D]=Y[D]+J[D]+U)/d|0,Y[D]=d===Y[D]?0:Y[D]%d;return U&&(Y=[U].concat(Y),++X),je(O,Y,X)},b.precision=b.sd=function(O,D){var F,Q,U;if(O!=null&&O!==!!O)return R(O,1,v),D==null?D=A:R(D,0,8),ye(new ee(this),O,D);if(!(F=this.c))return null;if(Q=(U=F.length-1)*f+1,U=F[U]){for(;U%10==0;U/=10,Q--);for(U=F[0];10<=U;U/=10,Q++);}return O&&this.e+1>Q&&(Q=this.e+1),Q},b.shiftedBy=function(O){return R(O,-g,g),this.times("1e"+O)},b.squareRoot=b.sqrt=function(){var O,D,F,Q,U,ne=this,X=ne.c,Y=ne.s,J=ne.e,te=S+4,ie=new ee("0.5");if(Y!==1||!X||!X[0])return new ee(!Y||Y<0&&(!X||X[0])?NaN:X?ne:1/0);if((F=(Y=Math.sqrt(+xe(ne)))==0||Y==1/0?(((D=w(X)).length+J)%2==0&&(D+="0"),Y=Math.sqrt(+D),J=y((J+1)/2)-(J<0||J%2),new ee(D=Y==1/0?"1e"+J:(D=Y.toExponential()).slice(0,D.indexOf("e")+1)+J)):new ee(Y+"")).c[0]){for((Y=(J=F.e)+te)<3&&(Y=0);;)if(U=F,F=ie.times(U.plus(N(ne,U,te,1))),w(U.c).slice(0,Y)===(D=w(F.c)).slice(0,Y)){if(F.e<J&&--Y,(D=D.slice(Y-3,Y+1))!="9999"&&(Q||D!="4999")){+D&&(+D.slice(1)||D.charAt(0)!="5")||(ye(F,F.e+S+2,1),O=!F.times(F).eq(ne));break}if(!Q&&(ye(U,U.e+S+2,0),U.times(U).eq(ne))){F=U;break}te+=4,Y+=4,Q=1}}return ye(F,F.e+S+1,A,O)},b.toExponential=function(O,D){return O!=null&&(R(O,0,v),O++),oe(this,O,D,1)},b.toFixed=function(O,D){return O!=null&&(R(O,0,v),O=O+this.e+1),oe(this,O,D)},b.toFormat=function(O,D,F){var Q;if(F==null)O!=null&&D&&typeof D=="object"?(F=D,D=null):O&&typeof O=="object"?(F=O,O=D=null):F=De;else if(typeof F!="object")throw Error(u+"Argument not an object: "+F);if(Q=this.toFixed(O,D),this.c){var U,ne=Q.split("."),X=+F.groupSize,Y=+F.secondaryGroupSize,J=F.groupSeparator||"",te=ne[0],ie=ne[1],be=this.s<0,Ae=be?te.slice(1):te,Fe=Ae.length;if(Y&&(U=X,X=Y,Fe-=Y=U),0<X&&0<Fe){for(U=Fe%X||X,te=Ae.substr(0,U);U<Fe;U+=X)te+=J+Ae.substr(U,X);0<Y&&(te+=J+Ae.slice(U)),be&&(te="-"+te)}Q=ie?te+(F.decimalSeparator||"")+((Y=+F.fractionGroupSize)?ie.replace(new RegExp("\\d{"+Y+"}\\B","g"),"$&"+(F.fractionGroupSeparator||"")):ie):te}return(F.prefix||"")+Q+(F.suffix||"")},b.toFraction=function(O){var D,F,Q,U,ne,X,Y,J,te,ie,be,Ae,Fe=this,lt=Fe.c;if(O!=null&&(!(Y=new ee(O)).isInteger()&&(Y.c||Y.s!==1)||Y.lt(C)))throw Error(u+"Argument "+(Y.isInteger()?"out of range: ":"not an integer: ")+xe(Y));if(!lt)return new ee(Fe);for(D=new ee(C),te=F=new ee(C),Q=J=new ee(C),Ae=w(lt),ne=D.e=Ae.length-Fe.e-1,D.c[0]=p[(X=ne%f)<0?f+X:X],O=!O||0<Y.comparedTo(D)?0<ne?D:te:Y,X=Z,Z=1/0,Y=new ee(Ae),J.c[0]=0;ie=N(Y,D,0,1),(U=F.plus(ie.times(Q))).comparedTo(O)!=1;)F=Q,Q=U,te=J.plus(ie.times(U=te)),J=U,D=Y.minus(ie.times(U=D)),Y=U;return U=N(O.minus(F),Q,0,1),J=J.plus(U.times(te)),F=F.plus(U.times(Q)),J.s=te.s=Fe.s,be=N(te,Q,ne*=2,A).minus(Fe).abs().comparedTo(N(J,F,ne,A).minus(Fe).abs())<1?[te,Q]:[J,F],Z=X,be},b.toNumber=function(){return+xe(this)},b.toPrecision=function(O,D){return O!=null&&R(O,1,v),oe(this,O,D,2)},b.toString=function(O){var D,F=this,Q=F.s,U=F.e;return U===null?Q?(D="Infinity",Q<0&&(D="-"+D)):D="NaN":(D=O==null?U<=L||M<=U?x(w(F.c),U):P(w(F.c),U,"0"):O===10?P(w((F=ye(new ee(F),S+U+1,A)).c),F.e,"0"):(R(O,2,Ee.length,"Base"),W(P(w(F.c),U,"0"),10,O,Q,!0)),Q<0&&F.c[0]&&(D="-"+D)),D},b.valueOf=b.toJSON=function(){return xe(this)},b._isBigNumber=!0,typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(b[Symbol.toStringTag]="BigNumber",b[Symbol.for("nodejs.util.inspect.custom")]=b.valueOf),I!=null&&ee.set(I),ee}()).default=o.BigNumber=o,i!==void 0&&i.exports?i.exports=o:(s||(s=typeof self<"u"&&self?self:window),s.BigNumber=o)})(this)},{}],2:[function(t,i,r){i.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(s){var o=s%10;return~~(s%100/10)==1?"th":o===1?"st":o===2?"nd":o===3?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,i,r){function s(y,w){return function(_){if(Array.isArray(_))return _}(y)||function(_,R){var E=[],x=!0,P=!1,T=void 0;try{for(var I,N=_[Symbol.iterator]();!(x=(I=N.next()).done)&&(E.push(I.value),!R||E.length!==R);x=!0);}catch(W){P=!0,T=W}finally{try{x||N.return==null||N.return()}finally{if(P)throw T}}return E}(y,w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=t("./globalState"),a=t("./validating"),l=t("./parsing"),c=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],u={general:{scale:1024,suffixes:c,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:c,marker:"d"}},h={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};function d(y){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},_=2<arguments.length?arguments[2]:void 0;if(typeof w=="string"&&(w=l.parseFormat(w)),!a.validateFormat(w))return"ERROR: invalid format";var R=w.prefix||"",E=w.postfix||"",x=function(P,T,I){switch(T.output){case"currency":return T=v(T,o.currentCurrencyDefaultFormat()),function(Ee,ee,oe){var le=oe.currentCurrency(),je=Object.assign({},h,ee),ye=void 0,xe="",O=!!je.totalLength||!!je.forceAverage||je.average,D=ee.currencyPosition||le.position,F=ee.currencySymbol||le.symbol;je.spaceSeparated&&(xe=" "),D==="infix"&&(ye=xe+F+xe);var Q=m({instance:Ee,providedFormat:ee,state:oe,decimalSeparator:ye});return D==="prefix"&&(Q=Ee._value<0&&je.negative==="sign"?"-".concat(xe).concat(F).concat(Q.slice(1)):F+xe+Q),D&&D!=="postfix"||(Q=Q+(xe=O?"":xe)+F),Q}(P,T,o);case"percent":return T=v(T,o.currentPercentageDefaultFormat()),function(Ee,ee,oe,le){var je=ee.prefixSymbol,ye=m({instance:le(100*Ee._value),providedFormat:ee,state:oe}),xe=Object.assign({},h,ee);return je?"%".concat(xe.spaceSeparated?" ":"").concat(ye):"".concat(ye).concat(xe.spaceSeparated?" ":"","%")}(P,T,o,I);case"byte":return T=v(T,o.currentByteDefaultFormat()),C=P,A=o,L=I,M=(S=T).base||"binary",$=u[M],Z=f(C._value,$.suffixes,$.scale),re=Z.value,ue=Z.suffix,ae=m({instance:L(re),providedFormat:S,state:A,defaults:A.currentByteDefaultFormat()}),De=A.currentAbbreviations(),"".concat(ae).concat(De.spaced?" ":"").concat(ue);case"time":return T=v(T,o.currentTimeDefaultFormat()),G=P,z=Math.floor(G._value/60/60),se=Math.floor((G._value-60*z*60)/60),b=Math.round(G._value-60*z*60-60*se),"".concat(z,":").concat(se<10?"0":"").concat(se,":").concat(b<10?"0":"").concat(b);case"ordinal":return T=v(T,o.currentOrdinalDefaultFormat()),N=P,W=T,K=(j=o).currentOrdinal(),H=Object.assign({},h,W),k=m({instance:N,providedFormat:W,state:j}),B=K(N._value),"".concat(k).concat(H.spaceSeparated?" ":"").concat(B);case"number":default:return m({instance:P,providedFormat:T,numbro:I})}var N,W,j,K,H,k,B,G,z,se,b,C,S,A,L,M,$,Z,re,ue,ae,De}(y,w,_);return x=(x=R+x)+E}function f(y,w,_){var R=w[0],E=Math.abs(y);if(_<=E){for(var x=1;x<w.length;++x){var P=Math.pow(_,x),T=Math.pow(_,x+1);if(P<=E&&E<T){R=w[x],y/=P;break}}R===w[0]&&(y/=Math.pow(_,w.length-1),R=w[w.length-1])}return{value:y,suffix:R}}function g(y){for(var w="",_=0;_<y;_++)w+="0";return w}function p(y,w){return y.toString().indexOf("e")!==-1?function(_,R){var E=_.toString(),x=s(E.split("e"),2),P=x[0],T=x[1],I=s(P.split("."),2),N=I[0],W=I[1],j=W===void 0?"":W;if(0<+T)E=N+j+g(T-j.length);else{var K=".";K=+N<0?"-0".concat(K):"0".concat(K);var H=(g(-T-1)+Math.abs(N)+j).substr(0,R);H.length<R&&(H+=g(R-H.length)),E=K+H}return 0<+T&&0<R&&(E+=".".concat(g(R))),E}(y,w):(Math.round(+"".concat(y,"e+").concat(w))/Math.pow(10,w)).toFixed(w)}function m(y){var w=y.instance,_=y.providedFormat,R=y.state,E=R===void 0?o:R,x=y.decimalSeparator,P=y.defaults,T=P===void 0?E.currentDefaults():P,I=w._value;if(I===0&&E.hasZeroFormat())return E.getZeroFormat();if(!isFinite(I))return I.toString();var N,W,j,K,H,k,B,G,z=Object.assign({},h,T,_),se=z.totalLength,b=se?0:z.characteristic,C=z.optionalCharacteristic,S=z.forceAverage,A=!!se||!!S||z.average,L=se?-1:A&&_.mantissa===void 0?0:z.mantissa,M=!se&&(_.optionalMantissa===void 0?L===-1:z.optionalMantissa),$=z.trimMantissa,Z=z.thousandSeparated,re=z.spaceSeparated,ue=z.negative,ae=z.forceSign,De=z.exponential,Ee="";if(A){var ee=function(O){var D=O.value,F=O.forceAverage,Q=O.abbreviations,U=O.spaceSeparated,ne=U!==void 0&&U,X=O.totalLength,Y=X===void 0?0:X,J="",te=Math.abs(D),ie=-1;if(te>=Math.pow(10,12)&&!F||F==="trillion"?(J=Q.trillion,D/=Math.pow(10,12)):te<Math.pow(10,12)&&te>=Math.pow(10,9)&&!F||F==="billion"?(J=Q.billion,D/=Math.pow(10,9)):te<Math.pow(10,9)&&te>=Math.pow(10,6)&&!F||F==="million"?(J=Q.million,D/=Math.pow(10,6)):(te<Math.pow(10,6)&&te>=Math.pow(10,3)&&!F||F==="thousand")&&(J=Q.thousand,D/=Math.pow(10,3)),J&&(J=(ne?" ":"")+J),Y){var be=D.toString().split(".")[0];ie=Math.max(Y-be.length,0)}return{value:D,abbreviation:J,mantissaPrecision:ie}}({value:I,forceAverage:S,abbreviations:E.currentAbbreviations(),spaceSeparated:re,totalLength:se});I=ee.value,Ee+=ee.abbreviation,se&&(L=ee.mantissaPrecision)}if(De){var oe=(W=(N={value:I,characteristicPrecision:b}).value,j=N.characteristicPrecision,K=j===void 0?0:j,H=s(W.toExponential().split("e"),2),k=H[0],B=H[1],G=+k,K&&1<K&&(G*=Math.pow(10,K-1),B=0<=(B=+B-(K-1))?"+".concat(B):B),{value:G,abbreviation:"e".concat(B)});I=oe.value,Ee=oe.abbreviation+Ee}var le,je,ye,xe=function(O,D,F,Q,U){if(Q===-1)return O;var ne=p(D,Q),X=s(ne.toString().split("."),2),Y=X[0],J=X[1],te=J===void 0?"":J;if(te.match(/^0+$/)&&(F||U))return Y;var ie=te.match(/0+$/);return U&&ie?"".concat(Y,".").concat(te.toString().slice(0,ie.index)):ne.toString()}(I.toString(),I,M,L,$);return xe=function(O,D,F,Q,U){var ne=Q.currentDelimiters(),X=ne.thousands;U=U||ne.decimal;var Y=ne.thousandsSize||3,J=O.toString(),te=J.split(".")[0],ie=J.split(".")[1];return F&&(D<0&&(te=te.slice(1)),function(be,Ae){for(var Fe=[],lt=0,Et=be;0<Et;Et--)lt===Ae&&(Fe.unshift(Et),lt=0),lt++;return Fe}(te.length,Y).forEach(function(be,Ae){te=te.slice(0,be+Ae)+X+te.slice(be+Ae)}),D<0&&(te="-".concat(te))),J=ie?te+U+ie:te}(xe=function(O,D,F,Q){var U=O,ne=s(U.toString().split("."),2),X=ne[0],Y=ne[1];if(X.match(/^-?0$/)&&F)return Y?"".concat(X.replace("0",""),".").concat(Y):X.replace("0","");if(X.length<Q)for(var J=Q-X.length,te=0;te<J;te++)U="0".concat(U);return U.toString()}(xe,0,C,b),I,Z,E,x),(A||De)&&(xe=xe+Ee),(ae||I<0)&&(le=xe,ye=ue,xe=(je=I)===0?le:+le==0?le.replace("-",""):0<je?"+".concat(le):ye==="sign"?le:"(".concat(le.replace("-",""),")")),xe}function v(y,w){if(!y)return w;var _=Object.keys(y);return _.length===1&&_[0]==="output"?w:y}i.exports=function(y){return{format:function(){for(var w=arguments.length,_=new Array(w),R=0;R<w;R++)_[R]=arguments[R];return d.apply(void 0,_.concat([y]))},getByteUnit:function(){for(var w=arguments.length,_=new Array(w),R=0;R<w;R++)_[R]=arguments[R];return(function(E){var x=u.general;return f(E._value,x.suffixes,x.scale).suffix}).apply(void 0,_.concat([y]))},getBinaryByteUnit:function(){for(var w=arguments.length,_=new Array(w),R=0;R<w;R++)_[R]=arguments[R];return(function(E){var x=u.binary;return f(E._value,x.suffixes,x.scale).suffix}).apply(void 0,_.concat([y]))},getDecimalByteUnit:function(){for(var w=arguments.length,_=new Array(w),R=0;R<w;R++)_[R]=arguments[R];return(function(E){var x=u.decimal;return f(E._value,x.suffixes,x.scale).suffix}).apply(void 0,_.concat([y]))},formatOrDefault:v}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,i,r){var s=t("./en-US"),o=t("./validating"),a=t("./parsing"),l={},c=void 0,u={},h=null,d={};function f(p){c=p}function g(){return u[c]}l.languages=function(){return Object.assign({},u)},l.currentLanguage=function(){return c},l.currentCurrency=function(){return g().currency},l.currentAbbreviations=function(){return g().abbreviations},l.currentDelimiters=function(){return g().delimiters},l.currentOrdinal=function(){return g().ordinal},l.currentDefaults=function(){return Object.assign({},g().defaults,d)},l.currentOrdinalDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().ordinalFormat)},l.currentByteDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().byteFormat)},l.currentPercentageDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().percentageFormat)},l.currentCurrencyDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().currencyFormat)},l.currentTimeDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().timeFormat)},l.setDefaults=function(p){p=a.parseFormat(p),o.validateFormat(p)&&(d=p)},l.getZeroFormat=function(){return h},l.setZeroFormat=function(p){return h=typeof p=="string"?p:null},l.hasZeroFormat=function(){return h!==null},l.languageData=function(p){if(p){if(u[p])return u[p];throw new Error('Unknown tag "'.concat(p,'"'))}return g()},l.registerLanguage=function(p){var m=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(!o.validateLanguage(p))throw new Error("Invalid language data");u[p.languageTag]=p,m&&f(p.languageTag)},l.setLanguage=function(p){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:s.languageTag;if(!u[p]){var v=p.split("-")[0],y=Object.keys(u).find(function(w){return w.split("-")[0]===v});return u[y]?void f(y):void f(m)}f(p)},l.registerLanguage(s),c=s.languageTag,i.exports=l},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,i,r){i.exports=function(s){return{loadLanguagesInNode:function(o){return a=s,void o.forEach(function(l){var c=void 0;try{c=t("../languages/".concat(l))}catch{console.error('Unable to load "'.concat(l,'". No matching language file found.'))}c&&a.registerLanguage(c)});var a}}}},{}],6:[function(t,i,r){var s=t("bignumber.js");function o(a,l,c){var u=new s(a._value),h=l;return c.isNumbro(l)&&(h=l._value),h=new s(h),a._value=u.minus(h).toNumber(),a}i.exports=function(a){return{add:function(l,c){return h=c,d=a,f=new s((u=l)._value),g=h,d.isNumbro(h)&&(g=h._value),g=new s(g),u._value=f.plus(g).toNumber(),u;var u,h,d,f,g},subtract:function(l,c){return o(l,c,a)},multiply:function(l,c){return h=c,d=a,f=new s((u=l)._value),g=h,d.isNumbro(h)&&(g=h._value),g=new s(g),u._value=f.times(g).toNumber(),u;var u,h,d,f,g},divide:function(l,c){return h=c,d=a,f=new s((u=l)._value),g=h,d.isNumbro(h)&&(g=h._value),g=new s(g),u._value=f.dividedBy(g).toNumber(),u;var u,h,d,f,g},set:function(l,c){return u=l,d=h=c,a.isNumbro(h)&&(d=h._value),u._value=d,u;var u,h,d},difference:function(l,c){return u=c,o(d=(h=a)(l._value),u,h),Math.abs(d._value);var u,h,d}}}},{"bignumber.js":1}],7:[function(t,i,r){function s(m,v){for(var y=0;y<v.length;y++){var w=v[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}var o=t("./globalState"),a=t("./validating"),l=t("./loading")(p),c=t("./unformatting"),u=t("./formatting")(p),h=t("./manipulating")(p),d=t("./parsing"),f=function(){function m(w){(function(_,R){if(!(_ instanceof R))throw new TypeError("Cannot call a class as a function")})(this,m),this._value=w}var v,y;return v=m,(y=[{key:"clone",value:function(){return p(this._value)}},{key:"format",value:function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return u.format(this,w)}},{key:"formatCurrency",value:function(w){return typeof w=="string"&&(w=d.parseFormat(w)),(w=u.formatOrDefault(w,o.currentCurrencyDefaultFormat())).output="currency",u.format(this,w)}},{key:"formatTime",value:function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return w.output="time",u.format(this,w)}},{key:"binaryByteUnits",value:function(){return u.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return u.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return u.getByteUnit(this)}},{key:"difference",value:function(w){return h.difference(this,w)}},{key:"add",value:function(w){return h.add(this,w)}},{key:"subtract",value:function(w){return h.subtract(this,w)}},{key:"multiply",value:function(w){return h.multiply(this,w)}},{key:"divide",value:function(w){return h.divide(this,w)}},{key:"set",value:function(w){return h.set(this,g(w))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}])&&s(v.prototype,y),m}();function g(m){var v=m;return p.isNumbro(m)?v=m._value:typeof m=="string"?v=p.unformat(m):isNaN(m)&&(v=NaN),v}function p(m){return new f(g(m))}p.version="2.1.2",p.isNumbro=function(m){return m instanceof f},p.language=o.currentLanguage,p.registerLanguage=o.registerLanguage,p.setLanguage=o.setLanguage,p.languages=o.languages,p.languageData=o.languageData,p.zeroFormat=o.setZeroFormat,p.defaultFormat=o.currentDefaults,p.setDefaults=o.setDefaults,p.defaultCurrencyFormat=o.currentCurrencyDefaultFormat,p.validate=a.validate,p.loadLanguagesInNode=l.loadLanguagesInNode,p.unformat=c.unformat,i.exports=p},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,i,r){i.exports={parseFormat:function(s){var o,a,l,c,u,h,d,f,g,p,m,v,y,w,_,R,E,x,P,T,I=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return typeof s!="string"?s:(a=I,s=(l=(o=s).match(/^{([^}]*)}/))?(a.prefix=l[1],o.slice(l[0].length)):o,u=I,function(N,W){if(N.indexOf("$")===-1){if(N.indexOf("%")===-1)return N.indexOf("bd")!==-1?(W.output="byte",W.base="general"):N.indexOf("b")!==-1?(W.output="byte",W.base="binary"):N.indexOf("d")!==-1?(W.output="byte",W.base="decimal"):N.indexOf(":")===-1?N.indexOf("o")!==-1&&(W.output="ordinal"):W.output="time";W.output="percent"}else W.output="currency"}(s=(h=(c=s).match(/{([^}]*)}$/))?(u.postfix=h[1],c.slice(0,-h[0].length)):c,I),d=I,(f=s.match(/[1-9]+[0-9]*/))&&(d.totalLength=+f[0]),g=I,(p=s.split(".")[0].match(/0+/))&&(g.characteristic=p[0].length),function(N,W){if(N.indexOf(".")!==-1){var j=N.split(".")[0];W.optionalCharacteristic=j.indexOf("0")===-1}}(s,I),m=I,s.indexOf("a")!==-1&&(m.average=!0),y=I,(v=s).indexOf("K")!==-1?y.forceAverage="thousand":v.indexOf("M")!==-1?y.forceAverage="million":v.indexOf("B")!==-1?y.forceAverage="billion":v.indexOf("T")!==-1&&(y.forceAverage="trillion"),function(N,W){var j=N.split(".")[1];if(j){var K=j.match(/0+/);K&&(W.mantissa=K[0].length)}}(s,I),_=I,(w=s).match(/\[\.]/)?_.optionalMantissa=!0:w.match(/\./)&&(_.optionalMantissa=!1),R=I,s.indexOf(",")!==-1&&(R.thousandSeparated=!0),E=I,s.indexOf(" ")!==-1&&(E.spaceSeparated=!0),P=I,(x=s).match(/^\+?\([^)]*\)$/)&&(P.negative="parenthesis"),x.match(/^\+?-/)&&(P.negative="sign"),T=I,s.match(/^\+/)&&(T.forceSign=!0),I)}}},{}],9:[function(t,i,r){var s=[{key:"ZiB",factor:Math.pow(1024,7)},{key:"ZB",factor:Math.pow(1e3,7)},{key:"YiB",factor:Math.pow(1024,8)},{key:"YB",factor:Math.pow(1e3,8)},{key:"TiB",factor:Math.pow(1024,4)},{key:"TB",factor:Math.pow(1e3,4)},{key:"PiB",factor:Math.pow(1024,5)},{key:"PB",factor:Math.pow(1e3,5)},{key:"MiB",factor:Math.pow(1024,2)},{key:"MB",factor:Math.pow(1e3,2)},{key:"KiB",factor:Math.pow(1024,1)},{key:"KB",factor:Math.pow(1e3,1)},{key:"GiB",factor:Math.pow(1024,3)},{key:"GB",factor:Math.pow(1e3,3)},{key:"EiB",factor:Math.pow(1024,6)},{key:"EB",factor:Math.pow(1e3,6)},{key:"B",factor:1}];function o(l){return l.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",h=3<arguments.length?arguments[3]:void 0,d=4<arguments.length?arguments[4]:void 0,f=5<arguments.length?arguments[5]:void 0,g=6<arguments.length?arguments[6]:void 0;if(l!=="")return l===d?0:function p(m,v){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",w=3<arguments.length?arguments[3]:void 0,_=4<arguments.length?arguments[4]:void 0,R=5<arguments.length?arguments[5]:void 0,E=6<arguments.length?arguments[6]:void 0;if(!isNaN(+m))return+m;var x="",P=m.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(P!==m)return-1*p(P,v,y,w,_,R,E);for(var T=0;T<s.length;T++){var I=s[T];if((x=m.replace(I.key,""))!==m)return p(x,v,y,w,_,R,E)*I.factor}if((x=m.replace("%",""))!==m)return p(x,v,y,w,_,R,E)/100;var N=parseFloat(m);if(!isNaN(N)){var W=w(N);if(W&&W!=="."&&(x=m.replace(new RegExp("".concat(o(W),"$")),""))!==m)return p(x,v,y,w,_,R,E);var j={};Object.keys(R).forEach(function(se){j[R[se]]=se});for(var K=Object.keys(j).sort().reverse(),H=K.length,k=0;k<H;k++){var B=K[k],G=j[B];if((x=m.replace(B,""))!==m){var z=void 0;switch(G){case"thousand":z=Math.pow(10,3);break;case"million":z=Math.pow(10,6);break;case"billion":z=Math.pow(10,9);break;case"trillion":z=Math.pow(10,12)}return p(x,v,y,w,_,R,E)*z}}}}(function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",y=p.replace(v,"");return y=(y=y.replace(new RegExp("([0-9])".concat(o(m.thousands),"([0-9])"),"g"),"$1$2")).replace(m.decimal,".")}(l,c,u),c,u,h,d,f,g)}i.exports={unformat:function(l,c){var u,h,d,f=t("./globalState"),g=f.currentDelimiters(),p=f.currentCurrency().symbol,m=f.currentOrdinal(),v=f.getZeroFormat(),y=f.currentAbbreviations(),w=void 0;if(typeof l=="string")w=function(_,R){if(!_.indexOf(":")||R.thousands===":")return!1;var E=_.split(":");if(E.length!==3)return!1;var x=+E[0],P=+E[1],T=+E[2];return!isNaN(x)&&!isNaN(P)&&!isNaN(T)}(l,g)?(u=l.split(":"),h=+u[0],d=+u[1],+u[2]+60*d+3600*h):a(l,g,p,m,v,y,c);else{if(typeof l!="number")return;w=l}if(w!==void 0)return w}}},{"./globalState":4}],10:[function(t,i,r){function s(g){return function(p){if(Array.isArray(p)){for(var m=0,v=new Array(p.length);m<p.length;m++)v[m]=p[m];return v}}(g)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}var a=t("./unformatting"),l=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,c={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(g,p){return p.output==="byte"},message:"`base` must be provided only when the output is `byte`",mandatory:function(g){return g.output==="byte"}},characteristic:{type:"number",restriction:function(g){return 0<=g},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(g){return 0<=g},message:"value must be positive"},{restriction:function(g,p){return!p.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(g){return 0<=g},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(g,p){return p.output==="percent"},message:"`prefixSymbol` can be provided only when the output is `percent`"}},u={languageTag:{type:"string",mandatory:!0,restriction:function(g){return g.match(l)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function h(g){return!!a.unformat(g)}function d(g,p,m){var v=3<arguments.length&&arguments[3]!==void 0&&arguments[3],y=Object.keys(g).map(function(w){if(!p[w])return console.error("".concat(m," Invalid key: ").concat(w)),!1;var _=g[w],R=p[w];if(typeof R=="string"&&(R={type:R}),R.type==="format"){if(!d(_,c,"[Validate ".concat(w,"]"),!0))return!1}else if(o(_)!==R.type)return console.error("".concat(m," ").concat(w,' type mismatched: "').concat(R.type,'" expected, "').concat(o(_),'" provided')),!1;if(R.restrictions&&R.restrictions.length)for(var E=R.restrictions.length,x=0;x<E;x++){var P=R.restrictions[x],T=P.restriction,I=P.message;if(!T(_,g))return console.error("".concat(m," ").concat(w," invalid value: ").concat(I)),!1}return R.restriction&&!R.restriction(_,g)?(console.error("".concat(m," ").concat(w," invalid value: ").concat(R.message)),!1):R.validValues&&R.validValues.indexOf(_)===-1?(console.error("".concat(m," ").concat(w," invalid value: must be among ").concat(JSON.stringify(R.validValues),', "').concat(_,'" provided')),!1):!(R.children&&!d(_,R.children,"[Validate ".concat(w,"]")))});return v||y.push.apply(y,s(Object.keys(p).map(function(w){var _=p[w];if(typeof _=="string"&&(_={type:_}),_.mandatory){var R=_.mandatory;if(typeof R=="function"&&(R=R(g)),R&&g[w]===void 0)return console.error("".concat(m,' Missing mandatory key "').concat(w,'"')),!1}return!0}))),y.reduce(function(w,_){return w&&_},!0)}function f(g){return d(g,c,"[Validate format]")}i.exports={validate:function(g,p){var m=h(g),v=f(p);return m&&v},validateFormat:f,validateInput:h,validateLanguage:function(g){return d(g,u,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)})})(oU);var tMe=oU.exports;const Nd=vg(tMe),nMe="numeric";function aU(n,e){if(or(n)){const t=e.numericFormat,i=t&&t.culture||"-",r=t&&t.pattern;if(typeof i<"u"&&!Nd.languages()[i]){const s=i.replace("-",""),o=Nd.allLanguages?Nd.allLanguages[i]:Nd[s];o&&Nd.registerLanguage(o)}Nd.setLanguage(i),n=Nd(n).format(r||"0")}return n}function Hk(n,e,t,i,r,s,o){let a=s;if(or(a)){const l=o.className||"",c=l.length?l.split(" "):[];a=aU(a,o),c.indexOf("htLeft")<0&&c.indexOf("htCenter")<0&&c.indexOf("htRight")<0&&c.indexOf("htJustify")<0&&c.push("htRight"),c.indexOf("htNumeric")<0&&c.push("htNumeric"),o.className=c.join(" "),e.dir="ltr"}gc(n,e,t,i,r,a,o)}Hk.RENDERER_TYPE=nMe;const iMe="password";function $k(n,e,t,i,r,s,o){gc.apply(this,[n,e,t,i,r,s,o]);const a=o.hashLength||e.innerHTML.length,l=o.hashSymbol||"*";let c="";He(a-1,()=>{c+=l}),gd(e,c)}$k.RENDERER_TYPE=iMe;const rMe="select";function Fk(n,e,t,i,r,s,o){gc.apply(this,[n,e,t,i,r,s,o])}Fk.RENDERER_TYPE=rMe;const sMe="time";function Bk(n,e,t,i,r,s,o){gc.apply(this,[n,e,t,i,r,s,o]),e.dir="ltr"}Bk.RENDERER_TYPE=sMe;function oMe(){gs(Qg),gs(Hv),gs(Dk),gs(kk),gs(Lk),gs(Ok),gs(Hk),gs($k),gs(Fk),gs(gc),gs(Bk)}const aMe="autocomplete";function N_(n,e){let t=n;if(t==null&&(t=""),this.allowEmpty&&t===""){e(!0);return}this.strict&&this.source?typeof this.source=="function"?this.source(t,lU(t,e)):lU(t,e)(this.source):e(!0)}N_.VALIDATOR_TYPE=aMe;function lU(n,e){const t=n;return function(i){let r=!1;for(let s=0,o=i.length;s<o;s++)if(t===i[s]){r=!0;break}e(r)}}function cU(n){const e=new Date(n);return isNaN(new Date(`${n}T00:00`).getDate())?e:new Date(e.getTime()+e.getTimezoneOffset()*6e4)}const lMe=Object.freeze(Object.defineProperty({__proto__:null,getNormalizedDate:cU},Symbol.toStringTag,{value:"Module"})),cMe="date";function Vk(n,e){const t=L5(q4,this.instance);let i=n,r=!0;i==null&&(i="");let s=he(i,this.dateFormat||t.defaultDateFormat,!0).isValid(),o=he(new Date(i)).isValid()||s;if(this.allowEmpty&&i===""&&(o=!0,s=!0),o||(r=!1),!o&&s&&(r=!0),o&&!s)if(this.correctFormat===!0){const a=uMe(i,this.dateFormat);this.instance.setDataAtCell(this.visualRow,this.visualCol,a,"dateValidator"),r=!0}else r=!1;e(r)}Vk.VALIDATOR_TYPE=cMe;function uMe(n,e){const t=he(cU(n)),i=he(n,e),r=n.search(/[A-z]/g)>-1;let s;return t.isValid()&&t.format("x")===i.format("x")||!i.isValid()||r?s=t:s=i,s.format(e)}const hMe="dropdown";function Wk(n,e){N_.apply(this,[n,e])}Wk.VALIDATOR_TYPE=hMe;const dMe="numeric";function jk(n,e){let t=n;t==null&&(t=""),this.allowEmpty&&t===""?e(!0):e(t===""?!1:or(n))}jk.VALIDATOR_TYPE=dMe;const fMe=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"],gMe="time";function zk(n,e){const t=this.timeFormat||"h:mm:ss a";let i=!0,r=n;r===null&&(r=""),r=/^\d{3,}$/.test(r)?parseInt(r,10):r;const s=/^\d{1,2}$/.test(r);s&&(r+=":00");const o=he(r,fMe,!0).isValid()?he(r):he(r,t);let a=o.isValid(),l=he(r,t,!0).isValid()&&!s;if(this.allowEmpty&&r===""&&(a=!0,l=!0),a||(i=!1),!a&&l&&(i=!0),a&&!l)if(this.correctFormat===!0){const c=o.format(t);this.instance.setDataAtCell(this.visualRow,this.visualCol,c,"timeValidator"),i=!0}else i=!1;e(i)}zk.VALIDATOR_TYPE=gMe;function pMe(){wd(N_),wd(Wk),wd(Vk),wd(jk),wd(zk)}const mMe={CELL_TYPE:"autocomplete",editor:_k,renderer:Qg,validator:N_},bMe={CELL_TYPE:"checkbox",editor:z4,renderer:Dk},vMe="date";function uU(n,e,t,i,r,s,o){Qg.apply(this,[n,e,t,i,r,s,o])}uU.RENDERER_TYPE=vMe;const wMe={CELL_TYPE:"date",editor:Z4,renderer:uU,validator:Vk},yMe={CELL_TYPE:"dropdown",editor:Pk,renderer:kk,validator:Wk},CMe={CELL_TYPE:"handsontable",editor:Ck,renderer:Lk},SMe={CELL_TYPE:"numeric",editor:Q4,renderer:Hk,validator:jk,dataType:"number"},_Me={CELL_TYPE:"password",editor:J4,renderer:$k,copyable:!1},RMe={CELL_TYPE:"select",editor:tU,renderer:Fk},EMe={CELL_TYPE:"time",editor:nU,renderer:Bk,validator:zk};function xMe(){Js(mMe),Js(bMe),Js(wMe),Js(yMe),Js(CMe),Js(SMe),Js(_Me),Js(RMe),Js(V4),Js(EMe)}function TMe(n,e){hU(n,e),e.add(n)}function MMe(n,e,t){hU(n,e),e.set(n,t)}function hU(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tp(n,e,t){return(e=AMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function AMe(n){var e=PMe(n,"string");return typeof e=="symbol"?e:e+""}function PMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function np(n,e){return n.get(dU(n,e))}function dU(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const fU=new Map([["plugin",zCe],["cell-type",v4],["editor",N5],["renderer",X5],["validator",Z5]]),IMe="base",Uk=[];let Ka=null;var Ld=new WeakMap,gU=new WeakSet;class Lt{static get PLUGIN_KEY(){return IMe}static get SETTING_KEYS(){return[this.PLUGIN_KEY]}constructor(e){TMe(this,gU),tp(this,"eventManager",new Ys(this)),tp(this,"pluginName",null),tp(this,"pluginsInitializedCallbacks",[]),tp(this,"isPluginsReady",!1),tp(this,"enabled",!1),tp(this,"initialized",!1),MMe(this,Ld,{}),Fa(this,"hot",e,{writable:!1}),Ka=null,this.hot.addHook("afterPluginsInitialized",()=>this.onAfterPluginsInitialized()),this.hot.addHook("afterUpdateSettings",t=>this.onUpdateSettings(t)),this.hot.addHook("beforeInit",()=>this.init())}init(){this.pluginName=this.hot.getPluginName(this);const e=this.constructor.PLUGIN_DEPS,t=Array.isArray(e)?e:[];if(t.length>0){const r=[];if(t.forEach(s=>{const[o,a]=s.split(":");if(!fU.has(o))throw new Error(`Unknown plugin dependency type "${o}" was found.`);fU.get(o)(a)||r.push(` - ${a} (${o})`)}),r.length>0){const s=[`The ${this.pluginName} plugin requires the following modules:
`,`${r.join(`
`)}
`].join("");Uk.push(s)}}if(Ka||(Ka=tI()),Ka.indexOf("UndoRedo")>=0&&Ka.splice(Ka.indexOf("UndoRedo"),1),Ka.indexOf(this.pluginName)>=0&&Ka.splice(Ka.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",()=>{this.isEnabled&&this.isEnabled()&&this.enablePlugin()}),Ka.length===0){if(Uk.length>0){const r=[`${Uk.join(`
`)}
`,"You have to import and register them manually."].join("");throw new Error(r)}this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}enablePlugin(){this.enabled=!0}disablePlugin(){var e;(e=this.eventManager)===null||e===void 0||e.clear(),this.clearHooks(),this.enabled=!1}addHook(e,t,i){np(Ld,this)[e]=np(Ld,this)[e]||[];const r=np(Ld,this)[e];this.hot.addHook(e,t,i),r.push(t),np(Ld,this)[e]=r}removeHooks(e){V(np(Ld,this)[e]||[],t=>{this.hot.removeHook(e,t)})}clearHooks(){const e=np(Ld,this);ot(e,(t,i)=>this.removeHooks(i)),e.length=0}callOnPluginsReady(e){this.isPluginsReady?e():this.pluginsInitializedCallbacks.push(e)}onAfterPluginsInitialized(){V(this.pluginsInitializedCallbacks,e=>e()),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}onUpdateSettings(e){const t=dU(gU,this,OMe).call(this,e);this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&t&&this.updatePlugin(e))}updatePlugin(){}destroy(){var e;(e=this.eventManager)===null||e===void 0||e.destroy(),this.clearHooks(),ot(this,(t,i)=>{i!=="hot"&&(this[i]=null)}),delete this.t,delete this.hot}}function OMe(n){if(!n)return!1;const e=this.constructor.SETTING_KEYS;if(typeof e=="boolean")return e;for(let t=0;t<e.length;t++)if(n[e[t]]!==void 0)return!0;return!1}function Hd(n,e,t){return(e=kMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kMe(n){var e=DMe(n,"string");return typeof e=="symbol"?e:e+""}function DMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let Gk=class{constructor(e){Hd(this,"hot",null),Hd(this,"container",null),Hd(this,"injected",!1),Hd(this,"rows",[]),Hd(this,"columns",[]),Hd(this,"samples",null),Hd(this,"settings",{useHeaders:!0}),this.hot=e}addRow(e,t){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));const i={row:e};this.rows.push(i),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol(e)),this.table.tr.appendChild(this.createRow(e)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}addColumnHeadersRow(e){const t=this.hot.getColHeader(0);if(t!=null){const i={row:-1};this.rows.push(i),this.container=this.createContainer(this.hot.rootElement.className),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}}addColumn(e,t){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));const i={col:e};this.columns.push(i),this.samples=t,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(e)!==null&&this.hot.view.appendColHeader(e,this.table.th),this.table.tBody.appendChild(this.createCol(e)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}getHeights(e){this.injected||this.injectTable(),V(this.rows,t=>{const{height:i}=t.table.getBoundingClientRect();e(t.row,Math.ceil(i)-1)})}getWidths(e){this.injected||this.injectTable(),V(this.columns,t=>{const{width:i}=t.table.getBoundingClientRect();e(t.col,Math.ceil(i))})}setSettings(e){this.settings=e}setSetting(e,t){this.settings||(this.settings={}),this.settings[e]=t}getSettings(){return this.settings}getSetting(e){return this.settings?this.settings[e]:null}createColGroupsCol(e){const t=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&t.appendChild(this.createColElement(-1,-1)),this.samples.forEach(i=>{V(i.strings,r=>{t.appendChild(this.createColElement(r.col,e))})}),t}createRow(e){const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),r=t.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(e,r),i.appendChild(r)),this.samples.forEach(s=>{V(s.strings,o=>{const a=o.col,l=this.hot.getCellMeta(e,a),c=this.hot.getCellRenderer(l),u=t.createElement("td");u.setAttribute("ghost-table",1),c(this.hot,u,e,a,this.hot.colToProp(a),o.value,l),i.appendChild(u)})}),i}appendColumnHeadersRow(){const{rootDocument:e}=this.hot,t=e.createDocumentFragment(),i=[];if(this.hot.hasRowHeaders()){const r=e.createElement("th");i.push([-1,r]),t.appendChild(r)}this.samples.forEach(r=>{V(r.strings,s=>{const o=s.col,a=e.createElement("th");i.push([o,a]),t.appendChild(a)})}),this.table.tHead.appendChild(t),V(i,r=>{const[s,o]=r;this.hot.view.appendColHeader(s,o)})}createCol(e){const{rootDocument:t}=this.hot,i=t.createDocumentFragment();return this.samples.forEach(r=>{V(r.strings,s=>{const o=s.row,a=this.hot.getCellMeta(o,e),l=this.hot.getCellRenderer(a),c=t.createElement("td"),u=t.createElement("tr");c.setAttribute("ghost-table",1),l(this.hot,c,o,e,this.hot.colToProp(e),s.value,a),u.appendChild(c),i.appendChild(u)})}),i}clean(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}injectTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((e||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}removeTable(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}createColElement(e,t){const i=this.hot.rootDocument.createElement("col");let r=0;t>=0&&e>=0&&(r=this.hot.getCellMeta(t,e).colspan);let s=this.hot.getColWidth(e);if(r>1)for(let o=e+1;o<e+r;o++)s+=this.hot.getColWidth(o);return i.style.width=`${s}px`,i}createTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),r=t.createElement("table"),s=t.createElement("thead"),o=t.createElement("tbody"),a=t.createElement("colgroup"),l=t.createElement("tr"),c=t.createElement("th");return this.isVertical()&&r.appendChild(a),this.isHorizontal()&&(l.appendChild(c),s.appendChild(l),r.style.tableLayout="auto",r.style.width="auto"),r.appendChild(s),this.isVertical()&&o.appendChild(l),r.appendChild(o),ce(r,e),i.appendChild(r),{fragment:i,table:r,tHead:s,tBody:o,colGroup:a,tr:l,th:c}}createContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),r=t.createElement("div"),s=`htGhostTable htAutoSize ${e.trim()}`;return ce(r,s),i.appendChild(r),{fragment:i,container:r}}isVertical(){return!!(this.rows.length&&!this.columns.length)}isHorizontal(){return!!(this.columns.length&&!this.rows.length)}};function L_(n,e,t){return(e=NMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NMe(n){var e=LMe(n,"string");return typeof e=="symbol"?e:e+""}function LMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class H_{static get SAMPLE_COUNT(){return 3}constructor(e){L_(this,"samples",null),L_(this,"dataFactory",null),L_(this,"customSampleCount",null),L_(this,"allowDuplicates",!1),this.dataFactory=e}getSampleCount(){return this.customSampleCount?this.customSampleCount:H_.SAMPLE_COUNT}setSampleCount(e){this.customSampleCount=e}setAllowDuplicates(e){this.allowDuplicates=e}generateRowSamples(e,t){return this.generateSamples("row",t,e)}generateColumnSamples(e,t){return this.generateSamples("col",t,e)}generateSamples(e,t,i){const r=new Map,{from:s,to:o}=typeof i=="number"?{from:i,to:i}:i;return He(s,o,a=>{const l=this.generateSample(e,t,a);r.set(a,l)}),r}generateSample(e,t,i){if(e!=="row"&&e!=="col")throw new Error("Unsupported sample type");const r=new Map,s=e==="row"?"col":"row",o=[];return He(t.from,t.to,a=>{const l=e==="row"?this.dataFactory(i,a):this.dataFactory(a,i);if(l===!1)return;const{value:c,bundleSeed:u}=l,h=typeof u=="string"&&u.length>0;let d;h?d=u:st(c)?d=`${Object.keys(c).length}`:Array.isArray(c)?d=`${c.length}`:d=`${Ln(c).length}`,r.has(d)||r.set(d,{needed:this.getSampleCount(),strings:[]});const f=r.get(d);f.needed&&(!(o.indexOf(c)>-1)||this.allowDuplicates||h)&&(f.strings.push({value:c,[s]:a}),o.push(c),f.needed-=1)}),r}}function HMe(n,e){mU(n,e),e.add(n)}function pU(n,e,t){mU(n,e),e.set(n,t)}function mU(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $v(n,e,t){return(e=$Me(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Me(n){var e=FMe(n,"string");return typeof e=="symbol"?e:e+""}function FMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $d(n,e){return n.get(qa(n,e))}function Yk(n,e,t){return n.set(qa(n,e),t),t}function qa(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Pe.getSingleton().register("modifyAutoColumnSizeSeed");const Fv="autoColumnSize",BMe=10,VMe="autoColumnSize";var ip=new WeakMap,rp=new WeakMap,mc=new WeakSet;class Bv extends Lt{static get PLUGIN_KEY(){return Fv}static get PLUGIN_PRIORITY(){return BMe}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 50}constructor(e){super(e),HMe(this,mc),$v(this,"ghostTable",new Gk(this.hot)),$v(this,"samplesGenerator",new H_((t,i)=>{const r=this.hot.toPhysicalRow(t),s=this.hot.toPhysicalColumn(i);if(this.hot.rowIndexMapper.isHidden(r)||this.hot.columnIndexMapper.isHidden(s))return!1;const o=this.hot.getCellMeta(t,i);let a="";o.spanned||(a=this.hot.getDataAtCell(t,i));let l="";return this.hot.hasHook("modifyAutoColumnSizeSeed")&&(l=this.hot.runHooks("modifyAutoColumnSizeSeed",l,o,a)),{value:a,bundleSeed:l}})),$v(this,"inProgress",!1),$v(this,"measuredColumns",0),$v(this,"columnWidthsMap",new Pu),pU(this,ip,[]),pU(this,rp,[]),this.hot.columnIndexMapper.registerMap(VMe,this.columnWidthsMap),this.addHook("beforeColumnResize",(t,i,r)=>qa(mc,this,bU).call(this,t,i,r))}isEnabled(){return this.hot.getSettings()[Fv]!==!1&&!this.hot.getSettings().colWidths}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[Fv];t&&t.useHeaders!==null&&t.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",t.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return qa(mc,e,zMe).call(e,...r)}),this.addHook("beforeChangeRender",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return qa(mc,e,UMe).call(e,...r)}),this.addHook("afterFormulasValuesUpdate",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return qa(mc,e,YMe).call(e,...r)}),this.addHook("beforeRender",()=>qa(mc,this,jMe).call(this)),this.addHook("modifyColWidth",(i,r)=>this.getColumnWidth(r,i)),this.addHook("init",()=>qa(mc,this,GMe).call(this)),super.enablePlugin()}updatePlugin(){Yk(rp,this,this.findColumnsWhereHeaderWasChanged()),super.updatePlugin()}disablePlugin(){super.disablePlugin(),this.addHook("beforeColumnResize",(e,t,i)=>qa(mc,this,bU).call(this,e,t,i))}calculateVisibleColumnsWidth(){if(!this.hot.countRows())return;const e=this.getFirstVisibleColumn(),t=this.getLastVisibleColumn();if(e===-1||t===-1)return;const i=this.hot.renderCall;this.calculateColumnsWidth({from:e,to:t},void 0,i)}calculateColumnsWidth(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=typeof e=="number"?{from:e,to:e}:e,s=typeof t=="number"?{from:t,to:t}:t;He(r.from,r.to,o=>{let a=this.hot.toPhysicalColumn(o);a===null&&(a=o),(i||this.columnWidthsMap.getValueAtIndex(a)===null&&!this.hot._getColWidthFromSettings(a))&&this.samplesGenerator.generateColumnSamples(o,s).forEach((c,u)=>this.ghostTable.addColumn(u,c))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((o,a)=>{const l=this.hot.toPhysicalColumn(o);this.columnWidthsMap.setValueAtIndex(l,a)})},!0),this.measuredColumns=r.to+1,this.ghostTable.clean())}calculateAllColumnsWidth(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0;const r=this.hot.countCols()-1;let s=null;this.inProgress=!0;const o=()=>{if(!this.hot){nv(s),this.inProgress=!1;return}this.calculateColumnsWidth({from:i,to:Math.min(i+Bv.CALCULATION_STEP,r)},e,t),i=i+Bv.CALCULATION_STEP+1,i<r?s=pS(o):(nv(s),this.inProgress=!1,this.hot.view.adjustElementsSize())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateColumnsWidth({from:0,to:a},e,t),i=a+1),i<r?o():this.inProgress=!1}setSamplingOptions(){const e=this.hot.getSettings()[Fv],t=e&&In(e,"samplingRatio")?e.samplingRatio:void 0,i=e&&In(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllColumnsWidth(){this.hot.view.isVisible()&&this.calculateAllColumnsWidth({from:0,to:this.hot.countRows()-1},!0)}getSyncCalculationLimit(){const e=this.hot.getSettings()[Fv];let t=Bv.SYNC_CALCULATION_LIMIT;const i=this.hot.countCols()-1;return st(e)&&(t=e.syncLimit,sP(t)?t=ZP(i,t):t>>=0),Math.min(t,i)}getColumnWidth(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=t;return r===void 0&&(r=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),i&&typeof r=="number"&&(r=Math.max(r,AS))),r}getFirstVisibleColumn(){var e;return(e=this.hot.view.getFirstRenderedVisibleColumn())!==null&&e!==void 0?e:-1}getLastVisibleColumn(){var e;return(e=this.hot.view.getLastRenderedVisibleColumn())!==null&&e!==void 0?e:-1}findColumnsWhereHeaderWasChanged(){return this.hot.getColHeader().reduce((i,r,s)=>{const o=$d(ip,this).length;return(o-1<s||$d(ip,this)[s]!==r)&&i.push(this.hot.toVisualColumn(s)),o-1<s?$d(ip,this).push(r):$d(ip,this)[s]=r,i},[])}clearCache(e){Array.isArray(e)?this.hot.batchExecution(()=>{e.forEach(t=>{this.columnWidthsMap.setValueAtIndex(t,null)})},!0):this.columnWidthsMap.clear()}isNeedRecalculate(){return!!this.columnWidthsMap.getValues().slice(0,this.measuredColumns).filter(e=>e===null).length}destroy(){this.ghostTable.clean(),super.destroy()}}function WMe(n){const e={from:0,to:this.hot.countRows()-1};n.forEach(t=>{const i=this.hot.toPhysicalColumn(t);i!==null&&(this.hot._getColWidthFromSettings(i)||this.samplesGenerator.generateColumnSamples(t,e).forEach((s,o)=>this.ghostTable.addColumn(o,s)))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((t,i)=>{const r=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(r,i)})},!0),this.ghostTable.clean())}function jMe(){this.calculateVisibleColumnsWidth(),this.inProgress||(qa(mc,this,WMe).call(this,$d(rp,this)),Yk(rp,this,[]))}function zMe(n,e){e||this.recalculateAllColumnsWidth()}function UMe(n){const e=n.reduce((t,i)=>{let[,r]=i;const s=this.hot.propToCol(r);return Number.isInteger(s)&&t.indexOf(s)===-1&&t.push(s),t},[]);$d(rp,this).push(...e)}function bU(n,e,t){let i=n;return t&&(this.calculateColumnsWidth(e,void 0,!0),i=this.getColumnWidth(e,void 0,!1)),i}function GMe(){Yk(ip,this,this.hot.getColHeader()),this.recalculateAllColumnsWidth()}function YMe(n){const e=n.reduce((t,i)=>{var r;const s=(r=i.address)===null||r===void 0?void 0:r.col;if(Number.isInteger(s)){const o=this.hot.toVisualColumn(s);t.indexOf(o)===-1&&t.push(o)}return t},[]);$d(rp,this).push(...e)}const Fd={horizontal:"horizontal",vertical:"vertical"};function KMe(n,e,t){let i,r,s;return e[0]===n[0]&&e[1]<n[1]?(s="left",i=t(e[0],e[1]),r=t(e[2],n[1]-1)):e[2]===n[2]&&e[0]===n[0]&&e[3]>n[3]?(s="right",i=t(e[0],n[3]+1),r=t(e[2],e[3])):e[0]<n[0]&&e[1]===n[1]?(s="up",i=t(e[0],e[1]),r=t(n[0]-1,e[3])):e[2]>n[2]&&e[1]===n[1]&&(s="down",i=t(n[2]+1,e[1]),r=t(e[2],e[3])),i&&i.normalize(),r&&r.normalize(),{directionOfDrag:s,startOfDragCoords:i,endOfDragCoords:r}}function qMe(n){const e={};return n===!0?(e.directions=Object.keys(Fd),e.autoInsertRow=!0):st(n)?(Oe(n.autoInsertRow)?n.direction===Fd.horizontal?e.autoInsertRow=!1:e.autoInsertRow=n.autoInsertRow:e.autoInsertRow=!1,Oe(n.direction)?e.directions=[n.direction]:e.directions=Object.keys(Fd)):typeof n=="string"?(e.directions=[n],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e}function XMe(n,e){ZMe(n,e),e.add(n)}function ZMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sp(n,e,t){return(e=QMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QMe(n){var e=JMe(n,"string");return typeof e=="symbol"?e:e+""}function JMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Vv(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Pe.getSingleton().register("modifyAutofillRange"),Pe.getSingleton().register("beforeAutofill"),Pe.getSingleton().register("afterAutofill");const vU="autofill",eAe=20,tAe=["fillHandle"],nAe="insert_row_below",iAe=200;var op=new WeakSet;class rAe extends Lt{constructor(){super(...arguments),XMe(this,op),sp(this,"addingStarted",!1),sp(this,"mouseDownOnCellCorner",!1),sp(this,"mouseDragOutside",!1),sp(this,"handleDraggedCells",0),sp(this,"directions",[]),sp(this,"autoInsertRow",!1)}static get PLUGIN_KEY(){return vU}static get PLUGIN_PRIORITY(){return eAe}static get SETTING_KEYS(){return[vU,...tAe]}isEnabled(){return this.hot.getSettings().fillHandle}enablePlugin(){this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",e=>Vv(op,this,oAe).call(this,e)),this.addHook("afterOnCellCornerDblClick",e=>Vv(op,this,sAe).call(this,e)),this.addHook("beforeOnCellMouseOver",(e,t)=>Vv(op,this,aAe).call(this,t)),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.clearMappedSettings(),super.disablePlugin()}getSelectionData(){const e=this.hot.getSelectedRangeLast(),{row:t,col:i}=e.getTopStartCorner(),{row:r,col:s}=e.getBottomEndCorner(),o=this.hot.runHooks("modifyCopyableRange",[{startRow:t,startCol:i,endRow:r,endCol:s}]),a=[],l=[],c=[];return V(o,u=>{for(let h=u.startRow;h<=u.endRow;h+=1)a.indexOf(h)===-1&&a.push(h);for(let h=u.startCol;h<=u.endCol;h+=1)l.indexOf(h)===-1&&l.push(h)}),V(a,u=>{const h=[];V(l,d=>{h.push(this.hot.getCopyableData(u,d))}),c.push(h)}),c}fillIn(){if(this.hot.selection.highlight.getFill().isEmpty())return!1;const[e,t,i,r]=this.hot.selection.highlight.getFill().getVisualCorners(),s=this.hot.getSelectedRangeLast(),o=s.getTopStartCorner(),a=s.getBottomEndCorner();this.resetSelectionOfDraggedArea();const l=[o.row,o.col,a.row,a.col],c=this.hot.runHooks("modifyAutofillRange",[Math.min(o.row,e),Math.min(o.col,t),Math.max(a.row,i),Math.max(a.col,r)],l),{directionOfDrag:u,startOfDragCoords:h,endOfDragCoords:d}=KMe(l,c,(f,g)=>this.hot._createCellCoords(f,g));if(h&&h.row>-1&&h.col>-1){const f=this.getSelectionData(),g=s.clone(),p=this.hot._createCellRange(h,h,d),m=this.hot.runHooks("beforeAutofill",f,g,p,u);if(m===!1)return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;let v=m;const y=m;if(["up","left"].indexOf(u)>-1&&!(y.length===1&&y[0].length===0))if(v=[],u==="up"){const w=d.row-h.row+1,_=w%y.length;for(let R=0;R<w;R++)v.push(y[(R+(y.length-_))%y.length])}else{const w=d.col-h.col+1,_=w%y[0].length;for(let R=0;R<y.length;R++){v.push([]);for(let E=0;E<w;E++)v[R].push(y[R][(E+(y[R].length-_))%y[R].length])}}this.hot.populateFromArray(h.row,h.col,v,d.row,d.col,`${this.pluginName}.fill`,null),this.setSelection(c),this.hot.runHooks("afterAutofill",v,g,p,u),this.hot.render()}else this.hot.view.render();return!0}reduceSelectionAreaIfNeeded(e){return e.row<0&&(e.row=0),e.col<0&&(e.col=0),e}getCoordsOfDragAndDropBorders(e){const t=this.hot.getSelectedRangeLast(),i=t.getBottomEndCorner();let r=e;if(this.directions.includes(Fd.vertical)&&this.directions.includes(Fd.horizontal)){const s=t.getTopStartCorner();(i.col<=e.col||s.col>=e.col)&&(r=this.hot._createCellCoords(i.row,e.col)),(i.row<e.row||s.row>e.row)&&(r=this.hot._createCellCoords(e.row,i.col))}else if(this.directions.includes(Fd.vertical))r=this.hot._createCellCoords(e.row,i.col);else if(this.directions.includes(Fd.horizontal))r=this.hot._createCellCoords(i.row,e.col);else return;return this.reduceSelectionAreaIfNeeded(r)}showBorder(e){const t=this.getCoordsOfDragAndDropBorders(e);t&&this.redrawBorders(t)}addRow(){this.hot._registerTimeout(()=>{this.hot.alter(nAe,void 0,1,`${this.pluginName}.fill`),this.addingStarted=!1},iAe)}addNewRowIfNeeded(){if(!this.hot.selection.highlight.getFill().isEmpty()&&this.addingStarted===!1&&this.autoInsertRow){const e=this.hot.getSelectedLast(),t=this.hot.selection.highlight.getFill().getVisualCorners(),i=this.hot.countRows();e[2]<i-1&&t[2]===i-1&&(this.addingStarted=!0,this.addRow())}}getIndexOfLastAdjacentFilledInRow(e){const t=this.hot.getData(),i=this.hot.countRows();let r;for(let s=e[2]+1;s<i;s++){for(let l=e[1];l<=e[3];l++){const c=t[s][l];if(!Hn(c))return-1}const o=t[s][e[1]-1],a=t[s][e[3]+1];(!Hn(o)||!Hn(a))&&(r=s)}return r}addSelectionFromStartAreaToSpecificRowIndex(e,t){this.hot.selection.highlight.getFill().clear().add(this.hot._createCellCoords(e[0],e[1])).add(this.hot._createCellCoords(t,e[3])).commit()}setSelection(e){this.hot.selectCell(...pt(e,t=>Math.max(t,0)),!1,!1)}selectAdjacent(){const e=this.hot.getSelectedLast(),t=this.getIndexOfLastAdjacentFilledInRow(e);return t===-1||t===void 0?!1:(this.addSelectionFromStartAreaToSpecificRowIndex(e,t),!0)}resetSelectionOfDraggedArea(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}redrawBorders(e){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(e).commit(),this.hot.view.render()}getIfMouseWasDraggedOutside(e){const{documentElement:t}=this.hot.rootDocument,i=vi(this.hot.table).top-(this.hot.rootWindow.pageYOffset||t.scrollTop)+Zn(this.hot.table),r=vi(this.hot.table).left-(this.hot.rootWindow.pageXOffset||t.scrollLeft)+dn(this.hot.table);return e.clientY>i&&e.clientX<=r}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mouseup",()=>Vv(op,this,lAe).call(this)),this.eventManager.addEventListener(e,"mousemove",t=>Vv(op,this,cAe).call(this,t))}clearMappedSettings(){this.directions.length=0,this.autoInsertRow=!1}mapSettings(){const e=qMe(this.hot.getSettings().fillHandle);this.directions=e.directions,this.autoInsertRow=e.autoInsertRow}destroy(){super.destroy()}}function sAe(){this.selectAdjacent()&&this.fillIn()}function oAe(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}function aAe(n){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(n),this.addNewRowIfNeeded())}function lAe(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}function cAe(n){const e=this.getIfMouseWasDraggedOutside(n);this.addingStarted===!1&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}function uAe(n,e){wU(n,e),e.add(n)}function hAe(n,e,t){wU(n,e),e.set(n,t)}function wU(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ap(n,e,t){return(e=dAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dAe(n){var e=fAe(n,"string");return typeof e=="symbol"?e:e+""}function fAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gAe(n,e,t){return n.set(Xa(n,e),t),t}function Kk(n,e){return n.get(Xa(n,e))}function Xa(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const $_="autoRowSize",pAe=40,mAe="autoRowSize";var Wv=new WeakMap,bc=new WeakSet;class jv extends Lt{static get PLUGIN_KEY(){return $_}static get PLUGIN_PRIORITY(){return pAe}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 500}constructor(e){super(e),uAe(this,bc),ap(this,"headerHeight",null),ap(this,"ghostTable",new Gk(this.hot)),ap(this,"samplesGenerator",new H_((t,i)=>{const r=this.hot.toPhysicalRow(t),s=this.hot.toPhysicalColumn(i);if(this.hot.rowIndexMapper.isHidden(r)||this.hot.columnIndexMapper.isHidden(s)||t>=0&&i>=0&&this.hot.getCellMeta(t,i).hidden)return!1;let o;return t>=0?o=this.hot.getDataAtCell(t,i):t===-1&&(o=this.hot.getColHeader(i)),{value:o}})),ap(this,"inProgress",!1),ap(this,"measuredRows",0),ap(this,"rowHeightsMap",new Pu),hAe(this,Wv,[]),this.hot.rowIndexMapper.registerMap(mAe,this.rowHeightsMap),this.addHook("beforeRowResize",(t,i,r)=>Xa(bc,this,yU).call(this,t,i,r))}isEnabled(){const e=this.hot.getSettings()[$_];return e===!0||st(e)}enablePlugin(){var e=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Xa(bc,e,wAe).call(e,...i)}),this.addHook("beforeChangeRender",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Xa(bc,e,yAe).call(e,...i)}),this.addHook("beforeColumnResize",()=>this.recalculateAllRowsHeight()),this.addHook("afterFormulasValuesUpdate",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Xa(bc,e,SAe).call(e,...i)}),this.addHook("beforeRender",()=>Xa(bc,this,vAe).call(this)),this.addHook("modifyRowHeight",(t,i)=>this.getRowHeight(i,t)),this.addHook("init",()=>Xa(bc,this,CAe).call(this)),this.addHook("modifyColumnHeaderHeight",()=>this.getColumnHeaderHeight()),super.enablePlugin())}disablePlugin(){this.headerHeight=null,super.disablePlugin(),this.addHook("beforeRowResize",(e,t,i)=>Xa(bc,this,yU).call(this,e,t,i))}calculateVisibleRowsHeight(){if(!this.hot.countCols())return;const e=this.getFirstVisibleRow(),t=this.getLastVisibleRow();if(e===-1||t===-1)return;const i=this.hot.renderCall;this.calculateRowsHeight({from:e,to:t},void 0,i)}calculateRowsHeight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countCols()-1},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=typeof e=="number"?{from:e,to:e}:e,s=typeof t=="number"?{from:t,to:t}:t;if(this.hot.getColHeader(0)!==null){const o=this.samplesGenerator.generateRowSamples(-1,s);this.ghostTable.addColumnHeadersRow(o.get(-1))}He(r.from,r.to,o=>{let a=this.hot.toPhysicalRow(o);a===null&&(a=o),(i||this.rowHeightsMap.getValueAtIndex(a)===null)&&this.samplesGenerator.generateRowSamples(o,s).forEach((c,u)=>this.ghostTable.addRow(u,c))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((o,a)=>{o<0?this.headerHeight=a:this.rowHeightsMap.setValueAtIndex(this.hot.toPhysicalRow(o),a)})},!0),this.measuredRows=r.to+1,this.ghostTable.clean())}calculateAllRowsHeight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0;const r=this.hot.countRows()-1;let s=null;this.inProgress=!0;const o=()=>{if(!this.hot){nv(s),this.inProgress=!1;return}this.calculateRowsHeight({from:i,to:Math.min(i+jv.CALCULATION_STEP,r)},e,t),i=i+jv.CALCULATION_STEP+1,i<r?s=pS(o):(nv(s),this.inProgress=!1,this.hot.view.adjustElementsSize(),this.hot.view._wt.wtOverlays.inlineStartOverlay.needFullRender&&this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.draw())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateRowsHeight({from:0,to:a},e,t),i=a+1),i<r?o():(this.inProgress=!1,this.hot.view.adjustElementsSize())}setSamplingOptions(){const e=this.hot.getSettings()[$_],t=e&&In(e,"samplingRatio")?e.samplingRatio:void 0,i=e&&In(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllRowsHeight(){this.hot.view.isVisible()&&this.calculateAllRowsHeight({from:0,to:this.hot.countCols()-1},!0)}getSyncCalculationLimit(){const e=this.hot.getSettings()[$_];let t=jv.SYNC_CALCULATION_LIMIT;const i=this.hot.countRows()-1;return st(e)&&(t=e.syncLimit,sP(t)?t=ZP(i,t):t>>=0),Math.min(t,i)}getRowHeight(e,t){const i=e<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(e));let r=t;return i!==null&&i>(t||0)&&(r=i),r}getColumnHeaderHeight(){return this.headerHeight}getFirstVisibleRow(){var e;return(e=this.hot.view.getFirstRenderedVisibleRow())!==null&&e!==void 0?e:-1}getLastVisibleRow(){var e;return(e=this.hot.view.getLastRenderedVisibleRow())!==null&&e!==void 0?e:-1}clearCache(e){this.headerHeight=null,Array.isArray(e)?this.hot.batchExecution(()=>{e.forEach(t=>{this.rowHeightsMap.setValueAtIndex(t,null)})},!0):this.rowHeightsMap.clear()}clearCacheByRange(e){const{from:t,to:i}=typeof e=="number"?{from:e,to:e}:e;this.hot.batchExecution(()=>{He(Math.min(t,i),Math.max(t,i),r=>{this.rowHeightsMap.setValueAtIndex(r,null)})},!0)}isNeedRecalculate(){return!!this.rowHeightsMap.getValues().slice(0,this.measuredRows).filter(e=>e===null).length}destroy(){this.ghostTable.clean(),super.destroy()}}function bAe(n){const e={from:0,to:this.hot.countCols()-1};n.forEach(t=>{this.samplesGenerator.generateRowSamples(t,e).forEach((r,s)=>this.ghostTable.addRow(s,r))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((t,i)=>{const r=this.hot.toPhysicalRow(t);this.rowHeightsMap.setValueAtIndex(r,i)})},!0),this.ghostTable.clean())}function vAe(){this.calculateVisibleRowsHeight(),this.inProgress||(Xa(bc,this,bAe).call(this,Kk(Wv,this)),gAe(Wv,this,[]))}function yU(n,e,t){let i=n;return t&&(this.calculateRowsHeight(e,void 0,!0),i=this.getRowHeight(e)),i}function wAe(n,e){e||this.recalculateAllRowsHeight()}function yAe(n){const e=n.reduce((t,i)=>{let[r]=i;return t.indexOf(r)===-1&&t.push(r),t},[]);Kk(Wv,this).push(...e)}function CAe(){this.recalculateAllRowsHeight()}function SAe(n){const e=n.reduce((t,i)=>{var r;const s=(r=i.address)===null||r===void 0?void 0:r.row;if(Number.isInteger(s)){const o=this.hot.toVisualRow(s);t.indexOf(o)===-1&&t.push(o)}return t},[]);Kk(Wv,this).push(...e)}const{getListWithInsertedItems:_Ae,getListWithRemovedItems:RAe}=z8("physicallyIndexed");class EAe extends Ad{constructor(){super(e=>e)}insert(e,t){const i=FI(this.indexedValues,t);this.indexedValues=_Ae(i,e,t,this.initValueOrFn),super.insert(e,t)}remove(e){const t=RAe(this.indexedValues,e);this.indexedValues=$I(t,e),super.remove(e)}}const{getListWithInsertedItems:xAe,getListWithRemovedItems:TAe}=z8("physicallyIndexed");class MAe extends Ad{constructor(){super(e=>e)}insert(e,t){this.indexedValues=xAe(this.indexedValues,e,t,(i,r)=>this.getNextValue(r)),super.insert(e,t)}remove(e){this.indexedValues=TAe(this.indexedValues,e),super.remove(e)}getNextValue(e){return Math.max(...this.getValues())+1+e}}function AAe(n,e){PAe(n,e),e.add(n)}function PAe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function IAe(n,e,t){return(e=OAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OAe(n){var e=kAe(n,"string");return typeof e=="symbol"?e:e+""}function kAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DAe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const qk="bindRowsWithHeaders",NAe=210,LAe="loose",HAe=new Map([["loose",EAe],["strict",MAe]]);var CU=new WeakSet;class $Ae extends Lt{constructor(){super(...arguments),AAe(this,CU),IAe(this,"headerIndexes",null)}static get PLUGIN_KEY(){return qk}static get PLUGIN_PRIORITY(){return NAe}isEnabled(){return!!this.hot.getSettings()[qk]}enablePlugin(){if(this.enabled)return;let e=this.hot.getSettings()[qk];typeof e!="string"&&(e=LAe);const t=HAe.get(e);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new t),this.addHook("modifyRowHeader",i=>DAe(CU,this,FAe).call(this,i)),super.enablePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),super.disablePlugin()}destroy(){super.destroy()}}function FAe(n){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(n))}function BAe(n,e){SU(n,e),e.add(n)}function VAe(n,e,t){SU(n,e),e.set(n,t)}function SU(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _U(n,e,t){return(e=WAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WAe(n){var e=jAe(n,"string");return typeof e=="symbol"?e:e+""}function jAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RU(n,e){return n.get(lp(n,e))}function Xk(n,e,t){return n.set(lp(n,e),t),t}function lp(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const F_="collapsibleColumns",zAe=290,UAe=["nestedHeaders"],cp="collapsibleIndicator",EU=F_,xU=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]);var up=new WeakMap,zv=new WeakSet;class GAe extends Lt{constructor(){super(...arguments),BAe(this,zv),_U(this,"nestedHeadersPlugin",null),_U(this,"headerStateManager",null),VAe(this,up,null)}static get PLUGIN_KEY(){return F_}static get PLUGIN_PRIORITY(){return zAe}static get PLUGIN_DEPS(){return["plugin:NestedHeaders"]}static get SETTING_KEYS(){return[F_,...UAe]}isEnabled(){return!!this.hot.getSettings()[F_]}enablePlugin(){var e=this;if(this.enabled)return;const{nestedHeaders:t}=this.hot.getSettings();t||Yt("You need to configure the Nested Headers plugin in order to use collapsible headers."),Xk(up,this,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",()=>lp(zv,this,qAe).call(this)),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return lp(zv,e,XAe).call(e,...r)}),this.addHook("afterGetColHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return lp(zv,e,YAe).call(e,...r)}),this.addHook("beforeOnCellMouseDown",(i,r,s)=>lp(zv,this,KAe).call(this,i,r,s)),this.registerShortcuts(),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){const{collapsibleColumns:e}=this.hot.getSettings();typeof e=="boolean"?this.headerStateManager.mapState(t=>({collapsible:t.origColspan>1})):Array.isArray(e)&&(this.headerStateManager.mapState(()=>({collapsible:!1})),this.headerStateManager.mergeStateWith(e))}super.updatePlugin()}}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),Xk(up,this,null),this.nestedHeadersPlugin=null,this.unregisterShortcuts(),this.clearButtons(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{var e;const{row:t,col:i}=this.hot.getSelectedRangeLast().highlight,{collapsible:r,isCollapsed:s,columnIndex:o}=(e=this.headerStateManager.getHeaderTreeNodeData(t,i))!==null&&e!==void 0?e:{};if(r)return s?this.expandSection({row:t,col:o}):this.collapseSection({row:t,col:o}),!1},runOnlyIf:()=>{var e,t;return((e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.isSingle())&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.highlight.isHeader())},group:EU,relativeToGroup:Iu,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(EU)}clearButtons(){if(!this.hot.view)return;const e=this.hot.view._wt.getSetting("columnHeaders").length,t=this.hot.view._wt.wtTable.THEAD,i=this.hot.view._wt.wtOverlays.topOverlay.clone.wtTable.THEAD,r=this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay?this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,s=function(o){o&&o.parentNode.removeChild(o)};He(0,e-1,o=>{const a=t.childNodes[o],l=i.childNodes[o],c=r?r.childNodes[o]:null;He(0,a.childNodes.length-1,u=>{let h=a.childNodes[u].querySelector(`.${cp}`);s(h),l&&l.childNodes[u]&&(h=l.childNodes[u].querySelector(`.${cp}`),s(h)),r&&c&&c.childNodes[u]&&(h=c.childNodes[u].querySelector(`.${cp}`),s(h))})})}expandSection(e){this.toggleCollapsibleSection([e],"expand")}collapseSection(e){this.toggleCollapsibleSection([e],"collapse")}toggleAllCollapsibleSections(e){const t=this.headerStateManager.mapNodes(i=>{const{collapsible:r,origColspan:s,headerLevel:o,columnIndex:a,isCollapsed:l}=i;if(r===!0&&s>1&&(l&&e==="expand"||!l&&e==="collapse"))return{row:this.headerStateManager.levelToRowCoords(o),col:a}});this.toggleCollapsibleSection(t,e)}collapseAll(){this.toggleAllCollapsibleSections("collapse")}expandAll(){this.toggleAllCollapsibleSections("expand")}toggleCollapsibleSection(e,t){if(!xU.has(t))throw new Error(`Unsupported action is passed (${t}).`);if(!Array.isArray(e))return;const i=ic(e,f=>{let{row:g}=f;return g<0});let r=i.length>0;V(i,f=>{var g;let{row:p,col:m}=f;const{collapsible:v,isCollapsed:y}=(g=this.headerStateManager.getHeaderSettings(p,m))!==null&&g!==void 0?g:{};if(!v||y&&t==="collapse"||!y&&t==="expand")return r=!1,!1});const s=[],o=[];r&&V(i,f=>{let{row:g,col:p}=f;const{colspanCompensation:m,affectedColumns:v,rollbackModification:y}=this.headerStateManager.triggerNodeModification(t,g,p);m>0&&(o.push(...v),s.push(y))});const a=this.getCollapsedColumns();let l=[];t==="collapse"?l=eP([...a,...o]):t==="expand"&&(l=ic(a,f=>!o.includes(f)));const c=xU.get(t);if(this.hot.runHooks(c.beforeHook,a,l,r)===!1){V(s,f=>{f()});return}this.hot.batchExecution(()=>{V(o,f=>{RU(up,this).setValueAtIndex(this.hot.toPhysicalColumn(f),c.hideColumn)})},!0);const h=this.getCollapsedColumns().length!==a.length,d=this.hot.getSelectedRangeLast();if(t==="collapse"&&h&&d){const{row:f,col:g}=d.highlight;if((this.hot.rowIndexMapper.isHidden(f)||this.hot.columnIndexMapper.isHidden(g))&&o.includes(g)){const m=f>=0?this.hot.rowIndexMapper.getNearestNotHiddenIndex(f,1,!0):f,v=g>=0?this.hot.columnIndexMapper.getNearestNotHiddenIndex(g,1,!0):g;m!==null&&v!==null&&this.hot.selectCell(m,v)}}this.hot.runHooks(c.afterHook,a,l,r,h),this.hot.render(),this.hot.view.adjustElementsSize()}getCollapsedColumns(){return RU(up,this).getHiddenIndexes()}destroy(){Xk(up,this,null),super.destroy()}}function YAe(n,e,t){var i;const{collapsible:r,origColspan:s,isCollapsed:o}=(i=this.headerStateManager.getHeaderSettings(t,n))!==null&&i!==void 0?i:{},a=r&&s>1&&n>=this.hot.getSettings().fixedColumnsStart,l=this.hot.getSettings().ariaTags;let c=e.querySelector(`.${cp}`);if(fd(e,[js("")[0]]),a)c||(c=this.hot.rootDocument.createElement("div"),ce(c,cp),e.querySelector("div:first-child").appendChild(c)),Ze(c,["collapsed","expanded"]),o?(ce(c,"collapsed"),Su(c,"+"),l&&ze(e,...js(!1))):(ce(c,"expanded"),Su(c,"-"),l&&ze(e,...js(!0))),l&&ze(c,...hd());else{var u;(u=c)===null||u===void 0||u.remove()}}function KAe(n,e){Ue(n.target,cp)&&(Ue(n.target,"expanded")?(this.eventManager.fireEvent(n.target,"mouseup"),this.toggleCollapsibleSection([e],"collapse")):Ue(n.target,"collapsed")&&(this.eventManager.fireEvent(n.target,"mouseup"),this.toggleCollapsibleSection([e],"expand")),Gs(n))}function qAe(){this.updatePlugin()}function XAe(n,e){e||this.updatePlugin()}function Bd(n,e,t){return(e=ZAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZAe(n){var e=QAe(n,"string");return typeof e=="symbol"?e:e+""}function QAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const JAe=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"],ePe=!1,tPe=!0,nPe=!0;class iPe{constructor(e,t){Bd(this,"hot",void 0),Bd(this,"sortingStates",new QS),Bd(this,"sortEmptyCells",ePe),Bd(this,"indicator",tPe),Bd(this,"headerAction",nPe),Bd(this,"compareFunctionFactory",void 0),Bd(this,"mapName",void 0),this.hot=e,this.mapName=t,this.hot.columnIndexMapper.registerMap(t,this.sortingStates)}updateAllColumnsProperties(e){st(e)&&ot(e,(t,i)=>{JAe.includes(i)&&(this[i]=t)})}getAllColumnsProperties(){const e={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return typeof this.compareFunctionFactory=="function"&&(e.compareFunctionFactory=this.compareFunctionFactory),e}getSortOrderOfColumn(e){var t;return(t=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))===null||t===void 0?void 0:t.sortOrder}getIndexOfColumnInSortQueue(e){return e=this.hot.toPhysicalColumn(e),this.sortingStates.getEntries().findIndex(t=>{let[i]=t;return i===e})}getNumberOfSortedColumns(){return this.sortingStates.getLength()}isListOfSortedColumnsEmpty(){return this.getNumberOfSortedColumns()===0}isColumnSorted(e){return st(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))}getSortStates(){return this.sortingStates===null?[]:this.sortingStates.getEntries().map(t=>{let[i,r]=t;return{column:this.hot.toVisualColumn(i),...r}})}getColumnSortState(e){const t=this.getSortOrderOfColumn(e);if(Oe(t))return{column:e,sortOrder:t}}setSortStates(e){this.sortingStates.clear();for(let t=0;t<e.length;t+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(e[t].column),{sortOrder:e[t].sortOrder})}destroy(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}function TU(n,e,t){const i=e.locale;return function(r,s){const{sortEmptyCells:o}=t;return typeof r=="string"&&(r=r.toLocaleLowerCase(i)),typeof s=="string"&&(s=s.toLocaleLowerCase(i)),r===s?Za:Hn(r)?Hn(s)?Za:o&&n==="asc"?Fn:Bn:Hn(s)?o&&n==="asc"?Bn:Fn:isNaN(r)&&!isNaN(s)?n==="asc"?Bn:Fn:!isNaN(r)&&isNaN(s)||(isNaN(r)||isNaN(s)||(r=parseFloat(r),s=parseFloat(s)),r<s)?n==="asc"?Fn:Bn:r>s?n==="asc"?Bn:Fn:Za}}const MU="default";function rPe(n,e,t){return function(i,r){const s=parseFloat(i),o=parseFloat(r),{sortEmptyCells:a}=t;if(s===o||isNaN(s)&&isNaN(o))return Za;if(a){if(Hn(i))return n==="asc"?Fn:Bn;if(Hn(r))return n==="asc"?Bn:Fn}return isNaN(s)?Bn:isNaN(o)?Fn:s<o?n==="asc"?Fn:Bn:s>o?n==="asc"?Bn:Fn:Za}}const sPe="numeric";function oPe(n,e,t){const i=e.checkedTemplate,r=e.uncheckedTemplate,{sortEmptyCells:s}=t;return function(o,a){const l=Hn(o),c=Hn(a),u=l?r:o,h=c?r:a,d=u===r||u===i,f=h===r||h===i;if(s===!1){if(l&&c===!1)return Bn;if(l===!1&&c)return Fn}return d===!1&&f?n==="asc"?Fn:Bn:d&&f===!1?n==="asc"?Bn:Fn:d===!1&&f===!1?TU(n,e,t)(o,a):u===r&&h===i?n==="asc"?Fn:Bn:u===i&&h===r?n==="asc"?Bn:Fn:Za}}const aPe="checkbox";function lPe(n,e,t){return LU(n,e.dateFormat,t)}const cPe="date";function uPe(n,e,t){return LU(n,e.timeFormat,t)}const hPe="time",{register:Uv,getItem:AU,hasItem:dPe}=Vo("sorting.compareFunctionFactory"),{register:PU,getItem:fPe}=Vo("sorting.mainSortComparator");function IU(n){return dPe(n)?AU(n):AU(MU)}Uv(aPe,oPe),Uv(cPe,lPe),Uv(MU,TU),Uv(sPe,rPe),Uv(hPe,uPe);const Za=0,Fn=-1,Bn=1;function gPe(n,e){const t=fPe(e);for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];n.sort(t(...r))}const B_="asc",V_="desc",OU="colHeader";function pPe(n){if(st(n)===!1)return!1;const{column:e,sortOrder:t}=n;return Number.isInteger(e)&&[B_,V_].includes(t)}function mPe(n){if(n.some(t=>pPe(t)===!1))return!1;const e=n.map(t=>{let{column:i}=t;return i});return new Set(e).size===e.length}function kU(n){if(n!==V_)return n===B_?V_:B_}function DU(n){return n.querySelector(`.${OU}`)}function NU(n,e){if(n<0||!e.parentNode)return!1;const t=e.parentNode.parentNode.childNodes;return Array.from(t).indexOf(e.parentNode)-t.length===-1}function Zk(n,e,t){return n===-1&&e>=0&&Eu(t)===!1}function LU(n,e,t){return function(i,r){const{sortEmptyCells:s}=t;if(i===r)return Za;if(Hn(i))return Hn(r)?Za:s&&n==="asc"?Fn:Bn;if(Hn(r))return s&&n==="asc"?Bn:Fn;const o=he(i,e),a=he(r,e);return o.isValid()?a.isValid()?a.isAfter(o)?n==="asc"?Fn:Bn:a.isBefore(o)?n==="asc"?Bn:Fn:Za:Fn:Bn}}const bPe="ascending",vPe="descending",HU="indicatorDisabled",$U="columnSorting",FU="sortAction",BU=new Map([[B_,bPe],[V_,vPe]]);function wPe(n,e,t,i){const r=[$U];if(i&&r.push(FU),t===!1)return r.push(HU),r;const s=n.getSortOrderOfColumn(e);return Oe(s)&&r.push(BU.get(s)),r}function yPe(){return Array.from(BU.values()).concat(FU,HU,$U)}function CPe(n,e){return function(t,i){const[,...r]=t,[,...s]=i;return function(a){const l=n[a],c=e[a],u=r[a],h=s[a],d=c.columnSorting;return(d.compareFunctionFactory?d.compareFunctionFactory:IU(c.type))(l,c,d)(u,h)}(0)}}function SPe(n,e){_Pe(n,e),e.add(n)}function _Pe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function W_(n,e,t){return(e=RPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RPe(n){var e=EPe(n,"string");return typeof e=="symbol"?e:e+""}function EPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hp(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const j_="columnSorting",xPe=50,z_="append",TPe="replace",VU=j_;PU(j_,CPe),Pe.getSingleton().register("beforeColumnSort"),Pe.getSingleton().register("afterColumnSort");var Vd=new WeakSet;class WU extends Lt{constructor(){super(...arguments),SPe(this,Vd),W_(this,"columnStatesManager",null),W_(this,"columnMetaCache",null),W_(this,"pluginKey",j_),W_(this,"indexesSequenceCache",null)}static get PLUGIN_KEY(){return j_}static get PLUGIN_PRIORITY(){return xPe}isEnabled(){return!!this.hot.getSettings()[this.pluginKey]}enablePlugin(){var e=this;this.enabled||(this.columnStatesManager=new iPe(this.hot,`${this.pluginKey}.sortingStates`),this.columnMetaCache=new Pu(t=>{let i=this.hot.toVisualColumn(t);return i===null&&(i=t),this.getMergedPluginSettings(i)}),this.hot.columnIndexMapper.registerMap(`${this.pluginKey}.columnMeta`,this.columnMetaCache),this.addHook("afterGetColHeader",(t,i)=>hp(Vd,this,MPe).call(this,t,i)),this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return hp(Vd,e,PPe).call(e,...i)}),this.addHook("afterOnCellMouseDown",(t,i)=>this.onAfterOnCellMouseDown(t,i)),this.addHook("afterInit",()=>hp(Vd,this,Qk).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return hp(Vd,e,APe).call(e,...i)}),this.hot.view&&hp(Vd,this,Qk).call(this),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){const e=(t,i)=>{const r=DU(i);NU(t,i)===!1||r===null||this.updateHeaderClasses(r)};this.hot.addHook("afterGetColHeader",e),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("afterGetColHeader",e)}),this.hot.batchExecution(()=>{this.indexesSequenceCache!==null&&(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginKey),this.indexesSequenceCache=null)},!0),this.hot.columnIndexMapper.unregisterMap(`${this.pluginKey}.columnMeta`),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();return this.sort(this.getColumnNextConfig(e.col)),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.row===-1&&i.col>=0},relativeToGroup:Iu,position:"before",group:VU})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(VU)}sort(e){const t=this.getSortConfig(),i=this.getNormalizedSortConfigs(e),r=this.areValidSortConfigs(i);this.hot.runHooks("beforeColumnSort",t,i,r)!==!1&&(t.length===0&&this.indexesSequenceCache===null&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new U8),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),r&&(this.columnStatesManager.setSortStates(i),this.sortByPresetSortStates(i),this.saveAllSortSettings(i)),this.hot.runHooks("afterColumnSort",t,r?i:t,r),r&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}clearSort(){this.sort([])}isSorted(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}getSortConfig(e){return Oe(e)?this.columnStatesManager.getColumnSortState(e):this.columnStatesManager.getSortStates()}setSortConfig(e){const t=this.getNormalizedSortConfigs(e);this.areValidSortConfigs(t)&&this.columnStatesManager.setSortStates(t)}getNormalizedSortConfigs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)?e.slice(0,1):[e]}areValidSortConfigs(e){const t=this.hot.countCols();return mPe(e)&&e.every(i=>{let{column:r}=i;return r<=t&&r>=0})}saveAllSortSettings(e){const t=this.columnStatesManager.getAllColumnsProperties(),i=r=>{let{column:s,...o}=r;return{column:this.hot.toPhysicalColumn(s),...o}};t.initialConfig=pt(e,i),this.hot.runHooks("persistentStateSave","columnSorting",t)}getAllSavedSortSettings(){const e={};this.hot.runHooks("persistentStateLoad","columnSorting",e);const t=e.value,i=r=>{let{column:s,...o}=r;return{column:this.hot.toVisualColumn(s),...o}};return Oe(t)&&Array.isArray(t.initialConfig)&&(t.initialConfig=pt(t.initialConfig,i)),t}getColumnNextConfig(e){const t=this.columnStatesManager.getSortOrderOfColumn(e);if(Oe(t)){const r=kU(t);return Oe(r)?{column:e,sortOrder:r}:void 0}const i=this.hot.countCols();if(Number.isInteger(e)&&e>=0&&e<i)return{column:e,sortOrder:kU()}}getNextSortConfig(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z_;const i=this.columnStatesManager.getIndexOfColumnInSortQueue(e),r=i!==-1,s=this.getSortConfig(),o=this.getColumnNextConfig(e);if(r){if(hn(o))return[...s.slice(0,i),...s.slice(i+1)];if(t===z_)return[...s.slice(0,i),...s.slice(i+1),o];if(t===TPe)return[...s.slice(0,i),o,...s.slice(i+1)]}return Oe(o)?s.concat(o):s}getPluginColumnConfig(e){if(st(e)){const t=e[this.pluginKey];if(st(t))return t}return{}}getMergedPluginSettings(e){const t=this.hot.getSettings()[this.pluginKey],i=this.columnStatesManager.getAllColumnsProperties(),r=this.hot.getCellMeta(0,e),s=Object.getPrototypeOf(r);return Array.isArray(s.columns)?Object.assign(i,t,this.getPluginColumnConfig(s.columns[e])):fn(s.columns)?Object.assign(i,t,this.getPluginColumnConfig(s.columns(e))):Object.assign(i,t)}getFirstCellSettings(e){const t=this.hot.getCellMeta(0,e),i=Object.create(t);return i[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(e)),i}getNumberOfRowsToSort(e){const t=this.hot.getSettings();return t.maxRows<=e?t.maxRows:e-t.minSpareRows}sortByPresetSortStates(e){if(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),e.length===0)return;const t=[],i=this.hot.countRows(),r=c=>pt(e,u=>this.hot.getDataAtCell(c,u.column));for(let c=0;c<this.getNumberOfRowsToSort(i);c+=1)t.push([this.hot.toPhysicalRow(c)].concat(r(c)));const s=pt(t,c=>c[0]);gPe(t,this.pluginKey,pt(e,c=>c.sortOrder),pt(e,c=>this.getFirstCellSettings(c.column)));for(let c=t.length;c<i;c+=1)t.push([c].concat(r(c)));const o=pt(t,c=>c[0]),a=new Map(pt(s,(c,u)=>[c,o[u]])),l=pt(this.hot.rowIndexMapper.getIndexesSequence(),c=>a.has(c)?a.get(c):c);this.hot.rowIndexMapper.setIndexesSequence(l)}sortBySettings(e){if(st(e)){this.columnStatesManager.updateAllColumnsProperties(e);const t=e.initialConfig;(Array.isArray(t)||st(t))&&this.sort(t)}else this.hot.render()}updateHeaderClasses(e){if(Ze(e,yPe()),this.enabled!==!1){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];ce(e,wPe(...i))}}onUpdateSettings(e){super.onUpdateSettings(),this.columnMetaCache!==null&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),Oe(e[this.pluginKey])&&this.sortBySettings(e[this.pluginKey])}wasClickableHeaderClicked(e,t){return this.getFirstCellSettings(t)[this.pluginKey].headerAction&&Ue(e.target,OU)}onAfterOnCellMouseDown(e,t){if(Zk(t.row,t.col,e)!==!1&&this.wasClickableHeaderClicked(e,t.col)){this.hot.getShortcutManager().isCtrlPressed()&&(this.hot.deselectCell(),this.hot.selectColumns(t.col));const i=this.hot.getActiveEditor(),r=this.getColumnNextConfig(t.col);i!=null&&i.isOpened()&&this.hot.getCellValidator(i.row,i.col)?this.hot.addHookOnce("postAfterValidate",()=>{this.sort(r)}):this.sort(r)}}destroy(){var e;(e=this.columnStatesManager)===null||e===void 0||e.destroy(),super.destroy()}}function Qk(){const n=this.getAllSavedSortSettings();if(st(n))this.sortBySettings(n);else{const e=this.hot.getSettings()[this.pluginKey];this.sortBySettings(e)}}function MPe(n,e){const t=DU(e);if(NU(n,e)===!1||t===null)return;const i=this.getFirstCellSettings(n)[this.pluginKey],r=i.indicator,s=i.headerAction;if(this.updateHeaderClasses(t,this.columnStatesManager,n,r,s),this.hot.getSettings().ariaTags){const o=this.columnStatesManager.getSortOrderOfColumn(n);ze(e,...Cye(o?`${o}ending`:"none"))}}function APe(n){n===!0&&this.hot.view&&hp(Vd,this,Qk).call(this)}function PPe(n,e,t,i){Zk(e.row,e.col,n)!==!1&&this.wasClickableHeaderClicked(n,e.col)&&this.hot.getShortcutManager().isCtrlPressed()&&(i.column=!0)}function Wd(n,e,t){return(e=IPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IPe(n){var e=OPe(n,"string");return typeof e=="symbol"?e:e+""}function OPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class kPe{constructor(e,t){Wd(this,"plugin",void 0),Wd(this,"hot",void 0),Wd(this,"endpoints",[]),Wd(this,"settings",void 0),Wd(this,"settingsType","array"),Wd(this,"currentEndpoint",null),Wd(this,"cellsToSetCache",[]),this.plugin=e,this.hot=this.plugin.hot,this.settings=t}initEndpoints(){this.endpoints=this.parseSettings(),this.refreshAllEndpoints()}getEndpoint(e){return this.settingsType==="function"?this.fillMissingEndpointData(this.settings)[e]:this.endpoints[e]}getAllEndpoints(){return this.settingsType==="function"?this.fillMissingEndpointData(this.settings):this.endpoints}fillMissingEndpointData(e){return this.parseSettings(e.call(this))}parseSettings(e){const t=[];let i=e;if(!i&&typeof this.settings=="function"){this.settingsType="function";return}return i||(i=this.settings),V(i,r=>{const s={};this.assignSetting(r,s,"ranges",[[0,this.hot.countRows()-1]]),this.assignSetting(r,s,"reversedRowCoords",!1),this.assignSetting(r,s,"destinationRow",new Error(`
        You must provide a destination row for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(r,s,"destinationColumn",new Error(`
        You must provide a destination column for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(r,s,"sourceColumn",r.destinationColumn),this.assignSetting(r,s,"type","sum"),this.assignSetting(r,s,"forceNumeric",!1),this.assignSetting(r,s,"suppressDataTypeErrors",!0),this.assignSetting(r,s,"customFunction",null),this.assignSetting(r,s,"readOnly",!0),this.assignSetting(r,s,"roundFloat",!1),t.push(s)}),t}assignSetting(e,t,i,r){if(i==="ranges"&&e[i]===void 0){t[i]=r;return}else if(i==="ranges"&&e[i].length===0)return;if(e[i]===void 0){if(r instanceof Error)throw r;t[i]=r}else i==="destinationRow"&&t.reversedRowCoords?t[i]=this.hot.countRows()-e[i]-1:t[i]=e[i]}resetSetupBeforeStructureAlteration(e,t,i){if(this.settingsType!=="function")return;const r=e.indexOf("row")>-1?"row":"col",s=this.getAllEndpoints();V(s,o=>{r==="row"&&o.destinationRow>=t&&(e==="insert_row"?o.alterRowOffset=i:e==="remove_row"&&(o.alterRowOffset=-1*i)),r==="col"&&o.destinationColumn>=t&&(e==="insert_col"?o.alterColumnOffset=i:e==="remove_col"&&(o.alterColumnOffset=-1*i))}),this.resetAllEndpoints(s,!1)}resetSetupAfterStructureAlteration(e,t,i,r,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;if(this.settingsType==="function"){const d=()=>(this.hot.removeHook("beforeViewRender",d),this.refreshAllEndpoints());this.hot.addHookOnce("beforeViewRender",d);return}const a=e.indexOf("row")>-1?"row":"col",l=e.indexOf("remove")>-1?-1:1,c=this.getAllEndpoints(),u=e.indexOf("move_row")===0,h=t;V(c,d=>{a==="row"&&d.destinationRow>=h&&(d.alterRowOffset=l*i),a==="col"&&d.destinationColumn>=h&&(d.alterColumnOffset=l*i)}),this.resetAllEndpoints(c,!u),u?V(c,d=>{this.extendEndpointRanges(d,h,r[0],r.length),this.recreatePhysicalRanges(d),this.clearOffsetInformation(d)}):V(c,d=>{this.shiftEndpointCoordinates(d,h)}),o&&this.refreshAllEndpoints()}clearOffsetInformation(e){e.alterRowOffset=void 0,e.alterColumnOffset=void 0}extendEndpointRanges(e,t,i,r){V(e.ranges,s=>{s[1]&&(t>=s[0]&&t<=s[1]?i>s[1]?s[1]+=r:i<s[0]&&(s[0]-=r):i>=s[0]&&i<=s[1]&&(s[1]-=r,t<=s[0]&&(s[0]+=1,s[1]+=1)))})}recreatePhysicalRanges(e){const t=e.ranges,i=[],r=[];V(t,s=>{const o=[];if(s[1])for(let a=s[0];a<=s[1];a++)o.push(this.hot.toPhysicalRow(a));else o.push(this.hot.toPhysicalRow(s[0]));r.push(o)}),V(r,s=>{let o=[];V(s,(a,l)=>{l===0?o.push(a):s[l]!==s[l-1]+1&&(o.push(s[l-1]),i.push(o),o=[],o.push(a)),l===s.length-1&&(o.push(a),i.push(o))})}),e.ranges=i}shiftEndpointCoordinates(e,t){e.alterRowOffset&&e.alterRowOffset!==0?(e.destinationRow+=e.alterRowOffset||0,V(e.ranges,i=>{V(i,(r,s)=>{r>=t&&(i[s]+=e.alterRowOffset||0)})})):e.alterColumnOffset&&e.alterColumnOffset!==0&&(e.destinationColumn+=e.alterColumnOffset||0,e.sourceColumn+=e.alterColumnOffset||0)}resetAllEndpoints(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getAllEndpoints(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.some(r=>{const s=r.alterRowOffset||0,o=r.alterColumnOffset||0;return r.destinationRow+s>=this.hot.countRows()||r.destinationColumn+o>=this.hot.countCols()})||(this.cellsToSetCache=[],V(e,r=>{this.resetEndpointValue(r,t)}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}refreshAllEndpoints(){this.cellsToSetCache=[],V(this.getAllEndpoints(),e=>{this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e,"init")}),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshChangedEndpoints(e){const t=[];this.cellsToSetCache=[],V(e,(i,r,s)=>{`${i[2]||""}`!=`${i[3]}`&&V(this.getAllEndpoints(),(o,a)=>{this.hot.propToCol(s[r][1])===o.sourceColumn&&t.indexOf(a)===-1&&t.push(a)})}),V(t,i=>{this.refreshEndpoint(this.getEndpoint(i))}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshCellMetas(){this.endpoints.forEach(e=>{const t=this.hot.toVisualRow(e.destinationRow);if(t!==null){const i=this.hot.getCellMeta(t,e.destinationColumn);i.readOnly=e.readOnly,i.className="columnSummaryResult"}})}refreshEndpoint(e){this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e),this.currentEndpoint=null}resetEndpointValue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const i=e.alterRowOffset||0,r=e.alterColumnOffset||0;this.cellsToSetCache.push([this.hot.toVisualRow(e.destinationRow+(t?i:0)),this.hot.toVisualColumn(e.destinationColumn+(t?r:0)),""])}setEndpointValue(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=this.hot.toVisualRow(e.destinationRow);if(e.destinationRow>=this.hot.countRows()||e.destinationColumn>=this.hot.countCols()){this.throwOutOfBoundsWarning();return}const s=this.hot.toVisualRow(e.destinationRow);if(s!==null){const o=this.hot.getCellMeta(s,e.destinationColumn);(t==="init"||o.readOnly!==e.readOnly)&&(o.readOnly=e.readOnly,o.className="columnSummaryResult")}if((e.roundFloat===!0||Number.isInteger(e.roundFloat))&&!isNaN(e.result)){const o=e.roundFloat;let a=0;Number.isInteger(o)&&(a=Math.min(Math.max(0,o),100)),e.result=e.result.toFixed(a)}i?this.hot.setDataAtCell(r,e.destinationColumn,e.result,"ColumnSummary.set"):this.cellsToSetCache.push([r,e.destinationColumn,e.result]),e.alterRowOffset=void 0,e.alterColumnOffset=void 0}throwOutOfBoundsWarning(){Yt("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}}function Jk(n){return n==null||isNaN(n)}function DPe(n,e){NPe(n,e),e.add(n)}function NPe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function LPe(n,e,t){return(e=HPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HPe(n){var e=$Pe(n,"string");return typeof e=="symbol"?e:e+""}function $Pe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function U_(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const eD="columnSummary",FPe=220;var Gv=new WeakSet;class BPe extends Lt{constructor(){super(...arguments),DPe(this,Gv),LPe(this,"endpoints",null)}static get PLUGIN_KEY(){return eD}static get PLUGIN_PRIORITY(){return FPe}isEnabled(){return!!this.hot.getSettings()[eD]}enablePlugin(){var e=this;this.enabled||(this.settings=this.hot.getSettings()[eD],this.endpoints=new kPe(this,this.settings),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return U_(Gv,e,VPe).call(e,...i)}),this.addHook("afterChange",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return U_(Gv,e,jPe).call(e,...i)}),this.addHook("afterUpdateSettings",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return U_(Gv,e,WPe).call(e,...i)}),this.addHook("beforeCreateRow",(t,i,r)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_row",t,i,null,r)),this.addHook("beforeCreateCol",(t,i,r)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_col",t,i,null,r)),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupBeforeStructureAlteration("remove_row",...i)}),this.addHook("beforeRemoveCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupBeforeStructureAlteration("remove_col",...i)}),this.addHook("afterCreateRow",(t,i,r)=>this.endpoints.resetSetupAfterStructureAlteration("insert_row",t,i,null,r)),this.addHook("afterCreateCol",(t,i,r)=>this.endpoints.resetSetupAfterStructureAlteration("insert_col",t,i,null,r)),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupAfterStructureAlteration("remove_row",...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupAfterStructureAlteration("remove_col",...i)}),this.addHook("afterRowMove",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return U_(Gv,e,zPe).call(e,...i)}),super.enablePlugin())}disablePlugin(){this.endpoints=null,this.settings=null,this.currentEndpoint=null,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.endpoints.initEndpoints(),super.updatePlugin()}calculate(e){switch(e.type.toLowerCase()){case"sum":e.result=this.calculateSum(e);break;case"min":e.result=this.calculateMinMax(e,e.type);break;case"max":e.result=this.calculateMinMax(e,e.type);break;case"count":e.result=this.countEntries(e);break;case"average":e.result=this.calculateAverage(e);break;case"custom":e.result=e.customFunction.call(this,e);break}}calculateSum(e){let t=0;return ot(e.ranges,i=>{t+=this.getPartialSum(i,e.sourceColumn)}),t}getPartialSum(e,t){let i=0,r=e[1]||e[0],s=null,o=0;do{if(s=this.getCellValue(r,t),s=Jk(s)?null:s,s!==null){const a=(`${s}`.split(".")[1]||[]).length||1;a>o&&(o=a)}i+=s||0,r-=1}while(r>=e[0]);return Math.round(i*10**o)/10**o}calculateMinMax(e,t){let i=null;return ot(e.ranges,r=>{const s=this.getPartialMinMax(r,e.sourceColumn,t);if(i===null&&s!==null&&(i=s),s!==null)switch(t){case"min":i=Math.min(i,s);break;case"max":i=Math.max(i,s);break}}),i===null?"Not enough data":i}getPartialMinMax(e,t,i){let r=null,s=e[1]||e[0],o;do{if(o=this.getCellValue(s,t),o=Jk(o)?null:o,r===null)r=o;else if(o!==null)switch(i){case"min":r=Math.min(r,o);break;case"max":r=Math.max(r,o);break}s-=1}while(s>=e[0]);return r}countEmpty(e,t){let i,r=0,s=e[1]||e[0];do i=this.getCellValue(s,t),i=Jk(i)?null:i,i===null&&(r+=1),s-=1;while(s>=e[0]);return r}countEntries(e){let t=0;const i=e.ranges;return ot(i,r=>{const s=r[1]===void 0?1:r[1]-r[0]+1,o=this.countEmpty(r,e.sourceColumn);t+=s,t-=o}),t}calculateAverage(e){const t=this.calculateSum(e),i=this.countEntries(e);return t/i}getCellValue(e,t){const i=this.hot.toVisualRow(e),r=this.hot.toVisualColumn(t);let s=this.hot.getSourceDataAtCell(e,t),o="";if(i!==null&&r!==null&&(o=this.hot.getCellMeta(i,r).className||""),o.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&(typeof s=="string"&&(s=s.replace(/,/,".")),s=parseFloat(s)),isNaN(s)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw new Error(Ut`ColumnSummary plugin: cell at (${e}, ${t}) is not in a\x20
          numeric format. Cannot do the calculation.`);return s}}function VPe(){this.endpoints.initEndpoints()}function WPe(n){n.columns!==void 0&&this.endpoints.refreshCellMetas()}function jPe(n,e){n&&e!=="ColumnSummary.reset"&&e!=="ColumnSummary.set"&&e!=="loadData"&&this.endpoints.refreshChangedEndpoints(n)}function zPe(n,e){this.endpoints.resetSetupBeforeStructureAlteration("move_row",n[0],n.length,n,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",e,n.length,n,this.pluginName)}function UPe(n,e){jU(n,e),e.add(n)}function tD(n,e,t){jU(n,e),e.set(n,t)}function jU(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dp(n,e){return n.get(iD(n,e))}function nD(n,e,t){return n.set(iD(n,e),t),t}function iD(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var G_=new WeakMap,Y_=new WeakMap,K_=new WeakMap,zU=new WeakSet;class UU{constructor(){UPe(this,zU),tD(this,G_,!0),tD(this,Y_,null),tD(this,K_,new ResizeObserver(e=>iD(zU,this,GPe).call(this,e)))}setObservedElement(e){nD(Y_,this,e)}unobserve(){dp(K_,this).unobserve(dp(Y_,this))}observe(){nD(G_,this,!0),dp(K_,this).observe(dp(Y_,this))}destroy(){dp(K_,this).disconnect()}}function GPe(n){if(dp(G_,this)||!Array.isArray(n)||!n.length){nD(G_,this,!1);return}n.forEach(e=>{let{borderBoxSize:t}=e;const{inlineSize:i,blockSize:r}=t[0];this.runLocalHooks("resize",i,r)})}Gt(UU,zi);function jd(n,e,t){YPe(n,e),e.set(n,t)}function YPe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nn(n,e){return n.get(GU(n,e))}function vc(n,e,t){return n.set(GU(n,e),t),t}function GU(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var zd=new WeakMap,rD=new WeakMap,wc=new WeakMap,Ud=new WeakMap,ku=new WeakMap,q_=new WeakMap,fp=new WeakMap;class Gd{static get CLASS_EDITOR_CONTAINER(){return"htCommentsContainer"}static get CLASS_EDITOR(){return"htComments"}static get CLASS_INPUT(){return"htCommentTextArea"}static get CLASS_CELL(){return"htCommentCell"}constructor(e,t){var i=this;jd(this,zd,void 0),jd(this,rD,!1),jd(this,wc,null),jd(this,Ud,void 0),jd(this,ku,void 0),jd(this,q_,!0),jd(this,fp,new UU),vc(zd,this,e),vc(rD,this,t),vc(Ud,this,this.createEditor()),vc(ku,this,nn(Ud,this).style),nn(fp,this).setObservedElement(this.getInputElement()),nn(fp,this).addLocalHook("resize",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("resize",...s)}),this.hide()}setPosition(e,t){nn(ku,this).left=`${e}px`,nn(ku,this).top=`${t}px`}setSize(e,t){if(e&&t){const i=this.getInputElement();i.style.width=`${e}px`,i.style.height=`${t}px`}}getSize(){return{width:dn(this.getInputElement()),height:Zn(this.getInputElement())}}observeSize(){nn(fp,this).observe()}resetSize(){const e=this.getInputElement();e.style.width="",e.style.height=""}setReadOnlyState(e){const t=this.getInputElement();t.readOnly=e}show(){nn(ku,this).display="block",vc(q_,this,!1)}hide(){nn(fp,this).unobserve(),nn(q_,this)||(nn(ku,this).display="none"),vc(q_,this,!0)}isVisible(){return nn(ku,this).display==="block"}setValue(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"")||"";this.getInputElement().value=t}getValue(){return this.getInputElement().value}isFocused(){return nn(zd,this).activeElement===this.getInputElement()}focus(){this.getInputElement().focus()}createEditor(){const e=nn(zd,this).createElement("div"),t=nn(zd,this).createElement("textarea");return e.style.display="none",vc(wc,this,nn(zd,this).createElement("div")),nn(wc,this).setAttribute("dir",nn(rD,this)?"rtl":"ltr"),ce(nn(wc,this),Gd.CLASS_EDITOR_CONTAINER),nn(zd,this).body.appendChild(nn(wc,this)),ce(e,Gd.CLASS_EDITOR),ce(t,Gd.CLASS_INPUT),t.setAttribute("data-hot-input",!0),e.appendChild(t),nn(wc,this).appendChild(e),e}getInputElement(){return nn(Ud,this).querySelector(`.${Gd.CLASS_INPUT}`)}destroy(){const e=nn(wc,this)?nn(wc,this).parentNode:null;nn(Ud,this).parentNode.removeChild(nn(Ud,this)),vc(Ud,this,null),vc(ku,this,null),nn(fp,this).destroy(),e&&e.removeChild(nn(wc,this))}}Gt(Gd,zi);function sD(n,e,t){return(e=KPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KPe(n){var e=qPe(n,"string");return typeof e=="symbol"?e:e+""}function qPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const XPe=250,ZPe=250;class YU{constructor(e){sD(this,"wasLastActionShow",!0),sD(this,"showDebounced",null),sD(this,"hidingTimer",null),this.updateDelay(e)}hide(){this.wasLastActionShow=!1,this.hidingTimer=setTimeout(()=>{this.wasLastActionShow===!1&&this.runLocalHooks("hide")},ZPe)}show(e){this.wasLastActionShow=!0,this.showDebounced(e)}cancelHiding(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}updateDelay(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:XPe;this.showDebounced=cS(t=>{this.wasLastActionShow&&this.runLocalHooks("show",t.from.row,t.from.col)},e)}destroy(){this.clearLocalHooks()}}Gt(YU,zi);function QPe(n,e){return n.indexOf(e)!==-1?n:`${n.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","")} ${e}`}function JPe(n,e){return n.indexOf(e)!==-1?n:`${n.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","")} ${e}`}function Yd(n,e){const t={};return V(n,i=>{i.forAll((r,s)=>{r>=0&&s>=0&&(t[r]||(t[r]=[]),t[r][s]=e(r,s))})}),t}function Du(n,e,t,i,r){V(n,s=>{s.forAll((o,a)=>{o>=0&&a>=0&&eIe(o,a,e,t,i,r)})})}function eIe(n,e,t,i,r,s){const o=r(n,e);let a=i;o.className&&(t==="vertical"?a=QPe(o.className,i):a=JPe(o.className,i)),s(n,e,"className",a)}function yc(n){return`<span class="selected">✓</span>${n}`}function Yv(n,e){let t=!1;return Array.isArray(n)&&V(n,i=>(i.forAll((r,s)=>{if(r>=0&&s>=0&&e(r,s))return t=!0,!1}),t)),t}function X_(n,e){const t={top:0,left:0};if(e!==n.ownerDocument){const{frameElement:i}=e.defaultView,{top:r,left:s}=i.getBoundingClientRect();t.top=r,t.left=s}return t}function tIe(n){return function(e,t){const i=this.getCellMeta(e,t).className;return i&&i.indexOf(n)!==-1}}function Ur(n,e){return Yv(n.getSelectedRange(),tIe(e).bind(n))}const ut="---------";function nIe(){return{name:ut}}const to="alignment";function iIe(){return{key:to,name(){return this.getTranslatedPhrase(gO)},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()?!0:!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:`${to}:left`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(s_)},ariaChecked(){return Ur(this,"htLeft")},name(){let n=this.getTranslatedPhrase(s_);return Ur(this,"htLeft")&&(n=yc(n)),n},callback(){const n=this.getSelectedRange(),e=Yd(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htLeft";this.runHooks("beforeCellAlignment",e,n,t,i),Du(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${to}:center`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(o_)},ariaChecked(){return Ur(this,"htCenter")},name(){let n=this.getTranslatedPhrase(o_);return Ur(this,"htCenter")&&(n=yc(n)),n},callback(){const n=this.getSelectedRange(),e=Yd(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htCenter";this.runHooks("beforeCellAlignment",e,n,t,i),Du(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${to}:right`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(a_)},ariaChecked(){return Ur(this,"htRight")},name(){let n=this.getTranslatedPhrase(a_);return Ur(this,"htRight")&&(n=yc(n)),n},callback(){const n=this.getSelectedRange(),e=Yd(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htRight";this.runHooks("beforeCellAlignment",e,n,t,i),Du(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${to}:justify`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(l_)},ariaChecked(){return Ur(this,"htJustify")},name(){let n=this.getTranslatedPhrase(l_);return Ur(this,"htJustify")&&(n=yc(n)),n},callback(){const n=this.getSelectedRange(),e=Yd(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htJustify";this.runHooks("beforeCellAlignment",e,n,t,i),Du(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{name:ut},{key:`${to}:top`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(c_)},ariaChecked(){return Ur(this,"htTop")},name(){let n=this.getTranslatedPhrase(c_);return Ur(this,"htTop")&&(n=yc(n)),n},callback(){const n=this.getSelectedRange(),e=Yd(n,(r,s)=>this.getCellMeta(r,s).className),t="vertical",i="htTop";this.runHooks("beforeCellAlignment",e,n,t,i),Du(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${to}:middle`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(u_)},ariaChecked(){return Ur(this,"htMiddle")},name(){let n=this.getTranslatedPhrase(u_);return Ur(this,"htMiddle")&&(n=yc(n)),n},callback(){const n=this.getSelectedRange(),e=Yd(n,(r,s)=>this.getCellMeta(r,s).className),t="vertical",i="htMiddle";this.runHooks("beforeCellAlignment",e,n,t,i),Du(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${to}:bottom`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(h_)},ariaChecked(){return Ur(this,"htBottom")},name(){let n=this.getTranslatedPhrase(h_);return Ur(this,"htBottom")&&(n=yc(n)),n},callback(){const n=this.getSelectedRange(),e=Yd(n,(r,s)=>this.getCellMeta(r,s).className),t="vertical",i="htBottom";this.runHooks("beforeCellAlignment",e,n,t,i),Du(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1}]}}}const Z_="clear_column";function rIe(){return{key:Z_,name(){return this.getTranslatedPhrase(eO)},callback(n,e){const t=e[0].start.col,i=e[0].end.col;this.countRows()&&this.populateFromArray(0,t,[[null]],Math.max(e[0].start.row,e[0].end.row),i,"ContextMenu.clearColumn")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:!this.selection.isSelectedByColumnHeader()}}}const Kv="col_left";function sIe(){return{key:Kv,name(){return this.getTranslatedPhrase(KI)},callback(){const n=this.getSelectedRangeLast().getTopLeftCorner(),e=this.isRtl()?"insert_col_end":"insert_col_start";this.alter(e,n.col,1,"ContextMenu.columnLeft")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:this.selection.isSelectedByCorner()?this.countCols()===0:this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}}const qv="col_right";function oIe(){return{key:qv,name(){return this.getTranslatedPhrase(qI)},callback(){const n=this.getSelectedRangeLast().getTopRightCorner(),e=this.isRtl()?"insert_col_start":"insert_col_end";this.alter(e,n.col,1,"ContextMenu.columnRight")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:this.selection.isSelectedByCorner()?!1:this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}}const Xv="make_read_only";function aIe(){return{key:Xv,checkable:!0,ariaChecked(){return Yv(this.getSelectedRange(),(e,t)=>this.getCellMeta(e,t).readOnly)},ariaLabel(){return this.getTranslatedPhrase(r_)},name(){let n=this.getTranslatedPhrase(r_);return Yv(this.getSelectedRange(),(t,i)=>this.getCellMeta(t,i).readOnly)&&(n=yc(n)),n},callback(){const n=this.getSelectedRange(),e=Yv(n,(t,i)=>this.getCellMeta(t,i).readOnly);V(n,t=>{t.forAll((i,r)=>{i>=0&&r>=0&&this.setCellMeta(i,r,"readOnly",!e)})}),this.render()},disabled(){const n=this.getSelectedRangeLast();return!!(!n||n.isSingleHeader()||this.selection.isSelectedByCorner()||this.countRows()===0||this.countCols()===0||!this.getSelectedRange()||this.getSelectedRange().length===0)}}}const Q_="redo";function lIe(){return{key:Q_,name(){return this.getTranslatedPhrase(JI)},callback(){this.redo()},hidden(){const n=this.getPlugin("undoRedo");return!n||!n.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isRedoAvailable()}}}const Zv="remove_col";function cIe(){return{key:Zv,name(){const n=this.getSelected();let e=0;if(n)if(n.length>1)e=1;else{const[,t,,i]=n[0];t-i!==0&&(e=1)}return this.getTranslatedPhrase(ZI,e)},callback(){this.alter("remove_col",aEe(this),null,"ContextMenu.removeColumn")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();if(!n||n.isSingleHeader()&&n.highlight.col<0)return!0;const e=this.countCols();return this.selection.isSelectedByCorner()?e===0:this.selection.isSelectedByRowHeader()||e===0},hidden(){return!this.getSettings().allowRemoveColumn}}}const J_="remove_row";function uIe(){return{key:J_,name(){const n=this.getSelected();let e=0;if(n)if(n.length>1)e=1;else{const[t,,i]=n[0];t-i!==0&&(e=1)}return this.getTranslatedPhrase(XI,e)},callback(){this.alter("remove_row",lEe(this),1,"ContextMenu.removeRow")},disabled(){const n=this.getSelectedRangeLast();if(!n||n.isSingleHeader()&&n.highlight.row<0)return!0;const e=this.countRows();return this.selection.isSelectedByCorner()?e===0:this.selection.isSelectedByColumnHeader()||e===0},hidden(){return!this.getSettings().allowRemoveRow}}}const eR="row_above";function hIe(){return{key:eR,name(){return this.getTranslatedPhrase(GI)},callback(){const n=this.getSelectedRangeLast().getTopLeftCorner();this.alter("insert_row_above",n.row,1,"ContextMenu.rowAbove")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.row<0?!0:this.selection.isSelectedByCorner()?this.countRows()===0:this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}}const tR="row_below";function dIe(){return{key:tR,name(){return this.getTranslatedPhrase(YI)},callback(){const n=this.getSelectedRangeLast().getBottomRightCorner();this.alter("insert_row_below",n.row,1,"ContextMenu.rowBelow")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.row<0?!0:this.selection.isSelectedByCorner()?!1:this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}}const Qv="no_items";function fIe(){return{key:Qv,name(){return this.getTranslatedPhrase(UI)},disabled:!0,isCommand:!1}}const nR="undo";function gIe(){return{key:nR,name(){return this.getTranslatedPhrase(QI)},callback(){this.undo()},hidden(){const n=this.getPlugin("undoRedo");return!n||!n.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isUndoAvailable()}}}const pIe=[eR,tR,Kv,qv,Z_,J_,Zv,nR,Q_,Xv,to,ut,Qv],mIe={[ut]:nIe,[Qv]:fIe,[eR]:hIe,[tR]:dIe,[Kv]:sIe,[qv]:oIe,[Z_]:rIe,[J_]:uIe,[Zv]:cIe,[nR]:gIe,[Q_]:lIe,[Xv]:aIe,[to]:iIe};function KU(){const n={};return ot(mIe,(e,t)=>{n[t]=e()}),n}function bIe(n){return{key:"commentsAddEdit",name(){var e;const t=(e=this.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t!=null&&t.isCell()&&n.getCommentAtCell(t.row,t.col)?this.getTranslatedPhrase(hO):this.getTranslatedPhrase(uO)},callback(){const e=this.getSelectedRangeLast();n.setRange(e),n.show(),n.focusEditor()},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function vIe(n){return{key:"commentsRemove",name(){return this.getTranslatedPhrase(dO)},callback(){this.getSelectedRangeLast().forAll((t,i)=>{t>=0&&i>=0&&n.removeCommentAtCell(t,i,!1)}),this.render()},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function wIe(n){return{key:"commentsReadOnly",name(){const e=this.getTranslatedPhrase(fO);return Yv(this.getSelectedRange(),(i,r)=>n.getCommentMeta(i,r,iR))?yc(e):e},callback(){this.getSelectedRangeLast().forAll((t,i)=>{if(t>=0&&i>=0){const r=!!n.getCommentMeta(t,i,iR);n.updateCommentMeta(t,i,{[iR]:!r})}})},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||!n.getCommentAtCell(e.highlight.row,e.highlight.col)||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function yIe(n,e){qU(n,e),e.add(n)}function gp(n,e,t){qU(n,e),e.set(n,t)}function qU(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function CIe(n,e,t){return(e=SIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SIe(n){var e=_Ie(n,"string");return typeof e=="symbol"?e:e+""}function _Ie(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Nu(n,e,t){return n.set(qo(n,e),t),t}function mt(n,e){return n.get(qo(n,e))}function qo(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Jv="comments",RIe=60,Cc="comment",ew="value",XU="style",iR="readOnly",rR=Jv,oD=`plugin:${Jv}`;var rn=new WeakMap,Qa=new WeakMap,sR=new WeakMap,oR=new WeakMap,aD=new WeakMap,aR=new WeakMap,Ja=new WeakSet;class EIe extends Lt{constructor(){super(...arguments),yIe(this,Ja),CIe(this,"range",{}),gp(this,rn,null),gp(this,Qa,null),gp(this,sR,!1),gp(this,oR,!1),gp(this,aD,null),gp(this,aR,"")}static get PLUGIN_KEY(){return Jv}static get PLUGIN_PRIORITY(){return RIe}isEnabled(){return!!this.hot.getSettings()[Jv]}enablePlugin(){var e=this;this.enabled||(mt(rn,this)||(Nu(rn,this,new Gd(this.hot.rootDocument,this.hot.isRtl())),mt(rn,this).addLocalHook("resize",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qo(Ja,e,OIe).call(e,...i)})),mt(Qa,this)||Nu(Qa,this,new YU(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",t=>this.addToContextMenu(t)),this.addHook("afterRenderer",(t,i,r,s,o,a)=>qo(Ja,this,AIe).call(this,t,a)),this.addHook("afterScroll",()=>qo(Ja,this,DIe).call(this)),this.addHook("afterBeginEditing",()=>this.hide()),this.addHook("afterDocumentKeyDown",t=>qo(Ja,this,kIe).call(this,t)),mt(Qa,this).addLocalHook("hide",()=>this.hide()),mt(Qa,this).addLocalHook("show",(t,i)=>this.showAtCell(t,i)),this.registerShortcuts(),this.registerListeners(),super.enablePlugin())}updatePlugin(){mt(Qa,this).updateDelay(this.getDisplayDelaySetting()),super.updatePlugin()}disablePlugin(){this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const e=this.hot.getShortcutManager(),t=e.getContext("grid"),i=e.addContext(oD);t.addShortcut({keys:[["Control","Alt","M"]],callback:()=>{const r=this.hot.getSelectedRangeLast();Nu(oR,this,!0),this.hot.scrollToFocusedCell(()=>{this.setRange(r),this.show(),this.focusEditor(),e.setActiveContextName(oD),this.hot._registerTimeout(()=>{Nu(oR,this,!1)})})},stopPropagation:!0,runOnlyIf:()=>{var r;return((r=this.hot.getSelectedRangeLast())===null||r===void 0?void 0:r.highlight.isCell())&&!mt(rn,this).isVisible()},group:rR}),i.addShortcut({keys:[["Escape"]],callback:()=>{mt(rn,this).setValue(mt(aR,this)),this.hide(),e.setActiveContextName("grid")},runOnlyIf:()=>mt(rn,this).isVisible()&&mt(rn,this).isFocused(),group:rR}),i.addShortcut({keys:[["Control/Meta","Enter"]],callback:()=>{this.hide(),e.setActiveContextName("grid")},runOnlyIf:()=>mt(rn,this).isVisible()&&mt(rn,this).isFocused(),group:rR})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(rR)}registerListeners(){const{rootDocument:e}=this.hot,t=this.getEditorInputElement();this.eventManager.addEventListener(e,"mouseover",i=>qo(Ja,this,TIe).call(this,i)),this.eventManager.addEventListener(e,"mousedown",i=>qo(Ja,this,xIe).call(this,i)),this.eventManager.addEventListener(e,"mouseup",()=>qo(Ja,this,MIe).call(this)),this.eventManager.addEventListener(t,"focus",()=>qo(Ja,this,IIe).call(this)),this.eventManager.addEventListener(t,"blur",()=>qo(Ja,this,PIe).call(this))}setRange(e){this.range=e}clearRange(){this.range={}}targetIsCellWithComment(e){const t=wu(e.target,"TD","TBODY");return!!(t&&Ue(t,"htCommentCell")&&wu(t,[this.hot.rootElement]))}targetIsCommentTextArea(e){return this.getEditorInputElement()===e.target}setComment(e){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const t=mt(rn,this).getValue();let i="";e!=null?i=e:t!=null&&(i=t);const r=this.range.from.row,s=this.range.from.col;this.updateCommentMeta(r,s,{[ew]:i}),this.hot.render()}setCommentAtCell(e,t,i){this.setRange({from:this.hot._createCellCoords(e,t)}),this.setComment(i)}removeComment(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,Cc),e&&this.hot.render(),this.hide()}removeCommentAtCell(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.setRange({from:this.hot._createCellCoords(e,t)}),this.removeComment(i)}getComment(){const e=this.range.from.row,t=this.range.from.col;return this.getCommentMeta(e,t,ew)}getCommentAtCell(e,t){return this.getCommentMeta(e,t,ew)}show(){var e;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const{from:{row:t,col:i}}=this.range;if(t<0||t>this.hot.countSourceRows()-1||i<0||i>this.hot.countSourceCols()-1)return!1;const r=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return mt(Qa,this).cancelHiding(),mt(rn,this).setValue((e=r[Cc]?r[Cc][ew]:null)!==null&&e!==void 0?e:""),mt(rn,this).show(),this.refreshEditor(!0),!0}showAtCell(e,t){return this.setRange({from:this.hot._createCellCoords(e,t)}),this.show()}hide(){mt(rn,this).hide()}refreshEditor(){var e,t;if(!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(!this.range.from||!mt(rn,this).isVisible()))return;const{rowIndexMapper:r,columnIndexMapper:s}=this.hot,{row:o,col:a}=this.range.from;let l=r.getRenderableFromVisualIndex(o),c=s.getRenderableFromVisualIndex(a);const u=l===null;mt(rn,this).setPosition(0,0),l===null&&(l=r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(o,-1))),c===null&&(c=s.getRenderableFromVisualIndex(s.getNearestNotHiddenIndex(a,-1)));const h=l===null,d=c===null;l=(e=l)!==null&&e!==void 0?e:0,c=(t=c)!==null&&t!==void 0?t:0;const{rootWindow:f,view:{_wt:g}}=this.hot,{wtTable:p}=g,m=g.getCell({row:l,col:c},!0),v=this.getCommentMeta(o,a,XU);v?mt(rn,this).setSize(v.width,v.height):mt(rn,this).resetSize();const y=d?0:p.getStretchedColumnWidth(c),w=u&&!h?Zn(m):0,{left:_,top:R,width:E,height:x}=m.getBoundingClientRect(),{width:P,height:T}=mt(rn,this).getSize(),{innerWidth:I,innerHeight:N}=this.hot.rootWindow,W=this.hot.rootDocument.documentElement;let j=_+f.scrollX+y,K=R+f.scrollY+w;this.hot.isRtl()&&(j-=P+y),this.hot.isLtr()&&_+E+P>I?j=_+f.scrollX-P-1:this.hot.isRtl()&&j<-(W.scrollWidth-W.clientWidth)&&(j=_+f.scrollX+y+1),R+T>N&&(K-=T-x+1),mt(rn,this).setPosition(j,K),mt(rn,this).setReadOnlyState(this.getCommentMeta(o,a,iR)),mt(rn,this).observeSize()}focusEditor(){mt(rn,this).focus()}updateCommentMeta(e,t,i){const r=this.hot.getCellMeta(e,t)[Cc];let s;r?(s=sr(r),tv(s,i)):s=i,this.hot.setCellMeta(e,t,Cc,s)}getCommentMeta(e,t,i){const r=this.hot.getCellMeta(e,t);if(r[Cc])return r[Cc][i]}addToContextMenu(e){e.items.push({name:ut},bIe(this),vIe(this),wIe(this))}getDisplayDelaySetting(){const e=this.hot.getSettings()[Jv];if(st(e))return e.displayDelay}getEditorInputElement(){return mt(rn,this).getInputElement()}destroy(){var e,t;(e=mt(rn,this))===null||e===void 0||e.destroy(),(t=mt(Qa,this))===null||t===void 0||t.destroy(),super.destroy()}}function xIe(n){if(!(!this.hot.view||!this.hot.view._wt)&&!mt(sR,this)&&!this.targetIsCommentTextArea(n)){const e=wu(n.target,"TD","TBODY");let t=null;e&&(t=this.hot.getCoords(e)),(!e||this.range.from&&t&&(this.range.from.row!==t.row||this.range.from.col!==t.col))&&this.hide()}}function TIe(n){const{rootDocument:e}=this.hot;if(!(mt(sR,this)||mt(rn,this).isFocused()||Ue(n.target,"wtBorder")||mt(aD,this)===n.target||!mt(rn,this)))if(Nu(aD,this,e.elementFromPoint(n.clientX,n.clientY)),this.targetIsCellWithComment(n)){const t=this.hot._createCellRange(this.hot.getCoords(n.target));mt(Qa,this).show(t)}else yu(n.target,e)&&!this.targetIsCommentTextArea(n)&&mt(Qa,this).hide()}function MIe(){Nu(sR,this,!1)}function AIe(n,e){e[Cc]&&e[Cc][ew]&&ce(n,e.commentedCellClassName)}function PIe(){Nu(aR,this,""),this.hot.getShortcutManager().setActiveContextName("grid"),this.setComment()}function IIe(){Nu(aR,this,this.getComment()),this.hot.listen(),this.hot.getShortcutManager().setActiveContextName(oD)}function OIe(n,e){this.updateCommentMeta(this.range.from.row,this.range.from.col,{[XU]:{width:n,height:e}})}function kIe(n){mt(rn,this).isVisible()&&Gs(n)}function DIe(){mt(oR,this)||this.hide()}var ZU=pC,NIe=TypeError,LIe=function(n,e){if(!delete n[e])throw new NIe("Cannot delete property "+ZU(e)+" of "+ZU(n))},HIe=Wi,$Ie=Sb,FIe=xb,BIe=Dj,VIe=LIe,WIe=Nj,jIe=[].unshift(0)!==1,zIe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(n){return n instanceof TypeError}},UIe=jIe||!zIe();HIe({target:"Array",proto:!0,arity:1,forced:UIe},{unshift:function(e){var t=$Ie(this),i=FIe(t),r=arguments.length;if(r){WIe(i+r);for(var s=i;s--;){var o=s+r;s in t?t[o]=t[s]:VIe(t,o)}for(var a=0;a<r;a++)t[a]=arguments[a]}return BIe(t,i+r)}});function lD(n,e,t){return(e=GIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GIe(n){var e=YIe(n,"string");return typeof e=="symbol"?e:e+""}function YIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class QU{constructor(e){lD(this,"hot",void 0),lD(this,"commands",{}),lD(this,"commonCallback",null),this.hot=e}registerCommand(e,t){this.commands[e]=t}setCommonCallback(e){this.commonCallback=e}execute(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];const s=e.split(":"),o=s[0],a=s.length===2?s[1]:null;let l=this.commands[o];if(!l)throw new Error(`Menu command '${o}' not exists.`);if(a&&l.submenu&&(l=KIe(a,l.submenu.items)),l.disabled===!0||typeof l.disabled=="function"&&l.disabled.call(this.hot)===!0||In(l,"submenu"))return;const c=[];typeof l.callback=="function"&&c.push(l.callback),typeof this.commonCallback=="function"&&c.push(this.commonCallback),i.unshift(s.join(":")),V(c,u=>u.apply(this.hot,i))}}function KIe(n,e){let t;return V(e,i=>{const r=i.key?i.key.split(":"):null;if(Array.isArray(r)&&r[1]===n)return t=i,!1}),t}function cD(n,e,t){return(e=qIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qIe(n){var e=XIe(n,"string");return typeof e=="symbol"?e:e+""}function XIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class JU{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;cD(this,"hot",void 0),cD(this,"predefinedItems",KU()),cD(this,"defaultOrderPattern",void 0),this.hot=e,this.defaultOrderPattern=t}setPredefinedItems(e){const t={};this.defaultOrderPattern.length=0,ot(e,(i,r)=>{let s="";i.name===ut?(t[ut]=i,s=ut):isNaN(parseInt(r,10))?(i.key=i.key===void 0?r:i.key,t[r]=i,s=i.key):(t[i.key]=i,s=i.key),this.defaultOrderPattern.push(s)}),this.predefinedItems=t}getItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return ZIe(e,this.defaultOrderPattern,this.predefinedItems)}}function ZIe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=[];let r=n;return r&&r.items?r=r.items:Array.isArray(r)||(r=e),st(r)?ot(r,(s,o)=>{let a=t[typeof s=="string"?s:o];a||(a=s),st(s)?oi(a,s):typeof a=="string"&&(a={name:a}),a.key===void 0&&(a.key=o),i.push(a)}):V(r,(s,o)=>{let a=t[s];!a&&pIe.indexOf(s)>=0||(a||(a={name:s,key:`${o}`}),st(s)&&oi(a,s),a.key===void 0&&(a.key=o),i.push(a))}),i}function Lu(n,e,t){return(e=QIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QIe(n){var e=JIe(n,"string");return typeof e=="symbol"?e:e+""}function JIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class eOe{constructor(e,t){Lu(this,"top",void 0),Lu(this,"topRelative",void 0),Lu(this,"left",void 0),Lu(this,"leftRelative",void 0),Lu(this,"scrollTop",void 0),Lu(this,"scrollLeft",void 0),Lu(this,"cellHeight",void 0),Lu(this,"cellWidth",void 0);const i=t.scrollY,r=t.scrollX;let s,o,a,l,c,u;this.rootWindow=t,this.type=this.getSourceType(e),this.type==="literal"?(s=parseInt(e.top,10),a=parseInt(e.left,10),c=e.height||0,u=e.width||0,o=s,l=a,s+=i,a+=r):this.type==="event"&&(s=parseInt(e.pageY,10),a=parseInt(e.pageX,10),c=e.target.clientHeight,u=e.target.clientWidth,o=s-i,l=a-r),this.top=s,this.topRelative=o,this.left=a,this.leftRelative=l,this.scrollTop=i,this.scrollLeft=r,this.cellHeight=c,this.cellWidth=u}getSourceType(e){let t="literal";return e instanceof Event&&(t="event"),t}fitsAbove(e){return this.topRelative>=e.offsetHeight}fitsBelow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+e.offsetHeight<=t}fitsOnRight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+e.offsetWidth<=t}fitsOnLeft(e){return this.leftRelative>=e.offsetWidth}}function tw(n,e,t){tOe(n,e),e.set(n,t)}function tOe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ct(n,e){return n.get(e7(n,e))}function lR(n,e,t){return n.set(e7(n,e),t),t}function e7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var xr=new WeakMap,Hu=new WeakMap,Gr=new WeakMap,uD=new WeakMap,pp=new WeakMap;class nOe{constructor(e){tw(this,xr,void 0),tw(this,Hu,void 0),tw(this,Gr,void 0),tw(this,uD,!1),tw(this,pp,{above:0,below:0,left:0,right:0}),lR(uD,this,e)}setOffset(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Ct(pp,this)[e]=t,this}setElement(e){return lR(xr,this,e),this}setParentElement(e){return lR(Hu,this,e),this}updatePosition(e){lR(Gr,this,new eOe(e,Ct(xr,this).ownerDocument.defaultView)),Ct(uD,this)?(Ct(Gr,this).fitsBelow(Ct(xr,this))?this.setPositionBelowCursor():Ct(Gr,this).fitsAbove(Ct(xr,this))?this.setPositionAboveCursor():this.setPositionBelowCursor(),this.updateHorizontalPosition()):(this.setPositionBelowCursor(),this.setPositionOnRightOfCursor())}updateHorizontalPosition(){Ct(xr,this).dir==="rtl"?Ct(Gr,this).fitsOnLeft(Ct(xr,this))?this.setPositionOnLeftOfCursor():this.setPositionOnRightOfCursor():Ct(Gr,this).fitsOnRight(Ct(xr,this))?this.setPositionOnRightOfCursor():this.setPositionOnLeftOfCursor()}setPositionAboveCursor(){let e=Ct(pp,this).above+Ct(Gr,this).top-Ct(xr,this).offsetHeight;Ct(Hu,this)&&(e=Ct(Gr,this).top+Ct(Gr,this).cellHeight-Ct(xr,this).offsetHeight+3),Ct(xr,this).style.top=`${e}px`}setPositionBelowCursor(){let e=Ct(pp,this).below+Ct(Gr,this).top+1;Ct(Hu,this)&&(e=Ct(Gr,this).top-1),Ct(xr,this).style.top=`${e}px`}setPositionOnRightOfCursor(){let e=Ct(Gr,this).left;if(Ct(Hu,this)){const t=Number.parseInt(getComputedStyle(Ct(Hu,this).querySelector(".htCore")).borderRightWidth,10);e+=Ct(Gr,this).cellWidth+t}else e+=Ct(pp,this).right;Ct(xr,this).style.left=`${e}px`}setPositionOnLeftOfCursor(){let e=Ct(pp,this).left+Ct(Gr,this).left-Ct(xr,this).offsetWidth;if(Ct(Hu,this)){const t=Number.parseInt(getComputedStyle(Ct(Hu,this).querySelector(".htCore")).borderLeftWidth,10);e-=t}Ct(xr,this).style.left=`${e}px`}}function t7(n){let{initialPage:e=-1,size:t=()=>0,onItemSelect:i=()=>{},onClear:r=()=>{}}=n;const s=new Set;let o=Kt(e,-1,g()-1);function a(m,v){const y=g()-1;return m<0&&(m=y),m>y&&(m=0),s.has(m)?-1:(s.add(m),i(m,!1)===!1&&(m=a(v===1?++m:--m,v)),m)}function l(m){m>-1&&m<g()&&i(m,!0)!==!1&&(o=m)}function c(){return o}function u(){g()>0&&(s.clear(),o=a(0,1))}function h(){g()>0&&(s.clear(),o=a(g()-1,-1))}function d(){g()>0&&(s.clear(),o=a(++o,1))}function f(){g()>0&&(s.clear(),o=a(--o,-1))}function g(){return Math.max(t(),0)}function p(){s.clear(),o=e,r()}return{setCurrentPage:l,getCurrentPage:c,toFirstItem:u,toLastItem:h,toNextItem:d,toPreviousItem:f,getSize:g,clear:p}}function iOe(n){return pt(n,e=>({start:e.getTopStartCorner(),end:e.getBottomEndCorner()}))}function hD(n){return In(n,"submenu")}function dD(n){return new RegExp(ut,"i").test(n.name)}function cR(n,e){return n.disabled===!0||typeof n.disabled=="function"&&n.disabled.call(e)===!0}function n7(n){return In(n,"disableSelection")}function rOe(n){return Ue(n,"htSeparator")}function sOe(n){return Ue(n,"htSubmenu")}function oOe(n){return Ue(n,"htDisabled")}function aOe(n){return Ue(n,"htSelectionDisabled")}function lOe(n,e){return!n.hidden||!(typeof n.hidden=="function"&&n.hidden.call(e))}function i7(n,e){const t=n.slice(0);for(let i=0;i<t.length&&t[i].name===e;)t.shift();return t}function cOe(n,e){let t=n.slice(0);return t.reverse(),t=i7(t,e),t.reverse(),t}function uOe(n){const e=[];return V(n,(t,i)=>{i>0?e[e.length-1].name!==t.name&&e.push(t):e.push(t)}),e}function hOe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ut,t=n.slice(0);return t=i7(t,e),t=cOe(t,e),t=uOe(t),t}function dOe(n){return n.checkable===!0}function fOe(n){return t7({size:()=>n.countRows(),onItemSelect(e,t){const i=n.getCell(e,0);if(!i||rOe(i)||oOe(i)||aOe(i))return!1;n.selectCell(e,0,...t?[e,0,!1,!1]:[])},onClear(){n.deselectCell()}})}function gOe(n){const{hot:e,hotMenu:t}=n;return[{keys:[["Control/Meta","A"]],forwardToContext:e.getShortcutManager().getContext("grid"),callback:()=>n.close(!0)},{keys:[["Tab"],["Shift","Tab"]],callback:(i,r)=>{const s=e.getSettings(),o=typeof s.tabMoves=="function"?s.tabMoves(i):s.tabMoves;r.includes("shift")?e.selection.transformStart(-o.row,-o.col):e.selection.transformStart(o.row,o.col),n.close(!0)}},{keys:[["Escape"]],callback:()=>n.close()},{keys:[["ArrowDown"]],callback:()=>n.getNavigator().toNextItem()},{keys:[["ArrowUp"]],callback:()=>n.getNavigator().toPreviousItem()},{keys:[["ArrowRight"]],callback:()=>{const i=t.getSelectedLast();if(i){const r=n.openSubMenu(i[0]);r&&r.getNavigator().toFirstItem()}}},{keys:[["ArrowLeft"]],callback:()=>{t.getSelectedLast()&&n.isSubMenu()&&(n.close(),n.isSubMenu()&&n.parentMenu.hotMenu.listen())}},{keys:[["Control/Meta","ArrowUp"],["Home"]],callback:()=>n.getNavigator().toFirstItem()},{keys:[["Control/Meta","ArrowDown"],["End"]],callback:()=>n.getNavigator().toLastItem()},{keys:[["Enter"],["Space"]],callback:i=>{const r=t.getSelectedLast();r&&(t.getSourceDataAtRow(r[0]).submenu?n.openSubMenu(r[0]).getNavigator().toFirstItem():(n.executeCommand(i),n.close(!0)))}},{keys:[["PageUp"]],callback:()=>{t.getSelectedLast()?t.selection.transformStart(-t.countVisibleRows(),0):n.getNavigator().toFirstItem()}},{keys:[["PageDown"]],callback:()=>{t.getSelectedLast()?t.selection.transformStart(t.countVisibleRows(),0):n.getNavigator().toLastItem()}}]}const r7="menu",s7=r7;function pOe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=[];i(gOe(n)),e.forEach(c=>{let{shortcuts:u,contextName:h}=c;r(u,h)});function i(c,u){a(u).addShortcuts(c,{group:r7})}function r(c,u){const h=a(u);c.forEach(d=>{let{keys:f}=d;f.forEach(g=>h.removeShortcutsByKeys(g))}),t.push({shortcuts:c,contextName:u}),i(c,u)}function s(){return[...t]}function o(c){return c?`${s7}:${c}`:s7}function a(c){var u;const h=n.hotMenu.getShortcutManager(),d=o(c);return(u=h.getContext(d))!==null&&u!==void 0?u:h.addContext(d)}function l(c){n.hotMenu.getShortcutManager().setActiveContextName(o(c))}return{addCustomShortcuts:r,getCustomShortcuts:s,getContext:a,listen:l}}function mOe(n){return(e,t,i,r,s,o)=>{const a=e.getSourceDataAtRow(i),l=n.rootDocument.createElement("div"),c=typeof o=="function"?o.call(n):o,u=typeof a.ariaLabel=="function"?a.ariaLabel.call(n):a.ariaLabel,h=typeof a.ariaChecked=="function"?a.ariaChecked.call(n):a.ariaChecked;if($o(t),ce(l,"htItemWrapper"),n.getSettings().ariaTags){const d=!cR(a,n)&&!n7(a)&&!dD(a);ze(t,[...dOe(a)?[dye(),iS(u),$z(h)]:[hye(),iS(c)],...d?[Ig(-1)]:[],...cR(a,n)?[wye()]:[],...hD(a)?[js(!1)]:[]])}t.className="",t.appendChild(l),dD(a)?ce(t,"htSeparator"):typeof a.renderer=="function"?(ce(t,"htCustomMenuRenderer"),t.appendChild(a.renderer(e,l,i,r,s,c))):gd(l,c),cR(a,n)?ce(t,"htDisabled"):n7(a)?ce(t,"htSelectionDisabled"):hD(a)&&ce(t,"htSubmenu")}}function fD(n,e,t){bOe(n,e),e.set(n,t)}function bOe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function el(n,e,t){return(e=vOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vOe(n){var e=wOe(n,"string");return typeof e=="symbol"?e:e+""}function wOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gD(n,e,t){return n.set(o7(n,e),t),t}function Kd(n,e){return n.get(o7(n,e))}function o7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const a7=215;var nw=new WeakMap,uR=new WeakMap,hR=new WeakMap;class mp{get tableBorderWidth(){return Kd(hR,this)===void 0&&this.hotMenu&&gD(hR,this,parseInt($a(this.hotMenu.view._wt.wtTable.TABLE).borderWidth,10)),Kd(hR,this)}constructor(e,t){var i=this;el(this,"hot",void 0),el(this,"options",void 0),el(this,"eventManager",new Ys(this)),el(this,"container",void 0),el(this,"positioner",void 0),el(this,"hotMenu",null),el(this,"hotSubMenus",{}),el(this,"parentMenu",void 0),el(this,"menuItems",null),el(this,"origOutsideClickDeselects",null),fD(this,nw,void 0),fD(this,uR,void 0),fD(this,hR,void 0),this.hot=e,this.options=t||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:a7,container:this.hot.rootDocument.documentElement},this.container=this.createContainer(this.options.name),this.positioner=new nOe(this.options.keepInViewport),this.parentMenu=this.options.parent||null,this.registerEvents(),this.isSubMenu()&&this.addLocalHook("afterSelectionChange",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.parentMenu.runLocalHooks("afterSelectionChange",...s)})}registerEvents(){let e=this.hot.rootWindow;for(;e;)this.eventManager.addEventListener(e.document,"mousedown",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(e.document,"touchstart",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(e.document,"contextmenu",t=>this.onDocumentContextMenu(t)),e=dd(e)}setMenuItems(e){this.menuItems=e}getNavigator(){return Kd(nw,this)}getKeyboardShortcutsCtrl(){return Kd(uR,this)}getSelectedItem(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}hasSelectedItem(){return Array.isArray(this.hotMenu.getSelectedLast())}isSubMenu(){return this.parentMenu!==null}open(){this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";const e=cS(a=>this.openSubMenu(a),300),t=this.options.minWidth||a7;let i=!1,r=ic(this.menuItems,a=>(a.key===Qv&&(i=!0),lOe(a,this.hot)));if(r.length<1&&!i)r.push(KU()[Qv]);else if(r.length===0)return;r=hOe(r,ut);let s=!1;const o={data:r,colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth(a){return Oe(a)&&a<t?t:a},autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,hiddenRows:!0,maxCols:1,columns:[{data:"name",renderer:mOe(this.hot)}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",layoutDirection:this.hot.isRtl()?"rtl":"ltr",ariaTags:!1,beforeOnCellMouseOver:(a,l)=>{Kd(nw,this).setCurrentPage(l.row)},afterOnCellMouseOver:(a,l)=>{this.isAllSubMenusClosed()?e(l.row):this.openSubMenu(l.row)},rowHeights:a=>r[a].name===ut?1:void 0,afterOnCellContextMenu:a=>{a.preventDefault(),TP()&&s&&this.hasSelectedItem()&&this.close(!0)},afterSelection:(a,l,c,u,h)=>{this.hotMenu.view.isMouseDown()&&(h.value=!0),this.runLocalHooks("afterSelectionChange",this.getSelectedItem())},beforeOnCellMouseUp:a=>{this.hasSelectedItem()&&(s=!this.isCommandPassive(this.getSelectedItem()),this.executeCommand(a))},afterOnCellMouseUp:a=>{(!TP()||!Eu(a))&&s&&this.hasSelectedItem()&&(sc()||xP()?this.hot._registerTimeout(()=>this.close(!0),325):this.close(!0))},afterUnlisten:()=>{!this.hasSelectedItem()&&this.isOpened()&&this.hotMenu.listen()}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new this.hot.constructor(this.container,o),this.hotMenu.addHook("afterInit",()=>this.onAfterInit()),this.hotMenu.init(),gD(nw,this,fOe(this.hotMenu)),gD(uR,this,pOe(this)),Kd(uR,this).listen(),this.focus(),this.isSubMenu()&&this.addLocalHook("afterOpen",()=>this.parentMenu.runLocalHooks("afterSubmenuOpen",this)),this.runLocalHooks("afterOpen",this)}close(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isOpened()){if(e&&this.isSubMenu())this.parentMenu.close();else if(Kd(nw,this).clear(),this.closeAllSubMenus(),this.container.style.display="none",this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.isSubMenu()){if(this.hot.getSettings().ariaTags){const t=this.parentMenu.hotMenu.getSelectedLast();if(t){const i=this.parentMenu.hotMenu.getCell(t[0],0);ze(i,[js(!1)])}}this.parentMenu.hotMenu.listen()}}}openSubMenu(e){if(!this.hotMenu)return!1;const t=this.hotMenu.getCell(e,0);if(this.closeAllSubMenus(),!t||!sOe(t))return!1;const i=this.hotMenu.getSourceDataAtRow(e),r=new mp(this.hot,{parent:this,name:i.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return r.setMenuItems(i.submenu.items),r.open(),r.setPosition(t.getBoundingClientRect()),this.hotSubMenus[i.key]=r,this.hot.getSettings().ariaTags&&ze(t,[js(!0)]),r}closeSubMenu(e){const t=this.hotMenu.getSourceDataAtRow(e),i=this.hotSubMenus[t.key];if(i){i.destroy(),delete this.hotSubMenus[t.key];const r=this.hotMenu.getCell(e,0);this.hot.getSettings().ariaTags&&ze(r,[js(!1)])}}closeAllSubMenus(){V(this.hotMenu.getData(),(e,t)=>this.closeSubMenu(t))}isAllSubMenusClosed(){return Object.keys(this.hotSubMenus).length===0}focus(){this.isOpened()&&(this.hotMenu.rootElement.focus({preventScroll:!0}),this.getKeyboardShortcutsCtrl().listen(),this.hotMenu.listen())}destroy(){const e=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),e&&e.removeChild(this.container)}isOpened(){return this.hotMenu!==null}executeCommand(e){if(!this.isOpened()||!this.hasSelectedItem())return;const t=this.getSelectedItem();if(this.runLocalHooks("select",t,e),this.isCommandPassive(t))return;const i=this.hot.getSelectedRange(),r=i?iOe(i):[];this.runLocalHooks("executeCommand",t.key,r,e),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",t.key,r,e)}isCommandPassive(e){return e.isCommand===!1||dD(e)||cR(e,this.hot)||hD(e)}setOffset(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.positioner.setOffset(e,t)}setPosition(e){this.isSubMenu()&&this.positioner.setParentElement(this.parentMenu.container),this.positioner.setElement(this.container).updatePosition(e)}updateMenuDimensions(){const{wtTable:e}=this.hotMenu.view._wt,t=this.hotMenu.getSettings().data,i=e.hider.style,r=e.holder.style,s=parseInt(i.width,10),o=si(t,(a,l,c)=>{const h=this.hotMenu.getCell(c,0)?Zn(this.hotMenu.getCell(c,0)):0;return a+(l.name===ut?1:h)},0);r.width=`${s+3}px`,r.height=`${o+3}px`,i.height=r.height}createContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const t=this.options.container.ownerDocument;let i=e,r;return i&&(fn(i)&&(i=i.call(this.hot),i===null||hn(i)?i="":i=i.toString()),i=i.replace(/[^A-z0-9]/g,"_"),i=`${this.options.className}Sub_${i}`,r=t.querySelector(`.${this.options.className}.${i}`)),r||(r=t.createElement("div"),ce(r,`htMenu ${this.options.className}`),i&&ce(r,i),this.options.container.appendChild(r)),r}onAfterInit(){this.updateMenuDimensions(),this.hot.getSettings().ariaTags&&ze(this.hotMenu.rootElement,[uye(),Ig(-1)])}onDocumentMouseDown(e){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!yu(e.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&&!yu(e.target,".htMenu")&&this.close(!0))}onDocumentContextMenu(e){this.isOpened()&&Ue(e.target,"htCore")&&yu(e.target,this.hotMenu.rootElement)&&e.preventDefault()}}Gt(mp,zi);function yOe(n,e){COe(n,e),e.add(n)}function COe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pD(n,e,t){return(e=SOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SOe(n){var e=_Oe(n,"string");return typeof e=="symbol"?e:e+""}function _Oe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function dR(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const iw="contextMenu",ROe=70,l7=iw;Pe.getSingleton().register("afterContextMenuDefaultOptions"),Pe.getSingleton().register("beforeContextMenuShow"),Pe.getSingleton().register("afterContextMenuShow"),Pe.getSingleton().register("afterContextMenuHide"),Pe.getSingleton().register("afterContextMenuExecute");var rw=new WeakSet;class fR extends Lt{constructor(){super(...arguments),yOe(this,rw),pD(this,"commandExecutor",new QU(this.hot)),pD(this,"itemsFactory",null),pD(this,"menu",null)}static get PLUGIN_KEY(){return iw}static get PLUGIN_PRIORITY(){return ROe}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[eR,tR,ut,Kv,qv,ut,J_,Zv,ut,nR,Q_,ut,Xv,ut,to]}isEnabled(){return!!this.hot.getSettings()[iw]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[iw];typeof t.callback=="function"&&this.commandExecutor.setCommonCallback(t.callback),this.menu=new mp(this.hot,{className:"htContextMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",()=>dR(rw,this,xOe).call(this)),this.menu.addLocalHook("afterOpen",()=>dR(rw,this,TOe).call(this)),this.menu.addLocalHook("afterClose",()=>dR(rw,this,MOe).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e.executeCommand.call(e,...r)}),this.addHook("afterOnCellContextMenu",i=>dR(rw,this,EOe).call(this,i)),this.registerShortcuts(),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control/Meta","Shift","Backslash"],["Shift","F10"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();this.hot.scrollToFocusedCell();const t=this.hot.getCell(e.row,e.col,!0).getBoundingClientRect(),i=X_(this.menu.container,this.hot.rootDocument);this.open({left:t.left+i.left,top:t.top+i.top-1+t.height},{left:t.width,above:-t.height}),this.menu.getNavigator().toFirstItem()},runOnlyIf:()=>{var e;const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t&&this.hot.selection.isCellVisible(t)&&!this.menu.isOpened()},group:l7})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(l7)}open(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{above:0,below:0,left:0,right:0};if((t=this.menu)!==null&&t!==void 0&&t.isOpened())return;this.prepareMenuItems(),this.menu.open(),this.menu.tableBorderWidth>0||(i.below+=1,i.right+=1,i.above-=1,i.left-=1),ot(i,(s,o)=>{this.menu.setOffset(o,s)}),this.menu.setPosition(e)}close(){var e;(e=this.menu)===null||e===void 0||e.close(),this.itemsFactory=null}executeCommand(e){this.itemsFactory===null&&this.prepareMenuItems();for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.commandExecutor.execute(e,...i)}prepareMenuItems(){this.itemsFactory=new JU(this.hot,fR.DEFAULT_ITEMS);const e=this.hot.getSettings()[iw],t={items:this.itemsFactory.getItems(e)};this.hot.runHooks("afterContextMenuDefaultOptions",t),this.itemsFactory.setPredefinedItems(t.items);const i=this.itemsFactory.getItems(e);this.hot.runHooks("beforeContextMenuSetItems",i),this.menu.setMenuItems(i),V(i,r=>this.commandExecutor.registerCommand(r.key,r))}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function EOe(n){const e=this.hot.getSettings(),t=e.rowHeaders,i=e.colHeaders;function r(a){return a.nodeName==="TD"||a.parentNode.nodeName==="TD"}const s=n.target;if(this.close(),Ue(s,"handsontableInput")||(n.preventDefault(),n.stopPropagation(),!(t||i)&&!r(s)&&!(Ue(s,"current")&&Ue(s,"wtBorder"))))return;const o=X_(this.menu.container,this.hot.rootDocument);this.open({top:n.clientY+o.top,left:n.clientX+o.left})}function xOe(){this.hot.runHooks("beforeContextMenuShow",this)}function TOe(){this.hot.runHooks("afterContextMenuShow",this)}function MOe(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}fR.SEPARATOR={name:ut};function AOe(n){return{key:"copy",name(){return this.getTranslatedPhrase(tO)},callback(){n.copyCellsOnly()},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function POe(n){return{key:"copy_column_headers_only",name(){const e=this.getSelectedRangeLast(),t=e?Kt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(rO,t)},callback(){n.copyColumnHeadersOnly()},disabled(){if(!this.hasColHeaders())return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function IOe(n){return{key:"copy_with_column_group_headers",name(){const e=this.getSelectedRangeLast(),t=e?Kt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(iO,t)},callback(){n.copyWithAllColumnHeaders()},disabled(){if(!this.hasColHeaders()||!this.getSettings().nestedHeaders)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function OOe(n){return{key:"copy_with_column_headers",name(){const e=this.getSelectedRangeLast(),t=e?Kt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(nO,t)},callback(){n.copyWithColumnHeaders()},disabled(){if(!this.hasColHeaders())return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function kOe(n){return{key:"cut",name(){return this.getTranslatedPhrase(sO)},callback(){n.cut()},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}class DOe{constructor(){this.data={}}setData(e,t){this.data[e]=t}getData(e){return this.data[e]||void 0}}class NOe{constructor(){this.clipboardData=new DOe}preventDefault(){}}function LOe(n,e){c7(n,e),e.add(n)}function bp(n,e,t){c7(n,e),e.set(n,t)}function c7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Tr(n,e){return n.get(wp(n,e))}function vp(n,e,t){return n.set(wp(n,e),t),t}function wp(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var $u=new WeakMap,mD=new WeakMap,sw=new WeakMap,bD=new WeakMap,vD=new WeakMap,ow=new WeakMap,aw=new WeakSet;class HOe{constructor(e){let{countRows:t,countColumns:i,rowsLimit:r,columnsLimit:s,countColumnHeaders:o}=e;LOe(this,aw),bp(this,$u,void 0),bp(this,mD,void 0),bp(this,sw,void 0),bp(this,bD,void 0),bp(this,vD,void 0),bp(this,ow,void 0),vp(mD,this,t),vp(sw,this,i),vp(bD,this,r),vp(vD,this,s),vp(ow,this,o)}setSelectedRange(e){vp($u,this,e)}getCellsRange(){if(Tr(mD,this).call(this)===0||Tr(sw,this).call(this)===0)return null;const{row:e,col:t}=Tr($u,this).getTopStartCorner(),{row:i,col:r}=Tr($u,this).getBottomEndCorner(),s=wp(aw,this,$Oe).call(this,e,i),o=wp(aw,this,wD).call(this,t,r);return{isRangeTrimmed:i!==s||r!==o,startRow:e,startCol:t,endRow:s,endCol:o}}getMostBottomColumnHeadersRange(){if(Tr(sw,this).call(this)===0||Tr(ow,this).call(this)===0)return null;const{col:e}=Tr($u,this).getTopStartCorner(),{col:t}=Tr($u,this).getBottomEndCorner(),i=wp(aw,this,wD).call(this,e,t);return{isRangeTrimmed:t!==i,startRow:-1,startCol:e,endRow:-1,endCol:i}}getAllColumnHeadersRange(){if(Tr(sw,this).call(this)===0||Tr(ow,this).call(this)===0)return null;const{col:e}=Tr($u,this).getTopStartCorner(),{col:t}=Tr($u,this).getBottomEndCorner(),i=wp(aw,this,wD).call(this,e,t);return{isRangeTrimmed:t!==i,startRow:-Tr(ow,this).call(this),startCol:e,endRow:-1,endCol:i}}}function wD(n,e){return Math.min(e,Math.max(n+Tr(vD,this).call(this)-1,n))}function $Oe(n,e){return Math.min(e,Math.max(n+Tr(bD,this).call(this)-1,n))}function u7(n){const e=[],t=[];return V(n,i=>{const r=Math.min(i.startRow,i.endRow),s=Math.max(i.startRow,i.endRow);He(r,s,l=>{e.indexOf(l)===-1&&e.push(l)});const o=Math.min(i.startCol,i.endCol),a=Math.max(i.startCol,i.endCol);He(o,a,l=>{t.indexOf(l)===-1&&t.push(l)})}),{rows:e,columns:t}}function FOe(n,e){h7(n,e),e.add(n)}function Fu(n,e,t){h7(n,e),e.set(n,t)}function h7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lw(n,e,t){return(e=BOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BOe(n){var e=VOe(n,"string");return typeof e=="symbol"?e:e+""}function VOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Yr(n,e){return n.get(Kr(n,e))}function Xo(n,e,t){return n.set(Kr(n,e),t),t}function Kr(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Pe.getSingleton().register("afterCopyLimit"),Pe.getSingleton().register("modifyCopyableRange"),Pe.getSingleton().register("beforeCut"),Pe.getSingleton().register("afterCut"),Pe.getSingleton().register("beforePaste"),Pe.getSingleton().register("afterPaste"),Pe.getSingleton().register("beforeCopy"),Pe.getSingleton().register("afterCopy");const gR="copyPaste",WOe=80,jOe=["fragmentSelection"],d7=['<meta name="generator" content="Handsontable"/>','<style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>'].join("");var yD=new WeakMap,CD=new WeakMap,SD=new WeakMap,yp=new WeakMap,pR=new WeakMap,mR=new WeakMap,Cp=new WeakMap,bR=new WeakMap,bs=new WeakSet;class zOe extends Lt{constructor(){super(...arguments),FOe(this,bs),lw(this,"columnsLimit",1/0),lw(this,"rowsLimit",1/0),lw(this,"pasteMode","overwrite"),lw(this,"uiContainer",this.hot.rootDocument.body),Fu(this,yD,!1),Fu(this,CD,!1),Fu(this,SD,!1),Fu(this,yp,"cells-only"),Fu(this,pR,!1),Fu(this,mR,!1),Fu(this,Cp,new HOe({countRows:()=>this.hot.countRows(),countColumns:()=>this.hot.countCols(),rowsLimit:()=>this.rowsLimit,columnsLimit:()=>this.columnsLimit,countColumnHeaders:()=>this.hot.view.getColumnHeadersCount()})),Fu(this,bR,!1),lw(this,"copyableRanges",[])}static get PLUGIN_KEY(){return gR}static get SETTING_KEYS(){return[gR,...jOe]}static get PLUGIN_PRIORITY(){return WOe}isEnabled(){return!!this.hot.getSettings()[gR]}enablePlugin(){var e=this;if(this.enabled)return;const{[gR]:t}=this.hot.getSettings();if(typeof t=="object"){var i,r;this.pasteMode=(i=t.pasteMode)!==null&&i!==void 0?i:this.pasteMode,this.rowsLimit=isNaN(t.rowsLimit)?this.rowsLimit:t.rowsLimit,this.columnsLimit=isNaN(t.columnsLimit)?this.columnsLimit:t.columnsLimit,Xo(yD,this,!!t.copyColumnHeaders),Xo(CD,this,!!t.copyColumnGroupHeaders),Xo(SD,this,!!t.copyColumnHeadersOnly),this.uiContainer=(r=t.uiContainer)!==null&&r!==void 0?r:this.uiContainer}this.addHook("afterContextMenuDefaultOptions",s=>Kr(bs,this,YOe).call(this,s)),this.addHook("afterSelection",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return Kr(bs,e,KOe).call(e,...o)}),this.addHook("afterSelectionEnd",()=>Kr(bs,this,qOe).call(this)),this.eventManager.addEventListener(this.hot.rootDocument,"copy",function(){return e.onCopy(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"cut",function(){return e.onCut(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"paste",function(){return e.onPaste(...arguments)}),RP()&&(this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseenter",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return Kr(bs,e,XOe).call(e,...o)}),this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseleave",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return Kr(bs,e,ZOe).call(e,...o)}),this.addHook("afterSelection",()=>Kr(bs,this,QOe).call(this))),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){super.disablePlugin()}copy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"cells-only";Xo(yp,this,e),Xo(pR,this,!0),Kr(bs,this,f7).call(this,"copy")}copyCellsOnly(){this.copy("cells-only")}copyColumnHeadersOnly(){this.copy("column-headers-only")}copyWithAllColumnHeaders(){this.copy("with-column-group-headers")}copyWithColumnHeaders(){this.copy("with-column-headers")}cut(){Xo(mR,this,!0),Kr(bs,this,f7).call(this,"cut")}getRangedCopyableData(e){return Dv(this.getRangedData(e))}getRangedData(e){const t=[],{rows:i,columns:r}=u7(e);return V(i,s=>{const o=[];V(r,a=>{s<0?o.push(this.hot.getColHeader(a,s)):o.push(this.hot.getCopyableData(s,a))}),t.push(o)}),t}paste(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;if(!e&&!t)return;const i=new NOe;e&&i.clipboardData.setData("text/plain",e),t&&i.clipboardData.setData("text/html",t),this.onPaste(i)}setCopyableText(){const e=this.hot.getSelectedRangeLast();if(!e)return;if(e.isSingleHeader()){this.copyableRanges=[];return}Yr(Cp,this).setSelectedRange(e);const t=new Map([["headers",null],["cells",null]]);Yr(yp,this)==="column-headers-only"?t.set("headers",Yr(Cp,this).getMostBottomColumnHeadersRange()):(Yr(yp,this)==="with-column-headers"?t.set("headers",Yr(Cp,this).getMostBottomColumnHeadersRange()):Yr(yp,this)==="with-column-group-headers"&&t.set("headers",Yr(Cp,this).getAllColumnHeadersRange()),t.set("cells",Yr(Cp,this).getCellsRange())),this.copyableRanges=Array.from(t.values()).filter(r=>r!==null).map(r=>{let{startRow:s,startCol:o,endRow:a,endCol:l}=r;return{startRow:s,startCol:o,endRow:a,endCol:l}}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges);const i=t.get("cells");if(i!==null&&i.isRangeTrimmed){const{startRow:r,startCol:s,endRow:o,endCol:a}=i;this.hot.runHooks("afterCopyLimit",o-r+1,a-s+1,this.rowsLimit,this.columnsLimit)}}isEditorOpened(){var e;return(e=this.hot.getActiveEditor())===null||e===void 0?void 0:e.isOpened()}populateValues(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.hot.getSelectedRangeLast();if(!e.length)return;const i=e.length,r=e[0].length,s=[],{row:o,col:a}=t.getTopStartCorner(),{row:l,col:c}=t.getBottomEndCorner();let u=o,h=a,d=o,f=a;for(;s.length<i||u<=l;){const{skipRowOnPaste:g,visualRow:p}=this.hot.getCellMeta(u,a);if(u=p+1,g===!0)continue;d=p,h=a;const m=[],v=s.length%i;for(;m.length<r||h<=c;){const{skipColumnOnPaste:y,visualCol:w}=this.hot.getCellMeta(o,h);if(h=w+1,y===!0)continue;f=w;const _=m.length%r;m.push(e[v][_])}s.push(m)}return Xo(bR,this,!0),this.hot.populateFromArray(o,a,s,void 0,void 0,"CopyPaste.paste",this.pasteMode),[o,a,d,f]}onCopy(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),r=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!Yr(pR,this)||this.isEditorOpened()||e.target instanceof HTMLElement&&(r&&e.target!==i||!r&&e.target!==this.hot.rootDocument.body))return;e.preventDefault(),this.setCopyableText(),Xo(pR,this,!1);const s=this.getRangedData(this.copyableRanges),o=Kr(bs,this,UOe).call(this,this.copyableRanges);if(!!this.hot.runHooks("beforeCopy",s,this.copyableRanges,o)){const l=Dv(s);if(e&&e.clipboardData){const c=qP(s,this.hot.rootDocument);e.clipboardData.setData("text/plain",l),e.clipboardData.setData("text/html",[d7,c].join(""))}else typeof ClipboardEvent>"u"&&this.hot.rootWindow.clipboardData.setData("Text",l);this.hot.runHooks("afterCopy",s,this.copyableRanges,o)}Xo(yp,this,"cells-only")}onCut(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),r=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!Yr(mR,this)||this.isEditorOpened()||e.target instanceof HTMLElement&&(r&&e.target!==i||!r&&e.target!==this.hot.rootDocument.body))return;e.preventDefault(),this.setCopyableText(),Xo(mR,this,!1);const s=this.getRangedData(this.copyableRanges);if(!!this.hot.runHooks("beforeCut",s,this.copyableRanges)){const a=Dv(s);if(e&&e.clipboardData){const l=qP(s,this.hot.rootDocument);e.clipboardData.setData("text/plain",a),e.clipboardData.setData("text/html",[d7,l].join(""))}else typeof ClipboardEvent>"u"&&this.hot.rootWindow.clipboardData.setData("Text",a);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",s,this.copyableRanges)}}onPaste(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),r=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()||this.isEditorOpened()||!this.hot.getSelected()||e.target instanceof HTMLElement&&(r&&e.target!==i||!r&&e.target!==this.hot.rootDocument.body))return;e.preventDefault();let s;if(e&&typeof e.clipboardData<"u"){const u=nS(e.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});u&&/(<table)|(<TABLE)/g.test(u)?s=U5(u,this.hot.rootDocument).data:s=e.clipboardData.getData("text/plain")}else typeof ClipboardEvent>"u"&&typeof this.hot.rootWindow.clipboardData<"u"&&(s=this.hot.rootWindow.clipboardData.getData("Text"));if(typeof s=="string"&&(s=fEe(s)),s===void 0||s&&s.length===0||this.hot.runHooks("beforePaste",s,this.copyableRanges)===!1)return;const[o,a,l,c]=this.populateValues(s);this.hot.selectCell(o,a,Math.min(this.hot.countRows()-1,l),Math.min(this.hot.countCols()-1,c)),this.hot.runHooks("afterPaste",s,this.copyableRanges)}destroy(){super.destroy()}}function f7(n){if(RP()){const e=this.hot.getSelectedRangeLast();if(e){const{row:t,col:i}=e.highlight,r=this.hot.getCell(t,i,!0);r&&Qz(r,()=>{this.hot.rootDocument.execCommand(n)})}}else this.hot.rootDocument.execCommand(n)}function UOe(n){const{rows:e}=u7(n);let t=0;for(let i=0;i<e.length&&!(e[i]>=0);i++)t+=1;return{columnHeadersCount:t}}function GOe(){if(this.hot.isListening()){const n=this.hot.getSelectedRangeLast();if(n){const{row:e,col:t}=n.highlight,i=this.hot.getCell(e,t,!0);i&&wP(i)}}}function g7(){if(this.hot.isListening()){const n=this.hot.getSelectedRangeLast();if(n){const{row:e,col:t}=n.highlight,i=this.hot.getCell(e,t,!0);i!=null&&i.hasAttribute("contenteditable")&&yP(i)}}}function YOe(n){n.items.push({name:"---------"},AOe(this)),Yr(yD,this)&&n.items.push(OOe(this)),Yr(CD,this)&&n.items.push(IOe(this)),Yr(SD,this)&&n.items.push(POe(this)),n.items.push(kOe(this))}function KOe(n,e,t,i,r){Yr(bR,this)&&(r.value=!0),Xo(bR,this,!1)}function qOe(){this.isEditorOpened()||this.hot.getSettings().fragmentSelection||this.setCopyableText()}function XOe(){Kr(bs,this,g7).call(this)}function ZOe(){Kr(bs,this,GOe).call(this)}function QOe(){Kr(bs,this,g7).call(this)}function p7(n,e){return`border_row${n}col${e}`}function cw(){return{width:1,color:"#000"}}function Sc(){return{hide:!0}}function JOe(){return{width:1,color:"#000",cornerVisible:!1}}function _D(n){if(Oe(n.start)||Oe(n.left)){var e;n.start=(e=n.start)!==null&&e!==void 0?e:n.left}if(Oe(n.end)||Oe(n.right)){var t;n.end=(t=n.end)!==null&&t!==void 0?t:n.right}return delete n.left,delete n.right,n}function uw(n){return Oe(n.start)&&(n.left=n.start),Oe(n.end)&&(n.right=n.end),n}function RD(n,e){return{id:p7(n,e),border:JOe(),row:n,col:e,top:Sc(),bottom:Sc(),start:Sc(),end:Sc()}}function eke(n,e){return In(e,"border")&&e.border&&(n.border=e.border),In(e,"top")&&Oe(e.top)&&(e.top?(st(e.top)||(e.top=cw()),n.top=e.top):(e.top=Sc(),n.top=e.top)),In(e,"bottom")&&Oe(e.bottom)&&(e.bottom?(st(e.bottom)||(e.bottom=cw()),n.bottom=e.bottom):(e.bottom=Sc(),n.bottom=e.bottom)),In(e,"start")&&Oe(e.start)&&(e.start?(st(e.start)||(e.start=cw()),n.start=e.start):(e.start=Sc(),n.start=e.start)),In(e,"end")&&Oe(e.end)&&(e.end?(st(e.end)||(e.end=cw()),n.end=e.end):(e.end=Sc(),n.end=e.end)),n}function _c(n,e){let t=!1;return V(n.getSelectedRange(),i=>{i.forAll((r,s)=>{if(r<0||s<0)return;const o=n.getCellMeta(r,s).borders;if(o)if(e){if(!In(o[e],"hide")||o[e].hide===!1)return t=!0,!1}else return t=!0,!1})}),t}function vR(n){return`<span class="selected">✓</span>${n}`}function tke(n){return n.some(e=>Oe(e.left)||Oe(e.right))}function nke(n){return n.some(e=>Oe(e.start)||Oe(e.end))}const ike=new Map([["left","start"],["right","end"]]);function rke(n){var e;return(e=ike.get(n))!==null&&e!==void 0?e:n}function ske(n){return{key:"borders:bottom",name(){let e=this.getTranslatedPhrase(vO);return _c(this,"bottom")&&(e=vR(e)),e},callback(e,t){const i=_c(this,"bottom");n.prepareBorder(t,"bottom",i)}}}function oke(n){const e=n.hot.isRtl()?"end":"start";return{key:"borders:left",name(){let t=this.getTranslatedPhrase(wO);return _c(this,e)&&(t=vR(t)),t},callback(t,i){const r=_c(this,e);n.prepareBorder(i,e,r)}}}function ake(n){return{key:"borders:no_borders",name(){return this.getTranslatedPhrase(yO)},callback(e,t){n.prepareBorder(t,"noBorders")},disabled(){return!_c(this)}}}function lke(n){const e=n.hot.isRtl()?"start":"end";return{key:"borders:right",name(){let t=this.getTranslatedPhrase(bO);return _c(this,e)&&(t=vR(t)),t},callback(t,i){const r=_c(this,e);n.prepareBorder(i,e,r)}}}function cke(n){return{key:"borders:top",name(){let e=this.getTranslatedPhrase(mO);return _c(this,"top")&&(e=vR(e)),e},callback(e,t){const i=_c(this,"top");n.prepareBorder(t,"top",i)}}}function uke(n,e){hke(n,e),e.add(n)}function hke(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dke(n,e,t){return(e=fke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fke(n){var e=gke(n,"string");return typeof e=="symbol"?e:e+""}function gke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function m7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const wR="customBorders",pke=90;var ED=new WeakSet;class mke extends Lt{constructor(){super(...arguments),uke(this,ED),dke(this,"savedBorders",[])}static get PLUGIN_KEY(){return wR}static get PLUGIN_PRIORITY(){return pke}isEnabled(){return!!this.hot.getSettings()[wR]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",e=>m7(ED,this,bke).call(this,e)),this.addHook("init",()=>m7(ED,this,vke).call(this)),super.enablePlugin())}disablePlugin(){this.hideBorders(),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),super.updatePlugin()}setBorders(e,t){let i=["top","bottom","start","end"],r=null;t&&(this.checkSettingsCohesion([t]),i=Object.keys(t),r=_D(t));const s=Kg(e),o=Iv(s,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)});V(e,a=>{o(a).forAll((l,c)=>{V(i,u=>{this.prepareBorderFromCustomAdded(l,c,r,rke(u))})})}),this.hot.view.render()}getBorders(e){if(!Array.isArray(e))return this.savedBorders;const t=Kg(e),i=Iv(t,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)}),r=[];return V(e,s=>{i(s).forAll((o,a)=>{V(this.savedBorders,l=>{l.row===o&&l.col===a&&r.push(uw(l))})})}),r}clearBorders(e){e?this.setBorders(e):(V(this.savedBorders,t=>{this.clearBordersFromSelectionSettings(t.id),this.clearNullCellRange(),this.hot.removeCellMeta(t.row,t.col,"borders")}),this.savedBorders.length=0)}insertBorderIntoSettings(e,t){this.checkSavedBorders(e)||this.savedBorders.push(e);const r=this.hot._createCellRange(this.hot._createCellCoords(e.row,e.col));this.checkCustomSelections(e,r,t)||this.hot.selection.highlight.addCustomSelection({border:e,visualCellRange:r})}prepareBorderFromCustomAdded(e,t,i,r){const s=this.hot.countRows(),o=this.hot.countCols();if(e>=s||t>=o)return;let a=RD(e,t);i&&(a=eke(a,i),V(this.hot.selection.highlight.customSelections,l=>{if(a.id===l.settings.id)return Object.assign(l.settings,i),a.id=l.settings.id,a.top=l.settings.top,a.bottom=l.settings.bottom,a.start=l.settings.start,a.end=l.settings.end,!1})),this.hot.setCellMeta(e,t,"borders",uw(a)),this.insertBorderIntoSettings(a,r)}prepareBorderFromCustomAddedRange(e,t){const i=Math.min(e.to.row,this.hot.countRows()-1),r=Math.min(e.to.col,this.hot.countCols()-1);He(e.from.row,i,s=>{He(e.from.col,r,o=>{const a=RD(s,o);let l=0;s===e.from.row&&In(t,"top")&&(l+=1,a.top=t.top),s===e.to.row&&In(t,"bottom")&&(l+=1,a.bottom=t.bottom),o===e.from.col&&In(t,"start")&&(l+=1,a.start=t.start),o===e.to.col&&In(t,"end")&&(l+=1,a.end=t.end),l>0&&(this.hot.setCellMeta(s,o,"borders",uw(a)),this.insertBorderIntoSettings(a))})})}removeAllBorders(e,t){const i=p7(e,t);this.spliceBorder(i),this.clearBordersFromSelectionSettings(i),this.clearNullCellRange(),this.hot.removeCellMeta(e,t,"borders")}setBorder(e,t,i,r){let s=this.hot.getCellMeta(e,t).borders;!s||s.border===void 0?s=RD(e,t):s=_D(s),r?(s[i]=Sc(),this.countHide(s)===4?this.removeAllBorders(e,t):(this.checkCustomSelectionsFromContextMenu(s,i,r)||this.insertBorderIntoSettings(s),this.hot.setCellMeta(e,t,"borders",uw(s)))):(s[i]=cw(),this.checkCustomSelectionsFromContextMenu(s,i,r)||this.insertBorderIntoSettings(s),this.hot.setCellMeta(e,t,"borders",uw(s)))}prepareBorder(e,t,i){V(e,r=>{let{start:s,end:o}=r;if(s.row===o.row&&s.col===o.col)t==="noBorders"?this.removeAllBorders(s.row,s.col):this.setBorder(s.row,s.col,t,i);else switch(t){case"noBorders":He(s.col,o.col,a=>{He(s.row,o.row,l=>{this.removeAllBorders(l,a)})});break;case"top":He(s.col,o.col,a=>{this.setBorder(s.row,a,t,i)});break;case"bottom":He(s.col,o.col,a=>{this.setBorder(o.row,a,t,i)});break;case"start":He(s.row,o.row,a=>{this.setBorder(a,s.col,t,i)});break;case"end":He(s.row,o.row,a=>{this.setBorder(a,o.col,t,i)});break}})}createCustomBorders(e){V(e,t=>{const i=_D(t);t.range?this.prepareBorderFromCustomAddedRange(t.range,i):this.prepareBorderFromCustomAdded(t.row,t.col,i)})}countHide(e){const{top:t,bottom:i,start:r,end:s}=e;return si([t,i,r,s],(a,l)=>{let c=a;return l&&l.hide&&(c+=1),c},0)}clearBordersFromSelectionSettings(e){const t=pt(this.hot.selection.highlight.customSelections,i=>i.settings.id).indexOf(e);t>-1&&this.hot.selection.highlight.customSelections[t].clear()}clearNullCellRange(){V(this.hot.selection.highlight.customSelections,(e,t)=>{if(e.cellRange===null)return this.hot.selection.highlight.customSelections[t].destroy(),this.hot.selection.highlight.customSelections.splice(t,1),!1})}hideBorders(){V(this.savedBorders,e=>{this.clearBordersFromSelectionSettings(e.id),this.clearNullCellRange()})}spliceBorder(e){const t=pt(this.savedBorders,i=>i.id).indexOf(e);t>-1&&this.savedBorders.splice(t,1)}checkSavedBorders(e){let t=!1;return this.countHide(e)===4?(this.spliceBorder(e.id),t=!0):V(this.savedBorders,(r,s)=>{if(e.id===r.id)return this.savedBorders[s]=e,t=!0,!1}),t}checkCustomSelectionsFromContextMenu(e,t,i){let r=!1;return V(this.hot.selection.highlight.customSelections,s=>{if(e.id===s.settings.id){const o=this.hot.view._wt.selectionManager.getBorderInstances(s);return V(o,a=>{a.toggleHiddenClass(t,i)}),r=!0,!1}}),r}checkCustomSelections(e,t,i){const r=this.countHide(e);let s=!1;return r===4?(this.removeAllBorders(e.row,e.col),s=!0):V(this.hot.selection.highlight.customSelections,o=>{if(e.id===o.settings.id){if(o.visualCellRange=t,o.commit(),i){const a=this.hot.view._wt.selectionManager.getBorderInstances(o);V(a,l=>{l.changeBorderStyle(i,e)})}return s=!0,!1}}),s}changeBorderSettings(){const e=this.hot.getSettings()[wR];if(Array.isArray(e)){const t=sr(e);this.checkSettingsCohesion(t),t.length||(this.savedBorders=t),this.createCustomBorders(t)}else e!==void 0&&this.createCustomBorders(this.savedBorders)}checkSettingsCohesion(e){const t=tke(e),i=nke(e);if(t&&i)throw new Error('The "left"/"right" and "start"/"end" options should not be used together. Please use only the option "start"/"end".');if(this.hot.isRtl()&&t)throw new Error('The "left"/"right" properties are not supported for RTL. Please use option "start"/"end".')}destroy(){super.destroy()}}function bke(n){this.hot.getSettings()[wR]&&n.items.push({name:"---------"},{key:"borders",name(){return this.getTranslatedPhrase(pO)},disabled(){const e=this.getSelectedRangeLast();return!e||e.isSingleHeader()?!0:this.selection.isSelectedByCorner()},submenu:{items:[cke(this),lke(this),ske(this),oke(this),ake(this)]}})}function vke(){this.changeBorderSettings()}function wke(n,e){yke(n,e),e.add(n)}function yke(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xD(n,e,t){return(e=Cke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cke(n){var e=Ske(n,"string");return typeof e=="symbol"?e:e+""}function Ske(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function b7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const v7="dragToScroll",_ke=100;var TD=new WeakSet;class Rke extends Lt{constructor(){super(...arguments),wke(this,TD),xD(this,"boundaries",null),xD(this,"callback",null),xD(this,"listening",!1)}static get PLUGIN_KEY(){return v7}static get PLUGIN_PRIORITY(){return _ke}isEnabled(){return!!this.hot.getSettings()[v7]}enablePlugin(){this.enabled||(this.addHook("afterOnCellMouseDown",e=>b7(TD,this,w7).call(this,e)),this.addHook("afterOnCellCornerMouseDown",e=>b7(TD,this,w7).call(this,e)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.unregisterEvents(),super.disablePlugin()}setBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{left:0,right:this.hot.rootWindow.innerWidth,top:0,bottom:this.hot.rootWindow.innerHeight};this.boundaries=e}setCallback(e){this.callback=e}check(e,t){let i=0,r=0;t<this.boundaries.top?r=t-this.boundaries.top:t>this.boundaries.bottom&&(r=t-this.boundaries.bottom),e<this.boundaries.left?i=e-this.boundaries.left:e>this.boundaries.right&&(i=e-this.boundaries.right),this.callback(i,r)}listen(){this.listening=!0}unlisten(){this.listening=!1}isListening(){return this.listening}registerEvents(){const{rootWindow:e}=this.hot;let t=e;for(;t;)this.eventManager.addEventListener(t.document,"contextmenu",()=>this.unlisten()),this.eventManager.addEventListener(t.document,"mouseup",()=>this.unlisten()),this.eventManager.addEventListener(t.document,"mousemove",i=>this.onMouseMove(i)),t=dd(t)}unregisterEvents(){this.eventManager.clear()}onMouseMove(e){this.isListening()&&this.check(e.clientX,e.clientY)}destroy(){super.destroy()}}function w7(n){if(Eu(n))return;const e=this.hot.view._wt.wtOverlays.topOverlay.mainTableScrollableElement;this.setBoundaries(e!==this.hot.rootWindow?e.getBoundingClientRect():void 0),this.setCallback((t,i)=>{var r,s;const o=(r=e.scrollLeft)!==null&&r!==void 0?r:e.scrollX,a=(s=e.scrollTop)!==null&&s!==void 0?s:e.scrollY;e.scroll(o+Math.sign(t)*50,a+Math.sign(i)*20)}),this.listen()}function Eke(n,e){y7(n,e),e.add(n)}function xke(n,e,t){y7(n,e),e.set(n,t)}function y7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function MD(n,e,t){return(e=Tke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Tke(n){var e=Mke(n,"string");return typeof e=="symbol"?e:e+""}function Mke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ake(n,e){return n.get(no(n,e))}function C7(n,e,t){return n.set(no(n,e),t),t}function no(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Pe.getSingleton().register("afterDropdownMenuDefaultOptions"),Pe.getSingleton().register("beforeDropdownMenuShow"),Pe.getSingleton().register("afterDropdownMenuShow"),Pe.getSingleton().register("afterDropdownMenuHide"),Pe.getSingleton().register("afterDropdownMenuExecute");const yR="dropdownMenu",Pke=230,hw="changeType",AD=yR;var CR=new WeakMap,Zo=new WeakSet;class SR extends Lt{static get PLUGIN_KEY(){return yR}static get PLUGIN_PRIORITY(){return Pke}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[Kv,qv,ut,Zv,ut,Z_,ut,Xv,ut,to]}constructor(e){super(e),Eke(this,Zo),MD(this,"commandExecutor",new QU(this.hot)),MD(this,"itemsFactory",null),MD(this,"menu",null),xke(this,CR,!1),this.hot.addHook("afterGetColHeader",(t,i)=>no(Zo,this,Oke).call(this,t,i))}isEnabled(){return this.hot.getSettings()[yR]}enablePlugin(){var e=this;if(this.enabled)return;this.itemsFactory=new JU(this.hot,SR.DEFAULT_ITEMS),this.addHook("beforeOnCellMouseDown",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return no(Zo,e,$ke).call(e,...s)}),this.addHook("beforeViewportScrollHorizontally",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return no(Zo,e,Hke).call(e,...s)});const t=this.hot.getSettings()[yR],i={items:this.itemsFactory.getItems(t)};this.registerEvents(),typeof t.callback=="function"&&this.commandExecutor.setCommonCallback(t.callback),this.registerShortcuts(),super.enablePlugin(),this.callOnPluginsReady(()=>{this.hot.runHooks("afterDropdownMenuDefaultOptions",i),this.itemsFactory.setPredefinedItems(i.items);const r=this.itemsFactory.getItems(t);this.menu&&this.menu.destroy(),this.menu=new mp(this.hot,{className:"htDropdownMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.hot.runHooks("beforeDropdownMenuSetItems",r),this.menu.setMenuItems(r),this.menu.addLocalHook("beforeOpen",()=>no(Zo,this,kke).call(this)),this.menu.addLocalHook("afterOpen",()=>no(Zo,this,Dke).call(this)),this.menu.addLocalHook("afterSubmenuOpen",s=>no(Zo,this,Nke).call(this,s)),this.menu.addLocalHook("afterClose",()=>no(Zo,this,Lke).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return e.executeCommand.call(e,...o)}),V(r,s=>this.commandExecutor.registerCommand(s.key,s))})}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&this.menu.destroy(),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const e=this.hot.getShortcutManager().getContext("grid"),t=()=>{const{highlight:i}=this.hot.getSelectedRangeLast();if((i.isHeader()&&i.row===-1||i.isCell())&&i.col>=0){this.hot.selectColumns(i.col,i.col,-1);const{from:r}=this.hot.getSelectedRangeLast(),s=X_(this.menu.container,this.hot.rootDocument),o=this.hot.getCell(-1,r.col,!0).querySelector(`.${hw}`),a=o.getBoundingClientRect();this.open({left:a.left+s.left,top:a.top+o.offsetHeight+s.top},{left:a.width,right:0,above:0,below:3}),this.menu.getNavigator().toFirstItem()}};e.addShortcuts([{keys:[["Shift","Alt","ArrowDown"],["Control/Meta","Enter"]],callback:t,runOnlyIf:()=>{var i;const r=(i=this.hot.getSelectedRangeLast())===null||i===void 0?void 0:i.highlight;return r&&this.hot.selection.isCellVisible(r)&&r.isHeader()&&!this.menu.isOpened()},captureCtrl:!0,group:AD},{keys:[["Shift","Alt","ArrowDown"]],callback:t,runOnlyIf:()=>{var i;const r=(i=this.hot.getSelectedRangeLast())===null||i===void 0?void 0:i.highlight;return r&&this.hot.selection.isCellVisible(r)&&r.isCell()&&!this.menu.isOpened()},group:AD}])}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(AD)}registerEvents(){this.eventManager.addEventListener(this.hot.rootElement,"click",e=>no(Zo,this,Ike).call(this,e))}open(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{above:0,below:0,left:0,right:0};(t=this.menu)!==null&&t!==void 0&&t.isOpened()||(this.menu.open(),ot(i,(r,s)=>{this.menu.setOffset(s,r)}),this.menu.setPosition(e))}close(){var e;(e=this.menu)===null||e===void 0||e.close()}executeCommand(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.commandExecutor.execute(e,...i)}setListening(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.menu.isOpened()&&(e?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function S7(n){n.getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Control/Meta","A"]],callback:()=>!1}])}function Ike(n){if(Ue(n.target,hw)){const e=X_(this.menu.container,this.hot.rootDocument),t=n.target.getBoundingClientRect();n.stopPropagation(),C7(CR,this,!1),this.open({left:t.left+e.left,top:t.top+n.target.offsetHeight+e.top},{left:t.width,right:0,above:0,below:3})}}function Oke(n,e){const t=e.parentNode;if(!t)return;const i=t.parentNode.childNodes,r=Array.prototype.indexOf.call(i,t);if(n<0||r!==i.length-1)return;const s=e.querySelector(`.${hw}`);if(this.enabled&&s)return;if(!this.enabled){s&&s.parentNode.removeChild(s);return}const o=this.hot.rootDocument.createElement("button");o.className=hw,o.type="button",o.tabIndex=-1,this.hot.getSettings().ariaTags&&(ze(o,[hd(),iS(" ")]),ze(e,[kz("menu")])),o.onclick=function(){return!1},e.firstChild.insertBefore(o,e.firstChild.firstChild)}function kke(){this.hot.runHooks("beforeDropdownMenuShow",this)}function Dke(){this.hot.runHooks("afterDropdownMenuShow",this),no(Zo,this,S7).call(this,this.menu)}function Nke(n){no(Zo,this,S7).call(this,n)}function Lke(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}function Hke(n){return Ake(CR,this)?null:n}function $ke(n){Ue(n.target,hw)&&C7(CR,this,!0)}SR.SEPARATOR={name:ut};function _7(n,e,t){return(e=Fke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fke(n){var e=Bke(n,"string");return typeof e=="symbol"?e:e+""}function Bke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Vke{constructor(e){_7(this,"hot",void 0),_7(this,"options",{}),this.hot=e}setOptions(e){this.options=e}getData(){const{startRow:e,startCol:t,endRow:i,endCol:r}=this._getDataRange(),s=this.options,o=[];return He(e,i,a=>{const l=[];!s.exportHiddenRows&&this._isHiddenRow(a)||(He(t,r,c=>{!s.exportHiddenColumns&&this._isHiddenColumn(c)||l.push(this.hot.getDataAtCell(a,c))}),o.push(l))}),o}getRowHeaders(){const e=[];if(this.options.rowHeaders){const{startRow:t,endRow:i}=this._getDataRange(),r=this.hot.getRowHeader();He(t,i,s=>{!this.options.exportHiddenRows&&this._isHiddenRow(s)||e.push(r[s])})}return e}getColumnHeaders(){const e=[];if(this.options.columnHeaders){const{startCol:t,endCol:i}=this._getDataRange(),r=this.hot.getColHeader();He(t,i,s=>{!this.options.exportHiddenColumns&&this._isHiddenColumn(s)||e.push(r[s])})}return e}_getDataRange(){const e=this.hot.countCols()-1,t=this.hot.countRows()-1;let[i=0,r=0,s=t,o=e]=this.options.range;return i=Math.max(i,0),r=Math.max(r,0),s=Math.min(s,t),o=Math.min(o,e),{startRow:i,startCol:r,endRow:s,endCol:o}}_isHiddenRow(e){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(e))}_isHiddenColumn(e){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(e))}}function R7(n,e,t){return(e=Wke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wke(n){var e=jke(n,"string");return typeof e=="symbol"?e:e+""}function jke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class PD{static get DEFAULT_OPTIONS(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}constructor(e,t){R7(this,"dataProvider",void 0),R7(this,"options",void 0),this.dataProvider=e,this.options=this._mergeOptions(t),this.dataProvider.setOptions(this.options)}_mergeOptions(e){let t=Bo(this.constructor.DEFAULT_OPTIONS);const i=new Date;return t=oi(Bo(PD.DEFAULT_OPTIONS),t),t=oi(t,e),t.filename=oP(t.filename,{YYYY:i.getFullYear(),MM:`${i.getMonth()+1}`.padStart(2,"0"),DD:`${i.getDate()}`.padStart(2,"0")}),t}}const zke="\r",Uke='"',Gke=`
`;class Yke extends PD{static get DEFAULT_OPTIONS(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:`\r
`}}export(){const e=this.options,t=this.dataProvider.getData();let i=this.dataProvider.getColumnHeaders();const r=i.length>0,s=this.dataProvider.getRowHeaders(),o=s.length>0;let a=e.bom?"\uFEFF":"";return r&&(i=pt(i,l=>this._escapeCell(l,!0)),o&&(a+=e.columnDelimiter),a+=i.join(e.columnDelimiter),a+=e.rowDelimiter),V(t,(l,c)=>{c>0&&(a+=e.rowDelimiter),o&&(a+=this._escapeCell(s[c])+e.columnDelimiter),a+=l.map(u=>this._escapeCell(u)).join(e.columnDelimiter)}),a}_escapeCell(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=Ln(e);return i!==""&&(t||i.indexOf(zke)>=0||i.indexOf(Uke)>=0||i.indexOf(Gke)>=0||i.indexOf(this.options.columnDelimiter)>=0)&&(i=i.replace(new RegExp('"',"g"),'""'),i=`"${i}"`),i}}const ID={["csv"]:Yke};function Kke(n,e,t){return typeof ID[n]=="function"?new ID[n](e,t):null}const qke="exportFile",Xke=240;class Zke extends Lt{static get PLUGIN_KEY(){return qke}static get PLUGIN_PRIORITY(){return Xke}isEnabled(){return!0}exportAsString(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._createTypeFormatter(e,t).export()}exportAsBlob(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._createBlob(this._createTypeFormatter(e,t))}downloadFile(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{rootDocument:i,rootWindow:r}=this.hot,s=this._createTypeFormatter(e,t),o=this._createBlob(s),a=r.URL||r.webkitURL,l=i.createElement("a"),c=`${s.options.filename}.${s.options.fileExtension}`;if(l.download!==void 0){const u=a.createObjectURL(o);l.style.display="none",l.setAttribute("href",u),l.setAttribute("download",c),i.body.appendChild(l),l.dispatchEvent(new MouseEvent("click")),i.body.removeChild(l),setTimeout(()=>{a.revokeObjectURL(u)},100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(o,c)}_createTypeFormatter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ID[e])throw new Error(`Export format type "${e}" is not supported.`);return Kke(e,new Vke(this.hot),t)}_createBlob(e){let t=null;return typeof Blob<"u"&&(t=new Blob([e.export()],{type:`${e.options.mimeType};charset=${e.options.encoding}`})),t}}function Sp(n,e,t){return(e=Qke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qke(n){var e=Jke(n,"string");return typeof e=="symbol"?e:e+""}function Jke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class dw{constructor(e,t){let{id:i,stateless:r=!0}=t;Sp(this,"hot",void 0),Sp(this,"id",void 0),Sp(this,"elements",[]),Sp(this,"hidden",!1),Sp(this,"stateId",""),Sp(this,"state",void 0),this.hot=e,this.id=i,this.stateId=`Filters.component.${this.id}`,this.state=r?null:this.hot.columnIndexMapper.registerMap(this.stateId,new QS)}getElements(){return this.elements}reset(){V(this.elements,e=>e.reset())}hide(){this.hidden=!0}show(){this.hidden=!1}isHidden(){return this.hot===null||this.hidden}restoreState(e){this.state&&this.setState(this.state.getValueAtIndex(e))}setState(){throw new Error("The state setting logic is not implemented")}saveState(e){this.state&&this.state.setValueAtIndex(e,this.getState())}getState(){throw new Error("The state gathering logic is not implemented")}destroy(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),V(this.elements,e=>e.destroy()),this.state=null,this.elements=null,this.hot=null}}Gt(dw,zi);const fw={};function Bu(n,e){if(!fw[n])throw Error(`Filter condition "${n}" does not exist.`);const{condition:t,descriptor:i}=fw[n];let r=e;return i.inputValuesDecorator&&(r=i.inputValuesDecorator(r)),function(s){return t.apply(s.meta.instance,[].concat([s],[r]))}}function qd(n){if(!fw[n])throw Error(`Filter condition "${n}" does not exist.`);return fw[n].descriptor}function li(n,e,t){t.key=n,fw[n]={condition:e,descriptor:t}}const Li="none";function eDe(){return!0}li(Li,eDe,{name:d_,inputsCount:0,showOperators:!1});const gw="empty";function tDe(n){return Hn(n.value)}li(gw,tDe,{name:TO,inputsCount:0,showOperators:!0});const _R="not_empty";function nDe(n,e){return!Bu(gw,e)(n)}li(_R,nDe,{name:MO,inputsCount:0,showOperators:!0});const pw="eq";function iDe(n,e){let[t]=e;return Ln(n.value).toLocaleLowerCase(n.meta.locale)===Ln(t)}li(pw,iDe,{name:AO,inputsCount:1,showOperators:!0});const RR="neq";function rDe(n,e){return!Bu(pw,e)(n)}li(RR,rDe,{name:PO,inputsCount:1,showOperators:!0});const E7="gt";function sDe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value>i}li(E7,sDe,{name:NO,inputsCount:1,showOperators:!0});const x7="gte";function oDe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value>=i}li(x7,oDe,{name:LO,inputsCount:1,showOperators:!0});const T7="lt";function aDe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value<i}li(T7,aDe,{name:HO,inputsCount:1,showOperators:!0});const M7="lte";function lDe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value<=i}li(M7,lDe,{name:$O,inputsCount:1,showOperators:!0});const OD="date_after";function cDe(n,e){let[t]=e;const i=he(n.value,n.meta.dateFormat),r=he(t,n.meta.dateFormat);return!i.isValid()||!r.isValid()?!1:i.diff(r)>=0}li(OD,cDe,{name:VO,inputsCount:1,showOperators:!0});const kD="date_before";function uDe(n,e){let[t]=e;const i=he(n.value,n.meta.dateFormat),r=he(t,n.meta.dateFormat);return!i.isValid()||!r.isValid()?!1:i.diff(r)<=0}li(kD,uDe,{name:WO,inputsCount:1,showOperators:!0});const ER="between";function hDe(n,e){let[t,i]=e,r=t,s=i;if(n.meta.type==="numeric"){const o=parseFloat(r,10),a=parseFloat(s,10);r=Math.min(o,a),s=Math.max(o,a)}else if(n.meta.type==="date"){const o=Bu(kD,[s]),a=Bu(OD,[r]);return o(n)&&a(n)}return n.value>=r&&n.value<=s}li(ER,hDe,{name:FO,inputsCount:2,showOperators:!0});const A7="not_between";function dDe(n,e){return!Bu(ER,e)(n)}li(A7,dDe,{name:BO,inputsCount:2,showOperators:!0});const P7="begins_with";function fDe(n,e){let[t]=e;return Ln(n.value).toLocaleLowerCase(n.meta.locale).startsWith(Ln(t))}li(P7,fDe,{name:IO,inputsCount:1,showOperators:!0});const I7="ends_with";function gDe(n,e){let[t]=e;return Ln(n.value).toLocaleLowerCase(n.meta.locale).endsWith(Ln(t))}li(I7,gDe,{name:OO,inputsCount:1,showOperators:!0});const DD="contains";function pDe(n,e){let[t]=e;return Ln(n.value).toLocaleLowerCase(n.meta.locale).indexOf(Ln(t))>=0}li(DD,pDe,{name:kO,inputsCount:1,showOperators:!0});const O7="not_contains";function mDe(n,e){return!Bu(DD,e)(n)}li(O7,mDe,{name:DO,inputsCount:1,showOperators:!0});const k7="date_tomorrow";function bDe(n){const e=he(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(he().subtract(-1,"days").startOf("day"),"d"):!1}li(k7,bDe,{name:zO,inputsCount:0});const D7="date_today";function vDe(n){const e=he(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(he().startOf("day"),"d"):!1}li(D7,vDe,{name:jO,inputsCount:0});const N7="date_yesterday";function wDe(n){const e=he(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(he().subtract(1,"days").startOf("day"),"d"):!1}li(N7,wDe,{name:UO,inputsCount:0}),b5();function yDe(n,e){let t=n;return t===""&&(t=`(${e})`),t}const ND=new Set([1]).has(1),CDe=ND&&typeof Array.from=="function";function mw(n){let e=n;return ND&&(e=new Set(e)),function(t){let i;return ND?i=e.has(t):i=!!~e.indexOf(t),i}}function L7(n){return n??""}function LD(n){let e=n;return CDe?e=Array.from(new Set(e)):e=eP(e),e=e.sort((t,i)=>typeof t=="number"&&typeof i=="number"?t-i:t===i?0:t>i?1:-1),e}function H7(n,e,t,i){const r=[],s=n===e;let o;return s||(o=mw(e)),V(n,a=>{let l=!1;(s||o(a))&&(l=!0);const c={checked:l,value:a,visualValue:yDe(a,t)};i&&i(c),r.push(c)}),r}const Xd="by_value";function SDe(n,e){let[t]=e;return t(n.value)}li(Xd,SDe,{name:"By value",inputsCount:0,inputValuesDecorator(n){let[e]=n;return[mw(e)]},showOperators:!1});const bw={};function _De(n){if(!bw[n])throw Error(`Operation with id "${n}" does not exist.`);const e=bw[n].func;return function(t,i){return e(t,i)}}function RDe(n){return bw[n].name}function HD(n,e,t){bw[n]={name:e,func:t}}const Vu="conjunction",EDe=KO;function xDe(n,e){return n.every(t=>t.func(e))}HD(Vu,EDe,xDe);const xR="disjunction",TDe=f_;function MDe(n,e){return n.some(t=>t.func(e))}HD(xR,TDe,MDe);const $D="disjunctionWithExtraCondition",ADe=f_;function PDe(n,e){if(n.length<3)throw Error("Operation doesn't work on less then three conditions.");return n.slice(0,n.length-1).some(t=>t.func(e))&&n[n.length-1].func(e)}HD($D,ADe,PDe);const IDe="numeric",$7="text",ODe="date",F7={[IDe]:[Li,ut,gw,_R,ut,pw,RR,ut,E7,x7,T7,M7,ER,A7],[$7]:[Li,ut,gw,_R,ut,pw,RR,ut,P7,I7,ut,DD,O7],[ODe]:[Li,ut,gw,_R,ut,pw,RR,ut,kD,OD,ER,ut,k7,D7,N7]};function kDe(n){const e=[];let t=n;return F7[t]||(t=$7),V(F7[t],i=>{let r;i===ut?r={name:ut}:r=Bo(qd(i)),e.push(r)}),e}function vw(n,e,t){return(e=DDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DDe(n){var e=NDe(n,"string");return typeof e=="symbol"?e:e+""}function NDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const FD="built",BD="building",B7=["click","input","keydown","keypress","keyup","focus","blur","change"];let Qo=class KX{static get DEFAULTS(){return Bo({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}constructor(e,t){vw(this,"hot",void 0),vw(this,"eventManager",new Ys(this)),vw(this,"options",void 0),vw(this,"_element",void 0),vw(this,"buildState",void 0),this.hot=e,this.options=oi(KX.DEFAULTS,t),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName)}setValue(e){this.options.value=e,this.update()}getValue(){return this.options.value}get element(){return this.buildState===BD?this._element:this.buildState===FD?(this.update(),this._element):(this.buildState=BD,this.build(),this.buildState=FD,this._element)}isBuilt(){return this.buildState===FD}translateIfPossible(e){return typeof e=="string"&&e.startsWith(Er)?this.hot.getTranslatedPhrase(e):e}build(){const e=(t,i)=>{this.eventManager.addEventListener(t,i,r=>this.runLocalHooks(i,r,this))};if(this.buildState||(this.buildState=BD),this._element.setAttribute("data-hot-input",!0),this.options.tabIndex!==void 0&&this._element.setAttribute("tabindex",this.options.tabIndex),this.options.role!==void 0&&this._element.setAttribute("role",this.options.role),this.options.className&&ce(this._element,this.options.className),this.options.children.length)V(this.options.children,t=>this._element.appendChild(t.element));else if(this.options.wrapIt){const t=this.hot.rootDocument.createElement(this.options.tagName);t.setAttribute("data-hot-input",!0),ot(this.options,(i,r)=>{t[r]!==void 0&&r!=="className"&&r!=="tagName"&&r!=="children"&&(t[r]=this.translateIfPossible(i))}),this._element.appendChild(t),V(B7,i=>e(t,i))}else V(B7,t=>e(this._element,t))}update(){}reset(){this.options.value="",this.update()}show(){this.element.style.display=""}hide(){this.element.style.display="none"}focus(){}destroy(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}};Gt(Qo,zi);function LDe(n,e){V7(n,e),e.add(n)}function HDe(n,e,t){V7(n,e),e.set(n,t)}function V7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function TR(n,e){return n.get(VD(n,e))}function $De(n,e,t){return n.set(VD(n,e),t),t}function VD(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var _p=new WeakMap,W7=new WeakSet;class Wu extends Qo{static get DEFAULTS(){return Bo({placeholder:"",type:"text",tagName:"input",tabIndex:-1})}constructor(e,t){super(e,oi(Wu.DEFAULTS,t)),LDe(this,W7),HDe(this,_p,void 0),this.registerHooks()}registerHooks(){this.addLocalHook("keyup",e=>VD(W7,this,FDe).call(this,e))}build(){super.build();const e=this.hot.rootDocument.createElement("div");$De(_p,this,this._element.firstChild),ce(this._element,"htUIInput"),ce(e,"htUIInputIcon"),this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(TR(_p,this).type=this.options.type,TR(_p,this).placeholder=this.translateIfPossible(this.options.placeholder),TR(_p,this).value=this.translateIfPossible(this.options.value))}focus(){this.isBuilt()&&TR(_p,this).focus()}}function FDe(n){this.options.value=n.target.value}function BDe(n,e){j7(n,e),e.add(n)}function ww(n,e,t){j7(n,e),e.set(n,t)}function j7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rp(n,e,t){return n.set(yw(n,e),t),t}function Vn(n,e){return n.get(yw(n,e))}function yw(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Si=new WeakMap,MR=new WeakMap,AR=new WeakMap,WD=new WeakMap,PR=new WeakMap,IR=new WeakSet;class Cw extends Qo{static get DEFAULTS(){return Bo({className:"htUISelect",wrapIt:!1,tabIndex:-1})}constructor(e,t){super(e,oi(Cw.DEFAULTS,t)),BDe(this,IR),ww(this,Si,null),ww(this,MR,[]),ww(this,AR,void 0),ww(this,WD,void 0),ww(this,PR,void 0),this.registerHooks()}getMenu(){return Vn(Si,this)}registerHooks(){this.addLocalHook("click",()=>yw(IR,this,jDe).call(this))}setItems(e){Rp(MR,this,this.translateNames(e)),Vn(Si,this)&&Vn(Si,this).setMenuItems(Vn(MR,this))}translateNames(e){return V(e,t=>{t.name=this.translateIfPossible(t.name)}),e}build(){super.build(),Rp(Si,this,new mp(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer})),Vn(Si,this).setMenuItems(Vn(MR,this));const e=new Qo(this.hot,{className:"htUISelectCaption"}),t=new Qo(this.hot,{className:"htUISelectDropdown"});Rp(AR,this,e),Rp(WD,this,e.element),Rp(PR,this,t),this.hot.getSettings().ariaTags&&(ze(t.element,[hd()]),ze(this._element,[Oz()])),V([e,t],i=>this._element.appendChild(i.element)),Vn(Si,this).addLocalHook("select",i=>yw(IR,this,VDe).call(this,i)),Vn(Si,this).addLocalHook("afterClose",()=>yw(IR,this,WDe).call(this)),this.update()}update(){if(!this.isBuilt())return;let e;this.options.value?e=this.options.value.name:e=Vn(Si,this).hot.getTranslatedPhrase(d_),Vn(WD,this).textContent=e,super.update()}openOptions(){const e=this.element.getBoundingClientRect();Vn(Si,this)&&(Vn(Si,this).open(),Vn(Si,this).setPosition({left:this.hot.isLtr()?e.left-5:e.left-31,top:e.top-1,width:e.width,height:e.height}),Vn(Si,this).getNavigator().toFirstItem(),Vn(Si,this).getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:t=>{this.closeOptions(),this.runLocalHooks("tabKeydown",t)}},{keys:[["Control/Meta","A"]],callback:()=>!1}]))}closeOptions(){Vn(Si,this)&&Vn(Si,this).close()}focus(){this.isBuilt()&&this.element.focus()}destroy(){Vn(Si,this)&&(Vn(Si,this).destroy(),Rp(Si,this,null)),Vn(AR,this)&&Vn(AR,this).destroy(),Vn(PR,this)&&Vn(PR,this).destroy(),super.destroy()}}function VDe(n){n.name!==ut&&(this.options.value=n,this.update(),this.runLocalHooks("select",this.options.value))}function WDe(){this.runLocalHooks("afterClose")}function jDe(){this.openOptions()}function zDe(n,e){UDe(n,e),e.add(n)}function UDe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function z7(n,e,t){return(e=GDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GDe(n){var e=YDe(n,"string");return typeof e=="symbol"?e:e+""}function YDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function U7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var jD=new WeakSet;class zD extends dw{constructor(e,t){super(e,{id:t.id,stateless:!1}),zDe(this,jD),z7(this,"name",""),z7(this,"addSeparator",!1),this.name=t.name,this.addSeparator=t.addSeparator,this.elements.push(new Cw(this.hot,{menuContainer:t.menuContainer})),this.elements.push(new Wu(this.hot,{placeholder:ek})),this.elements.push(new Wu(this.hot,{placeholder:tk})),this.registerHooks()}registerHooks(){this.getSelectElement().addLocalHook("select",e=>U7(jD,this,KDe).call(this,e)).addLocalHook("afterClose",()=>this.runLocalHooks("afterClose")).addLocalHook("tabKeydown",e=>this.runLocalHooks("selectTabKeydown",e)),V(this.getInputElements(),e=>{e.addLocalHook("keydown",t=>U7(jD,this,qDe).call(this,t))})}setState(e){if(this.reset(),!e)return;const t=Bo(e.command);t.name.startsWith($n)&&(t.name=this.hot.getTranslatedPhrase(t.name)),this.getSelectElement().setValue(t),V(e.args,(i,r)=>{if(r>t.inputsCount-1)return!1;const s=this.getInputElement(r);s.setValue(i),s[t.inputsCount>r?"show":"hide"](),r||this.hot._registerTimeout(()=>s.focus(),10)})}getState(){const e=this.getSelectElement().getValue()||qd(Li),t=[];return V(this.getInputElements(),(i,r)=>{e.inputsCount>r&&t.push(i.getValue())}),{command:e,args:t}}updateState(e,t){const i=qd(e?e.name:Li);this.state.setValueAtIndex(t,{command:i,args:e?e.args:[]}),e||V(this.getInputElements(),r=>r.setValue(null))}getSelectElement(){return this.elements.filter(e=>e instanceof Cw)[0]}getInputElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.getInputElements()[e]}getInputElements(){return this.elements.filter(e=>e instanceof Wu)}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t,i,r,s,o)=>{ce(t.parentNode,"htFiltersMenuCondition"),this.addSeparator&&ce(t.parentNode,"border");const a=this.hot.rootDocument.createElement("div");return ce(a,"htFiltersMenuLabel"),a.textContent=o,t.appendChild(a),t.parentElement.hasAttribute("ghost-table")||V(this.elements,l=>t.appendChild(l.element)),t}}}reset(){const e=this.hot.getPlugin("filters").getSelectedColumn();let t=[qd(Li)];if(e!==null){const{visualIndex:i}=e;t=kDe(this.hot.getDataType(0,i,this.hot.countRows(),i))}V(this.getInputElements(),i=>i.hide()),this.getSelectElement().setItems(t),super.reset(),this.getSelectElement().setValue(t[0])}}function KDe(n){V(this.getInputElements(),(e,t)=>{e[n.inputsCount>t?"show":"hide"](),t===0&&this.hot._registerTimeout(()=>e.focus(),10)}),this.runLocalHooks("change",n)}function qDe(n){Lg(n.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),Gs(n))}function G7(n,e,t){XDe(n,e),e.set(n,t)}function XDe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Sw(n,e){return n.get(K7(n,e))}function Y7(n,e,t){return n.set(K7(n,e),t),t}function K7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ep=new WeakMap,UD=new WeakMap;class OR extends Qo{static get DEFAULTS(){return Bo({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}constructor(e,t){super(e,oi(OR.DEFAULTS,t)),G7(this,Ep,void 0),G7(this,UD,void 0)}build(){super.build();const e=this.hot.rootDocument.createElement("label");e.textContent=this.translateIfPossible(this.options.label.textContent),e.htmlFor=this.translateIfPossible(this.options.label.htmlFor),Y7(UD,this,e),Y7(Ep,this,this._element.firstChild),Sw(Ep,this).checked=this.options.checked,this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(Sw(UD,this).textContent=this.translateIfPossible(this.options.label.textContent))}isChecked(){return this.isBuilt()?Sw(Ep,this).checked:!1}setChecked(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isBuilt()&&(Sw(Ep,this).checked=e)}focus(){this.isBuilt()&&Sw(Ep,this).focus()}}function ZDe(n,e){QDe(n,e),e.add(n)}function QDe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function JDe(n,e,t){return(e=eNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eNe(n){var e=tNe(n,"string");return typeof e=="symbol"?e:e+""}function tNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nNe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const q7=0;var X7=new WeakSet;class iNe extends dw{constructor(e,t){super(e,{id:t.id,stateless:!1}),ZDe(this,X7),JDe(this,"name",""),this.name=t.name,this.buildOperatorsElement()}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t)=>(ce(t.parentNode,"htFiltersMenuOperators"),V(this.elements,i=>t.appendChild(i.element)),t)}}buildOperatorsElement(){const e=[Vu,xR];V(e,t=>{const i=new OR(this.hot,{name:"operator",label:{htmlFor:t,textContent:RDe(t)},value:t,checked:t===e[q7],id:t});i.addLocalHook("change",r=>nNe(X7,this,rNe).call(this,r)),this.elements.push(i)})}setChecked(e){if(this.elements.length<e)throw Error(Ut`Radio button with index ${e} doesn't exist.`);V(this.elements,(t,i)=>{t.setChecked(i===e)})}getActiveOperationId(){const e=this.elements.find(t=>t instanceof OR&&t.isChecked());return e?e.getValue():Vu}getState(){return this.getActiveOperationId()}setState(e){this.reset(),e&&this.getActiveOperationId()!==e&&V(this.elements,t=>{t.setChecked(t.getValue()===e)})}updateState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vu,t=arguments.length>1?arguments[1]:void 0,i=e;i===$D&&(i=xR),this.state.setValueAtIndex(t,i)}reset(){this.setChecked(q7)}}function rNe(n){this.setState(n.target.value)}function sNe(n,e,t){oNe(n,e),e.set(n,t)}function oNe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function GD(n,e){return n.get(Z7(n,e))}function aNe(n,e,t){return n.set(Z7(n,e),t),t}function Z7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var _w=new WeakMap;class Rw extends Qo{static get DEFAULTS(){return Bo({href:"#",tagName:"a",tabIndex:-1,role:"button"})}constructor(e,t){super(e,oi(Rw.DEFAULTS,t)),sNe(this,_w,void 0)}build(){super.build(),aNe(_w,this,this._element.firstChild)}update(){this.isBuilt()&&(GD(_w,this).textContent=this.translateIfPossible(this.options.textContent))}focus(){this.isBuilt()&&GD(_w,this).focus()}activate(){GD(_w,this).click()}}function lNe(n,e){Q7(n,e),e.add(n)}function xp(n,e,t){Q7(n,e),e.set(n,t)}function Q7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rt(n,e){return n.get(Tp(n,e))}function Jo(n,e,t){return n.set(Tp(n,e),t),t}function Tp(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const J7="multipleSelect.itemBox";var ea=new WeakMap,ci=new WeakMap,YD=new WeakMap,Rc=new WeakMap,ju=new WeakMap,zu=new WeakMap,Ew=new WeakSet;class xw extends Qo{static get DEFAULTS(){return Bo({className:"htUIMultipleSelect",value:[]})}constructor(e,t){super(e,oi(xw.DEFAULTS,t)),lNe(this,Ew),xp(this,ea,[]),xp(this,ci,void 0),xp(this,YD,void 0),xp(this,Rc,void 0),xp(this,ju,void 0),xp(this,zu,void 0),Jo(Rc,this,new Wu(this.hot,{placeholder:JO,className:"htUIMultipleSelectSearch"})),Jo(ju,this,new Rw(this.hot,{textContent:qO,className:"htUISelectAll"})),Jo(zu,this,new Rw(this.hot,{textContent:XO,className:"htUIClearAll"})),this.registerHooks()}getItemsBox(){return rt(ci,this)}registerHooks(){rt(Rc,this).addLocalHook("keydown",e=>Tp(Ew,this,uNe).call(this,e)),rt(Rc,this).addLocalHook("input",e=>Tp(Ew,this,cNe).call(this,e)),rt(ju,this).addLocalHook("click",e=>Tp(Ew,this,hNe).call(this,e)),rt(zu,this).addLocalHook("click",e=>Tp(Ew,this,dNe).call(this,e))}setItems(e){var t;Jo(ea,this,e),(t=rt(ci,this))===null||t===void 0||t.loadData(rt(ea,this))}setLocale(e){Jo(YD,this,e)}getLocale(){return rt(YD,this)}getItems(){return[...rt(ea,this)]}getValue(){return gNe(rt(ea,this))}getSearchInputElement(){return rt(Rc,this)}getSelectAllElement(){return rt(ju,this)}getClearAllElement(){return rt(zu,this)}isSelectedAllValues(){return rt(ea,this).length===this.getValue().length}build(){super.build();const{rootDocument:e}=this.hot,t=e.createElement("div"),i=new Qo(this.hot,{className:"htUISelectionControls",children:[rt(ju,this),rt(zu,this)]});this._element.appendChild(rt(Rc,this).element),this._element.appendChild(i.element),this._element.appendChild(t);const r=s=>{var o;if(!this._element)return;(o=rt(ci,this))===null||o===void 0||o.destroy(),ce(s,"htUIMultipleSelectHot"),Jo(ci,this,new this.hot.constructor(s,{data:rt(ea,this),columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:(c,u,h,d,f,g)=>{c.title=g.instance.getDataAtRowProp(u,g.label.property)},afterListen:()=>{this.runLocalHooks("focus",this)},beforeOnCellMouseUp:()=>{rt(ci,this).listen()},colWidths:()=>rt(ci,this).container.scrollWidth-wi(e),maxCols:1,autoWrapCol:!0,height:110,copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},layoutDirection:this.hot.isRtl()?"rtl":"ltr"})),rt(ci,this).init();const l=rt(ci,this).getShortcutManager().getContext("grid");l.removeShortcutsByKeys(["Tab"]),l.removeShortcutsByKeys(["Shift","Tab"]),l.addShortcut({keys:[["Escape"]],callback:c=>{this.runLocalHooks("keydown",c,this)},group:J7}),l.addShortcut({keys:[["Tab"],["Shift","Tab"]],callback:c=>{rt(ci,this).deselectCell(),this.runLocalHooks("keydown",c,this),this.runLocalHooks("listTabKeydown",c,this)},group:J7})};r(t),this.hot._registerTimeout(()=>r(t),100)}focus(){this.isBuilt()&&rt(ci,this).listen()}reset(){rt(Rc,this).reset(),rt(ju,this).reset(),rt(zu,this).reset()}update(){this.isBuilt()&&(rt(ci,this).loadData(fNe(rt(ea,this),this.options.value)),super.update())}destroy(){var e;(e=rt(ci,this))===null||e===void 0||e.destroy(),rt(Rc,this).destroy(),rt(zu,this).destroy(),rt(ju,this).destroy(),Jo(Rc,this,null),Jo(zu,this,null),Jo(ju,this,null),Jo(ci,this,null),Jo(ea,this,null),super.destroy()}}function cNe(n){const e=n.target.value.toLocaleLowerCase(this.getLocale());let t;e===""?t=[...rt(ea,this)]:t=rt(ea,this).filter(i=>`${i.value}`.toLocaleLowerCase(this.getLocale()).indexOf(e)>=0),rt(ci,this).loadData(t)}function uNe(n){this.runLocalHooks("keydown",n,this),CP(Lg,n.keyCode)("ARROW_DOWN")&&(n.preventDefault(),Gs(n),rt(ci,this).listen(),rt(ci,this).selectCell(0,0))}function hNe(n){const e=[];n.preventDefault(),rt(ci,this).getSourceData().forEach((t,i)=>{t.checked=!0,e.push(kI(t,i)[0])}),rt(ci,this).setSourceDataAtCell(e)}function dNe(n){const e=[];n.preventDefault(),rt(ci,this).getSourceData().forEach((t,i)=>{t.checked=!1,e.push(kI(t,i)[0])}),rt(ci,this).setSourceDataAtCell(e)}function fNe(n,e){const t=mw(e);return n.map(i=>(i.checked=t(i.value),i))}function gNe(n){const e=[];return n.forEach(t=>{t.checked&&e.push(t.value)}),e}function pNe(n,e){mNe(n,e),e.add(n)}function mNe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function bNe(n,e,t){return(e=vNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vNe(n){var e=wNe(n,"string");return typeof e=="symbol"?e:e+""}function wNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function kR(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Tw=new WeakSet;class yNe extends dw{constructor(e,t){super(e,{id:t.id,stateless:!1}),pNe(this,Tw),bNe(this,"name",""),this.name=t.name,this.elements.push(new xw(this.hot)),this.registerHooks()}registerHooks(){this.getMultipleSelectElement().addLocalHook("keydown",e=>kR(Tw,this,CNe).call(this,e)).addLocalHook("listTabKeydown",e=>this.runLocalHooks("listTabKeydown",e)),this.hot.addHook("modifyFiltersMultiSelectValue",(e,t)=>kR(Tw,this,SNe).call(this,e,t))}getElements(){const e=this.getMultipleSelectElement();return[e.getSearchInputElement(),e.getSelectAllElement(),e.getClearAllElement(),this.getMultipleSelectElement()]}setState(e){if(this.reset(),e&&e.command.key===Xd){const t=this.getMultipleSelectElement();t.setItems(e.itemsSnapshot),t.setValue(e.args[0]),t.setLocale(e.locale)}}getState(){const e=this.getMultipleSelectElement(),t=e.getItems();return{command:{key:e.isSelectedAllValues()||!t.length?Li:Xd},args:[e.getValue()],itemsSnapshot:t}}updateState(e){const t=(i,r,s,o,a)=>{const[l]=ic(r,h=>h.name===Xd),c={},u=this.hot.getTranslatedPhrase(g_);if(l){const h=o(i,a),d=pt(h,y=>y.value),f=new Map(h.map(y=>[y.value,this.hot.getCellMeta(y.meta.visualRow,y.meta.visualCol)])),g=LD(d);s&&(l.args[0]=s);const p=[],m=H7(g,l.args[0],u,y=>{y.checked&&p.push(y.value),kR(Tw,this,eG).call(this,y,f)}),v=e.editedConditionStack.column;c.locale=this.hot.getCellMeta(0,v).locale,c.args=[p],c.command=qd(Xd),c.itemsSnapshot=m}else c.args=[],c.command=qd(Li);this.state.setValueAtIndex(i,c)};t(e.editedConditionStack.column,e.editedConditionStack.conditions,e.conditionArgsChange,e.filteredRowsFactory),e.dependentConditionStacks.length&&t(e.dependentConditionStacks[0].column,e.dependentConditionStacks[0].conditions,e.conditionArgsChange,e.filteredRowsFactory,e.editedConditionStack)}getMultipleSelectElement(){return this.elements.filter(e=>e instanceof xw)[0]}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t,i,r,s,o)=>{ce(t.parentNode,"htFiltersMenuValue");const a=this.hot.rootDocument.createElement("div");return ce(a,"htFiltersMenuLabel"),a.textContent=o,t.appendChild(a),t.parentElement.hasAttribute("ghost-table")||V(this.elements,l=>t.appendChild(l.element)),t}}}reset(){const e=this.hot.getTranslatedPhrase(g_),t=this._getColumnVisibleValues(),i=t.map(l=>l.value),r=new Map(t.map(l=>[l.value,l.meta])),s=LD(i),o=H7(s,s,e,l=>{kR(Tw,this,eG).call(this,l,r)});this.getMultipleSelectElement().setItems(o),super.reset(),this.getMultipleSelectElement().setValue(s);const a=this.hot.getPlugin("filters").getSelectedColumn();a!==null&&this.getMultipleSelectElement().setLocale(this.hot.getCellMeta(0,a.visualIndex).locale)}_getColumnVisibleValues(){const e=this.hot.getPlugin("filters").getSelectedColumn();return e===null?[]:pt(this.hot.getDataAtCol(e.visualIndex),(t,i)=>({value:L7(t),meta:this.hot.getCellMeta(i,e.visualIndex)}))}}function CNe(n){Lg(n.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),Gs(n))}function eG(n,e){this.hot.hasHook("modifyFiltersMultiSelectValue")&&(n.visualValue=this.hot.runHooks("modifyFiltersMultiSelectValue",n.visualValue,e.get(n.value)))}function SNe(n,e){switch(e.type){case"numeric":return aU(n,e);default:return n}}var tG;function _Ne(n,e){RNe(n,e),e.add(n)}function RNe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ENe(n,e,t){return(e=xNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xNe(n){var e=TNe(n,"string");return typeof e=="symbol"?e:e+""}function TNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function MNe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var nG=new WeakSet;class Mw extends dw{static get BUTTON_OK(){return"ok"}static get BUTTON_CANCEL(){return"cancel"}constructor(e,t){super(e,{id:t.id,stateless:!0}),_Ne(this,nG),ENe(this,"name",""),this.name=t.name,this.elements.push(new Wu(this.hot,{type:"button",value:ZO,className:"htUIButton htUIButtonOK",identifier:Mw.BUTTON_OK})),this.elements.push(new Wu(this.hot,{type:"button",value:QO,className:"htUIButton htUIButtonCancel",identifier:Mw.BUTTON_CANCEL})),this.registerHooks()}registerHooks(){V(this.elements,e=>{e.addLocalHook("click",(t,i)=>MNe(nG,this,ANe).call(this,t,i))})}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t)=>(ce(t.parentNode,"htFiltersMenuActionBar"),V(this.elements,i=>t.appendChild(i.element)),t)}}accept(){this.runLocalHooks("accept")}cancel(){this.runLocalHooks("cancel")}}tG=Mw;function ANe(n,e){e.options.identifier===tG.BUTTON_OK?this.accept():this.cancel()}function DR(n,e,t){return(e=PNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PNe(n){var e=INe(n,"string");return typeof e=="symbol"?e:e+""}function INe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const iG="ConditionCollection.filteringStates";class KD{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;DR(this,"hot",void 0),DR(this,"isMapRegistrable",void 0),DR(this,"filteringStates",new QS),DR(this,"previousConditionStack",null),this.hot=e,this.isMapRegistrable=t,this.isMapRegistrable===!0?this.hot.columnIndexMapper.registerMap(iG,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}isEmpty(){return this.getFilteredColumns().length===0}isMatch(e,t){var i;const r=this.filteringStates.getValueAtIndex(t),s=(i=r==null?void 0:r.conditions)!==null&&i!==void 0?i:[],o=r==null?void 0:r.operation;return this.isMatchInConditions(s,e,o)}isMatchInConditions(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vu;return e.length?_De(i)(e,t):!0}addCondition(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vu,r=arguments.length>3?arguments[3]:void 0;const s=this.hot.getCellMeta(0,e).locale,o=pt(t.args,u=>typeof u=="string"?u.toLocaleLowerCase(s):u),a=t.name||t.command.key;this.previousConditionStack===null&&this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeAdd",e);const l=this.getOperation(e);if(l){if(l!==i)throw Error(Ut`The column of index ${e} has been already applied with a \`${l}\`\x20
        filter operation. Use \`removeConditions\` to clear the current conditions and then add new ones.\x20
        Mind that you cannot mix different types of operations (for instance, if you use \`conjunction\`,\x20
        use it consequently for a particular column).`)}else if(hn(bw[i]))throw new Error(Ut`Unexpected operation named \`${i}\`. Possible ones are\x20
        \`disjunction\` and \`conjunction\`.`);const c=this.getConditions(e);c.length===0?this.filteringStates.setValueAtIndex(e,{operation:i,conditions:[{name:a,args:o,func:Bu(a,o)}]},r):c.push({name:a,args:o,func:Bu(a,o)}),this.runLocalHooks("afterAdd",e)}getConditions(e){var t,i;return(t=(i=this.filteringStates.getValueAtIndex(e))===null||i===void 0?void 0:i.conditions)!==null&&t!==void 0?t:[]}getOperation(e){var t;return(t=this.filteringStates.getValueAtIndex(e))===null||t===void 0?void 0:t.operation}getFilteredColumns(){return this.filteringStates.getEntries().map(e=>{let[t]=e;return t})}getColumnStackPosition(e){return this.getFilteredColumns().indexOf(e)}exportAllConditions(){return si(this.filteringStates.getEntries(),(e,t)=>{let[i,{operation:r,conditions:s}]=t;return e.push({column:i,operation:r,conditions:pt(s,o=>{let{name:a,args:l}=o;return{name:a,args:l}})}),e},[])}importAllConditions(e){this.clean(),V(e,t=>{V(t.conditions,i=>this.addCondition(t.column,i))})}removeConditions(e){this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeRemove",e),this.filteringStates.clearValue(e),this.runLocalHooks("afterRemove",e)}clean(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}hasConditions(e,t){const i=this.getConditions(e);return t?i.some(r=>r.name===t):i.length>0}setPreviousConditionStack(e){this.previousConditionStack=e}destroy(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(iG),this.filteringStates=null,this.clearLocalHooks()}}Gt(KD,zi);function rG(n,e,t){return(e=ONe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ONe(n){var e=kNe(n,"string");return typeof e=="symbol"?e:e+""}function kNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class sG{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>[];rG(this,"conditionCollection",void 0),rG(this,"columnDataFactory",void 0),this.conditionCollection=e,this.columnDataFactory=t}filter(){let e=[];return V(this.conditionCollection.getFilteredColumns(),(t,i)=>{let r=this.columnDataFactory(t);i&&(r=this._getIntersectData(r,e)),e=this.filterByColumn(t,r)}),e}filterByColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=[];return V(t,r=>{r!==void 0&&this.conditionCollection.isMatch(r,e)&&i.push(r)}),i}_getIntersectData(e,t){const i=[];return V(t,r=>{const s=r.meta.visualRow;e[s]!==void 0&&(i[s]=e[s])}),i}}function DNe(n,e){NNe(n,e),e.add(n)}function NNe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zd(n,e,t){return(e=LNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LNe(n){var e=HNe(n,"string");return typeof e=="symbol"?e:e+""}function HNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qD(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var NR=new WeakSet;class oG{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>[];DNe(this,NR),Zd(this,"hot",void 0),Zd(this,"conditionCollection",void 0),Zd(this,"columnDataFactory",void 0),Zd(this,"changes",[]),Zd(this,"grouping",!1),Zd(this,"latestEditedColumnPosition",-1),Zd(this,"latestOrderStack",[]),this.hot=e,this.conditionCollection=t,this.columnDataFactory=i,this.conditionCollection.addLocalHook("beforeRemove",r=>qD(NR,this,$Ne).call(this,r)),this.conditionCollection.addLocalHook("afterRemove",r=>this.updateStatesAtColumn(r)),this.conditionCollection.addLocalHook("afterAdd",r=>this.updateStatesAtColumn(r)),this.conditionCollection.addLocalHook("beforeClean",()=>qD(NR,this,FNe).call(this)),this.conditionCollection.addLocalHook("afterClean",()=>qD(NR,this,BNe).call(this))}groupChanges(){this.grouping=!0}flush(){this.grouping=!1,V(this.changes,e=>{this.updateStatesAtColumn(e)}),this.changes.length=0}updateStatesAtColumn(e,t){var i=this;if(this.grouping){this.changes.indexOf(e)===-1&&this.changes.push(e);return}const r=this.conditionCollection.exportAllConditions();let s=this.conditionCollection.getColumnStackPosition(e);s===-1&&(s=this.latestEditedColumnPosition);const o=r.slice(0,s),a=r.slice(s);a.length&&a[0].column===e&&a.shift();const l=e5(function(u,h){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const f=new KD(i.hot,!1),g=[].concat(u,d);f.importAllConditions(g);const p=i.columnDataFactory(h);let m;f.isEmpty()?m=p:m=new sG(f,y=>i.columnDataFactory(y)).filter(),m=pt(m,y=>y.meta.visualRow);const v=mw(m);return f.destroy(),ic(p,y=>v(y.meta.visualRow))})(o),c=[].concat(this.conditionCollection.getConditions(e));this.runLocalHooks("update",{editedConditionStack:{column:e,conditions:c},dependentConditionStacks:a,filteredRowsFactory:l,conditionArgsChange:t})}destroy(){this.clearLocalHooks(),ot(this,(e,t)=>{this[t]=null})}}function $Ne(n){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(n)}function FNe(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}function BNe(){V(this.latestOrderStack,n=>{this.updateStatesAtColumn(n)})}Gt(oG,zi);function VNe(n){return t7({initialPage:0,size:()=>n.length,onItemSelect:(t,i)=>{const r=n[t];if(r instanceof xw)return i;if(r.element&&!pd(r.element))return!1;r.focus()}})}const Aw="filters";function WNe(n,e){let t=-1;const i=VNe(e),r=l=>()=>{n.isOpened()&&n.getKeyboardShortcutsCtrl().listen(Aw),i.setCurrentPage(e.indexOf(l))};e.forEach(l=>{l instanceof Qo&&(l.addLocalHook("click",r(l)),l.addLocalHook("focus",r(l)),l.addLocalHook("afterClose",r(l)))}),n.addLocalHook("afterSelectionChange",l=>{l.key.startsWith("filter_")||i.clear()});function s(l){const c=n.getKeyboardShortcutsCtrl(),u=l.getKeyboardShortcutsCtrl();i.clear(),u.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],forwardToContext:c.getContext(Aw),callback:()=>{l.isSubMenu()&&l.close(),c.listen(Aw)}}]),!l.isSubMenu()&&c.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:h=>{const d=n.getNavigator();d.getCurrentPage()>-1&&(t=d.getCurrentPage()),d.clear(),h.shiftKey?i.toPreviousItem():i.toNextItem()}},{keys:[["Escape"]],callback:()=>{n.close()}},{keys:[["Enter"],["Space"]],preventDefault:!1,callback:h=>{const d=e[i.getCurrentPage()];d instanceof Cw&&(d.openOptions(),h.preventDefault()),d instanceof Rw&&(d.activate(),h.preventDefault()),d instanceof Qo||h.preventDefault()}}],Aw)}n.addLocalHook("afterSubmenuOpen",s),n.addLocalHook("afterOpen",s);function o(){n.focus(),n.getKeyboardShortcutsCtrl().listen(Aw)}function a(){return t}return{...i,listen:o,getLastMenuPage:a}}function jNe(n,e){aG(n,e),e.add(n)}function zNe(n,e,t){aG(n,e),e.set(n,t)}function aG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pw(n,e,t){return(e=UNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UNe(n){var e=GNe(n,"string");return typeof e=="symbol"?e:e+""}function GNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function YNe(n,e,t){return n.set(vs(n,e),t),t}function Iw(n,e){return n.get(vs(n,e))}function vs(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const XD="filters",KNe=250,lG=XD;var Qd=new WeakMap,io=new WeakSet;class qNe extends Lt{static get PLUGIN_KEY(){return XD}static get PLUGIN_PRIORITY(){return KNe}static get PLUGIN_DEPS(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}constructor(e){super(e),jNe(this,io),Pw(this,"dropdownMenuPlugin",null),Pw(this,"conditionCollection",null),Pw(this,"conditionUpdateObserver",null),Pw(this,"components",new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]])),Pw(this,"filtersRowsMap",null),zNe(this,Qd,void 0),this.hot.addHook("afterGetColHeader",(t,i)=>vs(io,this,tLe).call(this,t,i))}isEnabled(){return!!this.hot.getSettings()[XD]}enablePlugin(){if(this.enabled)return;this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new Mv),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");const e=this.hot.getSettings().dropdownMenu,t=e&&e.uiContainer||this.hot.rootDocument.body,i=o=>(o.addLocalHook("accept",()=>vs(io,this,cG).call(this,"accept")),o.addLocalHook("cancel",()=>vs(io,this,cG).call(this,"cancel")),o.addLocalHook("change",a=>vs(io,this,eLe).call(this,o,a)),o),r=()=>`${this.hot.getTranslatedPhrase(GO)}:`,s=()=>`${this.hot.getTranslatedPhrase(YO)}:`;if(!this.components.get("filter_by_condition")){const o=new zD(this.hot,{id:"filter_by_condition",name:r,addSeparator:!1,menuContainer:t});o.addLocalHook("afterClose",()=>vs(io,this,uG).call(this)),this.components.set("filter_by_condition",i(o))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new iNe(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){const o=new zD(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:t});o.addLocalHook("afterClose",()=>vs(io,this,uG).call(this)),this.components.set("filter_by_condition2",i(o))}if(this.components.get("filter_by_value")||this.components.set("filter_by_value",i(new yNe(this.hot,{id:"filter_by_value",name:s}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",i(new Mw(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new KD(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new oG(this.hot,this.conditionCollection,o=>this.getDataMapAtColumn(o)),this.conditionUpdateObserver.addLocalHook("update",o=>vs(io,this,nLe).call(this,o))),this.components.forEach(o=>o.show()),this.addHook("afterDropdownMenuDefaultOptions",o=>vs(io,this,JNe).call(this,o)),this.addHook("afterDropdownMenuShow",()=>vs(io,this,ZNe).call(this)),this.addHook("afterDropdownMenuHide",()=>vs(io,this,QNe).call(this)),this.addHook("afterChange",o=>vs(io,this,XNe).call(this,o)),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),!Iw(Qd,this)&&this.dropdownMenuPlugin.enabled){const o=this.dropdownMenuPlugin.menu,a=[{focus:()=>{const c=o.getNavigator(),u=Iw(Qd,this).getLastMenuPage();o.focus(),u>0?c.setCurrentPage(u):c.toFirstItem()}},...Array.from(this.components).map(c=>{let[,u]=c;return u.getElements()}).flat()];YNe(Qd,this,WNe(o,a));const l=c=>{Iw(Qd,this).listen(),c.preventDefault(),Lg(c.keyCode,"TAB")&&(c.shiftKey?Iw(Qd,this).toPreviousItem():Iw(Qd,this).toNextItem())};this.components.get("filter_by_value").addLocalHook("listTabKeydown",l),this.components.get("filter_by_condition").addLocalHook("selectTabKeydown",l)}this.registerShortcuts(),super.enablePlugin()}disablePlugin(){if(this.enabled){var e;(e=this.dropdownMenuPlugin)!==null&&e!==void 0&&e.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach((t,i)=>{t.destroy(),this.components.set(i,null)}),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName)}this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Alt","A"]],stopPropagation:!0,callback:()=>{const e=this.hot.getSelected();this.clearConditions(),this.filter(),e&&this.hot.selectCells(e)},group:lG})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(lG)}addCondition(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Vu;const s=this.hot.toPhysicalColumn(e);this.conditionCollection.addCondition(s,{command:{key:t},args:i},r)}removeConditions(e){const t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}clearConditions(e){if(e===void 0)this.conditionCollection.clean();else{const t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}}filter(){const{navigableHeaders:e}=this.hot.getSettings(),t=this._createDataFilter(),i=!this.conditionCollection.isEmpty();let r=[];const s=this.conditionCollection.exportAllConditions();if(this.hot.runHooks("beforeFilter",s,this.conditionCollection.previousConditionStack)!==!1)if(i){const a=[];this.hot.batchExecution(()=>{this.filtersRowsMap.clear(),r=pt(t.filter(),c=>c.meta.visualRow);const l=mw(r);He(this.hot.countSourceRows()-1,c=>{l(c)||a.push(c)}),V(a,c=>{this.filtersRowsMap.setValueAtIndex(c,!0)})},!0),!e&&!r.length&&this.hot.deselectCell()}else this.filtersRowsMap.clear();this.hot.runHooks("afterFilter",s),this.conditionCollection.setPreviousConditionStack(null),this.hot.view.adjustElementsSize(),this.hot.render(),this.hot.selection.isSelected()&&this.hot.selectCell(e?-1:0,this.hot.getSelectedRangeLast().highlight.col)}getSelectedColumn(){var e;const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t?{visualIndex:t.col,physicalIndex:this.hot.toPhysicalColumn(t.col)}:null}getDataMapAtColumn(e){const t=this.hot.toVisualColumn(e),i=[];return V(this.hot.getSourceDataAtCol(t),(r,s)=>{var o;const{row:a,col:l,visualCol:c,visualRow:u,type:h,instance:d,dateFormat:f,locale:g}=this.hot.getCellMeta(s,t),p=(o=this.hot.getDataAtCell(this.hot.toVisualRow(s),t))!==null&&o!==void 0?o:r;i.push({meta:{row:a,col:l,visualCol:c,visualRow:u,type:h,instance:d,dateFormat:f,locale:g},value:L7(p)})}),i}updateValueComponentCondition(e){const t=this.hot.getDataAtCol(e),i=LD(t);this.conditionUpdateObserver.updateStatesAtColumn(e,i)}restoreComponents(e){var t;const i=(t=this.getSelectedColumn())===null||t===void 0?void 0:t.physicalIndex;e.forEach(r=>{r.isHidden()||r.restoreState(i)}),this.updateDependentComponentsVisibility()}getOperationBasedOnArguments(e,t,i,r){let s=e;return s===xR&&t.command.key!==Li&&i.command.key!==Li&&r.command.key!==Li?s=$D:r.command.key!==Li&&(t.command.key===Li||i.command.key===Li)&&(s=Vu),s}setListeningDropdownMenu(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}updateDependentComponentsVisibility(){const e=this.components.get("filter_by_condition"),{command:t}=e.getState(),i=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];t.showOperators?this.showComponents(...i):this.hideComponents(...i)}_createDataFilter(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.conditionCollection;return new sG(e,t=>this.getDataMapAtColumn(t))}getIndexesOfComponents(){const e=[];if(!this.dropdownMenuPlugin)return e;const t=this.dropdownMenuPlugin.menu;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return V(r,o=>{V(t.menuItems,(a,l)=>{a.key===o.getMenuItemDescriptor().key&&e.push(l)})}),e}changeComponentsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.dropdownMenuPlugin)return;const i=this.dropdownMenuPlugin.menu.hotMenu,r=i.getPlugin("hiddenRows");for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];const l=this.getIndexesOfComponents(...o);e?r.showRows(l):r.hideRows(l),i.render()}hideComponents(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changeComponentsVisibility(!1,...t)}showComponents(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changeComponentsVisibility(!0,...t)}destroy(){this.enabled&&(this.components.forEach((e,t)=>{e!==null&&(e.destroy(),this.components.set(t,null))}),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),super.destroy()}}function XNe(n){n&&V(n,e=>{const[,t]=e,i=this.hot.propToCol(t);this.conditionCollection.hasConditions(i)&&this.updateValueComponentCondition(i)})}function ZNe(){const n=this.dropdownMenuPlugin.menu;this.restoreComponents(Array.from(this.components.values())),n.updateMenuDimensions()}function QNe(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}function JNe(n){n.items.push({name:ut}),this.components.forEach(e=>{n.items.push(e.getMenuItemDescriptor())})}function cG(n){var e;if(n==="accept"){const i=this.getSelectedColumn();if(i===null){var t;(t=this.dropdownMenuPlugin)===null||t===void 0||t.close();return}const{physicalIndex:r}=i,s=this.components.get("filter_by_condition").getState(),o=this.components.get("filter_by_condition2").getState(),a=this.components.get("filter_by_value").getState(),l=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),s,o,a);this.conditionUpdateObserver.groupChanges();let c=this.conditionCollection.getColumnStackPosition(r);c===-1&&(c=void 0),this.conditionCollection.removeConditions(r),s.command.key!==Li&&(this.conditionCollection.addCondition(r,s,l,c),o.command.key!==Li&&this.conditionCollection.addCondition(r,o,l,c)),a.command.key!==Li&&this.conditionCollection.addCondition(r,a,l,c),this.conditionUpdateObserver.flush(),this.components.forEach(u=>u.saveState(r)),this.filtersRowsMap.clear(),this.filter()}(e=this.dropdownMenuPlugin)===null||e===void 0||e.close()}function eLe(n,e){this.updateDependentComponentsVisibility(),n.constructor===zD&&!e.inputsCount&&this.setListeningDropdownMenu()}function uG(){this.setListeningDropdownMenu()}function tLe(n,e){const t=this.hot.toPhysicalColumn(n);this.enabled&&this.conditionCollection.hasConditions(t)?ce(e,"htFiltersActive"):Ze(e,"htFiltersActive")}function nLe(n){var e;if(!((e=this.dropdownMenuPlugin)!==null&&e!==void 0&&e.enabled))return;const{editedConditionStack:{conditions:t,column:i}}=n,r=t.filter(o=>o.name===Xd),s=t.filter(o=>o.name!==Xd);if(r.length>=2||s.length>=3)Yt(Ut`The filter conditions have been applied properly, but couldn’t be displayed visually.\x20
        The overall amount of conditions exceed the capability of the dropdown menu.\x20
        For more details see the documentation.`);else{const o=this.conditionCollection.getOperation(i);this.components.get("filter_by_condition").updateState(s[0],i),this.components.get("filter_by_condition2").updateState(s[1],i),this.components.get("filter_operators").updateState(o,i),this.components.get("filter_by_value").updateState(n)}}const hG="internal-use-in-handsontable",ZD={licenseKey:hG,useArrayArithmetic:!0,useColumnIndex:!1,useStats:!1,evaluateNullToZero:!0,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,leapYear1900:!1,nullDate:{year:1899,month:12,day:30},nullYear:30,dateFormats:["DD/MM/YYYY","DD/MM/YY"],timeFormats:["hh:mm","hh:mm:ss.sss"],matchWholeCell:!0,useRegularExpressions:!1,useWildcards:!0,functionArgSeparator:",",thousandSeparator:"",decimalSeparator:".",language:"enGB"};function dG(n){var e;return{maxColumns:n.maxColumns,maxRows:n.maxRows,language:(e=n[ur])===null||e===void 0||(e=e.language)===null||e===void 0?void 0:e.langCode}}function fG(n){return Object.keys(n).reduce((e,t)=>(t!=="hyperformula"&&(e[t]=n[t]),e),{})}function iLe(n){var e;const t=n[ur],i=fG(t!=null&&(e=t.engine)!==null&&e!==void 0&&e.hyperformula?t.engine:{}),r=dG(n);return{...ZD,...i,...r}}function rLe(n){var e;const t=n[ur],i=fG(t!=null&&(e=t.engine)!==null&&e!==void 0&&e.hyperformula?t.engine:{}),r=dG(n);return{...i,...r}}function sLe(n,e){return Object.keys(e).some(t=>e[t]!==void 0&&e[t]!==n[t])}function LR(){const n="engine_relationship",e=Vo(ur);return e.hasItem(n)||e.register(n,new Map),e.getItem(n)}function QD(){const n="shared_engine_usage",e=Vo(ur);return e.hasItem(n)||e.register(n,new Map),e.getItem(n)}function oLe(n){const e=n.getSettings(),t=e[ur],i=t==null?void 0:t.engine;if(t===!0||hn(i))return null;if(typeof i.hyperformula=="function"||typeof i=="function"){var r;return aLe((r=i.hyperformula)!==null&&r!==void 0?r:i,e,n)}else if(typeof i=="object"&&hn(i.hyperformula)){const s=LR(),o=QD().get(i);return s.has(i)||s.set(i,[]),s.get(i).push(n),o&&o.push(n.guid),i.getConfig().licenseKey||i.updateConfig({licenseKey:hG}),(i.getConfig().leapYear1900!==ZD.leapYear1900||dS(i.getConfig().nullDate,ZD.nullDate)===!1)&&Yt(Ut`If you use HyperFormula with Handsontable, keep the default \`leapYear1900\` and \`nullDate\` 
      settings. Otherwise, HyperFormula's dates may not sync correctly with Handsontable's dates.`),i}return null}function aLe(n,e,t){const i=e[ur],r=iLe(e),s=LR(),o=QD();lLe(n,i.functions),cLe(n,i.language);const a=n.buildEmpty(r);return s.set(a,[t]),o.set(a,[t.guid]),uLe(a,i.namedExpressions),a.on("sheetAdded",()=>{a.rebuildAndRecalculate()}),a.on("sheetRemoved",()=>{a.rebuildAndRecalculate()}),a}function gG(n){var e;const t=LR(),i=t.size===0?[]:Array.from((e=t.get(n))!==null&&e!==void 0?e:[]);return new Map(i.map(r=>[r.getPlugin("formulas").sheetId,r]))}function pG(n,e){if(n){const t=LR(),i=t.get(n),r=QD(),s=r.get(n);i&&i.includes(e)&&(i.splice(i.indexOf(e),1),i.length===0&&t.delete(n)),s&&s.includes(e.guid)&&(s.splice(s.indexOf(e.guid),1),s.length===0&&(r.delete(n),n.destroy()))}}function lLe(n,e){e&&e.forEach(t=>{const{name:i,plugin:r,translations:s}=t;try{n.registerFunction(i,r,s)}catch(o){Yt(o.message)}})}function cLe(n,e){if(e){const{langCode:t}=e;try{n.registerLanguage(t,e)}catch(i){Yt(i.message)}}}function uLe(n,e){e&&(n.suspendEvaluation(),e.forEach(t=>{const{name:i,expression:r,scope:s,options:o}=t;try{n.addNamedExpression(i,r,s,o)}catch(a){Yt(a.message)}}),n.resumeEvaluation())}function hLe(n,e){return(hn(e)||!n.doesSheetExist(e))&&(e=n.addSheet(e)),e}const mG="DD/MM/YYYY";function bG(n){return typeof n=="string"&&n.charAt(0)==="'"&&n.charAt(1)==="="}function dLe(n){return bG(n)?n.substr(1):n}function fLe(n){return typeof n=="string"&&n.startsWith("=")}function JD(n,e){return typeof n=="string"&&e==="date"}function vG(n,e){return he(n,e,!0).isValid()}function wG(n,e){return he(n,e,!0).format(mG)}function gLe(n,e){return he(n,mG,!0).format(e)}function yG(n,e){const i=new Date(Date.UTC(0,0,n+-1));return he(i).format(e)}function pLe(n,e,t){const i=Array.from(Array(t).keys()).filter(s=>n.includes(s)===!1);if(e===0){var r;return(r=i[e])!==null&&r!==void 0?r:0}return i[e-1]+1}function mLe(n,e){const t=[];return n.forEach(i=>{const r={from:i,to:e};t.forEach(s=>{const o=s.from>s.to,a=s.to<=r.from;s.from>r.from&&a&&o&&(r.from+=1)}),r.from>=e&&(e+=1),t.push(r)}),t}function bLe(n){return n.forEach((e,t)=>{n.slice(t+1).forEach(r=>{const s=r.from<r.to;r.from>e.from&&s&&(r.from-=1)})}),n}function eN(n,e,t){const i=mLe(n,pLe(n,e,t));return bLe(i)}function Jd(n,e,t){vLe(n,e),e.set(n,t)}function vLe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rn(n,e){return n.get(CG(n,e))}function Uu(n,e,t){return n.set(CG(n,e),t),t}function CG(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ow=new WeakMap,Gu=new WeakMap,ws=new WeakMap,HR=new WeakMap,tN=new WeakMap,nN=new WeakMap,$R=new WeakMap;class SG{constructor(e,t,i){Jd(this,Ow,void 0),Jd(this,Gu,void 0),Jd(this,ws,void 0),Jd(this,HR,[]),Jd(this,tN,[]),Jd(this,nN,void 0),Jd(this,$R,[]),Uu(Ow,this,e),Uu(Gu,this,t),Uu(ws,this,i)}setRemovedHfIndexes(e){return Uu($R,this,e.map(t=>{const i=Rn(Gu,this).getVisualFromPhysicalIndex(t);return this.getHfIndexFromVisualIndex(i)})),Rn($R,this)}getRemovedHfIndexes(){return Rn($R,this)}getHfIndexFromVisualIndex(e){const t=Rn(Gu,this).getIndexesSequence(),i=Rn(Gu,this).getNotTrimmedIndexes();return t.indexOf(i[e])}syncMoves(e){const i=`move${rr(Rn(Ow,this))}s`;Rn(ws,this).getEngine().batch(()=>{e.forEach(r=>{const s=r.from!==r.to,o=r.from+1!==r.to;s&&o&&Rn(ws,this).getEngine()[i](Rn(ws,this).getSheetId(),r.from,1,r.to)})})}storeMovesInformation(e,t,i){i!==!1&&(Uu(tN,this,e.map(r=>this.getHfIndexFromVisualIndex(r))),Uu(nN,this,this.getHfIndexFromVisualIndex(t)))}calculateAndSyncMoves(e,t){if(Rn(ws,this).isPerformingUndoRedo()||e===!1||t===!1)return;const i=eN(Rn(tN,this),Rn(nN,this),Rn(Gu,this).getNumberOfIndexes());Rn(ws,this).getSheetId()===null?Rn(ws,this).getPostponeAction(()=>this.syncMoves(i)):this.syncMoves(i)}getIndexesChangeSyncMethod(){const e=`set${rr(Rn(Ow,this))}Order`;return t=>{if(Rn(ws,this).isPerformingUndoRedo())return;const i=Rn(Gu,this).getIndexesSequence();if(t==="update"&&i.length>0){const r=Rn(HR,this).map(l=>i.indexOf(l)),s=Rn(ws,this).getEngine().getSheetDimensions(Rn(ws,this).getSheetId());let o;Rn(Ow,this)==="row"?o=s.height:o=s.width;const a=r.length;for(let l=a;l<o;l+=1)r.push(l);Rn(ws,this).getEngine()[e](Rn(ws,this).getSheetId(),r)}Uu(HR,this,i)}}init(){Uu(HR,this,Rn(Gu,this).getIndexesSequence())}}function ef(n,e,t){wLe(n,e),e.set(n,t)}function wLe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ec(n,e){return n.get(_G(n,e))}function tf(n,e,t){return n.set(_G(n,e),t),t}function _G(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var FR=new WeakMap,BR=new WeakMap,iN=new WeakMap,rN=new WeakMap,sN=new WeakMap,oN=new WeakMap,aN=new WeakMap;class yLe{constructor(e,t,i){ef(this,FR,void 0),ef(this,BR,void 0),ef(this,iN,void 0),ef(this,rN,!1),ef(this,sN,!1),ef(this,oN,null),ef(this,aN,null),tf(FR,this,new SG("row",e,this)),tf(BR,this,new SG("column",t,this)),tf(iN,this,i)}getForAxis(e){return e==="row"?Ec(FR,this):Ec(BR,this)}setPerformUndo(e){tf(rN,this,e)}setPerformRedo(e){tf(sN,this,e)}isPerformingUndoRedo(){return Ec(rN,this)||Ec(sN,this)}getSheetId(){return Ec(aN,this)}getEngine(){return Ec(oN,this)}getPostponeAction(){return Ec(iN,this)}setupSyncEndpoint(e,t){tf(oN,this,e),tf(aN,this,t),Ec(FR,this).init(),Ec(BR,this).init()}}function CLe(n,e){RG(n,e),e.add(n)}function Mp(n,e,t){return(e=SLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SLe(n){var e=_Le(n,"string");return typeof e=="symbol"?e:e+""}function _Le(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function lN(n,e,t){RG(n,e),e.set(n,t)}function RG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yu(n,e,t){return n.set(Zt(n,e),t),t}function Ap(n,e){return n.get(Zt(n,e))}function Zt(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const ur="formulas",RLe=["maxRows","maxColumns","language"],ELe=260;Pe.getSingleton().register("afterNamedExpressionAdded"),Pe.getSingleton().register("afterNamedExpressionRemoved"),Pe.getSingleton().register("afterSheetAdded"),Pe.getSingleton().register("afterSheetRemoved"),Pe.getSingleton().register("afterSheetRenamed"),Pe.getSingleton().register("afterFormulasValuesUpdate");const Pp=n=>n==="UndoRedo.undo"||n==="UndoRedo.redo"||n==="auto";var xc=new WeakMap,cN=new WeakMap,kw=new WeakMap,sn=new WeakSet;class xLe extends Lt{constructor(){var e;super(...arguments),e=this,CLe(this,sn),lN(this,xc,!1),lN(this,cN,!1),lN(this,kw,[["valuesUpdated",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(sn,e,WLe).call(e,...i)}],["namedExpressionAdded",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(sn,e,jLe).call(e,...i)}],["namedExpressionRemoved",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(sn,e,zLe).call(e,...i)}],["sheetAdded",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(sn,e,ULe).call(e,...i)}],["sheetRenamed",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(sn,e,GLe).call(e,...i)}],["sheetRemoved",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(sn,e,YLe).call(e,...i)}]]),Mp(this,"staticRegister",Vo("formulas")),Mp(this,"engine",null),Mp(this,"sheetName",null),Mp(this,"indexSyncer",null),Mp(this,"rowAxisSyncer",null),Mp(this,"columnAxisSyncer",null)}static get PLUGIN_KEY(){return ur}static get PLUGIN_PRIORITY(){return ELe}static get SETTING_KEYS(){return[ur,...RLe]}get sheetId(){return this.sheetName===null?null:this.engine.getSheetId(this.sheetName)}isEnabled(){return!!this.hot.getSettings()[ur]}enablePlugin(){var e,t=this;if(!this.enabled){if(this.engine=(e=oLe(this.hot))!==null&&e!==void 0?e:this.engine,!this.engine){Yt("Missing the required `engine` key in the Formulas settings. Please fill it with either an engine class or an engine instance.");return}if(this.sheetName!==null&&!this.engine.doesSheetExist(this.sheetName)){const i=this.addSheet(this.sheetName,this.hot.getSourceDataArray());i!==!1&&(this.sheetName=i)}this.addHook("beforeLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,EG).call(t,...r)}),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,xG).call(t,...r)}),this.addHook("beforeUpdateData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,EG).call(t,...r)}),this.addHook("afterUpdateData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,xG).call(t,...r)}),this.addHook("modifyData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,PLe).call(t,...r)}),this.addHook("modifySourceData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,ILe).call(t,...r)}),this.addHook("beforeValidate",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,TLe).call(t,...r)}),this.addHook("afterSetSourceDataAtCell",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,OLe).call(t,...r)}),this.addHook("afterSetDataAtCell",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,TG).call(t,...r)}),this.addHook("afterSetDataAtRowProp",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,TG).call(t,...r)}),this.addHook("beforeCreateRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,kLe).call(t,...r)}),this.addHook("beforeCreateCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,DLe).call(t,...r)}),this.addHook("afterCreateRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,HLe).call(t,...r)}),this.addHook("afterCreateCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,$Le).call(t,...r)}),this.addHook("beforeRemoveRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,NLe).call(t,...r)}),this.addHook("beforeRemoveCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,LLe).call(t,...r)}),this.addHook("afterRemoveRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,FLe).call(t,...r)}),this.addHook("afterRemoveCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,BLe).call(t,...r)}),this.indexSyncer=new yLe(this.hot.rowIndexMapper,this.hot.columnIndexMapper,i=>{this.hot.addHookOnce("init",()=>{i()})}),this.rowAxisSyncer=this.indexSyncer.getForAxis("row"),this.columnAxisSyncer=this.indexSyncer.getForAxis("column"),this.hot.addHook("afterRowSequenceChange",this.rowAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("afterColumnSequenceChange",this.columnAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("beforeRowMove",(i,r,s,o)=>{this.rowAxisSyncer.storeMovesInformation(i,r,o)}),this.hot.addHook("beforeColumnMove",(i,r,s,o)=>{this.columnAxisSyncer.storeMovesInformation(i,r,o)}),this.hot.addHook("afterRowMove",(i,r,s,o,a)=>{this.rowAxisSyncer.calculateAndSyncMoves(o,a)}),this.hot.addHook("afterColumnMove",(i,r,s,o,a)=>{this.columnAxisSyncer.calculateAndSyncMoves(o,a)}),this.hot.addHook("beforeColumnFreeze",(i,r)=>{this.columnAxisSyncer.storeMovesInformation([i],this.hot.getSettings().fixedColumnsStart,r)}),this.hot.addHook("afterColumnFreeze",(i,r)=>{this.columnAxisSyncer.calculateAndSyncMoves(r,r)}),this.hot.addHook("beforeColumnUnfreeze",(i,r)=>{this.columnAxisSyncer.storeMovesInformation([i],this.hot.getSettings().fixedColumnsStart-1,r)}),this.hot.addHook("afterColumnUnfreeze",(i,r)=>{this.columnAxisSyncer.calculateAndSyncMoves(r,r)}),this.addHook("afterCellMetaReset",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,ALe).call(t,...r)}),this.addHook("beforeUndo",()=>{this.indexSyncer.setPerformUndo(!0),this.engine.undo()}),this.addHook("beforeRedo",()=>{this.indexSyncer.setPerformRedo(!0),this.engine.redo()}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformUndo(!1)}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformRedo(!1)}),this.addHook("afterDetachChild",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,VLe).call(t,...r)}),this.addHook("beforeAutofill",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(sn,t,MLe).call(t,...r)}),Ap(kw,this).forEach(i=>{let[r,s]=i;return this.engine.on(r,s)}),super.enablePlugin()}}disablePlugin(){Ap(kw,this).forEach(e=>{let[t,i]=e;return this.engine.off(t,i)}),pG(this.engine,this.hot),this.engine=null,super.disablePlugin()}updatePlugin(e){const t=rLe(this.hot.getSettings());sLe(this.engine.getConfig(),t)&&this.engine.updateConfig(t);const i=this.hot.getSettings()[ur];if(Oe(i)&&Oe(i.sheetName)&&i.sheetName!==this.sheetName&&this.switchSheet(i.sheetName),!e.data&&this.sheetName===null){const r=this.hot.getSettings()[ur].sheetName;r&&this.engine.doesSheetExist(r)?this.switchSheet(this.sheetName):this.sheetName=this.addSheet(r??void 0,this.hot.getSourceDataArray())}super.updatePlugin(e)}destroy(){Ap(kw,this).forEach(e=>{var t;let[i,r]=e;return(t=this.engine)===null||t===void 0?void 0:t.off(i,r)}),Yu(kw,this,null),pG(this.engine,this.hot),this.engine=null,super.destroy()}addSheet(e,t){if(Oe(t)&&!B8(t))return Yt("The provided data should be an array of arrays."),!1;if(e!=null&&this.engine.doesSheetExist(e))return Yt("Sheet with the provided name already exists."),!1;try{const i=this.engine.addSheet(e??void 0);return t&&this.engine.setSheetContent(this.engine.getSheetId(i),t),i}catch(i){return Yt(i.message),!1}}switchSheet(e){if(!this.engine.doesSheetExist(e)){NP(`The sheet named \`${e}\` does not exist, switch aborted.`);return}this.sheetName=e;const t=this.engine.getSheetSerialized(this.sheetId);t.length>0&&this.hot.loadData(t,`${rr(ur)}.switchSheet`)}getCellType(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.sheetId;const r=this.hot.toPhysicalRow(e),s=this.hot.toPhysicalColumn(t);return r!==null&&s!==null?this.engine.getCellType({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t)}):"EMPTY"}isFormulaCellType(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.sheetId;return this.engine.doesCellHaveFormula({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t)})}renderDependentSheets(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=new Set;e.forEach(r=>{var s;const o=r==null||(s=r.address)===null||s===void 0?void 0:s.sheet;o!==void 0&&(i.has(o)||i.add(o))}),gG(this.engine).forEach((r,s)=>{if((t||s!==this.sheetId)&&i.has(s)){var o;r.render(),(o=r.view)===null||o===void 0||o.adjustElementsSize()}})}validateDependentCells(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=s=>{var o;const{row:a,col:l,sheet:c}=(o=s==null?void 0:s.address)!==null&&o!==void 0?o:{};return Oe(c)?`${c}:${a}x${l}`:""},r=new Set(t.map(s=>i(s)));e.forEach(s=>{var o,a;const{row:l,col:c}=(o=s.address)!==null&&o!==void 0?o:{};if(Oe(l)===!1||Oe(c)===!1||l>=this.hot.countRows()||c>=this.hot.countCols())return;const u=s==null||(a=s.address)===null||a===void 0?void 0:a.sheet,h=i(s);if(u!==void 0&&!r.has(h)){const d=gG(this.engine).get(u);if(!d)return;d.validateCell(d.getDataAtCell(l,c),d.getCellMeta(l,c),()=>{})}})}syncChangeWithEngine(e,t,i){const r={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(r)){Yt(`Not possible to set cell data at ${JSON.stringify(r)}`);return}const s=this.hot.getCellMeta(e,t);return JD(i,s.type)&&(vG(i,s.dateFormat)?i=wG(i,s.dateFormat):fLe(i)===!1&&(i=`'${i}`)),this.engine.setCellContents(r,i)}}function TLe(n,e,t){const i=this.hot.propToCol(t);if(this.isFormulaCellType(e,i)){const r={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(i),sheet:this.sheetId},s=this.hot.getCellMeta(e,i);let o=this.engine.getCellValue(r);return s.type==="date"&&or(o)&&(o=yG(o,s.dateFormat)),typeof o=="object"&&o!==null?o.value:o}return n}function MLe(n,e,t){const{row:i,col:r}=e.getTopStartCorner(),{row:s,col:o}=e.getBottomEndCorner(),{row:a,col:l}=t.getTopStartCorner(),{row:c,col:u}=t.getBottomEndCorner(),h={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(i),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(r),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(s),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(o),sheet:this.sheetId}},d={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(a),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(c),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(u),sheet:this.sheetId}};if(this.engine.isItPossibleToSetCellContents(d)===!1)return!1;const f=this.engine.getFillRangeData(h,d),{row:g,col:p}=h.start,{row:m,col:v}=h.end,y=m-g+1,w=v-p+1;for(let _=0;_<f.length;_+=1)for(let R=0;R<f[_].length;R+=1){const E=f[_][R],x=g+_%y,P=p+R%w,T=this.hot.getCellMeta(x,P);JD(E,T.type)&&(E.startsWith("'")?f[_][R]=E.slice(1):this.isFormulaCellType(x,P,this.sheetId)===!1&&(f[_][R]=gLe(E,T.dateFormat)))}return f}function EG(n,e){(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"").includes(rr(ur))||Yu(cN,this,hn(this.hot.getSettings().data))}function ALe(){const n=this.hot.getSourceDataArray();let e=!1;n.forEach((t,i)=>{t.forEach((r,s)=>{const o=this.hot.getCellMeta(i,s),a=o.dateFormat;JD(r,o.type)&&(e=!0,vG(r,a)?n[i][s]=wG(r,a):this.isFormulaCellType(i,s)===!1&&(n[i][s]=`'${r}`))})}),e===!0&&(Yu(xc,this,!0),this.engine.setSheetContent(this.sheetId,n),Yu(xc,this,!1))}function xG(n,e){if(!(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"").includes(rr(ur)))if(this.sheetName=hLe(this.engine,this.hot.getSettings()[ur].sheetName),Ap(cN,this))this.switchSheet(this.sheetName);else{const i=this.hot.getSourceDataArray();if(this.engine.isItPossibleToReplaceSheetContent(this.sheetId,i)){Yu(xc,this,!0);const r=this.engine.setSheetContent(this.sheetId,i);this.indexSyncer.setupSyncEndpoint(this.engine,this.sheetId),this.renderDependentSheets(r),Yu(xc,this,!1)}}}function PLe(n,e,t,i){if(i!=="get"||Ap(xc,this)||this.sheetName===null||!this.engine.doesSheetExist(this.sheetName))return;const r=this.hot.toVisualRow(n);if(r===null||e===null)return;if(!this.isFormulaCellType(r,e)&&this.getCellType(r,e)!=="ARRAY"){bG(t.value)&&(t.value=dLe(t.value));return}const o={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e),sheet:this.sheetId};let a=this.engine.getCellValue(o),l=this.hot.getCellsMeta().find(u=>u.visualRow===r&&u.visualCol===e);l===void 0&&(l={}),l.type==="date"&&or(a)&&(a=yG(a,l.dateFormat));const c=typeof a=="object"&&a!==null?a.value:a;t.value=c}function ILe(n,e,t,i){if(i!=="get"||Ap(xc,this)||this.sheetName===null||!this.engine.doesSheetExist(this.sheetName))return;const r=this.hot.toVisualRow(n),s=this.hot.propToCol(e);if(r===null||s===null||!this.isFormulaCellType(r,s)&&this.getCellType(r,s)!=="ARRAY")return;const a=this.engine.getSheetDimensions(this.engine.getSheetId(this.sheetName));if(a.width===0&&a.height===0)return;const l={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(s),sheet:this.sheetId};t.value=this.engine.getCellSerialized(l)}function TG(n,e){if(Pp(e))return;const t=[],i=[],r=this.engine.batch(()=>{n.forEach(s=>{let[o,a,,l]=s;const c=this.hot.propToCol(a),u=this.hot.toPhysicalRow(o),h=this.hot.toPhysicalColumn(c),d={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(o),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(c),sheet:this.sheetId};u!==null&&h!==null?this.syncChangeWithEngine(o,c,l):t.push([o,c,l]),i.push({address:d})})});t.length&&this.hot.addHookOnce("afterChange",()=>{const s=this.engine.batch(()=>{t.forEach(o=>{let[a,l,c]=o;this.syncChangeWithEngine(a,l,c)})});this.renderDependentSheets(s,!0)}),this.renderDependentSheets(r),this.validateDependentCells(r,i)}function OLe(n,e){if(Pp(e))return;const t=[],i=[];n.forEach(r=>{let[s,o,,a]=r;const l=this.hot.propToCol(o);if(!or(l))return;const c={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(s),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(c)){Yt(`Not possible to set source cell data at ${JSON.stringify(c)}`);return}i.push({address:c}),t.push(...this.engine.setCellContents(c,a))}),this.renderDependentSheets(t),this.validateDependentCells(t,i)}function kLe(n,e){let t=this.rowAxisSyncer.getHfIndexFromVisualIndex(n);if(n>=this.hot.countRows()&&(t=n),this.sheetId===null||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddRows(this.sheetId,[t,e]))return!1}function DLe(n,e){let t=this.columnAxisSyncer.getHfIndexFromVisualIndex(n);if(n>=this.hot.countCols()&&(t=n),this.sheetId===null||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddColumns(this.sheetId,[t,e]))return!1}function NLe(n,e,t){return this.rowAxisSyncer.setRemovedHfIndexes(t).every(s=>this.engine.isItPossibleToRemoveRows(this.sheetId,[s,1]))===!1?!1:void 0}function LLe(n,e,t){return this.columnAxisSyncer.setRemovedHfIndexes(t).every(s=>this.engine.isItPossibleToRemoveColumns(this.sheetId,[s,1]))===!1?!1:void 0}function HLe(n,e,t){if(Pp(t))return;const i=this.engine.addRows(this.sheetId,[this.rowAxisSyncer.getHfIndexFromVisualIndex(n),e]);this.renderDependentSheets(i)}function $Le(n,e,t){if(Pp(t))return;const i=this.engine.addColumns(this.sheetId,[this.columnAxisSyncer.getHfIndexFromVisualIndex(n),e]);this.renderDependentSheets(i)}function FLe(n,e,t,i){if(Pp(i))return;const r=this.rowAxisSyncer.getRemovedHfIndexes().sort((o,a)=>a-o),s=this.engine.batch(()=>{r.forEach(o=>{this.engine.removeRows(this.sheetId,[o,1])})});this.renderDependentSheets(s)}function BLe(n,e,t,i){if(Pp(i))return;const r=this.columnAxisSyncer.getRemovedHfIndexes().sort((o,a)=>a-o),s=this.engine.batch(()=>{r.forEach(o=>{this.engine.removeColumns(this.sheetId,[o,1])})});this.renderDependentSheets(s)}function VLe(n,e,t){var i;Yu(xc,this,!0);const r=this.hot.getSourceDataArray(t,0,t+(((i=e.__children)===null||i===void 0?void 0:i.length)||0),this.hot.countSourceCols());Yu(xc,this,!1),r.forEach((s,o)=>{s.forEach((a,l)=>{this.engine.setCellContents({col:l,row:t+o,sheet:this.sheetId},[[a]])})})}function WLe(n){this.hot.runHooks("afterFormulasValuesUpdate",n)}function jLe(n,e){this.hot.runHooks("afterNamedExpressionAdded",n,e)}function zLe(n,e){this.hot.runHooks("afterNamedExpressionRemoved",n,e)}function ULe(n){this.hot.runHooks("afterSheetAdded",n)}function GLe(n,e){this.sheetName=e,this.hot.runHooks("afterSheetRenamed",n,e)}function YLe(n,e){this.hot.runHooks("afterSheetRemoved",n,e)}function KLe(n){return{key:"hidden_columns_hide",name(){const e=this.getSelectedLast();let t=0;if(Array.isArray(e)){const[,i,,r]=e;i-r!==0&&(t=1)}return this.getTranslatedPhrase(_O,t)},callback(){const{from:e,to:t}=this.getSelectedRangeLast(),i=Math.max(Math.min(e.col,t.col),0),r=Math.max(e.col,t.col),s=[];for(let l=i;l<=r;l+=1)s.push(l);n.hideColumns(s);const o=s[s.length-1],a=this.columnIndexMapper.getNearestNotHiddenIndex(o,1,!0);Number.isInteger(a)&&a>=0?this.selectColumns(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}}function qLe(n){const e=[];return{key:"hidden_columns_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(RO,t)},callback(){var t,i;if(e.length===0)return;let r=e[0],s=e[e.length-1];r=(t=this.columnIndexMapper.getNearestNotHiddenIndex(r-1,-1))!==null&&t!==void 0?t:0,s=(i=this.columnIndexMapper.getNearestNotHiddenIndex(s+1,1))!==null&&i!==void 0?i:this.countCols()-1,n.showColumns(e),this.render(),this.view.adjustElementsSize(),s-r+1===this.countCols()||this.selectColumns(r,s)},disabled:!1,hidden(){const t=pt(n.getHiddenColumns(),h=>this.toPhysicalColumn(h));if(!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())||t.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),r=i.getTopStartCorner().col,s=i.getBottomEndCorner().col,o=this.columnIndexMapper,a=o.getRenderableFromVisualIndex(r),l=o.getRenderableFromVisualIndex(s),c=o.getNotTrimmedIndexes(),u=[];if(r!==s){const h=s-r+1,d=l-a+1;if(h>d){const f=c.slice(r,s+1);u.push(...f.filter(g=>t.includes(g)))}}else if(a===0&&a<r)u.push(...c.slice(0,r));else if(a===null)u.push(...c.slice(0,this.countCols()));else{const h=this.countCols()-1,d=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(h,-1));l===d&&h>s&&u.push(...c.slice(s+1))}return V(u,h=>{e.push(this.toVisualColumn(h))}),e.length===0}}}function XLe(n,e){AG(n,e),e.add(n)}function MG(n,e,t){AG(n,e),e.set(n,t)}function AG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ys(n,e){return n.get(Ku(n,e))}function Dw(n,e,t){return n.set(Ku(n,e),t),t}function Ku(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Pe.getSingleton().register("beforeHideColumns"),Pe.getSingleton().register("afterHideColumns"),Pe.getSingleton().register("beforeUnhideColumns"),Pe.getSingleton().register("afterUnhideColumns");const uN="hiddenColumns",ZLe=310;var tl=new WeakMap,nl=new WeakMap,nf=new WeakSet;class QLe extends Lt{constructor(){super(...arguments),XLe(this,nf),MG(this,tl,{}),MG(this,nl,null)}static get PLUGIN_KEY(){return uN}static get PLUGIN_PRIORITY(){return ZLe}isEnabled(){return!!this.hot.getSettings()[uN]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[uN];st(t)&&(Dw(tl,this,t),hn(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),Dw(nl,this,new ZS),ys(nl,this).addLocalHook("init",()=>Ku(nf,this,rHe).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,ys(nl,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Ku(nf,e,iHe).call(e,...r)}),this.addHook("afterGetCellMeta",(i,r,s)=>Ku(nf,this,eHe).call(this,i,r,s)),this.addHook("modifyColWidth",(i,r)=>Ku(nf,this,JLe).call(this,i,r),2),this.addHook("afterGetColHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Ku(nf,e,nHe).call(e,...r)}),this.addHook("modifyCopyableRange",i=>Ku(nf,this,tHe).call(this,i)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),Dw(tl,this,{}),super.disablePlugin(),this.resetCellsMeta()}showColumns(e){const t=this.getHiddenColumns(),i=this.isValidConfig(e);let r=t;const s=ys(nl,this).getValues().slice(),o=e.length>0;if(i&&o){const l=e.map(c=>this.hot.toPhysicalColumn(c));V(l,c=>{s[c]=!1}),r=si(s,(c,u,h)=>(u&&c.push(this.hot.toVisualColumn(h)),c),[])}this.hot.runHooks("beforeUnhideColumns",t,r,i&&o)!==!1&&(i&&o&&ys(nl,this).setValues(s),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",t,r,i&&o,i&&r.length<t.length))}showColumn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.showColumns(t)}hideColumns(e){const t=this.getHiddenColumns(),i=this.isValidConfig(e);let r=t;i&&(r=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeHideColumns",t,r,i)!==!1&&(i&&this.hot.batchExecution(()=>{V(e,o=>{ys(nl,this).setValueAtIndex(this.hot.toPhysicalColumn(o),!0)})},!0),this.hot.runHooks("afterHideColumns",t,r,i,i&&r.length>t.length))}hideColumn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.hideColumns(t)}getHiddenColumns(){return pt(ys(nl,this).getHiddenIndexes(),e=>this.hot.toVisualColumn(e))}isHidden(e){return ys(nl,this).getValueAtIndex(this.hot.toPhysicalColumn(e))||!1}isValidConfig(e){const t=this.hot.countCols();return Array.isArray(e)&&e.length>0?e.every(i=>Number.isInteger(i)&&i>=0&&i<t):!1}resetCellsMeta(){V(this.hot.getCellsMeta(),e=>{e&&(e.skipColumnOnPaste=!1)})}destroy(){Dw(tl,this,null),Dw(nl,this,null),super.destroy()}}function JLe(n,e){if(this.isHidden(e))return 0;if(ys(tl,this).indicators&&(this.isHidden(e+1)||this.isHidden(e-1))&&typeof n=="number"&&this.hot.hasColHeaders())return n+15}function eHe(n,e,t){if(ys(tl,this).copyPasteEnabled===!1&&this.isHidden(e)&&(t.skipColumnOnPaste=!0),this.isHidden(e-1))t.className=t.className||"",t.className.indexOf("afterHiddenColumn")===-1&&(t.className+=" afterHiddenColumn");else if(t.className){const i=t.className.split(" ");if(i.length>0){const r=i.indexOf("afterHiddenColumn");r>-1&&i.splice(r,1),t.className=i.join(" ")}}}function tHe(n){if(ys(tl,this).copyPasteEnabled)return n;const e=[],t=(i,r,s,o)=>{e.push({startRow:i,endRow:r,startCol:s,endCol:o})};return V(n,i=>{let r=!0,s=0;He(i.startCol,i.endCol,o=>{this.isHidden(o)?(r||t(i.startRow,i.endRow,s,o-1),r=!0):(r&&(s=o),o===i.endCol&&t(i.startRow,i.endRow,s,o),r=!1)})}),e}function nHe(n,e){if(!ys(tl,this).indicators||n<0)return;const t=[];n>=1&&this.isHidden(n-1)&&t.push("afterHiddenColumn"),n<this.hot.countCols()-1&&this.isHidden(n+1)&&t.push("beforeHiddenColumn"),ce(e,t)}function iHe(n){n.items.push({name:ut},KLe(this),qLe(this))}function rHe(){Array.isArray(ys(tl,this).columns)&&this.hideColumns(ys(tl,this).columns)}function sHe(n){return{key:"hidden_rows_hide",name(){const e=this.getSelectedLast();let t=0;if(Array.isArray(e)){const[i,,r]=e;i-r!==0&&(t=1)}return this.getTranslatedPhrase(EO,t)},callback(){const{from:e,to:t}=this.getSelectedRangeLast(),i=Math.max(Math.min(e.row,t.row),0),r=Math.max(e.row,t.row),s=[];for(let l=i;l<=r;l+=1)s.push(l);n.hideRows(s);const o=s[s.length-1],a=this.rowIndexMapper.getNearestNotHiddenIndex(o,1,!0);Number.isInteger(a)&&a>=0?this.selectRows(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}}function oHe(n){const e=[];return{key:"hidden_rows_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(xO,t)},callback(){var t,i;if(e.length===0)return;let r=e[0],s=e[e.length-1];r=(t=this.rowIndexMapper.getNearestNotHiddenIndex(r-1,-1))!==null&&t!==void 0?t:0,s=(i=this.rowIndexMapper.getNearestNotHiddenIndex(s+1,1))!==null&&i!==void 0?i:this.countRows()-1,n.showRows(e),this.render(),this.view.adjustElementsSize(),s-r+1===this.countRows()||this.selectRows(r,s)},disabled:!1,hidden(){const t=pt(n.getHiddenRows(),h=>this.toPhysicalRow(h));if(!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())||t.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),r=i.getTopStartCorner().row,s=i.getBottomEndCorner().row,o=this.rowIndexMapper,a=o.getRenderableFromVisualIndex(r),l=o.getRenderableFromVisualIndex(s),c=o.getNotTrimmedIndexes(),u=[];if(r!==s){const h=s-r+1,d=l-a+1;if(h>d){const f=c.slice(r,s+1);u.push(...f.filter(g=>t.includes(g)))}}else if(a===0&&a<r)u.push(...c.slice(0,r));else if(a===null)u.push(...c.slice(0,this.countRows()));else{const h=this.countRows()-1,d=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(h,-1));l===d&&h>s&&u.push(...c.slice(s+1))}return V(u,h=>{e.push(this.toVisualRow(h))}),e.length===0}}}function aHe(n,e){IG(n,e),e.add(n)}function PG(n,e,t){IG(n,e),e.set(n,t)}function IG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ro(n,e){return n.get(qu(n,e))}function Nw(n,e,t){return n.set(qu(n,e),t),t}function qu(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Pe.getSingleton().register("beforeHideRows"),Pe.getSingleton().register("afterHideRows"),Pe.getSingleton().register("beforeUnhideRows"),Pe.getSingleton().register("afterUnhideRows");const hN="hiddenRows",lHe=320;var Tc=new WeakMap,il=new WeakMap,rf=new WeakSet;class cHe extends Lt{constructor(){super(...arguments),aHe(this,rf),PG(this,Tc,{}),PG(this,il,null)}static get PLUGIN_KEY(){return hN}static get PLUGIN_PRIORITY(){return lHe}isEnabled(){return!!this.hot.getSettings()[hN]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[hN];st(t)&&(Nw(Tc,this,t),hn(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),Nw(il,this,new ZS),ro(il,this).addLocalHook("init",()=>qu(rf,this,pHe).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,ro(il,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return qu(rf,e,gHe).call(e,...r)}),this.addHook("afterGetCellMeta",(i,r,s)=>qu(rf,this,hHe).call(this,i,r,s)),this.addHook("modifyRowHeight",(i,r)=>qu(rf,this,uHe).call(this,i,r)),this.addHook("afterGetRowHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return qu(rf,e,fHe).call(e,...r)}),this.addHook("modifyCopyableRange",i=>qu(rf,this,dHe).call(this,i)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),Nw(Tc,this,{}),super.disablePlugin(),this.resetCellsMeta()}showRows(e){const t=this.getHiddenRows(),i=this.isValidConfig(e);let r=t;const s=ro(il,this).getValues().slice(),o=e.length>0;if(i&&o){const l=e.map(c=>this.hot.toPhysicalRow(c));V(l,c=>{s[c]=!1}),r=si(s,(c,u,h)=>(u&&c.push(this.hot.toVisualRow(h)),c),[])}this.hot.runHooks("beforeUnhideRows",t,r,i&&o)!==!1&&(i&&o&&ro(il,this).setValues(s),this.hot.runHooks("afterUnhideRows",t,r,i&&o,i&&r.length<t.length))}showRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.showRows(t)}hideRows(e){const t=this.getHiddenRows(),i=this.isValidConfig(e);let r=t;i&&(r=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeHideRows",t,r,i)!==!1&&(i&&this.hot.batchExecution(()=>{V(e,o=>{ro(il,this).setValueAtIndex(this.hot.toPhysicalRow(o),!0)})},!0),this.hot.runHooks("afterHideRows",t,r,i,i&&r.length>t.length))}hideRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.hideRows(t)}getHiddenRows(){return pt(ro(il,this).getHiddenIndexes(),e=>this.hot.toVisualRow(e))}isHidden(e){return ro(il,this).getValueAtIndex(this.hot.toPhysicalRow(e))||!1}isValidConfig(e){const t=this.hot.countRows();return Array.isArray(e)&&e.length>0?e.every(i=>Number.isInteger(i)&&i>=0&&i<t):!1}resetCellsMeta(){V(this.hot.getCellsMeta(),e=>{e&&(e.skipRowOnPaste=!1)})}destroy(){Nw(Tc,this,null),Nw(il,this,null),super.destroy()}}function uHe(n,e){return this.isHidden(e)?0:n}function hHe(n,e,t){if(ro(Tc,this).copyPasteEnabled===!1&&this.isHidden(n)&&(t.skipRowOnPaste=!0),this.isHidden(n-1))t.className=t.className||"",t.className.indexOf("afterHiddenRow")===-1&&(t.className+=" afterHiddenRow");else if(t.className){const i=t.className.split(" ");if(i.length>0){const r=i.indexOf("afterHiddenRow");r>-1&&i.splice(r,1),t.className=i.join(" ")}}}function dHe(n){if(ro(Tc,this).copyPasteEnabled)return n;const e=[],t=(i,r,s,o)=>{e.push({startRow:i,endRow:r,startCol:s,endCol:o})};return V(n,i=>{let r=!0,s=0;He(i.startRow,i.endRow,o=>{this.isHidden(o)?(r||t(s,o-1,i.startCol,i.endCol),r=!0):(r&&(s=o),o===i.endRow&&t(s,o,i.startCol,i.endCol),r=!1)})}),e}function fHe(n,e){if(!ro(Tc,this).indicators||n<0)return;const t=[];n>=1&&this.isHidden(n-1)&&t.push("afterHiddenRow"),n<this.hot.countRows()-1&&this.isHidden(n+1)&&t.push("beforeHiddenRow"),ce(e,t)}function gHe(n){n.items.push({name:ut},sHe(this),oHe(this))}function pHe(){Array.isArray(ro(Tc,this).rows)&&this.hideRows(ro(Tc,this).rows)}function mHe(n){return{key:"freeze_column",name(){return this.getTranslatedPhrase(oO)},callback(e,t){const[{start:{col:i}}]=t;n.freezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const e=this.getSelectedRange();let t=!1;return(e===void 0||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col<=this.getSettings().fixedColumnsStart-1)&&(t=!0),t}}}function bHe(n){return{key:"unfreeze_column",name(){return this.getTranslatedPhrase(aO)},callback(e,t){const[{start:{col:i}}]=t;n.unfreezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const e=this.getSelectedRange();let t=!1;return(e===void 0||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col>=this.getSettings().fixedColumnsStart)&&(t=!0),t}}}function vHe(n,e){OG(n,e),e.add(n)}function wHe(n,e,t){OG(n,e),e.set(n,t)}function OG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dN(n,e){return n.get(VR(n,e))}function fN(n,e,t){return n.set(VR(n,e),t),t}function VR(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Pe.getSingleton().register("beforeColumnFreeze"),Pe.getSingleton().register("afterColumnFreeze"),Pe.getSingleton().register("beforeColumnUnfreeze"),Pe.getSingleton().register("afterColumnUnfreeze");const kG="manualColumnFreeze",yHe=110;var sf=new WeakMap,gN=new WeakSet;class CHe extends Lt{constructor(){super(...arguments),vHe(this,gN),wHe(this,sf,!1)}static get PLUGIN_KEY(){return kG}static get PLUGIN_PRIORITY(){return yHe}isEnabled(){return!!this.hot.getSettings()[kG]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",e=>VR(gN,this,SHe).call(this,e)),this.addHook("beforeColumnMove",(e,t)=>VR(gN,this,_He).call(this,e,t)),super.enablePlugin())}disablePlugin(){fN(sf,this,!1),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}freezeColumn(e){const t=this.hot.getSettings(),i=t.fixedColumnsStart<this.hot.countCols()&&e>t.fixedColumnsStart-1;dN(sf,this)||fN(sf,this,!0),this.hot.runHooks("beforeColumnFreeze",e,i)!==!1&&(i&&(this.hot.columnIndexMapper.moveIndexes(e,t.fixedColumnsStart),t._fixedColumnsStart+=1),this.hot.runHooks("afterColumnFreeze",e,i))}unfreezeColumn(e){const t=this.hot.getSettings(),i=t.fixedColumnsStart>0&&e<=t.fixedColumnsStart-1;dN(sf,this)||fN(sf,this,!0),this.hot.runHooks("beforeColumnUnfreeze",e,i)!==!1&&(i&&(t._fixedColumnsStart-=1,this.hot.columnIndexMapper.moveIndexes(e,t.fixedColumnsStart)),this.hot.runHooks("afterColumnUnfreeze",e,i))}}function SHe(n){n.items.push({name:"---------"},mHe(this),bHe(this))}function _He(n,e){if(dN(sf,this)){const t=this.hot.getSettings().fixedColumnsStart;if(e<t||n.some(i=>i<t))return!1}}function WR(n,e,t){return(e=RHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RHe(n){var e=EHe(n,"string");return typeof e=="symbol"?e:e+""}function EHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const pN=0,DG=1,NG=2,Ip="px";let LG=class{constructor(e){WR(this,"hot",void 0),WR(this,"_element",null),WR(this,"state",pN),WR(this,"inlineProperty",void 0),this.hot=e,this.inlineProperty=e.isRtl()?"right":"left"}appendTo(e){e.appendChild(this._element),this.state=NG}build(){this.state===pN&&(this._element=this.hot.rootDocument.createElement("div"),this.state=DG)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=pN}isAppended(){return this.state===NG}isBuilt(){return this.state>=DG}setPosition(e,t){or(e)&&(this._element.style.top=e+Ip),or(t)&&(this._element.style[this.inlineProperty]=t+Ip)}getPosition(){const e=this._element.style;return{top:e.top?parseInt(e.top,10):0,start:e[this.inlineProperty]?parseInt(e[this.inlineProperty],10):0}}setSize(e,t){or(e)&&(this._element.style.width=e+Ip),or(t)&&(this._element.style.height=t+Ip)}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(e,t){or(e)&&(this._element.style.marginTop=e+Ip),or(t)&&(this._element.style[`margin${rr(this.inlineProperty)}`]=t+Ip)}getOffset(){const e=this._element.style,t=`margin${rr(this.inlineProperty)}`;return{top:e.marginTop?parseInt(e.marginTop,10):0,start:e[t]?parseInt(e[t],10):0}}};const xHe="ht__manualColumnMove--backlight";let THe=class extends LG{build(){super.build(),ce(this._element,xHe)}};const MHe="ht__manualColumnMove--guideline";let AHe=class extends LG{build(){super.build(),ce(this._element,MHe)}};function PHe(n,e){HG(n,e),e.add(n)}function ta(n,e,t){HG(n,e),e.set(n,t)}function HG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qr(n,e,t){return n.set(Xu(n,e),t),t}function Ne(n,e){return n.get(Xu(n,e))}function Xu(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Pe.getSingleton().register("beforeColumnMove"),Pe.getSingleton().register("afterColumnMove");const mN="manualColumnMove",IHe=120,$G="ht__manualColumnMove",jR="show-ui",bN="on-moving--columns",vN="after-selection--columns";var Mr=new WeakMap,Zu=new WeakMap,Mc=new WeakMap,zR=new WeakMap,Qu=new WeakMap,Ar=new WeakMap,UR=new WeakMap,so=new WeakMap,Op=new WeakMap,GR=new WeakMap,Lw=new WeakMap,of=new WeakSet;class OHe extends Lt{constructor(){super(...arguments),PHe(this,of),ta(this,Mr,new THe(this.hot)),ta(this,Zu,new AHe(this.hot)),ta(this,Mc,[]),ta(this,zR,0),ta(this,Qu,!1),ta(this,Ar,{}),ta(this,UR,void 0),ta(this,so,void 0),ta(this,Op,void 0),ta(this,GR,void 0),ta(this,Lw,void 0)}static get PLUGIN_KEY(){return mN}static get PLUGIN_PRIORITY(){return IHe}isEnabled(){return!!this.hot.getSettings()[mN]}enablePlugin(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Xu(of,e,kHe).call(e,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Xu(of,e,NHe).call(e,...i)}),this.addHook("afterScrollVertically",()=>Xu(of,this,HHe).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Xu(of,e,$He).call(e,...i)}),this.buildPluginUI(),this.registerEvents(),ce(this.hot.rootElement,$G),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){Ze(this.hot.rootElement,$G),this.unregisterEvents(),Ne(Mr,this).destroy(),Ne(Zu,this).destroy(),super.disablePlugin()}moveColumn(e,t){return this.moveColumns([e],t)}moveColumns(e,t){const i=Ne(UR,this),r=this.isMovePossible(e,t),s=this.hot.runHooks("beforeColumnMove",e,t,i,r);if(qr(UR,this,void 0),s===!1)return;r&&this.hot.columnIndexMapper.moveIndexes(e,t);const o=r&&this.isColumnOrderChanged(e,t);return this.hot.runHooks("afterColumnMove",e,t,i,r,o),o}dragColumn(e,t){return this.dragColumns([e],t)}dragColumns(e,t){const i=this.countFinalIndex(e,t);return qr(UR,this,t),this.moveColumns(e,i)}isMovePossible(e,t){const i=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),r=e.length+t>i,s=t<0,o=e.some(l=>l<0),a=e.some(l=>l>=i);return!(r||s||o||a)}isColumnOrderChanged(e,t){return e.some((i,r)=>i-r!==t)}countFinalIndex(e,t){const i=si(e,(r,s)=>(s<t&&(r+=1),r),0);return t-i}getColumnsWidth(e,t){const i=this.hot.columnIndexMapper;let r=0;for(let s=e;s<=t;s+=1){const o=i.getRenderableFromVisualIndex(s);s<0?r+=this.hot.view._wt.wtViewport.getRowHeaderWidth()||0:o!==null&&(r+=this.hot.view._wt.wtTable.getStretchedColumnWidth(o)||0)}return r}moveBySettingsOrLoad(){const e=this.hot.getSettings()[mN];if(Array.isArray(e))this.moveColumns(e,0);else if(e!==void 0){const t=this.persistentStateLoad();t.length&&this.moveColumns(t,0)}}isFixedColumnsStart(e){return e<this.hot.getSettings().fixedColumnsStart}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}persistentStateLoad(){const e={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",e),e.value?e.value:[]}prepareColumnsToMoving(e,t){const i=[];return He(e,t,r=>{i.push(r)}),i}refreshPositions(){const e=this.hot.view.getFirstFullyVisibleColumn();this.isFixedColumnsStart(Ne(so,this))&&e>0&&this.hot.scrollViewportTo({col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(e-1,-1)});const t=this.hot.view._wt.wtTable,i=this.hot.view._wt.wtOverlays.scrollableElement,r=typeof i.scrollX=="number"?i.scrollX:i.scrollLeft;let s=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,Ne(so,this)-1);const o=t.hider.offsetWidth,a=t.TBODY.offsetLeft,l=Ne(Mr,this).getOffset().start,c=Ne(Mr,this).getSize().width;let u=0,h=0;if(this.hot.isRtl()){const g=this.hot.rootWindow,p=dn(this.hot.rootElement),m=g.innerWidth-Ne(Op,this)-p;h=g.innerWidth-Ne(Ar,this).eventPageX-m-(i.scrollX===void 0?r:0)}else h=Ne(Ar,this).eventPageX-(Ne(Op,this)-(i.scrollX===void 0?r:0));if(Ne(GR,this)&&(u=this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsStart(Ne(so,this))&&(s+=r),s+=u,Ne(so,this)<0)Ne(Lw,this)>0?Ne(Ar,this).col=0:Ne(Ar,this).col=e>0?e-1:e;else if(Ne(Ar,this).TD.offsetWidth/2+s<=h){const g=Ne(so,this)>=Ne(zR,this)?Ne(zR,this)-1:Ne(so,this);Ne(Ar,this).col=g+1,s+=Ne(Ar,this).TD.offsetWidth}else Ne(Ar,this).col=Ne(so,this);let d=h,f=s;h+c+l>=o?d=o-c-l:h+l<a+u&&(d=a+u+Math.abs(l)),s>=o-1?f=o-1:f===0?f=1:i.scrollX!==void 0&&Ne(so,this)<Ne(Lw,this)&&(f-=Ne(Op,this)<=i.scrollX?Ne(Op,this):0),Ne(Mr,this).setPosition(null,d),Ne(Zu,this).setPosition(null,f)}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mousemove",t=>Xu(of,this,DHe).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>Xu(of,this,LHe).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){Ne(Mr,this).build(),Ne(Zu,this).build()}destroy(){Ne(Mr,this).destroy(),Ne(Zu,this).destroy(),super.destroy()}}function kHe(n,e,t,i){const r=this.hot.view._wt.wtTable,s=this.hot.selection.isSelectedByColumnHeader(),o=this.hot.getSelectedRangeLast(),a=Ue(n.target,"sortAction");if(!o||!s||Ne(Qu,this)||n.button!==0||a){qr(Qu,this,!1),Ne(Mc,this).length=0,Ze(this.hot.rootElement,[bN,jR]);return}const l=Ne(Zu,this).isBuilt()&&!Ne(Zu,this).isAppended(),c=Ne(Mr,this).isBuilt()&&!Ne(Mr,this).isAppended();l&&c&&(Ne(Zu,this).appendTo(r.hider),Ne(Mr,this).appendTo(r.hider));const{from:u,to:h}=o,d=Math.min(u.col,h.col),f=Math.max(u.col,h.col);if(e.row<0&&e.col>=d&&e.col<=f){i.column=!0,qr(Qu,this,!0);const g=t.firstChild?x5(n,t.firstChild).x:n.offsetX;Ne(Ar,this).eventPageX=n.pageX,qr(so,this,e.col),Ne(Ar,this).TD=t,Ne(Ar,this).col=e.col,qr(Mc,this,this.prepareColumnsToMoving(d,f)),qr(GR,this,!!this.hot.getSettings().rowHeaders),qr(zR,this,this.hot.countCols()),qr(Lw,this,this.hot.getSettings().fixedColumnsStart),qr(Op,this,vi(this.hot.rootElement).left);const p=Ne(GR,this)?-1:0,m=r.holder.scrollTop+r.getColumnHeaderHeight(0)+1,v=e.col<Ne(Lw,this),y=this.hot.view._wt.wtOverlays.inlineStartOverlay.getOverlayOffset(),w=Math.abs(g-(this.hot.isRtl()?t.offsetWidth:0)),_=this.getColumnsWidth(d,e.col-1)+w,R=this.getColumnsWidth(p,d-1)+(v?y:0)+_;Ne(Mr,this).setPosition(m,R),Ne(Mr,this).setSize(this.getColumnsWidth(d,f),r.hider.offsetHeight-m),Ne(Mr,this).setOffset(null,-_),ce(this.hot.rootElement,bN)}else Ze(this.hot.rootElement,vN),qr(Qu,this,!1),Ne(Mc,this).length=0}function DHe(n){Ne(Qu,this)&&(Ne(Ar,this).eventPageX=n.pageX,this.refreshPositions())}function NHe(n,e,t,i){!this.hot.getSelectedRangeLast()||!Ne(Qu,this)||(Ne(Mc,this).indexOf(e.col)>-1?Ze(this.hot.rootElement,jR):ce(this.hot.rootElement,jR),i.row=!0,i.column=!0,i.cell=!0,qr(so,this,e.col),Ne(Ar,this).TD=t)}function LHe(){const n=Ne(Ar,this).col,e=Ne(Mc,this).length;if(qr(so,this,void 0),qr(Qu,this,!1),Ze(this.hot.rootElement,[bN,jR,vN]),this.hot.selection.isSelectedByColumnHeader()&&ce(this.hot.rootElement,vN),e<1||n===void 0)return;const t=Ne(Mc,this)[0],i=this.hot.toPhysicalColumn(t),r=this.dragColumns(Ne(Mc,this),n);if(Ne(Mc,this).length=0,r===!0){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const s=this.hot.toVisualColumn(i),o=s+e-1;this.hot.selectColumns(s,o)}}function HHe(){const n=this.hot.view._wt.wtTable,e=n.getColumnHeaderHeight(0)+1,t=n.holder.scrollTop,i=e+t;Ne(Mr,this).setPosition(i),Ne(Mr,this).setSize(null,n.hider.offsetHeight-i)}function $He(){this.moveBySettingsOrLoad()}function FHe(n,e){FG(n,e),e.add(n)}function hr(n,e,t){FG(n,e),e.set(n,t)}function FG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jn(n,e,t){return n.set(na(n,e),t),t}function Se(n,e){return n.get(na(n,e))}function na(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const YR="manualColumnResize",BHe=130,BG="manualColumnWidths";var Ac=new WeakMap,KR=new WeakMap,Cs=new WeakMap,qR=new WeakMap,rl=new WeakMap,VHe=new WeakMap,kp=new WeakMap,XR=new WeakMap,Xr=new WeakMap,Pc=new WeakMap,af=new WeakMap,ZR=new WeakMap,Hw=new WeakMap,$w=new WeakMap,Ss=new WeakMap,Fw=new WeakMap,sl=new WeakSet;class WHe extends Lt{static get PLUGIN_KEY(){return YR}static get PLUGIN_PRIORITY(){return BHe}constructor(e){super(e),FHe(this,sl),hr(this,Ac,null),hr(this,KR,null),hr(this,Cs,[]),hr(this,qR,null),hr(this,rl,null),hr(this,VHe,null),hr(this,kp,null),hr(this,XR,null),hr(this,Xr,this.hot.rootDocument.createElement("DIV")),hr(this,Pc,this.hot.rootDocument.createElement("DIV")),hr(this,af,null),hr(this,ZR,!1),hr(this,Hw,0),hr(this,$w,null),hr(this,Ss,void 0),hr(this,Fw,void 0),ce(Se(Xr,this),"manualColumnResizer"),ce(Se(Pc,this),"manualColumnResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[YR]}enablePlugin(){this.enabled||(Jn(Ss,this,new Pu),Se(Ss,this).addLocalHook("init",()=>na(sl,this,jHe).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,Se(Ss,this)),this.addHook("modifyColWidth",(e,t)=>na(sl,this,qHe).call(this,e,t),1),this.addHook("beforeStretchingColumnWidth",(e,t)=>na(sl,this,XHe).call(this,e,t)),this.addHook("beforeColumnResize",(e,t,i)=>na(sl,this,ZHe).call(this,e,t,i)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Jn(Fw,this,Se(Ss,this).getValues()),this.hot.columnIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualColumnWidths(){this.hot.runHooks("persistentStateSave",BG,Se(Ss,this).getValues())}loadManualColumnWidths(){const e={};return this.hot.runHooks("persistentStateLoad",BG,e),e.value}setManualSize(e,t){const i=Math.max(t,20),r=this.hot.toPhysicalColumn(e);return Se(Ss,this).setValueAtIndex(r,i),i}clearManualSize(e){const t=this.hot.toPhysicalColumn(e);Se(Ss,this).setValueAtIndex(t,null)}setupHandlePosition(e){if(!e.parentNode)return;Jn(Ac,this,e);const{_wt:t}=this.hot.view,i=t.wtTable.getCoords(Se(Ac,this)),r=i.col;if(r<0)return;const s=Zn(Se(Ac,this)),o=Se(Ac,this).getBoundingClientRect(),a=r<t.getSetting("fixedColumnsStart");let l;a&&(l=t.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(Se(Ac,this),i.row,i.col)),l||(l=t.wtOverlays.topOverlay.getRelativeCellPosition(Se(Ac,this),i.row,i.col)),Jn(KR,this,this.hot.columnIndexMapper.getVisualFromRenderableIndex(r)),Jn(Cs,this,[]);const c=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&c){const u=this.hot.getSelectedRange();V(u,h=>{const d=h.getTopStartCorner().col,f=h.getBottomEndCorner().col;He(d,f,g=>{Se(Cs,this).includes(g)||Se(Cs,this).push(g)})})}Se(Cs,this).includes(Se(KR,this))||Jn(Cs,this,[Se(KR,this)]),Jn(XR,this,l.start-6),Jn(kp,this,parseInt(o.width,10)),Se(Xr,this).style.top=`${l.top}px`,Se(Xr,this).style[this.inlineDir]=`${Se(XR,this)+Se(kp,this)}px`,Se(Xr,this).style.height=`${s}px`,this.hot.rootElement.appendChild(Se(Xr,this))}refreshHandlePosition(){Se(Xr,this).style[this.inlineDir]=`${Se(XR,this)+Se(qR,this)}px`}setupGuidePosition(){const e=parseInt(Zn(Se(Xr,this)),10),t=parseInt(Se(Xr,this).style.top,10)+e,i=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);ce(Se(Xr,this),"active"),ce(Se(Pc,this),"active"),Se(Pc,this).style.top=`${t}px`,this.refreshGuidePosition(),Se(Pc,this).style.height=`${i-e}px`,this.hot.rootElement.appendChild(Se(Pc,this))}refreshGuidePosition(){Se(Pc,this).style[this.inlineDir]=Se(Xr,this).style[this.inlineDir]}hideHandleAndGuide(){Ze(Se(Xr,this),"active"),Ze(Se(Pc,this),"active")}checkIfColumnHeader(e){const t=wu(e,["THEAD"],this.hot.rootElement),{topOverlay:i,topInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.THEAD,r.clone.wtTable.THEAD].includes(t)}getClosestTHParent(e){return e.tagName!=="TABLE"?e.tagName==="TH"?e:this.getClosestTHParent(e.parentNode):null}afterMouseDownTimeout(){const e=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},t=(i,r)=>{const s=this.hot.runHooks("beforeColumnResize",Se(rl,this),i,!0);s!==void 0&&Jn(rl,this,s),this.hot.getSettings().stretchH==="all"?this.clearManualSize(i):this.setManualSize(i,Se(rl,this)),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",Se(rl,this),i,!0),r&&e()};Se(Hw,this)>=2&&(Se(Cs,this).length>1?(V(Se(Cs,this),r=>{t(r)}),e()):V(Se(Cs,this),r=>{t(r,!0)})),Jn(Hw,this,0),Jn($w,this,null)}bindEvents(){const{rootWindow:e,rootElement:t}=this.hot;this.eventManager.addEventListener(t,"mouseover",i=>na(sl,this,zHe).call(this,i)),this.eventManager.addEventListener(t,"mousedown",i=>na(sl,this,UHe).call(this,i)),this.eventManager.addEventListener(e,"mousemove",i=>na(sl,this,GHe).call(this,i)),this.eventManager.addEventListener(e,"mouseup",()=>na(sl,this,YHe).call(this)),this.eventManager.addEventListener(Se(Xr,this),"contextmenu",()=>na(sl,this,KHe).call(this))}destroy(){super.destroy()}}function jHe(){const n=this.hot.getSettings()[YR],e=this.loadManualColumnWidths();typeof e<"u"?this.hot.batchExecution(()=>{e.forEach((t,i)=>{Se(Ss,this).setValueAtIndex(i,t)})},!0):Array.isArray(n)?(this.hot.batchExecution(()=>{n.forEach((t,i)=>{Se(Ss,this).setValueAtIndex(i,t)})},!0),Jn(Fw,this,n)):n===!0&&Array.isArray(Se(Fw,this))&&this.hot.batchExecution(()=>{Se(Fw,this).forEach((t,i)=>{Se(Ss,this).setValueAtIndex(i,t)})},!0)}function zHe(n){if(!vP(n.target)&&Se(ZR,this)!==!0&&this.checkIfColumnHeader(n.target)){const e=this.getClosestTHParent(n.target);if(!e)return;const t=e.getAttribute("colspan");e&&(t===null||t==="1")&&(Se(af,this)||this.setupHandlePosition(e))}}function UHe(n){n.target.parentNode===this.hot.rootElement&&Ue(n.target,"manualColumnResizer")&&(this.setupHandlePosition(Se(Ac,this)),this.setupGuidePosition(),Jn(af,this,!0),Se($w,this)===null&&(Jn($w,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(Se($w,this))),Jn(Hw,this,Se(Hw,this)+1),this.startX=n.pageX,Jn(rl,this,Se(kp,this)))}function GHe(n){if(Se(af,this)){const e=(n.pageX-this.startX)*this.hot.getDirectionFactor();Jn(qR,this,Se(kp,this)+e),V(Se(Cs,this),t=>{Jn(rl,this,this.setManualSize(t,Se(qR,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition()}}function YHe(){const n=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(t,i)=>{this.hot.runHooks("beforeColumnResize",Se(rl,this),t,!1),i&&n(),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",Se(rl,this),t,!1)};Se(af,this)&&(this.hideHandleAndGuide(),Jn(af,this,!1),Se(rl,this)!==Se(kp,this)&&(Se(Cs,this).length>1?(V(Se(Cs,this),i=>{e(i)}),n()):V(Se(Cs,this),i=>{e(i,!0)})),this.setupHandlePosition(Se(Ac,this)))}function KHe(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(Se(Xr,this)),this.hot.rootElement.removeChild(Se(Pc,this)),Jn(af,this,!1),Jn(ZR,this,!0),this.hot._registerImmediate(()=>{Jn(ZR,this,!1)})}function qHe(n,e){let t=n;if(this.enabled){const i=this.hot.toPhysicalColumn(e),r=Se(Ss,this).getValueAtIndex(i);this.hot.getSettings()[YR]&&r&&(t=r)}return t}function XHe(n,e){let t=Se(Ss,this).getValueAtIndex(e);return t===null&&(t=n),t}function ZHe(){this.hot.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked()}function wN(n,e,t){return(e=QHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QHe(n){var e=JHe(n,"string");return typeof e=="symbol"?e:e+""}function JHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const yN=0,VG=1,WG=2,Dp="px";let jG=class{constructor(e){wN(this,"hot",void 0),wN(this,"_element",null),wN(this,"state",yN),this.hot=e}appendTo(e){e.appendChild(this._element),this.state=WG}build(){this.state===yN&&(this._element=this.hot.rootDocument.createElement("div"),this.state=VG)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=yN}isAppended(){return this.state===WG}isBuilt(){return this.state>=VG}setPosition(e,t){e!==void 0&&(this._element.style.top=e+Dp),t!==void 0&&(this._element.style.left=t+Dp)}getPosition(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}setSize(e,t){e&&(this._element.style.width=e+Dp),t&&(this._element.style.height=t+Dp)}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(e,t){e&&(this._element.style.marginTop=e+Dp),t&&(this._element.style.marginLeft=t+Dp)}getOffset(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}};const e$e="ht__manualRowMove--backlight";class t$e extends jG{build(){super.build(),ce(this._element,e$e)}}const n$e="ht__manualRowMove--guideline";class i$e extends jG{build(){super.build(),ce(this._element,n$e)}}function r$e(n,e){zG(n,e),e.add(n)}function Np(n,e,t){zG(n,e),e.set(n,t)}function zG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lf(n,e,t){return n.set(Ju(n,e),t),t}function tt(n,e){return n.get(Ju(n,e))}function Ju(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Pe.getSingleton().register("beforeRowMove"),Pe.getSingleton().register("afterRowMove");const CN="manualRowMove",s$e=140,UG="ht__manualRowMove",QR="show-ui",SN="on-moving--rows",_N="after-selection--rows";var Pr=new WeakMap,eh=new WeakMap,Ic=new WeakMap,th=new WeakMap,Zr=new WeakMap,JR=new WeakMap,cf=new WeakSet;class o$e extends Lt{constructor(){super(...arguments),r$e(this,cf),Np(this,Pr,new t$e(this.hot)),Np(this,eh,new i$e(this.hot)),Np(this,Ic,[]),Np(this,th,void 0),Np(this,Zr,{}),Np(this,JR,void 0)}static get PLUGIN_KEY(){return CN}static get PLUGIN_PRIORITY(){return s$e}isEnabled(){return!!this.hot.getSettings()[CN]}enablePlugin(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ju(cf,e,a$e).call(e,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ju(cf,e,c$e).call(e,...i)}),this.addHook("afterScrollHorizontally",()=>Ju(cf,this,h$e).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ju(cf,e,d$e).call(e,...i)}),this.buildPluginUI(),this.registerEvents(),ce(this.hot.rootElement,UG),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){Ze(this.hot.rootElement,UG),this.unregisterEvents(),tt(Pr,this).destroy(),tt(eh,this).destroy(),super.disablePlugin()}moveRow(e,t){return this.moveRows([e],t)}moveRows(e,t){const i=tt(JR,this),r=this.isMovePossible(e,t),s=this.hot.runHooks("beforeRowMove",e,t,i,r);if(lf(JR,this,void 0),s===!1)return;r&&this.hot.rowIndexMapper.moveIndexes(e,t);const o=r&&this.isRowOrderChanged(e,t);return this.hot.runHooks("afterRowMove",e,t,i,r,o),o}dragRow(e,t){return this.dragRows([e],t)}dragRows(e,t){const i=this.countFinalIndex(e,t);return lf(JR,this,t),this.moveRows(e,i)}isMovePossible(e,t){const i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),r=e.length+t>i,s=t<0,o=e.some(l=>l<0),a=e.some(l=>l>=i);return!(r||s||o||a)}isRowOrderChanged(e,t){return e.some((i,r)=>i-r!==t)}countFinalIndex(e,t){const i=si(e,(r,s)=>(s<t&&(r+=1),r),0);return t-i}getRowsHeight(e,t){const i=this.hot.rowIndexMapper;let r=0;for(let s=e;s<=t;s++){const o=i.getRenderableFromVisualIndex(s);o!==null&&(r+=this.hot.view._wt.wtTable.getRowHeight(o)||23)}return r}moveBySettingsOrLoad(){const e=this.hot.getSettings()[CN];if(Array.isArray(e))this.moveRows(e,0);else if(e!==void 0){const t=this.persistentStateLoad();t.length&&this.moveRows(t,0)}}isFixedRowTop(e){return e<this.hot.getSettings().fixedRowsTop}isFixedRowBottom(e){return e>this.hot.countRows()-1-this.hot.getSettings().fixedRowsBottom}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}persistentStateLoad(){const e={};return this.hot.runHooks("persistentStateLoad","manualRowMove",e),e.value?e.value:[]}prepareRowsToMoving(){const e=this.hot.getSelectedRangeLast(),t=[];if(!e)return t;const{from:i,to:r}=e,s=Math.min(i.row,r.row),o=Math.max(i.row,r.row);return He(s,o,a=>{t.push(a)}),t}refreshPositions(){const e=tt(Zr,this).coords,t=this.hot.view.getFirstFullyVisibleRow(),i=this.hot.view.getLastFullyVisibleRow(),r=this.hot.countRows();this.isFixedRowTop(e.row)&&t>0&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(t-1,-1)),this.isFixedRowBottom(e.row)&&i<r&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(i+1,1),void 0,!0);const s=this.hot.view._wt.wtTable,o=tt(Zr,this).TD,a=this.hot.rootElement,l=vi(a),c=md(a),u=s.holder.scrollTop,h=this.hot.rootWindow!==c?c.scrollTop:0,d=l.top-h,f=tt(Zr,this).eventPageY-d+u,g=s.hider.offsetHeight,p=s.TBODY.offsetTop,m=tt(Pr,this).getOffset().top,v=tt(Pr,this).getSize().height,y=o.offsetHeight/2,w=o.offsetHeight;let _=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,e.row-1);const R=f>=_+y;this.isFixedRowTop(e.row)&&(_+=this.hot.view._wt.wtOverlays.topOverlay.getOverlayOffset()),e.row<0?tt(Zr,this).row=t>0?t-1:t:R?(tt(Zr,this).row=e.row+1,_+=e.row===0?w-1:w):tt(Zr,this).row=e.row;let E=f,x=_;f+v+m>=g?E=g-v-m:f+m<p&&(E=p+Math.abs(m)),_>=g-1&&(x=g-1),tt(Pr,this).setPosition(E),tt(eh,this).setPosition(x)}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mousemove",t=>Ju(cf,this,l$e).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>Ju(cf,this,u$e).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){tt(Pr,this).build(),tt(eh,this).build()}destroy(){tt(Pr,this).destroy(),tt(eh,this).destroy(),super.destroy()}}function a$e(n,e,t,i){const{wtTable:r,wtViewport:s}=this.hot.view._wt,o=this.hot.selection.isSelectedByRowHeader(),a=this.hot.getSelectedRangeLast();if(!a||!o||tt(th,this)||n.button!==0){lf(th,this,!1),tt(Ic,this).length=0,Ze(this.hot.rootElement,[SN,QR]);return}const l=tt(eh,this).isBuilt()&&!tt(eh,this).isAppended(),c=tt(Pr,this).isBuilt()&&!tt(Pr,this).isAppended();l&&c&&(tt(eh,this).appendTo(r.hider),tt(Pr,this).appendTo(r.hider));const{from:u,to:h}=a,d=Math.min(u.row,h.row),f=Math.max(u.row,h.row);if(e.col<0&&e.row>=d&&e.row<=f){i.row=!0,lf(th,this,!0),tt(Zr,this).eventPageY=n.pageY,tt(Zr,this).coords=e,tt(Zr,this).TD=t,lf(Ic,this,this.prepareRowsToMoving());const g=r.holder.scrollLeft+s.getRowHeaderWidth(),p=this.getRowsHeight(d,e.row-1)+n.offsetY;tt(Pr,this).setPosition(null,g),tt(Pr,this).setSize(r.hider.offsetWidth-g,this.getRowsHeight(d,f)),tt(Pr,this).setOffset(-p,null),ce(this.hot.rootElement,SN),this.refreshPositions()}else Ze(this.hot.rootElement,_N),lf(th,this,!1),tt(Ic,this).length=0}function l$e(n){tt(th,this)&&(tt(Zr,this).eventPageY=n.pageY,this.refreshPositions())}function c$e(n,e,t,i){!this.hot.getSelectedRangeLast()||!tt(th,this)||(tt(Ic,this).indexOf(e.row)>-1?Ze(this.hot.rootElement,QR):ce(this.hot.rootElement,QR),i.row=!0,i.column=!0,i.cell=!0,tt(Zr,this).coords=e,tt(Zr,this).TD=t)}function u$e(){const n=tt(Zr,this).row,e=tt(Ic,this).length;if(lf(th,this,!1),Ze(this.hot.rootElement,[SN,QR,_N]),this.hot.selection.isSelectedByRowHeader()&&ce(this.hot.rootElement,_N),e<1||n===void 0)return;const t=tt(Ic,this)[0],i=this.hot.toPhysicalRow(t),r=this.dragRows(tt(Ic,this),n);if(tt(Ic,this).length=0,r===!0){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const s=this.hot.toVisualRow(i),o=s+e-1;this.hot.selectRows(s,o)}}function h$e(){const n=this.hot.view._wt.wtTable,e=this.hot.view._wt.wtViewport.getRowHeaderWidth(),t=n.holder.scrollLeft,i=e+t;tt(Pr,this).setPosition(null,i),tt(Pr,this).setSize(n.hider.offsetWidth-i)}function d$e(){this.moveBySettingsOrLoad()}function f$e(n,e){GG(n,e),e.add(n)}function dr(n,e,t){GG(n,e),e.set(n,t)}function GG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wn(n,e,t){return n.set(Oc(n,e),t),t}function Ce(n,e){return n.get(Oc(n,e))}function Oc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const e1="manualRowResize",g$e=30,YG="manualRowHeights";var ol=new WeakMap,t1=new WeakMap,_s=new WeakMap,Bw=new WeakMap,nh=new WeakMap,RN=new WeakMap,Lp=new WeakMap,n1=new WeakMap,Ir=new WeakMap,al=new WeakMap,uf=new WeakMap,i1=new WeakMap,Vw=new WeakMap,Ww=new WeakMap,ia=new WeakMap,jw=new WeakMap,ih=new WeakSet;class p$e extends Lt{static get PLUGIN_KEY(){return e1}static get PLUGIN_PRIORITY(){return g$e}constructor(e){super(e),f$e(this,ih),dr(this,ol,null),dr(this,t1,null),dr(this,_s,[]),dr(this,Bw,null),dr(this,nh,null),dr(this,RN,null),dr(this,Lp,null),dr(this,n1,null),dr(this,Ir,this.hot.rootDocument.createElement("DIV")),dr(this,al,this.hot.rootDocument.createElement("DIV")),dr(this,uf,!1),dr(this,i1,!1),dr(this,Vw,0),dr(this,Ww,null),dr(this,ia,void 0),dr(this,jw,void 0),ce(Ce(Ir,this),"manualRowResizer"),ce(Ce(al,this),"manualRowResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[e1]}enablePlugin(){this.enabled||(Wn(ia,this,new Pu),Ce(ia,this).addLocalHook("init",()=>Oc(ih,this,S$e).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,Ce(ia,this)),this.addHook("modifyRowHeight",(e,t)=>Oc(ih,this,C$e).call(this,e,t)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Wn(jw,this,Ce(ia,this).getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualRowHeights(){this.hot.runHooks("persistentStateSave",YG,Ce(ia,this).getValues())}loadManualRowHeights(){const e={};return this.hot.runHooks("persistentStateLoad",YG,e),e.value}setManualSize(e,t){const i=this.hot.toPhysicalRow(e),r=Math.max(t,n8);return Ce(ia,this).setValueAtIndex(i,r),r}getLastDesiredRowHeight(){return Ce(Bw,this)}setupHandlePosition(e){Wn(ol,this,e);const{view:t}=this.hot,{_wt:i}=t,r=i.wtTable.getCoords(Ce(ol,this)),s=r.row;if(s<0)return;const o=dn(Ce(ol,this)),a=Ce(ol,this).getBoundingClientRect(),l=s<i.getSetting("fixedRowsTop"),c=s>=t.countNotHiddenRowIndexes(0,1)-i.getSetting("fixedRowsBottom");let u;l?u=i.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(Ce(ol,this),r.row,r.col):c&&(u=i.wtOverlays.bottomInlineStartCornerOverlay.getRelativeCellPosition(Ce(ol,this),r.row,r.col)),u||(u=i.wtOverlays.inlineStartOverlay.getRelativeCellPosition(Ce(ol,this),r.row,r.col)),Wn(t1,this,this.hot.rowIndexMapper.getVisualFromRenderableIndex(s)),Wn(_s,this,[]);const h=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&h){const d=this.hot.getSelectedRange();V(d,f=>{const g=f.getTopStartCorner().row,p=f.getBottomStartCorner().row;He(g,p,m=>{Ce(_s,this).includes(m)||Ce(_s,this).push(m)})})}Ce(_s,this).includes(Ce(t1,this))||Wn(_s,this,[Ce(t1,this)]),Wn(n1,this,u.top-6),Wn(Lp,this,parseInt(a.height,10)),Ce(Ir,this).style.top=`${Ce(n1,this)+Ce(Lp,this)}px`,Ce(Ir,this).style[this.inlineDir]=`${u.start}px`,Ce(Ir,this).style.width=`${o}px`,this.hot.rootElement.appendChild(Ce(Ir,this))}refreshHandlePosition(){Ce(Ir,this).style.top=`${Ce(n1,this)+Ce(Bw,this)}px`}setupGuidePosition(){const e=parseInt(dn(Ce(Ir,this)),10),t=parseInt(Ce(Ir,this).style[this.inlineDir],10)+e,i=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);ce(Ce(Ir,this),"active"),ce(Ce(al,this),"active"),Ce(al,this).style.top=Ce(Ir,this).style.top,Ce(al,this).style[this.inlineDir]=`${t}px`,Ce(al,this).style.width=`${i-e}px`,this.hot.rootElement.appendChild(Ce(al,this))}refreshGuidePosition(){Ce(al,this).style.top=Ce(Ir,this).style.top}hideHandleAndGuide(){Ze(Ce(Ir,this),"active"),Ze(Ce(al,this),"active")}checkIfRowHeader(e){const t=wu(e,["TBODY"],this.hot.rootElement),{inlineStartOverlay:i,topInlineStartCornerOverlay:r,bottomInlineStartCornerOverlay:s}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.TBODY,r.clone.wtTable.TBODY,s.clone.wtTable.TBODY].includes(t)}getClosestTHParent(e){return e.tagName!=="TABLE"?e.tagName==="TH"?e:this.getClosestTHParent(e.parentNode):null}getActualRowHeight(e){const t=this.hot.view._wt.wtTable.getRowHeight(e);return t!==void 0&&Ce(nh,this)<t?t:Ce(nh,this)}afterMouseDownTimeout(){const e=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},t=(i,r)=>{const s=this.hot.runHooks("beforeRowResize",this.getActualRowHeight(i),i,!0);s!==void 0&&Wn(nh,this,s),this.setManualSize(i,Ce(nh,this)),this.hot.runHooks("afterRowResize",this.getActualRowHeight(i),i,!0),r&&e()};Ce(Vw,this)>=2&&(Ce(_s,this).length>1?(V(Ce(_s,this),r=>{t(r)}),e()):V(Ce(_s,this),r=>{t(r,!0)})),Wn(Vw,this,0),Wn(Ww,this,null)}bindEvents(){const{rootElement:e,rootWindow:t}=this.hot;this.eventManager.addEventListener(e,"mouseover",i=>Oc(ih,this,m$e).call(this,i)),this.eventManager.addEventListener(e,"mousedown",i=>Oc(ih,this,b$e).call(this,i)),this.eventManager.addEventListener(t,"mousemove",i=>Oc(ih,this,v$e).call(this,i)),this.eventManager.addEventListener(t,"mouseup",()=>Oc(ih,this,w$e).call(this)),this.eventManager.addEventListener(Ce(Ir,this),"contextmenu",()=>Oc(ih,this,y$e).call(this))}destroy(){super.destroy()}}function m$e(n){if(!vP(n.target)&&Ce(i1,this)!==!0&&this.checkIfRowHeader(n.target)){const e=this.getClosestTHParent(n.target);e&&(Ce(uf,this)||this.setupHandlePosition(e))}}function b$e(n){Ue(n.target,"manualRowResizer")&&(this.setupHandlePosition(Ce(ol,this)),this.setupGuidePosition(),Wn(uf,this,!0),Ce(Ww,this)===null&&(Wn(Ww,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(Ce(Ww,this))),Wn(Vw,this,Ce(Vw,this)+1),Wn(RN,this,n.pageY),Wn(nh,this,Ce(Lp,this)))}function v$e(n){Ce(uf,this)&&(Wn(Bw,this,Ce(Lp,this)+(n.pageY-Ce(RN,this))),V(Ce(_s,this),e=>{Wn(nh,this,this.setManualSize(e,Ce(Bw,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition())}function w$e(){const n=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(t,i)=>{this.hot.runHooks("beforeRowResize",this.getActualRowHeight(t),t,!1),i&&n(),this.saveManualRowHeights(),this.hot.runHooks("afterRowResize",this.getActualRowHeight(t),t,!1)};Ce(uf,this)&&(this.hideHandleAndGuide(),Wn(uf,this,!1),Ce(nh,this)!==Ce(Lp,this)&&(Ce(_s,this).length>1?(V(Ce(_s,this),i=>{e(i)}),n()):V(Ce(_s,this),i=>{e(i,!0)})),this.setupHandlePosition(Ce(ol,this)))}function y$e(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(Ce(Ir,this)),this.hot.rootElement.removeChild(Ce(al,this)),Wn(uf,this,!1),Wn(i1,this,!0),this.hot._registerImmediate(()=>{Wn(i1,this,!1)})}function C$e(n,e){let t=n;if(this.enabled){const i=this.hot.toPhysicalRow(e),r=Ce(ia,this).getValueAtIndex(i);this.hot.getSettings()[e1]&&r&&(t=r)}return t}function S$e(){const n=this.hot.getSettings()[e1],e=this.loadManualRowHeights();this.hot.batchExecution(()=>{typeof e<"u"?e.forEach((t,i)=>{Ce(ia,this).setValueAtIndex(i,t)}):Array.isArray(n)?(n.forEach((t,i)=>{Ce(ia,this).setValueAtIndex(i,t)}),Wn(jw,this,n)):n===!0&&Array.isArray(Ce(jw,this))&&Ce(jw,this).forEach((t,i)=>{Ce(ia,this).setValueAtIndex(i,t)})},!0)}function _$e(n,e,t){R$e(n,e),e.set(n,t)}function R$e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hf(n,e,t){return(e=E$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function E$e(n){var e=x$e(n,"string");return typeof e=="symbol"?e:e+""}function x$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KG(n,e){return n.get(qG(n,e))}function r1(n,e,t){return n.set(qG(n,e),t),t}function qG(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var df=new WeakMap;class ll{constructor(e,t,i,r,s,o){hf(this,"row",void 0),hf(this,"col",void 0),hf(this,"rowspan",void 0),hf(this,"colspan",void 0),hf(this,"removed",!1),hf(this,"cellCoordsFactory",void 0),hf(this,"cellRangeFactory",void 0),_$e(this,df,null),this.row=e,this.col=t,this.rowspan=i,this.colspan=r,this.cellCoordsFactory=s,this.cellRangeFactory=o}static NEGATIVE_VALUES_WARNING(e){let{row:t,col:i,rowspan:r,colspan:s}=e;return Ut`The merged cell declared with {row: ${t}, col: ${i},\x20
      rowspan: ${r}, colspan: ${s}} contains negative values, which is\x20
      not supported. It will not be added to the collection.`}static IS_OUT_OF_BOUNDS_WARNING(e){let{row:t,col:i}=e;return Ut`The merged cell declared at [${t}, ${i}] is positioned\x20
      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup.`}static IS_SINGLE_CELL(e){let{row:t,col:i}=e;return Ut`The merged cell declared at [${t}, ${i}] has both "rowspan"\x20
      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.`}static ZERO_SPAN_WARNING(e){let{row:t,col:i}=e;return Ut`The merged cell declared at [${t}, ${i}] has "rowspan"\x20
      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.`}static containsNegativeValues(e){let{row:t,col:i,rowspan:r,colspan:s}=e;return t<0||i<0||r<0||s<0}static isSingleCell(e){let{rowspan:t,colspan:i}=e;return i===1&&t===1}static containsZeroSpan(e){let{rowspan:t,colspan:i}=e;return i===0||t===0}static isOutOfBounds(e,t,i){return e.row<0||e.col<0||e.row>=t||e.row+e.rowspan-1>=t||e.col>=i||e.col+e.colspan-1>=i}normalize(e){const t=e.countRows(),i=e.countCols();this.row<0?this.row=0:this.row>t-1&&(this.row=t-1),this.col<0?this.col=0:this.col>i-1&&(this.col=i-1),this.row+this.rowspan>t-1&&(this.rowspan=t-this.row),this.col+this.colspan>i-1&&(this.colspan=i-this.col),r1(df,this,null)}includes(e,t){return this.row<=e&&this.col<=t&&this.row+this.rowspan-1>=e&&this.col+this.colspan-1>=t}includesHorizontally(e){return this.col<=e&&this.col+this.colspan-1>=e}includesVertically(e){return this.row<=e&&this.row+this.rowspan-1>=e}shift(e,t){const i=e[0]||e[1],r=t+Math.abs(e[0]||e[1])-1,s=e[0]?"colspan":"rowspan",o=e[0]?"col":"row",a=Math.min(t,r),l=Math.max(t,r),c=this[o],u=this[o]+this[s]-1;if(c>=t&&(this[o]+=i),i>0)t<=u&&t>c&&(this[s]+=i);else if(i<0){if(a<=c&&l>=u)return this.removed=!0,r1(df,this,null),!1;if(c>=a&&c<=l){const h=l-c+1,d=Math.abs(i)-h;this[o]-=d+i,this[s]-=h}else if(c<=a&&u>=l)this[s]+=i;else if(c<=a&&u>=a&&u<l){const h=u-a+1;this[s]-=h}}return r1(df,this,null),!0}isFarther(e,t){return e?t==="down"?e.row+e.rowspan-1<this.row+this.rowspan-1:t==="up"?e.row>this.row:t==="right"?e.col+e.colspan-1<this.col+this.colspan-1:t==="left"?e.col>this.col:null:!0}getLastRow(){return this.row+this.rowspan-1}getLastColumn(){return this.col+this.colspan-1}getRange(){return KG(df,this)||r1(df,this,this.cellRangeFactory(this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.getLastRow(),this.getLastColumn()))),KG(df,this)}}function T$e(n,e){M$e(n,e),e.add(n)}function M$e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s1(n,e,t){return(e=A$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A$e(n){var e=P$e(n,"string");return typeof e=="symbol"?e:e+""}function P$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ff(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var rh=new WeakSet;class o1{constructor(e){T$e(this,rh),s1(this,"plugin",void 0),s1(this,"mergedCells",[]),s1(this,"mergedCellsMatrix",new Map),s1(this,"hot",void 0),this.plugin=e,this.hot=e.hot}static IS_OVERLAPPING_WARNING(e){let{row:t,col:i}=e;return Ut`The merged cell declared at [${t}, ${i}], overlaps\x20
      with the other declared merged cell. The overlapping merged cell was not added to the table, please\x20
      fix your setup.`}get(e,t){var i;return this.mergedCellsMatrix.has(e)&&(i=this.mergedCellsMatrix.get(e).get(t))!==null&&i!==void 0?i:!1}getByRange(e){let t=!1;return V(this.mergedCells,i=>i.row<=e.from.row&&i.row+i.rowspan-1>=e.to.row&&i.col<=e.from.col&&i.col+i.colspan-1>=e.to.col?(t=i,t):!0),t}filterOverlappingMergeCells(e){const t=new Set;return this.mergedCells.forEach(r=>{const{row:s,col:o,colspan:a,rowspan:l}=r;for(let c=s;c<s+l;c++)for(let u=o;u<o+a;u++)t.add(`r${c},c${u}`)}),e.filter(r=>{const{row:s,col:o,colspan:a,rowspan:l}=r,c=new Set;let u=!1;for(let h=s;h<s+l;h++){for(let d=o;d<o+a;d++){const f=`r${h},c${d}`;if(t.has(f)){Yt(o1.IS_OVERLAPPING_WARNING(r)),u=!0;break}c.add(f)}if(u)break}return u||t.add(...c),!u})}getWithinRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{row:i,col:r}=e.getTopStartCorner(),{row:s,col:o}=e.getBottomEndCorner(),a=[];for(let l=i;l<=s;l++)for(let c=r;c<=o;c++){const u=this.get(l,c);u&&(t||!t&&u.row===l&&u.col===c)&&a.push(u)}return a}add(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=e.row,r=e.col,s=e.rowspan,o=e.colspan,a=new ll(i,r,s,o,this.hot._createCellCoords,this.hot._createCellRange),l=this.get(i,r),c=t?!1:this.isOverlapping(a);return!l&&!c?(this.hot&&a.normalize(this.hot),this.mergedCells.push(a),ff(rh,this,XG).call(this,a),a):(Yt(o1.IS_OVERLAPPING_WARNING(a)),!1)}remove(e,t){const i=this.get(e,t),r=i?this.mergedCells.indexOf(i):-1;return i&&r!==-1?(this.mergedCells.splice(r,1),ff(rh,this,I$e).call(this,i),i):!1}clear(){V(this.mergedCells,e=>{let{row:t,col:i,rowspan:r,colspan:s}=e;He(t,t+r,o=>{He(i,i+s,a=>{const l=this.hot.getCell(o,a);l&&(l.removeAttribute("rowspan"),l.removeAttribute("colspan"),l.style.display="")})})}),this.mergedCells.length=0,this.mergedCellsMatrix=new Map}isOverlapping(e){const t=e.getRange();for(let i=0;i<this.mergedCells.length;i++)if(this.mergedCells[i].getRange().overlaps(t))return!0;return!1}isFirstRenderableMergedCell(e,t){const i=this.get(e,t);return i&&this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1)===e&&this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1)===t}getFirstRenderableCoords(e,t){const i=this.get(e,t);if(!i||this.isFirstRenderableMergedCell(e,t))return this.hot._createCellCoords(e,t);const r=this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1),s=this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1);return this.hot._createCellCoords(r,s)}getStartMostColumnIndex(e,t){const i=ff(rh,this,a1).call(this,e,"col",-1);let r=t;for(let s=0;s<i.length;s++)if(i[s]<=t){r=i[s];break}return r}getEndMostColumnIndex(e,t){const i=ff(rh,this,a1).call(this,e,"col",1);let r=t;for(let s=0;s<i.length;s++)if(i[s]>=t){r=i[s];break}return r}getTopMostRowIndex(e,t){const i=ff(rh,this,a1).call(this,e,"row",-1);let r=t;for(let s=0;s<i.length;s++)if(i[s]<=t){r=i[s];break}return r}getBottomMostRowIndex(e,t){const i=ff(rh,this,a1).call(this,e,"row",1);let r=t;for(let s=0;s<i.length;s++)if(i[s]>=t){r=i[s];break}return r}shiftCollections(e,t,i){const r=[0,0];switch(e){case"right":r[0]+=i;break;case"left":r[0]-=i;break;case"down":r[1]+=i;break;case"up":r[1]-=i;break}const s=[];this.mergedCells.forEach(o=>{o.shift(r,t),o.removed&&s.push(o)}),s.forEach(o=>{this.mergedCells.splice(this.mergedCells.indexOf(o),1)}),this.mergedCellsMatrix.clear(),this.mergedCells.forEach(o=>{ff(rh,this,XG).call(this,o)})}}function a1(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=new Map,r=t===1?n.getTopStartCorner():n.getBottomEndCorner(),s=t===1?n.getBottomEndCorner():n.getTopStartCorner();for(let o=r.row;t===1?o<=s.row:o>=s.row;o+=t)for(let a=r.col;t===1?a<=s.col:a>=s.col;a+=t){const l=e==="row"?o:a,c=this.get(o,a);let u=l;c&&(u=t===1?c[e]+c[`${e}span`]-1:c[e]),i.has(l)||i.set(l,new Set),i.get(l).add(u)}return Array.from(new Set(Array.from(i.entries()).filter(o=>{let[,a]=o;return a.size===1}).flatMap(o=>{let[,a]=o;return Array.from(a)})))}function XG(n){for(let e=n.row;e<n.row+n.rowspan;e++)for(let t=n.col;t<n.col+n.colspan;t++)this.mergedCellsMatrix.has(e)||this.mergedCellsMatrix.set(e,new Map),this.mergedCellsMatrix.get(e).set(t,n)}function I$e(n){for(let e=n.row;e<n.row+n.rowspan;e++)for(let t=n.col;t<n.col+n.colspan;t++)this.mergedCellsMatrix.get(e).delete(t)}function EN(n,e,t){return(e=O$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O$e(n){var e=k$e(n,"string");return typeof e=="symbol"?e:e+""}function k$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class D$e{constructor(e){EN(this,"plugin",void 0),EN(this,"mergedCellsCollection",void 0),EN(this,"currentFillData",null),this.plugin=e,this.mergedCellsCollection=this.plugin.mergedCellsCollection}correctSelectionAreaSize(e){if(e[0]===e[2]&&e[1]===e[3]){const t=this.mergedCellsCollection.get(e[0],e[1]);t&&(e[2]=e[0]+t.rowspan-1,e[3]=e[1]+t.colspan-1)}}getDirection(e,t){let i=null;return t[0]===e[0]&&t[1]===e[1]&&t[3]===e[3]?i="down":t[2]===e[2]&&t[1]===e[1]&&t[3]===e[3]?i="up":t[1]===e[1]&&t[2]===e[2]?i="right":i="left",i}snapDragArea(e,t,i,r){const s=t.slice(0),o=this.getAutofillSize(e,t,i),[a,l,c,u]=e,d=["up","down"].indexOf(i)>-1?c-a+1:u-l+1,f=Math.floor(o/d)*d,g=o-f,p=this.getFarthestCollection(e,t,i,r);if(p){if(i==="down"){const m=p.row+p.rowspan-a-g;s[2]+m>=this.plugin.hot.countRows()?s[2]-=g:s[2]+=g?m:0}else if(i==="right"){const m=p.col+p.colspan-l-g;s[3]+m>=this.plugin.hot.countCols()?s[3]-=g:s[3]+=g?m:0}else if(i==="up"){const m=c-g-p.row+1;s[0]+m<0?s[0]+=g:s[0]-=g?m:0}else if(i==="left"){const m=u-g-p.col+1;s[1]+m<0?s[1]+=g:s[1]-=g?m:0}}return this.updateCurrentFillCache({baseArea:e,dragDirection:i,foundMergedCells:r,fillSize:o,dragArea:s,cycleLength:d}),s}updateCurrentFillCache(e){this.currentFillData||(this.currentFillData={}),oi(this.currentFillData,e)}getAutofillSize(e,t,i){const[r,s,o,a]=e,[l,c,u,h]=t;switch(i){case"up":return r-l;case"down":return u-o;case"left":return s-c;case"right":return h-a;default:return null}}getDragArea(e,t,i){const[r,s,o,a]=e,[l,c,u,h]=t;switch(i){case"up":return[l,c,r-1,a];case"down":return[o+1,s,u,a];case"left":return[l,c,o,s-1];case"right":return[r,a+1,u,h];default:return null}}getFarthestCollection(e,t,i,r){const[s,o,a,l]=e,c=["up","down"].indexOf(i)>-1,u=c?a:l,h=c?s:o,d=this.getAutofillSize(e,t,i),f=c?a-s+1:l-o+1,g=Math.floor(d/f)*f,p=d-g;let m=null,v=null,y=null;switch(i){case"up":m="includesVertically",y=u-p+1;break;case"left":m="includesHorizontally",y=u-p+1;break;case"down":m="includesVertically",y=h+p-1;break;case"right":m="includesHorizontally",y=h+p-1;break}return V(r,w=>{w[m](y)&&w.isFarther(v,i)&&(v=w)}),v}recreateAfterDataPopulation(e){if(!this.currentFillData)return;const t=this.getRangeFromChanges(e),i=this.currentFillData.foundMergedCells,r=this.currentFillData.dragDirection,s=(c,u)=>{switch(r){case"up":return c.row-u>=t.from.row;case"down":return c.row+c.rowspan-1+u<=t.to.row;case"left":return c.col-u>=t.from.column;case"right":return c.col+c.colspan-1+u<=t.to.column;default:return null}};let o=0,a=null,l=1;do for(let c=0;c<i.length;c+=1){if(a=i[c],o=l*this.currentFillData.cycleLength,s(a,o))switch(r){case"up":this.plugin.mergedCellsCollection.add({row:a.row-o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:a.row+o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col-o,colspan:a.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col+o,colspan:a.colspan});break}c===i.length-1&&(l+=1)}while(s(a,o));this.currentFillData=null,this.plugin.hot.render(),i.length>0&&this.plugin.ifChromeForceRepaint()}getRangeFromChanges(e){const t={min:null,max:null},i={min:null,max:null};return V(e,r=>{const s=r[0],o=this.plugin.hot.propToCol(r[1]);(t.min===null||s<t.min)&&(t.min=s),(t.max===null||s>t.max)&&(t.max=s),(i.min===null||o<i.min)&&(i.min=o),(i.max===null||o>i.max)&&(i.max=o)}),{from:{row:t.min,column:i.min},to:{row:t.max,column:i.max}}}dragAreaOverlapsCollections(e,t,i){const r=this.getDragArea(e,t,i),[s,o,a,l]=r,c=this.plugin.hot._createCellCoords(s,o),u=this.plugin.hot._createCellCoords(a,l),h=this.plugin.hot._createCellRange(c,c,u);return this.mergedCellsCollection.getWithinRange(h,!0).length>0}}function xN(n,e,t){return(e=N$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function N$e(n){var e=L$e(n,"string");return typeof e=="symbol"?e:e+""}function L$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class H$e{constructor(e){xN(this,"plugin",void 0),xN(this,"hot",void 0),xN(this,"fullySelectedMergedCellClassName","fullySelectedMergedCell"),this.plugin=e,this.hot=e.hot}getSelectedMergedCellClassName(e,t,i,r){const s=Math.min(i[0],i[2]),o=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),l=Math.max(i[1],i[3]);if(r===void 0||!this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(e,t))return;const u=this.plugin.mergedCellsCollection.get(e,t);if(!u)return;const h=u.getLastRow(),d=u.getLastColumn();if(s<=u.row&&o<=u.col&&a>=h&&l>=d)return`${this.fullySelectedMergedCellClassName}-${r}`;if(this.isMergeCellFullySelected(u,this.plugin.hot.getSelectedRange()))return`${this.fullySelectedMergedCellClassName}-multiple`}isMergeCellFullySelected(e,t){const i=[];if(!t||!e)return!1;for(let r=0;r<e.rowspan;r+=1)for(let s=0;s<e.colspan;s+=1)i.push(this.hot._createCellCoords(e.row+r,e.col+s));for(let r=0;r<i.length;r+=1){const s=[];for(let o=0;o<t.length;o+=1)s[o]=t[o].includes(i[r]);if(!s.includes(!0))return!1}return!0}getSelectedMergedCellClassNameToRemove(){const e=[];for(let t=0;t<=7;t+=1)e.push(`${this.fullySelectedMergedCellClassName}-${t}`);return e.push(`${this.fullySelectedMergedCellClassName}-multiple`),e}}function $$e(n){return{key:"mergeCells",name(){const e=this.getSelectedLast();if(e){const t=n.mergedCellsCollection.get(e[0],e[1]);if(t.row===e[0]&&t.col===e[1]&&t.row+t.rowspan-1===e[2]&&t.col+t.colspan-1===e[3])return this.getTranslatedPhrase(cO)}return this.getTranslatedPhrase(lO)},callback(){const e=this.getSelectedRangeLast();if(!e)return;e.setDirection(this.isRtl()?"NE-SW":"NW-SE");const{from:t,to:i}=e;n.toggleMerge(e),this.selectCell(t.row,t.col,i.row,i.col,!1)},disabled(){const e=this.getSelectedLast();return e?ll.isSingleCell({row:e[0],col:e[1],rowspan:e[2]-e[0]+1,colspan:e[3]-e[1]+1})||this.selection.isSelectedByCorner():!0},hidden:!1}}function zw(n,e,t){return(e=F$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function F$e(n){var e=B$e(n,"string");return typeof e=="symbol"?e:e+""}function B$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ZG{constructor(e){zw(this,"data",void 0),zw(this,"next",null),zw(this,"prev",null),this.data=e}}class l1{constructor(){zw(this,"first",null),zw(this,"last",null)}push(e){const t=new ZG(e);if(this.first===null)this.first=t,this.last=t;else{const i=this.last;this.last=t,t.prev=i,i.next=t}return t}unshift(e){const t=new ZG(e);if(this.first===null)this.first=t,this.last=t;else{const i=this.first;this.first=t,t.next=i,i.prev=t}}inorder(e){let t=this.first;for(;t;){const i=e(t);if(t===this.last||i===!0)break;t=t.next}}remove(e){if(this.first===null)return!1;let t=this.first,i,r;for(;t;){if(t.data===e)return i=t.next,r=t.prev,i&&(i.prev=r),r&&(r.next=i),t===this.first&&(this.first=i),t===this.last&&(this.last=r),!0;t=t.next}return!1}hasCycle(){let e=this.first,t=this.first;for(;;){if(e===null||(e=e.next,e===null))return!1;if(e=e.next,t=t.next,e===t)return!0}}pop(){if(this.last===null)return null;const e=this.last;return this.last=this.last.prev,e}shift(){if(this.first===null)return null;const e=this.first;return this.first=this.first.next,e}recursiveReverse(){function e(i,r){r&&(e(r,r.next),r.next=i)}if(!this.first)return;e(this.first,this.first.next),this.first.next=null;const t=this.first;this.first=this.last,this.last=t}reverse(){if(!this.first||!this.first.next)return;let e=this.first.next,t=this.first,i;for(;e;)i=e.next,e.next=t,t.prev=e,t=e,e=i;this.first.next=null,this.last.prev=null,i=this.first,this.first=t,this.last=i}}function V$e(n,e){QG(n,e),e.add(n)}function gf(n,e,t){QG(n,e),e.set(n,t)}function QG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wt(n,e){return n.get(c1(n,e))}function Rs(n,e,t){return n.set(c1(n,e),t),t}function c1(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var cl=new WeakMap,ul=new WeakMap,hl=new WeakMap,dl=new WeakMap,TN=new WeakMap,u1=new WeakMap,h1=new WeakMap,MN=new WeakSet;class W$e{constructor(e){let{mergedCellsGetter:t,rowIndexMapper:i,columnIndexMapper:r}=e;V$e(this,MN),gf(this,cl,new l1),gf(this,ul,new l1),gf(this,hl,null),gf(this,dl,null),gf(this,TN,null),gf(this,u1,null),gf(this,h1,null),Rs(TN,this,t),Rs(u1,this,i),Rs(h1,this,r)}getCurrentVerticalNode(){return Wt(dl,this).data}getFirstVerticalNode(){return Wt(ul,this).first.data}getNextVerticalNode(){return Wt(dl,this).next.data}getPrevVerticalNode(){return Wt(dl,this).prev.data}getCurrentHorizontalNode(){return Wt(hl,this).data}getFirstHorizontalNode(){return Wt(cl,this).first.data}getNextHorizontalNode(){return Wt(hl,this).next.data}getPrevHorizontalNode(){return Wt(hl,this).prev.data}setPrevNodeAsActive(){Rs(dl,this,Wt(dl,this).prev),Rs(hl,this,Wt(hl,this).prev)}setNextNodeAsActive(){Rs(dl,this,Wt(dl,this).next),Rs(hl,this,Wt(hl,this).next)}buildFocusOrder(e){const t=e.getTopStartCorner(),i=e.getBottomEndCorner(),r=new WeakSet;Rs(cl,this,new l1);for(let o=t.row;o<=i.row;o++)if(!Wt(u1,this).isHidden(o))for(let a=t.col;a<=i.col;a++){if(Wt(h1,this).isHidden(a))continue;const l=c1(MN,this,JG).call(this,e,Wt(cl,this),r,o,a);l&&Rs(hl,this,l)}Wt(cl,this).first&&(Wt(cl,this).first.prev=Wt(cl,this).last,Wt(cl,this).last.next=Wt(cl,this).first);const s=new WeakSet;Rs(ul,this,new l1);for(let o=t.col;o<=i.col;o++)if(!Wt(h1,this).isHidden(o))for(let a=t.row;a<=i.row;a++){if(Wt(u1,this).isHidden(a))continue;const l=c1(MN,this,JG).call(this,e,Wt(ul,this),s,a,o);l&&Rs(dl,this,l)}Wt(ul,this).first&&(Wt(ul,this).first.prev=Wt(ul,this).last,Wt(ul,this).last.next=Wt(ul,this).first)}setActiveNode(e,t){return Wt(cl,this).inorder(i=>{const{rowStart:r,rowEnd:s,colStart:o,colEnd:a}=i.data;if(e>=r&&e<=s&&t>=o&&t<=a)return Rs(hl,this,i),!1}),Wt(ul,this).inorder(i=>{const{rowStart:r,rowEnd:s,colStart:o,colEnd:a}=i.data;if(e>=r&&e<=s&&t>=o&&t<=a)return Rs(dl,this,i),!1}),this}}function JG(n,e,t,i,r){const s=n.getTopStartCorner(),o=n.getBottomEndCorner(),a=n.highlight.clone().normalize(),l=Wt(TN,this).call(this,i,r);if(l&&t.has(l))return null;const c={colStart:r,colEnd:r,rowStart:i,rowEnd:i};if(l){if(t.add(l),l.row<s.row||l.row+l.rowspan-1>o.row||l.col<s.col||l.col+l.colspan-1>o.col)return null;c.colStart=l.col,c.colEnd=l.col+l.colspan-1,c.rowStart=l.row,c.rowEnd=l.row+l.rowspan-1}const u=e.push(c);return i===a.row&&r===a.col||l&&a.row>=l.row&&a.row<=l.row+l.rowspan-1&&a.col>=l.col&&a.col<=l.col+l.colspan-1?u:null}function j$e(n){const{hot:e}=n,{rowIndexMapper:t,columnIndexMapper:i}=e;function r(){}function s(o,a,l){const c=n.mergedCellsCollection.get(a,l);if(!st(c)){o.removeAttribute("rowspan"),o.removeAttribute("colspan"),o.style.display="";return}const{row:u,col:h,colspan:d,rowspan:f}=c,[g,p]=n.translateMergedCellToRenderable(u,f,h,d),m=t.getRenderableFromVisualIndex(a),v=i.getRenderableFromVisualIndex(l),y=g-m+1,w=p-v+1,_=t.getNearestNotHiddenIndex(u,1),R=i.getNearestNotHiddenIndex(h,1),E=Math.min(f,y),x=Math.min(d,w);_===a&&R===l?(o.setAttribute("rowspan",E),o.setAttribute("colspan",x)):(o.removeAttribute("rowspan"),o.removeAttribute("colspan"),o.style.display="none")}return{before:r,after:s}}function z$e(n,e){e9(n,e),e.add(n)}function d1(n,e,t){e9(n,e),e.set(n,t)}function e9(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function AN(n,e,t){return(e=U$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function U$e(n){var e=G$e(n,"string");return typeof e=="symbol"?e:e+""}function G$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Uw(n,e,t){return n.set(qt(n,e),t),t}function gn(n,e){return n.get(qt(n,e))}function qt(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Pe.getSingleton().register("beforeMergeCells"),Pe.getSingleton().register("afterMergeCells"),Pe.getSingleton().register("beforeUnmergeCells"),Pe.getSingleton().register("afterUnmergeCells");const Gw="mergeCells",Y$e=150,t9=Gw;var oo=new WeakMap,ao=new WeakMap,fl=new WeakMap,n9=new WeakMap,Qt=new WeakSet;class K$e extends Lt{constructor(){super(...arguments),z$e(this,Qt),AN(this,"mergedCellsCollection",null),AN(this,"autofillCalculations",null),AN(this,"selectionCalculations",null),d1(this,oo,null),d1(this,ao,{row:0,col:0}),d1(this,fl,new W$e({mergedCellsGetter:(e,t)=>this.mergedCellsCollection.get(e,t),rowIndexMapper:this.hot.rowIndexMapper,columnIndexMapper:this.hot.columnIndexMapper})),d1(this,n9,j$e(this))}static get PLUGIN_KEY(){return Gw}static get PLUGIN_PRIORITY(){return Y$e}isEnabled(){return!!this.hot.getSettings()[Gw]}enablePlugin(){var e=this;this.enabled||(this.mergedCellsCollection=new o1(this),this.autofillCalculations=new D$e(this),this.selectionCalculations=new H$e(this),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,q$e).call(e,...i)}),this.addHook("modifyTransformFocus",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,Z$e).call(e,...i)}),this.addHook("modifyTransformStart",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,Q$e).call(e,...i)}),this.addHook("modifyTransformEnd",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,J$e).call(e,...i)}),this.addHook("beforeSelectionHighlightSet",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,e2e).call(e,...i)}),this.addHook("beforeSetRangeStart",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,i9).call(e,...i)}),this.addHook("beforeSetRangeStartOnly",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,i9).call(e,...i)}),this.addHook("beforeSelectionFocusSet",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,i2e).call(e,...i)}),this.addHook("afterSelectionFocusSet",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,r2e).call(e,...i)}),this.addHook("afterSelectionEnd",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,s2e).call(e,...i)}),this.addHook("modifyGetCellCoords",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,t2e).call(e,...i)}),this.addHook("afterIsMultipleSelection",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,X$e).call(e,...i)}),this.addHook("afterRenderer",function(){return gn(n9,e).after(...arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,n2e).call(e,...i)}),this.addHook("afterGetCellMeta",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,o2e).call(e,...i)}),this.addHook("afterViewportRowCalculatorOverride",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,a2e).call(e,...i)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,l2e).call(e,...i)}),this.addHook("modifyAutofillRange",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,c2e).call(e,...i)}),this.addHook("afterCreateCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,u2e).call(e,...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,h2e).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,d2e).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,f2e).call(e,...i)}),this.addHook("afterChange",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,g2e).call(e,...i)}),this.addHook("beforeDrawBorders",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,p2e).call(e,...i)}),this.addHook("afterDrawSelection",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,m2e).call(e,...i)}),this.addHook("beforeRemoveCellClassNames",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,b2e).call(e,...i)}),this.addHook("beforeBeginEditing",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,v2e).call(e,...i)}),this.addHook("modifyRowHeightByOverlayName",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return qt(Qt,e,w2e).call(e,...i)}),this.addHook("beforeUndoStackChange",(t,i)=>{if(i==="MergeCells")return!1}),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.clearCollections(),this.unregisterShortcuts(),this.hot.render(),super.disablePlugin()}updatePlugin(){const e=this.hot.getSettings()[Gw];this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(e),super.updatePlugin()}ifChromeForceRepaint(){if(!_P())return;const e=[];let t=[];this.mergedCellsCollection.mergedCells.forEach(i=>{const{row:r,rowspan:s}=i;for(let o=r+1;o<r+s;o++)t.push(o)}),t=[...new Set(t)],t.forEach(i=>{const r=this.hot.rowIndexMapper.getRenderableFromVisualIndex(i);this.hot.view._wt.wtOverlays.getOverlays(!0).map(s=>(s==null?void 0:s.name)==="master"?s:s.clone.wtTable).forEach(s=>{const o=s.getRow(r);o&&(o.style.background=Og(o,"backgroundColor").replace(")",", 0.99)"),e.push(o))})}),this.hot._registerTimeout(()=>{e.forEach(i=>{i.style.background=Og(i,"backgroundColor").replace(", 0.99)",")")})},1)}validateSetting(e){return e?ll.containsNegativeValues(e)?(Yt(ll.NEGATIVE_VALUES_WARNING(e)),!1):ll.isOutOfBounds(e,this.hot.countRows(),this.hot.countCols())?(Yt(ll.IS_OUT_OF_BOUNDS_WARNING(e)),!1):ll.isSingleCell(e)?(Yt(ll.IS_SINGLE_CELL(e)),!1):ll.containsZeroSpan(e)?(Yt(ll.ZERO_SPAN_WARNING(e)),!1):!0:!1}generateFromSettings(e){if(!Array.isArray(e))return;const t=e.filter(s=>this.validateSetting(s)),i=this.mergedCellsCollection.filterOverlappingMergeCells(t),r=[];i.forEach(s=>{const{row:o,col:a,rowspan:l,colspan:c}=s,u=this.hot._createCellCoords(o,a),h=this.hot._createCellCoords(o+l-1,a+c-1),d=this.hot._createCellRange(u,u,h);this.mergeRange(d,!0,!0);for(let f=o;f<o+l;f++)for(let g=a;g<a+c;g++)(f!==o||g!==a)&&r.push([f,g,null])}),r.length!==0&&this.hot.setDataAtCell(r,void 0,void 0,this.pluginName)}clearCollections(){this.mergedCellsCollection.clear()}canMergeRange(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?!0:this.validateSetting(e)}mergeSelection(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hot.getSelectedRangeLast();if(!e)return;e.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");const{from:t,to:i}=e;this.unmergeRange(e,!0),this.mergeRange(e),this.hot.selectCell(t.row,t.col,i.row,i.col,!1)}unmergeSelection(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hot.getSelectedRangeLast();if(!e)return;const{from:t,to:i}=e;this.unmergeRange(e,!0),this.hot.selectCell(t.row,t.col,i.row,i.col,!1)}mergeRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=e.getTopStartCorner(),s=e.getBottomEndCorner(),o={row:r.row,col:r.col,rowspan:s.row-r.row+1,colspan:s.col-r.col+1},a=[];let l=null;return this.canMergeRange(o,t)?(this.hot.runHooks("beforeMergeCells",e,t),He(0,o.rowspan-1,u=>{He(0,o.colspan-1,h=>{let d=null;a[u]||(a[u]=[]),u===0&&h===0?d=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o.row),this.hot.toPhysicalColumn(o.col)):this.hot.setCellMeta(o.row+u,o.col+h,"hidden",!0),a[u][h]=d})}),this.hot.setCellMeta(o.row,o.col,"spanned",!0),this.mergedCellsCollection.add(o,t)?(i?l=[o.row,o.col,a]:this.hot.populateFromArray(o.row,o.col,a,void 0,void 0,this.pluginName),t||this.ifChromeForceRepaint(),this.hot.runHooks("afterMergeCells",e,o,t),l):!0):!1}unmergeRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=this.mergedCellsCollection.getWithinRange(e);i.length!==0&&(this.hot.runHooks("beforeUnmergeCells",e,t),V(i,r=>{this.mergedCellsCollection.remove(r.row,r.col),He(0,r.rowspan-1,s=>{He(0,r.colspan-1,o=>{this.hot.removeCellMeta(r.row+s,r.col+o,"hidden"),this.hot.removeCellMeta(r.row+s,r.col+o,"copyable")})}),this.hot.removeCellMeta(r.row,r.col,"spanned")}),this.hot.runHooks("afterUnmergeCells",e,t),this.hot.render())}toggleMerge(e){const t=this.mergedCellsCollection.get(e.from.row,e.from.col);t.row===e.from.row&&t.col===e.from.col&&t.row+t.rowspan-1===e.to.row&&t.col+t.colspan-1===e.to.col?this.unmergeRange(e):this.mergeSelection(e)}merge(e,t,i,r){const s=this.hot._createCellCoords(e,t),o=this.hot._createCellCoords(i,r);this.mergeRange(this.hot._createCellRange(s,s,o))}unmerge(e,t,i,r){const s=this.hot._createCellCoords(e,t),o=this.hot._createCellCoords(i,r);this.unmergeRange(this.hot._createCellRange(s,s,o))}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control","m"]],callback:()=>{const i=this.hot.getSelectedRangeLast();i&&!i.isSingleHeader()&&(this.toggleMerge(i),this.hot.render())},runOnlyIf:i=>!i.altKey,group:t9})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(t9)}modifyViewportRowStart(e,t){const i=this.hot.rowIndexMapper,r=i.getVisualFromRenderableIndex(e.startRow);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(r,s);if(st(o)){const a=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.row,1));if(a<e.startRow){e.startRow=a,this.modifyViewportRowStart(e,t);return}}}}modifyViewportRowEnd(e,t){const i=this.hot.rowIndexMapper,r=i.getVisualFromRenderableIndex(e.endRow);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(r,s);if(st(o)){const a=o.row+o.rowspan-1,l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(a,-1));if(l>e.endRow){e.endRow=l,this.modifyViewportRowEnd(e,t);return}}}}modifyViewportColumnStart(e,t){const i=this.hot.columnIndexMapper,r=i.getVisualFromRenderableIndex(e.startColumn);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(s,r);if(st(o)){const a=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.col,1));if(a<e.startColumn){e.startColumn=a,this.modifyViewportColumnStart(e,t);return}}}}modifyViewportColumnEnd(e,t){const i=this.hot.columnIndexMapper,r=i.getVisualFromRenderableIndex(e.endColumn);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(s,r);if(st(o)){const a=o.col+o.colspan-1,l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(a,-1));if(l>e.endColumn){e.endColumn=l,this.modifyViewportColumnEnd(e,t);return}}}}translateMergedCellToRenderable(e,t,i,r){const{rowIndexMapper:s,columnIndexMapper:o}=this.hot;let a,l;t===0?a=s.getNearestNotHiddenIndex(e,1):a=s.getNearestNotHiddenIndex(e+t-1,-1),r===0?l=o.getNearestNotHiddenIndex(i,1):l=o.getNearestNotHiddenIndex(i+r-1,-1);const c=e>=0?s.getRenderableFromVisualIndex(a):e,u=i>=0?o.getRenderableFromVisualIndex(l):i;return[c,u]}}function q$e(){this.generateFromSettings(this.hot.getSettings()[Gw]),this.hot.render()}function X$e(n){if(n){const e=this.mergedCellsCollection.mergedCells,t=this.hot.getSelectedRangeLast(),i=t.getTopStartCorner(),r=t.getBottomEndCorner();for(let s=0;s<e.length;s+=1)if(i.row===e[s].row&&i.col===e[s].col&&r.row===e[s].row+e[s].rowspan-1&&r.col===e[s].col+e[s].colspan-1)return!1}return n}function Z$e(n){gn(ao,this).row=n.row,gn(ao,this).col=n.col}function Q$e(n){const e=this.hot.getSelectedRangeLast(),{highlight:t}=e,{columnIndexMapper:i,rowIndexMapper:r}=this.hot;gn(oo,this)&&(r.getRenderableFromVisualIndex(gn(oo,this).row)!==null&&(t.row=gn(oo,this).row),i.getRenderableFromVisualIndex(gn(oo,this).col)!==null&&(t.col=gn(oo,this).col),Uw(oo,this,null));const s=this.mergedCellsCollection.get(t.row,t.col);if(!s)return;const o=s.col,a=s.col+s.colspan-1;if(n.col<0){const u=t.col>=o&&t.col<=a?o-1:a,h=i.getNearestNotHiddenIndex(u,-1);h===null?n.col=-this.hot.view.countRenderableColumnsInRange(0,t.col):n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(h,t.col)-1,1)}else if(n.col>0){const u=t.col>=o&&t.col<=a?a+1:o,h=i.getNearestNotHiddenIndex(u,1);h===null?n.col=this.hot.view.countRenderableColumnsInRange(t.col,this.hot.countCols()):n.col=Math.max(this.hot.view.countRenderableColumnsInRange(t.col,h)-1,1)}const l=s.row,c=s.row+s.rowspan-1;if(n.row<0){const u=t.row>=l&&t.row<=c?l-1:c,h=r.getNearestNotHiddenIndex(u,-1);h===null?n.row=-this.hot.view.countRenderableRowsInRange(0,t.row):n.row=-Math.max(this.hot.view.countRenderableRowsInRange(h,t.row)-1,1)}else if(n.row>0){const u=t.row>=l&&t.row<=c?c+1:l,h=r.getNearestNotHiddenIndex(u,1);h===null?n.row=this.hot.view.countRenderableRowsInRange(t.row,this.hot.countRows()):n.row=Math.max(this.hot.view.countRenderableRowsInRange(t.row,h)-1,1)}}function J$e(n){const e=this.hot.getSelectedRangeLast(),t=e.clone(),{to:i}=e,{columnIndexMapper:r,rowIndexMapper:s}=this.hot,o=(a,l)=>{t.expand(this.hot._createCellCoords(a,l));for(let c=0;c<this.mergedCellsCollection.mergedCells.length;c+=1)t.expandByRange(this.mergedCellsCollection.mergedCells[c].getRange())};if(n.col<0){let a=this.mergedCellsCollection.getStartMostColumnIndex(e,i.col)+n.col;o(i.row,a),e.getHorizontalDirection()==="E-W"&&t.getHorizontalDirection()==="E-W"&&(a=t.getTopStartCorner().col);const l=r.getNearestNotHiddenIndex(a,1);l!==null&&(n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(l,i.col)-1,1))}else if(n.col>0){let a=this.mergedCellsCollection.getEndMostColumnIndex(e,i.col)+n.col;o(i.row,a),e.getHorizontalDirection()==="W-E"&&t.getHorizontalDirection()==="W-E"&&(a=t.getBottomEndCorner().col);const l=r.getNearestNotHiddenIndex(a,-1);l!==null&&(n.col=Math.max(this.hot.view.countRenderableColumnsInRange(i.col,l)-1,1))}if(n.row<0){let a=this.mergedCellsCollection.getTopMostRowIndex(e,i.row)+n.row;o(a,i.col),e.getVerticalDirection()==="S-N"&&t.getVerticalDirection()==="S-N"&&(a=t.getTopStartCorner().row);const l=s.getNearestNotHiddenIndex(a,1);l!==null&&(n.row=-Math.max(this.hot.view.countRenderableRowsInRange(l,i.row)-1,1))}else if(n.row>0){let a=this.mergedCellsCollection.getBottomMostRowIndex(e,i.row)+n.row;o(a,i.col),e.getVerticalDirection()==="N-S"&&t.getVerticalDirection()==="N-S"&&(a=t.getBottomStartCorner().row);const l=s.getNearestNotHiddenIndex(a,-1);l!==null&&(n.row=Math.max(this.hot.view.countRenderableRowsInRange(i.row,l)-1,1))}}function e2e(){const n=this.hot.getSelectedRangeLast(),{highlight:e}=n;if(this.hot.selection.isSelectedByColumnHeader()||this.hot.selection.isSelectedByRowHeader()){Uw(oo,this,e.clone());return}for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);const t=this.mergedCellsCollection.get(e.row,e.col);Uw(oo,this,e.clone()),t&&e.assign(t)}function t2e(n,e){if(n<0||e<0)return;const t=this.mergedCellsCollection.get(n,e);if(!t)return;const{row:i,col:r,colspan:s,rowspan:o}=t;return[i,r,i+o-1,r+s-1]}function n2e(n){n.items.push({name:"---------"},$$e(this))}function i9(){Uw(oo,this,null)}function i2e(){if(gn(oo,this).isCell())return;const n=this.hot.getSelectedRangeLast(),e=n.getVerticalDirection(),t=n.getHorizontalDirection(),i=gn(oo,this).clone().normalize();gn(fl,this).setActiveNode(i.row,i.col),gn(ao,this).row>0||gn(ao,this).col>0?gn(fl,this).setPrevNodeAsActive():(t==="E-W"&&gn(ao,this).col<0||e==="S-N"&&gn(ao,this).row<0)&&gn(fl,this).setNextNodeAsActive()}function r2e(n,e){const t=this.hot.getSelectedRangeLast(),{columnIndexMapper:i,rowIndexMapper:r}=this.hot;let s=null,o=null;if(gn(ao,this).col<0){const{rowEnd:a,colEnd:l}=gn(fl,this).getPrevHorizontalNode();o=i.getNearestNotHiddenIndex(l,-1),s=r.getNearestNotHiddenIndex(a,-1)}else if(gn(ao,this).col>0){const{rowStart:a,colStart:l}=gn(fl,this).getNextHorizontalNode();o=i.getNearestNotHiddenIndex(l,1),s=r.getNearestNotHiddenIndex(a,1)}else if(gn(ao,this).row<0){const{rowEnd:a,colEnd:l}=gn(fl,this).getPrevVerticalNode();o=i.getNearestNotHiddenIndex(l,-1),s=r.getNearestNotHiddenIndex(a,-1)}else if(gn(ao,this).row>0){const{rowStart:a,colStart:l}=gn(fl,this).getNextVerticalNode();o=i.getNearestNotHiddenIndex(l,1),s=r.getNearestNotHiddenIndex(a,1)}if(s!==null||o!==null){const a=this.hot._createCellCoords(s,o),l=this.mergedCellsCollection.get(a.row,a.col),c=this.hot.selection.highlight.getFocus();n=a.row,e=a.col,l?t.highlight.assign({row:this.hot.rowIndexMapper.getNearestNotHiddenIndex(l.row,1),col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(l.col,1)}):t.highlight.assign(a),c.clear(),c.add(a).commit()}gn(fl,this).setActiveNode(n,e),Uw(ao,this,{row:0,col:0})}function s2e(){this.hot.getSelectedRangeLast().isHeader()||gn(fl,this).buildFocusOrder(this.hot.getSelectedRangeLast())}function o2e(n,e,t){const i=this.mergedCellsCollection.get(n,e);i&&(i.row!==n||i.col!==e?t.copyable=!1:(t.rowspan=i.rowspan,t.colspan=i.colspan))}function a2e(n){const e=this.hot.countCols();this.modifyViewportRowStart(n,e),this.modifyViewportRowEnd(n,e)}function l2e(n){const e=this.hot.countRows();this.modifyViewportColumnStart(n,e),this.modifyViewportColumnEnd(n,e)}function c2e(n,e){this.autofillCalculations.correctSelectionAreaSize(e);const t=this.autofillCalculations.getDirection(e,n);let i=n;if(this.autofillCalculations.dragAreaOverlapsCollections(e,i,t))return i=e,i;const r=this.hot._createCellCoords(e[0],e[1]),s=this.hot._createCellCoords(e[2],e[3]),o=this.hot._createCellRange(r,r,s),a=this.mergedCellsCollection.getWithinRange(o);return a.length===0||(i=this.autofillCalculations.snapDragArea(e,i,t,a)),i}function u2e(n,e){this.mergedCellsCollection.shiftCollections("right",n,e)}function h2e(n,e){this.mergedCellsCollection.shiftCollections("left",n,e)}function d2e(n,e,t){t!=="auto"&&this.mergedCellsCollection.shiftCollections("down",n,e)}function f2e(n,e){this.mergedCellsCollection.shiftCollections("up",n,e)}function g2e(n,e){e==="Autofill.fill"&&this.autofillCalculations.recreateAfterDataPopulation(n)}function p2e(n,e){if(e&&e==="area"){const t=this.hot.getSelectedRangeLast(),i=this.mergedCellsCollection.getWithinRange(t);V(i,r=>{t.getBottomEndCorner().row===r.getLastRow()&&t.getBottomEndCorner().col===r.getLastColumn()&&(n[2]=r.row,n[3]=r.col)})}}function m2e(n,e,t,i){if(t)return this.selectionCalculations.getSelectedMergedCellClassName(n,e,t,i)}function b2e(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}function v2e(n,e,t,i){if(!(i instanceof MouseEvent))return;const r=this.hot.getSelectedRangeLast(),s=this.mergedCellsCollection.getByRange(r);if(!s)return;const o=this.hot._createCellCoords(s.row,s.col),a=this.hot._createCellCoords(s.row+s.rowspan-1,s.col+s.colspan-1);return this.hot.selection.getLayerLevel()===0&&r.isEqual(this.hot._createCellRange(o,o,a))}function w2e(n,e,t){if(this.hot.getSettings().rowHeaders||t==="bottom"||t==="bottom_inline_start_corner")return n;let i,r;if(t==="master")i=this.hot.view.getFirstRenderedVisibleColumn(),r=this.hot.view.getLastRenderedVisibleColumn();else{const d=this.hot.view.getOverlayByName(t);i=this.hot.columnIndexMapper.getVisualFromRenderableIndex(d.clone.wtTable.getFirstRenderedColumn()),r=this.hot.columnIndexMapper.getVisualFromRenderableIndex(d.clone.wtTable.getLastRenderedColumn())}if(!this.mergedCellsCollection.get(e,i))return n;const o=this.hot._createCellCoords(e,i),a=this.hot._createCellCoords(e,r),l=this.hot._createCellRange(o,o,a),c=this.mergedCellsCollection.getWithinRange(l),u=c.reduce((d,f)=>{let{rowspan:g}=f;return Math.max(d,g)},1);let h=0;return c.length>1&&c[0].rowspan<u&&(h=u-c[0].rowspan),c.forEach(d=>{var f;let{rowspan:g}=d,p=0;t==="top"||t==="top_inline_start_corner"?p=Math.min(u,this.hot.view.countNotHiddenFixedRowsTop()-e):p=g-h,n=Math.max((f=n)!==null&&f!==void 0?f:0,qt(Qt,this,y2e).call(this,e,p))}),n}function y2e(n,e){const t=this.hot.view._wt.wtSettings.getSettingPure("defaultRowHeight"),i=this.hot.getPlugin("autoRowSize");let r=0;for(let o=n;o<n+e;o++)if(!this.hot.rowIndexMapper.isHidden(o)){var s;r+=(s=i==null?void 0:i.getRowHeight(o))!==null&&s!==void 0?s:t}return r}function C2e(n,e){return function(t,i){const[,...r]=t,[,...s]=i;return function o(a){const l=n[a],c=e[a],u=r[a],h=s[a],d=c.multiColumnSorting,g=(d.compareFunctionFactory?d.compareFunctionFactory:IU(c.type))(l,c,d)(u,h);if(g===Za){const p=a+1;if(typeof e[p]<"u")return o(p)}return g}(0)}}function r9(){Yt(Ut`Plugins \`columnSorting\` and \`multiColumnSorting\` should not be enabled simultaneously. 
    Only \`multiColumnSorting\` will work. The \`columnSorting\` plugin will be disabled.`)}const s9="sort";function S2e(n,e,t){const i=[];return t===!1||n.isColumnSorted(e)&&n.getNumberOfSortedColumns()>1&&i.push(`${s9}-${n.getIndexOfColumnInSortQueue(e)+1}`),i}function _2e(n){const e=n.className.split(" "),t=new RegExp(`^${s9}-[0-9]{1,2}$`);return e.filter(i=>t.test(i))}function R2e(n,e,t){return(e=E2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function E2e(n){var e=x2e(n,"string");return typeof e=="symbol"?e:e+""}function x2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const f1="multiColumnSorting",T2e=170,PN="columnSorting",o9=f1;PU(f1,C2e);class M2e extends WU{constructor(){super(...arguments),R2e(this,"pluginKey",f1)}static get PLUGIN_KEY(){return f1}static get PLUGIN_PRIORITY(){return T2e}isEnabled(){return super.isEnabled()}enablePlugin(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[PN]&&(r9(),this.hot.getPlugin(PN).disablePlugin()),super.enablePlugin()}disablePlugin(){super.disablePlugin()}registerShortcuts(){super.registerShortcuts(),this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Shift","Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();return e.row===-1&&e.col>=0&&this.sort(this.getNextSortConfig(e.col,z_)),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.isHeader()},relativeToGroup:Iu,position:"before",group:o9})}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(o9)}sort(e){super.sort(e)}clearSort(){super.clearSort()}isSorted(){return super.isSorted()}getSortConfig(e){return super.getSortConfig(e)}setSortConfig(e){super.setSortConfig(e)}getNormalizedSortConfigs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)?e:[e]}updateHeaderClasses(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];super.updateHeaderClasses(e,...i),Ze(e,_2e(e)),this.enabled!==!1&&ce(e,S2e(...i))}onUpdateSettings(e){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[PN]&&r9(),super.onUpdateSettings(e)}onAfterOnCellMouseDown(e,t){Zk(t.row,t.col,e)!==!1&&this.wasClickableHeaderClicked(e,t.col)&&(this.hot.getShortcutManager().isCtrlPressed()?(this.hot.deselectCell(),this.hot.selectColumns(t.col),this.sort(this.getNextSortConfig(t.col,z_))):this.sort(this.getColumnNextConfig(t.col)))}}function a9(n,e,t){return(e=A2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A2e(n){var e=P2e(n,"string");return typeof e=="symbol"?e:e+""}function P2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const I2e="multipleSelectionHandles",O2e=160;class k2e extends Lt{constructor(){super(...arguments),a9(this,"dragged",[]),a9(this,"lastSetCell",null)}static get PLUGIN_KEY(){return I2e}static get PLUGIN_PRIORITY(){return O2e}isEnabled(){return sc()}enablePlugin(){this.enabled||(this.registerListeners(),super.enablePlugin())}registerListeners(){const e=this,{rootElement:t}=this.hot;function i(r){if(e.dragged.length===1)return e.dragged.splice(0,e.dragged.length),!0;const s=e.dragged.indexOf(r);if(s===-1)return!1;s===0?e.dragged=e.dragged.slice(0,1):s===1&&(e.dragged=e.dragged.slice(-1))}this.eventManager.addEventListener(t,"touchstart",r=>{let s;if(Ue(r.target,"topSelectionHandle-HitArea"))return s=e.hot.getSelectedRangeLast(),e.dragged.push("top"),e.touchStartRange={width:s.getWidth(),height:s.getHeight(),direction:s.getDirection()},r.preventDefault(),!1;if(Ue(r.target,"bottomSelectionHandle-HitArea"))return s=e.hot.getSelectedRangeLast(),e.dragged.push("bottom"),e.touchStartRange={width:s.getWidth(),height:s.getHeight(),direction:s.getDirection()},r.preventDefault(),!1}),this.eventManager.addEventListener(t,"touchend",r=>{if(Ue(r.target,"topSelectionHandle-HitArea"))return i.call(e,"top"),e.touchStartRange=void 0,r.preventDefault(),!1;if(Ue(r.target,"bottomSelectionHandle-HitArea"))return i.call(e,"bottom"),e.touchStartRange=void 0,r.preventDefault(),!1}),this.eventManager.addEventListener(t,"touchmove",r=>{const{rootDocument:s}=this.hot;let o,a,l,c,u,h;if(e.dragged.length===0)return;const d=s.elementFromPoint(r.touches[0].clientX,r.touches[0].clientY);!d||d===e.lastSetCell||((d.nodeName==="TD"||d.nodeName==="TH")&&(o=e.hot.getCoords(d),o.col===-1&&(o.col=0),a=e.hot.getSelectedRangeLast(),l=a.getWidth(),c=a.getHeight(),u=a.getDirection(),l===1&&c===1&&e.hot.selection.setRangeEnd(o),h=e.getCurrentRangeCoords(a,o,e.touchStartRange.direction,u,e.dragged[0]),h.start!==null&&e.hot.selection.setRangeStart(h.start),e.hot.selection.setRangeEnd(h.end),e.lastSetCell=d),r.preventDefault())})}getCurrentRangeCoords(e,t,i,r,s){const o=e.getTopStartCorner(),a=e.getBottomEndCorner(),l=e.getBottomStartCorner(),c=e.getTopEndCorner();let u={start:null,end:null};switch(i){case"NE-SW":switch(r){case"NE-SW":case"NW-SE":s==="top"?u={start:this.hot._createCellCoords(t.row,e.highlight.col),end:this.hot._createCellCoords(l.row,t.col)}:u={start:this.hot._createCellCoords(e.highlight.row,t.col),end:this.hot._createCellCoords(t.row,o.col)};break;case"SE-NW":s==="bottom"&&(u={start:this.hot._createCellCoords(a.row,t.col),end:this.hot._createCellCoords(t.row,o.col)});break}break;case"NW-SE":switch(r){case"NE-SW":s==="top"?u={start:t,end:l}:u.end=t;break;case"NW-SE":s==="top"?u={start:t,end:a}:u.end=t;break;case"SE-NW":s==="top"?u={start:t,end:o}:u.end=t;break;case"SW-NE":s==="top"?u={start:t,end:c}:u.end=t;break}break;case"SW-NE":switch(r){case"NW-SE":s==="bottom"?u={start:this.hot._createCellCoords(t.row,o.col),end:this.hot._createCellCoords(l.row,t.col)}:u={start:this.hot._createCellCoords(o.row,t.col),end:this.hot._createCellCoords(t.row,a.col)};break;case"SW-NE":s==="top"?u={start:this.hot._createCellCoords(e.highlight.row,t.col),end:this.hot._createCellCoords(t.row,a.col)}:u={start:this.hot._createCellCoords(t.row,o.col),end:this.hot._createCellCoords(o.row,t.col)};break;case"SE-NW":s==="bottom"?u={start:this.hot._createCellCoords(t.row,c.col),end:this.hot._createCellCoords(o.row,t.col)}:s==="top"&&(u={start:l,end:t});break}break;case"SE-NW":switch(r){case"NW-SE":case"NE-SW":case"SW-NE":s==="top"&&(u.end=t);break;case"SE-NW":s==="top"?u.end=t:u={start:t,end:o};break}break}return u}isDragged(){return this.dragged.length>0}}function IN(){let{label:n="",colspan:e=1,origColspan:t=1,collapsible:i=!1,crossHiddenColumns:r=[],isCollapsed:s=!1,isHidden:o=!1,isRoot:a=!1,isPlaceholder:l=!1,headerClassNames:c=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{label:n,colspan:e,origColspan:t,collapsible:i,isCollapsed:s,crossHiddenColumns:r,isHidden:o,isRoot:a,isPlaceholder:l,headerClassNames:c}}function l9(){return{label:"",isPlaceholder:!0}}function D2e(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0;const t=[];if(e===0)return t;V(n,r=>{const s=[];let o=0;t.push(s),V(r,a=>{const l=IN();if(st(a)){const{label:u,colspan:h,headerClassName:d}=a;l.label=Ln(u),typeof h=="number"&&h>1&&(l.colspan=h,l.origColspan=h),typeof d=="string"&&(l.headerClassNames=[...d.split(" ")])}else l.label=Ln(a);o+=l.origColspan;let c=!1;if(o>=e&&(l.colspan=l.origColspan-(o-e),l.origColspan=l.colspan,c=!0),s.push(l),l.colspan>1)for(let u=0;u<l.colspan-1;u++)s.push(l9());return!c})});const i=Math.max(...pt(t,r=>r.length));return V(t,r=>{if(r.length<i){const s=pt(new Array(i-r.length),()=>IN());r.splice(r.length,0,...s)}}),t}function ON(n,e,t){N2e(n,e),e.set(n,t)}function N2e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ra(n,e){return n.get(c9(n,e))}function Yw(n,e,t){return n.set(c9(n,e),t),t}function c9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const u9=["label","collapsible"];var kc=new WeakMap,pf=new WeakMap,kN=new WeakMap;class L2e{constructor(){ON(this,kc,[]),ON(this,pf,0),ON(this,kN,1/0)}setColumnsLimit(e){Yw(kN,this,e)}setData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Yw(kc,this,D2e(e,ra(kN,this))),Yw(pf,this,ra(kc,this).length)}getData(){return ra(kc,this)}mergeWith(e){V(e,t=>{let{row:i,col:r,...s}=t;const o=this.getHeaderSettings(i,r);o!==null&&oi(o,s,u9)})}map(e){V(ra(kc,this),t=>{V(t,i=>{const r=e({...i});st(r)&&oi(i,r,u9)})})}getHeaderSettings(e,t){var i;if(e>=ra(pf,this)||e<0)return null;const r=ra(kc,this)[e];return Array.isArray(r)===!1||t>=r.length?null:(i=r[t])!==null&&i!==void 0?i:null}getHeadersSettings(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=[];if(e>=ra(pf,this)||e<0)return r;const s=ra(kc,this)[e];let o=0;for(let a=t;a<s.length;a++){const l=s[a];if(l.isPlaceholder)throw new Error("The first column settings cannot overlap the other header layers");if(o+=l.colspan,r.push(l),l.colspan>1&&(a+=l.colspan-1),o===i)break;if(o>i)throw new Error("The last column settings cannot overlap the other header layers")}return r}getLayersCount(){return ra(pf,this)}getColumnsCount(){return ra(pf,this)>0?ra(kc,this)[0].length:0}clear(){Yw(kc,this,[]),Yw(pf,this,0)}}function DN(n,e,t){return(e=H2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function H2e(n){var e=$2e(n,"string");return typeof e=="symbol"?e:e+""}function $2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const h9="DF-pre-order";function d9(n,e){let t=n.call(e,this);for(let i=0;i<this.childs.length;i++){if(t===!1)return!1;t=d9.call(this.childs[i],n,e)}return t}const F2e="DF-post-order";function f9(n,e){for(let t=0;t<this.childs.length;t++)if(f9.call(this.childs[t],n,e)===!1)return!1;return n.call(e,this)}const g9="BF";function B2e(n,e){const t=[this];function i(){if(t.length===0)return;const r=t.shift();t.push(...r.childs),n.call(e,r)!==!1&&i()}i()}const V2e=g9,p9=new Map([[h9,d9],[F2e,f9],[g9,B2e]]);class g1{constructor(e){DN(this,"data",{}),DN(this,"parent",null),DN(this,"childs",[]),this.data=e}addChild(e){e.parent=this,this.childs.push(e)}cloneTree(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this;const t=new g1({...e.data});for(let i=0;i<e.childs.length;i++)t.addChild(this.cloneTree(e.childs[i]));return t}replaceTreeWith(e){this.data={...e.data},this.childs=[];for(let t=0;t<e.childs.length;t++)this.addChild(e.childs[t])}walkDown(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V2e;if(!p9.has(t))throw new Error(`Traversal strategy "${t}" does not exist`);p9.get(t).call(this,e,this)}walkUp(e){const t=this,i=r=>{e.call(t,r)!==!1&&r.parent!==null&&i(r.parent)};i(this)}}function NN(n,e,t){W2e(n,e),e.set(n,t)}function W2e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Or(n,e){return n.get(m9(n,e))}function j2e(n,e,t){return n.set(m9(n,e),t),t}function m9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Hp=new WeakMap,mf=new WeakMap,$p=new WeakMap;class z2e{constructor(e){NN(this,Hp,new Map),NN(this,mf,new Map),NN(this,$p,null),j2e($p,this,e)}getRoots(){return Array.from(Or(Hp,this).values())}getRootByColumn(e){let t;return Or(mf,this).has(e)&&(t=Or(Hp,this).get(Or(mf,this).get(e))),t}getNode(e,t){const i=this.getRootByColumn(t);if(!i)return;const r=t-Or(mf,this).get(t);let s=0,o;return i.walkDown(a=>{const{data:{origColspan:l,headerLevel:c}}=a;if(e===c){if(r>=s&&r<=s+l-1)return o=a,o.data.isRoot=t===o.data.columnIndex,!1;s+=l}}),o}rebuildTreeIndex(){let e=0;Or(mf,this).clear(),V(Or(Hp,this),t=>{let[,{data:{colspan:i}}]=t;for(let r=e;r<e+i;r++)Or(mf,this).set(r,e);e+=i})}buildTree(){this.clear();const e=Or($p,this).getColumnsCount();let t=0;for(;t<e;){const i=Or($p,this).getHeaderSettings(0,t),r=new g1;Or(Hp,this).set(t,r),this.buildLeaves(r,t,0,i.origColspan),t+=i.origColspan}this.rebuildTreeIndex()}buildLeaves(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;const s=Or($p,this).getHeadersSettings(i,t,r);i+=1,V(s,o=>{const a={...o,headerLevel:i-1,columnIndex:t};let l;i===1?(e.data=a,l=e):(l=new g1(a),e.addChild(l)),i<Or($p,this).getLayersCount()&&this.buildLeaves(l,t,i,o.origColspan),t+=o.origColspan})}clear(){Or(Hp,this).clear(),Or(mf,this).clear()}}function b9(n,e){n.walkDown(t=>{let{data:i,childs:r}=t;if(!i.isHidden&&(e(i.columnIndex),r.length===0))for(let s=1;s<i.colspan;s++)e(i.columnIndex+s)})}function p1(n,e){let{childs:t}=n;if(t.length!==0)return t[0].data[e]}function m1(n){return p1(n,"origColspan")===n.data.origColspan}function LN(n){const{data:e,childs:t}=n;if(!e.isCollapsed||e.isHidden||e.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(m1(n))return LN(t[0]);e.isCollapsed=!1;const r=t.slice(1),s=new Set;let o=0;if(r.length>0)V(r,a=>{a.replaceTreeWith(a.data.clonedTree),a.data.clonedTree=null;const l=a.data;o+=l.colspan,b9(a,c=>{s.add(c)})});else{const{colspan:a,origColspan:l,columnIndex:c}=e;o=l-a;for(let u=1;u<l;u++)s.add(c+u)}return n.walkUp(a=>{const{data:l}=a;l.colspan+=o,l.colspan>=l.origColspan?(l.colspan=l.origColspan,l.isCollapsed=!1):m1(a)&&(l.isCollapsed=p1(a,"isCollapsed"))}),{rollbackModification:()=>HN(n),affectedColumns:Array.from(s),colspanCompensation:o}}function HN(n){var e;const{data:t,childs:i}=n;if(t.isCollapsed||t.isHidden||t.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(m1(n))return HN(i[0]);t.isCollapsed=!0;const s=i.slice(1),o=new Set;if(s.length>0)V(s,l=>{b9(l,c=>{o.add(c)}),l.data.clonedTree=l.cloneTree(),l.walkDown(c=>{let{data:u}=c;u.isHidden=!0})});else{const{origColspan:l,columnIndex:c}=t;for(let u=1;u<l;u++){const h=c+u;o.add(h)}}const a=t.colspan-((e=p1(n,"colspan"))!==null&&e!==void 0?e:1);return n.walkUp(l=>{const{data:c}=l;c.colspan-=a,c.colspan<=1?(c.colspan=1,c.isCollapsed=!0):m1(l)&&(c.isCollapsed=p1(l,"isCollapsed"))}),{rollbackModification:()=>LN(n),affectedColumns:Array.from(o),colspanCompensation:a}}function U2e(n,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(n.childs.length>0)throw new Error(Ut`The passed node is not the last node on the tree. Only for\x20
the last node, the hide column modification can be applied.`);const{crossHiddenColumns:t}=n.data;if(t.includes(e))return;let i=!1;n.walkUp(r=>{const{data:{collapsible:s}}=r;if(s)return i=!0,!1}),!i&&n.walkUp(r=>{const{data:s}=r;s.crossHiddenColumns.push(e),s.colspan>1?s.colspan-=1:s.isHidden=!0})}function G2e(n,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(n.childs.length>0)throw new Error(Ut`The passed node is not the last node on the tree. Only for\x20
the last node, the show column modification can be applied.`);const{crossHiddenColumns:t}=n.data;if(!t.includes(e))return;let i=!1;n.walkUp(r=>{const{data:{collapsible:s}}=r;if(s)return i=!0,!1}),!i&&n.walkUp(r=>{const{data:s}=r;s.crossHiddenColumns.splice(s.crossHiddenColumns.indexOf(e),1),!s.isHidden&&s.colspan<s.origColspan&&(s.colspan+=1),s.isHidden=!1})}const v9=new Map([["collapse",HN],["expand",LN],["hide-column",U2e],["show-column",G2e]]);function Y2e(n,e,t){if(!v9.has(n))throw new Error(`The node modifier action ("${n}") does not exist.`);return v9.get(n)(e,t)}function b1(n){const e=[];return V(n,t=>{t.walkDown(i=>{const r=i.data,{origColspan:s,columnIndex:o,headerLevel:a,crossHiddenColumns:l}=r,c=q2e(e,a);let u=!1;for(let h=o;h<o+s;h++)if(l.includes(h)||u)c.push(l9());else{const f=K2e(r);f.isRoot=!0,c.push(f),u=!0}})}),e}function K2e(n){const{crossHiddenColumns:e,...t}=IN(n);return t}function q2e(n,e){let t;return Array.isArray(n[e])?t=n[e]:(t=[],n[e]=t),t}function $N(n,e,t){X2e(n,e),e.set(n,t)}function X2e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Kw(n,e,t){return n.set(w9(n,e),t),t}function jn(n,e){return n.get(w9(n,e))}function w9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var gl=new WeakMap,Qr=new WeakMap,bf=new WeakMap;class Z2e{constructor(){$N(this,gl,new L2e),$N(this,Qr,new z2e(jn(gl,this))),$N(this,bf,[[]])}setState(e){jn(gl,this).setData(e);let t=!1;try{jn(Qr,this).buildTree()}catch{jn(Qr,this).clear(),jn(gl,this).clear(),t=!0}return Kw(bf,this,b1(jn(Qr,this).getRoots())),t}setColumnsLimit(e){jn(gl,this).setColumnsLimit(e)}mergeStateWith(e){const t=pt(e,i=>{let{row:r,...s}=i;return{row:r<0?this.rowCoordsToLevel(r):r,...s}});jn(gl,this).mergeWith(t),jn(Qr,this).buildTree(),Kw(bf,this,b1(jn(Qr,this).getRoots()))}mapState(e){jn(gl,this).map(e),jn(Qr,this).buildTree(),Kw(bf,this,b1(jn(Qr,this).getRoots()))}mapNodes(e){return si(jn(Qr,this).getRoots(),(t,i)=>(i.walkDown(r=>{const s=e(r.data);s!==void 0&&t.push(s)}),t),[])}triggerNodeModification(e,t,i){t<0&&(t=this.rowCoordsToLevel(t));const r=jn(Qr,this).getNode(t,i);let s;return r&&(s=Y2e(e,r,i),Kw(bf,this,b1(jn(Qr,this).getRoots()))),s}triggerColumnModification(e,t){return this.triggerNodeModification(e,-1,t)}rowCoordsToLevel(e){if(e>=0)return null;const t=e+Math.max(this.getLayersCount(),1);return t<0?null:t}levelToRowCoords(e){if(e<0)return null;const t=e-Math.max(this.getLayersCount(),1);return t>=0?null:t}getHeaderSettings(e,t){var i,r;return e<0&&(e=this.rowCoordsToLevel(e)),e===null||e>=this.getLayersCount()?null:(i=(r=jn(bf,this)[e])===null||r===void 0?void 0:r[t])!==null&&i!==void 0?i:null}getHeaderTreeNodeData(e,t){const i=this.getHeaderTreeNode(e,t);return i?{...i.data}:null}getHeaderTreeNode(e,t){if(e<0&&(e=this.rowCoordsToLevel(e)),e===null||e>=this.getLayersCount())return null;const i=jn(Qr,this).getNode(e,t);return i||null}findTopMostEntireHeaderLevel(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;const r=i-e+1;let s=!1,o=null;for(let a=e;a<=i;a++){const l=jn(Qr,this).getRootByColumn(a);if(!l)break;s=!0,l.walkDown(c=>{const{columnIndex:u,headerLevel:h,origColspan:d,isHidden:f}=c.data;f||d<=r&&u>=e&&u+d-1<=i&&(o===null||h<o)&&(o=h)},h9)}return s&&o===null?-1:this.levelToRowCoords((t=o)!==null&&t!==void 0?t:0)}findLeftMostColumnIndex(e,t){var i;const{isRoot:r}=(i=this.getHeaderSettings(e,t))!==null&&i!==void 0?i:{isRoot:!0};if(r)return t;let s=t-1;for(;s>=0;){var o;const{isRoot:a}=(o=this.getHeaderSettings(e,s))!==null&&o!==void 0?o:{isRoot:!0};if(a)break;s-=1}return s}findRightMostColumnIndex(e,t){var i;const{isRoot:r,origColspan:s}=(i=this.getHeaderSettings(e,t))!==null&&i!==void 0?i:{isRoot:!0,origColspan:1};if(r)return t+s-1;let o=t+1;for(;o<this.getColumnsCount();){var a;const{isRoot:l}=(a=this.getHeaderSettings(e,o))!==null&&a!==void 0?a:{isRoot:!0};if(l)break;o+=1}return o-1}getLayersCount(){return jn(gl,this).getLayersCount()}getColumnsCount(){return jn(gl,this).getColumnsCount()}clear(){Kw(bf,this,[]),jn(gl,this).clear(),jn(Qr,this).clear()}}function qw(n,e,t){return(e=Q2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Q2e(n){var e=J2e(n,"string");return typeof e=="symbol"?e:e+""}function J2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class eFe{constructor(e,t){qw(this,"hot",void 0),qw(this,"nestedHeaderSettingsGetter",void 0),qw(this,"layersCount",0),qw(this,"container",void 0),qw(this,"widthsMap",void 0),this.hot=e,this.nestedHeaderSettingsGetter=t,this.widthsMap=this.hot.columnIndexMapper.createAndRegisterIndexMap("nestedHeaders.widthsMap","physicalIndexToValue")}setLayersCount(e){return this.layersCount=e,this}getWidth(e){return this.widthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e))}buildWidthsMap(){this.container=this.hot.rootDocument.createElement("div"),this.container.classList.add("handsontable","htGhostTable","htAutoSize"),this._buildGhostTable(this.container),this.hot.rootDocument.body.appendChild(this.container);const e=this.container.querySelectorAll("tr:last-of-type th"),t=e.length;this.widthsMap.clear();for(let i=0;i<t;i++){const r=this.hot.columnIndexMapper.getVisualFromRenderableIndex(i),s=this.hot.toPhysicalColumn(r);this.widthsMap.setValueAtIndex(s,e[i].offsetWidth)}this.container.parentNode.removeChild(this.container),this.container=null}_buildGhostTable(e){const{rootDocument:t,columnIndexMapper:i}=this.hot,r=t.createDocumentFragment(),s=t.createElement("table"),o=!!this.hot.getSettings().dropdownMenu,a=i.getRenderableIndexesLength();for(let l=0;l<this.layersCount;l++){const c=t.createElement("tr");for(let u=0;u<a;u++){let h=i.getVisualFromRenderableIndex(u);h===null&&(h=u);const d=t.createElement("th"),f=this.nestedHeaderSettingsGetter(l,h);if(f&&(!f.isPlaceholder||f.isHidden)){let g=f.label;o&&(g+='<button class="changeType"></button>'),gd(d,g),d.colSpan=f.colspan,c.appendChild(d)}}s.appendChild(c)}r.appendChild(s),e.appendChild(r)}clear(){this.widthsMap.clear(),this.container=null}}function tFe(n,e){C9(n,e),e.add(n)}function y9(n,e,t){return(e=nFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nFe(n){var e=iFe(n,"string");return typeof e=="symbol"?e:e+""}function iFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function v1(n,e,t){C9(n,e),e.set(n,t)}function C9(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vf(n,e,t){return n.set(zn(n,e),t),t}function xt(n,e){return n.get(zn(n,e))}function zn(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const S9="nestedHeaders",rFe=280;var Jt=new WeakMap,sh=new WeakMap,Xw=new WeakMap,w1=new WeakMap,ei=new WeakSet;class sFe extends Lt{constructor(){super(...arguments),tFe(this,ei),v1(this,Jt,new Z2e),v1(this,sh,null),v1(this,Xw,null),v1(this,w1,!1),y9(this,"ghostTable",new eFe(this.hot,(e,t)=>this.getHeaderSettings(e,t))),y9(this,"detectedOverlappedHeaders",!1)}static get PLUGIN_KEY(){return S9}static get PLUGIN_PRIORITY(){return rFe}isEnabled(){return!!this.hot.getSettings()[S9]}enablePlugin(){var e=this;if(this.enabled)return;const{nestedHeaders:t}=this.hot.getSettings();(!Array.isArray(t)||!Array.isArray(t[0]))&&Yt(Ut`Your Nested Headers plugin configuration is invalid. The settings has to be\x20
                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]`),this.addHook("init",()=>zn(ei,this,CFe).call(this)),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,SFe).call(e,...r)}),this.addHook("beforeOnCellMouseDown",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,cFe).call(e,...r)}),this.addHook("afterOnCellMouseDown",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,uFe).call(e,...r)}),this.addHook("beforeOnCellMouseOver",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,hFe).call(e,...r)}),this.addHook("beforeOnCellMouseUp",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,dFe).call(e,...r)}),this.addHook("beforeSelectionHighlightSet",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,fFe).call(e,...r)}),this.addHook("modifyTransformStart",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,gFe).call(e,...r)}),this.addHook("afterSelection",()=>zn(ei,this,y1).call(this)),this.addHook("afterSelectionFocusSet",()=>zn(ei,this,y1).call(this)),this.addHook("beforeViewportScrollHorizontally",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,oFe).call(e,...r)}),this.addHook("afterGetColumnHeaderRenderers",i=>zn(ei,this,mFe).call(this,i)),this.addHook("modifyColWidth",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,vFe).call(e,...r)}),this.addHook("modifyColumnHeaderValue",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,wFe).call(e,...r)}),this.addHook("beforeHighlightingColumnHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,aFe).call(e,...r)}),this.addHook("beforeCopy",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,lFe).call(e,...r)}),this.addHook("beforeSelectColumns",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,pFe).call(e,...r)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,bFe).call(e,...r)}),this.addHook("modifyFocusedElement",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return zn(ei,e,yFe).call(e,...r)}),this.hot.columnIndexMapper.addLocalHook("cacheUpdated",()=>zn(ei,this,y1).call(this)),this.hot.rowIndexMapper.addLocalHook("cacheUpdated",()=>zn(ei,this,y1).call(this)),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(!this.hot.view)return;const{nestedHeaders:e}=this.hot.getSettings();xt(Jt,this).setColumnsLimit(this.hot.countCols()),Array.isArray(e)&&(this.detectedOverlappedHeaders=xt(Jt,this).setState(e)),this.detectedOverlappedHeaders&&Yt(Ut`Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\x20
                        is currently not supported.`),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach((t,i)=>{const r=t===!0?"hide-column":"show-column";xt(Jt,this).triggerColumnModification(r,i)}),!xt(sh,this)&&this.enabled&&vf(sh,this,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe(t=>{t.forEach(i=>{let{op:r,index:s,newValue:o}=i;if(r==="replace"){const a=o===!0?"hide-column":"show-column";xt(Jt,this).triggerColumnModification(a,s)}}),this.ghostTable.buildWidthsMap()})),this.ghostTable.setLayersCount(this.getLayersCount()).buildWidthsMap(),super.updatePlugin()}disablePlugin(){this.clearColspans(),xt(Jt,this).clear(),xt(sh,this).unsubscribe(),vf(sh,this,null),this.ghostTable.clear(),super.disablePlugin()}getStateManager(){return xt(Jt,this)}getLayersCount(){return xt(Jt,this).getLayersCount()}getHeaderSettings(e,t){return xt(Jt,this).getHeaderSettings(e,t)}clearColspans(){if(!this.hot.view)return;const{_wt:e}=this.hot.view,t=e.getSetting("columnHeaders").length,i=e.wtTable.THEAD,r=e.wtOverlays.topOverlay.clone.wtTable.THEAD,s=e.wtOverlays.topInlineStartCornerOverlay?e.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null;for(let o=0;o<t;o++){const a=i.childNodes[o];if(!a)break;const l=r.childNodes[o],c=s?s.childNodes[o]:null;for(let u=0,h=a.childNodes.length;u<h;u++)a.childNodes[u].removeAttribute("colspan"),Ze(a.childNodes[u],"hiddenHeader"),l&&l.childNodes[u]&&(l.childNodes[u].removeAttribute("colspan"),Ze(l.childNodes[u],"hiddenHeader")),s&&c&&c.childNodes[u]&&(c.childNodes[u].removeAttribute("colspan"),Ze(c.childNodes[u],"hiddenHeader"))}}headerRendererFactory(e){var t=this;const i=this.hot.view._wt.getSetting("fixedColumnsStart");return(r,s)=>{var o;const{columnIndexMapper:a,view:l}=this.hot;let c=a.getVisualFromRenderableIndex(r);c===null&&(c=r),s.removeAttribute("colspan"),Ze(s,"hiddenHeader");const{colspan:u,isHidden:h,isPlaceholder:d,headerClassNames:f}=(o=xt(Jt,this).getHeaderSettings(e,c))!==null&&o!==void 0?o:{label:""};if(d||h)ce(s,"hiddenHeader");else if(u>1){var g,p;const{wtOverlays:m}=l._wt,v=(g=m.topInlineStartCornerOverlay)===null||g===void 0?void 0:g.clone.wtTable.THEAD.contains(s),y=(p=m.inlineStartOverlay)===null||p===void 0?void 0:p.clone.wtTable.THEAD.contains(s),w=v||y?Math.min(u,i-r):u;w>1&&s.setAttribute("colspan",w)}if(this.hot.view.appendColHeader(c,s,function(){return t.getColumnHeaderValue(...arguments)},e),!d&&!h){const m=s.querySelector("div.relative");m&&f&&f.length>0&&(Ze(m,this.hot.getColumnMeta(c).headerClassName),ce(m,f))}}}getColumnHeaderValue(e,t){var i;const{isHidden:r,isPlaceholder:s}=(i=xt(Jt,this).getHeaderSettings(t,e))!==null&&i!==void 0?i:{};return s||r?"":this.hot.getColHeader(e,t)}destroy(){vf(Jt,this,null),xt(sh,this)!==null&&(xt(sh,this).unsubscribe(),vf(sh,this,null)),super.destroy()}_getHeaderTreeNodeDataByCoords(e){if(!(e.row>=0||e.col<0))return xt(Jt,this).getHeaderTreeNodeData(e.row,e.col)}}function y1(){var n;const e=(n=this.hot)===null||n===void 0?void 0:n.getSelectedRangeLast();if(!e)return;const{highlight:t}=e;if(t.isHeader()&&t.col>=0){const r=xt(Jt,this).findLeftMostColumnIndex(t.row,t.col),s=this.hot.selection.highlight.getFocus();s.visualCellRange.highlight.col=r,s.visualCellRange.from.col=r,s.visualCellRange.to.col=r,s.commit()}}function oFe(n){const e=this.hot.getSelectedRangeLast();if(!e)return n;const{highlight:t}=e;if(!(t.isHeader()&&t.col>=0))return n;const r=this.hot.view.getFirstFullyVisibleColumn(),s=this.hot.view.getLastFullyVisibleColumn(),o=xt(Jt,this).findLeftMostColumnIndex(t.row,t.col),a=xt(Jt,this).findRightMostColumnIndex(t.row,t.col);return o<r&&a>s?n:o<r?o:a}function aFe(n,e,t){const i=xt(Jt,this).getHeaderTreeNodeData(e,n);if(!i)return n;const{columnCursor:r,selectionType:s,selectionWidth:o}=t,{isRoot:a,colspan:l}=xt(Jt,this).getHeaderSettings(e,n);if(s===pI){if(!a)return i.columnIndex}else if(s===_8&&(l>o-r||!a))return null;return n}function lFe(n,e,t){let{columnHeadersCount:i}=t;if(i!==0)for(let s=0;s<e.length;s++){const{startRow:o,startCol:a,endRow:l,endCol:c}=e[s],u=l-o+1,h=a-c+1;if(o>=0||h===1)break;for(let d=a;d<=c;d++)for(let f=o;f<=l;f++){var r;const g=u+f,p=d-a;if(p===0)continue;((r=xt(Jt,this).getHeaderTreeNodeData(f,d))===null||r===void 0?void 0:r.isRoot)===!1&&(n[g][p]="")}}}function cFe(n,e,t,i){this._getHeaderTreeNodeDataByCoords(e)&&(i.column=!0)}function uFe(n,e){const t=this._getHeaderTreeNodeDataByCoords(e);if(!t)return;vf(Xw,this,e.clone()),vf(w1,this,!0);const{selection:i}=this.hot,r=i.isSelected()?i.getSelectedRange().current():null,s=[],{columnIndex:o,origColspan:a}=t,l=!i.inInSelection(e);n.shiftKey&&r?e.col<r.from.col?s.push(r.getTopEndCorner().col,o,e.row):e.col>r.from.col?s.push(r.getTopStartCorner().col,o+a-1,e.row):s.push(o,o+a-1,e.row):(bS(n)||Eu(n)&&l||E5(n))&&s.push(o,o+a-1,e.row),i.selectColumns(...s)}function hFe(n,e,t,i){if(!this.hot.view.isMouseDown())return;const r=this._getHeaderTreeNodeDataByCoords(e);if(!r)return;const{columnIndex:s,origColspan:o}=r,a=this.hot.getSelectedRangeLast(),l=a.getTopStartCorner(),c=a.getBottomEndCorner(),{from:u}=a;i.column=!0,i.cell=!0;const h=[],d=Kt(e.row,-1/0,-1);e.col<u.col?h.push(c.col,s,d):e.col>u.col?h.push(l.col,s+o-1,d):h.push(s,s+o-1,d),this.hot.selection.selectColumns(...h)}function dFe(){vf(w1,this,!1)}function fFe(){const{navigableHeaders:n}=this.hot.getSettings();if(!this.hot.view.isMouseDown()||!xt(w1,this)||!n)return;const e=this.hot.getSelectedRangeLast(),t=e.getTopStartCorner().col,i=e.getBottomEndCorner().col,{columnIndex:r,origColspan:s}=xt(Jt,this).getHeaderTreeNodeData(xt(Xw,this).row,xt(Xw,this).col);if(e.setHighlight(xt(Xw,this)),s>e.getWidth()||r<t||r+s-1>i){const o=xt(Jt,this).findTopMostEntireHeaderLevel(Kt(t,r,r+s-1),Kt(i,r,r+s-1));e.highlight.row=o,e.highlight.col=e.from.col}}function gFe(n){const{highlight:e}=this.hot.getSelectedRangeLast(),t=this.hot._createCellCoords(e.row+n.row,e.col+n.col);if(!(t.isHeader()&&t.col>=0))return;const r=xt(Jt,this).findLeftMostColumnIndex(t.row,t.col),s=xt(Jt,this).findRightMostColumnIndex(t.row,t.col);if(n.col<0){const o=e.col>=r&&e.col<=s?r-1:s,a=this.hot.columnIndexMapper.getNearestNotHiddenIndex(o,-1);a===null?n.col=-this.hot.view.countRenderableColumnsInRange(0,e.col):n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(a,e.col)-1,1)}else if(n.col>0){const o=e.col>=r&&e.col<=s?s+1:r,a=this.hot.columnIndexMapper.getNearestNotHiddenIndex(o,1);a===null?n.col=this.hot.view.countRenderableColumnsInRange(e.col,this.hot.countCols()):n.col=Math.max(this.hot.view.countRenderableColumnsInRange(e.col,a)-1,1)}}function pFe(n,e){const t=n.row,i=this._getHeaderTreeNodeDataByCoords({row:t,col:n.col}),r=this._getHeaderTreeNodeDataByCoords({row:t,col:e.col});e.col<n.col?(i&&(n.col=i.columnIndex+i.origColspan-1),r&&(e.col=r.columnIndex)):e.col>=n.col&&(i&&(n.col=i.columnIndex),r&&(e.col=r.columnIndex+r.origColspan-1))}function mFe(n){n.length=0;for(let e=0;e<xt(Jt,this).getLayersCount();e++)n.push(this.headerRendererFactory(e))}function bFe(n){const e=xt(Jt,this).getLayersCount();let t=n.startColumn,i=!!e;for(let r=0;r<e;r++){const s=xt(Jt,this).findLeftMostColumnIndex(r,n.startColumn),o=this.hot.columnIndexMapper.getRenderableFromVisualIndex(s);if(s>=0&&(i=!1),or(o)&&o<n.startColumn){t=o;break}}n.startColumn=i?xt(Jt,this).getHeaderTreeNodeData(0,t).columnIndex:t}function vFe(n,e){const t=this.ghostTable.getWidth(e);return n>t?n:t}function wFe(n,e,t){var i;const{label:r}=(i=xt(Jt,this).getHeaderTreeNodeData(t,e))!==null&&i!==void 0?i:{label:""};return r}function yFe(n,e){if(n<0)return this.hot.getCell(n,xt(Jt,this).findLeftMostColumnIndex(n,e),!0)}function CFe(){this.updatePlugin()}function SFe(n,e){e||this.updatePlugin()}function Zw(n,e,t){return(e=_Fe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Fe(n){var e=RFe(n,"string");return typeof e=="symbol"?e:e+""}function RFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class EFe{constructor(e,t){Zw(this,"hot",void 0),Zw(this,"data",null),Zw(this,"plugin",void 0),Zw(this,"parentReference",new WeakMap),Zw(this,"cache",{levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}),this.hot=t,this.plugin=e}setData(e){this.data=e}getData(){return this.data}getRawSourceData(){let e=null;return this.plugin.disableCoreAPIModifiers(),e=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),e}updateWithData(e){this.setData(e),this.rewriteCache()}rewriteCache(){this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},He(0,this.data.length-1,e=>{this.cacheNode(this.data[e],0,null)})}cacheNode(e,t,i){this.cache.levels[t]||(this.cache.levels[t]=[],this.cache.levelCount+=1),this.cache.levels[t].push(e),this.cache.rows.push(e),this.cache.nodeInfo.set(e,{parent:i,row:this.cache.rows.length-1,level:t}),this.hasChildren(e)&&V(e.__children,r=>{this.cacheNode(r,t+1,e)})}getDataObject(e){return e==null?null:this.cache.rows[e]}readTreeNodes(e,t,i,r){let s=!1,o=t;if(isNaN(o)&&o.end)return o;let a=e;return a||(a={__children:this.data},s=!0,o-=1),i!=null&&o===i?{result:a,end:!0}:r!=null&&a===r?{result:o,end:!0}:(o+=1,a.__children&&V(a.__children,l=>{if(this.parentReference.set(l,s?null:a),o=this.readTreeNodes(l,o,i,r),isNaN(o)&&o.end)return!1}),o)}mockParent(){const e=this.mockNode();return e.__children=this.data,e}mockNode(){const e={};return ot(this.data[0],(t,i)=>{e[i]=null}),e}getRowIndex(e){return e==null?null:this.cache.nodeInfo.get(e).row}getRowIndexWithinParent(e){let t=null;isNaN(e)?t=e:t=this.getDataObject(e);const i=this.getRowParent(e);return i==null?this.data.indexOf(t):i.__children.indexOf(t)}countAllRows(){const e={__children:this.data};return this.countChildren(e)}countChildren(e){let t=0,i=e;return isNaN(i)||(i=this.getDataObject(i)),!i||!i.__children?0:(V(i.__children,r=>{t+=1,r.__children&&(t+=this.countChildren(r))}),t)}getRowParent(e){let t;return isNaN(e)?t=e:t=this.getDataObject(e),this.getRowObjectParent(t)}getRowObjectParent(e){return!e||typeof e!="object"?null:this.cache.nodeInfo.get(e).parent}getRowLevel(e){let t=null;return isNaN(e)?t=e:t=this.getDataObject(e),t?this.getRowObjectLevel(t):null}getRowObjectLevel(e){return e==null?null:this.cache.nodeInfo.get(e).level}hasChildren(e){let t=e;return isNaN(t)||(t=this.getDataObject(t)),!!(t.__children&&t.__children.length)}isChild(e){return this.getRowParent(e)!==null}getChild(e,t){var i;return((i=e.__children)===null||i===void 0?void 0:i[t])||null}isRowHighestLevel(e){return!this.isChild(e)}isParent(e){var t;let i=e;return isNaN(i)||(i=this.getDataObject(i)),i&&!!i.__children&&((t=i.__children)===null||t===void 0?void 0:t.length)!==0}addChild(e,t){let i=t;this.hot.runHooks("beforeAddChild",e,i);let r=null;e&&(r=this.getRowIndex(e)),this.hot.runHooks("beforeCreateRow",r+this.countChildren(e)+1,1);let s=e;e||(s=this.mockParent()),s.__children||(s.__children=[]),i||(i=this.mockNode()),s.__children.push(i),this.rewriteCache();const o=this.getRowIndex(i);this.hot.rowIndexMapper.insertIndexes(o,1),this.hot.runHooks("afterCreateRow",o,1),this.hot.runHooks("afterAddChild",e,i)}addChildAtIndex(e,t,i){let r=i,s;if(r||(r=this.mockNode()),this.hot.runHooks("beforeAddChild",e,r,t),e){const a=this.getRowIndex(e)+t+1;this.hot.runHooks("beforeCreateRow",a,1),e.__children.splice(t,null,r),this.rewriteCache(),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(e),"__children",e.__children,"NestedRows.addChildAtIndex"),this.hot.rowIndexMapper.insertIndexes(a,1),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",a,1),s=a}else this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row_above",t,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),s=this.getRowIndex(this.data[t]);r=this.getDataObject(s),this.hot.runHooks("afterAddChild",e,r,t)}addSibling(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"below";const i=this.translateTrimmedRow(e),r=this.getRowParent(i),s=this.getRowIndexWithinParent(i);switch(t){case"below":this.addChildAtIndex(r,s+1,null);break;case"above":this.addChildAtIndex(r,s,null);break}}detachFromParent(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=null;const r=[];Array.isArray(e)?(He(e[0],e[2],d=>{const f=this.translateTrimmedRow(d);r.push(this.getDataObject(f))}),He(0,r.length-2,d=>{this.detachFromParent(r[d],!1)}),i=r[r.length-1]):i=e;const s=this.getRowIndex(i),o=this.countChildren(i),a=this.getRowIndexWithinParent(i),l=this.getRowParent(i),c=this.getRowParent(l),u=this.getRowIndex(c);let h=null;if(this.hot.runHooks("beforeDetachChild",l,i),a!=null){const d=Array.from(new Array(s+o+1).keys()).splice(-1*(o+1));if(this.hot.runHooks("beforeRemoveRow",s,o+1,d,this.plugin.pluginName),l.__children.splice(a,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",s,o+1,d,this.plugin.pluginName),c){h=u+this.countChildren(c);const f=this.getChild(c,this.countChildren(c)-1),g=this.getRowIndex(f);this.hot.runHooks("beforeCreateRow",g+1,o+1,this.plugin.pluginName),c.__children.push(i)}else h=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",h-2,o+1,this.plugin.pluginName),this.data.push(i)}this.rewriteCache(),this.hot.runHooks("afterCreateRow",h-2,o+1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",l,i,this.getRowIndex(i)),t&&this.hot.render()}filterData(e,t,i){const r=[];V(i,s=>{r.push(this.getDataObject(s))}),V(r,s=>{const o=this.getRowIndexWithinParent(s),a=this.getRowParent(s);a===null?this.data.splice(o,1):a.__children.splice(o,1)}),this.rewriteCache()}spliceData(e,t,i){const r=this.getDataObject(e-1);let s=null,o=e;r&&r.__children&&r.__children.length===0?(s=r,o=0):e<this.countAllRows()&&(s=this.getRowParent(e),o=this.getRowIndexWithinParent(e)),s?i?s.__children.splice(o,t,...i):s.__children.splice(o,t):i?this.data.splice(o,t,...i):this.data.splice(o,t),this.rewriteCache()}syncRowWithRawSource(e){let t=e,i=null;do i=this.getRowParent(i),i!==null&&(t=i);while(i!==null);this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(t),"__children",t.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}moveRow(e,t,i,r){const s=t===this.hot.countRows(),o=this.getRowParent(e),a=this.getRowIndexWithinParent(e),l=o.__children.slice(a,a+1),c=e>t;let u=s?this.getRowParent(t-1):this.getRowParent(t);u==null&&(u=this.getRowParent(t-1)),u==null&&(u=this.getDataObject(t-1)),u?u.__children||(u.__children=[]):(u=this.getDataObject(t),u.__children=[]);const h=s||i||r?u.__children.length:this.getRowIndexWithinParent(t),d=o===u;u.__children.splice(h,0,l[0]),o.__children.splice(a+(c&&d?1:0),1),this.syncRowWithRawSource(o),d||this.syncRowWithRawSource(u)}translateTrimmedRow(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(e):e}untranslateTrimmedRow(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(e):e}}function _9(n,e,t){return(e=xFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xFe(n){var e=TFe(n,"string");return typeof e=="symbol"?e:e+""}function TFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class FN{constructor(e,t){_9(this,"hot",void 0),_9(this,"plugin",void 0),this.hot=t,this.plugin=e}}class pl extends FN{static get CSS_CLASSES(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}constructor(e,t){super(e,t),this.dataManager=this.plugin.dataManager,this.collapsingUI=this.plugin.collapsingUI,this.rowHeaderWidthCache=null}appendLevelIndicators(e,t){const i=this.hot.toPhysicalRow(e),r=this.dataManager.getRowLevel(i),s=this.dataManager.getDataObject(i),o=t.getElementsByTagName("DIV")[0],a=o.querySelector("span.rowHeader"),l=o.querySelectorAll('[class^="ht_nesting"]'),c=this.hot.getSettings().ariaTags;if(V(l,u=>{u&&o.removeChild(u)}),ce(t,pl.CSS_CLASSES.indicatorContainer),r){const{rootDocument:u}=this.hot,h=a.cloneNode(!0);o.innerHTML="",He(0,r-1,()=>{const d=u.createElement("SPAN");ce(d,pl.CSS_CLASSES.emptyIndicator),o.appendChild(d)}),o.appendChild(h)}if(this.dataManager.hasChildren(s)){const u=this.hot.rootDocument.createElement("DIV");c&&ze(u,[hd()]),ce(t,pl.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(i)?(ce(u,`${pl.CSS_CLASSES.button} ${pl.CSS_CLASSES.expandButton}`),c&&ze(t,[js(!1)])):(ce(u,`${pl.CSS_CLASSES.button} ${pl.CSS_CLASSES.collapseButton}`),c&&ze(t,[js(!0)])),o.appendChild(u)}}updateRowHeaderWidth(e){let t=e;t||(t=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*t+25),this.hot.render()}}class MFe extends FN{constructor(e,t){var i;super(e,t),i=this,this.dataManager=this.plugin.dataManager,this.collapsedRows=[],this.collapsedRowsStash={stash:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;i.lastCollapsedRows=i.collapsedRows.slice(0),i.expandMultipleChildren(i.lastCollapsedRows,r)},shiftStash:function(r,s){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;s==null&&(s=1/0),V(i.lastCollapsedRows,(a,l)=>{a>=r&&a<s&&(i.lastCollapsedRows[l]=a+o)})},applyStash:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i.collapseMultipleChildren(i.lastCollapsedRows,r),i.lastCollapsedRows=void 0},trimStash:(r,s)=>{He(r,r+s-1,o=>{const a=this.lastCollapsedRows.indexOf(o);a>-1&&this.lastCollapsedRows.splice(a,1)})}}}collapseChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];let s=null,o=null,a=null;return isNaN(e)?(s=e,o=this.dataManager.getRowIndex(s)):(s=this.dataManager.getDataObject(e),o=e),this.dataManager.hasChildren(s)&&V(s.__children,l=>{r.push(this.dataManager.getRowIndex(l))}),a=this.collapseRows(r,!0,!1),i&&this.trimRows(a),t&&this.renderAndAdjust(),this.collapsedRows.indexOf(o)===-1&&this.collapsedRows.push(o),a}collapseMultipleChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];V(e,s=>{r.push(...this.collapseChildren(s,!1,!1))}),i&&this.trimRows(r),t&&this.renderAndAdjust()}collapseRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.collapseRows([e],t)}collapseRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=[];return V(e,s=>{r.push(s),t&&this.collapseChildRows(s,r)}),i&&this.trimRows(r),r}collapseChildRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(this.dataManager.hasChildren(e)){const r=this.dataManager.getDataObject(e);V(r.__children,s=>{const o=this.dataManager.getRowIndex(s);t.push(o),this.collapseChildRows(o,t)})}i&&this.trimRows(t)}expandRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.expandRows([e],t)}expandRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=[];return V(e,s=>{r.push(s),t&&this.expandChildRows(s,r)}),i&&this.untrimRows(r),r}expandChildRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(this.dataManager.hasChildren(e)){const r=this.dataManager.getDataObject(e);V(r.__children,s=>{if(!this.isAnyParentCollapsed(s)){const o=this.dataManager.getRowIndex(s);t.push(o),this.expandChildRows(o,t)}})}i&&this.untrimRows(t)}expandChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];let s=null,o=null,a=null;return isNaN(e)?(s=e,o=this.dataManager.getRowIndex(e)):(s=this.dataManager.getDataObject(e),o=e),this.collapsedRows.splice(this.collapsedRows.indexOf(o),1),this.dataManager.hasChildren(s)&&V(s.__children,l=>{const c=this.dataManager.getRowIndex(l);r.push(c)}),a=this.expandRows(r,!0,!1),i&&this.untrimRows(a),t&&this.renderAndAdjust(),a}expandMultipleChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];V(e,s=>{r.push(...this.expandChildren(s,!1,!1))}),i&&this.untrimRows(r),t&&this.renderAndAdjust()}collapseAll(){const e=this.dataManager.getData(),t=[];V(e,i=>{this.dataManager.hasChildren(i)&&t.push(i)}),this.collapseMultipleChildren(t),this.renderAndAdjust()}expandAll(){const e=this.dataManager.getData(),t=[];V(e,i=>{this.dataManager.hasChildren(i)&&t.push(i)}),this.expandMultipleChildren(t),this.renderAndAdjust()}trimRows(e){this.hot.batchExecution(()=>{V(e,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!0)})},!0)}untrimRows(e){this.hot.batchExecution(()=>{V(e,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!1)})},!0)}areChildrenCollapsed(e){let t=isNaN(e)?e:this.dataManager.getDataObject(e),i=!0;return t===null&&(t={__children:this.dataManager.data}),this.dataManager.hasChildren(t)&&V(t.__children,r=>{const s=this.dataManager.getRowIndex(r);if(!this.plugin.collapsedRowsMap.getValueAtIndex(s))return i=!1,!1}),i}isAnyParentCollapsed(e){let t=e;for(;t!==null;){t=this.dataManager.getRowParent(t);const i=this.dataManager.getRowIndex(t);if(this.collapsedRows.indexOf(i)>-1)return!0}return!1}toggleState(e,t){if(t.col>=0)return;const i=this.translateTrimmedRow(t.row);Ue(e.target,pl.CSS_CLASSES.button)&&(this.areChildrenCollapsed(i)?this.expandChildren(i):this.collapseChildren(i),Gs(e))}translateTrimmedRow(e){return this.hot.toPhysicalRow(e)}untranslateTrimmedRow(e){return this.hot.toVisualRow(e)}renderAndAdjust(){this.hot.render(),this.hot.view.adjustElementsSize()}}function AFe(n,e,t){PFe(n,e),e.set(n,t)}function PFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function IFe(n,e,t){return(e=OFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OFe(n){var e=kFe(n,"string");return typeof e=="symbol"?e:e+""}function kFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DFe(n,e){return n.get(NFe(n,e))}function NFe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var R9=new WeakMap;class LFe extends FN{constructor(){super(...arguments),IFe(this,"dataManager",this.plugin.dataManager),AFe(this,R9,{row_above:(e,t)=>{const i=t[t.length-1];this.dataManager.addSibling(i.start.row,"above")},row_below:(e,t)=>{const i=t[t.length-1];this.dataManager.addSibling(i.start.row,"below")}})}appendOptions(e){const t=[{key:"add_child",name(){return this.getTranslatedPhrase(CO)},callback:()=>{const i=this.dataManager.translateTrimmedRow(this.hot.getSelectedLast()[0]),r=this.dataManager.getDataObject(i);this.dataManager.addChild(r)},disabled:()=>{const i=this.hot.getSelectedLast();return!i||i[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{key:"detach_from_parent",name(){return this.getTranslatedPhrase(SO)},callback:()=>{this.dataManager.detachFromParent(this.hot.getSelectedLast())},disabled:()=>{const i=this.hot.getSelectedLast(),r=this.dataManager.translateTrimmedRow(i[0]);return!this.dataManager.getRowParent(r)||!i||i[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{name:"---------"}];return He(0,e.items.length-1,i=>{if(i===0)return V(t,(r,s)=>{e.items.splice(i+s,0,r)}),!1}),this.modifyRowInsertingOptions(e)}modifyRowInsertingOptions(e){return He(0,e.items.length-1,t=>{const i=DFe(R9,this)[e.items[t].key];i!=null&&(e.items[t].callback=i)}),e}}function C1(n,e,t){return(e=HFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HFe(n){var e=$Fe(n,"string");return typeof e=="symbol"?e:e+""}function $Fe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class FFe{constructor(e){C1(this,"plugin",void 0),C1(this,"hot",void 0),C1(this,"dataManager",void 0),C1(this,"collapsingUI",void 0),this.plugin=e,this.hot=e.hot,this.dataManager=e.dataManager,this.collapsingUI=e.collapsingUI}onBeforeRowMove(e,t,i,r){if(this.displayAPICompatibilityWarning({rows:e,finalIndex:t,dropIndex:i,movePossible:r}))return!1;this.movedToCollapsed=!1;const o=i===this.hot.countRows(),a=o?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(i);let l=!0;const c=e.map(g=>{if(!l)return!1;const p=this.dataManager.translateTrimmedRow(g);return l=this.shouldAllowMoving(p,a),p}),u=c.indexOf(a)===-1;if(!l||!u)return!1;const h=this.getBaseParent(c),d=this.getTargetParent(o,a),f=h===d;return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(d),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(c,a,f),this.moveRows(c,a,d),this.dataManager.rewriteCache(),this.moveCellsMeta(c,a),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",e,t,i,r,r&&this.isRowOrderChanged(e,t)),this.hot.render(),this.selectCells(e,i),!1}displayAPICompatibilityWarning(e){const{rows:t,finalIndex:i,dropIndex:r,movePossible:s}=e;let o=!1;return hn(r)&&(Yt(Ut`Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\x20
      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead.`),this.hot.runHooks("afterRowMove",t,i,r,s,!1),o=!0),o}shouldAllowMoving(e,t){return!(this.dataManager.isParent(e)||this.dataManager.isRowHighestLevel(e)||e===t||t===0)}getBaseParent(e){return this.dataManager.getRowParent(e[0])}getTargetParent(e,t){let i=this.dataManager.getRowParent(e?t-1:t);return i==null&&(i=this.dataManager.getRowParent(t-1)),i}shiftCollapsibleParentsLocations(e,t,i){i||(Math.max(...e)<=t?this.collapsingUI.collapsedRowsStash.shiftStash(e[0],t,-1*e.length):this.collapsingUI.collapsedRowsStash.shiftStash(t,e[0],e.length))}moveRows(e,t,i){const r=t===this.dataManager.getRowIndex(i)+this.dataManager.countChildren(i)+1;this.hot.batchRender(()=>{e.forEach(s=>{this.dataManager.moveRow(s,t,this.movedToCollapsed,r)})})}moveCellsMeta(e,t){const i=[],r=Math.max(...e)<t;e.forEach(s=>{i.push(this.hot.getCellMetaAtRow(s))}),this.hot.spliceCellsMeta(e[0],e.length),this.hot.spliceCellsMeta(t-(r?i.length:0),0,...i)}selectCells(e,t){const i=e.length;let r=0,s=0,o=null,a=null;if(this.movedToCollapsed){let l=null;e[i-1]<t?l=this.dataManager.translateTrimmedRow(t-i):l=this.dataManager.translateTrimmedRow(t);const c=this.dataManager.getRowParent(l===null?this.hot.countSourceRows()-1:l-1),u=this.dataManager.getRowIndex(c);r=this.dataManager.untranslateTrimmedRow(u),s=r}else e[i-1]<t?(s=t-1,r=s-i+1):(r=t,s=r+i-1);o=this.hot.selection,a=this.hot.countCols()-1,o.setRangeStart(this.hot._createCellCoords(r,0)),o.setRangeEnd(this.hot._createCellCoords(s,a),!0)}isRowOrderChanged(e,t){return e.some((i,r)=>i-r!==t)}}function BFe(n,e){x9(n,e),e.add(n)}function E9(n,e,t){x9(n,e),e.set(n,t)}function x9(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function BN(n,e,t){return(e=VFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VFe(n){var e=WFe(n,"string");return typeof e=="symbol"?e:e+""}function WFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function S1(n,e){return n.get(_i(n,e))}function _1(n,e,t){return n.set(_i(n,e),t),t}function _i(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const R1="nestedRows",jFe=300,T9=R1,zFe="The Nested Rows plugin requires an Array of Objects as a dataset to be provided. The plugin has been disabled.";var E1=new WeakMap,Fp=new WeakMap,Hi=new WeakSet;class UFe extends Lt{constructor(){super(...arguments),BFe(this,Hi),BN(this,"dataManager",null),BN(this,"headersUI",null),BN(this,"collapsedRowsMap",null),E9(this,E1,!1),E9(this,Fp,!1)}static get PLUGIN_KEY(){return R1}static get PLUGIN_PRIORITY(){return jFe}isEnabled(){return!!this.hot.getSettings()[R1]}enablePlugin(){var e=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new Mv),this.dataManager=new EFe(this,this.hot),this.collapsingUI=new MFe(this,this.hot),this.headersUI=new pl(this,this.hot),this.contextMenuUI=new LFe(this,this.hot),this.rowMoveController=new FFe(this),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,sBe).call(e,...i)}),this.addHook("beforeViewRender",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,oBe).call(e,...i)}),this.addHook("modifyRowData",function(){return e.onModifyRowData(...arguments)}),this.addHook("modifySourceLength",function(){return e.onModifySourceLength(...arguments)}),this.addHook("beforeDataSplice",function(){return e.onBeforeDataSplice(...arguments)}),this.addHook("filterData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,KFe).call(e,...i)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,qFe).call(e,...i)}),this.addHook("afterGetRowHeader",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,XFe).call(e,...i)}),this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,YFe).call(e,...i)}),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,JFe).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,QFe).call(e,...i)}),this.addHook("beforeAddChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,eBe).call(e,...i)}),this.addHook("afterAddChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,tBe).call(e,...i)}),this.addHook("beforeDetachChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,nBe).call(e,...i)}),this.addHook("afterDetachChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,iBe).call(e,...i)}),this.addHook("modifyRowHeaderWidth",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,ZFe).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,rBe).call(e,...i)}),this.addHook("beforeRowMove",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(Hi,e,GFe).call(e,...i)}),this.addHook("beforeLoadData",t=>_i(Hi,this,M9).call(this,t)),this.addHook("beforeUpdateData",t=>_i(Hi,this,M9).call(this,t)),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),this.unregisterShortcuts(),super.disablePlugin()}updatePlugin(){this.disablePlugin();const e=this.dataManager.getData();this.enablePlugin(),this.dataManager.updateWithData(e),super.updatePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast(),t=this.collapsingUI.translateTrimmedRow(e.row);return this.collapsingUI.areChildrenCollapsed(t)?this.collapsingUI.expandChildren(t):this.collapsingUI.collapseChildren(t),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.col===-1&&i.row>=0},group:T9,relativeToGroup:Iu,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(T9)}disableCoreAPIModifiers(){_1(Fp,this,!0)}enableCoreAPIModifiers(){_1(Fp,this,!1)}onModifyRowData(e){if(!S1(Fp,this))return this.dataManager.getDataObject(e)}onModifySourceLength(){if(!S1(Fp,this))return this.dataManager.countAllRows()}onBeforeDataSplice(e,t,i){return S1(Fp,this)||this.dataManager.isRowHighestLevel(e)?!0:(this.dataManager.spliceData(e,t,i),!1)}destroy(){super.destroy()}}function GFe(n,e,t,i){return this.rowMoveController.onBeforeRowMove(n,e,t,i)}function YFe(n,e,t){this.collapsingUI.toggleState(n,e,t)}function KFe(n,e,t){return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(t[0],e),this.collapsingUI.collapsedRowsStash.shiftStash(t[0],null,-1*e),this.dataManager.filterData(n,e,t),_1(E1,this,!0),this.dataManager.getData().slice()}function qFe(n){return this.contextMenuUI.appendOptions(n)}function XFe(n,e){this.headersUI.appendLevelIndicators(n,e)}function ZFe(n){return Math.max(this.headersUI.rowHeaderWidthCache,n)}function QFe(n,e,t,i){i!==this.pluginName&&this.hot._registerTimeout(()=>{_1(E1,this,!1),this.headersUI.updateRowHeaderWidth(),this.collapsingUI.collapsedRowsStash.applyStash()})}function JFe(n,e,t){const i=Array.from(t.reduce((r,s)=>{if(this.dataManager.isParent(s)){const o=this.dataManager.getDataObject(s).__children;return r.add(s),Array.isArray(o)&&o.forEach(a=>r.add(this.dataManager.getRowIndex(a))),r}return r.add(s)},new Set));t.length=0,t.push(...i)}function eBe(){this.collapsingUI.collapsedRowsStash.stash()}function tBe(n,e){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(e)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function nBe(){this.collapsingUI.collapsedRowsStash.stash()}function iBe(n,e,t){this.collapsingUI.collapsedRowsStash.shiftStash(t,null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function rBe(){this.dataManager.rewriteCache()}function sBe(){this.headersUI.updateRowHeaderWidth()}function oBe(n,e){S1(E1,this)&&(e.skipRender=!0)}function M9(n){if(!V8(n)){NP(zFe),this.hot.getSettings()[R1]=!1,this.disablePlugin();return}this.dataManager.setData(n),this.dataManager.rewriteCache()}function VN(n,e,t){return(e=aBe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aBe(n){var e=lBe(n,"string");return typeof e=="symbol"?e:e+""}function lBe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class cBe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;VN(this,"rootWindow",void 0),VN(this,"prefix",void 0),VN(this,"savedKeys",[]),this.rootWindow=t,this.prefix=e,this.loadSavedKeys()}saveValue(e,t){this.rootWindow.localStorage.setItem(`${this.prefix}_${e}`,JSON.stringify(t)),this.savedKeys.indexOf(e)===-1&&(this.savedKeys.push(e),this.saveSavedKeys())}loadValue(e,t){const i=typeof e>"u"?t:e,r=this.rootWindow.localStorage.getItem(`${this.prefix}_${i}`);return r===null?void 0:JSON.parse(r)}reset(e){this.rootWindow.localStorage.removeItem(`${this.prefix}_${e}`)}resetAll(){V(this.savedKeys,(e,t)=>{this.rootWindow.localStorage.removeItem(`${this.prefix}_${this.savedKeys[t]}`)}),this.clearSavedKeys()}loadSavedKeys(){const e=this.rootWindow.localStorage.getItem(`${this.prefix}__persistentStateKeys`),t=typeof e=="string"?JSON.parse(e):void 0;this.savedKeys=t||[]}saveSavedKeys(){this.rootWindow.localStorage.setItem(`${this.prefix}__persistentStateKeys`,JSON.stringify(this.savedKeys))}clearSavedKeys(){this.savedKeys.length=0,this.saveSavedKeys()}}function uBe(n,e,t){return(e=hBe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hBe(n){var e=dBe(n,"string");return typeof e=="symbol"?e:e+""}function dBe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}Pe.getSingleton().register("persistentStateSave"),Pe.getSingleton().register("persistentStateLoad"),Pe.getSingleton().register("persistentStateReset");const A9="persistentState",fBe=0;class gBe extends Lt{constructor(){super(...arguments),uBe(this,"storage",void 0)}static get PLUGIN_KEY(){return A9}static get PLUGIN_PRIORITY(){return fBe}isEnabled(){return!!this.hot.getSettings()[A9]}enablePlugin(){this.enabled||(this.storage||(this.storage=new cBe(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",(e,t)=>this.saveValue(e,t)),this.addHook("persistentStateLoad",(e,t)=>this.loadValue(e,t)),this.addHook("persistentStateReset",()=>this.resetValue()),super.enablePlugin())}disablePlugin(){this.storage=void 0,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}loadValue(e,t){t.value=this.storage.loadValue(e)}saveValue(e,t){this.storage.saveValue(e,t)}resetValue(e){typeof e>"u"?this.storage.resetAll():this.storage.reset(e)}destroy(){super.destroy()}}function pBe(n,e){mBe(n,e),e.add(n)}function mBe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function WN(n,e,t){return(e=bBe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bBe(n){var e=vBe(n,"string");return typeof e=="symbol"?e:e+""}function vBe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function P9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const jN="search",wBe=190,yBe="htSearchResult",CBe=function(n,e,t,i,r){n.getCellMeta(e,t).isSearchResult=r},SBe=function(n,e,t){return hn(n)||n===null||!n.toLocaleLowerCase||n.length===0||hn(e)||e===null?!1:e.toString().toLocaleLowerCase(t.locale).indexOf(n.toLocaleLowerCase(t.locale))!==-1};var zN=new WeakSet;class _Be extends Lt{constructor(){super(...arguments),pBe(this,zN),WN(this,"callback",CBe),WN(this,"queryMethod",SBe),WN(this,"searchResultClass",yBe)}static get PLUGIN_KEY(){return jN}static get PLUGIN_PRIORITY(){return wBe}isEnabled(){return this.hot.getSettings()[jN]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[jN];this.updatePluginSettings(t),this.addHook("beforeRenderer",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return P9(zN,e,I9).call(e,...r)}),super.enablePlugin()}disablePlugin(){var e=this;const t=function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return P9(zN,e,I9).call(e,...r)};this.hot.addHook("beforeRenderer",t),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("beforeRenderer",t)}),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}query(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getCallback(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getQueryMethod();const r=this.hot.countRows(),s=this.hot.countCols(),o=[],a=this.hot;return He(0,r-1,l=>{He(0,s-1,c=>{const u=this.hot.getDataAtCell(l,c),h=this.hot.getCellMeta(l,c),d=h.search.callback||t,g=(h.search.queryMethod||i)(e,u,h);if(g){const p={row:l,col:c,data:u};o.push(p)}d&&d(a,l,c,u,g)})}),o}getCallback(){return this.callback}setCallback(e){this.callback=e}getQueryMethod(){return this.queryMethod}setQueryMethod(e){this.queryMethod=e}getSearchResultClass(){return this.searchResultClass}setSearchResultClass(e){this.searchResultClass=e}updatePluginSettings(e){st(e)&&(e.searchResultClass&&this.setSearchResultClass(e.searchResultClass),e.queryMethod&&this.setQueryMethod(e.queryMethod),e.callback&&this.setCallback(e.callback))}destroy(){super.destroy()}}function I9(n,e,t,i,r,s){const o=s.className||[];let a=[];typeof o=="string"?a=o.split(" "):a.push(...o),this.isEnabled()&&s.isSearchResult?a.includes(this.searchResultClass)||a.push(`${this.searchResultClass}`):a.includes(this.searchResultClass)&&a.splice(a.indexOf(this.searchResultClass),1),s.className=a.join(" ")}function RBe(n,e){EBe(n,e),e.add(n)}function EBe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function x1(n,e,t){return(e=xBe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xBe(n){var e=TBe(n,"string");return typeof e=="symbol"?e:e+""}function TBe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function UN(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const MBe="touchScroll",ABe=200;var T1=new WeakSet;class PBe extends Lt{constructor(){super(...arguments),RBe(this,T1),x1(this,"scrollbars",[]),x1(this,"clones",[]),x1(this,"lockedCollection",!1),x1(this,"freezeOverlays",!1)}static get PLUGIN_KEY(){return MBe}static get PLUGIN_PRIORITY(){return ABe}static get SETTING_KEYS(){return!0}isEnabled(){return SP()}enablePlugin(){this.enabled||(this.addHook("afterViewRender",()=>UN(T1,this,IBe).call(this)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.lockedCollection=!1,super.updatePlugin()}disablePlugin(){super.disablePlugin()}registerEvents(){this.addHook("beforeTouchScroll",()=>UN(T1,this,OBe).call(this)),this.addHook("afterMomentumScroll",()=>UN(T1,this,kBe).call(this))}}function IBe(){if(this.lockedCollection)return;const{topOverlay:n,bottomOverlay:e,inlineStartOverlay:t,topInlineStartCornerOverlay:i,bottomInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(n),e.clone&&this.scrollbars.push(e),this.scrollbars.push(t),i&&this.scrollbars.push(i),r&&r.clone&&this.scrollbars.push(r),this.clones=[],n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),t.needFullRender&&this.clones.push(t.clone.wtTable.holder.parentNode),i&&this.clones.push(i.clone.wtTable.holder.parentNode),r&&r.clone&&this.clones.push(r.clone.wtTable.holder.parentNode)}function OBe(){this.freezeOverlays=!0,V(this.clones,n=>{ce(n,"hide-tween")})}function kBe(){this.freezeOverlays=!1,V(this.clones,n=>{Ze(n,"hide-tween"),ce(n,"show-tween")}),this.hot._registerTimeout(()=>{V(this.clones,n=>{Ze(n,"show-tween")})},400),V(this.scrollbars,n=>{n.refresh(),n.resetFixedPosition()}),this.hot.view._wt.wtOverlays.syncScrollWithMaster()}function DBe(n,e){NBe(n,e),e.add(n)}function NBe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function LBe(n,e,t){return(e=HBe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HBe(n){var e=$Be(n,"string");return typeof e=="symbol"?e:e+""}function $Be(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function FBe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const M1="trimRows",BBe=330;var O9=new WeakSet;class VBe extends Lt{constructor(){super(...arguments),DBe(this,O9),LBe(this,"trimmedRowsMap",null)}static get PLUGIN_KEY(){return M1}static get PLUGIN_PRIORITY(){return BBe}isEnabled(){return!!this.hot.getSettings()[M1]}enablePlugin(){this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new Mv),this.trimmedRowsMap.addLocalHook("init",()=>FBe(O9,this,WBe).call(this)),super.enablePlugin())}updatePlugin(){const e=this.hot.getSettings()[M1];Array.isArray(e)&&this.hot.batchExecution(()=>{this.trimmedRowsMap.clear(),V(e,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("trimRows"),super.disablePlugin()}getTrimmedRows(){return this.trimmedRowsMap.getTrimmedIndexes()}trimRows(e){const t=this.getTrimmedRows(),i=this.isValidConfig(e);let r=t;i&&(r=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeTrimRow",t,r,i)!==!1&&(i&&this.hot.batchExecution(()=>{V(e,o=>{this.trimmedRowsMap.setValueAtIndex(o,!0)})},!0),this.hot.runHooks("afterTrimRow",t,r,i,i&&r.length>t.length))}trimRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.trimRows(t)}untrimRows(e){const t=this.getTrimmedRows(),i=this.isValidConfig(e);let r=t;const s=this.trimmedRowsMap.getValues().slice(),o=e.length>0;i&&o&&(V(e,l=>{s[l]=!1}),r=si(s,(l,c,u)=>(c&&l.push(u),l),[])),this.hot.runHooks("beforeUntrimRow",t,r,i&&o)!==!1&&(i&&o&&this.trimmedRowsMap.setValues(s),this.hot.runHooks("afterUntrimRow",t,r,i&&o,i&&r.length<t.length))}untrimRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.untrimRows(t)}isTrimmed(e){return this.trimmedRowsMap.getValueAtIndex(e)||!1}untrimAll(){this.untrimRows(this.getTrimmedRows())}isValidConfig(e){const t=this.hot.countSourceRows();return e.every(i=>Number.isInteger(i)&&i>=0&&i<t)}destroy(){super.destroy()}}function WBe(){const n=this.hot.getSettings()[M1];Array.isArray(n)&&this.hot.batchExecution(()=>{V(n,e=>{this.trimmedRowsMap.setValueAtIndex(e,!0)})},!0)}var k9={},jBe=fu,zBe=k9,UBe=jBe("iterator"),GBe=Array.prototype,YBe=function(n){return n!==void 0&&(zBe.Array===n||GBe[UBe]===n)},KBe=Cj,D9=mC,qBe=uC,XBe=k9,ZBe=fu,QBe=ZBe("iterator"),N9=function(n){if(!qBe(n))return D9(n,QBe)||D9(n,"@@iterator")||XBe[KBe(n)]},JBe=Po,eVe=Cb,tVe=Yl,nVe=pC,iVe=N9,rVe=TypeError,sVe=function(n,e){var t=arguments.length<2?iVe(n):e;if(eVe(t))return tVe(JBe(t,n));throw new rVe(nVe(n)+" is not iterable")},oVe=Qj,aVe=Po,lVe=Yl,cVe=pC,uVe=YBe,hVe=xb,L9=dC,dVe=sVe,fVe=N9,H9=eA,gVe=TypeError,A1=function(n,e){this.stopped=n,this.result=e},$9=A1.prototype,pVe=function(n,e,t){var i=t&&t.that,r=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=oVe(e,i),c,u,h,d,f,g,p,m=function(y){return c&&H9(c,"normal",y),new A1(!0,y)},v=function(y){return r?(lVe(y),a?l(y[0],y[1],m):l(y[0],y[1])):a?l(y,m):l(y)};if(s)c=n.iterator;else if(o)c=n;else{if(u=fVe(n),!u)throw new gVe(cVe(n)+" is not iterable");if(uVe(u)){for(h=0,d=hVe(n);d>h;h++)if(f=v(n[h]),f&&L9($9,f))return f;return new A1(!1)}c=dVe(n,u)}for(g=s?n.next:c.next;!(p=aVe(g,c)).done;){try{f=v(p.value)}catch(y){H9(c,"throw",y)}if(typeof f=="object"&&f&&L9($9,f))return f}return new A1(!1)},mVe=Ao,bVe=gu,vVe=cC,wVe=function(n,e,t){mVe?bVe.f(n,e,vVe(0,t)):n[e]=t},yVe=Wi,CVe=pVe,SVe=wVe;yVe({target:"Object",stat:!0},{fromEntries:function(e){var t={};return CVe(e,function(i,r){SVe(t,i,r)},{AS_ENTRIES:!0}),t}});const F9="undoRedo",_Ve="undoRedo";function we(n){const e=this;this.instance=n,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,n.addHook("afterChange",function(i,r){const s=i&&i.length;if(!s||!i.find(l=>{const[,,c,u]=l;return c!==u}))return;const a=()=>{const l=i.reduce((u,h)=>(u.push([...h]),u),[]);V(l,u=>{u[1]=n.propToCol(u[1])});const c=s>1?this.getSelected():[[l[0][0],l[0][1]]];return new we.ChangeAction(l,c)};e.done(a,r)}),n.addHook("afterCreateRow",(i,r,s)=>{e.done(()=>new we.CreateRowAction(i,r),s)});const t=(i,r,s,o)=>{const a=["visualRow","visualCol","row","col","prop"],l=a.length,c=[];return He(s,o,u=>{He(i,r,h=>{const d=n.getCellMeta(h,u);if(Object.keys(d).length!==l){const f=Object.fromEntries(Object.entries(d).filter(g=>{let[p]=g;return a.includes(p)===!1}));c.push([d.visualRow,d.visualCol,f])}})}),c};n.addHook("beforeRemoveRow",(i,r,s,o)=>{const a=()=>{const l=n.toPhysicalRow(i),c=l+r-1,u=sr(e.instance.getSourceData(l,0,l+r-1,e.instance.countSourceCols()-1));return new we.RemoveRowAction(l,u,n.getSettings().fixedRowsBottom,n.getSettings().fixedRowsTop,n.rowIndexMapper.getIndexesSequence(),t(l,c,0,n.countCols()-1))};e.done(a,o)}),n.addHook("afterCreateCol",(i,r,s)=>{e.done(()=>new we.CreateColumnAction(i,r),s)}),n.addHook("beforeRemoveCol",(i,r,s,o)=>{const a=()=>{const l=e.instance.getSourceDataArray(),c=(e.instance.countCols()+i)%e.instance.countCols(),u=c+r-1,h=[],d=[],f=[];He(l.length-1,m=>{const v=[],y=l[m];He(c,u,w=>{v.push(y[n.toPhysicalColumn(w)])}),h.push(v)}),He(r-1,m=>{f.push(n.toPhysicalColumn(c+m))}),Array.isArray(n.getSettings().colHeaders)&&He(r-1,m=>{d.push(n.getSettings().colHeaders[n.toPhysicalColumn(c+m)]||null)});const g=n.columnIndexMapper.getIndexesSequence(),p=n.rowIndexMapper.getIndexesSequence();return new we.RemoveColumnAction(c,f,h,d,g,p,n.getSettings().fixedColumnsStart,t(0,n.countRows(),c,u))};e.done(a,o)}),n.addHook("beforeCellAlignment",(i,r,s,o)=>{e.done(()=>new we.CellAlignmentAction(i,r,s,o))}),n.addHook("beforeFilter",(i,r)=>{e.done(()=>new we.FiltersAction(i,r))}),n.addHook("beforeRowMove",(i,r)=>{i!==!1&&e.done(()=>new we.RowMoveAction(i,r))}),n.addHook("beforeColumnMove",(i,r)=>{i!==!1&&e.done(()=>new we.ColumnMoveAction(i,r))}),n.addHook("beforeMergeCells",(i,r)=>{r||e.done(()=>new we.MergeCellsAction(n,i))}),n.addHook("afterUnmergeCells",(i,r)=>{r||e.done(()=>new we.UnmergeCellsAction(n,i))}),n.addHook("beforeColumnSort",(i,r,s)=>{s&&e.done(()=>new we.ColumnSortAction(i,r))}),n.addHook("afterInit",()=>{e.init()})}we.prototype.done=function(n,e){if(this.ignoreNewActions||e==="UndoRedo.undo"||e==="UndoRedo.redo"||e==="auto")return;const i=this.doneActions.slice();if(this.instance.runHooks("beforeUndoStackChange",i,e)===!1)return;const s=n(),o=this.undoneActions.slice();this.doneActions.push(s),this.instance.runHooks("afterUndoStackChange",i,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",o),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",o,this.undoneActions.slice())},we.prototype.undo=function(){if(this.isUndoAvailable()){const n=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",n);const e=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",n,this.doneActions.slice());const t=sr(e);if(this.instance.runHooks("beforeUndo",t)===!1)return;this.ignoreNewActions=!0;const r=this,s=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",s),e.undo(this.instance,()=>{r.ignoreNewActions=!1,r.undoneActions.push(e)}),this.instance.runHooks("afterRedoStackChange",s,this.undoneActions.slice()),this.instance.runHooks("afterUndo",t)}},we.prototype.redo=function(){if(this.isRedoAvailable()){const n=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",n);const e=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",n,this.undoneActions.slice());const t=sr(e);if(this.instance.runHooks("beforeRedo",t)===!1)return;this.ignoreNewActions=!0;const r=this,s=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",s),e.redo(this.instance,()=>{r.ignoreNewActions=!1,r.doneActions.push(e)}),this.instance.runHooks("afterUndoStackChange",s,this.doneActions.slice()),this.instance.runHooks("afterRedo",t)}},we.prototype.isUndoAvailable=function(){return this.doneActions.length>0},we.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},we.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},we.prototype.isEnabled=function(){return this.enabled},we.prototype.enable=function(){if(this.isEnabled())return;const n=this.instance;this.enabled=!0,xVe(n),this.registerShortcuts(),n.addHook("afterChange",B9)},we.prototype.disable=function(){if(!this.isEnabled())return;const n=this.instance;this.enabled=!1,TVe(n),this.unregisterShortcuts(),n.removeHook("afterChange",B9)},we.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null},we.Action=function(){},we.Action.prototype.undo=function(){},we.Action.prototype.redo=function(){},we.ChangeAction=function(n,e){this.changes=n,this.selected=e,this.actionType="change"},Fo(we.ChangeAction,we.Action),we.ChangeAction.prototype.undo=function(n,e){const t=sr(this.changes),i=n.countEmptyRows(!0),r=n.countEmptyCols(!0);for(let o=0,a=t.length;o<a;o++)t[o].splice(3,1);n.addHookOnce("afterChange",e),n.setDataAtCell(t,null,null,"UndoRedo.undo");for(let o=0,a=t.length;o<a;o++){const[l,c]=t[o];n.getSettings().minSpareRows&&l+1+n.getSettings().minSpareRows===n.countRows()&&i===n.getSettings().minSpareRows&&(n.alter("remove_row",parseInt(l+1,10),n.getSettings().minSpareRows),n.undoRedo.doneActions.pop()),n.getSettings().minSpareCols&&c+1+n.getSettings().minSpareCols===n.countCols()&&r===n.getSettings().minSpareCols&&(n.alter("remove_col",parseInt(c+1,10),n.getSettings().minSpareCols),n.undoRedo.doneActions.pop())}const s=n.getSelectedLast();if(s!==void 0){const[o,a]=t[0],[l,c]=s,u=n.view.getFirstFullyVisibleRow(),h=n.view.getFirstFullyVisibleColumn(),d=o>=u,f=a>=h;if((d&&f)===!1&&(l!==o||c!==a)===!0){const m={row:o,col:a};d===!1&&(m.verticalSnap="top"),f===!1&&(m.horizontalSnap="start"),n.scrollViewportTo(m)}}n.selectCells(this.selected,!1,!1)},we.ChangeAction.prototype.redo=function(n,e){const t=sr(this.changes);for(let i=0,r=t.length;i<r;i++)t[i].splice(2,1);n.addHookOnce("afterChange",e),n.setDataAtCell(t,null,null,"UndoRedo.redo"),this.selected&&n.selectCells(this.selected,!1,!1)},we.CreateRowAction=function(n,e){this.index=n,this.amount=e,this.actionType="insert_row"},Fo(we.CreateRowAction,we.Action),we.CreateRowAction.prototype.undo=function(n,e){const t=n.countRows(),i=n.getSettings().minSpareRows;this.index>=t&&this.index-i<t&&(this.index-=i),n.addHookOnce("afterRemoveRow",e),n.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},we.CreateRowAction.prototype.redo=function(n,e){n.addHookOnce("afterCreateRow",e),n.alter("insert_row_above",this.index,this.amount,"UndoRedo.redo")},we.RemoveRowAction=function(n,e,t,i,r,s){this.index=n,this.data=e,this.actionType="remove_row",this.fixedRowsBottom=t,this.fixedRowsTop=i,this.rowIndexesSequence=r,this.removedCellMetas=s},Fo(we.RemoveRowAction,we.Action),we.RemoveRowAction.prototype.undo=function(n,e){const t=n.getSettings(),i=[];t.fixedRowsBottom=this.fixedRowsBottom,t.fixedRowsTop=this.fixedRowsTop,this.data.forEach((r,s)=>{Object.keys(r).forEach(o=>{const a=parseInt(o,10);i.push([this.index+s,isNaN(a)?o:a,r[o]])})}),n.alter("insert_row_above",this.index,this.data.length,"UndoRedo.undo"),this.removedCellMetas.forEach(r=>{let[s,o,a]=r;n.setCellMetaObject(s,o,a)}),n.addHookOnce("afterViewRender",e),n.setSourceDataAtCell(i,null,null,"UndoRedo.undo"),n.rowIndexMapper.setIndexesSequence(this.rowIndexesSequence)},we.RemoveRowAction.prototype.redo=function(n,e){n.addHookOnce("afterRemoveRow",e),n.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},we.CreateColumnAction=function(n,e){this.index=n,this.amount=e,this.actionType="insert_col"},Fo(we.CreateColumnAction,we.Action),we.CreateColumnAction.prototype.undo=function(n,e){n.addHookOnce("afterRemoveCol",e),n.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},we.CreateColumnAction.prototype.redo=function(n,e){n.addHookOnce("afterCreateCol",e),n.alter("insert_col_start",this.index,this.amount,"UndoRedo.redo")},we.RemoveColumnAction=function(n,e,t,i,r,s,o,a){this.index=n,this.indexes=e,this.data=t,this.amount=this.data[0].length,this.headers=i,this.columnPositions=r.slice(0),this.rowPositions=s.slice(0),this.actionType="remove_col",this.fixedColumnsStart=o,this.removedCellMetas=a},Fo(we.RemoveColumnAction,we.Action),we.RemoveColumnAction.prototype.undo=function(n,e){const t=n.getSettings();t.fixedColumnsStart=this.fixedColumnsStart;const i=this.indexes.slice(0).sort(),r=(c,u,h)=>h[this.indexes.indexOf(i[u])],s=this.data.length,o=[];for(let c=0;c<s;c++)o.push(pt(this.data[c],r));const a=pt(this.headers,r),l=[];n.alter("insert_col_start",this.indexes[0],this.indexes.length,"UndoRedo.undo"),V(n.getSourceDataArray(),(c,u)=>{V(i,(h,d)=>{c[h]=o[u][d],l.push([u,h,c[h]])})}),n.setSourceDataAtCell(l,void 0,void 0,"UndoRedo.undo"),typeof this.headers<"u"&&V(a,(c,u)=>{n.getSettings().colHeaders[i[u]]=c}),this.removedCellMetas.forEach(c=>{let[u,h,d]=c;n.setCellMetaObject(u,h,d)}),n.batchExecution(()=>{n.rowIndexMapper.setIndexesSequence(this.rowPositions),n.columnIndexMapper.setIndexesSequence(this.columnPositions)},!0),n.addHookOnce("afterViewRender",e),n.render()},we.RemoveColumnAction.prototype.redo=function(n,e){n.addHookOnce("afterRemoveCol",e),n.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},we.CellAlignmentAction=function(n,e,t,i){this.stateBefore=n,this.range=e,this.type=t,this.alignment=i},we.CellAlignmentAction.prototype.undo=function(n,e){V(this.range,t=>{t.forAll((i,r)=>{i>=0&&r>=0&&n.setCellMeta(i,r,"className",this.stateBefore[i][r]||" htLeft")})}),n.addHookOnce("afterViewRender",e),n.render()},we.CellAlignmentAction.prototype.redo=function(n,e){Du(this.range,this.type,this.alignment,(t,i)=>n.getCellMeta(t,i),(t,i,r,s)=>n.setCellMeta(t,i,r,s)),n.addHookOnce("afterViewRender",e),n.render()},we.FiltersAction=function(n,e){this.previousConditionsStack=e,this.conditionsStack=n,this.actionType="filter"},Fo(we.FiltersAction,we.Action),we.FiltersAction.prototype.undo=function(n,e){const t=n.getPlugin("filters");n.addHookOnce("afterViewRender",e),this.previousConditionsStack&&t.conditionCollection.importAllConditions(this.previousConditionsStack),t.filter()},we.FiltersAction.prototype.redo=function(n,e){const t=n.getPlugin("filters");n.addHookOnce("afterViewRender",e),t.conditionCollection.importAllConditions(this.conditionsStack),t.filter()};class RVe extends we.Action{constructor(e,t){super(),this.cellRange=t;const i=this.cellRange.getTopStartCorner(),r=this.cellRange.getBottomEndCorner();this.rangeData=e.getData(i.row,i.col,r.row,r.col)}undo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.unmergeRange(this.cellRange,!0);const r=this.cellRange.getTopStartCorner();e.populateFromArray(r.row,r.col,this.rangeData,void 0,void 0,"MergeCells")}redo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.mergeRange(this.cellRange)}}we.MergeCellsAction=RVe;class EVe extends we.Action{constructor(e,t){super(),this.cellRange=t}undo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.mergeRange(this.cellRange,!0)}redo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.unmergeRange(this.cellRange,!0),e.render()}}we.UnmergeCellsAction=EVe,we.RowMoveAction=function(n,e){this.rows=n.slice(),this.finalRowIndex=e,this.actionType="row_move"},Fo(we.RowMoveAction,we.Action),we.RowMoveAction.prototype.undo=function(n,e){const t=n.getPlugin("manualRowMove");n.addHookOnce("afterViewRender",e),eN(this.rows,this.finalRowIndex,n.rowIndexMapper.getNumberOfIndexes()).reverse().forEach(r=>{let{from:s,to:o}=r;s<o&&(o-=1),t.moveRow(o,s)}),n.render(),n.deselectCell(),n.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)},we.RowMoveAction.prototype.redo=function(n,e){const t=n.getPlugin("manualRowMove");n.addHookOnce("afterViewRender",e),t.moveRows(this.rows.slice(),this.finalRowIndex),n.render(),n.deselectCell(),n.selectRows(this.finalRowIndex,this.finalRowIndex+this.rows.length-1)},we.ColumnMoveAction=function(n,e){this.columns=n.slice(),this.finalColumnIndex=e,this.actionType="col_move"},Fo(we.ColumnMoveAction,we.Action),we.ColumnMoveAction.prototype.undo=function(n,e){const t=n.getPlugin("manualColumnMove");n.addHookOnce("afterViewRender",e),eN(this.columns,this.finalColumnIndex,n.columnIndexMapper.getNumberOfIndexes()).reverse().forEach(r=>{let{from:s,to:o}=r;s<o&&(o-=1),t.moveColumn(o,s)}),n.render(),n.deselectCell(),n.selectColumns(this.columns[0],this.columns[0]+this.columns.length-1)},we.ColumnMoveAction.prototype.redo=function(n,e){const t=n.getPlugin("manualColumnMove");n.addHookOnce("afterViewRender",e),t.moveColumns(this.columns.slice(),this.finalColumnIndex),n.render(),n.deselectCell(),n.selectColumns(this.finalColumnIndex,this.finalColumnIndex+this.columns.length-1)},we.ColumnSortAction=function(n,e){this.previousSortState=n,this.nextSortState=e},Fo(we.ColumnSortAction,we.Action),we.ColumnSortAction.prototype.undo=function(n,e){const t=n.getPlugin("columnSorting"),i=n.getPlugin("multiColumnSorting"),r=i.isEnabled()?i:t;this.previousSortState.length?r.sort(this.previousSortState):r.clearSort(),e()},we.ColumnSortAction.prototype.redo=function(n,e){const t=n.getPlugin("columnSorting"),i=n.getPlugin("multiColumnSorting");(i.isEnabled()?i:t).sort(this.nextSortState),e()},we.prototype.init=function(){const n=this.instance.getSettings().undo,e=typeof n>"u"||n;this.instance.undoRedo||(this.instance.undoRedo=this),e?this.instance.undoRedo.enable():this.instance.undoRedo.disable()},we.prototype.registerShortcuts=function(){const e=this.instance.getShortcutManager().getContext("grid"),i={runOnlyIf:r=>!r.altKey,group:F9};e.addShortcuts([{keys:[["Control/Meta","z"]],callback:()=>{this.undo()}},{keys:[["Control/Meta","y"],["Control/Meta","Shift","z"]],callback:()=>{this.redo()}}],i)},we.prototype.unregisterShortcuts=function(){this.instance.getShortcutManager().getContext("grid").removeShortcutsByGroup(F9)};function B9(n,e){const t=this;if(e==="loadData")return t.undoRedo.clear()}function xVe(n){n.undo=function(){return n.undoRedo.undo()},n.redo=function(){return n.undoRedo.redo()},n.isUndoAvailable=function(){return n.undoRedo.isUndoAvailable()},n.isRedoAvailable=function(){return n.undoRedo.isRedoAvailable()},n.clearUndo=function(){return n.undoRedo.clear()}}function TVe(n){delete n.undo,delete n.redo,delete n.isUndoAvailable,delete n.isRedoAvailable,delete n.clearUndo}const Qw=Pe.getSingleton();Qw.add("afterUpdateSettings",function(){var n;(n=this.getPlugin("undoRedo"))===null||n===void 0||n.init()}),Qw.register("beforeUndo"),Qw.register("afterUndo"),Qw.register("beforeRedo"),Qw.register("afterRedo"),we.PLUGIN_KEY=_Ve,we.SETTING_KEYS=!0;function MVe(){At(Bv),At(rAe),At(jv),At($Ae),At(GAe),At(WU),At(BPe),At(EIe),At(fR),At(zOe),At(mke),At(Rke),At(SR),At(Zke),At(qNe),At(xLe),At(QLe),At(cHe),At(CHe),At(OHe),At(WHe),At(o$e),At(p$e),At(K$e),At(M2e),At(k2e),At(sFe),At(UFe),At(gBe),At(_Be),At(PBe),At(VBe),At(we)}function AVe(){WTe(),oMe(),pMe(),xMe(),MVe()}function PVe(n){const e=typeof window>"u"?!1:window.jQuery;e&&(e.fn.handsontable=function(t){const i=this.first();let r=i.data("handsontable");if(typeof t!="string"){const c=t||{};return r?r.updateSettings(c):(r=new n.Core(i[0],c),i.data("handsontable",r),r.init()),i}let s;if(r)if(typeof r[t]<"u"){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];s=r[t].call(r,...a),t==="destroy"&&i.removeData()}else throw new Error(`Handsontable do not provide action: ${t}`);return s})}var GN,YN,KN,qN,XN;AVe(),PVe(Qe),Qe.__GhostTable=Gk,Qe._getListenersCounter=G0e,Qe._getRegisteredMapsCounter=f1e,Qe.EventManager=Ys;const IVe=[Jwe,a0e,e1e,lMe,r0e,Vye,iye,LCe,i0e,sye,u0e,NCe],OVe=[Hye,h0e];Qe.helper={},Qe.dom={},V(IVe,n=>{V(Object.getOwnPropertyNames(n),e=>{e.charAt(0)!=="_"&&(Qe.helper[e]=n[e])})}),V(OVe,n=>{V(Object.getOwnPropertyNames(n),e=>{e.charAt(0)!=="_"&&(Qe.dom[e]=n[e])})}),Qe.cellTypes=(GN=Qe.cellTypes)!==null&&GN!==void 0?GN:{},V(vEe(),n=>{Qe.cellTypes[n]=gk(n)}),Qe.cellTypes.registerCellType=Js,Qe.cellTypes.getCellType=gk,Qe.editors=(YN=Qe.editors)!==null&&YN!==void 0?YN:{},V(B0e(),n=>{Qe.editors[`${rr(n)}Editor`]=CS(n)}),Qe.editors.registerEditor=Br,Qe.editors.getEditor=CS,Qe.renderers=(KN=Qe.renderers)!==null&&KN!==void 0?KN:{},V(qCe(),n=>{const e=MS(n);n==="base"&&(Qe.renderers.cellDecorator=e),Qe.renderers[`${rr(n)}Renderer`]=e}),Qe.renderers.registerRenderer=gs,Qe.renderers.getRenderer=MS,Qe.validators=(qN=Qe.validators)!==null&&qN!==void 0?qN:{},V(QCe(),n=>{Qe.validators[`${rr(n)}Validator`]=nI(n)}),Qe.validators.registerValidator=wd,Qe.validators.getValidator=nI,Qe.plugins=(XN=Qe.plugins)!==null&&XN!==void 0?XN:{},V(tI(),n=>{Qe.plugins[n]=av(n)}),Qe.plugins[`${rr(Lt.PLUGIN_KEY)}Plugin`]=Lt,Qe.plugins.registerPlugin=At,Qe.plugins.getPlugin=av;var V9;let W9,j9,z9,U9,G9;function kVe(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(E,x,P){return function(T,I){x&&(I=T,T=n);for(var N=0;N<E.length;N++)I=E[N].apply(T,P?[I]:[]);return P?I:T}}function w(E,x,P,T){if(typeof E!="function"&&(T||E!==void 0))throw new TypeError(x+" must "+(P||"be")+" a function"+(T?"":" or undefined"));return E}function _(E,x,P,T,I,N,W,j,K,H,k){function B(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(x[0]),z=x[3],se=!W,b=I===1,C=I===3,S=I===4,A=I===2;function L(oe,le,je){return function(ye,xe){return le&&(xe=ye,ye=E),je&&je(ye),M[oe].call(ye,xe)}}if(!se){var M={},$=[],Z=C?"get":S||b?"set":"value";if(K?(H||b?M={get:Y9(function(){return z(this)},T,"get"),set:function(oe){x[4](this,oe)}}:M[Z]=z,H||Y9(M[Z],T,A?"":Z)):H||(M=Object.getOwnPropertyDescriptor(E,T)),!H&&!K){if((a=m[+j][T])&&(a^I)!=7)throw Error("Decorating two elements with the same name ("+M[Z].name+") is not supported yet");m[+j][T]=I<3?1:I}}for(var re=E,ue=G.length-1;ue>=0;ue-=P?2:1){var ae=w(G[ue],"A decorator","be",!0),De=P?G[ue-1]:void 0,Ee={},ee={kind:["field","accessor","method","getter","setter","class"][I],name:T,metadata:o,addInitializer:(function(oe,le){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(le,"An initializer","be",!0),N.push(le)}).bind(null,Ee)};if(se)a=ae.call(De,re,ee),Ee.v=1,w(a,"class decorators","return")&&(re=a);else if(ee.static=j,ee.private=K,a=ee.access={has:K?k.bind():function(oe){return T in oe}},S||(a.get=K?A?function(oe){return B(oe),M.value}:L("get",0,B):function(oe){return oe[T]}),A||C||(a.set=K?L("set",0,B):function(oe,le){oe[T]=le}),re=ae.call(De,b?{get:M.get,set:M.set}:M[Z],ee),Ee.v=1,b){if(typeof re=="object"&&re)(a=w(re.get,"accessor.get"))&&(M.get=a),(a=w(re.set,"accessor.set"))&&(M.set=a),(a=w(re.init,"accessor.init"))&&$.unshift(a);else if(re!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(re,(H?"field":"method")+" decorators","return")&&(H?$.unshift(re):M[Z]=re)}return I<2&&W.push(y($,j,1),y(N,j,0)),H||se||(K?b?W.splice(-1,0,L("get",j),L("set",j)):W.push(A?M[Z]:w.call.bind(M[Z])):g(E,T,M)),re}function R(E){return g(E,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(E){E&&u.push(y(E))},d=function(E,x){for(var P=0;P<t.length;P++){var T=t[P],I=T[1],N=7&I;if((8&I)==E&&!N==x){var W=T[2],j=!!T[3],K=16&I;_(E?n:n.prototype,T,K,j?"#"+W:DVe(W),N,N<2?[]:E?c=c||[]:l=l||[],u,!!E,j,x,E&&j?function(H){return LVe(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||R(n),{e:a,get c(){var E=[];return v&&[R(n=_(n,[e],i,n.name,5,E)),y(E,1)]}}}function DVe(n){var e=NVe(n,"string");return typeof e=="symbol"?e:e+""}function NVe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Y9(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function LVe(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let K9;class HVe{constructor(){this.ea=fe(XH),this.mytable=void 0,this.hot=void 0,this.datachannel=j9(this),this.tabid=(z9(this),U9(this)),this.showtable=(G9(this),!0)}attached(){let e=[["Subject/Object/Predicate","type","CRC Risk","CRC Neoplasia","Physical Activity"],["Trans-Chlordane","environmental","corelates","is",0],["PCB194","environmental","corelates",1],["Sterilisation","biometric","increase",0],["Tobacco Consumption","lifestyle","increase",1,1],["PAC-RSK","Interaction Term","decrease",0,1]],t=this;this.hot=new Qe(this.mytable,{data:e,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,autoWrapCol:!0,licenseKey:"non-commercial-and-evaluation",afterChange:function(i,r){r==="loadData"||!i||i.forEach(([s,o,a,l])=>{t.changeContent(s,o,a,l)})}})}changeContent(e,t,i,r){if(console.log(`Cell at row ${e}, column ${t} changed from "${i}" to "${r}".`),e==0)this.ea.publish(this.datachannel,{type:"changeNode",old:i,value:r});else if(t==0)this.ea.publish(this.datachannel,{type:"changeNode",old:i,value:r});else if(t==1){const s=this.hot.getDataAtCell(e,0);this.ea.publish(this.datachannel,{type:"changeType",node:s,old:i,value:r})}else{const s=this.hot.getDataAtCell(e,0),o=this.hot.getDataAtCell(0,t);this.ea.publish(this.datachannel,{type:"changeEdge",subject:s,object:o,old:i,value:r})}}submit(){let e=this.hot.getData();console.log("submit data:",e),this.ea.publish(this.datachannel,e)}showHide(){this.showtable=!this.showtable}addRow(){let e=prompt("Subject name","");if(e){const t=this.hot.countRows();this.hot.alter("insert_row_below",t),this.hot.setDataAtCell(t,0,e),this.hot.setDataAtCell(t,1,"environmental"),this.hot.selectCell(t,0)}}addColumn(){let e=prompt("Object name","");if(e){const t=this.hot.countCols();this.hot.alter("insert_col_end",t),this.hot.setDataAtCell(0,t,e),this.hot.selectCell(0,t)}}}V9=HVe,{e:[j9,z9,U9,G9],c:[K9,W9]}=kVe(V9,[Um({...dle,name:"sv-table"})],[[Sh,0,"datachannel"],[Sh,0,"tabid"]]),W9();const q9="chartjs-geo",ZN=`<div class="chartjsgeocontainer">
    <div class="w3-bar w3-light-grey w3-small">
        <button class="w3-bar-item w3-button" click.trigger="resetView()">Home</button>
        <button class="w3-bar-item w3-button" click.trigger="toggleAnimation()">Animate</button>
        <div class="w3-dropdown-hover">
            <button class="w3-button">Projection</button>
            <div class="w3-dropdown-content w3-bar-block w3-card-4">
              <button repeat.for="item of projections" click.trigger='switchProjection(item)' class="w3-bar-item w3-button w3-ripple">\${item}</button>                           
          </div>
        </div>
        <div class="w3-dropdown-hover">
          <button class="w3-button">Continent</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <button click.trigger='switchToEurope()' class="w3-bar-item w3-button w3-ripple">Europe</button> 
            <button click.trigger='switchToAsia()' class="w3-bar-item w3-button w3-ripple">Asia</button> 
            <button click.trigger='switchToNAmerica()' class="w3-bar-item w3-button w3-ripple">N.America</button> 
            <button click.trigger='switchToSAmerica()' class="w3-bar-item w3-button w3-ripple">S.America</button>
            <button click.trigger='switchToAfrica()' class="w3-bar-item w3-button w3-ripple">Africa</button> 
            <button click.trigger='switchToPacific()' class="w3-bar-item w3-button w3-ripple">Australia &amp; Oceania</button> 
            <button click.trigger='switchToWorld()' class="w3-bar-item w3-button w3-ripple">World</button>          
        </div>
      </div>
      </div>
<canvas ref="geochart" class="chartjsgeo"></canvas>
<div class="chartjsgeodesc">    
    click country for details: <b>\${countryName}</b><br/>
    <span>\${projectName} \${projectStatus} \${projectStatusText}</span><br/>
    <i>\${projectPublication}</i><br/>
    <span repeat.for="url of projecturls"><a href.bind='url' target="_blank" class="truncate">\${url}</a><br/></span>    
</div>
</div>`,X9=[],Z9={};let QN;function $Ve(n){QN||(QN=Nr.define({name:q9,template:ZN,dependencies:X9,bindables:Z9})),n.register(QN)}const FVe=Object.freeze(Object.defineProperty({__proto__:null,bindables:Z9,default:ZN,dependencies:X9,name:q9,register:$Ve,template:ZN},Symbol.toStringTag,{value:"Module"}));class oh{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(t[i++]=a),e=o}return t[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let t=this._n,i,r,s,o=0;if(t>0){for(o=e[--t];t>0&&(i=o,r=e[--t],o=i+r,s=r-(o-i),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}function*BVe(n){for(const e of n)yield*e}function Q9(n){return Array.from(BVe(n))}function Bp(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,s=new Array(r);++i<r;)s[i]=n+i*t;return s}var Ke=1e-6,JN=1e-12,vt=Math.PI,ti=vt/2,J9=vt/4,Es=vt*2,kr=180/vt,on=vt/180,Ht=Math.abs,Vp=Math.atan,ml=Math.atan2,at=Math.cos,P1=Math.ceil,eY=Math.exp,I1=Math.log,eL=Math.pow,nt=Math.sin,lo=Math.sign||function(n){return n>0?1:n<0?-1:0},Dr=Math.sqrt,tL=Math.tan;function tY(n){return n>1?0:n<-1?vt:Math.acos(n)}function co(n){return n>1?ti:n<-1?-ti:Math.asin(n)}function $i(){}function O1(n,e){n&&iY.hasOwnProperty(n.type)&&iY[n.type](n,e)}var nY={Feature:function(n,e){O1(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,r=t.length;++i<r;)O1(t[i].geometry,e)}},iY={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)n=t[i],e.point(n[0],n[1],n[2])},LineString:function(n,e){nL(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)nL(t[i],e,0)},Polygon:function(n,e){rY(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)rY(t[i],e)},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,r=t.length;++i<r;)O1(t[i],e)}};function nL(n,e,t){var i=-1,r=n.length-t,s;for(e.lineStart();++i<r;)s=n[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function rY(n,e){var t=-1,i=n.length;for(e.polygonStart();++t<i;)nL(n[t],e,1);e.polygonEnd()}function wf(n,e){n&&nY.hasOwnProperty(n.type)?nY[n.type](n,e):O1(n,e)}function iL(n){return[ml(n[1],n[0]),co(n[2])]}function Wp(n){var e=n[0],t=n[1],i=at(t);return[i*at(e),i*nt(e),nt(t)]}function k1(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function D1(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function rL(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function N1(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function sL(n){var e=Dr(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}function oL(n,e){function t(i,r){return i=n(i,r),e(i[0],i[1])}return n.invert&&e.invert&&(t.invert=function(i,r){return i=e.invert(i,r),i&&n.invert(i[0],i[1])}),t}function aL(n,e){return Ht(n)>vt&&(n-=Math.round(n/Es)*Es),[n,e]}aL.invert=aL;function sY(n,e,t){return(n%=Es)?e||t?oL(aY(n),lY(e,t)):aY(n):e||t?lY(e,t):aL}function oY(n){return function(e,t){return e+=n,Ht(e)>vt&&(e-=Math.round(e/Es)*Es),[e,t]}}function aY(n){var e=oY(n);return e.invert=oY(-n),e}function lY(n,e){var t=at(n),i=nt(n),r=at(e),s=nt(e);function o(a,l){var c=at(l),u=at(a)*c,h=nt(a)*c,d=nt(l),f=d*t+u*i;return[ml(h*r-f*s,u*t-d*i),co(f*r+h*s)]}return o.invert=function(a,l){var c=at(l),u=at(a)*c,h=nt(a)*c,d=nt(l),f=d*r-h*s;return[ml(h*r+d*s,u*t+f*i),co(f*t-u*i)]},o}function VVe(n){n=sY(n[0]*on,n[1]*on,n.length>2?n[2]*on:0);function e(t){return t=n(t[0]*on,t[1]*on),t[0]*=kr,t[1]*=kr,t}return e.invert=function(t){return t=n.invert(t[0]*on,t[1]*on),t[0]*=kr,t[1]*=kr,t},e}function WVe(n,e,t,i,r,s){if(t){var o=at(e),a=nt(e),l=i*t;r==null?(r=e+i*Es,s=e-l/2):(r=cY(o,r),s=cY(o,s),(i>0?r<s:r>s)&&(r+=i*Es));for(var c,u=r;i>0?u>s:u<s;u-=l)c=iL([o,-a*at(u),-a*nt(u)]),n.point(c[0],c[1])}}function cY(n,e){e=Wp(e),e[0]-=n,sL(e);var t=tY(-e[1]);return((-e[2]<0?-t:t)+Es-Ke)%Es}function uY(){var n=[],e;return{point:function(t,i,r){e.push([t,i,r])},lineStart:function(){n.push(e=[])},lineEnd:$i,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function L1(n,e){return Ht(n[0]-e[0])<Ke&&Ht(n[1]-e[1])<Ke}function H1(n,e,t,i){this.x=n,this.z=e,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function hY(n,e,t,i,r){var s=[],o=[],a,l;if(n.forEach(function(g){if(!((p=g.length-1)<=0)){var p,m=g[0],v=g[p],y;if(L1(m,v)){if(!m[2]&&!v[2]){for(r.lineStart(),a=0;a<p;++a)r.point((m=g[a])[0],m[1]);r.lineEnd();return}v[0]+=2*Ke}s.push(y=new H1(m,g,null,!0)),o.push(y.o=new H1(m,null,y,!1)),s.push(y=new H1(v,g,null,!1)),o.push(y.o=new H1(v,null,y,!0))}}),!!s.length){for(o.sort(e),dY(s),dY(o),a=0,l=o.length;a<l;++a)o[a].e=t=!t;for(var c=s[0],u,h;;){for(var d=c,f=!0;d.v;)if((d=d.n)===c)return;u=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(a=0,l=u.length;a<l;++a)r.point((h=u[a])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(f)for(u=d.p.z,a=u.length-1;a>=0;--a)r.point((h=u[a])[0],h[1]);else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,u=d.z,f=!f}while(!d.v);r.lineEnd()}}}function dY(n){if(e=n.length){for(var e,t=0,i=n[0],r;++t<e;)i.n=r=n[t],r.p=i,i=r;i.n=r=n[0],r.p=i}}function lL(n){return Ht(n[0])<=vt?n[0]:lo(n[0])*((Ht(n[0])+vt)%Es-vt)}function fY(n,e){var t=lL(e),i=e[1],r=nt(i),s=[nt(t),-at(t),0],o=0,a=0,l=new oh;r===1?i=ti+Ke:r===-1&&(i=-ti-Ke);for(var c=0,u=n.length;c<u;++c)if(d=(h=n[c]).length)for(var h,d,f=h[d-1],g=lL(f),p=f[1]/2+J9,m=nt(p),v=at(p),y=0;y<d;++y,g=_,m=E,v=x,f=w){var w=h[y],_=lL(w),R=w[1]/2+J9,E=nt(R),x=at(R),P=_-g,T=P>=0?1:-1,I=T*P,N=I>vt,W=m*E;if(l.add(ml(W*T*nt(I),v*x+W*at(I))),o+=N?P+T*Es:P,N^g>=t^_>=t){var j=D1(Wp(f),Wp(w));sL(j);var K=D1(s,j);sL(K);var H=(N^P>=0?-1:1)*co(K[2]);(i>H||i===H&&(j[0]||j[1]))&&(a+=N^P>=0?1:-1)}}return(o<-Ke||o<Ke&&l<-JN)^a&1}function gY(n,e,t,i){return function(r){var s=e(r),o=uY(),a=e(o),l=!1,c,u,h,d={point:f,lineStart:p,lineEnd:m,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=w,u=[],c=[]},polygonEnd:function(){d.point=f,d.lineStart=p,d.lineEnd=m,u=Q9(u);var _=fY(c,i);u.length?(l||(r.polygonStart(),l=!0),hY(u,zVe,_,t,r)):_&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(_,R){n(_,R)&&r.point(_,R)}function g(_,R){s.point(_,R)}function p(){d.point=g,s.lineStart()}function m(){d.point=f,s.lineEnd()}function v(_,R){h.push([_,R]),a.point(_,R)}function y(){a.lineStart(),h=[]}function w(){v(h[0][0],h[0][1]),a.lineEnd();var _=a.clean(),R=o.result(),E,x=R.length,P,T,I;if(h.pop(),c.push(h),h=null,!!x){if(_&1){if(T=R[0],(P=T.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),E=0;E<P;++E)r.point((I=T[E])[0],I[1]);r.lineEnd()}return}x>1&&_&2&&R.push(R.pop().concat(R.shift())),u.push(R.filter(jVe))}}return d}}function jVe(n){return n.length>1}function zVe(n,e){return((n=n.x)[0]<0?n[1]-ti-Ke:ti-n[1])-((e=e.x)[0]<0?e[1]-ti-Ke:ti-e[1])}const pY=gY(function(){return!0},UVe,YVe,[-vt,-ti]);function UVe(n){var e=NaN,t=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(s,o){var a=s>0?vt:-vt,l=Ht(s-e);Ht(l-vt)<Ke?(n.point(e,t=(t+o)/2>0?ti:-ti),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(s,t),r=0):i!==a&&l>=vt&&(Ht(e-i)<Ke&&(e-=i*Ke),Ht(s-a)<Ke&&(s-=a*Ke),t=GVe(e,t,s,o),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),r=0),n.point(e=s,t=o),i=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function GVe(n,e,t,i){var r,s,o=nt(n-t);return Ht(o)>Ke?Vp((nt(e)*(s=at(i))*nt(t)-nt(i)*(r=at(e))*nt(n))/(r*s*o)):(e+i)/2}function YVe(n,e,t,i){var r;if(n==null)r=t*ti,i.point(-vt,r),i.point(0,r),i.point(vt,r),i.point(vt,0),i.point(vt,-r),i.point(0,-r),i.point(-vt,-r),i.point(-vt,0),i.point(-vt,r);else if(Ht(n[0]-e[0])>Ke){var s=n[0]<e[0]?vt:-vt;r=t*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function KVe(n){var e=at(n),t=2*on,i=e>0,r=Ht(e)>Ke;function s(u,h,d,f){WVe(f,n,t,d,u,h)}function o(u,h){return at(u)*at(h)>e}function a(u){var h,d,f,g,p;return{lineStart:function(){g=f=!1,p=1},point:function(m,v){var y=[m,v],w,_=o(m,v),R=i?_?0:c(m,v):_?c(m+(m<0?vt:-vt),v):0;if(!h&&(g=f=_)&&u.lineStart(),_!==f&&(w=l(h,y),(!w||L1(h,w)||L1(y,w))&&(y[2]=1)),_!==f)p=0,_?(u.lineStart(),w=l(y,h),u.point(w[0],w[1])):(w=l(h,y),u.point(w[0],w[1],2),u.lineEnd()),h=w;else if(r&&h&&i^_){var E;!(R&d)&&(E=l(y,h,!0))&&(p=0,i?(u.lineStart(),u.point(E[0][0],E[0][1]),u.point(E[1][0],E[1][1]),u.lineEnd()):(u.point(E[1][0],E[1][1]),u.lineEnd(),u.lineStart(),u.point(E[0][0],E[0][1],3)))}_&&(!h||!L1(h,y))&&u.point(y[0],y[1]),h=y,f=_,d=R},lineEnd:function(){f&&u.lineEnd(),h=null},clean:function(){return p|(g&&f)<<1}}}function l(u,h,d){var f=Wp(u),g=Wp(h),p=[1,0,0],m=D1(f,g),v=k1(m,m),y=m[0],w=v-y*y;if(!w)return!d&&u;var _=e*v/w,R=-e*y/w,E=D1(p,m),x=N1(p,_),P=N1(m,R);rL(x,P);var T=E,I=k1(x,T),N=k1(T,T),W=I*I-N*(k1(x,x)-1);if(!(W<0)){var j=Dr(W),K=N1(T,(-I-j)/N);if(rL(K,x),K=iL(K),!d)return K;var H=u[0],k=h[0],B=u[1],G=h[1],z;k<H&&(z=H,H=k,k=z);var se=k-H,b=Ht(se-vt)<Ke,C=b||se<Ke;if(!b&&G<B&&(z=B,B=G,G=z),C?b?B+G>0^K[1]<(Ht(K[0]-H)<Ke?B:G):B<=K[1]&&K[1]<=G:se>vt^(H<=K[0]&&K[0]<=k)){var S=N1(T,(-I+j)/N);return rL(S,x),[K,iL(S)]}}}function c(u,h){var d=i?n:vt-n,f=0;return u<-d?f|=1:u>d&&(f|=2),h<-d?f|=4:h>d&&(f|=8),f}return gY(o,a,s,i?[0,-n]:[-vt,n-vt])}function qVe(n,e,t,i,r,s){var o=n[0],a=n[1],l=e[0],c=e[1],u=0,h=1,d=l-o,f=c-a,g;if(g=t-o,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<h&&(h=g)}else if(d>0){if(g>h)return;g>u&&(u=g)}if(g=r-o,!(!d&&g<0)){if(g/=d,d<0){if(g>h)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<h&&(h=g)}if(g=i-a,!(!f&&g>0)){if(g/=f,f<0){if(g<u)return;g<h&&(h=g)}else if(f>0){if(g>h)return;g>u&&(u=g)}if(g=s-a,!(!f&&g<0)){if(g/=f,f<0){if(g>h)return;g>u&&(u=g)}else if(f>0){if(g<u)return;g<h&&(h=g)}return u>0&&(n[0]=o+u*d,n[1]=a+u*f),h<1&&(e[0]=o+h*d,e[1]=a+h*f),!0}}}}}var Jw=1e9,$1=-Jw;function XVe(n,e,t,i){function r(c,u){return n<=c&&c<=t&&e<=u&&u<=i}function s(c,u,h,d){var f=0,g=0;if(c==null||(f=o(c,h))!==(g=o(u,h))||l(c,u)<0^h>0)do d.point(f===0||f===3?n:t,f>1?i:e);while((f=(f+h+4)%4)!==g);else d.point(u[0],u[1])}function o(c,u){return Ht(c[0]-n)<Ke?u>0?0:3:Ht(c[0]-t)<Ke?u>0?2:1:Ht(c[1]-e)<Ke?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var h=o(c,1),d=o(u,1);return h!==d?h-d:h===0?u[1]-c[1]:h===1?c[0]-u[0]:h===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,h=uY(),d,f,g,p,m,v,y,w,_,R,E,x={point:P,lineStart:W,lineEnd:j,polygonStart:I,polygonEnd:N};function P(H,k){r(H,k)&&u.point(H,k)}function T(){for(var H=0,k=0,B=f.length;k<B;++k)for(var G=f[k],z=1,se=G.length,b=G[0],C,S,A=b[0],L=b[1];z<se;++z)C=A,S=L,b=G[z],A=b[0],L=b[1],S<=i?L>i&&(A-C)*(i-S)>(L-S)*(n-C)&&++H:L<=i&&(A-C)*(i-S)<(L-S)*(n-C)&&--H;return H}function I(){u=h,d=[],f=[],E=!0}function N(){var H=T(),k=E&&H,B=(d=Q9(d)).length;(k||B)&&(c.polygonStart(),k&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),B&&hY(d,a,H,s,c),c.polygonEnd()),u=c,d=f=g=null}function W(){x.point=K,f&&f.push(g=[]),R=!0,_=!1,y=w=NaN}function j(){d&&(K(p,m),v&&_&&h.rejoin(),d.push(h.result())),x.point=P,_&&u.lineEnd()}function K(H,k){var B=r(H,k);if(f&&g.push([H,k]),R)p=H,m=k,v=B,R=!1,B&&(u.lineStart(),u.point(H,k));else if(B&&_)u.point(H,k);else{var G=[y=Math.max($1,Math.min(Jw,y)),w=Math.max($1,Math.min(Jw,w))],z=[H=Math.max($1,Math.min(Jw,H)),k=Math.max($1,Math.min(Jw,k))];qVe(G,z,n,e,t,i)?(_||(u.lineStart(),u.point(G[0],G[1])),u.point(z[0],z[1]),B||u.lineEnd(),E=!1):B&&(u.lineStart(),u.point(H,k),E=!1)}y=H,w=k,_=B}return x}}var cL,uL,F1,B1,jp={sphere:$i,point:$i,lineStart:ZVe,lineEnd:$i,polygonStart:$i,polygonEnd:$i};function ZVe(){jp.point=JVe,jp.lineEnd=QVe}function QVe(){jp.point=jp.lineEnd=$i}function JVe(n,e){n*=on,e*=on,uL=n,F1=nt(e),B1=at(e),jp.point=eWe}function eWe(n,e){n*=on,e*=on;var t=nt(e),i=at(e),r=Ht(n-uL),s=at(r),o=nt(r),a=i*o,l=B1*t-F1*i*s,c=F1*t+B1*i*s;cL.add(ml(Dr(a*a+l*l),c)),uL=n,F1=t,B1=i}function tWe(n){return cL=new oh,wf(n,jp),+cL}var hL=[null,null],nWe={type:"LineString",coordinates:hL};function dL(n,e){return hL[0]=n,hL[1]=e,tWe(nWe)}var mY={Feature:function(n,e){return V1(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,r=t.length;++i<r;)if(V1(t[i].geometry,e))return!0;return!1}},bY={Sphere:function(){return!0},Point:function(n,e){return vY(n.coordinates,e)},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(vY(t[i],e))return!0;return!1},LineString:function(n,e){return wY(n.coordinates,e)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(wY(t[i],e))return!0;return!1},Polygon:function(n,e){return yY(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(yY(t[i],e))return!0;return!1},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,r=t.length;++i<r;)if(V1(t[i],e))return!0;return!1}};function V1(n,e){return n&&bY.hasOwnProperty(n.type)?bY[n.type](n,e):!1}function vY(n,e){return dL(n,e)===0}function wY(n,e){for(var t,i,r,s=0,o=n.length;s<o;s++){if(i=dL(n[s],e),i===0||s>0&&(r=dL(n[s],n[s-1]),r>0&&t<=r&&i<=r&&(t+i-r)*(1-Math.pow((t-i)/r,2))<JN*r))return!0;t=i}return!1}function yY(n,e){return!!fY(n.map(iWe),CY(e))}function iWe(n){return n=n.map(CY),n.pop(),n}function CY(n){return[n[0]*on,n[1]*on]}function rWe(n,e){return(n&&mY.hasOwnProperty(n.type)?mY[n.type]:V1)(n,e)}function SY(n,e,t){var i=Bp(n,e-Ke,t).concat(e);return function(r){return i.map(function(s){return[r,s]})}}function _Y(n,e,t){var i=Bp(n,e-Ke,t).concat(e);return function(r){return i.map(function(s){return[s,r]})}}function RY(){var n,e,t,i,r,s,o,a,l=10,c=l,u=90,h=360,d,f,g,p,m=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Bp(P1(i/u)*u,t,u).map(g).concat(Bp(P1(a/h)*h,o,h).map(p)).concat(Bp(P1(e/l)*l,n,l).filter(function(w){return Ht(w%u)>Ke}).map(d)).concat(Bp(P1(s/c)*c,r,c).filter(function(w){return Ht(w%h)>Ke}).map(f))}return v.lines=function(){return y().map(function(w){return{type:"LineString",coordinates:w}})},v.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(p(o).slice(1),g(t).reverse().slice(1),p(a).reverse().slice(1))]}},v.extent=function(w){return arguments.length?v.extentMajor(w).extentMinor(w):v.extentMinor()},v.extentMajor=function(w){return arguments.length?(i=+w[0][0],t=+w[1][0],a=+w[0][1],o=+w[1][1],i>t&&(w=i,i=t,t=w),a>o&&(w=a,a=o,o=w),v.precision(m)):[[i,a],[t,o]]},v.extentMinor=function(w){return arguments.length?(e=+w[0][0],n=+w[1][0],s=+w[0][1],r=+w[1][1],e>n&&(w=e,e=n,n=w),s>r&&(w=s,s=r,r=w),v.precision(m)):[[e,s],[n,r]]},v.step=function(w){return arguments.length?v.stepMajor(w).stepMinor(w):v.stepMinor()},v.stepMajor=function(w){return arguments.length?(u=+w[0],h=+w[1],v):[u,h]},v.stepMinor=function(w){return arguments.length?(l=+w[0],c=+w[1],v):[l,c]},v.precision=function(w){return arguments.length?(m=+w,d=SY(s,r,90),f=_Y(e,n,m),g=SY(a,o,90),p=_Y(i,t,m),v):m},v.extentMajor([[-180,-90+Ke],[180,90-Ke]]).extentMinor([[-180,-80-Ke],[180,80+Ke]])}function sWe(){return RY()()}const fL=n=>n;var gL=new oh,pL=new oh,EY,xY,mL,bL,Dc={point:$i,lineStart:$i,lineEnd:$i,polygonStart:function(){Dc.lineStart=oWe,Dc.lineEnd=lWe},polygonEnd:function(){Dc.lineStart=Dc.lineEnd=Dc.point=$i,gL.add(Ht(pL)),pL=new oh},result:function(){var n=gL/2;return gL=new oh,n}};function oWe(){Dc.point=aWe}function aWe(n,e){Dc.point=TY,EY=mL=n,xY=bL=e}function TY(n,e){pL.add(bL*n-mL*e),mL=n,bL=e}function lWe(){TY(EY,xY)}var zp=1/0,W1=zp,ey=-zp,j1=ey,z1={point:cWe,lineStart:$i,lineEnd:$i,polygonStart:$i,polygonEnd:$i,result:function(){var n=[[zp,W1],[ey,j1]];return ey=j1=-(W1=zp=1/0),n}};function cWe(n,e){n<zp&&(zp=n),n>ey&&(ey=n),e<W1&&(W1=e),e>j1&&(j1=e)}var vL=0,wL=0,ty=0,U1=0,G1=0,Up=0,yL=0,CL=0,ny=0,MY,AY,bl,vl,uo={point:yf,lineStart:PY,lineEnd:IY,polygonStart:function(){uo.lineStart=dWe,uo.lineEnd=fWe},polygonEnd:function(){uo.point=yf,uo.lineStart=PY,uo.lineEnd=IY},result:function(){var n=ny?[yL/ny,CL/ny]:Up?[U1/Up,G1/Up]:ty?[vL/ty,wL/ty]:[NaN,NaN];return vL=wL=ty=U1=G1=Up=yL=CL=ny=0,n}};function yf(n,e){vL+=n,wL+=e,++ty}function PY(){uo.point=uWe}function uWe(n,e){uo.point=hWe,yf(bl=n,vl=e)}function hWe(n,e){var t=n-bl,i=e-vl,r=Dr(t*t+i*i);U1+=r*(bl+n)/2,G1+=r*(vl+e)/2,Up+=r,yf(bl=n,vl=e)}function IY(){uo.point=yf}function dWe(){uo.point=gWe}function fWe(){OY(MY,AY)}function gWe(n,e){uo.point=OY,yf(MY=bl=n,AY=vl=e)}function OY(n,e){var t=n-bl,i=e-vl,r=Dr(t*t+i*i);U1+=r*(bl+n)/2,G1+=r*(vl+e)/2,Up+=r,r=vl*n-bl*e,yL+=r*(bl+n),CL+=r*(vl+e),ny+=r*3,yf(bl=n,vl=e)}function kY(n){this._context=n}kY.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._context.moveTo(n,e),this._point=1;break}case 1:{this._context.lineTo(n,e);break}default:{this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,Es);break}}},result:$i};var SL=new oh,_L,DY,NY,iy,ry,sy={point:$i,lineStart:function(){sy.point=pWe},lineEnd:function(){_L&&LY(DY,NY),sy.point=$i},polygonStart:function(){_L=!0},polygonEnd:function(){_L=null},result:function(){var n=+SL;return SL=new oh,n}};function pWe(n,e){sy.point=LY,DY=iy=n,NY=ry=e}function LY(n,e){iy-=n,ry-=e,SL.add(Dr(iy*iy+ry*ry)),iy=n,ry=e}let HY,Y1,$Y,FY;class BY{constructor(e){this._append=e==null?VY:mWe(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:{this._append`M${e},${t}`,this._point=1;break}case 1:{this._append`L${e},${t}`;break}default:{if(this._append`M${e},${t}`,this._radius!==$Y||this._append!==Y1){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,$Y=i,Y1=this._append,FY=this._,this._=r}this._+=FY;break}}}result(){const e=this._;return this._="",e.length?e:null}}function VY(n){let e=1;this._+=n[0];for(const t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function mWe(n){const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);if(e>15)return VY;if(e!==HY){const t=10**e;HY=e,Y1=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*t)/t+r[s]}}return Y1}function WY(n,e){let t=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),wf(a,r(s))),s.result()}return o.area=function(a){return wf(a,r(Dc)),Dc.result()},o.measure=function(a){return wf(a,r(sy)),sy.result()},o.bounds=function(a){return wf(a,r(z1)),z1.result()},o.centroid=function(a){return wf(a,r(uo)),uo.result()},o.projection=function(a){return arguments.length?(r=a==null?(n=null,fL):(n=a).stream,o):n},o.context=function(a){return arguments.length?(s=a==null?(e=null,new BY(t)):new kY(e=a),typeof i!="function"&&s.pointRadius(i),o):e},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);t=l}return e===null&&(s=new BY(t)),o},o.projection(n).digits(t).context(e)}function RL(n){return function(e){var t=new EL;for(var i in n)t[i]=n[i];return t.stream=e,t}}function EL(){}EL.prototype={constructor:EL,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function xL(n,e,t){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),wf(t,n.stream(z1)),e(z1.result()),i!=null&&n.clipExtent(i),n}function TL(n,e,t){return xL(n,function(i){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+e[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(s-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([a,l])},t)}function jY(n,e,t){return TL(n,[[0,0],e],t)}function zY(n,e,t){return xL(n,function(i){var r=+e,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];n.scale(150*s).translate([o,a])},t)}function UY(n,e,t){return xL(n,function(i){var r=+e,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([o,a])},t)}var GY=16,bWe=at(30*on);function YY(n,e){return+e?wWe(n,e):vWe(n)}function vWe(n){return RL({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function wWe(n,e){function t(i,r,s,o,a,l,c,u,h,d,f,g,p,m){var v=c-i,y=u-r,w=v*v+y*y;if(w>4*e&&p--){var _=o+d,R=a+f,E=l+g,x=Dr(_*_+R*R+E*E),P=co(E/=x),T=Ht(Ht(E)-1)<Ke||Ht(s-h)<Ke?(s+h)/2:ml(R,_),I=n(T,P),N=I[0],W=I[1],j=N-i,K=W-r,H=y*j-v*K;(H*H/w>e||Ht((v*j+y*K)/w-.5)>.3||o*d+a*f+l*g<bWe)&&(t(i,r,s,o,a,l,N,W,T,_/=x,R/=x,E,p,m),m.point(N,W),t(N,W,T,_,R,E,c,u,h,d,f,g,p,m))}}return function(i){var r,s,o,a,l,c,u,h,d,f,g,p,m={point:v,lineStart:y,lineEnd:_,polygonStart:function(){i.polygonStart(),m.lineStart=R},polygonEnd:function(){i.polygonEnd(),m.lineStart=y}};function v(P,T){P=n(P,T),i.point(P[0],P[1])}function y(){h=NaN,m.point=w,i.lineStart()}function w(P,T){var I=Wp([P,T]),N=n(P,T);t(h,d,u,f,g,p,h=N[0],d=N[1],u=P,f=I[0],g=I[1],p=I[2],GY,i),i.point(h,d)}function _(){m.point=v,i.lineEnd()}function R(){y(),m.point=E,m.lineEnd=x}function E(P,T){w(r=P,T),s=h,o=d,a=f,l=g,c=p,m.point=w}function x(){t(h,d,u,f,g,p,s,o,r,a,l,c,GY,i),m.lineEnd=_,_()}return m}}var yWe=RL({point:function(n,e){this.stream.point(n*on,e*on)}});function CWe(n){return RL({point:function(e,t){var i=n(e,t);return this.stream.point(i[0],i[1])}})}function SWe(n,e,t,i,r){function s(o,a){return o*=i,a*=r,[e+n*o,t-n*a]}return s.invert=function(o,a){return[(o-e)/n*i,(t-a)/n*r]},s}function KY(n,e,t,i,r,s){if(!s)return SWe(n,e,t,i,r);var o=at(s),a=nt(s),l=o*n,c=a*n,u=o/n,h=a/n,d=(a*t-o*e)/n,f=(a*e+o*t)/n;function g(p,m){return p*=i,m*=r,[l*p-c*m+e,t-c*p-l*m]}return g.invert=function(p,m){return[i*(u*p-h*m+d),r*(f-h*p-u*m)]},g}function Nc(n){return qY(function(){return n})()}function qY(n){var e,t=150,i=480,r=250,s=0,o=0,a=0,l=0,c=0,u,h=0,d=1,f=1,g=null,p=pY,m=null,v,y,w,_=fL,R=.5,E,x,P,T,I;function N(H){return P(H[0]*on,H[1]*on)}function W(H){return H=P.invert(H[0],H[1]),H&&[H[0]*kr,H[1]*kr]}N.stream=function(H){return T&&I===H?T:T=yWe(CWe(u)(p(E(_(I=H)))))},N.preclip=function(H){return arguments.length?(p=H,g=void 0,K()):p},N.postclip=function(H){return arguments.length?(_=H,m=v=y=w=null,K()):_},N.clipAngle=function(H){return arguments.length?(p=+H?KVe(g=H*on):(g=null,pY),K()):g*kr},N.clipExtent=function(H){return arguments.length?(_=H==null?(m=v=y=w=null,fL):XVe(m=+H[0][0],v=+H[0][1],y=+H[1][0],w=+H[1][1]),K()):m==null?null:[[m,v],[y,w]]},N.scale=function(H){return arguments.length?(t=+H,j()):t},N.translate=function(H){return arguments.length?(i=+H[0],r=+H[1],j()):[i,r]},N.center=function(H){return arguments.length?(s=H[0]%360*on,o=H[1]%360*on,j()):[s*kr,o*kr]},N.rotate=function(H){return arguments.length?(a=H[0]%360*on,l=H[1]%360*on,c=H.length>2?H[2]%360*on:0,j()):[a*kr,l*kr,c*kr]},N.angle=function(H){return arguments.length?(h=H%360*on,j()):h*kr},N.reflectX=function(H){return arguments.length?(d=H?-1:1,j()):d<0},N.reflectY=function(H){return arguments.length?(f=H?-1:1,j()):f<0},N.precision=function(H){return arguments.length?(E=YY(x,R=H*H),K()):Dr(R)},N.fitExtent=function(H,k){return TL(N,H,k)},N.fitSize=function(H,k){return jY(N,H,k)},N.fitWidth=function(H,k){return zY(N,H,k)},N.fitHeight=function(H,k){return UY(N,H,k)};function j(){var H=KY(t,0,0,d,f,h).apply(null,e(s,o)),k=KY(t,i-H[0],r-H[1],d,f,h);return u=sY(a,l,c),x=oL(e,k),P=oL(u,x),E=YY(x,R),K()}function K(){return T=I=null,N}return function(){return e=n.apply(this,arguments),N.invert=e.invert&&W,j()}}function ML(n){var e=0,t=vt/3,i=qY(n),r=i(e,t);return r.parallels=function(s){return arguments.length?i(e=s[0]*on,t=s[1]*on):[e*kr,t*kr]},r}function _We(n){var e=at(n);function t(i,r){return[i*e,nt(r)/e]}return t.invert=function(i,r){return[i/e,co(r*e)]},t}function RWe(n,e){var t=nt(n),i=(t+nt(e))/2;if(Ht(i)<Ke)return _We(n);var r=1+t*(2*i-t),s=Dr(r)/i;function o(a,l){var c=Dr(r-2*i*nt(l))/i;return[c*nt(a*=i),s-c*at(a)]}return o.invert=function(a,l){var c=s-l,u=ml(a,Ht(c))*lo(c);return c*i<0&&(u-=vt*lo(a)*lo(c)),[u/i,co((r-(a*a+c*c)*i*i)/(2*i))]},o}function K1(){return ML(RWe).scale(155.424).center([0,33.6442])}function XY(){return K1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function EWe(n){var e=n.length;return{point:function(t,i){for(var r=-1;++r<e;)n[r].point(t,i)},sphere:function(){for(var t=-1;++t<e;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<e;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<e;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<e;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<e;)n[t].polygonEnd()}}}function xWe(){var n,e,t=XY(),i,r=K1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=K1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(d,f){l=[d,f]}};function u(d){var f=d[0],g=d[1];return l=null,i.point(f,g),l||(s.point(f,g),l)||(a.point(f,g),l)}u.invert=function(d){var f=t.scale(),g=t.translate(),p=(d[0]-g[0])/f,m=(d[1]-g[1])/f;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?r:m>=.166&&m<.234&&p>=-.214&&p<-.115?o:t).invert(d)},u.stream=function(d){return n&&e===d?n:n=EWe([t.stream(e=d),r.stream(d),o.stream(d)])},u.precision=function(d){return arguments.length?(t.precision(d),r.precision(d),o.precision(d),h()):t.precision()},u.scale=function(d){return arguments.length?(t.scale(d),r.scale(d*.35),o.scale(d),u.translate(t.translate())):t.scale()},u.translate=function(d){if(!arguments.length)return t.translate();var f=t.scale(),g=+d[0],p=+d[1];return i=t.translate(d).clipExtent([[g-.455*f,p-.238*f],[g+.455*f,p+.238*f]]).stream(c),s=r.translate([g-.307*f,p+.201*f]).clipExtent([[g-.425*f+Ke,p+.12*f+Ke],[g-.214*f-Ke,p+.234*f-Ke]]).stream(c),a=o.translate([g-.205*f,p+.212*f]).clipExtent([[g-.214*f+Ke,p+.166*f+Ke],[g-.115*f-Ke,p+.234*f-Ke]]).stream(c),h()},u.fitExtent=function(d,f){return TL(u,d,f)},u.fitSize=function(d,f){return jY(u,d,f)},u.fitWidth=function(d,f){return zY(u,d,f)},u.fitHeight=function(d,f){return UY(u,d,f)};function h(){return n=e=null,u}return u.scale(1070)}function ZY(n){return function(e,t){var i=at(e),r=at(t),s=n(i*r);return s===1/0?[2,0]:[s*r*nt(e),s*nt(t)]}}function oy(n){return function(e,t){var i=Dr(e*e+t*t),r=n(i),s=nt(r),o=at(r);return[ml(e*s,i*o),co(i&&t*s/i)]}}var QY=ZY(function(n){return Dr(2/(1+n))});QY.invert=oy(function(n){return 2*co(n/2)});function TWe(){return Nc(QY).scale(124.75).clipAngle(180-.001)}var JY=ZY(function(n){return(n=tY(n))&&n/nt(n)});JY.invert=oy(function(n){return n});function MWe(){return Nc(JY).scale(79.4188).clipAngle(180-.001)}function q1(n,e){return[n,I1(tL((ti+e)/2))]}q1.invert=function(n,e){return[n,2*Vp(eY(e))-ti]};function AWe(){return eK(q1).scale(961/Es)}function eK(n){var e=Nc(n),t=e.center,i=e.scale,r=e.translate,s=e.clipExtent,o=null,a,l,c;e.scale=function(h){return arguments.length?(i(h),u()):i()},e.translate=function(h){return arguments.length?(r(h),u()):r()},e.center=function(h){return arguments.length?(t(h),u()):t()},e.clipExtent=function(h){return arguments.length?(h==null?o=a=l=c=null:(o=+h[0][0],a=+h[0][1],l=+h[1][0],c=+h[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var h=vt*i(),d=e(VVe(e.rotate()).invert([0,0]));return s(o==null?[[d[0]-h,d[1]-h],[d[0]+h,d[1]+h]]:n===q1?[[Math.max(d[0]-h,o),a],[Math.min(d[0]+h,l),c]]:[[o,Math.max(d[1]-h,a)],[l,Math.min(d[1]+h,c)]])}return u()}function X1(n){return tL((ti+n)/2)}function PWe(n,e){var t=at(n),i=n===e?nt(n):I1(t/at(e))/I1(X1(e)/X1(n)),r=t*eL(X1(n),i)/i;if(!i)return q1;function s(o,a){r>0?a<-ti+Ke&&(a=-ti+Ke):a>ti-Ke&&(a=ti-Ke);var l=r/eL(X1(a),i);return[l*nt(i*o),r-l*at(i*o)]}return s.invert=function(o,a){var l=r-a,c=lo(i)*Dr(o*o+l*l),u=ml(o,Ht(l))*lo(l);return l*i<0&&(u-=vt*lo(o)*lo(l)),[u/i,2*Vp(eL(r/c,1/i))-ti]},s}function IWe(){return ML(PWe).scale(109.5).parallels([30,30])}function Z1(n,e){return[n,e]}Z1.invert=Z1;function OWe(){return Nc(Z1).scale(152.63)}function kWe(n,e){var t=at(n),i=n===e?nt(n):(t-at(e))/(e-n),r=t/i+n;if(Ht(i)<Ke)return Z1;function s(o,a){var l=r-a,c=i*o;return[l*nt(c),r-l*at(c)]}return s.invert=function(o,a){var l=r-a,c=ml(o,Ht(l))*lo(l);return l*i<0&&(c-=vt*lo(o)*lo(l)),[c/i,r-lo(i)*Dr(o*o+l*l)]},s}function DWe(){return ML(kWe).scale(131.154).center([0,13.9389])}var ay=1.340264,ly=-.081106,cy=893e-6,uy=.003796,Q1=Dr(3)/2,NWe=12;function tK(n,e){var t=co(Q1*nt(e)),i=t*t,r=i*i*i;return[n*at(t)/(Q1*(ay+3*ly*i+r*(7*cy+9*uy*i))),t*(ay+ly*i+r*(cy+uy*i))]}tK.invert=function(n,e){for(var t=e,i=t*t,r=i*i*i,s=0,o,a,l;s<NWe&&(a=t*(ay+ly*i+r*(cy+uy*i))-e,l=ay+3*ly*i+r*(7*cy+9*uy*i),t-=o=a/l,i=t*t,r=i*i*i,!(Ht(o)<JN));++s);return[Q1*n*(ay+3*ly*i+r*(7*cy+9*uy*i))/at(t),co(nt(t)/Q1)]};function LWe(){return Nc(tK).scale(177.158)}function nK(n,e){var t=at(e),i=at(n)*t;return[t*nt(n)/i,nt(e)/i]}nK.invert=oy(Vp);function HWe(){return Nc(nK).scale(144.049).clipAngle(60)}function iK(n,e){var t=e*e,i=t*t;return[n*(.8707-.131979*t+i*(-.013791+i*(.003971*t-.001529*i))),e*(1.007226+t*(.015085+i*(-.044475+.028874*t-.005916*i)))]}iK.invert=function(n,e){var t=e,i=25,r;do{var s=t*t,o=s*s;t-=r=(t*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-e)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Ht(r)>Ke&&--i>0);return[n/(.8707+(s=t*t)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),t]};function $We(){return Nc(iK).scale(175.295)}function rK(n,e){return[at(e)*nt(n),nt(e)]}rK.invert=oy(co);function AL(){return Nc(rK).scale(249.5).clipAngle(90+Ke)}function sK(n,e){var t=at(e),i=1+at(n)*t;return[t*nt(n)/i,nt(e)/i]}sK.invert=oy(function(n){return 2*Vp(n)});function FWe(){return Nc(sK).scale(250).clipAngle(142)}function oK(n,e){return[I1(tL((ti+e)/2)),-n]}oK.invert=function(n,e){return[-e,2*Vp(eY(n))-ti]};function BWe(){var n=eK(oK),e=n.center,t=n.rotate;return n.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},n.rotate=function(i){return arguments.length?t([i[0],i[1],i.length>2?i[2]+90:90]):(i=t(),[i[0],i[1],i[2]-90])},t([0,0,90]).scale(159.155)}function jt(n){for(var e=n.length/6|0,t=new Array(e),i=0;i<e;)t[i]="#"+n.slice(i*6,++i*6);return t}function J1(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function PL(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Gp(){}var Cf=.7,Yp=1/Cf,Kp="\\s*([+-]?\\d+)\\s*",hy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VWe=/^#([0-9a-f]{3,8})$/,WWe=new RegExp(`^rgb\\(${Kp},${Kp},${Kp}\\)$`),jWe=new RegExp(`^rgb\\(${wl},${wl},${wl}\\)$`),zWe=new RegExp(`^rgba\\(${Kp},${Kp},${Kp},${hy}\\)$`),UWe=new RegExp(`^rgba\\(${wl},${wl},${wl},${hy}\\)$`),GWe=new RegExp(`^hsl\\(${hy},${wl},${wl}\\)$`),YWe=new RegExp(`^hsla\\(${hy},${wl},${wl},${hy}\\)$`),aK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};J1(Gp,IL,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:lK,formatHex:lK,formatHex8:KWe,formatHsl:qWe,formatRgb:cK,toString:cK});function lK(){return this.rgb().formatHex()}function KWe(){return this.rgb().formatHex8()}function qWe(){return pK(this).formatHsl()}function cK(){return this.rgb().formatRgb()}function IL(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=VWe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?uK(e):t===3?new fr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?eE(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?eE(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=WWe.exec(n))?new fr(e[1],e[2],e[3],1):(e=jWe.exec(n))?new fr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zWe.exec(n))?eE(e[1],e[2],e[3],e[4]):(e=UWe.exec(n))?eE(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=GWe.exec(n))?gK(e[1],e[2]/100,e[3]/100,1):(e=YWe.exec(n))?gK(e[1],e[2]/100,e[3]/100,e[4]):aK.hasOwnProperty(n)?uK(aK[n]):n==="transparent"?new fr(NaN,NaN,NaN,0):null}function uK(n){return new fr(n>>16&255,n>>8&255,n&255,1)}function eE(n,e,t,i){return i<=0&&(n=e=t=NaN),new fr(n,e,t,i)}function hK(n){return n instanceof Gp||(n=IL(n)),n?(n=n.rgb(),new fr(n.r,n.g,n.b,n.opacity)):new fr}function dy(n,e,t,i){return arguments.length===1?hK(n):new fr(n,e,t,i??1)}function fr(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}J1(fr,dy,PL(Gp,{brighter(n){return n=n==null?Yp:Math.pow(Yp,n),new fr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Cf:Math.pow(Cf,n),new fr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new fr(Sf(this.r),Sf(this.g),Sf(this.b),tE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dK,formatHex:dK,formatHex8:XWe,formatRgb:fK,toString:fK}));function dK(){return`#${_f(this.r)}${_f(this.g)}${_f(this.b)}`}function XWe(){return`#${_f(this.r)}${_f(this.g)}${_f(this.b)}${_f((isNaN(this.opacity)?1:this.opacity)*255)}`}function fK(){const n=tE(this.opacity);return`${n===1?"rgb(":"rgba("}${Sf(this.r)}, ${Sf(this.g)}, ${Sf(this.b)}${n===1?")":`, ${n})`}`}function tE(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Sf(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function _f(n){return n=Sf(n),(n<16?"0":"")+n.toString(16)}function gK(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new sa(n,e,t,i)}function pK(n){if(n instanceof sa)return new sa(n.h,n.s,n.l,n.opacity);if(n instanceof Gp||(n=IL(n)),!n)return new sa;if(n instanceof sa)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-i)/a+(t<i)*6:t===s?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new sa(o,a,l,n.opacity)}function ZWe(n,e,t,i){return arguments.length===1?pK(n):new sa(n,e,t,i??1)}function sa(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}J1(sa,ZWe,PL(Gp,{brighter(n){return n=n==null?Yp:Math.pow(Yp,n),new sa(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Cf:Math.pow(Cf,n),new sa(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new fr(OL(n>=240?n-240:n+120,r,i),OL(n,r,i),OL(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new sa(mK(this.h),nE(this.s),nE(this.l),tE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=tE(this.opacity);return`${n===1?"hsl(":"hsla("}${mK(this.h)}, ${nE(this.s)*100}%, ${nE(this.l)*100}%${n===1?")":`, ${n})`}`}}));function mK(n){return n=(n||0)%360,n<0?n+360:n}function nE(n){return Math.max(0,Math.min(1,n||0))}function OL(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const QWe=Math.PI/180,JWe=180/Math.PI;var bK=-.14861,kL=1.78277,DL=-.29227,iE=-.90649,fy=1.97294,vK=fy*iE,wK=fy*kL,yK=kL*DL-iE*bK;function e3e(n){if(n instanceof Rf)return new Rf(n.h,n.s,n.l,n.opacity);n instanceof fr||(n=hK(n));var e=n.r/255,t=n.g/255,i=n.b/255,r=(yK*i+vK*e-wK*t)/(yK+vK-wK),s=i-r,o=(fy*(t-r)-DL*s)/iE,a=Math.sqrt(o*o+s*s)/(fy*r*(1-r)),l=a?Math.atan2(o,s)*JWe-120:NaN;return new Rf(l<0?l+360:l,a,r,n.opacity)}function yl(n,e,t,i){return arguments.length===1?e3e(n):new Rf(n,e,t,i??1)}function Rf(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}J1(Rf,yl,PL(Gp,{brighter(n){return n=n==null?Yp:Math.pow(Yp,n),new Rf(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Cf:Math.pow(Cf,n),new Rf(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*QWe,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(n),r=Math.sin(n);return new fr(255*(e+t*(bK*i+kL*r)),255*(e+t*(DL*i+iE*r)),255*(e+t*(fy*i)),this.opacity)}}));function t3e(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}function n3e(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1],o=i>0?n[i-1]:2*r-s,a=i<e-1?n[i+2]:2*s-r;return t3e((t-i/e)*e,o,r,s,a)}}const NL=n=>()=>n;function CK(n,e){return function(t){return n+t*e}}function i3e(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function r3e(n,e){var t=e-n;return t?CK(n,t>180||t<-180?t-360*Math.round(t/360):t):NL(isNaN(n)?e:n)}function s3e(n){return(n=+n)==1?qp:function(e,t){return t-e?i3e(e,t,n):NL(isNaN(e)?t:e)}}function qp(n,e){var t=e-n;return t?CK(n,t):NL(isNaN(n)?e:n)}(function n(e){var t=s3e(e);function i(r,s){var o=t((r=dy(r)).r,(s=dy(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),c=qp(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=n,i})(1);function o3e(n){return function(e){var t=e.length,i=new Array(t),r=new Array(t),s=new Array(t),o,a;for(o=0;o<t;++o)a=dy(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=n(i),r=n(r),s=n(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var a3e=o3e(n3e);function SK(n){return function e(t){t=+t;function i(r,s){var o=n((r=yl(r)).h,(s=yl(s)).h),a=qp(r.s,s.s),l=qp(r.l,s.l),c=qp(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,t)),r.opacity=c(u),r+""}}return i.gamma=e,i}(1)}SK(r3e);var LL=SK(qp);const pn=n=>a3e(n[n.length-1]);var l3e=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(jt);const c3e=pn(l3e);var u3e=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(jt);const h3e=pn(u3e);var d3e=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(jt);const f3e=pn(d3e);var g3e=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(jt);const p3e=pn(g3e);var m3e=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(jt);const b3e=pn(m3e);var v3e=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(jt);const w3e=pn(v3e);var y3e=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(jt);const C3e=pn(y3e);var S3e=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(jt);const _3e=pn(S3e);var R3e=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(jt);const E3e=pn(R3e);var x3e=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(jt);const T3e=pn(x3e);var M3e=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(jt);const A3e=pn(M3e);var P3e=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(jt);const I3e=pn(P3e);var O3e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(jt);const k3e=pn(O3e);var D3e=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(jt);const N3e=pn(D3e);var L3e=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(jt);const H3e=pn(L3e);var $3e=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(jt);const F3e=pn($3e);var B3e=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(jt);const V3e=pn(B3e);var W3e=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(jt);const j3e=pn(W3e);var z3e=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(jt);const U3e=pn(z3e);var G3e=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(jt);const Y3e=pn(G3e);var K3e=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(jt);const q3e=pn(K3e);var X3e=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(jt);const Z3e=pn(X3e);var Q3e=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(jt);const J3e=pn(Q3e);var eje=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(jt);const tje=pn(eje);var nje=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(jt);const ije=pn(nje);var rje=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(jt);const sje=pn(rje);var oje=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(jt);const aje=pn(oje);function lje(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-n*(35.34-n*(2381.73-n*(6402.7-n*(7024.72-n*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+n*(170.73+n*(52.82-n*(131.46-n*(176.58-n*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+n*(442.36-n*(2482.43-n*(6167.24-n*(6614.94-n*2475.67)))))))+")"}const cje=LL(yl(300,.5,0),yl(-240,.5,1));var uje=LL(yl(-100,.75,.35),yl(80,1.5,.8)),hje=LL(yl(260,.75,.35),yl(80,1.5,.8)),rE=yl();function dje(n){(n<0||n>1)&&(n-=Math.floor(n));var e=Math.abs(n-.5);return rE.h=360*n-100,rE.s=1.5-1.5*e,rE.l=.8-.9*e,rE+""}var sE=dy(),fje=Math.PI/3,gje=Math.PI*2/3;function pje(n){var e;return n=(.5-n)*Math.PI,sE.r=255*(e=Math.sin(n))*e,sE.g=255*(e=Math.sin(n+fje))*e,sE.b=255*(e=Math.sin(n+gje))*e,sE+""}function mje(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+n*(1172.33-n*(10793.56-n*(33300.12-n*(38394.49-n*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+n*(557.33+n*(1225.33-n*(3574.96-n*(1073.77+n*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+n*(3211.1-n*(15327.97-n*(27814-n*(22569.18-n*6838.66)))))))+")"}function oE(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}const bje=oE(jt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var vje=oE(jt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),wje=oE(jt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),yje=oE(jt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Cje(n){return n}function Sje(n){if(n==null)return Cje;var e,t,i=n.scale[0],r=n.scale[1],s=n.translate[0],o=n.translate[1];return function(a,l){l||(e=t=0);var c=2,u=a.length,h=new Array(u);for(h[0]=(e+=a[0])*i+s,h[1]=(t+=a[1])*r+o;c<u;)h[c]=a[c],++c;return h}}function _je(n,e){for(var t,i=n.length,r=i-e;r<--i;)t=n[r],n[r++]=n[i],n[i]=t}function Rje(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return _K(n,t)})}:_K(n,e)}function _K(n,e){var t=e.id,i=e.bbox,r=e.properties==null?{}:e.properties,s=Eje(n,e);return t==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:t,properties:r,geometry:s}:{type:"Feature",id:t,bbox:i,properties:r,geometry:s}}function Eje(n,e){var t=Sje(n.transform),i=n.arcs;function r(u,h){h.length&&h.pop();for(var d=i[u<0?~u:u],f=0,g=d.length;f<g;++f)h.push(t(d[f],f));u<0&&_je(h,g)}function s(u){return t(u)}function o(u){for(var h=[],d=0,f=u.length;d<f;++d)r(u[d],h);return h.length<2&&h.push(h[0]),h}function a(u){for(var h=o(u);h.length<4;)h.push(h[0]);return h}function l(u){return u.map(a)}function c(u){var h=u.type,d;switch(h){case"GeometryCollection":return{type:h,geometries:u.geometries.map(c)};case"Point":d=s(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(s);break;case"LineString":d=o(u.arcs);break;case"MultiLineString":d=u.arcs.map(o);break;case"Polygon":d=l(u.arcs);break;case"MultiPolygon":d=u.arcs.map(l);break;default:return null}return{type:h,coordinates:d}}return c(e)}const gy={geoAzimuthalEqualArea:TWe,geoAzimuthalEquidistant:MWe,geoGnomonic:HWe,geoOrthographic:AL,geoStereographic:FWe,geoEqualEarth:LWe,geoAlbers:XY,geoAlbersUsa:xWe,geoConicConformal:IWe,geoConicEqualArea:K1,geoConicEquidistant:DWe,geoEquirectangular:OWe,geoMercator:AWe,geoTransverseMercator:BWe,geoNaturalEarth1:$We};Object.keys(gy).forEach(n=>{gy[`${n.charAt(3).toLowerCase()}${n.slice(4)}`]=gy[n]});class Ef extends uu{constructor(e){super(e),this.outlineBounds=null,this.oldChartBounds=null,this.geoPath=WY()}init(e){e.position="chartArea",super.init(e),typeof e.projection=="function"?this.projection=e.projection:this.projection=(gy[e.projection]||gy.albersUsa)(),this.geoPath.projection(this.projection),this.outlineBounds=null,this.oldChartBounds=null}computeBounds(e){const t=WY(this.projection.fitWidth(1e3,e)).bounds(e),i=Math.ceil(t[1][1]-t[0][1]),r=Math.ceil(t[1][0]-t[0][0]),s=this.projection.translate();this.outlineBounds={width:r,height:i,aspectRatio:r/i,refScale:this.projection.scale(),refX:s[0],refY:s[1]}}updateBounds(){const e=this.chart.chartArea,t=this.outlineBounds;if(!t)return!1;const i=this.options.padding,r=typeof i=="number"?i:i.top,s=typeof i=="number"?i:i.left,o=typeof i=="number"?i:i.bottom,a=typeof i=="number"?i:i.right,l=e.right-e.left-s-a,c=e.bottom-e.top-r-o,u=this.oldChartBounds;this.oldChartBounds={chartWidth:l,chartHeight:c};const h=Math.min(l/t.width,c/t.height),d=t.width*h,f=t.height*h,g=(l-d)*.5+e.left+s,p=(c-f)*.5+e.top+r,m=this.options;return this.projection.scale(t.refScale*h*m.projectionScale).translate([h*t.refX+g+m.projectionOffset[0],h*t.refY+p+m.projectionOffset[1]]),!u||u.chartWidth!==this.oldChartBounds.chartWidth||u.chartHeight!==this.oldChartBounds.chartHeight}}Ef.id="projection",Ef.defaults={projection:"albersUsa",projectionScale:1,projectionOffset:[0,0],padding:0},Ef.descriptors={_scriptable:n=>n!=="projection",_indexable:n=>n!=="projectionOffset"};const aE={position:"chartArea",property:"value",grid:{z:1,drawOnChartArea:!1},ticks:{z:1},legend:{align:"right",position:"bottom-right",length:100,width:50,margin:8,indicatorWidth:10}};function xje(n){const{indicatorWidth:e,align:t,margin:i}=n,r=(typeof i=="number"?i:i.left)+(t==="right"?e:0),s=(typeof i=="number"?i:i.top)+(t==="bottom"?e:0),o=(typeof i=="number"?i:i.right)+(t==="left"?e:0),a=(typeof i=="number"?i:i.bottom)+(t==="top"?e:0);return{left:r,top:s,right:o,bottom:a}}function Tje(n,e,t,i,r){const{indicatorWidth:s,align:o,position:a}=e,l=o==="top"||o==="bottom",c=(o==="left"?r.w:t)+(l?s:0),u=(o==="top"?r.h:i)+(l?0:s),h=xje(e);if(typeof a=="string")switch(a){case"top-left":return[h.left,h.top];case"top":return[(n.right-c)/2,h.top];case"left":return[h.left,(n.bottom-u)/2];case"top-right":return[n.right-c-h.right,h.top];case"bottom-right":return[n.right-c-h.right,n.bottom-u-h.bottom];case"bottom":return[(n.right-c)/2,n.bottom-u-h.bottom];case"bottom-left":return[h.left,n.bottom-u-h.bottom];default:return[n.right-c-h.right,(n.bottom-u)/2]}return[a.x,a.y]}class Xp extends pg{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(e){e.position="chartArea",super.init(e),this.axis="r"}parse(e,t){return e&&typeof e[this.options.property]=="number"?e[this.options.property]:super.parse(e,t)}isHorizontal(){return this.options.legend.align==="top"||this.options.legend.align==="bottom"}_getNormalizedValue(e){return e==null||Number.isNaN(e)?null:(e-this._startValue)/this._valueRange}update(e,t,i){const r=Math.min(t,this.bottom==null?Number.POSITIVE_INFINITY:this.bottom),s=Math.min(e,this.right==null?Number.POSITIVE_INFINITY:this.right),o=this.options.legend,a=this.isHorizontal(),l=(f,g)=>f<1?g*f:f,c=Math.min(s,l(a?o.length:o.width,s))-(a?0:o.indicatorWidth),u=Math.min(r,l(a?o.width:o.length,r))-(a?o.indicatorWidth:0);this.legendSize={w:c,h:u},this.bottom=u,this.height=u,this.right=c,this.width=c;const h=this.options.position;this.options.position=this.options.legend.align;const d=super.update(c,u,i);return this.options.position=h,this.height=Math.min(u,this.height),this.width=Math.min(c,this.width),d}_computeLabelArea(){}draw(e){if(!this._isVisible())return;const t=Tje(e,this.options.legend,this.width,this.height,this.legendSize),{ctx:i}=this;i.save(),i.translate(t[0],t[1]);const r=this.options.position;this.options.position=this.options.legend.align,super.draw({...e,bottom:this.height+10,right:this.width}),this.options.position=r;const{indicatorWidth:s}=this.options.legend;switch(this.options.legend.align){case"left":i.translate(this.legendSize.w,0);break;case"top":i.translate(0,this.legendSize.h);break;case"bottom":i.translate(0,-s);break;default:i.translate(-s,0);break}this._drawIndicator(),i.restore()}_drawIndicator(){}}class RK extends mg{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(e){Xp.prototype.init.call(this,e)}parse(e,t){return Xp.prototype.parse.call(this,e,t)}isHorizontal(){return this.options.legend.align==="top"||this.options.legend.align==="bottom"}_getNormalizedValue(e){return e==null||Number.isNaN(e)?null:(Math.log10(e)-this._startValue)/this._valueRange}update(e,t,i){return Xp.prototype.update.call(this,e,t,i)}_computeLabelArea(){}draw(e){return Xp.prototype.draw.call(this,e)}_drawIndicator(){}}const Lc={interpolateBlues:Z3e,interpolateBrBG:c3e,interpolateBuGn:T3e,interpolateBuPu:A3e,interpolateCividis:lje,interpolateCool:hje,interpolateCubehelixDefault:cje,interpolateGnBu:I3e,interpolateGreens:J3e,interpolateGreys:tje,interpolateInferno:wje,interpolateMagma:vje,interpolateOrRd:k3e,interpolateOranges:aje,interpolatePRGn:h3e,interpolatePiYG:f3e,interpolatePlasma:yje,interpolatePuBu:H3e,interpolatePuBuGn:N3e,interpolatePuOr:p3e,interpolatePuRd:F3e,interpolatePurples:ije,interpolateRainbow:dje,interpolateRdBu:b3e,interpolateRdGy:w3e,interpolateRdPu:V3e,interpolateRdYlBu:C3e,interpolateRdYlGn:_3e,interpolateReds:sje,interpolateSinebow:pje,interpolateSpectral:E3e,interpolateTurbo:mje,interpolateViridis:bje,interpolateWarm:uje,interpolateYlGn:U3e,interpolateYlGnBu:j3e,interpolateYlOrBr:Y3e,interpolateYlOrRd:q3e};Object.keys(Lc).forEach(n=>{Lc[`${n.charAt(11).toLowerCase()}${n.slice(12)}`]=Lc[n],Lc[n.slice(11)]=Lc[n]});function EK(n,e){const t=1/e;if(n<=t)return 0;if(n>=1-t)return 1;for(let i=0;i<1;i+=t)if(n<i)return i-t/2;return n}const xK={interpolate:"blues",missing:"transparent",quantize:0};class ah extends Xp{get interpolate(){const e=this.options;return e?typeof e.interpolate=="function"?e.interpolate:Lc[e.interpolate]||Lc.blues:t=>`rgb(${t},${t},${t})`}getColorForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getColor(t)}getColor(e){let t=e;return this.options.quantize>0&&(t=EK(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){const{indicatorWidth:e}=this.options.legend,t=this._reversePixels;if(this.isHorizontal()){const i=this.width;if(this.options.quantize>0){const r=i/this.options.quantize,s=t?o=>i-r-o:o=>o;for(let o=0;o<i;o+=r){const a=(o+r/2)/i;this.ctx.fillStyle=this.getColor(a),this.ctx.fillRect(s(o),0,r,e)}}else{const r=t?s=>i-1-s:s=>s;for(let s=0;s<i;s+=1)this.ctx.fillStyle=this.getColor((s+.5)/i),this.ctx.fillRect(r(s),0,1,e)}}else{const i=this.height;if(this.options.quantize>0){const r=i/this.options.quantize,s=t?o=>i-r-o:o=>o;for(let o=0;o<i;o+=r){const a=(o+r/2)/i;this.ctx.fillStyle=this.getColor(a),this.ctx.fillRect(0,s(o),e,r)}}else{const r=t?s=>i-1-s:s=>s;for(let s=0;s<i;s+=1)this.ctx.fillStyle=this.getColor((s+.5)/i),this.ctx.fillRect(0,r(s),e,1)}}}}ah.id="color",ah.defaults=cs({},[pg.defaults,aE,xK]),ah.descriptors={_scriptable:n=>n!=="interpolate",_indexable:!1};class HL extends RK{constructor(){super(...arguments),this.interpolate=e=>`rgb(${e},${e},${e})`}init(e){super.init(e),typeof e.interpolate=="function"?this.interpolate=e.interpolate:this.interpolate=Lc[e.interpolate]||Lc.blues}getColorForValue(e){return ah.prototype.getColorForValue.call(this,e)}getColor(e){let t=e;return this.options.quantize>0&&(t=EK(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){return ah.prototype._drawIndicator.call(this)}}HL.id="colorLogarithmic",HL.defaults=cs({},[mg.defaults,aE,xK]),HL.descriptors={_scriptable:n=>n!=="interpolate",_indexable:!1};const TK={missing:1,mode:"area",range:[2,20],legend:{align:"bottom",length:90,width:70,indicatorWidth:42}};class xf extends Xp{constructor(){super(...arguments),this._model=null}getSizeForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(e){const[t,i]=this.options.range;if(this.options.mode==="area"){const s=i*i*Math.PI,o=t*t*Math.PI,a=s-o,l=e*a+o;return Math.sqrt(l/Math.PI)}const r=i-t;return e*r+t}_drawIndicator(){const{ctx:e}=this,t=this.options.legend.indicatorWidth/2,i=this.isHorizontal(),r=this.ticks,s=this.getLabelItems(),o=s?s.map(a=>({[i?"x":"y"]:a.options.translation[i?0:1]})):r.map((a,l)=>({[i?"x":"y"]:this.getPixelForTick(l)}));if((this._gridLineItems||[]).forEach(a=>{if(e.save(),e.strokeStyle=a.color,e.lineWidth=a.width,e.setLineDash&&(e.setLineDash(a.borderDash),e.lineDashOffset=a.borderDashOffset),e.beginPath(),this.options.grid.drawTicks)switch(this.options.legend.align){case"left":e.moveTo(0,a.ty1),e.lineTo(t,a.ty2);break;case"top":e.moveTo(a.tx1,0),e.lineTo(a.tx2,t);break;case"bottom":e.moveTo(a.tx1,t),e.lineTo(a.tx2,t*2);break;default:e.moveTo(t,a.ty1),e.lineTo(t*2,a.ty2);break}e.stroke(),e.restore()}),this._model){const a=this._model;e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth||0,e.fillStyle=a.backgroundColor}else e.fillStyle="blue";r.forEach((a,l)=>{const c=o[l],u=this.getSizeForValue(a.value),h=i?c.x:t,d=i?t:c.y,f={pointStyle:"circle",borderWidth:0,...this._model||{},radius:u};L0(e,f,h,d)})}}xf.id="size",xf.defaults=cs({},[pg.defaults,aE,TK]),xf.descriptors={_scriptable:!0,_indexable:n=>n!=="range"};class MK extends RK{constructor(){super(...arguments),this._model=null}getSizeForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(e){return xf.prototype.getSizeImpl.call(this,e)}_drawIndicator(){xf.prototype._drawIndicator.call(this)}}MK.id="sizeLogarithmic",MK.defaults=cs({},[mg.defaults,aE,TK]);function Mje(n,e){return[[n[0][0]-e,n[0][1]-e],[n[1][0]+e,n[1][1]+e]]}class Hc extends Hs{constructor(){super(...arguments),this.cache=void 0}inRange(e,t){const i=this.getBounds(),r=(Number.isNaN(e)||e>=i.x&&e<=i.x2)&&(Number.isNaN(t)||t>=i.y&&t<=i.y2),s=this.projectionScale.geoPath.projection();if(r&&!Number.isNaN(e)&&!Number.isNaN(t)&&typeof s.invert=="function"){const o=s.invert([e,t]);return o!=null&&rWe(this.feature,o)}return r}inXRange(e){return this.inRange(e,Number.NaN)}inYRange(e){return this.inRange(Number.NaN,e)}getCenterPoint(){if(this.cache&&this.cache.center)return this.cache.center;let e;if(this.center){const t=this.projectionScale.projection([this.center.longitude,this.center.latitude]);e={x:t[0],y:t[1]}}else{const t=this.projectionScale.geoPath.centroid(this.feature);e={x:t[0],y:t[1]}}return this.cache={...this.cache||{},center:e},e}getBounds(){if(this.cache&&this.cache.bounds)return this.cache.bounds;const e=Mje(this.projectionScale.geoPath.bounds(this.feature),this.options.borderWidth/2),t={x:e[0][0],x2:e[1][0],y:e[0][1],y2:e[1][1],width:e[1][0]-e[0][0],height:e[1][1]-e[0][1]};return this.cache={...this.cache||{},bounds:t},t}_drawInCache(e){const t=this.getBounds();if(!Number.isFinite(t.x))return;const i=this.cache&&this.cache.canvas?this.cache.canvas:e.createElement("canvas"),r=Math.floor(t.x),s=Math.floor(t.y),o=Math.ceil(t.x+t.width),a=Math.ceil(t.y+t.height),l=this.pixelRatio||1,c=Math.ceil(Math.max(o-r,1)*l),u=Math.ceil(Math.max(a-s,1)*l);if(c<=0||u<=0)return;i.width=c,i.height=u;const h=i.getContext("2d");h&&(h.clearRect(0,0,i.width,i.height),h.save(),h.scale(l,l),h.translate(-r,-s),this._drawImpl(h),h.restore(),this.cache={...this.cache||{},canvas:i,canvasKey:this._optionsToKey()})}_optionsToKey(){const{options:e}=this;return`${e.backgroundColor};${e.borderColor};${e.borderWidth};${this.pixelRatio}`}_drawImpl(e){const{feature:t}=this,{options:i}=this;e.beginPath(),this.projectionScale.geoPath.context(e)(t),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fill()),i.borderColor&&(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.stroke())}draw(e){const{feature:t}=this;if(!t)return;(!this.cache||this.cache.canvasKey!==this._optionsToKey())&&e.canvas.ownerDocument!=null&&this._drawInCache(e.canvas.ownerDocument);const i=this.getBounds();if(this.cache&&this.cache.canvas&&this.cache.canvas.width>0&&this.cache.canvas.height>0){const r=Math.floor(i.x),s=Math.floor(i.y),o=Math.ceil(i.x+i.width),a=Math.ceil(i.y+i.height),l=o-r,c=a-s;l>0&&c>0&&e.drawImage(this.cache.canvas,r,s,o-r,a-s)}else Number.isFinite(i.x)&&(e.save(),this._drawImpl(e),e.restore())}}Hc.id="geoFeature",Hc.defaults={...gg.defaults,outlineBackgroundColor:null,outlineBorderWidth:0,graticuleBorderColor:"#CCCCCC",graticuleBorderWidth:0},Hc.defaultRoutes={outlineBorderColor:"borderColor",...gg.defaultRoutes||{}};const AK={showOutline:!1,showGraticule:!1,clipMap:!0},PK={scales:{projection:{axis:"x",type:Ef.id,position:"chartArea",display:!1}}};function IK(n){const e={...n};return Object.keys(n).forEach(t=>{let i=t;if(t.startsWith("outline")){const r=t.slice(7);i=r[0].toLowerCase()+r.slice(1)}else if(t.startsWith("hoverOutline"))i=`hover${t.slice(12)}`;else return;delete e[t],e[i]=n[t]}),e}class OK extends Ls{getGeoDataset(){return super.getDataset()}getGeoOptions(){return this.chart.options}getProjectionScale(){return this.getScaleForId("projection")}linkScales(){const e=this.getGeoDataset(),t=this.getMeta();t.xAxisID="projection",e.xAxisID="projection",t.yAxisID="projection",e.yAxisID="projection",t.xScale=this.getScaleForId("projection"),t.yScale=this.getScaleForId("projection"),this.getProjectionScale().computeBounds(this.resolveOutline())}showOutline(){return et(this.getGeoDataset().showOutline,this.getGeoOptions().showOutline)}clipMap(){return et(this.getGeoDataset().clipMap,this.getGeoOptions().clipMap)}getGraticule(){return et(this.getGeoDataset().showGraticule,this.getGeoOptions().showGraticule)}update(e){super.update(e);const t=this.getMeta(),i=this.getProjectionScale(),r=i.updateBounds();if(this.showOutline()){const s=t.dataset;if(r&&delete s.cache,s.projectionScale=i,s.pixelRatio=this.chart.currentDevicePixelRatio,e!=="resize"){const o=IK(this.resolveDatasetElementOptions(e)),a={feature:this.resolveOutline(),options:o};this.updateElement(s,void 0,a,e),this.getGraticule()&&(t.graticule=o)}}else this.getGraticule()&&e!=="resize"&&(t.graticule=IK(this.resolveDatasetElementOptions(e)));this.updateElements(t.data,0,t.data.length,e),r&&t.data.forEach(s=>delete s.cache)}resolveOutline(){const t=this.getGeoDataset().outline||{type:"Sphere"};return Array.isArray(t)?{type:"FeatureCollection",features:t}:t}showGraticule(){const e=this.getGraticule(),t=this.getMeta().graticule;if(!e||!t)return;const{ctx:i}=this.chart,s=this.getProjectionScale().geoPath.context(i);if(i.save(),i.beginPath(),typeof e=="boolean")e&&s(sWe());else{const o=RY();e.stepMajor&&o.stepMajor(e.stepMajor),e.stepMinor&&o.stepMinor(e.stepMinor),s(o())}i.strokeStyle=t.graticuleBorderColor,i.lineWidth=t.graticuleBorderWidth,i.stroke(),i.restore()}draw(){const{chart:e}=this,t=this.clipMap();let i=!1;(t===!0||t==="outline"||t==="outline+graticule")&&(i=!0,jh(e.ctx,e.chartArea)),this.showOutline()&&this.getMeta().dataset&&this.getMeta().dataset.draw.call(this.getMeta().dataset,e.ctx,e.chartArea),t===!0||t==="graticule"||t==="outline+graticule"?i||jh(e.ctx,e.chartArea):i&&(i=!1,zh(e.ctx)),this.showGraticule(),t===!0||t==="items"?i||jh(e.ctx,e.chartArea):i&&(i=!1,zh(e.ctx)),this.getMeta().data.forEach(r=>r.draw.call(r,e.ctx,e.chartArea)),i&&(i=!1,zh(e.ctx))}}function kK(n,e,t,i=[],r=[]){Sr.addControllers(t),Array.isArray(i)?Sr.addElements(...i):Sr.addElements(i),Array.isArray(r)?Sr.addScales(...r):Sr.addScales(r);const s=e;return s.type=n,s}class Zp extends OK{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const e=this.getGeoDataset(),t=this.getMeta();t.vAxisID="color",t.rAxisID="color",e.vAxisID="color",e.rAxisID="color",t.rScale=this.getScaleForId("color"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,e.iAxisID=t.xAxisID}_getOtherScale(e){return e}parse(e,t){const i=this.getMeta().rScale,{data:r}=this.getDataset(),s=this._cachedMeta;for(let o=e;o<e+t;o+=1)s._parsed[o]={[i.axis]:i.parse(r[o],o)}}updateElements(e,t,i,r){const s=this.resolveDataElementOptions(t,r),o=this.getSharedOptions(s),a=this.includeOptions(r,o),l=this.getProjectionScale();this.updateSharedOptions(o,r,s);for(let c=t;c<t+i;c+=1){const u=e[c];u.projectionScale=l,u.feature=this._data[c].feature,u.center=this._data[c].center,u.pixelRatio=this.chart.currentDevicePixelRatio;const h=u.getCenterPoint(),d={x:h.x,y:h.y};a&&(d.options=o||this.resolveDataElementOptions(c,r)),this.updateElement(u,c,d,r)}}indexToColor(e){const t=this.getMeta().rScale;return t.getColorForValue(this.getParsed(e)[t.axis])}}Zp.id="choropleth",Zp.defaults=cs({},[AK,{datasetElementType:Hc.id,dataElementType:Hc.id}]),Zp.overrides=cs({},[PK,{plugins:{tooltip:{callbacks:{title(){return""},label(n){var e,t,i,r;return n.formattedValue==null?(t=(e=n.chart.data)===null||e===void 0?void 0:e.labels)===null||t===void 0?void 0:t[n.dataIndex]:`${(r=(i=n.chart.data)===null||i===void 0?void 0:i.labels)===null||r===void 0?void 0:r[n.dataIndex]}: ${n.formattedValue}`}}},colors:{enabled:!1}},scales:{color:{type:ah.id,axis:"x"}},elements:{geoFeature:{backgroundColor(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToColor(n.dataIndex)}}}}]);class Aje extends hs{constructor(e,t){super(e,kK("choropleth",t,Zp,Hc,[ah,Ef]))}}Aje.id=Zp.id;class py extends OK{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const e=this.getGeoDataset(),t=this.getMeta();t.vAxisID="size",t.rAxisID="size",e.vAxisID="size",e.rAxisID="size",t.rScale=this.getScaleForId("size"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,e.iAxisID=t.xAxisID}_getOtherScale(e){return e}parse(e,t){const i=this.getMeta().rScale,r=this.getDataset().data,s=this._cachedMeta;for(let o=e;o<e+t;o+=1){const a=r[o];s._parsed[o]={x:a.longitude==null?a.x:a.longitude,y:a.latitude==null?a.y:a.latitude,[i.axis]:i.parse(a,o)}}}updateElements(e,t,i,r){const s=r==="reset",o=this.resolveDataElementOptions(t,r),a=this.getSharedOptions(o),l=this.includeOptions(r,a),c=this.getProjectionScale();this.getMeta().rScale._model=o,this.updateSharedOptions(a,r,o);for(let u=t;u<t+i;u+=1){const h=e[u],d=this.getParsed(u),f=c.projection([d.x,d.y]),g={x:f?f[0]:0,y:f?f[1]:0,skip:Number.isNaN(d.x)||Number.isNaN(d.y)};l&&(g.options=a||this.resolveDataElementOptions(u,r),s&&(g.options.radius=0)),this.updateElement(h,u,g,r)}}indexToRadius(e){const t=this.getMeta().rScale;return t.getSizeForValue(this.getParsed(e)[t.axis])}}py.id="bubbleMap",py.defaults=cs({},[AK,{dataElementType:gb.id,datasetElementType:Hc.id,showOutline:!0,clipMap:"outline+graticule"}]),py.overrides=cs({},[PK,{plugins:{tooltip:{callbacks:{title(){return""},label(n){var e,t,i,r;return n.formattedValue==null?(t=(e=n.chart.data)===null||e===void 0?void 0:e.labels)===null||t===void 0?void 0:t[n.dataIndex]:`${(r=(i=n.chart.data)===null||i===void 0?void 0:i.labels)===null||r===void 0?void 0:r[n.dataIndex]}: ${n.formattedValue}`}}}},scales:{size:{axis:"x",type:xf.id}},elements:{point:{radius(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)},hoverRadius(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)+1}}}}]);class Pje extends hs{constructor(e,t){super(e,kK("bubbleMap",t,py,Hc,[xf,Ef]))}}Pje.id=py.id;var $L={},FL={};Object.defineProperty(FL,"__esModule",{value:!0});const Ije=[{country:"Afghanistan",alpha2:"AF",alpha3:"AFG",numeric:"004"},{country:"Åland Islands",alpha2:"AX",alpha3:"ALA",numeric:"248"},{country:"Albania",alpha2:"AL",alpha3:"ALB",numeric:"008"},{country:"Algeria",alpha2:"DZ",alpha3:"DZA",numeric:"012"},{country:"American Samoa",alpha2:"AS",alpha3:"ASM",numeric:"016"},{country:"Andorra",alpha2:"AD",alpha3:"AND",numeric:"020"},{country:"Angola",alpha2:"AO",alpha3:"AGO",numeric:"024"},{country:"Anguilla",alpha2:"AI",alpha3:"AIA",numeric:"660"},{country:"Antarctica",alpha2:"AQ",alpha3:"ATA",numeric:"010"},{country:"Antigua and Barbuda",alpha2:"AG",alpha3:"ATG",numeric:"028"},{country:"Argentina",alpha2:"AR",alpha3:"ARG",numeric:"032"},{country:"Armenia",alpha2:"AM",alpha3:"ARM",numeric:"051"},{country:"Aruba",alpha2:"AW",alpha3:"ABW",numeric:"533"},{country:"Australia",alpha2:"AU",alpha3:"AUS",numeric:"036"},{country:"Austria",alpha2:"AT",alpha3:"AUT",numeric:"040"},{country:"Azerbaijan",alpha2:"AZ",alpha3:"AZE",numeric:"031"},{country:"Bahamas",alpha2:"BS",alpha3:"BHS",numeric:"044"},{country:"Bahrain",alpha2:"BH",alpha3:"BHR",numeric:"048"},{country:"Bangladesh",alpha2:"BD",alpha3:"BGD",numeric:"050"},{country:"Barbados",alpha2:"BB",alpha3:"BRB",numeric:"052"},{country:"Belarus",alpha2:"BY",alpha3:"BLR",numeric:"112"},{country:"Belgium",alpha2:"BE",alpha3:"BEL",numeric:"056"},{country:"Belize",alpha2:"BZ",alpha3:"BLZ",numeric:"084"},{country:"Benin",alpha2:"BJ",alpha3:"BEN",numeric:"204"},{country:"Bermuda",alpha2:"BM",alpha3:"BMU",numeric:"060"},{country:"Bhutan",alpha2:"BT",alpha3:"BTN",numeric:"064"},{country:"Bolivia",alpha2:"BO",alpha3:"BOL",numeric:"068"},{country:"Bonaire, Sint Eustatius and Saba",alpha2:"BQ",alpha3:"BES",numeric:"535"},{country:"Bosnia and Herzegovina",alpha2:"BA",alpha3:"BIH",numeric:"070"},{country:"Botswana",alpha2:"BW",alpha3:"BWA",numeric:"072"},{country:"Bouvet Island",alpha2:"BV",alpha3:"BVT",numeric:"074"},{country:"Brazil",alpha2:"BR",alpha3:"BRA",numeric:"076"},{country:"British Indian Ocean Territory",alpha2:"IO",alpha3:"IOT",numeric:"086"},{country:"Brunei Darussalam",alpha2:"BN",alpha3:"BRN",numeric:"096"},{country:"Bulgaria",alpha2:"BG",alpha3:"BGR",numeric:"100"},{country:"Burkina Faso",alpha2:"BF",alpha3:"BFA",numeric:"854"},{country:"Burundi",alpha2:"BI",alpha3:"BDI",numeric:"108"},{country:"Cabo Verde",alpha2:"CV",alpha3:"CPV",numeric:"132"},{country:"Cambodia",alpha2:"KH",alpha3:"KHM",numeric:"116"},{country:"Cameroon",alpha2:"CM",alpha3:"CMR",numeric:"120"},{country:"Canada",alpha2:"CA",alpha3:"CAN",numeric:"124"},{country:"Cayman Islands",alpha2:"KY",alpha3:"CYM",numeric:"136"},{country:"Central African Republic",alpha2:"CF",alpha3:"CAF",numeric:"140"},{country:"Chad",alpha2:"TD",alpha3:"TCD",numeric:"148"},{country:"Chile",alpha2:"CL",alpha3:"CHL",numeric:"152"},{country:"China",alpha2:"CN",alpha3:"CHN",numeric:"156"},{country:"Christmas Island",alpha2:"CX",alpha3:"CXR",numeric:"162"},{country:"Cocos Islands",alpha2:"CC",alpha3:"CCK",numeric:"166"},{country:"Colombia",alpha2:"CO",alpha3:"COL",numeric:"170"},{country:"Comoros",alpha2:"KM",alpha3:"COM",numeric:"174"},{country:"Congo",alpha2:"CG",alpha3:"COG",numeric:"178"},{country:"Congo",alpha2:"CD",alpha3:"COD",numeric:"180"},{country:"Cook Islands",alpha2:"CK",alpha3:"COK",numeric:"184"},{country:"Costa Rica",alpha2:"CR",alpha3:"CRI",numeric:"188"},{country:"Côte d'Ivoire",alpha2:"CI",alpha3:"CIV",numeric:"384"},{country:"Croatia",alpha2:"HR",alpha3:"HRV",numeric:"191"},{country:"Cuba",alpha2:"CU",alpha3:"CUB",numeric:"192"},{country:"Curaçao",alpha2:"CW",alpha3:"CUW",numeric:"531"},{country:"Cyprus",alpha2:"CY",alpha3:"CYP",numeric:"196"},{country:"Czech Republic",alpha2:"CZ",alpha3:"CZE",numeric:"203"},{country:"Denmark",alpha2:"DK",alpha3:"DNK",numeric:"208"},{country:"Djibouti",alpha2:"DJ",alpha3:"DJI",numeric:"262"},{country:"Dominica",alpha2:"DM",alpha3:"DMA",numeric:"212"},{country:"Dominican Republic",alpha2:"DO",alpha3:"DOM",numeric:"214"},{country:"Ecuador",alpha2:"EC",alpha3:"ECU",numeric:"218"},{country:"Egypt",alpha2:"EG",alpha3:"EGY",numeric:"818"},{country:"El Salvador",alpha2:"SV",alpha3:"SLV",numeric:"222"},{country:"Equatorial Guinea",alpha2:"GQ",alpha3:"GNQ",numeric:"226"},{country:"Eritrea",alpha2:"ER",alpha3:"ERI",numeric:"232"},{country:"Estonia",alpha2:"EE",alpha3:"EST",numeric:"233"},{country:"Ethiopia",alpha2:"ET",alpha3:"ETH",numeric:"231"},{country:"Falkland Islands",alpha2:"FK",alpha3:"FLK",numeric:"238"},{country:"Faroe Islands",alpha2:"FO",alpha3:"FRO",numeric:"234"},{country:"Fiji",alpha2:"FJ",alpha3:"FJI",numeric:"242"},{country:"Finland",alpha2:"FI",alpha3:"FIN",numeric:"246"},{country:"France",alpha2:"FR",alpha3:"FRA",numeric:"250"},{country:"French Guiana",alpha2:"GF",alpha3:"GUF",numeric:"254"},{country:"French Polynesia",alpha2:"PF",alpha3:"PYF",numeric:"258"},{country:"French Southern Territories",alpha2:"TF",alpha3:"ATF",numeric:"260"},{country:"Gabon",alpha2:"GA",alpha3:"GAB",numeric:"266"},{country:"Gambia",alpha2:"GM",alpha3:"GMB",numeric:"270"},{country:"Georgia",alpha2:"GE",alpha3:"GEO",numeric:"268"},{country:"Germany",alpha2:"DE",alpha3:"DEU",numeric:"276"},{country:"Ghana",alpha2:"GH",alpha3:"GHA",numeric:"288"},{country:"Gibraltar",alpha2:"GI",alpha3:"GIB",numeric:"292"},{country:"Greece",alpha2:"GR",alpha3:"GRC",numeric:"300"},{country:"Greenland",alpha2:"GL",alpha3:"GRL",numeric:"304"},{country:"Grenada",alpha2:"GD",alpha3:"GRD",numeric:"308"},{country:"Guadeloupe",alpha2:"GP",alpha3:"GLP",numeric:"312"},{country:"Guam",alpha2:"GU",alpha3:"GUM",numeric:"316"},{country:"Guatemala",alpha2:"GT",alpha3:"GTM",numeric:"320"},{country:"Guernsey",alpha2:"GG",alpha3:"GGY",numeric:"831"},{country:"Guinea",alpha2:"GN",alpha3:"GIN",numeric:"324"},{country:"Guinea-Bissau",alpha2:"GW",alpha3:"GNB",numeric:"624"},{country:"Guyana",alpha2:"GY",alpha3:"GUY",numeric:"328"},{country:"Haiti",alpha2:"HT",alpha3:"HTI",numeric:"332"},{country:"Heard Island and McDonald Islands",alpha2:"HM",alpha3:"HMD",numeric:"334"},{country:"Holy See",alpha2:"VA",alpha3:"VAT",numeric:"336"},{country:"Honduras",alpha2:"HN",alpha3:"HND",numeric:"340"},{country:"Hong Kong",alpha2:"HK",alpha3:"HKG",numeric:"344"},{country:"Hungary",alpha2:"HU",alpha3:"HUN",numeric:"348"},{country:"Iceland",alpha2:"IS",alpha3:"ISL",numeric:"352"},{country:"India",alpha2:"IN",alpha3:"IND",numeric:"356"},{country:"Indonesia",alpha2:"ID",alpha3:"IDN",numeric:"360"},{country:"Islamic Republic of Iran",alpha2:"IR",alpha3:"IRN",numeric:"364"},{country:"Iraq",alpha2:"IQ",alpha3:"IRQ",numeric:"368"},{country:"Ireland",alpha2:"IE",alpha3:"IRL",numeric:"372"},{country:"Isle of Man",alpha2:"IM",alpha3:"IMN",numeric:"833"},{country:"Israel",alpha2:"IL",alpha3:"ISR",numeric:"376"},{country:"Italy",alpha2:"IT",alpha3:"ITA",numeric:"380"},{country:"Jamaica",alpha2:"JM",alpha3:"JAM",numeric:"388"},{country:"Japan",alpha2:"JP",alpha3:"JPN",numeric:"392"},{country:"Jersey",alpha2:"JE",alpha3:"JEY",numeric:"832"},{country:"Jordan",alpha2:"JO",alpha3:"JOR",numeric:"400"},{country:"Kazakhstan",alpha2:"KZ",alpha3:"KAZ",numeric:"398"},{country:"Kenya",alpha2:"KE",alpha3:"KEN",numeric:"404"},{country:"Kiribati",alpha2:"KI",alpha3:"KIR",numeric:"296"},{country:"Democratic People's Republic of Korea",alpha2:"KP",alpha3:"PRK",numeric:"408"},{country:"Republic of Korea",alpha2:"KR",alpha3:"KOR",numeric:"410"},{country:"Kuwait",alpha2:"KW",alpha3:"KWT",numeric:"414"},{country:"Kyrgyzstan",alpha2:"KG",alpha3:"KGZ",numeric:"417"},{country:"Lao People's Democratic Republic",alpha2:"LA",alpha3:"LAO",numeric:"418"},{country:"Latvia",alpha2:"LV",alpha3:"LVA",numeric:"428"},{country:"Lebanon",alpha2:"LB",alpha3:"LBN",numeric:"422"},{country:"Lesotho",alpha2:"LS",alpha3:"LSO",numeric:"426"},{country:"Liberia",alpha2:"LR",alpha3:"LBR",numeric:"430"},{country:"Libya",alpha2:"LY",alpha3:"LBY",numeric:"434"},{country:"Liechtenstein",alpha2:"LI",alpha3:"LIE",numeric:"438"},{country:"Lithuania",alpha2:"LT",alpha3:"LTU",numeric:"440"},{country:"Luxembourg",alpha2:"LU",alpha3:"LUX",numeric:"442"},{country:"Macao",alpha2:"MO",alpha3:"MAC",numeric:"446"},{country:"Macedonia",alpha2:"MK",alpha3:"MKD",numeric:"807"},{country:"Madagascar",alpha2:"MG",alpha3:"MDG",numeric:"450"},{country:"Malawi",alpha2:"MW",alpha3:"MWI",numeric:"454"},{country:"Malaysia",alpha2:"MY",alpha3:"MYS",numeric:"458"},{country:"Maldives",alpha2:"MV",alpha3:"MDV",numeric:"462"},{country:"Mali",alpha2:"ML",alpha3:"MLI",numeric:"466"},{country:"Malta",alpha2:"MT",alpha3:"MLT",numeric:"470"},{country:"Marshall Islands",alpha2:"MH",alpha3:"MHL",numeric:"584"},{country:"Martinique",alpha2:"MQ",alpha3:"MTQ",numeric:"474"},{country:"Mauritania",alpha2:"MR",alpha3:"MRT",numeric:"478"},{country:"Mauritius",alpha2:"MU",alpha3:"MUS",numeric:"480"},{country:"Mayotte",alpha2:"YT",alpha3:"MYT",numeric:"175"},{country:"Mexico",alpha2:"MX",alpha3:"MEX",numeric:"484"},{country:"Federated States of Micronesia",alpha2:"FM",alpha3:"FSM",numeric:"583"},{country:"Republic of Moldova",alpha2:"MD",alpha3:"MDA",numeric:"498"},{country:"Monaco",alpha2:"MC",alpha3:"MCO",numeric:"492"},{country:"Mongolia",alpha2:"MN",alpha3:"MNG",numeric:"496"},{country:"Montenegro",alpha2:"ME",alpha3:"MNE",numeric:"499"},{country:"Montserrat",alpha2:"MS",alpha3:"MSR",numeric:"500"},{country:"Morocco",alpha2:"MA",alpha3:"MAR",numeric:"504"},{country:"Mozambique",alpha2:"MZ",alpha3:"MOZ",numeric:"508"},{country:"Myanmar",alpha2:"MM",alpha3:"MMR",numeric:"104"},{country:"Namibia",alpha2:"NA",alpha3:"NAM",numeric:"516"},{country:"Nauru",alpha2:"NR",alpha3:"NRU",numeric:"520"},{country:"Nepal",alpha2:"NP",alpha3:"NPL",numeric:"524"},{country:"Netherlands",alpha2:"NL",alpha3:"NLD",numeric:"528"},{country:"New Caledonia",alpha2:"NC",alpha3:"NCL",numeric:"540"},{country:"New Zealand",alpha2:"NZ",alpha3:"NZL",numeric:"554"},{country:"Nicaragua",alpha2:"NI",alpha3:"NIC",numeric:"558"},{country:"Niger",alpha2:"NE",alpha3:"NER",numeric:"562"},{country:"Nigeria",alpha2:"NG",alpha3:"NGA",numeric:"566"},{country:"Niue",alpha2:"NU",alpha3:"NIU",numeric:"570"},{country:"Norfolk Island",alpha2:"NF",alpha3:"NFK",numeric:"574"},{country:"Northern Mariana Islands",alpha2:"MP",alpha3:"MNP",numeric:"580"},{country:"Norway",alpha2:"NO",alpha3:"NOR",numeric:"578"},{country:"Oman",alpha2:"OM",alpha3:"OMN",numeric:"512"},{country:"Pakistan",alpha2:"PK",alpha3:"PAK",numeric:"586"},{country:"Palau",alpha2:"PW",alpha3:"PLW",numeric:"585"},{country:"State of Palestine",alpha2:"PS",alpha3:"PSE",numeric:"275"},{country:"Panama",alpha2:"PA",alpha3:"PAN",numeric:"591"},{country:"Papua New Guinea",alpha2:"PG",alpha3:"PNG",numeric:"598"},{country:"Paraguay",alpha2:"PY",alpha3:"PRY",numeric:"600"},{country:"Peru",alpha2:"PE",alpha3:"PER",numeric:"604"},{country:"Philippines",alpha2:"PH",alpha3:"PHL",numeric:"608"},{country:"Pitcairn",alpha2:"PN",alpha3:"PCN",numeric:"612"},{country:"Poland",alpha2:"PL",alpha3:"POL",numeric:"616"},{country:"Portugal",alpha2:"PT",alpha3:"PRT",numeric:"620"},{country:"Puerto Rico",alpha2:"PR",alpha3:"PRI",numeric:"630"},{country:"Qatar",alpha2:"QA",alpha3:"QAT",numeric:"634"},{country:"Réunion",alpha2:"RE",alpha3:"REU",numeric:"638"},{country:"Romania",alpha2:"RO",alpha3:"ROU",numeric:"642"},{country:"Russian Federation",alpha2:"RU",alpha3:"RUS",numeric:"643"},{country:"Rwanda",alpha2:"RW",alpha3:"RWA",numeric:"646"},{country:"Saint Barthélemy",alpha2:"BL",alpha3:"BLM",numeric:"652"},{country:"Saint Helena, Ascension and Tristan da Cunha",alpha2:"SH",alpha3:"SHN",numeric:"654"},{country:"Saint Kitts and Nevis",alpha2:"KN",alpha3:"KNA",numeric:"659"},{country:"Saint Lucia",alpha2:"LC",alpha3:"LCA",numeric:"662"},{country:"Saint Martin",alpha2:"MF",alpha3:"MAF",numeric:"663"},{country:"Saint Pierre and Miquelon",alpha2:"PM",alpha3:"SPM",numeric:"666"},{country:"Saint Vincent and the Grenadines",alpha2:"VC",alpha3:"VCT",numeric:"670"},{country:"Samoa",alpha2:"WS",alpha3:"WSM",numeric:"882"},{country:"San Marino",alpha2:"SM",alpha3:"SMR",numeric:"674"},{country:"Sao Tome and Principe",alpha2:"ST",alpha3:"STP",numeric:"678"},{country:"Saudi Arabia",alpha2:"SA",alpha3:"SAU",numeric:"682"},{country:"Senegal",alpha2:"SN",alpha3:"SEN",numeric:"686"},{country:"Serbia",alpha2:"RS",alpha3:"SRB",numeric:"688"},{country:"Seychelles",alpha2:"SC",alpha3:"SYC",numeric:"690"},{country:"Sierra Leone",alpha2:"SL",alpha3:"SLE",numeric:"694"},{country:"Singapore",alpha2:"SG",alpha3:"SGP",numeric:"702"},{country:"Sint Maarten",alpha2:"SX",alpha3:"SXM",numeric:"534"},{country:"Slovakia",alpha2:"SK",alpha3:"SVK",numeric:"703"},{country:"Slovenia",alpha2:"SI",alpha3:"SVN",numeric:"705"},{country:"Solomon Islands",alpha2:"SB",alpha3:"SLB",numeric:"090"},{country:"Somalia",alpha2:"SO",alpha3:"SOM",numeric:"706"},{country:"South Africa",alpha2:"ZA",alpha3:"ZAF",numeric:"710"},{country:"South Georgia and the South Sandwich Islands",alpha2:"GS",alpha3:"SGS",numeric:"239"},{country:"South Sudan",alpha2:"SS",alpha3:"SSD",numeric:"728"},{country:"Spain",alpha2:"ES",alpha3:"ESP",numeric:"724"},{country:"Sri Lanka",alpha2:"LK",alpha3:"LKA",numeric:"144"},{country:"Sudan",alpha2:"SD",alpha3:"SDN",numeric:"729"},{country:"Suriname",alpha2:"SR",alpha3:"SUR",numeric:"740"},{country:"Svalbard and Jan Mayen",alpha2:"SJ",alpha3:"SJM",numeric:"744"},{country:"Swaziland",alpha2:"SZ",alpha3:"SWZ",numeric:"748"},{country:"Sweden",alpha2:"SE",alpha3:"SWE",numeric:"752"},{country:"Switzerland",alpha2:"CH",alpha3:"CHE",numeric:"756"},{country:"Syrian Arab Republic",alpha2:"SY",alpha3:"SYR",numeric:"760"},{country:"Taiwan, Province of China",alpha2:"TW",alpha3:"TWN",numeric:"158"},{country:"Tajikistan",alpha2:"TJ",alpha3:"TJK",numeric:"762"},{country:"United Republic of Tanzania",alpha2:"TZ",alpha3:"TZA",numeric:"834"},{country:"Thailand",alpha2:"TH",alpha3:"THA",numeric:"764"},{country:"Timor-Leste",alpha2:"TL",alpha3:"TLS",numeric:"626"},{country:"Togo",alpha2:"TG",alpha3:"TGO",numeric:"768"},{country:"Tokelau",alpha2:"TK",alpha3:"TKL",numeric:"772"},{country:"Tonga",alpha2:"TO",alpha3:"TON",numeric:"776"},{country:"Trinidad and Tobago",alpha2:"TT",alpha3:"TTO",numeric:"780"},{country:"Tunisia",alpha2:"TN",alpha3:"TUN",numeric:"788"},{country:"Turkey",alpha2:"TR",alpha3:"TUR",numeric:"792"},{country:"Turkmenistan",alpha2:"TM",alpha3:"TKM",numeric:"795"},{country:"Turks and Caicos Islands",alpha2:"TC",alpha3:"TCA",numeric:"796"},{country:"Tuvalu",alpha2:"TV",alpha3:"TUV",numeric:"798"},{country:"Uganda",alpha2:"UG",alpha3:"UGA",numeric:"800"},{country:"Ukraine",alpha2:"UA",alpha3:"UKR",numeric:"804"},{country:"United Arab Emirates",alpha2:"AE",alpha3:"ARE",numeric:"784"},{country:"United Kingdom of Great Britain and Northern Ireland",alpha2:"GB",alpha3:"GBR",numeric:"826"},{country:"United States of America",alpha2:"US",alpha3:"USA",numeric:"840"},{country:"United States Minor Outlying Islands",alpha2:"UM",alpha3:"UMI",numeric:"581"},{country:"Uruguay",alpha2:"UY",alpha3:"URY",numeric:"858"},{country:"Uzbekistan",alpha2:"UZ",alpha3:"UZB",numeric:"860"},{country:"Vanuatu",alpha2:"VU",alpha3:"VUT",numeric:"548"},{country:"Venezuela (Bolivarian Republic of)",alpha2:"VE",alpha3:"VEN",numeric:"862"},{country:"Viet Nam",alpha2:"VN",alpha3:"VNM",numeric:"704"},{country:"Virgin Islands",alpha2:"VG",alpha3:"VGB",numeric:"092"},{country:"Virgin Islands of the United States",alpha2:"VI",alpha3:"VIR",numeric:"850"},{country:"Wallis and Futuna",alpha2:"WF",alpha3:"WLF",numeric:"876"},{country:"Western Sahara",alpha2:"EH",alpha3:"ESH",numeric:"732"},{country:"Yemen",alpha2:"YE",alpha3:"YEM",numeric:"887"},{country:"Zambia",alpha2:"ZM",alpha3:"ZMB",numeric:"894"},{country:"Zimbabwe",alpha2:"ZW",alpha3:"ZWE",numeric:"716"}];FL.default=Ije,function(n){var e=bg&&bg.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(n,"__esModule",{value:!0}),n.all=n.whereNumeric=n.whereAlpha3=n.whereAlpha2=n.whereCountry=void 0;const t=e(FL);n.whereCountry=i=>t.default.find(r=>r.country.toUpperCase()===i.toUpperCase()),n.whereAlpha2=i=>t.default.find(r=>r.alpha2===i.toUpperCase()),n.whereAlpha3=i=>t.default.find(r=>r.alpha3===i.toUpperCase()),n.whereNumeric=i=>t.default.find(r=>r.numeric===String(i)),n.all=()=>t.default,n.default={all:n.all,whereCountry:n.whereCountry,whereAlpha2:n.whereAlpha2,whereAlpha3:n.whereAlpha3,whereNumeric:n.whereNumeric}}($L);var DK;let NK,LK,HK,$K,FK,BK,VK;function Oje(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(E,x,P){return function(T,I){x&&(I=T,T=n);for(var N=0;N<E.length;N++)I=E[N].apply(T,P?[I]:[]);return P?I:T}}function w(E,x,P,T){if(typeof E!="function"&&(T||E!==void 0))throw new TypeError(x+" must "+(P||"be")+" a function"+(T?"":" or undefined"));return E}function _(E,x,P,T,I,N,W,j,K,H,k){function B(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(x[0]),z=x[3],se=!W,b=I===1,C=I===3,S=I===4,A=I===2;function L(oe,le,je){return function(ye,xe){return le&&(xe=ye,ye=E),je&&je(ye),M[oe].call(ye,xe)}}if(!se){var M={},$=[],Z=C?"get":S||b?"set":"value";if(K?(H||b?M={get:WK(function(){return z(this)},T,"get"),set:function(oe){x[4](this,oe)}}:M[Z]=z,H||WK(M[Z],T,A?"":Z)):H||(M=Object.getOwnPropertyDescriptor(E,T)),!H&&!K){if((a=m[+j][T])&&(a^I)!=7)throw Error("Decorating two elements with the same name ("+M[Z].name+") is not supported yet");m[+j][T]=I<3?1:I}}for(var re=E,ue=G.length-1;ue>=0;ue-=P?2:1){var ae=w(G[ue],"A decorator","be",!0),De=P?G[ue-1]:void 0,Ee={},ee={kind:["field","accessor","method","getter","setter","class"][I],name:T,metadata:o,addInitializer:(function(oe,le){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(le,"An initializer","be",!0),N.push(le)}).bind(null,Ee)};if(se)a=ae.call(De,re,ee),Ee.v=1,w(a,"class decorators","return")&&(re=a);else if(ee.static=j,ee.private=K,a=ee.access={has:K?k.bind():function(oe){return T in oe}},S||(a.get=K?A?function(oe){return B(oe),M.value}:L("get",0,B):function(oe){return oe[T]}),A||C||(a.set=K?L("set",0,B):function(oe,le){oe[T]=le}),re=ae.call(De,b?{get:M.get,set:M.set}:M[Z],ee),Ee.v=1,b){if(typeof re=="object"&&re)(a=w(re.get,"accessor.get"))&&(M.get=a),(a=w(re.set,"accessor.set"))&&(M.set=a),(a=w(re.init,"accessor.init"))&&$.unshift(a);else if(re!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(re,(H?"field":"method")+" decorators","return")&&(H?$.unshift(re):M[Z]=re)}return I<2&&W.push(y($,j,1),y(N,j,0)),H||se||(K?b?W.splice(-1,0,L("get",j),L("set",j)):W.push(A?M[Z]:w.call.bind(M[Z])):g(E,T,M)),re}function R(E){return g(E,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(E){E&&u.push(y(E))},d=function(E,x){for(var P=0;P<t.length;P++){var T=t[P],I=T[1],N=7&I;if((8&I)==E&&!N==x){var W=T[2],j=!!T[3],K=16&I;_(E?n:n.prototype,T,K,j?"#"+W:kje(W),N,N<2?[]:E?c=c||[]:l=l||[],u,!!E,j,x,E&&j?function(H){return Nje(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||R(n),{e:a,get c(){var E=[];return v&&[R(n=_(n,[e],i,n.name,5,E)),y(E,1)]}}}function kje(n){var e=Dje(n,"string");return typeof e=="symbol"?e:e+""}function Dje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function WK(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function Nje(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}const Lje=n=>n.startsWith("#")?n.slice(1):n;let jK;class Hje{constructor(){this.datasrc=LK(this,"g/National_Initiatives_Figure_Data.csv"),this.countriessrc=(HK(this),$K(this,"g/countries-50m.json")),this.geochart=void FK(this),this.continent="",this.countryDataDesc={},this.projecturls=[],this.projections=["azimuthalEqualArea","azimuthalEquidistant","gnomonic","orthographic","stereographic","equalEarth","albers","albersUsa","conicConformal","conicEqualArea","conicEquidistant","equirectangular","mercator","transverseMercator","naturalEarth1"],this.countryName=BK(this,""),this.isAnimating=(VK(this),!1)}parseCSV(e){const t=[];let i=!1;for(let r=0,s=0,o=0;o<e.length;o++){let a=e[o],l=e[o+1];if(t[r]=t[r]||[],t[r][s]=t[r][s]||"",a=='"'&&i&&l=='"'){t[r][s]+=a,++o;continue}if(a=='"'){i=!i;continue}if(a==","&&!i){++s;continue}if(a=="\r"&&l==`
`&&!i){++r,s=0,++o;continue}if(a==`
`&&!i){++r,s=0;continue}if(a=="\r"&&!i){++r,s=0;continue}t[r][s]+=a}return t}showSelected(e){this.countryDataDesc?(this.selected=this.countryDataDesc[e],this.selected?(this.countryName=this.selected[0],this.projectName=this.selected[3],this.projectPublication=this.selected[2],this.projectStatus=this.selected[8],this.projectStatusText=this.selected[7],this.selected[4]?this.projecturls=this.selected[4].split(" / "):this.projecturls=[]):console.warn("showselected this.selected is null")):console.warn("showselected countryDataDesc is null")}bound(){if(this.paramshash=window.location.hash,this.params=this.paramshash.split("&"),console.log("bound() params",this.params),this.params.length>0){const e=this.params.length;if(e>0){const t=Lje(this.params[0]);t&&(this.datasrc=t)}e>1&&(this.continent=this.params[1]),console.log("hash contains url:"+this.datasrc)}}attached(){console.log("attached"),hs.register(Zp,Hc,Ef,ah,...o3),Promise.all([fetch(this.countriessrc).then(e=>e.json()),fetch(this.datasrc).then(e=>e.text())]).then(([e,t])=>{let i=this;this.countries=Rje(e,e.objects.countries).features;const r=this.parseCSV(t);let s={};this.countryDataDesc={};for(let o of r)try{let a=$L.whereAlpha2(o[1]);a&&(s[a.numeric]=o[8],this.countryDataDesc[a.numeric]=o)}catch(a){console.warn(a)}this.myData=[];for(let o of this.countries){let a=0,l=s[o.id];l?a=parseFloat(l):console.warn("no data for country with id"+o.id+" name:"+o.properties.name),this.myData.push({feature:o,value:a})}if(this.worlddata=this.myData,this.worldcountries=this.countries,console.log("geoOrthographic function:",AL),this.chart=new hs(this.geochart.getContext("2d"),{type:"choropleth",data:{labels:this.countries.map(o=>o.id+":"+o.properties.name),datasets:[{label:"Countries",data:this.myData,outline:this.countries}]},options:{showOutline:!1,showGraticule:!0,plugins:{legend:{display:!1}},scales:{projection:{axis:"x",projection:"equalEarth"},color:{axis:"x",interpolate:"oranges",legend:{position:"bottom-right",align:"right"}}},onClick:(o,a)=>{let l=a.map(c=>c.element.feature.id);i.showSelected(l[0])}}}),this.continent)switch(console.log("switching to continent",this.continent),this.continent){case"europe":this.switchToEurope();break;case"asia":this.switchToAsia();break;case"namerica":this.switchToNAmerica();break;case"africa":this.switchToAfrica();break;case"samerica":this.switchToSAmerica();break;case"australia":this.switchToAustralia();break;default:console.warn("Unknown continent:",this.continent),this.switchToWorld();break}})}detached(){}switchToEurope(){this.currentProjection=="orthographic"&&this.chart.scales.projection.projection.rotate([0,0,0]);let e=4;this.chart.options.scales.projection.projectionScale=e;let t=e*(3/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionOffset=[0,t],this.chart.update()}switchToWorld(){this.currentProjection=="orthographic"&&this.chart.scales.projection.projection.rotate([0,0,0]),this.chart.options.scales.projection.projectionScale=1,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.update()}switchToAsia(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([-80,0,0])}else{let e=2.3,t=-e*(2/8*this.chart.chartArea.width),i=e*(3/16*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToNAmerica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([90,0,0])}else{let e=2.5,t=e*(2/8*this.chart.chartArea.width),i=e*(2/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToSAmerica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([60,0,0])}else{let e=2,t=e*(1/8*this.chart.chartArea.width),i=-e*(5/32*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToAfrica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([0,0,0])}else this.chart.options.scales.projection.projectionScale=1.8,this.chart.options.scales.projection.projectionOffset=[0,0];this.chart.update()}switchToPacific(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([-160,0,0])}else{let e=2,t=-e*(5/16*this.chart.chartArea.width),i=-e*(1/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}zoomChart(e,t,i){console.log("zoomChart:",e),e.options.scales.xy.projection.center=t,e.options.scales.xy.projection.scale=i,e.update()}switchToEurope2(){this.eucountryids=this.europeanCountryCodes.map(e=>{console.log("mapping "+e+" to numeric");let t=$L.whereAlpha2(e);return console.log("numeric",t),t?t.numeric:null}),this.eudata=this.worlddata.filter(e=>this.eucountryids.includes(e.feature.id)),this.eucountries=this.worldcountries.filter(e=>this.eucountryids.includes(e.id)),console.log("switching to EU view",this.eudata,this.eucountries),console.log("debug world data",this.worlddata,this.worldcountries),this.chart.data.labels=this.eucountries.map(e=>e.properties.name),this.chart.data.datasets[0].data=this.eudata,this.chart.data.outline=this.eucountries,this.chart.update()}switchToworld2(){this.chart.data.labels=this.worldcountries.map(e=>e.properties.name),this.chart.data.datasets[0].data=this.worlddata,this.chart.data.outline=this.worldcountries,this.chart.update()}switchProjection(e){console.log("switching projection:",e),this.currentProjection=e,e=="orthographic"?this.chart.options.scales.projection.projection=AL().rotate([0,0,0]):this.chart.options.scales.projection.projection=e,this.chart.update()}resetView(){this.switchProjection("equalEarth"),this.switchToWorld()}animate(){}toggleAnimation(){this.currentProjection=="orthographic"&&(this.isAnimating?(cancelAnimationFrame(this.animationFrameId),this.isAnimating=!1,console.log("Animation stopped.")):(this.isAnimating=!0,console.log("Animation started."),this.performAnimationFrame()))}performAnimationFrame(){this.isAnimating&&(this.animate(),this.animationFrameId=requestAnimationFrame(this.performAnimationFrame.bind(this)))}animate(){let e=performance.now()/1e3;this.chart.scales.projection.projection.rotate([e,0,0]),this.chart.update()}}DK=Hje,{e:[LK,HK,$K,FK,BK,VK],c:[jK,NK]}=Oje(DK,[Um({...FVe,name:"sv-chartjs-geo"})],[[Sh,0,"datasrc"],[Sh,0,"countriessrc"],[Aee,0,"countryName"]]),NK();const zK="network",BL=`<div>
    <div class="w3-right w3-above w3-small">    
        <input class="w3-input" ref="searchinput" value.bind="searchValue" placeholder="try searching for a node"/>
        <button class="w3-button w3-grey" click.trigger="layoutOnOff()">layout <span show.bind="animationstarted">on</span><span show.bind="!animationstarted">off</span></button>
    </div>
    <div ref="container" style="height:80vh;width:100%"></div>
</div>`,UK=[],GK={};let VL;function $je(n){VL||(VL=Nr.define({name:zK,template:BL,dependencies:UK,bindables:GK})),n.register(VL)}const Fje=Object.freeze(Object.defineProperty({__proto__:null,bindables:GK,default:BL,dependencies:UK,name:zK,register:$je,template:BL},Symbol.toStringTag,{value:"Module"}));var WL={exports:{}},Qp=typeof Reflect=="object"?Reflect:null,YK=Qp&&typeof Qp.apply=="function"?Qp.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},lE;Qp&&typeof Qp.ownKeys=="function"?lE=Qp.ownKeys:Object.getOwnPropertySymbols?lE=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:lE=function(e){return Object.getOwnPropertyNames(e)};function Bje(n){console&&console.warn&&console.warn(n)}var KK=Number.isNaN||function(e){return e!==e};function an(){an.init.call(this)}WL.exports=an,WL.exports.once=zje,an.EventEmitter=an,an.prototype._events=void 0,an.prototype._eventsCount=0,an.prototype._maxListeners=void 0;var qK=10;function cE(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(an,"defaultMaxListeners",{enumerable:!0,get:function(){return qK},set:function(n){if(typeof n!="number"||n<0||KK(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");qK=n}}),an.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},an.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||KK(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function XK(n){return n._maxListeners===void 0?an.defaultMaxListeners:n._maxListeners}an.prototype.getMaxListeners=function(){return XK(this)},an.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")YK(l,this,t);else for(var c=l.length,u=tq(l,c),i=0;i<c;++i)YK(u[i],this,t);return!0};function ZK(n,e,t,i){var r,s,o;if(cE(t),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=i?[t,o]:[o,t]:i?o.unshift(t):o.push(t),r=XK(n),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=o.length,Bje(a)}return n}an.prototype.addListener=function(e,t){return ZK(this,e,t,!1)},an.prototype.on=an.prototype.addListener,an.prototype.prependListener=function(e,t){return ZK(this,e,t,!0)};function Vje(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function QK(n,e,t){var i={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},r=Vje.bind(i);return r.listener=t,i.wrapFn=r,r}an.prototype.once=function(e,t){return cE(t),this.on(e,QK(this,e,t)),this},an.prototype.prependOnceListener=function(e,t){return cE(t),this.prependListener(e,QK(this,e,t)),this},an.prototype.removeListener=function(e,t){var i,r,s,o,a;if(cE(t),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Wje(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this},an.prototype.off=an.prototype.removeListener,an.prototype.removeAllListeners=function(e){var t,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function JK(n,e,t){var i=n._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?t?[r.listener||r]:[r]:t?jje(r):tq(r,r.length)}an.prototype.listeners=function(e){return JK(this,e,!0)},an.prototype.rawListeners=function(e){return JK(this,e,!1)},an.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):eq.call(n,e)},an.prototype.listenerCount=eq;function eq(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}an.prototype.eventNames=function(){return this._eventsCount>0?lE(this._events):[]};function tq(n,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=n[i];return t}function Wje(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function jje(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function zje(n,e){return new Promise(function(t,i){function r(o){n.removeListener(e,s),i(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",r),t([].slice.call(arguments))}nq(n,e,s,{once:!0}),e!=="error"&&Uje(n,r,{once:!0})})}function Uje(n,e,t){typeof n.on=="function"&&nq(n,"error",e,t)}function nq(n,e,t,i){if(typeof n.on=="function")i.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function r(s){i.once&&n.removeEventListener(e,r),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var jL=WL.exports;function Cl(n){if(typeof n!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=n}typeof Symbol<"u"&&(Cl.prototype[Symbol.iterator]=function(){return this}),Cl.of=function(){var n=arguments,e=n.length,t=0;return new Cl(function(){return t>=e?{done:!0}:{done:!1,value:n[t++]}})},Cl.empty=function(){var n=new Cl(function(){return{done:!0}});return n},Cl.fromSequence=function(n){var e=0,t=n.length;return new Cl(function(){return e>=t?{done:!0}:{done:!1,value:n[e++]}})},Cl.is=function(n){return n instanceof Cl?!0:typeof n=="object"&&n!==null&&typeof n.next=="function"};var zL=Cl;const ho=vg(zL);var UL={};UL.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",UL.SYMBOL_SUPPORT=typeof Symbol<"u";var Gje=zL,iq=UL,Yje=iq.ARRAY_BUFFER_SUPPORT,Kje=iq.SYMBOL_SUPPORT;function qje(n){return typeof n=="string"||Array.isArray(n)||Yje&&ArrayBuffer.isView(n)?Gje.fromSequence(n):typeof n!="object"||n===null?null:Kje&&typeof n[Symbol.iterator]=="function"?n[Symbol.iterator]():typeof n.next=="function"?n:null}var rq=function(e){var t=qje(e);if(!t)throw new Error("obliterator: target is not iterable nor a valid iterator.");return t},Xje=rq,Zje=function(e,t){for(var i=arguments.length>1?t:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Xje(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==t&&(r.length=o),r;r[o++]=s.value}};const sq=vg(Zje);var Qje=zL,Jje=rq,e6e=function(){var e=arguments,t=null,i=-1;return new Qje(function(){var s=null;do{if(t===null){if(i++,i>=e.length)return{done:!0};t=Jje(e[i])}if(s=t.next(),s.done===!0){t=null;continue}break}while(!0);return s})};const $c=vg(e6e);function t6e(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const i in arguments[e])n[i]=arguments[e][i];return n}let Ri=t6e;typeof Object.assign=="function"&&(Ri=Object.assign);function fo(n,e,t,i){const r=n._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[t]||r.undirected&&r.undirected[t]:i==="directed"?s=r.out&&r.out[t]:s=r.undirected&&r.undirected[t]),s}function Ui(n){return typeof n=="object"&&n!==null}function oq(n){let e;for(e in n)return!1;return!0}function go(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function oa(n,e,t){const i={enumerable:!0,configurable:!0};typeof t=="function"?i.get=t:(i.value=t,i.writable=!1),Object.defineProperty(n,e,i)}function aq(n){return!(!Ui(n)||n.attributes&&!Array.isArray(n.attributes))}function n6e(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class GL extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Me extends GL{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Me.prototype.constructor)}}class ve extends GL{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ve.prototype.constructor)}}class Ye extends GL{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ye.prototype.constructor)}}function lq(n,e){this.key=n,this.attributes=e,this.clear()}lq.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function cq(n,e){this.key=n,this.attributes=e,this.clear()}cq.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function uq(n,e){this.key=n,this.attributes=e,this.clear()}uq.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Jp(n,e,t,i,r){this.key=e,this.attributes=r,this.undirected=n,this.source=t,this.target=i}Jp.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,i=this.target.key;this.source[n][i]=this,!(this.undirected&&t===i)&&(this.target[e][t]=this)},Jp.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,i=this.target.key;this.undirected&&(n=e="undirected");const r=this.source[n],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&t===i||(this.target[e][t]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][t]=this},Jp.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),delete this.source[t][e],delete this.target[i][n]},Jp.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[i][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[i][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const hq=0,dq=1,i6e=2,fq=3;function Fc(n,e,t,i,r,s,o){let a,l,c,u;if(i=""+i,t===hq){if(a=n._nodes.get(i),!a)throw new ve(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(t===fq){if(r=""+r,l=n._edges.get(r),!l)throw new ve(`Graph.${e}: could not find the "${r}" edge in the graph.`);const h=l.source.key,d=l.target.key;if(i===h)a=l.target;else if(i===d)a=l.source;else throw new ve(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${h}, ${d}).`);c=s,u=o}else{if(l=n._edges.get(i),!l)throw new ve(`Graph.${e}: could not find the "${i}" edge in the graph.`);t===dq?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function r6e(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Fc(this,e,t,i,r,s);return o.attributes[a]}}function s6e(n,e,t){n.prototype[e]=function(i,r){const[s]=Fc(this,e,t,i,r);return s.attributes}}function o6e(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Fc(this,e,t,i,r,s);return o.attributes.hasOwnProperty(a)}}function a6e(n,e,t){n.prototype[e]=function(i,r,s,o){const[a,l,c]=Fc(this,e,t,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function l6e(n,e,t){n.prototype[e]=function(i,r,s,o){const[a,l,c]=Fc(this,e,t,i,r,s,o);if(typeof c!="function")throw new Me(`Graph.${e}: updater should be a function.`);const u=a.attributes,h=c(u[l]);return u[l]=h,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function c6e(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Fc(this,e,t,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function u6e(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Fc(this,e,t,i,r,s);if(!Ui(a))throw new Me(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function h6e(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Fc(this,e,t,i,r,s);if(!Ui(a))throw new Me(`Graph.${e}: provided attributes are not a plain object.`);return Ri(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function d6e(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Fc(this,e,t,i,r,s);if(typeof a!="function")throw new Me(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const f6e=[{name:n=>`get${n}Attribute`,attacher:r6e},{name:n=>`get${n}Attributes`,attacher:s6e},{name:n=>`has${n}Attribute`,attacher:o6e},{name:n=>`set${n}Attribute`,attacher:a6e},{name:n=>`update${n}Attribute`,attacher:l6e},{name:n=>`remove${n}Attribute`,attacher:c6e},{name:n=>`replace${n}Attributes`,attacher:u6e},{name:n=>`merge${n}Attributes`,attacher:h6e},{name:n=>`update${n}Attributes`,attacher:d6e}];function g6e(n){f6e.forEach(function({name:e,attacher:t}){t(n,e("Node"),hq),t(n,e("Source"),dq),t(n,e("Target"),i6e),t(n,e("Opposite"),fq)})}function p6e(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=fo(this,o,a,t),!s)throw new ve(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ve(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function m6e(n,e,t){n.prototype[e]=function(i){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=fo(this,s,o,t),!r)throw new ve(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new ve(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function b6e(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=fo(this,o,a,t),!s)throw new ve(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ve(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function v6e(n,e,t){n.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=fo(this,a,l,t),!o)throw new ve(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ve(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function w6e(n,e,t){n.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=fo(this,a,l,t),!o)throw new ve(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ve(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new Me(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function y6e(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=fo(this,o,a,t),!s)throw new ve(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ve(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function C6e(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=fo(this,o,a,t),!s)throw new ve(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ve(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Ui(r))throw new Me(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function S6e(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=fo(this,o,a,t),!s)throw new ve(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ve(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Ui(r))throw new Me(`Graph.${e}: provided attributes are not a plain object.`);return Ri(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function _6e(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=fo(this,o,a,t),!s)throw new ve(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ve(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new Me(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const R6e=[{name:n=>`get${n}Attribute`,attacher:p6e},{name:n=>`get${n}Attributes`,attacher:m6e},{name:n=>`has${n}Attribute`,attacher:b6e},{name:n=>`set${n}Attribute`,attacher:v6e},{name:n=>`update${n}Attribute`,attacher:w6e},{name:n=>`remove${n}Attribute`,attacher:y6e},{name:n=>`replace${n}Attributes`,attacher:C6e},{name:n=>`merge${n}Attributes`,attacher:S6e},{name:n=>`update${n}Attributes`,attacher:_6e}];function E6e(n){R6e.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const x6e=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function T6e(n,e,t,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),n&&r)return o.key}}function M6e(n,e,t,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=t(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),n&&a)return r.key;r=r.next}while(r!==void 0)}}function YL(n,e){const t=Object.keys(n),i=t.length;let r,s=0;return new ho(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=t[s++];if(a===e){r=void 0;continue}r=n[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function A6e(n,e,t,i){const r=e[t];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&n)return r.key}function P6e(n,e,t,i){let r=e[t];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),n&&s)return r.key;r=r.next}while(r!==void 0)}function KL(n,e){let t=n[e];return t.next!==void 0?new ho(function(){if(!t)return{done:!0};const i={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:i}}):ho.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function I6e(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):sq(n._edges.keys(),n._edges.size);const t=e==="undirected"?n.undirectedSize:n.directedSize,i=new Array(t),r=e==="undirected",s=n._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function gq(n,e,t,i){if(e.size===0)return;const r=t!=="mixed"&&t!==e.type,s=t==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:h,source:d,target:f}=a;if(l=i(u,h,d.key,f.key,d.attributes,f.attributes,a.undirected),n&&l)return u}}function O6e(n,e){if(n.size===0)return ho.empty();const t=e!=="mixed"&&e!==n.type,i=e==="undirected",r=n._edges.values();return new ho(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(t&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function qL(n,e,t,i,r,s){const o=e?M6e:T6e;let a;if(t!=="undirected"&&(i!=="out"&&(a=o(n,r.in,s),n&&a)||i!=="in"&&(a=o(n,r.out,s,i?void 0:r.key),n&&a))||t!=="directed"&&(a=o(n,r.undirected,s),n&&a))return a}function k6e(n,e,t,i){const r=[];return qL(!1,n,e,t,i,function(s){r.push(s)}),r}function D6e(n,e,t){let i=ho.empty();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(i=$c(i,YL(t.in))),e!=="in"&&typeof t.out<"u"&&(i=$c(i,YL(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(i=$c(i,YL(t.undirected))),i}function XL(n,e,t,i,r,s,o){const a=t?P6e:A6e;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(n,r.in,s,o),n&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(n,r.out,s,o),n&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(n,r.undirected,s,o),n&&l))return l}function N6e(n,e,t,i,r){const s=[];return XL(!1,n,e,t,i,r,function(o){s.push(o)}),s}function L6e(n,e,t,i){let r=ho.empty();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&i in t.in&&(r=$c(r,KL(t.in,i))),typeof t.out<"u"&&e!=="in"&&i in t.out&&(e||t.key!==i)&&(r=$c(r,KL(t.out,i)))),n!=="directed"&&typeof t.undirected<"u"&&i in t.undirected&&(r=$c(r,KL(t.undirected,i))),r}function H6e(n,e){const{name:t,type:i,direction:r}=e;n.prototype[t]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return I6e(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ve(`Graph.${t}: could not find the "${s}" node in the graph.`);return k6e(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ve(`Graph.${t}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ve(`Graph.${t}:  could not find the "${o}" target node in the graph.`);return N6e(i,this.multi,r,a,o)}throw new Me(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function $6e(n,e){const{name:t,type:i,direction:r}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(c,u,h){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return h=c,gq(!1,this,i,h);if(arguments.length===2){c=""+c,h=u;const d=this._nodes.get(c);if(typeof d>"u")throw new ve(`Graph.${s}: could not find the "${c}" node in the graph.`);return qL(!1,this.multi,i==="mixed"?this.type:i,r,d,h)}if(arguments.length===3){c=""+c,u=""+u;const d=this._nodes.get(c);if(!d)throw new ve(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new ve(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return XL(!1,i,this.multi,r,d,u,h)}throw new Me(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let h;if(c.length===0){let d=0;i!=="directed"&&(d+=this.undirectedSize),i!=="undirected"&&(d+=this.directedSize),h=new Array(d);let f=0;c.push((g,p,m,v,y,w,_)=>{h[f++]=u(g,p,m,v,y,w,_)})}else h=[],c.push((d,f,g,p,m,v,y)=>{h.push(u(d,f,g,p,m,v,y))});return this[s].apply(this,c),h};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),h=[];return c.push((d,f,g,p,m,v,y)=>{u(d,f,g,p,m,v,y)&&h.push(d)}),this[s].apply(this,c),h};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new Me(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new Me(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,h;c.length===2?(u=c[0],h=c[1],c=[]):c.length===3?(u=c[1],h=c[2],c=[c[0]]):c.length===4&&(u=c[2],h=c[3],c=[c[0],c[1]]);let d=h;return c.push((f,g,p,m,v,y,w)=>{d=u(d,f,g,p,m,v,y,w)}),this[s].apply(this,c),d}}function F6e(n,e){const{name:t,type:i,direction:r}=e,s="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,gq(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const h=this._nodes.get(l);if(typeof h>"u")throw new ve(`Graph.${s}: could not find the "${l}" node in the graph.`);return qL(!0,this.multi,i==="mixed"?this.type:i,r,h,u)}if(arguments.length===3){l=""+l,c=""+c;const h=this._nodes.get(l);if(!h)throw new ve(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new ve(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return XL(!0,i,this.multi,r,h,c,u)}throw new Me(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((h,d,f,g,p,m,v)=>c(h,d,f,g,p,m,v)),!!this[s].apply(this,l)};const a="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((h,d,f,g,p,m,v)=>!c(h,d,f,g,p,m,v)),!this[s].apply(this,l)}}function B6e(n,e){const{name:t,type:i,direction:r}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return ho.empty();if(!arguments.length)return O6e(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ve(`Graph.${s}: could not find the "${o}" node in the graph.`);return D6e(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ve(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ve(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return L6e(i,r,l,a)}throw new Me(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function V6e(n){x6e.forEach(e=>{H6e(n,e),$6e(n,e),F6e(n,e),B6e(n,e)})}const W6e=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function uE(){this.A=null,this.B=null}uE.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)},uE.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function my(n,e,t,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===t?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(n&&u)return c.key}}function ZL(n,e,t,i,r){if(e!=="mixed"){if(e==="undirected")return my(n,null,i,i.undirected,r);if(typeof t=="string")return my(n,null,i,i[t],r)}const s=new uE;let o;if(e!=="undirected"){if(t!=="out"){if(o=my(n,null,i,i.in,r),n&&o)return o;s.wrap(i.in)}if(t!=="in"){if(o=my(n,s,i,i.out,r),n&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=my(n,s,i,i.undirected,r),n&&o))return o}function j6e(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const i=[];return ZL(!1,n,e,t,function(r){i.push(r)}),i}function by(n,e,t){const i=Object.keys(t),r=i.length;let s=0;return new ho(function(){let a=null;do{if(s>=r)return n&&n.wrap(t),{done:!0};const l=t[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,n&&n.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function z6e(n,e,t){if(n!=="mixed"){if(n==="undirected")return by(null,t,t.undirected);if(typeof e=="string")return by(null,t,t[e])}let i=ho.empty();const r=new uE;return n!=="undirected"&&(e!=="out"&&(i=$c(i,by(r,t,t.in))),e!=="in"&&(i=$c(i,by(r,t,t.out)))),n!=="directed"&&(i=$c(i,by(r,t,t.undirected))),i}function U6e(n,e){const{name:t,type:i,direction:r}=e;n.prototype[t]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ve(`Graph.${t}: could not find the "${s}" node in the graph.`);return j6e(i==="mixed"?this.type:i,r,o)}}function G6e(n,e){const{name:t,type:i,direction:r}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const h=this._nodes.get(c);if(typeof h>"u")throw new ve(`Graph.${s}: could not find the "${c}" node in the graph.`);ZL(!1,i==="mixed"?this.type:i,r,h,u)};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(c,u){const h=[];return this[s](c,(d,f)=>{h.push(u(d,f))}),h};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(c,u){const h=[];return this[s](c,(d,f)=>{u(d,f)&&h.push(d)}),h};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(c,u,h){if(arguments.length<3)throw new Me(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d=h;return this[s](c,(f,g)=>{d=u(d,f,g)}),d}}function Y6e(n,e){const{name:t,type:i,direction:r}=e,s=t[0].toUpperCase()+t.slice(1,-1),o="find"+s;n.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const h=this._nodes.get(c);if(typeof h>"u")throw new ve(`Graph.${o}: could not find the "${c}" node in the graph.`);return ZL(!0,i==="mixed"?this.type:i,r,h,u)};const a="some"+s;n.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;n.prototype[l]=function(c,u){return!this[o](c,(d,f)=>!u(d,f))}}function K6e(n,e){const{name:t,type:i,direction:r}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return ho.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ve(`Graph.${s}: could not find the "${o}" node in the graph.`);return z6e(i==="mixed"?this.type:i,r,a)}}function q6e(n){W6e.forEach(e=>{U6e(n,e),G6e(n,e),Y6e(n,e),K6e(n,e)})}function hE(n,e,t,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,h,d;for(;a=s.next(),a.done!==!0;){let f=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){h=u[c];do d=h.target,f=!0,r(l.key,d.key,l.attributes,d.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){h=u[c];do d=h.target,d.key!==c&&(d=h.source),f=!0,r(l.key,d.key,l.attributes,d.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}t&&!f&&r(l.key,null,l.attributes,null,null,null,null)}}function X6e(n,e){const t={key:n};return oq(e.attributes)||(t.attributes=Ri({},e.attributes)),t}function Z6e(n,e,t){const i={key:e,source:t.source.key,target:t.target.key};return oq(t.attributes)||(i.attributes=Ri({},t.attributes)),n==="mixed"&&t.undirected&&(i.undirected=!0),i}function Q6e(n){if(!Ui(n))throw new Me('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new Me("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Ui(n.attributes)||n.attributes===null))throw new Me("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function J6e(n){if(!Ui(n))throw new Me('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new Me("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new Me("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Ui(n.attributes)||n.attributes===null))throw new Me("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new Me("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const eze=n6e(),tze=new Set(["directed","undirected","mixed"]),pq=new Set(["domain","_events","_eventsCount","_maxListeners"]),nze=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],ize={allowSelfLoops:!0,multi:!1,type:"mixed"};function rze(n,e,t){if(t&&!Ui(t))throw new Me(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new Ye(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new n.NodeDataClass(e,t);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:t}),i}function mq(n,e,t){const i=new n.NodeDataClass(e,t);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:t}),i}function bq(n,e,t,i,r,s,o,a){if(!i&&n.type==="undirected")throw new Ye(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new Ye(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Ui(a))throw new Me(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!n.allowSelfLoops&&s===o)throw new Ye(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=n._nodes.get(s),c=n._nodes.get(o);if(!l)throw new ve(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new ve(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(t)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new Ye(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!n.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Ye(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const h=new Jp(i,r,l,c,a);n._edges.set(r,h);const d=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,d&&(l.undirectedLoops++,n._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,d&&(l.directedLoops++,n._directedSelfLoopCount++)),n.multi?h.attachMulti():h.attach(),i?n._undirectedSize++:n._directedSize++,u.key=r,n.emit("edgeAdded",u),r}function sze(n,e,t,i,r,s,o,a,l){if(!i&&n.type==="undirected")throw new Ye(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new Ye(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new Me(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Ui(a))throw new Me(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!n.allowSelfLoops&&s===o)throw new Ye(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=n._nodes.get(s),h=n._nodes.get(o),d,f;if(!t&&(d=n._edges.get(r),d)){if((d.source.key!==s||d.target.key!==o)&&(!i||d.source.key!==o||d.target.key!==s))throw new Ye(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${d.source.key}", "${d.target.key}").`);f=d}if(!f&&!n.multi&&u&&(f=i?u.undirected[o]:u.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!c:!a)return y;if(l){const w=f.attributes;f.attributes=c(w),n.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Ri(f.attributes,a),n.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(t)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new Ye(`Graph.${e}: the "${r}" edge already exists in the graph.`);let p=!1,m=!1;u||(u=mq(n,s,{}),p=!0,s===o&&(h=u,m=!0)),h||(h=mq(n,o,{}),m=!0),d=new Jp(i,r,u,h,a),n._edges.set(r,d);const v=s===o;return i?(u.undirectedDegree++,h.undirectedDegree++,v&&(u.undirectedLoops++,n._undirectedSelfLoopCount++)):(u.outDegree++,h.inDegree++,v&&(u.directedLoops++,n._directedSelfLoopCount++)),n.multi?d.attachMulti():d.attach(),i?n._undirectedSize++:n._directedSize++,g.key=r,n.emit("edgeAdded",g),[r,!0,p,m]}function em(n,e){n._edges.delete(e.key);const{source:t,target:i,attributes:r}=e,s=e.undirected,o=t===i;s?(t.undirectedDegree--,i.undirectedDegree--,o&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,i.inDegree--,o&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),s?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:r,source:t.key,target:i.key,undirected:s})}class ln extends jL.EventEmitter{constructor(e){if(super(),e=Ri({},ize,e),typeof e.multi!="boolean")throw new Me(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!tze.has(e.type))throw new Me(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Me(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?lq:e.type==="directed"?cq:uq;go(this,"NodeDataClass",t);const i="geid_"+eze()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};go(this,"_attributes",{}),go(this,"_nodes",new Map),go(this,"_edges",new Map),go(this,"_directedSize",0),go(this,"_undirectedSize",0),go(this,"_directedSelfLoopCount",0),go(this,"_undirectedSelfLoopCount",0),go(this,"_edgeKeyGenerator",s),go(this,"_options",e),pq.forEach(o=>go(this,o,this[o])),oa(this,"order",()=>this._nodes.size),oa(this,"size",()=>this._edges.size),oa(this,"directedSize",()=>this._directedSize),oa(this,"undirectedSize",()=>this._undirectedSize),oa(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),oa(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),oa(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),oa(this,"multi",this._options.multi),oa(this,"type",this._options.type),oa(this,"allowSelfLoops",this._options.allowSelfLoops),oa(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(t):!1}throw new Me(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(t):!1}throw new Me(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(t)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(t):!1}throw new Me(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new Ye("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ve(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ve(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||void 0;if(r)return r.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new Ye("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ve(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ve(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const r=i.undirected&&i.undirected[t]||void 0;if(r)return r.key}edge(e,t){if(this.multi)throw new Ye("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new ve(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ve(`Graph.edge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||i.undirected&&i.undirected[t]||void 0;if(r)return r.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new ve(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in||t in i.out}areOutNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new ve(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.out}areInNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new ve(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new ve(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in i.undirected}areNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new ve(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in i.in||t in i.out)||this.type!=="directed"&&t in i.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new ve(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.in||this.type!=="directed"&&t in i.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new ve(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.out||this.type!=="directed"&&t in i.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree),i}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.outDegree),i}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree,r+=t.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.outDegree,r+=t.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree,r+=t.directedLoops*2),i-r}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ve(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ve(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ve(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const i=this._edges.get(t);if(!i)throw new ve(`Graph.opposite: could not find the "${t}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new ve(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${r}, ${s}).`)}hasExtremity(e,t){e=""+e,t=""+t;const i=this._edges.get(e);if(!i)throw new ve(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===t||i.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ve(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ve(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ve(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return rze(this,e,t).key}mergeNode(e,t){if(t&&!Ui(t))throw new Me(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let i=this._nodes.get(e);return i?(t&&(Ri(i.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:t})),[e,!1]):(i=new this.NodeDataClass(e,t),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new Me(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let i=this._nodes.get(e);if(i){if(t){const s=i.attributes;i.attributes=t(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=t?t({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ve(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in t.out){i=t.out[r];do em(this,i),i=i.next;while(i)}for(const r in t.in){i=t.in[r];do em(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in t.undirected){i=t.undirected[r];do em(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(t=fo(this,i,r,this.type),!t)throw new ve(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new ve(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return em(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new Ye("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ye("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const i=fo(this,e,t,"directed");if(!i)throw new ve(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return em(this,i),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new Ye("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ye("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=fo(this,e,t,"undirected");if(!i)throw new ve(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return em(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new Me("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=t(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Ui(e))throw new Me("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Ui(e))throw new Me("Graph.mergeAttributes: provided attributes are not a plain object.");return Ri(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Me("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new Me("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!aq(t))throw new Me("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new Me("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!aq(t))throw new Me("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Me("Graph.forEachAdjacencyEntry: expecting a callback.");hE(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Me("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");hE(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Me("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");hE(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Me("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");hE(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):sq(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new Me("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new Me("Graph.findNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new Me("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=t.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new Me("Graph.someNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Me("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Me("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let i,r;const s=[];for(;i=t.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,t){if(typeof e!="function")throw new Me("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Me("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=t;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new ho(()=>{const t=e.next();if(t.done)return t;const i=t.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((r,s)=>{e[t++]=X6e(s,r)});const i=new Array(this._edges.size);return t=0,this._edges.forEach((r,s)=>{i[t++]=Z6e(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,t=!1){if(e instanceof ln)return e.forEachNode((l,c)=>{t?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,h,d,f,g)=>{t?g?this.mergeUndirectedEdgeWithKey(l,u,h,c):this.mergeDirectedEdgeWithKey(l,u,h,c):g?this.addUndirectedEdgeWithKey(l,u,h,c):this.addDirectedEdgeWithKey(l,u,h,c)}),this;if(!Ui(e))throw new Me("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Ui(e.attributes))throw new Me("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new Me("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],Q6e(o);const{key:l,attributes:c}=o;t?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new Me("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],J6e(a);const{source:c,target:u,attributes:h,undirected:d=l}=a;let f;"key"in a?(f=t?d?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:d?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,c,u,h)):(f=t?d?this.mergeUndirectedEdge:this.mergeDirectedEdge:d?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,c,u,h))}}return this}nullCopy(e){const t=new ln(Ri({},this._options,e));return t.replaceAttributes(Ri({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Ri({},i.attributes);i=new t.NodeDataClass(r,s),t._nodes.set(r,i)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Ye(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Ye("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Ye("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,bq(t,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Ri({},s.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const t={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,h;s.undirected&&c>u&&(h=c,c=u,u=h);const d=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[d]>"u"?i[d]=0:i[d]++,l+=`${i[d]}. `):l+=`[${o}]: `,l+=d,t[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!pq.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=t,go(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(ln.prototype[Symbol.for("nodejs.util.inspect.custom")]=ln.prototype.inspect),nze.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),i=e==="add"?bq:sze;n.generateKey?ln.prototype[t]=function(r,s,o){return i(this,t,!0,(n.type||this.type)==="undirected",null,r,s,o,e==="update")}:ln.prototype[t]=function(r,s,o,a){return i(this,t,!1,(n.type||this.type)==="undirected",r,s,o,a,e==="update")}})}),g6e(ln),E6e(ln),V6e(ln),q6e(ln);class vq extends ln{constructor(e){const t=Ri({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new Me("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new Me('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class wq extends ln{constructor(e){const t=Ri({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new Me("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new Me('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class yq extends ln{constructor(e){const t=Ri({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Me("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class Cq extends ln{constructor(e){const t=Ri({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Me("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new Me('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Sq extends ln{constructor(e){const t=Ri({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Me("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new Me('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function tm(n){n.from=function(e,t){const i=Ri({},e.options,t),r=new n(i);return r.import(e),r}}tm(ln),tm(vq),tm(wq),tm(yq),tm(Cq),tm(Sq),ln.Graph=ln,ln.DirectedGraph=vq,ln.UndirectedGraph=wq,ln.MultiGraph=yq,ln.MultiDirectedGraph=Cq,ln.MultiUndirectedGraph=Sq,ln.InvalidArgumentsGraphError=Me,ln.NotFoundGraphError=ve,ln.UsageGraphError=Ye;function oze(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function vy(n){var e=oze(n,"string");return typeof e=="symbol"?e:e+""}function gr(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _q(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,vy(i.key),i)}}function pr(n,e,t){return e&&_q(n.prototype,e),t&&_q(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function nm(n){return nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nm(n)}function Rq(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rq=function(){return!!n})()}function me(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function aze(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return me(n)}function po(n,e,t){return e=nm(e),aze(n,Rq()?Reflect.construct(e,t||[],nm(n).constructor):e.apply(n,t))}function QL(n,e){return QL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},QL(n,e)}function mo(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&QL(n,e)}function lze(n){if(Array.isArray(n))return n}function cze(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function JL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function Eq(n,e){if(n){if(typeof n=="string")return JL(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?JL(n,e):void 0}}function uze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dE(n,e){return lze(n)||cze(n,e)||Eq(n,e)||uze()}var eH={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},xq=new Int8Array(4),tH=new Int32Array(xq.buffer,0,1),hze=new Float32Array(xq.buffer,0,1),dze=/^\s*rgba?\s*\(/,fze=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function gze(n){var e=0,t=0,i=0,r=1;if(n[0]==="#")n.length===4?(e=parseInt(n.charAt(1)+n.charAt(1),16),t=parseInt(n.charAt(2)+n.charAt(2),16),i=parseInt(n.charAt(3)+n.charAt(3),16)):(e=parseInt(n.charAt(1)+n.charAt(2),16),t=parseInt(n.charAt(3)+n.charAt(4),16),i=parseInt(n.charAt(5)+n.charAt(6),16)),n.length===9&&(r=parseInt(n.charAt(7)+n.charAt(8),16)/255);else if(dze.test(n)){var s=n.match(fze);s&&(e=+s[1],t=+s[2],i=+s[3],s[4]&&(r=+s[4]))}return{r:e,g:t,b:i,a:r}}var im={};for(var fE in eH)im[fE]=rm(eH[fE]),im[eH[fE]]=im[fE];function Tq(n,e,t,i,r){return tH[0]=i<<24|t<<16|e<<8|n,tH[0]=tH[0]&4278190079,hze[0]}function rm(n){if(n=n.toLowerCase(),typeof im[n]<"u")return im[n];var e=gze(n),t=e.r,i=e.g,r=e.b,s=e.a;s=s*255|0;var o=Tq(t,i,r,s);return im[n]=o,o}var nH={};function Mq(n){if(typeof nH[n]<"u")return nH[n];var e=(n&16711680)>>>16,t=(n&65280)>>>8,i=n&255,r=255,s=Tq(e,t,i,r);return nH[n]=s,s}function Aq(n,e,t,i){return t+(e<<8)+(n<<16)}function Pq(n,e,t,i,r,s){var o=Math.floor(t/s*r),a=Math.floor(n.drawingBufferHeight/s-i/s*r),l=new Uint8Array(4);n.bindFramebuffer(n.FRAMEBUFFER,e),n.readPixels(o,a,1,1,n.RGBA,n.UNSIGNED_BYTE,l);var c=dE(l,4),u=c[0],h=c[1],d=c[2],f=c[3];return[u,h,d,f]}function de(n,e,t){return(e=vy(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Iq(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function We(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Iq(Object(t),!0).forEach(function(i){de(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Iq(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function pze(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=nm(n))!==null;);return n}function iH(){return iH=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,t){var i=pze(n,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?n:t):r.value}},iH.apply(null,arguments)}function Oq(n,e,t,i){var r=iH(nm(n.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function mze(n){return n.normalized?1:n.size}function rH(n){var e=0;return n.forEach(function(t){return e+=mze(t)}),e}function kq(n,e,t){var i=n==="VERTEX"?e.VERTEX_SHADER:e.FRAGMENT_SHADER,r=e.createShader(i);if(r===null)throw new Error("loadShader: error while creating the shader");e.shaderSource(r,t),e.compileShader(r);var s=e.getShaderParameter(r,e.COMPILE_STATUS);if(!s){var o=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error(`loadShader: error while compiling the shader:
`.concat(o,`
`).concat(t))}return r}function bze(n,e){return kq("VERTEX",n,e)}function vze(n,e){return kq("FRAGMENT",n,e)}function wze(n,e){var t=n.createProgram();if(t===null)throw new Error("loadProgram: error while creating the program.");var i,r;for(i=0,r=e.length;i<r;i++)n.attachShader(t,e[i]);n.linkProgram(t);var s=n.getProgramParameter(t,n.LINK_STATUS);if(!s)throw n.deleteProgram(t),new Error("loadProgram: error while linking the program.");return t}function Dq(n){var e=n.gl,t=n.buffer,i=n.program,r=n.vertexShader,s=n.fragmentShader;e.deleteShader(r),e.deleteShader(s),e.deleteProgram(i),e.deleteBuffer(t)}var Nq=`#define PICKING_MODE
`,yze=de(de(de(de(de(de(de(de({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),Lq=function(){function n(e,t,i){gr(this,n),de(this,"array",new Float32Array),de(this,"constantArray",new Float32Array),de(this,"capacity",0),de(this,"verticesCount",0);var r=this.getDefinition();if(this.VERTICES=r.VERTICES,this.VERTEX_SHADER_SOURCE=r.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=r.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=r.UNIFORMS,this.ATTRIBUTES=r.ATTRIBUTES,this.METHOD=r.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in r?r.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in r?r.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in r,this.ATTRIBUTES_ITEMS_COUNT=rH(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=i,this.normalProgram=this.getProgramInfo("normal",e,r.VERTEX_SHADER_SOURCE,r.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=t?this.getProgramInfo("pick",e,Nq+r.VERTEX_SHADER_SOURCE,Nq+r.FRAGMENT_SHADER_SOURCE,t):null,this.isInstanced){var s=rH(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*s);for(var o=0;o<this.CONSTANT_DATA.length;o++){var a=this.CONSTANT_DATA[o];if(a.length!==s)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(s,")"));for(var l=0;l<a.length;l++)this.constantArray[o*s+l]=a[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return pr(n,[{key:"kill",value:function(){Dq(this.normalProgram),this.pickProgram&&(Dq(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(t,i,r,s,o){var a=this.getDefinition(),l=i.createBuffer();if(l===null)throw new Error("Program: error while creating the WebGL buffer.");var c=bze(i,r),u=vze(i,s),h=wze(i,[c,u]),d={};a.UNIFORMS.forEach(function(p){var m=i.getUniformLocation(h,p);m&&(d[p]=m)});var f={};a.ATTRIBUTES.forEach(function(p){f[p.name]=i.getAttribLocation(h,p.name)});var g;if("CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(p){f[p.name]=i.getAttribLocation(h,p.name)}),g=i.createBuffer(),g===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:t,program:h,gl:i,frameBuffer:o,buffer:l,constantBuffer:g||{},uniformLocations:d,attributeLocations:f,isPicking:t==="pick",vertexShader:c,fragmentShader:u}}},{key:"bindProgram",value:function(t){var i=this,r=0,s=t.gl,o=t.buffer;this.isInstanced?(s.bindBuffer(s.ARRAY_BUFFER,t.constantBuffer),r=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,t,r,!1)}),s.bufferData(s.ARRAY_BUFFER,this.constantArray,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,t.buffer),r=0,this.ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,t,r,!0)}),s.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW)):(s.bindBuffer(s.ARRAY_BUFFER,o),r=0,this.ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,t,r)}),s.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW)),s.bindBuffer(s.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(t){var i=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,t,!1)}),this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,t,!0)})):this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,t)})}},{key:"bindAttribute",value:function(t,i,r,s){var o=yze[t.type];if(typeof o!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(t.type,'"'));var a=i.attributeLocations[t.name],l=i.gl;if(a!==-1){l.enableVertexAttribArray(a);var c=this.isInstanced?(s?this.ATTRIBUTES_ITEMS_COUNT:rH(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(l.vertexAttribPointer(a,t.size,t.type,t.normalized||!1,c,r),this.isInstanced&&s)if(l instanceof WebGL2RenderingContext)l.vertexAttribDivisor(a,1);else{var u=l.getExtension("ANGLE_instanced_arrays");u&&u.vertexAttribDivisorANGLE(a,1)}}return t.size*o}},{key:"unbindAttribute",value:function(t,i,r){var s=i.attributeLocations[t.name],o=i.gl;if(s!==-1&&(o.disableVertexAttribArray(s),this.isInstanced&&r))if(o instanceof WebGL2RenderingContext)o.vertexAttribDivisor(s,0);else{var a=o.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(s,0)}}},{key:"reallocate",value:function(t){t!==this.capacity&&(this.capacity=t,this.verticesCount=this.VERTICES*t,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(t,i){var r=i.gl,s=i.program;r.enable(r.BLEND),r.useProgram(s),this.setUniforms(t,i),this.drawWebGL(this.METHOD,i)}},{key:"render",value:function(t){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,t.width*t.pixelRatio/t.downSizingRatio,t.height*t.pixelRatio/t.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(We(We({},t),{},{pixelRatio:t.pixelRatio/t.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,t.width*t.pixelRatio,t.height*t.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(t,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(t,i){var r=i.gl,s=i.frameBuffer;if(r.bindFramebuffer(r.FRAMEBUFFER,s),!this.isInstanced)r.drawArrays(t,0,this.verticesCount);else if(r instanceof WebGL2RenderingContext)r.drawArraysInstanced(t,0,this.VERTICES,this.capacity);else{var o=r.getExtension("ANGLE_instanced_arrays");o&&o.drawArraysInstancedANGLE(t,0,this.VERTICES,this.capacity)}}}]),n}(),Hq=function(n){mo(e,n);function e(){return gr(this,e),po(this,e,arguments)}return pr(e,[{key:"kill",value:function(){Oq(e,"kill",this)([])}},{key:"process",value:function(i,r,s){var o=r*this.STRIDE;if(s.hidden){for(var a=o+this.STRIDE;o<a;o++)this.array[o]=0;return}return this.processVisibleItem(Mq(i),o,s)}}]),e}(Lq),sH=function(n){mo(e,n);function e(){var t;gr(this,e);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=po(this,e,[].concat(r)),de(me(t),"drawLabel",void 0),t}return pr(e,[{key:"kill",value:function(){Oq(e,"kill",this)([])}},{key:"process",value:function(i,r,s,o,a){var l=r*this.STRIDE;if(a.hidden||s.hidden||o.hidden){for(var c=l+this.STRIDE;l<c;l++)this.array[l]=0;return}return this.processVisibleItem(Mq(i),l,s,o,a)}}]),e}(Lq);function Cze(n,e){return function(){function t(i,r,s){gr(this,t),de(this,"drawLabel",e),this.programs=n.map(function(o){return new o(i,r,s)})}return pr(t,[{key:"reallocate",value:function(r){this.programs.forEach(function(s){return s.reallocate(r)})}},{key:"process",value:function(r,s,o,a,l){this.programs.forEach(function(c){return c.process(r,s,o,a,l)})}},{key:"render",value:function(r){this.programs.forEach(function(s){return s.render(r)})}},{key:"kill",value:function(){this.programs.forEach(function(r){return r.kill()})}}]),t}()}function Sze(n,e,t,i,r){var s=r.edgeLabelSize,o=r.edgeLabelFont,a=r.edgeLabelWeight,l=r.edgeLabelColor.attribute?e[r.edgeLabelColor.attribute]||r.edgeLabelColor.color||"#000":r.edgeLabelColor.color,c=e.label;if(c){n.fillStyle=l,n.font="".concat(a," ").concat(s,"px ").concat(o);var u=t.size,h=i.size,d=t.x,f=t.y,g=i.x,p=i.y,m=(d+g)/2,v=(f+p)/2,y=g-d,w=p-f,_=Math.sqrt(y*y+w*w);if(!(_<u+h)){d+=y*u/_,f+=w*u/_,g-=y*h/_,p-=w*h/_,m=(d+g)/2,v=(f+p)/2,y=g-d,w=p-f,_=Math.sqrt(y*y+w*w);var R=n.measureText(c).width;if(R>_){var E="…";for(c=c+E,R=n.measureText(c).width;R>_&&c.length>1;)c=c.slice(0,-2)+E,R=n.measureText(c).width;if(c.length<4)return}var x;y>0?w>0?x=Math.acos(y/_):x=Math.asin(w/_):w>0?x=Math.acos(y/_)+Math.PI:x=Math.asin(y/_)+Math.PI/2,n.save(),n.translate(m,v),n.rotate(x),n.fillText(c,-R/2,e.size/2+s),n.restore()}}}function $q(n,e,t){if(e.label){var i=t.labelSize,r=t.labelFont,s=t.labelWeight,o=t.labelColor.attribute?e[t.labelColor.attribute]||t.labelColor.color||"#000":t.labelColor.color;n.fillStyle=o,n.font="".concat(s," ").concat(i,"px ").concat(r),n.fillText(e.label,e.x+e.size+3,e.y+i/3)}}function _ze(n,e,t){var i=t.labelSize,r=t.labelFont,s=t.labelWeight;n.font="".concat(s," ").concat(i,"px ").concat(r),n.fillStyle="#FFF",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=8,n.shadowColor="#000";var o=2;if(typeof e.label=="string"){var a=n.measureText(e.label).width,l=Math.round(a+5),c=Math.round(i+2*o),u=Math.max(e.size,i/2)+o,h=Math.asin(c/2/u),d=Math.sqrt(Math.abs(Math.pow(u,2)-Math.pow(c/2,2)));n.beginPath(),n.moveTo(e.x+d,e.y+c/2),n.lineTo(e.x+u+l,e.y+c/2),n.lineTo(e.x+u+l,e.y-c/2),n.lineTo(e.x+d,e.y-c/2),n.arc(e.x,e.y,u,h,-h),n.closePath(),n.fill()}else n.beginPath(),n.arc(e.x,e.y,e.size+o,0,Math.PI*2),n.closePath(),n.fill();n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,$q(n,e,t)}var Rze=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,Eze=Rze,xze=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Tze=xze,Fq=WebGLRenderingContext,Bq=Fq.UNSIGNED_BYTE,oH=Fq.FLOAT,Mze=["u_sizeRatio","u_correctionRatio","u_matrix"],gE=function(n){mo(e,n);function e(){return gr(this,e),po(this,e,arguments)}return pr(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Tze,FRAGMENT_SHADER_SOURCE:Eze,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Mze,ATTRIBUTES:[{name:"a_position",size:2,type:oH},{name:"a_size",size:1,type:oH},{name:"a_color",size:4,type:Bq,normalized:!0},{name:"a_id",size:4,type:Bq,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:oH}],CONSTANT_DATA:[[e.ANGLE_1],[e.ANGLE_2],[e.ANGLE_3]]}}},{key:"processVisibleItem",value:function(i,r,s){var o=this.array,a=rm(s.color);o[r++]=s.x,o[r++]=s.y,o[r++]=s.size,o[r++]=a,o[r++]=i}},{key:"setUniforms",value:function(i,r){var s=r.gl,o=r.uniformLocations,a=o.u_sizeRatio,l=o.u_correctionRatio,c=o.u_matrix;s.uniform1f(l,i.correctionRatio),s.uniform1f(a,i.sizeRatio),s.uniformMatrix3fv(c,!1,i.matrix)}}]),e}(Hq);de(gE,"ANGLE_1",0),de(gE,"ANGLE_2",2*Math.PI/3),de(gE,"ANGLE_3",4*Math.PI/3);var Aze=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,Pze=Aze,Ize=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Oze=Ize,Vq=WebGLRenderingContext,Wq=Vq.UNSIGNED_BYTE,pE=Vq.FLOAT,kze=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],jq={lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function zq(n){var e=We(We({},jq),{});return function(t){mo(i,t);function i(){return gr(this,i),po(this,i,arguments)}return pr(i,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Oze,FRAGMENT_SHADER_SOURCE:Pze,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:kze,ATTRIBUTES:[{name:"a_position",size:2,type:pE},{name:"a_normal",size:2,type:pE},{name:"a_radius",size:1,type:pE},{name:"a_color",size:4,type:Wq,normalized:!0},{name:"a_id",size:4,type:Wq,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:pE}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(s,o,a,l,c){var u=c.size||1,h=l.size||1,d=a.x,f=a.y,g=l.x,p=l.y,m=rm(c.color),v=g-d,y=p-f,w=v*v+y*y,_=0,R=0;w&&(w=1/Math.sqrt(w),_=-y*w*u,R=v*w*u);var E=this.array;E[o++]=g,E[o++]=p,E[o++]=-_,E[o++]=-R,E[o++]=h,E[o++]=m,E[o++]=s}},{key:"setUniforms",value:function(s,o){var a=o.gl,l=o.uniformLocations,c=l.u_matrix,u=l.u_sizeRatio,h=l.u_correctionRatio,d=l.u_minEdgeThickness,f=l.u_lengthToThicknessRatio,g=l.u_widenessToThicknessRatio;a.uniformMatrix3fv(c,!1,s.matrix),a.uniform1f(u,s.sizeRatio),a.uniform1f(h,s.correctionRatio),a.uniform1f(d,s.minEdgeThickness),a.uniform1f(f,e.lengthToThicknessRatio),a.uniform1f(g,e.widenessToThicknessRatio)}}]),i}(sH)}zq();var Dze=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,Uq=Dze,Nze=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Lze=Nze,Gq=WebGLRenderingContext,Yq=Gq.UNSIGNED_BYTE,Tf=Gq.FLOAT,Hze=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],$ze={lengthToThicknessRatio:jq.lengthToThicknessRatio};function Kq(n){var e=We(We({},$ze),{});return function(t){mo(i,t);function i(){return gr(this,i),po(this,i,arguments)}return pr(i,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:Lze,FRAGMENT_SHADER_SOURCE:Uq,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Hze,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Tf},{name:"a_positionEnd",size:2,type:Tf},{name:"a_normal",size:2,type:Tf},{name:"a_color",size:4,type:Yq,normalized:!0},{name:"a_id",size:4,type:Yq,normalized:!0},{name:"a_radius",size:1,type:Tf}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Tf},{name:"a_normalCoef",size:1,type:Tf},{name:"a_radiusCoef",size:1,type:Tf}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(s,o,a,l,c){var u=c.size||1,h=a.x,d=a.y,f=l.x,g=l.y,p=rm(c.color),m=f-h,v=g-d,y=l.size||1,w=m*m+v*v,_=0,R=0;w&&(w=1/Math.sqrt(w),_=-v*w*u,R=m*w*u);var E=this.array;E[o++]=h,E[o++]=d,E[o++]=f,E[o++]=g,E[o++]=_,E[o++]=R,E[o++]=p,E[o++]=s,E[o++]=y}},{key:"setUniforms",value:function(s,o){var a=o.gl,l=o.uniformLocations,c=l.u_matrix,u=l.u_zoomRatio,h=l.u_feather,d=l.u_pixelRatio,f=l.u_correctionRatio,g=l.u_sizeRatio,p=l.u_minEdgeThickness,m=l.u_lengthToThicknessRatio;a.uniformMatrix3fv(c,!1,s.matrix),a.uniform1f(u,s.zoomRatio),a.uniform1f(g,s.sizeRatio),a.uniform1f(f,s.correctionRatio),a.uniform1f(d,s.pixelRatio),a.uniform1f(h,s.antiAliasingFeather),a.uniform1f(p,s.minEdgeThickness),a.uniform1f(m,e.lengthToThicknessRatio)}}]),i}(sH)}Kq();function Fze(n){return Cze([Kq(),zq()])}var Bze=Fze(),Vze=Bze,Wze=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,jze=Wze,qq=WebGLRenderingContext,Xq=qq.UNSIGNED_BYTE,wy=qq.FLOAT,zze=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],Uze=function(n){mo(e,n);function e(){return gr(this,e),po(this,e,arguments)}return pr(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:jze,FRAGMENT_SHADER_SOURCE:Uq,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:zze,ATTRIBUTES:[{name:"a_positionStart",size:2,type:wy},{name:"a_positionEnd",size:2,type:wy},{name:"a_normal",size:2,type:wy},{name:"a_color",size:4,type:Xq,normalized:!0},{name:"a_id",size:4,type:Xq,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:wy},{name:"a_normalCoef",size:1,type:wy}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(i,r,s,o,a){var l=a.size||1,c=s.x,u=s.y,h=o.x,d=o.y,f=rm(a.color),g=h-c,p=d-u,m=g*g+p*p,v=0,y=0;m&&(m=1/Math.sqrt(m),v=-p*m*l,y=g*m*l);var w=this.array;w[r++]=c,w[r++]=u,w[r++]=h,w[r++]=d,w[r++]=v,w[r++]=y,w[r++]=f,w[r++]=i}},{key:"setUniforms",value:function(i,r){var s=r.gl,o=r.uniformLocations,a=o.u_matrix,l=o.u_zoomRatio,c=o.u_feather,u=o.u_pixelRatio,h=o.u_correctionRatio,d=o.u_sizeRatio,f=o.u_minEdgeThickness;s.uniformMatrix3fv(a,!1,i.matrix),s.uniform1f(l,i.zoomRatio),s.uniform1f(d,i.sizeRatio),s.uniform1f(h,i.correctionRatio),s.uniform1f(u,i.pixelRatio),s.uniform1f(c,i.antiAliasingFeather),s.uniform1f(f,i.minEdgeThickness)}}]),e}(sH),aH=function(n){mo(e,n);function e(){var t;return gr(this,e),t=po(this,e),t.rawEmitter=me(t),t}return pr(e)}(jL.EventEmitter),Zq=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"};const Gze=vg(Zq);var Yze=function(e){return e},Kze=function(e){return e*e},qze=function(e){return e*(2-e)},Xze=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},Zze=function(e){return e*e*e},Qze=function(e){return--e*e*e+1},Jze=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},e5e={linear:Yze,quadraticIn:Kze,quadraticOut:qze,quadraticInOut:Xze,cubicIn:Zze,cubicOut:Qze,cubicInOut:Jze},t5e={easing:"quadraticInOut",duration:150};function aa(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function mE(n,e,t){return n[0]=e,n[4]=typeof t=="number"?t:e,n}function Qq(n,e){var t=Math.sin(e),i=Math.cos(e);return n[0]=i,n[1]=t,n[3]=-t,n[4]=i,n}function Jq(n,e,t){return n[6]=e,n[7]=t,n}function lh(n,e){var t=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],l=n[6],c=n[7],u=n[8],h=e[0],d=e[1],f=e[2],g=e[3],p=e[4],m=e[5],v=e[6],y=e[7],w=e[8];return n[0]=h*t+d*s+f*l,n[1]=h*i+d*o+f*c,n[2]=h*r+d*a+f*u,n[3]=g*t+p*s+m*l,n[4]=g*i+p*o+m*c,n[5]=g*r+p*a+m*u,n[6]=v*t+y*s+w*l,n[7]=v*i+y*o+w*c,n[8]=v*r+y*a+w*u,n}function lH(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=n[0],r=n[1],s=n[3],o=n[4],a=n[6],l=n[7],c=e.x,u=e.y;return{x:c*i+u*s+a*t,y:c*r+u*o+l*t}}function n5e(n,e){var t=n.height/n.width,i=e.height/e.width;return t<1&&i>1||t>1&&i<1?1:Math.min(Math.max(i,1/i),Math.max(1/t,t))}function yy(n,e,t,i,r){var s=n.angle,o=n.ratio,a=n.x,l=n.y,c=e.width,u=e.height,h=aa(),d=Math.min(c,u)-2*i,f=n5e(e,t);return r?(lh(h,Jq(aa(),a,l)),lh(h,mE(aa(),o)),lh(h,Qq(aa(),s)),lh(h,mE(aa(),c/d/2/f,u/d/2/f))):(lh(h,mE(aa(),2*(d/c)*f,2*(d/u)*f)),lh(h,Qq(aa(),-s)),lh(h,mE(aa(),1/o)),lh(h,Jq(aa(),-a,-l))),h}function i5e(n,e,t){var i=lH(n,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),r=i.x,s=i.y;return 1/Math.sqrt(Math.pow(r,2)+Math.pow(s,2))/t.width}function r5e(n){if(!n.order)return{x:[0,1],y:[0,1]};var e=1/0,t=-1/0,i=1/0,r=-1/0;return n.forEachNode(function(s,o){var a=o.x,l=o.y;a<e&&(e=a),a>t&&(t=a),l<i&&(i=l),l>r&&(r=l)}),{x:[e,t],y:[i,r]}}function s5e(n){if(!Gze(n))throw new Error("Sigma: invalid graph instance.");n.forEachNode(function(e,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function o5e(n,e,t){var i=document.createElement(n);if(e)for(var r in e)i.style[r]=e[r];if(t)for(var s in t)i.setAttribute(s,t[s]);return i}function eX(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function tX(n,e,t){return t.sort(function(i,r){var s=e(i)||0,o=e(r)||0;return s<o?-1:s>o?1:0})}function nX(n){var e=dE(n.x,2),t=e[0],i=e[1],r=dE(n.y,2),s=r[0],o=r[1],a=Math.max(i-t,o-s),l=(i+t)/2,c=(o+s)/2;(a===0||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(l)&&(l=0),isNaN(c)&&(c=0);var u=function(d){return{x:.5+(d.x-l)/a,y:.5+(d.y-c)/a}};return u.applyTo=function(h){h.x=.5+(h.x-l)/a,h.y=.5+(h.y-c)/a},u.inverse=function(h){return{x:l+a*(h.x-.5),y:c+a*(h.y-.5)}},u.ratio=a,u}function iX(n,e){var t=e.size;if(t!==0){var i=n.length;n.length+=t;var r=0;e.forEach(function(s){n[i+r]=s,r++})}}function cH(n){n=n||{};for(var e=0,t=arguments.length<=1?0:arguments.length-1;e<t;e++){var i=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];i&&Object.assign(n,i)}return n}var uH={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:Sze,defaultDrawNodeLabel:$q,defaultDrawNodeHover:_ze,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraRotation:!0,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},a5e={circle:gE},l5e={arrow:Vze,line:Uze};function rX(n){if(typeof n.labelDensity!="number"||n.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var e=n.minCameraRatio,t=n.maxCameraRatio;if(typeof e=="number"&&typeof t=="number"&&t<e)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function c5e(n){var e=cH({},uH,n);return e.nodeProgramClasses=cH({},a5e,e.nodeProgramClasses),e.edgeProgramClasses=cH({},l5e,e.edgeProgramClasses),e}var bE=1.5,sX=function(n){mo(e,n);function e(){var t;return gr(this,e),t=po(this,e),de(me(t),"x",.5),de(me(t),"y",.5),de(me(t),"angle",0),de(me(t),"ratio",1),de(me(t),"minRatio",null),de(me(t),"maxRatio",null),de(me(t),"enabledRotation",!0),de(me(t),"nextFrame",null),de(me(t),"previousState",null),de(me(t),"enabled",!0),t.previousState=t.getState(),t}return pr(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(i){return this.x===i.x&&this.y===i.y&&this.ratio===i.ratio&&this.angle===i.angle}},{key:"getPreviousState",value:function(){var i=this.previousState;return i?{x:i.x,y:i.y,angle:i.angle,ratio:i.ratio}:null}},{key:"getBoundedRatio",value:function(i){var r=i;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r}},{key:"validateState",value:function(i){var r={};return typeof i.x=="number"&&(r.x=i.x),typeof i.y=="number"&&(r.y=i.y),this.enabledRotation&&typeof i.angle=="number"&&(r.angle=i.angle),typeof i.ratio=="number"&&(r.ratio=this.getBoundedRatio(i.ratio)),r}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(i){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(i);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),this.enabledRotation&&typeof r.angle=="number"&&(this.angle=r.angle),typeof r.ratio=="number"&&(this.ratio=r.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(i){return this.setState(i(this.getState())),this}},{key:"animate",value:function(i){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(!o)return new Promise(function(f){return r.animate(i,s,f)});if(this.enabled){var a=We(We({},t5e),s),l=this.validateState(i),c=typeof a.easing=="function"?a.easing:e5e[a.easing],u=Date.now(),h=this.getState(),d=function f(){var g=(Date.now()-u)/a.duration;if(g>=1){r.nextFrame=null,r.setState(l),r.animationCallback&&(r.animationCallback.call(null),r.animationCallback=void 0);return}var p=c(g),m={};typeof l.x=="number"&&(m.x=h.x+(l.x-h.x)*p),typeof l.y=="number"&&(m.y=h.y+(l.y-h.y)*p),r.enabledRotation&&typeof l.angle=="number"&&(m.angle=h.angle+(l.angle-h.angle)*p),typeof l.ratio=="number"&&(m.ratio=h.ratio+(l.ratio-h.ratio)*p),r.setState(m),r.nextFrame=requestAnimationFrame(f)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(d)):d(),this.animationCallback=o}}},{key:"animatedZoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio/i}):this.animate({ratio:this.ratio/(i.factor||bE)},i):this.animate({ratio:this.ratio/bE})}},{key:"animatedUnzoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio*i}):this.animate({ratio:this.ratio*(i.factor||bE)},i):this.animate({ratio:this.ratio*bE})}},{key:"animatedReset",value:function(i){return this.animate({x:.5,y:.5,ratio:1,angle:0},i)}},{key:"copy",value:function(){return e.from(this.getState())}}],[{key:"from",value:function(i){var r=new e;return r.setState(i)}}]),e}(aH);function la(n,e){var t=e.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}function Bc(n,e){var t=We(We({},la(n,e)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0},original:n});return t}function Cy(n){var e="x"in n?n:We(We({},n.touches[0]||n.previousTouches[0]),{},{original:n.original,sigmaDefaultPrevented:n.sigmaDefaultPrevented,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0,e.sigmaDefaultPrevented=!0}});return e}function u5e(n,e){return We(We({},Bc(n,e)),{},{delta:oX(n)})}var h5e=2;function vE(n){for(var e=[],t=0,i=Math.min(n.length,h5e);t<i;t++)e.push(n[t]);return e}function Sy(n,e,t){var i={touches:vE(n.touches).map(function(r){return la(r,t)}),previousTouches:e.map(function(r){return la(r,t)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){i.sigmaDefaultPrevented=!0},original:n};return i}function oX(n){if(typeof n.deltaY<"u")return n.deltaY*-3/360;if(typeof n.detail<"u")return n.detail/-9;throw new Error("Captor: could not extract delta from event.")}var aX=function(n){mo(e,n);function e(t,i){var r;return gr(this,e),r=po(this,e),r.container=t,r.renderer=i,r}return pr(e)}(aH),d5e=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],f5e=d5e.reduce(function(n,e){return We(We({},n),{},de({},e,uH[e]))},{}),g5e=function(n){mo(e,n);function e(t,i){var r;return gr(this,e),r=po(this,e,[t,i]),de(me(r),"enabled",!0),de(me(r),"draggedEvents",0),de(me(r),"downStartTime",null),de(me(r),"lastMouseX",null),de(me(r),"lastMouseY",null),de(me(r),"isMouseDown",!1),de(me(r),"isMoving",!1),de(me(r),"movingTimeout",null),de(me(r),"startCameraState",null),de(me(r),"clicks",0),de(me(r),"doubleClickTimeout",null),de(me(r),"currentWheelDirection",0),de(me(r),"settings",f5e),r.handleClick=r.handleClick.bind(me(r)),r.handleRightClick=r.handleRightClick.bind(me(r)),r.handleDown=r.handleDown.bind(me(r)),r.handleUp=r.handleUp.bind(me(r)),r.handleMove=r.handleMove.bind(me(r)),r.handleWheel=r.handleWheel.bind(me(r)),r.handleLeave=r.handleLeave.bind(me(r)),r.handleEnter=r.handleEnter.bind(me(r)),t.addEventListener("click",r.handleClick,{capture:!1}),t.addEventListener("contextmenu",r.handleRightClick,{capture:!1}),t.addEventListener("mousedown",r.handleDown,{capture:!1}),t.addEventListener("wheel",r.handleWheel,{capture:!1}),t.addEventListener("mouseleave",r.handleLeave,{capture:!1}),t.addEventListener("mouseenter",r.handleEnter,{capture:!1}),document.addEventListener("mousemove",r.handleMove,{capture:!1}),document.addEventListener("mouseup",r.handleUp,{capture:!1}),r}return pr(e,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("click",this.handleClick),i.removeEventListener("contextmenu",this.handleRightClick),i.removeEventListener("mousedown",this.handleDown),i.removeEventListener("wheel",this.handleWheel),i.removeEventListener("mouseleave",this.handleLeave),i.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(i){var r=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(i);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Bc(i,this.container))}}},{key:"handleRightClick",value:function(i){this.enabled&&this.emit("rightClick",Bc(i,this.container))}},{key:"handleDoubleClick",value:function(i){if(this.enabled){i.preventDefault(),i.stopPropagation();var r=Bc(i,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var s=this.renderer.getCamera(),o=s.getBoundedRatio(s.getState().ratio/this.settings.doubleClickZoomingRatio);s.animate(this.renderer.getViewportZoomedState(la(i,this.container),o),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(i){if(this.enabled){if(i.button===0){this.startCameraState=this.renderer.getCamera().getState();var r=la(i,this.container),s=r.x,o=r.y;this.lastMouseX=s,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Bc(i,this.container))}}},{key:"handleUp",value:function(i){var r=this;if(!(!this.enabled||!this.isMouseDown)){var s=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=la(i,this.container),a=o.x,l=o.y,c=s.getState(),u=s.getPreviousState()||{x:0,y:0};this.isMoving?s.animate({x:c.x+this.settings.inertiaRatio*(c.x-u.x),y:c.y+this.settings.inertiaRatio*(c.y-u.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==l)&&s.setState({x:c.x,y:c.y}),this.isMoving=!1,setTimeout(function(){var h=r.draggedEvents>0;r.draggedEvents=0,h&&r.renderer.refresh()},0),this.emit("mouseup",Bc(i,this.container))}}},{key:"handleMove",value:function(i){var r=this;if(this.enabled){var s=Bc(i,this.container);if(this.emit("mousemovebody",s),(i.target===this.container||i.composedPath()[0]===this.container)&&this.emit("mousemove",s),!s.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},this.settings.dragTimeout);var o=this.renderer.getCamera(),a=la(i,this.container),l=a.x,c=a.y,u=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),h=this.renderer.viewportToFramedGraph({x:l,y:c}),d=u.x-h.x,f=u.y-h.y,g=o.getState(),p=g.x+d,m=g.y+f;o.setState({x:p,y:m}),this.lastMouseX=l,this.lastMouseY=c,i.preventDefault(),i.stopPropagation()}}}},{key:"handleLeave",value:function(i){this.emit("mouseleave",Bc(i,this.container))}},{key:"handleEnter",value:function(i){this.emit("mouseenter",Bc(i,this.container))}},{key:"handleWheel",value:function(i){var r=this;if(this.enabled){i.preventDefault(),i.stopPropagation();var s=oX(i);if(s){var o=u5e(i,this.container);if(this.emit("wheel",o),!o.sigmaDefaultPrevented){var a=s>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,l=this.renderer.getCamera(),c=l.getBoundedRatio(l.getState().ratio*a),u=s>0?1:-1,h=Date.now();this.currentWheelDirection===u&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<this.settings.zoomDuration/5||(l.animate(this.renderer.getViewportZoomedState(la(i,this.container),c),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){r.currentWheelDirection=0}),this.currentWheelDirection=u,this.lastWheelTriggerTime=h)}}}}},{key:"setSettings",value:function(i){this.settings=i}}]),e}(aX),p5e=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],m5e=p5e.reduce(function(n,e){return We(We({},n),{},de({},e,uH[e]))},{}),b5e=function(n){mo(e,n);function e(t,i){var r;return gr(this,e),r=po(this,e,[t,i]),de(me(r),"enabled",!0),de(me(r),"isMoving",!1),de(me(r),"hasMoved",!1),de(me(r),"touchMode",0),de(me(r),"startTouchesPositions",[]),de(me(r),"lastTouches",[]),de(me(r),"lastTap",null),de(me(r),"settings",m5e),r.handleStart=r.handleStart.bind(me(r)),r.handleLeave=r.handleLeave.bind(me(r)),r.handleMove=r.handleMove.bind(me(r)),t.addEventListener("touchstart",r.handleStart,{capture:!1}),t.addEventListener("touchcancel",r.handleLeave,{capture:!1}),document.addEventListener("touchend",r.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",r.handleMove,{capture:!1,passive:!1}),r}return pr(e,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("touchstart",this.handleStart),i.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(i){var r=this;if(this.enabled){i.preventDefault();var s=vE(i.touches);if(this.touchMode=s.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=s.map(function(f){return la(f,r.container)}),this.touchMode===2){var o=dE(this.startTouchesPositions,2),a=o[0],l=a.x,c=a.y,u=o[1],h=u.x,d=u.y;this.startTouchesAngle=Math.atan2(d-c,h-l),this.startTouchesDistance=Math.sqrt(Math.pow(h-l,2)+Math.pow(d-c,2))}this.emit("touchdown",Sy(i,this.lastTouches,this.container)),this.lastTouches=s,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(i){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(i.cancelable&&i.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(i.touches.length===1){this.handleStart(i),i.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),s=r.getState(),o=r.getPreviousState()||{x:0,y:0};r.animate({x:s.x+this.settings.inertiaRatio*(s.x-o.x),y:s.y+this.settings.inertiaRatio*(s.y-o.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Sy(i,this.lastTouches,this.container)),!i.touches.length){var a=la(this.lastTouches[0],this.container),l=this.startTouchesPositions[0],c=Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2);if(!i.touches.length&&c<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var u=Sy(i,this.lastTouches,this.container);if(this.emit("doubletap",u),this.lastTap=null,!u.sigmaDefaultPrevented){var h=this.renderer.getCamera(),d=h.getBoundedRatio(h.getState().ratio/this.settings.doubleClickZoomingRatio);h.animate(this.renderer.getViewportZoomedState(a,d),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var f=Sy(i,this.lastTouches,this.container);this.emit("tap",f),this.lastTap={time:Date.now(),position:f.touches[0]||f.previousTouches[0]}}}this.lastTouches=vE(i.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(i){var r=this;if(!(!this.enabled||!this.startTouchesPositions.length)){i.preventDefault();var s=vE(i.touches),o=s.map(function(b){return la(b,r.container)}),a=this.lastTouches;this.lastTouches=s,this.lastTouchesPositions=o;var l=Sy(i,a,this.container);if(this.emit("touchmove",l),!l.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=o.some(function(b,C){var S=r.startTouchesPositions[C];return S&&(b.x!==S.x||b.y!==S.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.isMoving=!1},this.settings.dragTimeout);var c=this.renderer.getCamera(),u=this.startCameraState,h=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var d=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),f=d.x,g=d.y,p=this.renderer.viewportToFramedGraph(o[0]),m=p.x,v=p.y;c.setState({x:u.x+f-m,y:u.y+g-v});break}case 2:{var y={x:.5,y:.5,angle:0,ratio:1},w=o[0],_=w.x,R=w.y,E=o[1],x=E.x,P=E.y,T=Math.atan2(P-R,x-_)-this.startTouchesAngle,I=Math.hypot(P-R,x-_)/this.startTouchesDistance,N=c.getBoundedRatio(u.ratio/I);y.ratio=N,y.angle=u.angle+T;var W=this.getDimensions(),j=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:u}),K=Math.min(W.width,W.height)-2*h,H=K/W.width,k=K/W.height,B=N/K,G=_-K/2/H,z=R-K/2/k,se=[G*Math.cos(-y.angle)-z*Math.sin(-y.angle),z*Math.cos(-y.angle)+G*Math.sin(-y.angle)];G=se[0],z=se[1],y.x=j.x-G*B,y.y=j.y+z*B,c.setState(y);break}}}}}},{key:"setSettings",value:function(i){this.settings=i}}]),e}(aX);function v5e(n){if(Array.isArray(n))return JL(n)}function w5e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function y5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lX(n){return v5e(n)||w5e(n)||Eq(n)||y5e()}function C5e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;t[i]=n[i]}return t}function hH(n,e){if(n==null)return{};var t,i,r=C5e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)t=s[i],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var cX=function(){function n(e,t){gr(this,n),this.key=e,this.size=t}return pr(n,null,[{key:"compare",value:function(t,i){return t.size>i.size?-1:t.size<i.size||t.key>i.key?1:-1}}]),n}(),uX=function(){function n(){gr(this,n),de(this,"width",0),de(this,"height",0),de(this,"cellSize",0),de(this,"columns",0),de(this,"rows",0),de(this,"cells",{})}return pr(n,[{key:"resizeAndClear",value:function(t,i){this.width=t.width,this.height=t.height,this.cellSize=i,this.columns=Math.ceil(t.width/i),this.rows=Math.ceil(t.height/i),this.cells={}}},{key:"getIndex",value:function(t){var i=Math.floor(t.x/this.cellSize),r=Math.floor(t.y/this.cellSize);return r*this.columns+i}},{key:"add",value:function(t,i,r){var s=new cX(t,i),o=this.getIndex(r),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(s)}},{key:"organize",value:function(){for(var t in this.cells){var i=this.cells[t];i.sort(cX.compare)}}},{key:"getLabelsToDisplay",value:function(t,i){var r=this.cellSize*this.cellSize,s=r/t/t,o=s*i/r,a=Math.ceil(o),l=[];for(var c in this.cells)for(var u=this.cells[c],h=0;h<Math.min(a,u.length);h++)l.push(u[h].key);return l}}]),n}();function S5e(n){var e=n.graph,t=n.hoveredNode,i=n.highlightedNodes,r=n.displayedNodeLabels,s=[];return e.forEachEdge(function(o,a,l,c){(l===t||c===t||i.has(l)||i.has(c)||r.has(l)&&r.has(c))&&s.push(o)}),s}var hX=150,dX=50,Vc=Object.prototype.hasOwnProperty;function _5e(n,e,t){if(!Vc.call(t,"x")||!Vc.call(t,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return t.color||(t.color=n.defaultNodeColor),!t.label&&t.label!==""&&(t.label=null),t.label!==void 0&&t.label!==null?t.label=""+t.label:t.label=null,t.size||(t.size=2),Vc.call(t,"hidden")||(t.hidden=!1),Vc.call(t,"highlighted")||(t.highlighted=!1),Vc.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=n.defaultNodeType),t.zIndex||(t.zIndex=0),t}function R5e(n,e,t){return t.color||(t.color=n.defaultEdgeColor),t.label||(t.label=""),t.size||(t.size=.5),Vc.call(t,"hidden")||(t.hidden=!1),Vc.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=n.defaultEdgeType),t.zIndex||(t.zIndex=0),t}var fX=function(n){mo(e,n);function e(t,i){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(gr(this,e),r=po(this,e),de(me(r),"elements",{}),de(me(r),"canvasContexts",{}),de(me(r),"webGLContexts",{}),de(me(r),"pickingLayers",new Set),de(me(r),"textures",{}),de(me(r),"frameBuffers",{}),de(me(r),"activeListeners",{}),de(me(r),"labelGrid",new uX),de(me(r),"nodeDataCache",{}),de(me(r),"edgeDataCache",{}),de(me(r),"nodeProgramIndex",{}),de(me(r),"edgeProgramIndex",{}),de(me(r),"nodesWithForcedLabels",new Set),de(me(r),"edgesWithForcedLabels",new Set),de(me(r),"nodeExtent",{x:[0,1],y:[0,1]}),de(me(r),"nodeZExtent",[1/0,-1/0]),de(me(r),"edgeZExtent",[1/0,-1/0]),de(me(r),"matrix",aa()),de(me(r),"invMatrix",aa()),de(me(r),"correctionRatio",1),de(me(r),"customBBox",null),de(me(r),"normalizationFunction",nX({x:[0,1],y:[0,1]})),de(me(r),"graphToViewportRatio",1),de(me(r),"itemIDsIndex",{}),de(me(r),"nodeIndices",{}),de(me(r),"edgeIndices",{}),de(me(r),"width",0),de(me(r),"height",0),de(me(r),"pixelRatio",eX()),de(me(r),"pickingDownSizingRatio",2*r.pixelRatio),de(me(r),"displayedNodeLabels",new Set),de(me(r),"displayedEdgeLabels",new Set),de(me(r),"highlightedNodes",new Set),de(me(r),"hoveredNode",null),de(me(r),"hoveredEdge",null),de(me(r),"renderFrame",null),de(me(r),"renderHighlightedNodesFrame",null),de(me(r),"needToProcess",!1),de(me(r),"checkEdgesEventsFrame",null),de(me(r),"nodePrograms",{}),de(me(r),"nodeHoverPrograms",{}),de(me(r),"edgePrograms",{}),r.settings=c5e(s),rX(r.settings),s5e(t),!(i instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");r.graph=t,r.container=i,r.createWebGLContext("edges",{picking:s.enableEdgeEvents}),r.createCanvasContext("edgeLabels"),r.createWebGLContext("nodes",{picking:!0}),r.createCanvasContext("labels"),r.createCanvasContext("hovers"),r.createWebGLContext("hoverNodes"),r.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),r.resize();for(var o in r.settings.nodeProgramClasses)r.registerNodeProgram(o,r.settings.nodeProgramClasses[o],r.settings.nodeHoverProgramClasses[o]);for(var a in r.settings.edgeProgramClasses)r.registerEdgeProgram(a,r.settings.edgeProgramClasses[a]);return r.camera=new sX,r.bindCameraHandlers(),r.mouseCaptor=new g5e(r.elements.mouse,me(r)),r.mouseCaptor.setSettings(r.settings),r.touchCaptor=new b5e(r.elements.mouse,me(r)),r.touchCaptor.setSettings(r.settings),r.bindEventHandlers(),r.bindGraphHandlers(),r.handleSettingsUpdate(),r.refresh(),r}return pr(e,[{key:"registerNodeProgram",value:function(i,r,s){return this.nodePrograms[i]&&this.nodePrograms[i].kill(),this.nodeHoverPrograms[i]&&this.nodeHoverPrograms[i].kill(),this.nodePrograms[i]=new r(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[i]=new(s||r)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(i,r){return this.edgePrograms[i]&&this.edgePrograms[i].kill(),this.edgePrograms[i]=new r(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(i){if(this.nodePrograms[i]){var r=this.nodePrograms,s=r[i],o=hH(r,[i].map(vy));s.kill(),this.nodePrograms=o}if(this.nodeHoverPrograms[i]){var a=this.nodeHoverPrograms,l=a[i],c=hH(a,[i].map(vy));l.kill(),this.nodePrograms=c}return this}},{key:"unregisterEdgeProgram",value:function(i){if(this.edgePrograms[i]){var r=this.edgePrograms,s=r[i],o=hH(r,[i].map(vy));s.kill(),this.edgePrograms=o}return this}},{key:"resetWebGLTexture",value:function(i){var r=this.webGLContexts[i],s=this.frameBuffers[i],o=this.textures[i];o&&r.deleteTexture(o);var a=r.createTexture();return r.bindFramebuffer(r.FRAMEBUFFER,s),r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),this.textures[i]=a,this}},{key:"bindCameraHandlers",value:function(){var i=this;return this.activeListeners.camera=function(){i.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(i){var r=i.x,s=i.y,o=Pq(this.webGLContexts.nodes,this.frameBuffers.nodes,r,s,this.pixelRatio,this.pickingDownSizingRatio),a=Aq.apply(void 0,lX(o)),l=this.itemIDsIndex[a];return l&&l.type==="node"?l.id:null}},{key:"bindEventHandlers",value:function(){var i=this;this.activeListeners.handleResize=function(){i.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(s){var o=Cy(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},l=i.getNodeAtPosition(o);if(l&&i.hoveredNode!==l&&!i.nodeDataCache[l].hidden){i.hoveredNode&&i.emit("leaveNode",We(We({},a),{},{node:i.hoveredNode})),i.hoveredNode=l,i.emit("enterNode",We(We({},a),{},{node:l})),i.scheduleHighlightedNodesRender();return}if(i.hoveredNode&&i.getNodeAtPosition(o)!==i.hoveredNode){var c=i.hoveredNode;i.hoveredNode=null,i.emit("leaveNode",We(We({},a),{},{node:c})),i.scheduleHighlightedNodesRender();return}if(i.settings.enableEdgeEvents){var u=i.hoveredNode?null:i.getEdgeAtPoint(a.event.x,a.event.y);u!==i.hoveredEdge&&(i.hoveredEdge&&i.emit("leaveEdge",We(We({},a),{},{edge:i.hoveredEdge})),u&&i.emit("enterEdge",We(We({},a),{},{edge:u})),i.hoveredEdge=u)}},this.activeListeners.handleMoveBody=function(s){var o=Cy(s);i.emit("moveBody",{event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(s){var o=Cy(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};i.hoveredNode&&(i.emit("leaveNode",We(We({},a),{},{node:i.hoveredNode})),i.scheduleHighlightedNodesRender()),i.settings.enableEdgeEvents&&i.hoveredEdge&&(i.emit("leaveEdge",We(We({},a),{},{edge:i.hoveredEdge})),i.scheduleHighlightedNodesRender()),i.emit("leaveStage",We({},a))},this.activeListeners.handleEnter=function(s){var o=Cy(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};i.emit("enterStage",We({},a))};var r=function(o){return function(a){var l=Cy(a),c={event:l,preventSigmaDefault:function(){l.preventSigmaDefault()}},u=i.getNodeAtPosition(l);if(u)return i.emit("".concat(o,"Node"),We(We({},c),{},{node:u}));if(i.settings.enableEdgeEvents){var h=i.getEdgeAtPoint(l.x,l.y);if(h)return i.emit("".concat(o,"Edge"),We(We({},c),{},{edge:h}))}return i.emit("".concat(o,"Stage"),c)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.activeListeners.handleUp=r("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var i=this,r=this.graph,s=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(o){var a,l=(a=o.hints)===null||a===void 0?void 0:a.attributes;i.graph.forEachNode(function(u){return i.updateNode(u)});var c=!l||l.some(function(u){return s.has(u)});i.refresh({partialGraph:{nodes:r.nodes()},skipIndexation:!c,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(o){var a,l=(a=o.hints)===null||a===void 0?void 0:a.attributes;i.graph.forEachEdge(function(u){return i.updateEdge(u)});var c=l&&["zIndex","type"].some(function(u){return l==null?void 0:l.includes(u)});i.refresh({partialGraph:{edges:r.edges()},skipIndexation:!c,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(o){var a=o.key;i.addNode(a),i.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(o){var a=o.key;i.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(o){var a=o.key;i.removeNode(a),i.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(o){var a=o.key;i.addEdge(a),i.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(o){var a=o.key;i.refresh({partialGraph:{edges:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(o){var a=o.key;i.removeEdge(a),i.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){i.clearEdgeState(),i.clearEdgeIndices(),i.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){i.clearEdgeState(),i.clearNodeState(),i.clearEdgeIndices(),i.clearNodeIndices(),i.refresh({schedule:!0})},r.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var i=this.graph;i.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(i,r){var s=Pq(this.webGLContexts.edges,this.frameBuffers.edges,i,r,this.pixelRatio,this.pickingDownSizingRatio),o=Aq.apply(void 0,lX(s)),a=this.itemIDsIndex[o];return a&&a.type==="edge"?a.id:null}},{key:"process",value:function(){var i=this;this.emit("beforeProcess");var r=this.graph,s=this.settings,o=this.getDimensions();if(this.nodeExtent=r5e(this.graph),!this.settings.autoRescale){var a=o.width,l=o.height,c=this.nodeExtent,u=c.x,h=c.y;this.nodeExtent={x:[(u[0]+u[1])/2-a/2,(u[0]+u[1])/2+a/2],y:[(h[0]+h[1])/2-l/2,(h[0]+h[1])/2+l/2]}}this.normalizationFunction=nX(this.customBBox||this.nodeExtent);var d=new sX,f=yy(d.getState(),o,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(o,s.labelGridCellSize);for(var g={},p={},m={},v={},y=1,w=r.nodes(),_=0,R=w.length;_<R;_++){var E=w[_],x=this.nodeDataCache[E],P=r.getNodeAttributes(E);x.x=P.x,x.y=P.y,this.normalizationFunction.applyTo(x),typeof x.label=="string"&&!x.hidden&&this.labelGrid.add(E,x.size,this.framedGraphToViewport(x,{matrix:f})),g[x.type]=(g[x.type]||0)+1}this.labelGrid.organize();for(var T in this.nodePrograms){if(!Vc.call(this.nodePrograms,T))throw new Error('Sigma: could not find a suitable program for node type "'.concat(T,'"!'));this.nodePrograms[T].reallocate(g[T]||0),g[T]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(w=tX(this.nodeZExtent,function(L){return i.nodeDataCache[L].zIndex},w));for(var I=0,N=w.length;I<N;I++){var W=w[I];p[W]=y,v[p[W]]={type:"node",id:W},y++;var j=this.nodeDataCache[W];this.addNodeToProgram(W,p[W],g[j.type]++)}for(var K={},H=r.edges(),k=0,B=H.length;k<B;k++){var G=H[k],z=this.edgeDataCache[G];K[z.type]=(K[z.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(H=tX(this.edgeZExtent,function(L){return i.edgeDataCache[L].zIndex},H));for(var se in this.edgePrograms){if(!Vc.call(this.edgePrograms,se))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(se,'"!'));this.edgePrograms[se].reallocate(K[se]||0),K[se]=0}for(var b=0,C=H.length;b<C;b++){var S=H[b];m[S]=y,v[m[S]]={type:"edge",id:S},y++;var A=this.edgeDataCache[S];this.addEdgeToProgram(S,m[S],K[A.type]++)}return this.itemIDsIndex=v,this.nodeIndices=p,this.edgeIndices=m,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(i){var r=this.settings;if(this.camera.minRatio=r.minCameraRatio,this.camera.maxRatio=r.maxCameraRatio,this.camera.enabledRotation=r.enableCameraRotation,this.camera.setState(this.camera.validateState(this.camera.getState())),i){if(i.edgeProgramClasses!==r.edgeProgramClasses){for(var s in r.edgeProgramClasses)r.edgeProgramClasses[s]!==i.edgeProgramClasses[s]&&this.registerEdgeProgram(s,r.edgeProgramClasses[s]);for(var o in i.edgeProgramClasses)r.edgeProgramClasses[o]||this.unregisterEdgeProgram(o)}if(i.nodeProgramClasses!==r.nodeProgramClasses||i.nodeHoverProgramClasses!==r.nodeHoverProgramClasses){for(var a in r.nodeProgramClasses)(r.nodeProgramClasses[a]!==i.nodeProgramClasses[a]||r.nodeHoverProgramClasses[a]!==i.nodeHoverProgramClasses[a])&&this.registerNodeProgram(a,r.nodeProgramClasses[a],r.nodeHoverProgramClasses[a]);for(var l in i.nodeProgramClasses)r.nodeProgramClasses[l]||this.unregisterNodeProgram(l)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var i=this.camera.getState(),r=this.labelGrid.getLabelsToDisplay(i.ratio,this.settings.labelDensity);iX(r,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var s=this.canvasContexts.labels,o=0,a=r.length;o<a;o++){var l=r[o],c=this.nodeDataCache[l];if(!this.displayedNodeLabels.has(l)&&!c.hidden){var u=this.framedGraphToViewport(c),h=u.x,d=u.y,f=this.scaleSize(c.size);if(!(!c.forceLabel&&f<this.settings.labelRenderedSizeThreshold)&&!(h<-hX||h>this.width+hX||d<-dX||d>this.height+dX)){this.displayedNodeLabels.add(l);var g=this.settings.defaultDrawNodeLabel,p=this.nodePrograms[c.type],m=(p==null?void 0:p.drawLabel)||g;m(s,We(We({key:l},c),{},{size:f,x:h,y:d}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var i=this.canvasContexts.edgeLabels;i.clearRect(0,0,this.width,this.height);var r=S5e({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});iX(r,this.edgesWithForcedLabels);for(var s=new Set,o=0,a=r.length;o<a;o++){var l=r[o],c=this.graph.extremities(l),u=this.nodeDataCache[c[0]],h=this.nodeDataCache[c[1]],d=this.edgeDataCache[l];if(!s.has(l)&&!(d.hidden||u.hidden||h.hidden)){var f=this.settings.defaultDrawEdgeLabel,g=this.edgePrograms[d.type],p=(g==null?void 0:g.drawLabel)||f;p(i,We(We({key:l},d),{},{size:this.scaleSize(d.size)}),We(We(We({key:c[0]},u),this.framedGraphToViewport(u)),{},{size:this.scaleSize(u.size)}),We(We(We({key:c[1]},h),this.framedGraphToViewport(h)),{},{size:this.scaleSize(h.size)}),this.settings),s.add(l)}}return this.displayedEdgeLabels=s,this}},{key:"renderHighlightedNodes",value:function(){var i=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var s=function(f){var g=i.nodeDataCache[f],p=i.framedGraphToViewport(g),m=p.x,v=p.y,y=i.scaleSize(g.size),w=i.settings.defaultDrawNodeHover,_=i.nodePrograms[g.type],R=(_==null?void 0:_.drawHover)||w;R(r,We(We({key:f},g),{},{size:y,x:m,y:v}),i.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(d){d!==i.hoveredNode&&o.push(d)}),o.forEach(function(d){return s(d)});var a={};o.forEach(function(d){var f=i.nodeDataCache[d].type;a[f]=(a[f]||0)+1});for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].reallocate(a[l]||0),a[l]=0;o.forEach(function(d){var f=i.nodeDataCache[d];i.nodeHoverPrograms[f.type].process(0,a[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var c=this.getRenderParams();for(var u in this.nodeHoverPrograms){var h=this.nodeHoverPrograms[u];h.render(c)}}},{key:"scheduleHighlightedNodesRender",value:function(){var i=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){i.renderHighlightedNodesFrame=null,i.renderHighlightedNodes(),i.renderEdgeLabels()}))}},{key:"render",value:function(){var i=this;this.emit("beforeRender");var r=function(){return i.emit("afterRender"),i};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(m){return i.resetWebGLTexture(m)}),!this.graph.order)return r();var s=this.mouseCaptor,o=this.camera.isAnimated()||s.isMoving||s.draggedEvents||s.currentWheelDirection,a=this.camera.getState(),l=this.getDimensions(),c=this.getGraphDimensions(),u=this.getStagePadding();this.matrix=yy(a,l,c,u),this.invMatrix=yy(a,l,c,u,!0),this.correctionRatio=i5e(this.matrix,a,l),this.graphToViewportRatio=this.getGraphToViewportRatio();var h=this.getRenderParams();for(var d in this.nodePrograms){var f=this.nodePrograms[d];f.render(h)}if(!this.settings.hideEdgesOnMove||!o)for(var g in this.edgePrograms){var p=this.edgePrograms[g];p.render(h)}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()}},{key:"addNode",value:function(i){var r=Object.assign({},this.graph.getNodeAttributes(i));this.settings.nodeReducer&&(r=this.settings.nodeReducer(i,r));var s=_5e(this.settings,i,r);this.nodeDataCache[i]=s,this.nodesWithForcedLabels.delete(i),s.forceLabel&&!s.hidden&&this.nodesWithForcedLabels.add(i),this.highlightedNodes.delete(i),s.highlighted&&!s.hidden&&this.highlightedNodes.add(i),this.settings.zIndex&&(s.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=s.zIndex),s.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=s.zIndex))}},{key:"updateNode",value:function(i){this.addNode(i);var r=this.nodeDataCache[i];this.normalizationFunction.applyTo(r)}},{key:"removeNode",value:function(i){delete this.nodeDataCache[i],delete this.nodeProgramIndex[i],this.highlightedNodes.delete(i),this.hoveredNode===i&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(i)}},{key:"addEdge",value:function(i){var r=Object.assign({},this.graph.getEdgeAttributes(i));this.settings.edgeReducer&&(r=this.settings.edgeReducer(i,r));var s=R5e(this.settings,i,r);this.edgeDataCache[i]=s,this.edgesWithForcedLabels.delete(i),s.forceLabel&&!s.hidden&&this.edgesWithForcedLabels.add(i),this.settings.zIndex&&(s.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=s.zIndex),s.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=s.zIndex))}},{key:"updateEdge",value:function(i){this.addEdge(i)}},{key:"removeEdge",value:function(i){delete this.edgeDataCache[i],delete this.edgeProgramIndex[i],this.hoveredEdge===i&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(i)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new uX,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(i,r,s){var o=this.nodeDataCache[i],a=this.nodePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(o.type,'"!'));a.process(r,s,o),this.nodeProgramIndex[i]=s}},{key:"addEdgeToProgram",value:function(i,r,s){var o=this.edgeDataCache[i],a=this.edgePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(o.type,'"!'));var l=this.graph.extremities(i),c=this.nodeDataCache[l[0]],u=this.nodeDataCache[l[1]];a.process(r,s,c,u,o),this.edgeProgramIndex[i]=s}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var i=this.settings,r=i.stagePadding,s=i.autoRescale;return s&&r||0}},{key:"createLayer",value:function(i,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[i])throw new Error('Sigma: a layer named "'.concat(i,'" already exists'));var o=o5e(r,{position:"absolute"},{class:"sigma-".concat(i)});return s.style&&Object.assign(o.style,s.style),this.elements[i]=o,"beforeLayer"in s&&s.beforeLayer?this.elements[s.beforeLayer].before(o):"afterLayer"in s&&s.afterLayer?this.elements[s.afterLayer].after(o):this.container.appendChild(o),o}},{key:"createCanvas",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(i,"canvas",r)}},{key:"createCanvasContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.createCanvas(i,r),o={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[i]=s.getContext("2d",o),this}},{key:"createWebGLContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(r==null?void 0:r.canvas)||this.createCanvas(i,r);r.hidden&&s.remove();var o=We({preserveDrawingBuffer:!1,antialias:!1},r),a;a=s.getContext("webgl2",o),a||(a=s.getContext("webgl",o)),a||(a=s.getContext("experimental-webgl",o));var l=a;if(this.webGLContexts[i]=l,l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),r.picking){this.pickingLayers.add(i);var c=l.createFramebuffer();if(!c)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(i));this.frameBuffers[i]=c}return l}},{key:"killLayer",value:function(i){var r=this.elements[i];if(!r)throw new Error("Sigma: cannot kill layer ".concat(i,", which does not exist"));if(this.webGLContexts[i]){var s,o=this.webGLContexts[i];(s=o.getExtension("WEBGL_lose_context"))===null||s===void 0||s.loseContext(),delete this.webGLContexts[i]}else this.canvasContexts[i]&&delete this.canvasContexts[i];return r.remove(),delete this.elements[i],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(i){this.unbindCameraHandlers(),this.camera=i,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(i){i!==this.graph&&(this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=i,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var i=this.customBBox||this.nodeExtent;return{width:i.x[1]-i.x[0]||1,height:i.y[1]-i.y[0]||1}}},{key:"getNodeDisplayData",value:function(i){var r=this.nodeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getEdgeDisplayData",value:function(i){var r=this.edgeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return We({},this.settings)}},{key:"getSetting",value:function(i){return this.settings[i]}},{key:"setSetting",value:function(i,r){var s=We({},this.settings);return this.settings[i]=r,rX(this.settings),this.handleSettingsUpdate(s),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(i,r){return this.setSetting(i,r(this.settings[i])),this}},{key:"resize",value:function(i){var r=this.width,s=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=eX(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!i&&r===this.width&&s===this.height)return this;for(var o in this.elements){var a=this.elements[o];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var l in this.canvasContexts)this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[l].scale(this.pixelRatio,this.pixelRatio);for(var c in this.webGLContexts){this.elements[c].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[c].setAttribute("height",this.height*this.pixelRatio+"px");var u=this.webGLContexts[c];if(u.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(c)){var h=this.textures[c];h&&u.deleteTexture(h)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(i){var r=this,s=(i==null?void 0:i.skipIndexation)!==void 0?i==null?void 0:i.skipIndexation:!1,o=(i==null?void 0:i.schedule)!==void 0?i.schedule:!1,a=!i||!i.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(_){return r.addNode(_)}),this.graph.forEachEdge(function(_){return r.addEdge(_)});else{for(var l,c,u=((l=i.partialGraph)===null||l===void 0?void 0:l.nodes)||[],h=0,d=(u==null?void 0:u.length)||0;h<d;h++){var f=u[h];if(this.updateNode(f),s){var g=this.nodeProgramIndex[f];if(g===void 0)throw new Error('Sigma: node "'.concat(f,`" can't be repaint`));this.addNodeToProgram(f,this.nodeIndices[f],g)}}for(var p=(i==null||(c=i.partialGraph)===null||c===void 0?void 0:c.edges)||[],m=0,v=p.length;m<v;m++){var y=p[m];if(this.updateEdge(y),s){var w=this.edgeProgramIndex[y];if(w===void 0)throw new Error('Sigma: edge "'.concat(y,`" can't be repaint`));this.addEdgeToProgram(y,this.edgeIndices[y],w)}}}return(a||!s)&&(this.needToProcess=!0),o?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var i=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){i.render()})),this}},{key:"scheduleRefresh",value:function(i){return this.refresh(We(We({},i),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(i,r){var s=this.camera.getState(),o=s.ratio,a=s.angle,l=s.x,c=s.y,u=this.settings,h=u.minCameraRatio,d=u.maxCameraRatio;typeof d=="number"&&(r=Math.min(r,d)),typeof h=="number"&&(r=Math.max(r,h));var f=r/o,g={x:this.width/2,y:this.height/2},p=this.viewportToFramedGraph(i),m=this.viewportToFramedGraph(g);return{angle:a,x:(p.x-m.x)*(1-f)+l,y:(p.y-m.y)*(1-f)+c,ratio:r}}},{key:"viewRectangle",value:function(){var i=this.viewportToFramedGraph({x:0,y:0}),r=this.viewportToFramedGraph({x:this.width,y:0}),s=this.viewportToFramedGraph({x:0,y:this.height});return{x1:i.x,y1:i.y,x2:r.x,y2:r.y,height:r.y-s.y}}},{key:"framedGraphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,o=r.matrix?r.matrix:s?yy(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding()):this.matrix,a=lH(o,i);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,o=r.matrix?r.matrix:s?yy(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding(),!0):this.invMatrix,a=lH(o,{x:i.x/this.width*2-1,y:1-i.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(i,r))}},{key:"graphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(i),r)}},{key:"getGraphToViewportRatio",value:function(){var i={x:0,y:0},r={x:1,y:1},s=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),o=this.graphToViewport(i),a=this.graphToViewport(r),l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2));return l/s}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(i){return this.customBBox=i,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var i=this.container;i.firstChild;)i.removeChild(i.firstChild);this.canvasContexts={},this.webGLContexts={},this.elements={};for(var r in this.nodePrograms)this.nodePrograms[r].kill();for(var s in this.nodeHoverPrograms)this.nodeHoverPrograms[s].kill();for(var o in this.edgePrograms)this.edgePrograms[o].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var a in this.elements)this.killLayer(a)}},{key:"scaleSize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return i/this.settings.zoomToSizeRatioFunction(r)*(this.getSetting("itemSizesReference")==="positions"?r*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var i={};for(var r in this.elements)this.elements[r]instanceof HTMLCanvasElement&&(i[r]=this.elements[r]);return i}}]),e}(aH);function E5e(n){return!n||typeof n!="object"||typeof n=="function"||Array.isArray(n)||n instanceof Set||n instanceof Map||n instanceof RegExp||n instanceof Date}function gX(n,e){n=n||{};var t={};for(var i in e){var r=n[i],s=e[i];if(!E5e(s)){t[i]=gX(r,s);continue}r===void 0?t[i]=s:t[i]=r}return t}var x5e=gX,wE={};function T5e(n){return typeof n!="number"||isNaN(n)?1:n}function M5e(n,e){var t={},i=function(o){return typeof o>"u"?e:o};typeof e=="function"&&(i=e);var r=function(o){return i(o[n])},s=function(){return i(void 0)};return typeof n=="string"?(t.fromAttributes=r,t.fromGraph=function(o,a){return r(o.getNodeAttributes(a))},t.fromEntry=function(o,a){return r(a)}):typeof n=="function"?(t.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},t.fromGraph=function(o,a){return i(n(a,o.getNodeAttributes(a)))},t.fromEntry=function(o,a){return i(n(o,a))}):(t.fromAttributes=s,t.fromGraph=s,t.fromEntry=s),t}function pX(n,e){var t={},i=function(o){return typeof o>"u"?e:o};typeof e=="function"&&(i=e);var r=function(o){return i(o[n])},s=function(){return i(void 0)};return typeof n=="string"?(t.fromAttributes=r,t.fromGraph=function(o,a){return r(o.getEdgeAttributes(a))},t.fromEntry=function(o,a){return r(a)},t.fromPartialEntry=t.fromEntry,t.fromMinimalEntry=t.fromEntry):typeof n=="function"?(t.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},t.fromGraph=function(o,a){var l=o.extremities(a);return i(n(a,o.getEdgeAttributes(a),l[0],l[1],o.getNodeAttributes(l[0]),o.getNodeAttributes(l[1]),o.isUndirected(a)))},t.fromEntry=function(o,a,l,c,u,h,d){return i(n(o,a,l,c,u,h,d))},t.fromPartialEntry=function(o,a,l,c){return i(n(o,a,l,c))},t.fromMinimalEntry=function(o,a){return i(n(o,a))}):(t.fromAttributes=s,t.fromGraph=s,t.fromEntry=s,t.fromMinimalEntry=s),t}wE.createNodeValueGetter=M5e,wE.createEdgeValueGetter=pX,wE.createEdgeWeightGetter=function(n){return pX(n,T5e)};const{createNodeValueGetter:mX,createEdgeValueGetter:A5e}=wE;var P5e=function(e,t,i){const{nodeXAttribute:r,nodeYAttribute:s}=i,{attraction:o,repulsion:a,gravity:l,inertia:c,maxMove:u}=i.settings;let{shouldSkipNode:h,shouldSkipEdge:d,isNodeFixed:f}=i;f=mX(f),h=mX(h,!1),d=A5e(d,!1);const g=e.filterNodes((v,y)=>!h.fromEntry(v,y)),p=g.length;for(let v=0;v<p;v++){const y=g[v],w=e.getNodeAttributes(y),_=t[y];_?t[y]={dx:_.dx*c,dy:_.dy*c,x:w[r]||0,y:w[s]||0}:t[y]={dx:0,dy:0,x:w[r]||0,y:w[s]||0}}if(a)for(let v=0;v<p;v++){const y=g[v],w=t[y];for(let _=v+1;_<p;_++){const R=g[_],E=t[R],x=E.x-w.x,P=E.y-w.y,T=Math.sqrt(x*x+P*P)||1,I=a/T*x,N=a/T*P;w.dx-=I,w.dy-=N,E.dx+=I,E.dy+=N}}if(o&&e.forEachEdge((v,y,w,_,R,E,x)=>{if(w===_||h.fromEntry(w,R)||h.fromEntry(_,E)||d.fromEntry(v,y,w,_,R,E,x))return;const P=t[w],T=t[_],I=T.x-P.x,N=T.y-P.y,W=Math.sqrt(I*I+N*N)||1,j=o*W*I,K=o*W*N;P.dx+=j,P.dy+=K,T.dx-=j,T.dy-=K}),l)for(let v=0;v<p;v++){const y=g[v],w=t[y],{x:_,y:R}=w,E=Math.sqrt(_*_+R*R)||1;t[y].dx-=_*l*E,t[y].dy-=R*l*E}const m=!1;for(let v=0;v<p;v++){const y=g[v],w=t[y],_=Math.sqrt(w.dx*w.dx+w.dy*w.dy);_>u&&(w.dx*=u/_,w.dy*=u/_),f.fromGraph(e,y)?w.fixed=!0:(w.x+=w.dx,w.y+=w.dy,w.fixed=!1)}return{converged:m}},dH={};dH.assignLayoutChanges=function(n,e,t){const{nodeXAttribute:i,nodeYAttribute:r}=t;n.updateEachNodeAttributes((s,o)=>{const a=e[s];return!a||a.fixed||(o[i]=a.x,o[r]=a.y),o},{attributes:["x","y"]})},dH.collectLayoutChanges=function(n){const e={};for(const t in n){const i=n[t];e[t]={x:i.x,y:i.y}}return e};var I5e={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}};const O5e=Zq,k5e=x5e,D5e=P5e,N5e=dH,L5e=I5e;function sm(n,e){if(!O5e(n))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");e=k5e(e,L5e),this.callbacks={},e.onConverged&&(this.callbacks.onConverged=e.onConverged),this.graph=n,this.params=e,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}sm.prototype.isRunning=function(){return this.running},sm.prototype.runFrame=function(){let{converged:n}=D5e(this.graph,this.nodeStates,this.params);N5e.assignLayoutChanges(this.graph,this.nodeStates,this.params),n=!1,n?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},sm.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},sm.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},sm.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0};var H5e=sm;const bX=vg(H5e);function fH(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function $5e(n){if(Array.isArray(n))return fH(n)}function F5e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function B5e(n,e){if(n){if(typeof n=="string")return fH(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?fH(n,e):void 0}}function V5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gH(n){return $5e(n)||F5e(n)||B5e(n)||V5e()}function pH(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function W5e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function vX(n){var e=W5e(n,"string");return typeof e=="symbol"?e:e+""}function j5e(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,vX(i.key),i)}}function mH(n,e,t){return e&&j5e(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function om(n){return om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},om(n)}function wX(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wX=function(){return!!n})()}function ca(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function z5e(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ca(n)}function yX(n,e,t){return e=om(e),z5e(n,wX()?Reflect.construct(e,t||[],om(n).constructor):e.apply(n,t))}function U5e(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=om(n))!==null;);return n}function bH(){return bH=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,t){var i=U5e(n,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?n:t):r.value}},bH.apply(null,arguments)}function CX(n,e,t,i){var r=bH(om(n.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function vH(n,e){return vH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},vH(n,e)}function SX(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&vH(n,e)}function mr(n,e,t){return(e=vX(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G5e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;t[i]=n[i]}return t}function Y5e(n,e){if(n==null)return{};var t,i,r=G5e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)t=s[i],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function _X(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function xs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_X(Object(t),!0).forEach(function(i){mr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_X(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function K5e(n){var e=n.texturesCount,t=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying vec4 v_texture;
varying float v_textureIndex;

uniform sampler2D u_atlas[`.concat(e,`];
uniform float u_correctionRatio;
uniform float u_cameraAngle;
uniform float u_percentagePadding;
uniform bool u_colorizeImages;
uniform bool u_keepWithinCircle;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

const float radius = 0.5;

void main(void) {
  float border = 2.0 * u_correctionRatio;
  float dist = length(v_diffVector);
  vec4 color = gl_FragColor;

  float c = cos(-u_cameraAngle);
  float s = sin(-u_cameraAngle);
  vec2 diffVector = mat2(c, s, -s, c) * (v_diffVector);

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  border = 0.0;
  color = v_color;

  #else
  // First case: No image to display
  if (v_texture.w <= 0.0) {
    if (!u_colorizeImages) {
      color = v_color;
    }
  }

  // Second case: Image loaded into the texture
  else {
    float paddingRatio = 1.0 + 2.0 * u_percentagePadding;
    float coef = u_keepWithinCircle ? 1.0 : `).concat(Math.SQRT2,`;
    vec2 coordinateInTexture = diffVector * vec2(paddingRatio, -paddingRatio) / v_radius / 2.0 * coef + vec2(0.5, 0.5);
    int index = int(v_textureIndex + 0.5); // +0.5 avoid rounding errors

    bool noTextureFound = false;
    vec4 texel;

    `).concat(gH(new Array(e)).map(function(i,r){return"if (index == ".concat(r,") texel = texture2D(u_atlas[").concat(r,"], (v_texture.xy + coordinateInTexture * v_texture.zw), -1.0);")}).join(`
    else `)+`else {
      texel = texture2D(u_atlas[0], (v_texture.xy + coordinateInTexture * v_texture.zw), -1.0);
      noTextureFound = true;
    }`,`

    if (noTextureFound) {
      color = v_color;
    } else {
      // Colorize all visible image pixels:
      if (u_colorizeImages) {
        color = mix(gl_FragColor, v_color, texel.a);
      }

      // Colorize background pixels, keep image pixel colors:
      else {
        color = vec4(mix(v_color, texel, texel.a).rgb, max(texel.a, v_color.a));
      }

      // Erase pixels "in the padding":
      if (abs(diffVector.x) > v_radius / paddingRatio || abs(diffVector.y) > v_radius / paddingRatio) {
        color = u_colorizeImages ? gl_FragColor : v_color;
      }
    }
  }
  #endif

  // Crop in a circle when u_keepWithinCircle is truthy:
  if (u_keepWithinCircle) {
    if (dist < v_radius - border) {
      gl_FragColor = color;
    } else if (dist < v_radius) {
      gl_FragColor = mix(transparent, color, (v_radius - dist) / border);
    }
  }

  // Crop in a square else:
  else {
    float squareHalfSize = v_radius * `).concat(Math.SQRT1_2*Math.cos(Math.PI/12),`;
    if (abs(diffVector.x) > squareHalfSize || abs(diffVector.y) > squareHalfSize) {
      gl_FragColor = transparent;
    } else {
      gl_FragColor = color;
    }
  }
}
`);return t}var q5e=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;
attribute vec4 a_texture;
attribute float a_textureIndex;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying vec4 v_texture;
varying float v_textureIndex;

const float bias = 255.0 / 254.0;
const float marginRatio = 1.05;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector * marginRatio;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0 / marginRatio;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;

  // Pass the texture coordinates:
  v_textureIndex = a_textureIndex;
  v_texture = a_texture;
  #endif

  v_color.a *= bias;
}
`,X5e=q5e;function Mf(){Mf=function(){return e};var n,e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(k,B,G){k[B]=G.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(k,B,G){return Object.defineProperty(k,B,{value:G,enumerable:!0,configurable:!0,writable:!0}),k[B]}try{c({},"")}catch{c=function(B,G,z){return B[G]=z}}function u(k,B,G,z){var se=B&&B.prototype instanceof v?B:v,b=Object.create(se.prototype),C=new K(z||[]);return r(b,"_invoke",{value:I(k,G,C)}),b}function h(k,B,G){try{return{type:"normal",arg:k.call(B,G)}}catch(z){return{type:"throw",arg:z}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",g="executing",p="completed",m={};function v(){}function y(){}function w(){}var _={};c(_,o,function(){return this});var R=Object.getPrototypeOf,E=R&&R(R(H([])));E&&E!==t&&i.call(E,o)&&(_=E);var x=w.prototype=v.prototype=Object.create(_);function P(k){["next","throw","return"].forEach(function(B){c(k,B,function(G){return this._invoke(B,G)})})}function T(k,B){function G(se,b,C,S){var A=h(k[se],k,b);if(A.type!=="throw"){var L=A.arg,M=L.value;return M&&typeof M=="object"&&i.call(M,"__await")?B.resolve(M.__await).then(function($){G("next",$,C,S)},function($){G("throw",$,C,S)}):B.resolve(M).then(function($){L.value=$,C(L)},function($){return G("throw",$,C,S)})}S(A.arg)}var z;r(this,"_invoke",{value:function(se,b){function C(){return new B(function(S,A){G(se,b,S,A)})}return z=z?z.then(C,C):C()}})}function I(k,B,G){var z=d;return function(se,b){if(z===g)throw Error("Generator is already running");if(z===p){if(se==="throw")throw b;return{value:n,done:!0}}for(G.method=se,G.arg=b;;){var C=G.delegate;if(C){var S=N(C,G);if(S){if(S===m)continue;return S}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(z===d)throw z=p,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);z=g;var A=h(k,B,G);if(A.type==="normal"){if(z=G.done?p:f,A.arg===m)continue;return{value:A.arg,done:G.done}}A.type==="throw"&&(z=p,G.method="throw",G.arg=A.arg)}}}function N(k,B){var G=B.method,z=k.iterator[G];if(z===n)return B.delegate=null,G==="throw"&&k.iterator.return&&(B.method="return",B.arg=n,N(k,B),B.method==="throw")||G!=="return"&&(B.method="throw",B.arg=new TypeError("The iterator does not provide a '"+G+"' method")),m;var se=h(z,k.iterator,B.arg);if(se.type==="throw")return B.method="throw",B.arg=se.arg,B.delegate=null,m;var b=se.arg;return b?b.done?(B[k.resultName]=b.value,B.next=k.nextLoc,B.method!=="return"&&(B.method="next",B.arg=n),B.delegate=null,m):b:(B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,m)}function W(k){var B={tryLoc:k[0]};1 in k&&(B.catchLoc=k[1]),2 in k&&(B.finallyLoc=k[2],B.afterLoc=k[3]),this.tryEntries.push(B)}function j(k){var B=k.completion||{};B.type="normal",delete B.arg,k.completion=B}function K(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(W,this),this.reset(!0)}function H(k){if(k||k===""){var B=k[o];if(B)return B.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var G=-1,z=function se(){for(;++G<k.length;)if(i.call(k,G))return se.value=k[G],se.done=!1,se;return se.value=n,se.done=!0,se};return z.next=z}}throw new TypeError(typeof k+" is not iterable")}return y.prototype=w,r(x,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:y,configurable:!0}),y.displayName=c(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(k){var B=typeof k=="function"&&k.constructor;return!!B&&(B===y||(B.displayName||B.name)==="GeneratorFunction")},e.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,w):(k.__proto__=w,c(k,l,"GeneratorFunction")),k.prototype=Object.create(x),k},e.awrap=function(k){return{__await:k}},P(T.prototype),c(T.prototype,a,function(){return this}),e.AsyncIterator=T,e.async=function(k,B,G,z,se){se===void 0&&(se=Promise);var b=new T(u(k,B,G,z),se);return e.isGeneratorFunction(B)?b:b.next().then(function(C){return C.done?C.value:b.next()})},P(x),c(x,l,"Generator"),c(x,o,function(){return this}),c(x,"toString",function(){return"[object Generator]"}),e.keys=function(k){var B=Object(k),G=[];for(var z in B)G.push(z);return G.reverse(),function se(){for(;G.length;){var b=G.pop();if(b in B)return se.value=b,se.done=!1,se}return se.done=!0,se}},e.values=H,K.prototype={constructor:K,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!k)for(var B in this)B.charAt(0)==="t"&&i.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=n)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var B=this;function G(A,L){return b.type="throw",b.arg=k,B.next=A,L&&(B.method="next",B.arg=n),!!L}for(var z=this.tryEntries.length-1;z>=0;--z){var se=this.tryEntries[z],b=se.completion;if(se.tryLoc==="root")return G("end");if(se.tryLoc<=this.prev){var C=i.call(se,"catchLoc"),S=i.call(se,"finallyLoc");if(C&&S){if(this.prev<se.catchLoc)return G(se.catchLoc,!0);if(this.prev<se.finallyLoc)return G(se.finallyLoc)}else if(C){if(this.prev<se.catchLoc)return G(se.catchLoc,!0)}else{if(!S)throw Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return G(se.finallyLoc)}}}},abrupt:function(k,B){for(var G=this.tryEntries.length-1;G>=0;--G){var z=this.tryEntries[G];if(z.tryLoc<=this.prev&&i.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var se=z;break}}se&&(k==="break"||k==="continue")&&se.tryLoc<=B&&B<=se.finallyLoc&&(se=null);var b=se?se.completion:{};return b.type=k,b.arg=B,se?(this.method="next",this.next=se.finallyLoc,m):this.complete(b)},complete:function(k,B){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&B&&(this.next=B),m},finish:function(k){for(var B=this.tryEntries.length-1;B>=0;--B){var G=this.tryEntries[B];if(G.finallyLoc===k)return this.complete(G.completion,G.afterLoc),j(G),m}},catch:function(k){for(var B=this.tryEntries.length-1;B>=0;--B){var G=this.tryEntries[B];if(G.tryLoc===k){var z=G.completion;if(z.type==="throw"){var se=z.arg;j(G)}return se}}throw Error("illegal catch attempt")},delegateYield:function(k,B,G){return this.delegate={iterator:H(k),resultName:B,nextLoc:G},this.method==="next"&&(this.arg=n),m}},e}function RX(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function wH(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){RX(s,i,r,o,a,"next",l)}function a(l){RX(s,i,r,o,a,"throw",l)}o(void 0)})}}var yH={size:{mode:"max",value:512},objectFit:"cover",correctCentering:!1,maxTextureSize:4096,debounceTimeout:500,crossOrigin:"anonymous"},Z5e=1;function CH(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.crossOrigin;return new Promise(function(i,r){var s=new Image;s.addEventListener("load",function(){i(s)},{once:!0}),s.addEventListener("error",function(o){r(o.error)},{once:!0}),t&&s.setAttribute("crossOrigin",t),s.src=n})}function Q5e(n){return SH.apply(this,arguments)}function SH(){return SH=wH(Mf().mark(function n(e){var t,i,r,s,o,a,l,c,u,h,d,f,g,p=arguments;return Mf().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(t=p.length>1&&p[1]!==void 0?p[1]:{},i=t.size,r=t.crossOrigin,r!=="use-credentials"){v.next=7;break}return v.next=4,fetch(e,{credentials:"include"});case 4:s=v.sent,v.next=10;break;case 7:return v.next=9,fetch(e);case 9:s=v.sent;case 10:return v.next=12,s.text();case 12:if(o=v.sent,a=new DOMParser().parseFromString(o,"image/svg+xml"),l=a.documentElement,c=l.getAttribute("width"),u=l.getAttribute("height"),!(!c||!u)){v.next=19;break}throw new Error("loadSVGImage: cannot use `size` if target SVG has no definite dimensions.");case 19:return typeof i=="number"&&(l.setAttribute("width",""+i),l.setAttribute("height",""+i)),h=new XMLSerializer().serializeToString(a),d=new Blob([h],{type:"image/svg+xml"}),f=URL.createObjectURL(d),g=CH(f),g.finally(function(){return URL.revokeObjectURL(f)}),v.abrupt("return",g);case 26:case"end":return v.stop()}},n)})),SH.apply(this,arguments)}function J5e(n){return _H.apply(this,arguments)}function _H(){return _H=wH(Mf().mark(function n(e){var t,i,r,s,o,a,l=arguments;return Mf().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=l.length>1&&l[1]!==void 0?l[1]:{},r=i.size,s=i.crossOrigin,o=((t=e.split(/[#?]/)[0].split(".").pop())===null||t===void 0?void 0:t.trim().toLowerCase())==="svg",!(o&&r)){u.next=16;break}return u.prev=3,u.next=6,Q5e(e,{size:r,crossOrigin:s});case 6:a=u.sent,u.next=14;break;case 9:return u.prev=9,u.t0=u.catch(3),u.next=13,CH(e,{crossOrigin:s});case 13:a=u.sent;case 14:u.next=19;break;case 16:return u.next=18,CH(e,{crossOrigin:s});case 18:a=u.sent;case 19:return u.abrupt("return",a);case 20:case"end":return u.stop()}},n,null,[[3,9]])})),_H.apply(this,arguments)}function e8e(n,e,t){var i=t.objectFit,r=t.size,s=t.correctCentering,o=i==="contain"?Math.max(n.width,n.height):Math.min(n.width,n.height),a=r.mode==="auto"?o:r.mode==="force"?r.value:Math.min(r.value,o),l=(n.width-o)/2,c=(n.height-o)/2;if(s){var u=e.getCorrectionOffset(n,o);l=u.x,c=u.y}return{sourceX:l,sourceY:c,sourceSize:o,destinationSize:a}}function t8e(n,e,t){for(var i=e.canvas,r=i.width,s=i.height,o=[],a=t.x,l=t.y,c=t.rowHeight,u=t.maxRowWidth,h={},d=0,f=n.length;d<f;d++){var g=n[d],p=g.key,m=g.image,v=g.sourceSize,y=g.sourceX,w=g.sourceY,_=g.destinationSize,R=_+Z5e;l+R>s||a+R>r&&l+R+c>s||(a+R>r&&(u=Math.max(u,a),a=0,l+=c,c=R),o.push({key:p,image:m,sourceX:y,sourceY:w,sourceSize:v,destinationX:a,destinationY:l,destinationSize:_}),h[p]={x:a,y:l,size:_},a+=R,c=Math.max(c,R))}u=Math.max(u,a);for(var E=u,x=l+c,P=0,T=o.length;P<T;P++){var I=o[P],N=I.image,W=I.sourceSize,j=I.sourceX,K=I.sourceY,H=I.destinationSize,k=I.destinationX,B=I.destinationY;e.drawImage(N,j,K,W,W,k,B,H,H)}return{atlas:h,texture:e.getImageData(0,0,E,x),cursor:{x:a,y:l,rowHeight:c,maxRowWidth:u}}}function n8e(n,e,t){var i=n.atlas,r=n.textures,s=n.cursor,o={atlas:xs({},i),textures:gH(r.slice(0,-1)),cursor:xs({},s)},a=[];for(var l in e){var c,u=e[l];if(u.status==="ready"){var h=(c=i[l])===null||c===void 0?void 0:c.textureIndex;typeof h!="number"&&a.push(xs({key:l},u))}}for(var d=function(){var g=t8e(a,t,o.cursor),p=g.atlas,m=g.texture,v=g.cursor;o.cursor=v;var y=[];a.forEach(function(w){p[w.key]?o.atlas[w.key]=xs(xs({},p[w.key]),{},{textureIndex:o.textures.length}):y.push(w)}),o.textures.push(m),a=y,a.length&&(o.cursor={x:0,y:0,rowHeight:0,maxRowWidth:0},t.clearRect(0,0,t.canvas.width,t.canvas.height))};a.length;)d();return o}var i8e=function(){function n(){pH(this,n),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",{willReadFrequently:!0})}return mH(n,[{key:"getCorrectionOffset",value:function(t,i){this.canvas.width=i,this.canvas.height=i,this.context.clearRect(0,0,i,i),this.context.drawImage(t,0,0,i,i);for(var r=this.context.getImageData(0,0,i,i).data,s=new Uint8ClampedArray(r.length/4),o=0;o<r.length;o++)s[o]=r[o*4+3];for(var a=0,l=0,c=0,u=0;u<i;u++)for(var h=0;h<i;h++){var d=s[u*i+h];c+=d,a+=d*h,l+=d*u}var f=a/c,g=l/c;return{x:f-i/2,y:g-i/2}}}]),n}(),yE=function(n){SX(e,n);function e(){var t,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return pH(this,e),t=yX(this,e),mr(ca(t),"canvas",document.createElement("canvas")),mr(ca(t),"ctx",t.canvas.getContext("2d",{willReadFrequently:!0})),mr(ca(t),"corrector",new i8e),mr(ca(t),"imageStates",{}),mr(ca(t),"textures",[t.ctx.getImageData(0,0,1,1)]),mr(ca(t),"lastTextureCursor",{x:0,y:0,rowHeight:0,maxRowWidth:0}),mr(ca(t),"atlas",{}),t.options=xs(xs({},yH),i),t.canvas.width=t.options.maxTextureSize,t.canvas.height=t.options.maxTextureSize,t}return mH(e,[{key:"scheduleGenerateTexture",value:function(){var i=this;typeof this.frameId!="number"&&(typeof this.options.debounceTimeout=="number"?this.frameId=window.setTimeout(function(){i.generateTextures(),i.frameId=void 0},this.options.debounceTimeout):this.generateTextures())}},{key:"generateTextures",value:function(){var i=n8e({atlas:this.atlas,textures:this.textures,cursor:this.lastTextureCursor},this.imageStates,this.ctx),r=i.atlas,s=i.textures,o=i.cursor;this.atlas=r,this.textures=s,this.lastTextureCursor=o,this.emit(e.NEW_TEXTURE_EVENT,{atlas:r,textures:s})}},{key:"registerImage",value:function(){var t=wH(Mf().mark(function r(s){var o,a;return Mf().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.imageStates[s]){c.next=2;break}return c.abrupt("return");case 2:return this.imageStates[s]={status:"loading"},c.prev=3,o=this.options.size,c.next=7,J5e(s,{size:o.mode==="force"?o.value:void 0,crossOrigin:this.options.crossOrigin||void 0});case 7:a=c.sent,this.imageStates[s]=xs({status:"ready",image:a},e8e(a,this.corrector,this.options)),this.scheduleGenerateTexture(),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(3),this.imageStates[s]={status:"error"};case 15:case"end":return c.stop()}},r,this,[[3,12]])}));function i(r){return t.apply(this,arguments)}return i}()},{key:"getAtlas",value:function(){return this.atlas}},{key:"getTextures",value:function(){return this.textures}}]),e}(jL.EventEmitter);mr(yE,"NEW_TEXTURE_EVENT","newTexture");var r8e=["drawHover","drawLabel","drawingMode","keepWithinCircle","padding","colorAttribute","imageAttribute"],EX=WebGLRenderingContext,xX=EX.UNSIGNED_BYTE,_y=EX.FLOAT,s8e=xs(xs({},yH),{},{drawingMode:"background",keepWithinCircle:!0,drawLabel:void 0,drawHover:void 0,padding:0,colorAttribute:"color",imageAttribute:"image"}),o8e=["u_sizeRatio","u_correctionRatio","u_cameraAngle","u_percentagePadding","u_matrix","u_colorizeImages","u_keepWithinCircle","u_atlas"];function CE(n){var e,t=document.createElement("canvas").getContext("webgl"),i=Math.min(t.getParameter(t.MAX_TEXTURE_SIZE),yH.maxTextureSize);t.canvas.remove();var r=xs(xs(xs({},s8e),{maxTextureSize:i}),n||{}),s=r.drawHover,o=r.drawLabel,a=r.drawingMode,l=r.keepWithinCircle,c=r.padding,u=r.colorAttribute,h=r.imageAttribute,d=Y5e(r,r8e),f=new yE(d);return e=function(g){SX(p,g);function p(m,v,y){var w;return pH(this,p),w=yX(this,p,[m,v,y]),mr(ca(w),"drawLabel",o),mr(ca(w),"drawHover",s),mr(ca(w),"textureManagerCallback",null),w.textureManagerCallback=function(_){var R=_.atlas,E=_.textures,x=E.length!==w.textures.length;w.atlas=R,w.textureImages=E,x&&w.upgradeShaders(),w.bindTextures(),w.latestRenderParams&&w.render(w.latestRenderParams),w.renderer&&w.renderer.refresh&&w.renderer.refresh()},f.on(yE.NEW_TEXTURE_EVENT,w.textureManagerCallback),w.atlas=f.getAtlas(),w.textureImages=f.getTextures(),w.textures=w.textureImages.map(function(){return m.createTexture()}),w.bindTextures(),w}return mH(p,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:X5e,FRAGMENT_SHADER_SOURCE:K5e({texturesCount:f.getTextures().length}),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:o8e,ATTRIBUTES:[{name:"a_position",size:2,type:_y},{name:"a_size",size:1,type:_y},{name:"a_color",size:4,type:xX,normalized:!0},{name:"a_id",size:4,type:xX,normalized:!0},{name:"a_texture",size:4,type:_y},{name:"a_textureIndex",size:1,type:_y}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:_y}],CONSTANT_DATA:[[p.ANGLE_1],[p.ANGLE_2],[p.ANGLE_3]]}}},{key:"upgradeShaders",value:function(){var v=this.getDefinition(),y=this.normalProgram,w=y.program,_=y.buffer,R=y.vertexShader,E=y.fragmentShader,x=y.gl;x.deleteProgram(w),x.deleteBuffer(_),x.deleteShader(R),x.deleteShader(E),this.normalProgram=this.getProgramInfo("normal",x,v.VERTEX_SHADER_SOURCE,v.FRAGMENT_SHADER_SOURCE,null)}},{key:"kill",value:function(){var v,y=(v=this.normalProgram)===null||v===void 0?void 0:v.gl;if(y)for(var w=0;w<this.textures.length;w++)y.deleteTexture(this.textures[w]);this.textureManagerCallback&&(f.off(yE.NEW_TEXTURE_EVENT,this.textureManagerCallback),this.textureManagerCallback=null),CX(p,"kill",this)([])}},{key:"bindTextures",value:function(){for(var v=this.normalProgram.gl,y=0;y<this.textureImages.length;y++){if(y>=this.textures.length){var w=v.createTexture();w&&this.textures.push(w)}v.activeTexture(v.TEXTURE0+y),v.bindTexture(v.TEXTURE_2D,this.textures[y]),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,this.textureImages[y]),v.generateMipmap(v.TEXTURE_2D)}}},{key:"renderProgram",value:function(v,y){if(!y.isPicking)for(var w=y.gl,_=0;_<this.textureImages.length;_++)w.activeTexture(w.TEXTURE0+_),w.bindTexture(w.TEXTURE_2D,this.textures[_]);CX(p,"renderProgram",this)([v,y])}},{key:"processVisibleItem",value:function(v,y,w){var _=this.array,R=rm(w[u]),E=w[h],x=E?this.atlas[E]:void 0;if(typeof E=="string"&&!x&&f.registerImage(E),_[y++]=w.x,_[y++]=w.y,_[y++]=w.size,_[y++]=R,_[y++]=v,x&&typeof x.textureIndex=="number"){var P=this.textureImages[x.textureIndex],T=P.width,I=P.height;_[y++]=x.x/T,_[y++]=x.y/I,_[y++]=x.size/T,_[y++]=x.size/I,_[y++]=x.textureIndex}else _[y++]=0,_[y++]=0,_[y++]=0,_[y++]=0,_[y++]=0}},{key:"setUniforms",value:function(v,y){var w=y.gl,_=y.uniformLocations,R=_.u_sizeRatio,E=_.u_correctionRatio,x=_.u_matrix,P=_.u_atlas,T=_.u_colorizeImages,I=_.u_keepWithinCircle,N=_.u_cameraAngle,W=_.u_percentagePadding;this.latestRenderParams=v,w.uniform1f(E,v.correctionRatio),w.uniform1f(R,l?v.sizeRatio:v.sizeRatio/Math.SQRT2),w.uniform1f(N,v.cameraAngle),w.uniform1f(W,c),w.uniformMatrix3fv(x,!1,v.matrix),w.uniform1iv(P,gH(new Array(this.textureImages.length)).map(function(j,K){return K})),w.uniform1i(T,a==="color"?1:0),w.uniform1i(I,l?1:0)}}]),p}(Hq),mr(e,"ANGLE_1",0),mr(e,"ANGLE_2",2*Math.PI/3),mr(e,"ANGLE_3",4*Math.PI/3),mr(e,"textureManager",f),e}CE(),CE({keepWithinCircle:!1,size:{mode:"force",value:256},drawingMode:"color",correctCentering:!0});var TX;let MX,AX,PX,IX,OX,kX,DX;function a8e(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(E,x,P){return function(T,I){x&&(I=T,T=n);for(var N=0;N<E.length;N++)I=E[N].apply(T,P?[I]:[]);return P?I:T}}function w(E,x,P,T){if(typeof E!="function"&&(T||E!==void 0))throw new TypeError(x+" must "+(P||"be")+" a function"+(T?"":" or undefined"));return E}function _(E,x,P,T,I,N,W,j,K,H,k){function B(oe){if(!k(oe))throw new TypeError("Attempted to access private element on non-instance")}var G=[].concat(x[0]),z=x[3],se=!W,b=I===1,C=I===3,S=I===4,A=I===2;function L(oe,le,je){return function(ye,xe){return le&&(xe=ye,ye=E),je&&je(ye),M[oe].call(ye,xe)}}if(!se){var M={},$=[],Z=C?"get":S||b?"set":"value";if(K?(H||b?M={get:NX(function(){return z(this)},T,"get"),set:function(oe){x[4](this,oe)}}:M[Z]=z,H||NX(M[Z],T,A?"":Z)):H||(M=Object.getOwnPropertyDescriptor(E,T)),!H&&!K){if((a=m[+j][T])&&(a^I)!=7)throw Error("Decorating two elements with the same name ("+M[Z].name+") is not supported yet");m[+j][T]=I<3?1:I}}for(var re=E,ue=G.length-1;ue>=0;ue-=P?2:1){var ae=w(G[ue],"A decorator","be",!0),De=P?G[ue-1]:void 0,Ee={},ee={kind:["field","accessor","method","getter","setter","class"][I],name:T,metadata:o,addInitializer:(function(oe,le){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(le,"An initializer","be",!0),N.push(le)}).bind(null,Ee)};if(se)a=ae.call(De,re,ee),Ee.v=1,w(a,"class decorators","return")&&(re=a);else if(ee.static=j,ee.private=K,a=ee.access={has:K?k.bind():function(oe){return T in oe}},S||(a.get=K?A?function(oe){return B(oe),M.value}:L("get",0,B):function(oe){return oe[T]}),A||C||(a.set=K?L("set",0,B):function(oe,le){oe[T]=le}),re=ae.call(De,b?{get:M.get,set:M.set}:M[Z],ee),Ee.v=1,b){if(typeof re=="object"&&re)(a=w(re.get,"accessor.get"))&&(M.get=a),(a=w(re.set,"accessor.set"))&&(M.set=a),(a=w(re.init,"accessor.init"))&&$.unshift(a);else if(re!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(re,(H?"field":"method")+" decorators","return")&&(H?$.unshift(re):M[Z]=re)}return I<2&&W.push(y($,j,1),y(N,j,0)),H||se||(K?b?W.splice(-1,0,L("get",j),L("set",j)):W.push(A?M[Z]:w.call.bind(M[Z])):g(E,T,M)),re}function R(E){return g(E,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(E){E&&u.push(y(E))},d=function(E,x){for(var P=0;P<t.length;P++){var T=t[P],I=T[1],N=7&I;if((8&I)==E&&!N==x){var W=T[2],j=!!T[3],K=16&I;_(E?n:n.prototype,T,K,j?"#"+W:l8e(W),N,N<2?[]:E?c=c||[]:l=l||[],u,!!E,j,x,E&&j?function(H){return u8e(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||R(n),{e:a,get c(){var E=[];return v&&[R(n=_(n,[e],i,n.name,5,E)),y(E,1)]}}}function l8e(n){var e=c8e(n,"string");return typeof e=="symbol"?e:e+""}function c8e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function NX(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function u8e(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}const SE="#000000";function LX(n,e,t,i,r,s){n.beginPath(),n.moveTo(e+s,t),n.lineTo(e+i-s,t),n.quadraticCurveTo(e+i,t,e+i,t+s),n.lineTo(e+i,t+r-s),n.quadraticCurveTo(e+i,t+r,e+i-s,t+r),n.lineTo(e+s,t+r),n.quadraticCurveTo(e,t+r,e,t+r-s),n.lineTo(e,t+s),n.quadraticCurveTo(e,t,e+s,t),n.closePath()}let HX;class h8e{constructor(){this.ea=fe(XH),this.container=void 0,this.searchinput=void 0,this.tabid=AX(this),this.datachannel=(PX(this),IX(this)),this.searchValue=(OX(this),kX(this)),this.state=(DX(this),{searchQuery:""})}searchValueChanged(e,t){console.log("searchValue changed",e,t),this.setSearchQuery(e)}attached(){this.ea.subscribe("showtab",e=>{this.tabid===this.showtabid&&(this.layout?this.startAnimate():(console.warn("empty layout"),this.renderer=new fX(this.graph,this.container,{nodeProgramClasses:{image:CE()},renderEdgeLabels:!0,allowInvalidContainer:!0}),this.layout=new bX(this.graph),this.startAnimate()))}),this.datachannel?this.ea.subscribe(this.datachannel,e=>{console.log("network received data:",e),Array.isArray(e)?this.transformDataToGraph(e):(this.layout&&this.stopAnimate(),e.type=="changeNode"?(console.log("network changeNode"),this.renameNode(e.old,e.value)):e.type=="changeType"?(console.log("network changeType"),this.changeNodeType(e.node,e.value)):e.type=="changeEdge"?(console.log("network changeEdge"),this.updateEdge(e.subject,e.object,e.value)):console.warn("not recognized change",e),this.layout&&this.startAnimate())}):console.warn("datachannel empty"),this.data=[],this.transformDataToGraph(this.data)}setSearchQuery(e){if(this.state.searchQuery=e,this.searchValue!==e&&(this.searchValue=e),e){const t=e.toLowerCase(),i=this.graph.nodes().map(r=>({id:r,label:this.graph.getNodeAttribute(r,"label")})).filter(({label:r})=>r.toLowerCase().includes(t));if(i.length===1&&i[0].label===e){this.state.selectedNode=i[0].id,this.state.suggestions=void 0;const r=this.renderer.getNodeDisplayData(state.selectedNode);this.renderer.getCamera().animate(r,{duration:500})}else this.state.selectedNode=void 0,this.state.suggestions=new Set(i.map(({id:r})=>r))}else this.state.selectedNode=void 0,this.state.suggestions=void 0;this.renderer.refresh({skipIndexation:!0})}setHoveredNode(e){e&&(this.state.hoveredNode=e,this.state.hoveredNeighbors=new Set(this.graph.neighbors(e))),e||(this.state.hoveredNode=void 0,this.state.hoveredNeighbors=void 0),this.renderer.refresh({skipIndexation:!0})}changeNodeType(e,t){const i=this.typeColorMap[t]||"gray";if(!this.graph.hasNode(e)){console.log(`Node "${e}" does not exist. Creating.`);const r=this.graph.order*2*Math.PI/this.graph.order;this.graph.addNode(e,{label:e,size:15,color:i,x:100*Math.cos(r),y:100*Math.sin(r)})}this.graph.setNodeAttribute(e,"color",i),this.graph.setNodeAttribute(e,"subjectType",t)}renameNode(e,t){if(!e){this.changeNodeType(t,"default");return}if(!this.graph.hasNode(e)){console.error(`Node "${e}" does not exist.`);return}if(this.graph.hasNode(t)){console.error(`Node "${t}" already exists.`);return}const i=this.graph.getNodeAttributes(e);i.label=t,this.graph.addNode(t,i),this.graph.forEachEdge(e,(r,s,o,a)=>{const l=o===e?a:o;this.graph.addEdge(t,l,s)}),this.graph.dropNode(e)}updateEdge(e,t,i){this.graph.hasEdge(e,t)?!i||i==0?(this.graph.dropEdge(e,t),console.log(`Edge between "${e}" and "${t}" has been removed.`)):(this.graph.setEdgeAttribute(e,t,"label",i),console.log(`Edge between "${e}" and "${t}" updated with label: "${i}".`)):i!==""&&i!==0?(this.graph.addEdge(e,t,{relationship:"related",type:"line",label:i,size:5}),console.log(`Edge between "${e}" and "${t}" has been added with label: "${i}".`)):console.warn(`Edge between "${e}" and "${t}" does not exist and no action was taken.`)}showgraph(){console.log("showgraph()"),this.renderer=new fX(this.graph,this.container,{nodeProgramClasses:{image:CE()},renderEdgeLabels:!0,allowInvalidContainer:!0}),this.renderer.on("enterNode",({node:e})=>{this.setHoveredNode(e)}),this.renderer.on("leaveNode",()=>{this.setHoveredNode(void 0)}),this.renderer.setSetting("defaultDrawNodeHover",(e,t,i)=>{const r=i.labelSize,s=i.labelFont,o=i.labelWeight,a=r-2,l=t.label,c=t.tag!=="unknown"?t.tag:"",u=t.clusterLabel;e.beginPath(),e.fillStyle="#fff",e.shadowOffsetX=0,e.shadowOffsetY=2,e.shadowBlur=8,e.shadowColor="#000",e.font=`${o} ${r}px ${s}`;const h=e.measureText(l).width;e.font=`${o} ${a}px ${s}`;const d=c?e.measureText(c).width:0;e.font=`${o} ${a}px ${s}`;const f=u?e.measureText(u).width:0,g=Math.max(h,d,f),p=Math.round(t.x),m=Math.round(t.y),v=Math.round(g+r/2+t.size+3),y=Math.round(r/2+4),w=c?Math.round(a/2+9):0,_=Math.round(a/2+9);LX(e,p,m-w-12,v,_+y+w+12,5),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.fillStyle=SE,e.font=`${o} ${r}px ${s}`,e.fillText(l,t.x+t.size+3,t.y+r/3),c&&(e.fillStyle=SE,e.font=`${o} ${a}px ${s}`,e.fillText(c,t.x+t.size+3,t.y-2*r/3-2)),e.fillStyle=t.color,e.font=`${o} ${a}px ${s}`,e.fillText(u,t.x+t.size+3,t.y+r/3+3+a)}),this.renderer.setSetting("nodeReducer",(e,t)=>{const i={...t};return this.state.hoveredNeighbors&&!this.state.hoveredNeighbors.has(e)&&this.state.hoveredNode!==e&&(i.label="",i.color="#f6f6f6"),this.state.selectedNode===e?i.highlighted=!0:this.state.suggestions&&(this.state.suggestions.has(e)?i.forceLabel=!0:(i.label="",i.color="#f6f6f6")),i}),this.renderer.setSetting("edgeReducer",(e,t)=>{const i={...t};return this.state.hoveredNode&&!this.graph.extremities(e).every(r=>r===this.state.hoveredNode||this.graph.areNeighbors(r,this.state.hoveredNode))&&(i.hidden=!0),this.state.suggestions&&(!this.state.suggestions.has(this.graph.source(e))||!this.state.suggestions.has(this.graph.target(e)))&&(i.hidden=!0),i}),this.layout=new bX(this.graph),this.startAnimate()}transformDataToGraph(e){this.graph?this.graph.clearEdges():this.graph=new ln({type:"undirected"}),this.layout&&this.stopAnimate(),console.log("transformDataToGraph data.length",e.length),e.length==0&&(e=[["Subject/Object/Predicate","type","CRC Risk","CRC Neoplasia","Physical Activity"],["Trans-Chlordane","environmental","corelates","is",0],["PCB194","environmental","corelates",1],["Sterilisation","biometric","increase",0],["Tobacco Consumption","lifestyle","increase",1,1],["PAC-RSK","Interaction Term","decrease",0,1]]),this.typeColorMap={environmental:"blue",biometric:"red",lifestyle:"green","Interaction Term":"purple"};const t=e[0],i=t.slice(2);for(let r=0;r<i.length;r++){const s=i[r];if(!this.graph.hasNode(s)){let o=r*2*Math.PI/e.length;this.graph.addNode(s,{label:s,tag:"object",clusterLabel:"cluster",size:15,color:"orange",x:100*Math.cos(o),y:100*Math.sin(o)})}}for(let r=1;r<e.length;r++){const s=e[r],o=s[0],a=s[1],l=this.typeColorMap[a]||"gray";let c=r*2*Math.PI/e.length;this.graph.hasNode(o)||this.graph.addNode(o,{label:o,tag:a,clusterLabel:"cluster",size:7,color:l,subjectType:a,x:100*Math.cos(c),y:100*Math.sin(c)});for(let u=2;u<t.length;u++){const h=t[u],d=s[u];if(d&&d!=0){console.log("transformDataToGraph adding edge",o,h);const f=`${o}-${h}`;this.graph.hasEdge(f)?console.log("edge exist adddge"):(console.log("edge not exist adddge"),this.graph.addEdge(o,h,{relationship:"related",type:"line",label:d,size:5}))}}}this.layout?(console.log("layout detected, stop(), start()"),this.startAnimate()):(console.log("no layout showgraph()"),this.showgraph())}layoutOnOff(){this.animationstarted=!this.animationstarted,this.animationstarted?this.layout.start():this.layout.stop()}stopAnimate(){this.layout.stop()}startAnimate(){this.animationstarted&&this.layout.start()}drawHover(e,t,i){const r=i.labelSize,s=i.labelFont,o=i.labelWeight,a=r-2,l=t.label,c=t.tag!=="unknown"?t.tag:"",u=t.clusterLabel;e.beginPath(),e.fillStyle="#fff",e.shadowOffsetX=0,e.shadowOffsetY=2,e.shadowBlur=8,e.shadowColor="#000",e.font=`${o} ${r}px ${s}`;const h=e.measureText(l).width;e.font=`${o} ${a}px ${s}`;const d=c?e.measureText(c).width:0;e.font=`${o} ${a}px ${s}`;const f=u?e.measureText(u).width:0,g=Math.max(h,d,f),p=Math.round(t.x),m=Math.round(t.y),v=Math.round(g+r/2+t.size+3),y=Math.round(r/2+4),w=c?Math.round(a/2+9):0,_=Math.round(a/2+9);LX(e,p,m-w-12,v,_+y+w+12,5),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.fillStyle=SE,e.font=`${o} ${r}px ${s}`,e.fillText(l,t.x+t.size+3,t.y+r/3),c&&(e.fillStyle=SE,e.font=`${o} ${a}px ${s}`,e.fillText(c,t.x+t.size+3,t.y-2*r/3-2)),e.fillStyle=t.color,e.font=`${o} ${a}px ${s}`,e.fillText(u,t.x+t.size+3,t.y+r/3+3+a)}}TX=h8e,{e:[AX,PX,IX,OX,kX,DX],c:[HX,MX]}=a8e(TX,[Um({...Fje,name:"sv-network"})],[[Sh,0,"tabid"],[Sh,0,"datachannel"],[Sh,0,"searchValue"]]),MX();const RH=dh.createContainer();RH.register(ch.instance(Is,qc.getOrCreate(globalThis))),RH.register(zne);const Ry=RH.get(Une);Ry.define("sv-chartjs",oC),Ry.define("sv-chartjs-scatter",b3),Ry.define("sv-table",K9),Ry.define("sv-chartjs-geo",jK),Ry.define("sv-network",HX)});
