(function(Av){typeof define=="function"&&define.amd?define(Av):Av()})(function(){"use strict";function Av(){Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"))}const Za={get(n,e){var t;return(t=e[Symbol.metadata])==null?void 0:t[n]},define(n,e,...t){var r;let i=(r=Object.getOwnPropertyDescriptor(e,Symbol.metadata))==null?void 0:r.value;i==null&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const s=t.length;switch(s){case 0:throw new Error("At least one key must be provided");case 1:i[t[0]]=n;return;case 2:i[t[0]]=i[t[1]]=n;return;default:{for(let o=0;o<s;++o)i[t[o]]=n;return}}},has(n,e){const t=e[Symbol.metadata];return t==null?!1:n in t},delete(n,e){const t=e[Symbol.metadata];t!=null&&Reflect.deleteProperty(t,n)}},yp=Object.freeze,DD=Object.assign,oG=String,Wo=Za.get,Cp=Za.define,wi=n=>n instanceof Promise,Kn=n=>n instanceof Array,Qd=n=>n instanceof Set,pc=n=>n instanceof Map,ND=n=>n instanceof Object;function Pv(n){return typeof n=="object"&&n!==null||typeof n=="function"}const Ht=n=>typeof n=="function",ft=n=>typeof n=="string",aG=n=>typeof n=="number",Kt=()=>Object.create(null),Jr=Object.is,$n=(n,...e)=>new Error(`AUR${oG(n).padStart(4,"0")}: ${cG(n,...e)}`),lG={1:"No registration for interface: '{{0}}'",2:`'{{0}}' was registered with "none" resolver, are you injecting the right key?`,3:"Cyclic dependency found: {{0}}",4:"Resolver for {{0}} returned a null factory",5:"Invalid resolver strategy specified: {{0}}. Did you assign an invalid strategy value?",6:"Unable to autoregister dependency: {{0}}",7:'Resource key "{{0}}" already registered',8:"Unable to resolve key: {{0}}",9:"Attempted to jitRegister something that is not a constructor: '{{0}}'. Did you forget to register this resource?",10:'Attempted to jitRegister an intrinsic type: "{{0}}". Did you forget to add @inject(Key)',11:"Invalid resolver, null/undefined returned from the static register method.",12:"Attempted to jitRegister an interface: {{0}}",13:"Cannot call resolve '{{0}}' before calling prepare or after calling dispose.",14:"Key cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?A common cause is circular dependency with bundler, did you accidentally introduce circular dependency into your module graph?",15:"'{{0}}' is a native function and cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.",16:'There is not a currently active container to resolve "{{0}}". Are you trying to "new Class(...)" that has a resolve(...) call?',17:"Failed to instantiate '{{0}}' via @newInstanceOf/@newInstanceForScope, there's no registration and no default implementation, or the default implementation does not result in factory for constructing the instances.",18:"Invalid channel name or instance: '{{0}}'.",19:"Invalid channel name or type: {{0}}.",20:"No defined value found when calling firstDefined()",21:"Invalid module transform input: {{0}}. Expected Promise or Object.",22:"The @inject decorator on the target ('{{0}}') type '{{1}}' is not supported.",23:"Resource key '{{0}}' has already been registered."},cG=(n,...e)=>{let t=lG[n];for(let i=0;i<e.length;++i)t=t.replace(`{{${i}}}`,String(e[i]));return t},Zd=(...n)=>globalThis.console.error(...n),Sp=(()=>{const n={};let e=!1,t=0,i=0,s=0;return r=>{switch(typeof r){case"number":return r>=0&&(r|0)===r;case"string":if(e=n[r],e!==void 0)return e;if(t=r.length,t===0)return n[r]=!1;for(i=0,s=0;s<t;++s)if(i=r.charCodeAt(s),s===0&&i===48&&t>1||i<48||i>57)return n[r]=!1;return n[r]=!0;default:return!1}}})(),LD=function(){const n=DD(Kt(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=t=>t===""?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:n[t]===!0?1:0;return(t,i)=>{const s=t.length;if(s===0)return t;let r=!1,o="",a,l="",c=0,h=t.charAt(0),u=e(h),d=0;for(;d<s;++d)a=c,l=h,c=u,h=t.charAt(d+1),u=e(h),c===0?o.length>0&&(r=!0):(!r&&o.length>0&&c===2&&(r=a===3||u===3),o+=i(l,r),r=!1);return o}}(),vi=function(){const n=Kt(),e=(t,i)=>i?t.toUpperCase():t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=LD(t,e)),i}}(),$D=function(){const n=Kt();return e=>{let t=n[e];return t===void 0&&(t=vi(e),t.length>0&&(t=t[0].toUpperCase()+t.slice(1)),n[e]=t),t}}(),FD=function(){const n=Kt(),e=(t,i)=>i?`-${t.toLowerCase()}`:t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=LD(t,e)),i}}(),p1=n=>{const e=n.length,t=Array(e);let i=0;for(;i<e;++i)t[i]=n[i];return t},Jd=(n,e)=>{const t=e.name;e.addInitializer(function(){Reflect.defineProperty(this,t,{value:n.bind(this),writable:!0,configurable:!0,enumerable:!1})})},ni=(...n)=>{const e=[];let t=0;const i=n.length;let s=0,r,o=0;for(;o<i;++o)if(r=n[o],r!==void 0){s=r.length;let a=0;for(;a<s;++a)e[t++]=r[a]}return e},mc=(...n)=>{const e=n.length;let t,i=0;for(;e>i;++i)if(t=n[i],t!==void 0)return t;throw $n(20)},hG=function(){const n=Function.prototype,e=Object.getPrototypeOf,t=new WeakMap;let i=n,s=0,r;return function(o){if(r=t.get(o),r===void 0)for(t.set(o,r=[i=o]),s=0;(i=e(i))!==n;)r[++s]=i;return r}}();function m1(...n){return DD(Kt(),...n)}const BD=(()=>{const n=new WeakMap;let e=!1,t="",i=0;return s=>(e=n.get(s),e==null&&(i=(t=s.toString()).length,e=i>28&&t.indexOf("[native code] }")===i-15,n.set(s,e)),e)})(),xt=(n,e)=>wi(n)?n.then(e):e(n),yi=(...n)=>{let e,t,i,s=0,r=n.length;for(;s<r;++s)e=n[s],wi(e=n[s])&&(t===void 0?t=e:i===void 0?i=[t,e]:i.push(e));return i===void 0?t:Promise.all(i)},uG=(n,e)=>new gr(n,0,e),_p=(n,e)=>new gr(n,1,e),VD=(n,e)=>new gr(n,2,e),dG=(n,e)=>new gr(n,3,e),fG=(n,e)=>new gr(n,3,jD(e)),Iv=(n,e)=>new gr(e,5,n),gG=(n,...e)=>new AG(n,e),WD=new WeakMap,jD=n=>(e,t,i)=>{let s=WD.get(e);if(s===void 0&&WD.set(e,s=new WeakMap),s.has(i))return s.get(i);const r=n(e,t,i);return s.set(i,r),r},Hh={instance:uG,singleton:_p,transient:VD,callback:dG,cachedCallback:fG,aliasTo:Iv,defer:gG},Rp=function(n){return function(t){t.register(_p(this,this),Iv(this,n))}},Dh="au:annotation",bc=(n,e)=>e===void 0?`${Dh}:${n}`:`${Dh}:${n}:${e}`,pG=yp({name:"au:annotation",appendTo:(n,e)=>{const t=Wo(Dh,n);t===void 0?Cp([e],n,Dh):t.push(e)},set(n,e,t){Cp(t,n,bc(e))},get:(n,e)=>Wo(bc(e),n),getKeys(n){let e=Wo(Dh,n);return e===void 0&&Cp(e=[],n,Dh),e},isKey:n=>n.startsWith(Dh),keyFor:bc}),jo="au:resource",Nh=(n,e,t)=>`${jo}:${n}`,zD={annotation:pG},UD=Object.prototype.hasOwnProperty;function fr(n,e,t,i){let s=Wo(bc(n),t);return s===void 0?(s=e[n],s===void 0?(s=t[n],s===void 0||!UD.call(t,n)?i():s):s):s}function eo(n,e,t){let i=Wo(bc(n),e);return i===void 0?(i=e[n],i===void 0||!UD.call(e,n)?t():i):i}function to(n,e,t){const i=e[n];return i===void 0?t():i}const zo=Symbol.for("au:registrable"),mG={none(n){throw $n(2,n)},singleton:n=>new gr(n,1,n),transient:n=>new gr(n,2,n)};class Uo{constructor(e,t){this.inheritParentResources=e,this.defaultResolver=t}static from(e){return e===void 0||e===Uo.DEFAULT?Uo.DEFAULT:new Uo(e.inheritParentResources??!1,e.defaultResolver??mG.singleton)}}Uo.DEFAULT=Uo.from({});const bG=n=>new xp(null,Uo.from(n)),wG=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let vG=0,wn=null;class xp{get depth(){return this._parent===null?0:this._parent.depth+1}get parent(){return this._parent}constructor(e,t){if(this.id=++vG,this._registerDepth=0,this._disposableResolvers=new Map,this._parent=e,this.config=t,this._resolvers=new Map,this.res={},e===null)this.root=this,this._factories=new Map;else if(this.root=e.root,this._factories=e._factories,t.inheritParentResources)for(const i in e.res)this.registerResolver(i,e.res[i]);this._resolvers.set(tf,CG)}register(...e){var h,u,d,f;if(++this._registerDepth===100)throw $n(6,...e);let t,i,s,r,o,a=0,l=e.length,c;for(;a<l;++a)if(t=e[a],!!Pv(t))if(Mp(t))t.register(this);else if((c=Wo(jo,t))!=null)c.register(this);else if(_G(t)){const g=(h=t[Symbol.metadata])==null?void 0:h[zo];if(Mp(g))g.register(this);else if(ft((u=t.$au)==null?void 0:u.type)){const p=t.$au,m=(t.aliases??lt).concat(p.aliases??lt);let w=`${jo}:${p.type}:${p.name}`;if(this.has(w,!1)){(d=globalThis.console)==null||d.warn($n(7,w));continue}for(Iv(t,w).register(this),this.has(t,!1)||_p(t,t).register(this),r=0,o=m.length;r<o;++r){if(w=`${jo}:${p.type}:${m[r]}`,this.has(w,!1)){(f=globalThis.console)==null||f.warn($n(7,w));continue}Iv(t,w).register(this)}}else _p(t,t).register(this)}else for(i=Object.keys(t),r=0,o=i.length;r<o;++r)s=t[i[r]],Pv(s)&&(Mp(s)?s.register(this):this.register(s));return--this._registerDepth,this}registerResolver(e,t,i=!1){Ep(e);const s=this._resolvers,r=s.get(e);if(r==null){if(s.set(e,t),b1(e)){if(this.res[e]!==void 0)throw $n(7,e);this.res[e]=t}}else r instanceof gr&&r._strategy===4?r._state.push(t):s.set(e,new gr(e,4,[r,t]));return i&&this._disposableResolvers.set(e,t),t}deregister(e){Ep(e);const t=this._resolvers.get(e);t!=null&&(this._resolvers.delete(e),b1(e)&&delete this.res[e],this._disposableResolvers.has(e)&&(t.dispose(),this._disposableResolvers.delete(e)))}registerTransformer(e,t){const i=this.getResolver(e);if(i==null)return!1;if(i.getFactory){const s=i.getFactory(this);return s==null?!1:(s.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(Ep(e),e.resolve!==void 0)return e;const i=wn;let s=wn=this,r,o;try{for(;s!=null;)if(r=s._resolvers.get(e),r==null){if(s._parent==null)return o=KD(e)?this:s,t?this._jitRegister(e,o):null;s=s._parent}else return r}finally{wn=i}return null}has(e,t=!1){var i;return this._resolvers.has(e)||b1(e)&&e in this.res||((t&&((i=this._parent)==null?void 0:i.has(e,!0)))??!1)}get(e){if(Ep(e),e.$isResolver)return e.resolve(this,this);const t=wn;let i=wn=this,s,r;try{for(;i!=null;)if(s=i._resolvers.get(e),s==null){if(i._parent==null)return r=KD(e)?this:i,s=this._jitRegister(e,r),s.resolve(i,this);i=i._parent}else return s.resolve(i,this)}finally{wn=t}throw $n(8,e)}getAll(e,t=!1){Ep(e);const i=wn,s=wn=this;let r=s,o,a=lt;try{if(t){for(;r!=null;)o=r._resolvers.get(e),o!=null&&(a=a.concat(GD(o,r,s))),r=r._parent;return a}for(;r!=null;)if(o=r._resolvers.get(e),o==null){if(r=r._parent,r==null)return lt}else return GD(o,r,s)}finally{wn=i}return lt}invoke(e,t){if(BD(e))throw $n(15,e);const i=wn;wn=this;{let s,r;try{s=ef(e).map(o=>this.get(r=o))}catch(o){throw Zd(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}, caused by dependency: ${String(r)}`),wn=i,o}try{return t===void 0?new e(...s):new e(...s,...t)}catch(o){throw Zd(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}`),o}finally{wn=i}}try{return t===void 0?new e(...ef(e).map(Tp,this)):new e(...ef(e).map(Tp,this),...t)}finally{wn=i}}hasFactory(e){return this._factories.has(e)}getFactory(e){let t=this._factories.get(e);if(t===void 0){if(BD(e))throw $n(15,e);this._factories.set(e,t=new yG(e,ef(e)))}return t}registerFactory(e,t){this._factories.set(e,t)}createChild(e){return e===void 0&&this.config.inheritParentResources?this.config===Uo.DEFAULT?new xp(this,this.config):new xp(this,Uo.from({...this.config,inheritParentResources:!1})):new xp(this,Uo.from(e??this.config))}disposeResolvers(){var r;const e=this._resolvers,t=this._disposableResolvers;let i,s;for([s,i]of t.entries())(r=i.dispose)==null||r.call(i),e.delete(s);t.clear()}useResources(e){const t=e.res;for(const i in t)this.registerResolver(i,t[i])}find(e,t){var o,a;const i=ft(t)?`${jo}:${e}:${t}`:e;let s=this,r=s.res[i];return r==null&&(s=s.root,r=s.res[i]),r==null?null:((a=(o=r.getFactory)==null?void 0:o.call(r,s))==null?void 0:a.Type)??null}dispose(){this._disposableResolvers.size>0&&this.disposeResolvers(),this._resolvers.clear(),this.root===this&&(this._factories.clear(),this.res={})}_jitRegister(e,t){const i=Mp(e);if(!Ht(e)&&!i)throw $n(9,e);if(wG.has(e.name))throw $n(10,e);if(i){const r=e.register(t,e);if(!(r instanceof Object)||r.resolve==null){const o=t._resolvers.get(e);if(o!=null)return o;throw $n(11,e)}return r}if(e.$isInterface)throw $n(12,e.friendlyName);const s=this.config.defaultResolver(e,t);return t._resolvers.set(e,s),s}}class yG{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){const i=wn;wn=e;let s;{let r,o;try{r=this.dependencies.map(a=>e.get(o=a))}catch(a){throw Zd(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}, caused by dependency: ${String(o)}`),wn=i,a}try{return t===void 0?s=new this.Type(...r):s=new this.Type(...r,...t),this.transformers==null?s:this.transformers.reduce(YD,s)}catch(a){throw Zd(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}`),a}finally{wn=i}}try{return t===void 0?s=new this.Type(...this.dependencies.map(Tp,e)):s=new this.Type(...this.dependencies.map(Tp,e),...t),this.transformers==null?s:this.transformers.reduce(YD,s)}finally{wn=i}}registerTransformer(e){(this.transformers??(this.transformers=[])).push(e)}}function YD(n,e){return e(n)}function Ep(n){if(n==null)throw $n(14)}function Tp(n){return this.get(n)}function ue(...n){if(wn==null)throw $n(16,...n);if(n.length===1)try{return wn.get(n[0])}catch(e){throw Zd(`[DEV:aurelia] resolve() call error for: ${String(n[0])}`),e}else{let e;try{return n.map(t=>wn.get(e=t))}catch(t){throw Zd(`[DEV:aurelia] resolve() call error for: ${String(e)}`),t}}return n.length===1?wn.get(n[0]):n.map(Tp,wn)}const GD=(n,e,t)=>{if(n instanceof gr&&n._strategy===4){const i=n._state,s=i.length,r=Array(s);let o=0;for(;o<s;++o)r[o]=i[o].resolve(e,t);return r}return[n.resolve(e,t)]},CG={$isResolver:!0,resolve(n,e){return e}},Mp=n=>Ht(n==null?void 0:n.register),SG=n=>Mp(n)&&typeof n.registerInRequestor=="boolean",KD=n=>SG(n)&&n.registerInRequestor,_G=n=>n.prototype!==void 0,b1=n=>ft(n)&&n.indexOf(":")>0;class RG{constructor(e,t){this._container=e,this._key=t}instance(e){return this._registerResolver(0,e)}singleton(e){return this._registerResolver(1,e)}transient(e){return this._registerResolver(2,e)}callback(e){return this._registerResolver(3,e)}cachedCallback(e){return this._registerResolver(3,jD(e))}aliasTo(e){return this._registerResolver(5,e)}_registerResolver(e,t){const{_container:i,_key:s}=this;return this._container=this._key=void 0,i.registerResolver(s,new gr(s,e,t))}}const Ap=n=>{const e=n.slice(),t=Object.keys(n),i=t.length;let s;for(let r=0;r<i;++r)s=t[r],Sp(s)||(e[s]=n[s]);return e},Ov=bc("di:paramtypes"),xG=n=>Wo(Ov,n),qD=n=>Wo("design:paramtypes",n),XD=n=>{var e;return(e=n.metadata)[Ov]??(e[Ov]=[])},ef=n=>{const e=bc("di:dependencies");let t=Wo(e,n);if(t===void 0){const i=n.inject;if(i===void 0){const s=qD(n),r=xG(n);if(s===void 0)if(r===void 0){const o=Object.getPrototypeOf(n);Ht(o)&&o!==Function.prototype?t=Ap(ef(o)):t=[]}else t=Ap(r);else if(r===void 0)t=Ap(s);else{t=Ap(s);let o=r.length,a,l=0;for(;l<o;++l)a=r[l],a!==void 0&&(t[l]=a);const c=Object.keys(r);let h;for(l=0,o=c.length,l=0;l<o;++l)h=c[l],Sp(h)||(t[h]=r[h])}}else t=Ap(i);Cp(t,n,e)}return t},Ja=(n,e)=>{const t=Ht(n)?n:e,i=(ft(n)?n:void 0)??"(anonymous)",s={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:t!=null?(r,o)=>t(new RG(r,o??s)):void 0};return s},w1=(...n)=>(e,t)=>{switch(t.kind){case"class":{const i=XD(t);let s,r=0;for(;r<n.length;++r)s=n[r],s!==void 0&&(i[r]=s);break}case"field":{const i=XD(t),s=n[0];s!==void 0&&(i[t.name]=s);break}default:throw $n(22,String(t.name),t.kind)}},Lh=(Av(),{createContainer:bG,getDesignParamtypes:qD,getDependencies:ef,createInterface:Ja,inject:w1,transient(n){return n.register=function(e){return VD(n,n).register(e,n)},n.registerInRequestor=!1,n},singleton(n,e=MG){return n.register=function(t){return _p(n,n).register(t,n)},n.registerInRequestor=e.scoped,n}}),tf=Ja("IContainer"),EG=tf;function QD(n,e){return Lh.transient(n)}function TG(n,e){return n==null?QD:QD(n)}const MG={scoped:!1};class gr{get $isResolver(){return!0}constructor(e,t,i){this._resolving=!1,this._cachedFactory=null,this._key=e,this._strategy=t,this._state=i}register(e,t){return e.registerResolver(t||this._key,this)}resolve(e,t){switch(this._strategy){case 0:return this._state;case 1:{if(this._resolving)throw $n(3,this._state.name);return this._resolving=!0,this._state=(this._cachedFactory=e.getFactory(this._state)).construct(t),this._strategy=0,this._resolving=!1,this._state}case 2:{const i=e.getFactory(this._state);if(i===null)throw $n(4,this._key);return i.construct(t)}case 3:return this._state(e,t,this);case 4:return this._state[0].resolve(e,t);case 5:return t.get(this._state);default:throw $n(5,this._strategy)}}getFactory(e){var t,i;switch(this._strategy){case 1:case 2:return e.getFactory(this._state);case 5:return((i=(t=e.getResolver(this._state))==null?void 0:t.getFactory)==null?void 0:i.call(t,e))??null;case 0:return this._cachedFactory;default:return null}}}class $i{get friendlyName(){return this._name}constructor(e,t=null,i=null){this._name=e,this._instance=t,this._Type=i}prepare(e){this._instance=e}get $isResolver(){return!0}resolve(){if(this._instance==null)throw $n(13,this._name);return this._instance}getFactory(e){return this._Type==null?null:e.getFactory(this._Type)}dispose(){this._instance=null}}class AG{constructor(e,t){this.key=e,this.params=t}register(e){e.has(this.key,!0)?e.get(this.key).register(e,...this.params):e.register(...this.params.filter(t=>typeof t=="object"))}}const lt=yp([]),ZD=yp({});function Yo(){}const nf=Ja("IPlatform");function Pp(n){return function(e){function t(i,s){w1(t)(i,s)}return t.$isResolver=!0,t.resolve=function(i,s){return n(e,i,s)},t}}const v1=(n,e=!1)=>{function t(i,s){w1(t)(i,s)}return t.$isResolver=!0,t.resolve=(i,s)=>s.getAll(n,e),t},JD=Pp((n,e,t)=>{if(t.has(n,!0))return t.get(n)}),PG=Pp((n,e,t)=>t.has(n,!1)?t.get(n):void 0),sf=Pp((n,e,t)=>t.has(n,!1)?t.get(n):t.root.get(n)),IG=Pp((n,e,t)=>t.has(n,!1)?t.get(n):t.root.has(n,!1)?t.root.get(n):void 0),OG=Pp((n,e,t)=>t===t.root?t.getAll(n,!1):t.has(n,!1)?t.getAll(n,!1).concat(t.root.getAll(n,!1)):t.root.getAll(n,!1));function rf(n,e,t,i,s,r){function o(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var a=i.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=n?i.static?n:n.prototype:null,h=c?Object.getOwnPropertyDescriptor(c,i.name):{},u,d=!1,f=t.length-1;f>=0;f--){var g={};for(var p in i)g[p]=p==="access"?{}:i[p];for(var p in i.access)g.access[p]=i.access[p];g.addInitializer=function(w){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(w||null))};var m=(0,t[f])(a==="accessor"?{get:h.get,set:h.set}:h[l],g);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(u=o(m.get))&&(h.get=u),(u=o(m.set))&&(h.set=u),(u=o(m.init))&&s.unshift(u)}else(u=o(m))&&(a==="field"?s.unshift(u):h[l]=u)}c&&Object.defineProperty(c,i.name,h),d=!0}function kG(n,e,t){for(var i=arguments.length>2,s=0;s<e.length;s++)t=i?e[s].call(n,t):e[s].call(n);return i?t:void 0}typeof SuppressedError=="function"&&SuppressedError;const Ip=0,Op=1,kp=2,of=3,Hp=4,Dp=5,HG=yp({trace:Ip,debug:Op,info:kp,warn:of,error:Hp,fatal:Dp,none:6}),eN=Ja("ILogConfig",n=>n.instance(new FG("no-colors",of))),DG=Ja("ISink"),NG=Ja("ILogEventFactory",n=>n.singleton(VG)),$h=Ja("ILogger",n=>n.singleton(WG)),LG=Ja("ILogScope"),$G=yp({key:bc("logger-sink-handles"),define(n,e){Cp(e.handles,n,this.key)},getHandles(n){return Wo(this.key,n.constructor)}}),el=m1({red(n){return`\x1B[31m${n}\x1B[39m`},green(n){return`\x1B[32m${n}\x1B[39m`},yellow(n){return`\x1B[33m${n}\x1B[39m`},blue(n){return`\x1B[34m${n}\x1B[39m`},magenta(n){return`\x1B[35m${n}\x1B[39m`},cyan(n){return`\x1B[36m${n}\x1B[39m`},white(n){return`\x1B[37m${n}\x1B[39m`},grey(n){return`\x1B[90m${n}\x1B[39m`}});class FG{constructor(e,t){this.colorOptions=e,this.level=t}}const y1=function(){const n={"no-colors":m1({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:m1({TRC:el.grey("TRC"),DBG:el.grey("DBG"),INF:el.white("INF"),WRN:el.yellow("WRN"),ERR:el.red("ERR"),FTL:el.red("FTL"),QQQ:el.grey("???")})};return(e,t)=>e<=Ip?n[t].TRC:e<=Op?n[t].DBG:e<=kp?n[t].INF:e<=of?n[t].WRN:e<=Hp?n[t].ERR:e<=Dp?n[t].FTL:n[t].QQQ}(),tN=(n,e)=>e==="no-colors"?n.join("."):n.map(el.cyan).join("."),C1=(n,e)=>e==="no-colors"?new Date(n).toISOString():el.grey(new Date(n).toISOString());class BG{constructor(e,t,i,s,r,o){this.severity=e,this.message=t,this.optionalParams=i,this.scope=s,this.colorOptions=r,this.timestamp=o}toString(){const{severity:e,message:t,scope:i,colorOptions:s,timestamp:r}=this;return i.length===0?`${C1(r,s)} [${y1(e,s)}] ${t}`:`${C1(r,s)} [${y1(e,s)} ${tN(i,s)}] ${t}`}getFormattedLogInfo(e=!1){const{severity:t,message:i,scope:s,colorOptions:r,timestamp:o,optionalParams:a}=this;let l=null,c="";e&&i instanceof Error?l=i:c=i;const h=s.length===0?"":` ${tN(s,r)}`;let u=`${C1(o,r)} [${y1(t,r)}${h}] ${c}`;if(a===void 0||a.length===0)return l===null?[u]:[u,l];let d=0;for(;u.includes("%s");)u=u.replace("%s",String(a[d++]));return l!==null?[u,l,...a.slice(d)]:[u,...a.slice(d)]}}class VG{constructor(){this.config=ue(eN)}createLogEvent(e,t,i,s){return new BG(t,i,s,e.scope,this.config.colorOptions,Date.now())}}let WG=(()=>{var n;let e=[],t,i,s,r,o,a;return n=class{constructor(c=ue(eN),h=ue(NG),u=ue(v1(DG)),d=ue(JD(LG))??[],f=null){this.scope=(kG(this,e),d),this._scopedLoggers=Kt();let g,p,m,w,y,C;if(this.config=c,this._factory=h,this.sinks=u,f===null){this.root=this,this.parent=this,g=this._traceSinks=[],p=this._debugSinks=[],m=this._infoSinks=[],w=this._warnSinks=[],y=this._errorSinks=[],C=this._fatalSinks=[];for(const R of u){const _=$G.getHandles(R);((_==null?void 0:_.includes(Ip))??!0)&&g.push(R),((_==null?void 0:_.includes(Op))??!0)&&p.push(R),((_==null?void 0:_.includes(kp))??!0)&&m.push(R),((_==null?void 0:_.includes(of))??!0)&&w.push(R),((_==null?void 0:_.includes(Hp))??!0)&&y.push(R),((_==null?void 0:_.includes(Dp))??!0)&&C.push(R)}}else this.root=f.root,this.parent=f,g=this._traceSinks=f._traceSinks,p=this._debugSinks=f._debugSinks,m=this._infoSinks=f._infoSinks,w=this._warnSinks=f._warnSinks,y=this._errorSinks=f._errorSinks,C=this._fatalSinks=f._fatalSinks}trace(c,...h){this.config.level<=Ip&&this._emit(this._traceSinks,Ip,c,h)}debug(c,...h){this.config.level<=Op&&this._emit(this._debugSinks,Op,c,h)}info(c,...h){this.config.level<=kp&&this._emit(this._infoSinks,kp,c,h)}warn(c,...h){this.config.level<=of&&this._emit(this._warnSinks,of,c,h)}error(c,...h){this.config.level<=Hp&&this._emit(this._errorSinks,Hp,c,h)}fatal(c,...h){this.config.level<=Dp&&this._emit(this._fatalSinks,Dp,c,h)}scopeTo(c){const h=this._scopedLoggers;let u=h[c];return u===void 0&&(u=h[c]=new n(this.config,this._factory,null,this.scope.concat(c),this)),u}_emit(c,h,u,d){const f=Ht(u)?u():u,g=this._factory.createLogEvent(this,h,f,d);for(let p=0,m=c.length;p<m;++p)c[p].handleEvent(g)}},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[Jd],i=[Jd],s=[Jd],r=[Jd],o=[Jd],a=[Jd],rf(n,null,t,{kind:"method",name:"trace",static:!1,private:!1,access:{has:c=>"trace"in c,get:c=>c.trace},metadata:l},null,e),rf(n,null,i,{kind:"method",name:"debug",static:!1,private:!1,access:{has:c=>"debug"in c,get:c=>c.debug},metadata:l},null,e),rf(n,null,s,{kind:"method",name:"info",static:!1,private:!1,access:{has:c=>"info"in c,get:c=>c.info},metadata:l},null,e),rf(n,null,r,{kind:"method",name:"warn",static:!1,private:!1,access:{has:c=>"warn"in c,get:c=>c.warn},metadata:l},null,e),rf(n,null,o,{kind:"method",name:"error",static:!1,private:!1,access:{has:c=>"error"in c,get:c=>c.error},metadata:l},null,e),rf(n,null,a,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:c=>"fatal"in c,get:c=>c.fatal},metadata:l},null,e),l&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),n})();class jG{constructor(e,t){this.type=e,this.cb=t}handle(e){e instanceof this.type&&this.cb.call(null,e)}}const zG=Ja("IEventAggregator",n=>n.singleton(UG));class UG{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(e,t){if(!e)throw $n(18,e);if(ft(e)){let i=this.eventLookup[e];if(i!==void 0){i=i.slice();let s=i.length;for(;s-- >0;)i[s](t,e)}}else{const i=this.messageHandlers.slice();let s=i.length;for(;s-- >0;)i[s].handle(e)}}subscribe(e,t){if(!e)throw $n(19,e);let i,s;return ft(e)?(this.eventLookup[e]===void 0&&(this.eventLookup[e]=[]),i=t,s=this.eventLookup[e]):(i=new jG(e,t),s=this.messageHandlers),s.push(i),{dispose(){const r=s.indexOf(i);r!==-1&&s.splice(r,1)}}}subscribeOnce(e,t){const i=this.subscribe(e,(s,r)=>{i.dispose(),t(s,r)});return i}}const nN="AccessThis",YG="AccessBoundary",S1="AccessGlobal",_1="AccessScope",GG="ArrayLiteral",KG="ObjectLiteral",qG="PrimitiveLiteral",XG="Template",QG="Unary",ZG="CallScope",JG="CallMember",eK="CallFunction",tK="CallGlobal",kv="AccessMember",iN="AccessKeyed",nK="TaggedTemplate",iK="Binary",sK="Conditional",rK="Assign",oK="ArrowFunction",aK="ValueConverter",lK="BindingBehavior",sN="ArrayBindingPattern",rN="ObjectBindingPattern",oN="BindingIdentifier",cK="ForOfStatement",hK="Interpolation",aN="ArrayDestructuring",uK="ObjectDestructuring",dK="DestructuringAssignmentLeaf",fK="Custom";class lN{constructor(e){this.value=e,this.$kind=fK}evaluate(...e){return this.value}assign(...e){return e}bind(...e){}unbind(...e){}accept(e){}}class gK{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=lK,this.key=`_bb_${t}`}}class pK{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=aK}}class mK{constructor(e,t,i="="){this.target=e,this.value=t,this.op=i,this.$kind=rK}}class bK{constructor(e,t,i){this.condition=e,this.yes=t,this.no=i,this.$kind=sK}}class wK{constructor(e){this.name=e,this.$kind=S1}}class Np{constructor(e=0){this.ancestor=e,this.$kind=nN}}class vK{constructor(){this.$kind=YG}}class Lp{constructor(e,t=0){this.name=e,this.ancestor=t,this.$kind=_1}}const cN=n=>n.$kind===S1||(n.$kind===kv||n.$kind===iN)&&n.accessGlobal;class R1{constructor(e,t,i=!1){this.object=e,this.name=t,this.optional=i,this.$kind=kv,this.accessGlobal=cN(e)}}class hN{constructor(e,t,i=!1){this.object=e,this.key=t,this.optional=i,this.$kind=iN,this.accessGlobal=cN(e)}}class uN{constructor(e,t,i=0,s=!1){this.name=e,this.args=t,this.ancestor=i,this.optional=s,this.$kind=ZG}}class Hv{constructor(e,t,i,s=!1,r=!1){this.object=e,this.name=t,this.args=i,this.optionalMember=s,this.optionalCall=r,this.$kind=JG}}class Dv{constructor(e,t,i=!1){this.func=e,this.args=t,this.optional=i,this.$kind=eK}}class yK{constructor(e,t){this.name=e,this.args=t,this.$kind=tK}}class CK{constructor(e,t,i){this.operation=e,this.left=t,this.right=i,this.$kind=iK}}class dN{constructor(e,t,i=0){this.operation=e,this.expression=t,this.pos=i,this.$kind=QG}}class Ci{constructor(e){this.value=e,this.$kind=qG}}Ci.$undefined=new Ci(void 0),Ci.$null=new Ci(null),Ci.$true=new Ci(!0),Ci.$false=new Ci(!1),Ci.$empty=new Ci("");class x1{constructor(e){this.elements=e,this.$kind=GG}}x1.$empty=new x1(lt);class E1{constructor(e,t){this.keys=e,this.values=t,this.$kind=KG}}E1.$empty=new E1(lt,lt);class Nv{constructor(e,t=lt){this.cooked=e,this.expressions=t,this.$kind=XG}}Nv.$empty=new Nv([""]);class fN{constructor(e,t,i,s=lt){this.cooked=e,this.func=i,this.expressions=s,this.$kind=nK,e.raw=t}}class SK{constructor(e){this.elements=e,this.$kind=sN}}class _K{constructor(e,t){this.keys=e,this.values=t,this.$kind=rN}}class Lv{constructor(e){this.name=e,this.$kind=oN}}class RK{constructor(e,t,i){this.declaration=e,this.iterable=t,this.semiIdx=i,this.$kind=cK}}class xK{constructor(e,t=lt){this.parts=e,this.expressions=t,this.$kind=hK,this.isMulti=t.length>1,this.firstExpression=t[0]}}class EK{constructor(e,t,i,s){this.$kind=e,this.list=t,this.source=i,this.initializer=s}}class gN{constructor(e,t,i){this.target=e,this.source=t,this.initializer=i,this.$kind=dK}}class T1{constructor(e,t,i=!1){this.args=e,this.body=t,this.rest=i,this.$kind=oK}}const M1=String,$v=()=>Object.create(null),en=(n,...e)=>new Error(`AUR${M1(n).padStart(4,"0")}: ${MK(n,...e)}`),TK={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`},MK=(n,...e)=>{var i;let t=TK[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=M1(l[a.slice(1)]):l=M1(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t},af=Lh.createInterface("IExpressionParser");class pN{constructor(){this._expressionLookup=$v(),this._forOfLookup=$v(),this._interpolationLookup=$v()}parse(e,t){let i;switch(t){case vN:return new lN(e);case Fv:return i=this._interpolationLookup[e],i===void 0&&(i=this._interpolationLookup[e]=this.$parse(e,t)),i;case nl:return i=this._forOfLookup[e],i===void 0&&(i=this._forOfLookup[e]=this.$parse(e,t)),i;default:{if(e.length===0){if(t===kK||t===wN)return Ci.$empty;throw qK()}return i=this._expressionLookup[e],i===void 0&&(i=this._expressionLookup[e]=this.$parse(e,t)),i}}}$parse(e,t){return Et=e,ut=0,Go=e.length,Bs=0,Fh=0,ve=6291456,ln="",tn=Bh(0),Dt=!0,Tt=!1,Fp=!0,I1=-1,Fn(61,t===void 0?wN:t)}}pN.register=Rp(af);function A1(n){switch(n){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return n}}const AK=Ci.$false,PK=Ci.$true,IK=Ci.$null,mN=Ci.$undefined,$p=new Np(0),P1=new Np(1),OK=new vK,tl="None",Fv="Interpolation",nl="IsIterator",bN="IsChainable",kK="IsFunction",wN="IsProperty",vN="IsCustom";let Et="",ut=0,Go=0,Bs=0,Fh=0,ve=6291456,ln="",tn,Dt=!0,Tt=!1,Fp=!0,I1=-1;const Bp=String.fromCharCode,Bh=n=>Et.charCodeAt(n),il=()=>Et.slice(Fh,ut),HK="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Fn(n,e){if(e===vN)return new lN(Et);if(ut===0){if(e===Fv)return WK();if(Be(),ve&4194304)throw YK()}Dt=513>n,Tt=!1,Fp=514>n;let t=!1,i,s=0;if(ve&131072){const r=lf[ve&63];Be(),i=new dN(r,Fn(514,e)),Dt=!1}else{e:switch(ve){case 12295:s=Bs,Dt=!1,Fp=!1;do switch(Be(),++s,ve){case 65546:if(Be(),!(ve&12288))throw sl();break;case 11:case 12:throw sl();case 2162701:if(Tt=!0,Be(),!(ve&12288)){i=s===0?$p:s===1?P1:new Np(s),t=!0;break e}break;default:if(ve&2097152){i=s===0?$p:s===1?P1:new Np(s);break e}throw GK()}while(ve===12295);case 4096:{const r=ln;if(e===nl)i=new Lv(r);else if(Fp&&HK.includes(r))i=new wK(r);else{if(Fp&&r==="import")throw eq();i=new Lp(r,s)}if(Dt=!Tt,Be(),Ko(51)){if(ve===524297)throw AN();const o=Tt,a=Bs;++Bs;const l=Fn(62,tl);Tt=o,Bs=a,Dt=!1,i=new T1([new Lv(r)],l)}break}case 11:throw rq();case 12:throw k1();case 12292:switch(Dt=!1,Be(),Bs){case 0:i=$p;break;case 1:i=P1;break;default:i=new Np(Bs);break}break;case 12293:Dt=!1,Be(),i=OK;break;case 2688008:i=LK(e);break;case 2688019:i=Et.search(/\s+of\s+/)>ut?DK():$K(e);break;case 524297:i=VK(e);break;case 2163760:i=new Nv([ln]),Dt=!1,Be();break;case 2163761:i=O1(e,i,!1);break;case 16384:case 32768:i=new Ci(ln),Dt=!1,Be();break;case 8194:case 8195:case 8193:case 8192:i=lf[ve&63],Dt=!1,Be();break;default:throw ut>=Go?KK():H1()}if(e===nl)return BK(i);switch(ve){case 2228280:case 2228281:i=new dN(lf[ve&63],i,1),Be(),Dt=!1;break}if(514<n)return i;if(ve===11||ve===12)throw sl();if(i.$kind===nN)switch(ve){case 2162701:if(Tt=!0,Dt=!1,Be(),!(ve&13312))throw D1();if(ve&12288)i=new Lp(ln,i.ancestor),Be();else if(ve===2688008)i=new Dv(i,no(),!0);else if(ve===2688019)i=Bv(i,!0);else throw Vv();break;case 65546:if(Dt=!Tt,Be(),!(ve&12288))throw sl();i=new Lp(ln,i.ancestor),Be();break;case 11:case 12:throw sl();case 2688008:i=new Dv(i,no(),t);break;case 2688019:i=Bv(i,t);break;case 2163760:i=CN(i);break;case 2163761:i=O1(e,i,!0);break}for(;(ve&65536)>0;)switch(ve){case 2162701:i=NK(i);break;case 65546:if(Be(),!(ve&12288))throw sl();i=yN(i,!1);break;case 11:case 12:throw sl();case 2688008:i.$kind===_1?i=new uN(i.name,no(),i.ancestor,!1):i.$kind===kv?i=new Hv(i.object,i.name,no(),i.optional,!1):i.$kind===S1?i=new yK(i.name,no()):i=new Dv(i,no(),!1);break;case 2688019:i=Bv(i,!1);break;case 2163760:if(Tt)throw Vv();i=CN(i);break;case 2163761:if(Tt)throw Vv();i=O1(e,i,!0);break}}if(ve===11||ve===12)throw sl();if(513<n)return i;for(;(ve&262144)>0;){const r=ve;if((r&960)<=n)break;Be(),i=new CK(lf[r&63],i,Fn(r&960,e)),Dt=!1}if(63<n)return i;if(Ko(6291479)){const r=Fn(62,e);io(6291477),i=new bK(i,r,Fn(62,e)),Dt=!1}if(62<n)return i;switch(ve){case 4194350:case 4194356:case 4194357:case 4194358:case 4194359:{if(!Dt)throw XK();const r=lf[ve&63];Be(),i=new mK(i,Fn(62,e),r);break}}if(61<n)return i;for(;Ko(6291481);){if(ve===6291456)throw QK();const r=ln;Be();const o=new Array;for(;Ko(6291477);)o.push(Fn(62,e));i=new pK(i,r,o)}for(;Ko(6291480);){if(ve===6291456)throw ZK();const r=ln;Be();const o=new Array;for(;Ko(6291477);)o.push(Fn(62,e));i=new gK(i,r,o)}if(ve!==6291456){if(e===Fv&&ve===7340046)return i;if(e===bN&&ve===6291478){if(ut===Go)throw H1();return I1=ut-1,i}throw il()==="of"?JK():H1()}return i}function DK(){const n=[],e=new EK(aN,n,void 0,void 0);let t="",i=!0,s=0;for(;i;)switch(Be(),ve){case 7340052:i=!1,r();break;case 6291472:r();break;case 4096:t=il();break;default:throw iq()}return io(7340052),e;function r(){t!==""?(n.push(new gN(new R1($p,t),new hN($p,new Ci(s++)),void 0)),t=""):s++}}function no(){const n=Tt;Be();const e=[];for(;ve!==7340047&&(e.push(Fn(62,tl)),!!Ko(6291472)););return io(7340047),Dt=!1,Tt=n,e}function Bv(n,e){const t=Tt;return Be(),n=new hN(n,Fn(62,tl),e),io(7340052),Dt=!t,Tt=t,n}function NK(n){if(Tt=!0,Dt=!1,Be(),!(ve&13312))throw D1();if(ve&12288)return yN(n,!0);if(ve===2688008)return n.$kind===_1?new uN(n.name,no(),n.ancestor,!0):n.$kind===kv?new Hv(n.object,n.name,no(),n.optional,!0):new Dv(n,no(),!0);if(ve===2688019)return Bv(n,!0);throw Vv()}function yN(n,e){const t=ln;switch(ve){case 2162701:{Tt=!0,Dt=!1;const i=ut,s=Fh,r=ve,o=tn,a=ln,l=Dt,c=Tt;if(Be(),!(ve&13312))throw D1();return ve===2688008?new Hv(n,t,no(),e,!0):(ut=i,Fh=s,ve=r,tn=o,ln=a,Dt=l,Tt=c,new R1(n,t,e))}case 2688008:return Dt=!1,new Hv(n,t,no(),e,!1);default:return Dt=!Tt,Be(),new R1(n,t,e)}}function LK(n){Be();const e=ut,t=Fh,i=ve,s=tn,r=ln,o=Tt,a=[];let l=1,c=!1;e:for(;;){if(ve===12){if(Be(),ve!==4096)throw sl();if(a.push(new Lv(ln)),Be(),ve===6291472)throw sq();if(ve!==7340047||(Be(),ve!==51))throw k1();Be();const d=Tt,f=Bs;++Bs;const g=Fn(62,tl);return Tt=d,Bs=f,Dt=!1,new T1(a,g,!0)}switch(ve){case 4096:a.push(new Lv(ln)),Be();break;case 7340047:Be();break e;case 524297:case 2688019:Be(),l=4;break;case 6291472:l=2,c=!0;break e;case 2688008:l=2;break e;default:Be(),l=2;break}switch(ve){case 6291472:if(Be(),c=!0,l===1)break;break e;case 7340047:Be();break e;case 4194350:l===1&&(l=3);break e;case 51:if(c)throw Wv();Be(),l=2;break e;default:l===1&&(l=2);break e}}if(ve===51){if(l===1){if(Be(),ve===524297)throw AN();const d=Tt,f=Bs;++Bs;const g=Fn(62,tl);return Tt=d,Bs=f,Dt=!1,new T1(a,g)}throw Wv()}else if(l===1&&a.length===0)throw EN(51);if(c)switch(l){case 2:throw Wv();case 3:throw TN();case 4:throw MN()}ut=e,Fh=t,ve=i,tn=s,ln=r,Tt=o;const h=Tt,u=Fn(62,n);if(Tt=h,io(7340047),ve===51)switch(l){case 2:throw Wv();case 3:throw TN();case 4:throw MN()}return u}function $K(n){const e=Tt;Be();const t=new Array;for(;ve!==7340052;)if(Ko(6291472)){if(t.push(mN),ve===7340052)break}else if(t.push(Fn(62,n===nl?tl:n)),Ko(6291472)){if(ve===7340052)break}else break;return Tt=e,io(7340052),n===nl?new SK(t):(Dt=!1,new x1(t))}const FK=[sN,rN,oN,aN,uK];function BK(n){if(!FK.includes(n.$kind)||ve!==4204594)throw RN(n.$kind);Be();const e=n,t=Fn(61,bN);return new RK(e,t,I1)}function VK(n){const e=Tt,t=new Array,i=new Array;for(Be();ve!==7340046;){if(t.push(ln),ve&49152)Be(),io(6291477),i.push(Fn(62,n===nl?tl:n));else if(ve&12288){const s=tn,r=ve,o=ut;Be(),Ko(6291477)?i.push(Fn(62,n===nl?tl:n)):(tn=s,ve=r,ut=o,i.push(Fn(515,n===nl?tl:n)))}else throw tq();ve!==7340046&&io(6291472)}return Tt=e,io(7340046),n===nl?new _K(t,i):(Dt=!1,new E1(t,i))}function WK(){const n=[],e=[],t=Go;let i="";for(;ut<t;){switch(tn){case 36:if(Bh(ut+1)===123){n.push(i),i="",ut+=2,tn=Bh(ut),Be();const s=Fn(61,Fv);e.push(s);continue}else i+="$";break;case 92:i+=Bp(A1(ze()));break;default:i+=Bp(tn)}ze()}return e.length?(n.push(i),new xK(n,e)):null}function O1(n,e,t){const i=Tt,s=[ln];io(2163761);const r=[Fn(62,n)];for(;(ve=UK())!==2163760;)s.push(ln),io(2163761),r.push(Fn(62,n));return s.push(ln),Dt=!1,Tt=i,t?(Be(),new fN(s,s,e,r)):(Be(),new Nv(s,r))}function CN(n){Dt=!1;const e=[ln];return Be(),new fN(e,e,n)}function Be(){for(;ut<Go;)if(Fh=ut,(ve=aq[tn]())!=null)return;ve=6291456}function ze(){return tn=Bh(++ut)}function jK(){for(;lq[ze()];);const n=oq[ln=il()];return n===void 0?4096:n}function SN(n){let e=tn;if(n===!1){do e=ze();while(e<=57&&e>=48);if(e!==46)return ln=parseInt(il(),10),32768;if(e=ze(),ut>=Go)return ln=parseInt(il().slice(0,-1),10),32768}if(e<=57&&e>=48)do e=ze();while(e<=57&&e>=48);else tn=Bh(--ut);return ln=parseFloat(il()),32768}function zK(){const n=tn;ze();let e=0;const t=new Array;let i=ut;for(;tn!==n;)if(tn===92)t.push(Et.slice(i,ut)),ze(),e=A1(tn),ze(),t.push(Bp(e)),i=ut;else{if(ut>=Go)throw nq();ze()}const s=Et.slice(i,ut);return ze(),t.push(s),ln=t.join(""),16384}function _N(){let n=!0,e="";for(;ze()!==96;)if(tn===36)if(ut+1<Go&&Bh(ut+1)===123){ut++,n=!1;break}else e+="$";else if(tn===92)e+=Bp(A1(ze()));else{if(ut>=Go)throw xN();e+=Bp(tn)}return ze(),ln=e,n?2163760:2163761}const UK=()=>{if(ut>=Go)throw xN();return ut--,_N()},Ko=n=>ve===n?(Be(),!0):!1,io=n=>{if(ve===n)Be();else throw EN(n)},YK=()=>en(151,Et),k1=()=>en(152,Et),sl=()=>en(153,Et),GK=()=>en(154,Et),KK=()=>en(155,Et),H1=()=>en(156,il(),ut,Et),qK=()=>en(157),XK=()=>en(158,Et),QK=()=>en(159,Et),ZK=()=>en(160,Et),JK=()=>en(161,Et),eq=()=>en(162,Et),RN=n=>en(163,Et,n),tq=()=>en(164,Et),nq=()=>en(165,Et),xN=()=>en(166,Et),EN=n=>en(167,lf[n&63],Et),iq=()=>en(170,il(),ut,Et),D1=()=>en(171,il(),ut-1,Et),Vv=()=>en(172,Et),Wv=()=>en(173,Et),TN=()=>en(174,Et),MN=()=>en(175,Et),sq=()=>en(176,Et),AN=()=>en(178,Et),rq=()=>en(179,ut-1,Et),lf=[AK,PK,IK,mN,"this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163760,2163761,"of","=>","+=","-=","*=","/=","++","--"],oq=Object.assign($v(),{true:8193,null:8194,false:8192,undefined:8195,this:12293,$this:12292,$parent:12295,in:6562213,instanceof:6562214,typeof:139305,void:139306,of:4204594}),{CharScanners:aq,IdParts:lq}=(()=>{const n=()=>{throw en(168,Et)};n.notMapped=!0;const e={AsciiIdPart:[36,0,48,58,65,91,95,0,97,123],IdStart:[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Digit:[48,58],Skip:[0,33,127,161]},t=(o,a,l,c)=>{const h=l.length;for(let u=0;u<h;u+=2){const d=l[u];let f=l[u+1];f=f>0?f:d+1,o&&o.fill(c,d,f)}},i=(o=>(t(o,null,e.IdStart,1),t(o,null,e.Digit,1),o))(new Uint8Array(65535)),s=o=>()=>(ze(),o),r=new Array(65535);return r.fill(n,0,65535),t(r,null,e.Skip,()=>(ze(),null)),t(r,null,e.IdStart,jK),t(r,null,e.Digit,()=>SN(!1)),r[34]=r[39]=()=>zK(),r[96]=()=>_N(),r[33]=()=>ze()!==61?131119:ze()!==61?6553950:(ze(),6553952),r[61]=()=>ze()===62?(ze(),51):tn!==61?4194350:ze()!==61?6553949:(ze(),6553951),r[38]=()=>ze()!==38?6291480:(ze(),6553884),r[124]=()=>ze()!==124?6291481:(ze(),6553819),r[63]=()=>{if(ze()===46){const o=Bh(ut+1);return o<=48||o>=57?(ze(),2162701):6291479}return tn!==63?6291479:(ze(),6553754)},r[46]=()=>ze()<=57&&tn>=48?SN(!0):tn===46?ze()!==46?11:(ze(),12):65546,r[60]=()=>ze()!==61?6554017:(ze(),6554019),r[62]=()=>ze()!==61?6554018:(ze(),6554020),r[37]=s(6554156),r[40]=s(2688008),r[41]=s(7340047),r[42]=()=>ze()!==61?6554155:(ze(),4194358),r[43]=()=>ze()===43?(ze(),2228280):tn!==61?2490855:(ze(),4194356),r[44]=s(6291472),r[45]=()=>ze()===45?(ze(),2228281):tn!==61?2490856:(ze(),4194357),r[47]=()=>ze()!==61?6554157:(ze(),4194359),r[58]=s(6291477),r[59]=s(6291478),r[91]=s(2688019),r[93]=s(7340052),r[123]=s(524297),r[125]=s(7340046),{CharScanners:r,IdParts:i}})(),qo=Lh.createInterface,cf=Object.freeze,{aliasTo:PN,singleton:N1}=Hh,so="Interpolation",IN="IsFunction",Xo="IsProperty",hf="custom-element",Vp=cf({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),jv=qo("ITemplateCompiler"),ON=qo("IAttrMapper"),Bn=(n,...e)=>new Error(`AUR${String(n).padStart(4,"0")}: ${hq(n,...e)}`),cq={88:"AttributeParser is already initialized; cannot add patterns after initialization.",89:'Attribute pattern "{{0}}" has already been registered.',99:"Method {{0}} not implemented",157:"Binding command {{0}} has already been registered.",701:'Template compilation error in element "{{0:name}}": the root <template> cannot be a local element template.',702:'Template compilation error: attribute "{{0}}" is invalid on element surrogate.',703:'Template compilation error: template controller "{{0}}" is invalid on element surrogate.',704:'Template compilation error: Invalid command "{{0:.command}}" for <let>. Only to-view/bind supported.',706:'Template compilation error: detected projection with [au-slot="{{0}}"] attempted on a non custom element {{1}}.',707:"Template compilation error: creating binding to non-bindable property {{0}} on {{1}}.",708:'Template compilation error: the custom element "{{0}}" does not have any content other than local template(s).',709:'Template compilation error: local element template needs to be defined directly under root of element "{{0}}".',710:'Template compilation error: bindable properties of local element "{{0}}" template needs to be defined directly under <template>.',711:`Template compilation error: the attribute 'property' is missing in {{0:outerHTML}} in local element "{{1}}"`,712:"Template compilation error: Bindable property and attribute needs to be unique; found property: {{0}}, attribute: {{1}}",713:'Template compilation error: unknown binding command: "{{0}}".{{0:bindingCommandHelp}}',714:'Template compilation error: primary already exists on element/attribute "{{0}}"',715:'Template compilation error: the value of "as-custom-element" attribute cannot be empty for local element in element "{{0}}"',716:'Template compilation error: duplicate definition of the local template named "{{0}} in element {{1}}"',717:'Template compilation error: detected a usage of "<slot>" element without specifying shadow DOM options in element: {{0}}',718:'Spreading template controller "{{0}}" is not supported.',719:"Attribute {{0}} has been already registered for {{1:element}}",720:'Spreading syntax "...xxx" is reserved. Encountered "...{{0}}"',721:'Usage of $bindables is only allowed on custom element. Encountered: <{{0}} {{1}}="{{2}}">',722:"Invalid platform object provided to the compilation, no DOM API found.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?"},hq=(n,...e)=>{var i;let t=cq[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=uq(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=String(l[a.slice(1)]):l=String(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function uq(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}var kN,HN,DN,NN,LN;class L1{constructor(e,t,i,s){if(this.chars=e,this.repeat=t,this.isSymbol=i,this.isInverted=s,s)switch(e.length){case 0:this.has=this._hasOfNoneInverse;break;case 1:this.has=this._hasOfSingleInverse;break;default:this.has=this._hasOfMultipleInverse}else switch(e.length){case 0:this.has=this._hasOfNone;break;case 1:this.has=this._hasOfSingle;break;default:this.has=this._hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}_hasOfMultiple(e){return this.chars.includes(e)}_hasOfSingle(e){return this.chars===e}_hasOfNone(e){return!1}_hasOfMultipleInverse(e){return!this.chars.includes(e)}_hasOfSingleInverse(e){return this.chars!==e}_hasOfNoneInverse(e){return!0}}class dq{constructor(){this.parts=lt,this._pattern="",this._currentRecord={},this._partsRecord={}}get pattern(){const e=this._pattern;return e===""?null:e}set pattern(e){e==null?(this._pattern="",this.parts=lt):(this._pattern=e,this.parts=this._partsRecord[e])}append(e,t){const i=this._currentRecord;i[e]===void 0?i[e]=t:i[e]+=t}next(e){const t=this._currentRecord;let i;t[e]!==void 0&&(i=this._partsRecord,i[e]===void 0?i[e]=[t[e]]:i[e].push(t[e]),t[e]=void 0)}}class $1{get _pattern(){return this._isEndpoint?this._patterns[0]:null}constructor(e,...t){this.charSpec=e,this._nextStates=[],this._types=null,this._isEndpoint=!1,this._patterns=t}findChild(e){const t=this._nextStates,i=t.length;let s=null,r=0;for(;r<i;++r)if(s=t[r],e.equals(s.charSpec))return s;return null}append(e,t){const i=this._patterns;i.includes(t)||i.push(t);let s=this.findChild(e);return s==null&&(s=new $1(e,t),this._nextStates.push(s),e.repeat&&s._nextStates.push(s)),s}findMatches(e,t){const i=[],s=this._nextStates,r=s.length;let o=0,a=null,l=0,c=0;for(;l<r;++l)if(a=s[l],a.charSpec.has(e))if(i.push(a),o=a._patterns.length,c=0,a.charSpec.isSymbol)for(;c<o;++c)t.next(a._patterns[c]);else for(;c<o;++c)t.append(a._patterns[c],e);return i}}class $N{constructor(e){this.text=e;const t=this._len=e.length,i=this._specs=[];let s=0;for(;t>s;++s)i.push(new L1(e[s],!1,!1,!1))}eachChar(e){const t=this._len,i=this._specs;let s=0;for(;t>s;++s)e(i[s])}}class fq{constructor(e){this.text="PART",this._spec=new L1(e,!0,!1,!0)}eachChar(e){e(this._spec)}}class gq{constructor(e){this.text=e,this._spec=new L1(e,!1,!0,!1)}eachChar(e){e(this._spec)}}class pq{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const mq=qo("ISyntaxInterpreter",n=>n.singleton(bq));class bq{constructor(){this._rootState=new $1(null),this._initialStates=[this._rootState]}add(e){e=e.slice(0).sort((d,f)=>d.pattern>f.pattern?1:-1);const t=e.length;let i,s,r,o,a,l,c,h=0,u;for(;t>h;){for(i=this._rootState,s=e[h],r=s.pattern,o=new pq,a=this._parse(s,o),l=a.length,c=d=>i=i.append(d,r),u=0;l>u;++u)a[u].eachChar(c);i._types=o,i._isEndpoint=!0,++h}}interpret(e){const t=new dq,i=e.length;let s=this._initialStates,r=0,o;for(;r<i&&(s=this._getNextStates(s,e.charAt(r),t),s.length!==0);++r);return s=s.filter(wq),s.length>0&&(s.sort(vq),o=s[0],o.charSpec.isSymbol||t.next(o._pattern),t.pattern=o._pattern),t}_getNextStates(e,t,i){const s=[];let r=null;const o=e.length;let a=0;for(;a<o;++a)r=e[a],s.push(...r.findMatches(t,i));return s}_parse(e,t){const i=[],s=e.pattern,r=s.length,o=e.symbols;let a=0,l=0,c="";for(;a<r;)c=s.charAt(a),o.length===0||!o.includes(c)?a===l&&c==="P"&&s.slice(a,a+4)==="PART"?(l=a=a+4,i.push(new fq(o)),++t.dynamics):++a:a!==l?(i.push(new $N(s.slice(l,a))),++t.statics,l=a):(i.push(new gq(s.slice(l,a+1))),++t.symbols,l=++a);return l!==a&&(i.push(new $N(s.slice(l,a))),++t.statics),i}}function wq(n){return n._isEndpoint}function vq(n,e){const t=n._types,i=e._types;return t.statics!==i.statics?i.statics-t.statics:t.dynamics!==i.dynamics?i.dynamics-t.dynamics:t.symbols!==i.symbols?i.symbols-t.symbols:0}class Vs{constructor(e,t,i,s,r=null){this.rawName=e,this.rawValue=t,this.target=i,this.command=s,this.parts=r}}const yq=qo("IAttributePattern"),F1=qo("IAttributeParser",n=>n.singleton(Cq));class Cq{constructor(){this._cache={},this._patterns={},this._initialized=!1,this._allDefinitions=[],this._interpreter=ue(mq),this._container=ue(tf)}registerPattern(e,t){if(this._initialized)throw Bn(88);const i=this._patterns;for(const{pattern:s}of e){if(i[s]!=null)throw Bn(89,s);i[s]={patternType:t}}this._allDefinitions.push(...e)}_initialize(){this._interpreter.add(this._allDefinitions);const e=this._container;for(const[,t]of Object.entries(this._patterns))t.pattern=e.get(t.patternType)}parse(e,t){this._initialized||(this._initialize(),this._initialized=!0);let i=this._cache[e];i==null&&(i=this._cache[e]=this._interpreter.interpret(e));const s=i.pattern;return s==null?new Vs(e,t,e,null,null):this._patterns[s].pattern[s](e,t,i.parts)}}const wc=cf({name:Nh("attribute-pattern"),create(n,e){return{register(t){t.get(F1).registerPattern(n,e),N1(yq,e).register(t)}}}});class B1{"PART.PART"(e,t,i){return new Vs(e,t,i[0],i[1])}"PART.PART.PART"(e,t,i){return new Vs(e,t,`${i[0]}.${i[1]}`,i[2])}}kN=Symbol.metadata,B1[kN]={[zo]:wc.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],B1)};class V1{ref(e,t,i){return new Vs(e,t,"element","ref")}"PART.ref"(e,t,i){let s=i[0];return s==="view-model"&&(s="component",console.warn(`[aurelia] Detected view-model.ref usage: "${e}=${t}". This is deprecated and component.ref should be used instead`)),new Vs(e,t,s,"ref")}}HN=Symbol.metadata,V1[HN]={[zo]:wc.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],V1)};class W1{"PART.trigger:PART"(e,t,i){return new Vs(e,t,i[0],"trigger",i)}"PART.capture:PART"(e,t,i){return new Vs(e,t,i[0],"capture",i)}}DN=Symbol.metadata,W1[DN]={[zo]:wc.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],W1)};class FN{":PART"(e,t,i){return new Vs(e,t,i[0],"bind")}}NN=Symbol.metadata,FN[NN]={[zo]:wc.create([{pattern:":PART",symbols:":"}],FN)};class BN{"@PART"(e,t,i){return new Vs(e,t,i[0],"trigger")}"@PART:PART"(e,t,i){return new Vs(e,t,i[0],"trigger",[i[0],"trigger",...i.slice(1)])}}LN=Symbol.metadata,BN[LN]={[zo]:wc.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],BN)};const j1=Za.get,VN=Za.define,WN="ra",jN="rb",zN="rc",UN="rd",YN="re",GN="rf",z1="rg",KN="ri",qN="rj",XN="rk",QN="rl",ZN="ha",JN="hb",eL="hc",Sq="hd",tL="he",nL="hf",iL="hg",sL="hs",rL="hp",oL="svb",ii=cf({hydrateElement:WN,hydrateAttribute:jN,hydrateTemplateController:zN,hydrateLetElement:UN,setProperty:YN,interpolation:GN,propertyBinding:z1,letBinding:KN,refBinding:qN,iteratorBinding:XN,multiAttr:QN,textBinding:ZN,listenerBinding:JN,attributeBinding:eL,stylePropertyBinding:Sq,setAttribute:tL,setClassAttribute:nL,setStyleAttribute:iL,spreadTransferedBinding:sL,spreadElementProp:rL,spreadValueBinding:oL}),uf=qo("Instruction");class rl{constructor(e,t){this.from=e,this.to=t,this.type=GN}}class Wp{constructor(e,t,i){this.from=e,this.to=t,this.mode=i,this.type=z1}}class _q{constructor(e,t,i){this.forOf=e,this.to=t,this.props=i,this.type=XN}}class Rq{constructor(e,t){this.from=e,this.to=t,this.type=qN}}class df{constructor(e,t){this.value=e,this.to=t,this.type=YN}}class xq{constructor(e,t,i){this.value=e,this.to=t,this.command=i,this.type=QN}}class Eq{constructor(e,t,i,s,r,o){this.res=e,this.props=t,this.projections=i,this.containerless=s,this.captures=r,this.data=o,this.type=WN}}class U1{constructor(e,t,i){this.res=e,this.alias=t,this.props=i,this.type=jN}}class Tq{constructor(e,t,i,s){this.def=e,this.res=t,this.alias=i,this.props=s,this.type=zN}}class Mq{constructor(e,t){this.instructions=e,this.toBindingContext=t,this.type=UN}}class aL{constructor(e,t){this.from=e,this.to=t,this.type=KN}}class Aq{constructor(e){this.from=e,this.type=ZN}}class lL{constructor(e,t,i,s){this.from=e,this.to=t,this.capture=i,this.modifier=s,this.type=JN}}class cL{constructor(e,t){this.value=e,this.to=t,this.type=tL}}class hL{constructor(e){this.value=e,this.type=nL}}class uL{constructor(e){this.value=e,this.type=iL}}class Y1{constructor(e,t,i){this.attr=e,this.from=t,this.to=i,this.type=eL}}class dL{constructor(){this.type=sL}}class fL{constructor(e){this.instruction=e,this.type=rL}}class G1{constructor(e,t){this.target=e,this.from=t,this.type=oL}}class zv{constructor(e,t,i,s){this.Type=e,this.name=t,this.aliases=i,this.key=s}static create(e,t){let i,s;return ft(e)?(i=e,s={name:i}):(i=e.name,s=e),new zv(t,mc(K1(t,"name"),i),ni(K1(t,"aliases"),s.aliases,t.aliases),ff(i))}register(e,t){const i=this.Type,s=typeof t=="string"?ff(t):this.key,r=this.aliases;e.has(s,!1)?console.warn(`[DEV:aurelia] ${Bn(157,this.name)}`):e.register(e.has(i,!1)?null:N1(i,i),PN(i,s),...r.map(o=>PN(i,ff(o))))}}const Fi="binding-command",Uv=Nh(Fi),ff=n=>`${Uv}:${n}`,K1=(n,e)=>j1(zD.annotation.keyFor(e),n),Pq=(()=>{const n="__au_static_resource__",e=(t,i,s)=>{var o;let r=j1(n,t);return r==null&&((o=t.$au)==null?void 0:o.type)===i&&(r=s(t.$au,t),VN(r,t,n)),r};return cf({name:Uv,keyFrom:ff,define(t,i){const s=zv.create(t,i),r=s.Type;return VN(s,r,Uv,jo),r},getAnnotation:K1,find(t,i){const s=t.find(Fi,i);return s==null?null:j1(Uv,s)??e(s,Fi,zv.create)??null},get(t,i){try{return t.get(sf(ff(i)))}catch(s){throw console.log(`


[DEV:aurelia] Cannot retrieve binding command with name




`,i),s}return t.get(sf(ff(i)))}})})();class gL{get ignoreAttr(){return!1}build(e,t,i){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?vi(r):o,e.bindable==null?r=i.map(e.node,r)??vi(r):r=e.bindable.name,new Wp(t.parse(o,Xo),r,1)}}gL.$au={type:Fi,name:"one-time"};class pL{get ignoreAttr(){return!1}build(e,t,i){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?vi(r):o,e.bindable==null?r=i.map(e.node,r)??vi(r):r=e.bindable.name,new Wp(t.parse(o,Xo),r,2)}}pL.$au={type:Fi,name:"to-view"};class mL{get ignoreAttr(){return!1}build(e,t,i){const s=e.attr;let r=s.target,o=s.rawValue;return o=o===""?vi(r):o,e.bindable==null?r=i.map(e.node,r)??vi(r):r=e.bindable.name,new Wp(t.parse(o,Xo),r,4)}}mL.$au={type:Fi,name:"from-view"};class bL{get ignoreAttr(){return!1}build(e,t,i){const s=e.attr;let r=s.target,o=s.rawValue;return o=o===""?vi(r):o,e.bindable==null?r=i.map(e.node,r)??vi(r):r=e.bindable.name,new Wp(t.parse(o,Xo),r,6)}}bL.$au={type:Fi,name:"two-way"};class wL{get ignoreAttr(){return!1}build(e,t,i){const s=e.attr,r=e.bindable;let o=s.rawValue,a=s.target,l,c;return o=o===""?vi(a):o,r==null?(c=i.isTwoWay(e.node,a)?6:2,a=i.map(e.node,a)??vi(a)):(l=e.def.defaultBindingMode??0,c=r.mode===0||r.mode==null?l==null||l===0?2:l:r.mode,a=r.name),new Wp(t.parse(o,Xo),a,ft(c)?Vp[c]??0:c)}}wL.$au={type:Fi,name:"bind"};class vL{constructor(){this._attrParser=ue(F1)}get ignoreAttr(){return!1}build(e,t){const i=e.bindable===null?vi(e.attr.target):e.bindable.name,s=t.parse(e.attr.rawValue,"IsIterator");let r=lt;if(s.semiIdx>-1){const o=e.attr.rawValue.slice(s.semiIdx+1),a=o.indexOf(":");if(a>-1){const l=o.slice(0,a).trim(),c=o.slice(a+1).trim(),h=this._attrParser.parse(l,c);r=[new xq(c,h.target,h.command)]}}return new _q(s,i,r)}}vL.$au={type:Fi,name:"for"};class yL{get ignoreAttr(){return!0}build(e,t){var i;return new lL(t.parse(e.attr.rawValue,IN),e.attr.target,!1,((i=e.attr.parts)==null?void 0:i[2])??null)}}yL.$au={type:Fi,name:"trigger"};class CL{get ignoreAttr(){return!0}build(e,t){var i;return new lL(t.parse(e.attr.rawValue,IN),e.attr.target,!0,((i=e.attr.parts)==null?void 0:i[2])??null)}}CL.$au={type:Fi,name:"capture"};class SL{get ignoreAttr(){return!0}build(e,t){const i=e.attr,s=i.target;let r=i.rawValue;return r=r===""?vi(s):r,new Y1(s,t.parse(r,Xo),s)}}SL.$au={type:Fi,name:"attr"};class _L{get ignoreAttr(){return!0}build(e,t){return new Y1("style",t.parse(e.attr.rawValue,Xo),e.attr.target)}}_L.$au={type:Fi,name:"style"};class RL{get ignoreAttr(){return!0}build(e,t){return new Y1("class",t.parse(e.attr.rawValue,Xo),e.attr.target)}}RL.$au={type:Fi,name:"class"};class xL{get ignoreAttr(){return!0}build(e,t){return new Rq(t.parse(e.attr.rawValue,Xo),e.attr.target)}}xL.$au={type:Fi,name:"ref"};class EL{get ignoreAttr(){return!1}build(e){return new G1(e.attr.target,e.attr.rawValue)}}EL.$au={type:Fi,name:"spread"},typeof SuppressedError=="function"&&SuppressedError;const Iq=qo("ITemplateElementFactory",n=>n.singleton(Oq)),TL={};class Oq{constructor(){this.p=ue(nf),this._template=this.t()}t(){return this.p.document.createElement("template")}createTemplate(e){var i;if(ft(e)){let s=TL[e];if(s===void 0){const r=this._template;r.innerHTML=e;const o=r.content.firstElementChild;t(o)?(this._template=this.t(),s=r):(r.content.removeChild(o),s=o),TL[e]=s}return s.cloneNode(!0)}if(e.nodeName!=="TEMPLATE"){const s=this.t();return s.content.appendChild(e),s}return(i=e.parentNode)==null||i.removeChild(e),e.cloneNode(!0);function t(s){if(s==null||s.nodeName!=="TEMPLATE"||s.nextElementSibling!=null)return!0;const o=s.previousSibling;if(o!=null)switch(o.nodeType){case 3:return o.textContent.trim().length>0}const a=s.nextSibling;if(a!=null)switch(a.nodeType){case 3:return a.textContent.trim().length>0}return!1}}}const q1="au-start",X1="au-end",Q1=(n,e,t)=>n.insertBefore(e,t),ML=(n,e,t)=>{if(n===null)return;const i=t.length;let s=0;for(;i>s;)n.insertBefore(t[s],e),++s},Vh=(n,e)=>n.content.appendChild(e),AL=(n,e)=>{const t=e.length;let i=0;for(;t>i;)n.content.appendChild(e[i]),++i},PL=n=>n.nodeType===1,IL=n=>n.nodeType===3,jp="au-slot",OL="default",zp=(n=>()=>`anonymous-${++n}`)(0);class kL{constructor(){this.debug=!1,this.resolveResources=!0}compile(e,t){var u,d;if(e.template==null||e.needsCompile===!1)return e;const i=new Yv(e,t,null,null,void 0),s=ft(e.template)||!e.enhance?i._templateFactory.createTemplate(e.template):e.template,r=s.nodeName===Z1&&s.content!=null,o=r?s.content:s,a=$q.findAll(t),l=a.length;let c=0;if(l>0)for(;l>c;)(d=(u=a[c]).compiling)==null||d.call(u,s),++c;if(s.hasAttribute(ex))throw Bn(701,e);return this._compileLocalElement(o,i),this._compileNode(o,i),{...e,name:e.name||zp(),dependencies:(e.dependencies??lt).concat(i.deps??lt),instructions:i.rows,surrogates:r?this._compileSurrogate(s,i):lt,template:s,hasSlots:i.hasSlot,needsCompile:!1}}compileSpread(e,t,i,s,r){const o=new Yv(e,i,null,null,void 0),a=[],l=r??o._findElement(s.nodeName.toLowerCase()),c=l!==null,h=o._exprParser,u=t.length;let d=0,f,g=null,p,m,w,y,C,R=null,_,x,M,I;for(;u>d;++d){if(f=t[d],M=f.target,I=f.rawValue,M==="...$attrs"){a.push(new dL);continue}if(R=o._getCommand(f),R!==null&&R.ignoreAttr){Te.node=s,Te.attr=f,Te.bindable=null,Te.def=null,a.push(R.build(Te,o._exprParser,o._attrMapper));continue}if(c&&(w=o._getBindables(l),y=w.attrs[M],y!==void 0)){R==null?(_=h.parse(I,so),a.push(new fL(_==null?new df(I,y.name):new rl(_,y.name)))):(Te.node=s,Te.attr=f,Te.bindable=y,Te.def=l,a.push(new fL(R.build(Te,o._exprParser,o._attrMapper))));continue}if(g=o._findAttr(M),g!==null){if(g.isTemplateController)throw Bn(9998,M);w=o._getBindables(g),x=g.noMultiBindings===!1&&R===null&&J1(I),x?m=this._compileMultiBindings(s,I,g,o):(C=w.primary,R===null?(_=h.parse(I,so),m=[_===null?new df(I,C.name):new rl(_,C.name)]):(Te.node=s,Te.attr=f,Te.bindable=C,Te.def=g,m=[R.build(Te,o._exprParser,o._attrMapper)])),(p??(p=[])).push(new U1(this.resolveResources?g:g.name,g.aliases!=null&&g.aliases.includes(M)?M:void 0,m));continue}if(R==null)if(_=h.parse(I,so),_!=null)a.push(new rl(_,o._attrMapper.map(s,M)??vi(M)));else switch(M){case"class":a.push(new hL(I));break;case"style":a.push(new uL(I));break;default:a.push(new cL(I,M))}else Te.node=s,Te.attr=f,Te.bindable=null,Te.def=null,a.push(R.build(Te,o._exprParser,o._attrMapper))}return Gv(),p!=null?p.concat(a):a}_compileSurrogate(e,t){const i=[],s=e.attributes,r=t._exprParser;let o=s.length,a=0,l,c,h,u,d=null,f,g,p,m,w=null,y,C,R,_;for(;o>a;++a){if(l=s[a],c=l.name,h=l.value,u=t._attrParser.parse(c,h),R=u.target,_=u.rawValue,Hq[R])throw Bn(702,c);if(w=t._getCommand(u),w!==null&&w.ignoreAttr){Te.node=e,Te.attr=u,Te.bindable=null,Te.def=null,i.push(w.build(Te,t._exprParser,t._attrMapper));continue}if(d=t._findAttr(R),d!==null){if(d.isTemplateController)throw Bn(703,R);p=t._getBindables(d),C=d.noMultiBindings===!1&&w===null&&J1(_),C?g=this._compileMultiBindings(e,_,d,t):(m=p.primary,w===null?(y=r.parse(_,so),g=y===null?_===""?[]:[new df(_,m.name)]:[new rl(y,m.name)]):(Te.node=e,Te.attr=u,Te.bindable=m,Te.def=d,g=[w.build(Te,t._exprParser,t._attrMapper)])),e.removeAttribute(c),--a,--o,(f??(f=[])).push(new U1(this.resolveResources?d:d.name,d.aliases!=null&&d.aliases.includes(R)?R:void 0,g));continue}if(w===null)if(y=r.parse(_,so),y!=null)e.removeAttribute(c),--a,--o,i.push(new rl(y,t._attrMapper.map(e,R)??vi(R)));else switch(c){case"class":i.push(new hL(_));break;case"style":i.push(new uL(_));break;default:i.push(new cL(_,c))}else Te.node=e,Te.attr=u,Te.bindable=null,Te.def=null,i.push(w.build(Te,t._exprParser,t._attrMapper))}return Gv(),f!=null?f.concat(i):i}_compileNode(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this._compileLet(e,t);default:return this._compileElement(e,t)}case 3:return this._compileText(e,t);case 11:{let i=e.firstChild;for(;i!==null;)i=this._compileNode(i,t);break}}return e.nextSibling}_compileLet(e,t){const i=e.attributes,s=i.length,r=[],o=t._exprParser;let a=!1,l=0,c,h,u,d,f,g,p,m;for(;s>l;++l){if(c=i[l],u=c.name,d=c.value,u==="to-binding-context"){a=!0;continue}if(h=t._attrParser.parse(u,d),g=h.target,p=h.rawValue,f=t._getCommand(h),f!==null){if(h.command==="bind")r.push(new aL(o.parse(p,Xo),vi(g)));else throw Bn(704,h);continue}m=o.parse(p,so),m===null&&console.warn(`[DEV:aurelia] Property "${g}" is declared with literal string ${p}. Did you mean ${g}.bind="${p}"?`),r.push(new aL(m===null?new Ci(p):m,vi(g)))}return t.rows.push([new Mq(r,a)]),this._markAsTarget(e,t).nextSibling}_compileElement(e,t){var X,ne,he,re,ke,Ee,J,oe;const i=e.nextSibling,s=(e.getAttribute("as-element")??e.nodeName).toLowerCase(),r=t._findElement(s),o=r!==null,a=o&&r.shadowOptions!=null,l=r==null?void 0:r.capture,c=l!=null&&typeof l!="boolean",h=l?[]:lt,u=t._exprParser,d=this.debug?Yo:()=>{e.removeAttribute(y),--m,--p};let f=e.attributes,g,p=f.length,m=0,w,y,C,R,_,x,M=null,I=!1,A,O,D,j,Y,Z,$,B=null,ie,se,te,pe,b=!0,v=!1,S=!1,T=!1,H,E=0;if(s==="slot"){if(t.root.def.shadowOptions==null)throw Bn(717,t.root.def.name);t.root.hasSlot=!0}for(o&&(H={},b=(X=r.processContent)==null?void 0:X.call(r.Type,e,t.p,H),f=e.attributes,p=f.length);p>m;++m){switch(w=f[m],y=w.name,C=w.value,y){case"as-element":case"containerless":d(),v=v||y==="containerless";continue}if(R=t._attrParser.parse(y,C),B=t._getCommand(R),te=R.target,pe=R.rawValue,l&&(!c||c&&l(te))){if(B!=null&&B.ignoreAttr){d(),h.push(R);continue}if(S=te!==jp&&te!=="slot"&&((E=te.indexOf("..."))===-1||E===0&&te==="...$attrs"),S&&(ie=t._getBindables(r),ie.attrs[te]==null&&!((ne=t._findAttr(te))!=null&&ne.isTemplateController))){d(),h.push(R);continue}}if(te==="...$attrs"){(_??(_=[])).push(new dL),d();continue}if(B!=null&&B.ignoreAttr){Te.node=e,Te.attr=R,Te.bindable=null,Te.def=null,(_??(_=[])).push(B.build(Te,t._exprParser,t._attrMapper)),d();continue}if(te.indexOf("...")===0){if(o&&(te=te.slice(3))!=="$element"){(x??(x=[])).push(new G1("$bindables",te==="$bindables"?pe:te)),d();continue}throw(te==="$bindable"||te==="bindables")&&console.warn(`[DEV:aurelia] Detected usage of ${te} on <${e.nodeName}>, did you mean "$bindables"?`),Bn(720,te)}if(o){if(ie=t._getBindables(r),A=ie.attrs[te],A!==void 0){B===null?(Z=u.parse(pe,so),(x??(x=[])).push(Z==null?new df(pe,A.name):new rl(Z,A.name))):(Te.node=e,Te.attr=R,Te.bindable=A,Te.def=r,(x??(x=[])).push(B.build(Te,t._exprParser,t._attrMapper))),d(),M=t._findAttr(te),M!==null&&console.warn(`[DEV:aurelia] Binding with bindable "${te}" on custom element "${r.name}" is ambiguous.There is a custom attribute with the same name.`);continue}if(te==="$bindables"){if(B!=null){Te.node=e,Te.attr=R,Te.bindable=null,Te.def=r;{const ce=B.build(Te,t._exprParser,t._attrMapper);ce instanceof G1||console.warn(`[DEV:aurelia] Binding with "$bindables" on custom element "${r.name}" with command ${R.command}  did not result in a spread binding instruction. This likely won't work as expected.`),(x??(x=[])).push(ce)}}else console.warn(`[DEV:aurelia] Usage of "$bindables" on custom element "<${r.name}>" is ignored.`);d();continue}}if(te==="$bindables")throw Bn(721,e.nodeName,te,pe);if(M=t._findAttr(te),M!==null){ie=t._getBindables(M),I=M.noMultiBindings===!1&&B===null&&J1(pe),I?D=this._compileMultiBindings(e,pe,M,t):(se=ie.primary,B===null?(Z=u.parse(pe,so),D=Z===null?pe===""?[]:[new df(pe,se.name)]:[new rl(Z,se.name)]):(Te.node=e,Te.attr=R,Te.bindable=se,Te.def=M,D=[B.build(Te,t._exprParser,t._attrMapper)])),d(),M.isTemplateController?(j??(j=[])).push(new Tq(kq,this.resolveResources?M:M.name,void 0,D)):(O??(O=[])).push(new U1(this.resolveResources?M:M.name,M.aliases!=null&&M.aliases.includes(te)?te:void 0,D));continue}if(B===null){Z=u.parse(pe,so),Z!=null&&(d(),(_??(_=[])).push(new rl(Z,t._attrMapper.map(e,te)??vi(te))));continue}Te.node=e,Te.attr=R,Te.bindable=null,Te.def=null,(_??(_=[])).push(B.build(Te,t._exprParser,t._attrMapper)),d()}Gv(),this._shouldReorderAttrs(e,_)&&_!=null&&_.length>1&&this._reorder(e,_),o&&($=new Eq(this.resolveResources?r:r.name,x??lt,null,v,h,H)),(_!=null||$!=null||O!=null)&&(g=lt.concat($??lt,O??lt,_??lt),T=!0);let N;if(j!=null){p=j.length-1,m=p,Y=j[m];let ce;HL(e)?(ce=t.t(),AL(ce,[t._marker(),t._comment(q1),t._comment(X1)])):(this._replaceByMarker(e,t),e.nodeName==="TEMPLATE"?ce=e:(ce=t.t(),Vh(ce,e)));const Ve=ce,Se=t._createChild(g==null?[]:[g]);let _e,P,k=!1,L,G,V,Q,U,W,K=0,q=0,ee=e.firstChild,ge=!1;if(b!==!1)for(;ee!==null;){if(P=PL(ee)?ee.getAttribute(jp):null,k=P!==null||o&&!a,_e=ee.nextSibling,k){if(!o)throw Bn(706,P,s);(he=ee.removeAttribute)==null||he.call(ee,jp),ge=IL(ee)&&ee.textContent.trim()==="",ge||((re=G??(G={}))[ke=P||OL]??(re[ke]=[])).push(ee),e.removeChild(ee)}ee=_e}if(G!=null){L={};for(P in G){for(ce=t.t(),V=G[P],K=0,q=V.length;q>K;++K)Q=V[K],Q.nodeName==="TEMPLATE"?Q.attributes.length>0?Vh(ce,Q):Vh(ce,Q.content):Vh(ce,Q);W=t._createChild(),this._compileNode(ce.content,W),L[P]={name:zp(),type:hf,template:ce,instructions:W.rows,needsCompile:!1}}$.projections=L}if(T&&(o&&(v||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),N=!o||!r.containerless&&!v&&b!==!1,N)if(e.nodeName===Z1)this._compileNode(e.content,Se);else for(ee=e.firstChild;ee!==null;)ee=this._compileNode(ee,Se);for(Y.def={name:zp(),type:hf,template:Ve,instructions:Se.rows,needsCompile:!1};m-- >0;)Y=j[m],ce=t.t(),U=t._marker(),AL(ce,[U,t._comment(q1),t._comment(X1)]),Y.def={name:zp(),type:hf,template:ce,needsCompile:!1,instructions:[[j[m+1]]]};t.rows.push([Y])}else{g!=null&&t.rows.push(g);let ce=e.firstChild,Ve,Se,_e=!1,P=null,k,L,G,V,Q,U=!1,W=0,K=0;if(b!==!1)for(;ce!==null;){if(Se=PL(ce)?ce.getAttribute(jp):null,_e=Se!==null||o&&!a,Ve=ce.nextSibling,_e){if(!o)throw Bn(706,Se,s);(Ee=ce.removeAttribute)==null||Ee.call(ce,jp),U=IL(ce)&&ce.textContent.trim()==="",U||((J=k??(k={}))[oe=Se||OL]??(J[oe]=[])).push(ce),e.removeChild(ce)}ce=Ve}if(k!=null){P={};for(Se in k){for(V=t.t(),L=k[Se],W=0,K=L.length;K>W;++W)G=L[W],G.nodeName===Z1?G.attributes.length>0?Vh(V,G):Vh(V,G.content):Vh(V,G);Q=t._createChild(),this._compileNode(V.content,Q),P[Se]={name:zp(),type:hf,template:V,instructions:Q.rows,needsCompile:!1}}$.projections=P}if(T&&(o&&(v||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),N=!o||!r.containerless&&!v&&b!==!1,N&&e.childNodes.length>0)for(ce=e.firstChild;ce!==null;)ce=this._compileNode(ce,t)}return i}_compileText(e,t){const i=e.parentNode,s=t._exprParser.parse(e.textContent,so),r=e.nextSibling;let o,a,l,c,h;if(s!==null){for({parts:o,expressions:a}=s,(h=o[0])&&Q1(i,t._text(h),e),l=0,c=a.length;c>l;++l)ML(i,e,[t._marker(),t._text(" ")]),(h=o[l+1])&&Q1(i,t._text(h),e),t.rows.push([new Aq(a[l])]);i.removeChild(e)}return r}_compileMultiBindings(e,t,i,s){const r=s._getBindables(i),o=t.length,a=[];let l,c,h=0,u=0,d,f,g,p;for(let m=0;m<o;++m)if(u=t.charCodeAt(m),u===92)++m;else if(u===58){for(l=t.slice(h,m);t.charCodeAt(++m)<=32;);for(h=m;m<o;++m)if(u=t.charCodeAt(m),u===92)++m;else if(u===59){c=t.slice(h,m);break}if(c===void 0&&(c=t.slice(h)),f=s._attrParser.parse(l,c),g=s._getCommand(f),p=r.attrs[f.target],p==null)throw Bn(707,f.target,i.name);for(g===null?(d=s._exprParser.parse(c,so),a.push(d===null?new df(c,p.name):new rl(d,p.name))):(Te.node=e,Te.attr=f,Te.bindable=p,Te.def=i,a.push(g.build(Te,s._exprParser,s._attrMapper)));m<o&&t.charCodeAt(++m)<=32;);h=m,l=void 0,c=void 0}return Gv(),a}_compileLocalElement(e,t){const i=t.root.def.name,s=e,r=p1(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(o===0)return;if(o===s.childElementCount)throw Bn(708,i);const a=new Set,l=[];for(const h of r){if(h.parentNode!==s)throw Bn(709,i);const u=Lq(i,h,a),d=h.content,f=p1(d.querySelectorAll("bindable")),g=new Set,p=new Set,m=f.reduce((y,C)=>{if(C.parentNode!==d)throw Bn(710,u);const R=C.getAttribute("name");if(R===null)throw Bn(711,C,u);const _=C.getAttribute("attribute");if(_!==null&&p.has(_)||g.has(R))throw Bn(712,g,_);_!==null&&p.add(_),g.add(R);const x=p1(C.attributes).filter(M=>!NL.includes(M.name));return x.length>0&&console.warn(`[DEV:aurelia] The attribute(s) ${x.map(M=>M.name).join(", ")} will be ignored for ${C.outerHTML}. Only ${NL.join(", ")} are processed.`),C.remove(),y[R]={name:R,attribute:_??void 0,mode:C.getAttribute("mode")??"default"},y},{});class w{}w.$au={type:hf,name:u,template:h,bindables:m},Reflect.defineProperty(w,"name",{value:$D(u)}),l.push(w),s.removeChild(h)}const c=(t.root.def.dependencies??[]).concat(t.root.def.Type==null?lt:[t.root.def.Type]);for(const h of l)h.dependencies=c.concat(l.filter(u=>u!==h)),t._addLocalDep(h)}_shouldReorderAttrs(e,t){const i=e.nodeName;return i==="INPUT"&&Dq[e.type]===1||i==="SELECT"&&(e.hasAttribute("multiple")||(t==null?void 0:t.some(s=>s.type===z1&&s.to==="multiple")))}_reorder(e,t){switch(e.nodeName){case"INPUT":{const i=t;let s,r,o=0,a;for(let l=0;l<i.length&&o<3;l++)switch(a=i[l],a.to){case"model":case"value":case"matcher":s=l,o++;break;case"checked":r=l,o++;break}r!==void 0&&s!==void 0&&r<s&&([i[s],i[r]]=[i[r],i[s]]);break}case"SELECT":{const i=t;let s=0,r=0,o=0,a;for(let l=0;l<i.length&&o<2;++l){switch(a=i[l],a.to){case"multiple":r=l,o++;break;case"value":s=l,o++;break}o===2&&s<r&&([i[r],i[s]]=[i[s],i[r]])}}}}_markAsTarget(e,t){return Q1(e.parentNode,t._comment("au*"),e),e}_replaceByMarker(e,t){if(HL(e))return e;const i=e.parentNode,s=t._marker();return ML(i,e,[s,t._comment(q1),t._comment(X1)]),i.removeChild(e),s}}kL.register=Rp(jv);const Z1="TEMPLATE",HL=n=>n.nodeValue==="au*";class Yv{constructor(e,t,i,s,r){var a;this.hasSlot=!1,this.deps=null;const o=i!==null;if(this.c=t,this.root=s===null?this:s,this.def=e,this.parent=i,this._resourceResolver=o?i._resourceResolver:t.get(DL),this._commandResolver=o?i._commandResolver:t.get(Nq),this._templateFactory=o?i._templateFactory:t.get(Iq),this._attrParser=o?i._attrParser:t.get(F1),this._exprParser=o?i._exprParser:t.get(af),this._attrMapper=o?i._attrMapper:t.get(ON),this._logger=o?i._logger:t.get($h),typeof((a=(this.p=o?i.p:t.get(nf)).document)==null?void 0:a.nodeType)!="number")throw Bn(722);this.localEls=o?i.localEls:new Set,this.rows=r??[]}_addLocalDep(e){var t;return((t=this.root).deps??(t.deps=[])).push(e),this.root.c.register(e),this}_text(e){return this.p.document.createTextNode(e)}_comment(e){return this.p.document.createComment(e)}_marker(){return this._comment("au*")}h(e){const t=this.p.document.createElement(e);return e==="template"&&this.p.document.adoptNode(t.content),t}t(){return this.h("template")}_findElement(e){return this._resourceResolver.el(this.c,e)}_findAttr(e){return this._resourceResolver.attr(this.c,e)}_getBindables(e){return this._resourceResolver.bindables(e)}_createChild(e){return new Yv(this.def,this.c,this,this.root,e)}_getCommand(e){const t=e.command;return t===null?null:this._commandResolver.get(this.c,t)}}const J1=n=>{const e=n.length;let t=0,i=0;for(;e>i;){if(t=n.charCodeAt(i),t===92)++i;else{if(t===58)return!0;if(t===36&&n.charCodeAt(i+1)===123)return!1}++i}return!1},Gv=()=>{Te.node=Te.attr=Te.bindable=Te.def=null},kq={name:"unnamed",type:hf},Te={node:null,attr:null,bindable:null,def:null},Hq={id:!0,name:!0,"au-slot":!0,"as-element":!0},Dq={checkbox:1,radio:1},DL=qo("IResourceResolver"),Nq=qo("IBindingCommandResolver",n=>{class e{constructor(){this._cache=new WeakMap}get(i,s){let r=this._cache.get(i);return r||this._cache.set(i,r={}),s in r?r[s]:r[s]=Pq.get(i,s)}}return n.singleton(e)}),NL=cf(["name","attribute","mode"]),ex="as-custom-element",Lq=(n,e,t)=>{const i=e.getAttribute(ex);if(i===null||i==="")throw Bn(715,n);if(t.has(i))throw Bn(716,i,n);return t.add(i),e.removeAttribute(ex),i},LL=qo("ITemplateCompilerHooks"),$q=cf({name:Nh("compiler-hooks"),define(n){return{register(e){N1(LL,n).register(e)}}},findAll(n){return n.get(OG(LL))}}),Fq=Object.prototype.hasOwnProperty,ro=Reflect.defineProperty;function Qo(n,e,t){return ro(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t}function ol(n,e,t){e in n||Qo(n,e,t)}const $L=Object.assign,tx=Object.freeze,Wh=String,Kv=Lh.createInterface,Bq=Za.get,Vq=Za.define,Ge=(n,...e)=>new Error(`AUR${Wh(n).padStart(4,"0")}: ${jq(n,...e)}`),Wq={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`,199:"Trying to observe property {{0}} on null/undefined",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",206:"Trying to switch to a null/undefined connectable",207:"Trying to enter an active connectable",208:"Trying to pop a null/undefined connectable",209:"Trying to exit an inactive connectable",210:"Unrecognised collection type {{0:toString}}.",217:"There is no registration for IDirtyChecker interface. If you want to use your own dirty checker, make sure you register it.",218:"Dirty checked is not permitted in this application. Property key {{0}} is being dirty checked.",219:"Trying to set value for property {{0}} in dirty checker",220:'Map/Set "size" is a readonly property',221:'Trying to assign value to readonly property "{{0}}" through computed observer.',224:"Invalid @observable decorator usage, cannot determine property name",225:"Trying to stop an effect that has already been stopped",226:"Maximum number of recursive effect run reached. Consider handle effect dependencies differently."},jq=(n,...e)=>{var i;let t=Wq[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"typeof":l=typeof l;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Wh(l[a.slice(1)]):l=Wh(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};class si{constructor(e,t,i,s){this.parent=e,this.bindingContext=t,this.overrideContext=i,this.isBoundary=s}static getContext(e,t,i){if(e==null)throw Ge(203);let s=e.overrideContext,r=e;if(i>0){for(;i>0;)if(i--,r=r.parent,r==null)return;return s=r.overrideContext,t in s?s:r.bindingContext}for(;r!=null&&!r.isBoundary&&!(t in r.overrideContext)&&!(t in r.bindingContext);)r=r.parent;return r==null?e.bindingContext:(s=r.overrideContext,t in s?s:r.bindingContext)}static create(e,t,i){if(e==null)throw Ge(204);return new si(null,e,t??new BL,i??!1)}static fromParent(e,t,i=new BL){if(e==null)throw Ge(203);return new si(e,t,i,!1)}}class FL{constructor(e,t){e!==void 0&&(this[e]=t)}}class BL{}const{astAssign:Up,astEvaluate:vn,astBind:vc,astUnbind:yc}=(()=>{const n="AccessThis",e="AccessBoundary",t="AccessGlobal",i="AccessScope",s="ArrayLiteral",r="ObjectLiteral",o="PrimitiveLiteral",a="Template",l="Unary",c="CallScope",h="CallMember",u="CallFunction",d="CallGlobal",f="AccessMember",g="AccessKeyed",p="TaggedTemplate",m="Binary",w="Conditional",y="Assign",C="ArrowFunction",R="ValueConverter",_="BindingBehavior",x="ArrayBindingPattern",M="ObjectBindingPattern",I="BindingIdentifier",A="ForOfStatement",O="Interpolation",D="ArrayDestructuring",j="ObjectDestructuring",Y="DestructuringAssignmentLeaf",Z="Custom",$=si.getContext;function B(b,v,S,T){var H;switch(b.$kind){case n:{let E=v.overrideContext,N=v,X=b.ancestor;for(;X--&&E;)N=N.parent,E=(N==null?void 0:N.overrideContext)??null;return X<1&&N?N.bindingContext:void 0}case e:{let E=v;for(;E!=null&&!E.isBoundary;)E=E.parent;return E?E.bindingContext:void 0}case i:{const E=$(v,b.name,b.ancestor);T!==null&&T.observe(E,b.name);const N=E[b.name];if(N==null){if(b.name==="$host")throw Ge(105);return N}return S!=null&&S.boundFn&&Ht(N)?N.bind(E):N}case t:return globalThis[b.name];case d:{const E=globalThis[b.name];if(Ht(E))return E(...b.args.map(N=>B(N,v,S,T)));if(!(S!=null&&S.strict)&&E==null)return;throw Ge(107)}case s:return b.elements.map(E=>B(E,v,S,T));case r:{const E={};for(let N=0;N<b.keys.length;++N)E[b.keys[N]]=B(b.values[N],v,S,T);return E}case o:return b.value;case a:{let E=b.cooked[0];for(let N=0;N<b.expressions.length;++N)E+=Wh(B(b.expressions[N],v,S,T)),E+=b.cooked[N+1];return E}case l:{const E=B(b.expression,v,S,T);switch(b.operation){case"void":return;case"typeof":return typeof E;case"!":return!E;case"-":return-E;case"+":return+E;case"--":if(T!=null)throw Ge(113);return ie(b.expression,v,S,E-1)+b.pos;case"++":if(T!=null)throw Ge(113);return ie(b.expression,v,S,E+1)-b.pos;default:throw Ge(109,b.operation)}}case c:{const E=$(v,b.name,b.ancestor);if(E==null){if(S!=null&&S.strict)throw Ge(114,b.name,E);return}const N=E[b.name];if(Ht(N))return N.apply(E,b.args.map(X=>B(X,v,S,T)));if(N==null){if(S!=null&&S.strict&&!b.optional)throw Ge(111,b.name);return}throw Ge(111,b.name)}case h:{const E=B(b.object,v,S,T);if(E==null&&S!=null&&S.strict&&!b.optionalMember)throw Ge(114,b.name,E);const N=E==null?void 0:E[b.name];if(N==null){if(!b.optionalCall&&(S!=null&&S.strict))throw Ge(111,b.name);return}if(!Ht(N))throw Ge(111,b.name);const X=N.apply(E,b.args.map(ne=>B(ne,v,S,T)));return Kn(E)&&pe.includes(b.name)&&(T==null||T.observeCollection(E)),X}case u:{const E=B(b.func,v,S,T);if(Ht(E))return E(...b.args.map(N=>B(N,v,S,T)));if(E==null){if(!b.optional&&(S!=null&&S.strict))throw Ge(107);return}throw Ge(107)}case C:return(...N)=>{const X=b.args,ne=b.rest,he=X.length-1,re=X.reduce((Ee,J,oe)=>(ne&&oe===he?Ee[J.name]=N.slice(oe):Ee[J.name]=N[oe],Ee),{}),ke=si.fromParent(v,re);return B(b.body,ke,S,T)};case f:{const E=B(b.object,v,S,T);if(E==null){if(!b.optional&&(S!=null&&S.strict))throw Ge(114,b.name,E);return}T!==null&&!b.accessGlobal&&T.observe(E,b.name);const N=E[b.name];return S!=null&&S.boundFn&&Ht(N)?N.bind(E):N}case g:{const E=B(b.object,v,S,T),N=B(b.key,v,S,T);if(E==null){if(!b.optional&&(S!=null&&S.strict))throw Ge(115,N,E);return}return T!==null&&!b.accessGlobal&&T.observe(E,N),E[N]}case p:{const E=b.expressions.map(X=>B(X,v,S,T)),N=B(b.func,v,S,T);if(!Ht(N))throw Ge(110);return N(b.cooked,...E)}case m:{const E=b.left,N=b.right;switch(b.operation){case"&&":return B(E,v,S,T)&&B(N,v,S,T);case"||":return B(E,v,S,T)||B(N,v,S,T);case"??":return B(E,v,S,T)??B(N,v,S,T);case"==":return B(E,v,S,T)==B(N,v,S,T);case"===":return B(E,v,S,T)===B(N,v,S,T);case"!=":return B(E,v,S,T)!=B(N,v,S,T);case"!==":return B(E,v,S,T)!==B(N,v,S,T);case"instanceof":{const X=B(N,v,S,T);return Ht(X)?B(E,v,S,T)instanceof X:!1}case"in":{const X=B(N,v,S,T);return Pv(X)?B(E,v,S,T)in X:!1}case"+":return B(E,v,S,T)+B(N,v,S,T);case"-":return B(E,v,S,T)-B(N,v,S,T);case"*":return B(E,v,S,T)*B(N,v,S,T);case"/":return B(E,v,S,T)/B(N,v,S,T);case"%":return B(E,v,S,T)%B(N,v,S,T);case"<":return B(E,v,S,T)<B(N,v,S,T);case">":return B(E,v,S,T)>B(N,v,S,T);case"<=":return B(E,v,S,T)<=B(N,v,S,T);case">=":return B(E,v,S,T)>=B(N,v,S,T);default:throw Ge(108,b.operation)}}case w:return B(b.condition,v,S,T)?B(b.yes,v,S,T):B(b.no,v,S,T);case y:{let E=B(b.value,v,S,T);if(b.op!=="="){if(T!=null)throw Ge(113);const N=B(b.target,v,S,T);switch(b.op){case"/=":E=N/E;break;case"*=":E=N*E;break;case"+=":E=N+E;break;case"-=":E=N-E;break;default:throw Ge(108,b.op)}}return ie(b.target,v,S,E)}case R:return(H=S==null?void 0:S.useConverter)==null?void 0:H.call(S,b.name,"toView",B(b.expression,v,S,T),b.args.map(E=>B(E,v,S,T)));case _:return B(b.expression,v,S,T);case I:return b.name;case A:return B(b.iterable,v,S,T);case O:if(b.isMulti){let E=b.parts[0],N=0;for(;N<b.expressions.length;++N)E+=Wh(B(b.expressions[N],v,S,T)),E+=b.parts[N+1];return E}else return`${b.parts[0]}${B(b.firstExpression,v,S,T)}${b.parts[1]}`;case Y:return B(b.target,v,S,T);case D:return b.list.map(E=>B(E,v,S,T));case x:case M:case j:default:return;case Z:return b.evaluate(v,S,T)}}function ie(b,v,S,T){var H;switch(b.$kind){case i:{if(b.name==="$host")throw Ge(106);const E=$(v,b.name,b.ancestor);return E[b.name]=T}case f:{const E=B(b.object,v,S,null);if(E==null){if(S!=null&&S.strict)throw Ge(116,b.name);ie(b.object,v,S,{[b.name]:T})}else Pv(E)&&(b.name==="length"&&Kn(E)&&!isNaN(T)?E.splice(T):E[b.name]=T);return T}case g:{const E=B(b.object,v,S,null),N=B(b.key,v,S,null);if(E==null){if(S!=null&&S.strict)throw Ge(116,N);return ie(b.object,v,S,{[N]:T}),T}if(Kn(E)){if(N==="length"&&!isNaN(T))return E.splice(T),T;if(Sp(N))return E.splice(N,1,T),T}return E[N]=T}case y:return ie(b.value,v,S,T),ie(b.target,v,S,T);case R:return T=(H=S==null?void 0:S.useConverter)==null?void 0:H.call(S,b.name,"fromView",T,b.args.map(E=>B(E,v,S,null))),ie(b.expression,v,S,T);case _:return ie(b.expression,v,S,T);case D:case j:{const E=b.list,N=E.length;let X,ne;for(X=0;X<N;X++)switch(ne=E[X],ne.$kind){case Y:ie(ne,v,S,T);break;case D:case j:{if(typeof T!="object"||T===null)throw Ge(112);let he=B(ne.source,si.create(T),S,null);he===void 0&&ne.initializer&&(he=B(ne.initializer,v,S,null)),ie(ne,v,S,he);break}}break}case Y:{if(b instanceof gN){if(T==null)return;if(typeof T!="object")throw Ge(112);let E=B(b.source,si.create(T),S,null);E===void 0&&b.initializer&&(E=B(b.initializer,v,S,null)),ie(b.target,v,S,E)}else{if(T==null)return;if(typeof T!="object")throw Ge(112);const E=b.indexOrProperties;let N;if(Sp(E)){if(!Array.isArray(T))throw Ge(112);N=T.slice(E)}else N=Object.entries(T).reduce((X,[ne,he])=>(E.includes(ne)||(X[ne]=he),X),{});ie(b.target,v,S,N)}break}case Z:return b.assign(v,S,T);default:return}}function se(b,v,S){var T,H,E;switch(b.$kind){case _:{(T=S.bindBehavior)==null||T.call(S,b.name,v,b.args.map(N=>B(N,v,S,null))),se(b.expression,v,S);break}case R:{(H=S.bindConverter)==null||H.call(S,b.name),se(b.expression,v,S);break}case A:{se(b.iterable,v,S);break}case Z:(E=b.bind)==null||E.call(b,v,S)}}function te(b,v,S){var T,H,E;switch(b.$kind){case _:{(T=S.unbindBehavior)==null||T.call(S,b.name,v),te(b.expression,v,S);break}case R:{(H=S.unbindConverter)==null||H.call(S,b.name),te(b.expression,v,S);break}case A:{te(b.iterable,v,S);break}case Z:(E=b.unbind)==null||E.call(b,v,S)}}const pe="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:B,astAssign:ie,astBind:se,astUnbind:te}})(),zq=n=>{const e=n.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{Qo(e,t,()=>{throw Ge(99,t)})})},VL=Lh.createInterface("ICoercionConfiguration"),qv=0,al=1,nx=tx({None:qv,Observer:al,Node:2,Layout:4});function jh(n=0){const e=Array(n);let t=0;for(;t<n;)e[t]=t++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}let Uq=!1;const pr=(()=>{function n(a,l){return a==null?r:r(a)}function e(){return Qo(this,"subs",new o)}function t(a){return this.subs.add(a)}function i(a){return this.subs.remove(a)}const s=new WeakSet;function r(a,l){if(!s.has(a)){s.add(a);const c=a.prototype;ro(c,"subs",{get:e}),ol(c,"subscribe",t),ol(c,"unsubscribe",i)}return a}class o{constructor(){this.count=0,this._subs=[],this._requestDirtySubs=[],this._hasDirtySubs=!1}add(l){return this._subs.includes(l)?!1:(this._subs[this._subs.length]=l,"handleDirty"in l&&(this._requestDirtySubs[this._requestDirtySubs.length]=l,this._hasDirtySubs=!0),++this.count,!0)}remove(l){let c=this._subs.indexOf(l);return c!==-1?(this._subs.splice(c,1),c=this._requestDirtySubs.indexOf(l),c!==-1&&(this._requestDirtySubs.splice(c,1),this._hasDirtySubs=this._requestDirtySubs.length>0),--this.count,!0):!1}notify(l,c){for(const h of this._subs.slice(0))h.handleChange(l,c)}notifyCollection(l,c){const h=this._subs.slice(0),u=h.length;let d=0;for(;d<u;++d)h[d].handleCollectionChange(l,c)}notifyDirty(){if(this._hasDirtySubs)for(const l of this._requestDirtySubs.slice(0))l.handleDirty()}}return n})();class WL{constructor(e){this.owner=e,this.type=al,this._value=(this._obj=e.collection).length}getValue(){return this._obj.length}setValue(e){e!==this._value&&(Number.isNaN(e)?console.warn(`Invalid value "${e}" for array length`):(this._obj.splice(e),this._value=this._obj.length))}handleDirty(){this._value!==this._obj.length&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,s=this._obj.length;(this._value=s)!==i&&(this.subs.notifyDirty(),this.subs.notify(this._value,i))}}jL(WL);class ix{constructor(e){this.owner=e,this.type=al,this._value=(this._obj=e.collection).size}getValue(){return this._obj.size}setValue(){throw Ge(220)}handleDirty(){this._value!==this._obj.size&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,s=this._obj.size;(this._value=s)!==i&&this.subs.notify(this._value,i)}}jL(ix);function jL(n){const e=n.prototype;return ol(e,"subscribe",Yq),ol(e,"unsubscribe",Gq),pr(n,null)}function Yq(n){this.subs.add(n)&&this.subs.count===1&&this.owner.subscribe(this)}function Gq(n){this.subs.remove(n)&&this.subs.count===0&&this.owner.subscribe(this)}const Yp=(()=>{const n=Symbol.for("__au_arr_obs__"),e=Array[n]??Qo(Array,n,new WeakMap);function t(p,m){return p===m?0:(p=p===null?"null":p.toString(),m=m===null?"null":m.toString(),p<m?-1:1)}function i(p,m){return p===void 0?m===void 0?0:1:m===void 0?-1:0}function s(p,m,w,y,C){let R,_,x,M,I,A,O;for(A=w+1;A<y;A++){for(R=p[A],_=m[A],O=A-1;O>=w&&(x=p[O],M=m[O],I=C(x,R),I>0);O--)p[O+1]=x,m[O+1]=M;p[O+1]=R,m[O+1]=_}}function r(p,m,w,y,C){let R=0,_=0,x,M,I,A,O,D,j,Y,Z,$,B,ie,se,te,pe,b,v,S,T;for(;;){if(y-w<=10){s(p,m,w,y,C);return}R=w+(y-w>>1),x=p[w],A=m[w],M=p[y-1],O=m[y-1],I=p[R],D=m[R],j=C(x,M),j>0&&($=x,B=A,x=M,A=O,M=$,O=B),Y=C(x,I),Y>=0?($=x,B=A,x=I,A=D,I=M,D=O,M=$,O=B):(Z=C(M,I),Z>0&&($=M,B=O,M=I,O=D,I=$,D=B)),p[w]=x,m[w]=A,p[y-1]=I,m[y-1]=D,ie=M,se=O,te=w+1,pe=y-1,p[R]=p[te],m[R]=m[te],p[te]=ie,m[te]=se;e:for(_=te+1;_<pe;_++)if(b=p[_],v=m[_],S=C(b,ie),S<0)p[_]=p[te],m[_]=m[te],p[te]=b,m[te]=v,te++;else if(S>0){do{if(pe--,pe==_)break e;T=p[pe],S=C(T,ie)}while(S>0);p[_]=p[pe],m[_]=m[pe],p[pe]=b,m[pe]=v,S<0&&(b=p[_],v=m[_],p[_]=p[te],m[_]=m[te],p[te]=b,m[te]=v,te++)}y-pe<te-w?(r(p,m,pe,y,C),y=te):(r(p,m,w,te,C),w=pe)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let l;function c(){const p=o.push,m=o.unshift,w=o.pop,y=o.shift,C=o.splice,R=o.reverse,_=o.sort;l={push:function(...x){const M=e.get(this);if(M===void 0)return p.apply(this,x);const I=this.length,A=x.length;if(A===0)return I;this.length=M.indexMap.length=I+A;let O=I;for(;O<this.length;)this[O]=x[O-I],M.indexMap[O]=-2,O++;return M.notify(),this.length},unshift:function(...x){const M=e.get(this);if(M===void 0)return m.apply(this,x);const I=x.length,A=new Array(I);let O=0;for(;O<I;)A[O++]=-2;m.apply(M.indexMap,A);const D=m.apply(this,x);return M.notify(),D},pop:function(){const x=e.get(this);if(x===void 0)return w.call(this);const M=x.indexMap,I=w.call(this),A=M.length-1;return M[A]>-1&&(M.deletedIndices.push(M[A]),M.deletedItems.push(I)),w.call(M),x.notify(),I},shift:function(){const x=e.get(this);if(x===void 0)return y.call(this);const M=x.indexMap,I=y.call(this);return M[0]>-1&&(M.deletedIndices.push(M[0]),M.deletedItems.push(I)),y.call(M),x.notify(),I},splice:function(...x){const M=x[0],I=x[1],A=e.get(this);if(A===void 0)return C.apply(this,x);const O=this.length,D=M|0,j=D<0?Math.max(O+D,0):Math.min(D,O),Y=A.indexMap,Z=x.length,$=Z===0?0:Z===1?O-j:I;let B=j;if($>0){const se=B+$;for(;B<se;)Y[B]>-1&&(Y.deletedIndices.push(Y[B]),Y.deletedItems.push(this[B])),B++}if(B=0,Z>2){const se=Z-2,te=new Array(se);for(;B<se;)te[B++]=-2;C.call(Y,M,I,...te)}else C.apply(Y,x);const ie=C.apply(this,x);return($>0||B>0)&&A.notify(),ie},reverse:function(){const x=e.get(this);if(x===void 0)return R.call(this),this;const M=this.length,I=M/2|0;let A=0;for(;A!==I;){const O=M-A-1,D=this[A],j=x.indexMap[A],Y=this[O],Z=x.indexMap[O];this[A]=Y,x.indexMap[A]=Z,this[O]=D,x.indexMap[O]=j,A++}return x.notify(),this},sort:function(x){const M=e.get(this);if(M===void 0)return _.call(this,x),this;let I=this.length;if(I<2)return this;r(this,M.indexMap,0,I,i);let A=0;for(;A<I&&this[A]!==void 0;)A++;(x===void 0||!Ht(x))&&(x=t),r(this,M.indexMap,0,A,x);let O=!1;for(A=0,I=M.indexMap.length;I>A;++A)if(M.indexMap[A]!==A){O=!0;break}return(O||Uq)&&M.notify(),this}};for(const x of a)ro(l[x],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1})}let h=!1;const u="__au_arr_on__";function d(){if(l===void 0&&c(),!(Bq(u,Array)??!1)){Vq(!0,Array,u);for(const p of a)o[p].observing!==!0&&Qo(o,p,l[p])}}class f{constructor(m){this.type=al,h||(h=!0,d()),this.indexObservers={},this.collection=m,this.indexMap=jh(m.length),this.lenObs=void 0,e.set(m,this)}notify(){const m=this.subs;m.notifyDirty();const w=this.indexMap,y=this.collection,C=y.length;this.indexMap=jh(C),m.notifyCollection(y,w)}getLengthObserver(){return this.lenObs??(this.lenObs=new WL(this))}getIndexObserver(m){var w;return(w=this.indexObservers)[m]??(w[m]=new g(this,m))}}pr(f,null);class g{constructor(m,w){this.owner=m,this.index=w,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(m){if(m===this.getValue())return;const w=this.owner,y=this.index,C=w.indexMap;C[y]>-1&&C.deletedIndices.push(C[y]),C[y]=-2,w.collection[y]=m,w.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(m,w){const y=this.index;if(w[y]===y)return;const R=this.value,_=this.value=this.getValue();R!==_&&this.subs.notify(_,R)}subscribe(m){this.subs.add(m)&&this.subs.count===1&&this.owner.subscribe(this)}unsubscribe(m){this.subs.remove(m)&&this.subs.count===0&&this.owner.unsubscribe(this)}}return pr(g,null),function(m){let w=e.get(m);return w===void 0&&(e.set(m,w=new f(m)),d()),w}})(),Xv=(()=>{const n=Symbol.for("__au_set_obs__"),e=Set[n]??Qo(Set,n,new WeakMap),{add:t,clear:i,delete:s}=Set.prototype,r=["add","clear","delete"],o={add:function(c){const h=e.get(this);if(h===void 0)return t.call(this,c),this;const u=this.size;return t.call(this,c),this.size===u?this:(h.indexMap[u]=-2,h.notify(),this)},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const u=c.indexMap;let d=0;for(const f of this.keys())u[d]>-1&&(u.deletedIndices.push(u[d]),u.deletedItems.push(f)),d++;i.call(this),u.length=0,c.notify()}},delete:function(c){const h=e.get(this);if(h===void 0)return s.call(this,c);if(this.size===0)return!1;let d=0;const f=h.indexMap;for(const g of this.keys()){if(g===c){f[d]>-1&&(f.deletedIndices.push(f[d]),f.deletedItems.push(g)),f.splice(d,1);const p=s.call(this,c);return p===!0&&h.notify(),p}d++}return!1}};function a(c){for(const h of r)Qo(c,h,o[h])}class l{constructor(h){this.type=al,this.collection=h,this.indexMap=jh(h.size),this.lenObs=void 0}notify(){const h=this.subs;h.notifyDirty();const u=this.indexMap,d=this.collection,f=d.size;this.indexMap=jh(f),h.notifyCollection(d,u)}getLengthObserver(){return this.lenObs??(this.lenObs=new ix(this))}}return pr(l,null),function(h){let u=e.get(h);return u===void 0&&(e.set(h,u=new l(h)),a(h)),u}})(),Qv=(()=>{const n=Symbol.for("__au_map_obs__"),e=Map[n]??Qo(Map,n,new WeakMap),{set:t,clear:i,delete:s}=Map.prototype,r=["set","clear","delete"],o={set:function(c,h){const u=e.get(this);if(u===void 0)return t.call(this,c,h),this;const d=this.get(c),f=this.size;if(t.call(this,c,h),this.size===f){let p=0;for(const m of this.entries()){if(m[0]===c)return m[1]!==d&&(u.indexMap.deletedIndices.push(u.indexMap[p]),u.indexMap.deletedItems.push(m),u.indexMap[p]=-2,u.notify()),this;p++}return this}return u.indexMap[f]=-2,u.notify(),this},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const u=c.indexMap;let d=0;for(const f of this.keys())u[d]>-1&&(u.deletedIndices.push(u[d]),u.deletedItems.push(f)),d++;i.call(this),u.length=0,c.notify()}},delete:function(c){const h=e.get(this);if(h===void 0)return s.call(this,c);if(this.size===0)return!1;let d=0;const f=h.indexMap;for(const g of this.keys()){if(g===c){f[d]>-1&&(f.deletedIndices.push(f[d]),f.deletedItems.push(g)),f.splice(d,1);const p=s.call(this,c);return p===!0&&h.notify(),p}++d}return!1}};function a(c){for(const h of r)Qo(c,h,o[h])}class l{constructor(h){this.type=al,this.collection=h,this.indexMap=jh(h.size),this.lenObs=void 0}notify(){const h=this.subs;h.notifyDirty();const u=this.indexMap,d=this.collection,f=d.size;this.indexMap=jh(f),h.notifyCollection(d,u)}getLengthObserver(){return this.lenObs??(this.lenObs=new ix(this))}}return pr(l,null),function(h){let u=e.get(h);return u===void 0&&(e.set(h,u=new l(h)),a(h)),u}})(),zL=(()=>{class n{constructor(h){this.version=0,this.count=0,this.o=new Map,this.b=h}add(h){this.o.has(h)||(h.subscribe(this.b),++this.count),this.o.set(h,this.version)}clear(){this.o.forEach(t,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(c,h){h.unsubscribe(this.b)}function t(c,h){this.version!==c&&(h.unsubscribe(this.b),this.o.delete(h))}function i(){return Qo(this,"obs",new n(this))}function s(c,h){this.obs.add(this.oL.getObserver(c,h))}function r(c){let h;if(Kn(c))h=Yp(c);else if(Qd(c))h=Xv(c);else if(pc(c))h=Qv(c);else throw Ge(210,c);this.obs.add(h)}function o(c){this.obs.add(c)}function a(){throw Ge(99,"handleChange")}function l(){throw Ge(99,"handleCollectionChange")}return function(h,u){const d=h.prototype;return ol(d,"observe",s),ol(d,"observeCollection",r),ol(d,"subscribeTo",o),ro(d,"obs",{get:i}),ol(d,"handleChange",a),ol(d,"handleCollectionChange",l),h}})();function oo(n,e){return n==null?zL:zL(n,e)}let mt=null;const gf=[];let ll=!1;function Kq(){ll=!1}function qq(){ll=!0}function Zv(){return mt}function sx(n){if(n==null)throw Ge(206);if(mt==null){mt=n,gf[0]=mt,ll=!0;return}if(mt===n)throw Ge(207);gf.push(n),mt=n,ll=!0}function rx(n){if(n==null)throw Ge(208);if(mt!==n)throw Ge(209);gf.pop(),mt=gf.length>0?gf[gf.length-1]:null,ll=mt!=null}const Xq=tx({get current(){return mt},get connecting(){return ll},enter:sx,exit:rx,pause:Kq,resume:qq}),pf=Reflect.get,Qq=Object.prototype.toString,ox=new WeakMap,Zq="__au_nw__",Jq="__au_nw";function UL(n){switch(Qq.call(n)){case"[object Object]":return n.constructor[Zq]!==!0;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const mf="__raw__";function gt(n){return UL(n)?Jv(n):n}function Jv(n){return ox.get(n)??eX(n)}function Mt(n){return n[mf]??n}function rs(n){return UL(n)&&n[mf]||n}function ax(n,e){return e==="constructor"||e==="__proto__"||e==="$observers"||e===Symbol.toPrimitive||e===Symbol.toStringTag||n.constructor[`${Jq}_${Wh(e)}__`]===!0}function eX(n){const e=Kn(n)?nX:pc(n)||Qd(n)?xX:tX,t=new Proxy(n,e);return ox.set(n,t),ox.set(t,t),t}const tX={get(n,e,t){if(e===mf)return n;const i=Zv();return!ll||ax(n,e)||i==null?pf(n,e,t):(i.observe(n,e),gt(pf(n,e,t)))}},nX={get(n,e,t){if(e===mf)return n;if(!ll||ax(n,e)||mt==null)return pf(n,e,t);switch(e){case"length":return mt.observe(n,"length"),n.length;case"map":return iX;case"includes":return oX;case"indexOf":return aX;case"lastIndexOf":return lX;case"every":return sX;case"filter":return rX;case"find":return hX;case"findIndex":return cX;case"flat":return uX;case"flatMap":return dX;case"join":return fX;case"push":return pX;case"pop":return gX;case"reduce":return _X;case"reduceRight":return RX;case"reverse":return vX;case"shift":return mX;case"unshift":return bX;case"slice":return SX;case"splice":return wX;case"some":return yX;case"sort":return CX;case"keys":return YL;case"values":case Symbol.iterator:return lx;case"entries":return cx}return mt.observe(n,e),gt(pf(n,e,t))},ownKeys(n){var e;return(e=Zv())==null||e.observe(n,"length"),Reflect.ownKeys(n)}};function iX(n,e){const t=Mt(this),i=t.map((s,r)=>rs(n.call(e,gt(s),r,this)));return En(mt,t),gt(i)}function sX(n,e){const t=Mt(this),i=t.every((s,r)=>n.call(e,gt(s),r,this));return En(mt,t),i}function rX(n,e){const t=Mt(this),i=t.filter((s,r)=>rs(n.call(e,gt(s),r,this)));return En(mt,t),gt(i)}function oX(n){const e=Mt(this),t=e.includes(rs(n));return En(mt,e),t}function aX(n){const e=Mt(this),t=e.indexOf(rs(n));return En(mt,e),t}function lX(n){const e=Mt(this),t=e.lastIndexOf(rs(n));return En(mt,e),t}function cX(n,e){const t=Mt(this),i=t.findIndex((s,r)=>rs(n.call(e,gt(s),r,this)));return En(mt,t),i}function hX(n,e){const t=Mt(this),i=t.find((s,r)=>n(gt(s),r,this),e);return En(mt,t),gt(i)}function uX(){const n=Mt(this);return En(mt,n),gt(n.flat())}function dX(n,e){const t=Mt(this);return En(mt,t),Jv(t.flatMap((i,s)=>gt(n.call(e,gt(i),s,this))))}function fX(n){const e=Mt(this);return En(mt,e),e.join(n)}function gX(){return gt(Mt(this).pop())}function pX(...n){return Mt(this).push(...n)}function mX(){return gt(Mt(this).shift())}function bX(...n){return Mt(this).unshift(...n)}function wX(...n){return gt(Mt(this).splice(...n))}function vX(...n){const e=Mt(this),t=e.reverse();return En(mt,e),gt(t)}function yX(n,e){const t=Mt(this),i=t.some((s,r)=>rs(n.call(e,gt(s),r,this)));return En(mt,t),i}function CX(n){const e=Mt(this),t=e.sort(n);return En(mt,e),gt(t)}function SX(n,e){const t=Mt(this);return En(mt,t),Jv(t.slice(n,e))}function _X(n,e){const t=Mt(this),i=t.reduce((s,r,o)=>n(s,gt(r),o,this),e);return En(mt,t),gt(i)}function RX(n,e){const t=Mt(this),i=t.reduceRight((s,r,o)=>n(s,gt(r),o,this),e);return En(mt,t),gt(i)}const xX={get(n,e,t){if(e===mf)return n;const i=Zv();if(!ll||ax(n,e)||i==null)return pf(n,e,t);switch(e){case"size":return i.observe(n,"size"),n.size;case"clear":return IX;case"delete":return OX;case"forEach":return EX;case"add":if(Qd(n))return PX;break;case"get":if(pc(n))return MX;break;case"set":if(pc(n))return AX;break;case"has":return TX;case"keys":return YL;case"values":return lx;case"entries":return cx;case Symbol.iterator:return pc(n)?cx:lx}return gt(pf(n,e,t))}};function EX(n,e){const t=Mt(this);return En(mt,t),t.forEach((i,s)=>{n.call(e,gt(i),gt(s),this)})}function TX(n){const e=Mt(this);return En(mt,e),e.has(rs(n))}function MX(n){const e=Mt(this);return En(mt,e),gt(e.get(rs(n)))}function AX(n,e){return gt(Mt(this).set(rs(n),rs(e)))}function PX(n){return gt(Mt(this).add(rs(n)))}function IX(){return gt(Mt(this).clear())}function OX(n){return gt(Mt(this).delete(rs(n)))}function YL(){const n=Mt(this);En(mt,n);const e=n.keys();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:gt(i),done:s}},[Symbol.iterator](){return this}}}function lx(){const n=Mt(this);En(mt,n);const e=n.values();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:gt(i),done:s}},[Symbol.iterator](){return this}}}function cx(){const n=Mt(this);En(mt,n);const e=n.entries();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:[gt(i[0]),gt(i[1])],done:s}},[Symbol.iterator](){return this}}}const En=(n,e)=>n==null?void 0:n.observeCollection(e),kX=tx({getProxy:Jv,getRaw:Mt,wrap:gt,unwrap:rs,rawKey:mf});class ey{constructor(e,t,i,s,r){this.type=al,this._value=void 0,this._isRunning=!1,this._isDirty=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._wrapped=r?gt(e):e,this.$get=t,this.$set=i,this.oL=s}init(e){this._value=e,this._isDirty=!1}getValue(){return this.subs.count===0?this.$get.call(this._obj,this._obj,this):(this._isDirty&&(this.compute(),this._isDirty=!1),this._value)}setValue(e){if(Ht(this.$set))this._coercer!==void 0&&(e=this._coercer.call(null,e,this._coercionConfig)),Jr(e,this._value)||(this._isRunning=!0,this.$set.call(this._obj,e),this._isRunning=!1,this.run());else throw Ge(221)}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,!0}useCallback(e){return this._callback=e,!0}handleDirty(){this._isDirty||(this._isDirty=!0,this.subs.notifyDirty())}handleChange(){this._isDirty=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this._isDirty=!0,this.subs.count>0&&this.run()}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this.compute(),this._isDirty=!1)}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&(this._isDirty=!0,this.obs.clearAll())}run(){var i;if(this._isRunning)return;const e=this._value,t=this.compute();this._isDirty=!1,Jr(t,e)||((i=this._callback)==null||i.call(this,t,e),this.subs.notify(this._value,e))}compute(){this._isRunning=!0,this.obs.version++;try{return sx(this),this._value=rs(this.$get.call(this._wrapped,this._wrapped,this))}finally{this.obs.clear(),this._isRunning=!1,rx(this)}}}oo(ey,null),pr(ey,null);const hx=Kv("IDirtyChecker",n=>n.callback(()=>{throw Ge(217)})),HX={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class DX{static register(e){e.register(Hh.singleton(this,this),Hh.aliasTo(this,hx))}constructor(){this.tracked=[],this._task=null,this._elapsedFrames=0,this.p=ue(nf),this.check=()=>{if(++this._elapsedFrames<HX.timeoutsPerCheck)return;this._elapsedFrames=0;const e=this.tracked,t=e.length;let i,s=0;for(;s<t;++s)i=e[s],i.isDirty()&&i.flush()},pr(GL,null)}createProperty(e,t){return new GL(this,e,t)}addProperty(e){this.tracked.push(e),this.tracked.length===1&&(this._task=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(e){this.tracked.splice(this.tracked.indexOf(e),1),this.tracked.length===0&&(this._task.cancel(),this._task=null)}}class GL{constructor(e,t,i){this.obj=t,this.key=i,this.type=qv,this._oldValue=void 0,this._dirtyChecker=e}getValue(){return this.obj[this.key]}setValue(e){throw Ge(219,this.key)}isDirty(){return this._oldValue!==this.obj[this.key]}flush(){const e=this._oldValue,t=this.getValue();this._oldValue=t,this.subs.notify(t,e)}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.obj[this.key],this._dirtyChecker.addProperty(this))}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&this._dirtyChecker.removeProperty(this)}}class NX{get doNotCache(){return!0}constructor(e,t){this.type=qv,this._obj=e,this._key=t}getValue(){return this._obj[this._key]}setValue(){}subscribe(){}unsubscribe(){}}class KL{constructor(){this.type=qv}getValue(e,t){return e[t]}setValue(e,t,i){t[i]=e}}class ux{constructor(e,t){this.type=al,this._value=void 0,this._observing=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._key=t}getValue(){return this._value}setValue(e){var t,i;if(this._coercer!==void 0&&(e=this._coercer.call(void 0,e,this._coercionConfig)),this._observing){if(Jr(e,this._value))return;ty=this._value,this._value=e,this.subs.notifyDirty(),this.subs.notify(e,ty),Jr(e,this._value)&&((t=this._callback)==null||t.call(this,e,ty))}else this._value=this._obj[this._key]=e,(i=this._callback)==null||i.call(this,e,ty)}useCallback(e){return this._callback=e,this.start(),!0}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,this.start(),!0}subscribe(e){this._observing===!1&&this.start(),this.subs.add(e)}start(){return this._observing===!1&&(this._observing=!0,this._value=this._obj[this._key],ro(this._obj,this._key,{enumerable:!0,configurable:!0,get:$L(()=>this.getValue(),{getObserver:()=>this}),set:e=>{this.setValue(e)}})),this}stop(){return this._observing&&(ro(this._obj,this._key,{enumerable:!0,configurable:!0,writable:!0,value:this._value}),this._observing=!1),this}}pr(ux,null);let ty;const dx=new KL,bf=Kv("IObserverLocator",n=>n.singleton(FX)),fx=Kv("INodeObserverLocator",n=>n.cachedCallback(e=>(e.getAll($h).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new LX)));class LX{handles(){return!1}getObserver(){return dx}getAccessor(){return dx}}const $X=Kv("IComputedObserverLocator",n=>n.singleton(class{getObserver(t,i,s,r){const o=new ey(t,s.get,s.set,r,!0);return ro(t,i,{enumerable:s.enumerable,configurable:!0,get:$L(()=>o.getValue(),{getObserver:()=>o}),set:a=>{o.setValue(a)}}),o}}));class FX{constructor(){this._adapters=[],this._dirtyChecker=ue(hx),this._nodeObserverLocator=ue(fx),this._computedObserverLocator=ue($X)}addAdapter(e){this._adapters.push(e)}getObserver(e,t){if(e==null)throw Ge(199,t);if(!ND(e))return new NX(e,Ht(t)?"":t);if(Ht(t))return new ey(e,t,void 0,this,!0);const i=QL(e);let s=i[t];return s===void 0&&(s=this.createObserver(e,t),s.doNotCache||(i[t]=s)),s}getAccessor(e,t){var s;const i=(s=e.$observers)==null?void 0:s[t];return i!==void 0?i:this._nodeObserverLocator.handles(e,t,this)?this._nodeObserverLocator.getAccessor(e,t,this):dx}getArrayObserver(e){return Yp(e)}getMapObserver(e){return Qv(e)}getSetObserver(e){return Xv(e)}createObserver(e,t){var s,r;if(this._nodeObserverLocator.handles(e,t,this))return this._nodeObserverLocator.getObserver(e,t,this);switch(t){case"length":if(Kn(e))return Yp(e).getLengthObserver();break;case"size":if(pc(e))return Qv(e).getLengthObserver();if(Qd(e))return Xv(e).getLengthObserver();break;default:if(Kn(e)&&Sp(t))return Yp(e).getIndexObserver(Number(t));break}let i=XL(e,t);if(i===void 0){let o=qL(e);for(;o!==null&&(i=XL(o,t),i===void 0);)o=qL(o)}if(i!==void 0&&!Fq.call(i,"value")){let o=this._getAdapterObserver(e,t,i);return o==null&&(o=(r=(s=i.get)==null?void 0:s.getObserver)==null?void 0:r.call(s,e)),o??(i.configurable?this._computedObserverLocator.getObserver(e,t,i,this):this._dirtyChecker.createProperty(e,t))}return new ux(e,t)}_getAdapterObserver(e,t,i){if(this._adapters.length>0)for(const s of this._adapters){const r=s.getObserver(e,t,i,this);if(r!=null)return r}return null}}const gx=n=>{let e;return Kn(n)?e=Yp(n):pc(n)?e=Qv(n):Qd(n)&&(e=Xv(n)),e},qL=Object.getPrototypeOf,XL=Object.getOwnPropertyDescriptor,QL=n=>{let e=n.$observers;return e===void 0&&ro(n,"$observers",{enumerable:!1,value:e=Kt()}),e};class BX{constructor(e,t){this.oL=e,this.fn=t,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this._cleanupTask=void 0,this.run=()=>{var i;if(this.stopped)throw Ge(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{(i=this._cleanupTask)==null||i.call(void 0),sx(this),this._cleanupTask=this.fn(this)}finally{this.obs.clear(),this.running=!1,rx(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,Ge(226);this.run()}else this.runCount=0}},this.stop=()=>{var i;(i=this._cleanupTask)==null||i.call(void 0),this._cleanupTask=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}}oo(BX,null);class ZL{constructor(e,t,i,s){this.oL=t,this._value=void 0,this.boundFn=!1,this._scope=e,this.ast=i,this._callback=s}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const e=this._value,t=vn(this.ast,this._scope,this,this);this.obs.clear(),Jr(t,e)||(this._value=t,this._callback.call(void 0,t,e))}stop(){this.obs.clearAll(),this._value=void 0}}oo(ZL,null),zq(ZL);const VX=(()=>{function n(r){return r.$observers===void 0&&ro(r,"$observers",{value:{}}),r.$observers}const e={};function t(r,o){s.mixed||(s.mixed=!0,pr(s,null));let a=!1,l;if(typeof r=="object"?l=r:r!=null?(l={name:r},a=!0):l=ZD,arguments.length===0)return function(u,d){if(d.kind!=="field")throw Ge(224);return c(d)};if((o==null?void 0:o.kind)==="field")return c(o);if(a)return function(u,d){h(u,l.name,()=>e,!0)};return function(u,d){switch(d.kind){case"field":return c(d);case"class":return h(u,l.name,()=>e,!0);default:throw Ge(224)}};function c(u){let d;return u.addInitializer(function(){h(this,u.name,()=>d,!1)}),function(f){return d=f}}function h(u,d,f,g){const p=l.callback||`${Wh(d)}Changed`,m=l.set,w=function(){var R;const C=i(this,d,p,f,m);return(R=Zv())==null||R.subscribeTo(C),C.getValue()};w.getObserver=function(C){return i(C,d,p,f,m)};const y={enumerable:!0,configurable:!0,get:w,set(C){i(this,d,p,f,m).setValue(C)}};ro(g?u.prototype:u,d,y)}}function i(r,o,a,l,c){const h=n(r);let u=h[o];if(u==null){const d=l();u=new s(r,a,c,d===e?void 0:d),h[o]=u}return u}class s{constructor(o,a,l,c){this.type=al,this._value=void 0,this._oldValue=void 0,this._obj=o,this._setter=l,this._hasSetter=Ht(l);const h=o[a];this.cb=Ht(h)?h:void 0,this._value=c}getValue(){return this._value}setValue(o){var a;this._hasSetter&&(o=this._setter(o)),Jr(o,this._value)||(this._oldValue=this._value,this._value=o,this.subs.notifyDirty(),this.subs.notify(this._value,this._oldValue),Jr(o,this._value)&&((a=this.cb)==null||a.call(this._obj,this._value,this._oldValue)))}}return s.mixed=!1,t})();typeof SuppressedError=="function"&&SuppressedError;const Gp="pending",ny="running",px="completed",iy="canceled",mx=new Map,JL=n=>()=>{throw zh(`AUR1005: The PLATFORM did not receive a valid reference to the global function '${n}'.`)};class bx{constructor(e,t={}){var i,s;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=e,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(r=>{this[r]=r in t?t[r]:e[r]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(r=>{var o;this[r]=r in t?t[r]:((o=e[r])==null?void 0:o.bind(e))??JL(r)}),this.performanceNow="performanceNow"in t?t.performanceNow:((s=(i=e.performance)==null?void 0:i.now)==null?void 0:s.bind(e.performance))??JL("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new wx(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(e,t={}){let i=mx.get(e);return i===void 0&&mx.set(e,i=new bx(e,t)),i}static set(e,t){mx.set(e,t)}requestMacroTask(){this.macroTaskRequested=!0,this.macroTaskHandle===-1&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,this.macroTaskRequested===!0&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class wx{get isEmpty(){return this._pendingAsyncCount===0&&this._processing.length===0&&this._pending.length===0&&this._delayed.length===0}get _hasNoMoreFiniteWork(){return this._pendingAsyncCount===0&&this._processing.every(yx)&&this._pending.every(yx)&&this._delayed.every(yx)}constructor(e,t,i){this.platform=e,this.$request=t,this.$cancel=i,this._suspenderTask=void 0,this._pendingAsyncCount=0,this._processing=[],this._pending=[],this._delayed=[],this._flushRequested=!1,this._yieldPromise=void 0,this._lastRequest=0,this._lastFlush=0,this._requestFlush=()=>{this._tracer.enabled&&this._tracer.enter(this,"requestFlush"),this._flushRequested||(this._flushRequested=!0,this._lastRequest=this._now(),this.$request()),this._tracer.enabled&&this._tracer.leave(this,"requestFlush")},this._now=e.performanceNow,this._tracer=new zX(e.console)}flush(e=this._now()){if(this._tracer.enabled&&this._tracer.enter(this,"flush"),this._flushRequested=!1,this._lastFlush=e,this._suspenderTask===void 0){let t;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let s=0;s<this._delayed.length;++s)t=this._delayed[s],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(s--,1));let i;for(;this._processing.length>0;)if((i=this._processing.shift()).run(),i.status===ny)if(i.suspend===!0){this._suspenderTask=i,this._requestFlush(),this._tracer.enabled&&this._tracer.leave(this,"flush early async");return}else++this._pendingAsyncCount;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let s=0;s<this._delayed.length;++s)t=this._delayed[s],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(s--,1));if((this._processing.length>0||this._delayed.length>0||this._pendingAsyncCount>0)&&this._requestFlush(),this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const s=this._yieldPromise;this._yieldPromise=void 0,s.resolve()}}else this._requestFlush();this._tracer.enabled&&this._tracer.leave(this,"flush full")}cancel(){this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._flushRequested&&(this.$cancel(),this._flushRequested=!1),this._tracer.enabled&&this._tracer.leave(this,"cancel")}async yield(){this._tracer.enabled&&this._tracer.enter(this,"yield"),this.isEmpty?this._tracer.enabled&&this._tracer.leave(this,"yield empty"):(this._yieldPromise===void 0&&(this._tracer.enabled&&this._tracer.trace(this,"yield - creating promise"),this._yieldPromise=n$()),await this._yieldPromise,this._tracer.enabled&&this._tracer.leave(this,"yield task"))}queueTask(e,t){this._tracer.enabled&&this._tracer.enter(this,"queueTask");const{delay:i,preempt:s,persistent:r,suspend:o}={...UX,...t};if(s){if(i>0)throw GX();if(r)throw KX()}this._processing.length===0&&this._requestFlush();const a=this._now(),l=new jX(this._tracer,this,a,a+i,s,r,o,e);return s?this._processing[this._processing.length]=l:i===0?this._pending[this._pending.length]=l:this._delayed[this._delayed.length]=l,this._tracer.enabled&&this._tracer.leave(this,"queueTask"),l}remove(e){this._tracer.enabled&&this._tracer.enter(this,"remove");let t=this._processing.indexOf(e);if(t>-1){this._processing.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove processing");return}if(t=this._pending.indexOf(e),t>-1){this._pending.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove pending");return}if(t=this._delayed.indexOf(e),t>-1){this._delayed.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove delayed");return}throw this._tracer.enabled&&this._tracer.leave(this,"remove error"),zh(`Task #${e.id} could not be found`)}_resetPersistentTask(e){this._tracer.enabled&&this._tracer.enter(this,"resetPersistentTask"),e.reset(this._now()),e.createdTime===e.queueTime?this._pending[this._pending.length]=e:this._delayed[this._delayed.length]=e,this._tracer.enabled&&this._tracer.leave(this,"resetPersistentTask")}_completeAsyncTask(e){var t;if(this._tracer.enabled&&this._tracer.enter(this,"completeAsyncTask"),e.suspend===!0){if(this._suspenderTask!==e)throw this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask error"),zh(`Async task completion mismatch: suspenderTask=${(t=this._suspenderTask)==null?void 0:t.id}, task=${e.id}`);this._suspenderTask=void 0}else--this._pendingAsyncCount;if(this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const i=this._yieldPromise;this._yieldPromise=void 0,i.resolve()}this.isEmpty&&this.cancel(),this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask")}}class vx extends Error{constructor(e){super("Task was canceled."),this.task=e}}let WX=0;class jX{get result(){const e=this._result;if(e===void 0)switch(this._status){case Gp:{const t=this._result=n$();return this._resolve=t.resolve,this._reject=t.reject,t}case ny:throw zh("Trying to await task from within task will cause a deadlock.");case px:return this._result=Promise.resolve();case iy:return this._result=Promise.reject(new vx(this))}return e}get status(){return this._status}constructor(e,t,i,s,r,o,a,l){this.taskQueue=t,this.createdTime=i,this.queueTime=s,this.preempt=r,this.persistent=o,this.suspend=a,this.callback=l,this.id=++WX,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._status=Gp,this._tracer=e}run(e=this.taskQueue.platform.performanceNow()){if(this._tracer.enabled&&this._tracer.enter(this,"run"),this._status!==Gp)throw this._tracer.enabled&&this._tracer.leave(this,"run error"),zh(`Cannot run task in ${this._status} state`);const{persistent:t,taskQueue:i,callback:s,_resolve:r,_reject:o,createdTime:a}=this;let l;this._status=ny;try{l=s(e-a),l instanceof Promise?l.then(c=>{this.persistent?i._resetPersistentTask(this):(t?this._status=iy:this._status=px,this.dispose()),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async then"),r!==void 0&&r(c)}).catch(c=>{if(this.persistent||this.dispose(),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async catch"),o!==void 0)o(c);else throw c}):(this.persistent?i._resetPersistentTask(this):(t?this._status=iy:this._status=px,this.dispose()),this._tracer.enabled&&this._tracer.leave(this,"run sync success"),r!==void 0&&r(l))}catch(c){if(this.persistent||this.dispose(),this._tracer.enabled&&this._tracer.leave(this,"run sync error"),o!==void 0)o(c);else throw c}}cancel(){if(this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._status===Gp){const e=this.taskQueue,t=this._reject;return e.remove(this),e.isEmpty&&e.cancel(),this._status=iy,this.dispose(),t!==void 0&&t(new vx(this)),this._tracer.enabled&&this._tracer.leave(this,"cancel true =pending"),!0}else if(this._status===ny&&this.persistent)return this.persistent=!1,this._tracer.enabled&&this._tracer.leave(this,"cancel true =running+persistent"),!0;return this._tracer.enabled&&this._tracer.leave(this,"cancel false"),!1}reset(e){this._tracer.enabled&&this._tracer.enter(this,"reset");const t=this.queueTime-this.createdTime;this.createdTime=e,this.queueTime=e+t,this._status=Gp,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._tracer.enabled&&this._tracer.leave(this,"reset")}dispose(){this._tracer.enabled&&this._tracer.trace(this,"dispose"),this.callback=void 0,this._resolve=void 0,this._reject=void 0,this._result=void 0}}class zX{constructor(e){this.console=e,this.enabled=!1,this.depth=0}enter(e,t){this.log(`${"  ".repeat(this.depth++)}> `,e,t)}leave(e,t){this.log(`${"  ".repeat(--this.depth)}< `,e,t)}trace(e,t){this.log(`${"  ".repeat(this.depth)}- `,e,t)}log(e,t,i){if(t instanceof wx){const s=t._processing.length,r=t._pending.length,o=t._delayed.length,a=t._flushRequested,l=!!t._suspenderTask,c=`processing=${s} pending=${r} delayed=${o} flushReq=${a} susTask=${l}`;this.console.log(`${e}[Q.${i}] ${c}`)}else{const s=t.id,r=Math.round(t.createdTime*10)/10,o=Math.round(t.queueTime*10)/10,a=t.preempt,l=t.persistent,c=t.suspend,h=t._status,u=`id=${s} created=${r} queue=${o} preempt=${a} persistent=${l} status=${h} suspend=${c}`;this.console.log(`${e}[T.${i}] ${u}`)}}}const UX={delay:0,preempt:!1,persistent:!1,suspend:!1};let e$,t$;const YX=(n,e)=>{e$=n,t$=e},n$=()=>{const n=new Promise(YX);return n.resolve=e$,n.reject=t$,n},yx=n=>n.persistent,GX=()=>zh("AUR1006: Invalid arguments: preempt cannot be combined with a greater-than-zero delay"),KX=()=>zh("AUR1007: Invalid arguments: preempt cannot be combined with persistent"),zh=n=>new Error(n);class Cc extends bx{static getOrCreate(e,t={}){let i=Cc._lookup.get(e);return i===void 0&&Cc._lookup.set(e,i=new Cc(e,t)),i}static set(e,t){Cc._lookup.set(e,t)}get domWriteQueue(){return this.console.log("[DEV:aurelia] platform.domQueue is deprecated, please use platform.domQueue instead."),this.domQueue}get domReadQueue(){return this.console.log("[DEV:aurelia] platform.domReadQueue has been removed, please use platform.domQueue instead."),this.domQueue}constructor(e,t={}){super(e,t);const i=s=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${s}'.`)};"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(s=>this[s]=s in t?t[s]:e[s]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(s=>{var r;return this[s]=s in t?t[s]:((r=e[s])==null?void 0:r.bind(e))??i(s)}),this.domQueue=(()=>{let s=!1,r=-1;const o=()=>{s=!0,r===-1&&(r=this.requestAnimationFrame(l))},a=()=>{s=!1,r>-1&&(this.cancelAnimationFrame(r),r=-1)},l=()=>{r=-1,s===!0&&(s=!1,c.flush())},c=new wx(this,o,a);return c})()}}Cc._lookup=new WeakMap,typeof SuppressedError=="function"&&SuppressedError;const{default:Cx,oneTime:sy,toView:Vn,fromView:cl,twoWay:i$}=Vp,Bi=Za.get,ry=Za.has,ao=Za.define,{annotation:qX}=zD,hl=qX.keyFor,Kp=Object,Uh=String,s$=Kp.prototype,Yh=s$.hasOwnProperty,ul=Kp.freeze,r$=Kp.assign,o$=Kp.getOwnPropertyNames,Sx=Kp.keys,a$=Kt(),_x=(n,e,t)=>{if(a$[e]===!0)return!0;if(!ft(e))return!1;const i=e.slice(0,5);return a$[e]=i==="aria-"||i==="data-"||t.isStandardSvgAttribute(n,e)},Rx=n=>{throw n},l$=Reflect.defineProperty,Ws=(n,e,t)=>(l$(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t),c$=(n,e,t)=>n.addSignalListener(e,t),h$=(n,e,t)=>n.removeSignalListener(e,t),XX="Interpolation",QX="IsIterator",ZX="IsFunction",Zo="IsProperty",u$="pending",xx="running",Ex=nx.Observer,Sc=nx.Node,Jo=nx.Layout,ye=(n,...e)=>new Error(`AUR${Uh(n).padStart(4,"0")}: ${eQ(n,...e)}`),JX={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:"No binding behavior definition found for type {{0:name}}",152:"No value converter definition found for type {{0:name}}",153:'Element "{{0}}" has already been registered.',154:'Attribute "{{0}}" has already been registered.',155:"Value converter {{0}} has already been registered.",156:"Binding behavior {{0}} has already been registered.",157:"Binding command {{0}} has already been registered.",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",227:"@bindable is not supported for properties that uses a symbol for name. Use a string for the property name instead.",228:"@bindable cannot be used as a class decorator when no configuration object is supplied.",229:"@bindable cannot be used as a class decorator when no property name is supplied in the configuration object.",500:"There is no cached controller for the provided ViewModel: {{0}}",501:"Invalid combination: cannot combine the containerless custom element option with Shadow DOM.",502:"Trying to activate a disposed controller: {{0}}.",503:"Controller at {{0}} is in an unexpected state: {{1}} during activation.",504:"Synthetic view at {{0}} is being activated with null/undefined scope.",505:"Controller at {{0}} is in an unexpected state: {{1}} during deactivation.",506:"Invalid callback for @watch decorator: {{0}}",507:"Observer for bindable property {{0}} does not support coercion.",508:"Observer for property {{0}} does not support change handler.",759:"No attribute definition found for type {{0:name}}",760:"No element definition found for type {{0:name}}",761:"Cannot create a custom element definition with only a name and no type: {{0}}",762:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",763:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",764:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",765:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",766:"Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a {{0:typeof}}.",652:"Aurelia is unable to observe property {{0}}. Register observation mapping with .useConfig().",653:"Mapping for property {{0}} of <{{1}} /> already exists",654:"Array values can only be bound to a multi-select.",714:'Template compilation error: primary already exists on element/attribute "{{0}}"',719:"Attribute {{0}} has been already registered for {{1:element}}",767:"Aurelia.root was accessed without a valid root.",768:"An instance of Aurelia is already registered with the container or an ancestor of it.",769:"Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView, did you create the host from a DOMParser and forget to call adoptNode()?",770:"Aurelia.start() was called without a composition root",771:"The aurelia instance must be fully stopped before it can be disposed",750:"view.ref is not supported. If you are migrating from v1, this can be understood as the controller.",751:`Attempted to reference "{{0}}", but it was not found amongst the target's API.`,752:"Element {{0:.res}} is not registered in {{1:name}}.",753:"Attribute {{0:.res}} is not registered in {{1:name}}.",754:"Attribute {{0:.res}} is not registered in {{1:name}}.",755:"Cannot resolve ViewFactory before the provider was prepared.",756:"Cannot resolve ViewFactory without a (valid) name.",757:"AUR0757: The compiled template is not aligned with the render instructions. There are {{0}} targets and {{1}} instructions.",772:"Invalid @watch decorator config. Expected an expression or a fn but received null/undefined.",773:'Invalid @watch decorator change handler config.Method "{{0}}" not found in class {{1}}',774:"Invalid @watch decorator usage: decorated target {{0}} is not a class method.",775:'Invalid command "{{0}}" usage with [repeat]',776:'Invalid [repeat] usage, found extraneous target "{{0}}"',777:"Unsupported: [repeat] cannot iterate over {{0:toString}}",778:"Unsupported: [repeat] cannot count {{0:toString}}",814:"[repeat] encountered an error: number of views != number of items {{0:join(!=)}}",779:"Invalid portal insertion position: {{0}}",801:'"& self" binding behavior only supports listener binding via trigger/capture command.',802:`"& updateTrigger" invalid usage. This binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:'blur'">`,803:'"& updateTrigger" invalid usage. This binding behavior can only be applied to two-way/ from-view bindings.',805:'Invalid scope behavior "{{0}}" on <au-compose />. Only "scoped" or "auto" allowed.',806:`<au-compose /> couldn't find a custom element with name "{{0}}", did you forget to register it locally or globally?`,807:"Composition has already been activated/deactivated. Id: {{0:controller}}",808:"Composition has already been deactivated.",810:"Invalid [else] usage, it should follow an [if]",811:"Invalid portal strict target query, empty query.",812:"Invalid portal strict target resolution, target not found.",813:'Invalid [pending]/[then]/[catch] usage. The parent [promise].resolve not found; only "*[promise.resolve] > *[pending|then|catch]" relation is supported.',815:'Invalid [case/default-case] usage. The parent [switch] not found; only "*[switch] > *[case|default-case]" relation is supported.',816:"Invalid [default-case] usage. Multiple 'default-case's are not allowed.",817:'"& signal" binding behavior can only be used with bindings that have a "handleChange" method',818:`"& signal" invalid usage. At least one signal name must be passed to the signal behavior, e.g. "expr & signal:'my-signal'"`,819:"Spreading to bindables onto non custom element",820:"Invalid spread target {{0}}",9999:"No scope context for spread binding.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?",9997:"Marker is malformed. This likely happens when a compiled template has been modified. Did you accidentally modified some compiled template? You can modify template before compilation with compiling Template compiler hook.",9996:"Invalid usage, a rate limit has already been applied. Did you have both throttle and debounce on the same binding?",9995:"The binding already has a target subscriber.",9994:`"& attr" can be only used on property binding. It's used on {{0:ctor}}`,9993:'"& updateTrigger" binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger',9992:'"& updateTrigger" uses node observer to observe, but it does not know how to use events to observe property <{{0:target@property}} />',9991:"Invalid @children usage. @children decorator can only be used on a field",9990:"Invalid @slotted usage. @slotted decorator can only be used on a field",9989:"Invalid query selector. Only selectors with alpha-numeric characters, or $all are allowed. Got {{0}} instead."},eQ=(n,...e)=>{var i;let t=JX[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=tQ(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Uh(l[a.slice(1)]):l=Uh(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function tQ(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}function oy(n,e){let t;function i(s,r){var c;let o;switch(r.kind){case"getter":case"field":{const h=r.name;if(typeof h!="string")throw ye(227);o=h;break}case"class":if(t==null)throw ye(228);if(typeof t=="string")o=t;else{const h=t.name;if(!h)throw ye(229);if(typeof h!="string")throw ye(227);o=h}break}const a=t==null||typeof t=="string"?{name:o}:t,l=(c=r.metadata)[_c]??(c[_c]=Kt());l[o]=dl.create(o,a)}if(arguments.length>1){t={},i(n,e);return}else if(ft(n))return t=n,i;return t=n===void 0?{}:n,i}const _c=hl("bindables"),js=ul({name:_c,keyFrom:n=>`${_c}:${n}`,from(...n){const e={},t=Array.isArray;function i(o){e[o]=dl.create(o)}function s(o,a){e[o]=a instanceof dl?a:dl.create(o,a===!0?{}:a)}function r(o){t(o)?o.forEach(a=>ft(a)?i(a):s(a.name,a)):o instanceof dl?e[o.name]=o:o!==void 0&&Sx(o).forEach(a=>s(a,o[a]))}return n.forEach(r),e},getAll(n){const e=[],t=hG(n);let i=t.length,s;for(;--i>=0;){s=t[i];const r=Bi(_c,s);r!=null&&e.push(...Object.values(r))}return e},_add(n,e){let t=Bi(_c,e);t==null&&ao(t=Kt(),e,_c),t[n.name]=n}});class dl{constructor(e,t,i,s,r,o){this.attribute=e,this.callback=t,this.mode=i,this.primary=s,this.name=r,this.set=o}static create(e,t={}){const i=t.mode??Vn;return new dl(t.attribute??FD(e),t.callback??`${e}Changed`,ft(i)?Vp[i]??Cx:i,t.primary??!1,t.name??e,t.set??nQ(t))}}const Tx={key:hl("coercer"),define(n,e){ao(n[e].bind(n),n,Tx.key)},for(n){return Bi(Tx.key,n)}};function nQ(n={}){const e=n.type??null;if(e==null)return Yo;let t;switch(e){case Number:case Boolean:case String:case BigInt:t=e;break;default:{const i=e.coerce;t=typeof i=="function"?i.bind(e):Tx.for(e)??Yo;break}}return t===Yo?t:iQ(t,n.nullable)}function iQ(n,e){return function(t,i){return i!=null&&i.enableCoercion?(e??!((i==null?void 0:i.coerceNullish)??!1))&&t==null?t:n(t,i):t}}const Tn=Lh.createInterface,ea=Hh.singleton,Rc=Hh.aliasTo,sQ=Hh.instance,ri=(n,e,t)=>n.registerResolver(e,t),rQ="custom-element",oQ="custom-attribute",xc=(n,e,t,i="__au_static_resource__")=>{var r;let s=Bi(i,n);return s==null&&((r=n.$au)==null?void 0:r.type)===e&&(s=t(n.$au,n),ao(s,n,i)),s};class qp{constructor(e,t,i,s){this.Type=e,this.name=t,this.aliases=i,this.key=s}static create(e,t){let i,s;return ft(e)?(i=e,s={name:i}):(i=e.name,s=e),new qp(t,mc(d$(t,"name"),i),ni(d$(t,"aliases"),s.aliases,t.aliases),f$.keyFrom(i))}register(e,t){const i=this.Type,s=typeof t=="string"?Xp(t):this.key,r=this.aliases;e.has(s,!1)?console.warn(`[DEV:aurelia] ${ye(156,this.name)}`):e.register(e.has(i,!1)?null:ea(i,i),Rc(i,s),...r.map(o=>Rc(i,Xp(o))))}}const mr="binding-behavior",wf=Nh(mr),d$=(n,e)=>Bi(hl(e),n),Xp=n=>`${wf}:${n}`,f$=ul({name:wf,keyFrom:Xp,isType(n){var e;return Ht(n)&&(ry(wf,n)||((e=n.$au)==null?void 0:e.type)===mr)},define(n,e){const t=qp.create(n,e),i=t.Type;return ao(t,i,wf,jo),i},getDefinition(n){const e=Bi(wf,n)??xc(n,mr,qp.create);if(e===void 0)throw ye(151,n);return e},find(n,e){const t=n.find(mr,e);return t==null?null:Bi(wf,t)??xc(t,mr,qp.create)??null},get(n,e){try{return n.get(sf(Xp(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve binding behavior with name",e),t}return n.get(sf(Xp(e)))}}),Mx=new Map,ay=n=>({type:mr,name:n});class ly{bind(e,t){Mx.set(t,t.mode),t.mode=this.mode}unbind(e,t){t.mode=Mx.get(t),Mx.delete(t)}}class g$ extends ly{get mode(){return sy}}g$.$au=ay("oneTime");class p$ extends ly{get mode(){return Vn}}p$.$au=ay("toView");class m$ extends ly{get mode(){return cl}}m$.$au=ay("fromView");class b$ extends ly{get mode(){return i$}}b$.$au=ay("twoWay");const Ax=new WeakMap,aQ=200;class w${constructor(){this._platform=ue(nf)}bind(e,t,i,s){var a;const r={type:"debounce",delay:i??aQ,now:this._platform.performanceNow,queue:this._platform.taskQueue,signals:ft(s)?[s]:s??lt},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):Ax.set(t,o)}unbind(e,t){var i;(i=Ax.get(t))==null||i.dispose(),Ax.delete(t)}}w$.$au={type:mr,name:"debounce"};const cy=Tn("ISignaler",n=>n.singleton(lQ));class lQ{constructor(){this.signals=Kt()}dispatchSignal(e){const t=this.signals[e];if(t===void 0)return;let i;for(i of t.keys())i.handleChange(void 0,void 0)}addSignalListener(e,t){var i;((i=this.signals)[e]??(i[e]=new Set)).add(t)}removeSignalListener(e,t){var i;(i=this.signals[e])==null||i.delete(t)}}class v${constructor(){this._lookup=new Map,this._signaler=ue(cy)}bind(e,t,...i){if(!("handleChange"in t))throw ye(817);if(i.length===0)throw ye(818);this._lookup.set(t,i);let s;for(s of i)c$(this._signaler,s,t)}unbind(e,t){const i=this._lookup.get(t);this._lookup.delete(t);let s;for(s of i)h$(this._signaler,s,t)}}v$.$au={type:mr,name:"signal"};const Px=new WeakMap,cQ=200;class y${constructor(){({performanceNow:this._now,taskQueue:this._taskQueue}=ue(nf))}bind(e,t,i,s){var a;const r={type:"throttle",delay:i??cQ,now:this._now,queue:this._taskQueue,signals:ft(s)?[s]:s??lt},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):Px.set(t,o)}unbind(e,t){var i;(i=Px.get(t))==null||i.dispose(),Px.delete(t)}}y$.$au={type:mr,name:"throttle"};const br=nf,Ix=(()=>{const n=new WeakMap;return ul({add(e,t){let i=n.get(e);i==null&&n.set(e,i=[]),i.push(t)},getDefinitions(e){return n.get(e)??lt}})})();class Gh{get type(){return oQ}constructor(e,t,i,s,r,o,a,l,c,h,u){this.Type=e,this.name=t,this.aliases=i,this.key=s,this.defaultBindingMode=r,this.isTemplateController=o,this.bindables=a,this.noMultiBindings=l,this.watches=c,this.dependencies=h,this.containerStrategy=u}static create(e,t){let i,s;ft(e)?(i=e,s={name:i}):(i=e.name,s=e);const r=mc(fl(t,"defaultBindingMode"),s.defaultBindingMode,t.defaultBindingMode,Vn);for(const o of Object.values(js.from(s.bindables)))js._add(o,t);return new Gh(t,mc(fl(t,"name"),i),ni(fl(t,"aliases"),s.aliases,t.aliases),yf(i),ft(r)?Vp[r]??Cx:r,mc(fl(t,"isTemplateController"),s.isTemplateController,t.isTemplateController,!1),js.from(...js.getAll(t),fl(t,"bindables"),t.bindables,s.bindables),mc(fl(t,"noMultiBindings"),s.noMultiBindings,t.noMultiBindings,!1),ni(Ix.getDefinitions(t),t.watches),ni(fl(t,"dependencies"),s.dependencies,t.dependencies),mc(fl(t,"containerStrategy"),s.containerStrategy,t.containerStrategy,"reuse"))}register(e,t){const i=this.Type,s=typeof t=="string"?yf(t):this.key,r=this.aliases;e.has(s,!1)?(Gh.warnDuplicate&&e.get($h).warn(ye(154,this.name)),console.warn(`[DEV:aurelia] ${ye(154,this.name)}`)):e.register(e.has(i,!1)?null:ea(i,i),Rc(i,s),...r.map(o=>Rc(i,yf(o))))}toString(){return`au:ca:${this.name}`}}Gh.warnDuplicate=!0;const Vi="custom-attribute",vf=Nh(Vi),yf=n=>`${vf}:${n}`,fl=(n,e)=>Bi(hl(e),n),hQ=n=>{var e;return Ht(n)&&(ry(vf,n)||((e=n.$au)==null?void 0:e.type)===Vi)},C$=(n,e)=>Mf(n,yf(e))??void 0,Ox=(n,e)=>{const t=Gh.create(n,e),i=t.Type;return ao(t,i,vf,jo),i},kx=n=>{const e=Bi(vf,n)??xc(n,Vi,Gh.create);if(e===void 0)throw ye(759,n);return e},Hx=ul({name:vf,keyFrom:yf,isType:hQ,for:C$,closest:(n,e)=>{let t="",i="";if(ft(e))t=yf(e),i=e;else{const r=kx(e);t=r.key,i=r.name}let s=n;for(;s!==null;){const r=Mf(s,t);if(r!=null&&r.is(i))return r;s=yy(s)}return null},define:Ox,getDefinition:kx,annotate(n,e,t){ao(t,n,hl(e))},getAnnotation:fl,find(n,e){const t=n.find(Vi,e);return t===null?null:Bi(vf,t)??xc(t,Vi,Gh.create)??null}}),Cf=Tn("ILifecycleHooks");class uQ{constructor(e,t){this.definition=e,this.instance=t}}class Dx{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const i=new Set;let s=t.prototype;for(;s!==s$;){for(const r of o$(s))r!=="constructor"&&!r.startsWith("_")&&i.add(r);s=Object.getPrototypeOf(s)}return new Dx(t,i)}}const S$=(()=>{const n=new WeakMap,e=new WeakMap;return ul({define(t,i){const s=Dx.create(t,i),r=s.Type;return e.set(r,s),{register(o){ea(Cf,r).register(o)}}},resolve(t){let i=n.get(t);if(i===void 0){n.set(t,i=new dQ);const s=t.root,r=s===t?t.getAll(Cf):t.has(Cf,!1)?s.getAll(Cf).concat(t.getAll(Cf)):s.getAll(Cf);let o,a,l,c,h;for(o of r){a=e.get(o.constructor),l=new uQ(a,o);for(c of a.propertyNames)h=i[c],h===void 0?i[c]=[l]:h.push(l)}}return i}})})();class dQ{}class Qp{constructor(e,t,i,s){this.Type=e,this.name=t,this.aliases=i,this.key=s}static create(e,t){let i,s;return ft(e)?(i=e,s={name:i}):(i=e.name,s=e),new Qp(t,mc(Nx(t,"name"),i),ni(Nx(t,"aliases"),s.aliases,t.aliases),_$.keyFrom(i))}register(e,t){const i=this.Type,s=typeof t=="string"?Zp(t):this.key,r=this.aliases;e.has(s,!1)?console.warn(`[DEV:aurelia] ${ye(155,this.name)}`):e.register(e.has(i,!1)?null:ea(i,i),Rc(i,s),...r.map(o=>Rc(i,Zp(o))))}}const Sf="value-converter",_f=Nh(Sf),Nx=(n,e)=>Bi(hl(e),n),Zp=n=>`${_f}:${n}`,_$=ul({name:_f,keyFrom:Zp,isType(n){var e;return Ht(n)&&(ry(_f,n)||((e=n.$au)==null?void 0:e.type)===Sf)},define(n,e){const t=Qp.create(n,e),i=t.Type;return ao(t,i,_f,jo),i},getDefinition(n){const e=Bi(_f,n)??xc(n,Sf,Qp.create);if(e===void 0)throw ye(152,n);return e},annotate(n,e,t){ao(t,n,hl(e))},getAnnotation:Nx,find(n,e){const t=n.find(Sf,e);return t==null?null:Bi(_f,t)??xc(t,Sf,Qp.create)??null},get(n,e){try{return n.get(sf(Zp(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve value converter with name",e),t}return n.get(sf(Zp(e)))}});class fQ{constructor(e,t){this._value=void 0,this.b=e,this._flushQueue=t}flush(){this.b.updateSource(this._value)}handleChange(e,t){const i=this.b;e!==vn(i.ast,i._scope,i,null)&&(this._value=e,this._flushQueue.add(this))}}const Kh=(()=>{function n(e){this._scope=e}return e=>{Ws(e.prototype,"useScope",n)}})(),gl=(()=>{class n{}const e=new WeakMap,t=new WeakMap,i=new WeakMap;function s(d){return this.l.get(d)}function r(d,f){let g=t.get(d);return g==null&&t.set(d,g=new n),g[f]??(g[f]=f$.get(d.l,f))}function o(d,f,g){var w;const p=r(this,d);if(p==null)throw ye(101,d);let m=i.get(this);if(m==null&&i.set(this,m={}),m[d])throw ye(102,d);(w=p.bind)==null||w.call(p,f,this,...g)}function a(d,f){var m;const g=r(this,d),p=i.get(this);(m=g==null?void 0:g.unbind)==null||m.call(g,f,this),p!=null&&(p[d]=!1)}function l(d,f){let g=e.get(d);return g==null&&e.set(d,g=new n),g[f]??(g[f]=_$.get(d.l,f))}function c(d){const f=l(this,d);if(f==null)throw ye(103,d);const g=f.signals;if(g!=null){const p=this.l.get(cy),m=g.length;let w=0;for(;w<m;++w)p.addSignalListener(g[w],this)}}function h(d){const f=l(this,d);if((f==null?void 0:f.signals)===void 0)return;const g=this.l.get(cy);let p=0;for(;p<f.signals.length;++p)g.removeSignalListener(f.signals[p],this)}function u(d,f,g,p){var w;const m=l(this,d);if(m==null)throw ye(103,d);switch(f){case"toView":return"toView"in m?m.toView(g,...p):g;case"fromView":return"fromView"in m?(w=m.fromView)==null?void 0:w.call(m,g,...p):g}}return d=>{const f=d.prototype;Ws(f,"get",s),Ws(f,"bindBehavior",o),Ws(f,"unbindBehavior",a),Ws(f,"bindConverter",c),Ws(f,"unbindConverter",h),Ws(f,"useConverter",u)}})(),gQ=Tn("IFlushQueue",n=>n.singleton(pQ));class pQ{constructor(){this._flushing=!1,this._items=new Set}get count(){return this._items.size}add(e){if(this._items.add(e),!this._flushing){this._flushing=!0;try{this._items.forEach(mQ)}finally{this._flushing=!1}}}clear(){this._items.clear(),this._flushing=!1}}const mQ=function(n,e,t){t.delete(n),n.flush()},qh=(()=>{const n=new WeakSet,e=(i,s,r)=>{let o,a,l,c=!1;const h=i.queue,u=()=>s(l),d=g=>{l=g,r.isBound?(a=o,o=h.queueTask(u,{delay:i.delay}),a==null||a.cancel()):u()},f=d.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return d.flush=()=>{c=(o==null?void 0:o.status)===u$,f(),c&&u()},d},t=(i,s,r)=>{let o,a,l=0,c=0,h,u=!1;const d=i.queue,f=()=>i.now(),g=()=>s(h),p=w=>{h=w,r.isBound?(c=f()-l,a=o,c>i.delay?(l=f(),g()):o=d.queueTask(()=>{l=f(),g()},{delay:i.delay-c}),a==null||a.cancel()):g()},m=p.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return p.flush=()=>{u=(o==null?void 0:o.status)===u$,m(),u&&g()},p};return(i,s)=>{Ws(i.prototype,"limit",function(r){if(n.has(this))throw ye(9996);n.add(this);const o=s(this,r),a=r.signals,l=a.length>0?this.get(cy):null,c=this[o],h=(...f)=>c.call(this,...f),u=r.type==="debounce"?e(r,h,this):t(r,h,this),d=l?{handleChange:u.flush}:null;return this[o]=u,l&&a.forEach(f=>c$(l,f,d)),{dispose:()=>{l&&a.forEach(f=>h$(l,f,d)),n.delete(this),u.dispose(),delete this[o]}}})}})(),Ec=((n=new WeakSet)=>e=>function(){n.has(this)||(n.add(this),e.call(this))})(),bQ={preempt:!0};class Xh{constructor(e,t,i,s,r,o,a,l,c,h){this.targetAttribute=a,this.targetProperty=l,this.mode=c,this.strict=h,this.isBound=!1,this._scope=void 0,this._task=null,this._value=void 0,this.boundFn=!1,this.l=t,this.ast=r,this._controller=e,this.target=o,this.oL=i,this._taskQueue=s}updateTarget(e){const t=this.target,i=this.targetAttribute,s=this.targetProperty;switch(i){case"class":t.classList.toggle(s,!!e);break;case"style":{let r="",o=Uh(e);ft(o)&&o.includes("!important")&&(r="important",o=o.replace("!important","")),t.style.setProperty(s,o,r);break}default:e==null?t.removeAttribute(i):t.setAttribute(i,Uh(e))}}handleChange(){if(!this.isBound)return;let e;this.obs.version++;const t=vn(this.ast,this._scope,this,(this.mode&Vn)>0?this:null);this.obs.clear(),t!==this._value&&(this._value=t,this._controller.state!==Ys?(e=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(t)},bQ),e==null||e.cancel()):this.updateTarget(t))}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,vc(this.ast,e,this),this.mode&(Vn|sy)&&this.updateTarget(this._value=vn(this.ast,e,this,(this.mode&Vn)>0?this:null)),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,yc(this.ast,this._scope,this),this._scope=void 0,this._value=void 0,(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}}Xh.mix=Ec(()=>{Kh(Xh),qh(Xh,()=>"updateTarget"),oo(Xh,null),gl(Xh)});const wQ={preempt:!0};class vQ{constructor(e,t,i,s,r,o,a,l,c){this.ast=r,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._task=null,this._controller=e,this.oL=i,this._taskQueue=s,this._targetObserver=i.getAccessor(o,a);const h=r.expressions,u=this.partBindings=Array(h.length),d=h.length;let f=0;for(;d>f;++f)u[f]=new Qh(h[f],o,a,t,i,c,this)}_handlePartChange(){this.updateTarget()}updateTarget(){const e=this.partBindings,t=this.ast.parts,i=e.length;let s="",r=0;if(i===1)s=t[0]+e[0]._value+t[1];else for(s=t[0];i>r;++r)s+=e[r]._value+t[r+1];const o=this._targetObserver,a=this._controller.state!==Ys&&(o.type&Jo)>0;let l;a?(l=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,o.setValue(s,this.target,this.targetProperty)},wQ),l==null||l.cancel(),l=null):o.setValue(s,this.target,this.targetProperty)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e;const t=this.partBindings,i=t.length;let s=0;for(;i>s;++s)t[s].bind(e);this.updateTarget(),this.isBound=!0}unbind(){var s;if(!this.isBound)return;this.isBound=!1,this._scope=void 0;const e=this.partBindings,t=e.length;let i=0;for(;t>i;++i)e[i].unbind();(s=this._task)==null||s.cancel(),this._task=null}useAccessor(e){this._targetObserver=e}}class Qh{constructor(e,t,i,s,r,o,a){this.ast=e,this.target=t,this.targetProperty=i,this.strict=o,this.owner=a,this.mode=Vn,this.task=null,this.isBound=!1,this._value="",this.boundFn=!1,this.l=s,this.oL=r}updateTarget(){this.owner._handlePartChange()}handleChange(){if(!this.isBound)return;this.obs.version++;const e=vn(this.ast,this._scope,this,(this.mode&Vn)>0?this:null);this.obs.clear(),e!=this._value&&(this._value=e,Kn(e)&&this.observeCollection(e),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,vc(this.ast,e,this),this._value=vn(this.ast,this._scope,this,(this.mode&Vn)>0?this:null),Kn(this._value)&&this.observeCollection(this._value),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,yc(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}Qh.mix=Ec(()=>{Kh(Qh),qh(Qh,()=>"updateTarget"),oo(Qh,null),gl(Qh)});const yQ={preempt:!0};class Zh{constructor(e,t,i,s,r,o,a,l){this.p=r,this.ast=o,this.target=a,this.strict=l,this.isBound=!1,this.mode=Vn,this._task=null,this._value="",this._needsRemoveNode=!1,this.boundFn=!1,this.l=t,this._controller=e,this.oL=i,this._taskQueue=s}updateTarget(e){var s,r;const t=this.target,i=this._value;this._value=e,this._needsRemoveNode&&((s=i.parentNode)==null||s.removeChild(i),this._needsRemoveNode=!1),e instanceof this.p.Node&&((r=t.parentNode)==null||r.insertBefore(e,t),e="",this._needsRemoveNode=!0),t.textContent=Uh(e??"")}handleChange(){var i;if(!this.isBound)return;this.obs.version++;const e=vn(this.ast,this._scope,this,(this.mode&Vn)>0?this:null);if(this.obs.clear(),e===this._value){(i=this._task)==null||i.cancel(),this._task=null;return}this._controller.state!==Ys?this._queueUpdate(e):this.updateTarget(e)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const e=this._value=vn(this.ast,this._scope,this,(this.mode&Vn)>0?this:null);this.obs.clear(),Kn(e)&&this.observeCollection(e),this._controller.state!==Ys?this._queueUpdate(e):this.updateTarget(e)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,vc(this.ast,e,this);const t=this._value=vn(this.ast,this._scope,this,(this.mode&Vn)>0?this:null);Kn(t)&&this.observeCollection(t),this.updateTarget(t),this.isBound=!0}unbind(){var e,t;this.isBound&&(this.isBound=!1,yc(this.ast,this._scope,this),this._needsRemoveNode&&((e=this._value.parentNode)==null||e.removeChild(this._value)),this._scope=void 0,this.obs.clearAll(),(t=this._task)==null||t.cancel(),this._task=null)}_queueUpdate(e){const t=this._task;this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(e)},yQ),t==null||t.cancel()}}Zh.mix=Ec(()=>{Kh(Zh),qh(Zh,()=>"updateTarget"),oo(Zh,null),gl(Zh)});class Jh{constructor(e,t,i,s,r,o){this.ast=i,this.targetProperty=s,this.isBound=!1,this._scope=void 0,this.target=null,this.boundFn=!1,this.l=e,this.oL=t,this.strict=o,this._toBindingContext=r}updateTarget(){this.target[this.targetProperty]=this._value}handleChange(){this.isBound&&(this.obs.version++,this._value=vn(this.ast,this._scope,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,this.target=this._toBindingContext?e.bindingContext:e.overrideContext,vc(this.ast,e,this),this._value=vn(this.ast,this._scope,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,yc(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}Jh.mix=Ec(()=>{Kh(Jh),qh(Jh,()=>"updateTarget"),oo(Jh,null),gl(Jh)});class os{constructor(e,t,i,s,r,o,a,l,c){this.ast=r,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._targetObserver=void 0,this._task=null,this._targetSubscriber=null,this.boundFn=!1,this.l=t,this._controller=e,this._taskQueue=s,this.oL=i}updateTarget(e){this._targetObserver.setValue(e,this.target,this.targetProperty)}updateSource(e){Up(this.ast,this._scope,this,e)}handleChange(){if(!this.isBound)return;this.obs.version++;const e=vn(this.ast,this._scope,this,(this.mode&Vn)>0?this:null);this.obs.clear(),this._controller.state!==Ys&&(this._targetObserver.type&Jo)>0?(Jp=this._task,this._task=this._taskQueue.queueTask(()=>{this.updateTarget(e),this._task=null},CQ),Jp==null||Jp.cancel(),Jp=null):this.updateTarget(e)}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,vc(this.ast,e,this);const t=this.oL,i=this.mode;let s=this._targetObserver;s||(i&cl?s=t.getObserver(this.target,this.targetProperty):s=t.getAccessor(this.target,this.targetProperty),this._targetObserver=s);const r=(i&Vn)>0;i&(Vn|sy)&&this.updateTarget(vn(this.ast,this._scope,this,r?this:null)),i&cl&&(s.subscribe(this._targetSubscriber??(this._targetSubscriber=new fQ(this,this.l.get(gQ)))),r||this.updateSource(s.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,yc(this.ast,this._scope,this),this._scope=void 0,this._targetSubscriber&&(this._targetObserver.unsubscribe(this._targetSubscriber),this._targetSubscriber=null),(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}useTargetObserver(e){var t;(t=this._targetObserver)==null||t.unsubscribe(this),(this._targetObserver=e).subscribe(this)}useTargetSubscriber(e){if(this._targetSubscriber!=null)throw ye(9995);this._targetSubscriber=e}}os.mix=Ec(()=>{Kh(os),qh(os,n=>n.mode&cl?"updateSource":"updateTarget"),oo(os,null),gl(os)});let Jp=null;const CQ={preempt:!0};class Lx{constructor(e,t,i,s){this.ast=t,this.target=i,this.strict=s,this.isBound=!1,this._scope=void 0,this.l=e}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,vc(this.ast,e,this),Up(this.ast,this._scope,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,vn(this.ast,this._scope,this,null)===this.target&&Up(this.ast,this._scope,this,null),yc(this.ast,this._scope,this),this._scope=void 0)}}Lx.mix=Ec(()=>{gl(Lx)});class SQ{constructor(e,t=!1,i){this.prevent=e,this.capture=t,this.onError=i}}class Rf{constructor(e,t,i,s,r,o,a){this.ast=t,this.target=i,this.targetEvent=s,this.strict=a,this.isBound=!1,this.self=!1,this.boundFn=!0,this._modifiedEventHandler=null,this.l=e,this._options=r,this._modifiedEventHandler=o}callSource(e){const t=this._scope.overrideContext;t.$event=e;let i=vn(this.ast,this._scope,this,null);delete t.$event,Ht(i)&&(i=i(e)),i!==!0&&this._options.prevent&&e.preventDefault()}handleEvent(e){var t;if(!(this.self&&this.target!==e.composedPath()[0])&&((t=this._modifiedEventHandler)==null?void 0:t.call(this,e))!==!1)try{this.callSource(e)}catch(i){this._options.onError(e,i)}}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,vc(this.ast,e,this),this.target.addEventListener(this.targetEvent,this,this._options),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,yc(this.ast,this._scope,this),this._scope=void 0,this.target.removeEventListener(this.targetEvent,this,this._options))}}Rf.mix=Ec(function(){Kh(Rf),qh(Rf,()=>"callSource"),gl(Rf)});const hy=Tn("IEventModifier"),R$=Tn("IKeyMapping",n=>n.instance({meta:ul(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((e,t,i)=>{let s=String.fromCharCode(i+65);return e[i+65]=s,s=String.fromCharCode(i+97),e[i+97]=e[s]=s,e},{})}}));class $x{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this._mapping=ue(R$),this._mouseButtons=["left","middle","right"]}static register(e){e.register(ea(hy,$x))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let s=!1,r=!1,o;for(o of t){switch(o){case"prevent":s=!0;continue;case"stop":r=!0;continue;case"left":case"middle":case"right":if(i.button!==this._mouseButtons.indexOf(o))return!1;continue}if(this._mapping.meta.includes(o)&&i[`${o}Key`]!==!0)return!1;console.warn(`Modifier '${o}' is not supported for mouse events.`)}return s&&i.preventDefault(),r&&i.stopPropagation(),!0}}}class Fx{constructor(){this._mapping=ue(R$),this.type=["keydown","keyup"]}static register(e){e.register(ea(hy,Fx))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let s=!1,r=!1,o;for(o of t){switch(o){case"prevent":s=!0;continue;case"stop":r=!0;continue}if(this._mapping.meta.includes(o)){if(i[`${o}Key`]!==!0)return!1;continue}if(this._mapping.keys[o]!==i.key)return!1;console.warn(`Modifier '${o}' is not supported for keyboard event with key "${i.key}".`)}return s&&i.preventDefault(),r&&i.stopPropagation(),!0}}}class Bx{constructor(){this.type=["$ALL"]}static register(e){e.register(ea(hy,Bx))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let s=!1,r=!1,o;for(o of t){switch(o){case"prevent":s=!0;continue;case"stop":r=!0;continue}console.warn(`Modifier '${o}' is not supported for event "${i.type}".`)}return s&&i.preventDefault(),r&&i.stopPropagation(),!0}}}const x$=Tn("IEventModifierHandler",n=>n.instance({getHandler:()=>(console.warn("No event modifier handler registered"),null)}));class Vx{constructor(){this._reg=ue(v1(hy)).reduce((e,t)=>((Kn(t.type)?t.type:[t.type]).forEach(s=>e[s]=t),e),{})}static register(e){e.register(ea(x$,Vx))}getHandler(e,t){var i;return ft(t)?((i=this._reg[e]??this._reg.$ALL)==null?void 0:i.getHandler(t))??null:null}}const _Q={register(n){n.register(Vx,$x,Fx,Bx)}},zs=Tn("IViewFactory");class uy{constructor(e,t){this.isCaching=!1,this._cache=null,this._cacheSize=-1,this.name=t.name,this.container=e,this.def=t}setCacheSize(e,t){e&&(e==="*"?e=uy.maxCacheSize:ft(e)&&(e=parseInt(e,10)),(this._cacheSize===-1||!t)&&(this._cacheSize=e)),this._cacheSize>0?this._cache=[]:this._cache=null,this.isCaching=this._cacheSize>0}canReturnToCache(e){return this._cache!=null&&this._cache.length<this._cacheSize}tryReturnToCache(e){return this.canReturnToCache(e)?(this._cache.push(e),!0):!1}create(e){const t=this._cache;let i;return t!=null&&t.length>0?(i=t.pop(),i):(i=Us.$view(this,e),i)}}uy.maxCacheSize=65535;const RQ=(()=>{const n=(e,t)=>e.document.createComment(t);return e=>{const t=n(e,"au-end");return t.$start=n(e,"au-start"),t}})(),dy=(n,e,t)=>{if(n===null)return;const i=t.length;let s=0;for(;i>s;)n.insertBefore(t[s],e),++s},E$=(n,e)=>new n.ownerDocument.defaultView.MutationObserver(e),xQ=n=>n.nodeType===1,T$="default",EQ="au-slot",M$=Tn("IAuSlotsInfo");class A${constructor(e){this.projectedSlots=e}}const TQ=Tn("IAuSlotWatcher");class fy{static create(e,t,i,s,r,o,a,l){const c=[],h=s.renderers,u=f=>{let g=f,p=e;for(;p!=null&&g>0;)p=p.parent,--g;if(p==null)throw ye(9999);return p},d=f=>{var y;const g=u(f),p=new fy(g),m=r.compileSpread(g.controller.definition,((y=g.instruction)==null?void 0:y.captures)??lt,g.controller.container,t,i);let w;for(w of m)switch(w.type){case ii.spreadTransferedBinding:d(f+1);break;case ii.spreadElementProp:h[w.instruction.type].render(p,lu(t),w.instruction,o,a,l);break;default:h[w.type].render(p,t,w,o,a,l)}c.push(p)};return d(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(e){this.isBound=!1,this._innerBindings=[],this.locator=(this.$controller=(this._hydrationContext=e).controller).container}get(e){return this.locator.get(e)}bind(e){if(this.isBound)return;this.isBound=!0;const t=this.scope=this._hydrationContext.controller.scope.parent??void 0;if(t==null)throw ye(9999);this._innerBindings.forEach(i=>i.bind(t))}unbind(){this._innerBindings.forEach(e=>e.unbind()),this.isBound=!1}addBinding(e){this._innerBindings.push(e)}addChild(e){if(e.vmKind!==iu)throw ye(9998);this.$controller.addChild(e)}}class ta{constructor(e,t,i,s,r,o,a,l){this.target=t,this.targetKeys=i,this.ast=s,this.strict=l,this.isBound=!1,this._scope=void 0,this.boundFn=!1,this._bindingCache={},this._scopeCache=new WeakMap,this._controller=e,this.oL=r,this.l=o,this._taskQueue=a}updateTarget(){this.obs.version++;const e=vn(this.ast,this._scope,this,this);this.obs.clear(),this._createBindings(e,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(e){if(this.isBound){if(e===this._scope)return;this.unbind()}this.isBound=!0,this._scope=e,vc(this.ast,e,this);const t=vn(this.ast,e,this,this);this._createBindings(t,!1)}unbind(){if(!this.isBound)return;this.isBound=!1,yc(this.ast,this._scope,this),this._scope=void 0;let e;for(e in this._bindingCache)this._bindingCache[e].unbind()}_createBindings(e,t){var o,a;let i;if(!ND(e)){console.warn(`[DEV:aurelia] $bindable spread is given a non object for properties: "${this.targetKeys.join(", ")}" of ${this.target.constructor.name}`);for(i in this._bindingCache)(o=this._bindingCache[i])==null||o.unbind();return}let s,r=this._scopeCache.get(e);r==null&&this._scopeCache.set(e,r=si.fromParent(this._scope,e));for(i of this.targetKeys)s=this._bindingCache[i],i in e?(s==null&&(s=this._bindingCache[i]=new os(this._controller,this.l,this.oL,this._taskQueue,(a=ta._astCache)[i]??(a[i]=new Lp(i,0)),this.target,i,Vp.toView,this.strict)),s.bind(r)):t&&(s==null||s.unbind())}}ta.mix=Ec(()=>{Kh(ta),qh(ta,()=>"updateTarget"),oo(ta,null),gl(ta)}),ta._astCache={};const P$=(n,e,t,i)=>{n.addEventListener(e,t,i)},I$=(n,e,t,i)=>{n.removeEventListener(e,t,i)},Wx=n=>{let e;const t=n.prototype;Ws(t,"subscribe",function(i){var s;if(this.subs.add(i)&&this.subs.count===1){for(e of this._config.events)P$(this._el,e,this);this._listened=!0,(s=this._start)==null||s.call(this)}}),Ws(t,"unsubscribe",function(i){var s;if(this.subs.remove(i)&&this.subs.count===0){for(e of this._config.events)I$(this._el,e,this);this._listened=!1,(s=this._stop)==null||s.call(this)}}),Ws(t,"useConfig",function(i){if(this._config=i,this._listened){for(e of this._config.events)I$(this._el,e,this);for(e of this._config.events)P$(this._el,e,this)}})},gy=n=>{Ws(n.prototype,"subscribe",Yo),Ws(n.prototype,"unsubscribe",Yo)};class py{get doNotCache(){return!0}constructor(e,t={}){this.obj=e,this.mapping=t,this.type=Sc|Jo,this._value="",this._nameIndex={},this._version=0}getValue(){return this._value}setValue(e){e!==this._value&&(this._value=e,this._flushChanges())}_flushChanges(){const e=this._nameIndex,t=++this._version,i=this.obj.classList,s=O$(this._value),r=s.length;let o=0,a;if(r>0)for(;o<r;o++)a=s[o],a=this.mapping[a]||a,a.length!==0&&(e[a]=this._version,i.add(a));if(t!==1)for(a in e)a=this.mapping[a]||a,e[a]!==t&&i.remove(a)}}gy(py);function O$(n){if(ft(n))return k$(n);if(typeof n!="object")return lt;if(Kn(n)){const i=n.length;if(i>0){const s=[];let r=0;for(;i>r;++r)s.push(...O$(n[r]));return s}else return lt}const e=[];let t;for(t in n)n[t]&&(t.includes(" ")?e.push(...k$(t)):e.push(t));return e}function k$(n){const e=n.match(/\S+/g);return e===null?lt:e}const H$=n=>({$isResolver:!0,resolve(e,t){return t.get(ru).controller.container.get(PG(n))}}),D$=Tn("IRenderer");function Si(n,e){var i;const t=n[i=Symbol.metadata]??(n[i]=Object.create(null));return t[zo]={register(s){ea(D$,n).register(s)}},n}function na(n,e,t){return ft(e)?n.parse(e,t):e}function my(n){return n.viewModel!=null?n.viewModel:n}function MQ(n,e){if(e==="element")return n;switch(e){case"controller":return lu(n);case"view":throw ye(750);case"component":return lu(n).viewModel;default:{const t=C$(n,e);if(t!==void 0)return t.viewModel;const i=lu(n,{name:e});if(i===void 0)throw ye(751,e);return i.viewModel}}}const AQ=Si(class{constructor(){this.target=ii.setProperty}render(e,t,i){var r;const s=my(t);((r=s.$observers)==null?void 0:r[i.to])!==void 0?s.$observers[i.to].setValue(i.value):s[i.to]=i.value}}),PQ=Si(class{constructor(){this._rendering=ue(Tc),this.target=ii.hydrateElement}render(e,t,i,s,r,o){let a,l,c;const h=i.res,u=i.projections,d=e.container;switch(typeof h){case"string":if(a=Ks.find(d,h),a==null)throw ye(752,i,e);break;default:a=h}const g=i.containerless||a.containerless?nm(t):null,p=ZQ(s,e,t,i,g,u==null?void 0:new A$(Sx(u)));l=p.invoke(a.Type),c=Us.$el(p,l,t,i,a,g),ji(t,a.key,c);const m=this._rendering.renderers,w=i.props,y=w.length;let C=0,R;for(;y>C;)R=w[C],m[R.type].render(e,c,R,s,r,o),++C;e.addChild(c)}}),IQ=Si(class{constructor(){this._rendering=ue(Tc),this.target=ii.hydrateAttribute}render(e,t,i,s,r,o){let a=e.container,l;switch(typeof i.res){case"string":if(l=Hx.find(a,i.res),l==null)throw ye(753,i,e);break;default:l=i.res}const c=B$(s,l,e,t,i,void 0,void 0),h=Us.$attr(c.ctn,c.vm,t,l);ji(t,l.key,h);const u=this._rendering.renderers,d=i.props,f=d.length;let g=0,p;for(;f>g;)p=d[g],u[p.type].render(e,h,p,s,r,o),++g;e.addChild(h)}}),OQ=Si(class{constructor(){this._rendering=ue(Tc),this.target=ii.hydrateTemplateController}render(e,t,i,s,r,o){var y,C;let a=e.container,l;switch(typeof i.res){case"string":if(l=Hx.find(a,i.res),l==null)throw ye(754,i,e);break;default:l=i.res}const c=this._rendering.getViewFactory(i.def,l.containerStrategy==="new"?a.createChild({inheritParentResources:!0}):a),h=nm(t),u=B$(s,l,e,t,i,c,h),d=Us.$attr(u.ctn,u.vm,t,l);ji(h,l.key,d),(C=(y=u.vm).link)==null||C.call(y,e,d,t,i);const f=this._rendering.renderers,g=i.props,p=g.length;let m=0,w;for(;p>m;)w=g[m],f[w.type].render(e,d,w,s,r,o),++m;e.addChild(d)}}),kQ=Si(class{constructor(){this.target=ii.hydrateLetElement,Jh.mix()}render(e,t,i,s,r,o){t.remove();const a=i.instructions,l=i.toBindingContext,c=e.container,h=a.length;let u,d,f=0;for(;h>f;)u=a[f],d=na(r,u.from,Zo),e.addBinding(new Jh(c,o,d,u.to,l,e.strict??!1)),++f}}),HQ=Si(class{constructor(){this.target=ii.refBinding}render(e,t,i,s,r){e.addBinding(new Lx(e.container,na(r,i.from,Zo),MQ(t,i.to),e.strict??!1))}}),DQ=Si(class{constructor(){this.target=ii.interpolation,Qh.mix()}render(e,t,i,s,r,o){const a=e.container,l=new vQ(e,a,o,s.domQueue,na(r,i.from,XX),my(t),i.to,Vn,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(H$(wy));l.useAccessor(new py(l.target,c))}e.addBinding(l)}}),NQ=Si(class{constructor(){this.target=ii.propertyBinding,os.mix()}render(e,t,i,s,r,o){const a=e.container,l=new os(e,a,o,s.domQueue,na(r,i.from,Zo),my(t),i.to,i.mode,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(H$(wy));l.useTargetObserver(new py(l.target,c))}e.addBinding(l)}}),LQ=Si(class{constructor(){this.target=ii.iteratorBinding,os.mix()}render(e,t,i,s,r,o){e.addBinding(new os(e,e.container,o,s.domQueue,na(r,i.forOf,QX),my(t),i.to,Vn,e.strict??!1))}}),$Q=Si(class{constructor(){this.target=ii.textBinding,Zh.mix()}render(e,t,i,s,r,o){e.addBinding(new Zh(e,e.container,o,s.domQueue,s,na(r,i.from,Zo),t,e.strict??!1))}}),FQ=Tn("IListenerBindingOptions",n=>n.singleton(class{constructor(){this.p=ue(br),this.prevent=!1,this.onError=(e,t)=>{const i=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:e,error:t}});if(this.p.window.dispatchEvent(i),!i.defaultPrevented)throw t}}})),BQ=Si(class{constructor(){this.target=ii.listenerBinding,this._modifierHandler=ue(x$),this._defaultOptions=ue(FQ),Rf.mix()}render(e,t,i,s,r){e.addBinding(new Rf(e.container,na(r,i.from,ZX),t,i.to,new SQ(this._defaultOptions.prevent,i.capture,this._defaultOptions.onError),this._modifierHandler.getHandler(i.to,i.modifier),e.strict??!1))}}),VQ=Si(class{constructor(){this.target=ii.setAttribute}render(e,t,i){t.setAttribute(i.to,i.value)}}),WQ=Si(class{constructor(){this.target=ii.setClassAttribute}render(e,t,i){XQ(t.classList,i.value)}}),jQ=Si(class{constructor(){this.target=ii.setStyleAttribute}render(e,t,i){t.style.cssText+=i.value}}),zQ=["height","width","border-width","padding","padding-left","padding-right","padding-top","padding-right","padding-inline","padding-block","margin","margin-left","margin-right","margin-top","margin-bottom","margin-inline","margin-block","top","right","bottom","left"],UQ=Si(class{constructor(){this.target=ii.stylePropertyBinding,os.mix()}render(e,t,i,s,r,o){if(zQ.includes(i.to)){e.addBinding(new YQ(e,e.container,o,s.domQueue,na(r,i.from,Zo),t.style,i.to,Vn,e.strict??!1));return}e.addBinding(new os(e,e.container,o,s.domQueue,na(r,i.from,Zo),t.style,i.to,Vn,e.strict??!1))}});class YQ extends os{updateTarget(e){return typeof e=="number"&&e>0&&console.warn(`[DEV]: Setting number ${e} as value for style.${this.targetProperty}. Did you meant "${e}px"?`),super.updateTarget(e)}}const GQ=Si(class{constructor(){this.target=ii.attributeBinding,Xh.mix()}render(e,t,i,s,r,o){const a=e.container,l=a.has(wy,!1)?a.get(wy):null;e.addBinding(new Xh(e,a,o,s.domQueue,na(r,i.from,Zo),t,i.attr,l==null?i.to:i.to.split(/\s/g).map(c=>l[c]??c).join(" "),Vn,e.strict??!1))}}),KQ=Si(class{constructor(){this._compiler=ue(jv),this._rendering=ue(Tc),this.target=ii.spreadTransferedBinding}render(e,t,i,s,r,o){fy.create(e.container.get(ru),t,void 0,this._rendering,this._compiler,s,r,o).forEach(a=>e.addBinding(a))}}),qQ=Si(class{constructor(){this.target=ii.spreadValueBinding,ta.mix()}render(e,t,i,s,r,o){const a=i.target;if(a==="$bindables")e.addBinding(new ta(e,t.viewModel,Sx(t.definition.bindables),r.parse(i.from,Zo),o,e.container,s.domQueue,e.strict??!1));else throw ye(820,a)}});function XQ(n,e){const t=e.length;let i=0;for(let s=0;s<t;++s)e.charCodeAt(s)===32?(s!==i&&n.add(e.slice(i,s)),i=s+1):s+1===t&&n.add(e.slice(i))}const N$="IController",L$="IInstruction",QQ="IRenderLocation",$$="ISlotsInfo";function ZQ(n,e,t,i,s,r){const o=e.container.createChild();return Kx(o,t,n),ri(o,by,new $i(N$,e)),ri(o,uf,new $i(L$,i)),ri(o,as,s==null?W$:new V$(s)),ri(o,zs,j$),ri(o,M$,r==null?z$:new $i($$,r)),o}class F${get $isResolver(){return!0}constructor(e){this.f=e}resolve(){const e=this.f;if(e===null)throw ye(755);if(!ft(e.name)||e.name.length===0)throw ye(756);return e}}function B$(n,e,t,i,s,r,o,a){const l=t instanceof Us?t:t.$controller,c=l.container.createChild();return Kx(c,i,n),ri(c,by,new $i(N$,l)),ri(c,uf,new $i(L$,s)),ri(c,as,o==null?W$:new $i(QQ,o)),ri(c,zs,r==null?j$:new F$(r)),ri(c,M$,z$),{vm:c.invoke(e.Type),ctn:c}}class V${get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(e){this._location=e}resolve(){return this._location}}const W$=new V$(null),j$=new F$(null),z$=new $i($$,new A$(lt)),Tc=Tn("IRendering",n=>n.singleton(JQ));class JQ{get renderers(){return this._renderers??(this._renderers=this._ctn.getAll(D$,!1).reduce((e,t)=>{var i;return e[t.target]!==void 0&&console.warn(`[DEV:aurelia] Renderer for target ${t.target} already exists.`),e[i=t.target]??(e[i]=t),e},Kt()))}constructor(){this._compilationCache=new WeakMap,this._fragmentCache=new WeakMap;const e=this._ctn=ue(tf).root,t=this._platform=e.get(br);this._exprParser=e.get(af),this._observerLocator=e.get(bf),this._marker=t.document.createElement("au-m"),this._empty=new Gx(t,t.document.createDocumentFragment())}compile(e,t){const i=t.get(jv),s=this._compilationCache;let r=s.get(e);return r==null&&s.set(e,r=ls.create(e.needsCompile?i.compile(e,t):e)),r}getViewFactory(e,t){return new uy(t,ls.getOrCreate(e))}createNodes(e){if(e.enhance===!0)return new Gx(this._platform,this._transformMarker(e.template));let t,i=!1;const s=this._fragmentCache,r=this._platform,o=r.document;if(s.has(e))t=s.get(e);else{const a=e.template;let l;a==null?t=null:a instanceof r.Node?a.nodeName==="TEMPLATE"?(t=a.content,i=!0):(t=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(l=o.createElement("template"),ft(a)&&(l.innerHTML=a),t=l.content,i=!0),this._transformMarker(t),s.set(e,t)}return t==null?this._empty:new Gx(this._platform,i?o.importNode(t,!0):o.adoptNode(t.cloneNode(!0)))}render(e,t,i,s){const r=i.instructions,o=this.renderers,a=t.length;let l=0,c=0,h=r.length,u,d,f;if(a!==h)throw ye(757,a,h);if(a>0)for(;a>l;){for(u=r[l],f=t[l],c=0,h=u.length;h>c;)d=u[c],o[d.type].render(e,f,d,this._platform,this._exprParser,this._observerLocator),++c;++l}if(s!=null&&(u=i.surrogates,(h=u.length)>0))for(c=0;h>c;)d=u[c],o[d.type].render(e,s,d,this._platform,this._exprParser,this._observerLocator),++c}_transformMarker(e){if(e==null)return null;const t=this._platform.document.createTreeWalker(e,128);let i;for(;(i=t.nextNode())!=null;)i.nodeValue==="au*"&&i.parentNode.replaceChild(t.currentNode=this._marker.cloneNode(),i);return e}}const U$=Tn("IShadowDOMStyles"),eZ=Tn("IShadowDOMGlobalStyles",n=>n.instance({applyTo:Yo})),{enter:tZ,exit:nZ}=Xq,{wrap:iZ,unwrap:sZ}=kX;class Y${get value(){return this._value}constructor(e,t,i,s,r){this.obj=e,this.$get=i,this.useProxy=r,this.isBound=!1,this.running=!1,this._value=void 0,this._callback=s,this.oL=t}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const e=this.obj,t=this._value,i=this.compute();Jr(i,t)||this._callback.call(e,i,t,e)}compute(){this.running=!0,this.obs.version++;try{return tZ(this),this._value=sZ(this.$get.call(void 0,this.useProxy?iZ(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,nZ(this)}}}oo(Y$,null);class jx{get value(){return this._value}constructor(e,t,i,s,r){this.scope=e,this.l=t,this.oL=i,this.isBound=!1,this.boundFn=!1,this.obj=e.bindingContext,this._expression=s,this._callback=r}handleChange(e){const t=this._expression,i=this.obj,s=this._value;t.$kind==="AccessScope"&&this.obs.count===1||(this.obs.version++,e=vn(t,this.scope,this,this),this.obs.clear()),Jr(e,s)||(this._value=e,this._callback.call(i,e,s,i))}bind(){this.isBound||(this.obs.version++,this._value=vn(this._expression,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this._value=void 0)}}oo(jx,null),gl(jx);class Us{get lifecycleHooks(){return this._lifecycleHooks}get isActive(){return(this.state&(Ys|su))>0&&(this.state&em)===0}get name(){var e;if(this.parent===null)switch(this.vmKind){case iu:return`[${this.definition.name}]`;case wr:return this.definition.name;case Wi:return this.viewFactory.name}switch(this.vmKind){case iu:return`${this.parent.name}>[${this.definition.name}]`;case wr:return`${this.parent.name}>${this.definition.name}`;case Wi:return this.viewFactory.name===((e=this.parent.definition)==null?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this._vm}set viewModel(e){this._vm=e,this._vmHooks=e==null||this.vmKind===Wi?xf.none:new xf(e)}get strict(){var e;return(e=this.definition)==null?void 0:e.strict}constructor(e,t,i,s,r,o,a){this.container=e,this.vmKind=t,this.definition=i,this.viewFactory=s,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this._isBindingDone=!1,this.hostController=null,this.mountTarget=G$,this.shadowRoot=null,this.nodes=null,this.location=null,this._lifecycleHooks=null,this.state=zx,this._fullyNamed=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._activatingStack=0,this._detachingStack=0,this._unbindingStack=0,this._vm=r,this._vmHooks=t===Wi?xf.none:new xf(r),this.logger=null,this.debug=!1,this.location=a,this._rendering=e.root.get(Tc),this.coercion=t===Wi?void 0:e.get(aZ)}static getCached(e){return Mc.get(e)}static getCachedOrThrow(e){const t=Us.getCached(e);if(t===void 0)throw ye(500,e);return t}static $el(e,t,i,s,r=void 0,o=null){if(Mc.has(t))return Mc.get(t);if(r==null)try{r=t2(t.constructor)}catch(c){throw console.error(`[DEV:aurelia] Custom element definition not found for creating a controller with host: <${i.nodeName} /> and component ${t.constructor.name||"(Anonymous) class"}`),c}ri(e,r.Type,new $i(r.key,t,r.Type));const a=new Us(e,wr,r,null,t,i,o),l=e.get(JD(ru));return r.dependencies.length>0&&e.register(...r.dependencies),ri(e,ru,new $i("IHydrationContext",new Q$(a,s,l))),Mc.set(t,a),(s==null||s.hydrate!==!1)&&a._hydrateCustomElement(s),a}static $attr(e,t,i,s){if(Mc.has(t))return Mc.get(t);s=s??kx(t.constructor),ri(e,s.Type,new $i(s.key,t,s.Type));const r=new Us(e,iu,s,null,t,i,null);return s.dependencies.length>0&&e.register(...s.dependencies),Mc.set(t,r),r._hydrateCustomAttribute(),r}static $view(e,t=void 0){const i=new Us(e.container,Wi,null,e,null,null,null);return i.parent=t??null,i._hydrateSynthetic(),i}_hydrateCustomElement(e){this.logger=this.container.get($h).root,this.debug=this.logger.config.level<=HG.debug,this.debug&&(this.logger=this.logger.scopeTo(this.name));const t=this.container,i=this._vm,s=this.definition;this.scope=si.create(i,null,!0),s.watches.length>0&&X$(this,t,s,i),K$(this,s,i),this._lifecycleHooks=S$.resolve(t),t.register(s.Type),s.injectable!==null&&ri(t,s.injectable,new $i("definition.injectable",i)),(e==null||e.hydrate!==!1)&&(this._hydrate(e==null?void 0:e.hostController),this._hydrateChildren())}_hydrate(e){this._lifecycleHooks.hydrating!=null&&this._lifecycleHooks.hydrating.forEach(dZ,this),this._vmHooks._hydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this._vm.hydrating(this));const t=this.definition,i=this._compiledDef=this._rendering.compile(t,this.container),s=i.shadowOptions,r=i.hasSlots,o=i.containerless;let a=this.host,l=this.location,c=!1;if(e!=null?(this.hostController=e,c=!0):(this.hostController=lu(a,oZ))!==null&&(a=this.host=this.container.root.get(br).document.createElement(t.name),c=!0),c&&o&&l==null&&(l=this.location=nm(a)),ji(a,Pi,this),ji(a,t.key,this),s!==null||r){if(l!=null)throw ye(501);ji(this.shadowRoot=a.attachShadow(s??cZ),Pi,this),ji(this.shadowRoot,t.key,this),this.mountTarget=tu}else l!=null?(ji(l,Pi,this),ji(l,t.key,this),this.mountTarget=nu):this.mountTarget=eu;this._vm.$controller=this,this.nodes=this._rendering.createNodes(i),this._lifecycleHooks.hydrated!==void 0&&this._lifecycleHooks.hydrated.forEach(fZ,this),this._vmHooks._hydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this._vm.hydrated(this))}_hydrateChildren(){this._rendering.render(this,this.nodes.findTargets(),this._compiledDef,this.host),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(Z$,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateCustomAttribute(){const e=this.definition,t=this._vm;e.watches.length>0&&X$(this,this.container,e,t),K$(this,e,t),t.$controller=this,this._lifecycleHooks=S$.resolve(this.container),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(Z$,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateSynthetic(){this._compiledDef=this._rendering.compile(this.viewFactory.def,this.container),this._rendering.render(this,(this.nodes=this._rendering.createNodes(this._compiledDef)).findTargets(),this._compiledDef,void 0)}activate(e,t,i){switch(this.state){case zx:case Ef:if(!(t===null||t.isActive))return;this.state=Ys;break;case su:return;case Ac:throw ye(502,this.name);default:throw ye(503,this.name,hZ(this.state))}switch(this.parent=t,this.debug&&!this._fullyNamed&&(this._fullyNamed=!0,(this.logger??(this.logger=this.container.get($h).root.scopeTo(this.name))).trace("activate()")),this.vmKind){case wr:this.scope.parent=i??null;break;case iu:this.scope=i??null;break;case Wi:if(i==null)throw ye(504,this.name);this.hasLockedScope||(this.scope=i);break}this.$initiator=e,this._enterActivating();let s;return this.vmKind!==Wi&&this._lifecycleHooks.binding!=null&&(this.debug&&this.logger.trace("lifecycleHooks.binding()"),s=yi(...this._lifecycleHooks.binding.map(gZ,this))),this._vmHooks._binding&&(this.debug&&this.logger.trace("binding()"),s=yi(s,this._vm.binding(this.$initiator,this.parent))),wi(s)?(this._ensurePromise(),s.then(()=>{this._isBindingDone=!0,this.state!==Ys?this._leaveActivating():this.bind()}).catch(r=>{this._reject(r)}),this.$promise):(this._isBindingDone=!0,this.bind(),this.$promise)}bind(){this.debug&&this.logger.trace("bind()");let e=0,t=0,i;if(this.bindings!==null)for(e=0,t=this.bindings.length;t>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Wi&&this._lifecycleHooks.bound!=null&&(this.debug&&this.logger.trace("lifecycleHooks.bound()"),i=yi(...this._lifecycleHooks.bound.map(pZ,this))),this._vmHooks._bound&&(this.debug&&this.logger.trace("bound()"),i=yi(i,this._vm.bound(this.$initiator,this.parent))),wi(i)){this._ensurePromise(),i.then(()=>{this.isBound=!0,this.state!==Ys?this._leaveActivating():this._attach()}).catch(s=>{this._reject(s)});return}this.isBound=!0,this._attach()}_append(...e){switch(this.mountTarget){case eu:this.host.append(...e);break;case tu:this.shadowRoot.append(...e);break;case nu:{let t=0;for(;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location);break}}}_attach(){if(this.debug&&this.logger.trace("attach()"),this.hostController!==null)switch(this.mountTarget){case eu:case tu:this.hostController._append(this.host);break;case nu:this.hostController._append(this.location.$start,this.location);break}switch(this.mountTarget){case eu:this.nodes.appendTo(this.host,this.definition!=null&&this.definition.enhance);break;case tu:{const i=this.container;(i.has(U$,!1)?i.get(U$):i.get(eZ)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case nu:this.nodes.insertBefore(this.location);break}let e=0,t;if(this.vmKind!==Wi&&this._lifecycleHooks.attaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.attaching()"),t=yi(...this._lifecycleHooks.attaching.map(mZ,this))),this._vmHooks._attaching&&(this.debug&&this.logger.trace("attaching()"),t=yi(t,this._vm.attaching(this.$initiator,this.parent))),wi(t)&&(this._ensurePromise(),this._enterActivating(),t.then(()=>{this._leaveActivating()}).catch(i=>{this._reject(i)})),this.children!==null)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this._leaveActivating()}deactivate(e,t){var o;let i;switch(this.state&~Tf){case su:this.state=em;break;case Ys:this.state=em,i=(o=this.$promise)==null?void 0:o.catch(a=>{this.logger.warn("The activation error will be ignored, as the controller is already scheduled for deactivation. The activation was rejected with: %s",a)});break;case zx:case Ef:case Ac:case Ef|Ac:return;default:throw ye(505,this.name,this.state)}this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,e===this&&this._enterDetaching();let s=0,r;if(this.children!==null)for(s=0;s<this.children.length;++s)this.children[s].deactivate(e,this);return xt(i,()=>{if(this.isBound&&(this.vmKind!==Wi&&this._lifecycleHooks.detaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.detaching()"),r=yi(...this._lifecycleHooks.detaching.map(wZ,this))),this._vmHooks._detaching&&(this.debug&&this.logger.trace("detaching()"),r=yi(r,this._vm.detaching(this.$initiator,this.parent)))),wi(r)&&(this._ensurePromise(),e._enterDetaching(),r.then(()=>{e._leaveDetaching()}).catch(a=>{e._reject(a)})),e.head===null?e.head=this:e.tail.next=this,e.tail=this,e===this)return this._leaveDetaching(),this.$promise})}removeNodes(){switch(this.vmKind){case wr:case Wi:this.nodes.remove(),this.nodes.unlink()}if(this.hostController!==null)switch(this.mountTarget){case eu:case tu:this.host.remove();break;case nu:this.location.$start.remove(),this.location.remove();break}}unbind(){this.debug&&this.logger.trace("unbind()");let e=0;if(this.bindings!==null)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case iu:this.scope=null;break;case Wi:this.hasLockedScope||(this.scope=null),(this.state&Tf)===Tf&&!this.viewFactory.tryReturnToCache(this)&&this.$initiator===this&&this.dispose();break;case wr:this.scope.parent=null;break}this.state=Ef,this.$initiator=null,this._resolve()}_ensurePromise(){this.$promise===void 0&&(this.$promise=new Promise((e,t)=>{this.$resolve=e,this.$reject=t}),this.$initiator!==this&&this.parent._ensurePromise())}_resolve(){this.$promise!==void 0&&(Ux=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,Ux(),Ux=void 0)}_reject(e){this.$promise!==void 0&&(Yx=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,Yx(e),Yx=void 0),this.$initiator!==this&&this.parent._reject(e)}_enterActivating(){++this._activatingStack,this.$initiator!==this&&this.parent._enterActivating()}_leaveActivating(){if(this.state!==Ys){--this._activatingStack,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating();return}if(--this._activatingStack===0){if(this.vmKind!==Wi&&this._lifecycleHooks.attached!=null&&(ou=yi(...this._lifecycleHooks.attached.map(bZ,this))),this._vmHooks._attached&&(this.debug&&this.logger.trace("attached()"),ou=yi(ou,this._vm.attached(this.$initiator))),wi(ou)){this._ensurePromise(),ou.then(()=>{this.state=su,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating()}).catch(e=>{this._reject(e)}),ou=void 0;return}ou=void 0,this.state=su,this._resolve()}this.$initiator!==this&&this.parent._leaveActivating()}_enterDetaching(){++this._detachingStack}_leaveDetaching(){if(--this._detachingStack===0){this.debug&&this.logger.trace("detach()"),this._enterUnbinding(),this.removeNodes();let e=this.$initiator.head,t;for(;e!==null;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e._isBindingDone&&(e.vmKind!==Wi&&e._lifecycleHooks.unbinding!=null&&(t=yi(...e._lifecycleHooks.unbinding.map(vZ,e))),e._vmHooks._unbinding&&(e.debug&&e.logger.trace("unbinding()"),t=yi(t,e.viewModel.unbinding(e.$initiator,e.parent)))),wi(t)&&(this._ensurePromise(),this._enterUnbinding(),t.then(()=>{this._leaveUnbinding()}).catch(i=>{this._reject(i)})),t=void 0,e=e.next;this._leaveUnbinding()}}_enterUnbinding(){++this._unbindingStack}_leaveUnbinding(){if(--this._unbindingStack===0){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;e!==null;)e!==this&&(e._isBindingDone=!1,e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this._isBindingDone=!1,this.isBound=!1,this.unbind()}}addBinding(e){this.bindings===null?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){this.children===null?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case iu:case wr:return this.definition.name===e;case Wi:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return this.vmKind===wr&&(ji(e,Pi,this),ji(e,this.definition.key,this)),this.host=e,this.mountTarget=eu,this}setShadowRoot(e){return this.vmKind===wr&&(ji(e,Pi,this),ji(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=tu,this}setLocation(e){return this.vmKind===wr&&(ji(e,Pi,this),ji(e,this.definition.key,this)),this.location=e,this.mountTarget=nu,this}release(){this.state|=Tf}dispose(){this.debug&&this.logger.trace("dispose()"),(this.state&Ac)!==Ac&&(this.state|=Ac,this._vmHooks._dispose&&this._vm.dispose(),this.children!==null&&(this.children.forEach(uZ),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,this._vm!==null&&(Mc.delete(this._vm),this._vm=null),this._vm=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(e){if(e(this)===!0||this._vmHooks._accept&&this._vm.accept(e)===!0)return!0;if(this.children!==null){const{children:t}=this;for(let i=0,s=t.length;i<s;++i)if(t[i].accept(e)===!0)return!0}}}const Mc=new WeakMap,G$=0,eu=1,tu=2,nu=3,rZ=ul({none:G$,host:eu,shadowRoot:tu,location:nu}),oZ={optional:!0},aZ=IG(VL);function K$(n,e,t){var c,h;const i=e.bindables,s=o$(i),r=s.length,o=n.container.get(bf),a="propertiesChanged"in t;if(r===0)return;const l=a?(()=>{let u={},d,f=0;const g=Promise.resolve(),p=()=>{d==null&&(d=g.then(()=>{var w;const m=u;u={},f=0,d=void 0,n.isBound&&((w=t.propertiesChanged)==null||w.call(t,m),f>0&&p())}))};return(m,w,y)=>{u[m]={newValue:w,oldValue:y},f++,p()}})():Yo;for(let u=0;u<r;++u){const d=s[u],f=i[d],g=f.callback,p=o.getObserver(t,d);if(f.set!==Yo&&((c=p.useCoercer)==null?void 0:c.call(p,f.set,n.coercion))!==!0)throw ye(507,d);if(t[g]!=null||t.propertyChanged!=null||a){const m=(w,y)=>{var C,R;n.isBound&&((C=t[g])==null||C.call(t,w,y),(R=t.propertyChanged)==null||R.call(t,d,w,y),l(d,w,y))};if(((h=p.useCallback)==null?void 0:h.call(p,m))!==!0)throw ye(508,d)}}}const q$=new Map,lZ=n=>{let e=q$.get(n);return e==null&&(e=new Lp(n,0),q$.set(n,e)),e};function X$(n,e,t,i){const s=e.get(bf),r=e.get(af),o=t.watches,a=n.vmKind===wr?n.scope:si.create(i,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if({expression:c,callback:h}=o[d],h=Ht(h)?h:Reflect.get(i,h),!Ht(h))throw ye(506,h);Ht(c)?n.addBinding(new Y$(i,s,c,h,!0)):(u=ft(c)?r.parse(c,Zo):lZ(c),n.addBinding(new jx(a,e,s,u,h)))}}class xf{constructor(e){this._define="define"in e,this._hydrating="hydrating"in e,this._hydrated="hydrated"in e,this._created="created"in e,this._binding="binding"in e,this._bound="bound"in e,this._attaching="attaching"in e,this._attached="attached"in e,this._detaching="detaching"in e,this._unbinding="unbinding"in e,this._dispose="dispose"in e,this._accept="accept"in e}}xf.none=new xf({});const cZ={mode:"open"},wr="customElement",iu="customAttribute",Wi="synthetic",zx=0,Ys=1,su=2,em=4,Ef=8,Tf=16,Ac=32;function hZ(n){const e=[];return(n&Ys)===Ys&&e.push("activating"),(n&su)===su&&e.push("activated"),(n&em)===em&&e.push("deactivating"),(n&Ef)===Ef&&e.push("deactivated"),(n&Tf)===Tf&&e.push("released"),(n&Ac)===Ac&&e.push("disposed"),e.length===0?"none":e.join("|")}const by=Tn("IController"),ru=Tn("IHydrationContext");class Q${constructor(e,t,i){this.instruction=t,this.parent=i,this.controller=e}}function uZ(n){n.dispose()}function Z$(n){n.instance.created(this._vm,this)}function dZ(n){n.instance.hydrating(this._vm,this)}function fZ(n){n.instance.hydrated(this._vm,this)}function gZ(n){return n.instance.binding(this._vm,this.$initiator,this.parent)}function pZ(n){return n.instance.bound(this._vm,this.$initiator,this.parent)}function mZ(n){return n.instance.attaching(this._vm,this.$initiator,this.parent)}function bZ(n){return n.instance.attached(this._vm,this.$initiator)}function wZ(n){return n.instance.detaching(this._vm,this.$initiator,this.parent)}function vZ(n){return n.instance.unbinding(this._vm,this.$initiator,this.parent)}let Ux,Yx,ou;class yZ{}function Mf(n,e){var t;return((t=n.$au)==null?void 0:t[e])??null}function ji(n,e,t){(n.$au??(n.$au=new yZ))[e]=t}const tm=Tn("INode"),as=Tn("IRenderLocation"),wy=Tn("ICssClassMapping"),vy=new WeakMap;function yy(n){if(vy.has(n))return vy.get(n);let e=0,t=n.nextSibling;for(;t!==null;){if(t.nodeType===8)switch(t.textContent){case"au-start":++e;break;case"au-end":if(e--===0)return t}t=t.nextSibling}if(n.parentNode===null&&n.nodeType===11){const i=lu(n,{optional:!0});if(i==null)return null;if(i.mountTarget===rZ.shadowRoot)return yy(i.host)}return n.parentNode}function CZ(n,e){if(n.platform!==void 0&&!(n instanceof n.platform.Node)){const t=n.childNodes;for(let i=0,s=t.length;i<s;++i)vy.set(t[i],e)}else vy.set(n,e)}function nm(n){if(J$(n))return n;const e=n.ownerDocument.createComment("au-end"),t=e.$start=n.ownerDocument.createComment("au-start"),i=n.parentNode;return i!==null&&(i.replaceChild(e,n),i.insertBefore(t,e)),e}function J$(n){return n.textContent==="au-end"}class Gx{get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}constructor(e,t){this.platform=e,this.next=void 0,this._isMounted=!1,this._isLinked=!1,this.ref=null;const i=(this.f=t).querySelectorAll("au-m");let s=0,r=i.length,o=this.t=Array(r),a,l;for(;r>s;)l=i[s],a=l.nextSibling,l.remove(),a.nodeType===8&&(l=a,(a=a.nextSibling).$start=l),o[s]=a,++s;const c=t.childNodes,h=this.childNodes=Array(r=c.length);for(s=0;r>s;)h[s]=c[s],++s;this._firstChild=t.firstChild,this._lastChild=t.lastChild}findTargets(){return this.t}insertBefore(e){if(this._isLinked&&this.ref)this.addToLinked();else{const t=e.parentNode;if(this._isMounted){let i=this._firstChild,s;const r=this._lastChild;for(;i!=null&&(s=i.nextSibling,t.insertBefore(i,e),i!==r);)i=s}else this._isMounted=!0,e.parentNode.insertBefore(this.f,e)}}appendTo(e,t=!1){if(this._isMounted){let i=this._firstChild,s;const r=this._lastChild;for(;i!=null&&(s=i.nextSibling,e.appendChild(i),i!==r);)i=s}else this._isMounted=!0,t||e.appendChild(this.f)}remove(){if(this._isMounted){this._isMounted=!1;const e=this.f,t=this._lastChild;let i,s=this._firstChild;for(;s!==null&&(i=s.nextSibling,e.appendChild(s),s!==t);)s=i}}addToLinked(){const e=this.ref,t=e.parentNode;if(this._isMounted){let i=this._firstChild,s;const r=this._lastChild;for(;i!=null&&(s=i.nextSibling,t.insertBefore(i,e),i!==r);)i=s}else this._isMounted=!0,t.insertBefore(this.f,e)}unlink(){this._isLinked=!1,this.next=void 0,this.ref=void 0}link(e){this._isLinked=!0,J$(e)?this.ref=e:(this.next=e,this._obtainRefNode())}_obtainRefNode(){this.next!==void 0?this.ref=this.next.firstChild:this.ref=void 0}}const Kx=(n,e,t=n.get(br))=>(ri(n,t.HTMLElement,ri(n,t.Element,ri(n,tm,new $i("ElementResolver",e)))),n);function Cy(n){return function(e,t){return t.addInitializer(function(){e2(n,this)}),e}}const qx=new WeakMap;class ls{get type(){return rQ}constructor(e,t,i,s,r,o,a,l,c,h,u,d,f,g,p,m,w,y,C){this.Type=e,this.name=t,this.aliases=i,this.key=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.containerless=f,this.shadowOptions=g,this.hasSlots=p,this.enhance=m,this.watches=w,this.strict=y,this.processContent=C}static create(e,t=null){if(t===null){const s=e;if(ft(s))throw ye(761,e);const r=to("name",s,Zx);Ht(s.Type)?t=s.Type:t=n2($D(r));for(const o of Object.values(js.from(s.bindables)))js._add(o,t);return new ls(t,r,ni(s.aliases),to("key",s,()=>Af(r)),fr("capture",s,t,yr),to("template",s,vr),ni(s.instructions),ni(Gs(t,"dependencies"),s.dependencies),to("injectable",s,vr),to("needsCompile",s,Qx),ni(s.surrogates),js.from(Gs(t,"bindables"),s.bindables),fr("containerless",s,t,yr),to("shadowOptions",s,vr),to("hasSlots",s,yr),to("enhance",s,yr),to("watches",s,_Z),to("strict",s,Xx),eo("processContent",t,vr))}if(ft(e))return new ls(t,e,ni(Gs(t,"aliases"),t.aliases),Af(e),eo("capture",t,yr),eo("template",t,vr),ni(Gs(t,"instructions"),t.instructions),ni(Gs(t,"dependencies"),t.dependencies),eo("injectable",t,vr),eo("needsCompile",t,Qx),ni(Gs(t,"surrogates"),t.surrogates),js.from(...js.getAll(t),Gs(t,"bindables"),t.bindables),eo("containerless",t,yr),eo("shadowOptions",t,vr),eo("hasSlots",t,yr),eo("enhance",t,yr),ni(Ix.getDefinitions(t),t.watches),eo("strict",t,Xx),eo("processContent",t,vr));const i=to("name",e,Zx);for(const s of Object.values(js.from(e.bindables)))js._add(s,t);return new ls(t,i,ni(Gs(t,"aliases"),e.aliases,t.aliases),Af(i),fr("capture",e,t,yr),fr("template",e,t,vr),ni(Gs(t,"instructions"),e.instructions,t.instructions),ni(Gs(t,"dependencies"),e.dependencies,t.dependencies),fr("injectable",e,t,vr),fr("needsCompile",e,t,Qx),ni(Gs(t,"surrogates"),e.surrogates,t.surrogates),js.from(...js.getAll(t),Gs(t,"bindables"),t.bindables,e.bindables),fr("containerless",e,t,yr),fr("shadowOptions",e,t,vr),fr("hasSlots",e,t,yr),fr("enhance",e,t,yr),ni(e.watches,Ix.getDefinitions(t),t.watches),fr("strict",e,t,Xx),fr("processContent",e,t,vr))}static getOrCreate(e){if(e instanceof ls)return e;if(qx.has(e))return qx.get(e);const t=ls.create(e);return qx.set(e,t),ao(t,t.Type,Pi),t}register(e,t){const i=this.Type,s=typeof t=="string"?Af(t):this.key,r=this.aliases;if(e.has(s,!1)){console.warn(ye(153,this.name));return}e.register(e.has(i,!1)?null:ea(i,i),Rc(i,s),...r.map(o=>Rc(i,Af(o))))}toString(){return`au:ce:${this.name}`}}const SZ={name:void 0,searchParents:!1,optional:!1},vr=()=>null,Xx=()=>{},yr=()=>!1,Qx=()=>!0,_Z=()=>lt,au="custom-element",Pi=Nh(au),Af=n=>`${Pi}:${n}`,Zx=(n=>()=>`unnamed-${++n}`)(0),RZ=(n,e,t)=>{ao(t,n,hl(e))},e2=(n,e)=>{const t=ls.create(n,e),i=t.Type;return ao(t,i,Pi,jo),i},xZ=n=>{var e;return Ht(n)&&(ry(Pi,n)||((e=n.$au)==null?void 0:e.type)===au)},lu=(n,e=SZ)=>{if(e.name===void 0&&e.searchParents!==!0){const i=Mf(n,Pi);if(i===null){if(e.optional===!0)return null;throw ye(762,n)}return i}if(e.name!==void 0){if(e.searchParents!==!0){const r=Mf(n,Pi);if(r===null)throw ye(763,n);return r.is(e.name)?r:void 0}let i=n,s=!1;for(;i!==null;){const r=Mf(i,Pi);if(r!==null&&(s=!0,r.is(e.name)))return r;i=yy(i)}if(s)return;throw ye(764,n)}let t=n;for(;t!==null;){const i=Mf(t,Pi);if(i!==null)return i;t=yy(t)}throw ye(765,n)},Gs=(n,e)=>Bi(hl(e),n),t2=n=>{const e=Bi(Pi,n)??xc(n,au,ls.create);if(e==null)throw ye(760,n);return e},EZ=()=>{const n={$isInterface:!1,register(){return{$isResolver:!0,resolve(e,t){return t.has(n,!0)?t.get(n):null}}}};return n},n2=function(){const n={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(t,i=e){const s=class{};return n.value=t,l$(s,"name",n),i!==e&&r$(s.prototype,i),s}}(),Ks=ul({name:Pi,keyFrom:Af,isType:xZ,for:lu,define:e2,getDefinition:t2,annotate:RZ,getAnnotation:Gs,generateName:Zx,createInjectable:EZ,generateType:n2,find(n,e){const t=n.find(au,e);return t==null?null:Bi(Pi,t)??xc(t,au,ls.create)??null}}),i2=Tn("ISVGAnalyzer",n=>n.singleton(TZ));class TZ{isStandardSvgAttribute(e,t){return!1}}class s2{constructor(){this.fns=[],this._tagAttrMap=Kt(),this._globalAttrMap=Kt(),this.svg=ue(i2),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(e){var o;let t,i,s,r;for(s in e){t=e[s],i=(o=this._tagAttrMap)[s]??(o[s]=Kt());for(r in t){if(i[r]!==void 0)throw r2(r,s);i[r]=t[r]}}}useGlobalMapping(e){const t=this._globalAttrMap;for(const i in e){if(t[i]!==void 0)throw r2(i,"*");t[i]=e[i]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return MZ(e,t)||this.fns.length>0&&this.fns.some(i=>i(e,t))}map(e,t){var i;return((i=this._tagAttrMap[e.nodeName])==null?void 0:i[t])??this._globalAttrMap[t]??(_x(e,t,this.svg)?t:null)}}s2.register=Rp(ON);function MZ(n,e){switch(n.nodeName){case"INPUT":switch(n.type){case"checkbox":case"radio":return e==="checked";default:return e==="value"||e==="files"||e==="value-as-number"||e==="value-as-date"}case"TEXTAREA":case"SELECT":return e==="value";default:switch(e){case"textcontent":case"innerhtml":return n.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}function r2(n,e){return ye(719,n,e)}const AZ={register(n){n.register(kL,s2,o2)}};class PZ{constructor(e,t,i){this.attrs=e,this.bindables=t,this.primary=i}}class o2{constructor(){this._resourceCache=new WeakMap,this._bindableCache=new WeakMap}el(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new a2),t in i._element?i._element[t]:i._element[t]=Ks.find(e,t)}attr(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new a2),t in i._attr?i._attr[t]:i._attr[t]=Hx.find(e,t)}bindables(e){let t=this._bindableCache.get(e);if(t==null){const i=e.bindables,s=Kt();let r,o,a=!1,l,c;for(o in i){if(r=i[o],c=r.attribute,r.primary===!0){if(a)throw ye(714,e);a=!0,l=r}else!a&&l==null&&(l=r);s[c]=dl.create(o,r)}r==null&&e.type==="custom-attribute"&&(l=s.value=dl.create("value",{mode:e.defaultBindingMode??Cx})),this._bindableCache.set(e,t=new PZ(s,i,l??null))}return t}}o2.register=Rp(DL);class a2{constructor(){this._element=Kt(),this._attr=Kt()}}const Jx=Kt();class im{static forNs(e){return Jx[e]??(Jx[e]=new im(e))}constructor(e){this.ns=e,this.type=Sc|Jo}getValue(e,t){return e.getAttributeNS(this.ns,t)}setValue(e,t,i){e==null?t.removeAttributeNS(this.ns,i):t.setAttributeNS(this.ns,i,e)}}gy(im);class l2{constructor(){this.type=Sc|Jo}getValue(e,t){return e.getAttribute(t)}setValue(e,t,i){e==null?t.removeAttribute(i):t.setAttribute(i,e)}}gy(l2);const Sy=new l2;class cu{static _getSelectedOptions(e){const t=[];if(e.length===0)return t;const i=e.length;let s=0,r;for(;i>s;)r=e[s],r.selected&&(t[t.length]=Yh.call(r,"model")?r.model:r.value),++s;return t}static _defaultMatcher(e,t){return e===t}constructor(e,t,i,s){this.type=Sc|Ex|Jo,this._value=void 0,this._oldValue=void 0,this._hasChanges=!1,this._arrayObserver=void 0,this._nodeObserver=void 0,this._observing=!1,this._listened=!1,this._el=e,this._observerLocator=s,this._config=i}getValue(){return this._observing?this._value:this._el.multiple?cu._getSelectedOptions(this._el.options):this._el.value}setValue(e){this._oldValue=this._value,this._value=e,this._hasChanges=e!==this._oldValue,this._observeArray(e instanceof Array?e:null),this._flushChanges()}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const e=this._value,t=this._el,i=Kn(e),s=t.matcher??cu._defaultMatcher,r=t.options;let o=r.length;for(;o-- >0;){const a=r[o],l=Yh.call(a,"model")?a.model:a.value;if(i){a.selected=e.findIndex(c=>!!s(l,c))!==-1;continue}a.selected=!!s(l,e)}}syncValue(){const e=this._el,t=e.options,i=t.length,s=this._value;let r=0;if(e.multiple){if(!(s instanceof Array))return!0;let l;const c=e.matcher||cu._defaultMatcher,h=[];for(;r<i;)l=t[r],l.selected&&h.push(Yh.call(l,"model")?l.model:l.value),++r;let u;for(r=0;r<s.length;)u=s[r],h.findIndex(d=>!!c(u,d))===-1?s.splice(r,1):++r;for(r=0;r<h.length;)u=h[r],s.findIndex(d=>!!c(u,d))===-1&&s.push(u),++r;return!1}let o=null,a;for(;r<i;){if(a=t[r],a.selected){o=Yh.call(a,"model")?a.model:a.value;break}++r}return this._oldValue=this._value,this._value=o,!0}_start(){(this._nodeObserver=E$(this._el,this._handleNodeChange.bind(this))).observe(this._el,{childList:!0,subtree:!0,characterData:!0}),this._observeArray(this._value instanceof Array?this._value:null),this._observing=!0}_stop(){var e;this._nodeObserver.disconnect(),(e=this._arrayObserver)==null||e.unsubscribe(this),this._nodeObserver=this._arrayObserver=void 0,this._observing=!1}_observeArray(e){var t;if((t=this._arrayObserver)==null||t.unsubscribe(this),this._arrayObserver=void 0,e!=null){if(!this._el.multiple)throw ye(654);(this._arrayObserver=this._observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this._flush()}_handleNodeChange(e){this.syncOptions(),this.syncValue()&&this._flush()}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}Wx(cu),pr(cu,null);const IZ="--";class c2{constructor(e){this.obj=e,this.type=Sc|Jo,this._value="",this._oldValue="",this.styles={},this.version=0,this._hasChanges=!1}getValue(){return this.obj.style.cssText}setValue(e){this._value=e,this._hasChanges=e!==this._oldValue,this._flushChanges()}_getStyleTuplesFromString(e){const t=[],i=/url\([^)]+$/;let s=0,r="",o,a,l,c;for(;s<e.length;){if(o=e.indexOf(";",s),o===-1&&(o=e.length),r+=e.substring(s,o),s=o+1,i.test(r)){r+=";";continue}a=r.indexOf(":"),l=r.substring(0,a).trim(),c=r.substring(a+1).trim(),t.push([l,c]),r=""}return t}_getStyleTuplesFromObject(e){let t,i;const s=[];for(i in e)if(t=e[i],t!=null){if(ft(t)){if(i.startsWith(IZ)){s.push([i,t]);continue}s.push([FD(i),t]);continue}s.push(...this._getStyleTuples(t))}return s}_getStyleTuplesFromArray(e){const t=e.length;if(t>0){const i=[];let s=0;for(;t>s;++s)i.push(...this._getStyleTuples(e[s]));return i}return lt}_getStyleTuples(e){return ft(e)?this._getStyleTuplesFromString(e):e instanceof Array?this._getStyleTuplesFromArray(e):e instanceof Object?this._getStyleTuplesFromObject(e):lt}_flushChanges(){if(this._hasChanges){this._hasChanges=!1;const e=this._value,t=this.styles,i=this._getStyleTuples(e);let s,r=this.version;this._oldValue=e;let o,a,l,c=0;const h=i.length;for(;c<h;++c)o=i[c],a=o[0],l=o[1],this.setProperty(a,l),t[a]=r;if(this.styles=t,this.version+=1,r===0)return;r-=1;for(s in t)!Yh.call(t,s)||t[s]!==r||this.obj.style.removeProperty(s)}}setProperty(e,t){let i="";t!=null&&Ht(t.indexOf)&&t.includes("!important")&&(i="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,i)}bind(){this._value=this._oldValue=this.obj.style.cssText}}gy(c2);class eE{constructor(e,t,i){this.type=Sc|Ex|Jo,this._value="",this._oldValue="",this._hasChanges=!1,this._listened=!1,this._el=e,this._key=t,this._config=i}getValue(){return this._value}setValue(e){Jr(e,this._value)||(this._oldValue=this._value,this._value=e,this._hasChanges=!0,this._config.readonly||this._flushChanges())}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this._el[this._key]=this._value??this._config.default,this._flush())}handleEvent(){this._oldValue=this._value,this._value=this._el[this._key],this._oldValue!==this._value&&(this._hasChanges=!1,this._flush())}_start(){this._value=this._oldValue=this._el[this._key]}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}Wx(eE),pr(eE,null);const h2=(()=>{const n="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/2000/xmlns/";return r$(Kt(),{"xlink:actuate":["actuate",n],"xlink:arcrole":["arcrole",n],"xlink:href":["href",n],"xlink:role":["role",n],"xlink:show":["show",n],"xlink:title":["title",n],"xlink:type":["type",n],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",t],"xmlns:xlink":["xlink",t]})})(),u2=new KL;u2.type=Sc|Jo;class tE{constructor(){this.allowDirtyCheck=!0,this._events=Kt(),this._globalEvents=Kt(),this._overrides=Kt(),this._globalOverrides=Kt(),this._locator=ue(EG),this._platform=ue(br),this._dirtyChecker=ue(hx),this.svg=ue(i2);const e=["change","input"],t={events:e,default:""};this.useConfig({INPUT:{value:t,valueAsNumber:{events:e,default:0},checked:{type:nE,events:e},files:{events:e,readonly:!0}},SELECT:{value:{type:cu,events:["change"],default:""}},TEXTAREA:{value:t}});const i={events:["change","input","blur","keyup","paste"],default:""},s={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:s,scrollLeft:s,textContent:i,innerHTML:i}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(e,t){return e instanceof this._platform.Node}useConfig(e,t,i){const s=this._events;let r;if(ft(e))r=s[e]??(s[e]=Kt()),r[t]==null?r[t]=i:_y(e,t);else for(const o in e){r=s[o]??(s[o]=Kt());const a=e[o];for(t in a)r[t]==null?r[t]=a[t]:_y(o,t)}}useConfigGlobal(e,t){const i=this._globalEvents;if(typeof e=="object")for(const s in e)i[s]==null?i[s]=e[s]:_y("*",s);else i[e]==null?i[e]=t:_y("*",e)}getAccessor(e,t,i){if(t in this._globalOverrides||t in(this._overrides[e.tagName]??ZD))return this.getObserver(e,t,i);switch(t){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return(t==="popovertarget"||t==="popovertargetaction")&&e.nodeName!=="INPUT"&&e.nodeName!=="BUTTON"&&console.warn(`[aurelia] Popover API are only valid on <input> or <button>. Detected ${t} on <${e.nodeName.toLowerCase()}>`),Sy;default:{const s=h2[t];return s!==void 0?im.forNs(s[1]):_x(e,t,this.svg)?Sy:u2}}}overrideAccessor(e,t){var s,r;let i;if(ft(e))i=(s=this._overrides)[e]??(s[e]=Kt()),i[t]=!0;else for(const o in e)for(const a of e[o])i=(r=this._overrides)[o]??(r[o]=Kt()),i[a]=!0}overrideAccessorGlobal(...e){for(const t of e)this._globalOverrides[t]=!0}getNodeObserverConfig(e,t){var i;return((i=this._events[e.tagName])==null?void 0:i[t])??this._globalEvents[t]}getNodeObserver(e,t,i){var o;const s=((o=this._events[e.tagName])==null?void 0:o[t])??this._globalEvents[t];let r;return s!=null?(r=new(s.type??eE)(e,t,s,i,this._locator),r.doNotCache||(QL(e)[t]=r),r):null}getObserver(e,t,i){switch(t){case"class":return new py(e);case"css":case"style":return new c2(e)}const s=this.getNodeObserver(e,t,i);if(s!=null)return s;const r=h2[t];if(r!==void 0)return im.forNs(r[1]);if(_x(e,t,this.svg))return Sy;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this._dirtyChecker.createProperty(e,t);throw ye(652,t)}else return new ux(e,t)}}tE.register=Rp(fx);function OZ(n,e){if(n instanceof Array)return e.getArrayObserver(n);if(n instanceof Map)return e.getMapObserver(n);if(n instanceof Set)return e.getSetObserver(n)}function _y(n,e){throw ye(653,n,e)}function d2(n,e){return n===e}class nE{constructor(e,t,i,s){this.type=Sc|Ex|Jo,this._value=void 0,this._oldValue=void 0,this._collectionObserver=void 0,this._valueObserver=void 0,this._listened=!1,this._el=e,this.oL=s,this._config=i}getValue(){return this._value}setValue(e){const t=this._value;e!==t&&(this._value=e,this._oldValue=t,this._observe(),this._synchronizeElement(),this._flush())}handleCollectionChange(){this._synchronizeElement()}handleChange(e,t){this._synchronizeElement()}_synchronizeElement(){const e=this._value,t=this._el,i=Yh.call(t,"model")?t.model:t.value,s=t.type==="radio",r=t.matcher!==void 0?t.matcher:d2;if(s)t.checked=!!r(e,i);else if(e===!0)t.checked=!0;else{let o=!1;if(Kn(e))o=e.findIndex(a=>!!r(a,i))!==-1;else if(e instanceof Set){for(const a of e)if(r(a,i)){o=!0;break}}else if(e instanceof Map)for(const a of e){const l=a[0],c=a[1];if(r(l,i)&&c===!0){o=!0;break}}t.checked=o}}handleEvent(){let e=this._oldValue=this._value;const t=this._el,i=Yh.call(t,"model")?t.model:t.value,s=t.checked,r=t.matcher!==void 0?t.matcher:d2;if(t.type==="checkbox"){if(Kn(e)){const o=e.findIndex(a=>!!r(a,i));s&&o===-1?e.push(i):!s&&o!==-1&&e.splice(o,1);return}else if(e instanceof Set){const o={};let a=o;for(const l of e)if(r(l,i)===!0){a=l;break}s&&a===o?e.add(i):!s&&a!==o&&e.delete(a);return}else if(e instanceof Map){let o;for(const a of e){const l=a[0];if(r(l,i)===!0){o=l;break}}e.set(o,s);return}e=s}else if(s)e=i;else return;this._value=e,this._flush()}_start(){this._observe()}_stop(){var e,t;this._value=this._oldValue=void 0,(e=this._collectionObserver)==null||e.unsubscribe(this),(t=this._valueObserver)==null||t.unsubscribe(this),this._collectionObserver=this._valueObserver=void 0}_flush(){iE=this._oldValue,this._oldValue=this._value,this.subs.notify(this._value,iE),iE=void 0}_observe(){var t,i,s,r,o;const e=this._el;(s=this._valueObserver??(this._valueObserver=((t=e.$observers)==null?void 0:t.model)??((i=e.$observers)==null?void 0:i.value)))==null||s.subscribe(this),(r=this._collectionObserver)==null||r.unsubscribe(this),this._collectionObserver=void 0,e.type==="checkbox"&&((o=this._collectionObserver=OZ(this._value,this.oL))==null||o.subscribe(this))}}Wx(nE),pr(nE,null);let iE;class f2{bind(e,t){if(!(t instanceof os))throw ye(9994,t);t.useTargetObserver(Sy)}}f2.$au={type:mr,name:"attr"};class g2{bind(e,t){if(!("handleEvent"in t))throw ye(801);t.self=!0}unbind(e,t){t.self=!1}}g2.$au={type:mr,name:"self"};class p2{constructor(){this._observerLocator=ue(bf),this._nodeObserverLocator=ue(fx)}bind(e,t,...i){if(!(this._nodeObserverLocator instanceof tE))throw ye(9993);if(i.length===0)throw ye(802);if(!(t instanceof os)||!(t.mode&cl))throw ye(803);const s=this._nodeObserverLocator.getNodeObserverConfig(t.target,t.targetProperty);if(s==null)throw ye(9992,t);const r=this._nodeObserverLocator.getNodeObserver(t.target,t.targetProperty,this._observerLocator);r.useConfig({readonly:s.readonly,default:s.default,events:i}),t.useTargetObserver(r)}}p2.$au={type:mr,name:"updateTrigger"};class Ry{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this._wantsDeactivate=!1,this._swapId=0,this._ifFactory=ue(zs),this._location=ue(as)}attaching(e,t){return this._swap(this.value)}detaching(e,t){return this._wantsDeactivate=!0,xt(this.pending,()=>{var i;this._wantsDeactivate=!1,this.pending=void 0,(i=this.view)==null||i.deactivate(e,this.$controller)})}valueChanged(e,t){if(this.$controller.isActive&&(e=!!e,t=!!t,e!==t))return this._swap(e)}_swap(e){const t=this.view,i=this.$controller,s=this._swapId++,r=()=>!this._wantsDeactivate&&this._swapId===s+1;let o;return xt(this.pending,()=>this.pending=xt(t==null?void 0:t.deactivate(t,i),()=>{var a;if(r()&&(e?o=this.view=this.ifView=this.cache&&this.ifView!=null?this.ifView:this._ifFactory.create():o=this.view=this.elseView=this.cache&&this.elseView!=null?this.elseView:(a=this.elseFactory)==null?void 0:a.create(),o!=null))return o.setLocation(this._location),xt(o.activate(o,i,i.scope),()=>{r()&&(this.pending=void 0)})}))}dispose(){var e,t;(e=this.ifView)==null||e.dispose(),(t=this.elseView)==null||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}Ry.$au={type:Vi,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:n=>n===""||!!n&&n!=="false"}}};class m2{constructor(){this._factory=ue(zs)}link(e,t,i,s){const r=e.children,o=r[r.length-1];if(o instanceof Ry)o.elseFactory=this._factory;else if(o.viewModel instanceof Ry)o.viewModel.elseFactory=this._factory;else throw ye(810)}}m2.$au={type:"custom-attribute",name:"else",isTemplateController:!0};function kZ(n){n.dispose()}const HZ=["BindingBehavior","ValueConverter"];class b2{constructor(){this.views=[],this.key=null,this._oldViews=[],this._scopes=[],this._oldScopes=[],this._scopeMap=new Map,this._observer=void 0,this._observingInnerItems=!1,this._reevaluating=!1,this._innerItemsExpression=null,this._normalizedItems=void 0,this._hasDestructuredLocal=!1,this._location=ue(as),this._parent=ue(by),this._factory=ue(zs),this._resolver=ue(NZ);const t=ue(uf).props[0].props[0];if(t!==void 0){const{to:i,value:s,command:r}=t;if(i==="key")if(r===null)this.key=s;else if(r==="bind")this.key=ue(af).parse(s,Zo);else throw ye(775,r);else throw ye(776,i)}}binding(e,t){const i=this._parent.bindings,s=i.length;let r,o,a=0;for(;s>a;++a)if(r=i[a],r.target===this&&r.targetProperty==="items"){o=this.forOf=r.ast,this._forOfBinding=r;let c=o.iterable;for(;c!=null&&HZ.includes(c.$kind);)c=c.expression,this._observingInnerItems=!0;this._innerItemsExpression=c;break}this._refreshCollectionObserver();const l=o.declaration;(this._hasDestructuredLocal=l.$kind==="ArrayDestructuring"||l.$kind==="ObjectDestructuring")||(this.local=vn(l,this.$controller.scope,r,null))}attaching(e,t){return this._normalizeToArray(),this._createScopes(),this._activateAllViews(e,this._normalizedItems??lt)}detaching(e,t){return this._refreshCollectionObserver(),this._deactivateAllViews(e)}unbinding(e,t){this._scopeMap.clear()}itemsChanged(){this.$controller.isActive&&(this._refreshCollectionObserver(),this._normalizeToArray(),this._createScopes(),this._applyIndexMap(void 0))}handleCollectionChange(e,t){const i=this.$controller;if(i.isActive){if(this._observingInnerItems){if(this._reevaluating)return;this._reevaluating=!0,this.items=vn(this.forOf.iterable,i.scope,this._forOfBinding,null),this._reevaluating=!1;return}this._normalizeToArray(),this._createScopes(),this._applyIndexMap(t)}}_applyIndexMap(e){const t=this.views;this._oldViews=t.slice();const i=t.length,s=this.key,r=s!==null,o=this._oldScopes,a=this._scopes;if(r||e===void 0){const l=this.local,h=this._normalizedItems.length,d=this.forOf.declaration,f=this._forOfBinding,g=this._hasDestructuredLocal;e=jh(h);let p=0;if(i===0)for(;p<h;++p)e[p]=-2;else if(h===0)for(p=0;p<i;++p)e.deletedIndices.push(p),e.deletedItems.push(My(g,d,o[p],f,l));else if(r){const m=Array(i);for(p=0;p<i;++p)m[p]=R2(g,s,d,o[p],f,l);const w=Array(i);for(p=0;p<h;++p)w[p]=R2(g,s,d,a[p],f,l);for(p=0;p<h;++p)m.includes(w[p])?e[p]=m.indexOf(w[p]):e[p]=-2;for(p=0;p<i;++p)w.includes(m[p])||(e.deletedIndices.push(p),e.deletedItems.push(My(g,d,o[p],f,l)))}else{for(p=0;p<h;++p)o.includes(a[p])?e[p]=o.indexOf(a[p]):e[p]=-2;for(p=0;p<i;++p)a.includes(o[p])||(e.deletedIndices.push(p),e.deletedItems.push(My(g,d,o[p],f,l)))}}if(e.deletedIndices.length>0){const l=xt(this._deactivateAndRemoveViewsByKey(e),()=>this._createAndActivateAndSortViewsByKey(e));wi(l)&&l.catch(Rx)}else this._createAndActivateAndSortViewsByKey(e)}_refreshCollectionObserver(){var o,a;const e=this.$controller.scope;let t=this._innerItems,i=this._observingInnerItems,s;i&&(t=this._innerItems=vn(this._innerItemsExpression,e,this._forOfBinding,null)??null,i=this._observingInnerItems=!Jr(this.items,t));const r=this._observer;if(this.$controller.isActive){const l=i?t:this.items;s=this._observer=(a=(o=this._resolver.resolve(l)).getObserver)==null?void 0:a.call(o,l),r!==s&&(r==null||r.unsubscribe(this),s==null||s.subscribe(this))}else r==null||r.unsubscribe(this),this._observer=void 0}_createScopes(){const e=this._scopes;this._oldScopes=e.slice();const t=this._normalizedItems,i=t.length,s=this._scopes=Array(t.length),r=this._scopeMap,o=new Map,a=this.$controller.scope,l=this._forOfBinding,c=this.forOf,h=this.local,u=this._hasDestructuredLocal;for(let d=0;d<i;++d)s[d]=VZ(r,o,t[d],c,a,l,h,u);r.clear(),this._scopeMap=o}_normalizeToArray(){const e=this.items;if(Kn(e)){this._normalizedItems=e.slice(0);return}const t=[];this._resolver.resolve(e).iterate(e,(i,s)=>{t[s]=i}),this._normalizedItems=t}_activateAllViews(e,t){let i,s,r,o;const{$controller:a,_factory:l,_location:c,_scopes:h}=this,u=t.length,d=this.views=Array(u);for(let f=0;f<u;++f)r=d[f]=l.create().setLocation(c),r.nodes.unlink(),o=h[f],Ty(o.overrideContext,f,u),s=r.activate(e??r,a,o),wi(s)&&(i??(i=[])).push(s);if(i!==void 0)return i.length===1?i[0]:Promise.all(i)}_deactivateAllViews(e){let t,i,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),i=s.deactivate(e??s,a),wi(i)&&(t??(t=[])).push(i);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_deactivateAndRemoveViewsByKey(e){let t,i,s;const{$controller:r,views:o}=this,a=e.deletedIndices.slice().sort(jZ),l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),i=s.deactivate(s,r),wi(i)&&(t??(t=[])).push(i);for(c=0;l>c;++c)o.splice(a[c]-c,1);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_createAndActivateAndSortViewsByKey(e){let t,i,s,r=0;const{$controller:o,_factory:a,_location:l,views:c,_scopes:h,_oldViews:u}=this,d=e.length;for(;d>r;++r)e[r]===-2&&(s=a.create(),c.splice(r,0,s));if(c.length!==d)throw ye(814,[c.length,d]);let f=0;for(r=0;r<e.length;++r)(f=e[r])!==-2&&(c[r]=u[f]);const g=DZ(e),p=g.length;let m,w=p-1;for(r=d-1;r>=0;--r)s=c[r],m=c[r+1],s.nodes.link((m==null?void 0:m.nodes)??l),e[r]===-2?(s.setLocation(l),Ty(h[r].overrideContext,r,d),i=s.activate(s,o,h[r]),wi(i)&&(t??(t=[])).push(i)):w<0||p===1||r!==g[w]?(Ty(s.scope.overrideContext,r,d),s.nodes.insertBefore(s.location)):(Ty(s.scope.overrideContext,r,d),--w);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}dispose(){this.views.forEach(kZ),this.views=void 0}accept(e){const{views:t}=this;if(t!==void 0){for(let i=0,s=t.length;i<s;++i)if(t[i].accept(e)===!0)return!0}}}b2.$au={type:Vi,name:"repeat",isTemplateController:!0,bindables:["items"]};let xy=16,pl=new Int32Array(xy),Ey=new Int32Array(xy);function DZ(n){const e=n.length;e>xy&&(xy=e,pl=new Int32Array(e),Ey=new Int32Array(e));let t=0,i=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(i=n[r],i!==-2){if(o=pl[t],s=n[o],s!==-2&&s<i){Ey[r]=o,pl[++t]=r;continue}for(a=0,l=t;a<l;)c=a+l>>1,s=n[pl[c]],s!==-2&&s<i?a=c+1:l=c;s=n[pl[a]],(i<s||s===-2)&&(a>0&&(Ey[r]=pl[a-1]),pl[a]=r)}r=++t;const h=new Int32Array(r);for(i=pl[t-1];t-- >0;)h[t]=i,i=Ey[i];for(;r-- >0;)pl[r]=0;return h}class w2{get $odd(){return!this.$even}get $even(){return this.$index%2===0}get $first(){return this.$index===0}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(e=0,t=1){this.$index=e,this.$length=t}}const Ty=(n,e,t)=>{n.$index=e,n.$length=t},NZ=Tn("IRepeatableHandlerResolver",n=>n.singleton(LZ));class LZ{constructor(){this._handlers=ue(v1($Z))}resolve(e){if(v2.handles(e))return v2;if(y2.handles(e))return y2;if(C2.handles(e))return C2;if(S2.handles(e))return S2;if(_2.handles(e))return _2;const t=this._handlers.find(i=>i.handles(e));return t!==void 0?t:FZ}}const $Z=Tn("IRepeatableHandler"),v2={handles:Kn,getObserver:gx,iterate(n,e){const t=n.length;let i=0;for(;i<t;++i)e(n[i],i,n)}},y2={handles:Qd,getObserver:gx,iterate(n,e){let t=0,i;for(i of n.keys())e(i,t++,n)}},C2={handles:pc,getObserver:gx,iterate(n,e){let t=0,i;for(i of n.entries())e(i,t++,n)}},S2={handles:aG,iterate(n,e){let t=0;for(;t<n;++t)e(t,t,n)}},_2={handles:n=>n==null,iterate(){}},FZ={handles(n){return!1},iterate(n,e){throw ye(777,n)}},BZ=(n,e,t,i,s,r)=>{n?Up(e,t,i,r):t.bindingContext[s]=r},My=(n,e,t,i,s)=>n?vn(e,t,i,null):t.bindingContext[s],R2=(n,e,t,i,s,r)=>typeof e=="string"?My(n,t,i,s,r)[e]:vn(e,i,s,null),VZ=(n,e,t,i,s,r,o,a)=>{let l=n.get(t);if(l===void 0?l=WZ(t,i,s,r,o,a):l instanceof si?n.delete(t):l.length===1?(l=l[0],n.delete(t)):l=l.shift(),e.has(t)){const c=e.get(t);c instanceof si?e.set(t,[c,l]):c.push(l)}else e.set(t,l);return BZ(a,i.declaration,l,r,o,t),l},WZ=(n,e,t,i,s,r)=>{if(r){const o=si.fromParent(t,new FL,new w2);Up(e.declaration,o,i,n)}return si.fromParent(t,new FL(s,n),new w2)},jZ=(n,e)=>n-e;class x2{constructor(){this.view=ue(zs).create().setLocation(ue(as))}valueChanged(e,t){const i=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(i.isActive&&s!=null)for(r=si.fromParent(i.scope,e===void 0?{}:e),a=s.length;a>o;++o)s[o].bind(r)}attaching(e,t){const{$controller:i,value:s}=this,r=si.fromParent(i.scope,s===void 0?{}:s);return this.view.activate(e,i,r)}detaching(e,t){return this.view.deactivate(e,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}x2.$au={type:Vi,name:"with",isTemplateController:!0,bindables:["value"]};class sE{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this._factory=ue(zs),this._location=ue(as)}link(e,t,i,s){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,s=this.$controller;return this.queue(()=>i.activate(e,s,s.scope)),this.queue(()=>this.swap(e,this.value)),this.promise}detaching(e,t){return this.queue(()=>this.view.deactivate(e,this.$controller)),this.promise}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}valueChanged(e,t){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(e){this.queue(()=>this._handleCaseChange(e))}_handleCaseChange(e){const t=e.isMatch(this.value),i=this.activeCases,s=i.length;if(!t)return s>0&&i[0].id===e.id?this._clearActiveCases(null):void 0;if(s>0&&i[0].id<e.id)return;const r=[];let o=e.fallThrough;if(!o)r.push(e);else{const a=this.cases,l=a.indexOf(e);for(let c=l,h=a.length;c<h&&o;c++){const u=a[c];r.push(u),o=u.fallThrough}}return xt(this._clearActiveCases(null,r),()=>(this.activeCases=r,this._activateCases(null)))}swap(e,t){const i=[];let s=!1;for(const o of this.cases)if((s||o.isMatch(t))&&(i.push(o),s=o.fallThrough),i.length>0&&!s)break;const r=this.defaultCase;return i.length===0&&r!==void 0&&i.push(r),xt(this.activeCases.length>0?this._clearActiveCases(e,i):void 0,()=>{if(this.activeCases=i,i.length!==0)return this._activateCases(e)})}_activateCases(e){const t=this.$controller;if(!t.isActive)return;const i=this.activeCases,s=i.length;if(s===0)return;const r=t.scope;return s===1?i[0].activate(e,r):yi(...i.map(o=>o.activate(e,r)))}_clearActiveCases(e,t=[]){const i=this.activeCases,s=i.length;if(s!==0){if(s===1){const r=i[0];return t.includes(r)?void 0:(i.length=0,r.deactivate(e))}return xt(yi(...i.reduce((r,o)=>(t.includes(o)||r.push(o.deactivate(e)),r),[])),()=>{i.length=0})}}queue(e){const t=this.promise;let i;i=this.promise=xt(xt(t,e),()=>{this.promise===i&&(this.promise=void 0)})}accept(e){if(this.$controller.accept(e)===!0||this.activeCases.some(t=>t.accept(e)))return!0}}sE.$au={type:Vi,name:"switch",isTemplateController:!0,bindables:["value"]};let zZ=0;const E2=["value",{name:"fallThrough",mode:sy,set(n){switch(n){case"true":return!0;case"false":return!1;default:return!!n}}}];class rE{constructor(){this.id=++zZ,this.fallThrough=!1,this.view=void 0,this._factory=ue(zs),this._locator=ue(bf),this._location=ue(as),this._logger=ue($h).scopeTo(`${this.constructor.name}-#${this.id}`)}link(e,t,i,s){const r=e.parent,o=r==null?void 0:r.viewModel;if(o instanceof sE)this.$switch=o,this.linkToSwitch(o);else throw ye(815)}detaching(e,t){return this.deactivate(e)}isMatch(e){this._logger.debug("isMatch()");const t=this.value;return Kn(t)?(this._observer===void 0&&(this._observer=this._observeCollection(t)),t.includes(e)):t===e}valueChanged(e,t){var i;Kn(e)?((i=this._observer)==null||i.unsubscribe(this),this._observer=this._observeCollection(e)):this._observer!==void 0&&this._observer.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(e??i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(e??t,this.$controller)}dispose(){var e,t;(e=this._observer)==null||e.unsubscribe(this),(t=this.view)==null||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}_observeCollection(e){const t=this._locator.getArrayObserver(e);return t.subscribe(this),t}accept(e){var t;return this.$controller.accept(e)===!0?!0:(t=this.view)==null?void 0:t.accept(e)}}Ox({name:"case",bindables:E2,isTemplateController:!0},rE);class T2 extends rE{linkToSwitch(e){if(e.defaultCase!==void 0)throw ye(816);e.defaultCase=this}}Ox({name:"default-case",bindables:E2,isTemplateController:!0},T2);var M2,A2,P2;class oE{constructor(){this.preSettledTask=null,this.postSettledTask=null,this._factory=ue(zs),this._location=ue(as),this._platform=ue(br),this.logger=ue($h).scopeTo("promise.resolve")}link(e,t,i,s){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,s=this.$controller;return xt(i.activate(e,s,this.viewScope=si.fromParent(s.scope,{})),()=>this.swap(e))}valueChanged(e,t){this.$controller.isActive&&this.swap(null)}swap(e){var h,u;const t=this.value;if(!wi(t)){this.logger.warn(`The value '${Uh(t)}' is not a promise. No change will be done.`);return}const i=this._platform.domQueue,s=this.fulfilled,r=this.rejected,o=this.pending,a=this.viewScope;let l;const c=()=>{yi(l=(this.preSettledTask=i.queueTask(()=>yi(s==null?void 0:s.deactivate(e),r==null?void 0:r.deactivate(e),o==null?void 0:o.activate(e,a)))).result.catch(d=>{if(!(d instanceof vx))throw d}),t.then(d=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>yi(o==null?void 0:o.deactivate(e),r==null?void 0:r.deactivate(e),s==null?void 0:s.activate(e,a,d)))).result};this.preSettledTask.status===xx?l.then(f):(this.preSettledTask.cancel(),f())},d=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>yi(o==null?void 0:o.deactivate(e),s==null?void 0:s.deactivate(e),r==null?void 0:r.activate(e,a,d)))).result};this.preSettledTask.status===xx?l.then(f):(this.preSettledTask.cancel(),f())}))};((h=this.postSettledTask)==null?void 0:h.status)===xx?this.postSettlePromise.then(c):((u=this.postSettledTask)==null||u.cancel(),c())}detaching(e,t){var i,s;return(i=this.preSettledTask)==null||i.cancel(),(s=this.postSettledTask)==null||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}oE.$au={type:Vi,name:"promise",isTemplateController:!0,bindables:["value"]};class I2{constructor(){this.view=void 0,this._factory=ue(zs),this._location=ue(as)}link(e,t,i,s){aE(e).pending=this}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}I2.$au={type:Vi,name:"pending",isTemplateController:!0,bindables:{value:{mode:Vn}}};class O2{constructor(){this.view=void 0,this._factory=ue(zs),this._location=ue(as)}link(e,t,i,s){aE(e).fulfilled=this}activate(e,t,i){this.value=i;let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}O2.$au={type:Vi,name:"then",isTemplateController:!0,bindables:{value:{mode:cl}}};class k2{constructor(){this.view=void 0,this._factory=ue(zs),this._location=ue(as)}link(e,t,i,s){aE(e).rejected=this}activate(e,t,i){this.value=i;let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}k2.$au={type:Vi,name:"catch",isTemplateController:!0,bindables:{value:{mode:cl}}};function aE(n){const e=n.parent,t=e==null?void 0:e.viewModel;if(t instanceof oE)return t;throw ye(813)}class lE{"promise.resolve"(e,t){return new Vs(e,t,"promise","bind")}}M2=Symbol.metadata,lE[M2]={[zo]:wc.create([{pattern:"promise.resolve",symbols:""}],lE)};class cE{then(e,t){return new Vs(e,t,"then","from-view")}}A2=Symbol.metadata,cE[A2]={[zo]:wc.create([{pattern:"then",symbols:""}],cE)};class hE{catch(e,t){return new Vs(e,t,"catch","from-view")}}P2=Symbol.metadata,hE[P2]={[zo]:wc.create([{pattern:"catch",symbols:""}],hE)};class H2{constructor(){this._needsApply=!1,this._element=ue(tm),this._platform=ue(br)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this._apply():this._needsApply=!0}attached(){this._needsApply&&(this._needsApply=!1,this._apply()),this._element.addEventListener("focus",this),this._element.addEventListener("blur",this)}detaching(){const e=this._element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){e.type==="focus"?this.value=!0:this._isElFocused||(this.value=!1)}_apply(){const e=this._element,t=this._isElFocused,i=this.value;i&&!t?e.focus():!i&&t&&e.blur()}get _isElFocused(){return this._element===this._platform.document.activeElement}}H2.$au={type:Vi,name:"focus",bindables:{value:{mode:i$}}};class D2{constructor(){this.position="beforeend",this.strict=!1;const e=ue(zs),t=ue(as),i=ue(br);this._platform=i,this._resolvedTarget=i.document.createElement("div"),(this.view=e.create()).setLocation(this._targetLocation=RQ(i)),CZ(this.view.nodes,t)}attaching(e){this.callbackContext==null&&(this.callbackContext=this.$controller.scope.bindingContext);const t=this._resolvedTarget=this._getTarget();return this._moveLocation(t,this.position),this._activating(e,t)}detaching(e){return this._deactivating(e,this._resolvedTarget)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this._getTarget();if(this._resolvedTarget===t)return;this._resolvedTarget=t;const i=xt(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));wi(i)&&i.catch(Rx)}positionChanged(){const{$controller:e,_resolvedTarget:t}=this;if(!e.isActive)return;const i=xt(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));wi(i)&&i.catch(Rx)}_activating(e,t){const{activating:i,callbackContext:s,view:r}=this;return xt(i==null?void 0:i.call(s,t,r),()=>this._activate(e,t))}_activate(e,t){const{$controller:i,view:s}=this;if(e===null)s.nodes.insertBefore(this._targetLocation);else return xt(s.activate(e??s,i,i.scope),()=>this._activated(t));return this._activated(t)}_activated(e){const{activated:t,callbackContext:i,view:s}=this;return t==null?void 0:t.call(i,e,s)}_deactivating(e,t){const{deactivating:i,callbackContext:s,view:r}=this;return xt(i==null?void 0:i.call(s,t,r),()=>this._deactivate(e,t))}_deactivate(e,t){const{$controller:i,view:s}=this;if(e===null)s.nodes.remove();else return xt(s.deactivate(e,i),()=>this._deactivated(t));return this._deactivated(t)}_deactivated(e){const{deactivated:t,callbackContext:i,view:s}=this;return xt(t==null?void 0:t.call(i,e,s),()=>this._removeLocation())}_getTarget(){const e=this._platform,t=e.document;let i=this.target,s=this.renderContext;if(i===""){if(this.strict)throw ye(811);return t.body}if(ft(i)){let r=t;ft(s)&&(s=t.querySelector(s)),s instanceof e.Node&&(r=s),i=r.querySelector(i)}if(i instanceof e.Node)return i;if(i==null){if(this.strict)throw ye(812);return t.body}return i}_removeLocation(){this._targetLocation.remove(),this._targetLocation.$start.remove()}_moveLocation(e,t){const i=this._targetLocation,s=i.$start,r=e.parentNode,o=[s,i];switch(t){case"beforeend":dy(e,null,o);break;case"afterbegin":dy(e,e.firstChild,o);break;case"beforebegin":dy(r,e,o);break;case"afterend":dy(r,e.nextSibling,o);break;default:throw ye(779,t)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}D2.$au={type:Vi,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};let UZ;class Ay{constructor(){var u,d,f,g;this._parentScope=null,this._outerScope=null,this._attached=!1,this.expose=null,this.slotchange=null,this._subs=new Set,this._observer=null;const e=ue(ru),t=ue(as),i=ue(uf),s=ue(Tc),r=this.name=i.data.name,o=(u=i.projections)==null?void 0:u[T$],a=(f=(d=e.instruction)==null?void 0:d.projections)==null?void 0:f[r],l=e.controller.container;let c,h;a==null?(h=l.createChild({inheritParentResources:!0}),c=s.getViewFactory(o??UZ??(UZ=ls.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),h),this._hasProjection=!1):(h=l.createChild(),h.useResources(e.parent.controller.container),ri(h,ru,new $i(void 0,e.parent)),c=s.getViewFactory(a,h),this._hasProjection=!0,this._slotwatchers=((g=l.getAll(TQ,!1))==null?void 0:g.filter(p=>p.slotName==="*"||p.slotName===r))??lt),this._hasSlotWatcher=(this._slotwatchers??(this._slotwatchers=lt)).length>0,this._hdrContext=e,this.view=c.create().setLocation(this._location=t)}get nodes(){const e=[],t=this._location;let i=t.$start.nextSibling;for(;i!=null&&i!==t;)i.nodeType!==8&&e.push(i),i=i.nextSibling;return e}subscribe(e){this._subs.add(e)}unsubscribe(e){this._subs.delete(e)}binding(e,t){var r;for(this._parentScope=t.scope;t.vmKind==="synthetic"&&((r=t.parent)==null?void 0:r.viewModel)instanceof Ay;)t=t.parent.parent;const i=t.scope.bindingContext;let s;this._hasProjection&&(s=this._hdrContext.controller.scope.parent,(this._outerScope=si.fromParent(s,s.bindingContext)).overrideContext.$host=this.expose??i)}attaching(e,t){return xt(this.view.activate(e,this.$controller,this._hasProjection?this._outerScope:this._parentScope),()=>{this._hasSlotWatcher&&(this._slotwatchers.forEach(i=>i.watch(this)),this._observe(),this._notifySlotChange(),this._attached=!0)})}detaching(e,t){return this._attached=!1,this._unobserve(),this._slotwatchers.forEach(i=>i.unwatch(this)),this.view.deactivate(e,this.$controller)}exposeChanged(e){this._hasProjection&&this._outerScope!=null&&(this._outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}_observe(){if(this._observer!=null)return;const e=this._location,t=e.parentElement;t!=null&&(this._observer=E$(t,i=>{YZ(e,i)&&this._notifySlotChange()})).observe(t,{childList:!0})}_unobserve(){var e;(e=this._observer)==null||e.disconnect(),this._observer=null}_notifySlotChange(){var s;const e=this.nodes,t=new Set(this._subs);let i;this._attached&&((s=this.slotchange)==null||s.call(void 0,this.name,e));for(i of t)i.handleSlotChange(this,e)}}Ay.$au={type:au,name:"au-slot",template:null,containerless:!0,processContent(n,e,t){t.name=n.getAttribute("name")??T$;let i=n.firstChild,s=null;for(;i!==null;)s=i.nextSibling,xQ(i)&&i.hasAttribute(EQ)&&(console.warn("[DEV:aurelia] detected [au-slot] attribute on a child node",`of an <au-slot> element: "<${i.nodeName} au-slot>".`,"This element will be ignored and removed"),n.removeChild(i)),i=s},bindables:["expose","slotchange"]};const Py=(n,e)=>n.compareDocumentPosition(e),YZ=(n,e)=>{for(const{addedNodes:t,removedNodes:i,nextSibling:s}of e){let r=0,o=t.length,a;for(;r<o;++r)if(a=t[r],Py(n.$start,a)===4&&Py(n,a)===2)return!0;if(i.length>0&&s!=null&&Py(n.$start,s)===4&&Py(n,s)===2)return!0}};class N2{constructor(){this.scopeBehavior="auto",this._composition=void 0,this.tag=null,this._container=ue(tf),this.parent=ue(by),this._host=ue(tm),this._location=ue(as),this._platform=ue(br),this._rendering=ue(Tc),this._instruction=ue(uf),this._contextFactory=ue(TG(KZ)),this._compiler=ue(jv),this._hydrationContext=ue(ru),this._exprParser=ue(af),this._observerLocator=ue(bf)}get composing(){return this._composing}get composition(){return this._composition}attaching(e,t){return this._composing=xt(this.queue(new L2(this.template,this.component,this.model,void 0),e),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)})}detaching(e){const t=this._composition,i=this._composing;return this._contextFactory.invalidate(),this._composition=this._composing=void 0,xt(i,()=>t==null?void 0:t.deactivate(e))}propertyChanged(e){var t;if(!(e==="composing"||e==="composition")){if(e==="model"&&this._composition!=null){this._composition.update(this.model);return}if(e==="tag"&&((t=this._composition)==null?void 0:t.controller.vmKind)===wr){console.warn("[DEV:aurelia] Changing tag name of a custom element composition is ignored.");return}this._composing=xt(this._composing,()=>xt(this.queue(new L2(this.template,this.component,this.model,e),void 0),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)}))}}queue(e,t){const i=this._contextFactory,s=this._composition;return xt(i.create(e),r=>i._isCurrent(r)?xt(this.compose(r),o=>i._isCurrent(r)?xt(o.activate(t),()=>i._isCurrent(r)?(this._composition=o,xt(s==null?void 0:s.deactivate(t),()=>r)):xt(o.controller.deactivate(o.controller,this.$controller),()=>(o.controller.dispose(),r))):(o.controller.dispose(),r)):r)}compose(e){const{_template:t,_component:i,_model:s}=e.change,{_container:r,$controller:o,_location:a,_instruction:l}=this,c=this._getDefinition(this._hydrationContext.controller.container,i),h=r.createChild(),u=this._platform.document.createElement(c==null?this.tag??"div":c.name);a.parentNode.insertBefore(u,a);let d;c==null?d=this.tag==null?nm(u):null:d=c.containerless?nm(u):null;const f=()=>{var m;if(u.remove(),d!=null){let w=d.$start.nextSibling,y=null;for(;w!==null&&w!==d;)y=w.nextSibling,w.remove(),w=y;(m=d.$start)==null||m.remove(),d.remove()}},g=this._createComponentInstance(h,typeof i=="string"?c.Type:i,u,d),p=()=>{const m=l.captures??lt;if(c!==null){const w=c.capture,[y,C]=m.reduce((_,x)=>{const M=!(x.target in c.bindables)&&(w===!0||Ht(w)&&!!w(x.target));return _[M?0:1].push(x),_},[[],[]]),R=Us.$el(h,g,u,{projections:l.projections,captures:y},c,d);return this._createSpreadBindings(u,c,C).forEach(_=>R.addBinding(_)),new F2(R,_=>R.activate(_??R,o,o.scope.parent),_=>xt(R.deactivate(_??R,o),f),_=>{var x;return(x=g.activate)==null?void 0:x.call(g,_)},e)}else{const w=ls.create({name:Ks.generateName(),template:t}),y=this._rendering.getViewFactory(w,h),C=Us.$view(y,o),R=this.scopeBehavior==="auto"?si.fromParent(this.parent.scope,g):si.create(g);return C.setHost(u),d==null?this._createSpreadBindings(u,w,m).forEach(_=>C.addBinding(_)):C.setLocation(d),new F2(C,_=>C.activate(_??C,o,R),_=>xt(C.deactivate(_??C,o),f),_=>{var x;return(x=g.activate)==null?void 0:x.call(g,_)},e)}};return"activate"in g?xt(g.activate(s),()=>p()):p()}_createComponentInstance(e,t,i,s){if(t==null)return new GZ;if(typeof t=="object")return t;const r=this._platform;Kx(e,i,r),ri(e,as,new $i("IRenderLocation",s));const o=e.invoke(t);return ri(e,t,new $i("au-compose.component",o)),o}_getDefinition(e,t){if(typeof t=="string"){const s=Ks.find(e,t);if(s==null)throw ye(806,t);return s}const i=Ht(t)?t:t==null?void 0:t.constructor;return Ks.isType(i,void 0)?Ks.getDefinition(i,null):null}_createSpreadBindings(e,t,i){const s=new Q$(this.$controller,{projections:null,captures:i},this._hydrationContext.parent);return fy.create(s,e,t,this._rendering,this._compiler,this._platform,this._exprParser,this._observerLocator)}}N2.$au={type:au,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:n=>{if(n==="scoped"||n==="auto")return n;throw ye(805,n)}},{name:"composing",mode:cl},{name:"composition",mode:cl},"tag"]};class GZ{}class KZ{constructor(){this.id=0}_isCurrent(e){return e.id===this.id}create(e){return xt(e.load(),t=>new qZ(++this.id,t))}invalidate(){this.id++}}class L2{constructor(e,t,i,s){this._template=e,this._component=t,this._model=i,this._src=s}load(){return wi(this._template)||wi(this._component)?Promise.all([this._template,this._component]).then(([e,t])=>new $2(e,t,this._model,this._src)):new $2(this._template,this._component,this._model,this._src)}}class $2{constructor(e,t,i,s){this._template=e,this._component=t,this._model=i,this._src=s}}class qZ{constructor(e,t){this.id=e,this.change=t}}class F2{constructor(e,t,i,s,r){this.controller=e,this.start=t,this.stop=i,this.update=s,this.context=r,this.state=0}activate(e){if(this.state!==0)throw ye(807,this);return this.state=1,this.start(e)}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw ye(808);default:this.state=-1}}}const XZ=Tn("ISanitizer",n=>n.singleton(class{sanitize(){throw ye(99,"sanitize")}}));class B2{constructor(){this._sanitizer=ue(XZ)}toView(e){return e==null?null:this._sanitizer.sanitize(e)}}B2.$au={type:Sf,name:"sanitize"};class V2{constructor(){this.el=ue(tm),this.p=ue(br),this._isActive=!1,this._task=null,this.$val="",this.$prio="",this.update=()=>{this._task=null,!!this.value!==this._isToggled&&(this._isToggled===this._base?(this._isToggled=!this._base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this._isToggled=this._base,this.el.style.setProperty("display",this.$val,this.$prio),this.el.getAttribute("style")===""&&this.el.removeAttribute("style")))};const e=ue(uf);this._isToggled=this._base=e.alias!=="hide"}binding(){this._isActive=!0,this.update()}detaching(){var e;this._isActive=!1,(e=this._task)==null||e.cancel(),this._task=null}valueChanged(){this._isActive&&this._task===null&&(this._task=this.p.domQueue.queueTask(this.update))}}V2.$au={type:Vi,name:"show",bindables:["value"],aliases:["hide"]};const QZ=[AZ,DX,tE],ZZ=[V1,B1,W1,_Q],JZ=[wL,gL,mL,pL,bL,vL,xL,yL,CL,RL,_L,SL,EL],eJ=[w$,g$,p$,m$,v$,y$,b$,B2,Ry,m2,b2,x2,sE,rE,T2,oE,I2,O2,k2,lE,cE,hE,f2,g2,p2,N2,D2,H2,V2,Ay],tJ=[NQ,LQ,HQ,DQ,AQ,PQ,IQ,OQ,kQ,BQ,GQ,VQ,WQ,jQ,UQ,$Q,KQ,qQ],nJ=W2(Yo);function W2(n){return{optionsProvider:n,register(e){const t={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return n(t),e.register(sQ(VL,t.coercingOptions),pN,...QZ,...eJ,...ZZ,...JZ,...tJ)},customize(e){return W2(e??n)}}}class iJ{constructor(){this.ctn=ue(tf),this.p=ue(br),this.r=ue(Tc)}define(e,t,i){if(!e.includes("-"))throw dE('Invalid web-components custom element name. It must include a "-"');let s;if(t==null)throw dE("Invalid custom element definition");switch(typeof t){case"function":s=Ks.isType(t)?Ks.getDefinition(t):ls.create(Ks.generateName(),t);break;default:s=ls.getOrCreate(t);break}if(s.containerless)throw dE("Containerless custom element is not supported. Consider using buitl-in extends instead");const r=i!=null&&i.extends?this.p.document.createElement(i.extends).constructor:this.p.HTMLElement,o=this.ctn,a=this.r,l=s.bindables,c=this.p;class h extends r{auInit(){if(this.auInited)return;this.auInited=!0;const d=o.createChild();uE(d,c.HTMLElement,uE(d,c.Element,uE(d,tm,new $i("ElementProvider",this))));const f=a.compile(s,d),g=d.invoke(f.Type),p=this.auCtrl=Us.$el(d,g,this,null,f);ji(this,f.key,p)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null)}adoptedCallback(){this.auInit()}attributeChangedCallback(d,f,g){this.auInit(),this.auCtrl.viewModel[d]=g}}h.observedAttributes=Object.keys(l);for(const u in l)Object.defineProperty(h.prototype,u,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[u]},set(d){this.auInited||this.auInit(),this.auCtrl.viewModel[u]=d}});return this.p.customElements.define(e,h,i),h}}const uE=(n,e,t)=>n.registerResolver(e,t),dE=n=>new Error(n),j2="chartjs",fE=`<div>
    <canvas ref="mychart"></canvas>
</div>
`,z2=[],U2={};let gE;function sJ(n){gE||(gE=Ks.define({name:j2,template:fE,dependencies:z2,bindables:U2})),n.register(gE)}const rJ=Object.freeze(Object.defineProperty({__proto__:null,bindables:U2,default:fE,dependencies:z2,name:j2,register:sJ,template:fE},Symbol.toStringTag,{value:"Module"}));/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function sm(n){return n+.5|0}const Pc=(n,e,t)=>Math.max(Math.min(n,t),e);function rm(n){return Pc(sm(n*2.55),0,255)}function Ic(n){return Pc(sm(n*255),0,255)}function ml(n){return Pc(sm(n/2.55)/100,0,1)}function Y2(n){return Pc(sm(n*100),0,100)}const Cr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pE=[..."0123456789ABCDEF"],oJ=n=>pE[n&15],aJ=n=>pE[(n&240)>>4]+pE[n&15],Iy=n=>(n&240)>>4===(n&15),lJ=n=>Iy(n.r)&&Iy(n.g)&&Iy(n.b)&&Iy(n.a);function cJ(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Cr[n[1]]*17,g:255&Cr[n[2]]*17,b:255&Cr[n[3]]*17,a:e===5?Cr[n[4]]*17:255}:(e===7||e===9)&&(t={r:Cr[n[1]]<<4|Cr[n[2]],g:Cr[n[3]]<<4|Cr[n[4]],b:Cr[n[5]]<<4|Cr[n[6]],a:e===9?Cr[n[7]]<<4|Cr[n[8]]:255})),t}const hJ=(n,e)=>n<255?e(n):"";function uJ(n){var e=lJ(n)?oJ:aJ;return n?"#"+e(n.r)+e(n.g)+e(n.b)+hJ(n.a,e):void 0}const dJ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function G2(n,e,t){const i=e*Math.min(t,1-t),s=(r,o=(r+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function fJ(n,e,t){const i=(s,r=(s+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function gJ(n,e,t){const i=G2(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function pJ(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function mE(n){const t=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=pJ(t,i,s,h,r),l=l*60+.5),[l|0,c||0,a]}function bE(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Ic)}function wE(n,e,t){return bE(G2,n,e,t)}function mJ(n,e,t){return bE(gJ,n,e,t)}function bJ(n,e,t){return bE(fJ,n,e,t)}function K2(n){return(n%360+360)%360}function wJ(n){const e=dJ.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?rm(+e[5]):Ic(+e[5]));const s=K2(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=mJ(s,r,o):e[1]==="hsv"?i=bJ(s,r,o):i=wE(s,r,o),{r:i[0],g:i[1],b:i[2],a:t}}function vJ(n,e){var t=mE(n);t[0]=K2(t[0]+e),t=wE(t),n.r=t[0],n.g=t[1],n.b=t[2]}function yJ(n){if(!n)return;const e=mE(n),t=e[0],i=Y2(e[1]),s=Y2(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${ml(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const q2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},X2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function CJ(){const n={},e=Object.keys(X2),t=Object.keys(q2);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<t.length;s++)r=t[s],a=a.replace(r,q2[r]);r=parseInt(X2[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let Oy;function SJ(n){Oy||(Oy=CJ(),Oy.transparent=[0,0,0,0]);const e=Oy[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const _J=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function RJ(n){const e=_J.exec(n);let t=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?rm(o):Pc(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?rm(i):Pc(i,0,255)),s=255&(e[4]?rm(s):Pc(s,0,255)),r=255&(e[6]?rm(r):Pc(r,0,255)),{r:i,g:s,b:r,a:t}}}function xJ(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ml(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const vE=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Pf=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function EJ(n,e,t){const i=Pf(ml(n.r)),s=Pf(ml(n.g)),r=Pf(ml(n.b));return{r:Ic(vE(i+t*(Pf(ml(e.r))-i))),g:Ic(vE(s+t*(Pf(ml(e.g))-s))),b:Ic(vE(r+t*(Pf(ml(e.b))-r))),a:n.a+t*(e.a-n.a)}}function ky(n,e,t){if(n){let i=mE(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=wE(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Q2(n,e){return n&&Object.assign(e||{},n)}function Z2(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ic(n[3]))):(e=Q2(n,{r:0,g:0,b:0,a:1}),e.a=Ic(e.a)),e}function TJ(n){return n.charAt(0)==="r"?RJ(n):wJ(n)}let J2=class HD{constructor(e){if(e instanceof HD)return e;const t=typeof e;let i;t==="object"?i=Z2(e):t==="string"&&(i=cJ(e)||SJ(e)||TJ(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Q2(this._rgb);return e&&(e.a=ml(e.a)),e}set rgb(e){this._rgb=Z2(e)}rgbString(){return this._valid?xJ(this._rgb):void 0}hexString(){return this._valid?uJ(this._rgb):void 0}hslString(){return this._valid?yJ(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=EJ(this._rgb,e._rgb,t)),this}clone(){return new HD(this.rgb)}alpha(e){return this._rgb.a=Ic(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=sm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ky(this._rgb,2,e),this}darken(e){return ky(this._rgb,2,-e),this}saturate(e){return ky(this._rgb,1,e),this}desaturate(e){return ky(this._rgb,1,-e),this}rotate(e){return vJ(this._rgb,e),this}};/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function bl(){}const MJ=(()=>{let n=0;return()=>n++})();function At(n){return n===null||typeof n>"u"}function yn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function bt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Wn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function qs(n,e){return Wn(n)?n:e}function Ke(n,e){return typeof n>"u"?e:n}const AJ=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,eF=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function cn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function zt(n,e,t,i){let s,r,o;if(yn(n))for(r=n.length,s=0;s<r;s++)e.call(t,n[s],s);else if(bt(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)e.call(t,n[o[s]],o[s])}function Hy(n,e){let t,i,s,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Dy(n){if(yn(n))return n.map(Dy);if(bt(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=Dy(n[t[s]]);return e}return n}function tF(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function PJ(n,e,t,i){if(!tF(n))return;const s=e[n],r=t[n];bt(s)&&bt(r)?Xs(s,r,i):e[n]=Dy(r)}function Xs(n,e,t){const i=yn(e)?e:[e],s=i.length;if(!bt(n))return n;t=t||{};const r=t.merger||PJ;let o;for(let a=0;a<s;++a){if(o=i[a],!bt(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],n,o,t)}return n}function om(n,e){return Xs(n,e,{merger:IJ})}function IJ(n,e,t){if(!tF(n))return;const i=e[n],s=t[n];bt(i)&&bt(s)?om(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Dy(s))}const nF={"":n=>n,x:n=>n.x,y:n=>n.y};function OJ(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function kJ(n){const e=OJ(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Oc(n,e){return(nF[e]||(nF[e]=kJ(e)))(n)}function yE(n){return n.charAt(0).toUpperCase()+n.slice(1)}const am=n=>typeof n<"u",kc=n=>typeof n=="function",iF=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function HJ(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const un=Math.PI,dn=2*un,DJ=dn+un,Ny=Number.POSITIVE_INFINITY,NJ=un/180,qn=un/2,hu=un/4,sF=un*2/3,Hc=Math.log10,ia=Math.sign;function lm(n,e,t){return Math.abs(n-e)<t}function rF(n){const e=Math.round(n);n=lm(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Hc(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function LJ(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}function If(n){return!isNaN(parseFloat(n))&&isFinite(n)}function $J(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function oF(n,e,t){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function lo(n){return n*(un/180)}function CE(n){return n*(180/un)}function aF(n){if(!Wn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function lF(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*un&&(r+=dn),{angle:r,distance:s}}function SE(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function FJ(n,e){return(n-e+DJ)%dn-un}function Qs(n){return(n%dn+dn)%dn}function cm(n,e,t,i){const s=Qs(n),r=Qs(e),o=Qs(t),a=Qs(r-s),l=Qs(o-s),c=Qs(s-r),h=Qs(s-o);return s===r||s===o||i&&r===o||a>l&&c<h}function _i(n,e,t){return Math.max(e,Math.min(t,n))}function BJ(n){return _i(n,-32768,32767)}function wl(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function _E(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,t(r)?s=r:i=r;return{lo:s,hi:i}}const vl=(n,e,t,i)=>_E(n,t,i?s=>{const r=n[s][e];return r<t||r===t&&n[s+1][e]===t}:s=>n[s][e]<t),VJ=(n,e,t)=>_E(n,t,i=>n[i][e]>=t);function WJ(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const cF=["push","pop","shift","splice","unshift"];function jJ(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),cF.forEach(t=>{const i="_onData"+yE(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function hF(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(cF.forEach(r=>{delete n[r]}),delete n._chartjs)}function uF(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const dF=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function fF(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,dF.call(window,()=>{i=!1,n.apply(e,t)}))}}function zJ(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const RE=n=>n==="start"?"left":n==="end"?"right":"center",zi=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,UJ=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function gF(n,e,t){const i=e.length;let s=0,r=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:h,minDefined:u,maxDefined:d}=o.getUserBounds();u&&(s=_i(Math.min(vl(a,l,c).lo,t?i:vl(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?r=_i(Math.max(vl(a,o.axis,h,!0).hi+1,t?0:vl(e,l,o.getPixelForValue(h),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function pF(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),r}const Ly=n=>n===0||n===1,mF=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*dn/t)),bF=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*dn/t)+1,hm={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*qn)+1,easeOutSine:n=>Math.sin(n*qn),easeInOutSine:n=>-.5*(Math.cos(un*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Ly(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Ly(n)?n:mF(n,.075,.3),easeOutElastic:n=>Ly(n)?n:bF(n,.075,.3),easeInOutElastic(n){return Ly(n)?n:n<.5?.5*mF(n*2,.1125,.45):.5+.5*bF(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-hm.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?hm.easeInBounce(n*2)*.5:hm.easeOutBounce(n*2-1)*.5+.5};function xE(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function wF(n){return xE(n)?n:new J2(n)}function EE(n){return xE(n)?n:new J2(n).saturate(.5).darken(.1).hexString()}const YJ=["x","y","borderWidth","radius","tension"],GJ=["color","borderColor","backgroundColor"];function KJ(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:GJ},numbers:{type:"number",properties:YJ}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function qJ(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const vF=new Map;function XJ(n,e){e=e||{};const t=n+JSON.stringify(e);let i=vF.get(t);return i||(i=new Intl.NumberFormat(n,e),vF.set(t,i)),i}function um(n,e,t){return XJ(e,t).format(n)}const yF={values(n){return yn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=QJ(n,t)}const o=Hc(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),um(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(Hc(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?yF.numeric.call(this,n,e,t):""}};function QJ(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var $y={formatters:yF};function ZJ(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$y.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const uu=Object.create(null),TE=Object.create(null);function dm(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const r=t[i];n=n[r]||(n[r]=Object.create(null))}return n}function ME(n,e,t){return typeof e=="string"?Xs(dm(n,e),t):Xs(dm(n,""),e)}class JJ{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>EE(s.backgroundColor),this.hoverBorderColor=(i,s)=>EE(s.borderColor),this.hoverColor=(i,s)=>EE(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ME(this,e,t)}get(e){return dm(this,e)}describe(e,t){return ME(TE,e,t)}override(e,t){return ME(uu,e,t)}route(e,t,i,s){const r=dm(this,e),o=dm(this,i),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[s];return bt(l)?Object.assign({},c,l):Ke(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Cn=new JJ({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[KJ,qJ,ZJ]);function eee(n){return!n||At(n.size)||At(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Fy(n,e,t,i,s){let r=e[s];return r||(r=e[s]=n.measureText(s).width,t.push(s)),r>i&&(i=r),i}function tee(n,e,t,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,h,u,d;for(l=0;l<a;l++)if(u=t[l],u!=null&&!yn(u))o=Fy(n,s,r,o,u);else if(yn(u))for(c=0,h=u.length;c<h;c++)d=u[c],d!=null&&!yn(d)&&(o=Fy(n,s,r,o,d));n.restore();const f=r.length/2;if(f>t.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function du(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function CF(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function By(n,e,t,i){SF(n,e,t,i,null)}function SF(n,e,t,i,s){let r,o,a,l,c,h,u,d;const f=e.pointStyle,g=e.rotation,p=e.radius;let m=(g||0)*NJ;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(p)||p<=0)){switch(n.beginPath(),f){default:s?n.ellipse(t,i,s/2,p,0,0,dn):n.arc(t,i,p,0,dn),n.closePath();break;case"triangle":h=s?s/2:p,n.moveTo(t+Math.sin(m)*h,i-Math.cos(m)*p),m+=sF,n.lineTo(t+Math.sin(m)*h,i-Math.cos(m)*p),m+=sF,n.lineTo(t+Math.sin(m)*h,i-Math.cos(m)*p),n.closePath();break;case"rectRounded":c=p*.516,l=p-c,o=Math.cos(m+hu)*l,u=Math.cos(m+hu)*(s?s/2-c:l),a=Math.sin(m+hu)*l,d=Math.sin(m+hu)*(s?s/2-c:l),n.arc(t-u,i-a,c,m-un,m-qn),n.arc(t+d,i-o,c,m-qn,m),n.arc(t+u,i+a,c,m,m+qn),n.arc(t-d,i+o,c,m+qn,m+un),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,h=s?s/2:l,n.rect(t-h,i-l,2*h,2*l);break}m+=hu;case"rectRot":u=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),n.moveTo(t-u,i-a),n.lineTo(t+d,i-o),n.lineTo(t+u,i+a),n.lineTo(t-d,i+o),n.closePath();break;case"crossRot":m+=hu;case"cross":u=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),n.moveTo(t-u,i-a),n.lineTo(t+u,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"star":u=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),n.moveTo(t-u,i-a),n.lineTo(t+u,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o),m+=hu,u=Math.cos(m)*(s?s/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(s?s/2:p),n.moveTo(t-u,i-a),n.lineTo(t+u,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"line":o=s?s/2:Math.cos(m)*p,a=Math.sin(m)*p,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*(s?s/2:p),i+Math.sin(m)*p);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function yl(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function fu(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function gu(n){n.restore()}function nee(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function iee(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function see(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),At(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function ree(n,e,t,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,c=t+r.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function oee(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function pu(n,e,t,i,s,r={}){const o=yn(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,see(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&oee(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),At(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,t,i,r.maxWidth)),n.fillText(c,t,i,r.maxWidth),ree(n,t,i,c,r),i+=Number(s.lineHeight);n.restore()}function fm(n,e){const{x:t,y:i,w:s,h:r,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*un,un,!0),n.lineTo(t,i+r-o.bottomLeft),n.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,un,qn,!0),n.lineTo(t+s-o.bottomRight,i+r),n.arc(t+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,qn,0,!0),n.lineTo(t+s,i+o.topRight),n.arc(t+s-o.topRight,i+o.topRight,o.topRight,0,-qn,!0),n.lineTo(t+o.topLeft,i)}const aee=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,lee=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function cee(n,e){const t=(""+n).match(aee);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const hee=n=>+n||0;function AE(n,e){const t={},i=bt(e),s=i?Object.keys(e):e,r=bt(n)?i?o=>Ke(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of s)t[o]=hee(r(o));return t}function _F(n){return AE(n,{top:"y",right:"x",bottom:"y",left:"x"})}function mu(n){return AE(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ui(n){const e=_F(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function li(n,e){n=n||{},e=e||Cn.font;let t=Ke(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Ke(n.style,e.style);i&&!(""+i).match(lee)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Ke(n.family,e.family),lineHeight:cee(Ke(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Ke(n.weight,e.weight),string:""};return s.string=eee(s),s}function gm(n,e,t,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function uee(n,e,t){const{min:i,max:s}=n,r=eF(e,(s-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Dc(n,e){return Object.assign(Object.create(n),e)}function PE(n,e=[""],t,i,s=()=>n[0]){const r=t||n;typeof i>"u"&&(i=MF("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>PE([a,...n],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return xF(a,l,()=>vee(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return AF(a).includes(l)},ownKeys(a){return AF(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function Of(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:RF(n,i),setContext:r=>Of(n,r,t,i),override:r=>Of(n.override(r),e,t,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return xF(r,o,()=>fee(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function RF(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:kc(t)?t:()=>t,isIndexable:kc(i)?i:()=>i}}const dee=(n,e)=>n?n+yE(e):e,IE=(n,e)=>bt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function xF(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function fee(n,e,t){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[e];return kc(a)&&o.isScriptable(e)&&(a=gee(e,a,n,t)),yn(a)&&a.length&&(a=pee(e,a,n,o.isIndexable)),IE(e,a)&&(a=Of(a,s,r&&r[e],o)),a}function gee(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(r,o||i);return a.delete(n),IE(n,l)&&(l=OE(s._scopes,s,n,l)),l}function pee(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=t;if(typeof r.index<"u"&&i(n))return e[r.index%e.length];if(bt(e[0])){const l=e,c=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const u=OE(c,s,n,h);e.push(Of(u,r,o&&o[n],a))}}return e}function EF(n,e,t){return kc(n)?n(e,t):n}const mee=(n,e)=>n===!0?e:typeof n=="string"?Oc(e,n):void 0;function bee(n,e,t,i,s){for(const r of e){const o=mee(t,r);if(o){n.add(o);const a=EF(o._fallback,t,s);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function OE(n,e,t,i){const s=e._rootScopes,r=EF(e._fallback,t,i),o=[...n,...s],a=new Set;a.add(i);let l=TF(a,o,t,r||t,i);return l===null||typeof r<"u"&&r!==t&&(l=TF(a,o,r,l,i),l===null)?!1:PE(Array.from(a),[""],s,r,()=>wee(e,t,i))}function TF(n,e,t,i,s){for(;t;)t=bee(n,e,t,i,s);return t}function wee(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return yn(s)&&bt(t)?t:s||{}}function vee(n,e,t,i){let s;for(const r of e)if(s=MF(dee(r,n),t),typeof s<"u")return IE(n,s)?OE(t,i,n,s):s}function MF(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function AF(n){let e=n._keys;return e||(e=n._keys=yee(n._scopes)),e}function yee(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function PF(n,e,t,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+t,h=e[c],o[a]={r:s.parse(Oc(h,r),c)};return o}const Cee=Number.EPSILON||1e-14,kf=(n,e)=>e<n.length&&!n[e].skip&&n[e],IF=n=>n==="x"?"y":"x";function See(n,e,t,i){const s=n.skip?e:n,r=e,o=t.skip?e:t,a=SE(r,s),l=SE(o,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=i*c,d=i*h;return{previous:{x:r.x-u*(o.x-s.x),y:r.y-u*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function _ee(n,e,t){const i=n.length;let s,r,o,a,l,c=kf(n,0);for(let h=0;h<i-1;++h)if(l=c,c=kf(n,h+1),!(!l||!c)){if(lm(e[h],0,Cee)){t[h]=t[h+1]=0;continue}s=t[h]/e[h],r=t[h+1]/e[h],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[h]=s*o*e[h],t[h+1]=r*o*e[h])}}function Ree(n,e,t="x"){const i=IF(t),s=n.length;let r,o,a,l=kf(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=kf(n,c+1),!a)continue;const h=a[t],u=a[i];o&&(r=(h-o[t])/3,a[`cp1${t}`]=h-r,a[`cp1${i}`]=u-r*e[c]),l&&(r=(l[t]-h)/3,a[`cp2${t}`]=h+r,a[`cp2${i}`]=u+r*e[c])}}function xee(n,e="x"){const t=IF(e),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=kf(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=kf(n,o+1),!!l){if(c){const h=c[e]-l[e];s[o]=h!==0?(c[t]-l[t])/h:0}r[o]=a?c?ia(s[o-1])!==ia(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}_ee(n,s,r),Ree(n,r,e)}function Vy(n,e,t){return Math.max(Math.min(n,t),e)}function Eee(n,e){let t,i,s,r,o,a=yl(n[0],e);for(t=0,i=n.length;t<i;++t)o=r,r=a,a=t<i-1&&yl(n[t+1],e),r&&(s=n[t],o&&(s.cp1x=Vy(s.cp1x,e.left,e.right),s.cp1y=Vy(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Vy(s.cp2x,e.left,e.right),s.cp2y=Vy(s.cp2y,e.top,e.bottom)))}function Tee(n,e,t,i,s){let r,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")xee(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=See(c,a,n[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&Eee(n,t)}function kE(){return typeof window<"u"&&typeof document<"u"}function HE(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Wy(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const jy=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Mee(n,e){return jy(n).getPropertyValue(e)}const Aee=["top","right","bottom","left"];function bu(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=Aee[s];i[r]=parseFloat(n[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Pee=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Iee(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(Pee(s,r,n.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function wu(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=jy(t),r=s.boxSizing==="border-box",o=bu(s,"padding"),a=bu(s,"border","width"),{x:l,y:c,box:h}=Iee(n,t),u=o.left+(h&&a.left),d=o.top+(h&&a.top);let{width:f,height:g}=e;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-u)/f*t.width/i),y:Math.round((c-d)/g*t.height/i)}}function Oee(n,e,t){let i,s;if(e===void 0||t===void 0){const r=n&&HE(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const o=r.getBoundingClientRect(),a=jy(r),l=bu(a,"border","width"),c=bu(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=Wy(a.maxWidth,r,"clientWidth"),s=Wy(a.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:i||Ny,maxHeight:s||Ny}}const zy=n=>Math.round(n*10)/10;function kee(n,e,t,i){const s=jy(n),r=bu(s,"margin"),o=Wy(s.maxWidth,n,"clientWidth")||Ny,a=Wy(s.maxHeight,n,"clientHeight")||Ny,l=Oee(n,e,t);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const d=bu(s,"border","width"),f=bu(s,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-r.width),h=Math.max(0,i?c/i:h-r.height),c=zy(Math.min(c,o,l.maxWidth)),h=zy(Math.min(h,a,l.maxHeight)),c&&!h&&(h=zy(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=zy(Math.floor(h*i))),{width:c,height:h}}function OF(n,e,t){const i=e||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Hee=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};kE()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function kF(n,e){const t=Mee(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function vu(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Dee(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function Nee(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=vu(n,s,t),a=vu(s,r,t),l=vu(r,e,t),c=vu(o,a,t),h=vu(a,l,t);return vu(c,h,t)}const Lee=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},$ee=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Hf(n,e,t){return n?Lee(e,t):$ee()}function HF(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function DF(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function NF(n){return n==="angle"?{between:cm,compare:FJ,normalize:Qs}:{between:wl,compare:(e,t)=>e-t,normalize:e=>e}}function LF({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function Fee(n,e,t){const{property:i,start:s,end:r}=t,{between:o,normalize:a}=NF(i),l=e.length;let{start:c,end:h,loop:u}=n,d,f;if(u){for(c+=l,h+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),s,r);++d)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:u,style:n.style}}function $F(n,e,t){if(!t)return[n];const{property:i,start:s,end:r}=t,o=e.length,{compare:a,between:l,normalize:c}=NF(i),{start:h,end:u,loop:d,style:f}=Fee(n,e,t),g=[];let p=!1,m=null,w,y,C;const R=()=>l(s,C,w)&&a(s,C)!==0,_=()=>a(r,w)===0||l(r,C,w),x=()=>p||R(),M=()=>!p||_();for(let I=h,A=h;I<=u;++I)y=e[I%o],!y.skip&&(w=c(y[i]),w!==C&&(p=l(w,s,r),m===null&&x()&&(m=a(w,s)===0?I:A),m!==null&&M()&&(g.push(LF({start:m,end:I,loop:d,count:o,style:f})),m=null),A=I,C=w));return m!==null&&g.push(LF({start:m,end:u,loop:d,count:o,style:f})),g}function FF(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const r=$F(i[s],n.points,e);r.length&&t.push(...r)}return t}function Bee(n,e,t,i){let s=0,r=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(r+=s);r>s&&n[r%e].skip;)r--;return r%=e,{start:s,end:r}}function Vee(n,e,t,i){const s=n.length,r=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function Wee(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=Bee(t,s,r,i);if(i===!0)return BF(n,[{start:o,end:a,loop:r}],t,e);const l=a<o?a+s:a,c=!!n._fullLoop&&o===0&&a===s-1;return BF(n,Vee(t,o,l,c),t,e)}function BF(n,e,t,i){return!i||!i.setContext||!t?e:jee(n,e,t,i)}function jee(n,e,t,i){const s=n._chart.getContext(),r=VF(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let h=r,u=e[0].start,d=u;function f(g,p,m,w){const y=a?-1:1;if(g!==p){for(g+=l;t[g%l].skip;)g-=y;for(;t[p%l].skip;)p+=y;g%l!==p%l&&(c.push({start:g%l,end:p%l,loop:m,style:w}),h=w,u=p%l)}}for(const g of e){u=a?u:g.start;let p=t[u%l],m;for(d=u+1;d<=g.end;d++){const w=t[d%l];m=VF(i.setContext(Dc(s,{type:"segment",p0:p,p1:w,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),zee(m,h)&&f(u,d-1,g.loop,h),p=w,h=m}u<d-1&&f(u,d-1,g.loop,h)}return c}function VF(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function zee(n,e){if(!e)return!1;const t=[],i=function(s,r){return xE(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Uee{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const r=t.listeners[s],o=t.duration;r.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=dF.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Cl=new Uee;const WF="transparent",Yee={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=wF(n||WF),s=i.valid&&wF(e||WF);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Gee{constructor(e,t,i,s){const r=t[i];s=gm([e.to,s,r,e.from]);const o=gm([e.from,r,s]);this._active=!0,this._fn=e.fn||Yee[e.type||typeof o],this._easing=hm[e.easing]||hm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=gm([e.to,t,s,e.from]),this._from=gm([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<i),!this._active){this._target[s]=a,this._notify(!0);return}if(t<0){this._target[s]=r;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class jF{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!bt(e))return;const t=Object.keys(Cn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!bt(r))return;const o={};for(const a of t)o[a]=r[a];(yn(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,s=qee(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&Kee(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,t));continue}const h=t[c];let u=r[c];const d=i.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){e[c]=h;continue}r[c]=u=new Gee(d,e,c,h),s.push(u)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Cl.add(this._chart,i),!0}}function Kee(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function qee(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function zF(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function Xee(n,e,t){if(t===!1)return!1;const i=zF(n,t),s=zF(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function Qee(n){let e,t,i,s;return bt(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function UF(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)t.push(i[s].index);return t}function YF(n,e,t,i={}){const s=n.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===t){if(h=!0,i.all)continue;break}c=n.values[l],Wn(c)&&(r||e===0||ia(e)===ia(c))&&(e+=c)}return!h&&!i.all?0:e}function Zee(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[r]:n[h]};return a}function DE(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Jee(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function ete(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function tte(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function GF(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function KF(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,h=Jee(r,o,i),u=e.length;let d;for(let f=0;f<u;++f){const g=e[f],{[l]:p,[c]:m}=g,w=g._stacks||(g._stacks={});d=w[c]=tte(s,h,p),d[a]=m,d._top=GF(d,o,!0,i.type),d._bottom=GF(d,o,!1,i.type);const y=d._visualValues||(d._visualValues={});y[a]=m}}function NE(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function nte(n,e){return Dc(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function ite(n,e,t){return Dc(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function pm(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][t]===void 0)return;delete r[i][t],r[i]._visualValues!==void 0&&r[i]._visualValues[t]!==void 0&&delete r[i]._visualValues[t]}}}const LE=n=>n==="reset"||n==="none",qF=(n,e)=>e?n:Object.assign({},n),ste=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:UF(t,!0),values:null};class Sr{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=DE(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&pm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(u,d,f,g)=>u==="x"?d:u==="r"?g:f,r=t.xAxisID=Ke(i.xAxisID,NE(e,"x")),o=t.yAxisID=Ke(i.yAxisID,NE(e,"y")),a=t.rAxisID=Ke(i.rAxisID,NE(e,"r")),l=t.indexAxis,c=t.iAxisID=s(l,r,o,a),h=t.vAxisID=s(l,o,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&hF(this._data,this),e._stacked&&pm(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(bt(t)){const s=this._cachedMeta;this._data=Zee(t,s)}else if(i!==t){if(i){hF(i,this);const s=this._cachedMeta;pm(s),s._parsed=[]}t&&Object.isExtensible(t)&&jJ(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=DE(t.vScale,t),t.stack!==i.stack&&(s=!0,pm(t),t.stack=i.stack),this._resyncElements(e),(s||r!==t._stacked)&&(KF(this,t._parsed),t._stacked=DE(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&t===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,u,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{yn(s[e])?d=this.parseArrayData(i,s,e,t):bt(s[e])?d=this.parseObjectData(i,s,e,t):d=this.parsePrimitiveData(i,s,e,t);const f=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<t;++h)i._parsed[h+e]=u=d[h],l&&(f()&&(l=!1),c=u);i._sorted=l}o&&KF(this,d)}parsePrimitiveData(e,t,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,u=new Array(s);let d,f,g;for(d=0,f=s;d<f;++d)g=d+i,u[d]={[a]:h||r.parse(c[g],g),[l]:o.parse(t[g],g)};return u}parseArrayData(e,t,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,h,u;for(l=0,c=s;l<c;++l)h=l+i,u=t[h],a[l]={x:r.parse(u[0],h),y:o.parse(u[1],h)};return a}parseObjectData(e,t,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,u,d,f;for(h=0,u=s;h<u;++h)d=h+i,f=t[d],c[h]={x:r.parse(Oc(f,a),d),y:o.parse(Oc(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,r=this._cachedMeta,o=t[e.axis],a={keys:UF(s,!0),values:t._stacks[e.axis]._visualValues};return YF(a,o,r.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const r=i[t.axis];let o=r===null?NaN:r;const a=s&&i._stacks[t.axis];s&&a&&(s.values=a,o=YF(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=ste(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=ete(a);let d,f;function g(){f=s[d];const p=f[a.axis];return!Wn(f[e.axis])||h>p||u<p}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=t.length;s<r;++s)o=t[s][e.axis],Wn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Qee(Ke(this.options.clip,Xee(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],r=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,r,a,l),h=a;h<a+l;++h){const u=s[h];u.hidden||(u.active&&c?o.push(u):u.draw(e,r))}for(h=0;h<o.length;++h)o[h].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=ite(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=nte(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",r=this._cachedDataOpts,o=e+"-"+t,a=r[o],l=this.enableOptionSharing&&am(i);if(a)return qF(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),u=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),h),f=Object.keys(Cn.elements[e]),g=()=>this.getContext(i,s,t),p=c.resolveNamedOptions(d,f,g,u);return p.$shared&&(p.$shared=l,r[o]=Object.freeze(qF(p,l))),p}_resolveAnimations(e,t,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,t),d=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(d,this.getContext(e,i,t))}const c=new jF(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||LE(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:o}}updateElement(e,t,i,s){LE(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!LE(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=t.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t,i=!0){const s=this._cachedMeta,r=s.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&pm(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Sr.defaults={},Sr.datasetElementType=null,Sr.dataElementType=null;function rte(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=t.length;s<r;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=uF(i.sort((s,r)=>s-r))}return n._cache.$bar}function ote(n){const e=n.iScale,t=rte(e,n.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(am(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=t.length;s<r;++s)o=e.getPixelForValue(t[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function ate(n,e,t,i){const s=t.barThickness;let r,o;return At(s)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[n]-r/2}}function lte(n,e,t,i){const s=e.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=t.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function cte(n,e,t,i){const s=t.parse(n[0],i),r=t.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function XF(n,e,t,i){return yn(n)?cte(n,e,t,i):e[t.axis]=t.parse(n,i),e}function QF(n,e,t,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let c,h,u,d;for(c=t,h=t+i;c<h;++c)d=e[c],u={},u[s.axis]=a||s.parse(o[c],c),l.push(XF(d,u,r,c));return l}function $E(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function hte(n,e,t){return n!==0?ia(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function ute(n){let e,t,i,s,r;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:t,end:i,reverse:e,top:s,bottom:r}}function dte(n,e,t,i){let s=e.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=ute(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=c:(t._bottom||0)===i?s=h:(r[ZF(h,o,a,l)]=!0,s=c)),r[ZF(s,o,a,l)]=!0,n.borderSkipped=r}function ZF(n,e,t,i){return i?(n=fte(n,e,t),n=JF(n,t,e)):n=JF(n,e,t),n}function fte(n,e,t){return n===e?t:n===t?e:n}function JF(n,e,t){return n==="start"?e:n==="end"?t:n}function gte(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class Uy extends Sr{parsePrimitiveData(e,t,i,s){return QF(e,t,i,s)}parseArrayData(e,t,i,s){return QF(e,t,i,s)}parseObjectData(e,t,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,u=[];let d,f,g,p;for(d=i,f=i+s;d<f;++d)p=t[d],g={},g[r.axis]=r.parse(Oc(p,c),d),u.push(XF(Oc(p,h),g,o,d));return u}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);const r=i._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:s}=t,r=this.getParsed(e),o=r._custom,a=$E(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,s);for(let f=t;f<t+i;f++){const g=this.getParsed(f),p=r||At(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,h),w=(g._stacks||{})[a.axis],y={horizontal:c,base:p.base,enableBorderRadius:!w||$E(g._custom)||o===w._top||o===w._bottom,x:c?p.head:m.center,y:c?m.center:p.head,height:c?m.size:Math.abs(p.size),width:c?Math.abs(p.size):m.size};d&&(y.options=u||this.resolveDataElementOptions(f,e[f].active?"active":s));const C=y.options||e[f].options;dte(y,C,w,o),gte(y,C,h.ratio),this.updateElement(e[f],f,y,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[i.axis],c=h=>{const u=h._parsed.find(f=>f[i.axis]===l),d=u&&u[h.vScale.axis];if(At(d)||isNaN(d))return!0};for(const h of s)if(!(t!==void 0&&c(h))&&((r===!1||o.indexOf(h.stack)===-1||r===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const s=this._getStacks(e,i),r=t!==void 0?s.indexOf(t):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,s=[];let r,o;for(r=0,o=t.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||ote(t),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,h=$E(c);let u=l[t.axis],d=0,f=i?this.applyStack(t,l,i):u,g,p;f!==u&&(d=f-u,f=u),h&&(u=c.barStart,f=c.barEnd-c.barStart,u!==0&&ia(u)!==ia(c.barEnd)&&(d=0),d+=u);const m=!At(r)&&!h?r:d;let w=t.getPixelForValue(m);if(this.chart.getDataVisibility(e)?g=t.getPixelForValue(d+f):g=w,p=g-w,Math.abs(p)<o){p=hte(p,t,a)*o,u===a&&(w-=p/2);const y=t.getPixelForDecimal(0),C=t.getPixelForDecimal(1),R=Math.min(y,C),_=Math.max(y,C);w=Math.max(Math.min(w,_),R),g=w+p,i&&!h&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(g)-t.getValueForPixel(w))}if(w===t.getPixelForValue(a)){const y=ia(p)*t.getLineWidthForValue(a)/2;w+=y,p-=y}return{size:p,base:w,head:g,center:g+p/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,r=s.skipNull,o=Ke(s.maxBarThickness,1/0);let a,l;if(t.grouped){const c=r?this._getStackCount(e):t.stackCount,h=s.barThickness==="flex"?lte(e,t,s,c):ate(e,t,s,c),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=h.start+h.chunk*u+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[t.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}Uy.id="bar",Uy.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Uy.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Yy extends Sr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,s){const r=super.parsePrimitiveData(e,t,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,t,i,s){const r=super.parseArrayData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=Ke(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,t,i,s){const r=super.parseObjectData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=Ke(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,s),h=o.axis,u=a.axis;for(let d=t;d<t+i;d++){const f=e[d],g=!r&&this.getParsed(d),p={},m=p[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(g[h]),w=p[u]=r?a.getBasePixel():a.getPixelForValue(g[u]);p.skip=isNaN(m)||isNaN(w),c&&(p.options=l||this.resolveDataElementOptions(d,f.active?"active":s),r&&(p.options.radius=0)),this.updateElement(f,d,p,s)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return t!=="active"&&(s.radius=0),s.radius+=Ke(i&&i._custom,r),s}}Yy.id="bubble",Yy.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Yy.overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};function pte(n,e,t){let i=1,s=1,r=0,o=0;if(e<dn){const a=n,l=a+e,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(C,R,_)=>cm(C,a,l,!0)?1:Math.max(R,R*t,_,_*t),g=(C,R,_)=>cm(C,a,l,!0)?-1:Math.min(R,R*t,_,_*t),p=f(0,c,u),m=f(qn,h,d),w=g(un,c,u),y=g(un+qn,h,d);i=(p-w)/2,s=(m-y)/2,r=-(p+w)/2,o=-(m+y)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class yu extends Sr{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(bt(i[e])){const{key:l="value"}=this._parsing;r=c=>+Oc(i[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return lo(this.options.rotation-90)}_getCircumference(){return lo(this.options.circumference)}_getRotationExtents(){let e=dn,t=-dn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(AJ(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:p}=pte(u,h,l),m=(i.width-o)/d,w=(i.height-o)/f,y=Math.max(Math.min(m,w)/2,0),C=eF(this.options.radius,y),R=Math.max(C*l,0),_=(C-R)/this._getVisibleDatasetWeightTotal();this.offsetX=g*C,this.offsetY=p*C,s.total=this.calculateTotal(),this.outerRadius=C-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/dn)}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=r&&c.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(t,s);let w=this._getRotation(),y;for(y=0;y<t;++y)w+=this._circumference(y,r);for(y=t;y<t+i;++y){const C=this._circumference(y,r),R=e[y],_={x:h+this.offsetX,y:u+this.offsetY,startAngle:w,endAngle:w+C,circumference:C,outerRadius:g,innerRadius:f};m&&(_.options=p||this.resolveDataElementOptions(y,R.active?"active":s)),w+=C,this.updateElement(R,y,_,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,s;for(s=0;s<t.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?dn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=um(t._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(Ke(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}yu.id="doughnut",yu.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},yu.descriptors={_scriptable:n=>n!=="spacing",_indexable:n=>n!=="spacing"&&!n.startsWith("borderDash")&&!n.startsWith("hoverBorderDash")},yu.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:i}}=n.legend.options;return e.labels.map((s,r)=>{const a=n.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(r),index:r}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}}};class Gy extends Sr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=gF(t,s,o);this._drawStart=a,this._drawCount=l,pF(t)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(t,s),d=o.axis,f=a.axis,{spanGaps:g,segment:p}=this.options,m=If(g)?g:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||r||s==="none",y=t+i,C=e.length;let R=t>0&&this.getParsed(t-1);for(let _=0;_<C;++_){const x=e[_],M=w?x:{};if(_<t||_>=y){M.skip=!0;continue}const I=this.getParsed(_),A=At(I[f]),O=M[d]=o.getPixelForValue(I[d],_),D=M[f]=r||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,I,l):I[f],_);M.skip=isNaN(O)||isNaN(D)||A,M.stop=_>0&&Math.abs(I[d]-R[d])>m,p&&(M.parsed=I,M.raw=c.data[_]),u&&(M.options=h||this.resolveDataElementOptions(_,x.active?"active":s)),w||this.updateElement(x,_,M,s),R=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Gy.id="line",Gy.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Gy.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class mm extends Sr{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=um(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,t,i,s){return PF.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,u=c.yCenter,d=c.getIndexAngle(0)-.5*un;let f=d,g;const p=360/this.countVisibleElements();for(g=0;g<t;++g)f+=this._computeAngle(g,s,p);for(g=t;g<t+i;g++){const m=e[g];let w=f,y=f+this._computeAngle(g,s,p),C=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=y,r&&(l.animateScale&&(C=0),l.animateRotate&&(w=y=d));const R={x:h,y:u,innerRadius:0,outerRadius:C,startAngle:w,endAngle:y,options:this.resolveDataElementOptions(g,m.active?"active":s)};this.updateElement(m,g,R,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?lo(this.resolveDataElementOptions(e,t).angle||i):0}}mm.id="polarArea",mm.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},mm.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:i}}=n.legend.options;return e.labels.map((s,r)=>{const a=n.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(r),index:r}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class FE extends yu{}FE.id="pie",FE.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Ky extends Sr{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return PF.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta,i=t.dataset,s=t.data||[],r=t.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=t;a<t+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),h=r.getPointPositionForValue(a,this.getParsed(a).r),u=o?r.xCenter:h.x,d=o?r.yCenter:h.y,f={x:u,y:d,angle:h.angle,skip:isNaN(u)||isNaN(d),options:c};this.updateElement(l,a,f,s)}}}Ky.id="radar",Ky.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Ky.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class qy extends Sr{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled;let{start:r,count:o}=gF(t,i,s);if(this._drawStart=r,this._drawCount=o,pF(t)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(t,s),u=this.getSharedOptions(h),d=this.includeOptions(s,u),f=o.axis,g=a.axis,{spanGaps:p,segment:m}=this.options,w=If(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||s==="none";let C=t>0&&this.getParsed(t-1);for(let R=t;R<t+i;++R){const _=e[R],x=this.getParsed(R),M=y?_:{},I=At(x[g]),A=M[f]=o.getPixelForValue(x[f],R),O=M[g]=r||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[g],R);M.skip=isNaN(A)||isNaN(O)||I,M.stop=R>0&&Math.abs(x[f]-C[f])>w,m&&(M.parsed=x,M.raw=c.data[R]),d&&(M.options=u||this.resolveDataElementOptions(R,_.active?"active":s)),y||this.updateElement(_,R,M,s),C=x}this.updateSharedOptions(u,s,h)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!t.length)return s;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,r,o)/2}}qy.id="scatter",qy.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},qy.overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};var mte=Object.freeze({__proto__:null,BarController:Uy,BubbleController:Yy,DoughnutController:yu,LineController:Gy,PieController:FE,PolarAreaController:mm,RadarController:Ky,ScatterController:qy});function Cu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class BE{static override(e){Object.assign(BE.prototype,e)}constructor(e){this.options=void 0,this.options=e||{}}init(){}formats(){return Cu()}parse(){return Cu()}format(){return Cu()}add(){return Cu()}diff(){return Cu()}startOf(){return Cu()}endOf(){return Cu()}}var bte={_date:BE};function wte(n,e,t,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?VJ:vl;if(i){if(s._sharedOptions){const c=r[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const u=l(r,e,t-h),d=l(r,e,t+h);return{lo:u.lo,hi:d.hi}}}}else return l(r,e,t)}return{lo:0,hi:r.length-1}}function bm(n,e,t,i,s){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:u,hi:d}=wte(r[a],e,o,s);for(let f=u;f<=d;++f){const g=h[f];g.skip||i(g,c,f)}}}function vte(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function VE(n,e,t,i,s){const r=[];return!s&&!n.isPointInArea(e)||bm(n,t,e,function(a,l,c){!s&&!yl(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function yte(n,e,t,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:u}=lF(o,{x:e.x,y:e.y});cm(u,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return bm(n,t,e,r),s}function Cte(n,e,t,i,s,r){let o=[];const a=vte(t);let l=Number.POSITIVE_INFINITY;function c(h,u,d){const f=h.inRange(e.x,e.y,s);if(i&&!f)return;const g=h.getCenterPoint(s);if(!(!!r||n.isPointInArea(g))&&!f)return;const m=a(e,g);m<l?(o=[{element:h,datasetIndex:u,index:d}],l=m):m===l&&o.push({element:h,datasetIndex:u,index:d})}return bm(n,t,e,c),o}function WE(n,e,t,i,s,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!i?yte(n,e,t,s):Cte(n,e,t,i,s,r)}function eB(n,e,t,i,s){const r=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return bm(n,t,e,(l,c,h)=>{l[o]&&l[o](e[t],s)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var Ste={evaluateInteractionItems:bm,modes:{index(n,e,t,i){const s=wu(e,n),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?VE(n,s,r,i,o):WE(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(n,e,t,i){const s=wu(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?VE(n,s,r,i,o):WE(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(n,e,t,i){const s=wu(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return VE(n,s,r,i,o)},nearest(n,e,t,i){const s=wu(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return WE(n,s,r,t.intersect,i,o)},x(n,e,t,i){const s=wu(e,n);return eB(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=wu(e,n);return eB(n,s,"y",t.intersect,i)}}};const tB=["left","top","right","bottom"];function wm(n,e){return n.filter(t=>t.pos===e)}function nB(n,e){return n.filter(t=>tB.indexOf(t.pos)===-1&&t.box.axis===e)}function vm(n,e){return n.sort((t,i)=>{const s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function _te(n){const e=[];let t,i,s,r,o,a;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function Rte(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:r}=t;if(!i||!tB.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function xte(n,e){const t=Rte(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=t[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:l&&e.availableHeight)}return t}function Ete(n){const e=_te(n),t=vm(e.filter(c=>c.box.fullSize),!0),i=vm(wm(e,"left"),!0),s=vm(wm(e,"right")),r=vm(wm(e,"top"),!0),o=vm(wm(e,"bottom")),a=nB(e,"x"),l=nB(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:wm(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function iB(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function sB(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Tte(n,e,t,i){const{pos:s,box:r}=t,o=n.maxPadding;if(!bt(s)){t.size&&(n[s]-=t.size);const u=i[t.stack]||{size:0,count:1};u.size=Math.max(u.size,t.horizontal?r.height:r.width),t.size=u.size/u.count,n[s]+=t.size}r.getPadding&&sB(o,r.getPadding());const a=Math.max(0,e.outerWidth-iB(o,n,"left","right")),l=Math.max(0,e.outerHeight-iB(o,n,"top","bottom")),c=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:h}:{same:h,other:c}}function Mte(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Ate(n,e){const t=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return i(n?["left","right"]:["top","bottom"])}function ym(n,e,t,i){const s=[];let r,o,a,l,c,h;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||e.w,a.height||e.h,Ate(a.horizontal,e));const{same:u,other:d}=Tte(e,t,a,i);c|=u&&s.length,h=h||d,l.fullSize||s.push(a)}return c&&ym(s,e,t,i)||h}function Xy(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function rB(n,e,t,i){const s=t.padding;let{x:r,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const u=e.w*h,d=c.size||l.height;am(c.start)&&(o=c.start),l.fullSize?Xy(l,s.left,o,t.outerWidth-s.right-s.left,d):Xy(l,e.left+c.placed,o,u,d),c.start=o,c.placed+=u,o=l.bottom}else{const u=e.h*h,d=c.size||l.width;am(c.start)&&(r=c.start),l.fullSize?Xy(l,r,s.top,d,t.outerHeight-s.bottom-s.top):Xy(l,r,e.top+c.placed,d,u),c.start=r,c.placed+=u,r=l.right}}e.x=r,e.y=o}var Yi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=Ui(n.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(t-s.height,0),a=Ete(n.boxes),l=a.vertical,c=a.horizontal;zt(n.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const h=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},s);sB(d,Ui(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),g=xte(l.concat(c),u);ym(a.fullSize,f,u,g),ym(l,f,u,g),ym(c,f,u,g)&&ym(l,f,u,g),Mte(f),rB(a.leftAndTop,f,u,g),f.x+=f.w,f.y+=f.h,rB(a.rightAndBottom,f,u,g),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},zt(a.chartArea,p=>{const m=p.box;Object.assign(m,n.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class oB{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class Pte extends oB{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Qy="$chartjs",Ite={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aB=n=>n===null||n==="";function Ote(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Qy]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",aB(s)){const r=kF(n,"width");r!==void 0&&(n.width=r)}if(aB(i))if(n.style.height==="")n.height=n.width/(e||2);else{const r=kF(n,"height");r!==void 0&&(n.height=r)}return n}const lB=Hee?{passive:!0}:!1;function kte(n,e,t){n&&n.addEventListener(e,t,lB)}function Hte(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,lB)}function Dte(n,e){const t=Ite[n.type]||n.type,{x:i,y:s}=wu(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Zy(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function Nte(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Zy(a.addedNodes,i),o=o&&!Zy(a.removedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function Lte(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Zy(a.removedNodes,i),o=o&&!Zy(a.addedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const Cm=new Map;let cB=0;function hB(){const n=window.devicePixelRatio;n!==cB&&(cB=n,Cm.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function $te(n,e){Cm.size||window.addEventListener("resize",hB),Cm.set(n,e)}function Fte(n){Cm.delete(n),Cm.size||window.removeEventListener("resize",hB)}function Bte(n,e,t){const i=n.canvas,s=i&&HE(i);if(!s)return;const r=fF((a,l)=>{const c=s.clientWidth;t(a,l),c<s.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(s),$te(n,r),o}function jE(n,e,t){t&&t.disconnect(),e==="resize"&&Fte(n)}function Vte(n,e,t){const i=n.canvas,s=fF(r=>{n.ctx!==null&&t(Dte(r,n))},n);return kte(i,e,s),s}class Wte extends oB{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Ote(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Qy])return!1;const i=t[Qy].initial;["height","width"].forEach(r=>{const o=i[r];At(o)?t.removeAttribute(r):t.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[Qy],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),o={attach:Nte,detach:Lte,resize:Bte}[t]||Vte;s[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:jE,detach:jE,resize:jE}[t]||Hte)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return kee(e,t,i,s)}isAttached(e){const t=e&&HE(e);return!!(t&&t.isConnected)}}function jte(n){return!kE()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Pte:Wte}class _r{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return If(this.x)&&If(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}_r.defaults={},_r.defaultRoutes=void 0;function zte(n,e){const t=n.options.ticks,i=Ute(n),s=Math.min(t.maxTicksLimit||i,i),r=t.major.enabled?Gte(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return Kte(e,c,r,o/s),c;const h=Yte(r,e,s);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Jy(e,c,h,At(f)?0:a-f,a),u=0,d=o-1;u<d;u++)Jy(e,c,h,r[u],r[u+1]);return Jy(e,c,h,l,At(f)?e.length:l+f),c}return Jy(e,c,h),c}function Ute(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function Yte(n,e,t){const i=qte(n),s=e.length/t;if(!i)return Math.max(s,1);const r=LJ(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function Gte(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function Kte(n,e,t,i){let s=0,r=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(e.push(n[o]),s++,r=t[s*i])}function Jy(n,e,t,i,s){const r=Ke(i,0),o=Math.min(Ke(s,n.length),n.length);let a=0,l,c,h;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),h=r;h<0;)a++,h=Math.round(r+a*t);for(c=Math.max(r,0);c<o;c++)c===h&&(e.push(n[c]),a++,h=Math.round(r+a*t))}function qte(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const Xte=n=>n==="left"?"right":n==="right"?"left":n,uB=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,dB=(n,e)=>Math.min(e||n,n);function fB(n,e){const t=[],i=n.length/e,s=n.length;let r=0;for(;r<s;r+=i)t.push(n[Math.floor(r)]);return t}function Qte(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),c;if(!(t&&(i===1?c=Math.max(l-r,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function Zte(n,e){zt(n,t=>{const i=t.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[i[r]];i.splice(0,s)}})}function Sm(n){return n.drawTicks?n.tickLength:0}function gB(n,e){if(!n.display)return 0;const t=li(n.font,e),i=Ui(n.padding);return(yn(n.text)?n.text.length:1)*t.lineHeight+i.height}function Jte(n,e){return Dc(n,{scale:e,type:"scale"})}function ene(n,e,t){return Dc(n,{tick:t,index:e,type:"tick"})}function tne(n,e,t){let i=RE(n);return(t&&e!=="right"||!t&&e==="right")&&(i=Xte(i)),i}function nne(n,e,t,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:h}=l;let u=0,d,f,g;const p=o-s,m=a-r;if(n.isHorizontal()){if(f=zi(i,r,a),bt(t)){const w=Object.keys(t)[0],y=t[w];g=h[w].getPixelForValue(y)+p-e}else t==="center"?g=(c.bottom+c.top)/2+p-e:g=uB(n,t,e);d=a-r}else{if(bt(t)){const w=Object.keys(t)[0],y=t[w];f=h[w].getPixelForValue(y)-m+e}else t==="center"?f=(c.left+c.right)/2-m+e:f=uB(n,t,e);g=zi(i,o,s),u=t==="left"?-qn:qn}return{titleX:f,titleY:g,maxWidth:d,rotation:u}}class Nc extends _r{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=qs(e,Number.POSITIVE_INFINITY),t=qs(t,Number.NEGATIVE_INFINITY),i=qs(i,Number.POSITIVE_INFINITY),s=qs(s,Number.NEGATIVE_INFINITY),{min:qs(e,i),max:qs(t,s),minDefined:Wn(e),maxDefined:Wn(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=s&&t>i?t:i,{min:qs(t,qs(i,t)),max:qs(i,qs(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){cn(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=uee(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?fB(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=zte(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){cn(this.options.afterUpdate,[this])}beforeSetDimensions(){cn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){cn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),cn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){cn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=cn(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){cn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){cn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=dB(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=_i(this.chart.width-u,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),u+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Sm(e.grid)-t.padding-gB(e.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),o=CE(Math.min(Math.asin(_i((h.highest.height+6)/a,-1,1)),Math.asin(_i(l/c,-1,1))-Math.asin(_i(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){cn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){cn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=gB(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=Sm(r)+l):(e.height=this.maxHeight,e.width=Sm(r)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=i.padding*2,g=lo(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const w=i.mirror?0:m*u.width+p*d.height;e.height=Math.min(this.maxHeight,e.height+w+f)}else{const w=i.mirror?0:p*u.width+m*d.height;e.width=Math.min(this.maxWidth,e.width+w+f)}this._calculatePadding(c,h,m,p)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*e.width,f=i*t.height):(d=i*e.height,f=s*t.width):r==="start"?f=t.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=t.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let h=t.height/2,u=e.height/2;r==="start"?(h=0,u=e.height):r==="end"&&(h=t.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){cn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)At(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=fB(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(t/dB(t,i));let c=0,h=0,u,d,f,g,p,m,w,y,C,R,_;for(u=0;u<t;u+=l){if(g=e[u].label,p=this._resolveTickFontOptions(u),s.font=m=p.string,w=r[m]=r[m]||{data:{},gc:[]},y=p.lineHeight,C=R=0,!At(g)&&!yn(g))C=Fy(s,w.data,w.gc,C,g),R=y;else if(yn(g))for(d=0,f=g.length;d<f;++d)_=g[d],!At(_)&&!yn(_)&&(C=Fy(s,w.data,w.gc,C,_),R+=y);o.push(C),a.push(R),c=Math.max(C,c),h=Math.max(R,h)}Zte(r,t);const x=o.indexOf(c),M=a.indexOf(h),I=A=>({width:o[A]||0,height:a[A]||0});return{first:I(0),last:I(t-1),widest:I(x),highest:I(M),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return BJ(this._alignToPixels?du(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=ene(this.getContext(),e,i))}return this.$context||(this.$context=Jte(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=lo(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=Sm(r),f=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,w=function(B){return du(i,B,p)};let y,C,R,_,x,M,I,A,O,D,j,Y;if(o==="top")y=w(this.bottom),M=this.bottom-d,A=y-m,D=w(e.top)+m,Y=e.bottom;else if(o==="bottom")y=w(this.top),D=e.top,Y=w(e.bottom)-m,M=y+m,A=this.top+d;else if(o==="left")y=w(this.right),x=this.right-d,I=y-m,O=w(e.left)+m,j=e.right;else if(o==="right")y=w(this.left),O=e.left,j=w(e.right)-m,x=y+m,I=this.left+d;else if(t==="x"){if(o==="center")y=w((e.top+e.bottom)/2+.5);else if(bt(o)){const B=Object.keys(o)[0],ie=o[B];y=w(this.chart.scales[B].getPixelForValue(ie))}D=e.top,Y=e.bottom,M=y+m,A=M+d}else if(t==="y"){if(o==="center")y=w((e.left+e.right)/2);else if(bt(o)){const B=Object.keys(o)[0],ie=o[B];y=w(this.chart.scales[B].getPixelForValue(ie))}x=y-m,I=x-d,O=e.left,j=e.right}const Z=Ke(s.ticks.maxTicksLimit,u),$=Math.max(1,Math.ceil(u/Z));for(C=0;C<u;C+=$){const B=this.getContext(C),ie=r.setContext(B),se=a.setContext(B),te=ie.lineWidth,pe=ie.color,b=se.dash||[],v=se.dashOffset,S=ie.tickWidth,T=ie.tickColor,H=ie.tickBorderDash||[],E=ie.tickBorderDashOffset;R=Qte(this,C,l),R!==void 0&&(_=du(i,R,te),c?x=I=O=j=_:M=A=D=Y=_,f.push({tx1:x,ty1:M,tx2:I,ty2:A,x1:O,y1:D,x2:j,y2:Y,width:te,color:pe,borderDash:b,borderDashOffset:v,tickWidth:S,tickColor:T,tickBorderDash:H,tickBorderDashOffset:E}))}return this._ticksLength=u,this._borderValue=y,f}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,d=Sm(i.grid),f=d+h,g=u?-h:f,p=-lo(this.labelRotation),m=[];let w,y,C,R,_,x,M,I,A,O,D,j,Y="middle";if(s==="top")x=this.bottom-g,M=this._getXAxisLabelAlignment();else if(s==="bottom")x=this.top+g,M=this._getXAxisLabelAlignment();else if(s==="left"){const $=this._getYAxisLabelAlignment(d);M=$.textAlign,_=$.x}else if(s==="right"){const $=this._getYAxisLabelAlignment(d);M=$.textAlign,_=$.x}else if(t==="x"){if(s==="center")x=(e.top+e.bottom)/2+f;else if(bt(s)){const $=Object.keys(s)[0],B=s[$];x=this.chart.scales[$].getPixelForValue(B)+f}M=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")_=(e.left+e.right)/2-f;else if(bt(s)){const $=Object.keys(s)[0],B=s[$];_=this.chart.scales[$].getPixelForValue(B)}M=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?Y="top":l==="end"&&(Y="bottom"));const Z=this._getLabelSizes();for(w=0,y=a.length;w<y;++w){C=a[w],R=C.label;const $=r.setContext(this.getContext(w));I=this.getPixelForTick(w)+r.labelOffset,A=this._resolveTickFontOptions(w),O=A.lineHeight,D=yn(R)?R.length:1;const B=D/2,ie=$.color,se=$.textStrokeColor,te=$.textStrokeWidth;let pe=M;o?(_=I,M==="inner"&&(w===y-1?pe=this.options.reverse?"left":"right":w===0?pe=this.options.reverse?"right":"left":pe="center"),s==="top"?c==="near"||p!==0?j=-D*O+O/2:c==="center"?j=-Z.highest.height/2-B*O+O:j=-Z.highest.height+O/2:c==="near"||p!==0?j=O/2:c==="center"?j=Z.highest.height/2-B*O:j=Z.highest.height-D*O,u&&(j*=-1),p!==0&&!$.showLabelBackdrop&&(_+=O/2*Math.sin(p))):(x=I,j=(1-D)*O/2);let b;if($.showLabelBackdrop){const v=Ui($.backdropPadding),S=Z.heights[w],T=Z.widths[w];let H=j-v.top,E=0-v.left;switch(Y){case"middle":H-=S/2;break;case"bottom":H-=S;break}switch(M){case"center":E-=T/2;break;case"right":E-=T;break;case"inner":w===y-1?E-=T:w>0&&(E-=T/2);break}b={left:E,top:H,width:T+v.width,height:S+v.height,color:$.backdropColor}}m.push({label:R,font:A,textOffset:j,options:{rotation:p,color:ie,strokeColor:se,strokeWidth:te,textAlign:pe,textBaseline:Y,translation:[_,x],backdrop:b}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-lo(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,h;return t==="left"?s?(h=this.right+r,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):t==="right"?s?(h=this.left+r,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=s.length;r<o;++r){const l=s[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=du(e,this.left,o)-o/2,h=du(e,this.right,a)+a/2,u=d=l):(u=du(e,this.top,o)-o/2,d=du(e,this.bottom,a)+a/2,c=h=l),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(c,u),t.lineTo(h,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&fu(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;pu(i,c,0,h,l,a)}s&&gu(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=li(i.font),o=Ui(i.padding),a=i.align;let l=r.lineHeight/2;t==="bottom"||t==="center"||bt(t)?(l+=o.bottom,yn(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:u,rotation:d}=nne(this,l,t,a);pu(e,i.text,0,0,r,{color:i.color,maxWidth:u,rotation:d,textAlign:tne(a,t,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Ke(e.grid&&e.grid.z,-1),s=Ke(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Nc.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return li(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class e0{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;rne(t)&&(i=this.register(t));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,ine(e,o,i),this.override&&Cn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in Cn[s]&&(delete Cn[s][i],this.override&&delete uu[i])}}function ine(n,e,t){const i=Xs(Object.create(null),[t?Cn.get(t):{},Cn.get(e),n.defaults]);Cn.set(e,i),n.defaultRoutes&&sne(e,n.defaultRoutes),n.descriptors&&Cn.describe(e,n.descriptors)}function sne(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),r=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");Cn.route(r,s,l,a)})}function rne(n){return"id"in n&&"defaults"in n}class one{constructor(){this.controllers=new e0(Sr,"datasets",!0),this.elements=new e0(_r,"elements"),this.plugins=new e0(Object,"plugins"),this.scales=new e0(Nc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):zt(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const s=yE(e);cn(i["before"+s],[],i),t[e](i),cn(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var cs=new one;class ane{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,t,i);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[t,s,r.options];if(cn(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){At(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=Ke(i.options&&i.options.plugins,{}),r=lne(i);return s===!1&&!t?[]:hne(e,r,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function lne(n){const e={},t=[],i=Object.keys(cs.plugins.items);for(let r=0;r<i.length;r++)t.push(cs.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function cne(n,e){return!e&&n===!1?null:n===!0?{}:n}function hne(n,{plugins:e,localIds:t},i,s){const r=[],o=n.getContext();for(const a of e){const l=a.id,c=cne(i[l],s);c!==null&&r.push({plugin:a,options:une(n.config,{plugin:a,local:t[l]},c,o)})}return r}function une(n,{plugin:e,local:t},i,s){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zE(n,e){const t=Cn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function dne(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function fne(n,e){return n===e?"_index_":"_value_"}function pB(n){if(n==="x"||n==="y"||n==="r")return n}function gne(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function UE(n,...e){if(pB(n))return n;for(const t of e){const i=t.axis||gne(t.position)||n.length>1&&pB(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function mB(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function pne(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return mB(n,"x",t[0])||mB(n,"y",t[0])}return{}}function mne(n,e){const t=uu[n.type]||{scales:{}},i=e.scales||{},s=zE(n.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!bt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=UE(o,a,pne(o,n),Cn.scales[a.type]),c=fne(l,s),h=t.scales||{};r[o]=om(Object.create(null),[{axis:l},a,h[l],h[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||zE(a,e),h=(uu[a]||{}).scales||{};Object.keys(h).forEach(u=>{const d=dne(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),om(r[f],[{axis:d},i[f],h[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];om(a,[Cn.scales[a.type],Cn.scale])}),r}function bB(n){const e=n.options||(n.options={});e.plugins=Ke(e.plugins,{}),e.scales=mne(n,e)}function wB(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function bne(n){return n=n||{},n.data=wB(n.data),bB(n),n}const vB=new Map,yB=new Set;function t0(n,e){let t=vB.get(n);return t||(t=e(),vB.set(n,t),yB.add(t)),t}const _m=(n,e,t)=>{const i=Oc(e,t);i!==void 0&&n.add(i)};class wne{constructor(e){this._config=bne(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=wB(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),bB(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return t0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return t0(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return t0(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return t0(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(h=>{e&&(l.add(e),h.forEach(u=>_m(l,e,u))),h.forEach(u=>_m(l,s,u)),h.forEach(u=>_m(l,uu[r]||{},u)),h.forEach(u=>_m(l,Cn,u)),h.forEach(u=>_m(l,TE,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),yB.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,uu[t]||{},Cn.datasets[t]||{},{type:t},Cn,TE]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=CB(this._resolverCache,e,s);let l=o;if(yne(o,t)){r.$shared=!1,i=kc(i)?i():i;const c=this.createResolver(e,i,a);l=Of(o,i,c)}for(const c of t)r[c]=l[c];return r}createResolver(e,t,i=[""],s){const{resolver:r}=CB(this._resolverCache,e,i);return bt(t)?Of(r,t,void 0,s):r}}function CB(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let r=i.get(s);return r||(r={resolver:PE(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const vne=n=>bt(n)&&Object.getOwnPropertyNames(n).some(e=>kc(n[e]));function yne(n,e){const{isScriptable:t,isIndexable:i}=RF(n);for(const s of e){const r=t(s),o=i(s),a=(o||r)&&n[s];if(r&&(kc(a)||vne(a))||o&&yn(a))return!0}return!1}var Cne="4.4.6";const Sne=["top","bottom","left","right","chartArea"];function SB(n,e){return n==="top"||n==="bottom"||Sne.indexOf(n)===-1&&e==="x"}function _B(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function RB(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),cn(t&&t.onComplete,[n],e)}function _ne(n){const e=n.chart,t=e.options.animation;cn(t&&t.onProgress,[n],e)}function xB(n){return kE()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const n0={},EB=n=>{const e=xB(n);return Object.values(n0).filter(t=>t.canvas===e).pop()};function Rne(n,e,t){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=e){const o=n[s];delete n[s],(t>0||r>e)&&(n[r+t]=o)}}}function xne(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function i0(n,e,t){return n.options.clip?n[t]:e[t]}function Ene(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:i0(t,e,"left"),right:i0(t,e,"right"),top:i0(i,e,"top"),bottom:i0(i,e,"bottom")}:e}class Zs{static register(...e){cs.add(...e),TB()}static unregister(...e){cs.remove(...e),TB()}constructor(e,t){const i=this.config=new wne(t),s=xB(e),r=EB(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||jte(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=MJ(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ane,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=zJ(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],n0[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Cl.listen(this,"complete",RB),Cl.listen(this,"progress",_ne),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return At(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return cs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():OF(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return CF(this.canvas,this.ctx),this}stop(){return Cl.stop(this),this}resize(e,t){Cl.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,t,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,OF(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),cn(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};zt(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=UE(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),zt(r,o=>{const a=o.options,l=a.id,c=UE(l,a),h=Ke(a.type,o.dtype);(a.position===void 0||SB(a.position,c)!==SB(o.dposition))&&(a.position=o.dposition),s[l]=!0;let u=null;if(l in i&&i[l].type===h)u=i[l];else{const d=cs.getScale(h);u=new d({id:l,type:h,ctx:this.ctx,chart:this}),i[u.id]=u}u.init(a,e)}),zt(s,(o,a)=>{o||delete i[a]}),zt(i,o=>{Yi.configure(this,o,o.options),Yi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(_B("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const r=t[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||zE(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=cs.getController(a),{datasetElementType:c,dataElementType:h}=Cn.datasets[a];Object.assign(l,{dataElementType:cs.getElement(h),datasetElementType:c&&cs.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){zt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:u}=this.getDatasetMeta(c),d=!s&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||zt(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(_B("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){zt(this.scales,e=>{Yi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!iF(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t){const o=i==="_removeElements"?-r:r;Rne(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!iF(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Yi.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],zt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,kc(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Cl.has(this)?this.attached&&!Cl.running(this)&&Cl.start(this):(this.draw(),RB({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const o=t[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,s=!i.disabled,r=Ene(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&fu(t,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&gu(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return yl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=Ste.modes[t];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Dc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);am(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Cl.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),CF(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete n0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};zt(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){zt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},zt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,o,a,l;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Hy(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=r(t,e),a=i?e:r(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,o=t,a=this._getActiveElements(e,s,i,o),l=HJ(e),c=xne(e,this._lastEvent,i,l);i&&(this._lastEvent=null,cn(r.onHover,[e,a,this],this),l&&cn(r.onClick,[e,a,this],this));const h=!Hy(a,s);return(h||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=c,h}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}Zs.defaults=Cn,Zs.instances=n0,Zs.overrides=uu,Zs.registry=cs,Zs.version=Cne,Zs.getChart=EB;function TB(){return zt(Zs.instances,n=>n._plugins.invalidate())}function Tne(n,e,t){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;n.beginPath(),n.arc(r,o,a,i-c,t+c),l>s?(c=s/l,n.arc(r,o,l,t+c,i-c,!0)):n.arc(r,o,s,t+qn,i-qn),n.closePath(),n.clip()}function Mne(n){return AE(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Ane(n,e,t,i){const s=Mne(n.options.borderRadius),r=(t-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(t-Math.min(r,l))*i/2;return _i(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:_i(s.innerStart,0,o),innerEnd:_i(s.innerEnd,0,o)}}function Df(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function s0(n,e,t,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,u=Math.max(e.outerRadius+i+t-c,0),d=h>0?h+i+t+c:0;let f=0;const g=s-l;if(i){const $=h>0?h-i:0,B=u>0?u-i:0,ie=($+B)/2,se=ie!==0?g*ie/(ie+i):g;f=(g-se)/2}const p=Math.max(.001,g*u-t/un)/u,m=(g-p)/2,w=l+m+f,y=s-m-f,{outerStart:C,outerEnd:R,innerStart:_,innerEnd:x}=Ane(e,d,u,y-w),M=u-C,I=u-R,A=w+C/M,O=y-R/I,D=d+_,j=d+x,Y=w+_/D,Z=y-x/j;if(n.beginPath(),r){const $=(A+O)/2;if(n.arc(o,a,u,A,$),n.arc(o,a,u,$,O),R>0){const te=Df(I,O,o,a);n.arc(te.x,te.y,R,O,y+qn)}const B=Df(j,y,o,a);if(n.lineTo(B.x,B.y),x>0){const te=Df(j,Z,o,a);n.arc(te.x,te.y,x,y+qn,Z+Math.PI)}const ie=(y-x/d+(w+_/d))/2;if(n.arc(o,a,d,y-x/d,ie,!0),n.arc(o,a,d,ie,w+_/d,!0),_>0){const te=Df(D,Y,o,a);n.arc(te.x,te.y,_,Y+Math.PI,w-qn)}const se=Df(M,w,o,a);if(n.lineTo(se.x,se.y),C>0){const te=Df(M,A,o,a);n.arc(te.x,te.y,C,w-qn,A)}}else{n.moveTo(o,a);const $=Math.cos(A)*u+o,B=Math.sin(A)*u+a;n.lineTo($,B);const ie=Math.cos(O)*u+o,se=Math.sin(O)*u+a;n.lineTo(ie,se)}n.closePath()}function Pne(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){s0(n,e,t,i,l,s);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+(a%dn||dn))}return s0(n,e,t,i,l,s),n.fill(),l}function Ine(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;n.setLineDash(u||[]),n.lineDashOffset=d,f?(n.lineWidth=c*2,n.lineJoin=h||"round"):(n.lineWidth=c,n.lineJoin=h||"bevel");let g=e.endAngle;if(r){s0(n,e,t,i,g,s);for(let p=0;p<r;++p)n.stroke();isNaN(a)||(g=o+(a%dn||dn))}f&&Tne(n,e,g),r||(s0(n,e,t,i,g,s),n.stroke())}class Rm extends _r{constructor(e){super(),this.circumference=void 0,this.endAngle=void 0,this.fullCircles=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=void 0,this.startAngle=void 0,this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.getProps(["x","y"],i),{angle:r,distance:o}=lF(s,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,f=Ke(u,l-a),g=cm(r,a,l)&&a!==l,p=f>=dn||g,m=wl(o,c+d,h+d);return p&&m}getCenterPoint(e){const{x:t,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,h=(s+r)/2,u=(o+a+c+l)/2;return{x:t+Math.cos(h)*u,y:i+Math.sin(h)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,s=(t.offset||0)/4,r=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>dn?Math.floor(i/dn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s);const l=1-Math.sin(Math.min(un,i||0)),c=s*l;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,Pne(e,this,c,r,o),Ine(e,this,c,r,o),e.restore()}}Rm.id="arc",Rm.defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},Rm.defaultRoutes={backgroundColor:"backgroundColor"},Rm.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"};function MB(n,e,t=e){n.lineCap=Ke(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Ke(t.borderDash,e.borderDash)),n.lineDashOffset=Ke(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Ke(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Ke(t.borderWidth,e.borderWidth),n.strokeStyle=Ke(t.borderColor,e.borderColor)}function One(n,e,t){n.lineTo(t.x,t.y)}function kne(n){return n.stepped?nee:n.tension||n.cubicInterpolationMode==="monotone"?iee:One}function AB(n,e,t={}){const i=n.length,{start:s=0,end:r=i-1}=t,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),h=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function Hne(n,e,t,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=AB(s,t,i),h=kne(r);let{move:u=!0,reverse:d}=i||{},f,g,p;for(f=0;f<=c;++f)g=s[(a+(d?c-f:f))%o],!g.skip&&(u?(n.moveTo(g.x,g.y),u=!1):h(n,p,g,d,r.stepped),p=g);return l&&(g=s[(a+(d?c:0))%o],h(n,p,g,d,r.stepped)),!!l}function Dne(n,e,t,i){const s=e.points,{count:r,start:o,ilen:a}=AB(s,t,i),{move:l=!0,reverse:c}=i||{};let h=0,u=0,d,f,g,p,m,w;const y=R=>(o+(c?a-R:R))%r,C=()=>{p!==m&&(n.lineTo(h,m),n.lineTo(h,p),n.lineTo(h,w))};for(l&&(f=s[y(0)],n.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[y(d)],f.skip)continue;const R=f.x,_=f.y,x=R|0;x===g?(_<p?p=_:_>m&&(m=_),h=(u*h+R)/++u):(C(),n.lineTo(R,_),g=x,u=0,p=m=_),w=_}C()}function YE(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Dne:Hne}function Nne(n){return n.stepped?Dee:n.tension||n.cubicInterpolationMode==="monotone"?Nee:vu}function Lne(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),MB(n,e.options),n.stroke(s)}function $ne(n,e,t,i){const{segments:s,options:r}=e,o=YE(e);for(const a of s)MB(n,r,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const Fne=typeof Path2D=="function";function Bne(n,e,t,i){Fne&&!e.options.segment?Lne(n,e,t,i):$ne(n,e,t,i)}class Lc extends _r{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;Tee(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Wee(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],r=this.points,o=FF(this,{property:t,start:s,end:s});if(!o.length)return;const a=[],l=Nne(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:u,end:d}=o[c],f=r[u],g=r[d];if(f===g){a.push(f);continue}const p=Math.abs((s-f[t])/(g[t]-f[t])),m=l(f,g,p,i.stepped);m[t]=e[t],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,t,i){return YE(this)(e,this,t,i)}path(e,t,i){const s=this.segments,r=YE(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of s)o&=r(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),Bne(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Lc.id="line",Lc.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},Lc.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},Lc.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"&&n!=="fill"};function PB(n,e,t,i){const s=n.options,{[t]:r}=n.getProps([t],i);return Math.abs(e-r)<s.radius+s.hitRadius}class xm extends _r{constructor(e){super(),this.parsed=void 0,this.skip=void 0,this.stop=void 0,this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.options,{x:r,y:o}=this.getProps(["x","y"],i);return Math.pow(e-r,2)+Math.pow(t-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return PB(this,e,"x",t)}inYRange(e,t){return PB(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!yl(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,By(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}xm.id="point",xm.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},xm.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function IB(n,e){const{x:t,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,h,u;return n.horizontal?(u=o/2,a=Math.min(t,s),l=Math.max(t,s),c=i-u,h=i+u):(u=r/2,a=t-u,l=t+u,c=Math.min(i,s),h=Math.max(i,s)),{left:a,top:c,right:l,bottom:h}}function $c(n,e,t,i){return n?0:_i(e,t,i)}function Vne(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,r=_F(i);return{t:$c(s.top,r.top,0,t),r:$c(s.right,r.right,0,e),b:$c(s.bottom,r.bottom,0,t),l:$c(s.left,r.left,0,e)}}function Wne(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=mu(s),o=Math.min(e,t),a=n.borderSkipped,l=i||bt(s);return{topLeft:$c(!l||a.top||a.left,r.topLeft,0,o),topRight:$c(!l||a.top||a.right,r.topRight,0,o),bottomLeft:$c(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:$c(!l||a.bottom||a.right,r.bottomRight,0,o)}}function jne(n){const e=IB(n),t=e.right-e.left,i=e.bottom-e.top,s=Vne(n,t/2,i/2),r=Wne(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function GE(n,e,t,i){const s=e===null,r=t===null,a=n&&!(s&&r)&&IB(n,i);return a&&(s||wl(e,a.left,a.right))&&(r||wl(t,a.top,a.bottom))}function zne(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Une(n,e){n.rect(e.x,e.y,e.w,e.h)}function KE(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class Nf extends _r{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=jne(this),a=zne(o.radius)?fm:Une;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,KE(o,t,r)),e.clip(),a(e,KE(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,KE(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return GE(this,e,t,i)}inXRange(e,t){return GE(this,e,null,t)}inYRange(e,t){return GE(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Nf.id="bar",Nf.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Nf.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Yne=Object.freeze({__proto__:null,ArcElement:Rm,BarElement:Nf,LineElement:Lc,PointElement:xm});const qE=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],OB=qE.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function kB(n){return qE[n%qE.length]}function HB(n){return OB[n%OB.length]}function Gne(n,e){return n.borderColor=kB(e),n.backgroundColor=HB(e),++e}function Kne(n,e){return n.backgroundColor=n.data.map(()=>kB(e++)),e}function qne(n,e){return n.backgroundColor=n.data.map(()=>HB(e++)),e}function Xne(n){let e=0;return(t,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof yu?e=Kne(t,e):s instanceof mm?e=qne(t,e):s&&(e=Gne(t,e))}}function DB(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function Qne(n){return n&&(n.borderColor||n.backgroundColor)}function Zne(){return Cn.borderColor!=="rgba(0,0,0,0.1)"||Cn.backgroundColor!=="rgba(0,0,0,0.1)"}var Jne={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s,o=DB(i)||Qne(s)||r&&DB(r)||Zne();if(!t.forceOverride&&o)return;const a=Xne(n);i.forEach(a)}};function eie(n,e,t,i,s){const r=s.samples||i;if(r>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(r-2);let l=0;const c=e+t-1;let h=e,u,d,f,g,p;for(o[l++]=n[h],u=0;u<r-2;u++){let m=0,w=0,y;const C=Math.floor((u+1)*a)+1+e,R=Math.min(Math.floor((u+2)*a)+1,t)+e,_=R-C;for(y=C;y<R;y++)m+=n[y].x,w+=n[y].y;m/=_,w/=_;const x=Math.floor(u*a)+1+e,M=Math.min(Math.floor((u+1)*a)+1,t)+e,{x:I,y:A}=n[h];for(f=g=-1,y=x;y<M;y++)g=.5*Math.abs((I-m)*(n[y].y-A)-(I-n[y].x)*(w-A)),g>f&&(f=g,d=n[y],p=y);o[l++]=d,h=p}return o[l++]=n[c],o}function tie(n,e,t,i){let s=0,r=0,o,a,l,c,h,u,d,f,g,p;const m=[],w=e+t-1,y=n[e].x,R=n[w].x-y;for(o=e;o<e+t;++o){a=n[o],l=(a.x-y)/R*i,c=a.y;const _=l|0;if(_===h)c<g?(g=c,u=o):c>p&&(p=c,d=o),s=(r*s+a.x)/++r;else{const x=o-1;if(!At(u)&&!At(d)){const M=Math.min(u,d),I=Math.max(u,d);M!==f&&M!==x&&m.push({...n[M],x:s}),I!==f&&I!==x&&m.push({...n[I],x:s})}o>0&&x!==f&&m.push(n[x]),m.push(a),h=_,r=0,g=p=c,u=d=f=o}}return m}function NB(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function LB(n){n.data.datasets.forEach(e=>{NB(e)})}function nie(n,e){const t=e.length;let i=0,s;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=_i(vl(e,r.axis,o).lo,0,t-1)),c?s=_i(vl(e,r.axis,a).hi+1,i,t)-i:s=t-i,{start:i,count:s}}var iie={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){LB(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),c=o||s.data;if(gm([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=n.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:u,count:d}=nie(l,c);const f=t.threshold||4*i;if(d<=f){NB(s);return}At(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let g;switch(t.algorithm){case"lttb":g=eie(c,u,d,i,t);break;case"min-max":g=tie(c,u,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=g})},destroy(n){LB(n)}};function sie(n,e,t){const i=n.segments,s=n.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=QE(l,c,s);const h=XE(t,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:s[l],end:s[c]});continue}const u=FF(e,h);for(const d of u){const f=XE(t,r[d.start],r[d.end],d.loop),g=$F(a,s,f);for(const p of g)o.push({source:p,target:d,start:{[t]:$B(h,f,"start",Math.max)},end:{[t]:$B(h,f,"end",Math.min)}})}}return o}function XE(n,e,t,i){if(i)return;let s=e[n],r=t[n];return n==="angle"&&(s=Qs(s),r=Qs(r)),{property:n,start:s,end:r}}function rie(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=QE(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):t!==null&&(r.push({x:t,y:l.y}),r.push({x:t,y:c.y}))}),r}function QE(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function $B(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function FB(n,e){let t=[],i=!1;return yn(n)?(i=!0,t=n):t=rie(n,e),t.length?new Lc({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function BB(n){return n&&n.fill!==!1}function oie(n,e,t){let s=n[e].fill;const r=[e];let o;if(!t)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!Wn(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function aie(n,e,t){const i=uie(n);if(bt(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Wn(s)&&Math.floor(s)===s?lie(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function lie(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function cie(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:bt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function hie(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:bt(n)?i=n.value:i=e.getBaseValue(),i}function uie(n){const e=n.options,t=e.fill;let i=Ke(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function die(n){const{scale:e,index:t,line:i}=n,s=[],r=i.segments,o=i.points,a=fie(e,t);a.push(FB({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let h=c.start;h<=c.end;h++)gie(s,o[h],a)}return new Lc({points:s,options:{}})}function fie(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function gie(n,e,t){const i=[];for(let s=0;s<t.length;s++){const r=t[s],{first:o,last:a,point:l}=pie(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function pie(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const h=r[c],u=o[h.start][t],d=o[h.end][t];if(wl(s,u,d)){a=s===u,l=s===d;break}}return{first:a,last:l,point:i}}class VB{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:r,radius:o}=this;return t=t||{start:0,end:dn},e.arc(s,r,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,r=e.angle;return{x:t+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function mie(n){const{chart:e,fill:t,line:i}=n;if(Wn(t))return bie(e,t);if(t==="stack")return die(n);if(t==="shape")return!0;const s=wie(n);return s instanceof VB?s:FB(s,i)}function bie(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function wie(n){return(n.scale||{}).getPointPositionForValue?yie(n):vie(n)}function vie(n){const{scale:e={},fill:t}=n,i=cie(t,e);if(Wn(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function yie(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=hie(t,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new VB({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function ZE(n,e,t){const i=mie(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:u=c}=l||{};i&&s.points.length&&(fu(n,t),Cie(n,{line:s,target:i,above:h,below:u,area:t,scale:r,axis:o}),gu(n))}function Cie(n,e){const{line:t,target:i,above:s,below:r,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&r!==s&&(WB(n,i,o.top),jB(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),WB(n,i,o.bottom)),jB(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore()}function WB(n,e,t){const{segments:i,points:s}=e;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,h=s[l],u=s[QE(l,c,s)];r?(n.moveTo(h.x,h.y),r=!1):(n.lineTo(h.x,t),n.lineTo(h.x,h.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(u.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function jB(n,e){const{line:t,target:i,property:s,color:r,scale:o}=e,a=sie(t,i,s);for(const{source:l,target:c,start:h,end:u}of a){const{style:{backgroundColor:d=r}={}}=l,f=i!==!0;n.save(),n.fillStyle=d,Sie(n,o,f&&XE(s,h,u)),n.beginPath();const g=!!t.pathSegment(n,l);let p;if(f){g?n.closePath():zB(n,i,u,s);const m=!!i.pathSegment(n,c,{move:g,reverse:!0});p=g&&m,p||zB(n,i,h,s)}n.closePath(),n.fill(p?"evenodd":"nonzero"),n.restore()}}function Sie(n,e,t){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=t||{};r==="x"&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function zB(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var _ie={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Lc&&(l={visible:n.isDatasetVisible(o),index:o,fill:aie(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=oie(s,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&ZE(n.ctx,a,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;BB(r)&&ZE(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!BB(i)||t.drawTime!=="beforeDatasetDraw"||ZE(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const UB=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},Rie=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class YB extends _r{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=cn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=li(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=UB(i,r);let c,h;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let u=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((g,p)=>{const m=i+t/2+r.measureText(g.text).width;(p===0||c[c.length-1]+m+2*a>o)&&(u+=h,c[c.length-(p>0?0:1)]=0,f+=h,d++),l[p]={left:0,top:f,row:d,width:m,height:s},c[c.length-1]+=m+a}),u}_fitCols(e,t,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let u=a,d=0,f=0,g=0,p=0;return this.legendItems.forEach((m,w)=>{const{itemWidth:y,itemHeight:C}=xie(i,t,r,m,s);w>0&&f+C+2*a>h&&(u+=d+a,c.push({width:d,height:f}),g+=d+a,p++,d=f=0),l[w]={left:g,top:f,col:p,width:y,height:C},d=Math.max(d,y),f+=C+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Hf(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=zi(i,this.left+s,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=zi(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=zi(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=zi(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;fu(e,this),this._draw(),gu(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=Cn.color,l=Hf(e.rtl,this.left,this.width),c=li(o.font),{padding:h}=o,u=c.size,d=u/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=UB(o,u),w=function(x,M,I){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;s.save();const A=Ke(I.lineWidth,1);if(s.fillStyle=Ke(I.fillStyle,a),s.lineCap=Ke(I.lineCap,"butt"),s.lineDashOffset=Ke(I.lineDashOffset,0),s.lineJoin=Ke(I.lineJoin,"miter"),s.lineWidth=A,s.strokeStyle=Ke(I.strokeStyle,a),s.setLineDash(Ke(I.lineDash,[])),o.usePointStyle){const O={radius:p*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:A},D=l.xPlus(x,g/2),j=M+d;SF(s,O,D,j,o.pointStyleWidth&&g)}else{const O=M+Math.max((u-p)/2,0),D=l.leftForLtr(x,g),j=mu(I.borderRadius);s.beginPath(),Object.values(j).some(Y=>Y!==0)?fm(s,{x:D,y:O,w:g,h:p,radius:j}):s.rect(D,O,g,p),s.fill(),A!==0&&s.stroke()}s.restore()},y=function(x,M,I){pu(s,I.text,x,M+m/2,c,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},C=this.isHorizontal(),R=this._computeTitleHeight();C?f={x:zi(r,this.left+h,this.right-i[0]),y:this.top+h+R,line:0}:f={x:this.left+h,y:zi(r,this.top+R+h,this.bottom-t[0].height),line:0},HF(this.ctx,e.textDirection);const _=m+h;this.legendItems.forEach((x,M)=>{s.strokeStyle=x.fontColor,s.fillStyle=x.fontColor;const I=s.measureText(x.text).width,A=l.textAlign(x.textAlign||(x.textAlign=o.textAlign)),O=g+d+I;let D=f.x,j=f.y;l.setWidth(this.width),C?M>0&&D+O+h>this.right&&(j=f.y+=_,f.line++,D=f.x=zi(r,this.left+h,this.right-i[f.line])):M>0&&j+_>this.bottom&&(D=f.x=D+t[f.line].width+h,f.line++,j=f.y=zi(r,this.top+R+h,this.bottom-t[f.line].height));const Y=l.x(D);if(w(Y,j,x),D=UJ(A,D+g+d,C?D+O:this.right,e.rtl),y(l.x(D),j,x),C)f.x+=O+h;else if(typeof x.text!="string"){const Z=c.lineHeight;f.y+=GB(x,Z)+h}else f.y+=_}),DF(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=li(t.font),s=Ui(t.padding);if(!t.display)return;const r=Hf(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=s.top+l;let h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=zi(e.align,u,this.right-d);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);h=c+zi(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=zi(a,u,u+d);o.textAlign=r.textAlign(RE(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,pu(o,t.text,f,h,i)}_computeTitleHeight(){const e=this.options.title,t=li(e.font),i=Ui(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(wl(e,this.left,this.right)&&wl(t,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],wl(e,s.left,s.left+s.width)&&wl(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!Mie(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=Rie(s,i);s&&!r&&cn(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&cn(t.onHover,[e,i,this],this)}else i&&cn(t.onClick,[e,i,this],this)}}function xie(n,e,t,i,s){const r=Eie(i,n,e,t),o=Tie(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function Eie(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+i.measureText(s).width}function Tie(n,e,t){let i=n;return typeof e.text!="string"&&(i=GB(e,t)),i}function GB(n,e){const t=n.text?n.text.length:0;return e*t}function Mie(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Aie={id:"legend",_element:YB,start(n,e,t){const i=n.legend=new YB({ctx:n.ctx,options:t,chart:n});Yi.configure(n,i,t),Yi.addBox(n,i)},stop(n){Yi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;Yi.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),h=Ui(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class JE extends _r{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=yn(i.text)?i.text.length:1;this._padding=Ui(i.padding);const r=s*li(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,h,u;return this.isHorizontal()?(h=zi(a,i,r),u=t+e,c=r-i):(o.position==="left"?(h=i+e,u=zi(a,s,t),l=un*-.5):(h=r-e,u=zi(a,t,s),l=un*.5),c=s-t),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=li(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);pu(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:RE(t.align),textBaseline:"middle",translation:[o,a]})}}function Pie(n,e){const t=new JE({ctx:n.ctx,options:e,chart:n});Yi.configure(n,t,e),Yi.addBox(n,t),n.titleBlock=t}var Iie={id:"title",_element:JE,start(n,e,t){Pie(n,t)},stop(n){const e=n.titleBlock;Yi.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;Yi.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const r0=new WeakMap;var Oie={id:"subtitle",start(n,e,t){const i=new JE({ctx:n.ctx,options:t,chart:n});Yi.configure(n,i,t),Yi.addBox(n,i),r0.set(n,i)},stop(n){Yi.removeBox(n,r0.get(n)),r0.delete(n)},beforeUpdate(n,e,t){const i=r0.get(n);Yi.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Em={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,r=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=SE(e,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function sa(n,e){return e&&(yn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Sl(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function kie(n,e){const{element:t,datasetIndex:i,index:s}=e,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function KB(n,e){const t=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=e,l=li(e.bodyFont),c=li(e.titleFont),h=li(e.footerFont),u=r.length,d=s.length,f=i.length,g=Ui(e.padding);let p=g.height,m=0,w=i.reduce((R,_)=>R+_.before.length+_.lines.length+_.after.length,0);if(w+=n.beforeBody.length+n.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),w){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=f*R+(w-f)*l.lineHeight+(w-1)*e.bodySpacing}d&&(p+=e.footerMarginTop+d*h.lineHeight+(d-1)*e.footerSpacing);let y=0;const C=function(R){m=Math.max(m,t.measureText(R).width+y)};return t.save(),t.font=c.string,zt(n.title,C),t.font=l.string,zt(n.beforeBody.concat(n.afterBody),C),y=e.displayColors?o+2+e.boxPadding:0,zt(i,R=>{zt(R.before,C),zt(R.lines,C),zt(R.after,C)}),y=0,t.font=h.string,zt(n.footer,C),t.restore(),m+=g.width,{width:m,height:p}}function Hie(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function Die(n,e,t,i){const{x:s,width:r}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&s+r+o>e.width||n==="right"&&s-r-o<0)return!0}function Nie(n,e,t,i){const{x:s,width:r}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),Die(c,n,e,t)&&(c="center"),c}function qB(n,e,t){const i=t.yAlign||e.yAlign||Hie(n,t);return{xAlign:t.xAlign||e.xAlign||Nie(n,e,t,i),yAlign:i}}function Lie(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function $ie(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function XB(n,e,t,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=s+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=mu(o);let g=Lie(e,a);const p=$ie(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(h,d)+s:a==="right"&&(g+=Math.max(u,f)+s),{x:_i(g,0,i.width-e.width),y:_i(p,0,i.height-e.height)}}function o0(n,e,t){const i=Ui(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function QB(n){return sa([],Sl(n))}function Fie(n,e,t){return Dc(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function ZB(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const JB={beforeTitle:bl,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:bl,beforeBody:bl,beforeLabel:bl,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return At(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:bl,afterBody:bl,beforeFooter:bl,footer:bl,afterFooter:bl};function Ss(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?JB[e].call(t,i):s}class eT extends _r{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,r=new jF(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Fie(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=Ss(i,"beforeTitle",this,e),r=Ss(i,"title",this,e),o=Ss(i,"afterTitle",this,e);let a=[];return a=sa(a,Sl(s)),a=sa(a,Sl(r)),a=sa(a,Sl(o)),a}getBeforeBody(e,t){return QB(Ss(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return zt(e,r=>{const o={before:[],lines:[],after:[]},a=ZB(i,r);sa(o.before,Sl(Ss(a,"beforeLabel",this,r))),sa(o.lines,Ss(a,"label",this,r)),sa(o.after,Sl(Ss(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,t){return QB(Ss(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=Ss(i,"beforeFooter",this,e),r=Ss(i,"footer",this,e),o=Ss(i,"afterFooter",this,e);let a=[];return a=sa(a,Sl(s)),a=sa(a,Sl(r)),a=sa(a,Sl(o)),a}_createItems(e){const t=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(kie(this.chart,t[l]));return e.filter&&(a=a.filter((h,u,d)=>e.filter(h,u,d,i))),e.itemSort&&(a=a.sort((h,u)=>e.itemSort(h,u,i))),zt(a,h=>{const u=ZB(e.callbacks,h);s.push(Ss(u,"labelColor",this,h)),r.push(Ss(u,"labelPointStyle",this,h)),o.push(Ss(u,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Em[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=KB(this,i),c=Object.assign({},a,l),h=qB(this.chart,i,c),u=XB(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const r=this.getCaretPosition(e,i,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=mu(a),{x:d,y:f}=e,{width:g,height:p}=t;let m,w,y,C,R,_;return r==="center"?(R=f+p/2,s==="left"?(m=d,w=m-o,C=R+o,_=R-o):(m=d+g,w=m+o,C=R-o,_=R+o),y=m):(s==="left"?w=d+Math.max(l,h)+o:s==="right"?w=d+g-Math.max(c,u)-o:w=this.caretX,r==="top"?(C=f,R=C-o,m=w-o,y=w+o):(C=f+p,R=C+o,m=w+o,y=w-o),_=C),{x1:m,x2:w,x3:y,y1:C,y2:R,y3:_}}drawTitle(e,t,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Hf(i.rtl,this.x,this.width);for(e.x=o0(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=li(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<r;++l)t.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,h=li(r.bodyFont),u=o0(this,"left",r),d=s.x(u),f=l<h.lineHeight?(h.lineHeight-l)/2:0,g=t.y+f;if(r.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=s.leftForLtr(d,c)+c/2,w=g+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,By(e,p,m,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,By(e,p,m,w)}else{e.lineWidth=bt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=s.leftForLtr(d,c),m=s.leftForLtr(s.xPlus(d,1),c-2),w=mu(o.borderRadius);Object.values(w).some(y=>y!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,fm(e,{x:p,y:g,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),fm(e,{x:m,y:g+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(p,g,c,l),e.strokeRect(p,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,u=li(i.bodyFont);let d=u.lineHeight,f=0;const g=Hf(i.rtl,this.x,this.width),p=function(I){t.fillText(I,g.x(e.x+f),e.y+d/2),e.y+=d+r},m=g.textAlign(o);let w,y,C,R,_,x,M;for(t.textAlign=o,t.textBaseline="middle",t.font=u.string,e.x=o0(this,m,i),t.fillStyle=i.bodyColor,zt(this.beforeBody,p),f=a&&m!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,x=s.length;R<x;++R){for(w=s[R],y=this.labelTextColors[R],t.fillStyle=y,zt(w.before,p),C=w.lines,a&&C.length&&(this._drawColorBox(t,e,R,g,i),d=Math.max(u.lineHeight,l)),_=0,M=C.length;_<M;++_)p(C[_]),d=u.lineHeight;zt(w.after,p)}f=0,d=u.lineHeight,zt(this.afterBody,p),e.y-=r}drawFooter(e,t,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Hf(i.rtl,this.x,this.width);for(e.x=o0(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=li(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<r;++a)t.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:g}=mu(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(a+u,l),o==="top"&&this.drawCaret(e,t,i,s),t.lineTo(a+c-d,l),t.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(e,t,i,s),t.lineTo(a+c,l+h-g),t.quadraticCurveTo(a+c,l+h,a+c-g,l+h),o==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(a+f,l+h),t.quadraticCurveTo(a,l+h,a,l+h-f),o==="center"&&r==="left"&&this.drawCaret(e,t,i,s),t.lineTo(a,l+u),t.quadraticCurveTo(a,l,a+u,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Em[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=KB(this,e),l=Object.assign({},o,this._size),c=qB(t,e,l),h=XB(e,l,c,t);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ui(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,t),HF(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),DF(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Hy(i,s),o=this._positionChanged(s,t);(r||o)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,i),a=this._positionChanged(o,e),l=t||!Hy(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:s,options:r}=this,o=Em[r.position].call(this,e,t);return o!==!1&&(i!==o.x||s!==o.y)}}eT.positioners=Em;var Bie={id:"tooltip",_element:eT,positioners:Em,afterInit(n,e,t){t&&(n.tooltip=new eT({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:JB},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Vie=Object.freeze({__proto__:null,Colors:Jne,Decimation:iie,Filler:_ie,Legend:Aie,SubTitle:Oie,Title:Iie,Tooltip:Bie});const Wie=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function jie(n,e,t,i){const s=n.indexOf(e);if(s===-1)return Wie(n,e,t,i);const r=n.lastIndexOf(e);return s!==r?t:s}const zie=(n,e)=>n===null?null:_i(Math.round(n),0,e);function eV(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class tT extends Nc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:r}of t)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(At(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:jie(i,e,Ke(t,e),this._addedLabels),zie(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)s.push({value:o});return s}getLabelForValue(e){return eV.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}tT.id="category",tT.defaults={ticks:{callback:eV}};function Uie(n,e){const t=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:d}=n,f=r||1,g=h-1,{min:p,max:m}=e,w=!At(o),y=!At(a),C=!At(c),R=(m-p)/(u+1);let _=rF((m-p)/g/f)*f,x,M,I,A;if(_<1e-14&&!w&&!y)return[{value:p},{value:m}];A=Math.ceil(m/_)-Math.floor(p/_),A>g&&(_=rF(A*_/g/f)*f),At(l)||(x=Math.pow(10,l),_=Math.ceil(_*x)/x),s==="ticks"?(M=Math.floor(p/_)*_,I=Math.ceil(m/_)*_):(M=p,I=m),w&&y&&r&&$J((a-o)/r,_/1e3)?(A=Math.round(Math.min((a-o)/_,h)),_=(a-o)/A,M=o,I=a):C?(M=w?o:M,I=y?a:I,A=c-1,_=(I-M)/A):(A=(I-M)/_,lm(A,Math.round(A),_/1e3)?A=Math.round(A):A=Math.ceil(A));const O=Math.max(aF(_),aF(M));x=Math.pow(10,At(l)?O:l),M=Math.round(M*x)/x,I=Math.round(I*x)/x;let D=0;for(w&&(d&&M!==o?(t.push({value:o}),M<o&&D++,lm(Math.round((M+D*_)*x)/x,o,tV(o,R,n))&&D++):M<o&&D++);D<A;++D){const j=Math.round((M+D*_)*x)/x;if(y&&j>a)break;t.push({value:j})}return y&&d&&I!==a?t.length&&lm(t[t.length-1].value,a,tV(a,R,n))?t[t.length-1].value=a:t.push({value:a}):(!y||I===a)&&t.push({value:I}),t}function tV(n,e,{horizontal:t,minRotation:i}){const s=lo(i),r=(t?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+n).length;return Math.min(e/r,o)}class a0 extends Nc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return At(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=t?s:l,a=l=>r=i?r:l;if(e){const l=ia(s),c=ia(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=Uie(s,r);return e.bounds==="ticks"&&oF(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return um(e,this.chart.options.locale,this.options.ticks.format)}}class Lf extends a0{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Wn(e)?e:0,this.max=Wn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=lo(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Lf.id="linear",Lf.defaults={ticks:{callback:$y.formatters.numeric}};const Tm=n=>Math.floor(Hc(n)),Su=(n,e)=>Math.pow(10,Tm(n)+e);function nV(n){return n/Math.pow(10,Tm(n))===1}function iV(n,e,t){const i=Math.pow(10,t),s=Math.floor(n/i);return Math.ceil(e/i)-s}function Yie(n,e){const t=e-n;let i=Tm(t);for(;iV(n,e,i)>10;)i++;for(;iV(n,e,i)<10;)i--;return Math.min(i,Tm(n))}function Gie(n,{min:e,max:t}){e=qs(n.min,e);const i=[],s=Tm(e);let r=Yie(e,t),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let u=Math.floor((c-h)/Math.pow(10,r)),d=qs(n.min,Math.round((l+h+u*Math.pow(10,r))*o)/o);for(;d<t;)i.push({value:d,major:nV(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),d=Math.round((l+h+u*Math.pow(10,r))*o)/o;const f=qs(n.max,d);return i.push({value:f,major:nV(f),significand:u}),i}class $f extends Nc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=a0.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Wn(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Wn(e)?Math.max(0,e):null,this.max=Wn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Wn(this._userMin)&&(this.min=e===Su(this.min,0)?Su(this.min,-1):Su(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=t?s:a;i===s&&(i<=0?(r(1),o(10)):(r(Su(i,-1)),o(Su(s,1)))),i<=0&&r(Su(s,-1)),s<=0&&o(Su(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=Gie(t,this);return e.bounds==="ticks"&&oF(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":um(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Hc(e),this._valueRange=Hc(this.max)-Hc(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Hc(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}$f.id="logarithmic",$f.defaults={ticks:{callback:$y.formatters.logarithmic,major:{enabled:!0}}};function nT(n){const e=n.ticks;if(e.display&&n.display){const t=Ui(e.backdropPadding);return Ke(e.font&&e.font.size,Cn.font.size)+t.height}return 0}function Kie(n,e,t){return t=yn(t)?t:[t],{w:tee(n,e.string,t),h:t.length*e.lineHeight}}function sV(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function qie(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?un/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;const h=n.getPointPosition(l,n.drawingArea+s[l],a),u=li(c.font),d=Kie(n.ctx,u,n._pointLabels[l]);i[l]=d;const f=Qs(n.getIndexAngle(l)+a),g=Math.round(CE(f)),p=sV(g,h.x,d.w,0,180),m=sV(g,h.y,d.h,90,270);Xie(t,e,f,p,m)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=Jie(n,i,s)}function Xie(n,e,t,i,s){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,n.r=Math.max(n.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,n.t=Math.min(n.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function Qie(n,e,t){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=t,l=n.getPointPosition(e,i+s+o,r),c=Math.round(CE(Qs(l.angle+qn))),h=nse(l.y,a.h,c),u=ese(c),d=tse(l.x,a.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+a.w,bottom:h+a.h}}function Zie(n,e){if(!e)return!0;const{left:t,top:i,right:s,bottom:r}=n;return!(yl({x:t,y:i},e)||yl({x:t,y:r},e)||yl({x:s,y:i},e)||yl({x:s,y:r},e))}function Jie(n,e,t){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:nT(r)/2,additionalAngle:o?un/s:0};let c;for(let h=0;h<s;h++){l.padding=t[h],l.size=e[h];const u=Qie(n,h,l);i.push(u),a==="auto"&&(u.visible=Zie(u,c),u.visible&&(c=u))}return i}function ese(n){return n===0||n===180?"center":n<180?"left":"right"}function tse(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function nse(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function ise(n,e,t){const{left:i,top:s,right:r,bottom:o}=t,{backdropColor:a}=e;if(!At(a)){const l=mu(e.borderRadius),c=Ui(e.backdropPadding);n.fillStyle=a;const h=i-c.left,u=s-c.top,d=r-i+c.width,f=o-s+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),fm(n,{x:h,y:u,w:d,h:f,radius:l}),n.fill()):n.fillRect(h,u,d,f)}}function sse(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));ise(t,o,r);const a=li(o.font),{x:l,y:c,textAlign:h}=r;pu(t,n._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function rV(n,e,t,i){const{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,dn);else{let r=n.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function rse(n,e,t,i,s){const r=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),rV(n,t,o,i),r.closePath(),r.stroke(),r.restore())}function ose(n,e,t){return Dc(n,{label:t,index:e,type:"pointLabel"})}class Mm extends a0{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ui(nT(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Wn(e)&&!isNaN(e)?e:0,this.max=Wn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/nT(this.options))}generateTickLabels(e){a0.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const s=cn(this.options.pointLabels.callback,[t,i],this);return s||s===0?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?qie(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){const t=dn/(this._pointLabels.length||1),i=this.options.startAngle||0;return Qs(e*t+lo(i))}getDistanceFromCenterForValue(e){if(At(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(At(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return ose(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-qn+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),rV(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s,border:r}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&sse(this,o),s.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const d=this.getContext(u),f=s.setContext(d),g=r.setContext(d);rse(this,f,l,o,g)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=h;!d||!u||(e.lineWidth=d,e.strokeStyle=u,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),h=li(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const u=Ui(c.backdropPadding);e.fillRect(-o/2-u.left,-r-h.size/2-u.top,o+u.width,h.size+u.height)}pu(e,a.label,0,-r,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Mm.id="radialLinear",Mm.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:$y.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}},Mm.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Mm.descriptors={angleLines:{_fallback:"grid"}};const l0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_s=Object.keys(l0);function oV(n,e){return n-e}function aV(n,e){if(At(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Wn(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(s&&(o=s==="week"&&(If(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,s)),+o)}function lV(n,e,t,i){const s=_s.length;for(let r=_s.indexOf(n);r<s-1;++r){const o=l0[_s[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return _s[r]}return _s[s-1]}function ase(n,e,t,i,s){for(let r=_s.length-1;r>=_s.indexOf(t);r--){const o=_s[r];if(l0[o].common&&n._adapter.diff(s,i,o)>=e-1)return o}return _s[t?_s.indexOf(t):0]}function lse(n){for(let e=_s.indexOf(n)+1,t=_s.length;e<t;++e)if(l0[_s[e]].common)return _s[e]}function cV(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=_E(t,e),r=t[i]>=e?t[i]:t[s];n[r]=!0}}function cse(n,e,t,i){const s=n._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function hV(n,e,t){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!t?i:cse(n,i,s,t)}class Am extends Nc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new bte._date(e.adapters.date);s.init(t),om(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:aV(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Wn(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),r=Wn(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=WJ(s,r,o);return this._unit=t.unit||(i.autoSkip?lV(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):ase(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:lse(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),hV(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=_i(t,0,o),i=_i(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||lV(r.minUnit,t,i,this._getLabelCapacity(t)),a=Ke(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=If(l)||l===!0,h={};let u=t,d,f;if(c&&(u=+e.startOf(u,"isoWeek",l)),u=+e.startOf(u,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<i;d=+e.add(d,a,o),f++)cV(h,d,g);return(d===i||s.bounds==="ticks"||f===1)&&cV(h,d,g),Object.keys(h).sort(oV).map(p=>+p)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,o=t||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,s){const r=this.options,o=r.ticks.callback;if(o)return cn(o,[e,t,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],u=c&&a[c],d=i[t],f=c&&u&&d&&d.major;return this._adapter.format(e,s||(f?u:h))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=lo(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,hV(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(aV(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return uF(e.sort(oV))}}Am.id="time",Am.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};function c0(n,e,t){let i=0,s=n.length-1,r,o,a,l;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=vl(n,"pos",e)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=vl(n,"time",e)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class iT extends Am{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=c0(t,this.min),this._tableRange=c0(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],r=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(c0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return c0(this._table,i*this._tableRange+this._minPos,!0)}}iT.id="timeseries",iT.defaults=Am.defaults;var hse=Object.freeze({__proto__:null,CategoryScale:tT,LinearScale:Lf,LogarithmicScale:$f,RadialLinearScale:Mm,TimeScale:Am,TimeSeriesScale:iT});const uV=[mte,Yne,Vie,hse];Zs.register(...uV);function dV(n,e,t,i={}){return new Zs(n,{type:e,data:t,options:i})}Cc.getOrCreate(globalThis);var fV;let gV;function use(n,e,t,i,s,r){var o,a,l,c,h,u,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],w=e.length;function y(x,M,I){return function(A,O){M&&(O=A,A=n);for(var D=0;D<x.length;D++)O=x[D].apply(A,I?[O]:[]);return I?O:A}}function C(x,M,I,A){if(typeof x!="function"&&(A||x!==void 0))throw new TypeError(M+" must "+(I||"be")+" a function"+(A?"":" or undefined"));return x}function R(x,M,I,A,O,D,j,Y,Z,$,B){function ie(oe){if(!B(oe))throw new TypeError("Attempted to access private element on non-instance")}var se=[].concat(M[0]),te=M[3],pe=!j,b=O===1,v=O===3,S=O===4,T=O===2;function H(oe,ce,Ve){return function(Se,_e){return ce&&(_e=Se,Se=x),Ve&&Ve(Se),E[oe].call(Se,_e)}}if(!pe){var E={},N=[],X=v?"get":S||b?"set":"value";if(Z?($||b?E={get:pV(function(){return te(this)},A,"get"),set:function(oe){M[4](this,oe)}}:E[X]=te,$||pV(E[X],A,T?"":X)):$||(E=Object.getOwnPropertyDescriptor(x,A)),!$&&!Z){if((a=m[+Y][A])&&(a^O)!=7)throw Error("Decorating two elements with the same name ("+E[X].name+") is not supported yet");m[+Y][A]=O<3?1:O}}for(var ne=x,he=se.length-1;he>=0;he-=I?2:1){var re=C(se[he],"A decorator","be",!0),ke=I?se[he-1]:void 0,Ee={},J={kind:["field","accessor","method","getter","setter","class"][O],name:A,metadata:o,addInitializer:(function(oe,ce){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");C(ce,"An initializer","be",!0),D.push(ce)}).bind(null,Ee)};if(pe)a=re.call(ke,ne,J),Ee.v=1,C(a,"class decorators","return")&&(ne=a);else if(J.static=Y,J.private=Z,a=J.access={has:Z?B.bind():function(oe){return A in oe}},S||(a.get=Z?T?function(oe){return ie(oe),E.value}:H("get",0,ie):function(oe){return oe[A]}),T||v||(a.set=Z?H("set",0,ie):function(oe,ce){oe[A]=ce}),ne=re.call(ke,b?{get:E.get,set:E.set}:E[X],J),Ee.v=1,b){if(typeof ne=="object"&&ne)(a=C(ne.get,"accessor.get"))&&(E.get=a),(a=C(ne.set,"accessor.set"))&&(E.set=a),(a=C(ne.init,"accessor.init"))&&N.unshift(a);else if(ne!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else C(ne,($?"field":"method")+" decorators","return")&&($?N.unshift(ne):E[X]=ne)}return O<2&&j.push(y(N,Y,1),y(D,Y,0)),$||pe||(Z?b?j.splice(-1,0,H("get",Y),H("set",Y)):j.push(T?E[X]:C.call.bind(E[X])):g(x,A,E)),ne}function _(x){return g(x,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),h=[],u=function(x){x&&h.push(y(x))},d=function(x,M){for(var I=0;I<t.length;I++){var A=t[I],O=A[1],D=7&O;if((8&O)==x&&!D==M){var j=A[2],Y=!!A[3],Z=16&O;R(x?n:n.prototype,A,Z,Y?"#"+j:dse(j),D,D<2?[]:x?c=c||[]:l=l||[],h,!!x,Y,M,x&&Y?function($){return gse($)===n}:s)}}},d(8,0),d(0,0),d(8,1),d(0,1),u(l),u(c),a=h,w||_(n),{e:a,get c(){var x=[];return w&&[_(n=R(n,[e],i,n.name,5,x)),y(x,1)]}}}function dse(n){var e=fse(n,"string");return typeof e=="symbol"?e:e+""}function fse(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pV(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function gse(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let h0;class pse{constructor(){this.mychart=void 0}bind(){}attached(){const e=[{year:2010,count:10},{year:2011,count:20},{year:2012,count:15},{year:2013,count:25},{year:2014,count:22},{year:2015,count:30},{year:2016,count:28}],t={labels:e.map(i=>i.year),datasets:[{label:"Acquisitions by year",data:e.map(i=>i.count)}]};this.chartjs=dV(this.mychart,"bar",t)}}fV=pse,[h0,gV]=use(fV,[Cy({...rJ,name:"sv-chartjs"})],[]).c,gV();const mV="chartjs-scatter",sT=`<div>
    chart-scatter view - should not be used
    <canvas ref="mychart"></canvas>
</div>
`,bV=[],wV={};let rT;function mse(n){rT||(rT=Ks.define({name:mV,template:sT,dependencies:bV,bindables:wV})),n.register(rT)}const bse=Object.freeze(Object.defineProperty({__proto__:null,bindables:wV,default:sT,dependencies:bV,name:mV,register:mse,template:sT},Symbol.toStringTag,{value:"Module"}));var vV;let yV;function wse(n,e,t,i,s,r){var o,a,l,c,h,u,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],w=e.length;function y(x,M,I){return function(A,O){M&&(O=A,A=n);for(var D=0;D<x.length;D++)O=x[D].apply(A,I?[O]:[]);return I?O:A}}function C(x,M,I,A){if(typeof x!="function"&&(A||x!==void 0))throw new TypeError(M+" must "+(I||"be")+" a function"+(A?"":" or undefined"));return x}function R(x,M,I,A,O,D,j,Y,Z,$,B){function ie(oe){if(!B(oe))throw new TypeError("Attempted to access private element on non-instance")}var se=[].concat(M[0]),te=M[3],pe=!j,b=O===1,v=O===3,S=O===4,T=O===2;function H(oe,ce,Ve){return function(Se,_e){return ce&&(_e=Se,Se=x),Ve&&Ve(Se),E[oe].call(Se,_e)}}if(!pe){var E={},N=[],X=v?"get":S||b?"set":"value";if(Z?($||b?E={get:CV(function(){return te(this)},A,"get"),set:function(oe){M[4](this,oe)}}:E[X]=te,$||CV(E[X],A,T?"":X)):$||(E=Object.getOwnPropertyDescriptor(x,A)),!$&&!Z){if((a=m[+Y][A])&&(a^O)!=7)throw Error("Decorating two elements with the same name ("+E[X].name+") is not supported yet");m[+Y][A]=O<3?1:O}}for(var ne=x,he=se.length-1;he>=0;he-=I?2:1){var re=C(se[he],"A decorator","be",!0),ke=I?se[he-1]:void 0,Ee={},J={kind:["field","accessor","method","getter","setter","class"][O],name:A,metadata:o,addInitializer:(function(oe,ce){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");C(ce,"An initializer","be",!0),D.push(ce)}).bind(null,Ee)};if(pe)a=re.call(ke,ne,J),Ee.v=1,C(a,"class decorators","return")&&(ne=a);else if(J.static=Y,J.private=Z,a=J.access={has:Z?B.bind():function(oe){return A in oe}},S||(a.get=Z?T?function(oe){return ie(oe),E.value}:H("get",0,ie):function(oe){return oe[A]}),T||v||(a.set=Z?H("set",0,ie):function(oe,ce){oe[A]=ce}),ne=re.call(ke,b?{get:E.get,set:E.set}:E[X],J),Ee.v=1,b){if(typeof ne=="object"&&ne)(a=C(ne.get,"accessor.get"))&&(E.get=a),(a=C(ne.set,"accessor.set"))&&(E.set=a),(a=C(ne.init,"accessor.init"))&&N.unshift(a);else if(ne!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else C(ne,($?"field":"method")+" decorators","return")&&($?N.unshift(ne):E[X]=ne)}return O<2&&j.push(y(N,Y,1),y(D,Y,0)),$||pe||(Z?b?j.splice(-1,0,H("get",Y),H("set",Y)):j.push(T?E[X]:C.call.bind(E[X])):g(x,A,E)),ne}function _(x){return g(x,f,{configurable:!0,enumerable:!0,value:o})}return r!==void 0&&(o=r[f]),o=p(o??null),h=[],u=function(x){x&&h.push(y(x))},d=function(x,M){for(var I=0;I<t.length;I++){var A=t[I],O=A[1],D=7&O;if((8&O)==x&&!D==M){var j=A[2],Y=!!A[3],Z=16&O;R(x?n:n.prototype,A,Z,Y?"#"+j:vse(j),D,D<2?[]:x?c=c||[]:l=l||[],h,!!x,Y,M,x&&Y?function($){return Cse($)===n}:s)}}},d(8,0),d(0,0),d(8,1),d(0,1),u(l),u(c),a=h,w||_(n),{e:a,get c(){var x=[];return w&&[_(n=R(n,[e],i,n.name,5,x)),y(x,1)]}}}function vse(n){var e=yse(n,"string");return typeof e=="symbol"?e:e+""}function yse(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function CV(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function Cse(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let SV;class Sse extends h0{constructor(...e){super(...e),this.mychart=void 0}bind(){}attached(){const e={datasets:[{label:"First Dataset",data:[{x:20,y:30,r:15},{x:40,y:10,r:10},{x:30,y:12,r:5}]},{label:"Second Dataset",data:[{x:19,y:32,r:2},{x:41,y:12,r:5},{x:35,y:11,r:6}]}]};this.chartjs=dV(this.mychart,"bubble",e)}}vV=Sse,[SV,yV]=wse(vV,[Cy({...bse,name:"sv-chartjs-scatter"})],[],0,void 0,h0).c,yV();const _V="table",oT=`<button class="w3-button w3-grey" click.trigger="submit()" show.bind="showtable">submit</button>
<button class="w3-button w3-grey" click.trigger="addRow()" show.bind="showtable">+ Subject (row)</button>
<button class="w3-button w3-grey" click.trigger="addColumn()" show.bind="showtable">+ Object (column)</button>
<button class="w3-button w3-grey" click.trigger="showHide()">show/hide</button>
<div ref="mytable" show.bind="showtable"></div>`,RV=[],xV={};let aT;function _se(n){aT||(aT=Ks.define({name:_V,template:oT,dependencies:RV,bindables:xV})),n.register(aT)}const Rse=Object.freeze(Object.defineProperty({__proto__:null,bindables:xV,default:oT,dependencies:RV,name:_V,register:_se,template:oT},Symbol.toStringTag,{value:"Module"}));var Ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xse(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pm=function(n){return n&&n.Math===Math&&n},Ii=Pm(typeof globalThis=="object"&&globalThis)||Pm(typeof window=="object"&&window)||Pm(typeof self=="object"&&self)||Pm(typeof Ff=="object"&&Ff)||Pm(typeof Ff=="object"&&Ff)||function(){return this}()||Function("return this")(),lT={},Rs=function(n){try{return!!n()}catch{return!0}},Ese=Rs,co=!Ese(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Tse=Rs,u0=!Tse(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),Mse=u0,d0=Function.prototype.call,ho=Mse?d0.bind(d0):function(){return d0.apply(d0,arguments)},EV={},TV={}.propertyIsEnumerable,MV=Object.getOwnPropertyDescriptor,Ase=MV&&!TV.call({1:2},1);EV.f=Ase?function(e){var t=MV(this,e);return!!t&&t.enumerable}:TV;var f0=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}},AV=u0,PV=Function.prototype,cT=PV.call,Pse=AV&&PV.bind.bind(cT,cT),oi=AV?Pse:function(n){return function(){return cT.apply(n,arguments)}},IV=oi,Ise=IV({}.toString),Ose=IV("".slice),_u=function(n){return Ose(Ise(n),8,-1)},kse=oi,Hse=Rs,Dse=_u,hT=Object,Nse=kse("".split),Lse=Hse(function(){return!hT("z").propertyIsEnumerable(0)})?function(n){return Dse(n)==="String"?Nse(n,""):hT(n)}:hT,g0=function(n){return n==null},$se=g0,Fse=TypeError,Im=function(n){if($se(n))throw new Fse("Can't call method on "+n);return n},Bse=Lse,Vse=Im,p0=function(n){return Bse(Vse(n))},uT=typeof document=="object"&&document.all,Oi=typeof uT>"u"&&uT!==void 0?function(n){return typeof n=="function"||n===uT}:function(n){return typeof n=="function"},Wse=Oi,ra=function(n){return typeof n=="object"?n!==null:Wse(n)},dT=Ii,jse=Oi,zse=function(n){return jse(n)?n:void 0},Bf=function(n,e){return arguments.length<2?zse(dT[n]):dT[n]&&dT[n][e]},Use=oi,m0=Use({}.isPrototypeOf),Yse=Ii,OV=Yse.navigator,kV=OV&&OV.userAgent,b0=kV?String(kV):"",HV=Ii,fT=b0,DV=HV.process,NV=HV.Deno,LV=DV&&DV.versions||NV&&NV.version,$V=LV&&LV.v8,uo,w0;$V&&(uo=$V.split("."),w0=uo[0]>0&&uo[0]<4?1:+(uo[0]+uo[1])),!w0&&fT&&(uo=fT.match(/Edge\/(\d+)/),(!uo||uo[1]>=74)&&(uo=fT.match(/Chrome\/(\d+)/),uo&&(w0=+uo[1])));var Gse=w0,FV=Gse,Kse=Rs,qse=Ii,Xse=qse.String,gT=!!Object.getOwnPropertySymbols&&!Kse(function(){var n=Symbol("symbol detection");return!Xse(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&FV&&FV<41}),Qse=gT,BV=Qse&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Zse=Bf,Jse=Oi,ere=m0,tre=BV,nre=Object,pT=tre?function(n){return typeof n=="symbol"}:function(n){var e=Zse("Symbol");return Jse(e)&&ere(e.prototype,nre(n))},ire=String,v0=function(n){try{return ire(n)}catch{return"Object"}},sre=Oi,rre=v0,ore=TypeError,Om=function(n){if(sre(n))return n;throw new ore(rre(n)+" is not a function")},are=Om,lre=g0,y0=function(n,e){var t=n[e];return lre(t)?void 0:are(t)},mT=ho,bT=Oi,wT=ra,cre=TypeError,hre=function(n,e){var t,i;if(e==="string"&&bT(t=n.toString)&&!wT(i=mT(t,n))||bT(t=n.valueOf)&&!wT(i=mT(t,n))||e!=="string"&&bT(t=n.toString)&&!wT(i=mT(t,n)))return i;throw new cre("Can't convert object to primitive value")},VV={exports:{}},WV=Ii,ure=Object.defineProperty,vT=function(n,e){try{ure(WV,n,{value:e,configurable:!0,writable:!0})}catch{WV[n]=e}return e},dre=Ii,fre=vT,jV="__core-js_shared__",zV=VV.exports=dre[jV]||fre(jV,{});(zV.versions||(zV.versions=[])).push({version:"3.39.0",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"});var yT=VV.exports,UV=yT,YV=function(n,e){return UV[n]||(UV[n]=e||{})},gre=Im,pre=Object,km=function(n){return pre(gre(n))},mre=oi,bre=km,wre=mre({}.hasOwnProperty),oa=Object.hasOwn||function(e,t){return wre(bre(e),t)},vre=oi,yre=0,Cre=Math.random(),Sre=vre(1 .toString),GV=function(n){return"Symbol("+(n===void 0?"":n)+")_"+Sre(++yre+Cre,36)},_re=Ii,Rre=YV,KV=oa,xre=GV,Ere=gT,Tre=BV,Vf=_re.Symbol,CT=Rre("wks"),Mre=Tre?Vf.for||Vf:Vf&&Vf.withoutSetter||xre,Fc=function(n){return KV(CT,n)||(CT[n]=Ere&&KV(Vf,n)?Vf[n]:Mre("Symbol."+n)),CT[n]},Are=ho,qV=ra,XV=pT,Pre=y0,Ire=hre,Ore=Fc,kre=TypeError,Hre=Ore("toPrimitive"),Dre=function(n,e){if(!qV(n)||XV(n))return n;var t=Pre(n,Hre),i;if(t){if(e===void 0&&(e="default"),i=Are(t,n,e),!qV(i)||XV(i))return i;throw new kre("Can't convert object to primitive value")}return e===void 0&&(e="number"),Ire(n,e)},Nre=Dre,Lre=pT,QV=function(n){var e=Nre(n,"string");return Lre(e)?e:e+""},$re=Ii,ZV=ra,ST=$re.document,Fre=ZV(ST)&&ZV(ST.createElement),_T=function(n){return Fre?ST.createElement(n):{}},Bre=co,Vre=Rs,Wre=_T,JV=!Bre&&!Vre(function(){return Object.defineProperty(Wre("div"),"a",{get:function(){return 7}}).a!==7}),jre=co,zre=ho,Ure=EV,Yre=f0,Gre=p0,Kre=QV,qre=oa,Xre=JV,e3=Object.getOwnPropertyDescriptor;lT.f=jre?e3:function(e,t){if(e=Gre(e),t=Kre(t),Xre)try{return e3(e,t)}catch{}if(qre(e,t))return Yre(!zre(Ure.f,e,t),e[t])};var Bc={},Qre=co,Zre=Rs,t3=Qre&&Zre(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Jre=ra,eoe=String,toe=TypeError,_l=function(n){if(Jre(n))return n;throw new toe(eoe(n)+" is not an object")},noe=co,ioe=JV,soe=t3,C0=_l,n3=QV,roe=TypeError,RT=Object.defineProperty,ooe=Object.getOwnPropertyDescriptor,xT="enumerable",ET="configurable",TT="writable";Bc.f=noe?soe?function(e,t,i){if(C0(e),t=n3(t),C0(i),typeof e=="function"&&t==="prototype"&&"value"in i&&TT in i&&!i[TT]){var s=ooe(e,t);s&&s[TT]&&(e[t]=i.value,i={configurable:ET in i?i[ET]:s[ET],enumerable:xT in i?i[xT]:s[xT],writable:!1})}return RT(e,t,i)}:RT:function(e,t,i){if(C0(e),t=n3(t),C0(i),ioe)try{return RT(e,t,i)}catch{}if("get"in i||"set"in i)throw new roe("Accessors not supported");return"value"in i&&(e[t]=i.value),e};var aoe=co,loe=Bc,coe=f0,Hm=aoe?function(n,e,t){return loe.f(n,e,coe(1,t))}:function(n,e,t){return n[e]=t,n},i3={exports:{}},MT=co,hoe=oa,s3=Function.prototype,uoe=MT&&Object.getOwnPropertyDescriptor,AT=hoe(s3,"name"),doe=AT&&(function(){}).name==="something",foe=AT&&(!MT||MT&&uoe(s3,"name").configurable),goe={EXISTS:AT,PROPER:doe,CONFIGURABLE:foe},poe=oi,moe=Oi,PT=yT,boe=poe(Function.toString);moe(PT.inspectSource)||(PT.inspectSource=function(n){return boe(n)});var woe=PT.inspectSource,voe=Ii,yoe=Oi,r3=voe.WeakMap,Coe=yoe(r3)&&/native code/.test(String(r3)),Soe=YV,_oe=GV,o3=Soe("keys"),a3=function(n){return o3[n]||(o3[n]=_oe(n))},IT={},Roe=Coe,l3=Ii,xoe=ra,Eoe=Hm,OT=oa,kT=yT,Toe=a3,Moe=IT,c3="Object already initialized",HT=l3.TypeError,Aoe=l3.WeakMap,S0,Dm,_0,Poe=function(n){return _0(n)?Dm(n):S0(n,{})},Ioe=function(n){return function(e){var t;if(!xoe(e)||(t=Dm(e)).type!==n)throw new HT("Incompatible receiver, "+n+" required");return t}};if(Roe||kT.state){var aa=kT.state||(kT.state=new Aoe);aa.get=aa.get,aa.has=aa.has,aa.set=aa.set,S0=function(n,e){if(aa.has(n))throw new HT(c3);return e.facade=n,aa.set(n,e),e},Dm=function(n){return aa.get(n)||{}},_0=function(n){return aa.has(n)}}else{var Wf=Toe("state");Moe[Wf]=!0,S0=function(n,e){if(OT(n,Wf))throw new HT(c3);return e.facade=n,Eoe(n,Wf,e),e},Dm=function(n){return OT(n,Wf)?n[Wf]:{}},_0=function(n){return OT(n,Wf)}}var Ooe={set:S0,get:Dm,has:_0,enforce:Poe,getterFor:Ioe},DT=oi,koe=Rs,Hoe=Oi,R0=oa,NT=co,Doe=goe.CONFIGURABLE,Noe=woe,h3=Ooe,Loe=h3.enforce,$oe=h3.get,u3=String,x0=Object.defineProperty,Foe=DT("".slice),Boe=DT("".replace),Voe=DT([].join),Woe=NT&&!koe(function(){return x0(function(){},"length",{value:8}).length!==8}),joe=String(String).split("String"),zoe=i3.exports=function(n,e,t){Foe(u3(e),0,7)==="Symbol("&&(e="["+Boe(u3(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!R0(n,"name")||Doe&&n.name!==e)&&(NT?x0(n,"name",{value:e,configurable:!0}):n.name=e),Woe&&t&&R0(t,"arity")&&n.length!==t.arity&&x0(n,"length",{value:t.arity});try{t&&R0(t,"constructor")&&t.constructor?NT&&x0(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var i=Loe(n);return R0(i,"source")||(i.source=Voe(joe,typeof e=="string"?e:"")),n};Function.prototype.toString=zoe(function(){return Hoe(this)&&$oe(this).source||Noe(this)},"toString");var Uoe=i3.exports,Yoe=Oi,Goe=Bc,Koe=Uoe,qoe=vT,Xoe=function(n,e,t,i){i||(i={});var s=i.enumerable,r=i.name!==void 0?i.name:e;if(Yoe(t)&&Koe(t,r,i),i.global)s?n[e]=t:qoe(e,t);else{try{i.unsafe?n[e]&&(s=!0):delete n[e]}catch{}s?n[e]=t:Goe.f(n,e,{value:t,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return n},d3={},Qoe=Math.ceil,Zoe=Math.floor,Joe=Math.trunc||function(e){var t=+e;return(t>0?Zoe:Qoe)(t)},eae=Joe,Nm=function(n){var e=+n;return e!==e||e===0?0:eae(e)},tae=Nm,nae=Math.max,iae=Math.min,sae=function(n,e){var t=tae(n);return t<0?nae(t+e,0):iae(t,e)},rae=Nm,oae=Math.min,aae=function(n){var e=rae(n);return e>0?oae(e,9007199254740991):0},lae=aae,Lm=function(n){return lae(n.length)},cae=p0,hae=sae,uae=Lm,f3=function(n){return function(e,t,i){var s=cae(e),r=uae(s);if(r===0)return!n&&-1;var o=hae(i,r),a;if(n&&t!==t){for(;r>o;)if(a=s[o++],a!==a)return!0}else for(;r>o;o++)if((n||o in s)&&s[o]===t)return n||o||0;return!n&&-1}},dae={includes:f3(!0),indexOf:f3(!1)},fae=oi,LT=oa,gae=p0,pae=dae.indexOf,mae=IT,g3=fae([].push),p3=function(n,e){var t=gae(n),i=0,s=[],r;for(r in t)!LT(mae,r)&&LT(t,r)&&g3(s,r);for(;e.length>i;)LT(t,r=e[i++])&&(~pae(s,r)||g3(s,r));return s},$T=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bae=p3,wae=$T,vae=wae.concat("length","prototype");d3.f=Object.getOwnPropertyNames||function(e){return bae(e,vae)};var m3={};m3.f=Object.getOwnPropertySymbols;var yae=Bf,Cae=oi,Sae=d3,_ae=m3,Rae=_l,xae=Cae([].concat),Eae=yae("Reflect","ownKeys")||function(e){var t=Sae.f(Rae(e)),i=_ae.f;return i?xae(t,i(e)):t},b3=oa,Tae=Eae,Mae=lT,Aae=Bc,w3=function(n,e,t){for(var i=Tae(e),s=Aae.f,r=Mae.f,o=0;o<i.length;o++){var a=i[o];!b3(n,a)&&!(t&&b3(t,a))&&s(n,a,r(e,a))}},Pae=Rs,Iae=Oi,Oae=/#|\.prototype\./,$m=function(n,e){var t=Hae[kae(n)];return t===Nae?!0:t===Dae?!1:Iae(e)?Pae(e):!!e},kae=$m.normalize=function(n){return String(n).replace(Oae,".").toLowerCase()},Hae=$m.data={},Dae=$m.NATIVE="N",Nae=$m.POLYFILL="P",Lae=$m,E0=Ii,$ae=lT.f,Fae=Hm,Bae=Xoe,Vae=vT,Wae=w3,jae=Lae,ki=function(n,e){var t=n.target,i=n.global,s=n.stat,r,o,a,l,c,h;if(i?o=E0:s?o=E0[t]||Vae(t,{}):o=E0[t]&&E0[t].prototype,o)for(a in e){if(c=e[a],n.dontCallGetSet?(h=$ae(o,a),l=h&&h.value):l=o[a],r=jae(i?a:t+(s?".":"#")+a,n.forced),!r&&l!==void 0){if(typeof c==typeof l)continue;Wae(c,l)}(n.sham||l&&l.sham)&&Fae(c,"sham",!0),Bae(o,a,c,n)}},zae=u0,v3=Function.prototype,y3=v3.apply,C3=v3.call,T0=typeof Reflect=="object"&&Reflect.apply||(zae?C3.bind(y3):function(){return C3.apply(y3,arguments)}),Uae=oi,Yae=Om,S3=function(n,e,t){try{return Uae(Yae(Object.getOwnPropertyDescriptor(n,e)[t]))}catch{}},Gae=ra,Kae=function(n){return Gae(n)||n===null},qae=Kae,Xae=String,Qae=TypeError,Zae=function(n){if(qae(n))return n;throw new Qae("Can't set "+Xae(n)+" as a prototype")},Jae=S3,ele=ra,tle=Im,nle=Zae,_3=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,e={},t;try{t=Jae(Object.prototype,"__proto__","set"),t(e,[]),n=e instanceof Array}catch{}return function(s,r){return tle(s),nle(r),ele(s)&&(n?t(s,r):s.__proto__=r),s}}():void 0),ile=Bc.f,sle=function(n,e,t){t in n||ile(n,t,{configurable:!0,get:function(){return e[t]},set:function(i){e[t]=i}})},rle=Oi,ole=ra,R3=_3,ale=function(n,e,t){var i,s;return R3&&rle(i=e.constructor)&&i!==t&&ole(s=i.prototype)&&s!==t.prototype&&R3(n,s),n},lle=Fc,cle=lle("toStringTag"),x3={};x3[cle]="z";var hle=String(x3)==="[object z]",ule=hle,dle=Oi,M0=_u,fle=Fc,gle=fle("toStringTag"),ple=Object,mle=M0(function(){return arguments}())==="Arguments",ble=function(n,e){try{return n[e]}catch{}},E3=ule?M0:function(n){var e,t,i;return n===void 0?"Undefined":n===null?"Null":typeof(t=ble(e=ple(n),gle))=="string"?t:mle?M0(e):(i=M0(e))==="Object"&&dle(e.callee)?"Arguments":i},wle=E3,vle=String,A0=function(n){if(wle(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return vle(n)},yle=A0,Cle=function(n,e){return n===void 0?arguments.length<2?"":e:yle(n)},Sle=ra,_le=Hm,Rle=function(n,e){Sle(e)&&"cause"in e&&_le(n,"cause",e.cause)},xle=oi,T3=Error,Ele=xle("".replace),Tle=function(n){return String(new T3(n).stack)}("zxcasd"),M3=/\n\s*at [^:]*:[^\n]*/,Mle=M3.test(Tle),Ale=function(n,e){if(Mle&&typeof n=="string"&&!T3.prepareStackTrace)for(;e--;)n=Ele(n,M3,"");return n},Ple=Rs,Ile=f0,Ole=!Ple(function(){var n=new Error("a");return"stack"in n?(Object.defineProperty(n,"stack",Ile(1,7)),n.stack!==7):!0}),kle=Hm,Hle=Ale,Dle=Ole,A3=Error.captureStackTrace,Nle=function(n,e,t,i){Dle&&(A3?A3(n,e):kle(n,"stack",Hle(t,i)))},P3=Bf,Lle=oa,I3=Hm,$le=m0,O3=_3,k3=w3,H3=sle,Fle=ale,Ble=Cle,Vle=Rle,Wle=Nle,jle=co,zle=function(n,e,t,i){var s="stackTraceLimit",r=i?2:1,o=n.split("."),a=o[o.length-1],l=P3.apply(null,o);if(l){var c=l.prototype;if(Lle(c,"cause")&&delete c.cause,!t)return l;var h=P3("Error"),u=e(function(d,f){var g=Ble(i?f:d,void 0),p=i?new l(d):new l;return g!==void 0&&I3(p,"message",g),Wle(p,u,p.stack,2),this&&$le(c,this)&&Fle(p,this,u),arguments.length>r&&Vle(p,arguments[r]),p});u.prototype=c,a!=="Error"?O3?O3(u,h):k3(u,h,{name:!0}):jle&&s in l&&(H3(u,l,s),H3(u,l,"prepareStackTrace")),k3(u,l);try{c.name!==a&&I3(c,"name",a),c.constructor=u}catch{}return u}},D3=ki,Ule=Ii,la=T0,N3=zle,FT="WebAssembly",L3=Ule[FT],P0=new Error("e",{cause:7}).cause!==7,Ru=function(n,e){var t={};t[n]=N3(n,e,P0),D3({global:!0,constructor:!0,arity:1,forced:P0},t)},BT=function(n,e){if(L3&&L3[n]){var t={};t[n]=N3(FT+"."+n,e,P0),D3({target:FT,stat:!0,constructor:!0,arity:1,forced:P0},t)}};Ru("Error",function(n){return function(t){return la(n,this,arguments)}}),Ru("EvalError",function(n){return function(t){return la(n,this,arguments)}}),Ru("RangeError",function(n){return function(t){return la(n,this,arguments)}}),Ru("ReferenceError",function(n){return function(t){return la(n,this,arguments)}}),Ru("SyntaxError",function(n){return function(t){return la(n,this,arguments)}}),Ru("TypeError",function(n){return function(t){return la(n,this,arguments)}}),Ru("URIError",function(n){return function(t){return la(n,this,arguments)}}),BT("CompileError",function(n){return function(t){return la(n,this,arguments)}}),BT("LinkError",function(n){return function(t){return la(n,this,arguments)}}),BT("RuntimeError",function(n){return function(t){return la(n,this,arguments)}});var Yle=_u,$3=Array.isArray||function(e){return Yle(e)==="Array"},Gle=co,Kle=$3,qle=TypeError,Xle=Object.getOwnPropertyDescriptor,Qle=Gle&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(n){return n instanceof TypeError}}(),F3=Qle?function(n,e){if(Kle(n)&&!Xle(n,"length").writable)throw new qle("Cannot set read only .length");return n.length=e}:function(n,e){return n.length=e},Zle=TypeError,Jle=9007199254740991,B3=function(n){if(n>Jle)throw Zle("Maximum allowed index exceeded");return n},ece=ki,tce=km,nce=Lm,ice=F3,sce=B3,rce=Rs,oce=rce(function(){return[].push.call({length:4294967296},1)!==4294967297}),ace=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(n){return n instanceof TypeError}},lce=oce||!ace();ece({target:"Array",proto:!0,arity:1,forced:lce},{push:function(e){var t=tce(this),i=nce(t),s=arguments.length;sce(i+s);for(var r=0;r<s;r++)t[i]=arguments[r],i++;return ice(t,i),i}});var VT=oi,I0=Set.prototype,ca={Set,add:VT(I0.add),has:VT(I0.has),remove:VT(I0.delete),proto:I0},cce=ca.has,xu=function(n){return cce(n),n},hce=ho,Eu=function(n,e,t){for(var i=t?n:n.iterator,s=n.next,r,o;!(r=hce(s,i)).done;)if(o=e(r.value),o!==void 0)return o},V3=oi,uce=Eu,W3=ca,dce=W3.Set,j3=W3.proto,fce=V3(j3.forEach),z3=V3(j3.keys),gce=z3(new dce).next,Fm=function(n,e,t){return t?uce({iterator:z3(n),next:gce},e):fce(n,e)},U3=ca,pce=Fm,mce=U3.Set,bce=U3.add,WT=function(n){var e=new mce;return pce(n,function(t){bce(e,t)}),e},wce=S3,vce=ca,Bm=wce(vce.proto,"size","get")||function(n){return n.size},yce=function(n){return{iterator:n,next:n.next,done:!1}},Y3=Om,G3=_l,K3=ho,Cce=Nm,Sce=yce,q3="Invalid size",_ce=RangeError,Rce=TypeError,xce=Math.max,X3=function(n,e){this.set=n,this.size=xce(e,0),this.has=Y3(n.has),this.keys=Y3(n.keys)};X3.prototype={getIterator:function(){return Sce(G3(K3(this.keys,this.set)))},includes:function(n){return K3(this.has,this.set,n)}};var Tu=function(n){G3(n);var e=+n.size;if(e!==e)throw new Rce(q3);var t=Cce(e);if(t<0)throw new _ce(q3);return new X3(n,t)},Ece=xu,Q3=ca,Tce=WT,Mce=Bm,Ace=Tu,Pce=Fm,Ice=Eu,Oce=Q3.has,Z3=Q3.remove,kce=function(e){var t=Ece(this),i=Ace(e),s=Tce(t);return Mce(t)<=i.size?Pce(t,function(r){i.includes(r)&&Z3(s,r)}):Ice(i.getIterator(),function(r){Oce(t,r)&&Z3(s,r)}),s},Hce=Bf,J3=function(n){return{size:n,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},Mu=function(n){var e=Hce("Set");try{new e()[n](J3(0));try{return new e()[n](J3(-1)),!1}catch{return!0}}catch{return!1}},Dce=ki,Nce=kce,Lce=Mu;Dce({target:"Set",proto:!0,real:!0,forced:!Lce("difference")},{difference:Nce});var $ce=xu,jT=ca,Fce=Bm,Bce=Tu,Vce=Fm,Wce=Eu,jce=jT.Set,eW=jT.add,zce=jT.has,Uce=function(e){var t=$ce(this),i=Bce(e),s=new jce;return Fce(t)>i.size?Wce(i.getIterator(),function(r){zce(t,r)&&eW(s,r)}):Vce(t,function(r){i.includes(r)&&eW(s,r)}),s},Yce=ki,Gce=Rs,Kce=Uce,qce=Mu,Xce=!qce("intersection")||Gce(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});Yce({target:"Set",proto:!0,real:!0,forced:Xce},{intersection:Kce});var Qce=ho,tW=_l,Zce=y0,zT=function(n,e,t){var i,s;tW(n);try{if(i=Zce(n,"return"),!i){if(e==="throw")throw t;return t}i=Qce(i,n)}catch(r){s=!0,i=r}if(e==="throw")throw t;if(s)throw i;return tW(i),t},Jce=xu,ehe=ca.has,the=Bm,nhe=Tu,ihe=Fm,she=Eu,rhe=zT,ohe=function(e){var t=Jce(this),i=nhe(e);if(the(t)<=i.size)return ihe(t,function(r){if(i.includes(r))return!1},!0)!==!1;var s=i.getIterator();return she(s,function(r){if(ehe(t,r))return rhe(s,"normal",!1)})!==!1},ahe=ki,lhe=ohe,che=Mu;ahe({target:"Set",proto:!0,real:!0,forced:!che("isDisjointFrom")},{isDisjointFrom:lhe});var hhe=xu,uhe=Bm,dhe=Fm,fhe=Tu,ghe=function(e){var t=hhe(this),i=fhe(e);return uhe(t)>i.size?!1:dhe(t,function(s){if(!i.includes(s))return!1},!0)!==!1},phe=ki,mhe=ghe,bhe=Mu;phe({target:"Set",proto:!0,real:!0,forced:!bhe("isSubsetOf")},{isSubsetOf:mhe});var whe=xu,vhe=ca.has,yhe=Bm,Che=Tu,She=Eu,_he=zT,Rhe=function(e){var t=whe(this),i=Che(e);if(yhe(t)<i.size)return!1;var s=i.getIterator();return She(s,function(r){if(!vhe(t,r))return _he(s,"normal",!1)})!==!1},xhe=ki,Ehe=Rhe,The=Mu;xhe({target:"Set",proto:!0,real:!0,forced:!The("isSupersetOf")},{isSupersetOf:Ehe});var Mhe=xu,UT=ca,Ahe=WT,Phe=Tu,Ihe=Eu,Ohe=UT.add,khe=UT.has,Hhe=UT.remove,Dhe=function(e){var t=Mhe(this),i=Phe(e).getIterator(),s=Ahe(t);return Ihe(i,function(r){khe(t,r)?Hhe(s,r):Ohe(s,r)}),s},Nhe=ki,Lhe=Dhe,$he=Mu;Nhe({target:"Set",proto:!0,real:!0,forced:!$he("symmetricDifference")},{symmetricDifference:Lhe});var Fhe=xu,Bhe=ca.add,Vhe=WT,Whe=Tu,jhe=Eu,zhe=function(e){var t=Fhe(this),i=Whe(e).getIterator(),s=Vhe(t);return jhe(i,function(r){Bhe(s,r)}),s},Uhe=ki,Yhe=zhe,Ghe=Mu;Uhe({target:"Set",proto:!0,real:!0,forced:!Ghe("union")},{union:Yhe});var Khe=_u,qhe=oi,Xhe=function(n){if(Khe(n)==="Function")return qhe(n)},nW=Xhe,Qhe=Om,Zhe=u0,Jhe=nW(nW.bind),iW=function(n,e){return Qhe(n),e===void 0?n:Zhe?Jhe(n,e):function(){return n.apply(e,arguments)}},eue=Bf,sW=eue("document","documentElement"),tue=oi,YT=tue([].slice),nue=TypeError,rW=function(n,e){if(n<e)throw new nue("Not enough arguments");return n},iue=b0,sue=/(?:ipad|iphone|ipod).*applewebkit/i.test(iue),Vm=Ii,rue=b0,oue=_u,O0=function(n){return rue.slice(0,n.length)===n},oW=function(){return O0("Bun/")?"BUN":O0("Cloudflare-Workers")?"CLOUDFLARE":O0("Deno/")?"DENO":O0("Node.js/")?"NODE":Vm.Bun&&typeof Bun.version=="string"?"BUN":Vm.Deno&&typeof Deno.version=="object"?"DENO":oue(Vm.process)==="process"?"NODE":Vm.window&&Vm.document?"BROWSER":"REST"}(),aue=oW,lue=aue==="NODE",Js=Ii,cue=T0,hue=iW,aW=Oi,uue=oa,lW=Rs,cW=sW,due=YT,hW=_T,fue=rW,gue=sue,pue=lue,GT=Js.setImmediate,KT=Js.clearImmediate,mue=Js.process,qT=Js.Dispatch,bue=Js.Function,uW=Js.MessageChannel,wue=Js.String,XT=0,Wm={},dW="onreadystatechange",jm,Au,QT,ZT;lW(function(){jm=Js.location});var JT=function(n){if(uue(Wm,n)){var e=Wm[n];delete Wm[n],e()}},eM=function(n){return function(){JT(n)}},fW=function(n){JT(n.data)},gW=function(n){Js.postMessage(wue(n),jm.protocol+"//"+jm.host)};(!GT||!KT)&&(GT=function(e){fue(arguments.length,1);var t=aW(e)?e:bue(e),i=due(arguments,1);return Wm[++XT]=function(){cue(t,void 0,i)},Au(XT),XT},KT=function(e){delete Wm[e]},pue?Au=function(n){mue.nextTick(eM(n))}:qT&&qT.now?Au=function(n){qT.now(eM(n))}:uW&&!gue?(QT=new uW,ZT=QT.port2,QT.port1.onmessage=fW,Au=hue(ZT.postMessage,ZT)):Js.addEventListener&&aW(Js.postMessage)&&!Js.importScripts&&jm&&jm.protocol!=="file:"&&!lW(gW)?(Au=gW,Js.addEventListener("message",fW,!1)):dW in hW("script")?Au=function(n){cW.appendChild(hW("script"))[dW]=function(){cW.removeChild(this),JT(n)}}:Au=function(n){setTimeout(eM(n),0)});var pW={set:GT,clear:KT},vue=ki,yue=Ii,mW=pW.clear;vue({global:!0,bind:!0,enumerable:!0,forced:yue.clearImmediate!==mW},{clearImmediate:mW});var bW=Ii,Cue=T0,Sue=Oi,_ue=oW,Rue=b0,xue=YT,Eue=rW,Tue=bW.Function,Mue=/MSIE .\./.test(Rue)||_ue==="BUN"&&function(){var n=bW.Bun.version.split(".");return n.length<3||n[0]==="0"&&(n[1]<3||n[1]==="3"&&n[2]==="0")}(),Aue=function(n,e){var t=e?2:1;return Mue?function(i,s){var r=Eue(arguments.length,1)>t,o=Sue(i)?i:Tue(i),a=r?xue(arguments,t):[],l=r?function(){Cue(o,this,a)}:o;return e?n(l,s):n(l)}:n},Pue=ki,wW=Ii,vW=pW.set,Iue=Aue,yW=wW.setImmediate?Iue(vW,!1):vW;Pue({global:!0,bind:!0,enumerable:!0,forced:wW.setImmediate!==yW},{setImmediate:yW});/*! @license DOMPurify 2.5.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.7/LICENSE */function Vc(n){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(n)}function tM(n,e){return tM=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},tM(n,e)}function Oue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k0(n,e,t){return Oue()?k0=Reflect.construct:k0=function(s,r,o){var a=[null];a.push.apply(a,r);var l=Function.bind.apply(s,a),c=new l;return o&&tM(c,o.prototype),c},k0.apply(null,arguments)}function fo(n){return kue(n)||Hue(n)||Due(n)||Nue()}function kue(n){if(Array.isArray(n))return nM(n)}function Hue(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Due(n,e){if(n){if(typeof n=="string")return nM(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nM(n,e)}}function nM(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Nue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lue=Object.hasOwnProperty,CW=Object.setPrototypeOf,$ue=Object.isFrozen,Fue=Object.getPrototypeOf,Bue=Object.getOwnPropertyDescriptor,hs=Object.freeze,Rr=Object.seal,Vue=Object.create,SW=typeof Reflect<"u"&&Reflect,H0=SW.apply,iM=SW.construct;H0||(H0=function(e,t,i){return e.apply(t,i)}),hs||(hs=function(e){return e}),Rr||(Rr=function(e){return e}),iM||(iM=function(e,t){return k0(e,fo(t))});var Wue=xr(Array.prototype.forEach),_W=xr(Array.prototype.pop),zm=xr(Array.prototype.push),D0=xr(String.prototype.toLowerCase),sM=xr(String.prototype.toString),RW=xr(String.prototype.match),go=xr(String.prototype.replace),jue=xr(String.prototype.indexOf),zue=xr(String.prototype.trim),Hi=xr(RegExp.prototype.test),rM=Uue(TypeError);function xr(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return H0(n,e,i)}}function Uue(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return iM(n,t)}}function rt(n,e,t){var i;t=(i=t)!==null&&i!==void 0?i:D0,CW&&CW(n,null);for(var s=e.length;s--;){var r=e[s];if(typeof r=="string"){var o=t(r);o!==r&&($ue(e)||(e[s]=o),r=o)}n[r]=!0}return n}function Pu(n){var e=Vue(null),t;for(t in n)H0(Lue,n,[t])===!0&&(e[t]=n[t]);return e}function N0(n,e){for(;n!==null;){var t=Bue(n,e);if(t){if(t.get)return xr(t.get);if(typeof t.value=="function")return xr(t.value)}n=Fue(n)}function i(s){return console.warn("fallback value for",s),null}return i}var xW=hs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),oM=hs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),aM=hs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Yue=hs(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lM=hs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Gue=hs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),EW=hs(["#text"]),TW=hs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),cM=hs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),MW=hs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),L0=hs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Kue=Rr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),que=Rr(/<%[\w\W]*|[\w\W]*%>/gm),Xue=Rr(/\${[\w\W]*}/gm),Que=Rr(/^data-[\-\w.\u00B7-\uFFFF]/),Zue=Rr(/^aria-[\-\w]+$/),Jue=Rr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ede=Rr(/^(?:\w+script|data):/i),tde=Rr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nde=Rr(/^html$/i),ide=Rr(/^[a-z][.\w]*(-[.\w]+)+$/i),sde=function(){return typeof window>"u"?null:window},rde=function(e,t){if(Vc(e)!=="object"||typeof e.createPolicy!="function")return null;var i=null,s="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(s)&&(i=t.currentScript.getAttribute(s));var r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML:function(a){return a},createScriptURL:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function AW(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sde(),e=function(z){return AW(z)};if(e.version="2.5.7",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;var t=n.document,i=n.document,s=n.DocumentFragment,r=n.HTMLTemplateElement,o=n.Node,a=n.Element,l=n.NodeFilter,c=n.NamedNodeMap,h=c===void 0?n.NamedNodeMap||n.MozNamedAttrMap:c,u=n.HTMLFormElement,d=n.DOMParser,f=n.trustedTypes,g=a.prototype,p=N0(g,"cloneNode"),m=N0(g,"nextSibling"),w=N0(g,"childNodes"),y=N0(g,"parentNode");if(typeof r=="function"){var C=i.createElement("template");C.content&&C.content.ownerDocument&&(i=C.content.ownerDocument)}var R=rde(f,t),_=R?R.createHTML(""):"",x=i,M=x.implementation,I=x.createNodeIterator,A=x.createDocumentFragment,O=x.getElementsByTagName,D=t.importNode,j={};try{j=Pu(i).documentMode?i.documentMode:{}}catch{}var Y={};e.isSupported=typeof y=="function"&&M&&M.createHTMLDocument!==void 0&&j!==9;var Z=Kue,$=que,B=Xue,ie=Que,se=Zue,te=ede,pe=tde,b=ide,v=Jue,S=null,T=rt({},[].concat(fo(xW),fo(oM),fo(aM),fo(lM),fo(EW))),H=null,E=rt({},[].concat(fo(TW),fo(cM),fo(MW),fo(L0))),N=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),X=null,ne=null,he=!0,re=!0,ke=!1,Ee=!0,J=!1,oe=!0,ce=!1,Ve=!1,Se=!1,_e=!1,P=!1,k=!1,L=!0,G=!1,V="user-content-",Q=!0,U=!1,W={},K=null,q=rt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ee=null,ge=rt({},["audio","video","img","source","image","track"]),Re=null,De=rt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),nt="http://www.w3.org/1998/Math/MathML",vt="http://www.w3.org/2000/svg",at="http://www.w3.org/1999/xhtml",je=at,Ct=!1,Ln=null,vp=rt({},[nt,vt,at],sM),Vo,Tv=["application/xhtml+xml","text/html"],Qr="text/html",xn,mi=null,Ni=i.createElement("form"),bn=function(z){return z instanceof RegExp||z instanceof Function},ID=function(z){mi&&mi===z||((!z||Vc(z)!=="object")&&(z={}),z=Pu(z),Vo=Tv.indexOf(z.PARSER_MEDIA_TYPE)===-1?Vo=Qr:Vo=z.PARSER_MEDIA_TYPE,xn=Vo==="application/xhtml+xml"?sM:D0,S="ALLOWED_TAGS"in z?rt({},z.ALLOWED_TAGS,xn):T,H="ALLOWED_ATTR"in z?rt({},z.ALLOWED_ATTR,xn):E,Ln="ALLOWED_NAMESPACES"in z?rt({},z.ALLOWED_NAMESPACES,sM):vp,Re="ADD_URI_SAFE_ATTR"in z?rt(Pu(De),z.ADD_URI_SAFE_ATTR,xn):De,ee="ADD_DATA_URI_TAGS"in z?rt(Pu(ge),z.ADD_DATA_URI_TAGS,xn):ge,K="FORBID_CONTENTS"in z?rt({},z.FORBID_CONTENTS,xn):q,X="FORBID_TAGS"in z?rt({},z.FORBID_TAGS,xn):{},ne="FORBID_ATTR"in z?rt({},z.FORBID_ATTR,xn):{},W="USE_PROFILES"in z?z.USE_PROFILES:!1,he=z.ALLOW_ARIA_ATTR!==!1,re=z.ALLOW_DATA_ATTR!==!1,ke=z.ALLOW_UNKNOWN_PROTOCOLS||!1,Ee=z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,J=z.SAFE_FOR_TEMPLATES||!1,oe=z.SAFE_FOR_XML!==!1,ce=z.WHOLE_DOCUMENT||!1,_e=z.RETURN_DOM||!1,P=z.RETURN_DOM_FRAGMENT||!1,k=z.RETURN_TRUSTED_TYPE||!1,Se=z.FORCE_BODY||!1,L=z.SANITIZE_DOM!==!1,G=z.SANITIZE_NAMED_PROPS||!1,Q=z.KEEP_CONTENT!==!1,U=z.IN_PLACE||!1,v=z.ALLOWED_URI_REGEXP||v,je=z.NAMESPACE||at,N=z.CUSTOM_ELEMENT_HANDLING||{},z.CUSTOM_ELEMENT_HANDLING&&bn(z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(N.tagNameCheck=z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),z.CUSTOM_ELEMENT_HANDLING&&bn(z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(N.attributeNameCheck=z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),z.CUSTOM_ELEMENT_HANDLING&&typeof z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(N.allowCustomizedBuiltInElements=z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(re=!1),P&&(_e=!0),W&&(S=rt({},fo(EW)),H=[],W.html===!0&&(rt(S,xW),rt(H,TW)),W.svg===!0&&(rt(S,oM),rt(H,cM),rt(H,L0)),W.svgFilters===!0&&(rt(S,aM),rt(H,cM),rt(H,L0)),W.mathMl===!0&&(rt(S,lM),rt(H,MW),rt(H,L0))),z.ADD_TAGS&&(S===T&&(S=Pu(S)),rt(S,z.ADD_TAGS,xn)),z.ADD_ATTR&&(H===E&&(H=Pu(H)),rt(H,z.ADD_ATTR,xn)),z.ADD_URI_SAFE_ATTR&&rt(Re,z.ADD_URI_SAFE_ATTR,xn),z.FORBID_CONTENTS&&(K===q&&(K=Pu(K)),rt(K,z.FORBID_CONTENTS,xn)),Q&&(S["#text"]=!0),ce&&rt(S,["html","head","body"]),S.table&&(rt(S,["tbody"]),delete X.tbody),hs&&hs(z),mi=z)},qY=rt({},["mi","mo","mn","ms","mtext"]),XY=rt({},["annotation-xml"]),QBe=rt({},["title","style","font","a","script"]),f1=rt({},oM);rt(f1,aM),rt(f1,Yue);var OD=rt({},lM);rt(OD,Gue);var ZBe=function(z){var fe=y(z);(!fe||!fe.tagName)&&(fe={namespaceURI:je,tagName:"template"});var Ce=D0(z.tagName),$t=D0(fe.tagName);return Ln[z.namespaceURI]?z.namespaceURI===vt?fe.namespaceURI===at?Ce==="svg":fe.namespaceURI===nt?Ce==="svg"&&($t==="annotation-xml"||qY[$t]):!!f1[Ce]:z.namespaceURI===nt?fe.namespaceURI===at?Ce==="math":fe.namespaceURI===vt?Ce==="math"&&XY[$t]:!!OD[Ce]:z.namespaceURI===at?fe.namespaceURI===vt&&!XY[$t]||fe.namespaceURI===nt&&!qY[$t]?!1:!OD[Ce]&&(QBe[Ce]||!f1[Ce]):!!(Vo==="application/xhtml+xml"&&Ln[z.namespaceURI]):!1},Zr=function(z){zm(e.removed,{element:z});try{z.parentNode.removeChild(z)}catch{try{z.outerHTML=_}catch{z.remove()}}},g1=function(z,fe){try{zm(e.removed,{attribute:fe.getAttributeNode(z),from:fe})}catch{zm(e.removed,{attribute:null,from:fe})}if(fe.removeAttribute(z),z==="is"&&!H[z])if(_e||P)try{Zr(fe)}catch{}else try{fe.setAttribute(z,"")}catch{}},QY=function(z){var fe,Ce;if(Se)z="<remove></remove>"+z;else{var $t=RW(z,/^[\r\n\t ]+/);Ce=$t&&$t[0]}Vo==="application/xhtml+xml"&&je===at&&(z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+z+"</body></html>");var Fs=R?R.createHTML(z):z;if(je===at)try{fe=new d().parseFromString(Fs,Vo)}catch{}if(!fe||!fe.documentElement){fe=M.createDocument(je,"template",null);try{fe.documentElement.innerHTML=Ct?_:Fs}catch{}}var ss=fe.body||fe.documentElement;return z&&Ce&&ss.insertBefore(i.createTextNode(Ce),ss.childNodes[0]||null),je===at?O.call(fe,ce?"html":"body")[0]:ce?fe.documentElement:ss},ZY=function(z){return I.call(z.ownerDocument||z,z,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null,!1)},JY=function(z){return z instanceof u&&(typeof z.nodeName!="string"||typeof z.textContent!="string"||typeof z.removeChild!="function"||!(z.attributes instanceof h)||typeof z.removeAttribute!="function"||typeof z.setAttribute!="function"||typeof z.namespaceURI!="string"||typeof z.insertBefore!="function"||typeof z.hasChildNodes!="function")},Mv=function(z){return Vc(o)==="object"?z instanceof o:z&&Vc(z)==="object"&&typeof z.nodeType=="number"&&typeof z.nodeName=="string"},gc=function(z,fe,Ce){Y[z]&&Wue(Y[z],function($t){$t.call(e,fe,Ce,mi)})},eG=function(z){var fe;if(gc("beforeSanitizeElements",z,null),JY(z)||Hi(/[\u0080-\uFFFF]/,z.nodeName))return Zr(z),!0;var Ce=xn(z.nodeName);if(gc("uponSanitizeElement",z,{tagName:Ce,allowedTags:S}),z.hasChildNodes()&&!Mv(z.firstElementChild)&&(!Mv(z.content)||!Mv(z.content.firstElementChild))&&Hi(/<[/\w]/g,z.innerHTML)&&Hi(/<[/\w]/g,z.textContent)||Ce==="select"&&Hi(/<template/i,z.innerHTML)||z.nodeType===7||oe&&z.nodeType===8&&Hi(/<[/\w]/g,z.data))return Zr(z),!0;if(!S[Ce]||X[Ce]){if(!X[Ce]&&nG(Ce)&&(N.tagNameCheck instanceof RegExp&&Hi(N.tagNameCheck,Ce)||N.tagNameCheck instanceof Function&&N.tagNameCheck(Ce)))return!1;if(Q&&!K[Ce]){var $t=y(z)||z.parentNode,Fs=w(z)||z.childNodes;if(Fs&&$t)for(var ss=Fs.length,Li=ss-1;Li>=0;--Li){var Xd=p(Fs[Li],!0);Xd.__removalCount=(z.__removalCount||0)+1,$t.insertBefore(Xd,m(z))}}return Zr(z),!0}return z instanceof a&&!ZBe(z)||(Ce==="noscript"||Ce==="noembed"||Ce==="noframes")&&Hi(/<\/no(script|embed|frames)/i,z.innerHTML)?(Zr(z),!0):(J&&z.nodeType===3&&(fe=z.textContent,fe=go(fe,Z," "),fe=go(fe,$," "),fe=go(fe,B," "),z.textContent!==fe&&(zm(e.removed,{element:z.cloneNode()}),z.textContent=fe)),gc("afterSanitizeElements",z,null),!1)},tG=function(z,fe,Ce){if(L&&(fe==="id"||fe==="name")&&(Ce in i||Ce in Ni))return!1;if(!(re&&!ne[fe]&&Hi(ie,fe))){if(!(he&&Hi(se,fe))){if(!H[fe]||ne[fe]){if(!(nG(z)&&(N.tagNameCheck instanceof RegExp&&Hi(N.tagNameCheck,z)||N.tagNameCheck instanceof Function&&N.tagNameCheck(z))&&(N.attributeNameCheck instanceof RegExp&&Hi(N.attributeNameCheck,fe)||N.attributeNameCheck instanceof Function&&N.attributeNameCheck(fe))||fe==="is"&&N.allowCustomizedBuiltInElements&&(N.tagNameCheck instanceof RegExp&&Hi(N.tagNameCheck,Ce)||N.tagNameCheck instanceof Function&&N.tagNameCheck(Ce))))return!1}else if(!Re[fe]){if(!Hi(v,go(Ce,pe,""))){if(!((fe==="src"||fe==="xlink:href"||fe==="href")&&z!=="script"&&jue(Ce,"data:")===0&&ee[z])){if(!(ke&&!Hi(te,go(Ce,pe,"")))){if(Ce)return!1}}}}}}return!0},nG=function(z){return z!=="annotation-xml"&&RW(z,b)},iG=function(z){var fe,Ce,$t,Fs;gc("beforeSanitizeAttributes",z,null);var ss=z.attributes;if(ss){var Li={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};for(Fs=ss.length;Fs--;){fe=ss[Fs];var Xd=fe,bi=Xd.name,kD=Xd.namespaceURI;if(Ce=bi==="value"?fe.value:zue(fe.value),$t=xn(bi),Li.attrName=$t,Li.attrValue=Ce,Li.keepAttr=!0,Li.forceKeepAttr=void 0,gc("uponSanitizeAttribute",z,Li),Ce=Li.attrValue,!Li.forceKeepAttr&&(g1(bi,z),!!Li.keepAttr)){if(!Ee&&Hi(/\/>/i,Ce)){g1(bi,z);continue}J&&(Ce=go(Ce,Z," "),Ce=go(Ce,$," "),Ce=go(Ce,B," "));var sG=xn(z.nodeName);if(tG(sG,$t,Ce)){if(G&&($t==="id"||$t==="name")&&(g1(bi,z),Ce=V+Ce),oe&&Hi(/((--!?|])>)|<\/(style|title)/i,Ce)){g1(bi,z);continue}if(R&&Vc(f)==="object"&&typeof f.getAttributeType=="function"&&!kD)switch(f.getAttributeType(sG,$t)){case"TrustedHTML":{Ce=R.createHTML(Ce);break}case"TrustedScriptURL":{Ce=R.createScriptURL(Ce);break}}try{kD?z.setAttributeNS(kD,bi,Ce):z.setAttribute(bi,Ce),JY(z)?Zr(z):_W(e.removed)}catch{}}}}gc("afterSanitizeAttributes",z,null)}},JBe=function Ne(z){var fe,Ce=ZY(z);for(gc("beforeSanitizeShadowDOM",z,null);fe=Ce.nextNode();)gc("uponSanitizeShadowNode",fe,null),!eG(fe)&&(fe.content instanceof s&&Ne(fe.content),iG(fe));gc("afterSanitizeShadowDOM",z,null)};return e.sanitize=function(Ne){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fe,Ce,$t,Fs,ss;if(Ct=!Ne,Ct&&(Ne="<!-->"),typeof Ne!="string"&&!Mv(Ne))if(typeof Ne.toString=="function"){if(Ne=Ne.toString(),typeof Ne!="string")throw rM("dirty is not a string, aborting")}else throw rM("toString is not a function");if(!e.isSupported){if(Vc(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Ne=="string")return n.toStaticHTML(Ne);if(Mv(Ne))return n.toStaticHTML(Ne.outerHTML)}return Ne}if(Ve||ID(z),e.removed=[],typeof Ne=="string"&&(U=!1),U){if(Ne.nodeName){var Li=xn(Ne.nodeName);if(!S[Li]||X[Li])throw rM("root node is forbidden and cannot be sanitized in-place")}}else if(Ne instanceof o)fe=QY("<!---->"),Ce=fe.ownerDocument.importNode(Ne,!0),Ce.nodeType===1&&Ce.nodeName==="BODY"||Ce.nodeName==="HTML"?fe=Ce:fe.appendChild(Ce);else{if(!_e&&!J&&!ce&&Ne.indexOf("<")===-1)return R&&k?R.createHTML(Ne):Ne;if(fe=QY(Ne),!fe)return _e?null:k?_:""}fe&&Se&&Zr(fe.firstChild);for(var Xd=ZY(U?Ne:fe);$t=Xd.nextNode();)$t.nodeType===3&&$t===Fs||eG($t)||($t.content instanceof s&&JBe($t.content),iG($t),Fs=$t);if(Fs=null,U)return Ne;if(_e){if(P)for(ss=A.call(fe.ownerDocument);fe.firstChild;)ss.appendChild(fe.firstChild);else ss=fe;return(H.shadowroot||H.shadowrootmod)&&(ss=D.call(t,ss,!0)),ss}var bi=ce?fe.outerHTML:fe.innerHTML;return ce&&S["!doctype"]&&fe.ownerDocument&&fe.ownerDocument.doctype&&fe.ownerDocument.doctype.name&&Hi(nde,fe.ownerDocument.doctype.name)&&(bi="<!DOCTYPE "+fe.ownerDocument.doctype.name+`>
`+bi),J&&(bi=go(bi,Z," "),bi=go(bi,$," "),bi=go(bi,B," ")),R&&k?R.createHTML(bi):bi},e.setConfig=function(Ne){ID(Ne),Ve=!0},e.clearConfig=function(){mi=null,Ve=!1},e.isValidAttribute=function(Ne,z,fe){mi||ID({});var Ce=xn(Ne),$t=xn(z);return tG(Ce,$t,fe)},e.addHook=function(Ne,z){typeof z=="function"&&(Y[Ne]=Y[Ne]||[],zm(Y[Ne],z))},e.removeHook=function(Ne){if(Y[Ne])return _W(Y[Ne])},e.removeHooks=function(Ne){Y[Ne]&&(Y[Ne]=[])},e.removeAllHooks=function(){Y={}},e}var ode=AW();//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var PW;function le(){return PW.apply(null,arguments)}function ade(n){PW=n}function po(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function Iu(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function Ot(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function hM(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var e;for(e in n)if(Ot(n,e))return!1;return!0}function xs(n){return n===void 0}function Rl(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function Um(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function IW(n,e){var t=[],i,s=n.length;for(i=0;i<s;++i)t.push(e(n[i],i));return t}function Wc(n,e){for(var t in e)Ot(e,t)&&(n[t]=e[t]);return Ot(e,"toString")&&(n.toString=e.toString),Ot(e,"valueOf")&&(n.valueOf=e.valueOf),n}function ha(n,e,t,i){return sj(n,e,t,i,!0).utc()}function lde(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function it(n){return n._pf==null&&(n._pf=lde()),n._pf}var uM;Array.prototype.some?uM=Array.prototype.some:uM=function(n){var e=Object(this),t=e.length>>>0,i;for(i=0;i<t;i++)if(i in e&&n.call(this,e[i],i,e))return!0;return!1};function dM(n){var e=null,t=!1,i=n._d&&!isNaN(n._d.getTime());if(i&&(e=it(n),t=uM.call(e.parsedDateParts,function(s){return s!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),n._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=i;else return i;return n._isValid}function $0(n){var e=ha(NaN);return n!=null?Wc(it(e),n):it(e).userInvalidated=!0,e}var OW=le.momentProperties=[],fM=!1;function gM(n,e){var t,i,s,r=OW.length;if(xs(e._isAMomentObject)||(n._isAMomentObject=e._isAMomentObject),xs(e._i)||(n._i=e._i),xs(e._f)||(n._f=e._f),xs(e._l)||(n._l=e._l),xs(e._strict)||(n._strict=e._strict),xs(e._tzm)||(n._tzm=e._tzm),xs(e._isUTC)||(n._isUTC=e._isUTC),xs(e._offset)||(n._offset=e._offset),xs(e._pf)||(n._pf=it(e)),xs(e._locale)||(n._locale=e._locale),r>0)for(t=0;t<r;t++)i=OW[t],s=e[i],xs(s)||(n[i]=s);return n}function Ym(n){gM(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),fM===!1&&(fM=!0,le.updateOffset(this),fM=!1)}function mo(n){return n instanceof Ym||n!=null&&n._isAMomentObject!=null}function kW(n){le.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function Er(n,e){var t=!0;return Wc(function(){if(le.deprecationHandler!=null&&le.deprecationHandler(null,n),t){var i=[],s,r,o,a=arguments.length;for(r=0;r<a;r++){if(s="",typeof arguments[r]=="object"){s+=`
[`+r+"] ";for(o in arguments[0])Ot(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[r];i.push(s)}kW(n+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var HW={};function DW(n,e){le.deprecationHandler!=null&&le.deprecationHandler(n,e),HW[n]||(kW(e),HW[n]=!0)}le.suppressDeprecationWarnings=!1,le.deprecationHandler=null;function ua(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function cde(n){var e,t;for(t in n)Ot(n,t)&&(e=n[t],ua(e)?this[t]=e:this["_"+t]=e);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function pM(n,e){var t=Wc({},n),i;for(i in e)Ot(e,i)&&(Iu(n[i])&&Iu(e[i])?(t[i]={},Wc(t[i],n[i]),Wc(t[i],e[i])):e[i]!=null?t[i]=e[i]:delete t[i]);for(i in n)Ot(n,i)&&!Ot(e,i)&&Iu(n[i])&&(t[i]=Wc({},t[i]));return t}function mM(n){n!=null&&this.set(n)}var bM;Object.keys?bM=Object.keys:bM=function(n){var e,t=[];for(e in n)Ot(n,e)&&t.push(e);return t};var hde={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ude(n,e,t){var i=this._calendar[n]||this._calendar.sameElse;return ua(i)?i.call(e,t):i}function da(n,e,t){var i=""+Math.abs(n),s=e-i.length,r=n>=0;return(r?t?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var wM=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F0=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,vM={},jf={};function Le(n,e,t,i){var s=i;typeof i=="string"&&(s=function(){return this[i]()}),n&&(jf[n]=s),e&&(jf[e[0]]=function(){return da(s.apply(this,arguments),e[1],e[2])}),t&&(jf[t]=function(){return this.localeData().ordinal(s.apply(this,arguments),n)})}function dde(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function fde(n){var e=n.match(wM),t,i;for(t=0,i=e.length;t<i;t++)jf[e[t]]?e[t]=jf[e[t]]:e[t]=dde(e[t]);return function(s){var r="",o;for(o=0;o<i;o++)r+=ua(e[o])?e[o].call(s,n):e[o];return r}}function B0(n,e){return n.isValid()?(e=NW(e,n.localeData()),vM[e]=vM[e]||fde(e),vM[e](n)):n.localeData().invalidDate()}function NW(n,e){var t=5;function i(s){return e.longDateFormat(s)||s}for(F0.lastIndex=0;t>=0&&F0.test(n);)n=n.replace(F0,i),F0.lastIndex=0,t-=1;return n}var gde={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function pde(n){var e=this._longDateFormat[n],t=this._longDateFormat[n.toUpperCase()];return e||!t?e:(this._longDateFormat[n]=t.match(wM).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[n])}var mde="Invalid date";function bde(){return this._invalidDate}var wde="%d",vde=/\d{1,2}/;function yde(n){return this._ordinal.replace("%d",n)}var Cde={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Sde(n,e,t,i){var s=this._relativeTime[t];return ua(s)?s(n,e,t,i):s.replace(/%d/i,n)}function _de(n,e){var t=this._relativeTime[n>0?"future":"past"];return ua(t)?t(e):t.replace(/%s/i,e)}var LW={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Tr(n){return typeof n=="string"?LW[n]||LW[n.toLowerCase()]:void 0}function yM(n){var e={},t,i;for(i in n)Ot(n,i)&&(t=Tr(i),t&&(e[t]=n[i]));return e}var Rde={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function xde(n){var e=[],t;for(t in n)Ot(n,t)&&e.push({unit:t,priority:Rde[t]});return e.sort(function(i,s){return i.priority-s.priority}),e}var $W=/\d/,er=/\d\d/,FW=/\d{3}/,CM=/\d{4}/,V0=/[+-]?\d{6}/,fn=/\d\d?/,BW=/\d\d\d\d?/,VW=/\d\d\d\d\d\d?/,W0=/\d{1,3}/,SM=/\d{1,4}/,j0=/[+-]?\d{1,6}/,zf=/\d+/,z0=/[+-]?\d+/,Ede=/Z|[+-]\d\d:?\d\d/gi,U0=/Z|[+-]\d\d(?::?\d\d)?/gi,Tde=/[+-]?\d+(\.\d{1,3})?/,Gm=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Uf=/^[1-9]\d?/,_M=/^([1-9]\d|\d)/,Y0;Y0={};function Ae(n,e,t){Y0[n]=ua(e)?e:function(i,s){return i&&t?t:e}}function Mde(n,e){return Ot(Y0,n)?Y0[n](e._strict,e._locale):new RegExp(Ade(n))}function Ade(n){return xl(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,s,r){return t||i||s||r}))}function xl(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Mr(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function wt(n){var e=+n,t=0;return e!==0&&isFinite(e)&&(t=Mr(e)),t}var RM={};function qt(n,e){var t,i=e,s;for(typeof n=="string"&&(n=[n]),Rl(e)&&(i=function(r,o){o[e]=wt(r)}),s=n.length,t=0;t<s;t++)RM[n[t]]=i}function Km(n,e){qt(n,function(t,i,s,r){s._w=s._w||{},e(t,s._w,s,r)})}function Pde(n,e,t){e!=null&&Ot(RM,n)&&RM[n](e,t._a,t,n)}function G0(n){return n%4===0&&n%100!==0||n%400===0}var Gi=0,El=1,fa=2,ci=3,bo=4,Tl=5,Ou=6,Ide=7,Ode=8;Le("Y",0,0,function(){var n=this.year();return n<=9999?da(n,4):"+"+n}),Le(0,["YY",2],0,function(){return this.year()%100}),Le(0,["YYYY",4],0,"year"),Le(0,["YYYYY",5],0,"year"),Le(0,["YYYYYY",6,!0],0,"year"),Ae("Y",z0),Ae("YY",fn,er),Ae("YYYY",SM,CM),Ae("YYYYY",j0,V0),Ae("YYYYYY",j0,V0),qt(["YYYYY","YYYYYY"],Gi),qt("YYYY",function(n,e){e[Gi]=n.length===2?le.parseTwoDigitYear(n):wt(n)}),qt("YY",function(n,e){e[Gi]=le.parseTwoDigitYear(n)}),qt("Y",function(n,e){e[Gi]=parseInt(n,10)});function qm(n){return G0(n)?366:365}le.parseTwoDigitYear=function(n){return wt(n)+(wt(n)>68?1900:2e3)};var WW=Yf("FullYear",!0);function kde(){return G0(this.year())}function Yf(n,e){return function(t){return t!=null?(jW(this,n,t),le.updateOffset(this,e),this):Xm(this,n)}}function Xm(n,e){if(!n.isValid())return NaN;var t=n._d,i=n._isUTC;switch(e){case"Milliseconds":return i?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return i?t.getUTCSeconds():t.getSeconds();case"Minutes":return i?t.getUTCMinutes():t.getMinutes();case"Hours":return i?t.getUTCHours():t.getHours();case"Date":return i?t.getUTCDate():t.getDate();case"Day":return i?t.getUTCDay():t.getDay();case"Month":return i?t.getUTCMonth():t.getMonth();case"FullYear":return i?t.getUTCFullYear():t.getFullYear();default:return NaN}}function jW(n,e,t){var i,s,r,o,a;if(!(!n.isValid()||isNaN(t))){switch(i=n._d,s=n._isUTC,e){case"Milliseconds":return void(s?i.setUTCMilliseconds(t):i.setMilliseconds(t));case"Seconds":return void(s?i.setUTCSeconds(t):i.setSeconds(t));case"Minutes":return void(s?i.setUTCMinutes(t):i.setMinutes(t));case"Hours":return void(s?i.setUTCHours(t):i.setHours(t));case"Date":return void(s?i.setUTCDate(t):i.setDate(t));case"FullYear":break;default:return}r=t,o=n.month(),a=n.date(),a=a===29&&o===1&&!G0(r)?28:a,s?i.setUTCFullYear(r,o,a):i.setFullYear(r,o,a)}}function Hde(n){return n=Tr(n),ua(this[n])?this[n]():this}function Dde(n,e){if(typeof n=="object"){n=yM(n);var t=xde(n),i,s=t.length;for(i=0;i<s;i++)this[t[i].unit](n[t[i].unit])}else if(n=Tr(n),ua(this[n]))return this[n](e);return this}function Nde(n,e){return(n%e+e)%e}var Xn;Array.prototype.indexOf?Xn=Array.prototype.indexOf:Xn=function(n){var e;for(e=0;e<this.length;++e)if(this[e]===n)return e;return-1};function xM(n,e){if(isNaN(n)||isNaN(e))return NaN;var t=Nde(e,12);return n+=(e-t)/12,t===1?G0(n)?29:28:31-t%7%2}Le("M",["MM",2],"Mo",function(){return this.month()+1}),Le("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)}),Le("MMMM",0,0,function(n){return this.localeData().months(this,n)}),Ae("M",fn,Uf),Ae("MM",fn,er),Ae("MMM",function(n,e){return e.monthsShortRegex(n)}),Ae("MMMM",function(n,e){return e.monthsRegex(n)}),qt(["M","MM"],function(n,e){e[El]=wt(n)-1}),qt(["MMM","MMMM"],function(n,e,t,i){var s=t._locale.monthsParse(n,i,t._strict);s!=null?e[El]=s:it(t).invalidMonth=n});var Lde="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),zW="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),UW=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,$de=Gm,Fde=Gm;function Bde(n,e){return n?po(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||UW).test(e)?"format":"standalone"][n.month()]:po(this._months)?this._months:this._months.standalone}function Vde(n,e){return n?po(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[UW.test(e)?"format":"standalone"][n.month()]:po(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Wde(n,e,t){var i,s,r,o=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=ha([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return t?e==="MMM"?(s=Xn.call(this._shortMonthsParse,o),s!==-1?s:null):(s=Xn.call(this._longMonthsParse,o),s!==-1?s:null):e==="MMM"?(s=Xn.call(this._shortMonthsParse,o),s!==-1?s:(s=Xn.call(this._longMonthsParse,o),s!==-1?s:null)):(s=Xn.call(this._longMonthsParse,o),s!==-1?s:(s=Xn.call(this._shortMonthsParse,o),s!==-1?s:null))}function jde(n,e,t){var i,s,r;if(this._monthsParseExact)return Wde.call(this,n,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=ha([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[i].test(n))return i;if(t&&e==="MMM"&&this._shortMonthsParse[i].test(n))return i;if(!t&&this._monthsParse[i].test(n))return i}}function YW(n,e){if(!n.isValid())return n;if(typeof e=="string"){if(/^\d+$/.test(e))e=wt(e);else if(e=n.localeData().monthsParse(e),!Rl(e))return n}var t=e,i=n.date();return i=i<29?i:Math.min(i,xM(n.year(),t)),n._isUTC?n._d.setUTCMonth(t,i):n._d.setMonth(t,i),n}function GW(n){return n!=null?(YW(this,n),le.updateOffset(this,!0),this):Xm(this,"Month")}function zde(){return xM(this.year(),this.month())}function Ude(n){return this._monthsParseExact?(Ot(this,"_monthsRegex")||KW.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(Ot(this,"_monthsShortRegex")||(this._monthsShortRegex=$de),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function Yde(n){return this._monthsParseExact?(Ot(this,"_monthsRegex")||KW.call(this),n?this._monthsStrictRegex:this._monthsRegex):(Ot(this,"_monthsRegex")||(this._monthsRegex=Fde),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function KW(){function n(l,c){return c.length-l.length}var e=[],t=[],i=[],s,r,o,a;for(s=0;s<12;s++)r=ha([2e3,s]),o=xl(this.monthsShort(r,"")),a=xl(this.months(r,"")),e.push(o),t.push(a),i.push(a),i.push(o);e.sort(n),t.sort(n),i.sort(n),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Gde(n,e,t,i,s,r,o){var a;return n<100&&n>=0?(a=new Date(n+400,e,t,i,s,r,o),isFinite(a.getFullYear())&&a.setFullYear(n)):a=new Date(n,e,t,i,s,r,o),a}function Qm(n){var e,t;return n<100&&n>=0?(t=Array.prototype.slice.call(arguments),t[0]=n+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(n)):e=new Date(Date.UTC.apply(null,arguments)),e}function K0(n,e,t){var i=7+e-t,s=(7+Qm(n,0,i).getUTCDay()-e)%7;return-s+i-1}function qW(n,e,t,i,s){var r=(7+t-i)%7,o=K0(n,i,s),a=1+7*(e-1)+r+o,l,c;return a<=0?(l=n-1,c=qm(l)+a):a>qm(n)?(l=n+1,c=a-qm(n)):(l=n,c=a),{year:l,dayOfYear:c}}function Zm(n,e,t){var i=K0(n.year(),e,t),s=Math.floor((n.dayOfYear()-i-1)/7)+1,r,o;return s<1?(o=n.year()-1,r=s+Ml(o,e,t)):s>Ml(n.year(),e,t)?(r=s-Ml(n.year(),e,t),o=n.year()+1):(o=n.year(),r=s),{week:r,year:o}}function Ml(n,e,t){var i=K0(n,e,t),s=K0(n+1,e,t);return(qm(n)-i+s)/7}Le("w",["ww",2],"wo","week"),Le("W",["WW",2],"Wo","isoWeek"),Ae("w",fn,Uf),Ae("ww",fn,er),Ae("W",fn,Uf),Ae("WW",fn,er),Km(["w","ww","W","WW"],function(n,e,t,i){e[i.substr(0,1)]=wt(n)});function Kde(n){return Zm(n,this._week.dow,this._week.doy).week}var qde={dow:0,doy:6};function Xde(){return this._week.dow}function Qde(){return this._week.doy}function Zde(n){var e=this.localeData().week(this);return n==null?e:this.add((n-e)*7,"d")}function Jde(n){var e=Zm(this,1,4).week;return n==null?e:this.add((n-e)*7,"d")}Le("d",0,"do","day"),Le("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)}),Le("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)}),Le("dddd",0,0,function(n){return this.localeData().weekdays(this,n)}),Le("e",0,0,"weekday"),Le("E",0,0,"isoWeekday"),Ae("d",fn),Ae("e",fn),Ae("E",fn),Ae("dd",function(n,e){return e.weekdaysMinRegex(n)}),Ae("ddd",function(n,e){return e.weekdaysShortRegex(n)}),Ae("dddd",function(n,e){return e.weekdaysRegex(n)}),Km(["dd","ddd","dddd"],function(n,e,t,i){var s=t._locale.weekdaysParse(n,i,t._strict);s!=null?e.d=s:it(t).invalidWeekday=n}),Km(["d","e","E"],function(n,e,t,i){e[i]=wt(n)});function efe(n,e){return typeof n!="string"?n:isNaN(n)?(n=e.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function tfe(n,e){return typeof n=="string"?e.weekdaysParse(n)%7||7:isNaN(n)?null:n}function EM(n,e){return n.slice(e,7).concat(n.slice(0,e))}var nfe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),XW="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ife="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),sfe=Gm,rfe=Gm,ofe=Gm;function afe(n,e){var t=po(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return n===!0?EM(t,this._week.dow):n?t[n.day()]:t}function lfe(n){return n===!0?EM(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function cfe(n){return n===!0?EM(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function hfe(n,e,t){var i,s,r,o=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=ha([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return t?e==="dddd"?(s=Xn.call(this._weekdaysParse,o),s!==-1?s:null):e==="ddd"?(s=Xn.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=Xn.call(this._minWeekdaysParse,o),s!==-1?s:null):e==="dddd"?(s=Xn.call(this._weekdaysParse,o),s!==-1||(s=Xn.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=Xn.call(this._minWeekdaysParse,o),s!==-1?s:null)):e==="ddd"?(s=Xn.call(this._shortWeekdaysParse,o),s!==-1||(s=Xn.call(this._weekdaysParse,o),s!==-1)?s:(s=Xn.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=Xn.call(this._minWeekdaysParse,o),s!==-1||(s=Xn.call(this._weekdaysParse,o),s!==-1)?s:(s=Xn.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function ufe(n,e,t){var i,s,r;if(this._weekdaysParseExact)return hfe.call(this,n,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=ha([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[i].test(n))return i;if(t&&e==="ddd"&&this._shortWeekdaysParse[i].test(n))return i;if(t&&e==="dd"&&this._minWeekdaysParse[i].test(n))return i;if(!t&&this._weekdaysParse[i].test(n))return i}}function dfe(n){if(!this.isValid())return n!=null?this:NaN;var e=Xm(this,"Day");return n!=null?(n=efe(n,this.localeData()),this.add(n-e,"d")):e}function ffe(n){if(!this.isValid())return n!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return n==null?e:this.add(n-e,"d")}function gfe(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var e=tfe(n,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function pfe(n){return this._weekdaysParseExact?(Ot(this,"_weekdaysRegex")||TM.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(Ot(this,"_weekdaysRegex")||(this._weekdaysRegex=sfe),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function mfe(n){return this._weekdaysParseExact?(Ot(this,"_weekdaysRegex")||TM.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ot(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=rfe),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function bfe(n){return this._weekdaysParseExact?(Ot(this,"_weekdaysRegex")||TM.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ot(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ofe),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function TM(){function n(h,u){return u.length-h.length}var e=[],t=[],i=[],s=[],r,o,a,l,c;for(r=0;r<7;r++)o=ha([2e3,1]).day(r),a=xl(this.weekdaysMin(o,"")),l=xl(this.weekdaysShort(o,"")),c=xl(this.weekdays(o,"")),e.push(a),t.push(l),i.push(c),s.push(a),s.push(l),s.push(c);e.sort(n),t.sort(n),i.sort(n),s.sort(n),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function MM(){return this.hours()%12||12}function wfe(){return this.hours()||24}Le("H",["HH",2],0,"hour"),Le("h",["hh",2],0,MM),Le("k",["kk",2],0,wfe),Le("hmm",0,0,function(){return""+MM.apply(this)+da(this.minutes(),2)}),Le("hmmss",0,0,function(){return""+MM.apply(this)+da(this.minutes(),2)+da(this.seconds(),2)}),Le("Hmm",0,0,function(){return""+this.hours()+da(this.minutes(),2)}),Le("Hmmss",0,0,function(){return""+this.hours()+da(this.minutes(),2)+da(this.seconds(),2)});function QW(n,e){Le(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}QW("a",!0),QW("A",!1);function ZW(n,e){return e._meridiemParse}Ae("a",ZW),Ae("A",ZW),Ae("H",fn,_M),Ae("h",fn,Uf),Ae("k",fn,Uf),Ae("HH",fn,er),Ae("hh",fn,er),Ae("kk",fn,er),Ae("hmm",BW),Ae("hmmss",VW),Ae("Hmm",BW),Ae("Hmmss",VW),qt(["H","HH"],ci),qt(["k","kk"],function(n,e,t){var i=wt(n);e[ci]=i===24?0:i}),qt(["a","A"],function(n,e,t){t._isPm=t._locale.isPM(n),t._meridiem=n}),qt(["h","hh"],function(n,e,t){e[ci]=wt(n),it(t).bigHour=!0}),qt("hmm",function(n,e,t){var i=n.length-2;e[ci]=wt(n.substr(0,i)),e[bo]=wt(n.substr(i)),it(t).bigHour=!0}),qt("hmmss",function(n,e,t){var i=n.length-4,s=n.length-2;e[ci]=wt(n.substr(0,i)),e[bo]=wt(n.substr(i,2)),e[Tl]=wt(n.substr(s)),it(t).bigHour=!0}),qt("Hmm",function(n,e,t){var i=n.length-2;e[ci]=wt(n.substr(0,i)),e[bo]=wt(n.substr(i))}),qt("Hmmss",function(n,e,t){var i=n.length-4,s=n.length-2;e[ci]=wt(n.substr(0,i)),e[bo]=wt(n.substr(i,2)),e[Tl]=wt(n.substr(s))});function vfe(n){return(n+"").toLowerCase().charAt(0)==="p"}var yfe=/[ap]\.?m?\.?/i,Cfe=Yf("Hours",!0);function Sfe(n,e,t){return n>11?t?"pm":"PM":t?"am":"AM"}var JW={calendar:hde,longDateFormat:gde,invalidDate:mde,ordinal:wde,dayOfMonthOrdinalParse:vde,relativeTime:Cde,months:Lde,monthsShort:zW,week:qde,weekdays:nfe,weekdaysMin:ife,weekdaysShort:XW,meridiemParse:yfe},Sn={},Jm={},eb;function _fe(n,e){var t,i=Math.min(n.length,e.length);for(t=0;t<i;t+=1)if(n[t]!==e[t])return t;return i}function ej(n){return n&&n.toLowerCase().replace("_","-")}function Rfe(n){for(var e=0,t,i,s,r;e<n.length;){for(r=ej(n[e]).split("-"),t=r.length,i=ej(n[e+1]),i=i?i.split("-"):null;t>0;){if(s=q0(r.slice(0,t).join("-")),s)return s;if(i&&i.length>=t&&_fe(r,i)>=t-1)break;t--}e++}return eb}function xfe(n){return!!(n&&n.match("^[^/\\\\]*$"))}function q0(n){var e=null,t;if(Sn[n]===void 0&&typeof module<"u"&&module&&module.exports&&xfe(n))try{e=eb._abbr,t=require,t("./locale/"+n),jc(e)}catch{Sn[n]=null}return Sn[n]}function jc(n,e){var t;return n&&(xs(e)?t=Al(n):t=AM(n,e),t?eb=t:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),eb._abbr}function AM(n,e){if(e!==null){var t,i=JW;if(e.abbr=n,Sn[n]!=null)DW("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Sn[n]._config;else if(e.parentLocale!=null)if(Sn[e.parentLocale]!=null)i=Sn[e.parentLocale]._config;else if(t=q0(e.parentLocale),t!=null)i=t._config;else return Jm[e.parentLocale]||(Jm[e.parentLocale]=[]),Jm[e.parentLocale].push({name:n,config:e}),null;return Sn[n]=new mM(pM(i,e)),Jm[n]&&Jm[n].forEach(function(s){AM(s.name,s.config)}),jc(n),Sn[n]}else return delete Sn[n],null}function Efe(n,e){if(e!=null){var t,i,s=JW;Sn[n]!=null&&Sn[n].parentLocale!=null?Sn[n].set(pM(Sn[n]._config,e)):(i=q0(n),i!=null&&(s=i._config),e=pM(s,e),i==null&&(e.abbr=n),t=new mM(e),t.parentLocale=Sn[n],Sn[n]=t),jc(n)}else Sn[n]!=null&&(Sn[n].parentLocale!=null?(Sn[n]=Sn[n].parentLocale,n===jc()&&jc(n)):Sn[n]!=null&&delete Sn[n]);return Sn[n]}function Al(n){var e;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return eb;if(!po(n)){if(e=q0(n),e)return e;n=[n]}return Rfe(n)}function Tfe(){return bM(Sn)}function PM(n){var e,t=n._a;return t&&it(n).overflow===-2&&(e=t[El]<0||t[El]>11?El:t[fa]<1||t[fa]>xM(t[Gi],t[El])?fa:t[ci]<0||t[ci]>24||t[ci]===24&&(t[bo]!==0||t[Tl]!==0||t[Ou]!==0)?ci:t[bo]<0||t[bo]>59?bo:t[Tl]<0||t[Tl]>59?Tl:t[Ou]<0||t[Ou]>999?Ou:-1,it(n)._overflowDayOfYear&&(e<Gi||e>fa)&&(e=fa),it(n)._overflowWeeks&&e===-1&&(e=Ide),it(n)._overflowWeekday&&e===-1&&(e=Ode),it(n).overflow=e),n}var Mfe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Afe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Pfe=/Z|[+-]\d\d(?::?\d\d)?/,X0=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],IM=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ife=/^\/?Date\((-?\d+)/i,Ofe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,kfe={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function tj(n){var e,t,i=n._i,s=Mfe.exec(i)||Afe.exec(i),r,o,a,l,c=X0.length,h=IM.length;if(s){for(it(n).iso=!0,e=0,t=c;e<t;e++)if(X0[e][1].exec(s[1])){o=X0[e][0],r=X0[e][2]!==!1;break}if(o==null){n._isValid=!1;return}if(s[3]){for(e=0,t=h;e<t;e++)if(IM[e][1].exec(s[3])){a=(s[2]||" ")+IM[e][0];break}if(a==null){n._isValid=!1;return}}if(!r&&a!=null){n._isValid=!1;return}if(s[4])if(Pfe.exec(s[4]))l="Z";else{n._isValid=!1;return}n._f=o+(a||"")+(l||""),kM(n)}else n._isValid=!1}function Hfe(n,e,t,i,s,r){var o=[Dfe(n),zW.indexOf(e),parseInt(t,10),parseInt(i,10),parseInt(s,10)];return r&&o.push(parseInt(r,10)),o}function Dfe(n){var e=parseInt(n,10);return e<=49?2e3+e:e<=999?1900+e:e}function Nfe(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Lfe(n,e,t){if(n){var i=XW.indexOf(n),s=new Date(e[0],e[1],e[2]).getDay();if(i!==s)return it(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function $fe(n,e,t){if(n)return kfe[n];if(e)return 0;var i=parseInt(t,10),s=i%100,r=(i-s)/100;return r*60+s}function nj(n){var e=Ofe.exec(Nfe(n._i)),t;if(e){if(t=Hfe(e[4],e[3],e[2],e[5],e[6],e[7]),!Lfe(e[1],t,n))return;n._a=t,n._tzm=$fe(e[8],e[9],e[10]),n._d=Qm.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),it(n).rfc2822=!0}else n._isValid=!1}function Ffe(n){var e=Ife.exec(n._i);if(e!==null){n._d=new Date(+e[1]);return}if(tj(n),n._isValid===!1)delete n._isValid;else return;if(nj(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:le.createFromInputFallback(n)}le.createFromInputFallback=Er("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function Gf(n,e,t){return n??e??t}function Bfe(n){var e=new Date(le.now());return n._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function OM(n){var e,t,i=[],s,r,o;if(!n._d){for(s=Bfe(n),n._w&&n._a[fa]==null&&n._a[El]==null&&Vfe(n),n._dayOfYear!=null&&(o=Gf(n._a[Gi],s[Gi]),(n._dayOfYear>qm(o)||n._dayOfYear===0)&&(it(n)._overflowDayOfYear=!0),t=Qm(o,0,n._dayOfYear),n._a[El]=t.getUTCMonth(),n._a[fa]=t.getUTCDate()),e=0;e<3&&n._a[e]==null;++e)n._a[e]=i[e]=s[e];for(;e<7;e++)n._a[e]=i[e]=n._a[e]==null?e===2?1:0:n._a[e];n._a[ci]===24&&n._a[bo]===0&&n._a[Tl]===0&&n._a[Ou]===0&&(n._nextDay=!0,n._a[ci]=0),n._d=(n._useUTC?Qm:Gde).apply(null,i),r=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[ci]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==r&&(it(n).weekdayMismatch=!0)}}function Vfe(n){var e,t,i,s,r,o,a,l,c;e=n._w,e.GG!=null||e.W!=null||e.E!=null?(r=1,o=4,t=Gf(e.GG,n._a[Gi],Zm(gn(),1,4).year),i=Gf(e.W,1),s=Gf(e.E,1),(s<1||s>7)&&(l=!0)):(r=n._locale._week.dow,o=n._locale._week.doy,c=Zm(gn(),r,o),t=Gf(e.gg,n._a[Gi],c.year),i=Gf(e.w,c.week),e.d!=null?(s=e.d,(s<0||s>6)&&(l=!0)):e.e!=null?(s=e.e+r,(e.e<0||e.e>6)&&(l=!0)):s=r),i<1||i>Ml(t,r,o)?it(n)._overflowWeeks=!0:l!=null?it(n)._overflowWeekday=!0:(a=qW(t,i,s,r,o),n._a[Gi]=a.year,n._dayOfYear=a.dayOfYear)}le.ISO_8601=function(){},le.RFC_2822=function(){};function kM(n){if(n._f===le.ISO_8601){tj(n);return}if(n._f===le.RFC_2822){nj(n);return}n._a=[],it(n).empty=!0;var e=""+n._i,t,i,s,r,o,a=e.length,l=0,c,h;for(s=NW(n._f,n._locale).match(wM)||[],h=s.length,t=0;t<h;t++)r=s[t],i=(e.match(Mde(r,n))||[])[0],i&&(o=e.substr(0,e.indexOf(i)),o.length>0&&it(n).unusedInput.push(o),e=e.slice(e.indexOf(i)+i.length),l+=i.length),jf[r]?(i?it(n).empty=!1:it(n).unusedTokens.push(r),Pde(r,i,n)):n._strict&&!i&&it(n).unusedTokens.push(r);it(n).charsLeftOver=a-l,e.length>0&&it(n).unusedInput.push(e),n._a[ci]<=12&&it(n).bigHour===!0&&n._a[ci]>0&&(it(n).bigHour=void 0),it(n).parsedDateParts=n._a.slice(0),it(n).meridiem=n._meridiem,n._a[ci]=Wfe(n._locale,n._a[ci],n._meridiem),c=it(n).era,c!==null&&(n._a[Gi]=n._locale.erasConvertYear(c,n._a[Gi])),OM(n),PM(n)}function Wfe(n,e,t){var i;return t==null?e:n.meridiemHour!=null?n.meridiemHour(e,t):(n.isPM!=null&&(i=n.isPM(t),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function jfe(n){var e,t,i,s,r,o,a=!1,l=n._f.length;if(l===0){it(n).invalidFormat=!0,n._d=new Date(NaN);return}for(s=0;s<l;s++)r=0,o=!1,e=gM({},n),n._useUTC!=null&&(e._useUTC=n._useUTC),e._f=n._f[s],kM(e),dM(e)&&(o=!0),r+=it(e).charsLeftOver,r+=it(e).unusedTokens.length*10,it(e).score=r,a?r<i&&(i=r,t=e):(i==null||r<i||o)&&(i=r,t=e,o&&(a=!0));Wc(n,t||e)}function zfe(n){if(!n._d){var e=yM(n._i),t=e.day===void 0?e.date:e.day;n._a=IW([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),OM(n)}}function Ufe(n){var e=new Ym(PM(ij(n)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function ij(n){var e=n._i,t=n._f;return n._locale=n._locale||Al(n._l),e===null||t===void 0&&e===""?$0({nullInput:!0}):(typeof e=="string"&&(n._i=e=n._locale.preparse(e)),mo(e)?new Ym(PM(e)):(Um(e)?n._d=e:po(t)?jfe(n):t?kM(n):Yfe(n),dM(n)||(n._d=null),n))}function Yfe(n){var e=n._i;xs(e)?n._d=new Date(le.now()):Um(e)?n._d=new Date(e.valueOf()):typeof e=="string"?Ffe(n):po(e)?(n._a=IW(e.slice(0),function(t){return parseInt(t,10)}),OM(n)):Iu(e)?zfe(n):Rl(e)?n._d=new Date(e):le.createFromInputFallback(n)}function sj(n,e,t,i,s){var r={};return(e===!0||e===!1)&&(i=e,e=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(Iu(n)&&hM(n)||po(n)&&n.length===0)&&(n=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=t,r._i=n,r._f=e,r._strict=i,Ufe(r)}function gn(n,e,t,i){return sj(n,e,t,i,!1)}var Gfe=Er("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=gn.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:$0()}),Kfe=Er("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=gn.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:$0()});function rj(n,e){var t,i;if(e.length===1&&po(e[0])&&(e=e[0]),!e.length)return gn();for(t=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][n](t))&&(t=e[i]);return t}function qfe(){var n=[].slice.call(arguments,0);return rj("isBefore",n)}function Xfe(){var n=[].slice.call(arguments,0);return rj("isAfter",n)}var Qfe=function(){return Date.now?Date.now():+new Date},tb=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Zfe(n){var e,t=!1,i,s=tb.length;for(e in n)if(Ot(n,e)&&!(Xn.call(tb,e)!==-1&&(n[e]==null||!isNaN(n[e]))))return!1;for(i=0;i<s;++i)if(n[tb[i]]){if(t)return!1;parseFloat(n[tb[i]])!==wt(n[tb[i]])&&(t=!0)}return!0}function Jfe(){return this._isValid}function ege(){return wo(NaN)}function Q0(n){var e=yM(n),t=e.year||0,i=e.quarter||0,s=e.month||0,r=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._isValid=Zfe(e),this._milliseconds=+h+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+r*7,this._months=+s+i*3+t*12,this._data={},this._locale=Al(),this._bubble()}function Z0(n){return n instanceof Q0}function HM(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function tge(n,e,t){var i=Math.min(n.length,e.length),s=Math.abs(n.length-e.length),r=0,o;for(o=0;o<i;o++)wt(n[o])!==wt(e[o])&&r++;return r+s}function oj(n,e){Le(n,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+da(~~(t/60),2)+e+da(~~t%60,2)})}oj("Z",":"),oj("ZZ",""),Ae("Z",U0),Ae("ZZ",U0),qt(["Z","ZZ"],function(n,e,t){t._useUTC=!0,t._tzm=DM(U0,n)});var nge=/([\+\-]|\d\d)/gi;function DM(n,e){var t=(e||"").match(n),i,s,r;return t===null?null:(i=t[t.length-1]||[],s=(i+"").match(nge)||["-",0,0],r=+(s[1]*60)+wt(s[2]),r===0?0:s[0]==="+"?r:-r)}function NM(n,e){var t,i;return e._isUTC?(t=e.clone(),i=(mo(n)||Um(n)?n.valueOf():gn(n).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),le.updateOffset(t,!1),t):gn(n).local()}function LM(n){return-Math.round(n._d.getTimezoneOffset())}le.updateOffset=function(){};function ige(n,e,t){var i=this._offset||0,s;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=DM(U0,n),n===null)return this}else Math.abs(n)<16&&!t&&(n=n*60);return!this._isUTC&&e&&(s=LM(this)),this._offset=n,this._isUTC=!0,s!=null&&this.add(s,"m"),i!==n&&(!e||this._changeInProgress?hj(this,wo(n-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,le.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:LM(this)}function sge(n,e){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,e),this):-this.utcOffset()}function rge(n){return this.utcOffset(0,n)}function oge(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(LM(this),"m")),this}function age(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=DM(Ede,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function lge(n){return this.isValid()?(n=n?gn(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function cge(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function hge(){if(!xs(this._isDSTShifted))return this._isDSTShifted;var n={},e;return gM(n,this),n=ij(n),n._a?(e=n._isUTC?ha(n._a):gn(n._a),this._isDSTShifted=this.isValid()&&tge(n._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function uge(){return this.isValid()?!this._isUTC:!1}function dge(){return this.isValid()?this._isUTC:!1}function aj(){return this.isValid()?this._isUTC&&this._offset===0:!1}var fge=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,gge=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function wo(n,e){var t=n,i=null,s,r,o;return Z0(n)?t={ms:n._milliseconds,d:n._days,M:n._months}:Rl(n)||!isNaN(+n)?(t={},e?t[e]=+n:t.milliseconds=+n):(i=fge.exec(n))?(s=i[1]==="-"?-1:1,t={y:0,d:wt(i[fa])*s,h:wt(i[ci])*s,m:wt(i[bo])*s,s:wt(i[Tl])*s,ms:wt(HM(i[Ou]*1e3))*s}):(i=gge.exec(n))?(s=i[1]==="-"?-1:1,t={y:ku(i[2],s),M:ku(i[3],s),w:ku(i[4],s),d:ku(i[5],s),h:ku(i[6],s),m:ku(i[7],s),s:ku(i[8],s)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=pge(gn(t.from),gn(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),r=new Q0(t),Z0(n)&&Ot(n,"_locale")&&(r._locale=n._locale),Z0(n)&&Ot(n,"_isValid")&&(r._isValid=n._isValid),r}wo.fn=Q0.prototype,wo.invalid=ege;function ku(n,e){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*e}function lj(n,e){var t={};return t.months=e.month()-n.month()+(e.year()-n.year())*12,n.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+n.clone().add(t.months,"M"),t}function pge(n,e){var t;return n.isValid()&&e.isValid()?(e=NM(e,n),n.isBefore(e)?t=lj(n,e):(t=lj(e,n),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function cj(n,e){return function(t,i){var s,r;return i!==null&&!isNaN(+i)&&(DW(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=t,t=i,i=r),s=wo(t,i),hj(this,s,n),this}}function hj(n,e,t,i){var s=e._milliseconds,r=HM(e._days),o=HM(e._months);n.isValid()&&(i=i??!0,o&&YW(n,Xm(n,"Month")+o*t),r&&jW(n,"Date",Xm(n,"Date")+r*t),s&&n._d.setTime(n._d.valueOf()+s*t),i&&le.updateOffset(n,r||o))}var mge=cj(1,"add"),bge=cj(-1,"subtract");function uj(n){return typeof n=="string"||n instanceof String}function wge(n){return mo(n)||Um(n)||uj(n)||Rl(n)||yge(n)||vge(n)||n===null||n===void 0}function vge(n){var e=Iu(n)&&!hM(n),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,r,o=i.length;for(s=0;s<o;s+=1)r=i[s],t=t||Ot(n,r);return e&&t}function yge(n){var e=po(n),t=!1;return e&&(t=n.filter(function(i){return!Rl(i)&&uj(n)}).length===0),e&&t}function Cge(n){var e=Iu(n)&&!hM(n),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,r;for(s=0;s<i.length;s+=1)r=i[s],t=t||Ot(n,r);return e&&t}function Sge(n,e){var t=n.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function _ge(n,e){arguments.length===1&&(arguments[0]?wge(arguments[0])?(n=arguments[0],e=void 0):Cge(arguments[0])&&(e=arguments[0],n=void 0):(n=void 0,e=void 0));var t=n||gn(),i=NM(t,this).startOf("day"),s=le.calendarFormat(this,i)||"sameElse",r=e&&(ua(e[s])?e[s].call(this,t):e[s]);return this.format(r||this.localeData().calendar(s,this,gn(t)))}function Rge(){return new Ym(this)}function xge(n,e){var t=mo(n)?n:gn(n);return this.isValid()&&t.isValid()?(e=Tr(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function Ege(n,e){var t=mo(n)?n:gn(n);return this.isValid()&&t.isValid()?(e=Tr(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function Tge(n,e,t,i){var s=mo(n)?n:gn(n),r=mo(e)?e:gn(e);return this.isValid()&&s.isValid()&&r.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(s,t):!this.isBefore(s,t))&&(i[1]===")"?this.isBefore(r,t):!this.isAfter(r,t))):!1}function Mge(n,e){var t=mo(n)?n:gn(n),i;return this.isValid()&&t.isValid()?(e=Tr(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function Age(n,e){return this.isSame(n,e)||this.isAfter(n,e)}function Pge(n,e){return this.isSame(n,e)||this.isBefore(n,e)}function Ige(n,e,t){var i,s,r;if(!this.isValid())return NaN;if(i=NM(n,this),!i.isValid())return NaN;switch(s=(i.utcOffset()-this.utcOffset())*6e4,e=Tr(e),e){case"year":r=J0(this,i)/12;break;case"month":r=J0(this,i);break;case"quarter":r=J0(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-s)/864e5;break;case"week":r=(this-i-s)/6048e5;break;default:r=this-i}return t?r:Mr(r)}function J0(n,e){if(n.date()<e.date())return-J0(e,n);var t=(e.year()-n.year())*12+(e.month()-n.month()),i=n.clone().add(t,"months"),s,r;return e-i<0?(s=n.clone().add(t-1,"months"),r=(e-i)/(i-s)):(s=n.clone().add(t+1,"months"),r=(e-i)/(s-i)),-(t+r)||0}le.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",le.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Oge(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function kge(n){if(!this.isValid())return null;var e=n!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?B0(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ua(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",B0(t,"Z")):B0(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Hge(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",e="",t,i,s,r;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+n+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",r=e+'[")]',this.format(t+i+s+r)}function Dge(n){n||(n=this.isUtc()?le.defaultFormatUtc:le.defaultFormat);var e=B0(this,n);return this.localeData().postformat(e)}function Nge(n,e){return this.isValid()&&(mo(n)&&n.isValid()||gn(n).isValid())?wo({to:this,from:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Lge(n){return this.from(gn(),n)}function $ge(n,e){return this.isValid()&&(mo(n)&&n.isValid()||gn(n).isValid())?wo({from:this,to:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Fge(n){return this.to(gn(),n)}function dj(n){var e;return n===void 0?this._locale._abbr:(e=Al(n),e!=null&&(this._locale=e),this)}var fj=Er("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function gj(){return this._locale}var eC=1e3,Kf=60*eC,tC=60*Kf,pj=(365*400+97)*24*tC;function qf(n,e){return(n%e+e)%e}function mj(n,e,t){return n<100&&n>=0?new Date(n+400,e,t)-pj:new Date(n,e,t).valueOf()}function bj(n,e,t){return n<100&&n>=0?Date.UTC(n+400,e,t)-pj:Date.UTC(n,e,t)}function Bge(n){var e,t;if(n=Tr(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?bj:mj,n){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=qf(e+(this._isUTC?0:this.utcOffset()*Kf),tC);break;case"minute":e=this._d.valueOf(),e-=qf(e,Kf);break;case"second":e=this._d.valueOf(),e-=qf(e,eC);break}return this._d.setTime(e),le.updateOffset(this,!0),this}function Vge(n){var e,t;if(n=Tr(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?bj:mj,n){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=tC-qf(e+(this._isUTC?0:this.utcOffset()*Kf),tC)-1;break;case"minute":e=this._d.valueOf(),e+=Kf-qf(e,Kf)-1;break;case"second":e=this._d.valueOf(),e+=eC-qf(e,eC)-1;break}return this._d.setTime(e),le.updateOffset(this,!0),this}function Wge(){return this._d.valueOf()-(this._offset||0)*6e4}function jge(){return Math.floor(this.valueOf()/1e3)}function zge(){return new Date(this.valueOf())}function Uge(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function Yge(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function Gge(){return this.isValid()?this.toISOString():null}function Kge(){return dM(this)}function qge(){return Wc({},it(this))}function Xge(){return it(this).overflow}function Qge(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Le("N",0,0,"eraAbbr"),Le("NN",0,0,"eraAbbr"),Le("NNN",0,0,"eraAbbr"),Le("NNNN",0,0,"eraName"),Le("NNNNN",0,0,"eraNarrow"),Le("y",["y",1],"yo","eraYear"),Le("y",["yy",2],0,"eraYear"),Le("y",["yyy",3],0,"eraYear"),Le("y",["yyyy",4],0,"eraYear"),Ae("N",$M),Ae("NN",$M),Ae("NNN",$M),Ae("NNNN",lpe),Ae("NNNNN",cpe),qt(["N","NN","NNN","NNNN","NNNNN"],function(n,e,t,i){var s=t._locale.erasParse(n,i,t._strict);s?it(t).era=s:it(t).invalidEra=n}),Ae("y",zf),Ae("yy",zf),Ae("yyy",zf),Ae("yyyy",zf),Ae("yo",hpe),qt(["y","yy","yyy","yyyy"],Gi),qt(["yo"],function(n,e,t,i){var s;t._locale._eraYearOrdinalRegex&&(s=n.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[Gi]=t._locale.eraYearOrdinalParse(n,s):e[Gi]=parseInt(n,10)});function Zge(n,e){var t,i,s,r=this._eras||Al("en")._eras;for(t=0,i=r.length;t<i;++t){switch(typeof r[t].since){case"string":s=le(r[t].since).startOf("day"),r[t].since=s.valueOf();break}switch(typeof r[t].until){case"undefined":r[t].until=1/0;break;case"string":s=le(r[t].until).startOf("day").valueOf(),r[t].until=s.valueOf();break}}return r}function Jge(n,e,t){var i,s,r=this.eras(),o,a,l;for(n=n.toUpperCase(),i=0,s=r.length;i<s;++i)if(o=r[i].name.toUpperCase(),a=r[i].abbr.toUpperCase(),l=r[i].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(a===n)return r[i];break;case"NNNN":if(o===n)return r[i];break;case"NNNNN":if(l===n)return r[i];break}else if([o,a,l].indexOf(n)>=0)return r[i]}function epe(n,e){var t=n.since<=n.until?1:-1;return e===void 0?le(n.since).year():le(n.since).year()+(e-n.offset)*t}function tpe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].name;return""}function npe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].narrow;return""}function ipe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].abbr;return""}function spe(){var n,e,t,i,s=this.localeData().eras();for(n=0,e=s.length;n<e;++n)if(t=s[n].since<=s[n].until?1:-1,i=this.clone().startOf("day").valueOf(),s[n].since<=i&&i<=s[n].until||s[n].until<=i&&i<=s[n].since)return(this.year()-le(s[n].since).year())*t+s[n].offset;return this.year()}function rpe(n){return Ot(this,"_erasNameRegex")||FM.call(this),n?this._erasNameRegex:this._erasRegex}function ope(n){return Ot(this,"_erasAbbrRegex")||FM.call(this),n?this._erasAbbrRegex:this._erasRegex}function ape(n){return Ot(this,"_erasNarrowRegex")||FM.call(this),n?this._erasNarrowRegex:this._erasRegex}function $M(n,e){return e.erasAbbrRegex(n)}function lpe(n,e){return e.erasNameRegex(n)}function cpe(n,e){return e.erasNarrowRegex(n)}function hpe(n,e){return e._eraYearOrdinalRegex||zf}function FM(){var n=[],e=[],t=[],i=[],s,r,o,a,l,c=this.eras();for(s=0,r=c.length;s<r;++s)o=xl(c[s].name),a=xl(c[s].abbr),l=xl(c[s].narrow),e.push(o),n.push(a),t.push(l),i.push(o),i.push(a),i.push(l);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}Le(0,["gg",2],0,function(){return this.weekYear()%100}),Le(0,["GG",2],0,function(){return this.isoWeekYear()%100});function nC(n,e){Le(0,[n,n.length],0,e)}nC("gggg","weekYear"),nC("ggggg","weekYear"),nC("GGGG","isoWeekYear"),nC("GGGGG","isoWeekYear"),Ae("G",z0),Ae("g",z0),Ae("GG",fn,er),Ae("gg",fn,er),Ae("GGGG",SM,CM),Ae("gggg",SM,CM),Ae("GGGGG",j0,V0),Ae("ggggg",j0,V0),Km(["gggg","ggggg","GGGG","GGGGG"],function(n,e,t,i){e[i.substr(0,2)]=wt(n)}),Km(["gg","GG"],function(n,e,t,i){e[i]=le.parseTwoDigitYear(n)});function upe(n){return wj.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function dpe(n){return wj.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function fpe(){return Ml(this.year(),1,4)}function gpe(){return Ml(this.isoWeekYear(),1,4)}function ppe(){var n=this.localeData()._week;return Ml(this.year(),n.dow,n.doy)}function mpe(){var n=this.localeData()._week;return Ml(this.weekYear(),n.dow,n.doy)}function wj(n,e,t,i,s){var r;return n==null?Zm(this,i,s).year:(r=Ml(n,i,s),e>r&&(e=r),bpe.call(this,n,e,t,i,s))}function bpe(n,e,t,i,s){var r=qW(n,e,t,i,s),o=Qm(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Le("Q",0,"Qo","quarter"),Ae("Q",$W),qt("Q",function(n,e){e[El]=(wt(n)-1)*3});function wpe(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}Le("D",["DD",2],"Do","date"),Ae("D",fn,Uf),Ae("DD",fn,er),Ae("Do",function(n,e){return n?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),qt(["D","DD"],fa),qt("Do",function(n,e){e[fa]=wt(n.match(fn)[0])});var vj=Yf("Date",!0);Le("DDD",["DDDD",3],"DDDo","dayOfYear"),Ae("DDD",W0),Ae("DDDD",FW),qt(["DDD","DDDD"],function(n,e,t){t._dayOfYear=wt(n)});function vpe(n){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?e:this.add(n-e,"d")}Le("m",["mm",2],0,"minute"),Ae("m",fn,_M),Ae("mm",fn,er),qt(["m","mm"],bo);var ype=Yf("Minutes",!1);Le("s",["ss",2],0,"second"),Ae("s",fn,_M),Ae("ss",fn,er),qt(["s","ss"],Tl);var Cpe=Yf("Seconds",!1);Le("S",0,0,function(){return~~(this.millisecond()/100)}),Le(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Le(0,["SSS",3],0,"millisecond"),Le(0,["SSSS",4],0,function(){return this.millisecond()*10}),Le(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Le(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Le(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Le(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Le(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Ae("S",W0,$W),Ae("SS",W0,er),Ae("SSS",W0,FW);var zc,yj;for(zc="SSSS";zc.length<=9;zc+="S")Ae(zc,zf);function Spe(n,e){e[Ou]=wt(("0."+n)*1e3)}for(zc="S";zc.length<=9;zc+="S")qt(zc,Spe);yj=Yf("Milliseconds",!1),Le("z",0,0,"zoneAbbr"),Le("zz",0,0,"zoneName");function _pe(){return this._isUTC?"UTC":""}function Rpe(){return this._isUTC?"Coordinated Universal Time":""}var de=Ym.prototype;de.add=mge,de.calendar=_ge,de.clone=Rge,de.diff=Ige,de.endOf=Vge,de.format=Dge,de.from=Nge,de.fromNow=Lge,de.to=$ge,de.toNow=Fge,de.get=Hde,de.invalidAt=Xge,de.isAfter=xge,de.isBefore=Ege,de.isBetween=Tge,de.isSame=Mge,de.isSameOrAfter=Age,de.isSameOrBefore=Pge,de.isValid=Kge,de.lang=fj,de.locale=dj,de.localeData=gj,de.max=Kfe,de.min=Gfe,de.parsingFlags=qge,de.set=Dde,de.startOf=Bge,de.subtract=bge,de.toArray=Uge,de.toObject=Yge,de.toDate=zge,de.toISOString=kge,de.inspect=Hge,typeof Symbol<"u"&&Symbol.for!=null&&(de[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),de.toJSON=Gge,de.toString=Oge,de.unix=jge,de.valueOf=Wge,de.creationData=Qge,de.eraName=tpe,de.eraNarrow=npe,de.eraAbbr=ipe,de.eraYear=spe,de.year=WW,de.isLeapYear=kde,de.weekYear=upe,de.isoWeekYear=dpe,de.quarter=de.quarters=wpe,de.month=GW,de.daysInMonth=zde,de.week=de.weeks=Zde,de.isoWeek=de.isoWeeks=Jde,de.weeksInYear=ppe,de.weeksInWeekYear=mpe,de.isoWeeksInYear=fpe,de.isoWeeksInISOWeekYear=gpe,de.date=vj,de.day=de.days=dfe,de.weekday=ffe,de.isoWeekday=gfe,de.dayOfYear=vpe,de.hour=de.hours=Cfe,de.minute=de.minutes=ype,de.second=de.seconds=Cpe,de.millisecond=de.milliseconds=yj,de.utcOffset=ige,de.utc=rge,de.local=oge,de.parseZone=age,de.hasAlignedHourOffset=lge,de.isDST=cge,de.isLocal=uge,de.isUtcOffset=dge,de.isUtc=aj,de.isUTC=aj,de.zoneAbbr=_pe,de.zoneName=Rpe,de.dates=Er("dates accessor is deprecated. Use date instead.",vj),de.months=Er("months accessor is deprecated. Use month instead",GW),de.years=Er("years accessor is deprecated. Use year instead",WW),de.zone=Er("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",sge),de.isDSTShifted=Er("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",hge);function xpe(n){return gn(n*1e3)}function Epe(){return gn.apply(null,arguments).parseZone()}function Cj(n){return n}var kt=mM.prototype;kt.calendar=ude,kt.longDateFormat=pde,kt.invalidDate=bde,kt.ordinal=yde,kt.preparse=Cj,kt.postformat=Cj,kt.relativeTime=Sde,kt.pastFuture=_de,kt.set=cde,kt.eras=Zge,kt.erasParse=Jge,kt.erasConvertYear=epe,kt.erasAbbrRegex=ope,kt.erasNameRegex=rpe,kt.erasNarrowRegex=ape,kt.months=Bde,kt.monthsShort=Vde,kt.monthsParse=jde,kt.monthsRegex=Yde,kt.monthsShortRegex=Ude,kt.week=Kde,kt.firstDayOfYear=Qde,kt.firstDayOfWeek=Xde,kt.weekdays=afe,kt.weekdaysMin=cfe,kt.weekdaysShort=lfe,kt.weekdaysParse=ufe,kt.weekdaysRegex=pfe,kt.weekdaysShortRegex=mfe,kt.weekdaysMinRegex=bfe,kt.isPM=vfe,kt.meridiem=Sfe;function iC(n,e,t,i){var s=Al(),r=ha().set(i,e);return s[t](r,n)}function Sj(n,e,t){if(Rl(n)&&(e=n,n=void 0),n=n||"",e!=null)return iC(n,e,t,"month");var i,s=[];for(i=0;i<12;i++)s[i]=iC(n,i,t,"month");return s}function BM(n,e,t,i){typeof n=="boolean"?(Rl(e)&&(t=e,e=void 0),e=e||""):(e=n,t=e,n=!1,Rl(e)&&(t=e,e=void 0),e=e||"");var s=Al(),r=n?s._week.dow:0,o,a=[];if(t!=null)return iC(e,(t+r)%7,i,"day");for(o=0;o<7;o++)a[o]=iC(e,(o+r)%7,i,"day");return a}function Tpe(n,e){return Sj(n,e,"months")}function Mpe(n,e){return Sj(n,e,"monthsShort")}function Ape(n,e,t){return BM(n,e,t,"weekdays")}function Ppe(n,e,t){return BM(n,e,t,"weekdaysShort")}function Ipe(n,e,t){return BM(n,e,t,"weekdaysMin")}jc("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var e=n%10,t=wt(n%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return n+t}}),le.lang=Er("moment.lang is deprecated. Use moment.locale instead.",jc),le.langData=Er("moment.langData is deprecated. Use moment.localeData instead.",Al);var Pl=Math.abs;function Ope(){var n=this._data;return this._milliseconds=Pl(this._milliseconds),this._days=Pl(this._days),this._months=Pl(this._months),n.milliseconds=Pl(n.milliseconds),n.seconds=Pl(n.seconds),n.minutes=Pl(n.minutes),n.hours=Pl(n.hours),n.months=Pl(n.months),n.years=Pl(n.years),this}function _j(n,e,t,i){var s=wo(e,t);return n._milliseconds+=i*s._milliseconds,n._days+=i*s._days,n._months+=i*s._months,n._bubble()}function kpe(n,e){return _j(this,n,e,1)}function Hpe(n,e){return _j(this,n,e,-1)}function Rj(n){return n<0?Math.floor(n):Math.ceil(n)}function Dpe(){var n=this._milliseconds,e=this._days,t=this._months,i=this._data,s,r,o,a,l;return n>=0&&e>=0&&t>=0||n<=0&&e<=0&&t<=0||(n+=Rj(VM(t)+e)*864e5,e=0,t=0),i.milliseconds=n%1e3,s=Mr(n/1e3),i.seconds=s%60,r=Mr(s/60),i.minutes=r%60,o=Mr(r/60),i.hours=o%24,e+=Mr(o/24),l=Mr(xj(e)),t+=l,e-=Rj(VM(l)),a=Mr(t/12),t%=12,i.days=e,i.months=t,i.years=a,this}function xj(n){return n*4800/146097}function VM(n){return n*146097/4800}function Npe(n){if(!this.isValid())return NaN;var e,t,i=this._milliseconds;if(n=Tr(n),n==="month"||n==="quarter"||n==="year")switch(e=this._days+i/864e5,t=this._months+xj(e),n){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(VM(this._months)),n){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+n)}}function Il(n){return function(){return this.as(n)}}var Ej=Il("ms"),Lpe=Il("s"),$pe=Il("m"),Fpe=Il("h"),Bpe=Il("d"),Vpe=Il("w"),Wpe=Il("M"),jpe=Il("Q"),zpe=Il("y"),Upe=Ej;function Ype(){return wo(this)}function Gpe(n){return n=Tr(n),this.isValid()?this[n+"s"]():NaN}function Hu(n){return function(){return this.isValid()?this._data[n]:NaN}}var Kpe=Hu("milliseconds"),qpe=Hu("seconds"),Xpe=Hu("minutes"),Qpe=Hu("hours"),Zpe=Hu("days"),Jpe=Hu("months"),eme=Hu("years");function tme(){return Mr(this.days()/7)}var Ol=Math.round,Xf={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function nme(n,e,t,i,s){return s.relativeTime(e||1,!!t,n,i)}function ime(n,e,t,i){var s=wo(n).abs(),r=Ol(s.as("s")),o=Ol(s.as("m")),a=Ol(s.as("h")),l=Ol(s.as("d")),c=Ol(s.as("M")),h=Ol(s.as("w")),u=Ol(s.as("y")),d=r<=t.ss&&["s",r]||r<t.s&&["ss",r]||o<=1&&["m"]||o<t.m&&["mm",o]||a<=1&&["h"]||a<t.h&&["hh",a]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(d=d||h<=1&&["w"]||h<t.w&&["ww",h]),d=d||c<=1&&["M"]||c<t.M&&["MM",c]||u<=1&&["y"]||["yy",u],d[2]=e,d[3]=+n>0,d[4]=i,nme.apply(null,d)}function sme(n){return n===void 0?Ol:typeof n=="function"?(Ol=n,!0):!1}function rme(n,e){return Xf[n]===void 0?!1:e===void 0?Xf[n]:(Xf[n]=e,n==="s"&&(Xf.ss=e-1),!0)}function ome(n,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=Xf,s,r;return typeof n=="object"&&(e=n,n=!1),typeof n=="boolean"&&(t=n),typeof e=="object"&&(i=Object.assign({},Xf,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),s=this.localeData(),r=ime(this,!t,i,s),t&&(r=s.pastFuture(+this,r)),s.postformat(r)}var WM=Math.abs;function Qf(n){return(n>0)-(n<0)||+n}function sC(){if(!this.isValid())return this.localeData().invalidDate();var n=WM(this._milliseconds)/1e3,e=WM(this._days),t=WM(this._months),i,s,r,o,a=this.asSeconds(),l,c,h,u;return a?(i=Mr(n/60),s=Mr(i/60),n%=60,i%=60,r=Mr(t/12),t%=12,o=n?n.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=Qf(this._months)!==Qf(a)?"-":"",h=Qf(this._days)!==Qf(a)?"-":"",u=Qf(this._milliseconds)!==Qf(a)?"-":"",l+"P"+(r?c+r+"Y":"")+(t?c+t+"M":"")+(e?h+e+"D":"")+(s||i||n?"T":"")+(s?u+s+"H":"")+(i?u+i+"M":"")+(n?u+o+"S":"")):"P0D"}var St=Q0.prototype;St.isValid=Jfe,St.abs=Ope,St.add=kpe,St.subtract=Hpe,St.as=Npe,St.asMilliseconds=Ej,St.asSeconds=Lpe,St.asMinutes=$pe,St.asHours=Fpe,St.asDays=Bpe,St.asWeeks=Vpe,St.asMonths=Wpe,St.asQuarters=jpe,St.asYears=zpe,St.valueOf=Upe,St._bubble=Dpe,St.clone=Ype,St.get=Gpe,St.milliseconds=Kpe,St.seconds=qpe,St.minutes=Xpe,St.hours=Qpe,St.days=Zpe,St.weeks=tme,St.months=Jpe,St.years=eme,St.humanize=ome,St.toISOString=sC,St.toString=sC,St.toJSON=sC,St.locale=dj,St.localeData=gj,St.toIsoString=Er("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",sC),St.lang=fj,Le("X",0,0,"unix"),Le("x",0,0,"valueOf"),Ae("x",z0),Ae("X",Tde),qt("X",function(n,e,t){t._d=new Date(parseFloat(n)*1e3)}),qt("x",function(n,e,t){t._d=new Date(wt(n))});//! moment.js
le.version="2.30.1",ade(gn),le.fn=de,le.min=qfe,le.max=Xfe,le.now=Qfe,le.utc=ha,le.unix=xpe,le.months=Tpe,le.isDate=Um,le.locale=jc,le.invalid=$0,le.duration=wo,le.isMoment=mo,le.weekdays=Ape,le.parseZone=Epe,le.localeData=Al,le.isDuration=Z0,le.monthsShort=Mpe,le.weekdaysMin=Ipe,le.defineLocale=AM,le.updateLocale=Efe,le.locales=Tfe,le.weekdaysShort=Ppe,le.normalizeUnits=Tr,le.relativeTimeRounding=sme,le.relativeTimeThreshold=rme,le.calendarFormat=Sge,le.prototype=de,le.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Tj(n){const e=n.length;let t=0;for(;t<e;)n[t]=[n[t]],t+=1}function jM(n,e){const t=e.length;let i=0;for(;i<t;)n.push(e[i]),i+=1}function nb(n){const e=[];if(!n||n.length===0||!n[0]||n[0].length===0)return e;const t=n.length,i=n[0].length;for(let s=0;s<t;s++)for(let r=0;r<i;r++)e[r]||(e[r]=[]),e[r][s]=n[s][r];return e}function Qn(n,e,t,i){let s=-1,r=n,o=t;Array.isArray(n)||(r=Array.from(n));const a=r.length;for(i&&a&&(s+=1,o=r[s]),s+=1;s<a;)o=e(o,r[s],s,r),s+=1;return o}function kl(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const s=i.length,r=[];let o=-1;for(;t<s;){const a=i[t];e(a,t,i)&&(o+=1,r[o]=a),t+=1}return r}function ct(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const s=i.length,r=[];let o=-1;for(;t<s;){const a=i[t];o+=1,r[o]=e(a,t,i),t+=1}return r}function F(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const s=i.length;for(;t<s&&e(i[t],t,i)!==!1;)t+=1;return n}function Mj(n){return Qn(n,(e,t)=>e+t,0)}function ame(n){return Qn(n,(e,t)=>e>t?e:t,Array.isArray(n)?n[0]:void 0)}function lme(n){return Qn(n,(e,t)=>e<t?e:t,Array.isArray(n)?n[0]:void 0)}function cme(n){return n.length?Mj(n)/n.length:0}function Aj(n){return Qn(n,(e,t)=>e.concat(Array.isArray(t)?Aj(t):t),[])}function zM(n){const e=[];return F(n,t=>{e.indexOf(t)===-1&&e.push(t)}),e}function UM(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...s]=[...e];let r=i;return F(s,o=>{r=r.filter(a=>!o.includes(a))}),r}function hme(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...s]=[...e];let r=i;return F(s,o=>{r=r.filter(a=>o.includes(a))}),r}function ume(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...s]=[...e],r=new Set(i);return F(s,o=>{F(o,a=>{r.has(a)||r.add(a)})}),Array.from(r)}function YM(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";return n.split(e)}const dme=Object.freeze(Object.defineProperty({__proto__:null,arrayAvg:cme,arrayEach:F,arrayFilter:kl,arrayFlatten:Aj,arrayMap:ct,arrayMax:ame,arrayMin:lme,arrayReduce:Qn,arraySum:Mj,arrayUnique:zM,extendArray:jM,getDifferenceOfArrays:UM,getIntersectionOfArrays:hme,getUnionOfArrays:ume,pivot:nb,stringToArray:YM,to2dArray:Tj},Symbol.toStringTag,{value:"Module"}));function Ft(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Qn(n,(r,o,a)=>{const l=o.replace(/\r?\n\s*/g,""),c=t[a]?t[a]:"";return r+l+c},"").trim()}function Mn(n){let e;switch(typeof n){case"string":case"number":e=`${n}`;break;case"object":e=n===null?"":n.toString();break;case"undefined":e="";break;default:e=n.toString();break}return e}function Me(n){return typeof n<"u"}function nn(n){return typeof n>"u"}function An(n){return n===null||n===""||nn(n)}function Pj(n){return Object.prototype.toString.call(n)==="[object RegExp]"}const ib="length",sb=n=>parseInt(n,16),Ij=n=>parseInt(n,10),rC=(n,e,t)=>n.substr(e,t),rb=n=>n.codePointAt(0)-65,GM=n=>`${n}`.replace(/\-/g,""),fme=n=>sb(rC(GM(n),sb("12"),rb("F")))/(sb(rC(GM(n),rb("B"),~~![][ib]))||9),gme=()=>typeof location<"u"&&/^([a-z0-9\-]+\.)?\x68\x61\x6E\x64\x73\x6F\x6E\x74\x61\x62\x6C\x65\x2E\x63\x6F\x6D$/i.test(location.host);let Oj=!1;const kj={invalid:()=>Ft`
    The license key for Handsontable is invalid.\x20
    If you need any help, contact us at support@handsontable.com.`,expired:n=>{let{keyValidityDate:e,hotVersion:t}=n;return Ft`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${t}. Renew your license key at handsontable.com or downgrade to a version released prior\x20
    to ${e}. If you need any help, contact us at sales@handsontable.com.`},missing:()=>Ft`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'. If you need any help, contact\x20
    us at support@handsontable.com.`,non_commercial:()=>""},Hj={invalid:()=>Ft`
    The license key for Handsontable is invalid.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> on how to\x20
    install it properly or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,expired:n=>{let{keyValidityDate:e,hotVersion:t}=n;return Ft`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${t}. <a href="https://handsontable.com/pricing" target="_blank">Renew</a> your\x20
    license key or downgrade to a version released prior to ${e}. If you need any\x20
    help, contact us at <a href="mailto:sales@handsontable.com">sales@handsontable.com</a>.`},missing:()=>Ft`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> about it in\x20
    the documentation or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,non_commercial:()=>""};function Dj(n,e){const t=!An(n),i=typeof n=="string"&&n.toLowerCase()==="non-commercial-and-evaluation",s="14.6.1";let r,o="invalid",a="invalid";n=GM(n||"");const l=pme(n);if(t||i||l)if(l){const c=le("17/10/2024","DD/MM/YYYY"),h=Math.floor(c.toDate().getTime()/864e5),u=fme(n);r=le((u+1)*864e5,"x").format("MMMM DD, YYYY"),h>u?(o="expired",a="expired"):(o="valid",a="valid")}else i?(o="non_commercial",a="valid"):(o="invalid",a="invalid");else o="missing",a="missing";if(gme()&&(o="valid",a="valid"),!Oj&&o!=="valid"&&(kj[o]({keyValidityDate:r,hotVersion:s})&&console[o==="non_commercial"?"info":"warn"](kj[o]({keyValidityDate:r,hotVersion:s})),Oj=!0),a!=="valid"&&e.parentNode&&Hj[a]({keyValidityDate:r,hotVersion:s})){const h=document.createElement("div");h.className="hot-display-license-info",h.innerHTML=Hj[a]({keyValidityDate:r,hotVersion:s}),e.parentNode.insertBefore(h,e.nextSibling)}}function pme(n){let e=[][ib],t=e;if(n[ib]!==rb("Z"))return!1;for(let i="",s="B<H4P+".split(""),r=rb(s.shift());r;r=rb(s.shift()||"A"))--r<""[ib]?t=t|(Ij(`${Ij(sb(i)+(sb(rC(n,Math.abs(r),2))+[]).padStart(2,"0"))}`)%97||2)>>1:i=rC(n,r,r?s[ib]===1?9:8:6);return t===e}const mme=Object.freeze(Object.defineProperty({__proto__:null,_injectProductInfo:Dj,isDefined:Me,isEmpty:An,isRegExp:Pj,isUndefined:nn,stringify:Mn},Symbol.toStringTag,{value:"Module"}));function Ki(n){return n[0].toUpperCase()+n.substr(1)}function bme(){const n=[];for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];let s=t.length;for(;s;){s-=1;const r=Mn(t[s]).toLowerCase();n.indexOf(r)===-1&&n.push(r)}return n.length===1}function KM(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+n()+n()}function qM(n){return/^([0-9][0-9]?%$)|(^100%$)/.test(n)}function XM(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return`${n}`.replace(/(?:\\)?\[([^[\]]+)]/g,(t,i)=>t.charAt(0)==="\\"?t.substr(1,t.length-1):e[i]===void 0?"":e[i])}function QM(n){return oC(`${n}`,{ALLOWED_TAGS:[]})}function oC(n,e){return ode.sanitize(n,e)}const wme=Object.freeze(Object.defineProperty({__proto__:null,equalsIgnoreCase:bme,isPercentValue:qM,randomString:KM,sanitize:oC,stripTags:QM,substitute:XM,toUpperCaseFirst:Ki},Symbol.toStringTag,{value:"Module"})),Zf=n=>["tabindex",n],vme=()=>["role","treegrid"],ga=()=>["role","presentation"],yme=()=>["role","gridcell"],Cme=()=>["role","rowheader"],Nj=()=>["role","rowgroup"],Sme=()=>["role","columnheader"],ZM=()=>["role","row"],_me=()=>["role","menu"],Rme=()=>["role","menuitem"],xme=()=>["role","menuitemcheckbox"],Eme=()=>["role","combobox"],Lj=()=>["role","listbox"],Tme=()=>["role","option"],Mme=()=>["role","checkbox"],Ame=()=>["scope","col"],Pme=()=>["scope","row"],Ime=()=>["type","text"],aC=n=>["aria-label",n],Du=()=>["aria-hidden","true"],Ome=()=>["aria-disabled","true"],kme=()=>["aria-multiselectable","true"],$j=n=>["aria-haspopup",n],Fj=n=>["aria-rowcount",n],lC=n=>["aria-colcount",n],Bj=n=>["aria-rowindex",n],JM=n=>["aria-colindex",n],Ar=n=>["aria-expanded",n],Hme=n=>["aria-sort",n],Vj=()=>["aria-readonly","true"],Wj=()=>["aria-invalid","true"],jj=n=>["aria-checked",n],eA=()=>["aria-selected","true"],Dme=()=>["aria-autocomplete","list"],Nme=n=>["aria-controls",n],Lme=n=>["aria-activedescendant",n],$me=n=>["aria-live",n],Fme=n=>["aria-relevant",n],Bme=n=>["aria-setsize",n],Vme=n=>["aria-posinset",n];function zj(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,i=null,s=n;for(;s!==null;){if(t===e){i=s;break}s.host&&s.nodeType===Node.DOCUMENT_FRAGMENT_NODE?s=s.host:(t+=1,s=s.parentNode)}return i}function Uj(n,e){const t=n.closest(".handsontable");return!!t&&(t.parentNode===e||t===e)}function Yj(n){return Object.getPrototypeOf(n.parent)&&n.frameElement}function Nu(n){return Yj(n)&&n.parent}function Wme(n){return!!Object.getPrototypeOf(n.parent)}function Uc(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;const{ELEMENT_NODE:i,DOCUMENT_FRAGMENT_NODE:s}=Node;let r=n;for(;r!=null&&r!==t;){const{nodeType:o,nodeName:a}=r;if(o===i&&(e.includes(a)||e.includes(r)))return r;const{host:l}=r;l&&o===s?r=l:r=r.parentNode}return null}function ob(n,e,t){const i=[];let s=n;for(;s&&(s=Uc(s,e,t),!(!s||t&&!t.contains(s)));)i.push(s),s.host&&s.nodeType===Node.DOCUMENT_FRAGMENT_NODE?s=s.host:s=s.parentNode;const r=i.length;return r?i[r-1]:null}function Yc(n,e){let t=n.parentNode,i=[];for(typeof e=="string"?n.defaultView?i=Array.prototype.slice.call(n.querySelectorAll(e),0):i=Array.prototype.slice.call(n.ownerDocument.querySelectorAll(e),0):i.push(e);t!==null;){if(i.indexOf(t)>-1)return!0;t=t.parentNode}return!1}function Gj(n){let e=0,t=n;if(t.previousSibling)for(;t=t.previousSibling;)e+=1;return e}function Gc(n,e,t){const i=t.parentElement.querySelector(`.ht_clone_${n}`);return i?i.contains(e):null}function Kj(n){return!n||!n.length?[]:n.filter(e=>!!e)}function qj(n,e){if(!n||!n.length)return{regexFree:[],regexes:[]};const t=[],i=[];return i.push(...n.filter(s=>{const r=s instanceof RegExp;return r&&e&&t.push(s),!r})),{regexFree:i,regexes:t}}function Fe(n,e){return n.classList===void 0||typeof e!="string"||e===""?!1:n.classList.contains(e)}function ae(n,e){typeof e=="string"&&(e=e.split(" ")),e=Kj(e),e.length>0&&n.classList.add(...e)}function Ue(n,e){typeof e=="string"?e=e.split(" "):e instanceof RegExp&&(e=[e]);let{regexFree:t,regexes:i}=qj(e,!0);t=Kj(t),t.length>0&&n.classList.remove(...t),i.forEach(s=>{n.classList.forEach(r=>{s.test(r)&&n.classList.remove(r)})})}function $e(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;Array.isArray(e)||(e=[[e,t]]),e.forEach(i=>{Array.isArray(i)&&i[0]!==""&&n.setAttribute(...i)})}function Lu(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];typeof e=="string"?e=e.split(" "):e instanceof RegExp&&(e=[e]);const{regexFree:t,regexes:i}=qj(e,!0);t.forEach(s=>{s!==""&&n.removeAttribute(s)}),i.forEach(s=>{n.getAttributeNames().forEach(r=>{s.test(r)&&n.removeAttribute(r)})})}function tA(n){if(n.nodeType===3)n.parentNode.removeChild(n);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(n.nodeName)>-1){const e=n.childNodes;for(let t=e.length-1;t>=0;t--)tA(e[t])}}function vo(n){let e;for(;e=n.lastChild;)n.removeChild(e)}const Xj=/(<(.*)>|&(.*);)/;function $u(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;Xj.test(e)?n.innerHTML=t?oC(e):e:Kc(n,e)}function Kc(n,e){const t=n.firstChild;t&&t.nodeType===3&&t.nextSibling===null?t.textContent=e:(vo(n),n.appendChild(n.ownerDocument.createTextNode(e)))}function Fu(n){const e=n.ownerDocument.documentElement;let t=n;for(;t!==e;){if(t===null)return!1;if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)if(t.host){if(t.host.impl)return Fu(t.host.impl);if(t.host)return Fu(t.host);throw new Error("Lost in Web Components world")}else return!1;else if(pa(t).display==="none")return!1;t=t.parentNode}return!0}function hi(n){const e=n.ownerDocument,t=e.defaultView,i=e.documentElement;let s=n,r,o,a;for(r=s.offsetLeft,o=s.offsetTop,a=s;(s=s.offsetParent)&&!(s===e.body||!("offsetLeft"in s));)r+=s.offsetLeft,o+=s.offsetTop,a=s;return a&&a.style.position==="fixed"&&(r+=t.pageXOffset||i.scrollLeft,o+=t.pageYOffset||i.scrollTop),{left:r,top:o}}function nA(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).scrollY}function cC(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).scrollX}function hC(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n===e?nA(e):n.scrollTop}function iA(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n===e?cC(e):n.scrollLeft}function ab(n){let e=n.ownerDocument,t=e?e.defaultView:void 0;e||(e=n.document?n.document:n,t=e.defaultView);const i=["auto","scroll"];let s=n.parentNode;for(;s&&s.style&&e.body!==s;){let{overflow:r,overflowX:o,overflowY:a}=s.style;if([r,o,a].includes("scroll"))return s;if({overflow:r,overflowX:o,overflowY:a}=t.getComputedStyle(s),i.includes(r)||i.includes(o)||i.includes(a)||s.clientHeight<=s.scrollHeight+1&&(i.includes(a)||i.includes(r))||s.clientWidth<=s.scrollWidth+1&&(i.includes(o)||i.includes(r)))return s;s=s.parentNode}return t}function Qj(n){return n.scrollHeight-n.clientHeight}function Zj(n){return n.scrollWidth-n.clientWidth}function Bu(n){const e=n.ownerDocument,t=e.defaultView;let i=n.parentNode;for(;i&&i.style&&e.body!==i;){if(i.style.overflow!=="visible"&&i.style.overflow!=="")return i;const s=pa(i,t),r=["scroll","hidden","auto"],o=s.getPropertyValue("overflow"),a=s.getPropertyValue("overflow-y"),l=s.getPropertyValue("overflow-x");if(r.includes(o)||r.includes(a)||r.includes(l))return i;i=i.parentNode}return t}function Jf(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window;if(n){if(n===t)return e==="width"?`${t.innerWidth}px`:e==="height"?`${t.innerHeight}px`:void 0}else return;const i=n.style[e];if(i!==""&&i!==void 0)return i;const s=pa(n,t);if(s[e]!==""&&s[e]!==void 0)return s[e]}function jme(n,e){const{selectorText:t}=e;let i=!1;return e.type===CSSRule.STYLE_RULE&&t&&(n.msMatchesSelector?i=n.msMatchesSelector(t):n.matches&&(i=n.matches(t))),i}function pa(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n.currentStyle||e.getComputedStyle(n)}function sn(n){return n.offsetWidth}function jn(n){return n.offsetHeight}function Vu(n){return n.clientHeight||n.innerHeight}function sA(n){return n.clientWidth||n.innerWidth}function zme(n,e,t){n.addEventListener(e,t,!1)}function Ume(n,e,t){n.removeEventListener(e,t,!1)}function rA(n){return n.selectionStart?n.selectionStart:0}function Jj(n){return n.selectionEnd?n.selectionEnd:0}function Yme(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;const e=n.document;let t="";return n.getSelection?t=n.getSelection().toString():e.selection&&e.selection.type!=="Control"&&(t=e.selection.createRange().text),t}function oA(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;n.getSelection&&(n.getSelection().empty?n.getSelection().empty():n.getSelection().removeAllRanges&&n.getSelection().removeAllRanges())}function lb(n,e,t){if(t===void 0&&(t=e),n.setSelectionRange){n.focus();try{n.setSelectionRange(e,t)}catch{const s=n.parentNode,r=s.style.display;s.style.display="block",n.setSelectionRange(e,t),s.style.display=r}}}let aA;function Gme(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;const e=n.createElement("div");e.style.height="200px",e.style.width="100%";const t=n.createElement("div");t.style.boxSizing="content-box",t.style.height="150px",t.style.left="0px",t.style.overflow="hidden",t.style.position="absolute",t.style.top="0px",t.style.width="200px",t.style.visibility="hidden",t.appendChild(e),(n.body||n.documentElement).appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let s=e.offsetWidth;return i===s&&(s=t.clientWidth),(n.body||n.documentElement).removeChild(t),i-s}function ui(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return aA===void 0&&(aA=Gme(n)),aA}function e6(n){return n.offsetWidth!==n.clientWidth}function t6(n){return n.offsetHeight!==n.clientHeight}function uC(n,e,t){n.style.transform=`translate3d(${e},${t},0)`}function Kme(n){let e;return n.style.transform&&(e=n.style.transform)!==""?["transform",e]:-1}function cb(n){n.style.transform&&n.style.transform!==""&&(n.style.transform="")}function hb(n){return n&&(["INPUT","SELECT","TEXTAREA"].indexOf(n.nodeName)>-1||n.contentEditable==="true")}function dC(n){return hb(n)&&n.hasAttribute("data-hot-input")===!1}function qme(n){const e=n.ownerDocument.activeElement;dC(e)||n.select()}function lA(n){return!n.parentNode}function n6(n,e){new IntersectionObserver((i,s)=>{i.forEach(r=>{r.isIntersecting&&n.offsetParent!==null&&(e(),s.unobserve(n))})},{root:n.ownerDocument.body}).observe(n)}function cA(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=n.ownerDocument,s=i.createRange(),r=i.defaultView.getSelection();$e(n,"contenteditable",!0),t&&$e(n,...Du()),e&&ae(n,"invisibleSelection"),s.selectNodeContents(n),r.removeAllRanges(),r.addRange(s)}function hA(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const t=n.ownerDocument.defaultView.getSelection();n.hasAttribute("aria-hidden")&&n.removeAttribute("aria-hidden"),t.removeAllRanges(),e&&Ue(n,"invisibleSelection"),n.removeAttribute("contenteditable")}function i6(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;cA(n,t),e(),hA(n,t)}const Xme=Object.freeze(Object.defineProperty({__proto__:null,HTML_CHARACTERS:Xj,addClass:ae,addEvent:zme,clearTextSelection:oA,closest:Uc,closestDown:ob,empty:vo,fastInnerHTML:$u,fastInnerText:Kc,getCaretPosition:rA,getComputedStyle:pa,getCssTransform:Kme,getFrameElement:Yj,getMaximumScrollLeft:Zj,getMaximumScrollTop:Qj,getParent:zj,getParentWindow:Nu,getScrollLeft:iA,getScrollTop:hC,getScrollableElement:ab,getScrollbarWidth:ui,getSelectionEndPosition:Jj,getSelectionText:Yme,getStyle:Jf,getTrimmingContainer:Bu,getWindowScrollLeft:cC,getWindowScrollTop:nA,hasAccessToParentWindow:Wme,hasClass:Fe,hasHorizontalScrollbar:t6,hasVerticalScrollbar:e6,index:Gj,innerHeight:Vu,innerWidth:sA,isChildOf:Yc,isDetached:lA,isInput:hb,isOutsideInput:dC,isThisHotChild:Uj,isVisible:Fu,makeElementContentEditableAndSelectItsContent:cA,matchesCSSRules:jme,observeVisibilityChangeOnce:n6,offset:hi,outerHeight:jn,outerWidth:sn,overlayContainsElement:Gc,removeAttribute:Lu,removeClass:Ue,removeContentEditableFromElementAndDeselect:hA,removeEvent:Ume,removeTextNodes:tA,resetCssTransform:cb,runWithSelectedContendEditableElement:i6,selectElementIfAllowed:qme,setAttribute:$e,setCaretPosition:lb,setOverlayPosition:uC},Symbol.toStringTag,{value:"Module"}));function rn(n){return typeof n=="function"}function s6(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=0;const i={lastCallThrottled:!0};let s=null;function r(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];const c=Date.now();let h=!1;i.lastCallThrottled=!0,t||(t=c,h=!0);const u=e-(c-t);return h?(i.lastCallThrottled=!1,n.apply(this,a)):(s&&clearTimeout(s),s=setTimeout(()=>{i.lastCallThrottled=!1,n.apply(this,a),t=0,s=void 0},u)),i}return r}function Qme(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10;const i=s6(n,e);let s=t;function r(){s=t}function o(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return s?(s-=1,n.apply(this,l)):i.apply(this,l)}return o.clearHits=r,o}function fC(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=null,i;function s(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t&&clearTimeout(t),t=setTimeout(()=>{i=n.apply(this,o)},e),i}return s}function Zme(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...s]=e;return function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return Qn(s,(c,h)=>h(c),i.apply(this,a))}}function uA(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n.apply(this,t.concat(o))}}function r6(n){const e=n.length;function t(i){return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const l=i.concat(o);let c;return l.length>=e?c=n.apply(this,l):c=t(l),c}}return t([])}function Jme(n){const e=n.length;function t(i){return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const l=i.concat(o.reverse());let c;return l.length>=e?c=n.apply(this,l):c=t(l),c}}return t([])}function gC(n,e,t,i,s,r,o,a){return Me(a)?n.call(e,t,i,s,r,o,a):Me(o)?n.call(e,t,i,s,r,o):Me(r)?n.call(e,t,i,s,r):Me(s)?n.call(e,t,i,s):Me(i)?n.call(e,t,i):Me(t)?n.call(e,t):n.call(e)}const ebe=Object.freeze(Object.defineProperty({__proto__:null,curry:r6,curryRight:Jme,debounce:fC,fastCall:gC,isFunction:rn,partial:uA,pipe:Zme,throttle:s6,throttleAfterHits:Qme},Symbol.toStringTag,{value:"Module"}));var tbe=oi,o6=$3,nbe=Oi,a6=_u,ibe=A0,l6=tbe([].push),sbe=function(n){if(nbe(n))return n;if(o6(n)){for(var e=n.length,t=[],i=0;i<e;i++){var s=n[i];typeof s=="string"?l6(t,s):(typeof s=="number"||a6(s)==="Number"||a6(s)==="String")&&l6(t,ibe(s))}var r=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(o6(this))return l;for(var c=0;c<r;c++)if(t[c]===a)return l}}},rbe=ki,c6=Bf,h6=T0,obe=ho,ub=oi,u6=Rs,d6=Oi,f6=pT,g6=YT,abe=sbe,lbe=gT,cbe=String,qc=c6("JSON","stringify"),pC=ub(/./.exec),p6=ub("".charAt),hbe=ub("".charCodeAt),ube=ub("".replace),dbe=ub(1 .toString),fbe=/[\uD800-\uDFFF]/g,m6=/^[\uD800-\uDBFF]$/,b6=/^[\uDC00-\uDFFF]$/,w6=!lbe||u6(function(){var n=c6("Symbol")("stringify detection");return qc([n])!=="[null]"||qc({a:n})!=="{}"||qc(Object(n))!=="{}"}),v6=u6(function(){return qc("\uDF06\uD834")!=='"\\udf06\\ud834"'||qc("\uDEAD")!=='"\\udead"'}),gbe=function(n,e){var t=g6(arguments),i=abe(e);if(!(!d6(i)&&(n===void 0||f6(n))))return t[1]=function(s,r){if(d6(i)&&(r=obe(i,this,cbe(s),r)),!f6(r))return r},h6(qc,null,t)},pbe=function(n,e,t){var i=p6(t,e-1),s=p6(t,e+1);return pC(m6,n)&&!pC(b6,s)||pC(b6,n)&&!pC(m6,i)?"\\u"+dbe(hbe(n,0),16):n};qc&&rbe({target:"JSON",stat:!0,arity:3,forced:w6||v6},{stringify:function(e,t,i){var s=g6(arguments),r=h6(w6?gbe:qc,null,s);return v6&&typeof r=="string"?ube(r,fbe,pbe):r}});function eg(n){let e;return Array.isArray(n)?e=n.length?new Array(n.length).fill(null):[]:(e={},et(n,(t,i)=>{i!=="__children"&&(t&&typeof t=="object"&&!Array.isArray(t)?e[i]=eg(t):Array.isArray(t)?t.length&&typeof t[0]=="object"&&!Array.isArray(t[0])?e[i]=[eg(t[0])]:e[i]=[]:e[i]=null)})),e}function yo(n,e){return e.prototype.constructor=e,n.prototype=new e,n.prototype.constructor=n,n}function Zn(n,e,t){const i=Array.isArray(t);return et(e,(s,r)=>{(i===!1||t.includes(r))&&(n[r]=s)}),n}function db(n,e){et(e,(t,i)=>{e[i]&&typeof e[i]=="object"?(n[i]||(Array.isArray(e[i])?n[i]=[]:Object.prototype.toString.call(e[i])==="[object Date]"?n[i]=e[i]:n[i]={}),db(n[i],e[i])):n[i]=e[i]})}function qi(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function Co(n){const e={};return et(n,(t,i)=>{e[i]=t}),e}function Bt(n){n.MIXINS||(n.MIXINS=[]);for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return F(t,s=>{n.MIXINS.push(s.MIXIN_NAME),et(s,(r,o)=>{if(n.prototype[o]!==void 0)throw new Error(`Mixin conflict. Property '${o}' already exist and cannot be overwritten.`);if(typeof r=="function")n.prototype[o]=r;else{const a=function(h,u){const d=`_${h}`,f=g=>{let p=g;return(Array.isArray(p)||Je(p))&&(p=qi(p)),p};return function(){return this[d]===void 0&&(this[d]=f(u)),this[d]}},l=function(h){const u=`_${h}`;return function(d){this[u]=d}};Object.defineProperty(n.prototype,o,{get:a(o,r),set:l(o),configurable:!0})}})}),n}function mC(n,e){return JSON.stringify(n)===JSON.stringify(e)}function Je(n){return Object.prototype.toString.call(n)==="[object Object]"}function ma(n,e,t,i){i.value=t,i.writable=i.writable!==!1,i.enumerable=i.enumerable!==!1,i.configurable=i.configurable!==!1,Object.defineProperty(n,e,i)}function et(n,e){for(const t in n)if((!n.hasOwnProperty||n.hasOwnProperty&&Object.prototype.hasOwnProperty.call(n,t))&&e(n[t],t,n)===!1)break;return n}function y6(n,e){const t=e.split(".");let i=n;return et(t,s=>{if(i=i[s],i===void 0)return i=void 0,!1}),i}function bC(n,e,t){const i=e.split(".");let s=n;i.forEach((r,o)=>{o!==i.length-1?(_n(s,r)||(s[r]={}),s=s[r]):s[r]=t})}function wC(n){if(!Je(n))return 0;const e=function(t){let i=0;return Je(t)?et(t,(s,r)=>{r!=="__children"&&(i+=e(s))}):i+=1,i};return e(n)}function Pr(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"value";const t=`_${e}`,i={_touched:!1,[t]:n,isTouched(){return this._touched}};return Object.defineProperty(i,e,{get(){return this[t]},set(s){this._touched=!0,this[t]=s},enumerable:!0,configurable:!0}),i}function _n(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const mbe=Object.freeze(Object.defineProperty({__proto__:null,clone:Co,createObjectPropListener:Pr,deepClone:qi,deepExtend:db,deepObjectSize:wC,defineGetter:ma,duckSchema:eg,extend:Zn,getProperty:y6,hasOwnProperty:_n,inherit:yo,isObject:Je,isObjectEqual:mC,mixin:Bt,objectEach:et,setProperty:bC},Symbol.toStringTag,{value:"Module"}));function vC(n){return window.requestAnimationFrame(n)}function fb(n){window.cancelAnimationFrame(n)}function dA(){return"ontouchstart"in window}function C6(){return typeof window<"u"}let tg;function S6(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return tg||(typeof Intl=="object"?tg=new Intl.Collator(n,e).compare:typeof String.prototype.localeCompare=="function"?tg=(t,i)=>`${t}`.localeCompare(i):tg=(t,i)=>t===i?0:t>i?-1:1,tg)}const bbe=Object.freeze(Object.defineProperty({__proto__:null,cancelAnimationFrame:fb,getComparisonFunction:S6,isCSR:C6,isTouchSupported:dA,requestAnimationFrame:vC},Symbol.toStringTag,{value:"Module"})),Ir=n=>{const e={value:!1};return e.test=(t,i)=>{e.value=n(t,i)},e},Hl={chrome:Ir((n,e)=>/Chrome/.test(n)&&/Google/.test(e)),chromeWebKit:Ir(n=>/CriOS/.test(n)),edge:Ir(n=>/Edge/.test(n)),edgeWebKit:Ir(n=>/EdgiOS/.test(n)),firefox:Ir(n=>/Firefox/.test(n)),firefoxWebKit:Ir(n=>/FxiOS/.test(n)),mobile:Ir(n=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n)),safari:Ir((n,e)=>/Safari/.test(n)&&/Apple Computer/.test(e))},ng={mac:Ir(n=>/^Mac/.test(n)),win:Ir(n=>/^Win/.test(n)),linux:Ir(n=>/^Linux/.test(n)),ios:Ir(n=>/iPhone|iPad|iPod/i.test(n))};function _6(){let{userAgent:n=navigator.userAgent,vendor:e=navigator.vendor}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et(Hl,t=>{let{test:i}=t;return void i(n,e)})}function R6(){let{platform:n=navigator.platform}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et(ng,e=>{let{test:t}=e;return void t(n)})}C6()&&(_6(),R6());function fA(){return Hl.chrome.value}function x6(){return Hl.chromeWebKit.value}function yC(){return Hl.firefox.value}function E6(){return Hl.firefoxWebKit.value}function gA(){return Hl.safari.value}function T6(){return Hl.edge.value}function wbe(){return Hl.edgeWebKit.value}function Dl(){return Hl.mobile.value}function pA(){return ng.ios.value}function mA(){let{maxTouchPoints:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:navigator;return n>2&&ng.mac.value}function bA(){return ng.win.value}function gb(){return ng.mac.value}function vbe(){return ng.linux.value}const ybe=Object.freeze(Object.defineProperty({__proto__:null,isChrome:fA,isChromeWebKit:x6,isEdge:T6,isEdgeWebKit:wbe,isFirefox:yC,isFirefoxWebKit:E6,isIOS:pA,isIpadOS:mA,isLinuxOS:vbe,isMacOS:gb,isMobileBrowser:Dl,isSafari:gA,isWindowsOS:bA,setBrowserMeta:_6,setPlatformMeta:R6},Symbol.toStringTag,{value:"Module"})),Ie={ALT:18,ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,AUDIO_DOWN:yC()?182:174,AUDIO_MUTE:yC()?181:173,AUDIO_UP:yC()?183:175,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND_LEFT:91,COMMAND_RIGHT:93,COMMAND_FIREFOX:224,CONTROL:17,DELETE:46,END:35,ENTER:13,ESCAPE:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,HOME:36,INSERT:45,MEDIA_NEXT:176,MEDIA_PLAY_PAUSE:179,MEDIA_PREV:177,MEDIA_STOP:178,NULL:0,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PERIOD:190,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,A:65,C:67,D:68,F:70,L:76,O:79,P:80,S:83,V:86,X:88,Y:89,Z:90},Cbe=[Ie.ALT,Ie.ARROW_DOWN,Ie.ARROW_LEFT,Ie.ARROW_RIGHT,Ie.ARROW_UP,Ie.AUDIO_DOWN,Ie.AUDIO_MUTE,Ie.AUDIO_UP,Ie.BACKSPACE,Ie.CAPS_LOCK,Ie.DELETE,Ie.END,Ie.ENTER,Ie.ESCAPE,Ie.F1,Ie.F2,Ie.F3,Ie.F4,Ie.F5,Ie.F6,Ie.F7,Ie.F8,Ie.F9,Ie.F10,Ie.F11,Ie.F12,Ie.F13,Ie.F14,Ie.F15,Ie.F16,Ie.F17,Ie.F18,Ie.F19,Ie.HOME,Ie.INSERT,Ie.MEDIA_NEXT,Ie.MEDIA_PLAY_PAUSE,Ie.MEDIA_PREV,Ie.MEDIA_STOP,Ie.NULL,Ie.NUM_LOCK,Ie.PAGE_DOWN,Ie.PAGE_UP,Ie.PAUSE,Ie.SCROLL_LOCK,Ie.SHIFT,Ie.TAB];function M6(n){return n===32||n>=48&&n<=57||n>=96&&n<=111||n>=186&&n<=192||n>=219&&n<=222||n>=226||n>=65&&n<=90}function wA(n){return Cbe.includes(n)}function Sbe(n){const e=[];return gb()?e.push(Ie.COMMAND_LEFT,Ie.COMMAND_RIGHT,Ie.COMMAND_FIREFOX):e.push(Ie.CONTROL),e.includes(n)}function A6(n){return[Ie.CONTROL,Ie.COMMAND_LEFT,Ie.COMMAND_RIGHT,Ie.COMMAND_FIREFOX].includes(n)}function ig(n,e){const t=e.split("|");let i=!1;return F(t,s=>{if(n===Ie[s])return i=!0,!1}),i}const _be=Object.freeze(Object.defineProperty({__proto__:null,KEY_CODES:Ie,isCtrlKey:Sbe,isCtrlMetaKey:A6,isFunctionKey:wA,isKey:ig,isPrintableChar:M6},Symbol.toStringTag,{value:"Module"}));function Or(n){n.isImmediatePropagationEnabled=!1,n.cancelBubble=!0}function Xc(n){return n.isImmediatePropagationEnabled===!1}function Qc(n){return n.button===2}function CC(n){return n.button===0}function P6(n){return n instanceof TouchEvent}function I6(n,e){const t={x:n.offsetX,y:n.offsetY};let i=n.target;if(!(e instanceof HTMLElement)||i!==e&&i.contains(e))return t;for(;i!==e;)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;return t}const Rbe=Object.freeze(Object.defineProperty({__proto__:null,isImmediatePropagationStopped:Xc,isLeftClick:CC,isRightClick:Qc,isTouchEvent:P6,offsetRelativeTo:I6,stopImmediatePropagation:Or},Symbol.toStringTag,{value:"Module"}));var O6={},xbe=p3,Ebe=$T,Tbe=Object.keys||function(e){return xbe(e,Ebe)},Mbe=co,Abe=t3,Pbe=Bc,Ibe=_l,Obe=p0,kbe=Tbe;O6.f=Mbe&&!Abe?Object.defineProperties:function(e,t){Ibe(e);for(var i=Obe(t),s=kbe(t),r=s.length,o=0,a;r>o;)Pbe.f(e,a=s[o++],i[a]);return e};var Hbe=_l,Dbe=O6,k6=$T,Nbe=IT,Lbe=sW,$be=_T,Fbe=a3,H6=">",D6="<",vA="prototype",yA="script",N6=Fbe("IE_PROTO"),CA=function(){},L6=function(n){return D6+yA+H6+n+D6+"/"+yA+H6},$6=function(n){n.write(L6("")),n.close();var e=n.parentWindow.Object;return n=null,e},Bbe=function(){var n=$be("iframe"),e="java"+yA+":",t;return n.style.display="none",Lbe.appendChild(n),n.src=String(e),t=n.contentWindow.document,t.open(),t.write(L6("document.F=Object")),t.close(),t.F},SC,_C=function(){try{SC=new ActiveXObject("htmlfile")}catch{}_C=typeof document<"u"?document.domain&&SC?$6(SC):Bbe():$6(SC);for(var n=k6.length;n--;)delete _C[vA][k6[n]];return _C()};Nbe[N6]=!0;var Vbe=Object.create||function(e,t){var i;return e!==null?(CA[vA]=Hbe(e),i=new CA,CA[vA]=null,i[N6]=e):i=_C(),t===void 0?i:Dbe.f(i,t)},Wbe=Fc,jbe=Vbe,zbe=Bc.f,SA=Wbe("unscopables"),_A=Array.prototype;_A[SA]===void 0&&zbe(_A,SA,{configurable:!0,value:jbe(null)});var RA=function(n){_A[SA][n]=!0},Ube=RA;Ube("flatMap");function Vt(){Me(console)&&console.warn(...arguments)}function xA(){Me(console)&&console.error(...arguments)}function Ybe(n,e,t){return(e=Gbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gbe(n){var e=Kbe(n,"string");return typeof e=="symbol"?e:e+""}function Kbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const sg=["afterCellMetaReset","afterChange","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","beforeContextMenuShow","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterColumnSequenceChange","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterDrawSelection","beforeRemoveCellClassNames","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterUpdateData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseUp","afterOnCellContextMenu","afterOnCellMouseOver","afterOnCellMouseOut","afterRemoveCol","afterRemoveRow","beforeRenderer","afterRenderer","afterRowSequenceChange","beforeViewportScrollVertically","beforeViewportScrollHorizontally","beforeViewportScroll","afterScrollHorizontally","afterScrollVertically","afterScroll","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSelectionFocusSet","beforeSelectColumns","afterSelectColumns","beforeSelectRows","afterSelectRows","afterSetCellMeta","afterRemoveCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterSetSourceDataAtCell","afterUpdateSettings","afterValidate","beforeLanguageChange","afterLanguageChange","beforeAutofill","afterAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeRemoveCellMeta","beforeInit","beforeInitWalkontable","beforeLoadData","beforeUpdateData","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseUp","beforeOnCellContextMenu","beforeOnCellMouseOver","beforeOnCellMouseOut","beforeRemoveCol","beforeRemoveRow","beforeViewRender","afterViewRender","beforeRender","afterRender","beforeRowWrap","beforeColumnWrap","beforeSetCellMeta","beforeSelectionFocusSet","beforeSetRangeStartOnly","beforeSetRangeStart","beforeSetRangeEnd","beforeSelectionHighlightSet","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyColHeader","modifyColWidth","modifyFiltersMultiSelectValue","modifyFocusedElement","modifyRowHeader","modifyRowHeight","modifyRowHeightByOverlayName","modifyData","modifySourceData","modifyRowData","modifyGetCellCoords","modifyFocusOnTabNavigation","beforeHighlightingRowHeader","beforeHighlightingColumnHeader","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeCut","afterCut","beforeCopy","afterCopy","beforePaste","afterPaste","beforeColumnFreeze","afterColumnFreeze","beforeColumnMove","afterColumnMove","beforeColumnUnfreeze","afterColumnUnfreeze","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","afterFormulasValuesUpdate","afterNamedExpressionAdded","afterNamedExpressionRemoved","afterSheetAdded","afterSheetRenamed","afterSheetRemoved","modifyColumnHeaderHeight","modifyColumnHeaderValue","beforeUndo","beforeUndoStackChange","afterUndo","afterUndoStackChange","beforeRedo","beforeRedoStackChange","afterRedo","afterRedoStackChange","modifyRowHeaderWidth","modifyTransformFocus","modifyTransformStart","modifyTransformEnd","afterModifyTransformFocus","afterModifyTransformStart","afterModifyTransformEnd","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","beforeHideRows","afterHideRows","beforeUnhideRows","afterUnhideRows","beforeHideColumns","afterHideColumns","beforeUnhideColumns","afterUnhideColumns","beforeTrimRow","afterTrimRow","beforeUntrimRow","afterUntrimRow","beforeDropdownMenuShow","afterDropdownMenuShow","afterDropdownMenuHide","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","beforeBeginEditing","afterBeginEditing","beforeMergeCells","afterMergeCells","beforeUnmergeCells","afterUnmergeCells","afterListen","afterUnlisten","afterRefreshDimensions","beforeRefreshDimensions","beforeColumnCollapse","afterColumnCollapse","beforeColumnExpand","afterColumnExpand","modifyAutoColumnSizeSeed"],qbe=Ft`The plugin hook "[hookName]" was removed in Handsontable [removedInVersion].\x20
  Please consult release notes https://github.com/handsontable/handsontable/releases/tag/[removedInVersion] to\x20
  learn about the migration path.`,EA=new Map([["modifyRow","8.0.0"],["modifyCol","8.0.0"],["unmodifyRow","8.0.0"],["unmodifyCol","8.0.0"],["skipLengthCache","8.0.0"],["hiddenColumn","8.0.0"],["hiddenRow","8.0.0"]]),TA=new Map([[]]),RC=new WeakMap;class xe{static getSingleton(){return Qbe()}constructor(){Ybe(this,"globalBucket",void 0),this.globalBucket=this.createEmptyBucket()}createEmptyBucket(){const e=Object.create(null);return F(sg,t=>{e[t]=[],this.initOrderMap(e,t)}),e}getBucket(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e?(e.pluginHookBucket||(e.pluginHookBucket=this.createEmptyBucket()),e.pluginHookBucket):this.globalBucket}add(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3?arguments[3]:void 0;if(Array.isArray(t))F(t,r=>this.add(e,r,i));else{EA.has(e)&&Vt(XM(qbe,{hookName:e,removedInVersion:EA.get(e)})),TA.has(e)&&Vt(TA.get(e));const r=this.getBucket(i);if(typeof r[e]>"u"&&(this.register(e),r[e]=[],this.initOrderMap(r,e)),t.skip=!1,r[e].indexOf(t)===-1){let o=!1;t.initialHook&&F(r[e],(a,l)=>{if(a.initialHook)return r[e][l]=t,o=!0,!1}),o||r[e].push(t)}this.setCallbackOrderIndex(r,e,t,s),this.orderBucketByOrderIndex(r,e)}return this}once(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3?arguments[3]:void 0;Array.isArray(t)?F(t,r=>this.once(e,r,i)):(t.runOnce=!0,this.add(e,t,i,s))}remove(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const s=this.getBucket(i);return typeof s[e]<"u"&&s[e].indexOf(t)>=0?(t.skip=!0,!0):!1}has(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const i=this.getBucket(t);return!!(i[e]!==void 0&&i[e].length)}run(e,t,i,s,r,o,a,l){{const c=this.globalBucket[t],h=c?c.length:0;let u=0;if(h)for(;u<h;){if(!c[u]||c[u].skip){u+=1;continue}const d=gC(c[u],e,i,s,r,o,a,l);d!==void 0&&(i=d),c[u]&&c[u].runOnce&&this.remove(t,c[u]),u+=1}}{const c=this.getBucket(e)[t],h=c?c.length:0;let u=0;if(h)for(;u<h;){if(!c[u]||c[u].skip){u+=1;continue}const d=gC(c[u],e,i,s,r,o,a,l);d!==void 0&&(i=d),c[u]&&c[u].runOnce&&this.remove(t,c[u],e),u+=1}}return i}destroy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;et(this.getBucket(e),(t,i,s)=>s[i].length=0)}register(e){this.isRegistered(e)||sg.push(e)}deregister(e){this.isRegistered(e)&&sg.splice(sg.indexOf(e),1)}isDeprecated(e){return TA.has(e)||EA.has(e)}isRegistered(e){return sg.indexOf(e)>=0}getRegistered(){return sg}setCallbackOrderIndex(e,t,i,s){const r=Number.isInteger(s)?s:0,o=this.getCallbackOrderMap(e,t);o.set(r,[...o.get(r)||[],i])}orderBucketByOrderIndex(e,t){const i=this.getCallbackOrderMap(e,t);i===void 0||i.size===0||i.size===1&&i.has(0)||(e[t]=[...i].sort((s,r)=>s[0]-r[0]).flatMap(s=>{let[,r]=s;return r}))}initOrderMap(e,t){RC.has(e)||RC.set(e,[]),RC.get(e)[t]=new Map}getCallbackOrderMap(e,t){return RC.get(e)[t]}}const Xbe=new xe;function Qbe(){return Xbe}const MA=new Map;function So(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"common";MA.has(n)||MA.set(n,new Map);const e=MA.get(n);function t(a,l){e.set(a,l)}function i(a){return e.get(a)}function s(a){return e.has(a)}function r(){return[...e.keys()]}function o(){return[...e.values()]}return{register:t,getItem:i,hasItem:s,getNames:r,getValues:o}}const AA=new WeakMap,{register:Zbe,getItem:F6,hasItem:B6,getNames:Jbe,getValues:rVe}=So("editors");function ewe(n){const e={},t=n;this.getConstructor=function(){return n},this.getInstance=function(i){return i.guid in e||(e[i.guid]=new t(i)),e[i.guid]},xe.getSingleton().add("afterDestroy",function(){e[this.guid]=null})}function V6(n,e){let t;if(typeof n=="function")AA.get(n)||Es(null,n),t=AA.get(n);else if(typeof n=="string")t=F6(n);else throw Error('Only strings and functions can be passed as "editor" parameter');if(!t)throw Error(`No editor registered under name "${n}"`);return t.getInstance(e)}function xC(n){if(typeof n=="function")return n;if(!B6(n))throw Error(`No registered editor found under "${n}" name`);return F6(n).getConstructor()}function Es(n,e){n&&typeof n!="string"&&(e=n,n=e.EDITOR_TYPE);const t=new ewe(e);typeof n=="string"&&Zbe(n,t),AA.set(e,t)}function twe(n,e,t){return(e=nwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nwe(n){var e=iwe(n,"string");return typeof e=="symbol"?e:e+""}function iwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let EC=0;class kr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;twe(this,"context",void 0),this.context=e||this,this.context.eventListeners||(this.context.eventListeners=[])}addEventListener(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;function r(o){i.call(this,swe(o))}return this.context.eventListeners.push({element:e,event:t,callback:i,callbackProxy:r,options:s,eventManager:this}),e.addEventListener(t,r,s),EC+=1,()=>{this.removeEventListener(e,t,i)}}removeEventListener(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=this.context.eventListeners.length,o;for(;r;)if(r-=1,o=this.context.eventListeners[r],o.event===t&&o.element===e){if(i&&i!==o.callback||s&&o.eventManager!==this)continue;this.context.eventListeners.splice(r,1),o.element.removeEventListener(o.event,o.callbackProxy,o.options),EC-=1}}clearEvents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.context)return;let t=this.context.eventListeners.length;for(;t;){t-=1;const i=this.context.eventListeners[t];e&&i.eventManager!==this||(this.context.eventListeners.splice(t,1),i.element.removeEventListener(i.event,i.callbackProxy,i.options),EC-=1)}}clear(){this.clearEvents()}destroy(){this.clearEvents(),this.context=null}destroyWithOwnEventsOnly(){this.clearEvents(!0),this.context=null}fireEvent(e,t){let i=e.document,s=e;i||(i=e.ownerDocument?e.ownerDocument:e,s=i.defaultView);const r={bubbles:!0,cancelable:t!=="mousemove",view:s,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};let o;i.createEvent?(o=i.createEvent("MouseEvents"),o.initMouseEvent(t,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,i.body.parentNode)):o=i.createEventObject(),e.dispatchEvent?e.dispatchEvent(o):e.fireEvent(`on${t}`,o)}}function swe(n){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=function(){e.apply(this),Or(this)},n}function rwe(){return EC}function owe(n,e){awe(n,e),e.add(n)}function awe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wu(n,e,t){return(e=lwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lwe(n){var e=cwe(n,"string");return typeof e=="symbol"?e:e+""}function cwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function W6(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var PA=new WeakSet;class IA{constructor(e,t,i){owe(this,PA),Wu(this,"hot",void 0),Wu(this,"tableMeta",void 0),Wu(this,"selection",void 0),Wu(this,"eventManager",void 0),Wu(this,"destroyed",!1),Wu(this,"activeEditor",void 0),Wu(this,"cellProperties",void 0),this.hot=e,this.tableMeta=t,this.selection=i,this.eventManager=new kr(e),this.hot.addHook("afterDocumentKeyDown",s=>W6(PA,this,hwe).call(this,s)),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"compositionstart",s=>{!this.destroyed&&this.hot.isListening()&&this.openEditor("",s)}),this.hot.view._wt.update("onCellDblClick",(s,r,o)=>W6(PA,this,uwe).call(this,s,r,o))}getActiveEditor(){return this.activeEditor}prepareEditor(){var e;if(this.activeEditor&&this.activeEditor.isWaiting()){this.closeEditor(!1,!1,c=>{c&&this.prepareEditor()});return}const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;if(!t||t.isHeader())return;const{row:i,col:s}=t,r=this.hot.runHooks("modifyGetCellCoords",i,s);let o=i,a=s;if(Array.isArray(r)&&([o,a]=r),this.cellProperties=this.hot.getCellMeta(o,a),!this.isCellEditable()){this.clearActiveEditor();return}const l=this.hot.getCell(i,s,!0);if(l){const c=this.hot.getCellEditor(this.cellProperties),h=this.hot.colToProp(a),u=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o),a);this.activeEditor=V6(c,this.hot),this.activeEditor.prepare(i,s,h,l,u,this.cellProperties)}}isEditorOpened(){return this.activeEditor&&this.activeEditor.isOpened()}openEditor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!this.isCellEditable()){this.clearActiveEditor();return}const s=this.hot.getSelectedRangeLast();let r=this.hot.runHooks("beforeBeginEditing",s.highlight.row,s.highlight.col,e,t,i);if(t instanceof MouseEvent&&typeof r!="boolean"&&(r=this.hot.selection.getLayerLevel()===0&&s.isSingle()),r===!1){this.clearActiveEditor();return}this.activeEditor||(this.hot.scrollToFocusedCell(),this.prepareEditor()),this.activeEditor&&(i&&this.activeEditor.enableFullEditMode(),this.activeEditor.beginEditing(e,t))}closeEditor(e,t,i){this.activeEditor?this.activeEditor.finishEditing(e,t,i):i&&i(!1)}closeEditorAndSaveChanges(e){this.closeEditor(!1,e)}closeEditorAndRestoreOriginalValue(e){this.closeEditor(!0,e)}clearActiveEditor(){this.activeEditor=void 0}isCellEditable(){const e=this.hot.getSelectedRangeLast();if(!e)return!1;const t=this.hot.getCellEditor(this.cellProperties),{row:i,col:s}=e.highlight,{rowIndexMapper:r,columnIndexMapper:o}=this.hot,a=r.isHidden(this.hot.toPhysicalRow(i))||o.isHidden(this.hot.toPhysicalColumn(s));return!(this.cellProperties.readOnly||!t||a)}moveSelectionAfterEnter(e){const t={...typeof this.tableMeta.enterMoves=="function"?this.tableMeta.enterMoves(e):this.tableMeta.enterMoves};e.shiftKey&&(t.row=-t.row,t.col=-t.col),this.hot.selection.isMultiple()?this.selection.transformFocus(t.row,t.col):this.selection.transformStart(t.row,t.col,!0)}destroy(){this.destroyed=!0,this.eventManager.destroy()}}function hwe(n){const e=this.hot.getSelectedRangeLast();if(!this.hot.isListening()||!e||e.highlight.isHeader()||Xc(n))return;const{keyCode:t}=n,i=(n.ctrlKey||n.metaKey)&&!n.altKey;(!this.activeEditor||this.activeEditor&&!this.activeEditor.isWaiting())&&!wA(t)&&!A6(t)&&!i&&!this.isEditorOpened()&&this.openEditor("",n)}function uwe(n,e){e.isCell()&&this.openEditor(null,n,!0)}const j6=new WeakMap;IA.getInstance=function(n,e,t){let i=j6.get(n);return i||(i=new IA(n,e,t),j6.set(n,i)),i};function dwe(n,e){z6(n,e),e.add(n)}function pb(n,e,t){z6(n,e),e.set(n,t)}function z6(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rn(n,e){return n.get(Nl(n,e))}function mb(n,e,t){return n.set(Nl(n,e),t),t}function Nl(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const rg=Object.freeze({CELL:"cell",MIXED:"mixed"});var Ri=new WeakMap,TC=new WeakMap,MC=new WeakMap,AC=new WeakMap,PC=new WeakMap,Zc=new WeakSet;class fwe{constructor(e){var t=this;dwe(this,Zc),pb(this,Ri,void 0),pb(this,TC,void 0),pb(this,MC,1),pb(this,AC,null),pb(this,PC,new Map);const i=e.getSettings();mb(Ri,this,e),mb(TC,this,i.imeFastEdit?rg.MIXED:rg.CELL),Rn(Ri,this).addHook("afterUpdateSettings",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return Nl(Zc,t,pwe).call(t,...r)}),Rn(Ri,this).addHook("afterSelection",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return Nl(Zc,t,U6).call(t,...r)}),Rn(Ri,this).addHook("afterSelectionFocusSet",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return Nl(Zc,t,U6).call(t,...r)}),Rn(Ri,this).addHook("afterSelectionEnd",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return Nl(Zc,t,gwe).call(t,...r)})}getFocusMode(){return Rn(TC,this)}setFocusMode(e){Object.values(rg).includes(e)?mb(TC,this,e):Vt(`"${e}" is not a valid focus mode.`)}getRefocusDelay(){return Rn(MC,this)}setRefocusDelay(e){mb(MC,this,e)}setRefocusElementGetter(e){mb(AC,this,e)}getRefocusElement(){if(typeof Rn(AC,this)=="function")return Rn(AC,this).call(this);var e;return(e=Rn(Ri,this).getActiveEditor())===null||e===void 0?void 0:e.TEXTAREA}focusOnHighlightedCell(e){const t=i=>{var s,r;const o=(s=Rn(Ri,this).getSelectedRangeLast())===null||s===void 0?void 0:s.highlight;if(!o)return;let a=Rn(Ri,this).runHooks("modifyFocusedElement",o.row,o.col,i);a instanceof HTMLElement||(a=i),a&&!((r=Rn(Ri,this).getActiveEditor())!==null&&r!==void 0&&r.isOpened())&&a.focus({preventScroll:!0})};e?t(e):Nl(Zc,this,OA).call(this,i=>t(i))}refocusToEditorTextarea(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rn(MC,this);const i=this.getRefocusElement();Rn(Ri,this).getSettings().imeFastEdit&&!((e=Rn(Ri,this).getActiveEditor())!==null&&e!==void 0&&e.isOpened())&&i&&(Rn(PC,this).has(t)||Rn(PC,this).set(t,fC(()=>{i.select()},t)),Rn(PC,this).get(t)())}}function OA(n){var e;const t=(e=Rn(Ri,this).getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;if(!t||!Rn(Ri,this).selection.isCellVisible(t)){n(null);return}const i=Rn(Ri,this).getCell(t.row,t.col,!0);i===null?Rn(Ri,this).addHookOnce("afterScroll",()=>{n(Rn(Ri,this).getCell(t.row,t.col,!0))}):n(i)}function U6(){Nl(Zc,this,OA).call(this,n=>{const{activeElement:e}=Rn(Ri,this).rootDocument;e&&dC(e)&&e.blur(),this.focusOnHighlightedCell(n)})}function gwe(){Nl(Zc,this,OA).call(this,n=>{this.getFocusMode()===rg.MIXED&&n.nodeName==="TD"&&this.refocusToEditorTextarea()})}function pwe(n){typeof n.imeFastEdit=="boolean"&&this.setFocusMode(n.imeFastEdit?rg.MIXED:rg.CELL)}var mwe=ra,bwe=_u,wwe=Fc,vwe=wwe("match"),ywe=function(n){var e;return mwe(n)&&((e=n[vwe])!==void 0?!!e:bwe(n)==="RegExp")},Cwe=_l,Swe=function(){var n=Cwe(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e},_we=ho,Rwe=oa,xwe=m0,Ewe=Swe,Y6=RegExp.prototype,Twe=function(n){var e=n.flags;return e===void 0&&!("flags"in Y6)&&!Rwe(n,"flags")&&xwe(Y6,n)?_we(Ewe,n):e},kA=oi,Mwe=km,Awe=Math.floor,HA=kA("".charAt),Pwe=kA("".replace),DA=kA("".slice),Iwe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Owe=/\$([$&'`]|\d{1,2})/g,kwe=function(n,e,t,i,s,r){var o=t+n.length,a=i.length,l=Owe;return s!==void 0&&(s=Mwe(s),l=Iwe),Pwe(r,l,function(c,h){var u;switch(HA(h,0)){case"$":return"$";case"&":return n;case"`":return DA(e,0,t);case"'":return DA(e,o);case"<":u=s[DA(h,1,-1)];break;default:var d=+h;if(d===0)return c;if(d>a){var f=Awe(d/10);return f===0?c:f<=a?i[f-1]===void 0?HA(h,1):i[f-1]+HA(h,1):c}u=i[d-1]}return u===void 0?"":u})},Hwe=ki,Dwe=ho,NA=oi,G6=Im,Nwe=Oi,Lwe=g0,$we=ywe,bb=A0,Fwe=y0,Bwe=Twe,Vwe=kwe,Wwe=Fc,jwe=Wwe("replace"),zwe=TypeError,LA=NA("".indexOf);NA("".replace);var K6=NA("".slice),Uwe=Math.max;Hwe({target:"String",proto:!0},{replaceAll:function(e,t){var i=G6(this),s,r,o,a,l,c,h,u,d,f,g=0,p="";if(!Lwe(e)){if(s=$we(e),s&&(r=bb(G6(Bwe(e))),!~LA(r,"g")))throw new zwe("`.replaceAll` does not allow non-global regexes");if(o=Fwe(e,jwe),o)return Dwe(o,e,i,t)}for(a=bb(i),l=bb(e),c=Nwe(t),c||(t=bb(t)),h=l.length,u=Uwe(1,h),d=LA(a,l);d!==-1;)f=c?bb(t(l,d,a)):Vwe(l,a,d,[],void 0,t),p+=K6(a,g,d)+f,g=d+h,d=d+u>a.length?-1:LA(a,l,d+u);return g<a.length&&(p+=K6(a,g)),p}});const q6={"&nbsp;":" ","&amp;":"&","&lt;":"<","&gt;":">"},Ywe=new RegExp(Object.keys(q6).map(n=>`(${n})`).join("|"),"gi");function Gwe(n){return(n&&n.nodeName||"")==="TABLE"}function $A(n){const e=n.hasColHeaders(),t=n.hasRowHeaders(),i=[e?-1:0,t?-1:0,n.countRows()-1,n.countCols()-1],s=n.getData(...i),r=s.length,o=r>0?s[0].length:0,a=["<table>","</table>"],l=e?["<thead>","</thead>"]:[],c=["<tbody>","</tbody>"],h=t?1:0,u=e?1:0;for(let d=0;d<r;d+=1){const f=e&&d===0,g=[];for(let m=0;m<o;m+=1){const w=!f&&t&&m===0;let y="";if(f)y=`<th>${n.getColHeader(m-h)}</th>`;else if(w)y=`<th>${n.getRowHeader(d-u)}</th>`;else{const C=s[d][m],{hidden:R,rowspan:_,colspan:x}=n.getCellMeta(d-u,m-h);if(!R){const M=[];if(_&&M.push(`rowspan="${_}"`),x&&M.push(`colspan="${x}"`),An(C))y=`<td ${M.join(" ")}></td>`;else{const I=C.toString().replace("<","&lt;").replace(">","&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20/gi,"&nbsp;").replace(/\t/gi,"&#9;");y=`<td ${M.join(" ")}>${I}</td>`}}}g.push(y)}const p=["<tr>",...g,"</tr>"].join("");f?l.splice(1,0,p):c.splice(-1,0,p)}return a.splice(1,0,l.join(""),c.join("")),a.join("")}function FA(n){const e=n.length,t=["<table>"];for(let i=0;i<e;i+=1){const s=n[i],r=s.length,o=[];i===0&&t.push("<tbody>");for(let a=0;a<r;a+=1){const l=s[a],c=An(l)?"":l.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20{2,}/gi,h=>`<span style="mso-spacerun: yes">${"&nbsp;".repeat(h.length-1)} </span>`).replace(/\t/gi,"&#9;");o.push(`<td>${c}</td>`)}t.push("<tr>",...o,"</tr>"),i+1===e&&t.push("</tbody>")}return t.push("</table>"),t.join("")}function X6(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;const t={},i=e.createDocumentFragment(),s=e.createElement("div");i.appendChild(s);let r=n;if(typeof r=="string"){const C=r.replace(/<td\b[^>]*?>([\s\S]*?)<\/\s*td>/g,R=>{const _=R.match(/<td\b[^>]*?>/g)[0],x=/<p.*?>/g,M=R.substring(_.length,R.lastIndexOf("<")).trim().replaceAll(/\n\s+/g," ").replaceAll(x,`
`).replace(`
`,"").replaceAll(/<\/(.*)>\s+$/mg,"</$1>").replace(/(<(?!br)([^>]+)>)/gi,"").replaceAll(/^&nbsp;$/mg,"");return`${_}${M}</td>`});s.insertAdjacentHTML("afterbegin",`${C}`),r=s.querySelector("table")}if(!r||!Gwe(r))return;const o=s.querySelector('meta[name$="enerator"]'),a=r.querySelector("tbody th")!==null,l=r.querySelector("tr"),c=l?Array.from(l.cells).reduce((C,R)=>C+R.colSpan,0)-(a?1:0):0,h=r.tFoot&&Array.from(r.tFoot.rows)||[],u=[];let d=!1,f=0,g=0;if(r.tHead){const C=Array.from(r.tHead.rows).filter(R=>{const _=R.querySelector("td")!==null;return _&&u.push(R),!_});f=C.length,d=f>0,f>1?t.nestedHeaders=Array.from(C).reduce((R,_)=>{const x=Array.from(_.cells).reduce((M,I,A)=>{if(a&&A===0)return M;const{colSpan:O,innerHTML:D}=I,j=O>1?{label:D,colspan:O}:D;return M.push(j),M},[]);return R.push(x),R},[]):d&&(t.colHeaders=Array.from(C[0].children).reduce((R,_,x)=>(a&&x===0||R.push(_.innerHTML),R),[]))}u.length&&(t.fixedRowsTop=u.length),h.length&&(t.fixedRowsBottom=h.length);const p=[...u,...Array.from(r.tBodies).reduce((C,R)=>(C.push(...Array.from(R.rows)),C),[]),...h];g=p.length;const m=new Array(g);for(let C=0;C<g;C++)m[C]=new Array(c);const w=[],y=[];for(let C=0;C<g;C++){const R=p[C],_=Array.from(R.cells),x=_.length;for(let M=0;M<x;M++){const I=_[M],{nodeName:A,innerHTML:O,rowSpan:D,colSpan:j}=I,Y=m[C].findIndex(Z=>Z===void 0);if(A==="TD"){if(D>1||j>1){for(let ie=C;ie<C+D;ie++)if(ie<g)for(let se=Y;se<Y+j;se++)m[ie][se]=null;const $=I.getAttribute("style");$&&$.includes("mso-ignore:colspan")||w.push({col:Y,row:C,rowspan:D,colspan:j})}let Z="";o&&/excel/gi.test(o.content)?Z=O.replace(/[\r\n][\x20]{0,2}/g," ").replace(/<br(\s*|\/)>[\r\n]?[\x20]{0,3}/gim,`\r
`):Z=O.replace(/<br(\s*|\/)>[\r\n]?/gim,`\r
`),m[C][Y]=Z.replace(Ywe,$=>q6[$])}else y.push(O)}}return w.length&&(t.mergeCells=w),y.length&&(t.rowHeaders=y),m.length&&(t.data=m),t}const Kwe=Object.freeze(Object.defineProperty({__proto__:null,_dataToHTML:FA,htmlToGridSettings:X6,instanceToHTML:$A},Symbol.toStringTag,{value:"Module"}));function Xi(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=typeof n;if(t==="number")return!isNaN(n)&&isFinite(n);if(t==="string"){if(n.length===0)return!1;if(n.length===1)return/\d/.test(n);const i=Array.from(new Set([".",...e])).map(s=>`\\${s}`).join("|");return new RegExp(`^[+-]?(((${i})?\\d+((${i})\\d+)?(e[+-]?\\d+)?)|(0x[a-f\\d]+))$`,"i").test(n.trim())}else if(t==="object")return!!n&&typeof n.valueOf()=="number"&&!(n instanceof Date);return!1}function Q6(n){return Xi(n,[","])}function Oe(n,e,t){let i=-1;for(typeof e=="function"?(t=e,e=n):i=n-1;++i<=e&&t(i)!==!1;);}function BA(n,e,t){let i=n+1;for(typeof e=="function"&&(t=e,e=0);--i>=e&&t(i)!==!1;);}function VA(n,e){return e=parseInt(e.toString().replace("%",""),10),e=isNaN(e)?0:e,parseInt(n*e/100,10)}function Wt(n,e,t){return Math.min(n,e)===n?e:Math.max(n,t)===n?t:n}const qwe=Object.freeze(Object.defineProperty({__proto__:null,clamp:Wt,isNumeric:Xi,isNumericLike:Q6,rangeEach:Oe,rangeEachReverse:BA,valueAccordingPercent:VA},Symbol.toStringTag,{value:"Module"})),WA="asc",Xwe="desc",Z6=new Map([[WA,[-1,1]],[Xwe,[1,-1]]]),Qwe=n=>`The priority '${n}' is already declared in a map.`,Zwe=n=>`The priority '${n}' is not a number.`;function Jwe(){let{errorPriorityExists:n,errorPriorityNaN:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=new Map;n=rn(n)?n:Qwe,e=rn(e)?e:Zwe;function i(r,o){if(!Xi(r))throw new Error(e(r));if(t.has(r))throw new Error(n(r));t.set(r,o)}function s(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:WA;const[o,a]=Z6.get(r)||Z6.get(WA);return[...t].sort((l,c)=>l[0]<c[0]?o:a).map(l=>l[1])}return{addItem:i,getItems:s}}const eve=n=>`The id '${n}' is already declared in a map.`;function IC(){let{errorIdExists:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=new Map;n=rn(n)?n:eve;function t(c,h){if(l(c))throw new Error(n(c));e.set(c,h)}function i(c){return e.delete(c)}function s(){e.clear()}function r(c){const[h]=a().find(u=>{let[d,f]=u;return c===f?d:!1})||[null];return h}function o(c){return e.get(c)}function a(){return[...e]}function l(c){return e.has(c)}return{addItem:t,clear:s,getId:r,getItem:o,getItems:a,hasItem:l,removeItem:i}}const tve=n=>`'${n}' value is already declared in a unique set.`;function nve(){let{errorItemExists:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=new Set;n=rn(n)?n:tve;function t(r){if(e.has(r))throw new Error(n(r));e.add(r)}function i(){return[...e]}function s(){e.clear()}return{addItem:t,clear:s,getItems:i}}const jA=n=>`There is already registered "${n}" plugin.`,J6=Jwe({errorPriorityExists:n=>`There is already registered plugin on priority "${n}".`,errorPriorityNaN:n=>`The priority "${n}" is not a number.`}),e5=nve({errorItemExists:jA}),zA=IC({errorIdExists:jA});function UA(){return[...J6.getItems(),...e5.getItems()]}function wb(n){const e=Ki(n);return zA.getItem(e)}function ive(n){return!!wb(n)}function _t(n,e,t){[n,e,t]=rve(n,e,t),wb(n)===void 0&&sve(n,e,t)}function sve(n,e,t){const i=Ki(n);if(zA.hasItem(i))throw new Error(jA(i));t===void 0?e5.addItem(i):J6.addItem(t,i),zA.addItem(i,e)}function rve(n,e,t){return typeof n=="function"&&(e=n,n=e.PLUGIN_KEY,t=e.PLUGIN_PRIORITY),[n,e,t]}const{register:ove,getItem:ave,hasItem:t5,getNames:lve,getValues:lVe}=So("renderers");function OC(n){if(typeof n=="function")return n;if(!t5(n))throw Error(`No registered renderer found under "${n}" name`);return ave(n)}function tr(n,e){typeof n!="string"&&(e=n,n=e.RENDERER_TYPE),ove(n,e)}const{register:cve,getItem:hve,hasItem:n5,getNames:uve,getValues:cVe}=So("validators");function YA(n){if(typeof n=="function")return n;if(!n5(n))throw Error(`No registered validator found under "${n}" name`);return hve(n)}function ju(n,e){typeof n!="string"&&(e=n,n=e.VALIDATOR_TYPE),cve(n,e)}var dve=ki,fve=km,gve=Lm,pve=Nm,mve=RA;dve({target:"Array",proto:!0},{at:function(e){var t=fve(this),i=gve(t),s=pve(e),r=s>=0?s:i+s;return r<0||r>=i?void 0:t[r]}}),mve("at");var bve=ki,wve=oi,vve=Im,yve=Nm,Cve=A0,Sve=Rs,_ve=wve("".charAt),Rve=Sve(function(){return"𠮷".at(-2)!=="\uD842"});bve({target:"String",proto:!0,forced:Rve},{at:function(e){var t=Cve(vve(this)),i=t.length,s=yve(e),r=s>=0?s:i+s;return r<0||r>=i?void 0:_ve(t,r)}});function vb(n,e,t){return(e=xve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xve(n){var e=Eve(n,"string");return typeof e=="symbol"?e:e+""}function Eve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Tve{constructor(){vb(this,"count",0),vb(this,"startColumn",null),vb(this,"endColumn",null),vb(this,"startPosition",null),vb(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedWidth:i,zeroBasedScrollOffset:s,viewportWidth:r,columnWidth:o}=t,a=s>0?r+1:r;i>=s&&i+o<=s+a&&((this.startColumn===null||this.startColumn===void 0)&&(this.startColumn=e),this.endColumn=e)}finalize(e){var t;const{scrollOffset:i,viewportWidth:s,inlineStartOffset:r,zeroBasedScrollOffset:o,totalColumns:a,needReverse:l,startPositions:c,columnWidth:h}=e;if(this.endColumn===a-1&&l)for(this.startColumn=this.endColumn;this.startColumn>0;){const g=c[this.endColumn]+h-c[this.startColumn-1];if(g<=s&&(this.startColumn-=1),g>=s)break}this.startPosition=(t=c[this.startColumn])!==null&&t!==void 0?t:null;const u=o>0?s+1:s,d=i+s-u,f=this.startColumn===null?0:e.getColumnWidth(this.startColumn);d<-1*r||i>c.at(-1)||-1*i-s>-1*f?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}function yb(n,e,t){return(e=Mve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mve(n){var e=Ave(n,"string");return typeof e=="symbol"?e:e+""}function Ave(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Pve{constructor(){yb(this,"count",0),yb(this,"startRow",null),yb(this,"endRow",null),yb(this,"startPosition",null),yb(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedHeight:i,zeroBasedScrollOffset:s,innerViewportHeight:r,rowHeight:o}=t;i>=s&&i+o<=r&&(this.startRow===null&&(this.startRow=e),this.endRow=e)}finalize(e){var t;const{scrollOffset:i,viewportHeight:s,horizontalScrollbarHeight:r,totalRows:o,needReverse:a,startPositions:l,rowHeight:c}=e;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){const d=l[this.endRow]+c-l[this.startRow-1];if(d<=s-r&&(this.startRow-=1),d>=s-r)break}this.startPosition=(t=l[this.startRow])!==null&&t!==void 0?t:null;const h=i+s-r,u=this.startRow===null?0:e.getRowHeight(this.startRow);h<u||i>l.at(-1)?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function Cb(n,e,t){return(e=Ive(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ive(n){var e=Ove(n,"string");return typeof e=="symbol"?e:e+""}function Ove(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class i5{constructor(){Cb(this,"count",0),Cb(this,"startColumn",null),Cb(this,"endColumn",null),Cb(this,"startPosition",null),Cb(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedWidth:i,zeroBasedScrollOffset:s,viewportWidth:r}=t;i<=s&&(this.startColumn=e);const o=s>0?r+1:r;i>=s&&i<=s+o&&(this.startColumn===null||this.startColumn===void 0)&&(this.startColumn=e),this.endColumn=e}finalize(e){var t;const{scrollOffset:i,viewportWidth:s,inlineStartOffset:r,zeroBasedScrollOffset:o,totalColumns:a,needReverse:l,startPositions:c,columnWidth:h}=e;if(this.endColumn===a-1&&l)for(this.startColumn=this.endColumn;this.startColumn>0;){const f=c[this.endColumn]+h-c[this.startColumn-1];if(this.startColumn-=1,f>s)break}this.startPosition=(t=c[this.startColumn])!==null&&t!==void 0?t:null;const u=o>0?s+1:s;i+s-u<-1*r||i>c.at(-1)+h||-1*i-s>0?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}function Sb(n,e,t){return(e=kve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kve(n){var e=Hve(n,"string");return typeof e=="symbol"?e:e+""}function Hve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class s5{constructor(){Sb(this,"count",0),Sb(this,"startRow",null),Sb(this,"endRow",null),Sb(this,"startPosition",null),Sb(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedHeight:i,zeroBasedScrollOffset:s,innerViewportHeight:r}=t;i<=s&&(this.startRow=e),i>=s&&i<=r&&this.startRow===null&&(this.startRow=e),this.endRow=e}finalize(e){var t;const{scrollOffset:i,viewportHeight:s,horizontalScrollbarHeight:r,totalRows:o,needReverse:a,startPositions:l,rowHeight:c}=e;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){const u=l[this.endRow]+c-l[this.startRow-1];if(this.startRow-=1,u>=s-r)break}this.startPosition=(t=l[this.startRow])!==null&&t!==void 0?t:null,i+s-r<0||i>l.at(-1)+c?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function _b(n,e,t){return(e=Dve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dve(n){var e=Nve(n,"string");return typeof e=="symbol"?e:e+""}function Nve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Lve{constructor(){_b(this,"count",0),_b(this,"startColumn",0),_b(this,"endColumn",0),_b(this,"startPosition",0),_b(this,"isVisibleInTrimmingContainer",!0)}initialize(e){let{totalColumns:t}=e;this.count=t,this.endColumn=this.count-1}process(){}finalize(){}}function Rb(n,e,t){return(e=$ve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $ve(n){var e=Fve(n,"string");return typeof e=="symbol"?e:e+""}function Fve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Bve{constructor(){Rb(this,"count",0),Rb(this,"startRow",0),Rb(this,"endRow",0),Rb(this,"startPosition",0),Rb(this,"isVisibleInTrimmingContainer",!0)}initialize(e){let{totalRows:t}=e;this.count=t,this.endRow=this.count-1}process(){}finalize(){}}class Vve extends i5{finalize(e){var t;super.finalize(e);const{overrideFn:i,totalColumns:s,startPositions:r}=e;this.startColumn!==null&&typeof i=="function"&&i(this),this.startColumn<0&&(this.startColumn=0),this.startPosition=(t=r[this.startColumn])!==null&&t!==void 0?t:null,s<this.endColumn&&(this.endColumn=s-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}class Wve extends s5{finalize(e){var t;super.finalize(e);const{overrideFn:i,totalRows:s,startPositions:r}=e;this.startRow!==null&&typeof i=="function"&&i(this),this.startRow<0&&(this.startRow=0),this.startPosition=(t=r[this.startRow])!==null&&t!==void 0?t:null,s<this.endRow&&(this.endRow=s-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function r5(n,e,t){return(e=jve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jve(n){var e=zve(n,"string");return typeof e=="symbol"?e:e+""}function zve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class o5{constructor(e){r5(this,"calculationTypes",[]),r5(this,"calculationResults",new Map),this.calculationTypes=e}_initialize(e){this.calculationTypes.forEach(t=>{let[i,s]=t;this.calculationResults.set(i,s),s.initialize(e)})}_process(e,t){this.calculationTypes.forEach(i=>{let[,s]=i;return s.process(e,t)})}_finalize(e){this.calculationTypes.forEach(t=>{let[,i]=t;return i.finalize(e)})}getResultsFor(e){return this.calculationResults.get(e)}}function _o(n,e,t){return(e=Uve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Uve(n){var e=Yve(n,"string");return typeof e=="symbol"?e:e+""}function Yve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const kC=50;class Gve extends o5{constructor(e){let{calculationTypes:t,viewportWidth:i,scrollOffset:s,totalColumns:r,columnWidthFn:o,overrideFn:a,inlineStartOffset:l}=e;super(t),_o(this,"viewportWidth",0),_o(this,"scrollOffset",0),_o(this,"zeroBasedScrollOffset",0),_o(this,"totalColumns",0),_o(this,"columnWidthFn",null),_o(this,"columnWidth",0),_o(this,"overrideFn",null),_o(this,"inlineStartOffset",0),_o(this,"totalCalculatedWidth",0),_o(this,"startPositions",[]),_o(this,"needReverse",!0),this.viewportWidth=i,this.scrollOffset=s,this.zeroBasedScrollOffset=Math.max(s,0),this.totalColumns=r,this.columnWidthFn=o,this.overrideFn=a,this.inlineStartOffset=l,this.calculate()}calculate(){this._initialize(this);for(let e=0;e<this.totalColumns;e++)if(this.columnWidth=this.getColumnWidth(e),this._process(e,this),this.startPositions.push(this.totalCalculatedWidth),this.totalCalculatedWidth+=this.columnWidth,this.totalCalculatedWidth>=this.zeroBasedScrollOffset+this.viewportWidth){this.needReverse=!1;break}this._finalize(this)}getColumnWidth(e){const t=this.columnWidthFn(e);return isNaN(t)?kC:t}}function Hr(n,e,t){return(e=Kve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Kve(n){var e=qve(n,"string");return typeof e=="symbol"?e:e+""}function qve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const a5=23;class Xve extends o5{constructor(e){let{calculationTypes:t,viewportHeight:i,scrollOffset:s,totalRows:r,rowHeightFn:o,overrideFn:a,horizontalScrollbarHeight:l}=e;super(t),Hr(this,"viewportHeight",0),Hr(this,"scrollOffset",0),Hr(this,"zeroBasedScrollOffset",0),Hr(this,"totalRows",0),Hr(this,"rowHeightFn",null),Hr(this,"rowHeight",0),Hr(this,"overrideFn",null),Hr(this,"horizontalScrollbarHeight",0),Hr(this,"innerViewportHeight",0),Hr(this,"totalCalculatedHeight",0),Hr(this,"startPositions",[]),Hr(this,"needReverse",!0),this.viewportHeight=i,this.scrollOffset=s,this.zeroBasedScrollOffset=Math.max(s,0),this.totalRows=r,this.rowHeightFn=o,this.overrideFn=a,this.horizontalScrollbarHeight=l??0,this.innerViewportHeight=this.zeroBasedScrollOffset+this.viewportHeight-this.horizontalScrollbarHeight,this.calculate()}calculate(){this._initialize(this);for(let e=0;e<this.totalRows;e++)if(this.rowHeight=this.getRowHeight(e),this._process(e,this),this.startPositions.push(this.totalCalculatedHeight),this.totalCalculatedHeight+=this.rowHeight,this.totalCalculatedHeight>=this.innerViewportHeight){this.needReverse=!1;break}this._finalize(this)}getRowHeight(e){const t=this.rowHeightFn(e);return isNaN(t)?a5:t}}function Qve(n,e,t){Zve(n,e),e.set(n,t)}function Zve(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function l5(n,e,t){return(e=Jve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jve(n){var e=eye(n,"string");return typeof e=="symbol"?e:e+""}function eye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function og(n,e){return n.get(h5(n,e))}function c5(n,e,t){return n.set(h5(n,e),t),t}function h5(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ll=new WeakMap;class zu{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;l5(this,"row",null),l5(this,"col",null),Qve(this,Ll,!1),c5(Ll,this,i),typeof e<"u"&&typeof t<"u"&&(this.row=e,this.col=t)}isValid(e){const{countRows:t,countCols:i,countRowHeaders:s,countColHeaders:r}={countRows:0,countCols:0,countRowHeaders:0,countColHeaders:0,...e};return!(!Number.isInteger(this.row)||!Number.isInteger(this.col)||this.row<-r||this.col<-s||this.row>=t||this.col>=i)}isEqual(e){return e===this?!0:this.row===e.row&&this.col===e.col}isHeader(){return!this.isCell()}isCell(){return this.row>=0&&this.col>=0}isRtl(){return og(Ll,this)}isSouthEastOf(e){return this.row>=e.row&&(og(Ll,this)?this.col<=e.col:this.col>=e.col)}isNorthWestOf(e){return this.row<=e.row&&(og(Ll,this)?this.col>=e.col:this.col<=e.col)}isSouthWestOf(e){return this.row>=e.row&&(og(Ll,this)?this.col>=e.col:this.col<=e.col)}isNorthEastOf(e){return this.row<=e.row&&(og(Ll,this)?this.col<=e.col:this.col>=e.col)}normalize(){return this.row=this.row===null?this.row:Math.max(this.row,0),this.col=this.col===null?this.col:Math.max(this.col,0),this}assign(e){return Number.isInteger(e==null?void 0:e.row)&&(this.row=e.row),Number.isInteger(e==null?void 0:e.col)&&(this.col=e.col),e instanceof zu&&c5(Ll,this,e.isRtl()),this}clone(){return new zu(this.row,this.col,og(Ll,this))}toObject(){return{row:this.row,col:this.col}}}function tye(n,e,t){nye(n,e),e.set(n,t)}function nye(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function GA(n,e,t){return(e=iye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iye(n){var e=sye(n,"string");return typeof e=="symbol"?e:e+""}function sye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Dr(n,e){return n.get(u5(n,e))}function rye(n,e,t){return n.set(u5(n,e),t),t}function u5(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ts=new WeakMap;class xb{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;GA(this,"highlight",null),GA(this,"from",null),GA(this,"to",null),tye(this,Ts,!1),this.highlight=e.clone(),this.from=t.clone(),this.to=i.clone(),rye(Ts,this,s)}setHighlight(e){return this.highlight=e.clone(),this}setFrom(e){return this.from=e.clone(),this}setTo(e){return this.to=e.clone(),this}isValid(e){return this.from.isValid(e)&&this.to.isValid(e)}isSingle(){return this.isSingleCell()||this.isSingleHeader()}isSingleCell(){return this.from.row>=0&&this.from.row===this.to.row&&this.from.col>=0&&this.from.col===this.to.col}isSingleHeader(){return(this.from.row<0||this.from.col<0)&&this.from.row===this.to.row&&this.from.col===this.to.col}isHeader(){return this.from.isHeader()&&this.to.isHeader()?!0:this.from.col<0&&this.to.col<0||this.from.row<0&&this.to.row<0}containsHeaders(){return this.from.isHeader()||this.to.isHeader()}getOuterHeight(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}getOuterWidth(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}getHeight(){if(this.from.row<0&&this.to.row<0)return 0;const e=Math.max(this.from.row,0),t=Math.max(this.to.row,0);return Math.max(e,t)-Math.min(e,t)+1}getWidth(){if(this.from.col<0&&this.to.col<0)return 0;const e=Math.max(this.from.col,0),t=Math.max(this.to.col,0);return Math.max(e,t)-Math.min(e,t)+1}getCellsCount(){return this.getWidth()*this.getHeight()}includes(e){const{row:t,col:i}=e,s=this.getOuterTopStartCorner(),r=this.getOuterBottomEndCorner();return s.row<=t&&r.row>=t&&s.col<=i&&r.col>=i}includesRange(e){return this.includes(e.getOuterTopStartCorner())&&this.includes(e.getOuterBottomEndCorner())}isEqual(e){return Math.min(this.from.row,this.to.row)===Math.min(e.from.row,e.to.row)&&Math.max(this.from.row,this.to.row)===Math.max(e.from.row,e.to.row)&&Math.min(this.from.col,this.to.col)===Math.min(e.from.col,e.to.col)&&Math.max(this.from.col,this.to.col)===Math.max(e.from.col,e.to.col)}overlaps(e){return e.isSouthEastOf(this.getOuterTopLeftCorner())&&e.isNorthWestOf(this.getOuterBottomRightCorner())}isSouthEastOf(e){return this.getOuterTopLeftCorner().isSouthEastOf(e)||this.getOuterBottomRightCorner().isSouthEastOf(e)}isNorthWestOf(e){return this.getOuterTopLeftCorner().isNorthWestOf(e)||this.getOuterBottomRightCorner().isNorthWestOf(e)}isOverlappingHorizontally(e){return this.getOuterTopEndCorner().col>=e.getOuterTopStartCorner().col&&this.getOuterTopEndCorner().col<=e.getOuterTopEndCorner().col||this.getOuterTopStartCorner().col<=e.getOuterTopEndCorner().col&&this.getOuterTopStartCorner().col>=e.getOuterTopStartCorner().col}isOverlappingVertically(e){return this.getOuterBottomStartCorner().row>=e.getOuterTopRightCorner().row&&this.getOuterBottomStartCorner().row<=e.getOuterBottomStartCorner().row||this.getOuterTopEndCorner().row<=e.getOuterBottomStartCorner().row&&this.getOuterTopEndCorner().row>=e.getOuterTopRightCorner().row}expand(e){const t=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();return e.row<t.row||e.col<t.col||e.row>i.row||e.col>i.col?(this.from=this._createCellCoords(Math.min(t.row,e.row),Math.min(t.col,e.col)),this.to=this._createCellCoords(Math.max(i.row,e.row),Math.max(i.col,e.col)),!0):!1}expandByRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(this.includesRange(e)||!this.overlaps(e))return!1;const i=this.getOuterTopStartCorner(),s=this.getOuterBottomEndCorner(),r=this.getDirection(),o=e.getOuterTopStartCorner(),a=e.getOuterBottomEndCorner(),l=Math.min(i.row,o.row),c=Math.min(i.col,o.col),h=Math.max(s.row,a.row),u=Math.max(s.col,a.col),d=this._createCellCoords(l,c),f=this._createCellCoords(h,u);return this.from=d,this.to=f,this.setDirection(r),t&&(this.highlight.row===this.getOuterBottomRightCorner().row&&this.getVerticalDirection()==="N-S"&&this.flipDirectionVertically(),this.highlight.col===this.getOuterTopRightCorner().col&&this.getHorizontalDirection()==="W-E"&&this.flipDirectionHorizontally()),!0}getDirection(){if(this.from.isNorthWestOf(this.to))return"NW-SE";if(this.from.isNorthEastOf(this.to))return"NE-SW";if(this.from.isSouthEastOf(this.to))return"SE-NW";if(this.from.isSouthWestOf(this.to))return"SW-NE"}setDirection(e){switch(e){case"NW-SE":[this.from,this.to]=[this.getOuterTopLeftCorner(),this.getOuterBottomRightCorner()];break;case"NE-SW":[this.from,this.to]=[this.getOuterTopRightCorner(),this.getOuterBottomLeftCorner()];break;case"SE-NW":[this.from,this.to]=[this.getOuterBottomRightCorner(),this.getOuterTopLeftCorner()];break;case"SW-NE":[this.from,this.to]=[this.getOuterBottomLeftCorner(),this.getOuterTopRightCorner()];break}}getVerticalDirection(){return["NE-SW","NW-SE"].indexOf(this.getDirection())>-1?"N-S":"S-N"}getHorizontalDirection(){return["NW-SE","SW-NE"].indexOf(this.getDirection())>-1?"W-E":"E-W"}flipDirectionVertically(){switch(this.getDirection()){case"NW-SE":this.setDirection("SW-NE");break;case"NE-SW":this.setDirection("SE-NW");break;case"SE-NW":this.setDirection("NE-SW");break;case"SW-NE":this.setDirection("NW-SE");break}}flipDirectionHorizontally(){switch(this.getDirection()){case"NW-SE":this.setDirection("NE-SW");break;case"NE-SW":this.setDirection("NW-SE");break;case"SE-NW":this.setDirection("SW-NE");break;case"SW-NE":this.setDirection("SE-NW");break}}getTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getTopLeftCorner(){return Dr(Ts,this)?this.getTopEndCorner():this.getTopStartCorner()}getBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getBottomRightCorner(){return Dr(Ts,this)?this.getBottomStartCorner():this.getBottomEndCorner()}getTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getTopRightCorner(){return Dr(Ts,this)?this.getTopStartCorner():this.getTopEndCorner()}getBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getBottomLeftCorner(){return Dr(Ts,this)?this.getBottomEndCorner():this.getBottomStartCorner()}getOuterTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterTopLeftCorner(){return Dr(Ts,this)?this.getOuterTopEndCorner():this.getOuterTopStartCorner()}getOuterBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterBottomRightCorner(){return Dr(Ts,this)?this.getOuterBottomStartCorner():this.getOuterBottomEndCorner()}getOuterTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterTopRightCorner(){return Dr(Ts,this)?this.getOuterTopStartCorner():this.getOuterTopEndCorner()}getOuterBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterBottomLeftCorner(){return Dr(Ts,this)?this.getOuterBottomEndCorner():this.getOuterBottomStartCorner()}isCorner(e){return e.isEqual(this.getOuterTopLeftCorner())||e.isEqual(this.getOuterTopRightCorner())||e.isEqual(this.getOuterBottomLeftCorner())||e.isEqual(this.getOuterBottomRightCorner())}getOppositeCorner(e){if(!(e instanceof zu))return!1;if(e.isEqual(this.getOuterBottomEndCorner()))return this.getOuterTopStartCorner();if(e.isEqual(this.getOuterTopStartCorner()))return this.getOuterBottomEndCorner();if(e.isEqual(this.getOuterTopEndCorner()))return this.getOuterBottomStartCorner();if(e.isEqual(this.getOuterBottomStartCorner()))return this.getOuterTopEndCorner()}getBordersSharedWith(e){if(!this.includesRange(e))return[];const t={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},i={top:Math.min(e.from.row,e.to.row),bottom:Math.max(e.from.row,e.to.row),left:Math.min(e.from.col,e.to.col),right:Math.max(e.from.col,e.to.col)},s=[];return t.top===i.top&&s.push("top"),t.right===i.right&&s.push(Dr(Ts,this)?"left":"right"),t.bottom===i.bottom&&s.push("bottom"),t.left===i.left&&s.push(Dr(Ts,this)?"right":"left"),s}getInner(){const e=this.getOuterTopStartCorner(),t=this.getOuterBottomEndCorner(),i=[];for(let s=e.row;s<=t.row;s++)for(let r=e.col;r<=t.col;r++)!(this.from.row===s&&this.from.col===r)&&!(this.to.row===s&&this.to.col===r)&&i.push(this._createCellCoords(s,r));return i}getAll(){const e=this.getOuterTopStartCorner(),t=this.getOuterBottomEndCorner(),i=[];for(let s=e.row;s<=t.row;s++)for(let r=e.col;r<=t.col;r++)e.row===s&&e.col===r?i.push(e):t.row===s&&t.col===r?i.push(t):i.push(this._createCellCoords(s,r));return i}forAll(e){const t=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();for(let s=t.row;s<=i.row;s++)for(let r=t.col;r<=i.col;r++)if(e(s,r)===!1)return}clone(){return new xb(this.highlight,this.from,this.to,Dr(Ts,this))}toObject(){return{from:this.from.toObject(),to:this.to.toObject()}}_createCellCoords(e,t){return new zu(e,t,Dr(Ts,this))}}function ba(n,e,t){oye(n,e),e.set(n,t)}function oye(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function He(n,e){return n.get(d5(n,e))}function Jc(n,e,t){return n.set(d5(n,e),t),t}function d5(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Nr=new WeakMap,KA=new WeakMap,xi=new WeakMap,ag=new WeakMap,HC=new WeakMap,Ro=new WeakMap,qA=new WeakMap,Eb=new WeakMap,Uu=new WeakMap,wa=new WeakMap;let f5=class{constructor(e,t,i,s,r,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;ba(this,Nr,void 0),ba(this,KA,void 0),ba(this,xi,void 0),ba(this,ag,void 0),ba(this,HC,void 0),ba(this,Ro,void 0),ba(this,qA,void 0),ba(this,Eb,void 0),ba(this,Uu,[null,null]),ba(this,wa,[null,null]),Jc(Nr,this,i),Jc(KA,this,t),Jc(xi,this,r),Jc(ag,this,o),Jc(HC,this,a),Jc(Ro,this,s),Jc(qA,this,e),this.registerEvents()}registerEvents(){He(Ro,this).addEventListener(He(xi,this).holder,"contextmenu",i=>this.onContextMenu(i)),He(Ro,this).addEventListener(He(xi,this).TABLE,"mouseover",i=>this.onMouseOver(i)),He(Ro,this).addEventListener(He(xi,this).TABLE,"mouseout",i=>this.onMouseOut(i));const e=()=>{He(Ro,this).addEventListener(He(xi,this).holder,"touchstart",i=>this.onTouchStart(i)),He(Ro,this).addEventListener(He(xi,this).holder,"touchend",i=>this.onTouchEnd(i)),this.momentumScrolling||(this.momentumScrolling={}),He(Ro,this).addEventListener(He(xi,this).holder,"scroll",()=>{clearTimeout(this.momentumScrolling._timeout),this.momentumScrolling.ongoing||He(Nr,this).getSetting("onBeforeTouchScroll"),this.momentumScrolling.ongoing=!0,this.momentumScrolling._timeout=setTimeout(()=>{this.touchApplied||(this.momentumScrolling.ongoing=!1,He(Nr,this).getSetting("onAfterMomentumScroll"))},200)})},t=()=>{He(Ro,this).addEventListener(He(xi,this).holder,"mouseup",i=>this.onMouseUp(i)),He(Ro,this).addEventListener(He(xi,this).holder,"mousedown",i=>this.onMouseDown(i))};Dl()?e():(dA()&&e(),t())}selectedCellWasTouched(e){const i=this.parentCell(e).coords;if(He(Eb,this)&&i){const[s,r]=[i.row,He(Eb,this).from.row],[o,a]=[i.col,He(Eb,this).from.col];return s===r&&o===a}return!1}parentCell(e){const t={},i=He(xi,this).TABLE,s=ob(e,["TD","TH"],i);return s?(t.coords=He(xi,this).getCoords(s),t.TD=s):Fe(e,"wtBorder")&&Fe(e,"current")?(t.coords=He(ag,this).getFocusSelection().cellRange.highlight,t.TD=He(xi,this).getCell(t.coords)):Fe(e,"wtBorder")&&Fe(e,"area")&&He(ag,this).getAreaSelection().cellRange&&(t.coords=He(ag,this).getAreaSelection().cellRange.to,t.TD=He(xi,this).getCell(t.coords)),t}onMouseDown(e){const t=He(KA,this).rootDocument.activeElement,i=uA(zj,e.target),s=e.target;if(!["TD","TH"].includes(t.nodeName)&&(s===t||i(0)===t||i(1)===t))return;const r=this.parentCell(s);Fe(s,"corner")?He(Nr,this).getSetting("onCellCornerMouseDown",e,s):r.TD&&He(Nr,this).has("onCellMouseDown")&&this.callListener("onCellMouseDown",e,r.coords,r.TD),(e.button===0||this.touchApplied)&&r.TD&&(He(wa,this)[0]=r.TD,clearTimeout(He(Uu,this)[0]),He(Uu,this)[0]=setTimeout(()=>{He(wa,this)[0]=null},1e3))}onContextMenu(e){if(He(Nr,this).has("onCellContextMenu")){const t=this.parentCell(e.target);t.TD&&this.callListener("onCellContextMenu",e,t.coords,t.TD)}}onMouseOver(e){if(!He(Nr,this).has("onCellMouseOver"))return;const t=He(xi,this).TABLE,i=ob(e.target,["TD","TH"],t),s=He(HC,this)||this;i&&i!==s.lastMouseOver&&Yc(i,t)&&(s.lastMouseOver=i,this.callListener("onCellMouseOver",e,He(xi,this).getCoords(i),i))}onMouseOut(e){if(!He(Nr,this).has("onCellMouseOut"))return;const t=He(xi,this).TABLE,i=ob(e.target,["TD","TH"],t),s=ob(e.relatedTarget,["TD","TH"],t),r=He(HC,this)||this;i&&i!==s&&Yc(i,t)&&(this.callListener("onCellMouseOut",e,He(xi,this).getCoords(i),i),s===null&&(r.lastMouseOver=null))}onMouseUp(e){const t=this.parentCell(e.target);t.TD&&He(Nr,this).has("onCellMouseUp")&&this.callListener("onCellMouseUp",e,t.coords,t.TD),!(e.button!==0&&!this.touchApplied)&&(t.TD===He(wa,this)[0]&&t.TD===He(wa,this)[1]?(Fe(e.target,"corner")?this.callListener("onCellCornerDblClick",e,t.coords,t.TD):this.callListener("onCellDblClick",e,t.coords,t.TD),He(wa,this)[0]=null,He(wa,this)[1]=null):t.TD===He(wa,this)[0]&&(He(wa,this)[1]=t.TD,clearTimeout(He(Uu,this)[1]),He(Uu,this)[1]=setTimeout(()=>{He(wa,this)[1]=null},500)))}onTouchStart(e){Jc(Eb,this,He(ag,this).getFocusSelection().cellRange),this.touchApplied=!0,this.onMouseDown(e)}onTouchEnd(e){var t;const i=e.target,s=(t=this.parentCell(i))===null||t===void 0?void 0:t.coords,r=Me(s)&&s.row>=0&&s.col>=0;if(e.cancelable&&r&&He(Nr,this).getSetting("isDataViewInstance")){const a=["A","BUTTON","INPUT"];pA()&&(x6()||E6())&&this.selectedCellWasTouched(i)&&!a.includes(i.tagName)?e.preventDefault():this.selectedCellWasTouched(i)||e.preventDefault()}this.onMouseUp(e),this.touchApplied=!1}callListener(e,t,i,s){const r=He(Nr,this).getSettingPure(e);r&&r(t,i,s,He(qA,this).call(this))}destroy(){clearTimeout(He(Uu,this)[0]),clearTimeout(He(Uu,this)[1]),He(Ro,this).destroy()}};function XA(n,e,t){return(e=aye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aye(n){var e=lye(n,"string");return typeof e=="symbol"?e:e+""}function lye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class cye{constructor(e,t,i){XA(this,"offset",void 0),XA(this,"total",void 0),XA(this,"countTH",void 0),this.offset=e,this.total=t,this.countTH=i}offsetted(e){return e+this.offset}unOffsetted(e){return e-this.offset}renderedToSource(e){return this.offsetted(e)}sourceToRendered(e){return this.unOffsetted(e)}offsettedTH(e){return e-this.countTH}unOffsettedTH(e){return e+this.countTH}visibleRowHeadedColumnToSourceColumn(e){return this.renderedToSource(this.offsettedTH(e))}sourceColumnToVisibleRowHeadedColumn(e){return this.unOffsettedTH(this.sourceToRendered(e))}}function QA(n,e,t){return(e=hye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hye(n){var e=uye(n,"string");return typeof e=="symbol"?e:e+""}function uye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class dye{constructor(e,t,i){QA(this,"offset",void 0),QA(this,"total",void 0),QA(this,"countTH",void 0),this.offset=e,this.total=t,this.countTH=i}offsetted(e){return e+this.offset}unOffsetted(e){return e-this.offset}renderedToSource(e){return this.offsetted(e)}sourceToRendered(e){return this.unOffsetted(e)}offsettedTH(e){return e-this.countTH}unOffsettedTH(e){return e+this.countTH}visibleColHeadedRowToSourceRow(e){return this.renderedToSource(this.offsettedTH(e))}sourceRowToVisibleColHeadedRow(e){return this.unOffsettedTH(this.sourceToRendered(e))}}const fye=0,DC=1,NC=2;function LC(n,e,t){return(e=gye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gye(n){var e=pye(n,"string");return typeof e=="symbol"?e:e+""}function pye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class g5{constructor(){LC(this,"currentSize",0),LC(this,"nextSize",0),LC(this,"currentOffset",0),LC(this,"nextOffset",0)}setSize(e){this.currentSize=this.nextSize,this.nextSize=e}setOffset(e){this.currentOffset=this.nextOffset,this.nextOffset=e}}function ZA(n,e,t){return(e=mye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mye(n){var e=bye(n,"string");return typeof e=="symbol"?e:e+""}function bye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class wye{constructor(){ZA(this,"size",new g5),ZA(this,"workingSpace",fye),ZA(this,"sharedSize",null)}setSize(e){this.size.setSize(e)}setOffset(e){this.size.setOffset(e)}getViewSize(){return this.size}isShared(){return this.sharedSize instanceof g5}isPlaceOn(e){return this.workingSpace===e}append(e){this.workingSpace=DC,e.workingSpace=NC,this.sharedSize=e.getViewSize()}prepend(e){this.workingSpace=NC,e.workingSpace=DC,this.sharedSize=e.getViewSize()}}function lg(n,e,t){return(e=vye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vye(n){var e=yye(n,"string");return typeof e=="symbol"?e:e+""}function yye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class p5{constructor(e,t,i){lg(this,"rootNode",void 0),lg(this,"nodesPool",void 0),lg(this,"sizeSet",new wye),lg(this,"childNodeType",void 0),lg(this,"visualIndex",0),lg(this,"collectedNodes",[]),this.rootNode=e,this.nodesPool=t,this.childNodeType=i.toUpperCase()}setSize(e){return this.sizeSet.setSize(e),this}setOffset(e){return this.sizeSet.setOffset(e),this}isSharedViewSet(){return this.sizeSet.isShared()}getNode(e){return e<this.collectedNodes.length?this.collectedNodes[e]:null}getCurrentNode(){const e=this.collectedNodes.length;return e>0?this.collectedNodes[e-1]:null}getRenderedChildCount(){const{rootNode:e,sizeSet:t}=this;let i=0;if(this.isSharedViewSet()){let s=e.firstElementChild;for(;s;){if(s.tagName===this.childNodeType)i+=1;else if(t.isPlaceOn(DC))break;s=s.nextElementSibling}}else i=e.childElementCount;return i}start(){this.collectedNodes.length=0,this.visualIndex=0;const{rootNode:e,sizeSet:t}=this,i=this.isSharedViewSet(),{nextSize:s}=t.getViewSize();let r=this.getRenderedChildCount();for(;r<s;){const a=this.nodesPool();!i||i&&t.isPlaceOn(NC)?e.appendChild(a):e.insertBefore(a,e.firstChild),r+=1}const o=i&&t.isPlaceOn(DC);for(;r>s;)e.removeChild(o?e.firstChild:e.lastChild),r-=1}render(){const{rootNode:e,sizeSet:t}=this;let i=this.visualIndex;this.isSharedViewSet()&&t.isPlaceOn(NC)&&(i+=t.sharedSize.nextSize);let s=e.childNodes[i];if(s.tagName!==this.childNodeType){const r=this.nodesPool();e.replaceChild(r,s),s=r}this.collectedNodes.push(s),this.visualIndex+=1}end(){}}class m5 extends p5{prependView(e){return this.sizeSet.prepend(e.sizeSet),e.sizeSet.append(this.sizeSet),this}appendView(e){return this.sizeSet.append(e.sizeSet),e.sizeSet.prepend(this.sizeSet),this}}function Cye(n,e,t){return(e=Sye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Sye(n){var e=_ye(n,"string");return typeof e=="symbol"?e:e+""}function _ye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Rye{constructor(e){Cye(this,"nodeType",void 0),this.nodeType=e.toUpperCase()}setRootDocument(e){this.rootDocument=e}obtain(){return this.rootDocument.createElement(this.nodeType)}}function Tb(n,e,t){return(e=xye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xye(n){var e=Eye(n,"string");return typeof e=="symbol"?e:e+""}function Eye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Mb{constructor(e,t){Tb(this,"nodesPool",null),Tb(this,"nodeType",void 0),Tb(this,"rootNode",void 0),Tb(this,"table",null),Tb(this,"renderedNodes",0),this.nodesPool=typeof e=="string"?new Rye(e):null,this.nodeType=e,this.rootNode=t}setTable(e){this.nodesPool&&this.nodesPool.setRootDocument(e.rootDocument),this.table=e}adjust(){}render(){}}function b5(n,e,t){return(e=Tye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Tye(n){var e=Mye(n,"string");return typeof e=="symbol"?e:e+""}function Mye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Aye extends Mb{constructor(){super("TH"),b5(this,"orderViews",new WeakMap),b5(this,"sourceRowIndex",0)}obtainOrderView(e){let t;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new m5(e,i=>this.nodesPool.obtain(this.sourceRowIndex,i),this.nodeType),this.orderViews.set(e,t)),t}render(){const{rowsToRender:e,rowHeaderFunctions:t,rowHeadersCount:i,rows:s,cells:r}=this.table;for(let o=0;o<e;o++){const a=this.table.renderedRowToSource(o),l=s.getRenderedNode(o);this.sourceRowIndex=a;const c=this.obtainOrderView(l),h=r.obtainOrderView(l);c.appendView(h).setSize(i).setOffset(this.table.renderedColumnToSource(0)).start();for(let u=0;u<i;u++){c.render();const d=c.getCurrentNode();d.className="",d.removeAttribute("style"),Lu(d,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&$e(d,[Cme(),Pme(),JM(u+1),Zf(-1)]),t[u](a,d,u)}c.end()}}}class Pye extends Mb{constructor(e){super(null,e)}adjust(){const{columnHeadersCount:e,rowHeadersCount:t}=this.table;let i=this.rootNode.firstChild;if(e){const{columnsToRender:s}=this.table,r=s+t;for(let a=0,l=e;a<l;a++){for(i=this.rootNode.childNodes[a],i||(i=this.table.rootDocument.createElement("tr"),this.rootNode.appendChild(i)),this.renderedNodes=i.childNodes.length;this.renderedNodes<r;)i.appendChild(this.table.rootDocument.createElement("th")),this.renderedNodes+=1;for(;this.renderedNodes>r;)i.removeChild(i.lastChild),this.renderedNodes-=1}const o=this.rootNode.childNodes.length;if(o>e)for(let a=e;a<o;a++)this.rootNode.removeChild(this.rootNode.lastChild)}else i&&vo(i)}render(){const{columnHeadersCount:e}=this.table;this.table.isAriaEnabled()&&$e(this.rootNode,[Nj()]);for(let t=0;t<e;t+=1){const{columnHeaderFunctions:i,columnsToRender:s,rowHeadersCount:r}=this.table,o=this.rootNode.childNodes[t];this.table.isAriaEnabled()&&$e(o,[ZM(),Bj(t+1)]);for(let a=-1*r;a<s;a+=1){const l=this.table.renderedColumnToSource(a),c=o.childNodes[a+r];c.className="",c.removeAttribute("style"),Lu(c,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&$e(c,[JM(a+1+this.table.rowHeadersCount),Zf(-1),Sme(),...a>=0?[Ame()]:[ZM()]]),i[t](l,c,t)}}}}let w5=!1;class Iye extends Mb{constructor(e){super(null,e)}adjust(){const{columnsToRender:e,rowHeadersCount:t}=this.table,i=e+t;for(;this.renderedNodes<i;)this.rootNode.appendChild(this.table.rootDocument.createElement("col")),this.renderedNodes+=1;for(;this.renderedNodes>i;)this.rootNode.removeChild(this.rootNode.lastChild),this.renderedNodes-=1}render(){this.adjust();const{columnsToRender:e,rowHeadersCount:t}=this.table;!w5&&e>1e3&&(w5=!0,Vt(Ft`Performance tip: Handsontable rendered more than 1000 visible columns.\x20
        Consider limiting the number of rendered columns by specifying the table width and/or\x20
        turning off the "renderAllColumns" option.`));for(let s=0;s<t;s++){const r=this.table.renderedColumnToSource(s),o=this.table.columnUtils.getHeaderWidth(r);this.rootNode.childNodes[s].style.width=`${o}px`}for(let s=0;s<e;s++){const r=this.table.renderedColumnToSource(s),o=this.table.columnUtils.getStretchedColumnWidth(r);this.rootNode.childNodes[s+t].style.width=`${o}px`}const i=this.rootNode.firstChild;i&&ae(i,"rowHeader")}}function Oye(n,e,t){return(e=kye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kye(n){var e=Hye(n,"string");return typeof e=="symbol"?e:e+""}function Hye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const $C={rowEven:"ht__row_even",rowOdd:"ht__row_odd"};let v5=!1;class Dye extends Mb{constructor(e){super("TR",e),Oye(this,"orderView",void 0),this.orderView=new p5(e,t=>this.nodesPool.obtain(t),this.nodeType)}getRenderedNode(e){return this.orderView.getNode(e)}render(){const{rowsToRender:e}=this.table;!v5&&e>1e3&&(v5=!0,Vt(Ft`Performance tip: Handsontable rendered more than 1000 visible rows.\x20
        Consider limiting the number of rendered rows by specifying the table height and/or\x20
        turning off the "renderAllRows" option.`)),this.table.isAriaEnabled()&&$e(this.rootNode,[Nj()]),this.orderView.setSize(e).setOffset(this.table.renderedRowToSource(0)).start();for(let s=0;s<e;s++){this.orderView.render();const r=this.orderView.getCurrentNode(),o=this.table.renderedRowToSource(s);if(this.table.isAriaEnabled()){var t,i;$e(r,[ZM(),Bj(o+((t=(i=this.table.rowUtils)===null||i===void 0||(i=i.dataAccessObject)===null||i===void 0?void 0:i.columnHeaders.length)!==null&&t!==void 0?t:0)+1)])}Ue(r,[$C.rowEven,$C.rowOdd]),(o+1)%2===0?ae(r,$C.rowEven):ae(r,$C.rowOdd)}this.orderView.end()}}function y5(n,e,t){return(e=Nye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Nye(n){var e=Lye(n,"string");return typeof e=="symbol"?e:e+""}function Lye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class $ye extends Mb{constructor(){super("TD"),y5(this,"orderViews",new WeakMap),y5(this,"sourceRowIndex",0)}obtainOrderView(e){let t;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new m5(e,i=>this.nodesPool.obtain(this.sourceRowIndex,i),this.nodeType),this.orderViews.set(e,t)),t}render(){const{rowsToRender:e,columnsToRender:t,rows:i,rowHeaders:s}=this.table;for(let a=0;a<e;a++){const l=this.table.renderedRowToSource(a),c=i.getRenderedNode(a);this.sourceRowIndex=l;const h=this.obtainOrderView(c),u=s.obtainOrderView(c);h.prependView(u).setSize(t).setOffset(this.table.renderedColumnToSource(0)).start();for(let d=0;d<t;d++){h.render();const f=h.getCurrentNode(),g=this.table.renderedColumnToSource(d);if(Fe(f,"hide")||(f.className=""),f.removeAttribute("style"),f.removeAttribute("dir"),Lu(f,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.cellRenderer(l,g,f),this.table.isAriaEnabled()){var r,o;$e(f,[...f.hasAttribute("role")?[]:[yme()],Zf(-1),JM(g+((r=(o=this.table.rowUtils)===null||o===void 0||(o=o.dataAccessObject)===null||o===void 0?void 0:o.rowHeaders.length)!==null&&r!==void 0?r:0)+1)])}}h.end()}}}function di(n,e,t){return(e=Fye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fye(n){var e=Bye(n,"string");return typeof e=="symbol"?e:e+""}function Bye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Vye{constructor(e){let{cellRenderer:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};di(this,"rootNode",void 0),di(this,"rootDocument",void 0),di(this,"rowHeaders",null),di(this,"columnHeaders",null),di(this,"colGroup",null),di(this,"rows",null),di(this,"cells",null),di(this,"rowFilter",null),di(this,"columnFilter",null),di(this,"rowUtils",null),di(this,"columnUtils",null),di(this,"rowsToRender",0),di(this,"columnsToRender",0),di(this,"rowHeaderFunctions",[]),di(this,"rowHeadersCount",0),di(this,"columnHeaderFunctions",[]),di(this,"columnHeadersCount",0),di(this,"cellRenderer",void 0),di(this,"activeOverlayName",void 0),this.rootNode=e,this.rootDocument=this.rootNode.ownerDocument,this.cellRenderer=t}setActiveOverlayName(e){this.activeOverlayName=e}setAxisUtils(e,t){this.rowUtils=e,this.columnUtils=t}setViewportSize(e,t){this.rowsToRender=e,this.columnsToRender=t}setFilters(e,t){this.rowFilter=e,this.columnFilter=t}setHeaderContentRenderers(e,t){this.rowHeaderFunctions=e,this.rowHeadersCount=e.length,this.columnHeaderFunctions=t,this.columnHeadersCount=t.length}setRenderers(){let{rowHeaders:e,columnHeaders:t,colGroup:i,rows:s,cells:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.setTable(this),t.setTable(this),i.setTable(this),s.setTable(this),r.setTable(this),this.rowHeaders=e,this.columnHeaders=t,this.colGroup=i,this.rows=s,this.cells=r}renderedRowToSource(e){return this.rowFilter.renderedToSource(e)}renderedColumnToSource(e){return this.columnFilter.renderedToSource(e)}isAriaEnabled(){return this.rowUtils.wtSettings.getSetting("ariaTags")}render(){this.colGroup.adjust(),this.columnHeaders.adjust(),this.rows.adjust(),this.rowHeaders.adjust(),this.columnHeaders.render(),this.rows.render(),this.rowHeaders.render(),this.cells.render(),this.columnUtils.calculateWidths(),this.colGroup.render();const{rowsToRender:e,rows:t}=this;for(let i=0;i<e;i++){const s=t.getRenderedNode(i);if(s.firstChild){const r=this.renderedRowToSource(i),o=this.rowUtils.getHeightByOverlayName(r,this.activeOverlayName);o?s.firstChild.style.height=`${o-1}px`:s.firstChild.style.height=""}}}}class Wye{constructor(){let{TABLE:e,THEAD:t,COLGROUP:i,TBODY:s,rowUtils:r,columnUtils:o,cellRenderer:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.renderer=new Vye(e,{cellRenderer:a}),this.renderer.setRenderers({rowHeaders:new Aye,columnHeaders:new Pye(t),colGroup:new Iye(i),rows:new Dye(s),cells:new $ye}),this.renderer.setAxisUtils(r,o)}setActiveOverlayName(e){return this.renderer.setActiveOverlayName(e),this}setFilters(e,t){return this.renderer.setFilters(e,t),this}setViewportSize(e,t){return this.renderer.setViewportSize(e,t),this}setHeaderContentRenderers(e,t){return this.renderer.setHeaderContentRenderers(e,t),this}adjust(){this.renderer.adjust()}render(){this.renderer.render()}}function Ab(n,e,t){jye(n,e),e.set(n,t)}function jye(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function FC(n,e,t){return(e=zye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zye(n){var e=Uye(n,"string");return typeof e=="symbol"?e:e+""}function Uye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Qi(n,e){return n.get(C5(n,e))}function Pb(n,e,t){return n.set(C5(n,e),t),t}function C5(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var BC=new WeakMap,cg=new WeakMap,Ib=new WeakMap,VC=new WeakMap,Yu=new WeakMap;class Yye{constructor(e){let{totalColumns:t,stretchMode:i,stretchingColumnWidthFn:s,columnWidthFn:r}=e;FC(this,"stretchAllRatio",0),FC(this,"stretchLastWidth",0),FC(this,"stretchAllColumnsWidth",[]),Ab(this,BC,0),FC(this,"needVerifyLastColumnWidth",!0),Ab(this,cg,()=>0),Ab(this,Ib,o=>o),Ab(this,VC,o=>o),Ab(this,Yu,()=>"none"),Pb(cg,this,t),Pb(Yu,this,i),Pb(Ib,this,s??Qi(Ib,this)),Pb(VC,this,r??Qi(VC,this))}refreshStretching(e){if(Qi(Yu,this).call(this)==="none")return;this.stretchAllRatio=0,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0,this.stretchLastWidth=0,Pb(BC,this,e);let t=0;for(let s=0;s<Qi(cg,this).call(this);s++){const r=this._getColumnWidth(s),o=Qi(Ib,this).call(this,void 0,s);typeof o=="number"?e-=o:t+=r}const i=e-t;if(Qi(Yu,this).call(this)==="all"&&i>0)this.stretchAllRatio=e/t,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if(Qi(Yu,this).call(this)==="last"&&e!==1/0){const s=this._getColumnWidth(Qi(cg,this).call(this)-1),r=i+s;this.stretchLastWidth=r>=0?r:s}}getStretchedColumnWidth(e,t){let i=null;return Qi(Yu,this).call(this)==="all"&&this.stretchAllRatio!==0?i=this._getStretchedAllColumnWidth(e,t):Qi(Yu,this).call(this)==="last"&&this.stretchLastWidth!==0&&(i=this._getStretchedLastColumnWidth(e)),i}_getStretchedAllColumnWidth(e,t){let i=0;if(!this.stretchAllColumnsWidth[e]){const s=Math.round(t*this.stretchAllRatio),r=Qi(Ib,this).call(this,s,e);r===void 0?this.stretchAllColumnsWidth[e]=s:this.stretchAllColumnsWidth[e]=isNaN(r)?this._getColumnWidth(e):r}if(this.stretchAllColumnsWidth.length===Qi(cg,this).call(this)&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(let s=0;s<this.stretchAllColumnsWidth.length;s++)i+=this.stretchAllColumnsWidth[s];i!==Qi(BC,this)&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=Qi(BC,this)-i)}return this.stretchAllColumnsWidth[e]}_getStretchedLastColumnWidth(e){return e===Qi(cg,this).call(this)-1?this.stretchLastWidth:null}_getColumnWidth(e){let t=Qi(VC,this).call(this,e);return isNaN(t)&&(t=kC),t}}function WC(n,e,t){return(e=Gye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gye(n){var e=Kye(n,"string");return typeof e=="symbol"?e:e+""}function Kye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class qye{constructor(e,t){WC(this,"dataAccessObject",void 0),WC(this,"wtSettings",void 0),WC(this,"headerWidths",new Map),WC(this,"stretching",void 0),this.dataAccessObject=e,this.wtSettings=t,this.stretching=new Yye({totalColumns:()=>this.wtSettings.getSetting("totalColumns"),stretchMode:()=>this.wtSettings.getSetting("stretchH"),stretchingColumnWidthFn:(i,s)=>this.wtSettings.getSetting("onBeforeStretchingColumnWidth",i,s),columnWidthFn:i=>this.dataAccessObject.wtTable.getColumnWidth(i)})}getWidth(e){return this.wtSettings.getSetting("columnWidth",e)||this.wtSettings.getSetting("defaultColumnWidth")}getStretchedColumnWidth(e){let t=this.getWidth(e);const i=this.stretching.getStretchedColumnWidth(e,t);return i&&(t=i),t}getHeaderHeight(e){let t=this.wtSettings.getSetting("defaultRowHeight");const i=this.dataAccessObject.wtViewport.oversizedColumnHeaders[e];return i!==void 0&&(t=t?Math.max(t,i):i),t}getHeaderWidth(e){return this.headerWidths.get(this.dataAccessObject.wtTable.columnFilter.sourceToRendered(e))}refreshStretching(){const{wtTable:e,wtViewport:t,cloneSource:i}=this.dataAccessObject,s=i?i.wtTable.holder:e.holder,r=s.offsetHeight<s.scrollHeight?ui():0;this.stretching.refreshStretching(t.getViewportWidth()-r)}calculateWidths(){const{wtSettings:e}=this;let t=e.getSetting("rowHeaderWidth");if(this.refreshStretching(),t=e.getSetting("onModifyRowHeaderWidth",t),t!=null){const i=e.getSetting("rowHeaders").length,s=e.getSetting("defaultColumnWidth");for(let r=0;r<i;r++){let o=Array.isArray(t)?t[r]:t;o=o??s,this.headerWidths.set(r,o)}}}}function S5(n,e,t){return(e=Xye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xye(n){var e=Qye(n,"string");return typeof e=="symbol"?e:e+""}function Qye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Zye{constructor(e,t){S5(this,"dataAccessObject",void 0),S5(this,"wtSettings",void 0),this.dataAccessObject=e,this.wtSettings=t}getHeight(e){let t=this.wtSettings.getSetting("rowHeight",e);const i=this.dataAccessObject.wtViewport.oversizedRows[e];return i!==void 0&&(t=t===void 0?i:Math.max(t,i)),t}getHeightByOverlayName(e,t){let i=this.wtSettings.getSetting("rowHeightByOverlayName",e,t);const s=this.dataAccessObject.wtViewport.oversizedRows[e];return s!==void 0&&(i=i===void 0?s:Math.max(i,s)),i}}function va(n,e,t){return(e=Jye(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jye(n){var e=e0e(n,"string");return typeof e=="symbol"?e:e+""}function e0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let hg=class{constructor(e,t,i,s,r){va(this,"wtSettings",null),va(this,"domBindings",void 0),va(this,"TBODY",null),va(this,"THEAD",null),va(this,"COLGROUP",null),va(this,"hasTableHeight",!0),va(this,"hasTableWidth",!0),va(this,"isTableVisible",!1),va(this,"tableOffset",0),va(this,"holderOffset",0),this.domBindings=i,this.isMaster=r==="master",this.name=r,this.dataAccessObject=e,this.facadeGetter=t,this.wtSettings=s,this.instance=this.dataAccessObject.wot,this.wot=this.dataAccessObject.wot,this.TABLE=i.rootTable,tA(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.isMaster&&this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;const o=this.wtSettings.getSettingPure("rowHeaderWidth");this.wtSettings.update("rowHeaderWidth",()=>this._modifyRowHeaderWidth(o)),this.rowUtils=new Zye(this.dataAccessObject,this.wtSettings),this.columnUtils=new qye(this.dataAccessObject,this.wtSettings),this.tableRenderer=new Wye({TABLE:this.TABLE,THEAD:this.THEAD,COLGROUP:this.COLGROUP,TBODY:this.TBODY,rowUtils:this.rowUtils,columnUtils:this.columnUtils,cellRenderer:this.wtSettings.getSettingPure("cellRenderer")})}is(e){return this.name===e}fixTableDomTree(){const e=this.domBindings.rootDocument;this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=e.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=e.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=e.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD))}createSpreader(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Fe(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.className="wtSpreader",t&&t.insertBefore(i,e),i.appendChild(e)),i.style.position="relative",this.wtSettings.getSetting("ariaTags")&&$e(i,[ga()]),i}createHider(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Fe(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.className="wtHider",t&&t.insertBefore(i,e),i.appendChild(e)),this.wtSettings.getSetting("ariaTags")&&$e(i,[ga()]),i}createHolder(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Fe(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.style.position="relative",i.className="wtHolder",t&&t.insertBefore(i,e),this.isMaster&&(i.parentNode.className+="ht_master handsontable",i.parentNode.setAttribute("dir",this.wtSettings.getSettingPure("rtlMode")?"rtl":"ltr"),this.wtSettings.getSetting("ariaTags")&&$e(i.parentNode,[ga()])),i.appendChild(e)),this.wtSettings.getSetting("ariaTags")&&$e(i,[ga()]),i}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{wtSettings:t}=this,{wtOverlays:i,wtViewport:s}=this.dataAccessObject,r=t.getSetting("totalRows"),o=t.getSetting("totalColumns"),a=t.getSetting("rowHeaders"),l=a.length,c=t.getSetting("columnHeaders"),h=c.length;let u=e;if(this.isMaster&&(i.beforeDraw(),this.holderOffset=hi(this.holder),u=s.createCalculators(u),l&&!t.getSetting("fixedColumnsStart"))){const f=i.inlineStartOverlay.getScrollPosition(),g=this.correctHeaderWidth;this.correctHeaderWidth=f!==0,g!==this.correctHeaderWidth&&(u=!1)}if(u)this.isMaster&&i.refresh(!0);else{this.isMaster?this.tableOffset=hi(this.TABLE):this.tableOffset=this.dataAccessObject.parentTableOffset;const f=r>0?this.getFirstRenderedRow():0,g=o>0?this.getFirstRenderedColumn():0;this.rowFilter=new dye(f,r,h),this.columnFilter=new cye(g,o,l);let p=!0;if(this.isMaster){this.alignOverlaysWithTrimmingContainer();const m={};this.wtSettings.getSetting("beforeDraw",!0,m),p=m.skipRender!==!0}if(p){this.tableRenderer.setHeaderContentRenderers(a,c),(this.is(ya)||this.is(eh))&&this.tableRenderer.setHeaderContentRenderers(a,[]),this.resetOversizedRows(),this.tableRenderer.setActiveOverlayName(this.name).setViewportSize(this.getRenderedRowsCount(),this.getRenderedColumnsCount()).setFilters(this.rowFilter,this.columnFilter).render();let m;if(this.isMaster&&(m=this.dataAccessObject.workspaceWidth,s.containerWidth=null,this.markOversizedColumnHeaders()),this.adjustColumnHeaderHeights(),(this.isMaster||this.is(ya))&&this.markOversizedRows(),this.isMaster){this.wtSettings.getSetting("externalRowCalculator")||s.createVisibleCalculators(),i.refresh(!1),i.applyToDOM();const w=sn(this.hider),y=sn(this.TABLE);w!==0&&y!==w&&(this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),m!==s.getWorkspaceWidth()&&(s.containerWidth=null,this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),this.wtSettings.getSetting("onDraw",!0)}else this.is(ya)&&this.dataAccessObject.cloneSource.wtOverlays.adjustElementsSize()}}let d=!1;return this.isMaster&&(d=i.topOverlay.resetFixedPosition(),i.bottomOverlay.clone&&(d=i.bottomOverlay.resetFixedPosition()||d),d=i.inlineStartOverlay.resetFixedPosition()||d,i.topInlineStartCornerOverlay&&i.topInlineStartCornerOverlay.resetFixedPosition(),i.bottomInlineStartCornerOverlay&&i.bottomInlineStartCornerOverlay.clone&&i.bottomInlineStartCornerOverlay.resetFixedPosition()),d?(i.refreshAll(),i.adjustElementsSize()):this.dataAccessObject.selectionManager.setActiveOverlay(this.facadeGetter()).render(u),this.isMaster&&i.afterDraw(),this.dataAccessObject.drawn=!0,this}markIfOversizedColumnHeader(e){const t=this.columnFilter.renderedToSource(e);let i=this.wtSettings.getSetting("columnHeaders").length;const s=this.wtSettings.getSetting("defaultRowHeight");let r,o,a;const l=this.wtSettings.getSetting("columnHeaderHeight")||[];for(;i;)i-=1,r=this.getColumnHeaderHeight(i),o=this.getColumnHeader(t,i),o&&(a=Vu(o),(!r&&s<a||r<a)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=a),Array.isArray(l)?l[i]!==null&&l[i]!==void 0&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l[i]):isNaN(l)||(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l),this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]<(l[i]||l)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l[i]||l))}adjustColumnHeaderHeights(){const{wtSettings:e}=this,t=this.THEAD.childNodes,i=this.dataAccessObject.wtViewport.oversizedColumnHeaders,s=e.getSetting("columnHeaders");for(let r=0,o=s.length;r<o;r++)if(i[r]){if(!t[r]||t[r].childNodes.length===0)return;t[r].childNodes[0].style.height=`${i[r]}px`}}resetOversizedRows(){const{wtSettings:e}=this,{wtViewport:t}=this.dataAccessObject;if(!(!this.isMaster&&!this.is(ya))&&!e.getSetting("externalRowCalculator")){const i=this.getRenderedRowsCount();for(let s=0;s<i;s++){const r=this.rowFilter.renderedToSource(s);t.oversizedRows&&t.oversizedRows[r]&&(t.oversizedRows[r]=void 0)}}}getCell(e){let t=e.row,i=e.col;const s=this.wtSettings.getSetting("onModifyGetCellCoords",t,i);if(s&&Array.isArray(s)&&([t,i]=s),this.isRowBeforeRenderedRows(t))return-1;if(this.isRowAfterRenderedRows(t))return-2;if(this.isColumnBeforeRenderedColumns(i))return-3;if(this.isColumnAfterRenderedColumns(i))return-4;const r=this.getRow(t);if(!r&&t>=0)throw new Error("TR was expected to be rendered but is not");const o=r.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(i)];if(!o&&i>=0)throw new Error("TD or TH was expected to be rendered but is not");return o}getRow(e){let t=null,i=null;if(e<0){var s;t=(s=this.rowFilter)===null||s===void 0?void 0:s.sourceRowToVisibleColHeadedRow(e),i=this.THEAD}else{var r;t=(r=this.rowFilter)===null||r===void 0?void 0:r.sourceToRendered(e),i=this.TBODY}return t!==void 0&&i!==void 0?i.childNodes.length<t+1?!1:i.childNodes[t]:!1}getColumnHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.THEAD.childNodes[t];return i==null?void 0:i.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]}getColumnHeaders(e){const t=[],i=this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e);return this.THEAD.childNodes.forEach(s=>{const r=s.childNodes[i];r&&t.push(r)}),t}getRowHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.wtSettings.getSetting("rowHeaders").length;if(t>=i)return;const s=this.rowFilter.sourceToRendered(e),r=s<0?this.rowFilter.sourceRowToVisibleColHeadedRow(e):s,a=(s<0?this.THEAD:this.TBODY).childNodes[r];return a==null?void 0:a.childNodes[t]}getRowHeaders(e){const t=[],i=this.wtSettings.getSetting("rowHeaders").length;for(let s=0;s<i;s++){const r=this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)],o=r==null?void 0:r.childNodes[s];o&&t.push(o)}return t}getCoords(e){let t=e;if(t.nodeName!=="TD"&&t.nodeName!=="TH"&&(t=Uc(t,["TD","TH"])),t===null)return null;const i=t.parentNode,s=i.parentNode;let r=Gj(i),o=t.cellIndex;return Gc(qu,t,this.wtRootElement)||Gc(Gu,t,this.wtRootElement)?s.nodeName==="THEAD"&&(r-=s.childNodes.length):Gc(eh,t,this.wtRootElement)||Gc(ya,t,this.wtRootElement)?r=this.wtSettings.getSetting("totalRows")-s.childNodes.length+r:s===this.THEAD?r=this.rowFilter.visibleColHeadedRowToSourceRow(r):r=this.rowFilter.renderedToSource(r),Gc(qu,t,this.wtRootElement)||Gc(Ku,t,this.wtRootElement)||Gc(eh,t,this.wtRootElement)?o=this.columnFilter.offsettedTH(o):o=this.columnFilter.visibleRowHeadedColumnToSourceColumn(o),this.wot.createCellCoords(r,o)}markOversizedRows(){if(this.wtSettings.getSetting("externalRowCalculator"))return;let e=this.TBODY.childNodes.length;const t=e*this.wtSettings.getSetting("defaultRowHeight"),i=Vu(this.TBODY)-1;let s,r,o,a,l;if(!(t===i&&!this.wtSettings.getSetting("fixedRowsBottom")))for(;e;)e-=1,o=this.rowFilter.renderedToSource(e),s=this.getRowHeight(o),a=this.getTrForRow(o),l=a.querySelector("th"),l?r=Vu(l):r=Vu(a)-1,(!s&&this.wtSettings.getSetting("defaultRowHeight")<r||s<r)&&(r+=1,this.dataAccessObject.wtViewport.oversizedRows[o]=r)}getTrForRow(e){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)]}isColumnHeaderRendered(e){if(e>=0)return!1;const i=this.wtSettings.getSetting("rowHeaders").length;return Math.abs(e)<=i}isRowHeaderRendered(e){if(e>=0)return!1;const i=this.wtSettings.getSetting("columnHeaders").length;return Math.abs(e)<=i}isRowBeforeRenderedRows(e){const t=this.getFirstRenderedRow();return e<0&&t<=0?!this.isRowHeaderRendered(e):e<t}isRowAfterRenderedRows(e){return e>this.getLastRenderedRow()}isColumnBeforeRenderedColumns(e){const t=this.getFirstRenderedColumn();return e<0&&t<=0?!this.isColumnHeaderRendered(e):e<t}isColumnAfterRenderedColumns(e){return this.columnFilter&&e>this.getLastRenderedColumn()}isColumnAfterViewport(e){return this.columnFilter&&e>this.getLastVisibleColumn()}isRowAfterViewport(e){return this.rowFilter&&e>this.getLastVisibleRow()}isColumnBeforeViewport(e){return this.columnFilter&&this.columnFilter.sourceToRendered(e)<0&&e>=0}isLastRowFullyVisible(){return this.getLastVisibleRow()===this.getLastRenderedRow()}isLastColumnFullyVisible(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()}allRowsInViewport(){return this.wtSettings.getSetting("totalRows")===this.getVisibleRowsCount()}allColumnsInViewport(){return this.wtSettings.getSetting("totalColumns")===this.getVisibleColumnsCount()}getRowHeight(e){return this.rowUtils.getHeight(e)}getColumnHeaderHeight(e){return this.columnUtils.getHeaderHeight(e)}getColumnWidth(e){return this.columnUtils.getWidth(e)}getStretchedColumnWidth(e){return this.columnUtils.getStretchedColumnWidth(e)}hasDefinedSize(){return this.hasTableHeight&&this.hasTableWidth}getWidth(){return sn(this.TABLE)}getHeight(){return jn(this.TABLE)}getTotalWidth(){const e=sn(this.hider);return e!==0?e:this.getWidth()}getTotalHeight(){const e=jn(this.hider);return e!==0?e:this.getHeight()}isVisible(){return Fu(this.TABLE)}_modifyRowHeaderWidth(e){let t=rn(e)?e():null;return Array.isArray(t)?(t=[...t],t[t.length-1]=this._correctRowHeaderWidth(t[t.length-1])):t=this._correctRowHeaderWidth(t),t}_correctRowHeaderWidth(e){let t=e;return typeof e!="number"&&(t=this.wtSettings.getSetting("defaultColumnWidth")),this.correctHeaderWidth&&(t+=1),t}};const t0e="stickyRowsBottom",JA={getFirstRenderedRow(){const n=this.wtSettings.getSetting("totalRows"),e=this.wtSettings.getSetting("fixedRowsBottom"),t=n-e;return n===0||e===0?-1:t<0?0:t},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.wtSettings.getSetting("totalRows")-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const n=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsBottom"),n)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return 0}};ma(JA,"MIXIN_NAME",t0e,{writable:!1,enumerable:!1});const n0e="stickyColumnsStart",jC={getFirstRenderedColumn(){return this.wtSettings.getSetting("totalColumns")===0?-1:0},getFirstVisibleColumn(){return this.getFirstRenderedColumn()},getFirstPartiallyVisibleColumn(){return this.getFirstRenderedColumn()},getLastRenderedColumn(){return this.getRenderedColumnsCount()-1},getLastVisibleColumn(){return this.getLastRenderedColumn()},getLastPartiallyVisibleColumn(){return this.getLastRenderedColumn()},getRenderedColumnsCount(){const n=this.wtSettings.getSetting("totalColumns");return Math.min(this.wtSettings.getSetting("fixedColumnsStart"),n)},getVisibleColumnsCount(){return this.getRenderedColumnsCount()},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};ma(jC,"MIXIN_NAME",n0e,{writable:!1,enumerable:!1});class eP extends hg{constructor(e,t,i,s){super(e,t,i,s,eh)}}Bt(eP,JA),Bt(eP,jC);const Gu="top",ya="bottom",Ku="inline_start",qu="top_inline_start_corner",eh="bottom_inline_start_corner",_5=[Gu,ya,Ku,qu,eh],i0e=new Map([[Gu,`ht_clone_${Gu}`],[ya,`ht_clone_${ya}`],[Ku,`ht_clone_${Ku} ht_clone_left`],[qu,`ht_clone_${qu} ht_clone_top_left_corner`],[eh,`ht_clone_${eh} ht_clone_bottom_left_corner`]]);function s0e(n,e){r0e(n,e),e.add(n)}function r0e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o0e(n,e,t){return(e=a0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a0e(n){var e=l0e(n,"string");return typeof e=="symbol"?e:e+""}function l0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zC(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ob=new WeakSet;class c0e{constructor(e){s0e(this,Ob),o0e(this,"dataAccessObject",void 0),this.dataAccessObject=e}scrollViewport(e,t,i,s,r){const o=this.scrollViewportHorizontally(e.col,i,r),a=this.scrollViewportVertically(e.row,t,s);return o||a}scrollViewportHorizontally(e,t,i){const{drawn:s,totalColumns:r}=this.dataAccessObject;if(!s||!Number.isInteger(e)||e<0||e>r)return!1;const o=t===void 0&&i===void 0,{fixedColumnsStart:a,inlineStartOverlay:l}=this.dataAccessObject;if(o&&e<a||(e=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollHorizontally",e),!Number.isInteger(e)||e<0||e>r))return!1;const c=this.getFirstVisibleColumn(),h=this.getLastVisibleColumn();let u=!1;return(o&&(e<c||e>h)||!o)&&(u=l.scrollTo(e,o?e>=this.getLastPartiallyVisibleColumn():t)),u}scrollViewportVertically(e,t,i){const{drawn:s,totalRows:r}=this.dataAccessObject;if(!s||!Number.isInteger(e)||e<0||e>r)return!1;const o=t===void 0&&i===void 0,{fixedRowsBottom:a,fixedRowsTop:l,topOverlay:c}=this.dataAccessObject;if(o&&(e<l||e>r-a-1)||(e=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollVertically",e),!Number.isInteger(e)||e<0||e>r))return!1;const h=this.getFirstVisibleRow(),u=this.getLastVisibleRow();let d=!1;return(o&&(e<h||e>u)||!o)&&(d=c.scrollTo(e,o?e>=this.getLastPartiallyVisibleRow():i)),d}getFirstVisibleRow(){return this.dataAccessObject.wtTable.getFirstVisibleRow()}getLastVisibleRow(){return zC(Ob,this,x5).call(this,this.dataAccessObject.wtTable.getLastVisibleRow())}getFirstPartiallyVisibleRow(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleRow()}getLastPartiallyVisibleRow(){return zC(Ob,this,x5).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleRow())}getFirstVisibleColumn(){return this.dataAccessObject.wtTable.getFirstVisibleColumn()}getLastVisibleColumn(){return zC(Ob,this,R5).call(this,this.dataAccessObject.wtTable.getLastVisibleColumn())}getFirstPartiallyVisibleColumn(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleColumn()}getLastPartiallyVisibleColumn(){return zC(Ob,this,R5).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleColumn())}}function R5(n){const{wtSettings:e,inlineStartOverlay:t,wtTable:i,wtViewport:s,totalColumns:r,rootWindow:o}=this.dataAccessObject;if(t.mainTableScrollableElement===o){const a=e.getSetting("rtlMode");let l=null;if(a){const h=i.TABLE.getBoundingClientRect(),d=this.dataAccessObject.rootWindow.document.documentElement.offsetWidth;l=Math.abs(h.right-d)}else l=hi(i.wtRootElement).left;const c=Math.abs(iA(o,o));if(l>c){const h=sA(o);let u=s.getRowHeaderWidth();for(let d=1;d<=r;d++)if(u+=t.sumCellSizes(d-1,d),l+u-c>=h){n=d-2;break}}}return n}function x5(n){const{topOverlay:e,wtTable:t,wtViewport:i,totalRows:s,rootWindow:r}=this.dataAccessObject;if(e.mainTableScrollableElement===r){const o=hi(t.wtRootElement),a=hC(r,r);if(o.top>a){const l=Vu(r);let c=i.getColumnHeaderHeight();for(let h=1;h<=s;h++)if(c+=e.sumCellSizes(h-1,h),o.top+c-a>=l){n=h-2;break}}}return n}function xo(n,e,t){return(e=h0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function h0e(n){var e=u0e(n,"string");return typeof e=="symbol"?e:e+""}function u0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class tP{get eventManager(){return new kr(this)}constructor(e,t){xo(this,"wtTable",void 0),xo(this,"wtScroll",void 0),xo(this,"wtViewport",void 0),xo(this,"wtOverlays",void 0),xo(this,"selectionManager",void 0),xo(this,"wtEvent",void 0),xo(this,"guid",`wt_${KM()}`),xo(this,"drawInterrupted",!1),xo(this,"drawn",!1),xo(this,"domBindings",void 0),xo(this,"wtSettings",void 0),this.domBindings={rootTable:e,rootDocument:e.ownerDocument,rootWindow:e.ownerDocument.defaultView},this.wtSettings=t,this.wtScroll=new c0e(this.createScrollDao())}findOriginalHeaders(){const e=[];if(this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(let t=0,i=this.wtTable.THEAD.childNodes[0].childNodes.length;t<i;t++)e.push(this.wtTable.THEAD.childNodes[0].childNodes[t].innerHTML);this.wtSettings.getSetting("columnHeaders").length||this.wtSettings.update("columnHeaders",[function(t,i){Kc(i,e[t])}])}}createCellCoords(e,t){return new zu(e,t,this.wtSettings.getSetting("rtlMode"))}createCellRange(e,t,i){return new xb(e,t,i,this.wtSettings.getSetting("rtlMode"))}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.drawInterrupted=!1,this.wtTable.isVisible()?this.wtTable.draw(e):this.drawInterrupted=!0,this}getCell(e){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1))return this.wtTable.getCell(e);const i=this.wtSettings.getSetting("totalRows"),s=this.wtSettings.getSetting("fixedRowsTop"),r=this.wtSettings.getSetting("fixedRowsBottom"),o=this.wtSettings.getSetting("fixedColumnsStart");if(e.row<s&&e.col<o)return this.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.getCell(e);if(e.row<s)return this.wtOverlays.topOverlay.clone.wtTable.getCell(e);if(e.col<o&&e.row>=i-r){if(this.wtOverlays.bottomInlineStartCornerOverlay&&this.wtOverlays.bottomInlineStartCornerOverlay.clone)return this.wtOverlays.bottomInlineStartCornerOverlay.clone.wtTable.getCell(e)}else{if(e.col<o)return this.wtOverlays.inlineStartOverlay.clone.wtTable.getCell(e);if(e.row<i&&e.row>=i-r&&this.wtOverlays.bottomOverlay&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(e)}return this.wtTable.getCell(e)}scrollViewport(e,t,i,s,r){return e.col<0||e.row<0?!1:this.wtScroll.scrollViewport(e,t,i,s,r)}scrollViewportHorizontally(e,t,i){return e<0?!1:this.wtScroll.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return e<0?!1:this.wtScroll.scrollViewportVertically(e,t,i)}getViewport(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]}destroy(){this.wtOverlays.destroy(),this.wtEvent.destroy()}createScrollDao(){const e=this;return{get drawn(){return e.drawn},get topOverlay(){return e.wtOverlays.topOverlay},get inlineStartOverlay(){return e.wtOverlays.inlineStartOverlay},get wtTable(){return e.wtTable},get wtViewport(){return e.wtViewport},get wtSettings(){return e.wtSettings},get rootWindow(){return e.domBindings.rootWindow},get totalRows(){return e.wtSettings.getSetting("totalRows")},get totalColumns(){return e.wtSettings.getSetting("totalColumns")},get fixedRowsTop(){return e.wtSettings.getSetting("fixedRowsTop")},get fixedRowsBottom(){return e.wtSettings.getSetting("fixedRowsBottom")},get fixedColumnsStart(){return e.wtSettings.getSetting("fixedColumnsStart")}}}getTableDao(){const e=this;return{get wot(){return e},get parentTableOffset(){return e.cloneSource.wtTable.tableOffset},get cloneSource(){return e.cloneSource},get workspaceWidth(){return e.wtViewport.getWorkspaceWidth()},get wtViewport(){return e.wtViewport},get wtOverlays(){return e.wtOverlays},get selectionManager(){return e.selectionManager},get drawn(){return e.drawn},set drawn(t){e.drawn=t},get wtTable(){return e.wtTable},get startColumnRendered(){return e.wtViewport.columnsRenderCalculator.startColumn},get startColumnVisible(){return e.wtViewport.columnsVisibleCalculator.startColumn},get startColumnPartiallyVisible(){return e.wtViewport.columnsPartiallyVisibleCalculator.startColumn},get endColumnRendered(){return e.wtViewport.columnsRenderCalculator.endColumn},get endColumnVisible(){return e.wtViewport.columnsVisibleCalculator.endColumn},get endColumnPartiallyVisible(){return e.wtViewport.columnsPartiallyVisibleCalculator.endColumn},get countColumnsRendered(){return e.wtViewport.columnsRenderCalculator.count},get countColumnsVisible(){return e.wtViewport.columnsVisibleCalculator.count},get startRowRendered(){return e.wtViewport.rowsRenderCalculator.startRow},get startRowVisible(){return e.wtViewport.rowsVisibleCalculator.startRow},get startRowPartiallyVisible(){return e.wtViewport.rowsPartiallyVisibleCalculator.startRow},get endRowRendered(){return e.wtViewport.rowsRenderCalculator.endRow},get endRowVisible(){return e.wtViewport.rowsVisibleCalculator.endRow},get endRowPartiallyVisible(){return e.wtViewport.rowsPartiallyVisibleCalculator.endRow},get countRowsRendered(){return e.wtViewport.rowsRenderCalculator.count},get countRowsVisible(){return e.wtViewport.rowsVisibleCalculator.count},get columnHeaders(){return e.wtSettings.getSetting("columnHeaders")},get rowHeaders(){return e.wtSettings.getSetting("rowHeaders")}}}}function E5(n,e,t){return(e=d0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function d0e(n){var e=f0e(n,"string");return typeof e=="symbol"?e:e+""}function f0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class g0e extends tP{constructor(e,t,i){super(e,t),E5(this,"cloneSource",void 0),E5(this,"cloneOverlay",void 0);const s=this.wtSettings.getSetting("facade",this);this.cloneSource=i.source,this.cloneOverlay=i.overlay,this.wtTable=this.cloneOverlay.createTable(this.getTableDao(),s,this.domBindings,this.wtSettings),this.wtViewport=i.viewport,this.selectionManager=i.selectionManager,this.wtEvent=new f5(s,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager,i.event),this.findOriginalHeaders()}}function p0e(n,e,t){return(e=m0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function m0e(n){var e=b0e(n,"string");return typeof e=="symbol"?e:e+""}function b0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class kb{constructor(e,t,i,s,r){p0e(this,"wtSettings",null),ma(this,"wot",e,{writable:!1}),this.domBindings=r,this.facadeGetter=t,this.wtSettings=s;const{TABLE:o,hider:a,spreader:l,holder:c,wtRootElement:h}=this.wot.wtTable;this.instance=this.wot,this.type=i,this.mainTableScrollableElement=null,this.TABLE=o,this.hider=a,this.spreader=l,this.holder=c,this.wtRootElement=h,this.trimmingContainer=Bu(this.hider.parentNode.parentNode),this.needFullRender=this.shouldBeRendered(),this.clone=this.makeClone()}hasRenderingStateChanged(){return this.needFullRender!==this.shouldBeRendered()}updateStateOfRendering(e){e==="before"&&this.shouldBeRendered()?this.needFullRender=!0:e==="after"&&!this.shouldBeRendered()&&(this.needFullRender=!1)}shouldBeRendered(){return!0}updateTrimmingContainer(){this.trimmingContainer=Bu(this.hider.parentNode.parentNode)}updateMainScrollableElement(){const{wtTable:e}=this.wot,{rootWindow:t}=this.domBindings;t.getComputedStyle(e.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden"?this.mainTableScrollableElement=this.wot.wtTable.holder:this.mainTableScrollableElement=ab(e.TABLE)}getRelativeCellPosition(e,t,i){if(this.clone.wtTable.holder.contains(e)===!1){Vt(`The provided element is not a child of the ${this.type} overlay`);return}const s=this.mainTableScrollableElement===this.domBindings.rootWindow,r=i<this.wtSettings.getSetting("fixedColumnsStart"),o=t<this.wtSettings.getSetting("fixedRowsTop"),a=t>=this.wtSettings.getSetting("totalRows")-this.wtSettings.getSetting("fixedRowsBottom"),l=this.clone.wtTable.spreader,c={start:this.getRelativeStartPosition(l),top:l.offsetTop},h={start:this.getRelativeStartPosition(e),top:e.offsetTop};let u=null;return s?u=this.getRelativeCellPositionWithinWindow(o,r,h,c):u=this.getRelativeCellPositionWithinHolder(o,a,r,h,c),u}getRelativeStartPosition(e){return this.isRtl()?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:e.offsetLeft}getRelativeCellPositionWithinWindow(e,t,i,s){const r=this.wot.wtTable.wtRootElement.getBoundingClientRect();let o=0,a=0;if(!t)o=s.start;else{let l=r.left;this.isRtl()&&(l=this.domBindings.rootWindow.innerWidth-(r.left+r.width+ui())),o=l<=0?-1*l:0}return e?a=this.clone.wtTable.TABLE.getBoundingClientRect().top-r.top:a=s.top,{start:i.start+o,top:i.top+a}}getRelativeCellPositionWithinHolder(e,t,i,s,r){const o={horizontal:this.wot.wtOverlays.inlineStartOverlay.getScrollPosition(),vertical:this.wot.wtOverlays.topOverlay.getScrollPosition()};let a=0,l=0;if(i||(a=o.horizontal-r.start),t){const c=this.wot.wtTable.wtRootElement.getBoundingClientRect();l=this.clone.wtTable.TABLE.getBoundingClientRect().top*-1+c.top}else e||(l=o.vertical-r.top);return{start:s.start-a,top:s.top-l}}makeClone(){if(_5.indexOf(this.type)===-1)throw new Error(`Clone type "${this.type}" is not supported.`);const{wtTable:e,wtSettings:t}=this.wot,{rootDocument:i,rootWindow:s}=this.domBindings,r=i.createElement("div"),o=i.createElement("table"),a=e.wtRootElement.parentNode;r.className=`${i0e.get(this.type)} handsontable`,r.setAttribute("dir",this.isRtl()?"rtl":"ltr"),r.style.position="absolute",r.style.top=0,r.style.overflow="visible",this.isRtl()?r.style.right=0:r.style.left=0,t.getSetting("ariaTags")&&$e(r,[ga()]),o.className=e.TABLE.className,e.TABLE.getAttribute("role")&&o.setAttribute("role",e.TABLE.getAttribute("role")),r.appendChild(o),a.appendChild(r);const c=this.wtSettings.getSetting("preventOverflow");return c===!0||c==="horizontal"&&this.type===Gu||c==="vertical"&&this.type===Ku?this.mainTableScrollableElement=s:s.getComputedStyle(a).getPropertyValue("overflow")==="hidden"?this.mainTableScrollableElement=e.holder:this.mainTableScrollableElement=ab(e.TABLE),new g0e(o,this.wtSettings,{source:this.wot,overlay:this,viewport:this.wot.wtViewport,event:this.wot.wtEvent,selectionManager:this.wot.selectionManager})}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.needFullRender&&this.clone.draw(e)}reset(){const e=this.clone.wtTable.holder,t=this.clone.wtTable.hider,i=e.style,s=t.style,r=e.parentNode.style;[i,s,r].forEach(o=>{o.width="",o.height=""})}isRtl(){return this.wtSettings.getSetting("rtlMode")}destroy(){this.clone.eventManager.destroy()}}class w0e extends kb{constructor(e,t,i,s,r,o){super(e,t,eh,i,s),this.bottomOverlay=r,this.inlineStartOverlay=o}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new eP(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wot:e}=this;if(this.updateTrimmingContainer(),!e.wtTable.holder.parentNode)return!1;const t=this.clone.wtTable.holder.parentNode;if(t.style.top="",this.trimmingContainer===this.domBindings.rootWindow){const r=this.inlineStartOverlay.getOverlayOffset(),o=this.bottomOverlay.getOverlayOffset();t.style[this.isRtl()?"right":"left"]=`${r}px`,t.style.bottom=`${o}px`}else cb(t),this.repositionOverlay();let i=jn(this.clone.wtTable.TABLE);const s=sn(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(i=0),t.style.height=`${i}px`,t.style.width=`${s}px`,!1}repositionOverlay(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i}=this.domBindings,s=this.clone.wtTable.holder.parentNode;let r=0;t.hasVerticalScroll()||(r+=t.getWorkspaceHeight()-e.getTotalHeight()),t.hasVerticalScroll()&&t.hasHorizontalScroll()&&(r+=ui(i)),s.style.bottom=`${r}px`}}const v0e="calculatedColumns",UC={getFirstRenderedColumn(){const n=this.dataAccessObject.startColumnRendered;return n===null?-1:n},getFirstVisibleColumn(){const n=this.dataAccessObject.startColumnVisible;return n===null?-1:n},getFirstPartiallyVisibleColumn(){const n=this.dataAccessObject.startColumnPartiallyVisible;return n===null?-1:n},getLastRenderedColumn(){const n=this.dataAccessObject.endColumnRendered;return n===null?-1:n},getLastVisibleColumn(){const n=this.dataAccessObject.endColumnVisible;return n===null?-1:n},getLastPartiallyVisibleColumn(){const n=this.dataAccessObject.endColumnPartiallyVisible;return n===null?-1:n},getRenderedColumnsCount(){return this.dataAccessObject.countColumnsRendered},getVisibleColumnsCount(){return this.dataAccessObject.countColumnsVisible},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};ma(UC,"MIXIN_NAME",v0e,{writable:!1,enumerable:!1});class nP extends hg{constructor(e,t,i,s){super(e,t,i,s,ya)}}Bt(nP,JA),Bt(nP,UC);function y0e(n,e,t){return(e=C0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function C0e(n){var e=S0e(n,"string");return typeof e=="symbol"?e:e+""}function S0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class _0e extends kb{constructor(e,t,i,s){super(e,t,ya,i,s),y0e(this,"cachedFixedRowsBottom",-1),this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom")}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new nP(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const{rootWindow:e}=this.domBindings,t=this.clone.wtTable.holder.parentNode;t.style.top="";let i=0;const s=this.wtSettings.getSetting("preventOverflow");this.trimmingContainer===e&&(!s||s!=="vertical")?(i=this.getOverlayOffset(),t.style.bottom=`${i}px`):(i=this.getScrollPosition(),this.repositionOverlay());const r=this.adjustHeaderBordersPosition(i);return this.adjustElementsSize(),r}repositionOverlay(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i}=this.domBindings,s=this.clone.wtTable.holder.parentNode;let r=0;t.hasVerticalScroll()||(r+=t.getWorkspaceHeight()-e.getTotalHeight()),t.hasVerticalScroll()&&t.hasHorizontalScroll()&&(r+=ui(i)),s.style.bottom=`${r}px`}setScrollPosition(e){const{rootWindow:t}=this.domBindings;let i=!1;return this.mainTableScrollableElement===t?(t.scrollTo(cC(t),e),i=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(e,t){const{wtTable:i,wtSettings:s}=this.wot,r=s.getSetting("defaultRowHeight");let o=e,a=0;for(;o<t;){const l=i.getRowHeight(o);a+=l===void 0?r:l,o+=1}return a}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i,rootWindow:s}=this.domBindings,r=ui(i),a=this.clone.wtTable.holder.parentNode.style,l=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==s||l==="horizontal"){let h=t.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(h-=r),h=Math.min(h,e.wtRootElement.scrollWidth),a.width=`${h}px`}else a.width="";this.clone.wtTable.holder.style.width=a.width;let c=jn(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(c=0),a.height=`${c}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=e.parentNode.style.height}applyToDOM(){const e=this.wtSettings.getSetting("totalRows");if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number")this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style.top="0";else throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const e=this.isRtl()?"right":"left",{spreader:t}=this.clone.wtTable;typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number"?t.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:t.style[e]=""}scrollTo(e,t){let i=this.getTableParentOffset();const r=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder;let o=0;t&&r.offsetHeight!==r.clientHeight&&(o=ui(this.domBindings.rootDocument)),t?(i+=this.sumCellSizes(0,e+1),i-=this.wot.wtViewport.getViewportHeight(),i+=1):i+=this.sumCellSizes(this.wtSettings.getSetting("fixedRowsBottom"),e),i+=o,this.setScrollPosition(i)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return hC(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="vertical")){const s=this.wot.wtTable.getTotalHeight(),r=this.clone.wtTable.getTotalHeight(),o=s-r,a=this.domBindings.rootDocument.documentElement.clientHeight;i=Math.max(this.getTableParentOffset()-this.getScrollPosition()-a+s,0),i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){const t=this.wtSettings.getSetting("fixedRowsBottom"),i=this.cachedFixedRowsBottom!==t,s=this.wtSettings.getSetting("columnHeaders");let r=!1;if((i||t===0)&&s.length>0){const o=this.wot.wtTable.holder.parentNode,a=Fe(o,"innerBorderBottom");this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom"),e||this.wtSettings.getSetting("totalRows")===0?(ae(o,"innerBorderBottom"),r=!a):(Ue(o,"innerBorderBottom"),r=a)}return r}}const R0e="calculatedRows",iP={getFirstRenderedRow(){const n=this.dataAccessObject.startRowRendered;return n===null?-1:n},getFirstVisibleRow(){const n=this.dataAccessObject.startRowVisible;return n===null?-1:n},getFirstPartiallyVisibleRow(){const n=this.dataAccessObject.startRowPartiallyVisible;return n===null?-1:n},getLastRenderedRow(){const n=this.dataAccessObject.endRowRendered;return n===null?-1:n},getLastVisibleRow(){const n=this.dataAccessObject.endRowVisible;return n===null?-1:n},getLastPartiallyVisibleRow(){const n=this.dataAccessObject.endRowPartiallyVisible;return n===null?-1:n},getRenderedRowsCount(){return this.dataAccessObject.countRowsRendered},getVisibleRowsCount(){return this.dataAccessObject.countRowsVisible},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};ma(iP,"MIXIN_NAME",R0e,{writable:!1,enumerable:!1});class sP extends hg{constructor(e,t,i,s){super(e,t,i,s,Ku)}}Bt(sP,iP),Bt(sP,jC);const x0e="localHooks",Di={_localHooks:Object.create(null),addLocalHook(n,e){return this._localHooks[n]||(this._localHooks[n]=[]),this._localHooks[n].push(e),this},runLocalHooks(n,e,t,i,s,r,o){if(this._localHooks[n]){const a=this._localHooks[n].length;for(let l=0;l<a;l++)gC(this._localHooks[n][l],this,e,t,i,s,r,o)}},clearLocalHooks(){return this._localHooks={},this}};ma(Di,"MIXIN_NAME",x0e,{writable:!1,enumerable:!1});let T5=class{constructor(e,t){this.settings=e,this.cellRange=t||null}isEmpty(){return this.cellRange===null}add(e){return this.isEmpty()?this.cellRange=this.settings.createCellRange(e):this.cellRange.expand(e),this}replace(e,t){if(!this.isEmpty()){if(this.cellRange.from.isEqual(e))return this.cellRange.from=t,!0;if(this.cellRange.to.isEqual(e))return this.cellRange.to=t,!0}return!1}clear(){return this.cellRange=null,this}getCorners(){const e=this.cellRange.getOuterTopStartCorner(),t=this.cellRange.getOuterBottomEndCorner();return[e.row,e.col,t.row,t.col]}destroy(){this.runLocalHooks("destroy")}};Bt(T5,Di);const M5="active-header",rP="header",oP="area",aP="focus",E0e="fill",T0e="row",M0e="column",A0e="custom-selection",lP=Object.freeze({width:"6px",height:"6px",borderWidth:"1px",borderStyle:"solid",borderColor:"#FFF"});var P0e=RA;P0e("flat");function I0e(n,e){P5(n,e),e.add(n)}function A5(n,e,t){P5(n,e),e.set(n,t)}function P5(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jn(n,e){return n.get(Hb(n,e))}function I5(n,e,t){return n.set(Hb(n,e),t),t}function Hb(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Eo=new WeakMap,Ms=new WeakMap,YC=new WeakSet;class O0e{constructor(){I0e(this,YC),A5(this,Eo,void 0),A5(this,Ms,void 0)}setActiveOverlay(e){return I5(Ms,this,e),this}setActiveSelection(e){return I5(Eo,this,e),this}scan(){const e=Jn(Eo,this).settings.selectionType,t=new Set;return e==="active-header"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i))):e==="area"?this.scanCellsRange(i=>t.add(i)):e==="focus"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i)),this.scanCellsRange(i=>t.add(i))):e==="fill"?this.scanCellsRange(i=>t.add(i)):e==="header"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i))):e==="row"?(this.scanRowsInHeadersRange(i=>t.add(i)),this.scanRowsInCellsRange(i=>t.add(i))):e==="column"&&(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanColumnsInCellsRange(i=>t.add(i))),t}scanColumnsInHeadersRange(e){const[t,i,s,r]=Jn(Eo,this).getCorners(),{wtTable:o}=Jn(Ms,this),a=o.getRenderedColumnsCount(),l=o.getColumnHeadersCount();let c=0;for(let h=-o.getRowHeadersCount();h<a;h++){const u=o.columnFilter.renderedToSource(h);if(!(u<i||u>r)){for(let d=-l;d<0;d++){if(d<t||d>s)continue;const f=d+l;let g=o.getColumnHeader(u,f);const p=Jn(Ms,this).getSetting("onBeforeHighlightingColumnHeader",u,f,{selectionType:Jn(Eo,this).settings.selectionType,columnCursor:c,selectionWidth:r-i+1});p!==null&&(p!==u&&(g=o.getColumnHeader(p,f)),e(g))}c+=1}}}scanRowsInHeadersRange(e){const[t,i,s,r]=Jn(Eo,this).getCorners(),{wtTable:o}=Jn(Ms,this),a=o.getRenderedRowsCount(),l=o.getRowHeadersCount();let c=0;for(let h=-o.getColumnHeadersCount();h<a;h++){const u=o.rowFilter.renderedToSource(h);if(!(u<t||u>s)){for(let d=-l;d<0;d++){if(d<i||d>r)continue;const f=d+l;let g=o.getRowHeader(u,f);const p=Jn(Ms,this).getSetting("onBeforeHighlightingRowHeader",u,f,{selectionType:Jn(Eo,this).settings.selectionType,rowCursor:c,selectionHeight:s-t+1});p!==null&&(p!==u&&(g=o.getRowHeader(p,f)),e(g))}c+=1}}}scanCellsRange(e){const[t,i,s,r]=Jn(Eo,this).getCorners(),{wtTable:o}=Jn(Ms,this);Hb(YC,this,cP).call(this,(a,l)=>{if(a>=t&&a<=s&&l>=i&&l<=r){const c=o.getCell(Jn(Ms,this).createCellCoords(a,l)),h=Jn(Ms,this).getSetting("onAfterDrawSelection",a,l,Jn(Eo,this).settings.layerLevel);typeof h=="string"&&ae(c,h),e(c)}})}scanRowsInCellsRange(e){const[t,,i]=Jn(Eo,this).getCorners(),{wtTable:s}=Jn(Ms,this);Hb(YC,this,cP).call(this,(r,o)=>{if(r>=t&&r<=i){const a=s.getCell(Jn(Ms,this).createCellCoords(r,o));e(a)}})}scanColumnsInCellsRange(e){const[,t,,i]=Jn(Eo,this).getCorners(),{wtTable:s}=Jn(Ms,this);Hb(YC,this,cP).call(this,(r,o)=>{if(o>=t&&o<=i){const a=s.getCell(Jn(Ms,this).createCellCoords(r,o));e(a)}})}}function cP(n){const{wtTable:e}=Jn(Ms,this),t=e.getRenderedRowsCount(),i=e.getRenderedColumnsCount();for(let s=0;s<t;s+=1){const r=e.rowFilter.renderedToSource(s);for(let o=0;o<i;o+=1)n(r,e.columnFilter.renderedToSource(o))}}class O5{constructor(e,t){t&&(this.eventManager=e.eventManager,this.instance=e,this.wot=e,this.settings=t,this.mouseDown=!1,this.main=null,this.top=null,this.bottom=null,this.start=null,this.end=null,this.topStyle=null,this.bottomStyle=null,this.startStyle=null,this.endStyle=null,this.cornerDefaultStyle=lP,this.cornerCenterPointOffset=-(parseInt(this.cornerDefaultStyle.width,10)/2),this.corner=null,this.cornerStyle=null,this.createBorders(t),this.registerListeners())}registerListeners(){const e=this.wot.rootDocument.body;this.eventManager.addEventListener(e,"mousedown",()=>this.onMouseDown()),this.eventManager.addEventListener(e,"mouseup",()=>this.onMouseUp());for(let t=0,i=this.main.childNodes.length;t<i;t++){const s=this.main.childNodes[t];this.eventManager.addEventListener(s,"mouseenter",r=>this.onMouseEnter(r,this.main.childNodes[t]))}}onMouseDown(){this.mouseDown=!0}onMouseUp(){this.mouseDown=!1}onMouseEnter(e,t){if(!this.mouseDown||!this.wot.getSetting("hideBorderOnMouseDownOver"))return;e.preventDefault(),Or(e);const i=this,s=this.wot.rootDocument.body,r=t.getBoundingClientRect();t.style.display="none";function o(l){if(l.clientY<Math.floor(r.top)||l.clientY>Math.ceil(r.top+r.height)||l.clientX<Math.floor(r.left)||l.clientX>Math.ceil(r.left+r.width))return!0}function a(l){o(l)&&(i.eventManager.removeEventListener(s,"mousemove",a),t.style.display="block")}this.eventManager.addEventListener(s,"mousemove",a)}createBorders(e){const{rootDocument:t}=this.wot;this.main=t.createElement("div");const i=["top","start","bottom","end","corner"];let s=this.main.style;s.position="absolute",s.top=0,s.left=0;for(let a=0;a<5;a++){const l=i[a],c=t.createElement("div");c.className=`wtBorder ${this.settings.className||""}`,this.settings[l]&&this.settings[l].hide&&(c.className+=" hidden"),s=c.style,s.backgroundColor=this.settings[l]&&this.settings[l].color?this.settings[l].color:e.border.color,s.height=this.settings[l]&&this.settings[l].width?`${this.settings[l].width}px`:`${e.border.width}px`,s.width=this.settings[l]&&this.settings[l].width?`${this.settings[l].width}px`:`${e.border.width}px`,this.main.appendChild(c)}this.top=this.main.childNodes[0],this.start=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.end=this.main.childNodes[3],this.topStyle=this.top.style,this.startStyle=this.start.style,this.bottomStyle=this.bottom.style,this.endStyle=this.end.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),Dl()&&this.instance.getSetting("isDataViewInstance")&&this.createMultipleSelectorHandles(),this.disappear();const{wtTable:r}=this.wot;let o=r.bordersHolder;o||(o=t.createElement("div"),o.className="htBorders",r.bordersHolder=o,r.spreader.appendChild(o)),o.appendChild(this.main)}createMultipleSelectorHandles(){const{rootDocument:e}=this.wot;this.selectionHandles={top:e.createElement("DIV"),topHitArea:e.createElement("DIV"),bottom:e.createElement("DIV"),bottomHitArea:e.createElement("DIV")};const t=10,i=40;this.selectionHandles.top.className="topSelectionHandle topLeftSelectionHandle",this.selectionHandles.topHitArea.className="topSelectionHandle-HitArea topLeftSelectionHandle-HitArea",this.selectionHandles.bottom.className="bottomSelectionHandle bottomRightSelectionHandle",this.selectionHandles.bottomHitArea.className="bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={top:this.selectionHandles.top.style,topHitArea:this.selectionHandles.topHitArea.style,bottom:this.selectionHandles.bottom.style,bottomHitArea:this.selectionHandles.bottomHitArea.style};const s={position:"absolute",height:`${i}px`,width:`${i}px`,"border-radius":`${parseInt(i/1.5,10)}px`};et(s,(o,a)=>{this.selectionHandles.styles.bottomHitArea[a]=o,this.selectionHandles.styles.topHitArea[a]=o});const r={position:"absolute",height:`${t}px`,width:`${t}px`,"border-radius":`${parseInt(t/1.5,10)}px`,background:"#F5F5FF",border:"1px solid #4285c8"};et(r,(o,a)=>{this.selectionHandles.styles.bottom[a]=o,this.selectionHandles.styles.top[a]=o}),this.main.appendChild(this.selectionHandles.top),this.main.appendChild(this.selectionHandles.bottom),this.main.appendChild(this.selectionHandles.topHitArea),this.main.appendChild(this.selectionHandles.bottomHitArea)}isPartRange(e,t){const i=this.wot.selectionManager.getAreaSelection();return!!(i.cellRange&&(e!==i.cellRange.to.row||t!==i.cellRange.to.col))}updateMultipleSelectionHandlesPosition(e,t,i,s,r,o){const l=this.wot.wtSettings.getSetting("rtlMode")?"right":"left",{top:c,topHitArea:h,bottom:u,bottomHitArea:d}=this.selectionHandles.styles,f=parseInt(c.borderWidth,10),g=parseInt(c.width,10),p=parseInt(h.width,10),m=this.wot.wtTable.getWidth(),w=this.wot.wtTable.getHeight();c.top=`${parseInt(i-g-1,10)}px`,c[l]=`${parseInt(s-g-1,10)}px`,h.top=`${parseInt(i-p/4*3,10)}px`,h[l]=`${parseInt(s-p/4*3,10)}px`;const y=Math.min(parseInt(s+r,10),m-g-f*2),C=Math.min(parseInt(s+r-p/4,10),m-p-f*2);u[l]=`${y}px`,d[l]=`${C}px`;const R=Math.min(parseInt(i+o,10),w-g-f*2),_=Math.min(parseInt(i+o-p/4,10),w-p-f*2);u.top=`${R}px`,d.top=`${_}px`,this.settings.border.cornerVisible&&this.settings.border.cornerVisible()?(c.display="block",h.display="block",this.isPartRange(e,t)?(u.display="none",d.display="none"):(u.display="block",d.display="block")):(c.display="none",u.display="none",h.display="none",d.display="none"),e===this.wot.wtSettings.getSetting("fixedRowsTop")||t===this.wot.wtSettings.getSetting("fixedColumnsStart")?(c.zIndex="9999",h.zIndex="9999"):(c.zIndex="",h.zIndex="")}appear(e){if(this.disabled)return;const{wtTable:t,rootDocument:i,rootWindow:s}=this.wot;let r,o,a,l,c,h;const u=t.getRenderedRowsCount();for(let se=0;se<u;se+=1){const te=t.rowFilter.renderedToSource(se);if(te>=e[0]&&te<=e[2]){r=te,c=e[0];break}}for(let se=u-1;se>=0;se-=1){const te=t.rowFilter.renderedToSource(se);if(te>=e[0]&&te<=e[2]){o=te;break}}const d=t.getRenderedColumnsCount();for(let se=0;se<d;se+=1){const te=t.columnFilter.renderedToSource(se);if(te>=e[1]&&te<=e[3]){a=te,h=e[1];break}}for(let se=d-1;se>=0;se-=1){const te=t.columnFilter.renderedToSource(se);if(te>=e[1]&&te<=e[3]){l=te;break}}if(r===void 0||a===void 0){this.disappear();return}let f=t.getCell(this.wot.createCellCoords(r,a));const g=r!==o||a!==l,p=g?t.getCell(this.wot.createCellCoords(o,l)):f,m=hi(f),w=g?hi(p):m,y=hi(t.TABLE),C=sn(t.TABLE),R=m.top,_=m.left,x=this.wot.wtSettings.getSetting("rtlMode");let M=0,I=0;if(x){const se=sn(f),te=s.innerWidth-y.left-C;I=_+se-w.left,M=s.innerWidth-_-se-te-1}else I=w.left+sn(p)-_,M=_-y.left-1;if(this.isEntireColumnSelected(r,o)){const se=this.getDimensionsFromHeader("columns",a,l,c,y);let te=null;se&&([te,M,I]=se),te&&(f=te)}let A=R-y.top-1,O=w.top+jn(p)-R;if(this.isEntireRowSelected(a,l)){const se=this.getDimensionsFromHeader("rows",r,o,h,y);let te=null;se&&([te,A,O]=se),te&&(f=te)}const D=pa(f,s);parseInt(D.borderTopWidth,10)>0&&(A+=1,O=O>0?O-1:0),parseInt(D[x?"borderRightWidth":"borderLeftWidth"],10)>0&&(M+=1,I=I>0?I-1:0);const j=x?"right":"left";this.topStyle.top=`${A}px`,this.topStyle[j]=`${M}px`,this.topStyle.width=`${I}px`,this.topStyle.display="block",this.startStyle.top=`${A}px`,this.startStyle[j]=`${M}px`,this.startStyle.height=`${O}px`,this.startStyle.display="block";const Y=Math.floor(this.settings.border.width/2);this.bottomStyle.top=`${A+O-Y}px`,this.bottomStyle[j]=`${M}px`,this.bottomStyle.width=`${I}px`,this.bottomStyle.display="block",this.endStyle.top=`${A}px`,this.endStyle[j]=`${M+I-Y}px`,this.endStyle.height=`${O+1}px`,this.endStyle.display="block";let Z=this.settings.border.cornerVisible;Z=typeof Z=="function"?Z(this.settings.layerLevel):Z;const $=this.wot.getSetting("onModifyGetCellCoords",o,l);let[B,ie]=[o,l];if($&&Array.isArray($)&&([,,B,ie]=$),Dl()||!Z||this.isPartRange(B,ie))this.cornerStyle.display="none";else{this.cornerStyle.top=`${A+O+this.cornerCenterPointOffset-1}px`,this.cornerStyle[j]=`${M+I+this.cornerCenterPointOffset-1}px`,this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none";let se=Bu(t.TABLE);const te=se===s;te&&(se=i.documentElement);const pe=parseInt(this.cornerDefaultStyle.width,10)/2,b=parseInt(this.cornerDefaultStyle.height,10)/2;if(l===this.wot.getSetting("totalColumns")-1){const v=te?p.getBoundingClientRect().left:p.offsetLeft;let S=!1,T=0;x?(T=v-parseInt(this.cornerDefaultStyle.width,10)/2,S=T<0):(T=v+sn(p)+parseInt(this.cornerDefaultStyle.width,10)/2,S=T>=sA(se)),S&&(this.cornerStyle[j]=`${Math.floor(M+I+this.cornerCenterPointOffset-pe)}px`,this.cornerStyle[x?"borderLeftWidth":"borderRightWidth"]=0)}o===this.wot.getSetting("totalRows")-1&&(te?p.getBoundingClientRect().top:p.offsetTop)+jn(p)+parseInt(this.cornerDefaultStyle.height,10)/2>=Vu(se)&&(this.cornerStyle.top=`${Math.floor(A+O+this.cornerCenterPointOffset-b)}px`,this.cornerStyle.borderBottomWidth=0),this.cornerStyle.display="block"}Dl()&&this.instance.getSetting("isDataViewInstance")&&this.updateMultipleSelectionHandlesPosition(o,l,A,M,I,O)}isEntireColumnSelected(e,t){return e===this.wot.wtTable.getFirstRenderedRow()&&t===this.wot.wtTable.getLastRenderedRow()}isEntireRowSelected(e,t){return e===this.wot.wtTable.getFirstRenderedColumn()&&t===this.wot.wtTable.getLastRenderedColumn()}getDimensionsFromHeader(e,t,i,s,r){const{wtTable:o}=this.wot,a=o.wtRootElement.parentNode;let l=null,c=null,h=null,u=null,d=null,f=null,g=null,p=null;switch(e){case"rows":l=function(){return o.getRowHeader(...arguments)},c=function(){return jn(...arguments)},h="ht__selection--rows",f="top";break;case"columns":l=function(){return o.getColumnHeader(...arguments)},c=function(){return sn(...arguments)},h="ht__selection--columns",f="left";break}if(a.classList.contains(h)){const m=this.wot.getSetting("columnHeaders").length;if(g=l(t,m-s),p=l(i,m-s),!g||!p)return!1;const w=hi(g),y=hi(p);return g&&p&&(u=w[f]-r[f]-1,d=y[f]+c(p)-w[f]),[g,u,d]}return!1}changeBorderStyle(e,t){const i=this[e].style,s=t[e];!s||s.hide?ae(this[e],"hidden"):(Fe(this[e],"hidden")&&Ue(this[e],"hidden"),i.backgroundColor=s.color,(e==="top"||e==="bottom")&&(i.height=`${s.width}px`),(e==="start"||e==="end")&&(i.width=`${s.width}px`))}changeBorderToDefaultStyle(e){const t={width:1,color:"#000"},i=this[e].style;i.backgroundColor=t.color,i.width=`${t.width}px`,i.height=`${t.width}px`}toggleHiddenClass(e,t){this.changeBorderToDefaultStyle(e),t?ae(this[e],"hidden"):Ue(this[e],"hidden")}disappear(){this.topStyle.display="none",this.bottomStyle.display="none",this.startStyle.display="none",this.endStyle.display="none",this.cornerStyle.display="none",Dl()&&this.instance.getSetting("isDataViewInstance")&&(this.selectionHandles.styles.top.display="none",this.selectionHandles.styles.topHitArea.display="none",this.selectionHandles.styles.bottom.display="none",this.selectionHandles.styles.bottomHitArea.display="none")}destroy(){this.eventManager.destroyWithOwnEventsOnly(),this.main.parentNode.removeChild(this.main)}}function k0e(n,e){k5(n,e),e.add(n)}function ug(n,e,t){k5(n,e),e.set(n,t)}function k5(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ot(n,e){return n.get(hP(n,e))}function H5(n,e,t){return n.set(hP(n,e),t),t}function hP(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Zi=new WeakMap,As=new WeakMap,uP=new WeakMap,Db=new WeakMap,dP=new WeakMap,Xu=new WeakMap,D5=new WeakSet;class H0e{constructor(e){k0e(this,D5),ug(this,Zi,void 0),ug(this,As,void 0),ug(this,uP,new O0e),ug(this,Db,new WeakMap),ug(this,dP,new WeakSet),ug(this,Xu,new Map),H5(As,this,e)}setActiveOverlay(e){return H5(Zi,this,e),ot(uP,this).setActiveOverlay(ot(Zi,this)),ot(Db,this).has(ot(Zi,this))||ot(Db,this).set(ot(Zi,this),new Set),this}getFocusSelection(){return ot(As,this)!==null?ot(As,this).getFocus():null}getAreaSelection(){return ot(As,this)!==null?ot(As,this).createLayeredArea():null}getBorderInstance(e){if(!e.settings.border)return null;if(ot(Xu,this).has(e)){const i=ot(Xu,this).get(e);if(i.has(ot(Zi,this)))return i.get(ot(Zi,this));const s=new O5(ot(Zi,this),e.settings);return i.set(ot(Zi,this),s),s}const t=new O5(ot(Zi,this),e.settings);return ot(Xu,this).set(e,new Map([[ot(Zi,this),t]])),t}getBorderInstances(e){var t,i;return Array.from((t=(i=ot(Xu,this).get(e))===null||i===void 0?void 0:i.values())!==null&&t!==void 0?t:[])}destroyBorders(e){ot(Xu,this).get(e).forEach(t=>t.destroy()),ot(Xu,this).delete(e)}render(e){if(ot(As,this)===null)return;e&&hP(D5,this,D0e).call(this);const t=Array.from(ot(As,this)),i=new Map,s=new Map;for(let r=0;r<t.length;r++){const o=t[r],{className:a,headerAttributes:l,createLayers:c,selectionType:h}=o.settings;ot(dP,this).has(o)||(ot(dP,this).add(o),o.addLocalHook("destroy",()=>this.destroyBorders(o)));const u=this.getBorderInstance(o);if(o.isEmpty()){u==null||u.disappear();continue}a&&ot(uP,this).setActiveSelection(o).scan().forEach(g=>{if(i.has(g)){const p=i.get(g);p.has(a)&&c===!0?p.set(a,p.get(a)+1):p.set(a,1)}else i.set(g,new Map([[a,1]]));l&&(s.has(g)||s.set(g,[]),g.nodeName==="TH"&&s.get(g).push(...l))});const d=o.getCorners();ot(Zi,this).getSetting("onBeforeDrawBorders",d,h),u==null||u.appear(d)}i.forEach((r,o)=>{var a;const l=Array.from(r).map(c=>{let[h,u]=c;return u===1?h:[h,...Array.from({length:u-1},(d,f)=>`${h}-${f+1}`)]}).flat();l.forEach(c=>ot(Db,this).get(ot(Zi,this)).add(c)),ae(o,l),o.nodeName==="TD"&&Array.isArray((a=ot(As,this).options)===null||a===void 0?void 0:a.cellAttributes)&&$e(o,ot(As,this).options.cellAttributes)}),Array.from(s.keys()).forEach(r=>{$e(r,[...s.get(r)])})}}function D0e(){const n=ot(Db,this).get(ot(Zi,this)),e=ot(Zi,this).wtSettings.getSetting("onBeforeRemoveCellClassNames");if(Array.isArray(e))for(let t=0;t<e.length;t++)n.add(e[t]);n.forEach(t=>{var i,s;const r=ot(Zi,this).wtTable.TABLE.querySelectorAll(`.${t}`);let o=[];Array.isArray((i=ot(As,this).options)===null||i===void 0?void 0:i.cellAttributes)&&(o=ot(As,this).options.cellAttributes.map(a=>a[0])),Array.isArray((s=ot(As,this).options)===null||s===void 0?void 0:s.headerAttributes)&&(o=[...o,...ot(As,this).options.headerAttributes.map(a=>a[0])]);for(let a=0,l=r.length;a<l;a++)Ue(r[a],t),Lu(r[a],o)}),n.clear()}class N0e extends kb{constructor(e,t,i,s){super(e,t,Ku,i,s)}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new sP(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wtTable:e}=this.wot;if(!this.needFullRender||!this.shouldBeRendered()||!e.holder.parentNode)return!1;const{rootWindow:t}=this.domBindings,i=this.clone.wtTable.holder.parentNode,s=this.wtSettings.getSetting("preventOverflow");let r=0;this.trimmingContainer===t&&(!s||s!=="horizontal")?(r=this.getOverlayOffset()*(this.isRtl()?-1:1),uC(i,`${r}px`,"0px")):(r=this.getScrollPosition(),cb(i));const o=this.adjustHeaderBordersPosition(r);return this.adjustElementsSize(),o}setScrollPosition(e){const{rootWindow:t}=this.domBindings;let i=!1;return this.isRtl()&&(e=-e),this.mainTableScrollableElement===t&&t.scrollX!==e?(t.scrollTo(e,nA(t)),i=!0):this.mainTableScrollableElement.scrollLeft!==e&&(this.mainTableScrollableElement.scrollLeft=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollVertically")}sumCellSizes(e,t){const i=this.wtSettings.getSetting("defaultColumnWidth");let s=e,r=0;for(;s<t;)r+=this.wot.wtTable.getStretchedColumnWidth(s)||i,s+=1;return r}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e}=this.wot,{rootDocument:t,rootWindow:i}=this.domBindings,s=ui(t),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||a==="vertical"){let c=this.wot.wtViewport.getWorkspaceHeight();this.wot.wtOverlays.hasScrollbarBottom&&(c-=s),c=Math.min(c,e.wtRootElement.scrollHeight),o.height=`${c}px`}else o.height="";this.clone.wtTable.holder.style.height=o.height;const l=sn(this.clone.wtTable.TABLE);o.width=`${l}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable,t=this.wot.selectionManager.getFocusSelection()?parseInt(lP.width,10)/2:0;this.clone.wtTable.hider.style.height=this.hider.style.height,e.style.height=e.parentNode.style.height,e.style.width=`${parseInt(e.parentNode.style.width,10)+t}px`}applyToDOM(){const e=this.wtSettings.getSetting("totalColumns"),t=this.isRtl()?"right":"left";if(typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number")this.spreader.style[t]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style[t]="0";else throw new Error("Incorrect value of the columnsRenderCalculator");this.isRtl()?this.spreader.style.left="":this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number"?this.clone.wtTable.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`:this.clone.wtTable.spreader.style.top=""}scrollTo(e,t){const{wtSettings:i}=this,s=i.getSetting("rowHeaders"),r=i.getSetting("fixedColumnsStart"),a=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,l=r===0&&s.length>0&&!Fe(a.parentNode,"innerBorderInlineStart")?1:0;let c=this.getTableParentOffset(),h=0;if(t){const u=this.wot.wtTable.getColumnWidth(e),d=this.wot.wtViewport.getViewportWidth();u>d&&(t=!1)}return t&&a.offsetWidth!==a.clientWidth&&(h=ui(this.domBindings.rootDocument)),t?(c+=this.sumCellSizes(0,e+1),c-=this.wot.wtViewport.getViewportWidth(),c+=l):c+=this.sumCellSizes(this.wtSettings.getSetting("fixedColumnsStart"),e),c+=h,Zj(this.mainTableScrollableElement)===c-l&&l>0&&this.wot.wtOverlays.expandHiderHorizontallyBy(l),this.setScrollPosition(c)}getTableParentOffset(){const e=this.wtSettings.getSetting("preventOverflow");let t=0;return!e&&this.trimmingContainer===this.domBindings.rootWindow&&(t=this.wot.wtTable.holderOffset.left),t}getScrollPosition(){return Math.abs(iA(this.mainTableScrollableElement,this.domBindings.rootWindow))}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="horizontal")){this.isRtl()?i=Math.abs(Math.min(this.getTableParentOffset()-this.getScrollPosition(),0)):i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0);const s=this.wot.wtTable.getTotalWidth(),r=this.clone.wtTable.getTotalWidth(),o=s-r;i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){const{wtSettings:t}=this,i=this.wot.wtTable.holder.parentNode,s=t.getSetting("rowHeaders"),r=t.getSetting("fixedColumnsStart"),o=t.getSetting("totalRows"),a=t.getSetting("preventOverflow")==="vertical";o?Ue(i,"emptyRows"):ae(i,"emptyRows");let l=!1;if(!a){if(r&&!s.length)ae(i,"innerBorderLeft innerBorderInlineStart");else if(!r&&s.length){const c=Fe(i,"innerBorderInlineStart");e?(ae(i,"innerBorderLeft innerBorderInlineStart"),l=!c):(Ue(i,"innerBorderLeft innerBorderInlineStart"),l=c)}}return l}}const L0e="stickyRowsTop",fP={getFirstRenderedRow(){return this.wtSettings.getSetting("totalRows")===0?-1:0},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.getRenderedRowsCount()-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const n=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsTop"),n)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};ma(fP,"MIXIN_NAME",L0e,{writable:!1,enumerable:!1});class gP extends hg{constructor(e,t,i,s){super(e,t,i,s,qu)}}Bt(gP,fP),Bt(gP,jC);function N5(n,e,t){return(e=$0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $0e(n){var e=F0e(n,"string");return typeof e=="symbol"?e:e+""}function F0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class B0e extends kb{constructor(e,t,i,s,r,o){super(e,t,qu,i,s),N5(this,"topOverlay",void 0),N5(this,"inlineStartOverlay",void 0),this.topOverlay=r,this.inlineStartOverlay=o}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new gP(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){if(this.updateTrimmingContainer(),!this.wot.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode;if(this.trimmingContainer===this.domBindings.rootWindow){const s=this.inlineStartOverlay.getOverlayOffset()*(this.isRtl()?-1:1),r=this.topOverlay.getOverlayOffset();uC(e,`${s}px`,`${r}px`)}else cb(e);let t=jn(this.clone.wtTable.TABLE);const i=sn(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(t=0),e.style.height=`${t}px`,e.style.width=`${i}px`,!1}}class pP extends hg{constructor(e,t,i,s){super(e,t,i,s,Gu)}}Bt(pP,fP),Bt(pP,UC);function V0e(n,e,t){return(e=W0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function W0e(n){var e=j0e(n,"string");return typeof e=="symbol"?e:e+""}function j0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class z0e extends kb{constructor(e,t,i,s){super(e,t,Gu,i,s),V0e(this,"cachedFixedRowsTop",-1),this.cachedFixedRowsTop=this.wtSettings.getSetting("fixedRowsTop")}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new pP(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode,{rootWindow:t}=this.domBindings,i=this.wtSettings.getSetting("preventOverflow");let s=0,r=!1;if(this.trimmingContainer===t&&(!i||i!=="vertical")){const{wtTable:a}=this.wot,l=a.hider.getBoundingClientRect(),c=Math.ceil(l.bottom),h=e.offsetHeight;r=c===h,s=this.getOverlayOffset(),uC(e,"0px",`${s}px`)}else s=this.getScrollPosition(),cb(e);const o=this.adjustHeaderBordersPosition(s,r);return this.adjustElementsSize(),o}setScrollPosition(e){const t=this.domBindings.rootWindow;let i=!1;return this.mainTableScrollableElement===t&&t.scrollY!==e?(t.scrollTo(cC(t),e),i=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(e,t){const i=this.wtSettings.getSetting("defaultRowHeight");let s=e,r=0;for(;s<t;){const o=this.wot.wtTable.getRowHeight(s);r+=o===void 0?i:o,s+=1}return r}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e}=this.wot,{rootDocument:t,rootWindow:i}=this.domBindings,s=ui(t),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||a==="horizontal"){let c=this.wot.wtViewport.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(c-=s),c=Math.min(c,e.wtRootElement.scrollWidth),o.width=`${c}px`}else o.width="";this.clone.wtTable.holder.style.width=o.width;let l=jn(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(l=0),o.height=`${l}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable,t=this.wot.selectionManager.getFocusSelection()?parseInt(lP.height,10)/2:0;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=`${parseInt(e.parentNode.style.height,10)+t}px`}applyToDOM(){const e=this.wtSettings.getSetting("totalRows");if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number")this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style.top="0";else throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const e=this.isRtl()?"right":"left",{spreader:t}=this.clone.wtTable;typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number"?t.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:t.style[e]=""}scrollTo(e,t){const{wot:i,wtSettings:s}=this,o=(i.cloneSource?i.cloneSource:i).wtTable.holder,a=s.getSetting("columnHeaders"),c=s.getSetting("fixedRowsTop")===0&&a.length>0&&!Fe(o.parentNode,"innerBorderTop")?1:0;let h=this.getTableParentOffset(),u=0;if(t){const d=this.wot.wtTable.getRowHeight(e),f=this.wot.wtViewport.getViewportHeight();d>f&&(t=!1)}if(t&&o.offsetHeight!==o.clientHeight&&(u=ui(this.domBindings.rootDocument)),t){const d=s.getSetting("fixedRowsBottom"),f=s.getSetting("totalRows");h+=this.sumCellSizes(0,e+1),h-=i.wtViewport.getViewportHeight()-this.sumCellSizes(f-d,f),h+=1,h+=c}else h+=this.sumCellSizes(s.getSetting("fixedRowsTop"),e);return h+=u,Qj(this.mainTableScrollableElement)===h-c&&c>0&&this.wot.wtOverlays.expandHiderVerticallyBy(c),this.setScrollPosition(h)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return hC(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="vertical")){const s=this.wot.wtTable.getTotalHeight(),r=this.clone.wtTable.getTotalHeight(),o=s-r;i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0),i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{wtSettings:i}=this,s=this.wot.wtTable.holder.parentNode,r=i.getSetting("totalColumns"),o=i.getSetting("preventOverflow")==="horizontal";r?Ue(s,"emptyColumns"):ae(s,"emptyColumns");let a=!1;if(!t&&!o){const l=i.getSetting("fixedRowsTop"),c=this.cachedFixedRowsTop!==l,h=i.getSetting("columnHeaders");if((c||l===0)&&h.length>0){const u=Fe(s,"innerBorderTop");this.cachedFixedRowsTop=i.getSetting("fixedRowsTop"),e||i.getSetting("totalRows")===0?(ae(s,"innerBorderTop"),a=!u):(Ue(s,"innerBorderTop"),a=u)}}return a}}function GC(n,e,t){U0e(n,e),e.set(n,t)}function U0e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $l(n,e,t){return(e=Y0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Y0e(n){var e=G0e(n,"string");return typeof e=="symbol"?e:e+""}function G0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Qu(n,e,t){return n.set(L5(n,e),t),t}function Fl(n,e){return n.get(L5(n,e))}function L5(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var dg=new WeakMap,KC=new WeakMap,fg=new WeakMap,qC=new WeakMap;class K0e{constructor(e,t,i,s,r,o){$l(this,"wot",null),GC(this,dg,[]),$l(this,"topOverlay",null),$l(this,"bottomOverlay",null),$l(this,"inlineStartOverlay",null),$l(this,"topInlineStartCornerOverlay",null),$l(this,"bottomInlineStartCornerOverlay",null),$l(this,"browserLineHeight",void 0),$l(this,"wtSettings",null),GC(this,KC,!1),GC(this,fg,0),GC(this,qC,null),$l(this,"resizeObserver",new ResizeObserver(h=>{vC(()=>{!Array.isArray(h)||!h.length||(Qu(fg,this,Fl(fg,this)+1),Fl(fg,this)===100&&(Vt("The ResizeObserver callback was fired too many times in direct succession.\nThis may be due to an infinite loop caused by setting a dynamic height/width (for example, with the `dvh` units) to a Handsontable container's parent. \nThe observer will be disconnected."),this.resizeObserver.disconnect()),Fl(qC,this)!==null&&clearTimeout(Fl(qC,this)),Qu(qC,this,setTimeout(()=>{Qu(fg,this,0)},100)),this.wtSettings.getSetting("onContainerElementResize"))})})),this.wot=e,this.wtSettings=s,this.domBindings=i,this.facadeGetter=t,this.wtTable=o;const{rootDocument:a,rootWindow:l}=this.domBindings;this.instance=this.wot,this.eventManager=r,this.scrollbarSize=ui(a);const c=l.getComputedStyle(o.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden";this.scrollableElement=c?o.holder:ab(o.TABLE),this.initOverlays(),this.hasScrollbarBottom=!1,this.hasScrollbarRight=!1,this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.initBrowserLineHeight(),this.registerListeners(),this.lastScrollX=l.scrollX,this.lastScrollY=l.scrollY}getOverlays(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=[...Fl(dg,this)];return e&&t.push(this.wtTable),t}initBrowserLineHeight(){const{rootWindow:e,rootDocument:t}=this.domBindings,i=e.getComputedStyle(t.body),s=parseInt(i.lineHeight,10),r=parseInt(i.fontSize,10)*1.2;this.browserLineHeight=s||r}initOverlays(){const e=[this.wot,this.facadeGetter,this.wtSettings,this.domBindings];this.topOverlay=new z0e(...e),this.bottomOverlay=new _0e(...e),this.inlineStartOverlay=new N0e(...e),this.topInlineStartCornerOverlay=new B0e(...e,this.topOverlay,this.inlineStartOverlay),this.bottomInlineStartCornerOverlay=new w0e(...e,this.bottomOverlay,this.inlineStartOverlay),Qu(dg,this,[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay])}beforeDraw(){Qu(KC,this,Fl(dg,this).reduce((e,t)=>t.hasRenderingStateChanged()||e,!1)),Fl(dg,this).forEach(e=>e.updateStateOfRendering("before"))}afterDraw(){this.syncScrollWithMaster(),Fl(dg,this).forEach(e=>{const t=e.hasRenderingStateChanged();e.updateStateOfRendering("after"),t&&!e.needFullRender&&e.reset()})}refreshAll(){if(this.wot.drawn){if(!this.wtTable.holder.parentNode){this.destroy();return}this.wot.draw(!0),this.verticalScrolling&&this.inlineStartOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1}}registerListeners(){const{rootDocument:e,rootWindow:t}=this.domBindings,{mainTableScrollableElement:i}=this.topOverlay,{mainTableScrollableElement:s}=this.inlineStartOverlay;this.eventManager.addEventListener(e.documentElement,"keydown",u=>this.onKeyDown(u)),this.eventManager.addEventListener(e.documentElement,"keyup",()=>this.onKeyUp()),this.eventManager.addEventListener(e,"visibilitychange",()=>this.onKeyUp()),this.eventManager.addEventListener(i,"scroll",u=>this.onTableScroll(u),{passive:!0}),i!==s&&this.eventManager.addEventListener(s,"scroll",u=>this.onTableScroll(u),{passive:!0});const r=t.devicePixelRatio&&t.devicePixelRatio>1,o=this.scrollableElement===t,a=this.wtSettings.getSetting("preventWheel"),l={passive:o};(a||r||!fA())&&this.eventManager.addEventListener(this.wtTable.wtRootElement,"wheel",u=>this.onCloneWheel(u,a),l),[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay].forEach(u=>{if(u&&u.needFullRender){const{holder:d}=u.clone.wtTable;this.eventManager.addEventListener(d,"wheel",f=>this.onCloneWheel(f,a),l)}});let h;this.eventManager.addEventListener(t,"resize",()=>{clearTimeout(h),h=setTimeout(()=>{this.wtSettings.getSetting("onWindowResize"),Qu(fg,this,0)},200)}),o||this.resizeObserver.observe(this.wtTable.wtRootElement.parentElement)}deregisterListeners(){this.eventManager.clearEvents(!0)}onTableScroll(e){const t=this.domBindings.rootWindow,i=this.inlineStartOverlay.mainTableScrollableElement,s=this.topOverlay.mainTableScrollableElement,r=e.target;this.keyPressed&&(s!==t&&r!==t&&!e.target.contains(s)||i!==t&&r!==t&&!e.target.contains(i))||this.syncScrollPositions(e)}onCloneWheel(e,t){const{rootWindow:i}=this.domBindings,s=this.inlineStartOverlay.mainTableScrollableElement,r=this.topOverlay.mainTableScrollableElement,o=e.target,a=r!==i&&o!==i&&!o.contains(r),l=s!==i&&o!==i&&!o.contains(s);if(this.keyPressed&&(a||l)||this.scrollableElement===i)return;const c=this.translateMouseWheelToScroll(e);(t||this.scrollableElement!==i&&c)&&e.preventDefault()}onKeyDown(e){this.keyPressed=ig(e.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")}onKeyUp(){this.keyPressed=!1}translateMouseWheelToScroll(e){let t=isNaN(e.deltaY)?-1*e.wheelDeltaY:e.deltaY,i=isNaN(e.deltaX)?-1*e.wheelDeltaX:e.deltaX;e.deltaMode===1&&(i+=i*this.browserLineHeight,t+=t*this.browserLineHeight);const s=this.scrollVertically(t),r=this.scrollHorizontally(i);return s||r}scrollVertically(e){const t=this.scrollableElement.scrollTop;return this.scrollableElement.scrollTop+=e,t!==this.scrollableElement.scrollTop}scrollHorizontally(e){const t=this.scrollableElement.scrollLeft;return this.scrollableElement.scrollLeft+=e,t!==this.scrollableElement.scrollLeft}syncScrollPositions(){if(this.destroyed)return;const{rootWindow:e}=this.domBindings,t=this.topOverlay.clone.wtTable.holder,i=this.inlineStartOverlay.clone.wtTable.holder,[s,r]=[this.scrollableElement.scrollLeft,this.scrollableElement.scrollTop];if(this.horizontalScrolling=t.scrollLeft!==s||this.lastScrollX!==e.scrollX,this.verticalScrolling=i.scrollTop!==r||this.lastScrollY!==e.scrollY,this.lastScrollX=e.scrollX,this.lastScrollY=e.scrollY,this.horizontalScrolling){t.scrollLeft=s;const o=this.bottomOverlay.needFullRender?this.bottomOverlay.clone.wtTable.holder:null;o&&(o.scrollLeft=s)}this.verticalScrolling&&(i.scrollTop=r),this.refreshAll()}syncScrollWithMaster(){if(!Fl(KC,this))return;const e=this.topOverlay.mainTableScrollableElement,{scrollLeft:t,scrollTop:i}=e;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=t),this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=t),this.inlineStartOverlay.needFullRender&&(this.inlineStartOverlay.clone.wtTable.holder.scrollTop=i),Qu(KC,this,!1)}updateMainScrollableElements(){this.deregisterListeners(),this.inlineStartOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement();const{wtTable:e}=this,{rootWindow:t}=this.domBindings;t.getComputedStyle(e.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden"?this.scrollableElement=e.holder:this.scrollableElement=ab(e.TABLE),this.registerListeners()}destroy(){this.resizeObserver.disconnect(),this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.inlineStartOverlay.destroy(),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.destroy(),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.destroy(),this.destroyed=!0}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.updateLastSpreaderSize()&&this.adjustElementsSize(),this.bottomOverlay.clone&&this.bottomOverlay.refresh(e),this.inlineStartOverlay.refresh(e),this.topOverlay.refresh(e),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.refresh(e),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.refresh(e)}updateLastSpreaderSize(){const e=this.wtTable.spreader,t=e.clientWidth,i=e.clientHeight,s=t!==this.spreaderLastSize.width||i!==this.spreaderLastSize.height;return s&&(this.spreaderLastSize.width=t,this.spreaderLastSize.height=i),s}adjustElementsSize(){const{wtViewport:e}=this.wot,{wtTable:t}=this,{rootWindow:i}=this.domBindings,s=this.scrollableElement===i,r=this.wtSettings.getSetting("totalColumns"),o=this.wtSettings.getSetting("totalRows"),a=e.getRowHeaderWidth(),c=e.getColumnHeaderHeight()+this.topOverlay.sumCellSizes(0,o)+1,h=a+this.inlineStartOverlay.sumCellSizes(0,r),d=t.hider.style,f=()=>s?!1:this.scrollableElement.scrollTop>Math.max(0,c-t.holder.clientHeight),g=()=>s?!1:this.scrollableElement.scrollLeft>Math.max(0,h-t.holder.clientWidth),p=f()?1:0,m=g()?1:0;if(d.width=`${h+m}px`,d.height=`${c+p}px`,this.scrollbarSize>0){const{scrollHeight:w,scrollWidth:y}=t.wtRootElement,{scrollHeight:C,scrollWidth:R}=t.holder;this.hasScrollbarRight=w<C,this.hasScrollbarBottom=y<R,this.hasScrollbarRight&&t.hider.scrollWidth+this.scrollbarSize>y?this.hasScrollbarBottom=!0:this.hasScrollbarBottom&&t.hider.scrollHeight+this.scrollbarSize>w&&(this.hasScrollbarRight=!0)}this.topOverlay.adjustElementsSize(),this.inlineStartOverlay.adjustElementsSize(),this.bottomOverlay.adjustElementsSize()}expandHiderVerticallyBy(e){const{wtTable:t}=this;t.hider.style.height=`${parseInt(t.hider.style.height,10)+e}px`}expandHiderHorizontallyBy(e){const{wtTable:t}=this;t.hider.style.width=`${parseInt(t.hider.style.width,10)+e}px`}applyToDOM(){this.wtTable.isVisible()&&(this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.inlineStartOverlay.applyToDOM())}getParentOverlay(e){if(!e)return null;const t=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];let i=null;return F(t,s=>{s&&s.clone&&s.clone.wtTable.TABLE.contains(e)&&(i=s.clone)}),i}syncOverlayTableClassNames(){const e=this.wtTable.TABLE,t=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];F(t,i=>{i&&(i.clone.wtTable.TABLE.className=e.className)})}}function $5(n,e,t){return(e=q0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q0e(n){var e=X0e(n,"string");return typeof e=="symbol"?e:e+""}function X0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Q0e{constructor(e){$5(this,"settings",{}),$5(this,"defaults",Object.freeze(this.getDefaults())),et(this.defaults,(t,i)=>{if(e[i]!==void 0)this.settings[i]=e[i];else{if(t===void 0)throw new Error(`A required setting "${i}" was not provided`);this.settings[i]=t}})}getDefaults(){return{facade:void 0,table:void 0,isDataViewInstance:!0,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow(){return!1},preventWheel:!1,data:void 0,freezeOverlays:!1,fixedColumnsStart:0,fixedRowsTop:0,fixedRowsBottom:0,shouldRenderInlineStartOverlay:()=>this.getSetting("fixedColumnsStart")>0||this.getSetting("rowHeaders").length>0,shouldRenderTopOverlay:()=>this.getSetting("fixedRowsTop")>0||this.getSetting("columnHeaders").length>0,shouldRenderBottomOverlay:()=>this.getSetting("fixedRowsBottom")>0,minSpareRows:0,rowHeaders(){return[]},columnHeaders(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:(e,t,i)=>{const s=this.getSetting("data",e,t);Kc(i,s??"")},columnWidth(){},rowHeight(){},rowHeightByOverlayName(){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellContextMenu:null,onCellMouseOver:null,onCellMouseOut:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeRemoveCellClassNames:null,onAfterDrawSelection:null,onBeforeDrawBorders:null,onBeforeViewportScrollHorizontally:e=>e,onBeforeViewportScrollVertically:e=>e,onScrollHorizontally:null,onScrollVertically:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:e=>e,onModifyRowHeaderWidth:null,onModifyGetCellCoords:null,onBeforeHighlightingRowHeader:e=>e,onBeforeHighlightingColumnHeader:e=>e,onWindowResize:null,onContainerElementResize:null,renderAllColumns:!1,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null,rtlMode:!1,ariaTags:!0}}update(e,t){return t===void 0?et(e,(i,s)=>{this.settings[s]=i}):this.settings[e]=t,this}getSetting(e,t,i,s,r){return typeof this.settings[e]=="function"?this.settings[e](t,i,s,r):t!==void 0&&Array.isArray(this.settings[e])?this.settings[e][t]:this.settings[e]}getSettingPure(e){return this.settings[e]}has(e){return!!this.settings[e]}}class mP extends hg{constructor(e,t,i,s){super(e,t,i,s,"master")}alignOverlaysWithTrimmingContainer(){const e=Bu(this.wtRootElement),{rootWindow:t}=this.domBindings;if(e===t)this.wtSettings.getSetting("preventOverflow")||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible");else{const i=e.parentElement,s=Jf(e,"height",t),r=Jf(e,"overflow",t),o=this.holder.style,{scrollWidth:a,scrollHeight:l}=e;let c=e.offsetWidth,h=e.offsetHeight;if(i&&["auto","hidden","scroll"].includes(r)){const d=e.cloneNode(!1);d.style.overflow="auto",d.style.position="absolute",e.nextElementSibling?i.insertBefore(d,e.nextElementSibling):i.appendChild(d);const f=parseInt(pa(d,t).height,10);i.removeChild(d),f===0&&(h=0)}h=Math.min(h,l),o.height=s==="auto"?"auto":`${h}px`,c=Math.min(c,a),o.width=`${c}px`,o.overflow="",this.hasTableHeight=o.height==="auto"?!0:h>0,this.hasTableWidth=c>0}this.isTableVisible=Fu(this.TABLE)}markOversizedColumnHeaders(){const{wtSettings:e}=this,{wtViewport:t}=this.dataAccessObject,i="master",r=e.getSetting("columnHeaders").length;if(r&&!t.hasOversizedColumnHeadersMarked[i]){const a=e.getSetting("rowHeaders").length,l=this.getRenderedColumnsCount();for(let c=0;c<r;c++)for(let h=-1*a;h<l;h++)this.markIfOversizedColumnHeader(h);t.hasOversizedColumnHeadersMarked[i]=!0}}}Bt(mP,iP),Bt(mP,UC);class Z0e{constructor(e,t,i,s,r){this.dataAccessObject=e,this.wot=e.wot,this.instance=this.wot,this.domBindings=t,this.wtSettings=i,this.wtTable=r,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.rowsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllRows")?new Bve:new Wve],["fullyVisible",()=>new Pve],["partiallyVisible",()=>new s5]]),this.columnsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllColumns")?new Lve:new Vve],["fullyVisible",()=>new Tve],["partiallyVisible",()=>new i5]]),this.eventManager=s,this.eventManager.addEventListener(this.domBindings.rootWindow,"resize",()=>{this.clientHeight=this.getWorkspaceHeight()})}getWorkspaceHeight(){const e=this.domBindings.rootDocument,t=this.dataAccessObject.topOverlayTrimmingContainer;let i=0;return t===this.domBindings.rootWindow?i=e.documentElement.clientHeight:i=jn(t)>0&&t.clientHeight>0?t.clientHeight:1/0,i}getWorkspaceWidth(){const{wtSettings:e}=this,{rootDocument:t,rootWindow:i}=this.domBindings,s=this.dataAccessObject.inlineStartOverlayTrimmingContainer,r=t.documentElement.offsetWidth,o=e.getSetting("totalColumns"),a=e.getSetting("preventOverflow"),l=e.getSetting("rtlMode"),c=this.wtTable.TABLE.getBoundingClientRect(),h=l?c.right-r:c.left,u=r-h;let d,f;if(a)return sn(this.wtTable.wtRootElement);if(e.getSetting("freezeOverlays")?d=Math.min(u,r):d=Math.min(this.getContainerFillWidth(),u,r),s===i&&o>0&&this.sumColumnWidths(0,o-1)>d)return t.documentElement.clientWidth;if(s!==i&&(f=Jf(this.dataAccessObject.inlineStartOverlayTrimmingContainer,"overflow",i),f==="scroll"||f==="hidden"||f==="auto"))return Math.max(d,s.clientWidth);const g=e.getSetting("stretchH");return g==="none"||!g?Math.max(d,sn(this.wtTable.TABLE)):d}hasVerticalScroll(){return this.wtTable.hider.offsetHeight>this.getWorkspaceHeight()}hasHorizontalScroll(){return this.wtTable.hider.offsetWidth>this.getWorkspaceWidth()}sumColumnWidths(e,t){let i=0,s=e;for(;s<t;)i+=this.wtTable.getColumnWidth(s),s+=1;return i}getContainerFillWidth(){if(this.containerWidth)return this.containerWidth;const e=this.wtTable.holder,t=this.domBindings.rootDocument.createElement("div");t.style.width="100%",t.style.height="1px",e.appendChild(t);const i=t.offsetWidth;return this.containerWidth=i,e.removeChild(t),i}getWorkspaceOffset(){return hi(this.wtTable.TABLE)}getColumnHeaderHeight(){return this.wtSettings.getSetting("columnHeaders").length?isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=jn(this.wtTable.THEAD)):this.columnHeaderHeight=0,this.columnHeaderHeight}getViewportHeight(){let e=this.getWorkspaceHeight();if(e===1/0)return e;const t=this.getColumnHeaderHeight();return t>0&&(e-=t),e}getRowHeaderWidth(){const e=this.wtSettings.getSetting("rowHeaderWidth"),t=this.wtSettings.getSetting("rowHeaders");if(e){this.rowHeaderWidth=0;for(let i=0,s=t.length;i<s;i++)this.rowHeaderWidth+=e[i]||e}if(isNaN(this.rowHeaderWidth))if(t.length){let i=this.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(let s=0,r=t.length;s<r;s++)i?(this.rowHeaderWidth+=sn(i),i=i.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.wtSettings.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth}getViewportWidth(){const e=this.getWorkspaceWidth();if(e===1/0)return e;const t=this.getRowHeaderWidth();return t>0?e-t:e}createRowsCalculator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:t,wtTable:i}=this;let s=this.getViewportHeight(),r,o;this.rowHeaderWidth=NaN;let a=this.dataAccessObject.topScrollPosition-this.dataAccessObject.topParentOffset;const l=t.getSetting("fixedRowsTop"),c=t.getSetting("fixedRowsBottom"),h=t.getSetting("totalRows");return l&&a>=0&&(o=this.dataAccessObject.topOverlay.sumCellSizes(0,l),a+=o,s-=o),c&&this.dataAccessObject.bottomOverlay.clone&&(o=this.dataAccessObject.bottomOverlay.sumCellSizes(h-c,h),s-=o),i.holder.clientHeight===i.holder.offsetHeight?r=0:r=ui(this.domBindings.rootDocument),new Xve({calculationTypes:e.map(u=>[u,this.rowsCalculatorTypes.get(u)()]),viewportHeight:s,scrollOffset:a,totalRows:t.getSetting("totalRows"),rowHeightFn:u=>i.getRowHeight(u),overrideFn:t.getSettingPure("viewportRowCalculatorOverride"),horizontalScrollbarHeight:r})}createColumnsCalculator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:t,wtTable:i}=this;let s=this.getViewportWidth(),r=Math.abs(this.dataAccessObject.inlineStartScrollPosition)-this.dataAccessObject.inlineStartParentOffset;this.columnHeaderHeight=NaN;const o=t.getSetting("fixedColumnsStart");if(o&&r>=0){const a=this.dataAccessObject.inlineStartOverlay.sumCellSizes(0,o);r+=a,s-=a}return i.holder.clientWidth!==i.holder.offsetWidth&&(s-=ui(this.domBindings.rootDocument)),new Gve({calculationTypes:e.map(a=>[a,this.columnsCalculatorTypes.get(a)()]),viewportWidth:s,scrollOffset:r,totalColumns:t.getSetting("totalColumns"),columnWidthFn:a=>i.getColumnWidth(a),overrideFn:t.getSettingPure("viewportColumnCalculatorOverride"),inlineStartOffset:this.dataAccessObject.inlineStartParentOffset})}createCalculators(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{wtSettings:t}=this,i=this.createRowsCalculator(),s=this.createColumnsCalculator();if(e&&!t.getSetting("renderAllRows")){const r=i.getResultsFor("fullyVisible");e=this.areAllProposedVisibleRowsAlreadyRendered(r)}if(e&&!t.getSetting("renderAllColumns")){const r=s.getResultsFor("fullyVisible");e=this.areAllProposedVisibleColumnsAlreadyRendered(r)}return e||(this.rowsRenderCalculator=i.getResultsFor("rendered"),this.columnsRenderCalculator=s.getResultsFor("rendered")),this.rowsVisibleCalculator=i.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=s.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=i.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=s.getResultsFor("partiallyVisible"),e}createVisibleCalculators(){const e=this.createRowsCalculator(["fullyVisible","partiallyVisible"]),t=this.createColumnsCalculator(["fullyVisible","partiallyVisible"]);this.rowsVisibleCalculator=e.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=t.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=e.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=t.getResultsFor("partiallyVisible")}areAllProposedVisibleRowsAlreadyRendered(e){if(!this.rowsVisibleCalculator)return!1;let{startRow:t,endRow:i}=e;if(t===null&&i===null){if(!e.isVisibleInTrimmingContainer)return!0;t=this.rowsPartiallyVisibleCalculator.startRow,i=this.rowsPartiallyVisibleCalculator.endRow}const{startRow:s,endRow:r}=this.rowsRenderCalculator;return t<s||t===s&&t>0?!1:!(i>r||i===r&&i<this.wtSettings.getSetting("totalRows")-1)}areAllProposedVisibleColumnsAlreadyRendered(e){if(!this.columnsVisibleCalculator)return!1;let{startColumn:t,endColumn:i}=e;if(t===null&&i===null){if(!e.isVisibleInTrimmingContainer)return!0;t=this.columnsPartiallyVisibleCalculator.startColumn,i=this.columnsPartiallyVisibleCalculator.endColumn}const{startColumn:s,endColumn:r}=this.columnsRenderCalculator;return t<s||t===s&&t>0?!1:!(i>r||i===r&&i<this.wtSettings.getSetting("totalColumns")-1)}resetHasOversizedColumnHeadersMarked(){et(this.hasOversizedColumnHeadersMarked,(e,t,i)=>{i[t]=void 0})}}class J0e extends tP{constructor(e,t){super(e,new Q0e(t));const i=this.wtSettings.getSetting("facade",this);this.wtTable=new mP(this.getTableDao(),i,this.domBindings,this.wtSettings),this.wtViewport=new Z0e(this.getViewportDao(),this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.selectionManager=new H0e(this.wtSettings.getSetting("selections")),this.wtEvent=new f5(i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager),this.wtOverlays=new K0e(this,i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.exportSettingsAsClassNames(),this.findOriginalHeaders()}exportSettingsAsClassNames(){const e={rowHeaders:"htRowHeaders",columnHeaders:"htColumnHeaders"},t=[],i=[];et(e,(s,r)=>{this.wtSettings.getSetting(r).length&&i.push(s),t.push(s)}),Ue(this.wtTable.wtRootElement.parentNode,t),ae(this.wtTable.wtRootElement.parentNode,i)}getOverlayByName(e){var t;if(!_5.includes(e))return null;const i=e.replace(/_([a-z])/g,s=>s[1].toUpperCase());return(t=this.wtOverlays[`${i}Overlay`])!==null&&t!==void 0?t:null}getViewportDao(){const e=this;return{get wot(){return e},get topOverlayTrimmingContainer(){return e.wtOverlays.topOverlay.trimmingContainer},get inlineStartOverlayTrimmingContainer(){return e.wtOverlays.inlineStartOverlay.trimmingContainer},get topScrollPosition(){return e.wtOverlays.topOverlay.getScrollPosition()},get topParentOffset(){return e.wtOverlays.topOverlay.getTableParentOffset()},get inlineStartScrollPosition(){return e.wtOverlays.inlineStartOverlay.getScrollPosition()},get inlineStartParentOffset(){return e.wtOverlays.inlineStartOverlay.getTableParentOffset()},get topOverlay(){return e.wtOverlays.topOverlay},get inlineStartOverlay(){return e.wtOverlays.inlineStartOverlay},get bottomOverlay(){return e.wtOverlays.bottomOverlay}}}}class bP{constructor(e){e instanceof tP?this._wot=e:this._initFromSettings(e)}_initFromSettings(e){e.facade=t=>{const i=new bP(t);return()=>i},this._wot=new J0e(e.table,e)}get guid(){return this._wot.guid}get rootDocument(){return this._wot.domBindings.rootDocument}get rootWindow(){return this._wot.domBindings.rootWindow}get wtSettings(){return this._wot.wtSettings}get cloneSource(){return this._wot.cloneSource}get cloneOverlay(){return this._wot.cloneOverlay}get selectionManager(){return this._wot.selectionManager}get wtViewport(){return this._wot.wtViewport}get wtOverlays(){return this._wot.wtOverlays}get wtTable(){return this._wot.wtTable}get wtEvent(){return this._wot.wtEvent}get wtScroll(){return this._wot.wtScroll}get drawn(){return this._wot.drawn}set drawn(e){this._wot.drawn=e}get drawInterrupted(){return this._wot.drawInterrupted}set drawInterrupted(e){this._wot.drawInterrupted=e}get lastMouseOver(){return this._wot.lastMouseOver}set lastMouseOver(e){this._wot.lastMouseOver=e}get momentumScrolling(){return this._wot.momentumScrolling}set momentumScrolling(e){this._wot.momentumScrolling=e}get touchApplied(){return this._wot.touchApplied}set touchApplied(e){this._wot.touchApplied=e}get domBindings(){return this._wot.domBindings}get eventListeners(){return this._wot.eventListeners}set eventListeners(e){this._wot.eventListeners=e}get eventManager(){return this._wot.eventManager}createCellCoords(e,t){return this._wot.createCellCoords(e,t)}createCellRange(e,t,i){return this._wot.createCellRange(e,t,i)}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._wot.draw(e),this}getCell(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._wot.getCell(e,t)}scrollViewport(e,t,i,s,r){return this._wot.scrollViewport(e,t,i,s,r)}scrollViewportHorizontally(e,t,i){return this._wot.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return this._wot.scrollViewportVertically(e,t,i)}getViewport(){return this._wot.getViewport()}getOverlayName(){return this._wot.cloneOverlay?this._wot.cloneOverlay.type:"master"}getOverlayByName(e){return this._wot.getOverlayByName(e)}exportSettingsAsClassNames(){return this._wot.exportSettingsAsClassNames()}update(e,t){return this._wot.wtSettings.update(e,t),this}getSetting(e,t,i,s,r){return this._wot.wtSettings.getSetting(e,t,i,s,r)}hasSetting(e){return this._wot.wtSettings.hasSetting(e)}destroy(){this._wot.destroy()}}function F5(n){let{isShiftKey:e,isLeftClick:t,isRightClick:i,coords:s,selection:r,controller:o,cellCoordsFactory:a}=n;const l=r.isSelected()?r.getSelectedRange().current():null,c=r.isSelectedByCorner(),h=r.isSelectedByRowHeader();if(r.markSource("mouse"),e&&l)s.row>=0&&s.col>=0&&!o.cell?r.setRangeEnd(s):(c||h)&&s.row>=0&&s.col>=0&&!o.cell?r.setRangeEnd(a(s.row,s.col)):c&&s.row<0&&!o.column?r.setRangeEnd(a(l.to.row,s.col)):h&&s.col<0&&!o.row?r.setRangeEnd(a(s.row,l.to.col)):(!c&&!h&&s.col<0||c&&s.col<0)&&!o.row?r.selectRows(Math.max(l.from.row,0),s.row,s.col):(!c&&!h&&s.row<0||h&&s.row<0)&&!o.column&&r.selectColumns(Math.max(l.from.col,0),s.col,s.row);else{const u=!r.inInSelection(s),d=t||i&&u;s.row<0&&s.col>=0&&!o.column?d&&r.selectColumns(s.col,s.col,s.row):s.col<0&&s.row>=0&&!o.row?d&&r.selectRows(s.row,s.row,s.col):s.col>=0&&s.row>=0&&!o.cell?d&&r.setRangeStart(s):s.col<0&&s.row<0&&r.selectAll(!0,!0,{disableHeadersHighlight:!0,focusPosition:{row:0,col:0}})}r.markEndSource()}function eCe(n){let{isLeftClick:e,coords:t,selection:i,controller:s,cellCoordsFactory:r}=n;if(!e)return;const o=i.isSelectedByRowHeader(),a=i.isSelectedByColumnHeader(),l=i.tableProps.countCols(),c=i.tableProps.countRows();i.markSource("mouse"),a&&!s.column?i.setRangeEnd(r(c-1,t.col)):o&&!s.row?i.setRangeEnd(r(t.row,l-1)):s.cell||i.setRangeEnd(t),i.markEndSource()}const tCe=new Map([["mousedown",F5],["mouseover",eCe],["touchstart",F5]]);function B5(n,e){let{coords:t,selection:i,controller:s,cellCoordsFactory:r}=e;tCe.get(n.type)({coords:t,selection:i,controller:s,cellCoordsFactory:r,isShiftKey:n.shiftKey,isLeftClick:CC(n)||n.type==="touchstart",isRightClick:Qc(n)})}const V5=new WeakMap,wP=Symbol("rootInstance");function nCe(n){V5.set(n,!0)}function iCe(n){return n===wP}function XC(n){return V5.has(n)}function sCe(n,e){W5(n,e),e.add(n)}function Zu(n,e,t){W5(n,e),e.set(n,t)}function W5(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function th(n,e,t){return(e=rCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rCe(n){var e=oCe(n,"string");return typeof e=="symbol"?e:e+""}function oCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ei(n,e){return n.get(Nb(n,e))}function Lr(n,e,t){return n.set(Nb(n,e),t),t}function Nb(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var vP=new WeakMap,QC=new WeakMap,ZC=new WeakMap,Bl=new WeakMap,To=new WeakMap,yP=new WeakMap,CP=new WeakMap,JC=new WeakSet;class aCe{constructor(e){sCe(this,JC),th(this,"hot",void 0),th(this,"eventManager",void 0),th(this,"settings",void 0),th(this,"THEAD",void 0),th(this,"TBODY",void 0),th(this,"_wt",void 0),th(this,"activeWt",void 0),Zu(this,vP,0),Zu(this,QC,0),th(this,"postponedAdjustElementsSize",!1),Zu(this,ZC,!1),Zu(this,Bl,void 0),Zu(this,To,void 0),Zu(this,yP,0),Zu(this,CP,0),this.hot=e,this.eventManager=new kr(this.hot),this.settings=this.hot.getSettings(),this.createElements(),this.registerEvents(),this.initializeWalkontable()}render(){this.hot.isRenderSuspended()||(this.hot.runHooks("beforeRender",this.hot.forceFullRender),this.postponedAdjustElementsSize&&(this.postponedAdjustElementsSize=!1,this.adjustElementsSize(!0)),this._wt.draw(!this.hot.forceFullRender),this.hot.runHooks("afterRender",this.hot.forceFullRender),this.hot.forceFullRender=!1,this.hot.renderCall=!1)}adjustElementsSize(){this.hot.isRenderSuspended()?this.postponedAdjustElementsSize=!0:this._wt.wtOverlays.adjustElementsSize()}getCellAtCoords(e,t){const i=this._wt.getCell(e,t);return i<0?null:i}scrollViewport(e,t,i,s,r){return this._wt.scrollViewport(e,t,i,s,r)}scrollViewportHorizontally(e,t,i){return this._wt.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return this._wt.scrollViewportVertically(e,t,i)}createElements(){const{rootElement:e,rootDocument:t}=this.hot,i=e.getAttribute("style");i&&e.setAttribute("data-originalstyle",i),ae(e,"handsontable"),Lr(To,this,t.createElement("TABLE")),ae(Ei(To,this),"htCore"),this.hot.getSettings().tableClassName&&ae(Ei(To,this),this.hot.getSettings().tableClassName),this.settings.ariaTags&&($e(Ei(To,this),[ga()]),$e(e,[vme(),Fj(-1),lC(this.hot.countCols()),kme()])),this.THEAD=t.createElement("THEAD"),Ei(To,this).appendChild(this.THEAD),this.TBODY=t.createElement("TBODY"),Ei(To,this).appendChild(this.TBODY),this.hot.table=Ei(To,this),this.hot.container.insertBefore(Ei(To,this),this.hot.container.firstChild)}registerEvents(){const{rootElement:e,rootDocument:t,selection:i,rootWindow:s}=this.hot,r=t.documentElement;this.eventManager.addEventListener(e,"mousedown",a=>{Lr(ZC,this,!0),this.isTextSelectionAllowed(a.target)||(oA(s),a.preventDefault(),s.focus())}),this.eventManager.addEventListener(e,"mouseup",()=>{Lr(ZC,this,!1)}),this.eventManager.addEventListener(e,"mousemove",a=>{Ei(ZC,this)&&!this.isTextSelectionAllowed(a.target)&&(this.settings.fragmentSelection&&oA(s),a.preventDefault())}),this.eventManager.addEventListener(r,"keyup",a=>{i.isInProgress()&&!a.shiftKey&&i.finish()}),this.eventManager.addEventListener(r,"mouseup",a=>{i.isInProgress()&&CC(a)&&i.finish(),Lr(Bl,this,!1);const l=dC(t.activeElement);hb(t.activeElement)&&!l||(l||!i.isSelected()&&!i.isSelectedByAnyHeader()&&!e.contains(a.target)&&!Qc(a))&&this.hot.unlisten()}),this.eventManager.addEventListener(r,"contextmenu",a=>{i.isInProgress()&&Qc(a)&&(i.finish(),Lr(Bl,this,!1))}),this.eventManager.addEventListener(r,"touchend",()=>{i.isInProgress()&&i.finish(),Lr(Bl,this,!1)}),this.eventManager.addEventListener(r,"mousedown",a=>{const l=a.target,c=a.x||a.clientX,h=a.y||a.clientY;let u=a.target;if(Ei(Bl,this)||!e||!this.hot.view)return;const{holder:d}=this._wt.wtTable;if(u===d){const g=ui(t);if(t.elementFromPoint(c+g,h)!==d||t.elementFromPoint(c,h+g)!==d)return}else for(;u!==r;){if(u===null){if(a.isTargetWebComponent)break;return}if(u===e)return;u=u.parentNode}(typeof this.settings.outsideClickDeselects=="function"?this.settings.outsideClickDeselects(l):this.settings.outsideClickDeselects)?this.hot.deselectCell():this.hot.destroyEditor(!1,!1)});let o=Nu(s);for(;o!==null;)this.eventManager.addEventListener(o.document.documentElement,"click",()=>{this.hot.unlisten()}),o=Nu(o);this.eventManager.addEventListener(Ei(To,this),"selectstart",a=>{this.settings.fragmentSelection||hb(a.target)||a.preventDefault()})}translateFromRenderableToVisualCoords(e){let{row:t,col:i}=e;return this.hot._createCellCoords(...this.translateFromRenderableToVisualIndex(t,i))}translateFromRenderableToVisualIndex(e,t){let i=e>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(e):e,s=t>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(t):t;return i===null&&(i=e),s===null&&(s=t),[i,s]}countRenderableIndexes(e,t){const i=Math.min(e.getNotTrimmedIndexesLength(),t),s=e.getNearestNotHiddenIndex(i-1,-1);return s===null?0:e.getRenderableFromVisualIndex(s)+1}countRenderableColumns(){return this.countRenderableIndexes(this.hot.columnIndexMapper,this.settings.maxCols)}countRenderableRows(){return this.countRenderableIndexes(this.hot.rowIndexMapper,this.settings.maxRows)}countNotHiddenRowIndexes(e,t){return this.countNotHiddenIndexes(e,t,this.hot.rowIndexMapper,this.countRenderableRows())}countNotHiddenColumnIndexes(e,t){return this.countNotHiddenIndexes(e,t,this.hot.columnIndexMapper,this.countRenderableColumns())}countNotHiddenIndexes(e,t,i,s){if(isNaN(e)||e<0)return 0;const r=i.getNearestNotHiddenIndex(e,t),o=i.getRenderableFromVisualIndex(r);if(!Number.isInteger(o))return 0;let a=0;return t<0?a=o+1:t>0&&(a=s-o),a}countNotHiddenFixedColumnsStart(){const e=this.hot.countCols(),t=Math.min(parseInt(this.settings.fixedColumnsStart,10),e)-1;return this.countNotHiddenColumnIndexes(t,-1)}countNotHiddenFixedRowsTop(){const e=this.hot.countRows(),t=Math.min(parseInt(this.settings.fixedRowsTop,10),e)-1;return this.countNotHiddenRowIndexes(t,-1)}countNotHiddenFixedRowsBottom(){const e=this.hot.countRows(),t=Math.max(e-parseInt(this.settings.fixedRowsBottom,10),0);return this.countNotHiddenRowIndexes(t,1)}countRenderableColumnsInRange(e,t){let i=0;for(let s=e;s<=t;s++)this.hot.columnIndexMapper.getRenderableFromVisualIndex(s)!==null&&(i+=1);return i}countRenderableRowsInRange(e,t){let i=0;for(let s=e;s<=t;s++)this.hot.rowIndexMapper.getRenderableFromVisualIndex(s)!==null&&(i+=1);return i}isMainTableNotFullyCoveredByOverlays(){const e=this.countNotHiddenFixedRowsTop()+this.countNotHiddenFixedRowsBottom(),t=this.countNotHiddenFixedColumnsStart();return this.hot.countRenderedRows()>e&&this.hot.countRenderedCols()>t}initializeWalkontable(){const e={ariaTags:this.settings.ariaTags,rtlMode:this.hot.isRtl(),externalRowCalculator:this.hot.getPlugin("autoRowSize")&&this.hot.getPlugin("autoRowSize").isEnabled(),table:Ei(To,this),isDataViewInstance:()=>XC(this.hot),preventOverflow:()=>this.settings.preventOverflow,preventWheel:()=>this.settings.preventWheel,stretchH:()=>this.settings.stretchH,data:(r,o)=>this.hot.getDataAtCell(...this.translateFromRenderableToVisualIndex(r,o)),totalRows:()=>this.countRenderableRows(),totalColumns:()=>this.countRenderableColumns(),fixedColumnsStart:()=>this.countNotHiddenFixedColumnsStart(),fixedRowsTop:()=>this.countNotHiddenFixedRowsTop(),fixedRowsBottom:()=>this.countNotHiddenFixedRowsBottom(),shouldRenderInlineStartOverlay:()=>this.settings.fixedColumnsStart>0||e.rowHeaders().length>0,shouldRenderTopOverlay:()=>this.settings.fixedRowsTop>0||e.columnHeaders().length>0,shouldRenderBottomOverlay:()=>this.settings.fixedRowsBottom>0,minSpareRows:()=>this.settings.minSpareRows,renderAllRows:this.settings.renderAllRows,renderAllColumns:this.settings.renderAllColumns,rowHeaders:()=>{const r=[];return this.hot.hasRowHeaders()&&r.push((o,a)=>{const l=o>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(o):o;this.appendRowHeader(l,a)}),this.hot.runHooks("afterGetRowHeaderRenderers",r),Lr(QC,this,r.length),this.hot.getSettings().ariaTags&&Nb(JC,this,j5).call(this)===this.hot.countCols()&&Nb(JC,this,lCe).call(this,Ei(QC,this)),r},columnHeaders:()=>{const r=[];return this.hot.hasColHeaders()&&r.push((o,a)=>{const l=o>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(o):o;this.appendColHeader(l,a)}),this.hot.runHooks("afterGetColumnHeaderRenderers",r),Lr(vP,this,r.length),r},columnWidth:r=>{const o=this.hot.columnIndexMapper.getVisualFromRenderableIndex(r);return this.hot.getColWidth(o===null?r:o)},rowHeight:r=>{const o=this.hot.rowIndexMapper.getVisualFromRenderableIndex(r);return this.hot.getRowHeight(o===null?r:o)},rowHeightByOverlayName:(r,o)=>{const a=this.hot.rowIndexMapper.getVisualFromRenderableIndex(r),l=a===null?r:a;return this.hot.runHooks("modifyRowHeightByOverlayName",this.hot.getRowHeight(l),l,o)},cellRenderer:(r,o,a)=>{const[l,c]=this.translateFromRenderableToVisualIndex(r,o),h=this.hot.runHooks("modifyGetCellCoords",l,c);let u=l,d=c;Array.isArray(h)&&([u,d]=h);const f=this.hot.getCellMeta(u,d),g=this.hot.colToProp(d);let p=this.hot.getDataAtRowProp(u,g);this.hot.hasHook("beforeValueRender")&&(p=this.hot.runHooks("beforeValueRender",p,f)),this.hot.runHooks("beforeRenderer",a,l,c,g,p,f),this.hot.getCellRenderer(f)(this.hot,a,l,c,g,p,f),this.hot.runHooks("afterRenderer",a,l,c,g,p,f)},selections:this.hot.selection.highlight,hideBorderOnMouseDownOver:()=>this.settings.fragmentSelection,onWindowResize:()=>{this.hot&&!this.hot.isDestroyed&&this.hot.refreshDimensions()},onContainerElementResize:()=>{this.hot&&!this.hot.isDestroyed&&Fu(this.hot.rootElement)&&this.hot.refreshDimensions()},onCellMouseDown:(r,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o),h={row:!1,column:!1,cell:!1};this.hot.listen(),this.activeWt=l,Lr(Bl,this,!0),this.hot.runHooks("beforeOnCellMouseDown",r,c,a,h),!Xc(r)&&(B5(r,{coords:c,selection:this.hot.selection,controller:h,cellCoordsFactory:(u,d)=>this.hot._createCellCoords(u,d)}),this.hot.runHooks("afterOnCellMouseDown",r,c,a),this.activeWt=this._wt)},onCellContextMenu:(r,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,Lr(Bl,this,!1),this.hot.selection.isInProgress()&&this.hot.selection.finish(),this.hot.runHooks("beforeOnCellContextMenu",r,c,a),!Xc(r)&&(this.hot.runHooks("afterOnCellContextMenu",r,c,a),this.activeWt=this._wt)},onCellMouseOut:(r,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,this.hot.runHooks("beforeOnCellMouseOut",r,c,a),!Xc(r)&&(this.hot.runHooks("afterOnCellMouseOut",r,c,a),this.activeWt=this._wt)},onCellMouseOver:(r,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o),h={row:!1,column:!1,cell:!1};this.activeWt=l,this.hot.runHooks("beforeOnCellMouseOver",r,c,a,h),!Xc(r)&&(Ei(Bl,this)&&B5(r,{coords:c,selection:this.hot.selection,controller:h,cellCoordsFactory:(u,d)=>this.hot._createCellCoords(u,d)}),this.hot.runHooks("afterOnCellMouseOver",r,c,a),this.activeWt=this._wt)},onCellMouseUp:(r,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,this.hot.runHooks("beforeOnCellMouseUp",r,c,a),!(Xc(r)||this.hot.isDestroyed)&&(this.hot.runHooks("afterOnCellMouseUp",r,c,a),this.activeWt=this._wt)},onCellCornerMouseDown:r=>{r.preventDefault(),this.hot.runHooks("afterOnCellCornerMouseDown",r)},onCellCornerDblClick:r=>{r.preventDefault(),this.hot.runHooks("afterOnCellCornerDblClick",r)},beforeDraw:(r,o)=>this.beforeRender(r,o),onDraw:r=>this.afterRender(r),onBeforeViewportScrollVertically:r=>{const o=this.hot.rowIndexMapper,a=r<0;let l=r;return!a&&(l=o.getVisualFromRenderableIndex(r),l===null)?r:(l=this.hot.runHooks("beforeViewportScrollVertically",l),this.hot.runHooks("beforeViewportScroll"),a?l:o.getRenderableFromVisualIndex(l))},onBeforeViewportScrollHorizontally:r=>{const o=this.hot.columnIndexMapper,a=r<0;let l=r;return!a&&(l=o.getVisualFromRenderableIndex(r),l===null)?r:(l=this.hot.runHooks("beforeViewportScrollHorizontally",l),this.hot.runHooks("beforeViewportScroll"),a?l:o.getRenderableFromVisualIndex(l))},onScrollVertically:()=>{this.hot.runHooks("afterScrollVertically"),this.hot.runHooks("afterScroll")},onScrollHorizontally:()=>{this.hot.runHooks("afterScrollHorizontally"),this.hot.runHooks("afterScroll")},onBeforeRemoveCellClassNames:()=>this.hot.runHooks("beforeRemoveCellClassNames"),onBeforeHighlightingRowHeader:(r,o,a)=>{const l=this.hot.rowIndexMapper,c=r<0;let h=r;c||(h=l.getVisualFromRenderableIndex(r));const u=this.hot.runHooks("beforeHighlightingRowHeader",h,o,a);return c?u:l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(u,1))},onBeforeHighlightingColumnHeader:(r,o,a)=>{const l=this.hot.columnIndexMapper,c=r<0;let h=r;c||(h=l.getVisualFromRenderableIndex(r));const u=this.hot.runHooks("beforeHighlightingColumnHeader",h,o,a);return c?u:l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(u,1))},onAfterDrawSelection:(r,o,a)=>{let l;const[c,h]=this.translateFromRenderableToVisualIndex(r,o),u=this.hot.selection.getSelectedRange();if(u.size()>0){const f=u.peekByIndex(a??0);l=[f.from.row,f.from.col,f.to.row,f.to.col]}return this.hot.runHooks("afterDrawSelection",c,h,l,a)},onBeforeDrawBorders:(r,o)=>{const[a,l,c,h]=r,u=[this.hot.rowIndexMapper.getVisualFromRenderableIndex(a),this.hot.columnIndexMapper.getVisualFromRenderableIndex(l),this.hot.rowIndexMapper.getVisualFromRenderableIndex(c),this.hot.columnIndexMapper.getVisualFromRenderableIndex(h)];return this.hot.runHooks("beforeDrawBorders",u,o)},onBeforeTouchScroll:()=>this.hot.runHooks("beforeTouchScroll"),onAfterMomentumScroll:()=>this.hot.runHooks("afterMomentumScroll"),onBeforeStretchingColumnWidth:(r,o)=>{const a=this.hot.columnIndexMapper.getVisualFromRenderableIndex(o);return this.hot.runHooks("beforeStretchingColumnWidth",r,a)},onModifyRowHeaderWidth:r=>this.hot.runHooks("modifyRowHeaderWidth",r),onModifyGetCellCoords:(r,o,a)=>{const l=this.hot.rowIndexMapper,c=this.hot.columnIndexMapper,h=o>=0?c.getVisualFromRenderableIndex(o):o,u=r>=0?l.getVisualFromRenderableIndex(r):r,d=this.hot.runHooks("modifyGetCellCoords",u,h,a);if(Array.isArray(d)){const[f,g,p,m]=d;return[f>=0?l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(f,1)):f,g>=0?c.getRenderableFromVisualIndex(c.getNearestNotHiddenIndex(g,1)):g,p>=0?l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(p,-1)):p,m>=0?c.getRenderableFromVisualIndex(c.getNearestNotHiddenIndex(m,-1)):m]}},viewportRowCalculatorOverride:r=>{let o=this.settings.viewportRowRenderingOffset;if(o==="auto"&&this.settings.fixedRowsTop&&(o=10),o>0||o==="auto"){const a=this.countRenderableRows(),l=r.startRow,c=r.endRow;if(typeof o=="number")r.startRow=Math.max(l-o,0),r.endRow=Math.min(c+o,a-1);else if(o==="auto"){const h=Math.ceil(c/a*12);r.startRow=Math.max(l-h,0),r.endRow=Math.min(c+h,a-1)}}this.hot.runHooks("afterViewportRowCalculatorOverride",r)},viewportColumnCalculatorOverride:r=>{let o=this.settings.viewportColumnRenderingOffset;if(o==="auto"&&this.settings.fixedColumnsStart&&(o=10),o>0||o==="auto"){const a=this.countRenderableColumns(),l=r.startColumn,c=r.endColumn;if(typeof o=="number"&&(r.startColumn=Math.max(l-o,0),r.endColumn=Math.min(c+o,a-1)),o==="auto"){const h=Math.ceil(c/a*6);r.startColumn=Math.max(l-h,0),r.endColumn=Math.min(c+h,a-1)}}this.hot.runHooks("afterViewportColumnCalculatorOverride",r)},rowHeaderWidth:()=>this.settings.rowHeaderWidth,columnHeaderHeight:()=>{const r=this.hot.runHooks("modifyColumnHeaderHeight");return this.settings.columnHeaderHeight||r}};this.hot.runHooks("beforeInitWalkontable",e),this._wt=new bP(e),this.activeWt=this._wt;const t=this._wt.wtTable.spreader,{width:i,height:s}=this.hot.rootElement.getBoundingClientRect();this.setLastSize(i,s),this.eventManager.addEventListener(t,"mousedown",r=>{r.target===t&&r.which===3&&r.stopPropagation()}),this.eventManager.addEventListener(t,"contextmenu",r=>{r.target===t&&r.which===3&&r.stopPropagation()}),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"click",()=>{this.settings.observeDOMVisibility&&this._wt.drawInterrupted&&(this.hot.forceFullRender=!0,this.render())})}isTextSelectionAllowed(e){if(hb(e))return!0;const t=Yc(e,this._wt.wtTable.spreader);return!!(this.settings.fragmentSelection===!0&&t||this.settings.fragmentSelection==="cell"&&this.isSelectedOnlyCell()&&t||!this.settings.fragmentSelection&&this.isCellEdited()&&this.isSelectedOnlyCell())}isMouseDown(){return Ei(Bl,this)}isSelectedOnlyCell(){var e,t;return(e=(t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingleCell())!==null&&e!==void 0?e:!1}isCellEdited(){const e=this.hot.getActiveEditor();return e&&e.isOpened()}beforeRender(e,t){e&&this.hot.runHooks("beforeViewRender",this.hot.forceFullRender,t)}afterRender(e){e&&this.hot.runHooks("afterViewRender",this.hot.forceFullRender)}appendRowHeader(e,t){if(t.firstChild){const i=t.firstChild;if(!Fe(i,"relative")){vo(t),this.appendRowHeader(e,t);return}this.updateCellHeader(i.querySelector(".rowHeader"),e,this.hot.getRowHeader)}else{const{rootDocument:i,getRowHeader:s}=this.hot,r=i.createElement("div"),o=i.createElement("span");r.className="relative",o.className="rowHeader",this.updateCellHeader(o,e,s),r.appendChild(o),t.appendChild(r)}this.hot.runHooks("afterGetRowHeader",e,t)}appendColHeader(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hot.getColHeader,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const r=()=>{const o=e>=0?this.hot.getColumnMeta(e).headerClassName:null;return o?o.split(" "):[]};if(t.firstChild){const o=t.firstChild;Fe(o,"relative")?(this.updateCellHeader(o.querySelector(".colHeader"),e,i,s),o.className="",ae(o,["relative",...r()])):(vo(t),this.appendColHeader(e,t,i,s))}else{const{rootDocument:o}=this.hot,a=o.createElement("div"),l=o.createElement("span"),c=r();a.classList.add("relative",...c),l.className="colHeader",this.settings.ariaTags&&($e(a,...ga()),$e(l,...ga())),this.updateCellHeader(l,e,i,s),a.appendChild(l),t.appendChild(a)}this.hot.runHooks("afterGetColHeader",e,t,s)}updateCellHeader(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=t;const o=this._wt.wtOverlays.getParentOverlay(e)||this._wt;e.parentNode&&(Fe(e,"colHeader")?r=o.wtTable.columnFilter.sourceToRendered(t):Fe(e,"rowHeader")&&(r=o.wtTable.rowFilter.sourceToRendered(t))),r>-1?$u(e,i(t,s)):(Kc(e," "),ae(e,"cornerHeader"))}maximumVisibleElementWidth(e){const i=this._wt.wtViewport.getWorkspaceWidth()-e;return i>0?i:0}maximumVisibleElementHeight(e){const i=this._wt.wtViewport.getWorkspaceHeight()-e;return i>0?i:0}setLastSize(e,t){Lr(yP,this,e),Lr(CP,this,t)}getLastSize(){return{width:Ei(yP,this),height:Ei(CP,this)}}getFirstRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedRow(),1):null}getLastRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedRow(),-1):null}getFirstRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedColumn(),1):null}getLastRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedColumn(),-1):null}getFirstFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleRow())}getLastFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleRow())}getFirstFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleColumn())}getLastFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleColumn())}getFirstPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleRow())}getLastPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleRow())}getFirstPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleColumn())}getLastPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleColumn())}getColumnHeadersCount(){return Ei(vP,this)}getRowHeadersCount(){return Ei(QC,this)}getViewportWidth(){return this._wt.wtViewport.getViewportWidth()}getWorkspaceWidth(){return this._wt.wtViewport.getWorkspaceWidth()}getViewportHeight(){return this._wt.wtViewport.getViewportHeight()}getWorkspaceHeight(){return this._wt.wtViewport.getWorkspaceHeight()}getElementOverlayName(e){var t;return((t=this._wt.wtOverlays.getParentOverlay(e))!==null&&t!==void 0?t:this._wt).wtTable.name}getOverlayByName(e){return this._wt.getOverlayByName(e)}isVisible(){return this._wt.wtTable.isVisible()}destroy(){this._wt.destroy(),this.eventManager.destroy()}}function j5(){return parseInt(this.hot.rootElement.getAttribute(lC()[0]),10)}function lCe(n){const e=Nb(JC,this,j5).call(this)+n;$e(this.hot.rootElement,...lC(e))}const z5="ABCDEFGHIJKLMNOPQRSTUVWXYZ",SP=z5.length;function eS(n){let e=n+1,t="",i;for(;e>0;)i=(e-1)%SP,t=String.fromCharCode(65+i)+t,e=parseInt((e-i)/SP,10);return t}function cCe(n){let e=0;if(n)for(let t=0,i=n.length-1;t<n.length;t+=1,i-=1)e+=SP**i*(z5.indexOf(n[t])+1);return e-=1,e}function hCe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;const t=[];let i,s;for(i=0;i<n;i++){const r=[];for(s=0;s<e;s++)r.push(eS(s)+(i+1));t.push(r)}return t}function uCe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;const t=[];let i,s;for(i=0;i<n;i++){const r={};for(s=0;s<e;s++)r[`prop${s}`]=eS(s)+(i+1);t.push(r)}return t}function dCe(n,e){const t=[];let i;for(let s=0;s<n;s++){i=[];for(let r=0;r<e;r++)i.push("");t.push(i)}return t}function _P(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=n;const i=[];return(!Array.isArray(n)||!Array.isArray(n[0]))&&(t=[n]),t.forEach((s,r)=>{Array.isArray(s)?s.forEach((o,a)=>{i.push([r+e,a,o])}):Object.keys(s).forEach(o=>{i.push([r+e,o,s[o]])})}),i}function RP(n){let e=0;return Array.isArray(n)&&(n[0]&&Array.isArray(n[0])?e=n[0].length:n[0]&&Je(n[0])&&(e=wC(n[0]))),e}function U5(n){return!!(Array.isArray(n)&&n.length&&n.every(e=>Array.isArray(e)))}function Y5(n){return!!(Array.isArray(n)&&n.length&&n.every(e=>typeof e=="object"&&!Array.isArray(e)&&e!==null))}const fCe=Object.freeze(Object.defineProperty({__proto__:null,countFirstRowKeys:RP,createEmptySpreadsheetData:dCe,createSpreadsheetData:hCe,createSpreadsheetObjectData:uCe,dataRowToChangesArray:_P,isArrayOfArrays:U5,isArrayOfObjects:Y5,spreadsheetColumnIndex:cCe,spreadsheetColumnLabel:eS},Symbol.toStringTag,{value:"Module"}));function Lb(n,e,t){return(e=gCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gCe(n){var e=pCe(n,"string");return typeof e=="symbol"?e:e+""}function pCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class mCe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];Lb(this,"hot",void 0),Lb(this,"data",void 0),Lb(this,"dataType","array"),Lb(this,"colToProp",()=>{}),Lb(this,"propToCol",()=>{}),this.hot=e,this.data=t}modifyRowData(e){let t;return this.hot.hasHook("modifyRowData")&&(t=this.hot.runHooks("modifyRowData",e)),t!==void 0&&!Number.isInteger(t)?t:this.data[e]}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return!this.data||this.data.length===0?this.data:this.getByRange(null,null,e)}setData(e){this.data=e}getAtColumn(e){const t=[];return F(this.data,(i,s)=>{const r=this.getAtCell(s,e);t.push(r)}),t}getAtRow(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=t===void 0&&i===void 0,{dataDotNotation:o}=this.hot.getSettings();let a=null,l=null;if(a=this.modifyRowData(e),Array.isArray(a))l=[],r?a.forEach((c,h)=>{l[h]=this.getAtPhysicalCell(e,h,a)}):Oe(t,i,c=>{l[c-t]=this.getAtPhysicalCell(e,c,a)});else if(Je(a)||rn(a))if(s?l=[]:l={},!r||s){const h=this.countFirstRowKeys()-1;Oe(0,h,u=>{const d=this.colToProp(u);if(u>=(t||0)&&u<=(i||h)&&!Number.isInteger(d)){const f=this.getAtPhysicalCell(e,d,a);s?l.push(f):o?bC(l,d,f):l[d]=f}})}else et(a,(c,h)=>{const u=this.getAtPhysicalCell(e,h,a);o?bC(l,h,u):l[h]=u});return l}setAtCell(e,t,i){if(!(e>=this.countRows()||t>=this.countFirstRowKeys())){if(this.hot.hasHook("modifySourceData")){const s=Pr(i);this.hot.runHooks("modifySourceData",e,t,s,"set"),s.isTouched()&&(i=s.value)}Number.isInteger(t)?this.data[e][t]=i:bC(this.data[e],t,i)}}getAtPhysicalCell(e,t,i){let s=null;if(i)if(typeof t=="string"){const{dataDotNotation:r}=this.hot.getSettings();s=r?y6(i,t):i[t]}else typeof t=="function"?s=t(i):s=i[t];if(this.hot.hasHook("modifySourceData")){const r=Pr(s);this.hot.runHooks("modifySourceData",e,t,r,"get"),r.isTouched()&&(s=r.value)}return s}getAtCell(e,t){const i=this.modifyRowData(e);return this.getAtPhysicalCell(e,this.colToProp(t),i)}getByRange(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1,r=null,o=null,a=null,l=null;e===null||t===null?(s=!0,r=0,a=this.countRows()-1):(r=Math.min(e.row,t.row),o=Math.min(e.col,t.col),a=Math.max(e.row,t.row),l=Math.max(e.col,t.col));const c=[];return Oe(r,a,h=>{c.push(s?this.getAtRow(h,void 0,void 0,i):this.getAtRow(h,o,l,i))}),c}countRows(){if(this.hot.hasHook("modifySourceLength")){const e=this.hot.runHooks("modifySourceLength");if(Number.isInteger(e))return e}return this.data.length}countFirstRowKeys(){return RP(this.data)}destroy(){this.data=null,this.hot=null}}function G5(n,e,t){return(e=bCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bCe(n){var e=wCe(n,"string");return typeof e=="symbol"?e:e+""}function wCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Ju{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;G5(this,"indexedValues",[]),G5(this,"initValueOrFn",void 0),this.initValueOrFn=e}getValues(){return this.indexedValues}getValueAtIndex(e){const t=this.indexedValues;if(e<t.length)return t[e]}setValues(e){this.indexedValues=e.slice(),this.runLocalHooks("change")}setValueAtIndex(e,t){return e<this.indexedValues.length?(this.indexedValues[e]=t,this.runLocalHooks("change"),!0):!1}clear(){this.setDefaultValues()}getLength(){return this.getValues().length}setDefaultValues(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.indexedValues.length;this.indexedValues.length=0,rn(this.initValueOrFn)?Oe(e-1,t=>this.indexedValues.push(this.initValueOrFn(t))):Oe(e-1,()=>this.indexedValues.push(this.initValueOrFn)),this.runLocalHooks("change")}init(e){return this.setDefaultValues(e),this.runLocalHooks("init"),this}insert(){this.runLocalHooks("change")}remove(){this.runLocalHooks("change")}destroy(){this.clearLocalHooks(),this.indexedValues=null,this.initValueOrFn=null}}Bt(Ju,Di);function xP(n,e,t,i){const s=t.length?t[0]:void 0;return[...n.slice(0,s),...t.map((r,o)=>rn(i)?i(r,o):i),...s===void 0?[]:n.slice(s)]}function EP(n,e){return kl(n,(t,i)=>e.includes(i)===!1)}class nh extends Ju{insert(e,t){this.indexedValues=xP(this.indexedValues,e,t,this.initValueOrFn),super.insert(e,t)}remove(e){this.indexedValues=EP(this.indexedValues,e),super.remove(e)}}class tS extends nh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;super(e)}getHiddenIndexes(){return Qn(this.getValues(),(e,t,i)=>(t&&e.push(i),e),[])}}function TP(n,e,t){return[...n.slice(0,e),...t,...n.slice(e)]}function $b(n,e){return kl(n,t=>e.includes(t)===!1)}function MP(n,e){return ct(n,t=>t-e.filter(i=>i<t).length)}function AP(n,e){const t=e[0],i=e.length;return ct(n,s=>s>=t?s+i:s)}function vCe(n,e,t){return(e=yCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yCe(n){var e=CCe(n,"string");return typeof e=="symbol"?e:e+""}function CCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class nS extends Ju{constructor(){super(...arguments),vCe(this,"orderOfIndexes",[])}getValues(){return this.orderOfIndexes.map(e=>this.indexedValues[e])}setValues(e){this.orderOfIndexes=[...Array(e.length).keys()],super.setValues(e)}setValueAtIndex(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.orderOfIndexes.length;return e<this.indexedValues.length?(this.indexedValues[e]=t,this.orderOfIndexes.includes(e)===!1&&this.orderOfIndexes.splice(i,0,e),this.runLocalHooks("change"),!0):!1}clearValue(e){this.orderOfIndexes=$b(this.orderOfIndexes,[e]),rn(this.initValueOrFn)?super.setValueAtIndex(e,this.initValueOrFn(e)):super.setValueAtIndex(e,this.initValueOrFn)}getLength(){return this.orderOfIndexes.length}setDefaultValues(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.indexedValues.length;this.orderOfIndexes.length=0,super.setDefaultValues(e)}insert(e,t){this.indexedValues=xP(this.indexedValues,e,t,this.initValueOrFn),this.orderOfIndexes=AP(this.orderOfIndexes,t),super.insert(e,t)}remove(e){this.indexedValues=EP(this.indexedValues,e),this.orderOfIndexes=$b(this.orderOfIndexes,e),this.orderOfIndexes=MP(this.orderOfIndexes,e),super.remove(e)}getEntries(){return this.orderOfIndexes.map(e=>[e,this.getValueAtIndex(e)])}}class Fb extends nh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;super(e)}getTrimmedIndexes(){return Qn(this.getValues(),(e,t,i)=>(t&&e.push(i),e),[])}}const K5=new Map([["indexesSequence",{getListWithInsertedItems:TP,getListWithRemovedItems:$b}],["physicallyIndexed",{getListWithInsertedItems:xP,getListWithRemovedItems:EP}]]),q5=n=>{if(K5.has(n)===!1)throw new Error(`Alter strategy with ID '${n}' does not exist.`);return K5.get(n)};class X5 extends Ju{constructor(){super(e=>e)}insert(e,t){const i=AP(this.indexedValues,t);this.indexedValues=TP(i,e,t),super.insert(e,t)}remove(e){const t=$b(this.indexedValues,e);this.indexedValues=MP(t,e),super.remove(e)}}const Q5=new Map([["hiding",tS],["index",Ju],["linkedPhysicalIndexToValue",nS],["physicalIndexToValue",nh],["trimming",Fb]]);function SCe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Q5.has(n))throw new Error(`The provided map type ("${n}") does not exist.`);return new(Q5.get(n))(e)}function _Ce(n,e,t){return(e=RCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RCe(n){var e=xCe(n,"string");return typeof e=="symbol"?e:e+""}function xCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let PP=0;class IP{constructor(){_Ce(this,"collection",new Map)}register(e,t){this.collection.has(e)===!1&&(this.collection.set(e,t),t.addLocalHook("change",()=>this.runLocalHooks("change",t)),PP+=1)}unregister(e){const t=this.collection.get(e);Me(t)&&(t.destroy(),this.collection.delete(e),this.runLocalHooks("change",t),PP-=1)}unregisterAll(){this.collection.forEach((e,t)=>this.unregister(t)),this.collection.clear()}get(e){return nn(e)?Array.from(this.collection.values()):this.collection.get(e)}getLength(){return this.collection.size}removeFromEvery(e){this.collection.forEach(t=>{t.remove(e)})}insertToEvery(e,t){this.collection.forEach(i=>{i.insert(e,t)})}initEvery(e){this.collection.forEach(t=>{t.init(e)})}}Bt(IP,Di);function ECe(){return PP}function OP(n,e,t){return(e=TCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TCe(n){var e=MCe(n,"string");return typeof e=="symbol"?e:e+""}function MCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Z5 extends IP{constructor(e,t){super(),OP(this,"mergedValuesCache",[]),OP(this,"aggregationFunction",void 0),OP(this,"fallbackValue",void 0),this.aggregationFunction=e,this.fallbackValue=t}getMergedValues(){if((arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0)return this.mergedValuesCache;if(this.getLength()===0)return[];const t=ct(this.get(),r=>r.getValues()),i=[],s=Me(t[0])&&t[0].length||0;for(let r=0;r<s;r+=1){const o=[];for(let a=0;a<this.getLength();a+=1)o.push(t[a][r]);i.push(o)}return ct(i,this.aggregationFunction)}getMergedValueAtIndex(e,t){const i=this.getMergedValues(t)[e];return Me(i)?i:this.fallbackValue}updateCache(){this.mergedValuesCache=this.getMergedValues(!1)}}function ACe(n,e,t){PCe(n,e),e.set(n,t)}function PCe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ICe(n,e,t){return n.set(J5(n,e),t),t}function OCe(n,e){return n.get(J5(n,e))}function J5(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var kP=new WeakMap;class e8{constructor(){ACe(this,kP,[])}subscribe(e){return this.addLocalHook("change",e),this._write(OCe(kP,this)),this}unsubscribe(){return this.runLocalHooks("unsubscribe"),this.clearLocalHooks(),this}_write(e){return e.length>0&&this.runLocalHooks("change",e),this}_writeInitialChanges(e){ICe(kP,this,e)}}Bt(e8,Di);function t8(n,e){const t=[];let i=0,s=0;for(;i<n.length&&s<e.length;i++,s++)n[i]!==e[s]&&t.push({op:"replace",index:s,oldValue:n[i],newValue:e[s]});for(;i<e.length;i++)t.push({op:"insert",index:i,oldValue:void 0,newValue:e[i]});for(;s<n.length;s++)t.push({op:"remove",index:s,oldValue:n[s],newValue:void 0});return t}function Bb(n,e,t){kCe(n,e),e.set(n,t)}function kCe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $r(n,e){return n.get(n8(n,e))}function iS(n,e,t){return n.set(n8(n,e),t),t}function n8(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var sS=new WeakMap,Vb=new WeakMap,rS=new WeakMap,oS=new WeakMap,aS=new WeakMap;class HCe{constructor(){let{initialIndexValue:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Bb(this,sS,new Set),Bb(this,Vb,[]),Bb(this,rS,[]),Bb(this,oS,!1),Bb(this,aS,!1),iS(aS,this,e??!1)}createObserver(){const e=new e8;return $r(sS,this).add(e),e.addLocalHook("unsubscribe",()=>{$r(sS,this).delete(e)}),e._writeInitialChanges(t8($r(Vb,this),$r(rS,this))),e}emit(e){let t=$r(rS,this);(!$r(oS,this)||$r(Vb,this).length!==e.length)&&(e.length===0?e=new Array(t.length).fill($r(aS,this)):iS(Vb,this,new Array(e.length).fill($r(aS,this))),$r(oS,this)||(iS(oS,this,!0),t=$r(Vb,this)));const i=t8(t,e);$r(sS,this).forEach(s=>s._write(i)),iS(rS,this,e)}}function us(n,e,t){return(e=DCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DCe(n){var e=NCe(n,"string");return typeof e=="symbol"?e:e+""}function NCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class HP{constructor(){us(this,"indexesSequence",new X5),us(this,"trimmingMapsCollection",new Z5(e=>e.some(t=>t===!0),!1)),us(this,"hidingMapsCollection",new Z5(e=>e.some(t=>t===!0),!1)),us(this,"variousMapsCollection",new IP),us(this,"hidingChangesObservable",new HCe({initialIndexValue:!1})),us(this,"notTrimmedIndexesCache",[]),us(this,"notHiddenIndexesCache",[]),us(this,"isBatched",!1),us(this,"indexesSequenceChanged",!1),us(this,"indexesChangeSource",void 0),us(this,"trimmedIndexesChanged",!1),us(this,"hiddenIndexesChanged",!1),us(this,"renderablePhysicalIndexesCache",[]),us(this,"fromPhysicalToVisualIndexesCache",new Map),us(this,"fromVisualToRenderableIndexesCache",new Map),this.indexesSequence.addLocalHook("change",()=>{this.indexesSequenceChanged=!0,this.updateCache(),this.runLocalHooks("indexesSequenceChange",this.indexesChangeSource),this.runLocalHooks("change",this.indexesSequence,null)}),this.trimmingMapsCollection.addLocalHook("change",e=>{this.trimmedIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",e,this.trimmingMapsCollection)}),this.hidingMapsCollection.addLocalHook("change",e=>{this.hiddenIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",e,this.hidingMapsCollection)}),this.variousMapsCollection.addLocalHook("change",e=>{this.runLocalHooks("change",e,this.variousMapsCollection)})}suspendOperations(){this.isBatched=!0}resumeOperations(){this.isBatched=!1,this.updateCache()}createChangesObserver(e){if(e!=="hiding")throw new Error(`Unsupported index map type "${e}".`);return this.hidingChangesObservable.createObserver()}createAndRegisterIndexMap(e,t,i){return this.registerMap(e,SCe(t,i))}registerMap(e,t){if(this.trimmingMapsCollection.get(e)||this.hidingMapsCollection.get(e)||this.variousMapsCollection.get(e))throw Error(`Map with name "${e}" has been already registered.`);t instanceof Fb?this.trimmingMapsCollection.register(e,t):t instanceof tS?this.hidingMapsCollection.register(e,t):this.variousMapsCollection.register(e,t);const i=this.getNumberOfIndexes();return i>0&&t.init(i),t}unregisterMap(e){this.trimmingMapsCollection.unregister(e),this.hidingMapsCollection.unregister(e),this.variousMapsCollection.unregister(e)}unregisterAll(){this.trimmingMapsCollection.unregisterAll(),this.hidingMapsCollection.unregisterAll(),this.variousMapsCollection.unregisterAll()}getPhysicalFromVisualIndex(e){const t=this.notTrimmedIndexesCache[e];return Me(t)?t:null}getPhysicalFromRenderableIndex(e){const t=this.renderablePhysicalIndexesCache[e];return Me(t)?t:null}getVisualFromPhysicalIndex(e){const t=this.fromPhysicalToVisualIndexesCache.get(e);return Me(t)?t:null}getVisualFromRenderableIndex(e){return this.getVisualFromPhysicalIndex(this.getPhysicalFromRenderableIndex(e))}getRenderableFromVisualIndex(e){const t=this.fromVisualToRenderableIndexesCache.get(e);return Me(t)?t:null}getNearestNotHiddenIndex(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.getPhysicalFromVisualIndex(e)===null)return null;if(this.fromVisualToRenderableIndexesCache.has(e))return e;const r=Array.from(this.fromVisualToRenderableIndexesCache.keys());let o=-1;return t>0?o=r.findIndex(a=>a>e):o=r.reverse().findIndex(a=>a<e),o===-1?i?this.getNearestNotHiddenIndex(e,-t,!1):null:r[o]}initToLength(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNumberOfIndexes();this.notTrimmedIndexesCache=[...new Array(e).keys()],this.notHiddenIndexesCache=[...new Array(e).keys()],this.suspendOperations(),this.indexesChangeSource="init",this.indexesSequence.init(e),this.indexesChangeSource=void 0,this.trimmingMapsCollection.initEvery(e),this.resumeOperations(),this.suspendOperations(),this.hidingMapsCollection.initEvery(e),this.variousMapsCollection.initEvery(e),this.resumeOperations(),this.runLocalHooks("init")}fitToLength(e){const t=this.getNumberOfIndexes();if(e<t){const i=[...Array(this.getNumberOfIndexes()-e).keys()].map(s=>s+e);this.removeIndexes(i)}else this.insertIndexes(t,e-t)}getIndexesSequence(){return this.indexesSequence.getValues()}setIndexesSequence(e){this.indexesChangeSource===void 0&&(this.indexesChangeSource="update"),this.indexesSequence.setValues(e),this.indexesChangeSource==="update"&&(this.indexesChangeSource=void 0)}getNotTrimmedIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.notTrimmedIndexesCache:this.getIndexesSequence().filter(i=>this.isTrimmed(i)===!1)}getNotTrimmedIndexesLength(){return this.getNotTrimmedIndexes().length}getNotHiddenIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.notHiddenIndexesCache:this.getIndexesSequence().filter(i=>this.isHidden(i)===!1)}getNotHiddenIndexesLength(){return this.getNotHiddenIndexes().length}getRenderableIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.renderablePhysicalIndexesCache:this.getNotTrimmedIndexes().filter(i=>this.isHidden(i)===!1)}getRenderableIndexesLength(){return this.getRenderableIndexes().length}getNumberOfIndexes(){return this.getIndexesSequence().length}moveIndexes(e,t){typeof e=="number"&&(e=[e]);const i=ct(e,c=>this.getPhysicalFromVisualIndex(c)),s=this.getNotTrimmedIndexesLength(),r=e.length,o=$b(this.getIndexesSequence(),i),a=o.filter(c=>this.isTrimmed(c)===!1);let l=o.indexOf(a[a.length-1])+1;if(t+r<s){const c=a[t];l=o.indexOf(c)}this.indexesChangeSource="move",this.setIndexesSequence(TP(o,l,i)),this.indexesChangeSource=void 0}isTrimmed(e){return this.trimmingMapsCollection.getMergedValueAtIndex(e)}isHidden(e){return this.hidingMapsCollection.getMergedValueAtIndex(e)}insertIndexes(e,t){const i=this.getNotTrimmedIndexes()[e],s=Me(i)?i:this.getNumberOfIndexes(),r=this.getIndexesSequence().includes(i)?this.getIndexesSequence().indexOf(i):this.getNumberOfIndexes(),o=ct(new Array(t).fill(s),(a,l)=>a+l);this.suspendOperations(),this.indexesChangeSource="insert",this.indexesSequence.insert(r,o),this.indexesChangeSource=void 0,this.trimmingMapsCollection.insertToEvery(r,o),this.hidingMapsCollection.insertToEvery(r,o),this.variousMapsCollection.insertToEvery(r,o),this.resumeOperations()}removeIndexes(e){this.suspendOperations(),this.indexesChangeSource="remove",this.indexesSequence.remove(e),this.indexesChangeSource=void 0,this.trimmingMapsCollection.removeFromEvery(e),this.hidingMapsCollection.removeFromEvery(e),this.variousMapsCollection.removeFromEvery(e),this.resumeOperations()}updateCache(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=this.indexesSequenceChanged||this.trimmedIndexesChanged||this.hiddenIndexesChanged;(e===!0||this.isBatched===!1&&t===!0)&&(this.trimmingMapsCollection.updateCache(),this.hidingMapsCollection.updateCache(),this.notTrimmedIndexesCache=this.getNotTrimmedIndexes(!1),this.notHiddenIndexesCache=this.getNotHiddenIndexes(!1),this.renderablePhysicalIndexesCache=this.getRenderableIndexes(!1),this.cacheFromPhysicalToVisualIndexes(),this.cacheFromVisualToRenderableIndexes(),this.hiddenIndexesChanged&&this.hidingChangesObservable.emit(this.hidingMapsCollection.getMergedValues()),this.runLocalHooks("cacheUpdated",{indexesSequenceChanged:this.indexesSequenceChanged,trimmedIndexesChanged:this.trimmedIndexesChanged,hiddenIndexesChanged:this.hiddenIndexesChanged}),this.indexesSequenceChanged=!1,this.trimmedIndexesChanged=!1,this.hiddenIndexesChanged=!1)}cacheFromPhysicalToVisualIndexes(){const e=this.getNotTrimmedIndexesLength();this.fromPhysicalToVisualIndexesCache.clear();for(let t=0;t<e;t+=1){const i=this.getPhysicalFromVisualIndex(t);this.fromPhysicalToVisualIndexesCache.set(i,t)}}cacheFromVisualToRenderableIndexes(){const e=this.getRenderableIndexesLength();this.fromVisualToRenderableIndexesCache.clear();for(let t=0;t<e;t+=1){const i=this.getPhysicalFromRenderableIndex(t),s=this.getVisualFromPhysicalIndex(i);this.fromVisualToRenderableIndexesCache.set(s,t)}}}Bt(HP,Di);function LCe(n,e){return et(e,(t,i)=>{nn(n[i])&&(n[i]=t)}),n}function i8(n){const t=/^([a-zA-Z]{2})-([a-zA-Z]{2})$/.exec(n);return t?`${t[1].toLowerCase()}-${t[2].toUpperCase()}`:n}function s8(n){Me(n)&&xA(Ft`Language with code "${n}" was not found. You should register particular language\x20
    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.`)}function $Ce(n,e){return Array.isArray(n)&&Number.isInteger(e)?n[e]:n}const{register:FCe,getValues:BCe}=So("phraseFormatters");function VCe(n,e){FCe(n,e)}function WCe(){return BCe()}VCe("pluralize",$Ce);const r8="ContextMenu:items",Qe=r8,DP=`${Qe}.noItems`,NP=`${Qe}.insertRowAbove`,LP=`${Qe}.insertRowBelow`,$P=`${Qe}.insertColumnOnTheLeft`,FP=`${Qe}.insertColumnOnTheRight`,BP=`${Qe}.removeRow`,VP=`${Qe}.removeColumn`,WP=`${Qe}.undo`,jP=`${Qe}.redo`,lS=`${Qe}.readOnly`,zP=`${Qe}.clearColumn`,UP=`${Qe}.copy`,YP=`${Qe}.copyWithHeaders`,GP=`${Qe}.copyWithGroupHeaders`,KP=`${Qe}.copyHeadersOnly`,qP=`${Qe}.cut`,XP=`${Qe}.freezeColumn`,QP=`${Qe}.unfreezeColumn`,ZP=`${Qe}.mergeCells`,JP=`${Qe}.unmergeCells`,eI=`${Qe}.addComment`,tI=`${Qe}.editComment`,nI=`${Qe}.removeComment`,iI=`${Qe}.readOnlyComment`,sI=`${Qe}.align`,cS=`${Qe}.align.left`,hS=`${Qe}.align.center`,uS=`${Qe}.align.right`,dS=`${Qe}.align.justify`,fS=`${Qe}.align.top`,gS=`${Qe}.align.middle`,pS=`${Qe}.align.bottom`,rI=`${Qe}.borders`,oI=`${Qe}.borders.top`,aI=`${Qe}.borders.right`,lI=`${Qe}.borders.bottom`,cI=`${Qe}.borders.left`,hI=`${Qe}.borders.remove`,uI=`${Qe}.nestedHeaders.insertChildRow`,dI=`${Qe}.nestedHeaders.detachFromParent`,fI=`${Qe}.hideColumn`,gI=`${Qe}.showColumn`,pI=`${Qe}.hideRow`,mI=`${Qe}.showRow`,ds="Filters:",Pn=`${ds}conditions`,mS=`${Pn}.none`,bI=`${Pn}.isEmpty`,wI=`${Pn}.isNotEmpty`,vI=`${Pn}.isEqualTo`,yI=`${Pn}.isNotEqualTo`,CI=`${Pn}.beginsWith`,SI=`${Pn}.endsWith`,_I=`${Pn}.contains`,RI=`${Pn}.doesNotContain`,jCe=`${Pn}.byValue`,xI=`${Pn}.greaterThan`,EI=`${Pn}.greaterThanOrEqualTo`,TI=`${Pn}.lessThan`,MI=`${Pn}.lessThanOrEqualTo`,AI=`${Pn}.isBetween`,PI=`${Pn}.isNotBetween`,II=`${Pn}.after`,OI=`${Pn}.before`,kI=`${Pn}.today`,HI=`${Pn}.tomorrow`,DI=`${Pn}.yesterday`,NI=`${ds}labels.filterByCondition`,LI=`${ds}labels.filterByValue`,$I=`${ds}labels.conjunction`,bS=`${ds}labels.disjunction`,wS=`${ds}values.blankCells`,FI=`${ds}buttons.selectAll`,BI=`${ds}buttons.clear`,VI=`${ds}buttons.ok`,WI=`${ds}buttons.cancel`,jI=`${ds}buttons.placeholder.search`,zI=`${ds}buttons.placeholder.value`,UI=`${ds}buttons.placeholder.secondValue`,YI="CheckboxRenderer:",GI=`${YI}checked`,KI=`${YI}unchecked`,zCe=Object.freeze(Object.defineProperty({__proto__:null,CHECKBOX_CHECKED:GI,CHECKBOX_RENDERER_NAMESPACE:YI,CHECKBOX_UNCHECKED:KI,CONTEXTMENU_ITEMS_ADD_COMMENT:eI,CONTEXTMENU_ITEMS_ALIGNMENT:sI,CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM:pS,CONTEXTMENU_ITEMS_ALIGNMENT_CENTER:hS,CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY:dS,CONTEXTMENU_ITEMS_ALIGNMENT_LEFT:cS,CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE:gS,CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT:uS,CONTEXTMENU_ITEMS_ALIGNMENT_TOP:fS,CONTEXTMENU_ITEMS_BORDERS:rI,CONTEXTMENU_ITEMS_BORDERS_BOTTOM:lI,CONTEXTMENU_ITEMS_BORDERS_LEFT:cI,CONTEXTMENU_ITEMS_BORDERS_RIGHT:aI,CONTEXTMENU_ITEMS_BORDERS_TOP:oI,CONTEXTMENU_ITEMS_CLEAR_COLUMN:zP,CONTEXTMENU_ITEMS_COPY:UP,CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY:KP,CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS:GP,CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS:YP,CONTEXTMENU_ITEMS_CUT:qP,CONTEXTMENU_ITEMS_EDIT_COMMENT:tI,CONTEXTMENU_ITEMS_FREEZE_COLUMN:XP,CONTEXTMENU_ITEMS_HIDE_COLUMN:fI,CONTEXTMENU_ITEMS_HIDE_ROW:pI,CONTEXTMENU_ITEMS_INSERT_LEFT:$P,CONTEXTMENU_ITEMS_INSERT_RIGHT:FP,CONTEXTMENU_ITEMS_MERGE_CELLS:ZP,CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD:dI,CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD:uI,CONTEXTMENU_ITEMS_NO_ITEMS:DP,CONTEXTMENU_ITEMS_READ_ONLY:lS,CONTEXTMENU_ITEMS_READ_ONLY_COMMENT:iI,CONTEXTMENU_ITEMS_REDO:jP,CONTEXTMENU_ITEMS_REMOVE_BORDERS:hI,CONTEXTMENU_ITEMS_REMOVE_COLUMN:VP,CONTEXTMENU_ITEMS_REMOVE_COMMENT:nI,CONTEXTMENU_ITEMS_REMOVE_ROW:BP,CONTEXTMENU_ITEMS_ROW_ABOVE:NP,CONTEXTMENU_ITEMS_ROW_BELOW:LP,CONTEXTMENU_ITEMS_SHOW_COLUMN:gI,CONTEXTMENU_ITEMS_SHOW_ROW:mI,CONTEXTMENU_ITEMS_UNDO:WP,CONTEXTMENU_ITEMS_UNFREEZE_COLUMN:QP,CONTEXTMENU_ITEMS_UNMERGE_CELLS:JP,CONTEXT_MENU_ITEMS_NAMESPACE:r8,FILTERS_BUTTONS_CANCEL:WI,FILTERS_BUTTONS_CLEAR:BI,FILTERS_BUTTONS_OK:VI,FILTERS_BUTTONS_PLACEHOLDER_SEARCH:jI,FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE:UI,FILTERS_BUTTONS_PLACEHOLDER_VALUE:zI,FILTERS_BUTTONS_SELECT_ALL:FI,FILTERS_CONDITIONS_AFTER:II,FILTERS_CONDITIONS_BEFORE:OI,FILTERS_CONDITIONS_BEGINS_WITH:CI,FILTERS_CONDITIONS_BETWEEN:AI,FILTERS_CONDITIONS_BY_VALUE:jCe,FILTERS_CONDITIONS_CONTAINS:_I,FILTERS_CONDITIONS_EMPTY:bI,FILTERS_CONDITIONS_ENDS_WITH:SI,FILTERS_CONDITIONS_EQUAL:vI,FILTERS_CONDITIONS_GREATER_THAN:xI,FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL:EI,FILTERS_CONDITIONS_LESS_THAN:TI,FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL:MI,FILTERS_CONDITIONS_NAMESPACE:Pn,FILTERS_CONDITIONS_NONE:mS,FILTERS_CONDITIONS_NOT_BETWEEN:PI,FILTERS_CONDITIONS_NOT_CONTAIN:RI,FILTERS_CONDITIONS_NOT_EMPTY:wI,FILTERS_CONDITIONS_NOT_EQUAL:yI,FILTERS_CONDITIONS_TODAY:kI,FILTERS_CONDITIONS_TOMORROW:HI,FILTERS_CONDITIONS_YESTERDAY:DI,FILTERS_DIVS_FILTER_BY_CONDITION:NI,FILTERS_DIVS_FILTER_BY_VALUE:LI,FILTERS_LABELS_CONJUNCTION:$I,FILTERS_LABELS_DISJUNCTION:bS,FILTERS_NAMESPACE:ds,FILTERS_VALUES_BLANK_CELLS:wS},Symbol.toStringTag,{value:"Module"}));/**
 * @preserve
 * Authors: Handsoncode
 * Last updated: Nov 15, 2017
 *
 * Description: Definition file for English - United States language-country.
 */const o8={languageCode:"en-US",[DP]:"No available options",[NP]:"Insert row above",[LP]:"Insert row below",[$P]:"Insert column left",[FP]:"Insert column right",[BP]:["Remove row","Remove rows"],[VP]:["Remove column","Remove columns"],[WP]:"Undo",[jP]:"Redo",[lS]:"Read only",[zP]:"Clear column",[sI]:"Alignment",[cS]:"Left",[hS]:"Center",[uS]:"Right",[dS]:"Justify",[fS]:"Top",[gS]:"Middle",[pS]:"Bottom",[XP]:"Freeze column",[QP]:"Unfreeze column",[rI]:"Borders",[oI]:"Top",[aI]:"Right",[lI]:"Bottom",[cI]:"Left",[hI]:"Remove border(s)",[eI]:"Add comment",[tI]:"Edit comment",[nI]:"Delete comment",[iI]:"Read-only comment",[ZP]:"Merge cells",[JP]:"Unmerge cells",[UP]:"Copy",[YP]:["Copy with header","Copy with headers"],[GP]:["Copy with group header","Copy with group headers"],[KP]:["Copy header only","Copy headers only"],[qP]:"Cut",[uI]:"Insert child row",[dI]:"Detach from parent",[fI]:["Hide column","Hide columns"],[gI]:["Show column","Show columns"],[pI]:["Hide row","Hide rows"],[mI]:["Show row","Show rows"],[mS]:"None",[bI]:"Is empty",[wI]:"Is not empty",[vI]:"Is equal to",[yI]:"Is not equal to",[CI]:"Begins with",[SI]:"Ends with",[_I]:"Contains",[RI]:"Does not contain",[xI]:"Greater than",[EI]:"Greater than or equal to",[TI]:"Less than",[MI]:"Less than or equal to",[AI]:"Is between",[PI]:"Is not between",[II]:"After",[OI]:"Before",[kI]:"Today",[HI]:"Tomorrow",[DI]:"Yesterday",[wS]:"Blank cells",[NI]:"Filter by condition",[LI]:"Filter by value",[$I]:"And",[bS]:"Or",[FI]:"Select all",[BI]:"Clear",[VI]:"OK",[WI]:"Cancel",[jI]:"Search",[zI]:"Value",[UI]:"Second value",[GI]:"Checked",[KI]:"Unchecked"},UCe=zCe,qI=o8.languageCode,{register:YCe,getItem:a8,hasItem:GCe,getValues:KCe}=So("languagesDictionaries");l8(o8);function l8(n,e){let t=n,i=e;return Je(n)&&(i=n,t=i.languageCode),qCe(t,i),YCe(t,qi(i)),qi(i)}function qCe(n,e){n!==qI&&LCe(e,a8(qI))}function c8(n){return XI(n)?qi(a8(n)):null}function XI(n){return GCe(n)}function XCe(){return KCe()}function h8(n,e,t){const i=c8(n);if(i===null)return null;const s=i[e];if(nn(s))return null;const r=QCe(s,t);return Array.isArray(r)?r[0]:r}function QCe(n,e){let t=n;return F(WCe(),i=>{t=i(n,e)}),t}function ZCe(n){let e=i8(n);return XI(e)||(e=qI,s8(n)),e}function JCe(n,e,t){return(e=eSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eSe(n){var e=tSe(n,"string");return typeof e=="symbol"?e:e+""}function tSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Vl extends T5{constructor(e,t){super(e,null),JCe(this,"visualCellRange",null),this.visualCellRange=t||null,this.commit()}add(e){return this.visualCellRange===null?this.visualCellRange=this.settings.createCellRange(e):this.visualCellRange.expand(e),this}clear(){return this.visualCellRange=null,super.clear()}trimToVisibleCellsRangeOnly(e){let{from:t,to:i}=e,s=this.getNearestNotHiddenCoords(t,1),r=this.getNearestNotHiddenCoords(i,-1);return s===null||r===null?null:((s.row>r.row||s.col>r.col)&&(s=t,r=i),this.settings.createCellRange(s,s,r))}getNearestNotHiddenCoords(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t;const s=this.getNearestNotHiddenIndex(this.settings.rowIndexMapper,e.row,t);if(s===null)return null;const r=this.getNearestNotHiddenIndex(this.settings.columnIndexMapper,e.col,i);return r===null?null:this.settings.createCellCoords(s,r)}getNearestNotHiddenIndex(e,t,i){return t<0?t:e.getNearestNotHiddenIndex(t,i)}commit(){if(this.visualCellRange===null)return this;const e=this.trimToVisibleCellsRangeOnly(this.visualCellRange);return e===null?this.cellRange=null:this.cellRange=this.createRenderableCellRange(e.from,e.to),this}syncWith(e){const t=e.from.clone().normalize(),i=e.getVerticalDirection()==="N-S"?1:-1,s=e.getHorizontalDirection()==="W-E"?1:-1,r=this.settings.visualToRenderableCoords(this.visualCellRange.highlight);let o=null;if((r===null||r.col===null||r.row===null)&&(o=this.getNearestNotHiddenCoords(t,i,s)),o!==null&&e.overlaps(o)){const a=e.highlight.clone();if(a.row>=0&&(a.row=o.row),a.col>=0&&(a.col=o.col),this.cellRange===null){const l=this.settings.visualToRenderableCoords(a);this.cellRange=this.settings.createCellRange(l)}e.setHighlight(a)}return this.settings.selectionType==="focus"&&r!==null&&o===null&&e.setHighlight(this.visualCellRange.highlight),this}getCorners(){const{from:e,to:t}=this.cellRange;return[Math.min(e.row,t.row),Math.min(e.col,t.col),Math.max(e.row,t.row),Math.max(e.col,t.col)]}getVisualCorners(){const e=this.settings.renderableToVisualCoords(this.cellRange.getTopStartCorner()),t=this.settings.renderableToVisualCoords(this.cellRange.getBottomEndCorner());return[e.row,e.col,t.row,t.col]}createRenderableCellRange(e,t){const i=this.settings.visualToRenderableCoords(e),s=this.settings.visualToRenderableCoords(t);return i.row===null||i.col===null||s.row===null||s.col===null?null:this.settings.createCellRange(i,i,s)}}function QI(n){let{activeHeaderClassName:e,...t}=n;return new Vl({className:e,...t,selectionType:M5})}function nSe(n){let{areaCornerVisible:e,...t}=n;return new Vl({className:"area",createLayers:!0,border:{width:1,color:"#4b89ff",cornerVisible:e},...t,selectionType:oP})}function iSe(n){let{...e}=n;return new Vl({className:"highlight",...e,selectionType:oP})}function sSe(n){let{columnClassName:e,...t}=n;return new Vl({className:e,...t,selectionType:M0e})}function rSe(n){let{cellCornerVisible:e,...t}=n;return new Vl({className:"current",headerAttributes:[eA()],border:{width:2,color:"#4b89ff",cornerVisible:e},...t,selectionType:aP})}function oSe(n){let{border:e,visualCellRange:t,...i}=n;return new Vl({...e,...i,selectionType:A0e},t)}function aSe(n){let{...e}=n;return new Vl({className:"fill",border:{width:1,color:"#ff0000"},...e,selectionType:E0e})}function u8(n){let{headerClassName:e,...t}=n;return new Vl({className:e,...t,selectionType:rP})}function lSe(n){let{rowClassName:e,...t}=n;return new Vl({className:e,...t,selectionType:T0e})}function cSe(n,e){hSe(n,e),e.add(n)}function hSe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ps(n,e,t){return(e=uSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uSe(n){var e=dSe(n,"string");return typeof e=="symbol"?e:e+""}function dSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Wl(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ca=new WeakSet;class fSe{constructor(e){cSe(this,Ca),Ps(this,"options",void 0),Ps(this,"layerLevel",0),Ps(this,"focus",void 0),Ps(this,"fill",void 0),Ps(this,"layeredAreas",new Map),Ps(this,"areas",new Map),Ps(this,"rowHeaders",new Map),Ps(this,"columnHeaders",new Map),Ps(this,"activeRowHeaders",new Map),Ps(this,"activeColumnHeaders",new Map),Ps(this,"activeCornerHeaders",new Map),Ps(this,"rowHighlights",new Map),Ps(this,"columnHighlights",new Map),Ps(this,"customSelections",[]),this.options=e,this.focus=rSe(e),this.fill=aSe(e)}isEnabledFor(e,t){let i=e;e===aP&&(i="current");let s=this.options.disabledCellSelection(t.row,t.col);return typeof s=="string"&&(s=[s]),s===!1||Array.isArray(s)&&!s.includes(i)}useLayerLevel(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.layerLevel=e,this}getFocus(){return this.focus}getFill(){return this.fill}createLayeredArea(){return Wl(Ca,this,jl).call(this,this.layeredAreas,nSe)}getLayeredAreas(){return[...this.layeredAreas.values()]}createArea(){return Wl(Ca,this,jl).call(this,this.areas,iSe)}getAreas(){return[...this.areas.values()]}createRowHeader(){return Wl(Ca,this,jl).call(this,this.rowHeaders,u8)}getRowHeaders(){return[...this.rowHeaders.values()]}createColumnHeader(){return Wl(Ca,this,jl).call(this,this.columnHeaders,u8)}getColumnHeaders(){return[...this.columnHeaders.values()]}createActiveRowHeader(){return Wl(Ca,this,jl).call(this,this.activeRowHeaders,QI)}getActiveRowHeaders(){return[...this.activeRowHeaders.values()]}createActiveColumnHeader(){return Wl(Ca,this,jl).call(this,this.activeColumnHeaders,QI)}getActiveColumnHeaders(){return[...this.activeColumnHeaders.values()]}createActiveCornerHeader(){return Wl(Ca,this,jl).call(this,this.activeCornerHeaders,QI)}getActiveCornerHeaders(){return[...this.activeCornerHeaders.values()]}createRowHighlight(){return Wl(Ca,this,jl).call(this,this.rowHighlights,lSe)}getRowHighlights(){return[...this.rowHighlights.values()]}createColumnHighlight(){return Wl(Ca,this,jl).call(this,this.columnHighlights,sSe)}getColumnHighlights(){return[...this.columnHighlights.values()]}getCustomSelections(){return[...this.customSelections.values()]}addCustomSelection(e){this.customSelections.push(oSe({...this.options,...e}))}clear(){this.focus.clear(),this.fill.clear(),F(this.areas.values(),e=>void e.clear()),F(this.layeredAreas.values(),e=>void e.clear()),F(this.rowHeaders.values(),e=>void e.clear()),F(this.columnHeaders.values(),e=>void e.clear()),F(this.activeRowHeaders.values(),e=>void e.clear()),F(this.activeColumnHeaders.values(),e=>void e.clear()),F(this.activeCornerHeaders.values(),e=>void e.clear()),F(this.rowHighlights.values(),e=>void e.clear()),F(this.columnHighlights.values(),e=>void e.clear())}[Symbol.iterator](){return[this.focus,this.fill,...this.areas.values(),...this.layeredAreas.values(),...this.rowHeaders.values(),...this.columnHeaders.values(),...this.activeRowHeaders.values(),...this.activeColumnHeaders.values(),...this.activeCornerHeaders.values(),...this.rowHighlights.values(),...this.columnHighlights.values(),...this.customSelections][Symbol.iterator]()}}function jl(n,e){const t=this.layerLevel;if(n.has(t))return n.get(t);const i=e({layerLevel:t,...this.options});return n.set(t,i),i}function d8(n,e,t){return(e=gSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gSe(n){var e=pSe(n,"string");return typeof e=="symbol"?e:e+""}function pSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class mSe{constructor(e){d8(this,"ranges",[]),d8(this,"createCellRange",void 0),this.createCellRange=e}isEmpty(){return this.size()===0}set(e){return this.clear(),this.ranges.push(this.createCellRange(e)),this}add(e){return this.ranges.push(this.createCellRange(e)),this}pop(){return this.ranges.pop(),this}current(){return this.peekByIndex(this.size()-1)}previous(){return this.peekByIndex(this.size()-2)}includes(e){return this.ranges.some(t=>t.includes(e))}clear(){return this.ranges.length=0,this}size(){return this.ranges.length}peekByIndex(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t;return e>=0&&e<this.size()&&(t=this.ranges[e]),t}[Symbol.iterator](){return this.ranges[Symbol.iterator]()}}function bSe(n,e){f8(n,e),e.add(n)}function ZI(n,e,t){f8(n,e),e.set(n,t)}function f8(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rt(n,e){return n.get(ai(n,e))}function vS(n,e,t){return n.set(ai(n,e),t),t}function ai(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var yS=new WeakMap,hn=new WeakMap,Mo=new WeakMap,fi=new WeakSet;class JI{constructor(e,t){bSe(this,fi),ZI(this,yS,void 0),ZI(this,hn,void 0),ZI(this,Mo,{x:0,y:0}),vS(yS,this,e),vS(hn,this,t)}transformStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=Rt(hn,this).createCellCoords(e,t);let r=Rt(yS,this).current().highlight;const o=Rt(hn,this).visualToRenderableCoords(r);let a=0,l=0;if(this.runLocalHooks("beforeTransformStart",s),o.row!==null&&o.col!==null){const{width:c,height:h}=ai(fi,this,p8).call(this),{row:u,col:d}=ai(fi,this,m8).call(this,r),f=Rt(hn,this).fixedRowsBottom(),g=Rt(hn,this).minSpareRows(),p=Rt(hn,this).minSpareCols(),m=Rt(hn,this).autoWrapRow(),w=Rt(hn,this).autoWrapCol(),y=Rt(hn,this).createCellCoords(u+s.row,d+s.col);if(y.row>=h){const _=Pr(i&&g>0&&f===0),x=y.col+1,M=Rt(hn,this).createCellCoords(y.row-h,x>=c?x-c:x);this.runLocalHooks("beforeColumnWrap",_,ai(fi,this,gg).call(this,M),x>=c),_.value?this.runLocalHooks("insertRowRequire",Rt(hn,this).countRenderableRows()):w&&y.assign(M)}else if(y.row<0){const _=Pr(w),x=y.col-1,M=Rt(hn,this).createCellCoords(h+y.row,x<0?c+x:x);this.runLocalHooks("beforeColumnWrap",_,ai(fi,this,gg).call(this,M),x<0),w&&y.assign(M)}if(y.col>=c){const _=Pr(i&&p>0),x=y.row+1,M=Rt(hn,this).createCellCoords(x>=h?x-h:x,y.col-c);this.runLocalHooks("beforeRowWrap",_,ai(fi,this,gg).call(this,M),x>=h),_.value?this.runLocalHooks("insertColRequire",Rt(hn,this).countRenderableColumns()):m&&y.assign(M)}else if(y.col<0){const _=Pr(m),x=y.row-1,M=Rt(hn,this).createCellCoords(x<0?h+x:x,c+y.col);this.runLocalHooks("beforeRowWrap",_,ai(fi,this,gg).call(this,M),x<0),m&&y.assign(M)}const{rowDir:C,colDir:R}=ai(fi,this,g8).call(this,y);a=C,l=R,r=ai(fi,this,gg).call(this,y)}return this.runLocalHooks("afterTransformStart",r,a,l),r}transformEnd(e,t){const i=Rt(hn,this).createCellCoords(e,t),s=Rt(yS,this).current(),r=Rt(hn,this).visualToRenderableCoords(s.highlight),o=ai(fi,this,eO).call(this,s.to.row,s.from.row),a=ai(fi,this,tO).call(this,s.to.col,s.from.col),l=s.to.clone();let c=0,h=0;if(this.runLocalHooks("beforeTransformEnd",i),r.row!==null&&r.col!==null&&o!==null&&a!==null){const{row:u,col:d}=ai(fi,this,m8).call(this,s.highlight),f=Rt(hn,this).createCellCoords(o+i.row,a+i.col),g=s.getTopStartCorner(),p=s.getTopEndCorner(),m=s.getBottomEndCorner();if(i.col<0&&a>=d&&f.col<d){const R=f.col-d;f.col=ai(fi,this,tO).call(this,g.col,p.col)+R}else if(i.col>0&&a<=d&&f.col>d){const R=ai(fi,this,tO).call(this,p.col,g.col),_=Math.max(f.col-R,1);f.col=R+_}if(i.row<0&&o>=u&&f.row<u){const R=f.row-u;f.row=ai(fi,this,eO).call(this,g.row,m.row)+R}else if(i.row>0&&o<=u&&f.row>u){const R=ai(fi,this,eO).call(this,m.row,g.row),_=Math.max(f.row-R,1);f.row=R+_}const{rowDir:w,colDir:y}=ai(fi,this,g8).call(this,f);c=w,h=y;const C=ai(fi,this,gg).call(this,f);i.row===0&&i.col!==0?l.col=C.col:i.row!==0&&i.col===0?l.row=C.row:(l.row=C.row,l.col=C.col)}return this.runLocalHooks("afterTransformEnd",l,c,h),l}setOffsetSize(e){let{x:t,y:i}=e;vS(Mo,this,{x:t,y:i})}resetOffsetSize(){vS(Mo,this,{x:0,y:0})}}function g8(n){const{width:e,height:t}=ai(fi,this,p8).call(this);let i=0,s=0;return n.row<0?(i=-1,n.row=0):n.row>0&&n.row>=t&&(i=1,n.row=t-1),n.col<0?(s=-1,n.col=0):n.col>0&&n.col>=e&&(s=1,n.col=e-1),{rowDir:i,colDir:s}}function p8(){return{width:Rt(Mo,this).x+Rt(hn,this).countRenderableColumns(),height:Rt(Mo,this).y+Rt(hn,this).countRenderableRows()}}function eO(n,e){const t=Rt(hn,this).findFirstNonHiddenRenderableRow(n,e);return t===null?null:Rt(Mo,this).y+t}function tO(n,e){const t=Rt(hn,this).findFirstNonHiddenRenderableColumn(n,e);return t===null?null:Rt(Mo,this).x+t}function m8(n){const{row:e,col:t}=Rt(hn,this).visualToRenderableCoords(n);if(e===null||t===null)throw new Error("Renderable coords are not visible.");return Rt(hn,this).createCellCoords(Rt(Mo,this).y+e,Rt(Mo,this).x+t)}function gg(n){const e=n.clone();return e.col=n.col-Rt(Mo,this).x,e.row=n.row-Rt(Mo,this).y,Rt(hn,this).renderableToVisualCoords(e)}Bt(JI,Di);const CS=0,SS=1,b8=2,nO=3,wSe=[nO,b8],vSe=[["number"],["number","string"],["number","undefined"],["number","string","undefined"]],iO=Symbol("root"),w8=Symbol("child");function pg(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:iO;if(e!==iO&&e!==w8)throw new Error("The second argument is used internally only and cannot be overwritten.");const t=Array.isArray(n),i=e===iO;let s=CS;if(t){const r=n[0];n.length===0?s=SS:i&&r instanceof xb?s=nO:i&&Array.isArray(r)?s=pg(r,w8):n.length>=2&&n.length<=4&&!n.some((a,l)=>!vSe[l].includes(typeof a))&&(s=b8)}return s}function Wb(n){let{createCellCoords:e,createCellRange:t,keepDirection:i=!1,propToCol:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!wSe.includes(n))throw new Error("Unsupported selection ranges schema type was provided.");return function(r){const o=n===nO;let a=o?r.from.row:r[0],l=o?r.from.col:r[1],c=o?r.to.row:r[2],h=o?r.to.col:r[3];if(typeof s=="function"&&(typeof l=="string"&&(l=s(l)),typeof h=="string"&&(h=s(h))),nn(c)&&(c=a),nn(h)&&(h=l),!i){const f=a,g=l,p=c,m=h;a=Math.min(f,p),l=Math.min(g,m),c=Math.max(f,p),h=Math.max(g,m)}const u=e(a,l),d=e(c,h);return t(u,u,d)}}function ySe(n){const e=pg(n.getSelected());if(e===CS||e===SS)return[];const t=Wb(e,{createCellCoords:n._createCellCoords.bind(n),createCellRange:n._createCellRange.bind(n)}),i=new Set;F(n.getSelected(),o=>{const{from:a,to:l}=t(o),c=Math.max(a.col,0),h=l.col-c+1;F(Array.from(new Array(h),(u,d)=>c+d),u=>{i.has(u)||i.add(u)})});const s=Array.from(i).sort((o,a)=>o-a);return Qn(s,(o,a,l,c)=>(l!==0&&a===c[l-1]+1?o[o.length-1][1]+=1:o.push([a,1]),o),[])}function CSe(n){const e=pg(n.getSelected());if(e===CS||e===SS)return[];const t=Wb(e,{createCellCoords:n._createCellCoords.bind(n),createCellRange:n._createCellRange.bind(n)}),i=new Set;F(n.getSelected(),o=>{const{from:a,to:l}=t(o),c=Math.max(a.row,0),h=l.row-c+1;F(Array.from(new Array(h),(u,d)=>c+d),u=>{i.has(u)||i.add(u)})});const s=Array.from(i).sort((o,a)=>o-a);return Qn(s,(o,a,l,c)=>(l!==0&&a===c[l-1]+1?o[o.length-1][1]+=1:o.push([a,1]),o),[])}function mg(n,e,t){SSe(n,e),e.set(n,t)}function SSe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ed(n,e,t){return(e=_Se(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Se(n){var e=RSe(n,"string");return typeof e=="symbol"?e:e+""}function RSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pn(n,e){return n.get(v8(n,e))}function Sa(n,e,t){return n.set(v8(n,e),t),t}function v8(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ji=new WeakMap,td=new WeakMap,_S=new WeakMap,jb=new WeakMap,RS=new WeakMap,zb=new WeakMap;class y8{constructor(e,t){var i=this;ed(this,"settings",void 0),ed(this,"tableProps",void 0),ed(this,"inProgress",!1),ed(this,"selectedRange",new mSe((s,r,o)=>this.tableProps.createCellRange(s,r,o))),ed(this,"highlight",void 0),mg(this,Ji,void 0),mg(this,td,void 0),ed(this,"selectedByRowHeader",new Set),ed(this,"selectedByColumnHeader",new Set),mg(this,_S,!1),mg(this,jb,!1),mg(this,RS,"unknown"),mg(this,zb,-1),this.settings=e,this.tableProps=t,this.highlight=new fSe({headerClassName:e.currentHeaderClassName,activeHeaderClassName:e.activeHeaderClassName,rowClassName:e.currentRowClassName,columnClassName:e.currentColClassName,cellAttributes:[eA()],rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,disabledCellSelection:(s,r)=>this.tableProps.isDisabledCellSelection(s,r),cellCornerVisible:function(){return i.isCellCornerVisible(...arguments)},areaCornerVisible:function(){return i.isAreaCornerVisible(...arguments)},visualToRenderableCoords:s=>this.tableProps.visualToRenderableCoords(s),renderableToVisualCoords:s=>this.tableProps.renderableToVisualCoords(s),createCellCoords:(s,r)=>this.tableProps.createCellCoords(s,r),createCellRange:(s,r,o)=>this.tableProps.createCellRange(s,r,o)}),Sa(Ji,this,new JI(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>this.tableProps.countRenderableRows(),countRenderableColumns:()=>this.tableProps.countRenderableColumns(),visualToRenderableCoords:s=>this.tableProps.visualToRenderableCoords(s),renderableToVisualCoords:s=>this.tableProps.renderableToVisualCoords(s),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(s,r)=>this.tableProps.createCellCoords(s,r),fixedRowsBottom:()=>e.fixedRowsBottom,minSpareRows:()=>e.minSpareRows,minSpareCols:()=>e.minSpareCols,autoWrapRow:()=>e.autoWrapRow,autoWrapCol:()=>e.autoWrapCol})),Sa(td,this,new JI(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>{const s=this.selectedRange.current();return this.tableProps.countRenderableRowsInRange(0,s.getOuterBottomEndCorner().row)},countRenderableColumns:()=>{const s=this.selectedRange.current();return this.tableProps.countRenderableColumnsInRange(0,s.getOuterBottomEndCorner().col)},visualToRenderableCoords:s=>this.tableProps.visualToRenderableCoords(s),renderableToVisualCoords:s=>this.tableProps.renderableToVisualCoords(s),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(s,r)=>this.tableProps.createCellCoords(s,r),fixedRowsBottom:()=>0,minSpareRows:()=>0,minSpareCols:()=>0,autoWrapRow:()=>!0,autoWrapCol:()=>!0})),pn(Ji,this).addLocalHook("beforeTransformStart",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformStart",...r)}),pn(Ji,this).addLocalHook("afterTransformStart",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("afterModifyTransformStart",...r)}),pn(Ji,this).addLocalHook("beforeTransformEnd",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformEnd",...r)}),pn(Ji,this).addLocalHook("afterTransformEnd",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("afterModifyTransformEnd",...r)}),pn(Ji,this).addLocalHook("insertRowRequire",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("insertRowRequire",...r)}),pn(Ji,this).addLocalHook("insertColRequire",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("insertColRequire",...r)}),pn(Ji,this).addLocalHook("beforeRowWrap",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("beforeRowWrap",...r)}),pn(Ji,this).addLocalHook("beforeColumnWrap",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("beforeColumnWrap",...r)}),pn(td,this).addLocalHook("beforeTransformStart",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformFocus",...r)}),pn(td,this).addLocalHook("afterTransformStart",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("afterModifyTransformFocus",...r)})}getSelectedRange(){return this.selectedRange}markSource(e){Sa(RS,this,e)}markEndSource(){Sa(RS,this,"unknown")}getSelectionSource(){return pn(RS,this)}setExpectedLayers(e){Sa(zb,this,e)}begin(){this.inProgress=!0}finish(){this.runLocalHooks("afterSelectionFinished",Array.from(this.selectedRange)),this.inProgress=!1,Sa(zb,this,-1)}isInProgress(){return this.inProgress}setRangeStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e;const r=this.settings.selectionMode==="multiple",o=nn(t)?this.tableProps.getShortcutManager().isCtrlPressed():t,a=e.clone();Sa(_S,this,!1),this.runLocalHooks(`beforeSetRangeStart${i?"Only":""}`,a),(!r||r&&!o&&nn(t))&&this.selectedRange.clear(),this.selectedRange.add(a).current().setHighlight(s.clone()),this.getLayerLevel()===0&&(this.selectedByRowHeader.clear(),this.selectedByColumnHeader.clear()),i||this.setRangeEnd(e)}setRangeStartOnly(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;this.setRangeStart(e,t,!0,i)}setRangeEnd(e){if(this.selectedRange.isEmpty())return;const t=e.clone(),i=this.tableProps.countRows(),s=this.tableProps.countCols(),r=this.selectedRange.current().clone().setTo(e).isSingleHeader();if((i>0||s>0)&&(i===0&&t.col<0&&!r||s===0&&t.row<0&&!r))return;this.runLocalHooks("beforeSetRangeEnd",t),this.begin();const o=this.selectedRange.current();if(this.settings.navigableHeaders||o.highlight.normalize(),this.settings.selectionMode==="single")o.setFrom(o.highlight),o.setTo(o.highlight);else{const l=o.getHorizontalDirection(),c=o.getVerticalDirection(),h=this.isMultiple();o.setTo(t),h&&(l!==o.getHorizontalDirection()||o.getWidth()===1&&!o.includes(o.highlight))&&o.from.assign({col:o.highlight.col}),h&&(c!==o.getVerticalDirection()||o.getHeight()===1&&!o.includes(o.highlight))&&o.from.assign({row:o.highlight.row})}i>0&&s>0&&(!this.settings.navigableHeaders||this.settings.navigableHeaders&&!o.isSingleHeader())&&o.to.normalize(),this.runLocalHooks("beforeHighlightSet"),this.setRangeFocus(this.selectedRange.current().highlight),this.applyAndCommit();const a=pn(zb,this)===-1||this.selectedRange.size()===pn(zb,this);this.runLocalHooks("afterSetRangeEnd",e,a)}applyAndCommit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectedRange.current(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLayerLevel();const i=this.tableProps.countRows(),s=this.tableProps.countCols();t<this.highlight.layerLevel&&(F(this.highlight.getAreas(),g=>void g.clear()),F(this.highlight.getLayeredAreas(),g=>void g.clear()),F(this.highlight.getRowHeaders(),g=>void g.clear()),F(this.highlight.getColumnHeaders(),g=>void g.clear()),F(this.highlight.getActiveRowHeaders(),g=>void g.clear()),F(this.highlight.getActiveColumnHeaders(),g=>void g.clear()),F(this.highlight.getActiveCornerHeaders(),g=>void g.clear()),F(this.highlight.getRowHighlights(),g=>void g.clear()),F(this.highlight.getColumnHighlights(),g=>void g.clear())),this.highlight.useLayerLevel(t);const r=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),l=this.highlight.createColumnHeader(),c=this.highlight.createActiveRowHeader(),h=this.highlight.createActiveColumnHeader(),u=this.highlight.createActiveCornerHeader(),d=this.highlight.createRowHighlight(),f=this.highlight.createColumnHighlight();if(r.clear(),o.clear(),a.clear(),l.clear(),c.clear(),h.clear(),u.clear(),d.clear(),f.clear(),this.highlight.isEnabledFor(oP,e.highlight)&&(this.isMultiple()||t>=1)&&(r.add(e.from).add(e.to).commit(),o.add(e.from).add(e.to).commit(),t===1)){const g=this.selectedRange.previous();this.highlight.useLayerLevel(t-1),this.highlight.createArea().add(g.from).commit().syncWith(g),this.highlight.createLayeredArea().add(g.from).commit().syncWith(g),this.highlight.useLayerLevel(t)}if(this.highlight.isEnabledFor(rP,e.highlight)){if(!e.isSingleHeader()){const m=this.tableProps.createCellCoords(Math.max(e.from.row,0),-1),w=this.tableProps.createCellCoords(e.to.row,-1),y=this.tableProps.createCellCoords(-1,Math.max(e.from.col,0)),C=this.tableProps.createCellCoords(-1,e.to.col);this.settings.selectionMode==="single"?(a.add(m).commit(),l.add(y).commit(),d.add(m).commit(),f.add(y).commit()):(a.add(m).add(w).commit(),l.add(y).add(C).commit(),d.add(m).add(w).commit(),f.add(y).add(C).commit())}const g=!pn(jb,this)&&this.isEntireRowSelected()&&(s>0&&s===e.getWidth()||s===0&&this.isSelectedByRowHeader()),p=!pn(jb,this)&&this.isEntireColumnSelected()&&(i>0&&i===e.getHeight()||i===0&&this.isSelectedByColumnHeader());g&&c.add(this.tableProps.createCellCoords(Math.max(e.from.row,0),Math.min(-this.tableProps.countRowHeaders(),-1))).add(this.tableProps.createCellCoords(Math.max(e.to.row,0),-1)).commit(),p&&h.add(this.tableProps.createCellCoords(Math.min(-this.tableProps.countColHeaders(),-1),Math.max(e.from.col,0))).add(this.tableProps.createCellCoords(-1,Math.max(e.to.col,0))).commit(),g&&p&&u.add(this.tableProps.createCellCoords(-this.tableProps.countColHeaders(),-this.tableProps.countRowHeaders())).add(this.tableProps.createCellCoords(-1,-1)).commit()}}setRangeFocus(e){if(this.selectedRange.isEmpty())return;const t=this.selectedRange.current();this.inProgress||this.runLocalHooks("beforeSetFocus",e);const i=this.highlight.getFocus();i.clear(),t.setHighlight(e),this.inProgress||this.runLocalHooks("beforeHighlightSet"),this.highlight.isEnabledFor(aP,t.highlight)&&i.add(t.highlight).commit().syncWith(t),this.inProgress||(Sa(_S,this,!0),this.runLocalHooks("afterSetFocus",t.highlight))}transformStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.settings.navigableHeaders?pn(Ji,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):pn(Ji,this).resetOffsetSize(),this.setRangeStart(pn(Ji,this).transformStart(e,t,i))}transformEnd(e,t){this.settings.navigableHeaders?pn(Ji,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):pn(Ji,this).resetOffsetSize(),this.setRangeEnd(pn(Ji,this).transformEnd(e,t))}transformFocus(e,t){const i=this.selectedRange.current(),{row:s,col:r}=i.getOuterTopStartCorner(),o=this.tableProps.countRenderableColumnsInRange(0,r-1),a=this.tableProps.countRenderableRowsInRange(0,s-1);i.highlight.isHeader()?pn(td,this).setOffsetSize({x:r<0?Math.abs(r):-o,y:s<0?Math.abs(s):-a}):pn(td,this).setOffsetSize({x:r<0?0:-o,y:s<0?0:-a});const l=pn(td,this).transformStart(e,t);this.setRangeFocus(l.normalize())}shiftRows(e,t){if(!this.isSelected())return;const i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByColumnHeader()||i.getOuterTopStartCorner().row>=e){const{from:s,to:r,highlight:o}=i,a=this.tableProps.countRows(),l=this.isSelectedByRowHeader(),c=this.isSelectedByColumnHeader(),h=c?-1:0,u=c?0:t;this.getSelectedRange().pop();const d=this.tableProps.createCellCoords(Wt(s.row+u,h,a-1),s.col),f=this.tableProps.createCellCoords(Wt(r.row+t,h,a-1),r.col);this.markSource("shift"),o.row>=e?this.setRangeStartOnly(d,!0,this.tableProps.createCellCoords(Wt(o.row+t,0,a-1),o.col)):this.setRangeStartOnly(d,!0),l&&this.selectedByRowHeader.add(this.getLayerLevel()),c&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.markEndSource()}}shiftColumns(e,t){if(!this.isSelected())return;const i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByRowHeader()||i.getOuterTopStartCorner().col>=e){const{from:s,to:r,highlight:o}=i,a=this.tableProps.countCols(),l=this.isSelectedByRowHeader(),c=this.isSelectedByColumnHeader(),h=l?-1:0,u=l?0:t;this.getSelectedRange().pop();const d=this.tableProps.createCellCoords(s.row,Wt(s.col+u,h,a-1)),f=this.tableProps.createCellCoords(r.row,Wt(r.col+t,h,a-1));this.markSource("shift"),o.col>=e?this.setRangeStartOnly(d,!0,this.tableProps.createCellCoords(o.row,Wt(o.col+t,0,a-1))):this.setRangeStartOnly(d,!0),l&&this.selectedByRowHeader.add(this.getLayerLevel()),c&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.markEndSource()}}getLayerLevel(){return this.selectedRange.size()-1}isSelected(){return!this.selectedRange.isEmpty()}isMultiple(){if(!this.isSelected())return!1;const e=Pr(!this.selectedRange.current().isSingle());return this.runLocalHooks("afterIsMultipleSelection",e),e.value}isFocusSelectionChanged(){return this.isSelected()&&pn(_S,this)}isSelectedByRowHeader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner(e)&&(e===-1?this.selectedByRowHeader.size>0:this.selectedByRowHeader.has(e))}isEntireRowSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();const t=s=>{const{col:r}=s.getOuterTopStartCorner(),o=this.tableProps.countRowHeaders(),a=this.tableProps.countCols();return(o>0&&r<0||o===0)&&s.getWidth()===a};if(e===-1)return Array.from(this.selectedRange).some(s=>t(s));const i=this.selectedRange.peekByIndex(e);return i?t(i):!1}isSelectedByColumnHeader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner()&&(e===-1?this.selectedByColumnHeader.size>0:this.selectedByColumnHeader.has(e))}isEntireColumnSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();const t=s=>{const{row:r}=s.getOuterTopStartCorner(),o=this.tableProps.countColHeaders(),a=this.tableProps.countRows();return(o>0&&r<0||o===0)&&s.getHeight()===a};if(e===-1)return Array.from(this.selectedRange).some(s=>t(s));const i=this.selectedRange.peekByIndex(e);return i?t(i):!1}isSelectedByAnyHeader(){return this.isSelectedByRowHeader(-1)||this.isSelectedByColumnHeader(-1)||this.isSelectedByCorner()}isSelectedByCorner(){return this.selectedByColumnHeader.has(this.getLayerLevel())&&this.selectedByRowHeader.has(this.getLayerLevel())}inInSelection(e){return this.selectedRange.includes(e)}isCellCornerVisible(){return this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&!this.isMultiple()}isCellVisible(e){const t=this.tableProps.visualToRenderableCoords(e);return t.row!==null&&t.col!==null}isAreaCornerVisible(e){return Number.isInteger(e)&&e!==this.getLayerLevel()?!1:this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&this.isMultiple()}clear(){this.selectedRange.clear(),this.highlight.clear()}deselect(){this.isSelected()&&(this.inProgress=!1,this.clear(),this.runLocalHooks("afterDeselect"))}selectAll(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{focusPosition:!1,disableHeadersHighlight:!1};const r=this.tableProps.countRows(),o=this.tableProps.countCols(),a=this.tableProps.countRowHeaders(),l=this.tableProps.countColHeaders(),c=i?-l:0,h=t?-a:0;if(c===0&&h===0&&(r===0||o===0))return;let u=(e=this.getSelectedRange().current())===null||e===void 0?void 0:e.highlight;const{focusPosition:d,disableHeadersHighlight:f}=s;Sa(jb,this,f),d&&Number.isInteger(d==null?void 0:d.row)&&Number.isInteger(d==null?void 0:d.col)&&(u=this.tableProps.createCellCoords(Wt(d.row,c,r-1),Wt(d.col,h,o-1)));const g=this.tableProps.createCellCoords(c,h),p=this.tableProps.createCellCoords(r-1,o-1);this.clear(),this.setRangeStartOnly(g,void 0,u),h<0&&this.selectedByRowHeader.add(this.getLayerLevel()),c<0&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(p),this.finish(),Sa(jb,this,!1)}selectCells(e){var t=this;const i=pg(e);if(i===SS)return!1;if(i===CS)throw new Error(Ft`Unsupported format of the selection ranges was passed. To select cells pass\x20
        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd,\x20
        columnEnd/columnPropEnd]]) or as an array of CellRange objects.`);const s=Wb(i,{createCellCoords:function(){return t.tableProps.createCellCoords(...arguments)},createCellRange:function(){return t.tableProps.createCellRange(...arguments)},propToCol:l=>this.tableProps.propToCol(l),keepDirection:!0}),r=this.settings.navigableHeaders,o={countRows:this.tableProps.countRows(),countCols:this.tableProps.countCols(),countRowHeaders:r?this.tableProps.countRowHeaders():0,countColHeaders:r?this.tableProps.countColHeaders():0},a=!e.some(l=>{const c=s(l),h=c.isValid(o);return!(h&&!c.containsHeaders()||h&&c.containsHeaders()&&c.isSingleHeader())});return a&&(this.clear(),this.setExpectedLayers(e.length),F(e,l=>{const{from:c,to:h}=s(l);this.setRangeStartOnly(c.clone(),!1),this.setRangeEnd(h.clone())}),this.finish()),a}selectColumns(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const s=typeof e=="string"?this.tableProps.propToCol(e):e,r=typeof t=="string"?this.tableProps.propToCol(t):t,o=this.tableProps.countRows(),a=this.tableProps.countCols(),l=this.tableProps.countColHeaders(),c=l===0?0:-l,h=this.tableProps.createCellCoords(c,s),u=this.tableProps.createCellCoords(o-1,r),d=this.tableProps.createCellRange(h,h,u).isValid({countRows:o,countCols:a,countRowHeaders:0,countColHeaders:l});if(d){let f=0,g=0;Number.isInteger(i==null?void 0:i.row)&&Number.isInteger(i==null?void 0:i.col)?(f=Wt(i.row,c,o-1),g=Wt(i.col,Math.min(s,r),Math.max(s,r))):(f=Wt(i,c,o-1),g=s);const p=this.tableProps.createCellCoords(f,g),m=l===0?0:Wt(p.row,c,-1),w=o-1,y=this.tableProps.createCellCoords(m,s),C=this.tableProps.createCellCoords(w,r);this.runLocalHooks("beforeSelectColumns",y,C,p),y.row=m,C.row=w,this.setRangeStartOnly(y,void 0,p),this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(C),this.runLocalHooks("afterSelectColumns",y,C,p),this.finish()}return d}selectRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const s=this.tableProps.countRows(),r=this.tableProps.countCols(),o=this.tableProps.countRowHeaders(),a=o===0?0:-o,l=this.tableProps.createCellCoords(e,a),c=this.tableProps.createCellCoords(t,r-1),h=this.tableProps.createCellRange(l,l,c).isValid({countRows:s,countCols:r,countRowHeaders:o,countColHeaders:0});if(h){let u=0,d=0;Number.isInteger(i==null?void 0:i.row)&&Number.isInteger(i==null?void 0:i.col)?(u=Wt(i.row,Math.min(e,t),Math.max(e,t)),d=Wt(i.col,a,r-1)):(u=e,d=Wt(i,a,r-1));const f=this.tableProps.createCellCoords(u,d),g=o===0?0:Wt(f.col,a,-1),p=r-1,m=this.tableProps.createCellCoords(e,g),w=this.tableProps.createCellCoords(t,p);this.runLocalHooks("beforeSelectRows",m,w,f),m.col=g,w.col=p,this.setRangeStartOnly(m,void 0,f),this.selectedByRowHeader.add(this.getLayerLevel()),this.setRangeEnd(w),this.runLocalHooks("afterSelectRows",m,w,f),this.finish()}return h}refresh(){if(!this.isSelected())return;const e=this.tableProps.countRows(),t=this.tableProps.countCols();if(e===0||t===0){this.deselect();return}const i=this.selectedRange.peekByIndex(this.selectedRange.size()-1),{from:s,to:r,highlight:o}=i;this.clear(),o.assign({row:Wt(o.row,-1/0,e-1),col:Wt(o.col,-1/0,t-1)}),s.assign({row:Wt(s.row,-1/0,e-1),col:Wt(s.col,-1/0,t-1)}),r.assign({row:Wt(r.row,0,e-1),col:Wt(r.col,0,t-1)}),this.selectedRange.ranges.push(i),this.highlight.getFocus().add(o).commit().syncWith(i),this.applyAndCommit(i)}commit(){if(this.highlight.getCustomSelections().forEach(s=>{s.commit()}),!this.isSelected())return;const t=this.highlight.getFocus(),i=this.getLayerLevel();t.commit().syncWith(this.selectedRange.current());for(let s=0;s<this.selectedRange.size();s+=1){this.highlight.useLayerLevel(s);const r=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),l=this.highlight.createColumnHeader(),c=this.highlight.createActiveRowHeader(),h=this.highlight.createActiveColumnHeader(),u=this.highlight.createActiveCornerHeader(),d=this.highlight.createRowHighlight(),f=this.highlight.createColumnHighlight();r.commit(),o.commit(),a.commit(),l.commit(),c.commit(),h.commit(),u.commit(),d.commit(),f.commit()}this.highlight.useLayerLevel(i)}}Bt(y8,Di);const C8=/^(\r\n|\n\r|\r|\n)/,xSe=/^[^\t\r\n]+/,S8=/^\t/;function ESe(n){const e=[[""]];if(n.length===0)return e;let t=0,i=0,s;for(;n.length>0&&s!==n.length;)if(s=n.length,n.match(S8))n=n.replace(S8,""),t+=1,e[i][t]="";else if(n.match(C8))n=n.replace(C8,""),t=0,i+=1,e[i]=[""];else{let r="";if(n.startsWith('"')){let o=0,a=!0;for(;a;){const l=n.slice(0,1);l==='"'&&(o+=1),r+=l,n=n.slice(1),(n.length===0||n.match(/^[\t\r\n]/)&&o%2===0)&&(a=!1)}r=r.replace(/^"/,"").replace(/"$/,"").replace(/["]*/g,l=>new Array(Math.floor(l.length/2)).fill('"').join(""))}else{const o=n.match(xSe);r=o?o[0]:"",n=n.slice(r.length)}e[i][t]=r}return e}function Ub(n){let e,t,i,s,r="",o;for(e=0,t=n.length;e<t;e+=1){for(s=n[e].length,i=0;i<s;i+=1)i>0&&(r+="	"),o=n[e][i],typeof o=="string"?o.indexOf(`
`)>-1?r+=`"${o.replace(/"/g,'""')}"`:r+=o:o==null?r+="":r+=o;e!==t-1&&(r+=`
`)}return r}function nd(n,e,t){return(e=TSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TSe(n){var e=MSe(n,"string");return typeof e=="symbol"?e:e+""}function MSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class bg{static get DESTINATION_RENDERER(){return 1}static get DESTINATION_CLIPBOARD_GENERATOR(){return 2}constructor(e,t,i){nd(this,"hot",void 0),nd(this,"metaManager",void 0),nd(this,"tableMeta",void 0),nd(this,"dataSource",void 0),nd(this,"duckSchema",void 0),nd(this,"colToPropCache",void 0),nd(this,"propToColCache",void 0),this.hot=e,this.metaManager=i,this.tableMeta=i.getTableMeta(),this.dataSource=t,this.duckSchema=this.createDuckSchema(),this.createMap()}createMap(){const e=this.getSchema();if(typeof e>"u")throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");const t=this.tableMeta.columns;let i;if(this.colToPropCache=[],this.propToColCache=new Map,t){let s=0,r=0,o=!1;if(typeof t=="function"){const a=wC(e);s=a>0?a:this.countFirstRowKeys(),o=!0}else{const a=this.tableMeta.maxCols;s=Math.min(a,t.length)}for(i=0;i<s;i++){const a=o?t(i):t[i];if(Je(a)){if(typeof a.data<"u"){const l=o?r:i;this.colToPropCache[l]=a.data,this.propToColCache.set(a.data,l)}r+=1}}}else this.recursiveDuckColumns(e)}countFirstRowKeys(){return RP(this.dataSource)}recursiveDuckColumns(e,t,i){let s=t,r=i,o;return typeof s>"u"&&(s=0,r=""),typeof e=="object"&&!Array.isArray(e)&&et(e,(a,l)=>{a===null?(o=r+l,this.colToPropCache.push(o),this.propToColCache.set(o,s),s+=1):s=this.recursiveDuckColumns(a,s,`${l}.`)}),s}colToProp(e){if(Number.isInteger(e)===!1)return e;const t=this.hot.toPhysicalColumn(e);return t===null?e:this.colToPropCache&&Me(this.colToPropCache[t])?this.colToPropCache[t]:t}propToCol(e){const t=this.propToColCache.get(e);if(Me(t))return this.hot.toVisualColumn(t);const i=this.hot.toVisualColumn(e);return i===null?e:i}getSchema(){const e=this.tableMeta.dataSchema;return e?typeof e=="function"?e():e:this.duckSchema}createDuckSchema(){return this.dataSource&&this.dataSource[0]?eg(this.dataSource[0]):{}}refreshDuckSchema(){this.duckSchema=this.createDuckSchema()}createRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,{source:i,mode:s="above"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.hot.countSourceRows();let o=r,a=0,l=e;if((typeof l!="number"||l>=r)&&(l=r),l<this.hot.countRows()&&(o=this.hot.toPhysicalRow(l)),this.hot.runHooks("beforeCreateRow",l,t,i)===!1||o===null)return{delta:0};const h=this.tableMeta.maxRows,u=this.getSchema().length,d=[];for(;a<t&&r+a<h;){let g=null;this.hot.dataType==="array"?this.tableMeta.dataSchema?g=qi(this.getSchema()):(g=[],Oe(u-1,()=>g.push(null))):this.hot.dataType==="function"?g=this.tableMeta.dataSchema(l+a):(g={},db(g,this.getSchema())),d.push(g),a+=1}this.hot.rowIndexMapper.insertIndexes(l,a),s==="below"&&(o=Math.min(o+1,r)),this.spliceData(o,0,d);const f=this.hot.toVisualRow(o);return this.hot.countSourceRows()===d.length&&this.hot.columnIndexMapper.initToLength(this.hot.getInitialColumnCount()),a>0&&(e==null?this.metaManager.createRow(null,a):i!=="auto"&&this.metaManager.createRow(o,t)),this.hot.runHooks("afterCreateRow",f,a,i),this.hot.forceFullRender=!0,{delta:a,startPhysicalIndex:o}}createCol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,{source:i,mode:s="start"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!this.hot.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");const r=this.dataSource,o=this.tableMeta.maxCols,a=this.hot.countSourceCols();let l=e;if((typeof l!="number"||l>=a)&&(l=a),this.hot.runHooks("beforeCreateCol",l,t,i)===!1)return{delta:0};let h=a;l<this.hot.countCols()&&(h=this.hot.toPhysicalColumn(l));const u=this.hot.countSourceRows();let d=this.hot.countCols(),f=0,g=h;s==="end"&&(g=Math.min(g+1,a));const p=g;for(;f<t&&d<o;){if(typeof l!="number"||l>=d)if(u>0)for(let w=0;w<u;w+=1)typeof r[w]>"u"&&(r[w]=[]),r[w].push(null);else r.push([null]);else for(let w=0;w<u;w++)r[w].splice(g,0,null);f+=1,g+=1,d+=1}this.hot.columnIndexMapper.insertIndexes(l,f),f>0&&(e==null?this.metaManager.createColumn(null,f):i!=="auto"&&this.metaManager.createColumn(p,t));const m=this.hot.toVisualColumn(p);return this.hot.runHooks("afterCreateCol",m,f,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),{delta:f,startPhysicalIndex:p}}removeRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,s=Number.isInteger(e)?e:-t;const r=this.visualRowsToPhysical(s,t),o=this.hot.countSourceRows();if(s=(o+s)%o,this.hot.runHooks("beforeRemoveRow",s,r.length,r,i)===!1)return!1;const l=r.length;if(this.filterData(s,l,r),s<this.hot.countRows()){this.hot.rowIndexMapper.removeIndexes(r);const h=Me(this.tableMeta.columns)||Me(this.tableMeta.dataSchema);this.hot.rowIndexMapper.getNotTrimmedIndexesLength()===0&&h===!1&&this.hot.columnIndexMapper.setIndexesSequence([])}return r.slice(0).sort((h,u)=>u-h).forEach(h=>{this.metaManager.removeRow(h,1)}),this.hot.runHooks("afterRemoveRow",s,l,r,i),this.hot.forceFullRender=!0,!0}removeCol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;if(this.hot.dataType==="object"||this.tableMeta.columns)throw new Error("cannot remove column with object data source or columns option specified");let s=typeof e!="number"?-t:e;s=(this.hot.countCols()+s)%this.hot.countCols();const r=this.visualColumnsToPhysical(s,t),o=r.slice(0).sort((u,d)=>d-u);if(this.hot.runHooks("beforeRemoveCol",s,t,r,i)===!1)return!1;let l=!0;const c=o.length,h=this.dataSource;for(let u=0;u<c;u++)l&&r[0]!==r[u]-u&&(l=!1);if(l)for(let u=0,d=this.hot.countSourceRows();u<d;u++)h[u].splice(r[0],t),u===0&&this.metaManager.removeColumn(r[0],t);else for(let u=0,d=this.hot.countSourceRows();u<d;u++)for(let f=0;f<c;f++)h[u].splice(o[f],1),u===0&&this.metaManager.removeColumn(o[f],1);return s<this.hot.countCols()&&(this.hot.columnIndexMapper.removeIndexes(r),this.hot.columnIndexMapper.getNotTrimmedIndexesLength()===0&&this.hot.rowIndexMapper.setIndexesSequence([])),this.hot.runHooks("afterRemoveCol",s,t,r,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),!0}spliceCol(e,t,i){const s=this.hot.getDataAtCol(e),r=s.slice(t,t+i),o=s.slice(t+i);for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];jM(l,o);let h=0;for(;h<i;)l.push(null),h+=1;return Tj(l),this.hot.populateFromArray(t,e,l,null,null,"spliceCol"),r}spliceRow(e,t,i){const s=this.hot.getSourceDataAtRow(e),r=s.slice(t,t+i),o=s.slice(t+i);for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];jM(l,o);let h=0;for(;h<i;)l.push(null),h+=1;return this.hot.populateFromArray(e,t,[l],null,null,"spliceRow"),r}spliceData(e,t,i){if(this.hot.runHooks("beforeDataSplice",e,t,i)!==!1){const r=[...this.dataSource.slice(0,e),...i,...this.dataSource.slice(e)];this.dataSource.length=0,r.forEach(o=>this.dataSource.push(o))}}filterData(e,t,i){let s=this.hot.runHooks("filterData",e,t,i);Array.isArray(s)===!1&&(s=this.dataSource.filter((r,o)=>i.indexOf(o)===-1)),this.dataSource.length=0,Array.prototype.push.apply(this.dataSource,s)}get(e,t){const i=this.hot.toPhysicalRow(e);let s=this.dataSource[i];const r=this.hot.runHooks("modifyRowData",i);s=isNaN(r)?r:s;const{dataDotNotation:o}=this.hot.getSettings();let a=null;if(s&&s.hasOwnProperty&&_n(s,t))a=s[t];else if(o&&typeof t=="string"&&t.indexOf(".")>-1){let l=s;if(!l)return null;const c=t.split(".");for(let h=0,u=c.length;h<u;h++)if(l=l[c[h]],typeof l>"u")return null;a=l}else typeof t=="function"&&(a=t(this.dataSource.slice(i,i+1)[0]));if(this.hot.hasHook("modifyData")){const l=Pr(a);this.hot.runHooks("modifyData",i,this.propToCol(t),l,"get"),l.isTouched()&&(a=l.value)}return a}getCopyable(e,t){return this.hot.getCellMeta(e,this.propToCol(t)).copyable?this.get(e,t):""}set(e,t,i){const s=this.hot.toPhysicalRow(e);let r=i,o=this.dataSource[s];const a=this.hot.runHooks("modifyRowData",s);if(o=isNaN(a)?a:o,this.hot.hasHook("modifyData")){const c=Pr(r);this.hot.runHooks("modifyData",s,this.propToCol(t),c,"set"),c.isTouched()&&(r=c.value)}const{dataDotNotation:l}=this.hot.getSettings();if(o&&o.hasOwnProperty&&_n(o,t))o[t]=r;else if(l&&typeof t=="string"&&t.indexOf(".")>-1){let c=o,h=0,u;const d=t.split(".");for(h=0,u=d.length-1;h<u;h++)typeof c[d[h]]>"u"&&(c[d[h]]={}),c=c[d[h]];c[d[h]]=r}else typeof t=="function"?t(this.dataSource.slice(s,s+1)[0],r):o[t]=r}visualRowsToPhysical(e,t){const i=this.hot.countSourceRows(),s=[];let r=(i+e)%i,o=t,a;for(;r<i&&o;)a=this.hot.toPhysicalRow(r),s.push(a),o-=1,r+=1;return s}visualColumnsToPhysical(e,t){const i=this.hot.countCols(),s=[];let r=(i+e)%i,o=t;for(;r<i&&o;){const a=this.hot.toPhysicalColumn(r);s.push(a),o-=1,r+=1}return s}clear(){for(let e=0;e<this.hot.countSourceRows();e++)for(let t=0;t<this.hot.countCols();t++)this.set(e,this.colToProp(t),"")}getLength(){const e=this.tableMeta.maxRows;let t;e<0||e===0?t=0:t=e||1/0;const i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength();return Math.min(i,t)}getAll(){const e={row:0,col:0},t={row:Math.max(this.hot.countRows()-1,0),col:Math.max(this.hot.countCols()-1,0)};return e.row-t.row===0&&!this.hot.countSourceRows()?[]:this.getRange(e,t,bg.DESTINATION_RENDERER)}countCachedColumns(){return this.colToPropCache.length}getRange(e,t,i){const s=[];let r,o,a;const l=this.tableMeta.maxRows,c=this.tableMeta.maxCols;if(l===0||c===0)return[];const h=i===bg.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get,u=Math.min(Math.max(l-1,0),Math.max(e.row,t.row)),d=Math.min(Math.max(c-1,0),Math.max(e.col,t.col));for(r=Math.min(e.row,t.row);r<=u;r++){a=[];const f=r>=0?this.hot.toPhysicalRow(r):r;for(o=Math.min(e.col,t.col);o<=d&&f!==null;o++)a.push(h.call(this,r,this.colToProp(o)));f!==null&&s.push(a)}return s}getText(e,t){return Ub(this.getRange(e,t,bg.DESTINATION_RENDERER))}getCopyableText(e,t){return Ub(this.getRange(e,t,bg.DESTINATION_CLIPBOARD_GENERATOR))}destroy(){this.hot=null,this.metaManager=null,this.dataSource=null,this.duckSchema=null,this.colToPropCache.length=0,this.propToColCache.clear(),this.propToColCache=void 0}}const{register:ASe,getItem:PSe,hasItem:_8,getNames:ISe,getValues:hVe}=So("cellTypes");function sO(n){if(!_8(n))throw Error(`You declared cell type "${n}" as a string that is not mapped to a known object.
                 Cell type must be an object or a string mapped to an object registered by
                 "Handsontable.cellTypes.registerCellType" method`);return PSe(n)}function Fr(n,e){typeof n!="string"&&(e=n,n=e.CELL_TYPE);const{editor:t,renderer:i,validator:s}=e;t&&Es(n,t),i&&tr(n,i),s&&ju(n,s),ASe(n,e)}function OSe(n,e){var t;return n==="CELL_TYPE"?!1:((t=e._automaticallyAssignedMetaProps)===null||t===void 0?void 0:t.has(n))||!_n(e,n)}function xS(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n;const i=typeof e.type=="string"?sO(e.type):e.type;if(n._automaticallyAssignedMetaProps&&et(e,(r,o)=>void n._automaticallyAssignedMetaProps.delete(o)),!Je(i))return;t===n&&!n._automaticallyAssignedMetaProps&&(n._automaticallyAssignedMetaProps=new Set);const s={};et(i,(r,o)=>{if(OSe(o,t)){var a;s[o]=r,(a=n._automaticallyAssignedMetaProps)===null||a===void 0||a.add(o)}}),Zn(n,s)}function kSe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];function t(){}yo(t,n);for(let i=0;i<e.length;i++)t.prototype[e[i]]=void 0;return t}function ES(n){return Number.isInteger(n)&&n>=0}function TS(n,e){if(!n())throw new Error(`Assertion failed: ${e}`)}function MS(n){return n==null}const R8=()=>({_automaticallyAssignedMetaProps:void 0,activeHeaderClassName:"ht__active_highlight",allowEmpty:!0,allowHtml:!1,allowInsertColumn:!0,allowInsertRow:!0,allowInvalid:!0,allowRemoveColumn:!0,allowRemoveRow:!0,ariaTags:!0,autoColumnSize:void 0,autoRowSize:void 0,autoWrapCol:!1,autoWrapRow:!1,bindRowsWithHeaders:void 0,cell:[],cells:void 0,checkedTemplate:void 0,className:void 0,colHeaders:null,collapsibleColumns:void 0,columnHeaderHeight:void 0,columns:void 0,columnSorting:void 0,columnSummary:void 0,colWidths:void 0,commentedCellClassName:"htCommentCell",comments:!1,contextMenu:void 0,copyable:!0,copyPaste:!0,correctFormat:!1,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",currentRowClassName:void 0,customBorders:!1,data:void 0,dataDotNotation:!0,dataSchema:void 0,dateFormat:"DD/MM/YYYY",timeFormat:"h:mm:ss a",datePickerConfig:void 0,defaultDate:void 0,disableVisualSelection:!1,dragToScroll:!0,dropdownMenu:void 0,editor:void 0,enterBeginsEditing:!0,enterMoves:{col:0,row:1},fillHandle:{autoInsertRow:!1},filter:!0,filteringCaseSensitive:!1,filters:void 0,fixedColumnsLeft:0,fixedColumnsStart:0,fixedRowsBottom:0,fixedRowsTop:0,formulas:void 0,fragmentSelection:!1,headerClassName:void 0,height:void 0,hiddenColumns:void 0,hiddenRows:void 0,invalidCellClassName:"htInvalid",imeFastEdit:!1,isEmptyCol(n){let e,t,i;for(e=0,t=this.countRows();e<t;e++)if(i=this.getDataAtCell(e,n),An(i)===!1)return!1;return!0},isEmptyRow(n){let e,t,i,s;for(e=0,t=this.countCols();e<t;e++)if(i=this.getDataAtCell(n,e),An(i)===!1)return typeof i=="object"?(s=this.getCellMeta(n,e),mC(this.getSchema()[s.prop],i)):!1;return!0},label:void 0,language:"en-US",layoutDirection:"inherit",licenseKey:void 0,locale:"en-US",manualColumnFreeze:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,maxCols:1/0,maxRows:1/0,mergeCells:!1,minCols:0,minRows:0,minSpareCols:0,minSpareRows:0,multiColumnSorting:void 0,navigableHeaders:!1,tabNavigation:!0,nestedHeaders:void 0,nestedRows:void 0,noWordWrapClassName:"htNoWrap",numericFormat:void 0,observeDOMVisibility:!0,outsideClickDeselects:!0,persistentState:void 0,placeholder:void 0,placeholderCellClassName:"htPlaceholder",preventOverflow:!1,preventWheel:!1,readOnly:!1,readOnlyCellClassName:"htDimmed",renderAllRows:!1,renderAllColumns:!1,renderer:void 0,rowHeaders:void 0,rowHeaderWidth:void 0,rowHeights:void 0,search:!1,selectionMode:"multiple",selectOptions:void 0,skipColumnOnPaste:!1,skipRowOnPaste:!1,sortByRelevance:!0,source:void 0,startCols:5,startRows:5,stretchH:"none",strict:void 0,tableClassName:void 0,tabMoves:{row:0,col:1},title:void 0,trimDropdown:!0,trimRows:void 0,trimWhitespace:!0,type:"text",uncheckedTemplate:void 0,undo:void 0,validator:void 0,viewportColumnRenderingOffset:"auto",viewportRowRenderingOffset:"auto",visibleRows:10,width:void 0,wordWrap:!0});function x8(n,e,t){return(e=HSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HSe(n){var e=DSe(n,"string");return typeof e=="symbol"?e:e+""}function DSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function NSe(){return class{}}class LSe{constructor(e){x8(this,"metaCtor",NSe()),x8(this,"meta",void 0),this.meta=this.metaCtor.prototype,Zn(this.meta,R8()),this.meta.instance=e}getMetaConstructor(){return this.metaCtor}getMeta(){return this.meta}updateMeta(e){var t;Zn(this.meta,e),xS(this.meta,{...e,type:(t=e.type)!==null&&t!==void 0?t:this.meta.type},e)}}function $Se(n,e,t){return(e=FSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FSe(n){var e=BSe(n,"string");return typeof e=="symbol"?e:e+""}function BSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class VSe{constructor(e){$Se(this,"meta",void 0);const t=e.getMetaConstructor();this.meta=new t}getMeta(){return this.meta}updateMeta(e){Zn(this.meta,e),xS(this.meta,e,e)}}function AS(n,e,t){return(e=WSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WSe(n){var e=jSe(n,"string");return typeof e=="symbol"?e:e+""}function jSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class PS{constructor(e){AS(this,"valueFactory",void 0),AS(this,"data",[]),AS(this,"index",[]),AS(this,"holes",new Set),this.valueFactory=e}obtain(e){TS(()=>ES(e),"Expecting an unsigned number.");const t=this._getStorageIndexByKey(e);let i;if(t>=0)i=this.data[t],i===void 0&&(i=this.valueFactory(e),this.data[t]=i);else if(i=this.valueFactory(e),this.holes.size>0){const s=this.holes.values().next().value;this.holes.delete(s),this.data[s]=i,this.index[e]=s}else this.data.push(i),this.index[e]=this.data.length-1;return i}insert(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;TS(()=>ES(e)||MS(e),"Expecting an unsigned number or null/undefined argument.");const i=[],s=this.data.length;for(let o=0;o<t;o++)i.push(s+o),this.data.push(void 0);const r=MS(e)?this.index.length:e;this.index=[...this.index.slice(0,r),...i,...this.index.slice(r)]}remove(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;TS(()=>ES(e)||MS(e),"Expecting an unsigned number or null/undefined argument.");const i=this.index.splice(MS(e)?this.index.length-t:e,t);for(let s=0;s<i.length;s++){const r=i[s];typeof r=="number"&&this.holes.add(r)}}size(){return this.data.length-this.holes.size}values(){return kl(this.data,(e,t)=>!this.holes.has(t))[Symbol.iterator]()}entries(){const e=[];for(let i=0;i<this.data.length;i++){const s=this._getKeyByStorageIndex(i);s!==-1&&e.push([s,this.data[i]])}let t=0;return{next:()=>{if(t<e.length){const i=e[t];return t+=1,{value:i,done:!1}}return{done:!0}}}}clear(){this.data=[],this.index=[],this.holes.clear()}_getStorageIndexByKey(e){return this.index.length>e?this.index[e]:-1}_getKeyByStorageIndex(e){return this.index.indexOf(e)}[Symbol.iterator](){return this.entries()}}function E8(n,e,t){return(e=zSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zSe(n){var e=USe(n,"string");return typeof e=="symbol"?e:e+""}function USe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const YSe=["data","width"];class GSe{constructor(e){E8(this,"globalMeta",void 0),E8(this,"metas",new PS(()=>this._createMeta())),this.globalMeta=e,this.metas=new PS(()=>this._createMeta())}updateMeta(e,t){const i=this.getMeta(e);Zn(i,t),xS(i,t)}createColumn(e,t){this.metas.insert(e,t)}removeColumn(e,t){this.metas.remove(e,t)}getMeta(e){return this.metas.obtain(e)}getMetaConstructor(e){return this.metas.obtain(e).constructor}clearCache(){this.metas.clear()}_createMeta(){return kSe(this.globalMeta.getMetaConstructor(),YSe).prototype}}function T8(n,e,t){return(e=KSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KSe(n){var e=qSe(n,"string");return typeof e=="symbol"?e:e+""}function qSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class XSe{constructor(e){T8(this,"columnMeta",void 0),T8(this,"metas",new PS(()=>this._createRow())),this.columnMeta=e}updateMeta(e,t,i){const s=this.getMeta(e,t);Zn(s,i),xS(s,i)}createRow(e,t){this.metas.insert(e,t)}createColumn(e,t){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).insert(e,t)}removeRow(e,t){this.metas.remove(e,t)}removeColumn(e,t){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).remove(e,t)}getMeta(e,t,i){const s=this.metas.obtain(e).obtain(t);return i===void 0?s:s[i]}setMeta(e,t,i,s){var r;const o=this.metas.obtain(e).obtain(t);(r=o._automaticallyAssignedMetaProps)===null||r===void 0||r.delete(i),o[i]=s}removeMeta(e,t,i){const s=this.metas.obtain(e).obtain(t);delete s[i]}getMetas(){const e=[],t=Array.from(this.metas.values());for(let i=0;i<t.length;i++)Me(t[i])&&e.push(...t[i].values());return e}getMetasAtRow(e){TS(()=>ES(e),"Expecting an unsigned number.");const t=new Map(this.metas);return t.has(e)?Array.from(t.get(e).values()):[]}clearCache(){this.metas.clear()}_createRow(){return new PS(e=>this._createMeta(e))}_createMeta(e){const t=this.columnMeta.getMetaConstructor(e);return new t}}class M8{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];this.hot=e,this.globalMeta=new LSe(e),this.tableMeta=new VSe(this.globalMeta),this.columnMeta=new GSe(this.globalMeta),this.cellMeta=new XSe(this.columnMeta),i.forEach(s=>new s(this)),this.globalMeta.updateMeta(t)}getGlobalMeta(){return this.globalMeta.getMeta()}updateGlobalMeta(e){this.globalMeta.updateMeta(e)}getTableMeta(){return this.tableMeta.getMeta()}updateTableMeta(e){this.tableMeta.updateMeta(e)}getColumnMeta(e){return this.columnMeta.getMeta(e)}updateColumnMeta(e,t){this.columnMeta.updateMeta(e,t)}getCellMeta(e,t,i){let{visualRow:s,visualColumn:r}=i;const o=this.cellMeta.getMeta(e,t);return o.visualRow=s,o.visualCol=r,o.row=e,o.col=t,this.runLocalHooks("afterGetCellMeta",o),o}getCellMetaKeyValue(e,t,i){if(typeof i!="string")throw new Error("The passed cell meta object key is not a string");return this.cellMeta.getMeta(e,t,i)}setCellMeta(e,t,i,s){this.cellMeta.setMeta(e,t,i,s)}updateCellMeta(e,t,i){this.cellMeta.updateMeta(e,t,i)}removeCellMeta(e,t,i){this.cellMeta.removeMeta(e,t,i)}getCellsMeta(){return this.cellMeta.getMetas()}getCellsMetaAtRow(e){return this.cellMeta.getMetasAtRow(e)}createRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.createRow(e,t)}removeRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.removeRow(e,t)}createColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.createColumn(e,t),this.columnMeta.createColumn(e,t)}removeColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.removeColumn(e,t),this.columnMeta.removeColumn(e,t)}clearCellsCache(){this.cellMeta.clearCache()}clearCache(){this.cellMeta.clearCache(),this.columnMeta.clearCache()}}Bt(M8,Di);function A8(n,e,t,i){const{hotInstance:s,dataMap:r,dataSource:o,internalSource:a,source:l,metaManager:c,firstRun:h}=i,u=Ki(a),d=s.getSettings();Array.isArray(d.dataSchema)?s.dataType="array":rn(d.dataSchema)?s.dataType="function":s.dataType="object",r&&r.destroy(),n=s.runHooks(`before${u}`,n,h,l);const f=new bg(s,n,c);if(e(f),typeof n=="object"&&n!==null)n.push&&n.splice||(n=[n]);else if(n===null){const g=f.getSchema();n=[];let p,m=0,w=0;for(m=0,w=d.startRows;m<w;m++)if((s.dataType==="object"||s.dataType==="function")&&d.dataSchema)p=qi(g),n.push(p);else if(s.dataType==="array")p=qi(g[0]),n.push(p);else{p=[];for(let y=0,C=d.startCols;y<C;y++)p.push(null);n.push(p)}}else throw new Error(`${a} only accepts array of objects or array of arrays (${typeof n} given)`);Array.isArray(n[0])&&(s.dataType="array"),d.data=n,f.dataSource=n,o.data=n,o.dataType=s.dataType,o.colToProp=f.colToProp.bind(f),o.propToCol=f.propToCol.bind(f),o.countCachedColumns=f.countCachedColumns.bind(f),t(f),s.runHooks(`after${u}`,n,h,l),h||(s.runHooks("afterChange",null,a),s.render()),s.getSettings().ariaTags&&$e(s.rootElement,[Fj(-1),lC(s.countCols()+(s.view?s.countRowHeaders():0))])}function P8(n,e,t){return(e=QSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QSe(n){var e=ZSe(n,"string");return typeof e=="symbol"?e:e+""}function ZSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class JSe{constructor(e){P8(this,"metaManager",void 0),P8(this,"metaSyncMemo",new Map),this.metaManager=e,e.addLocalHook("afterGetCellMeta",t=>this.extendCellMeta(t)),xe.getSingleton().add("beforeRender",t=>{t&&this.metaSyncMemo.clear()},this.metaManager.hot)}extendCellMeta(e){var t;const{row:i,col:s}=e;if((t=this.metaSyncMemo.get(i))!==null&&t!==void 0&&t.has(s))return;const{visualRow:r,visualCol:o}=e,a=this.metaManager.hot,l=a.colToProp(o);e.prop=l,a.runHooks("beforeGetCellMeta",r,o,e);const c=_n(e,"type")?e.type:null;let h=rn(e.cells)?e.cells(i,s,l):null;if(c)if(h){var u;h.type=(u=h.type)!==null&&u!==void 0?u:c}else h={type:c};h&&this.metaManager.updateCellMeta(i,s,h),a.runHooks("afterGetCellMeta",r,o,e),this.metaSyncMemo.has(i)||this.metaSyncMemo.set(i,new Set),this.metaSyncMemo.get(i).add(s)}}function e_e(n,e,t){t_e(n,e),e.set(n,t)}function t_e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rO(n,e,t){return(e=n_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function n_e(n){var e=i_e(n,"string");return typeof e=="symbol"?e:e+""}function i_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function s_e(n,e){return n.get(r_e(n,e))}function r_e(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var I8=new WeakMap;class o_e{constructor(e){rO(this,"metaManager",void 0),rO(this,"usageTracker",new Set),rO(this,"propDescriptors",new Map([["ariaTags",{initOnly:!0}],["fixedColumnsLeft",{target:"fixedColumnsStart",onChange(t){if(this.metaManager.hot.isRtl()&&t==="fixedColumnsLeft")throw new Error("The `fixedColumnsLeft` is not supported for RTL. Please use option `fixedColumnsStart`.");if(this.usageTracker.has("fixedColumnsLeft")&&this.usageTracker.has("fixedColumnsStart"))throw new Error("The `fixedColumnsLeft` and `fixedColumnsStart` should not be used together. Please use only the option `fixedColumnsStart`.")}}],["layoutDirection",{initOnly:!0}],["renderAllColumns",{initOnly:!0}],["renderAllRows",{initOnly:!0}]])),e_e(this,I8,(t,i,s)=>{if(!s)throw new Error(`The \`${t}\` option can not be updated after the Handsontable is initialized.`)}),this.metaManager=e,this.extendMetaProps()}extendMetaProps(){this.propDescriptors.forEach((e,t)=>{const{initOnly:i,target:s,onChange:r}=e,o=typeof s=="string",a=o?s:t,l=`_${a}`;this.metaManager.globalMeta.meta[l]=this.metaManager.globalMeta.meta[a],r?(this.installPropWatcher(t,l,r),o&&this.installPropWatcher(s,l,r)):i&&(this.installPropWatcher(t,l,s_e(I8,this)),this.metaManager.globalMeta.meta._initOnlySettings||(this.metaManager.globalMeta.meta._initOnlySettings=[]),this.metaManager.globalMeta.meta._initOnlySettings.push(t))})}installPropWatcher(e,t,i){const s=this;Object.defineProperty(this.metaManager.globalMeta.meta,e,{get(){return this[t]},set(r){const o=!s.usageTracker.has(e);s.usageTracker.add(e),i.call(s,e,r,o),this[t]=r},enumerable:!0,configurable:!0})}}const O8="gridDefault",ih="editorManager.handlingEditor",a_e={name:"editorCloseAndSave",callback(n){n._getEditorManager().closeEditorAndSaveChanges()}},l_e="hooksRefRegisterer",k8={_hooksStorage:Object.create(null),addHook(n,e){return this._hooksStorage[n]||(this._hooksStorage[n]=[]),this.hot.addHook(n,e),this._hooksStorage[n].push(e),this},removeHooksByKey(n){F(this._hooksStorage[n]||[],e=>{this.hot.removeHook(n,e)})},clearHooks(){et(this._hooksStorage,(n,e)=>this.removeHooksByKey(e)),this._hooksStorage={}}};ma(k8,"MIXIN_NAME",l_e,{writable:!1,enumerable:!1});function Ao(n,e,t){return(e=c_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c_e(n){var e=h_e(n,"string");return typeof e=="symbol"?e:e+""}function h_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const u_e="base",zn=Object.freeze({VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"});class wg{static get EDITOR_TYPE(){return u_e}constructor(e){Ao(this,"hot",void 0),Ao(this,"state",zn.VIRGIN),Ao(this,"_opened",!1),Ao(this,"_fullEditMode",!1),Ao(this,"_closeCallback",null),Ao(this,"TD",null),Ao(this,"row",null),Ao(this,"col",null),Ao(this,"prop",null),Ao(this,"originalValue",null),Ao(this,"cellProperties",null),this.hot=e,this.init()}_fireCallbacks(e){this._closeCallback&&(this._closeCallback(e),this._closeCallback=null)}init(){}getValue(){throw Error("Editor getValue() method unimplemented")}setValue(){throw Error("Editor setValue() method unimplemented")}open(){throw Error("Editor open() method unimplemented")}close(){throw Error("Editor close() method unimplemented")}prepare(e,t,i,s,r,o){this.TD=s,this.row=e,this.col=t,this.prop=i,this.originalValue=r,this.cellProperties=o,this.state=this.isOpened()?this.state:zn.VIRGIN}extend(){return class extends this.constructor{}}saveValue(e,t){let i,s,r,o;if(t){const l=this.hot.getSelectedLast();i=Math.max(Math.min(l[0],l[2]),0),s=Math.max(Math.min(l[1],l[3]),0),r=Math.max(l[0],l[2]),o=Math.max(l[1],l[3])}else[i,s,r,o]=[this.row,this.col,null,null];const a=this.hot.runHooks("modifyGetCellCoords",i,s);Array.isArray(a)&&([i,s]=a),this.hot.populateFromArray(i,s,e,r,o,"edit")}beginEditing(e,t){if(this.state!==zn.VIRGIN)return;const i=this.hot,s=i.rowIndexMapper.getRenderableFromVisualIndex(this.row),r=i.columnIndexMapper.getRenderableFromVisualIndex(this.col);if(i.view.scrollViewport(i._createCellCoords(s,r)),this.state=zn.EDITING,this.isInFullEditMode()){const o=typeof e=="string"?e:Mn(this.originalValue);this.setValue(o)}this.open(t),this._opened=!0,this.focus(),i.view.render(),i.runHooks("afterBeginEditing",this.row,this.col)}finishEditing(e,t,i){let s;if(i){const r=this._closeCallback;this._closeCallback=o=>{r&&r(o),i(o),this.hot.view.render()}}if(!this.isWaiting()){if(this.state===zn.VIRGIN){this.hot._registerTimeout(()=>{this._fireCallbacks(!0)});return}if(this.state===zn.EDITING){if(e){this.cancelChanges(),this.hot.view.render();return}const r=this.getValue();this.cellProperties.trimWhitespace?s=[[typeof r=="string"?String.prototype.trim.call(r||""):r]]:s=[[r]],this.state=zn.WAITING,this.saveValue(s,t),this.hot.getCellValidator(this.cellProperties)?this.hot.addHookOnce("postAfterValidate",o=>{this.state=zn.FINISHED,this.discardEditor(o)}):(this.state=zn.FINISHED,this.discardEditor(!0))}}}cancelChanges(){this.state=zn.FINISHED,this.discardEditor()}discardEditor(e){this.state===zn.FINISHED&&(e===!1&&this.cellProperties.allowInvalid!==!0?(this.hot.selectCell(this.row,this.col),this.focus(),this.state=zn.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=zn.VIRGIN,this._fireCallbacks(!0),this.hot.getShortcutManager().setActiveContextName("grid")))}enableFullEditMode(){this._fullEditMode=!0}isInFullEditMode(){return this._fullEditMode}isOpened(){return this._opened}isWaiting(){return this.state===zn.WAITING}getEditedCellRect(){var e;const t=this.getEditedCell();if(!t)return;const{wtOverlays:i,wtViewport:s}=this.hot.view._wt,r=this.hot.rootWindow,o=hi(t),a=sn(t),l=hi(this.hot.rootElement),c=sn(this.hot.rootElement),h=i.topOverlay.holder,u=i.inlineStartOverlay.holder,d=h!==r?h.scrollTop:0,f=u!==r?u.scrollLeft:0,g=r.innerWidth-l.left-c,{wtTable:p}=(e=i.getParentOverlay(t))!==null&&e!==void 0?e:this.hot.view._wt,m=p.name,w=["master","inline_start"].includes(m)?d:0,y=["master","top","bottom"].includes(m)?f:0,C=o.top===l.top?0:1;let R=o.top-l.top-C-w,_=0;this.hot.isRtl()?_=r.innerWidth-o.left-a-g-1+y:_=o.left-l.left-1-y,["top","top_inline_start_corner"].includes(m)&&(R+=i.topOverlay.getOverlayOffset()),["inline_start","top_inline_start_corner"].includes(m)&&(_+=Math.abs(i.inlineStartOverlay.getOverlayOffset()));const x=this.hot.hasColHeaders(),M=this.hot.rowIndexMapper.getRenderableFromVisualIndex(this.row),I=this.hot.columnIndexMapper.getRenderableFromVisualIndex(this.col),O=this.hot.rowIndexMapper.getRenderableIndexesLength()-this.hot.view._wt.getSetting("fixedRowsBottom");(x&&M<=0||M===O)&&(R+=1),I<=0&&(_+=1);const D=s.rowsRenderCalculator.startPosition,j=s.columnsRenderCalculator.startPosition,Y=Math.abs(i.inlineStartOverlay.getScrollPosition()),Z=i.topOverlay.getScrollPosition(),$=ui(this.hot.rootDocument);let B=t.offsetTop;if(["inline_start","master"].includes(m)&&(B+=D-Z),["bottom","bottom_inline_start_corner"].includes(m)){const{wtViewport:X,wtTable:ne}=i.bottomOverlay.clone;B+=X.getWorkspaceHeight()-ne.getHeight()-$}let ie=t.offsetLeft;this.hot.isRtl()?(ie>=0?ie=p.getWidth()-t.offsetLeft:ie=Math.abs(ie),ie+=j-Y-a):["top","master","bottom"].includes(m)&&(ie+=j-Y);const se=pa(this.TD,this.hot.rootWindow),te=this.hot.isRtl()?"borderRightWidth":"borderLeftWidth",pe=parseInt(se[te],10)>0?0:1,b=parseInt(se.borderTopWidth,10)>0?0:1,v=sn(t)+pe,S=jn(t)+b,T=e6(h)?$:0,H=t6(u)?$:0,E=this.hot.view.maximumVisibleElementWidth(ie)-T+pe,N=Math.max(this.hot.view.maximumVisibleElementHeight(B)-H+b,23);return{top:R,start:_,height:S,maxHeight:N,width:v,maxWidth:E}}getEditedCellsLayerClass(){switch(this.checkEditorSection()){case"inline-start":return"ht_clone_left ht_clone_inline_start";case"bottom":return"ht_clone_bottom";case"bottom-inline-start-corner":return"ht_clone_bottom_left_corner ht_clone_bottom_inline_start_corner";case"top":return"ht_clone_top";case"top-inline-start-corner":return"ht_clone_top_left_corner ht_clone_top_inline_start_corner";default:return"ht_clone_master"}}getEditedCell(){return this.hot.getCell(this.row,this.col,!0)}checkEditorSection(){const e=this.hot.countRows();let t="";return this.row<this.hot.getSettings().fixedRowsTop?this.col<this.hot.getSettings().fixedColumnsStart?t="top-inline-start-corner":t="top":this.hot.getSettings().fixedRowsBottom&&this.row>=e-this.hot.getSettings().fixedRowsBottom?this.col<this.hot.getSettings().fixedColumnsStart?t="bottom-inline-start-corner":t="bottom":this.col<this.hot.getSettings().fixedColumnsStart&&(t="inline-start"),t}}Bt(wg,k8);const d_e={name:"editorCloseAndSaveByArrowKeys",callback(n,e,t){const i=n._getEditorManager(),s=i.getActiveEditor();s.isInFullEditMode()&&s.state===zn.EDITING||(i.closeEditorAndSaveChanges(),n.getSelected()&&(t.includes("arrowdown")?n.selection.transformStart(1,0):t.includes("arrowup")?n.selection.transformStart(-1,0):t.includes("arrowleft")?n.selection.transformStart(0,-1*n.getDirectionFactor()):t.includes("arrowright")&&n.selection.transformStart(0,n.getDirectionFactor())),e.preventDefault())}},f_e={name:"editorCloseAndSaveByEnter",callback(n,e){const t=n._getEditorManager();t.closeEditorAndSaveChanges(e.ctrlKey||e.metaKey),t.moveSelectionAfterEnter(e)}},g_e={name:"editorCloseWithoutSaving",callback(n){const e=n._getEditorManager();e.closeEditorAndRestoreOriginalValue(n.getShortcutManager().isCtrlPressed()),e.activeEditor.focus()}},p_e={name:"editorFastOpen",callback(n,e){const{highlight:t}=n.getSelectedRangeLast();t.isHeader()||n._getEditorManager().openEditor(null,e,!0)}},m_e={name:"editorOpen",callback(n,e,t){const i=n._getEditorManager(),s=n.getSelectedRangeLast(),{highlight:r}=s;if(n.selection.isMultiple()&&!s.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0){const o=n.getSettings(),a=typeof o.enterMoves=="function"?o.enterMoves(e):o.enterMoves;t.includes("shift")?n.selection.transformFocus(-a.row,-a.col):n.selection.transformFocus(a.row,a.col);return}r.isHeader()||(n.getSettings().enterBeginsEditing?i.cellProperties.readOnly?i.moveSelectionAfterEnter(e):i.openEditor(null,e,!0):i.moveSelectionAfterEnter(e),Or(e))}};function b_e(){return[a_e,d_e,f_e,g_e,p_e,m_e]}const w_e={name:"extendCellsSelectionDown",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByColumnHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByRowHeader())&&n.selection.transformEnd(1,0)}},v_e={name:"extendCellsSelectionDownByViewportHeight",callback(n){const{to:e}=n.getSelectedRangeLast(),t=Math.min(e.row+n.countVisibleRows(),n.countRows()-1),i=n.rowIndexMapper.getNearestNotHiddenIndex(t,-1);if(i!==null){const s=n._createCellCoords(i,e.col),r=e.row-n.view.getFirstFullyVisibleRow(),o=Math.min(s.row-r,n.countRows()-1);n.selection.setRangeEnd(s),n.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}},y_e={name:"extendCellsSelectionLeft",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByColumnHeader())&&n.selection.transformEnd(0,-1*n.getDirectionFactor())}},C_e={name:"extendCellsSelectionRight",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByColumnHeader())&&n.selection.transformEnd(0,n.getDirectionFactor())}},S_e={name:"extendCellsSelectionToColumns",callback(n){const{highlight:e,from:t,to:i}=n.getSelectedRangeLast();n.selection.isSelectedByRowHeader()?n.selection.selectAll(!0,!0):n.selectColumns(t.col,i.col,e)}},__e={name:"extendCellsSelectionToMostBottom",callback(n){const{selection:e,rowIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByRowHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(n.countRows()-1,-1),l=s.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(a,r.col))}}},R_e={name:"extendCellsSelectionToMostInlineEnd",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast();if(!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&i.isCell()){const o=t.getNearestNotHiddenIndex(n.countCols()-1,-1),a=s.clone();a.col=i.col,e.setRangeStart(a,void 0,!1,i.clone()),e.setRangeEnd(n._createCellCoords(r.row,o))}}},x_e={name:"extendCellsSelectionToMostInlineStart",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast();if(!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&i.isCell()){const o=parseInt(n.getSettings().fixedColumnsStart,10),a=t.getNearestNotHiddenIndex(o,1),l=s.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),e.setRangeEnd(n._createCellCoords(r.row,a))}}},E_e={name:"extendCellsSelectionToMostLeft",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByColumnHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(...n.isRtl()?[n.countCols()-1,-1]:[0,1]),l=s.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(r.row,a))}}},T_e={name:"extendCellsSelectionToMostRight",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByColumnHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(...n.isRtl()?[0,1]:[n.countCols()-1,-1]),l=s.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(r.row,a))}}},M_e={name:"extendCellsSelectionToMostTop",callback(n){const{selection:e,rowIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByRowHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(0,1),l=s.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(a,r.col))}}},A_e={name:"extendCellsSelectionToRows",callback(n){const{highlight:e,from:t,to:i}=n.getSelectedRangeLast();n.selection.isSelectedByColumnHeader()?n.selection.selectAll(!0,!0):n.selectRows(t.row,i.row,e)}},P_e={name:"extendCellsSelectionUp",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByColumnHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByRowHeader())&&n.selection.transformEnd(-1,0)}},I_e={name:"extendCellsSelectionUpByViewportHeight",callback(n){const{to:e}=n.getSelectedRangeLast(),t=Math.max(e.row-n.countVisibleRows(),0),i=n.rowIndexMapper.getNearestNotHiddenIndex(t,1);if(i!==null){const s=n._createCellCoords(i,e.col),r=e.row-n.view.getFirstFullyVisibleRow(),o=Math.max(s.row-r,0);n.selection.setRangeEnd(s),n.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}};function O_e(){return[w_e,v_e,y_e,C_e,S_e,__e,R_e,x_e,E_e,T_e,M_e,A_e,P_e,I_e]}const k_e={name:"moveCellSelectionDown",callback(n){let{selection:e}=n;e.transformStart(1,0)}},H_e={name:"moveCellSelectionDownByViewportHeight",callback(n){const{navigableHeaders:e}=n.getSettings(),t=e?n.countColHeaders():0,{row:i}=n.getSelectedRangeLast().highlight;let s=n.countVisibleRows()+t;i===n.countRows()-1?s=1:i+s>n.countRows()&&(s=n.countRows()-i-1),n.selection.transformStart(s,0),n.getSelectedRangeLast().highlight.row<0&&n.scrollViewportTo({row:0})}},D_e={name:"moveCellSelectionInlineEnd",callback(n,e){const t=n.getSettings(),i=n.getSelectedRangeLast(),s=typeof t.tabMoves=="function"?t.tabMoves(e):t.tabMoves;n.selection.isMultiple()&&!i.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0?n.selection.transformFocus(-s.row,-s.col):n.selection.transformStart(-s.row,-s.col)}},N_e={name:"moveCellSelectionInlineStart",callback(n,e){const t=n.getSettings(),i=n.getSelectedRangeLast(),s=typeof t.tabMoves=="function"?t.tabMoves(e):t.tabMoves;n.selection.isMultiple()&&!i.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0?n.selection.transformFocus(s.row,s.col):n.selection.transformStart(s.row,s.col)}},L_e={name:"moveCellSelectionLeft",callback(n){n.selection.transformStart(0,-1*n.getDirectionFactor())}},$_e={name:"moveCellSelectionRight",callback(n){n.selection.transformStart(0,n.getDirectionFactor())}},F_e={name:"moveCellSelectionToMostBottom",callback(n){const{col:e}=n.getSelectedRangeLast().highlight;let t=n.rowIndexMapper.getNearestNotHiddenIndex(n.countRows()-1,-1);t===null&&(t=-1),n.selection.setRangeStart(n._createCellCoords(t,e))}},B_e={name:"moveCellSelectionToMostBottomInlineEnd",callback(n){const{selection:e,rowIndexMapper:t,columnIndexMapper:i}=n,s=parseInt(n.getSettings().fixedRowsBottom,10),r=t.getNearestNotHiddenIndex(n.countRows()-s-1,-1),o=i.getNearestNotHiddenIndex(n.countCols()-1,-1);e.setRangeStart(n._createCellCoords(r,o))}},V_e={name:"moveCellSelectionToMostInlineEnd",callback(n){const{selection:e,columnIndexMapper:t}=n;e.setRangeStart(n._createCellCoords(n.getSelectedRangeLast().highlight.row,t.getNearestNotHiddenIndex(n.countCols()-1,-1)))}},W_e={name:"moveCellSelectionToMostInlineStart",callback(n){const{selection:e,columnIndexMapper:t}=n,i=parseInt(n.getSettings().fixedColumnsStart,10),s=n.getSelectedRangeLast().highlight.row,r=t.getNearestNotHiddenIndex(i,1);e.setRangeStart(n._createCellCoords(s,r))}},j_e={name:"moveCellSelectionToMostLeft",callback(n){const{selection:e,columnIndexMapper:t}=n,i=n.getSelectedRangeLast().highlight.row;let s=t.getNearestNotHiddenIndex(...n.isRtl()?[n.countCols()-1,-1]:[0,1]);s===null&&(s=n.isRtl()?-1:-n.countRowHeaders()),e.setRangeStart(n._createCellCoords(i,s))}},z_e={name:"moveCellSelectionToMostRight",callback(n){const{selection:e,columnIndexMapper:t}=n,{row:i}=n.getSelectedRangeLast().highlight;let s=t.getNearestNotHiddenIndex(...n.isRtl()?[0,1]:[n.countCols()-1,-1]);s===null&&(s=n.isRtl()?-n.countRowHeaders():-1),e.setRangeStart(n._createCellCoords(i,s))}},U_e={name:"moveCellSelectionToMostTop",callback(n){const{col:e}=n.getSelectedRangeLast().highlight;let t=n.rowIndexMapper.getNearestNotHiddenIndex(0,1);t===null&&(t=-n.countColHeaders()),n.selection.setRangeStart(n._createCellCoords(t,e))}},Y_e={name:"moveCellSelectionToMostTopInlineStart",callback(n){const{selection:e,rowIndexMapper:t,columnIndexMapper:i}=n,s=parseInt(n.getSettings().fixedRowsTop,10),r=parseInt(n.getSettings().fixedColumnsStart,10),o=t.getNearestNotHiddenIndex(s,1),a=i.getNearestNotHiddenIndex(r,1);e.setRangeStart(n._createCellCoords(o,a))}},G_e={name:"moveCellSelectionUp",callback(n){let{selection:e}=n;e.transformStart(-1,0)}},K_e={name:"moveCellSelectionUpByViewportHight",callback(n){const{navigableHeaders:e}=n.getSettings(),t=e?n.countColHeaders():0,{row:i}=n.getSelectedRangeLast().highlight;let s=-(n.countVisibleRows()+t);i===-t?s=-1:i+s<t&&(s=-(i+t)),n.selection.transformStart(s,0),n.getSelectedRangeLast().highlight.row<0&&n.scrollViewportTo({row:0})}};function q_e(){return[k_e,H_e,D_e,N_e,L_e,$_e,F_e,B_e,V_e,W_e,j_e,z_e,U_e,Y_e,G_e,K_e]}const X_e={name:"emptySelectedCells",callback(n){n.emptySelectedCells(),n._getEditorManager().prepareEditor()}},Q_e={name:"scrollToFocusedCell",callback(n){const{highlight:e}=n.getSelectedRangeLast(),t=n.view.getFirstFullyVisibleRow()-1,i=n.view.getFirstFullyVisibleColumn()-1,s=n.view.getLastFullyVisibleRow()+1,r=n.view.getLastFullyVisibleColumn()+1,o=n._createCellCoords(t,i),a=n._createCellCoords(s,r);if(!n._createCellRange(o,o,a).includes(e)&&(e.row>=0||e.col>=0)){const c={};if(e.col>=0){const h=Math.floor(n.countVisibleCols()/2);c.col=Math.max(e.col-h,0)}if(e.row>=0){const h=Math.floor(n.countVisibleRows()/2);c.row=Math.max(e.row-h,0)}n.scrollViewportTo({...c,verticalSnap:"top",horizontalSnap:"start"})}}},Z_e={name:"selectAllCells",callback(n){n.selection.selectAll(!0,!0,{disableHeadersHighlight:!0})}},J_e={name:"selectAllCellsAndHeaders",callback(n){n.selection.selectAll(!0,!0,{disableHeadersHighlight:!1})}},eRe={name:"populateSelectedCellsData",callback(n){const e=n.getSelectedRange(),{row:t,col:i}=e[e.length-1].highlight.normalize(),s=n.getDataAtCell(t,i),r=new Map;for(let o=0;o<e.length;o++)e[o].forAll((a,l)=>{if(a>=0&&l>=0&&(a!==t||l!==i)){const{readOnly:c}=n.getCellMeta(a,l);c||r.set(`${a}x${l}`,[a,l,s])}});n.setDataAtCell(Array.from(r.values()))}},tRe=[...b_e(),...O_e(),...q_e(),X_e,Q_e,Z_e,J_e,eRe];function H8(n){const e={};return tRe.forEach(t=>{let{name:i,callback:s}=t;e[i]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return s(n,...o)}}),e}function nRe(n){const e=n.getShortcutManager().addContext("editor"),t=H8(n),i={group:ih};e.addShortcuts([{keys:[["Enter"],["Enter","Shift"]],callback:(s,r)=>t.editorCloseAndSaveByEnter(s,r)},{keys:[["Enter","Control/Meta"],["Enter","Control/Meta","Shift"]],captureCtrl:!0,callback:(s,r)=>t.editorCloseAndSaveByEnter(s,r)},{keys:[["Tab"],["Tab","Shift"],["PageDown"],["PageUp"]],forwardToContext:n.getShortcutManager().getContext("grid"),callback:(s,r)=>t.editorCloseAndSave(s,r)},{keys:[["ArrowDown"],["ArrowUp"],["ArrowLeft"],["ArrowRight"]],preventDefault:!1,callback:(s,r)=>t.editorCloseAndSaveByArrowKeys(s,r)},{keys:[["Escape"],["Escape","Control/Meta"]],callback:()=>t.editorCloseWithoutSaving()}],i)}function iRe(n){const e=n.getShortcutManager().addContext("grid"),t=H8(n),i={runOnlyIf:()=>{const{navigableHeaders:s}=n.getSettings();return Me(n.getSelected())&&(s||!s&&n.countRenderedRows()>0&&n.countRenderedCols()>0)},group:O8};e.addShortcuts([{keys:[["F2"]],callback:s=>t.editorFastOpen(s)},{keys:[["Enter"],["Enter","Shift"]],callback:(s,r)=>t.editorOpen(s,r)},{keys:[["Backspace"],["Delete"]],callback:()=>t.emptySelectedCells()}],{group:ih,runOnlyIf:()=>Me(n.getSelected())}),e.addShortcuts([{keys:[["Control/Meta","A"]],callback:()=>t.selectAllCells(),runOnlyIf:()=>{var s;return!((s=n.getSelectedRangeLast())!==null&&s!==void 0&&s.highlight.isHeader())}},{keys:[["Control/Meta","A"]],callback:()=>{},runOnlyIf:()=>{var s;return(s=n.getSelectedRangeLast())===null||s===void 0?void 0:s.highlight.isHeader()},preventDefault:!0},{keys:[["Control/Meta","Shift","Space"]],callback:()=>t.selectAllCellsAndHeaders()},{keys:[["Control/Meta","Enter"]],callback:()=>t.populateSelectedCellsData(),runOnlyIf:()=>{var s,r;return!((s=n.getSelectedRangeLast())!==null&&s!==void 0&&s.highlight.isHeader())&&((r=n.getSelectedRangeLast())===null||r===void 0?void 0:r.getCellsCount())>1}},{keys:[["Control","Space"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToColumns()},{keys:[["Shift","Space"]],stopPropagation:!0,callback:()=>t.extendCellsSelectionToRows()},{keys:[["ArrowUp"]],callback:()=>t.moveCellSelectionUp()},{keys:[["ArrowUp","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostTop()},{keys:[["ArrowUp","Shift"]],callback:()=>t.extendCellsSelectionUp()},{keys:[["ArrowUp","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostTop(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByColumnHeader())},{keys:[["ArrowDown"]],callback:()=>t.moveCellSelectionDown()},{keys:[["ArrowDown","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostBottom()},{keys:[["ArrowDown","Shift"]],callback:()=>t.extendCellsSelectionDown()},{keys:[["ArrowDown","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostBottom(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByColumnHeader())},{keys:[["ArrowLeft"]],callback:()=>t.moveCellSelectionLeft()},{keys:[["ArrowLeft","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostLeft()},{keys:[["ArrowLeft","Shift"]],callback:()=>t.extendCellsSelectionLeft()},{keys:[["ArrowLeft","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostLeft(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByRowHeader())},{keys:[["ArrowRight"]],callback:()=>t.moveCellSelectionRight()},{keys:[["ArrowRight","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostRight()},{keys:[["ArrowRight","Shift"]],callback:()=>t.extendCellsSelectionRight()},{keys:[["ArrowRight","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostRight(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByRowHeader())},{keys:[["Home"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostInlineStart(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["Home","Shift"]],callback:()=>t.extendCellsSelectionToMostInlineStart()},{keys:[["Home","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostTopInlineStart(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostInlineEnd(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End","Shift"]],callback:()=>t.extendCellsSelectionToMostInlineEnd()},{keys:[["End","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostBottomInlineEnd(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["PageUp"]],callback:()=>t.moveCellSelectionUpByViewportHight()},{keys:[["PageUp","Shift"]],callback:()=>t.extendCellsSelectionUpByViewportHeight()},{keys:[["PageDown"]],callback:()=>t.moveCellSelectionDownByViewportHeight()},{keys:[["PageDown","Shift"]],callback:()=>t.extendCellsSelectionDownByViewportHeight()},{keys:[["Tab"]],preventDefault:!1,callback:s=>t.moveCellSelectionInlineStart(s)},{keys:[["Shift","Tab"]],preventDefault:!1,callback:s=>t.moveCellSelectionInlineEnd(s)},{keys:[["Control/Meta","Backspace"]],callback:()=>t.scrollToFocusedCell()}],i)}function sRe(n){[iRe,nRe].forEach(e=>e(n))}function rRe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=n.rootElement,i=D8(n),s=D8(n);return i.addEventListener("focus",()=>e==null?void 0:e.onFocusFromTop()),s.addEventListener("focus",()=>e==null?void 0:e.onFocusFromBottom()),t.firstChild.before(i),t.lastChild.after(s),{activate(){n._registerTimeout(()=>{i.tabIndex=0,s.tabIndex=0},10)},deactivate(){n._registerTimeout(()=>{i.tabIndex=-1,s.tabIndex=-1},10)}}}function D8(n){const t=n.rootDocument.createElement("input");return t.type="text",t.classList.add("htFocusCatcher"),n.getSettings().ariaTags&&$e(t,[ga(),Du()]),t}function oRe(n){const e=aRe(n);let t;const{activate:i,deactivate:s}=rRe(n,{onFocusFromTop(){var u;const d=(u=e(t))!==null&&u!==void 0?u:oO(n);d&&(n.runHooks("modifyFocusOnTabNavigation","from_above",d),n.selectCell(d.row,d.col)),n.listen()},onFocusFromBottom(){var u;const d=(u=e(t))!==null&&u!==void 0?u:aO(n);d&&(n.runHooks("modifyFocusOnTabNavigation","from_below",d),n.selectCell(d.row,d.col)),n.listen()}}),r={wrapped:!1,flipped:!1};let o=!0,a=!1,l=!1;n.addHook("afterListen",()=>s()),n.addHook("afterUnlisten",()=>i()),n.addHook("afterSelection",(u,d,f,g,p)=>{if(a&&(r.wrapped&&r.flipped||l)&&(l=!1,p.value=!0),o){var m;t=(m=n.getSelectedRangeLast())===null||m===void 0?void 0:m.highlight}}),n.addHook("beforeRowWrap",(u,d,f)=>{r.wrapped=!0,r.flipped=f});function c(){r.wrapped=!1,r.flipped=!1,n.deselectCell(),n.unlisten()}const h={keys:[["Tab"],["Shift","Tab"]],preventDefault:!1,stopPropagation:!1,relativeToGroup:O8,group:"focusCatcher"};n.getShortcutManager().getContext("grid").addShortcuts([{...h,callback:()=>{const{tabNavigation:u}=n.getSettings();a=!0,n.getSelectedRangeLast()&&!u&&(o=!1),u||(l=!0)},position:"before"},{...h,callback:u=>{const{tabNavigation:d,autoWrapRow:f}=n.getSettings();if(a=!1,o=!0,!d||!n.selection.isSelected()||f&&r.wrapped&&r.flipped||!f&&r.wrapped)return f&&r.wrapped&&r.flipped&&(t=u.shiftKey?oO(n):aO(n)),c(),!1;u.preventDefault()},position:"after"}])}function oO(n){const{rowIndexMapper:e,columnIndexMapper:t}=n,{navigableHeaders:i}=n.getSettings();let s=i&&n.countColHeaders()>0?-n.countColHeaders():0,r=i&&n.countRowHeaders()>0?-n.countRowHeaders():0;return s===0&&(s=e.getVisualFromRenderableIndex(s)),r===0&&(r=t.getVisualFromRenderableIndex(r)),s===null||r===null?null:n._createCellCoords(s,r)}function aO(n){var e,t;const{rowIndexMapper:i,columnIndexMapper:s}=n,{navigableHeaders:r}=n.getSettings();let o=i.getRenderableIndexesLength()-1,a=s.getRenderableIndexesLength()-1;if(o<0){if(!r||n.countColHeaders()===0)return null;o=-1}if(a<0){if(!r||n.countColHeaders()===0)return null;a=-1}return n._createCellCoords((e=i.getVisualFromRenderableIndex(o))!==null&&e!==void 0?e:o,(t=s.getVisualFromRenderableIndex(a))!==null&&t!==void 0?t:a)}function aRe(n){return e=>{if(!e)return null;const t=oO(n),i=aO(n);return e.col<t.col&&(e.col=t.col),e.col>i.col&&(e.col=i.col),e.row<t.row&&(e.row=t.row),e.row>i.row&&(e.row=i.row),e}}function lRe(n){return e=>{let{col:t}=e;n.scrollViewportTo({col:t})}}function cRe(){return()=>{}}function hRe(n){return e=>{n.scrollViewportTo(e.toObject())}}function uRe(n){return e=>{n.scrollViewportTo(e.toObject())}}function dRe(n){return e=>{n.scrollViewportTo(e.toObject())}}function fRe(n){return e=>{let{row:t}=e;n.scrollViewportTo({row:t})}}function gRe(n){return e=>{const t=n.selection.getSelectionSource(),{row:i,col:s}=e;if(i<0&&s>=0)n.scrollViewportTo({col:s});else if(s<0&&i>=0)n.scrollViewportTo({row:i});else{if(t==="mouse"&&(s===n.view.getLastPartiallyVisibleColumn()||i===n.view.getLastPartiallyVisibleRow()))return;n.scrollViewportTo({row:i,col:s})}}}function pRe(n){const{selection:e}=n;let t=!1,i=!1;return{resume(){i=!1},suspend(){i=!0},skipNextScrollCycle(){t=!0},scrollTo(s){var r;if(t||i){t=!1;return}let o;e.isFocusSelectionChanged()?o=hRe(n):e.isSelectedByCorner()?o=cRe():e.isSelectedByRowHeader()?o=fRe(n):e.isSelectedByColumnHeader()?o=lRe(n):e.getSelectedRange().size()===1&&e.isMultiple()?o=uRe(n):e.getSelectedRange().size()===1&&!e.isMultiple()?o=gRe(n):e.getSelectedRange().size()>1&&(o=dRe(n)),(r=o)===null||r===void 0||r(s)}}}const N8=new Map([[" ","space"],["spacebar","space"],["scroll","scrolllock"],["del","delete"],["esc","escape"],["medianexttrack","mediatracknext"],["mediaprevioustrack","mediatrackprevious"],["volumeup","audiovolumeup"],["volumedown","audiovolumedown"],["volumemute","audiovolumemute"],["multiply","*"],["add","+"],["divide","/"],["subtract","-"],["left","arrowleft"],["right","arrowright"],["up","arrowup"],["down","arrowdown"]]),IS=n=>n.map(e=>{const t=e.toLowerCase();return N8.has(t)?N8.get(t):t}).sort().join("+"),mRe=n=>n.split("+"),L8=new Map([[96,"numpad0"],[97,"numpad1"],[98,"numpad2"],[99,"numpad3"],[100,"numpad4"],[101,"numpad5"],[102,"numpad6"],[103,"numpad7"],[104,"numpad8"],[105,"numpad9"],[106,"multiply"],[107,"add"],[108,"decimal"],[109,"subtract"],[110,"decimal"],[111,"divide"],[112,"f1"],[113,"f2"],[114,"f3"],[115,"f4"],[116,"f5"],[117,"f6"],[118,"f7"],[119,"f8"],[120,"f9"],[121,"f10"],[122,"f11"],[123,"f12"],[186,"semicolon"],[187,"equal"],[188,"comma"],[189,"minus"],[190,"period"],[191,"slash"],[192,"backquote"],[219,"bracketleft"],[220,"backslash"],[221,"bracketright"],[222,"quote"]]),lO=n=>{let{which:e,key:t}=n;if(L8.has(e))return L8.get(e);const i=String.fromCharCode(e).toLowerCase();return/^[a-z0-9]$/.test(i)?i:t.toLowerCase()},$8=Symbol("shortcut-context");function F8(n){return Je(n)&&n.__kindOf===$8}const bRe=n=>{const e=IC({errorIdExists:l=>`The "${l}" shortcut is already registered in the "${n}" context.`}),t=function(){let{keys:l,callback:c,group:h,runOnlyIf:u=()=>!0,captureCtrl:d=!1,preventDefault:f=!0,stopPropagation:g=!1,relativeToGroup:p,position:m,forwardToContext:w}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(nn(h))throw new Error("You need to define the shortcut's group.");if(rn(c)===!1)throw new Error("The shortcut's callback needs to be a function.");if(Array.isArray(l)===!1)throw new Error(Ft`Pass the shortcut\'s keys as an array of arrays,\x20
      using the KeyboardEvent.key properties:\x20
      https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values.`);const y={callback:c,group:h,runOnlyIf:u,captureCtrl:d,preventDefault:f,stopPropagation:g};Me(p)&&(y.relativeToGroup=p,y.position=m),F8(w)&&(y.forwardToContext=w),l.forEach(C=>{const R=IS(C);if(e.hasItem(R)){const x=e.getItem(R);let M=x.findIndex(I=>I.group===p);M!==-1?m==="before"?M-=1:M+=1:M=x.length,x.splice(M,0,y)}else e.addItem(R,[y])})},i=function(l){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.forEach(h=>{et(c,(u,d)=>{Object.prototype.hasOwnProperty.call(h,d)===!1&&(h[d]=c[d])}),t(h)})},s=l=>{const c=IS(l);e.removeItem(c)};return{__kindOf:$8,addShortcut:t,addShortcuts:i,getShortcuts:l=>{const c=IS(l),h=e.getItem(c);return Me(h)?h.slice():[]},hasShortcut:l=>{const c=IS(l);return e.hasItem(c)},removeShortcutsByKeys:s,removeShortcutsByGroup:l=>{e.getItems().forEach(h=>{let[u,d]=h;const f=d.filter(g=>g.group!==l);f.length===0?s(mRe(u)):(d.length=0,d.push(...f))})}}};function wRe(){const n=new Set;return{press(e){n.add(e)},release(e){n.delete(e)},releaseAll(){n.clear()},isPressed(e){return n.has(e)}}}const vRe=["meta","alt","shift","control"],Yb=wRe(),Gb=[];let OS=0;function yRe(n,e,t,i,s){const r=f=>vRe.includes(f),o=function(f){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const p=[];return f.altKey&&p.push("alt"),g&&(f.ctrlKey||f.metaKey)?p.push("control/meta"):(f.ctrlKey&&p.push("control"),f.metaKey&&p.push("meta")),f.shiftKey&&p.push("shift"),p},a=f=>{if(e(f)===!1)return;const g=t(f);if(f.keyCode===229||g===!1||Xc(f))return;const p=lO(f);let m=[];r(p)||(m=o(f));const w=[p].concat(m);!s(f,w)&&(gb()&&m.includes("meta")||!gb()&&m.includes("control"))&&s(f,[p].concat(o(f,!0))),i(f)},l=f=>{if(f.key){const g=lO(f);r(g)&&Yb.press(g)}},c=f=>{if(f.key){const g=lO(f);r(g)&&Yb.release(g)}},h=()=>{Yb.releaseAll()};return{mount:()=>{let f=n;for(OS+=1;f;)OS===1&&(f.document.documentElement.addEventListener("keydown",l),Gb.push({event:"keydown",listener:l}),f.document.documentElement.addEventListener("keyup",c),Gb.push({event:"keyup",listener:c})),f.document.documentElement.addEventListener("keydown",a),f.document.documentElement.addEventListener("blur",h),f=Nu(f)},unmount:()=>{let f=n;for(OS-=1;f;){if(OS===0){for(let g=0;g<Gb.length;g++){const{event:p,listener:m}=Gb[g];f.document.documentElement.removeEventListener(p,m)}Gb.length=0}f.document.documentElement.removeEventListener("keydown",a),f.document.documentElement.removeEventListener("blur",h),f=Nu(f)}},isPressed:f=>Yb.isPressed(f),releasePressedKeys:()=>Yb.releaseAll()}}const CRe=n=>{let{ownerWindow:e,handleEvent:t,beforeKeyDown:i,afterKeyDown:s}=n;const r=IC({errorIdExists:g=>`The "${g}" context name is already registered.`});let o="grid";const a=g=>{const p=bRe(g);return r.addItem(g,p),p},l=()=>o,c=g=>r.getItem(g),h=g=>{if(!r.hasItem(g))throw new Error(Ft`You've tried to activate the "${g}" shortcut context\x20
        that does not exist. Before activation, register the context using the "addContext" method.`);o=g};let u=!1;const d=function(g,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l();const w=F8(m)?m:c(m);let y=!1;if(!w.hasShortcut(p))return y;const C=w.getShortcuts(p);for(let R=0;R<C.length;R++){const{callback:_,runOnlyIf:x,preventDefault:M,stopPropagation:I,captureCtrl:A,forwardToContext:O}=C[R];if(x(g)===!0){if(u=A,y=_(g,p)===!1,u=!1,M&&g.preventDefault(),I&&(Or(g),g.stopPropagation()),y)break;O&&d(g,p,O)}}return y},f=yRe(e,t,i,s,d);return f.mount(),{addContext:a,getActiveContextName:l,getContext:c,setActiveContextName:h,isCtrlPressed:()=>!u&&(f.isPressed("control")||f.isPressed("meta")),releasePressedKeys:()=>f.releasePressedKeys(),destroy:()=>f.unmount()}};let cO=null;const hO=new Map;function B8(n,e){var t,i=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=this;const o=new kr(r);let a,l,c,h,u,d,f=!0;iCe(s)&&nCe(this),this.rootElement=n,this.rootDocument=n.ownerDocument,this.rootWindow=this.rootDocument.defaultView,this.isDestroyed=!1,this.renderSuspendedCounter=0,this.executionSuspendedCounter=0;const g=(t=e==null?void 0:e.layoutDirection)!==null&&t!==void 0?t:"inherit",p=["rtl","ltr"].includes(g)?g:this.rootWindow.getComputedStyle(this.rootElement).direction;this.rootElement.setAttribute("dir",p),this.isRtl=function(){return p==="rtl"},this.isLtr=function(){return!r.isRtl()},this.getDirectionFactor=function(){return r.isLtr()?1:-1},e.language=ZCe(e.language);const m=new M8(r,e,[JSe,o_e]),w=m.getTableMeta(),y=m.getGlobalMeta(),C=IC();this.container=this.rootDocument.createElement("div"),this.renderCall=!1,n.insertBefore(this.container,n.firstChild),XC(this)&&Dj(e.licenseKey,n),this.guid=`ht_${KM()}`,hO.set(this.guid,this),this.columnIndexMapper=new HP,this.rowIndexMapper=new HP,this.columnIndexMapper.addLocalHook("indexesSequenceChange",b=>{r.runHooks("afterColumnSequenceChange",b)}),this.rowIndexMapper.addLocalHook("indexesSequenceChange",b=>{r.runHooks("afterRowSequenceChange",b)}),l=new mCe(r),(!this.rootElement.id||this.rootElement.id.substring(0,3)==="ht_")&&(this.rootElement.id=this.guid);const R=b=>{const{row:v,col:S}=b;return r._createCellCoords(v>=0?r.rowIndexMapper.getRenderableFromVisualIndex(v):v,S>=0?r.columnIndexMapper.getRenderableFromVisualIndex(S):S)},_=b=>{const{row:v,col:S}=b;return r._createCellCoords(v>=0?r.rowIndexMapper.getVisualFromRenderableIndex(v):v,S>=0?r.columnIndexMapper.getVisualFromRenderableIndex(S):S)},x=(b,v)=>{const S=v>b?1:-1,T=Math.min(b,v),H=Math.max(b,v),E=r.rowIndexMapper.getNearestNotHiddenIndex(b,S);return E===null||S===1&&E>H||S===-1&&E<T?null:E>=0?r.rowIndexMapper.getRenderableFromVisualIndex(E):E},M=(b,v)=>{const S=v>b?1:-1,T=Math.min(b,v),H=Math.max(b,v),E=r.columnIndexMapper.getNearestNotHiddenIndex(b,S);return E===null||S===1&&E>H||S===-1&&E<T?null:E>=0?r.columnIndexMapper.getRenderableFromVisualIndex(E):E};let I=new y8(w,{rowIndexMapper:r.rowIndexMapper,columnIndexMapper:r.columnIndexMapper,countCols:()=>r.countCols(),countRows:()=>r.countRows(),propToCol:b=>a.propToCol(b),isEditorOpened:()=>r.getActiveEditor()?r.getActiveEditor().isOpened():!1,countRenderableColumns:()=>this.view.countRenderableColumns(),countRenderableRows:()=>this.view.countRenderableRows(),countRowHeaders:()=>this.countRowHeaders(),countColHeaders:()=>this.countColHeaders(),countRenderableRowsInRange:function(){return i.view.countRenderableRowsInRange(...arguments)},countRenderableColumnsInRange:function(){return i.view.countRenderableColumnsInRange(...arguments)},getShortcutManager:()=>r.getShortcutManager(),createCellCoords:(b,v)=>r._createCellCoords(b,v),createCellRange:(b,v,S)=>r._createCellRange(b,v,S),visualToRenderableCoords:R,renderableToVisualCoords:_,findFirstNonHiddenRenderableRow:x,findFirstNonHiddenRenderableColumn:M,isDisabledCellSelection:(b,v)=>b<0||v<0?r.getSettings().disableVisualSelection:r.getCellMeta(b,v).disableVisualSelection});this.selection=I;const A=b=>{let{hiddenIndexesChanged:v}=b;v&&this.selection.commit()};this.columnIndexMapper.addLocalHook("cacheUpdated",A),this.rowIndexMapper.addLocalHook("cacheUpdated",A),this.selection.addLocalHook("afterSetRangeEnd",(b,v)=>{const S=Pr(!1),T=this.selection.getSelectedRange(),{from:H,to:E}=T.current(),N=T.size()-1;this.runHooks("afterSelection",H.row,H.col,E.row,E.col,S,N),this.runHooks("afterSelectionByProp",H.row,r.colToProp(H.col),E.row,r.colToProp(E.col),S,N),v&&(!S.isTouched()||S.isTouched()&&!S.value)&&d.scrollTo(b);const X=I.isSelectedByRowHeader(),ne=I.isSelectedByColumnHeader();X&&ne?ae(this.rootElement,["ht__selection--rows","ht__selection--columns"]):X?(Ue(this.rootElement,"ht__selection--columns"),ae(this.rootElement,"ht__selection--rows")):ne?(Ue(this.rootElement,"ht__selection--rows"),ae(this.rootElement,"ht__selection--columns")):Ue(this.rootElement,["ht__selection--rows","ht__selection--columns"]),I.getSelectionSource()!=="shift"&&h.closeEditor(null),r.view.render(),h.prepareEditor()}),this.selection.addLocalHook("beforeSetFocus",b=>{this.runHooks("beforeSelectionFocusSet",b.row,b.col)}),this.selection.addLocalHook("afterSetFocus",b=>{const v=Pr(!1);this.runHooks("afterSelectionFocusSet",b.row,b.col,v),(!v.isTouched()||v.isTouched()&&!v.value)&&d.scrollTo(b),h.closeEditor(),r.view.render(),h.prepareEditor()}),this.selection.addLocalHook("afterSelectionFinished",b=>{const v=b.length-1,{from:S,to:T}=b[v];this.runHooks("afterSelectionEnd",S.row,S.col,T.row,T.col,v),this.runHooks("afterSelectionEndByProp",S.row,r.colToProp(S.col),T.row,r.colToProp(T.col),v)}),this.selection.addLocalHook("afterIsMultipleSelection",b=>{const v=this.runHooks("afterIsMultipleSelection",b.value);b.value&&(b.value=v)}),this.selection.addLocalHook("afterDeselect",()=>{h.closeEditor(),r.view.render(),Ue(this.rootElement,["ht__selection--rows","ht__selection--columns"]),this.runHooks("afterDeselect")}),this.selection.addLocalHook("beforeHighlightSet",()=>this.runHooks("beforeSelectionHighlightSet")).addLocalHook("beforeSetRangeStart",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("beforeSetRangeStart",...v)}).addLocalHook("beforeSetRangeStartOnly",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("beforeSetRangeStartOnly",...v)}).addLocalHook("beforeSetRangeEnd",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("beforeSetRangeEnd",...v)}).addLocalHook("beforeSelectColumns",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("beforeSelectColumns",...v)}).addLocalHook("afterSelectColumns",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("afterSelectColumns",...v)}).addLocalHook("beforeSelectRows",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("beforeSelectRows",...v)}).addLocalHook("afterSelectRows",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("afterSelectRows",...v)}).addLocalHook("beforeModifyTransformStart",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("modifyTransformStart",...v)}).addLocalHook("afterModifyTransformStart",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("afterModifyTransformStart",...v)}).addLocalHook("beforeModifyTransformFocus",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("modifyTransformFocus",...v)}).addLocalHook("afterModifyTransformFocus",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("afterModifyTransformFocus",...v)}).addLocalHook("beforeModifyTransformEnd",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("modifyTransformEnd",...v)}).addLocalHook("afterModifyTransformEnd",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("afterModifyTransformEnd",...v)}).addLocalHook("beforeRowWrap",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("beforeRowWrap",...v)}).addLocalHook("beforeColumnWrap",function(){for(var b=arguments.length,v=new Array(b),S=0;S<b;S++)v[S]=arguments[S];return i.runHooks("beforeColumnWrap",...v)}).addLocalHook("insertRowRequire",b=>this.alter("insert_row_above",b,1,"auto")).addLocalHook("insertColRequire",b=>this.alter("insert_col_start",b,1,"auto")),c={alter(b,v){var S,T;let H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=arguments.length>3?arguments[3]:void 0,N=arguments.length>4?arguments[4]:void 0;const X=ne=>{if(ne.length===0)return[];const he=[...ne];return he.sort((ke,Ee)=>{let[J]=ke,[oe]=Ee;return J===oe?0:J>oe?1:-1}),Qn(he,(ke,Ee)=>{let[J,oe]=Ee;const ce=ke[ke.length-1],[Ve,Se]=ce,_e=Ve+Se;if(J<=_e){const P=Math.max(oe-(_e-J),0);ce[1]+=P}else ke.push([J,oe]);return ke},[he[0]])};switch(b){case"insert_row_below":case"insert_row_above":const ne=r.countSourceRows();if(w.maxRows===ne)return;const he=b==="insert_row_below"?"below":"above";v=(S=v)!==null&&S!==void 0?S:he==="below"?ne:0;const{delta:re,startPhysicalIndex:ke}=a.createRow(v,H,{source:E,mode:he});I.shiftRows(r.toVisualRow(ke),re);break;case"insert_col_start":case"insert_col_end":const Ee=b==="insert_col_end"?"end":"start";v=(T=v)!==null&&T!==void 0?T:Ee==="end"?r.countSourceCols():0;const{delta:J,startPhysicalIndex:oe}=a.createCol(v,H,{source:E,mode:Ee});if(J){if(Array.isArray(w.colHeaders)){const Se=[r.toVisualColumn(oe),0];Se.length+=J,Array.prototype.splice.apply(w.colHeaders,Se)}I.shiftColumns(r.toVisualColumn(oe),J)}break;case"remove_row":const ce=Se=>{let _e=0;F(Se,P=>{let[k,L]=P;const G=An(k)?r.countRows()-1:Math.max(k-_e,0);if(Number.isInteger(k)&&(k=Math.max(k-_e,0)),!a.removeRow(k,L,E))return;if(I.isSelected()){const{row:K}=r.getSelectedRangeLast().highlight;K>=k&&K<=k+L-1&&h.closeEditor(!0)}const Q=r.countRows();Q===0?I.deselect():E==="ContextMenu.removeRow"?I.refresh():I.shiftRows(k,-L);const U=w.fixedRowsTop;U>=G+1&&(w.fixedRowsTop-=Math.min(L,U-G));const W=w.fixedRowsBottom;W&&G>=Q-W&&(w.fixedRowsBottom-=Math.min(L,W)),_e+=L})};Array.isArray(v)?ce(X(v)):ce([[v,H]]);break;case"remove_col":const Ve=Se=>{let _e=0;F(Se,P=>{let[k,L]=P;const G=An(k)?r.countCols()-1:Math.max(k-_e,0);let V=r.toPhysicalColumn(G);if(Number.isInteger(k)&&(k=Math.max(k-_e,0)),!a.removeCol(k,L,E))return;if(I.isSelected()){const{col:K}=r.getSelectedRangeLast().highlight;K>=k&&K<=k+L-1&&h.closeEditor(!0)}r.countCols()===0?I.deselect():E==="ContextMenu.removeColumn"?I.refresh():I.shiftColumns(k,-L);const W=w.fixedColumnsStart;W>=G+1&&(w.fixedColumnsStart-=Math.min(L,W-G)),Array.isArray(w.colHeaders)&&(typeof V>"u"&&(V=-1),w.colHeaders.splice(V,L)),_e+=L})};Array.isArray(v)?Ve(X(v)):Ve([[v,H]]);break;default:throw new Error(`There is no such action "${b}"`)}r.view.render(),N||c.adjustRowsAndCols()},adjustRowsAndCols(){const b=w.minRows,v=w.minSpareRows,S=w.minCols,T=w.minSpareCols;if(b){const H=r.countRows();H<b&&a.createRow(H,b-H,{source:"auto"})}if(v){const H=r.countEmptyRows(!0);if(H<v){const E=v-H,N=Math.min(E,w.maxRows-r.countSourceRows());a.createRow(r.countRows(),N,{source:"auto"})}}{let H;(S||T)&&(H=r.countEmptyCols(!0));let E=r.countCols();if(S&&!w.columns&&E<S){const N=S-E;H+=N,a.createCol(E,N,{source:"auto"})}if(T&&!w.columns&&r.dataType==="array"&&H<T){E=r.countCols();const N=T-H,X=Math.min(N,w.maxCols-E);a.createCol(E,X,{source:"auto"})}}r.view&&r.view.adjustElementsSize()},populateFromArray(b,v,S,T,H){let E,N,X,ne;const he=[],re={},ke=[],Ee=b.row,J=b.col;if(N=v.length,N===0)return!1;let oe=0,ce=0;switch(Je(S)&&(oe=S.col-J+1,ce=S.row-Ee+1),H){case"shift_down":const Ve=nb(v),Se=Ve.length,_e=Math.max(Se,oe),P=r.getData().slice(Ee),k=nb(P).slice(J,J+_e);for(X=0;X<_e;X+=1)if(X<Se){for(E=0,N=Ve[X].length;E<ce-N;E+=1)Ve[X].push(Ve[X][E%N]);X<k.length?ke.push(Ve[X].concat(k[X])):ke.push(Ve[X].concat(new Array(P.length).fill(null)))}else ke.push(Ve[X%Se].concat(k[X]));r.populateFromArray(Ee,J,nb(ke));break;case"shift_right":const L=v.length,G=Math.max(L,ce),V=r.getData().slice(Ee).map(Re=>Re.slice(J));for(E=0;E<G;E+=1)if(E<L){for(X=0,ne=v[E].length;X<oe-ne;X+=1)v[E].push(v[E][X%ne]);if(E<V.length)for(let Re=0;Re<V[E].length;Re+=1)v[E].push(V[E][Re]);else v[E].push(...new Array(V[0].length).fill(null))}else v.push(v[E%N].slice(0,G).concat(V[E]));r.populateFromArray(Ee,J,v);break;case"overwrite":default:re.row=b.row,re.col=b.col;let Q=0,U=0,W=!0,K;const q=function(De){let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const vt=v[De%v.length];return nt!==null?vt[nt%vt.length]:vt},ee=v.length,ge=S?S.row-b.row+1:0;for(S?N=ge:N=Math.max(ee,ge),E=0;E<N&&!(S&&re.row>S.row&&ge>ee||!w.allowInsertRow&&re.row>r.countRows()-1||re.row>=w.maxRows);E++){const Re=E-Q,De=q(Re).length,nt=S?S.col-b.col+1:0;if(S?ne=nt:ne=Math.max(De,nt),re.col=b.col,K=r.getCellMeta(re.row,re.col),(T==="CopyPaste.paste"||T==="Autofill.fill")&&K.skipRowOnPaste){Q+=1,re.row+=1,N+=1;continue}for(U=0,X=0;X<ne&&!(S&&re.col>S.col&&nt>De||!w.allowInsertColumn&&re.col>r.countCols()-1||re.col>=w.maxCols);X++){if(K=r.getCellMeta(re.row,re.col),(T==="CopyPaste.paste"||T==="Autofill.fill")&&K.skipColumnOnPaste){U+=1,re.col+=1,ne+=1;continue}if(K.readOnly&&T!=="UndoRedo.undo"){re.col+=1;continue}const vt=X-U;let at=q(Re,vt),je=r.getDataAtCell(re.row,re.col);if(at!==null&&typeof at=="object")if(Array.isArray(at)&&je===null&&(je=[]),je===null||typeof je!="object")W=!1;else{const Ct=eg(Array.isArray(je)?je:je[0]||je),Ln=eg(Array.isArray(at)?at:at[0]||at);mC(Ct,Ln)||Array.isArray(Ct)&&Array.isArray(Ln)?at=qi(at):W=!1}else je!==null&&typeof je=="object"&&(W=!1);W&&he.push([re.row,re.col,at]),W=!0,re.col+=1}re.row+=1}r.setDataAtCell(he,null,null,T||"populateFromArray");break}}};function O(b){const v=i8(b);XI(v)?(r.runHooks("beforeLanguageChange",v),y.language=v,r.runHooks("afterLanguageChange",v)):s8(b)}function D(b,v){const S=b==="className"?r.rootElement:r.table;if(f)ae(S,v);else{let T=[],H=[];y[b]&&(T=Array.isArray(y[b])?y[b]:YM(y[b])),v&&(H=Array.isArray(v)?v:YM(v));const E=UM(T,H),N=UM(H,T);E.length&&Ue(S,E),N.length&&ae(S,N)}y[b]=v}this.init=function(){l.setData(w.data),r.runHooks("beforeInit"),(Dl()||mA())&&ae(r.rootElement,"mobile"),this.updateSettings(w,!0),this.view=new aCe(this),h=IA.getInstance(r,w,I),d=pRe(r),u=new fwe(r),XC(this)&&oRe(r),r.runHooks("init"),this.forceFullRender=!0,this.view.render(),f&&r.rootElement.offsetParent===null&&n6(r.rootElement,()=>{r.view._wt.wtOverlays.updateLastSpreaderSize(),r.render(),r.view.adjustElementsSize()}),typeof f=="object"&&(r.runHooks("afterChange",f[0],f[1]),f=!1),r.runHooks("afterInit")};function j(){let b=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue(){this.validatorsInQueue+=1,b=!1},removeValidatorFormQueue(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty(){},checkIfQueueIsEmpty(){this.validatorsInQueue===0&&b===!1&&(b=!0,this.onQueueEmpty(this.valid))}}}function Y(b){const v=b.replace(",",".");return isNaN(parseFloat(v))===!1?parseFloat(v):b}function Z(b,v,S){if(!b.length){S();return}const T=r.getActiveEditor(),H=new j;let E=!0;H.onQueueEmpty=()=>{T&&E&&T.cancelChanges(),S()};for(let N=b.length-1;N>=0;N--){const[X,ne,,he]=b[N],re=a.propToCol(ne);let ke;Number.isInteger(re)?ke=r.getCellMeta(X,re):ke={...Object.getPrototypeOf(w),...w},ke.type==="numeric"&&typeof he=="string"&&Q6(he)&&(b[N][3]=Y(he)),r.getCellValidator(ke)&&(H.addValidatorToQueue(),r.validateCell(b[N][3],ke,function(Ee,J){return function(oe){if(typeof oe!="boolean")throw new Error("Validation error: result is not boolean");oe===!1&&J.allowInvalid===!1&&(E=!1,b.splice(Ee,1),J.valid=!0),H.removeValidatorFormQueue()}}(N,ke),v))}H.checkIfQueueIsEmpty()}function $(b,v){for(let T=b.length-1;T>=0;T--){let H=!1;if(b[T]===null){b.splice(T,1);continue}if(!((b[T][2]===null||b[T][2]===void 0)&&(b[T][3]===null||b[T][3]===void 0))){if(w.allowInsertRow)for(;b[T][0]>r.countRows()-1;){const{delta:E}=a.createRow(void 0,void 0,{source:v});if(E===0){H=!0;break}}if(r.dataType==="array"&&(!w.columns||w.columns.length===0)&&w.allowInsertColumn)for(;a.propToCol(b[T][1])>r.countCols()-1;){const{delta:E}=a.createCol(void 0,void 0,{source:v});if(E===0){H=!0;break}}H||a.set(b[T][0],b[T][1],b[T][3])}}const S=b.length>0;if(r.forceFullRender=!0,S){c.adjustRowsAndCols(),r.runHooks("beforeChangeRender",b,v),h.closeEditor(),r.view.render(),h.prepareEditor(),r.view.adjustElementsSize(),r.runHooks("afterChange",b,v||"edit");const T=r.getActiveEditor();T&&Me(T.refreshValue)&&T.refreshValue()}else r.view.render()}this._createCellCoords=function(b,v){return r.view._wt.createCellCoords(b,v)},this._createCellRange=function(b,v,S){return r.view._wt.createCellRange(b,v,S)},this.validateCell=function(b,v,S,T){let H=r.getCellValidator(v);function E(N){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)||v.hidden===!0){S(N);return}const ne=v.visualCol,he=v.visualRow,re=r.getCell(he,ne,!0);if(re&&re.nodeName!=="TH"){const ke=r.rowIndexMapper.getRenderableFromVisualIndex(he),Ee=r.columnIndexMapper.getRenderableFromVisualIndex(ne);r.view._wt.getSetting("cellRenderer",ke,Ee,re)}S(N)}Pj(H)&&(H=function(N){return function(X,ne){ne(N.test(X))}}(H)),rn(H)?(b=r.runHooks("beforeValidate",b,v.visualRow,v.prop,T),r._registerImmediate(()=>{H.call(v,b,N=>{r&&(N=r.runHooks("afterValidate",N,b,v.visualRow,v.prop,T),v.valid=N,E(N),r.runHooks("postAfterValidate",N,b,v.visualRow,v.prop,T))})})):r._registerImmediate(()=>{v.valid=!0,E(v.valid,!1)})};function B(b,v,S){return Array.isArray(b)?b:[[b,v,S]]}function ie(b,v){const S=r.getActiveEditor(),T=r.runHooks("beforeChange",b,v||"edit"),H=b.filter(E=>E!==null);return T===!1||H.length===0?(S&&S.cancelChanges(),[]):H}this.setDataAtCell=function(b,v,S,T){const H=B(b,v,S),E=[];let N=T,X,ne,he;for(X=0,ne=H.length;X<ne;X++){if(typeof H[X]!="object")throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if(typeof H[X][1]!="number")throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");H[X][1]>=this.countCols()?he=H[X][1]:he=a.colToProp(H[X][1]),E.push([H[X][0],he,l.getAtCell(this.toPhysicalRow(H[X][0]),H[X][1]),H[X][2]])}!N&&typeof b=="object"&&(N=v);const re=ie(E,T);r.runHooks("afterSetDataAtCell",re,N),Z(re,N,()=>{$(re,N)})},this.setDataAtRowProp=function(b,v,S,T){const H=B(b,v,S),E=[];let N=T,X,ne;for(X=0,ne=H.length;X<ne;X++)E.push([H[X][0],H[X][1],l.getAtCell(this.toPhysicalRow(H[X][0]),H[X][1]),H[X][2]]);!N&&typeof b=="object"&&(N=v);const he=ie(E,T);r.runHooks("afterSetDataAtRowProp",he,N),Z(he,N,()=>{$(he,N)})},this.listen=function(){r&&!r.isListening()&&(hO.forEach(b=>{r!==b&&b.unlisten()}),cO=r.guid,r.runHooks("afterListen"))},this.unlisten=function(){this.isListening()&&(cO=null,r.runHooks("afterUnlisten"))},this.isListening=function(){return cO===r.guid},this.destroyEditor=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;h.closeEditor(b),r.view.render(),v&&I.isSelected()&&h.prepareEditor()},this.populateFromArray=function(b,v,S,T,H,E,N){if(!(typeof S=="object"&&typeof S[0]=="object"))throw new Error("populateFromArray parameter `input` must be an array of arrays");const X=typeof T=="number"?r._createCellCoords(T,H):null;return c.populateFromArray(r._createCellCoords(b,v),S,X,E,N)},this.spliceCol=function(b,v,S){for(var T=arguments.length,H=new Array(T>3?T-3:0),E=3;E<T;E++)H[E-3]=arguments[E];return a.spliceCol(b,v,S,...H)},this.spliceRow=function(b,v,S){for(var T=arguments.length,H=new Array(T>3?T-3:0),E=3;E<T;E++)H[E-3]=arguments[E];return a.spliceRow(b,v,S,...H)},this.getSelected=function(){if(I.isSelected())return ct(I.getSelectedRange(),b=>{let{from:v,to:S}=b;return[v.row,v.col,S.row,S.col]})},this.getSelectedLast=function(){const b=this.getSelected();let v;return b&&b.length>0&&(v=b[b.length-1]),v},this.getSelectedRange=function(){if(I.isSelected())return Array.from(I.getSelectedRange())},this.getSelectedRangeLast=function(){const b=this.getSelectedRange();let v;return b&&b.length>0&&(v=b[b.length-1]),v},this.emptySelectedCells=function(b){if(!I.isSelected()||this.countRows()===0||this.countCols()===0)return;const v=[];F(I.getSelectedRange(),S=>{if(S.isSingleHeader())return;const T=S.getTopStartCorner(),H=S.getBottomEndCorner();Oe(T.row,H.row,E=>{Oe(T.col,H.col,N=>{this.getCellMeta(E,N).readOnly||v.push([E,N,null])})})}),v.length>0&&this.setDataAtCell(v,b)},this.isRenderSuspended=function(){return this.renderSuspendedCounter>0},this.suspendRender=function(){this.renderSuspendedCounter+=1},this.resumeRender=function(){const b=this.renderSuspendedCounter-1;this.renderSuspendedCounter=Math.max(b,0),!this.isRenderSuspended()&&b===this.renderSuspendedCounter&&(this.renderCall?this.render():r.view.render())},this.render=function(){this.view&&(this.renderCall=!0,this.forceFullRender=!0,this.isRenderSuspended()||r.view.render())},this.batchRender=function(b){this.suspendRender();const v=b();return this.resumeRender(),v},this.isExecutionSuspended=function(){return this.executionSuspendedCounter>0},this.suspendExecution=function(){this.executionSuspendedCounter+=1,this.columnIndexMapper.suspendOperations(),this.rowIndexMapper.suspendOperations()},this.resumeExecution=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const v=this.executionSuspendedCounter-1;this.executionSuspendedCounter=Math.max(v,0),(!this.isExecutionSuspended()&&v===this.executionSuspendedCounter||b)&&(this.columnIndexMapper.resumeOperations(),this.rowIndexMapper.resumeOperations())},this.batchExecution=function(b){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.suspendExecution();const S=b();return this.resumeExecution(v),S},this.batch=function(b){this.suspendRender(),this.suspendExecution();const v=b();return this.resumeExecution(),this.resumeRender(),v},this.refreshDimensions=function(){if(!r.view)return;const{width:b,height:v}=r.view.getLastSize(),{width:S,height:T}=r.rootElement.getBoundingClientRect(),H=S!==b||T!==v;r.runHooks("beforeRefreshDimensions",{width:b,height:v},{width:S,height:T},H)!==!1&&((H||r.view._wt.wtOverlays.scrollableElement===r.rootWindow)&&(r.view.setLastSize(S,T),r.render()),r.runHooks("afterRefreshDimensions",{width:b,height:v},{width:S,height:T},H))},this.updateData=function(b,v){A8(b,S=>{a=S},S=>{a=S,r.columnIndexMapper.fitToLength(this.getInitialColumnCount()),r.rowIndexMapper.fitToLength(this.countSourceRows()),c.adjustRowsAndCols(),I.refresh()},{hotInstance:r,dataMap:a,dataSource:l,internalSource:"updateData",source:v,metaManager:m,firstRun:f})},this.loadData=function(b,v){A8(b,S=>{a=S},()=>{m.clearCellsCache(),r.initIndexMappers(),c.adjustRowsAndCols(),I.refresh(),f&&(f=[null,"loadData"])},{hotInstance:r,dataMap:a,dataSource:l,internalSource:"loadData",source:v,metaManager:m,firstRun:f})},this.getInitialColumnCount=function(){const b=w.columns;let v=0;if(Array.isArray(b))v=b.length;else if(rn(b))if(r.dataType==="array"){const S=this.countSourceCols();for(let T=0;T<S;T+=1)b(T)&&(v+=1)}else(r.dataType==="object"||r.dataType==="function")&&(v=a.colToPropCache.length);else if(Me(w.dataSchema)){const S=a.getSchema();v=Array.isArray(S)?S.length:wC(S)}else v=this.countSourceCols();return v},this.initIndexMappers=function(){this.columnIndexMapper.initToLength(this.getInitialColumnCount()),this.rowIndexMapper.initToLength(this.countSourceRows())},this.getData=function(b,v,S,T){return nn(b)?a.getAll():a.getRange(r._createCellCoords(b,v),r._createCellCoords(S,T),a.DESTINATION_RENDERER)},this.getCopyableText=function(b,v,S,T){return a.getCopyableText(r._createCellCoords(b,v),r._createCellCoords(S,T))},this.getCopyableData=function(b,v){return a.getCopyable(b,a.colToProp(v))},this.getSchema=function(){return a.getSchema()},this.updateSettings=function(b){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const S=(f?r.loadData:r.updateData).bind(this);let T=!1,H,E;if(Me(b.rows))throw new Error('The "rows" setting is no longer supported. Do you mean startRows, minRows or maxRows?');if(Me(b.cols))throw new Error('The "cols" setting is no longer supported. Do you mean startCols, minCols or maxCols?');if(Me(b.ganttChart))throw new Error('Since 8.0.0 the "ganttChart" setting is no longer supported.');for(H in b)H==="data"||(H==="language"?O(b.language):H==="className"?D("className",b.className):H==="tableClassName"&&r.table?(D("tableClassName",b.tableClassName),r.view._wt.wtOverlays.syncOverlayTableClassNames()):xe.getSingleton().isRegistered(H)||xe.getSingleton().isDeprecated(H)?(rn(b[H])||Array.isArray(b[H]))&&(b[H].initialHook=!0,r.addHook(H,b[H])):!v&&_n(b,H)&&(y[H]=b[H]));b.data===void 0&&w.data===void 0?S(null,"updateSettings"):b.data!==void 0?S(b.data,"updateSettings"):b.columns!==void 0&&(a.createMap(),r.initIndexMappers());const N=r.countCols(),X=w.columns;if(X&&rn(X)&&(T=!0),(b.cell!==void 0||b.cells!==void 0||b.columns!==void 0)&&m.clearCache(),N>0)for(H=0,E=0;H<N;H++){if(X){const re=T?X(H):X[E];re&&m.updateColumnMeta(E,re)}E+=1}Me(b.cell)&&et(b.cell,re=>{r.setCellMetaObject(re.row,re.col,re)}),r.runHooks("afterCellMetaReset");let ne=r.rootElement.style.height;ne!==""&&(ne=parseInt(r.rootElement.style.height,10));let he=b.height;if(rn(he)&&(he=he()),v&&r.rootElement.getAttribute("style")&&r.rootElement.setAttribute("data-initialstyle",r.rootElement.getAttribute("style")),he===null){const re=r.rootElement.getAttribute("data-initialstyle");re&&(re.indexOf("height")>-1||re.indexOf("overflow")>-1)?r.rootElement.setAttribute("style",re):(r.rootElement.style.height="",r.rootElement.style.overflow="")}else he!==void 0&&(r.rootElement.style.height=isNaN(he)?`${he}`:`${he}px`,r.rootElement.style.overflow="hidden");if(typeof b.width<"u"){let re=b.width;rn(re)&&(re=re()),r.rootElement.style.width=isNaN(re)?`${re}`:`${re}px`}v||(r.view&&(r.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked(),r.view._wt.exportSettingsAsClassNames()),r.runHooks("afterUpdateSettings",b)),c.adjustRowsAndCols(),r.view&&!f&&(r.forceFullRender=!0,r.view.render(),r.view._wt.wtOverlays.adjustElementsSize()),!v&&r.view&&(ne===""||he===""||he===void 0)&&ne!==he&&r.view._wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){const b=r.getSelectedLast();if(w.getValue){if(rn(w.getValue))return w.getValue.call(r);if(b)return r.getData()[b[0][0]][w.getValue]}else if(b)return r.getDataAtCell(b[0],b[1])},this.getSettings=function(){return w},this.clear=function(){this.selectAll(),this.emptySelectedCells()},this.alter=function(b,v,S,T,H){c.alter(b,v,S,T,H)},this.getCell=function(b,v){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,T=v,H=b;if(v>=0){if(this.columnIndexMapper.isHidden(this.toPhysicalColumn(v)))return null;T=this.columnIndexMapper.getRenderableFromVisualIndex(v)}if(b>=0){if(this.rowIndexMapper.isHidden(this.toPhysicalRow(b)))return null;H=this.rowIndexMapper.getRenderableFromVisualIndex(b)}return H===null||T===null||H===void 0||T===void 0?null:r.view.getCellAtCoords(r._createCellCoords(H,T),S)},this.getCoords=function(b){const v=this.view._wt.wtTable.getCoords(b);if(v===null)return null;const{row:S,col:T}=v;let H=S,E=T;return S>=0&&(H=this.rowIndexMapper.getVisualFromRenderableIndex(S)),T>=0&&(E=this.columnIndexMapper.getVisualFromRenderableIndex(T)),r._createCellCoords(H,E)},this.colToProp=function(b){return a.colToProp(b)},this.propToCol=function(b){return a.propToCol(b)},this.toVisualRow=b=>this.rowIndexMapper.getVisualFromPhysicalIndex(b),this.toVisualColumn=b=>this.columnIndexMapper.getVisualFromPhysicalIndex(b),this.toPhysicalRow=b=>this.rowIndexMapper.getPhysicalFromVisualIndex(b),this.toPhysicalColumn=b=>this.columnIndexMapper.getPhysicalFromVisualIndex(b),this.getDataAtCell=function(b,v){return a.get(b,a.colToProp(v))},this.getDataAtRowProp=function(b,v){return a.get(b,v)},this.getDataAtCol=function(b){const v=[],S=a.getRange(r._createCellCoords(0,b),r._createCellCoords(w.data.length-1,b),a.DESTINATION_RENDERER);for(let T=0;T<S.length;T+=1)for(let H=0;H<S[T].length;H+=1)v.push(S[T][H]);return v},this.getDataAtProp=function(b){const v=[],S=a.getRange(r._createCellCoords(0,a.propToCol(b)),r._createCellCoords(w.data.length-1,a.propToCol(b)),a.DESTINATION_RENDERER);for(let T=0;T<S.length;T+=1)for(let H=0;H<S[T].length;H+=1)v.push(S[T][H]);return v},this.getSourceData=function(b,v,S,T){let H;return b===void 0?H=l.getData():H=l.getByRange(r._createCellCoords(b,v),r._createCellCoords(S,T)),H},this.getSourceDataArray=function(b,v,S,T){let H;return b===void 0?H=l.getData(!0):H=l.getByRange(r._createCellCoords(b,v),r._createCellCoords(S,T),!0),H},this.getSourceDataAtCol=function(b){return l.getAtColumn(b)},this.setSourceDataAtCell=function(b,v,S,T){const H=B(b,v,S),E=this.hasHook("afterSetSourceDataAtCell"),N=[];E&&F(H,ne=>{let[he,re,ke]=ne;N.push([he,re,l.getAtCell(he,re),ke])}),F(H,ne=>{let[he,re,ke]=ne;l.setAtCell(he,re,ke)}),E&&this.runHooks("afterSetSourceDataAtCell",N,T),this.render();const X=r.getActiveEditor();X&&Me(X.refreshValue)&&X.refreshValue()},this.getSourceDataAtRow=function(b){return l.getAtRow(b)},this.getSourceDataAtCell=function(b,v){return l.getAtCell(b,v)},this.getDataAtRow=function(b){return a.getRange(r._createCellCoords(b,0),r._createCellCoords(b,this.countCols()-1),a.DESTINATION_RENDERER)[0]||[]},this.getDataType=function(b,v,S,T){const H=b===void 0?[0,0,this.countRows(),this.countCols()]:[b,v,S,T],[E,N]=H;let[,,X,ne]=H,he=null,re=null;X===void 0&&(X=E),ne===void 0&&(ne=N);let ke="mixed";return Oe(Math.max(Math.min(E,X),0),Math.max(E,X),Ee=>{let J=!0;return Oe(Math.max(Math.min(N,ne),0),Math.max(N,ne),oe=>(re=this.getCellMeta(Ee,oe).type,he?J=he===re:he=re,J)),ke=J?re:"mixed",J}),ke},this.removeCellMeta=function(b,v,S){const[T,H]=[this.toPhysicalRow(b),this.toPhysicalColumn(v)];let E=m.getCellMetaKeyValue(T,H,S);r.runHooks("beforeRemoveCellMeta",b,v,S,E)!==!1&&(m.removeCellMeta(T,H,S),r.runHooks("afterRemoveCellMeta",b,v,S,E)),E=null},this.spliceCellsMeta=function(b){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;for(var S=arguments.length,T=new Array(S>2?S-2:0),H=2;H<S;H++)T[H-2]=arguments[H];if(T.length>0&&!Array.isArray(T[0]))throw new Error("The 3rd argument (cellMetaRows) has to be passed as an array of cell meta objects array.");v>0&&m.removeRow(this.toPhysicalRow(b),v),T.length>0&&F(T.reverse(),E=>{m.createRow(this.toPhysicalRow(b)),F(E,(N,X)=>this.setCellMetaObject(b,X,N))}),r.render()},this.setCellMetaObject=function(b,v,S){typeof S=="object"&&et(S,(T,H)=>{this.setCellMeta(b,v,H,T)})},this.setCellMeta=function(b,v,S,T){if(r.runHooks("beforeSetCellMeta",b,v,S,T)===!1)return;let E=b,N=v;b<this.countRows()&&(E=this.toPhysicalRow(b)),v<this.countCols()&&(N=this.toPhysicalColumn(v)),m.setCellMeta(E,N,S,T),r.runHooks("afterSetCellMeta",b,v,S,T)},this.getCellsMeta=function(){return m.getCellsMeta()},this.getCellMeta=function(b,v){let S=this.toPhysicalRow(b),T=this.toPhysicalColumn(v);return S===null&&(S=b),T===null&&(T=v),m.getCellMeta(S,T,{visualRow:b,visualColumn:v})},this.getColumnMeta=function(b){return m.getColumnMeta(this.toPhysicalColumn(b))},this.getCellMetaAtRow=function(b){return m.getCellsMetaAtRow(b)},this.isColumnModificationAllowed=function(){return!(r.dataType==="object"||w.columns)},this.getCellRenderer=function(b,v){const S=typeof b=="number"?r.getCellMeta(b,v).renderer:b.renderer;return typeof S=="string"?OC(S):nn(S)?OC("text"):S},this.getCellEditor=function(b,v){const S=typeof b=="number"?r.getCellMeta(b,v).editor:b.editor;return typeof S=="string"?xC(S):nn(S)?xC("text"):S},this.getCellValidator=function(b,v){const S=typeof b=="number"?r.getCellMeta(b,v).validator:b.validator;return typeof S=="string"?YA(S):S},this.validateCells=function(b){this._validateCells(b)},this.validateRows=function(b,v){if(!Array.isArray(b))throw new Error("validateRows parameter `rows` must be an array");this._validateCells(v,b)},this.validateColumns=function(b,v){if(!Array.isArray(b))throw new Error("validateColumns parameter `columns` must be an array");this._validateCells(v,void 0,b)},this._validateCells=function(b,v,S){const T=new j;b&&(T.onQueueEmpty=b);let H=r.countRows()-1;for(;H>=0;){if(v!==void 0&&v.indexOf(H)===-1){H-=1;continue}let E=r.countCols()-1;for(;E>=0;){if(S!==void 0&&S.indexOf(E)===-1){E-=1;continue}T.addValidatorToQueue(),r.validateCell(r.getDataAtCell(H,E),r.getCellMeta(H,E),N=>{if(typeof N!="boolean")throw new Error("Validation error: result is not boolean");N===!1&&(T.valid=!1),T.removeValidatorFormQueue()},"validateCells"),E-=1}H-=1}T.checkIfQueueIsEmpty()},this.getRowHeader=function(b){let v=w.rowHeaders,S=b;return S!==void 0&&(S=r.runHooks("modifyRowHeader",S)),S===void 0?(v=[],Oe(r.countRows()-1,T=>{v.push(r.getRowHeader(T))})):Array.isArray(v)&&v[S]!==void 0?v=v[S]:rn(v)?v=v(S):v&&typeof v!="string"&&typeof v!="number"&&(v=S+1),v},this.hasRowHeaders=function(){return!!w.rowHeaders},this.hasColHeaders=function(){if(w.colHeaders!==void 0&&w.colHeaders!==null)return!!w.colHeaders;for(let b=0,v=r.countCols();b<v;b++)if(r.getColHeader(b))return!0;return!1},this.getColHeader=function(b){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;const S=r.runHooks("modifyColHeader",b);if(S===void 0){const X=[],ne=r.countCols();for(let he=0;he<ne;he++)X.push(r.getColHeader(he));return X}let T=w.colHeaders;const H=function(X){const ne=[],he=r.countCols();let re=0;for(;re<he;re++)rn(w.columns)&&w.columns(re)&&ne.push(re);return ne[X]},E=r.toPhysicalColumn(S),N=H(E);return w.colHeaders===!1?T=null:w.columns&&rn(w.columns)&&w.columns(N)&&w.columns(N).title?T=w.columns(N).title:w.columns&&w.columns[E]&&w.columns[E].title?T=w.columns[E].title:Array.isArray(w.colHeaders)&&w.colHeaders[E]!==void 0?T=w.colHeaders[E]:rn(w.colHeaders)?T=w.colHeaders(E):w.colHeaders&&typeof w.colHeaders!="string"&&typeof w.colHeaders!="number"&&(T=eS(S)),T=r.runHooks("modifyColumnHeaderValue",T,b,v),T},this._getColWidthFromSettings=function(b){let v;if(b>=0&&(v=r.getCellMeta(0,b).width),(v===void 0||v===w.width)&&(v=w.colWidths),v!=null){switch(typeof v){case"object":v=v[b];break;case"function":v=v(b);break}typeof v=="string"&&(v=parseInt(v,10))}return v},this.getColWidth=function(b){let v=r._getColWidthFromSettings(b);return v=r.runHooks("modifyColWidth",v,b),v===void 0&&(v=kC),v},this._getRowHeightFromSettings=function(b){let v=w.rowHeights;if(v!=null){switch(typeof v){case"object":v=v[b];break;case"function":v=v(b);break}typeof v=="string"&&(v=parseInt(v,10))}return v},this.getRowHeight=function(b){let v=r._getRowHeightFromSettings(b);return v=r.runHooks("modifyRowHeight",v,b),v},this.countSourceRows=function(){return l.countRows()},this.countSourceCols=function(){return l.countFirstRowKeys()},this.countRows=function(){return a.getLength()},this.countCols=function(){const b=w.maxCols,v=this.columnIndexMapper.getNotTrimmedIndexesLength();return Math.min(b,v)},this.countRenderedRows=function(){return r.view._wt.drawn?r.view._wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return r.view._wt.drawn?r.view._wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return r.view._wt.drawn?r.view._wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return r.view._wt.drawn?r.view._wt.wtTable.getVisibleColumnsCount():-1},this.countRowHeaders=function(){return this.view.getRowHeadersCount()},this.countColHeaders=function(){return this.view.getColumnHeadersCount()},this.countEmptyRows=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=0;return BA(r.countRows()-1,S=>{if(r.isEmptyRow(S))v+=1;else if(b===!0)return!1}),v},this.countEmptyCols=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=0;return BA(r.countCols()-1,S=>{if(r.isEmptyCol(S))v+=1;else if(b===!0)return!1}),v},this.isEmptyRow=function(b){return w.isEmptyRow.call(r,b)},this.isEmptyCol=function(b){return w.isEmptyCol.call(r,b)},this.selectCell=function(b,v,S,T){let H=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,E=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;return nn(b)||nn(v)?!1:this.selectCells([[b,v,S,T]],H,E)},this.selectCells=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[[]],v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;v===!1&&d.suspend();const T=I.selectCells(b);return T&&S&&r.listen(),d.resume(),T},this.selectColumns=function(b){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,S=arguments.length>2?arguments[2]:void 0;return I.selectColumns(b,v,S)},this.selectRows=function(b){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,S=arguments.length>2?arguments[2]:void 0;return I.selectRows(b,v,S)},this.deselectCell=function(){I.deselect()},this.selectAll=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,S=arguments.length>2?arguments[2]:void 0;d.skipNextScrollCycle(),I.selectAll(b,v,S)};const se=(b,v)=>b.getNearestNotHiddenIndex(v,1,!0);this.scrollViewportTo=function(b){var v;if(typeof b=="number"){var S;b={row:arguments[0],col:arguments[1],verticalSnap:arguments[2]?"bottom":"top",horizontalSnap:arguments[3]?"end":"start",considerHiddenIndexes:(S=arguments[4])!==null&&S!==void 0?S:!0}}const{row:T,col:H,verticalSnap:E,horizontalSnap:N,considerHiddenIndexes:X}=(v=b)!==null&&v!==void 0?v:{};let ne,he,re,ke;E!==void 0&&(ne=E==="top",he=!ne),N!==void 0&&(re=N==="start",ke=!re);let Ee=T,J=H;if(X===void 0||X){const Ve=Number.isInteger(T)&&T>=0,Se=Number.isInteger(H)&&H>=0,_e=Ve?se(this.rowIndexMapper,T):void 0,P=Se?se(this.columnIndexMapper,H):void 0;if(_e===null||P===null)return!1;Ee=Ve?r.rowIndexMapper.getRenderableFromVisualIndex(_e):T,J=Se?r.columnIndexMapper.getRenderableFromVisualIndex(P):H}const oe=Number.isInteger(Ee),ce=Number.isInteger(J);return oe&&Ee>=0&&ce&&J>=0?r.view.scrollViewport(r._createCellCoords(Ee,J),ne,ke,he,re):oe&&Ee>=0&&(ce&&J<0||!ce)?r.view.scrollViewportVertically(Ee,ne,he):ce&&J>=0&&(oe&&Ee<0||!oe)?r.view.scrollViewportHorizontally(J,ke,re):!1},this.scrollToFocusedCell=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};if(!this.selection.isSelected())return;this.addHookOnce("afterScroll",b);const{highlight:v}=this.getSelectedRangeLast();this.scrollViewportTo(v.toObject())?this.view.render():(this.removeHook("afterScroll",b),this._registerImmediate(()=>b()))},this.destroy=function(){if(r._clearTimeouts(),r._clearImmediates(),r.view&&r.view.destroy(),l&&l.destroy(),l=null,this.getShortcutManager().destroy(),m.clearCache(),hO.delete(this.guid),XC(r)){const b=this.rootDocument.querySelector(".hot-display-license-info");b&&b.parentNode.removeChild(b)}vo(r.rootElement),o.destroy(),h&&h.destroy(),r.batchExecution(()=>{r.rowIndexMapper.unregisterAll(),r.columnIndexMapper.unregisterAll(),C.getItems().forEach(b=>{let[,v]=b;v.destroy()}),C.clear(),r.runHooks("afterDestroy")},!0),xe.getSingleton().destroy(r),et(r,(b,v,S)=>{rn(b)?S[v]=te(v):v!=="guid"&&(S[v]=null)}),r.isDestroyed=!0,a&&a.destroy(),a=null,c=null,I=null,h=null,r=null};function te(b){return()=>{throw new Error(`The "${b}" method cannot be called because this Handsontable instance has been destroyed`)}}this.getActiveEditor=function(){return h.getActiveEditor()},this.getFirstRenderedVisibleRow=function(){return r.view.getFirstRenderedVisibleRow()},this.getLastRenderedVisibleRow=function(){return r.view.getLastRenderedVisibleRow()},this.getFirstRenderedVisibleColumn=function(){return r.view.getFirstRenderedVisibleColumn()},this.getLastRenderedVisibleColumn=function(){return r.view.getLastRenderedVisibleColumn()},this.getFirstFullyVisibleRow=function(){return r.view.getFirstFullyVisibleRow()},this.getLastFullyVisibleRow=function(){return r.view.getLastFullyVisibleRow()},this.getFirstFullyVisibleColumn=function(){return r.view.getFirstFullyVisibleColumn()},this.getLastFullyVisibleColumn=function(){return r.view.getLastFullyVisibleColumn()},this.getFirstPartiallyVisibleRow=function(){return r.view.getFirstPartiallyVisibleRow()},this.getLastPartiallyVisibleRow=function(){return r.view.getLastPartiallyVisibleRow()},this.getFirstPartiallyVisibleColumn=function(){return r.view.getFirstPartiallyVisibleColumn()},this.getLastPartiallyVisibleColumn=function(){return r.view.getLastPartiallyVisibleColumn()},this.getPlugin=function(b){const v=Ki(b);return v==="UndoRedo"?this.undoRedo:C.getItem(v)},this.getPluginName=function(b){return b===this.undoRedo?this.undoRedo.constructor.PLUGIN_KEY:C.getId(b)},this.getInstance=function(){return r},this.addHook=function(b,v,S){xe.getSingleton().add(b,v,r,S)},this.hasHook=function(b){return xe.getSingleton().has(b,r)||xe.getSingleton().has(b)},this.addHookOnce=function(b,v,S){xe.getSingleton().once(b,v,r,S)},this.removeHook=function(b,v){xe.getSingleton().remove(b,v,r)},this.runHooks=function(b,v,S,T,H,E,N){return xe.getSingleton().run(r,b,v,S,T,H,E,N)},this.getTranslatedPhrase=function(b,v){return h8(w.language,b,v)},this.toHTML=()=>$A(this),this.toTableElement=()=>{const b=this.rootDocument.createElement("div");return b.insertAdjacentHTML("afterbegin",$A(this)),b.firstElementChild},this.timeouts=[],this._registerTimeout=function(b){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=b;typeof S=="function"&&(S=setTimeout(S,v)),this.timeouts.push(S)},this._clearTimeouts=function(){F(this.timeouts,b=>{clearTimeout(b)})},this.immediates=[],this._registerImmediate=function(b){this.immediates.push(setImmediate(b))},this._clearImmediates=function(){F(this.immediates,b=>{clearImmediate(b)})},this._getEditorManager=function(){return h},this.isRtl=function(){return r.rootWindow.getComputedStyle(r.rootElement).direction==="rtl"},this.isLtr=function(){return!r.isRtl()},this.getDirectionFactor=function(){return r.isLtr()?1:-1};const pe=CRe({handleEvent(){return r.isListening()},beforeKeyDown:b=>this.runHooks("beforeKeyDown",b),afterKeyDown:b=>{this.isDestroyed||r.runHooks("afterDocumentKeyDown",b)},ownerWindow:this.rootWindow});this.addHook("beforeOnCellMouseDown",b=>{b.ctrlKey===!1&&b.metaKey===!1&&pe.releasePressedKeys()}),this.getShortcutManager=function(){return pe},this.getFocusManager=function(){return u},UA().forEach(b=>{const v=wb(b);C.addItem(b,new v(this))}),sRe(r),pe.setActiveContextName("grid"),xe.getSingleton().run(r,"construct")}function V8(n,e,t){n.addEventListener(e,t,!1)}function W8(n,e,t){n.removeEventListener(e,t,!1)}function j8(n){return n.ownerDocument.defaultView.getComputedStyle(n)}function SRe(n){const e={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},t=n.body,i=n.createTextNode(""),s=n.createElement("span");let r;function o(){i.textContent=r.value,s.style.position="absolute",s.style.fontSize=j8(r).fontSize,s.style.fontFamily=j8(r).fontFamily,s.style.whiteSpace="pre",t.appendChild(s);const h=s.clientWidth+2;t.removeChild(s);const u=r.style;u.height=`${e.minHeight}px`,e.minWidth>h?u.width=`${e.minWidth}px`:h>e.maxWidth?u.width=`${e.maxWidth}px`:u.width=`${h}px`;const d=r.scrollHeight?r.scrollHeight-1:0;e.minHeight>d?u.height=`${e.minHeight}px`:e.maxHeight<d?(u.height=`${e.maxHeight}px`,u.overflowY="visible"):u.height=`${d}px`}function a(){n.defaultView.setTimeout(o,0)}function l(h){if(h&&h.minHeight)if(h.minHeight==="inherit")e.minHeight=r.clientHeight;else{const u=parseInt(h.minHeight,10);isNaN(u)||(e.minHeight=u)}if(h&&h.maxHeight)if(h.maxHeight==="inherit")e.maxHeight=r.clientHeight;else{const u=parseInt(h.maxHeight,10);isNaN(u)||(e.maxHeight=u)}if(h&&h.minWidth)if(h.minWidth==="inherit")e.minWidth=r.clientWidth;else{const u=parseInt(h.minWidth,10);isNaN(u)||(e.minWidth=u)}if(h&&h.maxWidth)if(h.maxWidth==="inherit")e.maxWidth=r.clientWidth;else{const u=parseInt(h.maxWidth,10);isNaN(u)||(e.maxWidth=u)}s.firstChild||(s.className="autoResize",s.style.display="inline-block",s.appendChild(i))}function c(h,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;r=h,l(u),r.nodeName==="TEXTAREA"&&(r.style.resize="none",r.style.height=`${e.minHeight}px`,r.style.minWidth=`${e.minWidth}px`,r.style.maxWidth=`${e.maxWidth}px`,r.style.overflowY="hidden"),d&&(V8(r,"input",o),V8(r,"keydown",a)),o()}return{init:c,resize:o,unObserve(){W8(r,"input",o),W8(r,"keydown",a)}}}function z8(n,e){const t=rA(e),i=e.value.split(`
`);let s=t,r=0;for(let o=0;o<i.length;o++){const a=i[o];o!==0&&(r+=i[o-1].length+1);const l=r+a.length;if(n==="home"?s=r:n==="end"&&(s=l),t<=l)break}lb(e,s)}function id(n,e,t){return(e=_Re(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Re(n){var e=RRe(n,"string");return typeof e=="symbol"?e:e+""}function RRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const xRe="ht_editor_visible",kS="ht_editor_hidden",U8="textEditor",ERe="text";class sd extends wg{static get EDITOR_TYPE(){return ERe}constructor(e){super(e),id(this,"eventManager",new kr(this)),id(this,"autoResize",SRe(this.hot.rootDocument)),id(this,"TEXTAREA",void 0),id(this,"textareaStyle",void 0),id(this,"TEXTAREA_PARENT",void 0),id(this,"textareaParentStyle",void 0),id(this,"layerClass",void 0),this.eventManager=new kr(this),this.createElements(),this.bindEvents(),this.hot.addHookOnce("afterDestroy",()=>this.destroy())}getValue(){return this.TEXTAREA.value}setValue(e){this.TEXTAREA.value=e}open(){this.refreshDimensions(),this.showEditableElement(),this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this.autoResize.unObserve(),Uj(this.hot.rootDocument.activeElement,this.hot.rootElement)&&this.hot.listen(),this.hideEditableElement(),this.unregisterShortcuts()}prepare(e,t,i,s,r,o){const a=this.state;if(super.prepare(e,t,i,s,r,o),!o.readOnly){this.refreshDimensions(!0);const{allowInvalid:l}=o;l&&!this.isOpened()&&(this.TEXTAREA.value=""),a!==zn.FINISHED&&!this.isOpened()&&this.hideEditableElement()}}beginEditing(e,t){this.state===zn.VIRGIN&&(this.TEXTAREA.value="",super.beginEditing(e,t))}focus(){this.TEXTAREA.select(),lb(this.TEXTAREA,this.TEXTAREA.value.length)}createElements(){const{rootDocument:e}=this.hot;this.TEXTAREA=e.createElement("TEXTAREA"),$e(this.TEXTAREA,[["data-hot-input",""],Zf(-1)]),ae(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.textareaStyle.overflowY="visible",this.TEXTAREA_PARENT=e.createElement("DIV"),ae(this.TEXTAREA_PARENT,"handsontableInputHolder"),Fe(this.TEXTAREA_PARENT,this.layerClass)&&Ue(this.TEXTAREA_PARENT,this.layerClass),ae(this.TEXTAREA_PARENT,kS),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.hot.rootElement.appendChild(this.TEXTAREA_PARENT)}hideEditableElement(){T6()&&(this.textareaStyle.textIndent="-99999px"),this.textareaStyle.overflowY="visible",this.textareaParentStyle.opacity="0",this.textareaParentStyle.height="1px",Ue(this.TEXTAREA_PARENT,this.layerClass),ae(this.TEXTAREA_PARENT,kS)}showEditableElement(){this.textareaParentStyle.height="",this.textareaParentStyle.overflow="",this.textareaParentStyle.position="",this.textareaParentStyle[this.hot.isRtl()?"left":"right"]="auto",this.textareaParentStyle.opacity="1",this.textareaStyle.textIndent="";const e=this.TEXTAREA_PARENT.childNodes;let t=!1;Oe(e.length-1,i=>{const s=e[i];if(Fe(s,"handsontableEditor"))return t=!0,!1}),Fe(this.TEXTAREA_PARENT,kS)&&Ue(this.TEXTAREA_PARENT,kS),t?(this.layerClass=xRe,ae(this.TEXTAREA_PARENT,this.layerClass)):(this.layerClass=this.getEditedCellsLayerClass(),ae(this.TEXTAREA_PARENT,this.layerClass))}refreshValue(){const e=this.hot.toPhysicalRow(this.row),t=this.hot.getSourceDataAtCell(e,this.col);this.originalValue=t,this.setValue(t),this.refreshDimensions()}refreshDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.state!==zn.EDITING&&!e)return;if(this.TD=this.getEditedCell(),!this.TD){e||this.close();return}const{top:t,start:i,width:s,maxWidth:r,height:o,maxHeight:a}=this.getEditedCellRect();this.textareaParentStyle.top=`${t}px`,this.textareaParentStyle[this.hot.isRtl()?"right":"left"]=`${i}px`,this.showEditableElement();const l=pa(this.TD,this.hot.rootWindow);this.TEXTAREA.style.fontSize=l.fontSize,this.TEXTAREA.style.fontFamily=l.fontFamily,this.TEXTAREA.style.backgroundColor=this.TD.style.backgroundColor;const c=pa(this.TEXTAREA),h=parseInt(c.paddingLeft,10)+parseInt(c.paddingRight,10),u=parseInt(c.paddingTop,10)+parseInt(c.paddingBottom,10),d=s-h,f=o-u,g=r-h,p=a-u;this.autoResize.init(this.TEXTAREA,{minWidth:Math.min(d,g),minHeight:Math.min(f,p),maxWidth:g,maxHeight:p},!0)}bindEvents(){pA()&&this.eventManager.addEventListener(this.TEXTAREA,"focusout",()=>this.finishEditing(!1)),this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>{this.refreshDimensions(),this.state===zn.EDITING&&this.focus()}),this.addHook("afterRowResize",()=>{this.refreshDimensions(),this.state===zn.EDITING&&this.focus()})}allowKeyEventPropagation(){}destroy(){this.eventManager.destroy(),this.clearHooks()}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),i={runOnlyIf:()=>Me(this.hot.getSelected()),group:U8},s=()=>{this.hot.rootDocument.execCommand("insertText",!1,`
`)};t.addShortcuts([{keys:[["Control","Enter"]],callback:()=>(s(),!1),runOnlyIf:r=>!this.hot.selection.isMultiple()&&!r.altKey},{keys:[["Meta","Enter"]],callback:()=>(s(),!1),runOnlyIf:()=>!this.hot.selection.isMultiple()},{keys:[["Alt","Enter"]],callback:()=>(s(),!1)},{keys:[["Home"]],callback:(r,o)=>{let[a]=o;z8(a,this.TEXTAREA)}},{keys:[["End"]],callback:(r,o)=>{let[a]=o;z8(a,this.TEXTAREA)}}],i)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(U8)}}const TRe="base";function Kb(n,e,t,i,s,r,o){const a=o.ariaTags,l=[],c=[],h=[],u=[];o.className&&ae(e,o.className),o.readOnly?(l.push(o.readOnlyCellClassName),a&&u.push(Vj())):a&&h.push(Vj()[0]),o.valid===!1&&o.invalidCellClassName?(l.push(o.invalidCellClassName),a&&u.push(Wj())):(c.push(o.invalidCellClassName),a&&h.push(Wj()[0])),o.wordWrap===!1&&o.noWordWrapClassName&&l.push(o.noWordWrapClassName),!r&&o.placeholder&&l.push(o.placeholderCellClassName),Ue(e,c),ae(e,l),Lu(e,h),$e(e,u)}Kb.RENDERER_TYPE=TRe;const MRe="text";function zl(n,e,t,i,s,r,o){Kb.apply(this,[n,e,t,i,s,r,o]);let a=r;if(!a&&o.placeholder&&(a=o.placeholder),a=Mn(a),o.trimWhitespace&&(a=a.trim()),o.rendererTemplate){vo(e);const l=n.rootDocument.createElement("TEMPLATE");l.setAttribute("bind","{{}}"),l.innerHTML=o.rendererTemplate,HTMLTemplateElement.decorate(l),l.model=n.getSourceDataAtRow(t),e.appendChild(l)}else Kc(e,a)}zl.RENDERER_TYPE=MRe;const Y8={CELL_TYPE:"text",editor:sd,renderer:zl};Fr(Y8),Ye.editors={BaseEditor:wg};function Ye(n,e){const t=new B8(n,e||{},wP);return t.init(),t}Ye.Core=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new B8(n,e,wP)},Ye.DefaultSettings=R8(),Ye.hooks=xe.getSingleton(),Ye.CellCoords=zu,Ye.CellRange=xb,Ye.packageName="handsontable",Ye.buildDate="17/10/2024 09:16:16",Ye.version="14.6.1",Ye.languages={dictionaryKeys:UCe,getLanguageDictionary:c8,getLanguagesDictionaries:XCe,registerLanguageDictionary:l8,getTranslatedPhrase:h8};const G8="handsontableEditor",ARe="handsontable";class uO extends sd{static get EDITOR_TYPE(){return ARe}open(){super.open(),this.htEditor&&this.htEditor.destroy(),this.htContainer.style.display==="none"&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),lb(this.TEXTAREA,0,this.TEXTAREA.value.length),this.refreshDimensions()}close(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),super.close()}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o);const a=this,l={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,ariaTags:!1,afterOnCellMouseDown(c,h){const u=this.getSourceData(h.row,h.col);u!==void 0&&a.setValue(u),a.hot.destroyEditor()},preventWheel:!0,layoutDirection:this.hot.isRtl()?"rtl":"ltr"};this.cellProperties.handsontable&&Zn(l,o.handsontable),this.htOptions=l}beginEditing(e,t){const i=this.hot.getSettings().onBeginEditing;i&&i()===!1||super.beginEditing(e,t)}createElements(){super.createElements();const e=this.hot.rootDocument.createElement("DIV");e.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(e),this.htContainer=e,this.assignHooks()}finishEditing(e,t,i){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){const s=this.htEditor.getValue();s!==void 0&&this.setValue(s)}super.finishEditing(e,t,i)}assignHooks(){this.hot.addHook("afterDestroy",()=>{this.htEditor&&this.htEditor.destroy()})}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor");super.registerShortcuts();const i={group:G8,relativeToGroup:ih,position:"before"},s=(r,o)=>{const a=this.htEditor;if(r!==void 0&&(r<0||a.flipped&&r>a.countRows()-1?a.deselectCell():a.selectCell(r,0),a.getData().length))return o.preventDefault(),Or(o),this.hot.listen(),this.TEXTAREA.focus(),!1};t.addShortcuts([{keys:[["ArrowUp"]],callback:r=>{const o=this.htEditor;let a,l;return!o.getSelectedLast()&&o.flipped?a=o.countRows()-1:o.getSelectedLast()&&(o.flipped?(l=o.getSelectedLast()[0],a=Math.max(0,l-1)):(l=o.getSelectedLast()[0],a=l-1)),s(a,r)},preventDefault:!1},{keys:[["ArrowDown"]],callback:r=>{const o=this.htEditor;let a,l;if(!o.getSelectedLast()&&!o.flipped)a=0;else if(o.getSelectedLast()){if(o.flipped)a=o.getSelectedLast()[0]+1;else if(!o.flipped){const c=o.countRows()-1;l=o.getSelectedLast()[0],a=Math.min(c,l+1)}}return s(a,r)},preventDefault:!1}],i)}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(G8)}}function PRe(n,e,t){IRe(n,e),e.set(n,t)}function IRe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function HS(n,e,t){return(e=ORe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ORe(n){var e=kRe(n,"string");return typeof e=="symbol"?e:e+""}function kRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function K8(n,e){return n.get(HRe(n,e))}function HRe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const DRe="autocomplete";var dO=new WeakMap;class fO extends uO{constructor(){super(...arguments),HS(this,"query",null),HS(this,"strippedChoices",[]),HS(this,"rawChoices",[]),PRe(this,dO,this.hot.guid.slice(0,9)),HS(this,"sortByRelevance",function(e,t,i){const s=[],r=[],o=e.length;let a=t.length,l,c,h,u;if(o===0){for(h=0;h<a;h++)r.push(h);return r}for(h=0;h<a;h++){if(c=QM(Mn(t[h])),i)u=c.indexOf(e);else{const d=this.cellProperties.locale;u=c.toLocaleLowerCase(d).indexOf(e.toLocaleLowerCase(d))}u!==-1&&(l=c.length-u-o,s.push({baseIndex:h,index:u,charsLeft:l,value:c}))}for(s.sort((d,f)=>{if(f.index===-1)return-1;if(d.index===-1)return 1;if(d.index<f.index)return-1;if(f.index<d.index)return 1;if(d.index===f.index){if(d.charsLeft<f.charsLeft)return-1;if(d.charsLeft>f.charsLeft)return 1}return 0}),h=0,a=s.length;h<a;h++)r.push(s[h].baseIndex);return r})}static get EDITOR_TYPE(){return DRe}getValue(){const e=this.rawChoices.find(t=>this.stripValueIfNeeded(t)===this.TEXTAREA.value);return Me(e)?e:this.TEXTAREA.value}createElements(){super.createElements(),ae(this.htContainer,"autocompleteEditor"),ae(this.htContainer,this.hot.rootWindow.navigator.platform.indexOf("Mac")===-1?"":"htMacScroll"),this.hot.getSettings().ariaTags&&$e(this.TEXTAREA,[Ime(),Eme(),$j("listbox"),Dme()])}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o),this.hot.getSettings().ariaTags&&$e(this.TEXTAREA,[Ar("false"),Nme(`${K8(dO,this)}-listbox-${e}-${t}`)])}open(){super.open();const e=this.cellProperties.trimDropdown===void 0?!0:this.cellProperties.trimDropdown,t=this.hot.getSettings().ariaTags,i=Array.isArray(this.cellProperties.source)?this.cellProperties.source:null,s=i==null?void 0:i.length,{row:r,col:o}=this;this.showEditableElement(),this.focus();let a=ui();a===0&&gb()&&(a+=15),this.addHook("beforeKeyDown",l=>this.onBeforeKeyDown(l)),this.htEditor.updateSettings({colWidths:e?[sn(this.TEXTAREA)-2]:void 0,width:e?sn(this.TEXTAREA)+a:void 0,autoColumnSize:!0,renderer:(l,c,h,u,d,f,g)=>{zl(l,c,h,u,d,f,g);const{filteringCaseSensitive:p,allowHtml:m,locale:w}=this.cellProperties,y=this.query;let C=Mn(f),R,_;C&&!m&&(R=p===!0?C.indexOf(y):C.toLocaleLowerCase(w).indexOf(y.toLocaleLowerCase(w)),R!==-1&&(_=C.substr(R,y.length),C=C.replace(_,`<strong>${_}</strong>`))),t&&$e(c,[Tme(),...i?[Bme(s)]:[],...i?[Vme(i.indexOf(f)+1)]:[],["id",`${this.htEditor.rootElement.id}_${h}-${u}`]]),c.innerHTML=C},afterSelectionEnd:(l,c)=>{if(t){const h=this.htEditor.getCell(l,c,!0);$e(h,[eA()]),$e(this.TEXTAREA,...Lme(h.id))}}}),t&&($e(this.htEditor.view._wt.wtOverlays.wtTable.TABLE,...ga()),$e(this.htEditor.rootElement,[Lj(),$me("polite"),Fme("text"),["id",`${K8(dO,this)}-listbox-${r}-${o}`]]),$e(this.TEXTAREA,...Ar("true"))),this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)})}close(){this.removeHooksByKey("beforeKeyDown"),super.close(),this.hot.getSettings().ariaTags&&$e(this.TEXTAREA,[Ar("false")])}discardEditor(e){super.discardEditor(e),this.hot.view.render()}queryChoices(e){const t=this.cellProperties.source;this.query=e,typeof t=="function"?t.call(this.cellProperties,e,i=>{this.rawChoices=i,this.updateChoicesList(this.stripValuesIfNeeded(i))}):Array.isArray(t)?(this.rawChoices=t,this.updateChoicesList(this.stripValuesIfNeeded(t))):this.updateChoicesList([])}updateChoicesList(e){const t=rA(this.TEXTAREA),i=Jj(this.TEXTAREA),s=this.cellProperties.sortByRelevance,r=this.cellProperties.filter;let o=null,a=null,l=e;s&&(o=this.sortByRelevance(this.stripValueIfNeeded(this.getValue()),l,this.cellProperties.filteringCaseSensitive));const c=Array.isArray(o)?o.length:0;if(r===!1)c&&(a=o[0]);else{const h=[];for(let u=0,d=l.length;u<d&&!(s&&c<=u);u++)c?h.push(l[o[u]]):h.push(l[u]);a=0,l=h}this.strippedChoices=l,l.length===0?this.htEditor.rootElement.style.display="none":this.htEditor.rootElement.style.display="",this.htEditor.loadData(nb([l])),l.length>0&&(this.updateDropdownDimensions(),this.flipDropdownIfNeeded(),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(a)),this.hot.listen(),lb(this.TEXTAREA,t,t===i?void 0:i)}flipDropdownIfNeeded(){const e=Bu(this.hot.view._wt.wtTable.TABLE),t=e===this.hot.rootWindow,i=this.cellProperties.preventOverflow;if(t||!t&&(i||i==="horizontal"))return!1;const s=hi(this.TEXTAREA),r=jn(this.TEXTAREA),o=this.getDropdownHeight(),a=e.scrollTop,l=jn(this.hot.view._wt.wtTable.THEAD),c=hi(e),h=s.top-c.top-l+a,u=e.scrollHeight-h-l-r,d=o>u&&h>u;return d?this.flipDropdown(o):this.unflipDropdown(),this.limitDropdownIfNeeded(d?h:u,o),d}limitDropdownIfNeeded(e,t){if(t>e){let i=0,s=0,r=0,o=null;do r=this.htEditor.getRowHeight(s)||this.htEditor.view._wt.getSetting("defaultRowHeight"),i+=r,s+=1;while(i<e);o=i-r,this.htEditor.flipped&&(this.htEditor.rootElement.style.top=`${parseInt(this.htEditor.rootElement.style.top,10)+t-o}px`),this.setDropdownHeight(i-r)}}flipDropdown(e){const t=this.htEditor.rootElement.style;t.position="absolute",t.top=`${-e}px`,this.htEditor.flipped=!0}unflipDropdown(){const e=this.htEditor.rootElement.style;e.position="absolute",e.top="",this.htEditor.flipped=void 0}updateDropdownDimensions(){const e=this.htEditor.getColWidth(0)+ui(this.hot.rootDocument)+2,t=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:t?void 0:e}),this.htEditor.view._wt.wtTable.alignOverlaysWithTrimmingContainer()}setDropdownHeight(e){this.htEditor.updateSettings({height:e})}highlightBestMatchingChoice(e){typeof e=="number"?this.htEditor.selectCell(e,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}getDropdownHeight(){const e=this.htEditor.getRowHeight(0)||23,t=this.cellProperties.visibleRows;return this.strippedChoices.length>=t?t*e:this.strippedChoices.length*e+8}stripValueIfNeeded(e){return this.stripValuesIfNeeded([e])[0]}stripValuesIfNeeded(e){const{allowHtml:t}=this.cellProperties,i=ct(e,r=>Mn(r));return ct(i,r=>t?r:QM(r))}allowKeyEventPropagation(e){const t=this.htEditor.getSelectedRangeLast(),i={row:t?t.from.row:-1};let s=!1;return e===Ie.ARROW_DOWN&&i.row>0&&i.row<this.htEditor.countRows()-1&&(s=!0),e===Ie.ARROW_UP&&i.row>-1&&(s=!0),s}onBeforeKeyDown(e){if(M6(e.keyCode)||e.keyCode===Ie.BACKSPACE||e.keyCode===Ie.DELETE||e.keyCode===Ie.INSERT){let t=10;if(e.keyCode===Ie.C&&(e.ctrlKey||e.metaKey))return;this.isOpened()||(t+=10),this.htEditor&&this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)},t)}}}const NRe="checkbox";class q8 extends wg{static get EDITOR_TYPE(){return NRe}beginEditing(e,t){if(t&&t.type==="mouseup"&&t.target.nodeName==="TD"){const i=this.TD.querySelector('input[type="checkbox"]');Fe(i,"htBadValue")||i.click()}}finishEditing(){}init(){}open(){}close(){}getValue(){}setValue(){}focus(){}}/*!
 * Pikaday
 *
 * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday
 */const sh=()=>window,Br=()=>window.document,gO=(n,e)=>window.setTimeout(n,e),_a=function(n,e,t,i){n.addEventListener(e,t,!!i)},Ul=function(n,e,t,i){n.removeEventListener(e,t,!!i)},LRe=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},nr=function(n,e){return(" "+n.className+" ").indexOf(" "+e+" ")!==-1},pO=function(n,e){nr(n,e)||(n.className=n.className===""?e:n.className+" "+e)},mO=function(n,e){n.className=LRe((" "+n.className+" ").replace(" "+e+" "," "))},bO=function(n){return/Array/.test(Object.prototype.toString.call(n))},ir=function(n){return/Date/.test(Object.prototype.toString.call(n))&&!isNaN(n.getTime())},$Re=function(n){let e=n.getDay();return e===0||e===6},FRe=function(n){return n%4===0&&n%100!==0||n%400===0},X8=function(n,e){return[31,FRe(n)?29:28,31,30,31,30,31,31,30,31,30,31][e]},DS=function(n){ir(n)&&n.setHours(0,0,0,0)},NS=function(n,e){return n.getTime()===e.getTime()},LS=function(n,e,t){let i,s;for(i in e)s=n[i]!==void 0,s&&typeof e[i]=="object"&&e[i]!==null&&e[i].nodeName===void 0?ir(e[i])?t&&(n[i]=new Date(e[i].getTime())):bO(e[i])?t&&(n[i]=e[i].slice(0)):n[i]=LS({},e[i],t):(t||!s)&&(n[i]=e[i]);return n},Q8=function(n,e,t){let i=Br().createEvent("HTMLEvents");i.initEvent(e,!0,!1),i=LS(i,t),n.dispatchEvent(i)},Z8=function(n){return n.month<0&&(n.year-=Math.ceil(Math.abs(n.month)/12),n.month+=12),n.month>11&&(n.year+=Math.floor(Math.abs(n.month)/12),n.month-=12),n},Ra={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},J8=function(n,e,t){for(e+=n.firstDay;e>=7;)e-=7;return t?n.i18n.weekdaysShort[e]:n.i18n.weekdays[e]},BRe=function(n){let e=[],t="false";if(n.isEmpty)if(n.showDaysInNextAndPreviousMonths)e.push("is-outside-current-month"),n.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled");else return'<td class="is-empty"></td>';return n.isDisabled&&e.push("is-disabled"),n.isToday&&e.push("is-today"),n.isSelected&&(e.push("is-selected"),t="true"),n.hasEvent&&e.push("has-event"),n.isInRange&&e.push("is-inrange"),n.isStartRange&&e.push("is-startrange"),n.isEndRange&&e.push("is-endrange"),'<td data-day="'+n.day+'" class="'+e.join(" ")+'" aria-selected="'+t+'"><button class="pika-button pika-day" type="button" data-pika-year="'+n.year+'" data-pika-month="'+n.month+'" data-pika-day="'+n.day+'">'+n.day+"</button></td>"},VRe=function(n,e){n.setHours(0,0,0,0);let t=n.getDate(),i=n.getDay(),s=e,r=s-1,o=7,a=function(d){return(d+o-1)%o};n.setDate(t+r-a(i));let l=new Date(n.getFullYear(),0,s),c=24*60*60*1e3,h=(n.getTime()-l.getTime())/c;return 1+Math.round((h-r+a(l.getDay()))/o)},WRe=function(n,e,t,i,s){let r=new Date(i,t,e);return'<td class="pika-week">'+(n.hasMoment?n.moment(r).isoWeek():VRe(r,s))+"</td>"},jRe=function(n,e,t,i){return'<tr class="pika-row'+(t?" pick-whole-week":"")+(i?" is-selected":"")+'">'+(e?n.reverse():n).join("")+"</tr>"},zRe=function(n){return"<tbody>"+n.join("")+"</tbody>"},URe=function(n){let e,t=[];for(n.showWeekNumber&&t.push("<th></th>"),e=0;e<7;e++)t.push('<th scope="col"><abbr title="'+J8(n,e)+'">'+J8(n,e,!0)+"</abbr></th>");return"<thead><tr>"+(n.isRTL?t.reverse():t).join("")+"</tr></thead>"},YRe=function(n,e,t,i,s,r){let o,a,l,c=n._o,h=t===c.minYear,u=t===c.maxYear,d='<div id="'+r+'" class="pika-title" role="heading" aria-live="polite">',f,g,p=!0,m=!0;for(l=[],o=0;o<12;o++)l.push('<option value="'+(t===s?o-e:12+o-e)+'"'+(o===i?' selected="selected"':"")+(h&&o<c.minMonth||u&&o>c.maxMonth?' disabled="disabled"':"")+">"+c.i18n.months[o]+"</option>");for(f='<div class="pika-label">'+c.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",bO(c.yearRange)?(o=c.yearRange[0],a=c.yearRange[1]+1):(o=t-c.yearRange,a=1+t+c.yearRange),l=[];o<a&&o<=c.maxYear;o++)o>=c.minYear&&l.push('<option value="'+o+'"'+(o===t?' selected="selected"':"")+">"+o+"</option>");return g='<div class="pika-label">'+t+c.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",c.showMonthAfterYear?d+=g+f:d+=f+g,h&&(i===0||c.minMonth>=i)&&(p=!1),u&&(i===11||c.maxMonth<=i)&&(m=!1),e===0&&(d+='<button class="pika-prev'+(p?"":" is-disabled")+'" type="button">'+c.i18n.previousMonth+"</button>"),e===n._o.numberOfMonths-1&&(d+='<button class="pika-next'+(m?"":" is-disabled")+'" type="button">'+c.i18n.nextMonth+"</button>"),d+="</div>"},GRe=function(n,e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+t+'">'+URe(n)+zRe(e)+"</table>"};function wO(n){let e=this,t=e.config(n);e._onMouseDown=function(s){if(!e._v)return;s=s||sh().event;let r=s.target||s.srcElement;if(r)if(nr(r,"is-disabled")||(nr(r,"pika-button")&&!nr(r,"is-empty")&&!nr(r.parentNode,"is-disabled")?(e.setDate(new Date(r.getAttribute("data-pika-year"),r.getAttribute("data-pika-month"),r.getAttribute("data-pika-day"))),t.bound&&gO(function(){e.hide(),t.blurFieldOnSelect&&t.field&&t.field.blur()},100)):nr(r,"pika-prev")?e.prevMonth():nr(r,"pika-next")&&e.nextMonth()),nr(r,"pika-select"))e._c=!0;else if(s.preventDefault)s.preventDefault();else return s.returnValue=!1,!1},e._onChange=function(s){s=s||sh().event;let r=s.target||s.srcElement;r&&(nr(r,"pika-select-month")?e.gotoMonth(r.value):nr(r,"pika-select-year")&&e.gotoYear(r.value))},e._onKeyChange=function(s){if(s=s||sh().event,e.isVisible())switch(s.keyCode){case 13:case 27:t.field&&t.field.blur();break;case 37:e.adjustDate("subtract",1);break;case 38:e.adjustDate("subtract",7);break;case 39:e.adjustDate("add",1);break;case 40:e.adjustDate("add",7);break;case 8:case 46:e.setDate(null);break}},e._parseFieldValue=function(){if(t.parse)return t.parse(t.field.value,t.format);if(this.hasMoment){let s=this.moment(t.field.value,t.format,t.formatStrict);return s&&s.isValid()?s.toDate():null}else return new Date(Date.parse(t.field.value))},e._onInputChange=function(s){let r;s.firedBy!==e&&(r=e._parseFieldValue(),ir(r)&&e.setDate(r),e._v||e.show())},e._onInputFocus=function(){e.show()},e._onInputClick=function(){e.show()},e._onInputBlur=function(){let s=Br().activeElement;do if(nr(s,"pika-single"))return;while(s=s.parentNode);e._c||(e._b=gO(function(){e.hide()},50)),e._c=!1},e._onClick=function(s){s=s||sh().event;let r=s.target||s.srcElement,o=r;if(r){!hasEventListeners&&nr(r,"pika-select")&&(r.onchange||(r.setAttribute("onchange","return;"),_a(r,"change",e._onChange)));do if(nr(o,"pika-single")||o===t.trigger)return;while(o=o.parentNode);e._v&&r!==t.trigger&&o!==t.trigger&&e.hide()}},e.el=Br().createElement("div"),e.el.className="pika-single"+(t.isRTL?" is-rtl":"")+(t.theme?" "+t.theme:""),_a(e.el,"mousedown",e._onMouseDown,!0),_a(e.el,"touchend",e._onMouseDown,!0),_a(e.el,"change",e._onChange),t.keyboardInput&&_a(Br(),"keydown",e._onKeyChange),t.field&&(t.container?t.container.appendChild(e.el):t.bound?Br().body.appendChild(e.el):t.field.parentNode.insertBefore(e.el,t.field.nextSibling),_a(t.field,"change",e._onInputChange),t.defaultDate||(t.defaultDate=e._parseFieldValue(),t.setDefaultDate=!0));let i=t.defaultDate;ir(i)?t.setDefaultDate?e.setDate(i,!0):e.gotoDate(i):e.gotoDate(new Date),t.bound?(this.hide(),e.el.className+=" is-bound",_a(t.trigger,"click",e._onInputClick),_a(t.trigger,"focus",e._onInputFocus),_a(t.trigger,"blur",e._onInputBlur)):this.show()}wO.prototype={config:function(n){this._o||(this._o=LS({},Ra,!0));let e=LS(this._o,n,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme=typeof e.theme=="string"&&e.theme?e.theme:null,e.bound=!!(e.bound!==void 0?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn=typeof e.disableDayFn=="function"?e.disableDayFn:null;let t=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=t>4?4:t,ir(e.minDate)||(e.minDate=!1),ir(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),bO(e.yearRange)){let i=new Date().getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||i,e.yearRange[1]=parseInt(e.yearRange[1],10)||i}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||Ra.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(n){return n=n||this._o.format,ir(this._d)?this._o.toString?this._o.toString(this._d,n):this.hasMoment?this.moment(this._d).format(n):this._d.toDateString():""},getMoment:function(){return this.hasMoment?this.moment(this._d):null},setMoment:function(n,e){this.hasMoment&&this.moment.isMoment(n)&&this.setDate(n.toDate(),e)},useMoment:function(n){this.hasMoment=!0,this.moment=n},getDate:function(){return ir(this._d)?new Date(this._d.getTime()):null},setDate:function(n,e){if(!n)return this._d=null,this._o.field&&(this._o.field.value="",Q8(this._o.field,"change",{firedBy:this})),this.draw();if(typeof n=="string"&&(n=new Date(Date.parse(n))),!ir(n))return;let t=this._o.minDate,i=this._o.maxDate;ir(t)&&n<t?n=t:ir(i)&&n>i&&(n=i),this._d=new Date(n.getTime()),DS(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),Q8(this._o.field,"change",{firedBy:this})),!e&&typeof this._o.onSelect=="function"&&this._o.onSelect.call(this,this.getDate())},clear:function(){this.setDate(null)},gotoDate:function(n){let e=!0;if(ir(n)){if(this.calendars){let t=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),s=n.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),e=s<t.getTime()||i.getTime()<s}e&&(this.calendars=[{month:n.getMonth(),year:n.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(n,e){let t=this.getDate()||new Date,i=parseInt(e)*24*60*60*1e3,s;n==="add"?s=new Date(t.valueOf()+i):n==="subtract"&&(s=new Date(t.valueOf()-i)),this.setDate(s)},adjustCalendars:function(){this.calendars[0]=Z8(this.calendars[0]);for(let n=1;n<this._o.numberOfMonths;n++)this.calendars[n]=Z8({month:this.calendars[0].month+n,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(n){isNaN(n)||(this.calendars[0].month=parseInt(n,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(n){isNaN(n)||(this.calendars[0].year=parseInt(n,10),this.adjustCalendars())},setMinDate:function(n){n instanceof Date?(DS(n),this._o.minDate=n,this._o.minYear=n.getFullYear(),this._o.minMonth=n.getMonth()):(this._o.minDate=Ra.minDate,this._o.minYear=Ra.minYear,this._o.minMonth=Ra.minMonth,this._o.startRange=Ra.startRange),this.draw()},setMaxDate:function(n){n instanceof Date?(DS(n),this._o.maxDate=n,this._o.maxYear=n.getFullYear(),this._o.maxMonth=n.getMonth()):(this._o.maxDate=Ra.maxDate,this._o.maxYear=Ra.maxYear,this._o.maxMonth=Ra.maxMonth,this._o.endRange=Ra.endRange),this.draw()},setStartRange:function(n){this._o.startRange=n},setEndRange:function(n){this._o.endRange=n},draw:function(n){if(!this._v&&!n)return;let e=this._o,t=e.minYear,i=e.maxYear,s=e.minMonth,r=e.maxMonth,o="",a;this._y<=t&&(this._y=t,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=i&&(this._y=i,!isNaN(r)&&this._m>r&&(this._m=r));for(let l=0;l<e.numberOfMonths;l++)a="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),o+='<div class="pika-lendar">'+YRe(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,a)+this.render(this.calendars[l].year,this.calendars[l].month,a)+"</div>";this.el.innerHTML=o,e.bound&&e.field.type!=="hidden"&&gO(function(){e.trigger.focus()},1),typeof this._o.onDraw=="function"&&this._o.onDraw(this),e.bound&&e.field.setAttribute("aria-label",e.ariaLabel)},adjustPosition:function(){let n,e,t,i,s,r,o,a,l,c,h;this._o.container||(this.el.style.position="absolute",n=this._o.trigger,e=this.el.offsetWidth,t=this.el.offsetHeight,i=sh().innerWidth||Br().documentElement.clientWidth,s=sh().innerHeight||Br().documentElement.clientHeight,r=Br().body.scrollTop||Br().documentElement.scrollTop,c=!0,h=!0,l=n.getBoundingClientRect(),o=l.left+sh().pageXOffset,a=l.bottom+sh().pageYOffset,(this._o.reposition&&o+e>i||this._o.position.indexOf("right")>-1&&o-e+n.offsetWidth>0)&&(o=o-e+n.offsetWidth,c=!1),(this._o.reposition&&a+t>s+r||this._o.position.indexOf("top")>-1&&a-t-n.offsetHeight>0)&&(a=a-t-n.offsetHeight,h=!1),o<0&&(o=0),a<0&&(a=0),this.el.style.left=o+"px",this.el.style.top=a+"px",pO(this.el,c?"left-aligned":"right-aligned"),pO(this.el,h?"bottom-aligned":"top-aligned"),mO(this.el,c?"right-aligned":"left-aligned"),mO(this.el,h?"top-aligned":"bottom-aligned"))},render:function(n,e,t){let i=this._o,s=new Date,r=X8(n,e),o=new Date(n,e,1).getDay(),a=[],l=[];DS(s),i.firstDay>0&&(o-=i.firstDay,o<0&&(o+=7));let c=e===0?11:e-1,h=e===11?0:e+1,u=e===0?n-1:n,d=e===11?n+1:n,f=X8(u,c),g=r+o,p=g;for(;p>7;)p-=7;g+=7-p;let m=!1;for(let w=0,y=0;w<g;w++){let C=new Date(n,e,1+(w-o)),R=ir(this._d)?NS(C,this._d):!1,_=NS(C,s),x=i.events.indexOf(C.toDateString())!==-1,M=w<o||w>=r+o,I=1+(w-o),A=e,O=n,D=i.startRange&&NS(i.startRange,C),j=i.endRange&&NS(i.endRange,C),Y=i.startRange&&i.endRange&&i.startRange<C&&C<i.endRange,Z=i.minDate&&C<i.minDate||i.maxDate&&C>i.maxDate||i.disableWeekends&&$Re(C)||i.disableDayFn&&i.disableDayFn(C);M&&(w<o?(I=f+I,A=c,O=u):(I=I-r,A=h,O=d));let $={day:I,month:A,year:O,hasEvent:x,isSelected:R,isToday:_,isDisabled:Z,isEmpty:M,isStartRange:D,isEndRange:j,isInRange:Y,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&R&&(m=!0),l.push(BRe($)),++y===7&&(i.showWeekNumber&&l.unshift(WRe(this,w-o,e,n,i.firstWeekOfYearMinDays)),a.push(jRe(l,i.isRTL,i.pickWholeWeek,m)),l=[],y=0,m=!1)}return GRe(i,a,t)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),mO(this.el,"is-hidden"),this._o.bound&&(_a(Br(),"click",this._onClick),this.adjustPosition()),typeof this._o.onOpen=="function"&&this._o.onOpen.call(this))},hide:function(){let n=this._v;n!==!1&&(this._o.bound&&Ul(Br(),"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),pO(this.el,"is-hidden"),this._v=!1,n!==void 0&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){let n=this._o;this.hide(),Ul(this.el,"mousedown",this._onMouseDown,!0),Ul(this.el,"touchend",this._onMouseDown,!0),Ul(this.el,"change",this._onChange),n.keyboardInput&&Ul(Br(),"keydown",this._onKeyChange),n.field&&(Ul(n.field,"change",this._onInputChange),n.bound&&(Ul(n.trigger,"click",this._onInputClick),Ul(n.trigger,"focus",this._onInputFocus),Ul(n.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}};function vO(n,e,t){return(e=KRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KRe(n){var e=qRe(n,"string");return typeof e=="symbol"?e:e+""}function qRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const e4="date",t4="dateEditor";class n4 extends sd{constructor(){super(...arguments),vO(this,"defaultDateFormat","DD/MM/YYYY"),vO(this,"parentDestroyed",!1),vO(this,"$datePicker",null)}static get EDITOR_TYPE(){return e4}init(){if(typeof le!="function")throw new Error("You need to include moment.js to your project.");if(typeof wO!="function")throw new Error("You need to include Pikaday to your project.");super.init(),this.hot.addHook("afterDestroy",()=>{this.parentDestroyed=!0,this.destroyElements()})}createElements(){super.createElements(),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,this.datePicker.setAttribute("dir",this.hot.isRtl()?"rtl":"ltr"),ae(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),this.eventManager.addEventListener(this.datePicker,"mousedown",e=>{Fe(e.target,"pika-day")&&this.hideDatepicker(),e.stopPropagation()})}destroyElements(){const e=this.datePicker.parentNode;this.$datePicker&&this.$datePicker.destroy(),e&&e.removeChild(this.datePicker)}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o)}open(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const i=this.hot.getShortcutManager().getContext("editor");this.showDatepicker(e),super.open(),i.addShortcuts([{keys:[["ArrowLeft"]],callback:()=>{this.$datePicker.adjustDate("subtract",1)}},{keys:[["ArrowRight"]],callback:()=>{this.$datePicker.adjustDate("add",1)}},{keys:[["ArrowUp"]],callback:()=>{this.$datePicker.adjustDate("subtract",7)}},{keys:[["ArrowDown"]],callback:()=>{this.$datePicker.adjustDate("add",7)}}],{group:t4})}close(){var e;this._opened=!1,(e=this.$datePicker)!==null&&e!==void 0&&e.destroy&&this.$datePicker.destroy(),this.hot._registerTimeout(()=>{const s=this.hot._getEditorManager();s.closeEditor(),this.hot.view.render(),s.prepareEditor()}),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(t4),super.close()}finishEditing(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.finishEditing(e,t)}showDatepicker(e){const t=this.cellProperties.dateFormat||this.defaultDateFormat,i=this.hot.view.isMouseDown(),s=e?wA(e.keyCode):!1;let r;this.datePicker.style.display="block",this.$datePicker=new wO(this.getDatePickerConfig()),typeof this.$datePicker.useMoment=="function"&&this.$datePicker.useMoment(le),this.$datePicker._onInputFocus=function(){},this.originalValue?(r=this.originalValue,le(r,t,!0).isValid()&&this.$datePicker.setMoment(le(r,t),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),!s&&!i&&this.setValue("")):this.cellProperties.defaultDate?(r=this.cellProperties.defaultDate,le(r,t,!0).isValid()&&this.$datePicker.setMoment(le(r,t),!0),!s&&!i&&this.setValue("")):this.$datePicker.gotoToday()}hideDatepicker(){this.datePickerStyle.display="none",this.$datePicker.hide()}getDatePickerConfig(){const e=this.TEXTAREA,t={};this.cellProperties&&this.cellProperties.datePickerConfig&&db(t,this.cellProperties.datePickerConfig);const i=t.onSelect,s=t.onClose;return t.field=e,t.trigger=e,t.container=this.datePicker,t.bound=!1,t.keyboardInput=!1,t.format=t.format||this.defaultDateFormat,t.reposition=t.reposition||!1,t.isRTL=!1,t.onSelect=r=>{let o=r;isNaN(o.getTime())||(o=le(o).format(this.cellProperties.dateFormat||this.defaultDateFormat)),this.setValue(o),i&&i()},t.onClose=()=>{this.parentDestroyed||this.finishEditing(!1),s&&s()},t}refreshDimensions(e){var t;if(super.refreshDimensions(e),this.state!==zn.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.hideDatepicker();return}const{rowIndexMapper:i,columnIndexMapper:s}=this.hot,{wtOverlays:r}=this.hot.view._wt,{wtTable:o}=(t=r.getParentOverlay(this.TD))!==null&&t!==void 0?t:this.hot.view._wt,a=i.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleRow()),l=i.getVisualFromRenderableIndex(o.getLastPartiallyVisibleRow()),c=s.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleColumn()),h=s.getVisualFromRenderableIndex(o.getLastPartiallyVisibleColumn());if(this.row>=a&&this.row<=l&&this.col>=c&&this.col<=h){const u=this.TD.getBoundingClientRect();this.datePickerStyle.top=`${this.hot.rootWindow.pageYOffset+u.top+jn(this.TD)}px`;let d=this.hot.rootWindow.pageXOffset;this.hot.isRtl()?d+=u.right-sn(this.datePicker):d+=u.left,this.datePickerStyle.left=`${d}px`}else this.hideDatepicker()}}const XRe="dropdown";class yO extends fO{static get EDITOR_TYPE(){return XRe}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}xe.getSingleton().add("beforeValidate",function(n,e,t){const i=this.propToCol(t);if(Number.isInteger(i)){const s=this.getCellMeta(e,i);s.editor===yO&&s.strict===void 0&&(s.filter=!1,s.strict=!0)}});const QRe="numeric";class i4 extends sd{static get EDITOR_TYPE(){return QRe}}const ZRe="password";class s4 extends sd{static get EDITOR_TYPE(){return ZRe}createElements(){super.createElements(),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,vo(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}const CO="ht_editor_visible",r4="selectEditor",JRe="select";class o4 extends wg{static get EDITOR_TYPE(){return JRe}init(){this.select=this.hot.rootDocument.createElement("select"),this.select.setAttribute("data-hot-input","true"),this.select.style.display="none",ae(this.select,"htSelectEditor"),this.hot.rootElement.appendChild(this.select),this.registerHooks()}getValue(){return this.select.value}setValue(e){this.select.value=e}open(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this._opened=!1,this.select.style.display="none",Fe(this.select,CO)&&Ue(this.select,CO),this.unregisterShortcuts(),this.clearHooks()}focus(){this.select.focus()}registerHooks(){this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>this.refreshDimensions()),this.addHook("afterRowResize",()=>this.refreshDimensions())}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o);const a=this.cellProperties.selectOptions;let l;typeof a=="function"?l=this.prepareOptions(a(this.row,this.col,this.prop)):l=this.prepareOptions(a),vo(this.select),et(l,(c,h)=>{const u=this.hot.rootDocument.createElement("OPTION");u.value=h,$u(u,c),this.select.appendChild(u)})}prepareOptions(e){let t={};if(Array.isArray(e))for(let i=0,s=e.length;i<s;i++)t[e[i]]=e[i];else typeof e=="object"&&(t=e);return t}refreshValue(){const e=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=e,this.setValue(e),this.refreshDimensions()}refreshDimensions(){if(this.state!==zn.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.close();return}const{top:e,start:t,width:i,height:s}=this.getEditedCellRect(),r=this.select.style;r.height=`${s}px`,r.width=`${i}px`,r.top=`${e}px`,r[this.hot.isRtl()?"right":"left"]=`${t}px`,r.margin="0px",ae(this.select,CO)}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),i={group:r4};this.isInFullEditMode()&&t.addShortcuts([{keys:[["ArrowUp"]],callback:()=>{const s=this.select.selectedIndex-1;s>=0&&(this.select[s].selected=!0)}},{keys:[["ArrowDown"]],callback:()=>{const s=this.select.selectedIndex+1;s<=this.select.length-1&&(this.select[s].selected=!0)}}],i)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(r4)}}const e1e="time";class a4 extends sd{static get EDITOR_TYPE(){return e1e}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o),this.TEXTAREA.dir="ltr"}}function t1e(){Es(wg),Es(fO),Es(q8),Es(n4),Es(yO),Es(uO),Es(i4),Es(s4),Es(o4),Es(sd),Es(a4)}const n1e="html";function SO(n,e,t,i,s,r,o){Kb.apply(this,[n,e,t,i,s,r,o]),$u(e,r??"",!1)}SO.RENDERER_TYPE=n1e;const i1e="autocomplete";function vg(n,e,t,i,s,r,o){const{rootDocument:a}=n,l=o.allowHtml?SO:zl,c=a.createElement("DIV"),h=n.getSettings().ariaTags;if(c.className="htAutocompleteArrow",h&&c.setAttribute(...Du()),c.appendChild(a.createTextNode("▼")),l.apply(this,[n,e,t,i,s,r,o]),e.firstChild||e.appendChild(a.createTextNode(" ")),e.insertBefore(c,e.firstChild),ae(e,"htAutocomplete"),!n.acArrowListener){const u=new kr(n);n.acArrowListener=function(d){Fe(d.target,"htAutocompleteArrow")&&n.view._wt.getSetting("onCellDblClick",null,n._createCellCoords(t,i),e)},u.addEventListener(n.rootElement,"mousedown",n.acArrowListener),n.addHookOnce("afterDestroy",()=>{u.destroy()})}}vg.RENDERER_TYPE=i1e;const s1e="dropdown";function _O(n,e,t,i,s,r,o){vg.apply(this,[n,e,t,i,s,r,o])}_O.RENDERER_TYPE=s1e;const l4=new WeakMap,c4=new WeakMap,r1e="htBadValue",yg="data-row",Cg="data-col",o1e="checkboxRenderer",h4="checkbox";xe.getSingleton().add("modifyAutoColumnSizeSeed",function(n,e,t){const{label:i,type:s,row:r,column:o,prop:a}=e;if(s===h4){if(i){const{value:l,property:c}=i;let h=t;if(l)h=typeof l=="function"?l(r,o,a,t):l;else if(c){const u=this.getDataAtRowProp(r,c);h=u!==null?u:t}n=h}return n}});function RO(n,e,t,i,s,r,o){const{rootDocument:a}=n,l=n.getSettings().ariaTags;Kb.apply(this,[n,e,t,i,s,r,o]),a1e(n);let c=l1e(a);const h=o.label;let u=!1;if(typeof o.checkedTemplate>"u"&&(o.checkedTemplate=!0),typeof o.uncheckedTemplate>"u"&&(o.uncheckedTemplate=!1),vo(e),r===o.checkedTemplate||Mn(r).toLocaleLowerCase(o.locale)===Mn(o.checkedTemplate).toLocaleLowerCase(o.locale)?c.checked=!0:r===o.uncheckedTemplate||Mn(r).toLocaleLowerCase(o.locale)===Mn(o.uncheckedTemplate).toLocaleLowerCase(o.locale)?c.checked=!1:An(r)?ae(c,"noValue"):(c.style.display="none",ae(c,r1e),u=!0),$e(c,[[yg,t],[Cg,i]]),l&&$e(c,[aC(c.checked?n.getTranslatedPhrase(GI):n.getTranslatedPhrase(KI)),jj(c.checked),Mme()]),!u&&h){let p="";if(h.value)p=typeof h.value=="function"?h.value.call(this,t,i,s,r):h.value;else if(h.property){const w=n.getDataAtRowProp(t,h.property);p=w!==null?w:""}const m=c1e(a,p,h.separated!==!0);h.position==="before"?h.separated?(e.appendChild(m),e.appendChild(c)):(m.appendChild(c),c=m):(!h.position||h.position==="after")&&(h.separated?(e.appendChild(c),e.appendChild(m)):(m.insertBefore(c,m.firstChild),c=m))}(!h||h&&!h.separated)&&e.appendChild(c),u&&e.appendChild(a.createTextNode("#bad-value#")),l4.has(n)||(l4.set(n,!0),d());function d(){const m=n.getShortcutManager().getContext("grid"),w={group:o1e,relativeToGroup:ih,position:"before"};m.addShortcuts([{keys:[["space"]],callback:()=>(f(),!g()),runOnlyIf:()=>{var y;return(y=n.getSelectedRangeLast())===null||y===void 0?void 0:y.highlight.isCell()}},{keys:[["enter"]],callback:()=>(f(),!g()),runOnlyIf:()=>{const y=n.getSelectedRangeLast();return n.getSettings().enterBeginsEditing&&(y==null?void 0:y.isSingle())&&y.highlight.isCell()}},{keys:[["delete"],["backspace"]],callback:()=>(f(!0),!g()),runOnlyIf:()=>{var y;return(y=n.getSelectedRangeLast())===null||y===void 0?void 0:y.highlight.isCell()}}],w)}function f(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const m=n.getSelectedRange(),w=[],y=new Map;let C=[],R=0;if(m){for(let _=0;_<m.length;_++){const{row:x,col:M}=m[_].getTopStartCorner(),{row:I,col:A}=m[_].getBottomEndCorner();for(let O=x;O<=I;O+=1)for(let D=M;D<=A;D+=1){const j=n.getCellMeta(O,D),Y={checkedTemplate:j.checkedTemplate,uncheckedTemplate:j.uncheckedTemplate};if(j.type!=="checkbox"){p===!0&&!j.readOnly&&(y.has(w.length)?y.set(w.length,[...y.get(w.length),[O,D,null]]):y.set(w.length,[[O,D,null]]));continue}if(j.readOnly===!0)continue;typeof j.checkedTemplate>"u"&&(j.checkedTemplate=!0),typeof j.uncheckedTemplate>"u"&&(j.uncheckedTemplate=!1);const Z=n.getDataAtCell(O,D);p===!1?[j.checkedTemplate,j.checkedTemplate.toString()].includes(Z)?C.push([O,D,j.uncheckedTemplate,Y]):[j.uncheckedTemplate,j.uncheckedTemplate.toString(),null,void 0].includes(Z)&&C.push([O,D,j.checkedTemplate,Y]):C.push([O,D,j.uncheckedTemplate,Y]),R+=1}w.push(R),R=0}C.every(_=>{let[,,x]=_;return x===C[0][2]})?C=C.map(_=>{let[x,M,I]=_;return[x,M,I]}):C=C.map(_=>{let[x,M,,I]=_;return[x,M,I.checkedTemplate]}),C.length>0&&w.forEach((_,x)=>{let M=C.splice(0,_);y.size&&y.has(x)&&(M=[...M,...y.get(x)]),n.setDataAtCell(M)})}}function g(){const p=n.getSelectedRange();if(p){for(let m=0;m<p.length;m++){const w=p[m].getTopStartCorner(),y=p[m].getBottomEndCorner();for(let C=w.row;C<=y.row;C++)for(let R=w.col;R<=y.col;R++){const _=n.getCellMeta(C,R),x=n.getCell(C,R);if(x==null)return!0;if(x.querySelectorAll("input[type=checkbox]").length>0&&!_.readOnly)return!0}}return!1}}}RO.RENDERER_TYPE=h4;function a1e(n){let e=c4.get(n);if(!e){const{rootElement:t}=n;e=new kr(n),e.addEventListener(t,"click",i=>u1e(i,n)),e.addEventListener(t,"mouseup",i=>h1e(i,n)),e.addEventListener(t,"change",i=>d1e(i,n)),c4.set(n,e)}return e}function l1e(n){const e=n.createElement("input");return e.className="htCheckboxRendererInput",e.type="checkbox",e.setAttribute("tabindex","-1"),e.cloneNode(!1)}function c1e(n,e,t){const i=n.createElement("label");return i.className=`htCheckboxRendererLabel ${t?"fullWidth":""}`,i.appendChild(n.createTextNode(e)),i.cloneNode(!0)}function h1e(n,e){const{target:t}=n;xO(t)&&(!t.hasAttribute(yg)||!t.hasAttribute(Cg)||setTimeout(e.listen,10))}function u1e(n,e){const{target:t}=n;if(!xO(t)||!t.hasAttribute(yg)||!t.hasAttribute(Cg))return;const i=parseInt(t.getAttribute(yg),10),s=parseInt(t.getAttribute(Cg),10);e.getCellMeta(i,s).readOnly&&n.preventDefault()}function d1e(n,e){const{target:t}=n;if(!xO(t)||!t.hasAttribute(yg)||!t.hasAttribute(Cg))return;const i=parseInt(t.getAttribute(yg),10),s=parseInt(t.getAttribute(Cg),10),r=e.getCellMeta(i,s);if(!r.readOnly){let o=null;n.target.checked?o=r.uncheckedTemplate===void 0?!0:r.checkedTemplate:o=r.uncheckedTemplate===void 0?!1:r.uncheckedTemplate,e.setDataAtCell(i,s,o)}}function xO(n){return n.tagName==="INPUT"&&n.getAttribute("type")==="checkbox"}const f1e="handsontable";function EO(n,e,t,i,s,r,o){vg.apply(this,[n,e,t,i,s,r,o])}EO.RENDERER_TYPE=f1e;function $S(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var u4={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,s,r){function o(c,h){if(!s[c]){if(!i[c]){var u=typeof $S=="function"&&$S;if(!h&&u)return u(c,!0);if(a)return a(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var f=s[c]={exports:{}};i[c][0].call(f.exports,function(g){return o(i[c][1][g]||g)},f,f.exports,t,i,s,r)}return s[c].exports}for(var a=typeof $S=="function"&&$S,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,i,s){(function(r){var o,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,l=Math.ceil,c=Math.floor,h="[BigNumber Error] ",u=h+"Number primitive has more than 15 significant digits: ",d=1e14,f=14,g=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,w=1e9;function y(A){var O=0|A;return 0<A||A===O?O:O-1}function C(A){for(var O,D,j=1,Y=A.length,Z=A[0]+"";j<Y;){for(O=A[j++]+"",D=f-O.length;D--;O="0"+O);Z+=O}for(Y=Z.length;Z.charCodeAt(--Y)===48;);return Z.slice(0,Y+1||1)}function R(A,O){var D,j,Y=A.c,Z=O.c,$=A.s,B=O.s,ie=A.e,se=O.e;if(!$||!B)return null;if(D=Y&&!Y[0],j=Z&&!Z[0],D||j)return D?j?0:-B:$;if($!=B)return $;if(D=$<0,j=ie==se,!Y||!Z)return j?0:!Y^D?1:-1;if(!j)return se<ie^D?1:-1;for(B=(ie=Y.length)<(se=Z.length)?ie:se,$=0;$<B;$++)if(Y[$]!=Z[$])return Y[$]>Z[$]^D?1:-1;return ie==se?0:se<ie^D?1:-1}function _(A,O,D,j){if(A<O||D<A||A!==(A<0?l(A):c(A)))throw Error(h+(j||"Argument")+(typeof A=="number"?A<O||D<A?" out of range: ":" not an integer: ":" not a primitive number: ")+String(A))}function x(A){var O=A.c.length-1;return y(A.e/f)==O&&A.c[O]%2!=0}function M(A,O){return(1<A.length?A.charAt(0)+"."+A.slice(1):A)+(O<0?"e":"e+")+O}function I(A,O,D){var j,Y;if(O<0){for(Y=D+".";++O;Y+=D);A=Y+A}else if(++O>(j=A.length)){for(Y=D,O-=j;--O;Y+=D);A+=Y}else O<j&&(A=A.slice(0,O)+"."+A.slice(O));return A}(o=function A(O){var D,j,Y,Z,$,B,ie,se,te,pe,b=J.prototype={constructor:J,toString:null,valueOf:null},v=new J(1),S=20,T=4,H=-7,E=21,N=-1e7,X=1e7,ne=!1,he=1,re=0,ke={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Ee="0123456789abcdefghijklmnopqrstuvwxyz";function J(P,k){var L,G,V,Q,U,W,K,q,ee=this;if(!(ee instanceof J))return new J(P,k);if(k==null){if(P instanceof J)return ee.s=P.s,ee.e=P.e,void(ee.c=(P=P.c)?P.slice():P);if((W=typeof P=="number")&&0*P==0){if(ee.s=1/P<0?(P=-P,-1):1,P===~~P){for(Q=0,U=P;10<=U;U/=10,Q++);return ee.e=Q,void(ee.c=[P])}q=String(P)}else{if(q=String(P),!a.test(q))return Y(ee,q,W);ee.s=q.charCodeAt(0)==45?(q=q.slice(1),-1):1}-1<(Q=q.indexOf("."))&&(q=q.replace(".","")),0<(U=q.search(/e/i))?(Q<0&&(Q=U),Q+=+q.slice(U+1),q=q.substring(0,U)):Q<0&&(Q=q.length)}else{if(_(k,2,Ee.length,"Base"),q=String(P),k==10)return Se(ee=new J(P instanceof J?P:q),S+ee.e+1,T);if(W=typeof P=="number"){if(0*P!=0)return Y(ee,q,W,k);if(ee.s=1/P<0?(q=q.slice(1),-1):1,J.DEBUG&&15<q.replace(/^0\.0*|\./,"").length)throw Error(u+P);W=!1}else ee.s=q.charCodeAt(0)===45?(q=q.slice(1),-1):1;for(L=Ee.slice(0,k),Q=U=0,K=q.length;U<K;U++)if(L.indexOf(G=q.charAt(U))<0){if(G=="."){if(Q<U){Q=K;continue}}else if(!V&&(q==q.toUpperCase()&&(q=q.toLowerCase())||q==q.toLowerCase()&&(q=q.toUpperCase()))){V=!0,U=-1,Q=0;continue}return Y(ee,String(P),W,k)}-1<(Q=(q=j(q,k,10,ee.s)).indexOf("."))?q=q.replace(".",""):Q=q.length}for(U=0;q.charCodeAt(U)===48;U++);for(K=q.length;q.charCodeAt(--K)===48;);if(q=q.slice(U,++K)){if(K-=U,W&&J.DEBUG&&15<K&&(g<P||P!==c(P)))throw Error(u+ee.s*P);if(X<(Q=Q-U-1))ee.c=ee.e=null;else if(Q<N)ee.c=[ee.e=0];else{if(ee.e=Q,ee.c=[],U=(Q+1)%f,Q<0&&(U+=f),U<K){for(U&&ee.c.push(+q.slice(0,U)),K-=f;U<K;)ee.c.push(+q.slice(U,U+=f));q=q.slice(U),U=f-q.length}else U-=K;for(;U--;q+="0");ee.c.push(+q)}}else ee.c=[ee.e=0]}function oe(P,k,L,G){var V,Q,U,W,K;if(L==null?L=T:_(L,0,8),!P.c)return P.toString();if(V=P.c[0],U=P.e,k==null)K=C(P.c),K=G==1||G==2&&(U<=H||E<=U)?M(K,U):I(K,U,"0");else if(Q=(P=Se(new J(P),k,L)).e,W=(K=C(P.c)).length,G==1||G==2&&(k<=Q||Q<=H)){for(;W<k;K+="0",W++);K=M(K,Q)}else if(k-=U,K=I(K,Q,"0"),W<Q+1){if(0<--k)for(K+=".";k--;K+="0");}else if(0<(k+=Q-W))for(Q+1==W&&(K+=".");k--;K+="0");return P.s<0&&V?"-"+K:K}function ce(P,k){for(var L,G=1,V=new J(P[0]);G<P.length;G++){if(!(L=new J(P[G])).s){V=L;break}k.call(V,L)&&(V=L)}return V}function Ve(P,k,L){for(var G=1,V=k.length;!k[--V];k.pop());for(V=k[0];10<=V;V/=10,G++);return(L=G+L*f-1)>X?P.c=P.e=null:P.c=L<N?[P.e=0]:(P.e=L,k),P}function Se(P,k,L,G){var V,Q,U,W,K,q,ee,ge=P.c,Re=p;if(ge){e:{for(V=1,W=ge[0];10<=W;W/=10,V++);if((Q=k-V)<0)Q+=f,U=k,ee=(K=ge[q=0])/Re[V-U-1]%10|0;else if((q=l((Q+1)/f))>=ge.length){if(!G)break e;for(;ge.length<=q;ge.push(0));K=ee=0,U=(Q%=f)-f+(V=1)}else{for(K=W=ge[q],V=1;10<=W;W/=10,V++);ee=(U=(Q%=f)-f+V)<0?0:K/Re[V-U-1]%10|0}if(G=G||k<0||ge[q+1]!=null||(U<0?K:K%Re[V-U-1]),G=L<4?(ee||G)&&(L==0||L==(P.s<0?3:2)):5<ee||ee==5&&(L==4||G||L==6&&(0<Q?0<U?K/Re[V-U]:0:ge[q-1])%10&1||L==(P.s<0?8:7)),k<1||!ge[0])return ge.length=0,G?(k-=P.e+1,ge[0]=Re[(f-k%f)%f],P.e=-k||0):ge[0]=P.e=0,P;if(Q==0?(ge.length=q,W=1,q--):(ge.length=q+1,W=Re[f-Q],ge[q]=0<U?c(K/Re[V-U]%Re[U])*W:0),G)for(;;){if(q==0){for(Q=1,U=ge[0];10<=U;U/=10,Q++);for(U=ge[0]+=W,W=1;10<=U;U/=10,W++);Q!=W&&(P.e++,ge[0]==d&&(ge[0]=1));break}if(ge[q]+=W,ge[q]!=d)break;ge[q--]=0,W=1}for(Q=ge.length;ge[--Q]===0;ge.pop());}P.e>X?P.c=P.e=null:P.e<N&&(P.c=[P.e=0])}return P}function _e(P){var k,L=P.e;return L===null?P.toString():(k=C(P.c),k=L<=H||E<=L?M(k,L):I(k,L,"0"),P.s<0?"-"+k:k)}return J.clone=A,J.ROUND_UP=0,J.ROUND_DOWN=1,J.ROUND_CEIL=2,J.ROUND_FLOOR=3,J.ROUND_HALF_UP=4,J.ROUND_HALF_DOWN=5,J.ROUND_HALF_EVEN=6,J.ROUND_HALF_CEIL=7,J.ROUND_HALF_FLOOR=8,J.EUCLID=9,J.config=J.set=function(P){var k,L;if(P!=null){if(typeof P!="object")throw Error(h+"Object expected: "+P);if(P.hasOwnProperty(k="DECIMAL_PLACES")&&(_(L=P[k],0,w,k),S=L),P.hasOwnProperty(k="ROUNDING_MODE")&&(_(L=P[k],0,8,k),T=L),P.hasOwnProperty(k="EXPONENTIAL_AT")&&((L=P[k])&&L.pop?(_(L[0],-w,0,k),_(L[1],0,w,k),H=L[0],E=L[1]):(_(L,-w,w,k),H=-(E=L<0?-L:L))),P.hasOwnProperty(k="RANGE"))if((L=P[k])&&L.pop)_(L[0],-w,-1,k),_(L[1],1,w,k),N=L[0],X=L[1];else{if(_(L,-w,w,k),!L)throw Error(h+k+" cannot be zero: "+L);N=-(X=L<0?-L:L)}if(P.hasOwnProperty(k="CRYPTO")){if((L=P[k])!==!!L)throw Error(h+k+" not true or false: "+L);if(L){if(typeof crypto>"u"||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw ne=!L,Error(h+"crypto unavailable");ne=L}else ne=L}if(P.hasOwnProperty(k="MODULO_MODE")&&(_(L=P[k],0,9,k),he=L),P.hasOwnProperty(k="POW_PRECISION")&&(_(L=P[k],0,w,k),re=L),P.hasOwnProperty(k="FORMAT")){if(typeof(L=P[k])!="object")throw Error(h+k+" not an object: "+L);ke=L}if(P.hasOwnProperty(k="ALPHABET")){if(typeof(L=P[k])!="string"||/^.$|[+-.\s]|(.).*\1/.test(L))throw Error(h+k+" invalid: "+L);Ee=L}}return{DECIMAL_PLACES:S,ROUNDING_MODE:T,EXPONENTIAL_AT:[H,E],RANGE:[N,X],CRYPTO:ne,MODULO_MODE:he,POW_PRECISION:re,FORMAT:ke,ALPHABET:Ee}},J.isBigNumber=function(P){return P instanceof J||P&&P._isBigNumber===!0||!1},J.maximum=J.max=function(){return ce(arguments,b.lt)},J.minimum=J.min=function(){return ce(arguments,b.gt)},J.random=(Z=9007199254740992,$=Math.random()*Z&2097151?function(){return c(Math.random()*Z)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(P){var k,L,G,V,Q,U=0,W=[],K=new J(v);if(P==null?P=S:_(P,0,w),V=l(P/f),ne)if(crypto.getRandomValues){for(k=crypto.getRandomValues(new Uint32Array(V*=2));U<V;)9e15<=(Q=131072*k[U]+(k[U+1]>>>11))?(L=crypto.getRandomValues(new Uint32Array(2)),k[U]=L[0],k[U+1]=L[1]):(W.push(Q%1e14),U+=2);U=V/2}else{if(!crypto.randomBytes)throw ne=!1,Error(h+"crypto unavailable");for(k=crypto.randomBytes(V*=7);U<V;)9e15<=(Q=281474976710656*(31&k[U])+1099511627776*k[U+1]+4294967296*k[U+2]+16777216*k[U+3]+(k[U+4]<<16)+(k[U+5]<<8)+k[U+6])?crypto.randomBytes(7).copy(k,U):(W.push(Q%1e14),U+=7);U=V/7}if(!ne)for(;U<V;)(Q=$())<9e15&&(W[U++]=Q%1e14);for(V=W[--U],P%=f,V&&P&&(Q=p[f-P],W[U]=c(V/Q)*Q);W[U]===0;W.pop(),U--);if(U<0)W=[G=0];else{for(G=-1;W[0]===0;W.splice(0,1),G-=f);for(U=1,Q=W[0];10<=Q;Q/=10,U++);U<f&&(G-=f-U)}return K.e=G,K.c=W,K}),J.sum=function(){for(var P=1,k=arguments,L=new J(k[0]);P<k.length;)L=L.plus(k[P++]);return L},j=function(){var P="0123456789";function k(L,G,V,Q){for(var U,W,K=[0],q=0,ee=L.length;q<ee;){for(W=K.length;W--;K[W]*=G);for(K[0]+=Q.indexOf(L.charAt(q++)),U=0;U<K.length;U++)K[U]>V-1&&(K[U+1]==null&&(K[U+1]=0),K[U+1]+=K[U]/V|0,K[U]%=V)}return K.reverse()}return function(L,G,V,Q,U){var W,K,q,ee,ge,Re,De,nt,vt=L.indexOf("."),at=S,je=T;for(0<=vt&&(ee=re,re=0,L=L.replace(".",""),Re=(nt=new J(G)).pow(L.length-vt),re=ee,nt.c=k(I(C(Re.c),Re.e,"0"),10,V,P),nt.e=nt.c.length),q=ee=(De=k(L,G,V,U?(W=Ee,P):(W=P,Ee))).length;De[--ee]==0;De.pop());if(!De[0])return W.charAt(0);if(vt<0?--q:(Re.c=De,Re.e=q,Re.s=Q,De=(Re=D(Re,nt,at,je,V)).c,ge=Re.r,q=Re.e),vt=De[K=q+at+1],ee=V/2,ge=ge||K<0||De[K+1]!=null,ge=je<4?(vt!=null||ge)&&(je==0||je==(Re.s<0?3:2)):ee<vt||vt==ee&&(je==4||ge||je==6&&1&De[K-1]||je==(Re.s<0?8:7)),K<1||!De[0])L=ge?I(W.charAt(1),-at,W.charAt(0)):W.charAt(0);else{if(De.length=K,ge)for(--V;++De[--K]>V;)De[K]=0,K||(++q,De=[1].concat(De));for(ee=De.length;!De[--ee];);for(vt=0,L="";vt<=ee;L+=W.charAt(De[vt++]));L=I(L,q,W.charAt(0))}return L}}(),D=function(){function P(G,V,Q){var U,W,K,q,ee=0,ge=G.length,Re=V%m,De=V/m|0;for(G=G.slice();ge--;)ee=((W=Re*(K=G[ge]%m)+(U=De*K+(q=G[ge]/m|0)*Re)%m*m+ee)/Q|0)+(U/m|0)+De*q,G[ge]=W%Q;return ee&&(G=[ee].concat(G)),G}function k(G,V,Q,U){var W,K;if(Q!=U)K=U<Q?1:-1;else for(W=K=0;W<Q;W++)if(G[W]!=V[W]){K=G[W]>V[W]?1:-1;break}return K}function L(G,V,Q,U){for(var W=0;Q--;)G[Q]-=W,W=G[Q]<V[Q]?1:0,G[Q]=W*U+G[Q]-V[Q];for(;!G[0]&&1<G.length;G.splice(0,1));}return function(G,V,Q,U,W){var K,q,ee,ge,Re,De,nt,vt,at,je,Ct,Ln,vp,Vo,Tv,Qr,xn,mi=G.s==V.s?1:-1,Ni=G.c,bn=V.c;if(!(Ni&&Ni[0]&&bn&&bn[0]))return new J(G.s&&V.s&&(Ni?!bn||Ni[0]!=bn[0]:bn)?Ni&&Ni[0]==0||!bn?0*mi:mi/0:NaN);for(at=(vt=new J(mi)).c=[],mi=Q+(q=G.e-V.e)+1,W||(W=d,q=y(G.e/f)-y(V.e/f),mi=mi/f|0),ee=0;bn[ee]==(Ni[ee]||0);ee++);if(bn[ee]>(Ni[ee]||0)&&q--,mi<0)at.push(1),ge=!0;else{for(Vo=Ni.length,Qr=bn.length,mi+=2,1<(Re=c(W/(bn[ee=0]+1)))&&(bn=P(bn,Re,W),Ni=P(Ni,Re,W),Qr=bn.length,Vo=Ni.length),vp=Qr,Ct=(je=Ni.slice(0,Qr)).length;Ct<Qr;je[Ct++]=0);xn=bn.slice(),xn=[0].concat(xn),Tv=bn[0],bn[1]>=W/2&&Tv++;do{if(Re=0,(K=k(bn,je,Qr,Ct))<0){if(Ln=je[0],Qr!=Ct&&(Ln=Ln*W+(je[1]||0)),1<(Re=c(Ln/Tv)))for(W<=Re&&(Re=W-1),nt=(De=P(bn,Re,W)).length,Ct=je.length;k(De,je,nt,Ct)==1;)Re--,L(De,Qr<nt?xn:bn,nt,W),nt=De.length,K=1;else Re==0&&(K=Re=1),nt=(De=bn.slice()).length;if(nt<Ct&&(De=[0].concat(De)),L(je,De,Ct,W),Ct=je.length,K==-1)for(;k(bn,je,Qr,Ct)<1;)Re++,L(je,Qr<Ct?xn:bn,Ct,W),Ct=je.length}else K===0&&(Re++,je=[0]);at[ee++]=Re,je[0]?je[Ct++]=Ni[vp]||0:(je=[Ni[vp]],Ct=1)}while((vp++<Vo||je[0]!=null)&&mi--);ge=je[0]!=null,at[0]||at.splice(0,1)}if(W==d){for(ee=1,mi=at[0];10<=mi;mi/=10,ee++);Se(vt,Q+(vt.e=ee+q*f-1)+1,U,ge)}else vt.e=q,vt.r=+ge;return vt}}(),B=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ie=/^([^.]+)\.$/,se=/^\.([^.]+)$/,te=/^-?(Infinity|NaN)$/,pe=/^\s*\+(?=[\w.])|^\s+|\s+$/g,Y=function(P,k,L,G){var V,Q=L?k:k.replace(pe,"");if(te.test(Q))P.s=isNaN(Q)?null:Q<0?-1:1,P.c=P.e=null;else{if(!L&&(Q=Q.replace(B,function(U,W,K){return V=(K=K.toLowerCase())=="x"?16:K=="b"?2:8,G&&G!=V?U:W}),G&&(V=G,Q=Q.replace(ie,"$1").replace(se,"0.$1")),k!=Q))return new J(Q,V);if(J.DEBUG)throw Error(h+"Not a"+(G?" base "+G:"")+" number: "+k);P.c=P.e=P.s=null}},b.absoluteValue=b.abs=function(){var P=new J(this);return P.s<0&&(P.s=1),P},b.comparedTo=function(P,k){return R(this,new J(P,k))},b.decimalPlaces=b.dp=function(P,k){var L,G,V;if(P!=null)return _(P,0,w),k==null?k=T:_(k,0,8),Se(new J(this),P+this.e+1,k);if(!(L=this.c))return null;if(G=((V=L.length-1)-y(this.e/f))*f,V=L[V])for(;V%10==0;V/=10,G--);return G<0&&(G=0),G},b.dividedBy=b.div=function(P,k){return D(this,new J(P,k),S,T)},b.dividedToIntegerBy=b.idiv=function(P,k){return D(this,new J(P,k),0,1)},b.exponentiatedBy=b.pow=function(P,k){var L,G,V,Q,U,W,K,q,ee=this;if((P=new J(P)).c&&!P.isInteger())throw Error(h+"Exponent not an integer: "+_e(P));if(k!=null&&(k=new J(k)),U=14<P.e,!ee.c||!ee.c[0]||ee.c[0]==1&&!ee.e&&ee.c.length==1||!P.c||!P.c[0])return q=new J(Math.pow(+_e(ee),U?2-x(P):+_e(P))),k?q.mod(k):q;if(W=P.s<0,k){if(k.c?!k.c[0]:!k.s)return new J(NaN);(G=!W&&ee.isInteger()&&k.isInteger())&&(ee=ee.mod(k))}else{if(9<P.e&&(0<ee.e||ee.e<-1||(ee.e==0?1<ee.c[0]||U&&24e7<=ee.c[1]:ee.c[0]<8e13||U&&ee.c[0]<=9999975e7)))return Q=ee.s<0&&x(P)?-0:0,-1<ee.e&&(Q=1/Q),new J(W?1/Q:Q);re&&(Q=l(re/f+2))}for(K=U?(L=new J(.5),W&&(P.s=1),x(P)):(V=Math.abs(+_e(P)))%2,q=new J(v);;){if(K){if(!(q=q.times(ee)).c)break;Q?q.c.length>Q&&(q.c.length=Q):G&&(q=q.mod(k))}if(V){if((V=c(V/2))===0)break;K=V%2}else if(Se(P=P.times(L),P.e+1,1),14<P.e)K=x(P);else{if((V=+_e(P))==0)break;K=V%2}ee=ee.times(ee),Q?ee.c&&ee.c.length>Q&&(ee.c.length=Q):G&&(ee=ee.mod(k))}return G?q:(W&&(q=v.div(q)),k?q.mod(k):Q?Se(q,re,T,void 0):q)},b.integerValue=function(P){var k=new J(this);return P==null?P=T:_(P,0,8),Se(k,k.e+1,P)},b.isEqualTo=b.eq=function(P,k){return R(this,new J(P,k))===0},b.isFinite=function(){return!!this.c},b.isGreaterThan=b.gt=function(P,k){return 0<R(this,new J(P,k))},b.isGreaterThanOrEqualTo=b.gte=function(P,k){return(k=R(this,new J(P,k)))===1||k===0},b.isInteger=function(){return!!this.c&&y(this.e/f)>this.c.length-2},b.isLessThan=b.lt=function(P,k){return R(this,new J(P,k))<0},b.isLessThanOrEqualTo=b.lte=function(P,k){return(k=R(this,new J(P,k)))===-1||k===0},b.isNaN=function(){return!this.s},b.isNegative=function(){return this.s<0},b.isPositive=function(){return 0<this.s},b.isZero=function(){return!!this.c&&this.c[0]==0},b.minus=function(P,k){var L,G,V,Q,U=this,W=U.s;if(k=(P=new J(P,k)).s,!W||!k)return new J(NaN);if(W!=k)return P.s=-k,U.plus(P);var K=U.e/f,q=P.e/f,ee=U.c,ge=P.c;if(!K||!q){if(!ee||!ge)return ee?(P.s=-k,P):new J(ge?U:NaN);if(!ee[0]||!ge[0])return ge[0]?(P.s=-k,P):new J(ee[0]?U:T==3?-0:0)}if(K=y(K),q=y(q),ee=ee.slice(),W=K-q){for((V=(Q=W<0)?(W=-W,ee):(q=K,ge)).reverse(),k=W;k--;V.push(0));V.reverse()}else for(G=(Q=(W=ee.length)<(k=ge.length))?W:k,W=k=0;k<G;k++)if(ee[k]!=ge[k]){Q=ee[k]<ge[k];break}if(Q&&(V=ee,ee=ge,ge=V,P.s=-P.s),0<(k=(G=ge.length)-(L=ee.length)))for(;k--;ee[L++]=0);for(k=d-1;W<G;){if(ee[--G]<ge[G]){for(L=G;L&&!ee[--L];ee[L]=k);--ee[L],ee[G]+=d}ee[G]-=ge[G]}for(;ee[0]==0;ee.splice(0,1),--q);return ee[0]?Ve(P,ee,q):(P.s=T==3?-1:1,P.c=[P.e=0],P)},b.modulo=b.mod=function(P,k){var L,G,V=this;return P=new J(P,k),!V.c||!P.s||P.c&&!P.c[0]?new J(NaN):!P.c||V.c&&!V.c[0]?new J(V):(he==9?(G=P.s,P.s=1,L=D(V,P,0,3),P.s=G,L.s*=G):L=D(V,P,0,he),(P=V.minus(L.times(P))).c[0]||he!=1||(P.s=V.s),P)},b.multipliedBy=b.times=function(P,k){var L,G,V,Q,U,W,K,q,ee,ge,Re,De,nt,vt,at,je=this,Ct=je.c,Ln=(P=new J(P,k)).c;if(!(Ct&&Ln&&Ct[0]&&Ln[0]))return!je.s||!P.s||Ct&&!Ct[0]&&!Ln||Ln&&!Ln[0]&&!Ct?P.c=P.e=P.s=null:(P.s*=je.s,Ct&&Ln?(P.c=[0],P.e=0):P.c=P.e=null),P;for(G=y(je.e/f)+y(P.e/f),P.s*=je.s,(K=Ct.length)<(ge=Ln.length)&&(nt=Ct,Ct=Ln,Ln=nt,V=K,K=ge,ge=V),V=K+ge,nt=[];V--;nt.push(0));for(vt=d,at=m,V=ge;0<=--V;){for(L=0,Re=Ln[V]%at,De=Ln[V]/at|0,Q=V+(U=K);V<Q;)L=((q=Re*(q=Ct[--U]%at)+(W=De*q+(ee=Ct[U]/at|0)*Re)%at*at+nt[Q]+L)/vt|0)+(W/at|0)+De*ee,nt[Q--]=q%vt;nt[Q]=L}return L?++G:nt.splice(0,1),Ve(P,nt,G)},b.negated=function(){var P=new J(this);return P.s=-P.s||null,P},b.plus=function(P,k){var L,G=this,V=G.s;if(k=(P=new J(P,k)).s,!V||!k)return new J(NaN);if(V!=k)return P.s=-k,G.minus(P);var Q=G.e/f,U=P.e/f,W=G.c,K=P.c;if(!Q||!U){if(!W||!K)return new J(V/0);if(!W[0]||!K[0])return K[0]?P:new J(W[0]?G:0*V)}if(Q=y(Q),U=y(U),W=W.slice(),V=Q-U){for((L=0<V?(U=Q,K):(V=-V,W)).reverse();V--;L.push(0));L.reverse()}for((V=W.length)-(k=K.length)<0&&(L=K,K=W,W=L,k=V),V=0;k;)V=(W[--k]=W[k]+K[k]+V)/d|0,W[k]=d===W[k]?0:W[k]%d;return V&&(W=[V].concat(W),++U),Ve(P,W,U)},b.precision=b.sd=function(P,k){var L,G,V;if(P!=null&&P!==!!P)return _(P,1,w),k==null?k=T:_(k,0,8),Se(new J(this),P,k);if(!(L=this.c))return null;if(G=(V=L.length-1)*f+1,V=L[V]){for(;V%10==0;V/=10,G--);for(V=L[0];10<=V;V/=10,G++);}return P&&this.e+1>G&&(G=this.e+1),G},b.shiftedBy=function(P){return _(P,-g,g),this.times("1e"+P)},b.squareRoot=b.sqrt=function(){var P,k,L,G,V,Q=this,U=Q.c,W=Q.s,K=Q.e,q=S+4,ee=new J("0.5");if(W!==1||!U||!U[0])return new J(!W||W<0&&(!U||U[0])?NaN:U?Q:1/0);if((L=(W=Math.sqrt(+_e(Q)))==0||W==1/0?(((k=C(U)).length+K)%2==0&&(k+="0"),W=Math.sqrt(+k),K=y((K+1)/2)-(K<0||K%2),new J(k=W==1/0?"1e"+K:(k=W.toExponential()).slice(0,k.indexOf("e")+1)+K)):new J(W+"")).c[0]){for((W=(K=L.e)+q)<3&&(W=0);;)if(V=L,L=ee.times(V.plus(D(Q,V,q,1))),C(V.c).slice(0,W)===(k=C(L.c)).slice(0,W)){if(L.e<K&&--W,(k=k.slice(W-3,W+1))!="9999"&&(G||k!="4999")){+k&&(+k.slice(1)||k.charAt(0)!="5")||(Se(L,L.e+S+2,1),P=!L.times(L).eq(Q));break}if(!G&&(Se(V,V.e+S+2,0),V.times(V).eq(Q))){L=V;break}q+=4,W+=4,G=1}}return Se(L,L.e+S+1,T,P)},b.toExponential=function(P,k){return P!=null&&(_(P,0,w),P++),oe(this,P,k,1)},b.toFixed=function(P,k){return P!=null&&(_(P,0,w),P=P+this.e+1),oe(this,P,k)},b.toFormat=function(P,k,L){var G;if(L==null)P!=null&&k&&typeof k=="object"?(L=k,k=null):P&&typeof P=="object"?(L=P,P=k=null):L=ke;else if(typeof L!="object")throw Error(h+"Argument not an object: "+L);if(G=this.toFixed(P,k),this.c){var V,Q=G.split("."),U=+L.groupSize,W=+L.secondaryGroupSize,K=L.groupSeparator||"",q=Q[0],ee=Q[1],ge=this.s<0,Re=ge?q.slice(1):q,De=Re.length;if(W&&(V=U,U=W,De-=W=V),0<U&&0<De){for(V=De%U||U,q=Re.substr(0,V);V<De;V+=U)q+=K+Re.substr(V,U);0<W&&(q+=K+Re.slice(V)),ge&&(q="-"+q)}G=ee?q+(L.decimalSeparator||"")+((W=+L.fractionGroupSize)?ee.replace(new RegExp("\\d{"+W+"}\\B","g"),"$&"+(L.fractionGroupSeparator||"")):ee):q}return(L.prefix||"")+G+(L.suffix||"")},b.toFraction=function(P){var k,L,G,V,Q,U,W,K,q,ee,ge,Re,De=this,nt=De.c;if(P!=null&&(!(W=new J(P)).isInteger()&&(W.c||W.s!==1)||W.lt(v)))throw Error(h+"Argument "+(W.isInteger()?"out of range: ":"not an integer: ")+_e(W));if(!nt)return new J(De);for(k=new J(v),q=L=new J(v),G=K=new J(v),Re=C(nt),Q=k.e=Re.length-De.e-1,k.c[0]=p[(U=Q%f)<0?f+U:U],P=!P||0<W.comparedTo(k)?0<Q?k:q:W,U=X,X=1/0,W=new J(Re),K.c[0]=0;ee=D(W,k,0,1),(V=L.plus(ee.times(G))).comparedTo(P)!=1;)L=G,G=V,q=K.plus(ee.times(V=q)),K=V,k=W.minus(ee.times(V=k)),W=V;return V=D(P.minus(L),G,0,1),K=K.plus(V.times(q)),L=L.plus(V.times(G)),K.s=q.s=De.s,ge=D(q,G,Q*=2,T).minus(De).abs().comparedTo(D(K,L,Q,T).minus(De).abs())<1?[q,G]:[K,L],X=U,ge},b.toNumber=function(){return+_e(this)},b.toPrecision=function(P,k){return P!=null&&_(P,1,w),oe(this,P,k,2)},b.toString=function(P){var k,L=this,G=L.s,V=L.e;return V===null?G?(k="Infinity",G<0&&(k="-"+k)):k="NaN":(k=P==null?V<=H||E<=V?M(C(L.c),V):I(C(L.c),V,"0"):P===10?I(C((L=Se(new J(L),S+V+1,T)).c),L.e,"0"):(_(P,2,Ee.length,"Base"),j(I(C(L.c),V,"0"),10,P,G,!0)),G<0&&L.c[0]&&(k="-"+k)),k},b.valueOf=b.toJSON=function(){return _e(this)},b._isBigNumber=!0,typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(b[Symbol.toStringTag]="BigNumber",b[Symbol.for("nodejs.util.inspect.custom")]=b.valueOf),O!=null&&J.set(O),J}()).default=o.BigNumber=o,i!==void 0&&i.exports?i.exports=o:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=o)})(this)},{}],2:[function(t,i,s){i.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(r){var o=r%10;return~~(r%100/10)==1?"th":o===1?"st":o===2?"nd":o===3?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,i,s){function r(y,C){return function(R){if(Array.isArray(R))return R}(y)||function(R,_){var x=[],M=!0,I=!1,A=void 0;try{for(var O,D=R[Symbol.iterator]();!(M=(O=D.next()).done)&&(x.push(O.value),!_||x.length!==_);M=!0);}catch(j){I=!0,A=j}finally{try{M||D.return==null||D.return()}finally{if(I)throw A}}return x}(y,C)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=t("./globalState"),a=t("./validating"),l=t("./parsing"),c=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],h={general:{scale:1024,suffixes:c,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:c,marker:"d"}},u={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};function d(y){var C=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},R=2<arguments.length?arguments[2]:void 0;if(typeof C=="string"&&(C=l.parseFormat(C)),!a.validateFormat(C))return"ERROR: invalid format";var _=C.prefix||"",x=C.postfix||"",M=function(I,A,O){switch(A.output){case"currency":return A=w(A,o.currentCurrencyDefaultFormat()),function(Ee,J,oe){var ce=oe.currentCurrency(),Ve=Object.assign({},u,J),Se=void 0,_e="",P=!!Ve.totalLength||!!Ve.forceAverage||Ve.average,k=J.currencyPosition||ce.position,L=J.currencySymbol||ce.symbol;Ve.spaceSeparated&&(_e=" "),k==="infix"&&(Se=_e+L+_e);var G=m({instance:Ee,providedFormat:J,state:oe,decimalSeparator:Se});return k==="prefix"&&(G=Ee._value<0&&Ve.negative==="sign"?"-".concat(_e).concat(L).concat(G.slice(1)):L+_e+G),k&&k!=="postfix"||(G=G+(_e=P?"":_e)+L),G}(I,A,o);case"percent":return A=w(A,o.currentPercentageDefaultFormat()),function(Ee,J,oe,ce){var Ve=J.prefixSymbol,Se=m({instance:ce(100*Ee._value),providedFormat:J,state:oe}),_e=Object.assign({},u,J);return Ve?"%".concat(_e.spaceSeparated?" ":"").concat(Se):"".concat(Se).concat(_e.spaceSeparated?" ":"","%")}(I,A,o,O);case"byte":return A=w(A,o.currentByteDefaultFormat()),v=I,T=o,H=O,E=(S=A).base||"binary",N=h[E],X=f(v._value,N.suffixes,N.scale),ne=X.value,he=X.suffix,re=m({instance:H(ne),providedFormat:S,state:T,defaults:T.currentByteDefaultFormat()}),ke=T.currentAbbreviations(),"".concat(re).concat(ke.spaced?" ":"").concat(he);case"time":return A=w(A,o.currentTimeDefaultFormat()),se=I,te=Math.floor(se._value/60/60),pe=Math.floor((se._value-60*te*60)/60),b=Math.round(se._value-60*te*60-60*pe),"".concat(te,":").concat(pe<10?"0":"").concat(pe,":").concat(b<10?"0":"").concat(b);case"ordinal":return A=w(A,o.currentOrdinalDefaultFormat()),D=I,j=A,Z=(Y=o).currentOrdinal(),$=Object.assign({},u,j),B=m({instance:D,providedFormat:j,state:Y}),ie=Z(D._value),"".concat(B).concat($.spaceSeparated?" ":"").concat(ie);case"number":default:return m({instance:I,providedFormat:A,numbro:O})}var D,j,Y,Z,$,B,ie,se,te,pe,b,v,S,T,H,E,N,X,ne,he,re,ke}(y,C,R);return M=(M=_+M)+x}function f(y,C,R){var _=C[0],x=Math.abs(y);if(R<=x){for(var M=1;M<C.length;++M){var I=Math.pow(R,M),A=Math.pow(R,M+1);if(I<=x&&x<A){_=C[M],y/=I;break}}_===C[0]&&(y/=Math.pow(R,C.length-1),_=C[C.length-1])}return{value:y,suffix:_}}function g(y){for(var C="",R=0;R<y;R++)C+="0";return C}function p(y,C){return y.toString().indexOf("e")!==-1?function(R,_){var x=R.toString(),M=r(x.split("e"),2),I=M[0],A=M[1],O=r(I.split("."),2),D=O[0],j=O[1],Y=j===void 0?"":j;if(0<+A)x=D+Y+g(A-Y.length);else{var Z=".";Z=+D<0?"-0".concat(Z):"0".concat(Z);var $=(g(-A-1)+Math.abs(D)+Y).substr(0,_);$.length<_&&($+=g(_-$.length)),x=Z+$}return 0<+A&&0<_&&(x+=".".concat(g(_))),x}(y,C):(Math.round(+"".concat(y,"e+").concat(C))/Math.pow(10,C)).toFixed(C)}function m(y){var C=y.instance,R=y.providedFormat,_=y.state,x=_===void 0?o:_,M=y.decimalSeparator,I=y.defaults,A=I===void 0?x.currentDefaults():I,O=C._value;if(O===0&&x.hasZeroFormat())return x.getZeroFormat();if(!isFinite(O))return O.toString();var D,j,Y,Z,$,B,ie,se,te=Object.assign({},u,A,R),pe=te.totalLength,b=pe?0:te.characteristic,v=te.optionalCharacteristic,S=te.forceAverage,T=!!pe||!!S||te.average,H=pe?-1:T&&R.mantissa===void 0?0:te.mantissa,E=!pe&&(R.optionalMantissa===void 0?H===-1:te.optionalMantissa),N=te.trimMantissa,X=te.thousandSeparated,ne=te.spaceSeparated,he=te.negative,re=te.forceSign,ke=te.exponential,Ee="";if(T){var J=function(P){var k=P.value,L=P.forceAverage,G=P.abbreviations,V=P.spaceSeparated,Q=V!==void 0&&V,U=P.totalLength,W=U===void 0?0:U,K="",q=Math.abs(k),ee=-1;if(q>=Math.pow(10,12)&&!L||L==="trillion"?(K=G.trillion,k/=Math.pow(10,12)):q<Math.pow(10,12)&&q>=Math.pow(10,9)&&!L||L==="billion"?(K=G.billion,k/=Math.pow(10,9)):q<Math.pow(10,9)&&q>=Math.pow(10,6)&&!L||L==="million"?(K=G.million,k/=Math.pow(10,6)):(q<Math.pow(10,6)&&q>=Math.pow(10,3)&&!L||L==="thousand")&&(K=G.thousand,k/=Math.pow(10,3)),K&&(K=(Q?" ":"")+K),W){var ge=k.toString().split(".")[0];ee=Math.max(W-ge.length,0)}return{value:k,abbreviation:K,mantissaPrecision:ee}}({value:O,forceAverage:S,abbreviations:x.currentAbbreviations(),spaceSeparated:ne,totalLength:pe});O=J.value,Ee+=J.abbreviation,pe&&(H=J.mantissaPrecision)}if(ke){var oe=(j=(D={value:O,characteristicPrecision:b}).value,Y=D.characteristicPrecision,Z=Y===void 0?0:Y,$=r(j.toExponential().split("e"),2),B=$[0],ie=$[1],se=+B,Z&&1<Z&&(se*=Math.pow(10,Z-1),ie=0<=(ie=+ie-(Z-1))?"+".concat(ie):ie),{value:se,abbreviation:"e".concat(ie)});O=oe.value,Ee=oe.abbreviation+Ee}var ce,Ve,Se,_e=function(P,k,L,G,V){if(G===-1)return P;var Q=p(k,G),U=r(Q.toString().split("."),2),W=U[0],K=U[1],q=K===void 0?"":K;if(q.match(/^0+$/)&&(L||V))return W;var ee=q.match(/0+$/);return V&&ee?"".concat(W,".").concat(q.toString().slice(0,ee.index)):Q.toString()}(O.toString(),O,E,H,N);return _e=function(P,k,L,G,V){var Q=G.currentDelimiters(),U=Q.thousands;V=V||Q.decimal;var W=Q.thousandsSize||3,K=P.toString(),q=K.split(".")[0],ee=K.split(".")[1];return L&&(k<0&&(q=q.slice(1)),function(ge,Re){for(var De=[],nt=0,vt=ge;0<vt;vt--)nt===Re&&(De.unshift(vt),nt=0),nt++;return De}(q.length,W).forEach(function(ge,Re){q=q.slice(0,ge+Re)+U+q.slice(ge+Re)}),k<0&&(q="-".concat(q))),K=ee?q+V+ee:q}(_e=function(P,k,L,G){var V=P,Q=r(V.toString().split("."),2),U=Q[0],W=Q[1];if(U.match(/^-?0$/)&&L)return W?"".concat(U.replace("0",""),".").concat(W):U.replace("0","");if(U.length<G)for(var K=G-U.length,q=0;q<K;q++)V="0".concat(V);return V.toString()}(_e,0,v,b),O,X,x,M),(T||ke)&&(_e=_e+Ee),(re||O<0)&&(ce=_e,Se=he,_e=(Ve=O)===0?ce:+ce==0?ce.replace("-",""):0<Ve?"+".concat(ce):Se==="sign"?ce:"(".concat(ce.replace("-",""),")")),_e}function w(y,C){if(!y)return C;var R=Object.keys(y);return R.length===1&&R[0]==="output"?C:y}i.exports=function(y){return{format:function(){for(var C=arguments.length,R=new Array(C),_=0;_<C;_++)R[_]=arguments[_];return d.apply(void 0,R.concat([y]))},getByteUnit:function(){for(var C=arguments.length,R=new Array(C),_=0;_<C;_++)R[_]=arguments[_];return(function(x){var M=h.general;return f(x._value,M.suffixes,M.scale).suffix}).apply(void 0,R.concat([y]))},getBinaryByteUnit:function(){for(var C=arguments.length,R=new Array(C),_=0;_<C;_++)R[_]=arguments[_];return(function(x){var M=h.binary;return f(x._value,M.suffixes,M.scale).suffix}).apply(void 0,R.concat([y]))},getDecimalByteUnit:function(){for(var C=arguments.length,R=new Array(C),_=0;_<C;_++)R[_]=arguments[_];return(function(x){var M=h.decimal;return f(x._value,M.suffixes,M.scale).suffix}).apply(void 0,R.concat([y]))},formatOrDefault:w}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,i,s){var r=t("./en-US"),o=t("./validating"),a=t("./parsing"),l={},c=void 0,h={},u=null,d={};function f(p){c=p}function g(){return h[c]}l.languages=function(){return Object.assign({},h)},l.currentLanguage=function(){return c},l.currentCurrency=function(){return g().currency},l.currentAbbreviations=function(){return g().abbreviations},l.currentDelimiters=function(){return g().delimiters},l.currentOrdinal=function(){return g().ordinal},l.currentDefaults=function(){return Object.assign({},g().defaults,d)},l.currentOrdinalDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().ordinalFormat)},l.currentByteDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().byteFormat)},l.currentPercentageDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().percentageFormat)},l.currentCurrencyDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().currencyFormat)},l.currentTimeDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().timeFormat)},l.setDefaults=function(p){p=a.parseFormat(p),o.validateFormat(p)&&(d=p)},l.getZeroFormat=function(){return u},l.setZeroFormat=function(p){return u=typeof p=="string"?p:null},l.hasZeroFormat=function(){return u!==null},l.languageData=function(p){if(p){if(h[p])return h[p];throw new Error('Unknown tag "'.concat(p,'"'))}return g()},l.registerLanguage=function(p){var m=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(!o.validateLanguage(p))throw new Error("Invalid language data");h[p.languageTag]=p,m&&f(p.languageTag)},l.setLanguage=function(p){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:r.languageTag;if(!h[p]){var w=p.split("-")[0],y=Object.keys(h).find(function(C){return C.split("-")[0]===w});return h[y]?void f(y):void f(m)}f(p)},l.registerLanguage(r),c=r.languageTag,i.exports=l},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,i,s){i.exports=function(r){return{loadLanguagesInNode:function(o){return a=r,void o.forEach(function(l){var c=void 0;try{c=t("../languages/".concat(l))}catch{console.error('Unable to load "'.concat(l,'". No matching language file found.'))}c&&a.registerLanguage(c)});var a}}}},{}],6:[function(t,i,s){var r=t("bignumber.js");function o(a,l,c){var h=new r(a._value),u=l;return c.isNumbro(l)&&(u=l._value),u=new r(u),a._value=h.minus(u).toNumber(),a}i.exports=function(a){return{add:function(l,c){return u=c,d=a,f=new r((h=l)._value),g=u,d.isNumbro(u)&&(g=u._value),g=new r(g),h._value=f.plus(g).toNumber(),h;var h,u,d,f,g},subtract:function(l,c){return o(l,c,a)},multiply:function(l,c){return u=c,d=a,f=new r((h=l)._value),g=u,d.isNumbro(u)&&(g=u._value),g=new r(g),h._value=f.times(g).toNumber(),h;var h,u,d,f,g},divide:function(l,c){return u=c,d=a,f=new r((h=l)._value),g=u,d.isNumbro(u)&&(g=u._value),g=new r(g),h._value=f.dividedBy(g).toNumber(),h;var h,u,d,f,g},set:function(l,c){return h=l,d=u=c,a.isNumbro(u)&&(d=u._value),h._value=d,h;var h,u,d},difference:function(l,c){return h=c,o(d=(u=a)(l._value),h,u),Math.abs(d._value);var h,u,d}}}},{"bignumber.js":1}],7:[function(t,i,s){function r(m,w){for(var y=0;y<w.length;y++){var C=w[y];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(m,C.key,C)}}var o=t("./globalState"),a=t("./validating"),l=t("./loading")(p),c=t("./unformatting"),h=t("./formatting")(p),u=t("./manipulating")(p),d=t("./parsing"),f=function(){function m(C){(function(R,_){if(!(R instanceof _))throw new TypeError("Cannot call a class as a function")})(this,m),this._value=C}var w,y;return w=m,(y=[{key:"clone",value:function(){return p(this._value)}},{key:"format",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return h.format(this,C)}},{key:"formatCurrency",value:function(C){return typeof C=="string"&&(C=d.parseFormat(C)),(C=h.formatOrDefault(C,o.currentCurrencyDefaultFormat())).output="currency",h.format(this,C)}},{key:"formatTime",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return C.output="time",h.format(this,C)}},{key:"binaryByteUnits",value:function(){return h.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return h.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return h.getByteUnit(this)}},{key:"difference",value:function(C){return u.difference(this,C)}},{key:"add",value:function(C){return u.add(this,C)}},{key:"subtract",value:function(C){return u.subtract(this,C)}},{key:"multiply",value:function(C){return u.multiply(this,C)}},{key:"divide",value:function(C){return u.divide(this,C)}},{key:"set",value:function(C){return u.set(this,g(C))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}])&&r(w.prototype,y),m}();function g(m){var w=m;return p.isNumbro(m)?w=m._value:typeof m=="string"?w=p.unformat(m):isNaN(m)&&(w=NaN),w}function p(m){return new f(g(m))}p.version="2.1.2",p.isNumbro=function(m){return m instanceof f},p.language=o.currentLanguage,p.registerLanguage=o.registerLanguage,p.setLanguage=o.setLanguage,p.languages=o.languages,p.languageData=o.languageData,p.zeroFormat=o.setZeroFormat,p.defaultFormat=o.currentDefaults,p.setDefaults=o.setDefaults,p.defaultCurrencyFormat=o.currentCurrencyDefaultFormat,p.validate=a.validate,p.loadLanguagesInNode=l.loadLanguagesInNode,p.unformat=c.unformat,i.exports=p},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,i,s){i.exports={parseFormat:function(r){var o,a,l,c,h,u,d,f,g,p,m,w,y,C,R,_,x,M,I,A,O=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return typeof r!="string"?r:(a=O,r=(l=(o=r).match(/^{([^}]*)}/))?(a.prefix=l[1],o.slice(l[0].length)):o,h=O,function(D,j){if(D.indexOf("$")===-1){if(D.indexOf("%")===-1)return D.indexOf("bd")!==-1?(j.output="byte",j.base="general"):D.indexOf("b")!==-1?(j.output="byte",j.base="binary"):D.indexOf("d")!==-1?(j.output="byte",j.base="decimal"):D.indexOf(":")===-1?D.indexOf("o")!==-1&&(j.output="ordinal"):j.output="time";j.output="percent"}else j.output="currency"}(r=(u=(c=r).match(/{([^}]*)}$/))?(h.postfix=u[1],c.slice(0,-u[0].length)):c,O),d=O,(f=r.match(/[1-9]+[0-9]*/))&&(d.totalLength=+f[0]),g=O,(p=r.split(".")[0].match(/0+/))&&(g.characteristic=p[0].length),function(D,j){if(D.indexOf(".")!==-1){var Y=D.split(".")[0];j.optionalCharacteristic=Y.indexOf("0")===-1}}(r,O),m=O,r.indexOf("a")!==-1&&(m.average=!0),y=O,(w=r).indexOf("K")!==-1?y.forceAverage="thousand":w.indexOf("M")!==-1?y.forceAverage="million":w.indexOf("B")!==-1?y.forceAverage="billion":w.indexOf("T")!==-1&&(y.forceAverage="trillion"),function(D,j){var Y=D.split(".")[1];if(Y){var Z=Y.match(/0+/);Z&&(j.mantissa=Z[0].length)}}(r,O),R=O,(C=r).match(/\[\.]/)?R.optionalMantissa=!0:C.match(/\./)&&(R.optionalMantissa=!1),_=O,r.indexOf(",")!==-1&&(_.thousandSeparated=!0),x=O,r.indexOf(" ")!==-1&&(x.spaceSeparated=!0),I=O,(M=r).match(/^\+?\([^)]*\)$/)&&(I.negative="parenthesis"),M.match(/^\+?-/)&&(I.negative="sign"),A=O,r.match(/^\+/)&&(A.forceSign=!0),O)}}},{}],9:[function(t,i,s){var r=[{key:"ZiB",factor:Math.pow(1024,7)},{key:"ZB",factor:Math.pow(1e3,7)},{key:"YiB",factor:Math.pow(1024,8)},{key:"YB",factor:Math.pow(1e3,8)},{key:"TiB",factor:Math.pow(1024,4)},{key:"TB",factor:Math.pow(1e3,4)},{key:"PiB",factor:Math.pow(1024,5)},{key:"PB",factor:Math.pow(1e3,5)},{key:"MiB",factor:Math.pow(1024,2)},{key:"MB",factor:Math.pow(1e3,2)},{key:"KiB",factor:Math.pow(1024,1)},{key:"KB",factor:Math.pow(1e3,1)},{key:"GiB",factor:Math.pow(1024,3)},{key:"GB",factor:Math.pow(1e3,3)},{key:"EiB",factor:Math.pow(1024,6)},{key:"EB",factor:Math.pow(1e3,6)},{key:"B",factor:1}];function o(l){return l.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(l,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",u=3<arguments.length?arguments[3]:void 0,d=4<arguments.length?arguments[4]:void 0,f=5<arguments.length?arguments[5]:void 0,g=6<arguments.length?arguments[6]:void 0;if(l!=="")return l===d?0:function p(m,w){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",C=3<arguments.length?arguments[3]:void 0,R=4<arguments.length?arguments[4]:void 0,_=5<arguments.length?arguments[5]:void 0,x=6<arguments.length?arguments[6]:void 0;if(!isNaN(+m))return+m;var M="",I=m.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(I!==m)return-1*p(I,w,y,C,R,_,x);for(var A=0;A<r.length;A++){var O=r[A];if((M=m.replace(O.key,""))!==m)return p(M,w,y,C,R,_,x)*O.factor}if((M=m.replace("%",""))!==m)return p(M,w,y,C,R,_,x)/100;var D=parseFloat(m);if(!isNaN(D)){var j=C(D);if(j&&j!=="."&&(M=m.replace(new RegExp("".concat(o(j),"$")),""))!==m)return p(M,w,y,C,R,_,x);var Y={};Object.keys(_).forEach(function(pe){Y[_[pe]]=pe});for(var Z=Object.keys(Y).sort().reverse(),$=Z.length,B=0;B<$;B++){var ie=Z[B],se=Y[ie];if((M=m.replace(ie,""))!==m){var te=void 0;switch(se){case"thousand":te=Math.pow(10,3);break;case"million":te=Math.pow(10,6);break;case"billion":te=Math.pow(10,9);break;case"trillion":te=Math.pow(10,12)}return p(M,w,y,C,R,_,x)*te}}}}(function(p,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",y=p.replace(w,"");return y=(y=y.replace(new RegExp("([0-9])".concat(o(m.thousands),"([0-9])"),"g"),"$1$2")).replace(m.decimal,".")}(l,c,h),c,h,u,d,f,g)}i.exports={unformat:function(l,c){var h,u,d,f=t("./globalState"),g=f.currentDelimiters(),p=f.currentCurrency().symbol,m=f.currentOrdinal(),w=f.getZeroFormat(),y=f.currentAbbreviations(),C=void 0;if(typeof l=="string")C=function(R,_){if(!R.indexOf(":")||_.thousands===":")return!1;var x=R.split(":");if(x.length!==3)return!1;var M=+x[0],I=+x[1],A=+x[2];return!isNaN(M)&&!isNaN(I)&&!isNaN(A)}(l,g)?(h=l.split(":"),u=+h[0],d=+h[1],+h[2]+60*d+3600*u):a(l,g,p,m,w,y,c);else{if(typeof l!="number")return;C=l}if(C!==void 0)return C}}},{"./globalState":4}],10:[function(t,i,s){function r(g){return function(p){if(Array.isArray(p)){for(var m=0,w=new Array(p.length);m<p.length;m++)w[m]=p[m];return w}}(g)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}var a=t("./unformatting"),l=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,c={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(g,p){return p.output==="byte"},message:"`base` must be provided only when the output is `byte`",mandatory:function(g){return g.output==="byte"}},characteristic:{type:"number",restriction:function(g){return 0<=g},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(g){return 0<=g},message:"value must be positive"},{restriction:function(g,p){return!p.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(g){return 0<=g},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(g,p){return p.output==="percent"},message:"`prefixSymbol` can be provided only when the output is `percent`"}},h={languageTag:{type:"string",mandatory:!0,restriction:function(g){return g.match(l)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function u(g){return!!a.unformat(g)}function d(g,p,m){var w=3<arguments.length&&arguments[3]!==void 0&&arguments[3],y=Object.keys(g).map(function(C){if(!p[C])return console.error("".concat(m," Invalid key: ").concat(C)),!1;var R=g[C],_=p[C];if(typeof _=="string"&&(_={type:_}),_.type==="format"){if(!d(R,c,"[Validate ".concat(C,"]"),!0))return!1}else if(o(R)!==_.type)return console.error("".concat(m," ").concat(C,' type mismatched: "').concat(_.type,'" expected, "').concat(o(R),'" provided')),!1;if(_.restrictions&&_.restrictions.length)for(var x=_.restrictions.length,M=0;M<x;M++){var I=_.restrictions[M],A=I.restriction,O=I.message;if(!A(R,g))return console.error("".concat(m," ").concat(C," invalid value: ").concat(O)),!1}return _.restriction&&!_.restriction(R,g)?(console.error("".concat(m," ").concat(C," invalid value: ").concat(_.message)),!1):_.validValues&&_.validValues.indexOf(R)===-1?(console.error("".concat(m," ").concat(C," invalid value: must be among ").concat(JSON.stringify(_.validValues),', "').concat(R,'" provided')),!1):!(_.children&&!d(R,_.children,"[Validate ".concat(C,"]")))});return w||y.push.apply(y,r(Object.keys(p).map(function(C){var R=p[C];if(typeof R=="string"&&(R={type:R}),R.mandatory){var _=R.mandatory;if(typeof _=="function"&&(_=_(g)),_&&g[C]===void 0)return console.error("".concat(m,' Missing mandatory key "').concat(C,'"')),!1}return!0}))),y.reduce(function(C,R){return C&&R},!0)}function f(g){return d(g,c,"[Validate format]")}i.exports={validate:function(g,p){var m=u(g),w=f(p);return m&&w},validateFormat:f,validateInput:u,validateLanguage:function(g){return d(g,h,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)})})(u4);var g1e=u4.exports;const rd=xse(g1e),p1e="numeric";function d4(n,e){if(Xi(n)){const t=e.numericFormat,i=t&&t.culture||"-",s=t&&t.pattern;if(typeof i<"u"&&!rd.languages()[i]){const r=i.replace("-",""),o=rd.allLanguages?rd.allLanguages[i]:rd[r];o&&rd.registerLanguage(o)}rd.setLanguage(i),n=rd(n).format(s||"0")}return n}function TO(n,e,t,i,s,r,o){let a=r;if(Xi(a)){const l=o.className||"",c=l.length?l.split(" "):[];a=d4(a,o),c.indexOf("htLeft")<0&&c.indexOf("htCenter")<0&&c.indexOf("htRight")<0&&c.indexOf("htJustify")<0&&c.push("htRight"),c.indexOf("htNumeric")<0&&c.push("htNumeric"),o.className=c.join(" "),e.dir="ltr"}zl(n,e,t,i,s,a,o)}TO.RENDERER_TYPE=p1e;const m1e="password";function MO(n,e,t,i,s,r,o){zl.apply(this,[n,e,t,i,s,r,o]);const a=o.hashLength||e.innerHTML.length,l=o.hashSymbol||"*";let c="";Oe(a-1,()=>{c+=l}),$u(e,c)}MO.RENDERER_TYPE=m1e;const b1e="select";function AO(n,e,t,i,s,r,o){zl.apply(this,[n,e,t,i,s,r,o])}AO.RENDERER_TYPE=b1e;const w1e="time";function PO(n,e,t,i,s,r,o){zl.apply(this,[n,e,t,i,s,r,o]),e.dir="ltr"}PO.RENDERER_TYPE=w1e;function v1e(){tr(vg),tr(Kb),tr(RO),tr(_O),tr(EO),tr(SO),tr(TO),tr(MO),tr(AO),tr(zl),tr(PO)}const y1e="autocomplete";function FS(n,e){let t=n;if(t==null&&(t=""),this.allowEmpty&&t===""){e(!0);return}this.strict&&this.source?typeof this.source=="function"?this.source(t,f4(t,e)):f4(t,e)(this.source):e(!0)}FS.VALIDATOR_TYPE=y1e;function f4(n,e){const t=n;return function(i){let s=!1;for(let r=0,o=i.length;r<o;r++)if(t===i[r]){s=!0;break}e(s)}}function g4(n){const e=new Date(n);return isNaN(new Date(`${n}T00:00`).getDate())?e:new Date(e.getTime()+e.getTimezoneOffset()*6e4)}const C1e=Object.freeze(Object.defineProperty({__proto__:null,getNormalizedDate:g4},Symbol.toStringTag,{value:"Module"})),S1e="date";function IO(n,e){const t=V6(e4,this.instance);let i=n,s=!0;i==null&&(i="");let r=le(i,this.dateFormat||t.defaultDateFormat,!0).isValid(),o=le(new Date(i)).isValid()||r;if(this.allowEmpty&&i===""&&(o=!0,r=!0),o||(s=!1),!o&&r&&(s=!0),o&&!r)if(this.correctFormat===!0){const a=_1e(i,this.dateFormat);this.instance.setDataAtCell(this.visualRow,this.visualCol,a,"dateValidator"),s=!0}else s=!1;e(s)}IO.VALIDATOR_TYPE=S1e;function _1e(n,e){const t=le(g4(n)),i=le(n,e),s=n.search(/[A-z]/g)>-1;let r;return t.isValid()&&t.format("x")===i.format("x")||!i.isValid()||s?r=t:r=i,r.format(e)}const R1e="dropdown";function OO(n,e){FS.apply(this,[n,e])}OO.VALIDATOR_TYPE=R1e;const x1e="numeric";function kO(n,e){let t=n;t==null&&(t=""),this.allowEmpty&&t===""?e(!0):e(t===""?!1:Xi(n))}kO.VALIDATOR_TYPE=x1e;const E1e=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"],T1e="time";function HO(n,e){const t=this.timeFormat||"h:mm:ss a";let i=!0,s=n;s===null&&(s=""),s=/^\d{3,}$/.test(s)?parseInt(s,10):s;const r=/^\d{1,2}$/.test(s);r&&(s+=":00");const o=le(s,E1e,!0).isValid()?le(s):le(s,t);let a=o.isValid(),l=le(s,t,!0).isValid()&&!r;if(this.allowEmpty&&s===""&&(a=!0,l=!0),a||(i=!1),!a&&l&&(i=!0),a&&!l)if(this.correctFormat===!0){const c=o.format(t);this.instance.setDataAtCell(this.visualRow,this.visualCol,c,"timeValidator"),i=!0}else i=!1;e(i)}HO.VALIDATOR_TYPE=T1e;function M1e(){ju(FS),ju(OO),ju(IO),ju(kO),ju(HO)}const A1e={CELL_TYPE:"autocomplete",editor:fO,renderer:vg,validator:FS},P1e={CELL_TYPE:"checkbox",editor:q8,renderer:RO},I1e="date";function p4(n,e,t,i,s,r,o){vg.apply(this,[n,e,t,i,s,r,o])}p4.RENDERER_TYPE=I1e;const O1e={CELL_TYPE:"date",editor:n4,renderer:p4,validator:IO},k1e={CELL_TYPE:"dropdown",editor:yO,renderer:_O,validator:OO},H1e={CELL_TYPE:"handsontable",editor:uO,renderer:EO},D1e={CELL_TYPE:"numeric",editor:i4,renderer:TO,validator:kO,dataType:"number"},N1e={CELL_TYPE:"password",editor:s4,renderer:MO,copyable:!1},L1e={CELL_TYPE:"select",editor:o4,renderer:AO},$1e={CELL_TYPE:"time",editor:a4,renderer:PO,validator:HO};function F1e(){Fr(A1e),Fr(P1e),Fr(O1e),Fr(k1e),Fr(H1e),Fr(D1e),Fr(N1e),Fr(L1e),Fr(Y8),Fr($1e)}function B1e(n,e){m4(n,e),e.add(n)}function V1e(n,e,t){m4(n,e),e.set(n,t)}function m4(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Sg(n,e,t){return(e=W1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function W1e(n){var e=j1e(n,"string");return typeof e=="symbol"?e:e+""}function j1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _g(n,e){return n.get(b4(n,e))}function b4(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const w4=new Map([["plugin",ive],["cell-type",_8],["editor",B6],["renderer",t5],["validator",n5]]),z1e="base",DO=[];let xa=null;var od=new WeakMap,v4=new WeakSet;class Pt{static get PLUGIN_KEY(){return z1e}static get SETTING_KEYS(){return[this.PLUGIN_KEY]}constructor(e){B1e(this,v4),Sg(this,"eventManager",new kr(this)),Sg(this,"pluginName",null),Sg(this,"pluginsInitializedCallbacks",[]),Sg(this,"isPluginsReady",!1),Sg(this,"enabled",!1),Sg(this,"initialized",!1),V1e(this,od,{}),ma(this,"hot",e,{writable:!1}),xa=null,this.hot.addHook("afterPluginsInitialized",()=>this.onAfterPluginsInitialized()),this.hot.addHook("afterUpdateSettings",t=>this.onUpdateSettings(t)),this.hot.addHook("beforeInit",()=>this.init())}init(){this.pluginName=this.hot.getPluginName(this);const e=this.constructor.PLUGIN_DEPS,t=Array.isArray(e)?e:[];if(t.length>0){const s=[];if(t.forEach(r=>{const[o,a]=r.split(":");if(!w4.has(o))throw new Error(`Unknown plugin dependency type "${o}" was found.`);w4.get(o)(a)||s.push(` - ${a} (${o})`)}),s.length>0){const r=[`The ${this.pluginName} plugin requires the following modules:
`,`${s.join(`
`)}
`].join("");DO.push(r)}}if(xa||(xa=UA()),xa.indexOf("UndoRedo")>=0&&xa.splice(xa.indexOf("UndoRedo"),1),xa.indexOf(this.pluginName)>=0&&xa.splice(xa.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",()=>{this.isEnabled&&this.isEnabled()&&this.enablePlugin()}),xa.length===0){if(DO.length>0){const s=[`${DO.join(`
`)}
`,"You have to import and register them manually."].join("");throw new Error(s)}this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}enablePlugin(){this.enabled=!0}disablePlugin(){var e;(e=this.eventManager)===null||e===void 0||e.clear(),this.clearHooks(),this.enabled=!1}addHook(e,t,i){_g(od,this)[e]=_g(od,this)[e]||[];const s=_g(od,this)[e];this.hot.addHook(e,t,i),s.push(t),_g(od,this)[e]=s}removeHooks(e){F(_g(od,this)[e]||[],t=>{this.hot.removeHook(e,t)})}clearHooks(){const e=_g(od,this);et(e,(t,i)=>this.removeHooks(i)),e.length=0}callOnPluginsReady(e){this.isPluginsReady?e():this.pluginsInitializedCallbacks.push(e)}onAfterPluginsInitialized(){F(this.pluginsInitializedCallbacks,e=>e()),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}onUpdateSettings(e){const t=b4(v4,this,U1e).call(this,e);this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&t&&this.updatePlugin(e))}updatePlugin(){}destroy(){var e;(e=this.eventManager)===null||e===void 0||e.destroy(),this.clearHooks(),et(this,(t,i)=>{i!=="hot"&&(this[i]=null)}),delete this.t,delete this.hot}}function U1e(n){if(!n)return!1;const e=this.constructor.SETTING_KEYS;if(typeof e=="boolean")return e;for(let t=0;t<e.length;t++)if(n[e[t]]!==void 0)return!0;return!1}function ad(n,e,t){return(e=Y1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Y1e(n){var e=G1e(n,"string");return typeof e=="symbol"?e:e+""}function G1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let NO=class{constructor(e){ad(this,"hot",null),ad(this,"container",null),ad(this,"injected",!1),ad(this,"rows",[]),ad(this,"columns",[]),ad(this,"samples",null),ad(this,"settings",{useHeaders:!0}),this.hot=e}addRow(e,t){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));const i={row:e};this.rows.push(i),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol(e)),this.table.tr.appendChild(this.createRow(e)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}addColumnHeadersRow(e){const t=this.hot.getColHeader(0);if(t!=null){const i={row:-1};this.rows.push(i),this.container=this.createContainer(this.hot.rootElement.className),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}}addColumn(e,t){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));const i={col:e};this.columns.push(i),this.samples=t,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(e)!==null&&this.hot.view.appendColHeader(e,this.table.th),this.table.tBody.appendChild(this.createCol(e)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}getHeights(e){this.injected||this.injectTable(),F(this.rows,t=>{const{height:i}=t.table.getBoundingClientRect();e(t.row,Math.ceil(i)-1)})}getWidths(e){this.injected||this.injectTable(),F(this.columns,t=>{const{width:i}=t.table.getBoundingClientRect();e(t.col,Math.ceil(i))})}setSettings(e){this.settings=e}setSetting(e,t){this.settings||(this.settings={}),this.settings[e]=t}getSettings(){return this.settings}getSetting(e){return this.settings?this.settings[e]:null}createColGroupsCol(e){const t=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&t.appendChild(this.createColElement(-1,-1)),this.samples.forEach(i=>{F(i.strings,s=>{t.appendChild(this.createColElement(s.col,e))})}),t}createRow(e){const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),s=t.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(e,s),i.appendChild(s)),this.samples.forEach(r=>{F(r.strings,o=>{const a=o.col,l=this.hot.getCellMeta(e,a),c=this.hot.getCellRenderer(l),h=t.createElement("td");h.setAttribute("ghost-table",1),c(this.hot,h,e,a,this.hot.colToProp(a),o.value,l),i.appendChild(h)})}),i}appendColumnHeadersRow(){const{rootDocument:e}=this.hot,t=e.createDocumentFragment(),i=[];if(this.hot.hasRowHeaders()){const s=e.createElement("th");i.push([-1,s]),t.appendChild(s)}this.samples.forEach(s=>{F(s.strings,r=>{const o=r.col,a=e.createElement("th");i.push([o,a]),t.appendChild(a)})}),this.table.tHead.appendChild(t),F(i,s=>{const[r,o]=s;this.hot.view.appendColHeader(r,o)})}createCol(e){const{rootDocument:t}=this.hot,i=t.createDocumentFragment();return this.samples.forEach(s=>{F(s.strings,r=>{const o=r.row,a=this.hot.getCellMeta(o,e),l=this.hot.getCellRenderer(a),c=t.createElement("td"),h=t.createElement("tr");c.setAttribute("ghost-table",1),l(this.hot,c,o,e,this.hot.colToProp(e),r.value,a),h.appendChild(c),i.appendChild(h)})}),i}clean(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}injectTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((e||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}removeTable(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}createColElement(e,t){const i=this.hot.rootDocument.createElement("col");let s=0;t>=0&&e>=0&&(s=this.hot.getCellMeta(t,e).colspan);let r=this.hot.getColWidth(e);if(s>1)for(let o=e+1;o<e+s;o++)r+=this.hot.getColWidth(o);return i.style.width=`${r}px`,i}createTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),s=t.createElement("table"),r=t.createElement("thead"),o=t.createElement("tbody"),a=t.createElement("colgroup"),l=t.createElement("tr"),c=t.createElement("th");return this.isVertical()&&s.appendChild(a),this.isHorizontal()&&(l.appendChild(c),r.appendChild(l),s.style.tableLayout="auto",s.style.width="auto"),s.appendChild(r),this.isVertical()&&o.appendChild(l),s.appendChild(o),ae(s,e),i.appendChild(s),{fragment:i,table:s,tHead:r,tBody:o,colGroup:a,tr:l,th:c}}createContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),s=t.createElement("div"),r=`htGhostTable htAutoSize ${e.trim()}`;return ae(s,r),i.appendChild(s),{fragment:i,container:s}}isVertical(){return!!(this.rows.length&&!this.columns.length)}isHorizontal(){return!!(this.columns.length&&!this.rows.length)}};function BS(n,e,t){return(e=K1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K1e(n){var e=q1e(n,"string");return typeof e=="symbol"?e:e+""}function q1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class VS{static get SAMPLE_COUNT(){return 3}constructor(e){BS(this,"samples",null),BS(this,"dataFactory",null),BS(this,"customSampleCount",null),BS(this,"allowDuplicates",!1),this.dataFactory=e}getSampleCount(){return this.customSampleCount?this.customSampleCount:VS.SAMPLE_COUNT}setSampleCount(e){this.customSampleCount=e}setAllowDuplicates(e){this.allowDuplicates=e}generateRowSamples(e,t){return this.generateSamples("row",t,e)}generateColumnSamples(e,t){return this.generateSamples("col",t,e)}generateSamples(e,t,i){const s=new Map,{from:r,to:o}=typeof i=="number"?{from:i,to:i}:i;return Oe(r,o,a=>{const l=this.generateSample(e,t,a);s.set(a,l)}),s}generateSample(e,t,i){if(e!=="row"&&e!=="col")throw new Error("Unsupported sample type");const s=new Map,r=e==="row"?"col":"row",o=[];return Oe(t.from,t.to,a=>{const l=e==="row"?this.dataFactory(i,a):this.dataFactory(a,i);if(l===!1)return;const{value:c,bundleSeed:h}=l,u=typeof h=="string"&&h.length>0;let d;u?d=h:Je(c)?d=`${Object.keys(c).length}`:Array.isArray(c)?d=`${c.length}`:d=`${Mn(c).length}`,s.has(d)||s.set(d,{needed:this.getSampleCount(),strings:[]});const f=s.get(d);f.needed&&(!(o.indexOf(c)>-1)||this.allowDuplicates||u)&&(f.strings.push({value:c,[r]:a}),o.push(c),f.needed-=1)}),s}}function X1e(n,e){C4(n,e),e.add(n)}function y4(n,e,t){C4(n,e),e.set(n,t)}function C4(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qb(n,e,t){return(e=Q1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Q1e(n){var e=Z1e(n,"string");return typeof e=="symbol"?e:e+""}function Z1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ld(n,e){return n.get(Ea(n,e))}function LO(n,e,t){return n.set(Ea(n,e),t),t}function Ea(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}xe.getSingleton().register("modifyAutoColumnSizeSeed");const Xb="autoColumnSize",J1e=10,exe="autoColumnSize";var Rg=new WeakMap,xg=new WeakMap,Yl=new WeakSet;class Qb extends Pt{static get PLUGIN_KEY(){return Xb}static get PLUGIN_PRIORITY(){return J1e}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 50}constructor(e){super(e),X1e(this,Yl),qb(this,"ghostTable",new NO(this.hot)),qb(this,"samplesGenerator",new VS((t,i)=>{const s=this.hot.toPhysicalRow(t),r=this.hot.toPhysicalColumn(i);if(this.hot.rowIndexMapper.isHidden(s)||this.hot.columnIndexMapper.isHidden(r))return!1;const o=this.hot.getCellMeta(t,i);let a="";o.spanned||(a=this.hot.getDataAtCell(t,i));let l="";return this.hot.hasHook("modifyAutoColumnSizeSeed")&&(l=this.hot.runHooks("modifyAutoColumnSizeSeed",l,o,a)),{value:a,bundleSeed:l}})),qb(this,"inProgress",!1),qb(this,"measuredColumns",0),qb(this,"columnWidthsMap",new nh),y4(this,Rg,[]),y4(this,xg,[]),this.hot.columnIndexMapper.registerMap(exe,this.columnWidthsMap),this.addHook("beforeColumnResize",(t,i,s)=>Ea(Yl,this,S4).call(this,t,i,s))}isEnabled(){return this.hot.getSettings()[Xb]!==!1&&!this.hot.getSettings().colWidths}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[Xb];t&&t.useHeaders!==null&&t.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",t.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ea(Yl,e,ixe).call(e,...s)}),this.addHook("beforeChangeRender",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ea(Yl,e,sxe).call(e,...s)}),this.addHook("afterFormulasValuesUpdate",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ea(Yl,e,oxe).call(e,...s)}),this.addHook("beforeRender",()=>Ea(Yl,this,nxe).call(this)),this.addHook("modifyColWidth",(i,s)=>this.getColumnWidth(s,i)),this.addHook("init",()=>Ea(Yl,this,rxe).call(this)),super.enablePlugin()}updatePlugin(){LO(xg,this,this.findColumnsWhereHeaderWasChanged()),super.updatePlugin()}disablePlugin(){super.disablePlugin(),this.addHook("beforeColumnResize",(e,t,i)=>Ea(Yl,this,S4).call(this,e,t,i))}calculateVisibleColumnsWidth(){if(!this.hot.countRows())return;const e=this.getFirstVisibleColumn(),t=this.getLastVisibleColumn();if(e===-1||t===-1)return;const i=this.hot.renderCall;this.calculateColumnsWidth({from:e,to:t},void 0,i)}calculateColumnsWidth(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=typeof e=="number"?{from:e,to:e}:e,r=typeof t=="number"?{from:t,to:t}:t;Oe(s.from,s.to,o=>{let a=this.hot.toPhysicalColumn(o);a===null&&(a=o),(i||this.columnWidthsMap.getValueAtIndex(a)===null&&!this.hot._getColWidthFromSettings(a))&&this.samplesGenerator.generateColumnSamples(o,r).forEach((c,h)=>this.ghostTable.addColumn(h,c))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((o,a)=>{const l=this.hot.toPhysicalColumn(o);this.columnWidthsMap.setValueAtIndex(l,a)})},!0),this.measuredColumns=s.to+1,this.ghostTable.clean())}calculateAllColumnsWidth(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0;const s=this.hot.countCols()-1;let r=null;this.inProgress=!0;const o=()=>{if(!this.hot){fb(r),this.inProgress=!1;return}this.calculateColumnsWidth({from:i,to:Math.min(i+Qb.CALCULATION_STEP,s)},e,t),i=i+Qb.CALCULATION_STEP+1,i<s?r=vC(o):(fb(r),this.inProgress=!1,this.hot.view.adjustElementsSize())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateColumnsWidth({from:0,to:a},e,t),i=a+1),i<s?o():this.inProgress=!1}setSamplingOptions(){const e=this.hot.getSettings()[Xb],t=e&&_n(e,"samplingRatio")?e.samplingRatio:void 0,i=e&&_n(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllColumnsWidth(){this.hot.view.isVisible()&&this.calculateAllColumnsWidth({from:0,to:this.hot.countRows()-1},!0)}getSyncCalculationLimit(){const e=this.hot.getSettings()[Xb];let t=Qb.SYNC_CALCULATION_LIMIT;const i=this.hot.countCols()-1;return Je(e)&&(t=e.syncLimit,qM(t)?t=VA(i,t):t>>=0),Math.min(t,i)}getColumnWidth(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=t;return s===void 0&&(s=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),i&&typeof s=="number"&&(s=Math.max(s,kC))),s}getFirstVisibleColumn(){var e;return(e=this.hot.view.getFirstRenderedVisibleColumn())!==null&&e!==void 0?e:-1}getLastVisibleColumn(){var e;return(e=this.hot.view.getLastRenderedVisibleColumn())!==null&&e!==void 0?e:-1}findColumnsWhereHeaderWasChanged(){return this.hot.getColHeader().reduce((i,s,r)=>{const o=ld(Rg,this).length;return(o-1<r||ld(Rg,this)[r]!==s)&&i.push(this.hot.toVisualColumn(r)),o-1<r?ld(Rg,this).push(s):ld(Rg,this)[r]=s,i},[])}clearCache(e){Array.isArray(e)?this.hot.batchExecution(()=>{e.forEach(t=>{this.columnWidthsMap.setValueAtIndex(t,null)})},!0):this.columnWidthsMap.clear()}isNeedRecalculate(){return!!this.columnWidthsMap.getValues().slice(0,this.measuredColumns).filter(e=>e===null).length}destroy(){this.ghostTable.clean(),super.destroy()}}function txe(n){const e={from:0,to:this.hot.countRows()-1};n.forEach(t=>{const i=this.hot.toPhysicalColumn(t);i!==null&&(this.hot._getColWidthFromSettings(i)||this.samplesGenerator.generateColumnSamples(t,e).forEach((r,o)=>this.ghostTable.addColumn(o,r)))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((t,i)=>{const s=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(s,i)})},!0),this.ghostTable.clean())}function nxe(){this.calculateVisibleColumnsWidth(),this.inProgress||(Ea(Yl,this,txe).call(this,ld(xg,this)),LO(xg,this,[]))}function ixe(n,e){e||this.recalculateAllColumnsWidth()}function sxe(n){const e=n.reduce((t,i)=>{let[,s]=i;const r=this.hot.propToCol(s);return Number.isInteger(r)&&t.indexOf(r)===-1&&t.push(r),t},[]);ld(xg,this).push(...e)}function S4(n,e,t){let i=n;return t&&(this.calculateColumnsWidth(e,void 0,!0),i=this.getColumnWidth(e,void 0,!1)),i}function rxe(){LO(Rg,this,this.hot.getColHeader()),this.recalculateAllColumnsWidth()}function oxe(n){const e=n.reduce((t,i)=>{var s;const r=(s=i.address)===null||s===void 0?void 0:s.col;if(Number.isInteger(r)){const o=this.hot.toVisualColumn(r);t.indexOf(o)===-1&&t.push(o)}return t},[]);ld(xg,this).push(...e)}const cd={horizontal:"horizontal",vertical:"vertical"};function axe(n,e,t){let i,s,r;return e[0]===n[0]&&e[1]<n[1]?(r="left",i=t(e[0],e[1]),s=t(e[2],n[1]-1)):e[2]===n[2]&&e[0]===n[0]&&e[3]>n[3]?(r="right",i=t(e[0],n[3]+1),s=t(e[2],e[3])):e[0]<n[0]&&e[1]===n[1]?(r="up",i=t(e[0],e[1]),s=t(n[0]-1,e[3])):e[2]>n[2]&&e[1]===n[1]&&(r="down",i=t(n[2]+1,e[1]),s=t(e[2],e[3])),i&&i.normalize(),s&&s.normalize(),{directionOfDrag:r,startOfDragCoords:i,endOfDragCoords:s}}function lxe(n){const e={};return n===!0?(e.directions=Object.keys(cd),e.autoInsertRow=!0):Je(n)?(Me(n.autoInsertRow)?n.direction===cd.horizontal?e.autoInsertRow=!1:e.autoInsertRow=n.autoInsertRow:e.autoInsertRow=!1,Me(n.direction)?e.directions=[n.direction]:e.directions=Object.keys(cd)):typeof n=="string"?(e.directions=[n],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e}function cxe(n,e){hxe(n,e),e.add(n)}function hxe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Eg(n,e,t){return(e=uxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uxe(n){var e=dxe(n,"string");return typeof e=="symbol"?e:e+""}function dxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Zb(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}xe.getSingleton().register("modifyAutofillRange"),xe.getSingleton().register("beforeAutofill"),xe.getSingleton().register("afterAutofill");const _4="autofill",fxe=20,gxe=["fillHandle"],pxe="insert_row_below",mxe=200;var Tg=new WeakSet;class bxe extends Pt{constructor(){super(...arguments),cxe(this,Tg),Eg(this,"addingStarted",!1),Eg(this,"mouseDownOnCellCorner",!1),Eg(this,"mouseDragOutside",!1),Eg(this,"handleDraggedCells",0),Eg(this,"directions",[]),Eg(this,"autoInsertRow",!1)}static get PLUGIN_KEY(){return _4}static get PLUGIN_PRIORITY(){return fxe}static get SETTING_KEYS(){return[_4,...gxe]}isEnabled(){return this.hot.getSettings().fillHandle}enablePlugin(){this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",e=>Zb(Tg,this,vxe).call(this,e)),this.addHook("afterOnCellCornerDblClick",e=>Zb(Tg,this,wxe).call(this,e)),this.addHook("beforeOnCellMouseOver",(e,t)=>Zb(Tg,this,yxe).call(this,t)),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.clearMappedSettings(),super.disablePlugin()}getSelectionData(){const e=this.hot.getSelectedRangeLast(),{row:t,col:i}=e.getTopStartCorner(),{row:s,col:r}=e.getBottomEndCorner(),o=this.hot.runHooks("modifyCopyableRange",[{startRow:t,startCol:i,endRow:s,endCol:r}]),a=[],l=[],c=[];return F(o,h=>{for(let u=h.startRow;u<=h.endRow;u+=1)a.indexOf(u)===-1&&a.push(u);for(let u=h.startCol;u<=h.endCol;u+=1)l.indexOf(u)===-1&&l.push(u)}),F(a,h=>{const u=[];F(l,d=>{u.push(this.hot.getCopyableData(h,d))}),c.push(u)}),c}fillIn(){if(this.hot.selection.highlight.getFill().isEmpty())return!1;const[e,t,i,s]=this.hot.selection.highlight.getFill().getVisualCorners(),r=this.hot.getSelectedRangeLast(),o=r.getTopStartCorner(),a=r.getBottomEndCorner();this.resetSelectionOfDraggedArea();const l=[o.row,o.col,a.row,a.col],c=this.hot.runHooks("modifyAutofillRange",[Math.min(o.row,e),Math.min(o.col,t),Math.max(a.row,i),Math.max(a.col,s)],l),{directionOfDrag:h,startOfDragCoords:u,endOfDragCoords:d}=axe(l,c,(f,g)=>this.hot._createCellCoords(f,g));if(u&&u.row>-1&&u.col>-1){const f=this.getSelectionData(),g=r.clone(),p=this.hot._createCellRange(u,u,d),m=this.hot.runHooks("beforeAutofill",f,g,p,h);if(m===!1)return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;let w=m;const y=m;if(["up","left"].indexOf(h)>-1&&!(y.length===1&&y[0].length===0))if(w=[],h==="up"){const C=d.row-u.row+1,R=C%y.length;for(let _=0;_<C;_++)w.push(y[(_+(y.length-R))%y.length])}else{const C=d.col-u.col+1,R=C%y[0].length;for(let _=0;_<y.length;_++){w.push([]);for(let x=0;x<C;x++)w[_].push(y[_][(x+(y[_].length-R))%y[_].length])}}this.hot.populateFromArray(u.row,u.col,w,d.row,d.col,`${this.pluginName}.fill`,null),this.setSelection(c),this.hot.runHooks("afterAutofill",w,g,p,h),this.hot.render()}else this.hot.view.render();return!0}reduceSelectionAreaIfNeeded(e){return e.row<0&&(e.row=0),e.col<0&&(e.col=0),e}getCoordsOfDragAndDropBorders(e){const t=this.hot.getSelectedRangeLast(),i=t.getBottomEndCorner();let s=e;if(this.directions.includes(cd.vertical)&&this.directions.includes(cd.horizontal)){const r=t.getTopStartCorner();(i.col<=e.col||r.col>=e.col)&&(s=this.hot._createCellCoords(i.row,e.col)),(i.row<e.row||r.row>e.row)&&(s=this.hot._createCellCoords(e.row,i.col))}else if(this.directions.includes(cd.vertical))s=this.hot._createCellCoords(e.row,i.col);else if(this.directions.includes(cd.horizontal))s=this.hot._createCellCoords(i.row,e.col);else return;return this.reduceSelectionAreaIfNeeded(s)}showBorder(e){const t=this.getCoordsOfDragAndDropBorders(e);t&&this.redrawBorders(t)}addRow(){this.hot._registerTimeout(()=>{this.hot.alter(pxe,void 0,1,`${this.pluginName}.fill`),this.addingStarted=!1},mxe)}addNewRowIfNeeded(){if(!this.hot.selection.highlight.getFill().isEmpty()&&this.addingStarted===!1&&this.autoInsertRow){const e=this.hot.getSelectedLast(),t=this.hot.selection.highlight.getFill().getVisualCorners(),i=this.hot.countRows();e[2]<i-1&&t[2]===i-1&&(this.addingStarted=!0,this.addRow())}}getIndexOfLastAdjacentFilledInRow(e){const t=this.hot.getData(),i=this.hot.countRows();let s;for(let r=e[2]+1;r<i;r++){for(let l=e[1];l<=e[3];l++){const c=t[r][l];if(!An(c))return-1}const o=t[r][e[1]-1],a=t[r][e[3]+1];(!An(o)||!An(a))&&(s=r)}return s}addSelectionFromStartAreaToSpecificRowIndex(e,t){this.hot.selection.highlight.getFill().clear().add(this.hot._createCellCoords(e[0],e[1])).add(this.hot._createCellCoords(t,e[3])).commit()}setSelection(e){this.hot.selectCell(...ct(e,t=>Math.max(t,0)),!1,!1)}selectAdjacent(){const e=this.hot.getSelectedLast(),t=this.getIndexOfLastAdjacentFilledInRow(e);return t===-1||t===void 0?!1:(this.addSelectionFromStartAreaToSpecificRowIndex(e,t),!0)}resetSelectionOfDraggedArea(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}redrawBorders(e){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(e).commit(),this.hot.view.render()}getIfMouseWasDraggedOutside(e){const{documentElement:t}=this.hot.rootDocument,i=hi(this.hot.table).top-(this.hot.rootWindow.pageYOffset||t.scrollTop)+jn(this.hot.table),s=hi(this.hot.table).left-(this.hot.rootWindow.pageXOffset||t.scrollLeft)+sn(this.hot.table);return e.clientY>i&&e.clientX<=s}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mouseup",()=>Zb(Tg,this,Cxe).call(this)),this.eventManager.addEventListener(e,"mousemove",t=>Zb(Tg,this,Sxe).call(this,t))}clearMappedSettings(){this.directions.length=0,this.autoInsertRow=!1}mapSettings(){const e=lxe(this.hot.getSettings().fillHandle);this.directions=e.directions,this.autoInsertRow=e.autoInsertRow}destroy(){super.destroy()}}function wxe(){this.selectAdjacent()&&this.fillIn()}function vxe(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}function yxe(n){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(n),this.addNewRowIfNeeded())}function Cxe(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}function Sxe(n){const e=this.getIfMouseWasDraggedOutside(n);this.addingStarted===!1&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}function _xe(n,e){R4(n,e),e.add(n)}function Rxe(n,e,t){R4(n,e),e.set(n,t)}function R4(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Mg(n,e,t){return(e=xxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xxe(n){var e=Exe(n,"string");return typeof e=="symbol"?e:e+""}function Exe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Txe(n,e,t){return n.set(Ta(n,e),t),t}function $O(n,e){return n.get(Ta(n,e))}function Ta(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const WS="autoRowSize",Mxe=40,Axe="autoRowSize";var Jb=new WeakMap,Gl=new WeakSet;class ew extends Pt{static get PLUGIN_KEY(){return WS}static get PLUGIN_PRIORITY(){return Mxe}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 500}constructor(e){super(e),_xe(this,Gl),Mg(this,"headerHeight",null),Mg(this,"ghostTable",new NO(this.hot)),Mg(this,"samplesGenerator",new VS((t,i)=>{const s=this.hot.toPhysicalRow(t),r=this.hot.toPhysicalColumn(i);if(this.hot.rowIndexMapper.isHidden(s)||this.hot.columnIndexMapper.isHidden(r)||t>=0&&i>=0&&this.hot.getCellMeta(t,i).hidden)return!1;let o;return t>=0?o=this.hot.getDataAtCell(t,i):t===-1&&(o=this.hot.getColHeader(i)),{value:o}})),Mg(this,"inProgress",!1),Mg(this,"measuredRows",0),Mg(this,"rowHeightsMap",new nh),Rxe(this,Jb,[]),this.hot.rowIndexMapper.registerMap(Axe,this.rowHeightsMap),this.addHook("beforeRowResize",(t,i,s)=>Ta(Gl,this,x4).call(this,t,i,s))}isEnabled(){const e=this.hot.getSettings()[WS];return e===!0||Je(e)}enablePlugin(){var e=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ta(Gl,e,Oxe).call(e,...i)}),this.addHook("beforeChangeRender",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ta(Gl,e,kxe).call(e,...i)}),this.addHook("beforeColumnResize",()=>this.recalculateAllRowsHeight()),this.addHook("afterFormulasValuesUpdate",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ta(Gl,e,Dxe).call(e,...i)}),this.addHook("beforeRender",()=>Ta(Gl,this,Ixe).call(this)),this.addHook("modifyRowHeight",(t,i)=>this.getRowHeight(i,t)),this.addHook("init",()=>Ta(Gl,this,Hxe).call(this)),this.addHook("modifyColumnHeaderHeight",()=>this.getColumnHeaderHeight()),super.enablePlugin())}disablePlugin(){this.headerHeight=null,super.disablePlugin(),this.addHook("beforeRowResize",(e,t,i)=>Ta(Gl,this,x4).call(this,e,t,i))}calculateVisibleRowsHeight(){if(!this.hot.countCols())return;const e=this.getFirstVisibleRow(),t=this.getLastVisibleRow();if(e===-1||t===-1)return;const i=this.hot.renderCall;this.calculateRowsHeight({from:e,to:t},void 0,i)}calculateRowsHeight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countCols()-1},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=typeof e=="number"?{from:e,to:e}:e,r=typeof t=="number"?{from:t,to:t}:t;if(this.hot.getColHeader(0)!==null){const o=this.samplesGenerator.generateRowSamples(-1,r);this.ghostTable.addColumnHeadersRow(o.get(-1))}Oe(s.from,s.to,o=>{let a=this.hot.toPhysicalRow(o);a===null&&(a=o),(i||this.rowHeightsMap.getValueAtIndex(a)===null)&&this.samplesGenerator.generateRowSamples(o,r).forEach((c,h)=>this.ghostTable.addRow(h,c))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((o,a)=>{o<0?this.headerHeight=a:this.rowHeightsMap.setValueAtIndex(this.hot.toPhysicalRow(o),a)})},!0),this.measuredRows=s.to+1,this.ghostTable.clean())}calculateAllRowsHeight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0;const s=this.hot.countRows()-1;let r=null;this.inProgress=!0;const o=()=>{if(!this.hot){fb(r),this.inProgress=!1;return}this.calculateRowsHeight({from:i,to:Math.min(i+ew.CALCULATION_STEP,s)},e,t),i=i+ew.CALCULATION_STEP+1,i<s?r=vC(o):(fb(r),this.inProgress=!1,this.hot.view.adjustElementsSize(),this.hot.view._wt.wtOverlays.inlineStartOverlay.needFullRender&&this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.draw())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateRowsHeight({from:0,to:a},e,t),i=a+1),i<s?o():(this.inProgress=!1,this.hot.view.adjustElementsSize())}setSamplingOptions(){const e=this.hot.getSettings()[WS],t=e&&_n(e,"samplingRatio")?e.samplingRatio:void 0,i=e&&_n(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllRowsHeight(){this.hot.view.isVisible()&&this.calculateAllRowsHeight({from:0,to:this.hot.countCols()-1},!0)}getSyncCalculationLimit(){const e=this.hot.getSettings()[WS];let t=ew.SYNC_CALCULATION_LIMIT;const i=this.hot.countRows()-1;return Je(e)&&(t=e.syncLimit,qM(t)?t=VA(i,t):t>>=0),Math.min(t,i)}getRowHeight(e,t){const i=e<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(e));let s=t;return i!==null&&i>(t||0)&&(s=i),s}getColumnHeaderHeight(){return this.headerHeight}getFirstVisibleRow(){var e;return(e=this.hot.view.getFirstRenderedVisibleRow())!==null&&e!==void 0?e:-1}getLastVisibleRow(){var e;return(e=this.hot.view.getLastRenderedVisibleRow())!==null&&e!==void 0?e:-1}clearCache(e){this.headerHeight=null,Array.isArray(e)?this.hot.batchExecution(()=>{e.forEach(t=>{this.rowHeightsMap.setValueAtIndex(t,null)})},!0):this.rowHeightsMap.clear()}clearCacheByRange(e){const{from:t,to:i}=typeof e=="number"?{from:e,to:e}:e;this.hot.batchExecution(()=>{Oe(Math.min(t,i),Math.max(t,i),s=>{this.rowHeightsMap.setValueAtIndex(s,null)})},!0)}isNeedRecalculate(){return!!this.rowHeightsMap.getValues().slice(0,this.measuredRows).filter(e=>e===null).length}destroy(){this.ghostTable.clean(),super.destroy()}}function Pxe(n){const e={from:0,to:this.hot.countCols()-1};n.forEach(t=>{this.samplesGenerator.generateRowSamples(t,e).forEach((s,r)=>this.ghostTable.addRow(r,s))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((t,i)=>{const s=this.hot.toPhysicalRow(t);this.rowHeightsMap.setValueAtIndex(s,i)})},!0),this.ghostTable.clean())}function Ixe(){this.calculateVisibleRowsHeight(),this.inProgress||(Ta(Gl,this,Pxe).call(this,$O(Jb,this)),Txe(Jb,this,[]))}function x4(n,e,t){let i=n;return t&&(this.calculateRowsHeight(e,void 0,!0),i=this.getRowHeight(e)),i}function Oxe(n,e){e||this.recalculateAllRowsHeight()}function kxe(n){const e=n.reduce((t,i)=>{let[s]=i;return t.indexOf(s)===-1&&t.push(s),t},[]);$O(Jb,this).push(...e)}function Hxe(){this.recalculateAllRowsHeight()}function Dxe(n){const e=n.reduce((t,i)=>{var s;const r=(s=i.address)===null||s===void 0?void 0:s.row;if(Number.isInteger(r)){const o=this.hot.toVisualRow(r);t.indexOf(o)===-1&&t.push(o)}return t},[]);$O(Jb,this).push(...e)}const{getListWithInsertedItems:Nxe,getListWithRemovedItems:Lxe}=q5("physicallyIndexed");class $xe extends Ju{constructor(){super(e=>e)}insert(e,t){const i=AP(this.indexedValues,t);this.indexedValues=Nxe(i,e,t,this.initValueOrFn),super.insert(e,t)}remove(e){const t=Lxe(this.indexedValues,e);this.indexedValues=MP(t,e),super.remove(e)}}const{getListWithInsertedItems:Fxe,getListWithRemovedItems:Bxe}=q5("physicallyIndexed");class Vxe extends Ju{constructor(){super(e=>e)}insert(e,t){this.indexedValues=Fxe(this.indexedValues,e,t,(i,s)=>this.getNextValue(s)),super.insert(e,t)}remove(e){this.indexedValues=Bxe(this.indexedValues,e),super.remove(e)}getNextValue(e){return Math.max(...this.getValues())+1+e}}function Wxe(n,e){jxe(n,e),e.add(n)}function jxe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zxe(n,e,t){return(e=Uxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Uxe(n){var e=Yxe(n,"string");return typeof e=="symbol"?e:e+""}function Yxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Gxe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const FO="bindRowsWithHeaders",Kxe=210,qxe="loose",Xxe=new Map([["loose",$xe],["strict",Vxe]]);var E4=new WeakSet;class Qxe extends Pt{constructor(){super(...arguments),Wxe(this,E4),zxe(this,"headerIndexes",null)}static get PLUGIN_KEY(){return FO}static get PLUGIN_PRIORITY(){return Kxe}isEnabled(){return!!this.hot.getSettings()[FO]}enablePlugin(){if(this.enabled)return;let e=this.hot.getSettings()[FO];typeof e!="string"&&(e=qxe);const t=Xxe.get(e);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new t),this.addHook("modifyRowHeader",i=>Gxe(E4,this,Zxe).call(this,i)),super.enablePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),super.disablePlugin()}destroy(){super.destroy()}}function Zxe(n){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(n))}function Jxe(n,e){T4(n,e),e.add(n)}function eEe(n,e,t){T4(n,e),e.set(n,t)}function T4(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M4(n,e,t){return(e=tEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tEe(n){var e=nEe(n,"string");return typeof e=="symbol"?e:e+""}function nEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function A4(n,e){return n.get(Ag(n,e))}function BO(n,e,t){return n.set(Ag(n,e),t),t}function Ag(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const jS="collapsibleColumns",iEe=290,sEe=["nestedHeaders"],Pg="collapsibleIndicator",P4=jS,I4=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]);var Ig=new WeakMap,tw=new WeakSet;class rEe extends Pt{constructor(){super(...arguments),Jxe(this,tw),M4(this,"nestedHeadersPlugin",null),M4(this,"headerStateManager",null),eEe(this,Ig,null)}static get PLUGIN_KEY(){return jS}static get PLUGIN_PRIORITY(){return iEe}static get PLUGIN_DEPS(){return["plugin:NestedHeaders"]}static get SETTING_KEYS(){return[jS,...sEe]}isEnabled(){return!!this.hot.getSettings()[jS]}enablePlugin(){var e=this;if(this.enabled)return;const{nestedHeaders:t}=this.hot.getSettings();t||Vt("You need to configure the Nested Headers plugin in order to use collapsible headers."),BO(Ig,this,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",()=>Ag(tw,this,lEe).call(this)),this.addHook("afterLoadData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ag(tw,e,cEe).call(e,...s)}),this.addHook("afterGetColHeader",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ag(tw,e,oEe).call(e,...s)}),this.addHook("beforeOnCellMouseDown",(i,s,r)=>Ag(tw,this,aEe).call(this,i,s,r)),this.registerShortcuts(),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){const{collapsibleColumns:e}=this.hot.getSettings();typeof e=="boolean"?this.headerStateManager.mapState(t=>({collapsible:t.origColspan>1})):Array.isArray(e)&&(this.headerStateManager.mapState(()=>({collapsible:!1})),this.headerStateManager.mergeStateWith(e))}super.updatePlugin()}}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),BO(Ig,this,null),this.nestedHeadersPlugin=null,this.unregisterShortcuts(),this.clearButtons(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{var e;const{row:t,col:i}=this.hot.getSelectedRangeLast().highlight,{collapsible:s,isCollapsed:r,columnIndex:o}=(e=this.headerStateManager.getHeaderTreeNodeData(t,i))!==null&&e!==void 0?e:{};if(s)return r?this.expandSection({row:t,col:o}):this.collapseSection({row:t,col:o}),!1},runOnlyIf:()=>{var e,t;return((e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.isSingle())&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.highlight.isHeader())},group:P4,relativeToGroup:ih,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(P4)}clearButtons(){if(!this.hot.view)return;const e=this.hot.view._wt.getSetting("columnHeaders").length,t=this.hot.view._wt.wtTable.THEAD,i=this.hot.view._wt.wtOverlays.topOverlay.clone.wtTable.THEAD,s=this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay?this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,r=function(o){o&&o.parentNode.removeChild(o)};Oe(0,e-1,o=>{const a=t.childNodes[o],l=i.childNodes[o],c=s?s.childNodes[o]:null;Oe(0,a.childNodes.length-1,h=>{let u=a.childNodes[h].querySelector(`.${Pg}`);r(u),l&&l.childNodes[h]&&(u=l.childNodes[h].querySelector(`.${Pg}`),r(u)),s&&c&&c.childNodes[h]&&(u=c.childNodes[h].querySelector(`.${Pg}`),r(u))})})}expandSection(e){this.toggleCollapsibleSection([e],"expand")}collapseSection(e){this.toggleCollapsibleSection([e],"collapse")}toggleAllCollapsibleSections(e){const t=this.headerStateManager.mapNodes(i=>{const{collapsible:s,origColspan:r,headerLevel:o,columnIndex:a,isCollapsed:l}=i;if(s===!0&&r>1&&(l&&e==="expand"||!l&&e==="collapse"))return{row:this.headerStateManager.levelToRowCoords(o),col:a}});this.toggleCollapsibleSection(t,e)}collapseAll(){this.toggleAllCollapsibleSections("collapse")}expandAll(){this.toggleAllCollapsibleSections("expand")}toggleCollapsibleSection(e,t){if(!I4.has(t))throw new Error(`Unsupported action is passed (${t}).`);if(!Array.isArray(e))return;const i=kl(e,f=>{let{row:g}=f;return g<0});let s=i.length>0;F(i,f=>{var g;let{row:p,col:m}=f;const{collapsible:w,isCollapsed:y}=(g=this.headerStateManager.getHeaderSettings(p,m))!==null&&g!==void 0?g:{};if(!w||y&&t==="collapse"||!y&&t==="expand")return s=!1,!1});const r=[],o=[];s&&F(i,f=>{let{row:g,col:p}=f;const{colspanCompensation:m,affectedColumns:w,rollbackModification:y}=this.headerStateManager.triggerNodeModification(t,g,p);m>0&&(o.push(...w),r.push(y))});const a=this.getCollapsedColumns();let l=[];t==="collapse"?l=zM([...a,...o]):t==="expand"&&(l=kl(a,f=>!o.includes(f)));const c=I4.get(t);if(this.hot.runHooks(c.beforeHook,a,l,s)===!1){F(r,f=>{f()});return}this.hot.batchExecution(()=>{F(o,f=>{A4(Ig,this).setValueAtIndex(this.hot.toPhysicalColumn(f),c.hideColumn)})},!0);const u=this.getCollapsedColumns().length!==a.length,d=this.hot.getSelectedRangeLast();if(t==="collapse"&&u&&d){const{row:f,col:g}=d.highlight;if((this.hot.rowIndexMapper.isHidden(f)||this.hot.columnIndexMapper.isHidden(g))&&o.includes(g)){const m=f>=0?this.hot.rowIndexMapper.getNearestNotHiddenIndex(f,1,!0):f,w=g>=0?this.hot.columnIndexMapper.getNearestNotHiddenIndex(g,1,!0):g;m!==null&&w!==null&&this.hot.selectCell(m,w)}}this.hot.runHooks(c.afterHook,a,l,s,u),this.hot.render(),this.hot.view.adjustElementsSize()}getCollapsedColumns(){return A4(Ig,this).getHiddenIndexes()}destroy(){BO(Ig,this,null),super.destroy()}}function oEe(n,e,t){var i;const{collapsible:s,origColspan:r,isCollapsed:o}=(i=this.headerStateManager.getHeaderSettings(t,n))!==null&&i!==void 0?i:{},a=s&&r>1&&n>=this.hot.getSettings().fixedColumnsStart,l=this.hot.getSettings().ariaTags;let c=e.querySelector(`.${Pg}`);if(Lu(e,[Ar("")[0]]),a)c||(c=this.hot.rootDocument.createElement("div"),ae(c,Pg),e.querySelector("div:first-child").appendChild(c)),Ue(c,["collapsed","expanded"]),o?(ae(c,"collapsed"),Kc(c,"+"),l&&$e(e,...Ar(!1))):(ae(c,"expanded"),Kc(c,"-"),l&&$e(e,...Ar(!0))),l&&$e(c,...Du());else{var h;(h=c)===null||h===void 0||h.remove()}}function aEe(n,e){Fe(n.target,Pg)&&(Fe(n.target,"expanded")?(this.eventManager.fireEvent(n.target,"mouseup"),this.toggleCollapsibleSection([e],"collapse")):Fe(n.target,"collapsed")&&(this.eventManager.fireEvent(n.target,"mouseup"),this.toggleCollapsibleSection([e],"expand")),Or(n))}function lEe(){this.updatePlugin()}function cEe(n,e){e||this.updatePlugin()}function hd(n,e,t){return(e=hEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hEe(n){var e=uEe(n,"string");return typeof e=="symbol"?e:e+""}function uEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const dEe=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"],fEe=!1,gEe=!0,pEe=!0;class mEe{constructor(e,t){hd(this,"hot",void 0),hd(this,"sortingStates",new nS),hd(this,"sortEmptyCells",fEe),hd(this,"indicator",gEe),hd(this,"headerAction",pEe),hd(this,"compareFunctionFactory",void 0),hd(this,"mapName",void 0),this.hot=e,this.mapName=t,this.hot.columnIndexMapper.registerMap(t,this.sortingStates)}updateAllColumnsProperties(e){Je(e)&&et(e,(t,i)=>{dEe.includes(i)&&(this[i]=t)})}getAllColumnsProperties(){const e={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return typeof this.compareFunctionFactory=="function"&&(e.compareFunctionFactory=this.compareFunctionFactory),e}getSortOrderOfColumn(e){var t;return(t=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))===null||t===void 0?void 0:t.sortOrder}getIndexOfColumnInSortQueue(e){return e=this.hot.toPhysicalColumn(e),this.sortingStates.getEntries().findIndex(t=>{let[i]=t;return i===e})}getNumberOfSortedColumns(){return this.sortingStates.getLength()}isListOfSortedColumnsEmpty(){return this.getNumberOfSortedColumns()===0}isColumnSorted(e){return Je(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))}getSortStates(){return this.sortingStates===null?[]:this.sortingStates.getEntries().map(t=>{let[i,s]=t;return{column:this.hot.toVisualColumn(i),...s}})}getColumnSortState(e){const t=this.getSortOrderOfColumn(e);if(Me(t))return{column:e,sortOrder:t}}setSortStates(e){this.sortingStates.clear();for(let t=0;t<e.length;t+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(e[t].column),{sortOrder:e[t].sortOrder})}destroy(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}function O4(n,e,t){const i=e.locale;return function(s,r){const{sortEmptyCells:o}=t;return typeof s=="string"&&(s=s.toLocaleLowerCase(i)),typeof r=="string"&&(r=r.toLocaleLowerCase(i)),s===r?Ma:An(s)?An(r)?Ma:o&&n==="asc"?In:On:An(r)?o&&n==="asc"?On:In:isNaN(s)&&!isNaN(r)?n==="asc"?On:In:!isNaN(s)&&isNaN(r)||(isNaN(s)||isNaN(r)||(s=parseFloat(s),r=parseFloat(r)),s<r)?n==="asc"?In:On:s>r?n==="asc"?On:In:Ma}}const k4="default";function bEe(n,e,t){return function(i,s){const r=parseFloat(i),o=parseFloat(s),{sortEmptyCells:a}=t;if(r===o||isNaN(r)&&isNaN(o))return Ma;if(a){if(An(i))return n==="asc"?In:On;if(An(s))return n==="asc"?On:In}return isNaN(r)?On:isNaN(o)?In:r<o?n==="asc"?In:On:r>o?n==="asc"?On:In:Ma}}const wEe="numeric";function vEe(n,e,t){const i=e.checkedTemplate,s=e.uncheckedTemplate,{sortEmptyCells:r}=t;return function(o,a){const l=An(o),c=An(a),h=l?s:o,u=c?s:a,d=h===s||h===i,f=u===s||u===i;if(r===!1){if(l&&c===!1)return On;if(l===!1&&c)return In}return d===!1&&f?n==="asc"?In:On:d&&f===!1?n==="asc"?On:In:d===!1&&f===!1?O4(n,e,t)(o,a):h===s&&u===i?n==="asc"?In:On:h===i&&u===s?n==="asc"?On:In:Ma}}const yEe="checkbox";function CEe(n,e,t){return V4(n,e.dateFormat,t)}const SEe="date";function _Ee(n,e,t){return V4(n,e.timeFormat,t)}const REe="time",{register:nw,getItem:H4,hasItem:xEe}=So("sorting.compareFunctionFactory"),{register:D4,getItem:EEe}=So("sorting.mainSortComparator");function N4(n){return xEe(n)?H4(n):H4(k4)}nw(yEe,vEe),nw(SEe,CEe),nw(k4,O4),nw(wEe,bEe),nw(REe,_Ee);const Ma=0,In=-1,On=1;function TEe(n,e){const t=EEe(e);for(var i=arguments.length,s=new Array(i>2?i-2:0),r=2;r<i;r++)s[r-2]=arguments[r];n.sort(t(...s))}const zS="asc",US="desc",L4="colHeader";function MEe(n){if(Je(n)===!1)return!1;const{column:e,sortOrder:t}=n;return Number.isInteger(e)&&[zS,US].includes(t)}function AEe(n){if(n.some(t=>MEe(t)===!1))return!1;const e=n.map(t=>{let{column:i}=t;return i});return new Set(e).size===e.length}function $4(n){if(n!==US)return n===zS?US:zS}function F4(n){return n.querySelector(`.${L4}`)}function B4(n,e){if(n<0||!e.parentNode)return!1;const t=e.parentNode.parentNode.childNodes;return Array.from(t).indexOf(e.parentNode)-t.length===-1}function VO(n,e,t){return n===-1&&e>=0&&Qc(t)===!1}function V4(n,e,t){return function(i,s){const{sortEmptyCells:r}=t;if(i===s)return Ma;if(An(i))return An(s)?Ma:r&&n==="asc"?In:On;if(An(s))return r&&n==="asc"?On:In;const o=le(i,e),a=le(s,e);return o.isValid()?a.isValid()?a.isAfter(o)?n==="asc"?In:On:a.isBefore(o)?n==="asc"?On:In:Ma:In:On}}const PEe="ascending",IEe="descending",W4="indicatorDisabled",j4="columnSorting",z4="sortAction",U4=new Map([[zS,PEe],[US,IEe]]);function OEe(n,e,t,i){const s=[j4];if(i&&s.push(z4),t===!1)return s.push(W4),s;const r=n.getSortOrderOfColumn(e);return Me(r)&&s.push(U4.get(r)),s}function kEe(){return Array.from(U4.values()).concat(z4,W4,j4)}function HEe(n,e){return function(t,i){const[,...s]=t,[,...r]=i;return function(a){const l=n[a],c=e[a],h=s[a],u=r[a],d=c.columnSorting;return(d.compareFunctionFactory?d.compareFunctionFactory:N4(c.type))(l,c,d)(h,u)}(0)}}function DEe(n,e){NEe(n,e),e.add(n)}function NEe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function YS(n,e,t){return(e=LEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LEe(n){var e=$Ee(n,"string");return typeof e=="symbol"?e:e+""}function $Ee(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Og(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const GS="columnSorting",FEe=50,KS="append",BEe="replace",Y4=GS;D4(GS,HEe),xe.getSingleton().register("beforeColumnSort"),xe.getSingleton().register("afterColumnSort");var ud=new WeakSet;class G4 extends Pt{constructor(){super(...arguments),DEe(this,ud),YS(this,"columnStatesManager",null),YS(this,"columnMetaCache",null),YS(this,"pluginKey",GS),YS(this,"indexesSequenceCache",null)}static get PLUGIN_KEY(){return GS}static get PLUGIN_PRIORITY(){return FEe}isEnabled(){return!!this.hot.getSettings()[this.pluginKey]}enablePlugin(){var e=this;this.enabled||(this.columnStatesManager=new mEe(this.hot,`${this.pluginKey}.sortingStates`),this.columnMetaCache=new nh(t=>{let i=this.hot.toVisualColumn(t);return i===null&&(i=t),this.getMergedPluginSettings(i)}),this.hot.columnIndexMapper.registerMap(`${this.pluginKey}.columnMeta`,this.columnMetaCache),this.addHook("afterGetColHeader",(t,i)=>Og(ud,this,VEe).call(this,t,i)),this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Og(ud,e,jEe).call(e,...i)}),this.addHook("afterOnCellMouseDown",(t,i)=>this.onAfterOnCellMouseDown(t,i)),this.addHook("afterInit",()=>Og(ud,this,WO).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Og(ud,e,WEe).call(e,...i)}),this.hot.view&&Og(ud,this,WO).call(this),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){const e=(t,i)=>{const s=F4(i);B4(t,i)===!1||s===null||this.updateHeaderClasses(s)};this.hot.addHook("afterGetColHeader",e),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("afterGetColHeader",e)}),this.hot.batchExecution(()=>{this.indexesSequenceCache!==null&&(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginKey),this.indexesSequenceCache=null)},!0),this.hot.columnIndexMapper.unregisterMap(`${this.pluginKey}.columnMeta`),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();return this.sort(this.getColumnNextConfig(e.col)),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.row===-1&&i.col>=0},relativeToGroup:ih,position:"before",group:Y4})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(Y4)}sort(e){const t=this.getSortConfig(),i=this.getNormalizedSortConfigs(e),s=this.areValidSortConfigs(i);this.hot.runHooks("beforeColumnSort",t,i,s)!==!1&&(t.length===0&&this.indexesSequenceCache===null&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new X5),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),s&&(this.columnStatesManager.setSortStates(i),this.sortByPresetSortStates(i),this.saveAllSortSettings(i)),this.hot.runHooks("afterColumnSort",t,s?i:t,s),s&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}clearSort(){this.sort([])}isSorted(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}getSortConfig(e){return Me(e)?this.columnStatesManager.getColumnSortState(e):this.columnStatesManager.getSortStates()}setSortConfig(e){const t=this.getNormalizedSortConfigs(e);this.areValidSortConfigs(t)&&this.columnStatesManager.setSortStates(t)}getNormalizedSortConfigs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)?e.slice(0,1):[e]}areValidSortConfigs(e){const t=this.hot.countCols();return AEe(e)&&e.every(i=>{let{column:s}=i;return s<=t&&s>=0})}saveAllSortSettings(e){const t=this.columnStatesManager.getAllColumnsProperties(),i=s=>{let{column:r,...o}=s;return{column:this.hot.toPhysicalColumn(r),...o}};t.initialConfig=ct(e,i),this.hot.runHooks("persistentStateSave","columnSorting",t)}getAllSavedSortSettings(){const e={};this.hot.runHooks("persistentStateLoad","columnSorting",e);const t=e.value,i=s=>{let{column:r,...o}=s;return{column:this.hot.toVisualColumn(r),...o}};return Me(t)&&Array.isArray(t.initialConfig)&&(t.initialConfig=ct(t.initialConfig,i)),t}getColumnNextConfig(e){const t=this.columnStatesManager.getSortOrderOfColumn(e);if(Me(t)){const s=$4(t);return Me(s)?{column:e,sortOrder:s}:void 0}const i=this.hot.countCols();if(Number.isInteger(e)&&e>=0&&e<i)return{column:e,sortOrder:$4()}}getNextSortConfig(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:KS;const i=this.columnStatesManager.getIndexOfColumnInSortQueue(e),s=i!==-1,r=this.getSortConfig(),o=this.getColumnNextConfig(e);if(s){if(nn(o))return[...r.slice(0,i),...r.slice(i+1)];if(t===KS)return[...r.slice(0,i),...r.slice(i+1),o];if(t===BEe)return[...r.slice(0,i),o,...r.slice(i+1)]}return Me(o)?r.concat(o):r}getPluginColumnConfig(e){if(Je(e)){const t=e[this.pluginKey];if(Je(t))return t}return{}}getMergedPluginSettings(e){const t=this.hot.getSettings()[this.pluginKey],i=this.columnStatesManager.getAllColumnsProperties(),s=this.hot.getCellMeta(0,e),r=Object.getPrototypeOf(s);return Array.isArray(r.columns)?Object.assign(i,t,this.getPluginColumnConfig(r.columns[e])):rn(r.columns)?Object.assign(i,t,this.getPluginColumnConfig(r.columns(e))):Object.assign(i,t)}getFirstCellSettings(e){const t=this.hot.getCellMeta(0,e),i=Object.create(t);return i[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(e)),i}getNumberOfRowsToSort(e){const t=this.hot.getSettings();return t.maxRows<=e?t.maxRows:e-t.minSpareRows}sortByPresetSortStates(e){if(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),e.length===0)return;const t=[],i=this.hot.countRows(),s=c=>ct(e,h=>this.hot.getDataAtCell(c,h.column));for(let c=0;c<this.getNumberOfRowsToSort(i);c+=1)t.push([this.hot.toPhysicalRow(c)].concat(s(c)));const r=ct(t,c=>c[0]);TEe(t,this.pluginKey,ct(e,c=>c.sortOrder),ct(e,c=>this.getFirstCellSettings(c.column)));for(let c=t.length;c<i;c+=1)t.push([c].concat(s(c)));const o=ct(t,c=>c[0]),a=new Map(ct(r,(c,h)=>[c,o[h]])),l=ct(this.hot.rowIndexMapper.getIndexesSequence(),c=>a.has(c)?a.get(c):c);this.hot.rowIndexMapper.setIndexesSequence(l)}sortBySettings(e){if(Je(e)){this.columnStatesManager.updateAllColumnsProperties(e);const t=e.initialConfig;(Array.isArray(t)||Je(t))&&this.sort(t)}else this.hot.render()}updateHeaderClasses(e){if(Ue(e,kEe()),this.enabled!==!1){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];ae(e,OEe(...i))}}onUpdateSettings(e){super.onUpdateSettings(),this.columnMetaCache!==null&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),Me(e[this.pluginKey])&&this.sortBySettings(e[this.pluginKey])}wasClickableHeaderClicked(e,t){return this.getFirstCellSettings(t)[this.pluginKey].headerAction&&Fe(e.target,L4)}onAfterOnCellMouseDown(e,t){if(VO(t.row,t.col,e)!==!1&&this.wasClickableHeaderClicked(e,t.col)){this.hot.getShortcutManager().isCtrlPressed()&&(this.hot.deselectCell(),this.hot.selectColumns(t.col));const i=this.hot.getActiveEditor(),s=this.getColumnNextConfig(t.col);i!=null&&i.isOpened()&&this.hot.getCellValidator(i.row,i.col)?this.hot.addHookOnce("postAfterValidate",()=>{this.sort(s)}):this.sort(s)}}destroy(){var e;(e=this.columnStatesManager)===null||e===void 0||e.destroy(),super.destroy()}}function WO(){const n=this.getAllSavedSortSettings();if(Je(n))this.sortBySettings(n);else{const e=this.hot.getSettings()[this.pluginKey];this.sortBySettings(e)}}function VEe(n,e){const t=F4(e);if(B4(n,e)===!1||t===null)return;const i=this.getFirstCellSettings(n)[this.pluginKey],s=i.indicator,r=i.headerAction;if(this.updateHeaderClasses(t,this.columnStatesManager,n,s,r),this.hot.getSettings().ariaTags){const o=this.columnStatesManager.getSortOrderOfColumn(n);$e(e,...Hme(o?`${o}ending`:"none"))}}function WEe(n){n===!0&&this.hot.view&&Og(ud,this,WO).call(this)}function jEe(n,e,t,i){VO(e.row,e.col,n)!==!1&&this.wasClickableHeaderClicked(n,e.col)&&this.hot.getShortcutManager().isCtrlPressed()&&(i.column=!0)}function dd(n,e,t){return(e=zEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zEe(n){var e=UEe(n,"string");return typeof e=="symbol"?e:e+""}function UEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class YEe{constructor(e,t){dd(this,"plugin",void 0),dd(this,"hot",void 0),dd(this,"endpoints",[]),dd(this,"settings",void 0),dd(this,"settingsType","array"),dd(this,"currentEndpoint",null),dd(this,"cellsToSetCache",[]),this.plugin=e,this.hot=this.plugin.hot,this.settings=t}initEndpoints(){this.endpoints=this.parseSettings(),this.refreshAllEndpoints()}getEndpoint(e){return this.settingsType==="function"?this.fillMissingEndpointData(this.settings)[e]:this.endpoints[e]}getAllEndpoints(){return this.settingsType==="function"?this.fillMissingEndpointData(this.settings):this.endpoints}fillMissingEndpointData(e){return this.parseSettings(e.call(this))}parseSettings(e){const t=[];let i=e;if(!i&&typeof this.settings=="function"){this.settingsType="function";return}return i||(i=this.settings),F(i,s=>{const r={};this.assignSetting(s,r,"ranges",[[0,this.hot.countRows()-1]]),this.assignSetting(s,r,"reversedRowCoords",!1),this.assignSetting(s,r,"destinationRow",new Error(`
        You must provide a destination row for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(s,r,"destinationColumn",new Error(`
        You must provide a destination column for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(s,r,"sourceColumn",s.destinationColumn),this.assignSetting(s,r,"type","sum"),this.assignSetting(s,r,"forceNumeric",!1),this.assignSetting(s,r,"suppressDataTypeErrors",!0),this.assignSetting(s,r,"customFunction",null),this.assignSetting(s,r,"readOnly",!0),this.assignSetting(s,r,"roundFloat",!1),t.push(r)}),t}assignSetting(e,t,i,s){if(i==="ranges"&&e[i]===void 0){t[i]=s;return}else if(i==="ranges"&&e[i].length===0)return;if(e[i]===void 0){if(s instanceof Error)throw s;t[i]=s}else i==="destinationRow"&&t.reversedRowCoords?t[i]=this.hot.countRows()-e[i]-1:t[i]=e[i]}resetSetupBeforeStructureAlteration(e,t,i){if(this.settingsType!=="function")return;const s=e.indexOf("row")>-1?"row":"col",r=this.getAllEndpoints();F(r,o=>{s==="row"&&o.destinationRow>=t&&(e==="insert_row"?o.alterRowOffset=i:e==="remove_row"&&(o.alterRowOffset=-1*i)),s==="col"&&o.destinationColumn>=t&&(e==="insert_col"?o.alterColumnOffset=i:e==="remove_col"&&(o.alterColumnOffset=-1*i))}),this.resetAllEndpoints(r,!1)}resetSetupAfterStructureAlteration(e,t,i,s,r){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;if(this.settingsType==="function"){const d=()=>(this.hot.removeHook("beforeViewRender",d),this.refreshAllEndpoints());this.hot.addHookOnce("beforeViewRender",d);return}const a=e.indexOf("row")>-1?"row":"col",l=e.indexOf("remove")>-1?-1:1,c=this.getAllEndpoints(),h=e.indexOf("move_row")===0,u=t;F(c,d=>{a==="row"&&d.destinationRow>=u&&(d.alterRowOffset=l*i),a==="col"&&d.destinationColumn>=u&&(d.alterColumnOffset=l*i)}),this.resetAllEndpoints(c,!h),h?F(c,d=>{this.extendEndpointRanges(d,u,s[0],s.length),this.recreatePhysicalRanges(d),this.clearOffsetInformation(d)}):F(c,d=>{this.shiftEndpointCoordinates(d,u)}),o&&this.refreshAllEndpoints()}clearOffsetInformation(e){e.alterRowOffset=void 0,e.alterColumnOffset=void 0}extendEndpointRanges(e,t,i,s){F(e.ranges,r=>{r[1]&&(t>=r[0]&&t<=r[1]?i>r[1]?r[1]+=s:i<r[0]&&(r[0]-=s):i>=r[0]&&i<=r[1]&&(r[1]-=s,t<=r[0]&&(r[0]+=1,r[1]+=1)))})}recreatePhysicalRanges(e){const t=e.ranges,i=[],s=[];F(t,r=>{const o=[];if(r[1])for(let a=r[0];a<=r[1];a++)o.push(this.hot.toPhysicalRow(a));else o.push(this.hot.toPhysicalRow(r[0]));s.push(o)}),F(s,r=>{let o=[];F(r,(a,l)=>{l===0?o.push(a):r[l]!==r[l-1]+1&&(o.push(r[l-1]),i.push(o),o=[],o.push(a)),l===r.length-1&&(o.push(a),i.push(o))})}),e.ranges=i}shiftEndpointCoordinates(e,t){e.alterRowOffset&&e.alterRowOffset!==0?(e.destinationRow+=e.alterRowOffset||0,F(e.ranges,i=>{F(i,(s,r)=>{s>=t&&(i[r]+=e.alterRowOffset||0)})})):e.alterColumnOffset&&e.alterColumnOffset!==0&&(e.destinationColumn+=e.alterColumnOffset||0,e.sourceColumn+=e.alterColumnOffset||0)}resetAllEndpoints(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getAllEndpoints(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.some(s=>{const r=s.alterRowOffset||0,o=s.alterColumnOffset||0;return s.destinationRow+r>=this.hot.countRows()||s.destinationColumn+o>=this.hot.countCols()})||(this.cellsToSetCache=[],F(e,s=>{this.resetEndpointValue(s,t)}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}refreshAllEndpoints(){this.cellsToSetCache=[],F(this.getAllEndpoints(),e=>{this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e,"init")}),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshChangedEndpoints(e){const t=[];this.cellsToSetCache=[],F(e,(i,s,r)=>{`${i[2]||""}`!=`${i[3]}`&&F(this.getAllEndpoints(),(o,a)=>{this.hot.propToCol(r[s][1])===o.sourceColumn&&t.indexOf(a)===-1&&t.push(a)})}),F(t,i=>{this.refreshEndpoint(this.getEndpoint(i))}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshCellMetas(){this.endpoints.forEach(e=>{const t=this.hot.toVisualRow(e.destinationRow);if(t!==null){const i=this.hot.getCellMeta(t,e.destinationColumn);i.readOnly=e.readOnly,i.className="columnSummaryResult"}})}refreshEndpoint(e){this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e),this.currentEndpoint=null}resetEndpointValue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const i=e.alterRowOffset||0,s=e.alterColumnOffset||0;this.cellsToSetCache.push([this.hot.toVisualRow(e.destinationRow+(t?i:0)),this.hot.toVisualColumn(e.destinationColumn+(t?s:0)),""])}setEndpointValue(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=this.hot.toVisualRow(e.destinationRow);if(e.destinationRow>=this.hot.countRows()||e.destinationColumn>=this.hot.countCols()){this.throwOutOfBoundsWarning();return}const r=this.hot.toVisualRow(e.destinationRow);if(r!==null){const o=this.hot.getCellMeta(r,e.destinationColumn);(t==="init"||o.readOnly!==e.readOnly)&&(o.readOnly=e.readOnly,o.className="columnSummaryResult")}if((e.roundFloat===!0||Number.isInteger(e.roundFloat))&&!isNaN(e.result)){const o=e.roundFloat;let a=0;Number.isInteger(o)&&(a=Math.min(Math.max(0,o),100)),e.result=e.result.toFixed(a)}i?this.hot.setDataAtCell(s,e.destinationColumn,e.result,"ColumnSummary.set"):this.cellsToSetCache.push([s,e.destinationColumn,e.result]),e.alterRowOffset=void 0,e.alterColumnOffset=void 0}throwOutOfBoundsWarning(){Vt("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}}function jO(n){return n==null||isNaN(n)}function GEe(n,e){KEe(n,e),e.add(n)}function KEe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qEe(n,e,t){return(e=XEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XEe(n){var e=QEe(n,"string");return typeof e=="symbol"?e:e+""}function QEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qS(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const zO="columnSummary",ZEe=220;var iw=new WeakSet;class JEe extends Pt{constructor(){super(...arguments),GEe(this,iw),qEe(this,"endpoints",null)}static get PLUGIN_KEY(){return zO}static get PLUGIN_PRIORITY(){return ZEe}isEnabled(){return!!this.hot.getSettings()[zO]}enablePlugin(){var e=this;this.enabled||(this.settings=this.hot.getSettings()[zO],this.endpoints=new YEe(this,this.settings),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return qS(iw,e,eTe).call(e,...i)}),this.addHook("afterChange",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return qS(iw,e,nTe).call(e,...i)}),this.addHook("afterUpdateSettings",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return qS(iw,e,tTe).call(e,...i)}),this.addHook("beforeCreateRow",(t,i,s)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_row",t,i,null,s)),this.addHook("beforeCreateCol",(t,i,s)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_col",t,i,null,s)),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e.endpoints.resetSetupBeforeStructureAlteration("remove_row",...i)}),this.addHook("beforeRemoveCol",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e.endpoints.resetSetupBeforeStructureAlteration("remove_col",...i)}),this.addHook("afterCreateRow",(t,i,s)=>this.endpoints.resetSetupAfterStructureAlteration("insert_row",t,i,null,s)),this.addHook("afterCreateCol",(t,i,s)=>this.endpoints.resetSetupAfterStructureAlteration("insert_col",t,i,null,s)),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e.endpoints.resetSetupAfterStructureAlteration("remove_row",...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e.endpoints.resetSetupAfterStructureAlteration("remove_col",...i)}),this.addHook("afterRowMove",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return qS(iw,e,iTe).call(e,...i)}),super.enablePlugin())}disablePlugin(){this.endpoints=null,this.settings=null,this.currentEndpoint=null,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.endpoints.initEndpoints(),super.updatePlugin()}calculate(e){switch(e.type.toLowerCase()){case"sum":e.result=this.calculateSum(e);break;case"min":e.result=this.calculateMinMax(e,e.type);break;case"max":e.result=this.calculateMinMax(e,e.type);break;case"count":e.result=this.countEntries(e);break;case"average":e.result=this.calculateAverage(e);break;case"custom":e.result=e.customFunction.call(this,e);break}}calculateSum(e){let t=0;return et(e.ranges,i=>{t+=this.getPartialSum(i,e.sourceColumn)}),t}getPartialSum(e,t){let i=0,s=e[1]||e[0],r=null,o=0;do{if(r=this.getCellValue(s,t),r=jO(r)?null:r,r!==null){const a=(`${r}`.split(".")[1]||[]).length||1;a>o&&(o=a)}i+=r||0,s-=1}while(s>=e[0]);return Math.round(i*10**o)/10**o}calculateMinMax(e,t){let i=null;return et(e.ranges,s=>{const r=this.getPartialMinMax(s,e.sourceColumn,t);if(i===null&&r!==null&&(i=r),r!==null)switch(t){case"min":i=Math.min(i,r);break;case"max":i=Math.max(i,r);break}}),i===null?"Not enough data":i}getPartialMinMax(e,t,i){let s=null,r=e[1]||e[0],o;do{if(o=this.getCellValue(r,t),o=jO(o)?null:o,s===null)s=o;else if(o!==null)switch(i){case"min":s=Math.min(s,o);break;case"max":s=Math.max(s,o);break}r-=1}while(r>=e[0]);return s}countEmpty(e,t){let i,s=0,r=e[1]||e[0];do i=this.getCellValue(r,t),i=jO(i)?null:i,i===null&&(s+=1),r-=1;while(r>=e[0]);return s}countEntries(e){let t=0;const i=e.ranges;return et(i,s=>{const r=s[1]===void 0?1:s[1]-s[0]+1,o=this.countEmpty(s,e.sourceColumn);t+=r,t-=o}),t}calculateAverage(e){const t=this.calculateSum(e),i=this.countEntries(e);return t/i}getCellValue(e,t){const i=this.hot.toVisualRow(e),s=this.hot.toVisualColumn(t);let r=this.hot.getSourceDataAtCell(e,t),o="";if(i!==null&&s!==null&&(o=this.hot.getCellMeta(i,s).className||""),o.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&(typeof r=="string"&&(r=r.replace(/,/,".")),r=parseFloat(r)),isNaN(r)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw new Error(Ft`ColumnSummary plugin: cell at (${e}, ${t}) is not in a\x20
          numeric format. Cannot do the calculation.`);return r}}function eTe(){this.endpoints.initEndpoints()}function tTe(n){n.columns!==void 0&&this.endpoints.refreshCellMetas()}function nTe(n,e){n&&e!=="ColumnSummary.reset"&&e!=="ColumnSummary.set"&&e!=="loadData"&&this.endpoints.refreshChangedEndpoints(n)}function iTe(n,e){this.endpoints.resetSetupBeforeStructureAlteration("move_row",n[0],n.length,n,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",e,n.length,n,this.pluginName)}function sTe(n,e){K4(n,e),e.add(n)}function UO(n,e,t){K4(n,e),e.set(n,t)}function K4(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kg(n,e){return n.get(GO(n,e))}function YO(n,e,t){return n.set(GO(n,e),t),t}function GO(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var XS=new WeakMap,QS=new WeakMap,ZS=new WeakMap,q4=new WeakSet;class X4{constructor(){sTe(this,q4),UO(this,XS,!0),UO(this,QS,null),UO(this,ZS,new ResizeObserver(e=>GO(q4,this,rTe).call(this,e)))}setObservedElement(e){YO(QS,this,e)}unobserve(){kg(ZS,this).unobserve(kg(QS,this))}observe(){YO(XS,this,!0),kg(ZS,this).observe(kg(QS,this))}destroy(){kg(ZS,this).disconnect()}}function rTe(n){if(kg(XS,this)||!Array.isArray(n)||!n.length){YO(XS,this,!1);return}n.forEach(e=>{let{borderBoxSize:t}=e;const{inlineSize:i,blockSize:s}=t[0];this.runLocalHooks("resize",i,s)})}Bt(X4,Di);function fd(n,e,t){oTe(n,e),e.set(n,t)}function oTe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xt(n,e){return n.get(Q4(n,e))}function Kl(n,e,t){return n.set(Q4(n,e),t),t}function Q4(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var gd=new WeakMap,KO=new WeakMap,ql=new WeakMap,pd=new WeakMap,rh=new WeakMap,JS=new WeakMap,Hg=new WeakMap;class md{static get CLASS_EDITOR_CONTAINER(){return"htCommentsContainer"}static get CLASS_EDITOR(){return"htComments"}static get CLASS_INPUT(){return"htCommentTextArea"}static get CLASS_CELL(){return"htCommentCell"}constructor(e,t){var i=this;fd(this,gd,void 0),fd(this,KO,!1),fd(this,ql,null),fd(this,pd,void 0),fd(this,rh,void 0),fd(this,JS,!0),fd(this,Hg,new X4),Kl(gd,this,e),Kl(KO,this,t),Kl(pd,this,this.createEditor()),Kl(rh,this,Xt(pd,this).style),Xt(Hg,this).setObservedElement(this.getInputElement()),Xt(Hg,this).addLocalHook("resize",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("resize",...r)}),this.hide()}setPosition(e,t){Xt(rh,this).left=`${e}px`,Xt(rh,this).top=`${t}px`}setSize(e,t){if(e&&t){const i=this.getInputElement();i.style.width=`${e}px`,i.style.height=`${t}px`}}getSize(){return{width:sn(this.getInputElement()),height:jn(this.getInputElement())}}observeSize(){Xt(Hg,this).observe()}resetSize(){const e=this.getInputElement();e.style.width="",e.style.height=""}setReadOnlyState(e){const t=this.getInputElement();t.readOnly=e}show(){Xt(rh,this).display="block",Kl(JS,this,!1)}hide(){Xt(Hg,this).unobserve(),Xt(JS,this)||(Xt(rh,this).display="none"),Kl(JS,this,!0)}isVisible(){return Xt(rh,this).display==="block"}setValue(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"")||"";this.getInputElement().value=t}getValue(){return this.getInputElement().value}isFocused(){return Xt(gd,this).activeElement===this.getInputElement()}focus(){this.getInputElement().focus()}createEditor(){const e=Xt(gd,this).createElement("div"),t=Xt(gd,this).createElement("textarea");return e.style.display="none",Kl(ql,this,Xt(gd,this).createElement("div")),Xt(ql,this).setAttribute("dir",Xt(KO,this)?"rtl":"ltr"),ae(Xt(ql,this),md.CLASS_EDITOR_CONTAINER),Xt(gd,this).body.appendChild(Xt(ql,this)),ae(e,md.CLASS_EDITOR),ae(t,md.CLASS_INPUT),t.setAttribute("data-hot-input",!0),e.appendChild(t),Xt(ql,this).appendChild(e),e}getInputElement(){return Xt(pd,this).querySelector(`.${md.CLASS_INPUT}`)}destroy(){const e=Xt(ql,this)?Xt(ql,this).parentNode:null;Xt(pd,this).parentNode.removeChild(Xt(pd,this)),Kl(pd,this,null),Kl(rh,this,null),Xt(Hg,this).destroy(),e&&e.removeChild(Xt(ql,this))}}Bt(md,Di);function qO(n,e,t){return(e=aTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aTe(n){var e=lTe(n,"string");return typeof e=="symbol"?e:e+""}function lTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const cTe=250,hTe=250;class Z4{constructor(e){qO(this,"wasLastActionShow",!0),qO(this,"showDebounced",null),qO(this,"hidingTimer",null),this.updateDelay(e)}hide(){this.wasLastActionShow=!1,this.hidingTimer=setTimeout(()=>{this.wasLastActionShow===!1&&this.runLocalHooks("hide")},hTe)}show(e){this.wasLastActionShow=!0,this.showDebounced(e)}cancelHiding(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}updateDelay(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cTe;this.showDebounced=fC(t=>{this.wasLastActionShow&&this.runLocalHooks("show",t.from.row,t.from.col)},e)}destroy(){this.clearLocalHooks()}}Bt(Z4,Di);function uTe(n,e){return n.indexOf(e)!==-1?n:`${n.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","")} ${e}`}function dTe(n,e){return n.indexOf(e)!==-1?n:`${n.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","")} ${e}`}function bd(n,e){const t={};return F(n,i=>{i.forAll((s,r)=>{s>=0&&r>=0&&(t[s]||(t[s]=[]),t[s][r]=e(s,r))})}),t}function oh(n,e,t,i,s){F(n,r=>{r.forAll((o,a)=>{o>=0&&a>=0&&fTe(o,a,e,t,i,s)})})}function fTe(n,e,t,i,s,r){const o=s(n,e);let a=i;o.className&&(t==="vertical"?a=uTe(o.className,i):a=dTe(o.className,i)),r(n,e,"className",a)}function Xl(n){return`<span class="selected">✓</span>${n}`}function sw(n,e){let t=!1;return Array.isArray(n)&&F(n,i=>(i.forAll((s,r)=>{if(s>=0&&r>=0&&e(s,r))return t=!0,!1}),t)),t}function e_(n,e){const t={top:0,left:0};if(e!==n.ownerDocument){const{frameElement:i}=e.defaultView,{top:s,left:r}=i.getBoundingClientRect();t.top=s,t.left=r}return t}function gTe(n){return function(e,t){const i=this.getCellMeta(e,t).className;return i&&i.indexOf(n)!==-1}}function Is(n,e){return sw(n.getSelectedRange(),gTe(e).bind(n))}const st="---------";function pTe(){return{name:st}}const Vr="alignment";function mTe(){return{key:Vr,name(){return this.getTranslatedPhrase(sI)},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()?!0:!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:`${Vr}:left`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(cS)},ariaChecked(){return Is(this,"htLeft")},name(){let n=this.getTranslatedPhrase(cS);return Is(this,"htLeft")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=bd(n,(s,r)=>this.getCellMeta(s,r).className),t="horizontal",i="htLeft";this.runHooks("beforeCellAlignment",e,n,t,i),oh(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{key:`${Vr}:center`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(hS)},ariaChecked(){return Is(this,"htCenter")},name(){let n=this.getTranslatedPhrase(hS);return Is(this,"htCenter")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=bd(n,(s,r)=>this.getCellMeta(s,r).className),t="horizontal",i="htCenter";this.runHooks("beforeCellAlignment",e,n,t,i),oh(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{key:`${Vr}:right`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(uS)},ariaChecked(){return Is(this,"htRight")},name(){let n=this.getTranslatedPhrase(uS);return Is(this,"htRight")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=bd(n,(s,r)=>this.getCellMeta(s,r).className),t="horizontal",i="htRight";this.runHooks("beforeCellAlignment",e,n,t,i),oh(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{key:`${Vr}:justify`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(dS)},ariaChecked(){return Is(this,"htJustify")},name(){let n=this.getTranslatedPhrase(dS);return Is(this,"htJustify")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=bd(n,(s,r)=>this.getCellMeta(s,r).className),t="horizontal",i="htJustify";this.runHooks("beforeCellAlignment",e,n,t,i),oh(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{name:st},{key:`${Vr}:top`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(fS)},ariaChecked(){return Is(this,"htTop")},name(){let n=this.getTranslatedPhrase(fS);return Is(this,"htTop")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=bd(n,(s,r)=>this.getCellMeta(s,r).className),t="vertical",i="htTop";this.runHooks("beforeCellAlignment",e,n,t,i),oh(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{key:`${Vr}:middle`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(gS)},ariaChecked(){return Is(this,"htMiddle")},name(){let n=this.getTranslatedPhrase(gS);return Is(this,"htMiddle")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=bd(n,(s,r)=>this.getCellMeta(s,r).className),t="vertical",i="htMiddle";this.runHooks("beforeCellAlignment",e,n,t,i),oh(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{key:`${Vr}:bottom`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(pS)},ariaChecked(){return Is(this,"htBottom")},name(){let n=this.getTranslatedPhrase(pS);return Is(this,"htBottom")&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=bd(n,(s,r)=>this.getCellMeta(s,r).className),t="vertical",i="htBottom";this.runHooks("beforeCellAlignment",e,n,t,i),oh(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1}]}}}const t_="clear_column";function bTe(){return{key:t_,name(){return this.getTranslatedPhrase(zP)},callback(n,e){const t=e[0].start.col,i=e[0].end.col;this.countRows()&&this.populateFromArray(0,t,[[null]],Math.max(e[0].start.row,e[0].end.row),i,"ContextMenu.clearColumn")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:!this.selection.isSelectedByColumnHeader()}}}const rw="col_left";function wTe(){return{key:rw,name(){return this.getTranslatedPhrase($P)},callback(){const n=this.getSelectedRangeLast().getTopLeftCorner(),e=this.isRtl()?"insert_col_end":"insert_col_start";this.alter(e,n.col,1,"ContextMenu.columnLeft")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:this.selection.isSelectedByCorner()?this.countCols()===0:this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}}const ow="col_right";function vTe(){return{key:ow,name(){return this.getTranslatedPhrase(FP)},callback(){const n=this.getSelectedRangeLast().getTopRightCorner(),e=this.isRtl()?"insert_col_start":"insert_col_end";this.alter(e,n.col,1,"ContextMenu.columnRight")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:this.selection.isSelectedByCorner()?!1:this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}}const aw="make_read_only";function yTe(){return{key:aw,checkable:!0,ariaChecked(){return sw(this.getSelectedRange(),(e,t)=>this.getCellMeta(e,t).readOnly)},ariaLabel(){return this.getTranslatedPhrase(lS)},name(){let n=this.getTranslatedPhrase(lS);return sw(this.getSelectedRange(),(t,i)=>this.getCellMeta(t,i).readOnly)&&(n=Xl(n)),n},callback(){const n=this.getSelectedRange(),e=sw(n,(t,i)=>this.getCellMeta(t,i).readOnly);F(n,t=>{t.forAll((i,s)=>{i>=0&&s>=0&&this.setCellMeta(i,s,"readOnly",!e)})}),this.render()},disabled(){const n=this.getSelectedRangeLast();return!!(!n||n.isSingleHeader()||this.selection.isSelectedByCorner()||this.countRows()===0||this.countCols()===0||!this.getSelectedRange()||this.getSelectedRange().length===0)}}}const n_="redo";function CTe(){return{key:n_,name(){return this.getTranslatedPhrase(jP)},callback(){this.redo()},hidden(){const n=this.getPlugin("undoRedo");return!n||!n.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isRedoAvailable()}}}const lw="remove_col";function STe(){return{key:lw,name(){const n=this.getSelected();let e=0;if(n)if(n.length>1)e=1;else{const[,t,,i]=n[0];t-i!==0&&(e=1)}return this.getTranslatedPhrase(VP,e)},callback(){this.alter("remove_col",ySe(this),null,"ContextMenu.removeColumn")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();if(!n||n.isSingleHeader()&&n.highlight.col<0)return!0;const e=this.countCols();return this.selection.isSelectedByCorner()?e===0:this.selection.isSelectedByRowHeader()||e===0},hidden(){return!this.getSettings().allowRemoveColumn}}}const i_="remove_row";function _Te(){return{key:i_,name(){const n=this.getSelected();let e=0;if(n)if(n.length>1)e=1;else{const[t,,i]=n[0];t-i!==0&&(e=1)}return this.getTranslatedPhrase(BP,e)},callback(){this.alter("remove_row",CSe(this),1,"ContextMenu.removeRow")},disabled(){const n=this.getSelectedRangeLast();if(!n||n.isSingleHeader()&&n.highlight.row<0)return!0;const e=this.countRows();return this.selection.isSelectedByCorner()?e===0:this.selection.isSelectedByColumnHeader()||e===0},hidden(){return!this.getSettings().allowRemoveRow}}}const s_="row_above";function RTe(){return{key:s_,name(){return this.getTranslatedPhrase(NP)},callback(){const n=this.getSelectedRangeLast().getTopLeftCorner();this.alter("insert_row_above",n.row,1,"ContextMenu.rowAbove")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.row<0?!0:this.selection.isSelectedByCorner()?this.countRows()===0:this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}}const r_="row_below";function xTe(){return{key:r_,name(){return this.getTranslatedPhrase(LP)},callback(){const n=this.getSelectedRangeLast().getBottomRightCorner();this.alter("insert_row_below",n.row,1,"ContextMenu.rowBelow")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.row<0?!0:this.selection.isSelectedByCorner()?!1:this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}}const cw="no_items";function ETe(){return{key:cw,name(){return this.getTranslatedPhrase(DP)},disabled:!0,isCommand:!1}}const o_="undo";function TTe(){return{key:o_,name(){return this.getTranslatedPhrase(WP)},callback(){this.undo()},hidden(){const n=this.getPlugin("undoRedo");return!n||!n.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isUndoAvailable()}}}const MTe=[s_,r_,rw,ow,t_,i_,lw,o_,n_,aw,Vr,st,cw],ATe={[st]:pTe,[cw]:ETe,[s_]:RTe,[r_]:xTe,[rw]:wTe,[ow]:vTe,[t_]:bTe,[i_]:_Te,[lw]:STe,[o_]:TTe,[n_]:CTe,[aw]:yTe,[Vr]:mTe};function J4(){const n={};return et(ATe,(e,t)=>{n[t]=e()}),n}function PTe(n){return{key:"commentsAddEdit",name(){var e;const t=(e=this.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t!=null&&t.isCell()&&n.getCommentAtCell(t.row,t.col)?this.getTranslatedPhrase(tI):this.getTranslatedPhrase(eI)},callback(){const e=this.getSelectedRangeLast();n.setRange(e),n.show(),n.focusEditor()},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function ITe(n){return{key:"commentsRemove",name(){return this.getTranslatedPhrase(nI)},callback(){this.getSelectedRangeLast().forAll((t,i)=>{t>=0&&i>=0&&n.removeCommentAtCell(t,i,!1)}),this.render()},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function OTe(n){return{key:"commentsReadOnly",name(){const e=this.getTranslatedPhrase(iI);return sw(this.getSelectedRange(),(i,s)=>n.getCommentMeta(i,s,a_))?Xl(e):e},callback(){this.getSelectedRangeLast().forAll((t,i)=>{if(t>=0&&i>=0){const s=!!n.getCommentMeta(t,i,a_);n.updateCommentMeta(t,i,{[a_]:!s})}})},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||!n.getCommentAtCell(e.highlight.row,e.highlight.col)||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function kTe(n,e){e7(n,e),e.add(n)}function Dg(n,e,t){e7(n,e),e.set(n,t)}function e7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function HTe(n,e,t){return(e=DTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DTe(n){var e=NTe(n,"string");return typeof e=="symbol"?e:e+""}function NTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ah(n,e,t){return n.set(Po(n,e),t),t}function ht(n,e){return n.get(Po(n,e))}function Po(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const hw="comments",LTe=60,Ql="comment",uw="value",t7="style",a_="readOnly",l_=hw,XO=`plugin:${hw}`;var Qt=new WeakMap,Aa=new WeakMap,c_=new WeakMap,h_=new WeakMap,QO=new WeakMap,u_=new WeakMap,Pa=new WeakSet;class $Te extends Pt{constructor(){super(...arguments),kTe(this,Pa),HTe(this,"range",{}),Dg(this,Qt,null),Dg(this,Aa,null),Dg(this,c_,!1),Dg(this,h_,!1),Dg(this,QO,null),Dg(this,u_,"")}static get PLUGIN_KEY(){return hw}static get PLUGIN_PRIORITY(){return LTe}isEnabled(){return!!this.hot.getSettings()[hw]}enablePlugin(){var e=this;this.enabled||(ht(Qt,this)||(ah(Qt,this,new md(this.hot.rootDocument,this.hot.isRtl())),ht(Qt,this).addLocalHook("resize",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Po(Pa,e,UTe).call(e,...i)})),ht(Aa,this)||ah(Aa,this,new Z4(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",t=>this.addToContextMenu(t)),this.addHook("afterRenderer",(t,i,s,r,o,a)=>Po(Pa,this,WTe).call(this,t,a)),this.addHook("afterScroll",()=>Po(Pa,this,GTe).call(this)),this.addHook("afterBeginEditing",()=>this.hide()),this.addHook("afterDocumentKeyDown",t=>Po(Pa,this,YTe).call(this,t)),ht(Aa,this).addLocalHook("hide",()=>this.hide()),ht(Aa,this).addLocalHook("show",(t,i)=>this.showAtCell(t,i)),this.registerShortcuts(),this.registerListeners(),super.enablePlugin())}updatePlugin(){ht(Aa,this).updateDelay(this.getDisplayDelaySetting()),super.updatePlugin()}disablePlugin(){this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const e=this.hot.getShortcutManager(),t=e.getContext("grid"),i=e.addContext(XO);t.addShortcut({keys:[["Control","Alt","M"]],callback:()=>{const s=this.hot.getSelectedRangeLast();ah(h_,this,!0),this.hot.scrollToFocusedCell(()=>{this.setRange(s),this.show(),this.focusEditor(),e.setActiveContextName(XO),this.hot._registerTimeout(()=>{ah(h_,this,!1)})})},stopPropagation:!0,runOnlyIf:()=>{var s;return((s=this.hot.getSelectedRangeLast())===null||s===void 0?void 0:s.highlight.isCell())&&!ht(Qt,this).isVisible()},group:l_}),i.addShortcut({keys:[["Escape"]],callback:()=>{ht(Qt,this).setValue(ht(u_,this)),this.hide(),e.setActiveContextName("grid")},runOnlyIf:()=>ht(Qt,this).isVisible()&&ht(Qt,this).isFocused(),group:l_}),i.addShortcut({keys:[["Control/Meta","Enter"]],callback:()=>{this.hide(),e.setActiveContextName("grid")},runOnlyIf:()=>ht(Qt,this).isVisible()&&ht(Qt,this).isFocused(),group:l_})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(l_)}registerListeners(){const{rootDocument:e}=this.hot,t=this.getEditorInputElement();this.eventManager.addEventListener(e,"mouseover",i=>Po(Pa,this,BTe).call(this,i)),this.eventManager.addEventListener(e,"mousedown",i=>Po(Pa,this,FTe).call(this,i)),this.eventManager.addEventListener(e,"mouseup",()=>Po(Pa,this,VTe).call(this)),this.eventManager.addEventListener(t,"focus",()=>Po(Pa,this,zTe).call(this)),this.eventManager.addEventListener(t,"blur",()=>Po(Pa,this,jTe).call(this))}setRange(e){this.range=e}clearRange(){this.range={}}targetIsCellWithComment(e){const t=Uc(e.target,"TD","TBODY");return!!(t&&Fe(t,"htCommentCell")&&Uc(t,[this.hot.rootElement]))}targetIsCommentTextArea(e){return this.getEditorInputElement()===e.target}setComment(e){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const t=ht(Qt,this).getValue();let i="";e!=null?i=e:t!=null&&(i=t);const s=this.range.from.row,r=this.range.from.col;this.updateCommentMeta(s,r,{[uw]:i}),this.hot.render()}setCommentAtCell(e,t,i){this.setRange({from:this.hot._createCellCoords(e,t)}),this.setComment(i)}removeComment(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,Ql),e&&this.hot.render(),this.hide()}removeCommentAtCell(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.setRange({from:this.hot._createCellCoords(e,t)}),this.removeComment(i)}getComment(){const e=this.range.from.row,t=this.range.from.col;return this.getCommentMeta(e,t,uw)}getCommentAtCell(e,t){return this.getCommentMeta(e,t,uw)}show(){var e;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const{from:{row:t,col:i}}=this.range;if(t<0||t>this.hot.countSourceRows()-1||i<0||i>this.hot.countSourceCols()-1)return!1;const s=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return ht(Aa,this).cancelHiding(),ht(Qt,this).setValue((e=s[Ql]?s[Ql][uw]:null)!==null&&e!==void 0?e:""),ht(Qt,this).show(),this.refreshEditor(!0),!0}showAtCell(e,t){return this.setRange({from:this.hot._createCellCoords(e,t)}),this.show()}hide(){ht(Qt,this).hide()}refreshEditor(){var e,t;if(!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(!this.range.from||!ht(Qt,this).isVisible()))return;const{rowIndexMapper:s,columnIndexMapper:r}=this.hot,{row:o,col:a}=this.range.from;let l=s.getRenderableFromVisualIndex(o),c=r.getRenderableFromVisualIndex(a);const h=l===null;ht(Qt,this).setPosition(0,0),l===null&&(l=s.getRenderableFromVisualIndex(s.getNearestNotHiddenIndex(o,-1))),c===null&&(c=r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(a,-1)));const u=l===null,d=c===null;l=(e=l)!==null&&e!==void 0?e:0,c=(t=c)!==null&&t!==void 0?t:0;const{rootWindow:f,view:{_wt:g}}=this.hot,{wtTable:p}=g,m=g.getCell({row:l,col:c},!0),w=this.getCommentMeta(o,a,t7);w?ht(Qt,this).setSize(w.width,w.height):ht(Qt,this).resetSize();const y=d?0:p.getStretchedColumnWidth(c),C=h&&!u?jn(m):0,{left:R,top:_,width:x,height:M}=m.getBoundingClientRect(),{width:I,height:A}=ht(Qt,this).getSize(),{innerWidth:O,innerHeight:D}=this.hot.rootWindow,j=this.hot.rootDocument.documentElement;let Y=R+f.scrollX+y,Z=_+f.scrollY+C;this.hot.isRtl()&&(Y-=I+y),this.hot.isLtr()&&R+x+I>O?Y=R+f.scrollX-I-1:this.hot.isRtl()&&Y<-(j.scrollWidth-j.clientWidth)&&(Y=R+f.scrollX+y+1),_+A>D&&(Z-=A-M+1),ht(Qt,this).setPosition(Y,Z),ht(Qt,this).setReadOnlyState(this.getCommentMeta(o,a,a_)),ht(Qt,this).observeSize()}focusEditor(){ht(Qt,this).focus()}updateCommentMeta(e,t,i){const s=this.hot.getCellMeta(e,t)[Ql];let r;s?(r=qi(s),db(r,i)):r=i,this.hot.setCellMeta(e,t,Ql,r)}getCommentMeta(e,t,i){const s=this.hot.getCellMeta(e,t);if(s[Ql])return s[Ql][i]}addToContextMenu(e){e.items.push({name:st},PTe(this),ITe(this),OTe(this))}getDisplayDelaySetting(){const e=this.hot.getSettings()[hw];if(Je(e))return e.displayDelay}getEditorInputElement(){return ht(Qt,this).getInputElement()}destroy(){var e,t;(e=ht(Qt,this))===null||e===void 0||e.destroy(),(t=ht(Aa,this))===null||t===void 0||t.destroy(),super.destroy()}}function FTe(n){if(!(!this.hot.view||!this.hot.view._wt)&&!ht(c_,this)&&!this.targetIsCommentTextArea(n)){const e=Uc(n.target,"TD","TBODY");let t=null;e&&(t=this.hot.getCoords(e)),(!e||this.range.from&&t&&(this.range.from.row!==t.row||this.range.from.col!==t.col))&&this.hide()}}function BTe(n){const{rootDocument:e}=this.hot;if(!(ht(c_,this)||ht(Qt,this).isFocused()||Fe(n.target,"wtBorder")||ht(QO,this)===n.target||!ht(Qt,this)))if(ah(QO,this,e.elementFromPoint(n.clientX,n.clientY)),this.targetIsCellWithComment(n)){const t=this.hot._createCellRange(this.hot.getCoords(n.target));ht(Aa,this).show(t)}else Yc(n.target,e)&&!this.targetIsCommentTextArea(n)&&ht(Aa,this).hide()}function VTe(){ah(c_,this,!1)}function WTe(n,e){e[Ql]&&e[Ql][uw]&&ae(n,e.commentedCellClassName)}function jTe(){ah(u_,this,""),this.hot.getShortcutManager().setActiveContextName("grid"),this.setComment()}function zTe(){ah(u_,this,this.getComment()),this.hot.listen(),this.hot.getShortcutManager().setActiveContextName(XO)}function UTe(n,e){this.updateCommentMeta(this.range.from.row,this.range.from.col,{[t7]:{width:n,height:e}})}function YTe(n){ht(Qt,this).isVisible()&&Or(n)}function GTe(){ht(h_,this)||this.hide()}var n7=v0,KTe=TypeError,qTe=function(n,e){if(!delete n[e])throw new KTe("Cannot delete property "+n7(e)+" of "+n7(n))},XTe=ki,QTe=km,ZTe=Lm,JTe=F3,eMe=qTe,tMe=B3,nMe=[].unshift(0)!==1,iMe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(n){return n instanceof TypeError}},sMe=nMe||!iMe();XTe({target:"Array",proto:!0,arity:1,forced:sMe},{unshift:function(e){var t=QTe(this),i=ZTe(t),s=arguments.length;if(s){tMe(i+s);for(var r=i;r--;){var o=r+s;r in t?t[o]=t[r]:eMe(t,o)}for(var a=0;a<s;a++)t[a]=arguments[a]}return JTe(t,i+s)}});function ZO(n,e,t){return(e=rMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rMe(n){var e=oMe(n,"string");return typeof e=="symbol"?e:e+""}function oMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class i7{constructor(e){ZO(this,"hot",void 0),ZO(this,"commands",{}),ZO(this,"commonCallback",null),this.hot=e}registerCommand(e,t){this.commands[e]=t}setCommonCallback(e){this.commonCallback=e}execute(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];const r=e.split(":"),o=r[0],a=r.length===2?r[1]:null;let l=this.commands[o];if(!l)throw new Error(`Menu command '${o}' not exists.`);if(a&&l.submenu&&(l=aMe(a,l.submenu.items)),l.disabled===!0||typeof l.disabled=="function"&&l.disabled.call(this.hot)===!0||_n(l,"submenu"))return;const c=[];typeof l.callback=="function"&&c.push(l.callback),typeof this.commonCallback=="function"&&c.push(this.commonCallback),i.unshift(r.join(":")),F(c,h=>h.apply(this.hot,i))}}function aMe(n,e){let t;return F(e,i=>{const s=i.key?i.key.split(":"):null;if(Array.isArray(s)&&s[1]===n)return t=i,!1}),t}function JO(n,e,t){return(e=lMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lMe(n){var e=cMe(n,"string");return typeof e=="symbol"?e:e+""}function cMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class s7{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;JO(this,"hot",void 0),JO(this,"predefinedItems",J4()),JO(this,"defaultOrderPattern",void 0),this.hot=e,this.defaultOrderPattern=t}setPredefinedItems(e){const t={};this.defaultOrderPattern.length=0,et(e,(i,s)=>{let r="";i.name===st?(t[st]=i,r=st):isNaN(parseInt(s,10))?(i.key=i.key===void 0?s:i.key,t[s]=i,r=i.key):(t[i.key]=i,r=i.key),this.defaultOrderPattern.push(r)}),this.predefinedItems=t}getItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return hMe(e,this.defaultOrderPattern,this.predefinedItems)}}function hMe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=[];let s=n;return s&&s.items?s=s.items:Array.isArray(s)||(s=e),Je(s)?et(s,(r,o)=>{let a=t[typeof r=="string"?r:o];a||(a=r),Je(r)?Zn(a,r):typeof a=="string"&&(a={name:a}),a.key===void 0&&(a.key=o),i.push(a)}):F(s,(r,o)=>{let a=t[r];!a&&MTe.indexOf(r)>=0||(a||(a={name:r,key:`${o}`}),Je(r)&&Zn(a,r),a.key===void 0&&(a.key=o),i.push(a))}),i}function lh(n,e,t){return(e=uMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uMe(n){var e=dMe(n,"string");return typeof e=="symbol"?e:e+""}function dMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class fMe{constructor(e,t){lh(this,"top",void 0),lh(this,"topRelative",void 0),lh(this,"left",void 0),lh(this,"leftRelative",void 0),lh(this,"scrollTop",void 0),lh(this,"scrollLeft",void 0),lh(this,"cellHeight",void 0),lh(this,"cellWidth",void 0);const i=t.scrollY,s=t.scrollX;let r,o,a,l,c,h;this.rootWindow=t,this.type=this.getSourceType(e),this.type==="literal"?(r=parseInt(e.top,10),a=parseInt(e.left,10),c=e.height||0,h=e.width||0,o=r,l=a,r+=i,a+=s):this.type==="event"&&(r=parseInt(e.pageY,10),a=parseInt(e.pageX,10),c=e.target.clientHeight,h=e.target.clientWidth,o=r-i,l=a-s),this.top=r,this.topRelative=o,this.left=a,this.leftRelative=l,this.scrollTop=i,this.scrollLeft=s,this.cellHeight=c,this.cellWidth=h}getSourceType(e){let t="literal";return e instanceof Event&&(t="event"),t}fitsAbove(e){return this.topRelative>=e.offsetHeight}fitsBelow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+e.offsetHeight<=t}fitsOnRight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+e.offsetWidth<=t}fitsOnLeft(e){return this.leftRelative>=e.offsetWidth}}function dw(n,e,t){gMe(n,e),e.set(n,t)}function gMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pt(n,e){return n.get(r7(n,e))}function d_(n,e,t){return n.set(r7(n,e),t),t}function r7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var fs=new WeakMap,ch=new WeakMap,Os=new WeakMap,ek=new WeakMap,Ng=new WeakMap;class pMe{constructor(e){dw(this,fs,void 0),dw(this,ch,void 0),dw(this,Os,void 0),dw(this,ek,!1),dw(this,Ng,{above:0,below:0,left:0,right:0}),d_(ek,this,e)}setOffset(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return pt(Ng,this)[e]=t,this}setElement(e){return d_(fs,this,e),this}setParentElement(e){return d_(ch,this,e),this}updatePosition(e){d_(Os,this,new fMe(e,pt(fs,this).ownerDocument.defaultView)),pt(ek,this)?(pt(Os,this).fitsBelow(pt(fs,this))?this.setPositionBelowCursor():pt(Os,this).fitsAbove(pt(fs,this))?this.setPositionAboveCursor():this.setPositionBelowCursor(),this.updateHorizontalPosition()):(this.setPositionBelowCursor(),this.setPositionOnRightOfCursor())}updateHorizontalPosition(){pt(fs,this).dir==="rtl"?pt(Os,this).fitsOnLeft(pt(fs,this))?this.setPositionOnLeftOfCursor():this.setPositionOnRightOfCursor():pt(Os,this).fitsOnRight(pt(fs,this))?this.setPositionOnRightOfCursor():this.setPositionOnLeftOfCursor()}setPositionAboveCursor(){let e=pt(Ng,this).above+pt(Os,this).top-pt(fs,this).offsetHeight;pt(ch,this)&&(e=pt(Os,this).top+pt(Os,this).cellHeight-pt(fs,this).offsetHeight+3),pt(fs,this).style.top=`${e}px`}setPositionBelowCursor(){let e=pt(Ng,this).below+pt(Os,this).top+1;pt(ch,this)&&(e=pt(Os,this).top-1),pt(fs,this).style.top=`${e}px`}setPositionOnRightOfCursor(){let e=pt(Os,this).left;if(pt(ch,this)){const t=Number.parseInt(getComputedStyle(pt(ch,this).querySelector(".htCore")).borderRightWidth,10);e+=pt(Os,this).cellWidth+t}else e+=pt(Ng,this).right;pt(fs,this).style.left=`${e}px`}setPositionOnLeftOfCursor(){let e=pt(Ng,this).left+pt(Os,this).left-pt(fs,this).offsetWidth;if(pt(ch,this)){const t=Number.parseInt(getComputedStyle(pt(ch,this).querySelector(".htCore")).borderLeftWidth,10);e-=t}pt(fs,this).style.left=`${e}px`}}function o7(n){let{initialPage:e=-1,size:t=()=>0,onItemSelect:i=()=>{},onClear:s=()=>{}}=n;const r=new Set;let o=Wt(e,-1,g()-1);function a(m,w){const y=g()-1;return m<0&&(m=y),m>y&&(m=0),r.has(m)?-1:(r.add(m),i(m,!1)===!1&&(m=a(w===1?++m:--m,w)),m)}function l(m){m>-1&&m<g()&&i(m,!0)!==!1&&(o=m)}function c(){return o}function h(){g()>0&&(r.clear(),o=a(0,1))}function u(){g()>0&&(r.clear(),o=a(g()-1,-1))}function d(){g()>0&&(r.clear(),o=a(++o,1))}function f(){g()>0&&(r.clear(),o=a(--o,-1))}function g(){return Math.max(t(),0)}function p(){r.clear(),o=e,s()}return{setCurrentPage:l,getCurrentPage:c,toFirstItem:h,toLastItem:u,toNextItem:d,toPreviousItem:f,getSize:g,clear:p}}function mMe(n){return ct(n,e=>({start:e.getTopStartCorner(),end:e.getBottomEndCorner()}))}function tk(n){return _n(n,"submenu")}function nk(n){return new RegExp(st,"i").test(n.name)}function f_(n,e){return n.disabled===!0||typeof n.disabled=="function"&&n.disabled.call(e)===!0}function a7(n){return _n(n,"disableSelection")}function bMe(n){return Fe(n,"htSeparator")}function wMe(n){return Fe(n,"htSubmenu")}function vMe(n){return Fe(n,"htDisabled")}function yMe(n){return Fe(n,"htSelectionDisabled")}function CMe(n,e){return!n.hidden||!(typeof n.hidden=="function"&&n.hidden.call(e))}function l7(n,e){const t=n.slice(0);for(let i=0;i<t.length&&t[i].name===e;)t.shift();return t}function SMe(n,e){let t=n.slice(0);return t.reverse(),t=l7(t,e),t.reverse(),t}function _Me(n){const e=[];return F(n,(t,i)=>{i>0?e[e.length-1].name!==t.name&&e.push(t):e.push(t)}),e}function RMe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:st,t=n.slice(0);return t=l7(t,e),t=SMe(t,e),t=_Me(t),t}function xMe(n){return n.checkable===!0}function EMe(n){return o7({size:()=>n.countRows(),onItemSelect(e,t){const i=n.getCell(e,0);if(!i||bMe(i)||vMe(i)||yMe(i))return!1;n.selectCell(e,0,...t?[e,0,!1,!1]:[])},onClear(){n.deselectCell()}})}function TMe(n){const{hot:e,hotMenu:t}=n;return[{keys:[["Control/Meta","A"]],forwardToContext:e.getShortcutManager().getContext("grid"),callback:()=>n.close(!0)},{keys:[["Tab"],["Shift","Tab"]],callback:(i,s)=>{const r=e.getSettings(),o=typeof r.tabMoves=="function"?r.tabMoves(i):r.tabMoves;s.includes("shift")?e.selection.transformStart(-o.row,-o.col):e.selection.transformStart(o.row,o.col),n.close(!0)}},{keys:[["Escape"]],callback:()=>n.close()},{keys:[["ArrowDown"]],callback:()=>n.getNavigator().toNextItem()},{keys:[["ArrowUp"]],callback:()=>n.getNavigator().toPreviousItem()},{keys:[["ArrowRight"]],callback:()=>{const i=t.getSelectedLast();if(i){const s=n.openSubMenu(i[0]);s&&s.getNavigator().toFirstItem()}}},{keys:[["ArrowLeft"]],callback:()=>{t.getSelectedLast()&&n.isSubMenu()&&(n.close(),n.isSubMenu()&&n.parentMenu.hotMenu.listen())}},{keys:[["Control/Meta","ArrowUp"],["Home"]],callback:()=>n.getNavigator().toFirstItem()},{keys:[["Control/Meta","ArrowDown"],["End"]],callback:()=>n.getNavigator().toLastItem()},{keys:[["Enter"],["Space"]],callback:i=>{const s=t.getSelectedLast();s&&(t.getSourceDataAtRow(s[0]).submenu?n.openSubMenu(s[0]).getNavigator().toFirstItem():(n.executeCommand(i),n.close(!0)))}},{keys:[["PageUp"]],callback:()=>{t.getSelectedLast()?t.selection.transformStart(-t.countVisibleRows(),0):n.getNavigator().toFirstItem()}},{keys:[["PageDown"]],callback:()=>{t.getSelectedLast()?t.selection.transformStart(t.countVisibleRows(),0):n.getNavigator().toLastItem()}}]}const c7="menu",h7=c7;function MMe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=[];i(TMe(n)),e.forEach(c=>{let{shortcuts:h,contextName:u}=c;s(h,u)});function i(c,h){a(h).addShortcuts(c,{group:c7})}function s(c,h){const u=a(h);c.forEach(d=>{let{keys:f}=d;f.forEach(g=>u.removeShortcutsByKeys(g))}),t.push({shortcuts:c,contextName:h}),i(c,h)}function r(){return[...t]}function o(c){return c?`${h7}:${c}`:h7}function a(c){var h;const u=n.hotMenu.getShortcutManager(),d=o(c);return(h=u.getContext(d))!==null&&h!==void 0?h:u.addContext(d)}function l(c){n.hotMenu.getShortcutManager().setActiveContextName(o(c))}return{addCustomShortcuts:s,getCustomShortcuts:r,getContext:a,listen:l}}function AMe(n){return(e,t,i,s,r,o)=>{const a=e.getSourceDataAtRow(i),l=n.rootDocument.createElement("div"),c=typeof o=="function"?o.call(n):o,h=typeof a.ariaLabel=="function"?a.ariaLabel.call(n):a.ariaLabel,u=typeof a.ariaChecked=="function"?a.ariaChecked.call(n):a.ariaChecked;if(vo(t),ae(l,"htItemWrapper"),n.getSettings().ariaTags){const d=!f_(a,n)&&!a7(a)&&!nk(a);$e(t,[...xMe(a)?[xme(),aC(h),jj(u)]:[Rme(),aC(c)],...d?[Zf(-1)]:[],...f_(a,n)?[Ome()]:[],...tk(a)?[Ar(!1)]:[]])}t.className="",t.appendChild(l),nk(a)?ae(t,"htSeparator"):typeof a.renderer=="function"?(ae(t,"htCustomMenuRenderer"),t.appendChild(a.renderer(e,l,i,s,r,c))):$u(l,c),f_(a,n)?ae(t,"htDisabled"):a7(a)?ae(t,"htSelectionDisabled"):tk(a)&&ae(t,"htSubmenu")}}function ik(n,e,t){PMe(n,e),e.set(n,t)}function PMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ia(n,e,t){return(e=IMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IMe(n){var e=OMe(n,"string");return typeof e=="symbol"?e:e+""}function OMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sk(n,e,t){return n.set(u7(n,e),t),t}function wd(n,e){return n.get(u7(n,e))}function u7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const d7=215;var fw=new WeakMap,g_=new WeakMap,p_=new WeakMap;class Lg{get tableBorderWidth(){return wd(p_,this)===void 0&&this.hotMenu&&sk(p_,this,parseInt(pa(this.hotMenu.view._wt.wtTable.TABLE).borderWidth,10)),wd(p_,this)}constructor(e,t){var i=this;Ia(this,"hot",void 0),Ia(this,"options",void 0),Ia(this,"eventManager",new kr(this)),Ia(this,"container",void 0),Ia(this,"positioner",void 0),Ia(this,"hotMenu",null),Ia(this,"hotSubMenus",{}),Ia(this,"parentMenu",void 0),Ia(this,"menuItems",null),Ia(this,"origOutsideClickDeselects",null),ik(this,fw,void 0),ik(this,g_,void 0),ik(this,p_,void 0),this.hot=e,this.options=t||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:d7,container:this.hot.rootDocument.documentElement},this.container=this.createContainer(this.options.name),this.positioner=new pMe(this.options.keepInViewport),this.parentMenu=this.options.parent||null,this.registerEvents(),this.isSubMenu()&&this.addLocalHook("afterSelectionChange",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.parentMenu.runLocalHooks("afterSelectionChange",...r)})}registerEvents(){let e=this.hot.rootWindow;for(;e;)this.eventManager.addEventListener(e.document,"mousedown",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(e.document,"touchstart",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(e.document,"contextmenu",t=>this.onDocumentContextMenu(t)),e=Nu(e)}setMenuItems(e){this.menuItems=e}getNavigator(){return wd(fw,this)}getKeyboardShortcutsCtrl(){return wd(g_,this)}getSelectedItem(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}hasSelectedItem(){return Array.isArray(this.hotMenu.getSelectedLast())}isSubMenu(){return this.parentMenu!==null}open(){this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";const e=fC(a=>this.openSubMenu(a),300),t=this.options.minWidth||d7;let i=!1,s=kl(this.menuItems,a=>(a.key===cw&&(i=!0),CMe(a,this.hot)));if(s.length<1&&!i)s.push(J4()[cw]);else if(s.length===0)return;s=RMe(s,st);let r=!1;const o={data:s,colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth(a){return Me(a)&&a<t?t:a},autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,hiddenRows:!0,maxCols:1,columns:[{data:"name",renderer:AMe(this.hot)}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",layoutDirection:this.hot.isRtl()?"rtl":"ltr",ariaTags:!1,beforeOnCellMouseOver:(a,l)=>{wd(fw,this).setCurrentPage(l.row)},afterOnCellMouseOver:(a,l)=>{this.isAllSubMenusClosed()?e(l.row):this.openSubMenu(l.row)},rowHeights:a=>s[a].name===st?1:void 0,afterOnCellContextMenu:a=>{a.preventDefault(),bA()&&r&&this.hasSelectedItem()&&this.close(!0)},afterSelection:(a,l,c,h,u)=>{this.hotMenu.view.isMouseDown()&&(u.value=!0),this.runLocalHooks("afterSelectionChange",this.getSelectedItem())},beforeOnCellMouseUp:a=>{this.hasSelectedItem()&&(r=!this.isCommandPassive(this.getSelectedItem()),this.executeCommand(a))},afterOnCellMouseUp:a=>{(!bA()||!Qc(a))&&r&&this.hasSelectedItem()&&(Dl()||mA()?this.hot._registerTimeout(()=>this.close(!0),325):this.close(!0))},afterUnlisten:()=>{!this.hasSelectedItem()&&this.isOpened()&&this.hotMenu.listen()}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new this.hot.constructor(this.container,o),this.hotMenu.addHook("afterInit",()=>this.onAfterInit()),this.hotMenu.init(),sk(fw,this,EMe(this.hotMenu)),sk(g_,this,MMe(this)),wd(g_,this).listen(),this.focus(),this.isSubMenu()&&this.addLocalHook("afterOpen",()=>this.parentMenu.runLocalHooks("afterSubmenuOpen",this)),this.runLocalHooks("afterOpen",this)}close(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isOpened()){if(e&&this.isSubMenu())this.parentMenu.close();else if(wd(fw,this).clear(),this.closeAllSubMenus(),this.container.style.display="none",this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.isSubMenu()){if(this.hot.getSettings().ariaTags){const t=this.parentMenu.hotMenu.getSelectedLast();if(t){const i=this.parentMenu.hotMenu.getCell(t[0],0);$e(i,[Ar(!1)])}}this.parentMenu.hotMenu.listen()}}}openSubMenu(e){if(!this.hotMenu)return!1;const t=this.hotMenu.getCell(e,0);if(this.closeAllSubMenus(),!t||!wMe(t))return!1;const i=this.hotMenu.getSourceDataAtRow(e),s=new Lg(this.hot,{parent:this,name:i.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return s.setMenuItems(i.submenu.items),s.open(),s.setPosition(t.getBoundingClientRect()),this.hotSubMenus[i.key]=s,this.hot.getSettings().ariaTags&&$e(t,[Ar(!0)]),s}closeSubMenu(e){const t=this.hotMenu.getSourceDataAtRow(e),i=this.hotSubMenus[t.key];if(i){i.destroy(),delete this.hotSubMenus[t.key];const s=this.hotMenu.getCell(e,0);this.hot.getSettings().ariaTags&&$e(s,[Ar(!1)])}}closeAllSubMenus(){F(this.hotMenu.getData(),(e,t)=>this.closeSubMenu(t))}isAllSubMenusClosed(){return Object.keys(this.hotSubMenus).length===0}focus(){this.isOpened()&&(this.hotMenu.rootElement.focus({preventScroll:!0}),this.getKeyboardShortcutsCtrl().listen(),this.hotMenu.listen())}destroy(){const e=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),e&&e.removeChild(this.container)}isOpened(){return this.hotMenu!==null}executeCommand(e){if(!this.isOpened()||!this.hasSelectedItem())return;const t=this.getSelectedItem();if(this.runLocalHooks("select",t,e),this.isCommandPassive(t))return;const i=this.hot.getSelectedRange(),s=i?mMe(i):[];this.runLocalHooks("executeCommand",t.key,s,e),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",t.key,s,e)}isCommandPassive(e){return e.isCommand===!1||nk(e)||f_(e,this.hot)||tk(e)}setOffset(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.positioner.setOffset(e,t)}setPosition(e){this.isSubMenu()&&this.positioner.setParentElement(this.parentMenu.container),this.positioner.setElement(this.container).updatePosition(e)}updateMenuDimensions(){const{wtTable:e}=this.hotMenu.view._wt,t=this.hotMenu.getSettings().data,i=e.hider.style,s=e.holder.style,r=parseInt(i.width,10),o=Qn(t,(a,l,c)=>{const u=this.hotMenu.getCell(c,0)?jn(this.hotMenu.getCell(c,0)):0;return a+(l.name===st?1:u)},0);s.width=`${r+3}px`,s.height=`${o+3}px`,i.height=s.height}createContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const t=this.options.container.ownerDocument;let i=e,s;return i&&(rn(i)&&(i=i.call(this.hot),i===null||nn(i)?i="":i=i.toString()),i=i.replace(/[^A-z0-9]/g,"_"),i=`${this.options.className}Sub_${i}`,s=t.querySelector(`.${this.options.className}.${i}`)),s||(s=t.createElement("div"),ae(s,`htMenu ${this.options.className}`),i&&ae(s,i),this.options.container.appendChild(s)),s}onAfterInit(){this.updateMenuDimensions(),this.hot.getSettings().ariaTags&&$e(this.hotMenu.rootElement,[_me(),Zf(-1)])}onDocumentMouseDown(e){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!Yc(e.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&&!Yc(e.target,".htMenu")&&this.close(!0))}onDocumentContextMenu(e){this.isOpened()&&Fe(e.target,"htCore")&&Yc(e.target,this.hotMenu.rootElement)&&e.preventDefault()}}Bt(Lg,Di);function kMe(n,e){HMe(n,e),e.add(n)}function HMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rk(n,e,t){return(e=DMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DMe(n){var e=NMe(n,"string");return typeof e=="symbol"?e:e+""}function NMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function m_(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const gw="contextMenu",LMe=70,f7=gw;xe.getSingleton().register("afterContextMenuDefaultOptions"),xe.getSingleton().register("beforeContextMenuShow"),xe.getSingleton().register("afterContextMenuShow"),xe.getSingleton().register("afterContextMenuHide"),xe.getSingleton().register("afterContextMenuExecute");var pw=new WeakSet;class b_ extends Pt{constructor(){super(...arguments),kMe(this,pw),rk(this,"commandExecutor",new i7(this.hot)),rk(this,"itemsFactory",null),rk(this,"menu",null)}static get PLUGIN_KEY(){return gw}static get PLUGIN_PRIORITY(){return LMe}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[s_,r_,st,rw,ow,st,i_,lw,st,o_,n_,st,aw,st,Vr]}isEnabled(){return!!this.hot.getSettings()[gw]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[gw];typeof t.callback=="function"&&this.commandExecutor.setCommonCallback(t.callback),this.menu=new Lg(this.hot,{className:"htContextMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",()=>m_(pw,this,FMe).call(this)),this.menu.addLocalHook("afterOpen",()=>m_(pw,this,BMe).call(this)),this.menu.addLocalHook("afterClose",()=>m_(pw,this,VMe).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e.executeCommand.call(e,...s)}),this.addHook("afterOnCellContextMenu",i=>m_(pw,this,$Me).call(this,i)),this.registerShortcuts(),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control/Meta","Shift","Backslash"],["Shift","F10"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();this.hot.scrollToFocusedCell();const t=this.hot.getCell(e.row,e.col,!0).getBoundingClientRect(),i=e_(this.menu.container,this.hot.rootDocument);this.open({left:t.left+i.left,top:t.top+i.top-1+t.height},{left:t.width,above:-t.height}),this.menu.getNavigator().toFirstItem()},runOnlyIf:()=>{var e;const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t&&this.hot.selection.isCellVisible(t)&&!this.menu.isOpened()},group:f7})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(f7)}open(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{above:0,below:0,left:0,right:0};if((t=this.menu)!==null&&t!==void 0&&t.isOpened())return;this.prepareMenuItems(),this.menu.open(),this.menu.tableBorderWidth>0||(i.below+=1,i.right+=1,i.above-=1,i.left-=1),et(i,(r,o)=>{this.menu.setOffset(o,r)}),this.menu.setPosition(e)}close(){var e;(e=this.menu)===null||e===void 0||e.close(),this.itemsFactory=null}executeCommand(e){this.itemsFactory===null&&this.prepareMenuItems();for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.commandExecutor.execute(e,...i)}prepareMenuItems(){this.itemsFactory=new s7(this.hot,b_.DEFAULT_ITEMS);const e=this.hot.getSettings()[gw],t={items:this.itemsFactory.getItems(e)};this.hot.runHooks("afterContextMenuDefaultOptions",t),this.itemsFactory.setPredefinedItems(t.items);const i=this.itemsFactory.getItems(e);this.hot.runHooks("beforeContextMenuSetItems",i),this.menu.setMenuItems(i),F(i,s=>this.commandExecutor.registerCommand(s.key,s))}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function $Me(n){const e=this.hot.getSettings(),t=e.rowHeaders,i=e.colHeaders;function s(a){return a.nodeName==="TD"||a.parentNode.nodeName==="TD"}const r=n.target;if(this.close(),Fe(r,"handsontableInput")||(n.preventDefault(),n.stopPropagation(),!(t||i)&&!s(r)&&!(Fe(r,"current")&&Fe(r,"wtBorder"))))return;const o=e_(this.menu.container,this.hot.rootDocument);this.open({top:n.clientY+o.top,left:n.clientX+o.left})}function FMe(){this.hot.runHooks("beforeContextMenuShow",this)}function BMe(){this.hot.runHooks("afterContextMenuShow",this)}function VMe(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}b_.SEPARATOR={name:st};function WMe(n){return{key:"copy",name(){return this.getTranslatedPhrase(UP)},callback(){n.copyCellsOnly()},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function jMe(n){return{key:"copy_column_headers_only",name(){const e=this.getSelectedRangeLast(),t=e?Wt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(KP,t)},callback(){n.copyColumnHeadersOnly()},disabled(){if(!this.hasColHeaders())return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function zMe(n){return{key:"copy_with_column_group_headers",name(){const e=this.getSelectedRangeLast(),t=e?Wt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(GP,t)},callback(){n.copyWithAllColumnHeaders()},disabled(){if(!this.hasColHeaders()||!this.getSettings().nestedHeaders)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function UMe(n){return{key:"copy_with_column_headers",name(){const e=this.getSelectedRangeLast(),t=e?Wt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(YP,t)},callback(){n.copyWithColumnHeaders()},disabled(){if(!this.hasColHeaders())return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function YMe(n){return{key:"cut",name(){return this.getTranslatedPhrase(qP)},callback(){n.cut()},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}class GMe{constructor(){this.data={}}setData(e,t){this.data[e]=t}getData(e){return this.data[e]||void 0}}class KMe{constructor(){this.clipboardData=new GMe}preventDefault(){}}function qMe(n,e){g7(n,e),e.add(n)}function $g(n,e,t){g7(n,e),e.set(n,t)}function g7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gs(n,e){return n.get(Bg(n,e))}function Fg(n,e,t){return n.set(Bg(n,e),t),t}function Bg(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var hh=new WeakMap,ok=new WeakMap,mw=new WeakMap,ak=new WeakMap,lk=new WeakMap,bw=new WeakMap,ww=new WeakSet;class XMe{constructor(e){let{countRows:t,countColumns:i,rowsLimit:s,columnsLimit:r,countColumnHeaders:o}=e;qMe(this,ww),$g(this,hh,void 0),$g(this,ok,void 0),$g(this,mw,void 0),$g(this,ak,void 0),$g(this,lk,void 0),$g(this,bw,void 0),Fg(ok,this,t),Fg(mw,this,i),Fg(ak,this,s),Fg(lk,this,r),Fg(bw,this,o)}setSelectedRange(e){Fg(hh,this,e)}getCellsRange(){if(gs(ok,this).call(this)===0||gs(mw,this).call(this)===0)return null;const{row:e,col:t}=gs(hh,this).getTopStartCorner(),{row:i,col:s}=gs(hh,this).getBottomEndCorner(),r=Bg(ww,this,QMe).call(this,e,i),o=Bg(ww,this,ck).call(this,t,s);return{isRangeTrimmed:i!==r||s!==o,startRow:e,startCol:t,endRow:r,endCol:o}}getMostBottomColumnHeadersRange(){if(gs(mw,this).call(this)===0||gs(bw,this).call(this)===0)return null;const{col:e}=gs(hh,this).getTopStartCorner(),{col:t}=gs(hh,this).getBottomEndCorner(),i=Bg(ww,this,ck).call(this,e,t);return{isRangeTrimmed:t!==i,startRow:-1,startCol:e,endRow:-1,endCol:i}}getAllColumnHeadersRange(){if(gs(mw,this).call(this)===0||gs(bw,this).call(this)===0)return null;const{col:e}=gs(hh,this).getTopStartCorner(),{col:t}=gs(hh,this).getBottomEndCorner(),i=Bg(ww,this,ck).call(this,e,t);return{isRangeTrimmed:t!==i,startRow:-gs(bw,this).call(this),startCol:e,endRow:-1,endCol:i}}}function ck(n,e){return Math.min(e,Math.max(n+gs(lk,this).call(this)-1,n))}function QMe(n,e){return Math.min(e,Math.max(n+gs(ak,this).call(this)-1,n))}function p7(n){const e=[],t=[];return F(n,i=>{const s=Math.min(i.startRow,i.endRow),r=Math.max(i.startRow,i.endRow);Oe(s,r,l=>{e.indexOf(l)===-1&&e.push(l)});const o=Math.min(i.startCol,i.endCol),a=Math.max(i.startCol,i.endCol);Oe(o,a,l=>{t.indexOf(l)===-1&&t.push(l)})}),{rows:e,columns:t}}function ZMe(n,e){m7(n,e),e.add(n)}function uh(n,e,t){m7(n,e),e.set(n,t)}function m7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vw(n,e,t){return(e=JMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JMe(n){var e=eAe(n,"string");return typeof e=="symbol"?e:e+""}function eAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ks(n,e){return n.get(Hs(n,e))}function Io(n,e,t){return n.set(Hs(n,e),t),t}function Hs(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}xe.getSingleton().register("afterCopyLimit"),xe.getSingleton().register("modifyCopyableRange"),xe.getSingleton().register("beforeCut"),xe.getSingleton().register("afterCut"),xe.getSingleton().register("beforePaste"),xe.getSingleton().register("afterPaste"),xe.getSingleton().register("beforeCopy"),xe.getSingleton().register("afterCopy");const w_="copyPaste",tAe=80,nAe=["fragmentSelection"],b7=['<meta name="generator" content="Handsontable"/>','<style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>'].join("");var hk=new WeakMap,uk=new WeakMap,dk=new WeakMap,Vg=new WeakMap,v_=new WeakMap,y_=new WeakMap,Wg=new WeakMap,C_=new WeakMap,sr=new WeakSet;class iAe extends Pt{constructor(){super(...arguments),ZMe(this,sr),vw(this,"columnsLimit",1/0),vw(this,"rowsLimit",1/0),vw(this,"pasteMode","overwrite"),vw(this,"uiContainer",this.hot.rootDocument.body),uh(this,hk,!1),uh(this,uk,!1),uh(this,dk,!1),uh(this,Vg,"cells-only"),uh(this,v_,!1),uh(this,y_,!1),uh(this,Wg,new XMe({countRows:()=>this.hot.countRows(),countColumns:()=>this.hot.countCols(),rowsLimit:()=>this.rowsLimit,columnsLimit:()=>this.columnsLimit,countColumnHeaders:()=>this.hot.view.getColumnHeadersCount()})),uh(this,C_,!1),vw(this,"copyableRanges",[])}static get PLUGIN_KEY(){return w_}static get SETTING_KEYS(){return[w_,...nAe]}static get PLUGIN_PRIORITY(){return tAe}isEnabled(){return!!this.hot.getSettings()[w_]}enablePlugin(){var e=this;if(this.enabled)return;const{[w_]:t}=this.hot.getSettings();if(typeof t=="object"){var i,s;this.pasteMode=(i=t.pasteMode)!==null&&i!==void 0?i:this.pasteMode,this.rowsLimit=isNaN(t.rowsLimit)?this.rowsLimit:t.rowsLimit,this.columnsLimit=isNaN(t.columnsLimit)?this.columnsLimit:t.columnsLimit,Io(hk,this,!!t.copyColumnHeaders),Io(uk,this,!!t.copyColumnGroupHeaders),Io(dk,this,!!t.copyColumnHeadersOnly),this.uiContainer=(s=t.uiContainer)!==null&&s!==void 0?s:this.uiContainer}this.addHook("afterContextMenuDefaultOptions",r=>Hs(sr,this,oAe).call(this,r)),this.addHook("afterSelection",function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Hs(sr,e,aAe).call(e,...o)}),this.addHook("afterSelectionEnd",()=>Hs(sr,this,lAe).call(this)),this.eventManager.addEventListener(this.hot.rootDocument,"copy",function(){return e.onCopy(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"cut",function(){return e.onCut(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"paste",function(){return e.onPaste(...arguments)}),gA()&&(this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseenter",function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Hs(sr,e,cAe).call(e,...o)}),this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseleave",function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Hs(sr,e,hAe).call(e,...o)}),this.addHook("afterSelection",()=>Hs(sr,this,uAe).call(this))),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){super.disablePlugin()}copy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"cells-only";Io(Vg,this,e),Io(v_,this,!0),Hs(sr,this,w7).call(this,"copy")}copyCellsOnly(){this.copy("cells-only")}copyColumnHeadersOnly(){this.copy("column-headers-only")}copyWithAllColumnHeaders(){this.copy("with-column-group-headers")}copyWithColumnHeaders(){this.copy("with-column-headers")}cut(){Io(y_,this,!0),Hs(sr,this,w7).call(this,"cut")}getRangedCopyableData(e){return Ub(this.getRangedData(e))}getRangedData(e){const t=[],{rows:i,columns:s}=p7(e);return F(i,r=>{const o=[];F(s,a=>{r<0?o.push(this.hot.getColHeader(a,r)):o.push(this.hot.getCopyableData(r,a))}),t.push(o)}),t}paste(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;if(!e&&!t)return;const i=new KMe;e&&i.clipboardData.setData("text/plain",e),t&&i.clipboardData.setData("text/html",t),this.onPaste(i)}setCopyableText(){const e=this.hot.getSelectedRangeLast();if(!e)return;if(e.isSingleHeader()){this.copyableRanges=[];return}ks(Wg,this).setSelectedRange(e);const t=new Map([["headers",null],["cells",null]]);ks(Vg,this)==="column-headers-only"?t.set("headers",ks(Wg,this).getMostBottomColumnHeadersRange()):(ks(Vg,this)==="with-column-headers"?t.set("headers",ks(Wg,this).getMostBottomColumnHeadersRange()):ks(Vg,this)==="with-column-group-headers"&&t.set("headers",ks(Wg,this).getAllColumnHeadersRange()),t.set("cells",ks(Wg,this).getCellsRange())),this.copyableRanges=Array.from(t.values()).filter(s=>s!==null).map(s=>{let{startRow:r,startCol:o,endRow:a,endCol:l}=s;return{startRow:r,startCol:o,endRow:a,endCol:l}}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges);const i=t.get("cells");if(i!==null&&i.isRangeTrimmed){const{startRow:s,startCol:r,endRow:o,endCol:a}=i;this.hot.runHooks("afterCopyLimit",o-s+1,a-r+1,this.rowsLimit,this.columnsLimit)}}isEditorOpened(){var e;return(e=this.hot.getActiveEditor())===null||e===void 0?void 0:e.isOpened()}populateValues(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.hot.getSelectedRangeLast();if(!e.length)return;const i=e.length,s=e[0].length,r=[],{row:o,col:a}=t.getTopStartCorner(),{row:l,col:c}=t.getBottomEndCorner();let h=o,u=a,d=o,f=a;for(;r.length<i||h<=l;){const{skipRowOnPaste:g,visualRow:p}=this.hot.getCellMeta(h,a);if(h=p+1,g===!0)continue;d=p,u=a;const m=[],w=r.length%i;for(;m.length<s||u<=c;){const{skipColumnOnPaste:y,visualCol:C}=this.hot.getCellMeta(o,u);if(u=C+1,y===!0)continue;f=C;const R=m.length%s;m.push(e[w][R])}r.push(m)}return Io(C_,this,!0),this.hot.populateFromArray(o,a,r,void 0,void 0,"CopyPaste.paste",this.pasteMode),[o,a,d,f]}onCopy(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),s=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!ks(v_,this)||this.isEditorOpened()||e.target instanceof HTMLElement&&(s&&e.target!==i||!s&&e.target!==this.hot.rootDocument.body))return;e.preventDefault(),this.setCopyableText(),Io(v_,this,!1);const r=this.getRangedData(this.copyableRanges),o=Hs(sr,this,sAe).call(this,this.copyableRanges);if(!!this.hot.runHooks("beforeCopy",r,this.copyableRanges,o)){const l=Ub(r);if(e&&e.clipboardData){const c=FA(r,this.hot.rootDocument);e.clipboardData.setData("text/plain",l),e.clipboardData.setData("text/html",[b7,c].join(""))}else typeof ClipboardEvent>"u"&&this.hot.rootWindow.clipboardData.setData("Text",l);this.hot.runHooks("afterCopy",r,this.copyableRanges,o)}Io(Vg,this,"cells-only")}onCut(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),s=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!ks(y_,this)||this.isEditorOpened()||e.target instanceof HTMLElement&&(s&&e.target!==i||!s&&e.target!==this.hot.rootDocument.body))return;e.preventDefault(),this.setCopyableText(),Io(y_,this,!1);const r=this.getRangedData(this.copyableRanges);if(!!this.hot.runHooks("beforeCut",r,this.copyableRanges)){const a=Ub(r);if(e&&e.clipboardData){const l=FA(r,this.hot.rootDocument);e.clipboardData.setData("text/plain",a),e.clipboardData.setData("text/html",[b7,l].join(""))}else typeof ClipboardEvent>"u"&&this.hot.rootWindow.clipboardData.setData("Text",a);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",r,this.copyableRanges)}}onPaste(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),s=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()||this.isEditorOpened()||!this.hot.getSelected()||e.target instanceof HTMLElement&&(s&&e.target!==i||!s&&e.target!==this.hot.rootDocument.body))return;e.preventDefault();let r;if(e&&typeof e.clipboardData<"u"){const h=oC(e.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});h&&/(<table)|(<TABLE)/g.test(h)?r=X6(h,this.hot.rootDocument).data:r=e.clipboardData.getData("text/plain")}else typeof ClipboardEvent>"u"&&typeof this.hot.rootWindow.clipboardData<"u"&&(r=this.hot.rootWindow.clipboardData.getData("Text"));if(typeof r=="string"&&(r=ESe(r)),r===void 0||r&&r.length===0||this.hot.runHooks("beforePaste",r,this.copyableRanges)===!1)return;const[o,a,l,c]=this.populateValues(r);this.hot.selectCell(o,a,Math.min(this.hot.countRows()-1,l),Math.min(this.hot.countCols()-1,c)),this.hot.runHooks("afterPaste",r,this.copyableRanges)}destroy(){super.destroy()}}function w7(n){if(gA()){const e=this.hot.getSelectedRangeLast();if(e){const{row:t,col:i}=e.highlight,s=this.hot.getCell(t,i,!0);s&&i6(s,()=>{this.hot.rootDocument.execCommand(n)})}}else this.hot.rootDocument.execCommand(n)}function sAe(n){const{rows:e}=p7(n);let t=0;for(let i=0;i<e.length&&!(e[i]>=0);i++)t+=1;return{columnHeadersCount:t}}function rAe(){if(this.hot.isListening()){const n=this.hot.getSelectedRangeLast();if(n){const{row:e,col:t}=n.highlight,i=this.hot.getCell(e,t,!0);i&&cA(i)}}}function v7(){if(this.hot.isListening()){const n=this.hot.getSelectedRangeLast();if(n){const{row:e,col:t}=n.highlight,i=this.hot.getCell(e,t,!0);i!=null&&i.hasAttribute("contenteditable")&&hA(i)}}}function oAe(n){n.items.push({name:"---------"},WMe(this)),ks(hk,this)&&n.items.push(UMe(this)),ks(uk,this)&&n.items.push(zMe(this)),ks(dk,this)&&n.items.push(jMe(this)),n.items.push(YMe(this))}function aAe(n,e,t,i,s){ks(C_,this)&&(s.value=!0),Io(C_,this,!1)}function lAe(){this.isEditorOpened()||this.hot.getSettings().fragmentSelection||this.setCopyableText()}function cAe(){Hs(sr,this,v7).call(this)}function hAe(){Hs(sr,this,rAe).call(this)}function uAe(){Hs(sr,this,v7).call(this)}function y7(n,e){return`border_row${n}col${e}`}function yw(){return{width:1,color:"#000"}}function Zl(){return{hide:!0}}function dAe(){return{width:1,color:"#000",cornerVisible:!1}}function fk(n){if(Me(n.start)||Me(n.left)){var e;n.start=(e=n.start)!==null&&e!==void 0?e:n.left}if(Me(n.end)||Me(n.right)){var t;n.end=(t=n.end)!==null&&t!==void 0?t:n.right}return delete n.left,delete n.right,n}function Cw(n){return Me(n.start)&&(n.left=n.start),Me(n.end)&&(n.right=n.end),n}function gk(n,e){return{id:y7(n,e),border:dAe(),row:n,col:e,top:Zl(),bottom:Zl(),start:Zl(),end:Zl()}}function fAe(n,e){return _n(e,"border")&&e.border&&(n.border=e.border),_n(e,"top")&&Me(e.top)&&(e.top?(Je(e.top)||(e.top=yw()),n.top=e.top):(e.top=Zl(),n.top=e.top)),_n(e,"bottom")&&Me(e.bottom)&&(e.bottom?(Je(e.bottom)||(e.bottom=yw()),n.bottom=e.bottom):(e.bottom=Zl(),n.bottom=e.bottom)),_n(e,"start")&&Me(e.start)&&(e.start?(Je(e.start)||(e.start=yw()),n.start=e.start):(e.start=Zl(),n.start=e.start)),_n(e,"end")&&Me(e.end)&&(e.end?(Je(e.end)||(e.end=yw()),n.end=e.end):(e.end=Zl(),n.end=e.end)),n}function Jl(n,e){let t=!1;return F(n.getSelectedRange(),i=>{i.forAll((s,r)=>{if(s<0||r<0)return;const o=n.getCellMeta(s,r).borders;if(o)if(e){if(!_n(o[e],"hide")||o[e].hide===!1)return t=!0,!1}else return t=!0,!1})}),t}function S_(n){return`<span class="selected">✓</span>${n}`}function gAe(n){return n.some(e=>Me(e.left)||Me(e.right))}function pAe(n){return n.some(e=>Me(e.start)||Me(e.end))}const mAe=new Map([["left","start"],["right","end"]]);function bAe(n){var e;return(e=mAe.get(n))!==null&&e!==void 0?e:n}function wAe(n){return{key:"borders:bottom",name(){let e=this.getTranslatedPhrase(lI);return Jl(this,"bottom")&&(e=S_(e)),e},callback(e,t){const i=Jl(this,"bottom");n.prepareBorder(t,"bottom",i)}}}function vAe(n){const e=n.hot.isRtl()?"end":"start";return{key:"borders:left",name(){let t=this.getTranslatedPhrase(cI);return Jl(this,e)&&(t=S_(t)),t},callback(t,i){const s=Jl(this,e);n.prepareBorder(i,e,s)}}}function yAe(n){return{key:"borders:no_borders",name(){return this.getTranslatedPhrase(hI)},callback(e,t){n.prepareBorder(t,"noBorders")},disabled(){return!Jl(this)}}}function CAe(n){const e=n.hot.isRtl()?"start":"end";return{key:"borders:right",name(){let t=this.getTranslatedPhrase(aI);return Jl(this,e)&&(t=S_(t)),t},callback(t,i){const s=Jl(this,e);n.prepareBorder(i,e,s)}}}function SAe(n){return{key:"borders:top",name(){let e=this.getTranslatedPhrase(oI);return Jl(this,"top")&&(e=S_(e)),e},callback(e,t){const i=Jl(this,"top");n.prepareBorder(t,"top",i)}}}function _Ae(n,e){RAe(n,e),e.add(n)}function RAe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xAe(n,e,t){return(e=EAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function EAe(n){var e=TAe(n,"string");return typeof e=="symbol"?e:e+""}function TAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function C7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const __="customBorders",MAe=90;var pk=new WeakSet;class AAe extends Pt{constructor(){super(...arguments),_Ae(this,pk),xAe(this,"savedBorders",[])}static get PLUGIN_KEY(){return __}static get PLUGIN_PRIORITY(){return MAe}isEnabled(){return!!this.hot.getSettings()[__]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",e=>C7(pk,this,PAe).call(this,e)),this.addHook("init",()=>C7(pk,this,IAe).call(this)),super.enablePlugin())}disablePlugin(){this.hideBorders(),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),super.updatePlugin()}setBorders(e,t){let i=["top","bottom","start","end"],s=null;t&&(this.checkSettingsCohesion([t]),i=Object.keys(t),s=fk(t));const r=pg(e),o=Wb(r,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)});F(e,a=>{o(a).forAll((l,c)=>{F(i,h=>{this.prepareBorderFromCustomAdded(l,c,s,bAe(h))})})}),this.hot.view.render()}getBorders(e){if(!Array.isArray(e))return this.savedBorders;const t=pg(e),i=Wb(t,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)}),s=[];return F(e,r=>{i(r).forAll((o,a)=>{F(this.savedBorders,l=>{l.row===o&&l.col===a&&s.push(Cw(l))})})}),s}clearBorders(e){e?this.setBorders(e):(F(this.savedBorders,t=>{this.clearBordersFromSelectionSettings(t.id),this.clearNullCellRange(),this.hot.removeCellMeta(t.row,t.col,"borders")}),this.savedBorders.length=0)}insertBorderIntoSettings(e,t){this.checkSavedBorders(e)||this.savedBorders.push(e);const s=this.hot._createCellRange(this.hot._createCellCoords(e.row,e.col));this.checkCustomSelections(e,s,t)||this.hot.selection.highlight.addCustomSelection({border:e,visualCellRange:s})}prepareBorderFromCustomAdded(e,t,i,s){const r=this.hot.countRows(),o=this.hot.countCols();if(e>=r||t>=o)return;let a=gk(e,t);i&&(a=fAe(a,i),F(this.hot.selection.highlight.customSelections,l=>{if(a.id===l.settings.id)return Object.assign(l.settings,i),a.id=l.settings.id,a.top=l.settings.top,a.bottom=l.settings.bottom,a.start=l.settings.start,a.end=l.settings.end,!1})),this.hot.setCellMeta(e,t,"borders",Cw(a)),this.insertBorderIntoSettings(a,s)}prepareBorderFromCustomAddedRange(e,t){const i=Math.min(e.to.row,this.hot.countRows()-1),s=Math.min(e.to.col,this.hot.countCols()-1);Oe(e.from.row,i,r=>{Oe(e.from.col,s,o=>{const a=gk(r,o);let l=0;r===e.from.row&&_n(t,"top")&&(l+=1,a.top=t.top),r===e.to.row&&_n(t,"bottom")&&(l+=1,a.bottom=t.bottom),o===e.from.col&&_n(t,"start")&&(l+=1,a.start=t.start),o===e.to.col&&_n(t,"end")&&(l+=1,a.end=t.end),l>0&&(this.hot.setCellMeta(r,o,"borders",Cw(a)),this.insertBorderIntoSettings(a))})})}removeAllBorders(e,t){const i=y7(e,t);this.spliceBorder(i),this.clearBordersFromSelectionSettings(i),this.clearNullCellRange(),this.hot.removeCellMeta(e,t,"borders")}setBorder(e,t,i,s){let r=this.hot.getCellMeta(e,t).borders;!r||r.border===void 0?r=gk(e,t):r=fk(r),s?(r[i]=Zl(),this.countHide(r)===4?this.removeAllBorders(e,t):(this.checkCustomSelectionsFromContextMenu(r,i,s)||this.insertBorderIntoSettings(r),this.hot.setCellMeta(e,t,"borders",Cw(r)))):(r[i]=yw(),this.checkCustomSelectionsFromContextMenu(r,i,s)||this.insertBorderIntoSettings(r),this.hot.setCellMeta(e,t,"borders",Cw(r)))}prepareBorder(e,t,i){F(e,s=>{let{start:r,end:o}=s;if(r.row===o.row&&r.col===o.col)t==="noBorders"?this.removeAllBorders(r.row,r.col):this.setBorder(r.row,r.col,t,i);else switch(t){case"noBorders":Oe(r.col,o.col,a=>{Oe(r.row,o.row,l=>{this.removeAllBorders(l,a)})});break;case"top":Oe(r.col,o.col,a=>{this.setBorder(r.row,a,t,i)});break;case"bottom":Oe(r.col,o.col,a=>{this.setBorder(o.row,a,t,i)});break;case"start":Oe(r.row,o.row,a=>{this.setBorder(a,r.col,t,i)});break;case"end":Oe(r.row,o.row,a=>{this.setBorder(a,o.col,t,i)});break}})}createCustomBorders(e){F(e,t=>{const i=fk(t);t.range?this.prepareBorderFromCustomAddedRange(t.range,i):this.prepareBorderFromCustomAdded(t.row,t.col,i)})}countHide(e){const{top:t,bottom:i,start:s,end:r}=e;return Qn([t,i,s,r],(a,l)=>{let c=a;return l&&l.hide&&(c+=1),c},0)}clearBordersFromSelectionSettings(e){const t=ct(this.hot.selection.highlight.customSelections,i=>i.settings.id).indexOf(e);t>-1&&this.hot.selection.highlight.customSelections[t].clear()}clearNullCellRange(){F(this.hot.selection.highlight.customSelections,(e,t)=>{if(e.cellRange===null)return this.hot.selection.highlight.customSelections[t].destroy(),this.hot.selection.highlight.customSelections.splice(t,1),!1})}hideBorders(){F(this.savedBorders,e=>{this.clearBordersFromSelectionSettings(e.id),this.clearNullCellRange()})}spliceBorder(e){const t=ct(this.savedBorders,i=>i.id).indexOf(e);t>-1&&this.savedBorders.splice(t,1)}checkSavedBorders(e){let t=!1;return this.countHide(e)===4?(this.spliceBorder(e.id),t=!0):F(this.savedBorders,(s,r)=>{if(e.id===s.id)return this.savedBorders[r]=e,t=!0,!1}),t}checkCustomSelectionsFromContextMenu(e,t,i){let s=!1;return F(this.hot.selection.highlight.customSelections,r=>{if(e.id===r.settings.id){const o=this.hot.view._wt.selectionManager.getBorderInstances(r);return F(o,a=>{a.toggleHiddenClass(t,i)}),s=!0,!1}}),s}checkCustomSelections(e,t,i){const s=this.countHide(e);let r=!1;return s===4?(this.removeAllBorders(e.row,e.col),r=!0):F(this.hot.selection.highlight.customSelections,o=>{if(e.id===o.settings.id){if(o.visualCellRange=t,o.commit(),i){const a=this.hot.view._wt.selectionManager.getBorderInstances(o);F(a,l=>{l.changeBorderStyle(i,e)})}return r=!0,!1}}),r}changeBorderSettings(){const e=this.hot.getSettings()[__];if(Array.isArray(e)){const t=qi(e);this.checkSettingsCohesion(t),t.length||(this.savedBorders=t),this.createCustomBorders(t)}else e!==void 0&&this.createCustomBorders(this.savedBorders)}checkSettingsCohesion(e){const t=gAe(e),i=pAe(e);if(t&&i)throw new Error('The "left"/"right" and "start"/"end" options should not be used together. Please use only the option "start"/"end".');if(this.hot.isRtl()&&t)throw new Error('The "left"/"right" properties are not supported for RTL. Please use option "start"/"end".')}destroy(){super.destroy()}}function PAe(n){this.hot.getSettings()[__]&&n.items.push({name:"---------"},{key:"borders",name(){return this.getTranslatedPhrase(rI)},disabled(){const e=this.getSelectedRangeLast();return!e||e.isSingleHeader()?!0:this.selection.isSelectedByCorner()},submenu:{items:[SAe(this),CAe(this),wAe(this),vAe(this),yAe(this)]}})}function IAe(){this.changeBorderSettings()}function OAe(n,e){kAe(n,e),e.add(n)}function kAe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mk(n,e,t){return(e=HAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HAe(n){var e=DAe(n,"string");return typeof e=="symbol"?e:e+""}function DAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function S7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const _7="dragToScroll",NAe=100;var bk=new WeakSet;class LAe extends Pt{constructor(){super(...arguments),OAe(this,bk),mk(this,"boundaries",null),mk(this,"callback",null),mk(this,"listening",!1)}static get PLUGIN_KEY(){return _7}static get PLUGIN_PRIORITY(){return NAe}isEnabled(){return!!this.hot.getSettings()[_7]}enablePlugin(){this.enabled||(this.addHook("afterOnCellMouseDown",e=>S7(bk,this,R7).call(this,e)),this.addHook("afterOnCellCornerMouseDown",e=>S7(bk,this,R7).call(this,e)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.unregisterEvents(),super.disablePlugin()}setBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{left:0,right:this.hot.rootWindow.innerWidth,top:0,bottom:this.hot.rootWindow.innerHeight};this.boundaries=e}setCallback(e){this.callback=e}check(e,t){let i=0,s=0;t<this.boundaries.top?s=t-this.boundaries.top:t>this.boundaries.bottom&&(s=t-this.boundaries.bottom),e<this.boundaries.left?i=e-this.boundaries.left:e>this.boundaries.right&&(i=e-this.boundaries.right),this.callback(i,s)}listen(){this.listening=!0}unlisten(){this.listening=!1}isListening(){return this.listening}registerEvents(){const{rootWindow:e}=this.hot;let t=e;for(;t;)this.eventManager.addEventListener(t.document,"contextmenu",()=>this.unlisten()),this.eventManager.addEventListener(t.document,"mouseup",()=>this.unlisten()),this.eventManager.addEventListener(t.document,"mousemove",i=>this.onMouseMove(i)),t=Nu(t)}unregisterEvents(){this.eventManager.clear()}onMouseMove(e){this.isListening()&&this.check(e.clientX,e.clientY)}destroy(){super.destroy()}}function R7(n){if(Qc(n))return;const e=this.hot.view._wt.wtOverlays.topOverlay.mainTableScrollableElement;this.setBoundaries(e!==this.hot.rootWindow?e.getBoundingClientRect():void 0),this.setCallback((t,i)=>{var s,r;const o=(s=e.scrollLeft)!==null&&s!==void 0?s:e.scrollX,a=(r=e.scrollTop)!==null&&r!==void 0?r:e.scrollY;e.scroll(o+Math.sign(t)*50,a+Math.sign(i)*20)}),this.listen()}function $Ae(n,e){x7(n,e),e.add(n)}function FAe(n,e,t){x7(n,e),e.set(n,t)}function x7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wk(n,e,t){return(e=BAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BAe(n){var e=VAe(n,"string");return typeof e=="symbol"?e:e+""}function VAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function WAe(n,e){return n.get(Wr(n,e))}function E7(n,e,t){return n.set(Wr(n,e),t),t}function Wr(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}xe.getSingleton().register("afterDropdownMenuDefaultOptions"),xe.getSingleton().register("beforeDropdownMenuShow"),xe.getSingleton().register("afterDropdownMenuShow"),xe.getSingleton().register("afterDropdownMenuHide"),xe.getSingleton().register("afterDropdownMenuExecute");const R_="dropdownMenu",jAe=230,Sw="changeType",vk=R_;var x_=new WeakMap,Oo=new WeakSet;class E_ extends Pt{static get PLUGIN_KEY(){return R_}static get PLUGIN_PRIORITY(){return jAe}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[rw,ow,st,lw,st,t_,st,aw,st,Vr]}constructor(e){super(e),$Ae(this,Oo),wk(this,"commandExecutor",new i7(this.hot)),wk(this,"itemsFactory",null),wk(this,"menu",null),FAe(this,x_,!1),this.hot.addHook("afterGetColHeader",(t,i)=>Wr(Oo,this,UAe).call(this,t,i))}isEnabled(){return this.hot.getSettings()[R_]}enablePlugin(){var e=this;if(this.enabled)return;this.itemsFactory=new s7(this.hot,E_.DEFAULT_ITEMS),this.addHook("beforeOnCellMouseDown",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return Wr(Oo,e,QAe).call(e,...r)}),this.addHook("beforeViewportScrollHorizontally",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return Wr(Oo,e,XAe).call(e,...r)});const t=this.hot.getSettings()[R_],i={items:this.itemsFactory.getItems(t)};this.registerEvents(),typeof t.callback=="function"&&this.commandExecutor.setCommonCallback(t.callback),this.registerShortcuts(),super.enablePlugin(),this.callOnPluginsReady(()=>{this.hot.runHooks("afterDropdownMenuDefaultOptions",i),this.itemsFactory.setPredefinedItems(i.items);const s=this.itemsFactory.getItems(t);this.menu&&this.menu.destroy(),this.menu=new Lg(this.hot,{className:"htDropdownMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.hot.runHooks("beforeDropdownMenuSetItems",s),this.menu.setMenuItems(s),this.menu.addLocalHook("beforeOpen",()=>Wr(Oo,this,YAe).call(this)),this.menu.addLocalHook("afterOpen",()=>Wr(Oo,this,GAe).call(this)),this.menu.addLocalHook("afterSubmenuOpen",r=>Wr(Oo,this,KAe).call(this,r)),this.menu.addLocalHook("afterClose",()=>Wr(Oo,this,qAe).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e.executeCommand.call(e,...o)}),F(s,r=>this.commandExecutor.registerCommand(r.key,r))})}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&this.menu.destroy(),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const e=this.hot.getShortcutManager().getContext("grid"),t=()=>{const{highlight:i}=this.hot.getSelectedRangeLast();if((i.isHeader()&&i.row===-1||i.isCell())&&i.col>=0){this.hot.selectColumns(i.col,i.col,-1);const{from:s}=this.hot.getSelectedRangeLast(),r=e_(this.menu.container,this.hot.rootDocument),o=this.hot.getCell(-1,s.col,!0).querySelector(`.${Sw}`),a=o.getBoundingClientRect();this.open({left:a.left+r.left,top:a.top+o.offsetHeight+r.top},{left:a.width,right:0,above:0,below:3}),this.menu.getNavigator().toFirstItem()}};e.addShortcuts([{keys:[["Shift","Alt","ArrowDown"],["Control/Meta","Enter"]],callback:t,runOnlyIf:()=>{var i;const s=(i=this.hot.getSelectedRangeLast())===null||i===void 0?void 0:i.highlight;return s&&this.hot.selection.isCellVisible(s)&&s.isHeader()&&!this.menu.isOpened()},captureCtrl:!0,group:vk},{keys:[["Shift","Alt","ArrowDown"]],callback:t,runOnlyIf:()=>{var i;const s=(i=this.hot.getSelectedRangeLast())===null||i===void 0?void 0:i.highlight;return s&&this.hot.selection.isCellVisible(s)&&s.isCell()&&!this.menu.isOpened()},group:vk}])}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(vk)}registerEvents(){this.eventManager.addEventListener(this.hot.rootElement,"click",e=>Wr(Oo,this,zAe).call(this,e))}open(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{above:0,below:0,left:0,right:0};(t=this.menu)!==null&&t!==void 0&&t.isOpened()||(this.menu.open(),et(i,(s,r)=>{this.menu.setOffset(r,s)}),this.menu.setPosition(e))}close(){var e;(e=this.menu)===null||e===void 0||e.close()}executeCommand(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.commandExecutor.execute(e,...i)}setListening(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.menu.isOpened()&&(e?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function T7(n){n.getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Control/Meta","A"]],callback:()=>!1}])}function zAe(n){if(Fe(n.target,Sw)){const e=e_(this.menu.container,this.hot.rootDocument),t=n.target.getBoundingClientRect();n.stopPropagation(),E7(x_,this,!1),this.open({left:t.left+e.left,top:t.top+n.target.offsetHeight+e.top},{left:t.width,right:0,above:0,below:3})}}function UAe(n,e){const t=e.parentNode;if(!t)return;const i=t.parentNode.childNodes,s=Array.prototype.indexOf.call(i,t);if(n<0||s!==i.length-1)return;const r=e.querySelector(`.${Sw}`);if(this.enabled&&r)return;if(!this.enabled){r&&r.parentNode.removeChild(r);return}const o=this.hot.rootDocument.createElement("button");o.className=Sw,o.type="button",o.tabIndex=-1,this.hot.getSettings().ariaTags&&($e(o,[Du(),aC(" ")]),$e(e,[$j("menu")])),o.onclick=function(){return!1},e.firstChild.insertBefore(o,e.firstChild.firstChild)}function YAe(){this.hot.runHooks("beforeDropdownMenuShow",this)}function GAe(){this.hot.runHooks("afterDropdownMenuShow",this),Wr(Oo,this,T7).call(this,this.menu)}function KAe(n){Wr(Oo,this,T7).call(this,n)}function qAe(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}function XAe(n){return WAe(x_,this)?null:n}function QAe(n){Fe(n.target,Sw)&&E7(x_,this,!0)}E_.SEPARATOR={name:st};function M7(n,e,t){return(e=ZAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZAe(n){var e=JAe(n,"string");return typeof e=="symbol"?e:e+""}function JAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ePe{constructor(e){M7(this,"hot",void 0),M7(this,"options",{}),this.hot=e}setOptions(e){this.options=e}getData(){const{startRow:e,startCol:t,endRow:i,endCol:s}=this._getDataRange(),r=this.options,o=[];return Oe(e,i,a=>{const l=[];!r.exportHiddenRows&&this._isHiddenRow(a)||(Oe(t,s,c=>{!r.exportHiddenColumns&&this._isHiddenColumn(c)||l.push(this.hot.getDataAtCell(a,c))}),o.push(l))}),o}getRowHeaders(){const e=[];if(this.options.rowHeaders){const{startRow:t,endRow:i}=this._getDataRange(),s=this.hot.getRowHeader();Oe(t,i,r=>{!this.options.exportHiddenRows&&this._isHiddenRow(r)||e.push(s[r])})}return e}getColumnHeaders(){const e=[];if(this.options.columnHeaders){const{startCol:t,endCol:i}=this._getDataRange(),s=this.hot.getColHeader();Oe(t,i,r=>{!this.options.exportHiddenColumns&&this._isHiddenColumn(r)||e.push(s[r])})}return e}_getDataRange(){const e=this.hot.countCols()-1,t=this.hot.countRows()-1;let[i=0,s=0,r=t,o=e]=this.options.range;return i=Math.max(i,0),s=Math.max(s,0),r=Math.min(r,t),o=Math.min(o,e),{startRow:i,startCol:s,endRow:r,endCol:o}}_isHiddenRow(e){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(e))}_isHiddenColumn(e){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(e))}}function A7(n,e,t){return(e=tPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tPe(n){var e=nPe(n,"string");return typeof e=="symbol"?e:e+""}function nPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class yk{static get DEFAULT_OPTIONS(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}constructor(e,t){A7(this,"dataProvider",void 0),A7(this,"options",void 0),this.dataProvider=e,this.options=this._mergeOptions(t),this.dataProvider.setOptions(this.options)}_mergeOptions(e){let t=Co(this.constructor.DEFAULT_OPTIONS);const i=new Date;return t=Zn(Co(yk.DEFAULT_OPTIONS),t),t=Zn(t,e),t.filename=XM(t.filename,{YYYY:i.getFullYear(),MM:`${i.getMonth()+1}`.padStart(2,"0"),DD:`${i.getDate()}`.padStart(2,"0")}),t}}const iPe="\r",sPe='"',rPe=`
`;class oPe extends yk{static get DEFAULT_OPTIONS(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:`\r
`}}export(){const e=this.options,t=this.dataProvider.getData();let i=this.dataProvider.getColumnHeaders();const s=i.length>0,r=this.dataProvider.getRowHeaders(),o=r.length>0;let a=e.bom?"\uFEFF":"";return s&&(i=ct(i,l=>this._escapeCell(l,!0)),o&&(a+=e.columnDelimiter),a+=i.join(e.columnDelimiter),a+=e.rowDelimiter),F(t,(l,c)=>{c>0&&(a+=e.rowDelimiter),o&&(a+=this._escapeCell(r[c])+e.columnDelimiter),a+=l.map(h=>this._escapeCell(h)).join(e.columnDelimiter)}),a}_escapeCell(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=Mn(e);return i!==""&&(t||i.indexOf(iPe)>=0||i.indexOf(sPe)>=0||i.indexOf(rPe)>=0||i.indexOf(this.options.columnDelimiter)>=0)&&(i=i.replace(new RegExp('"',"g"),'""'),i=`"${i}"`),i}}const Ck={["csv"]:oPe};function aPe(n,e,t){return typeof Ck[n]=="function"?new Ck[n](e,t):null}const lPe="exportFile",cPe=240;class hPe extends Pt{static get PLUGIN_KEY(){return lPe}static get PLUGIN_PRIORITY(){return cPe}isEnabled(){return!0}exportAsString(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._createTypeFormatter(e,t).export()}exportAsBlob(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._createBlob(this._createTypeFormatter(e,t))}downloadFile(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{rootDocument:i,rootWindow:s}=this.hot,r=this._createTypeFormatter(e,t),o=this._createBlob(r),a=s.URL||s.webkitURL,l=i.createElement("a"),c=`${r.options.filename}.${r.options.fileExtension}`;if(l.download!==void 0){const h=a.createObjectURL(o);l.style.display="none",l.setAttribute("href",h),l.setAttribute("download",c),i.body.appendChild(l),l.dispatchEvent(new MouseEvent("click")),i.body.removeChild(l),setTimeout(()=>{a.revokeObjectURL(h)},100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(o,c)}_createTypeFormatter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ck[e])throw new Error(`Export format type "${e}" is not supported.`);return aPe(e,new ePe(this.hot),t)}_createBlob(e){let t=null;return typeof Blob<"u"&&(t=new Blob([e.export()],{type:`${e.options.mimeType};charset=${e.options.encoding}`})),t}}function jg(n,e,t){return(e=uPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uPe(n){var e=dPe(n,"string");return typeof e=="symbol"?e:e+""}function dPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class _w{constructor(e,t){let{id:i,stateless:s=!0}=t;jg(this,"hot",void 0),jg(this,"id",void 0),jg(this,"elements",[]),jg(this,"hidden",!1),jg(this,"stateId",""),jg(this,"state",void 0),this.hot=e,this.id=i,this.stateId=`Filters.component.${this.id}`,this.state=s?null:this.hot.columnIndexMapper.registerMap(this.stateId,new nS)}getElements(){return this.elements}reset(){F(this.elements,e=>e.reset())}hide(){this.hidden=!0}show(){this.hidden=!1}isHidden(){return this.hot===null||this.hidden}restoreState(e){this.state&&this.setState(this.state.getValueAtIndex(e))}setState(){throw new Error("The state setting logic is not implemented")}saveState(e){this.state&&this.state.setValueAtIndex(e,this.getState())}getState(){throw new Error("The state gathering logic is not implemented")}destroy(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),F(this.elements,e=>e.destroy()),this.state=null,this.elements=null,this.hot=null}}Bt(_w,Di);const Rw={};function dh(n,e){if(!Rw[n])throw Error(`Filter condition "${n}" does not exist.`);const{condition:t,descriptor:i}=Rw[n];let s=e;return i.inputValuesDecorator&&(s=i.inputValuesDecorator(s)),function(r){return t.apply(r.meta.instance,[].concat([r],[s]))}}function vd(n){if(!Rw[n])throw Error(`Filter condition "${n}" does not exist.`);return Rw[n].descriptor}function ei(n,e,t){t.key=n,Rw[n]={condition:e,descriptor:t}}const Ti="none";function fPe(){return!0}ei(Ti,fPe,{name:mS,inputsCount:0,showOperators:!1});const xw="empty";function gPe(n){return An(n.value)}ei(xw,gPe,{name:bI,inputsCount:0,showOperators:!0});const T_="not_empty";function pPe(n,e){return!dh(xw,e)(n)}ei(T_,pPe,{name:wI,inputsCount:0,showOperators:!0});const Ew="eq";function mPe(n,e){let[t]=e;return Mn(n.value).toLocaleLowerCase(n.meta.locale)===Mn(t)}ei(Ew,mPe,{name:vI,inputsCount:1,showOperators:!0});const M_="neq";function bPe(n,e){return!dh(Ew,e)(n)}ei(M_,bPe,{name:yI,inputsCount:1,showOperators:!0});const P7="gt";function wPe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value>i}ei(P7,wPe,{name:xI,inputsCount:1,showOperators:!0});const I7="gte";function vPe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value>=i}ei(I7,vPe,{name:EI,inputsCount:1,showOperators:!0});const O7="lt";function yPe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value<i}ei(O7,yPe,{name:TI,inputsCount:1,showOperators:!0});const k7="lte";function CPe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value<=i}ei(k7,CPe,{name:MI,inputsCount:1,showOperators:!0});const Sk="date_after";function SPe(n,e){let[t]=e;const i=le(n.value,n.meta.dateFormat),s=le(t,n.meta.dateFormat);return!i.isValid()||!s.isValid()?!1:i.diff(s)>=0}ei(Sk,SPe,{name:II,inputsCount:1,showOperators:!0});const _k="date_before";function _Pe(n,e){let[t]=e;const i=le(n.value,n.meta.dateFormat),s=le(t,n.meta.dateFormat);return!i.isValid()||!s.isValid()?!1:i.diff(s)<=0}ei(_k,_Pe,{name:OI,inputsCount:1,showOperators:!0});const A_="between";function RPe(n,e){let[t,i]=e,s=t,r=i;if(n.meta.type==="numeric"){const o=parseFloat(s,10),a=parseFloat(r,10);s=Math.min(o,a),r=Math.max(o,a)}else if(n.meta.type==="date"){const o=dh(_k,[r]),a=dh(Sk,[s]);return o(n)&&a(n)}return n.value>=s&&n.value<=r}ei(A_,RPe,{name:AI,inputsCount:2,showOperators:!0});const H7="not_between";function xPe(n,e){return!dh(A_,e)(n)}ei(H7,xPe,{name:PI,inputsCount:2,showOperators:!0});const D7="begins_with";function EPe(n,e){let[t]=e;return Mn(n.value).toLocaleLowerCase(n.meta.locale).startsWith(Mn(t))}ei(D7,EPe,{name:CI,inputsCount:1,showOperators:!0});const N7="ends_with";function TPe(n,e){let[t]=e;return Mn(n.value).toLocaleLowerCase(n.meta.locale).endsWith(Mn(t))}ei(N7,TPe,{name:SI,inputsCount:1,showOperators:!0});const Rk="contains";function MPe(n,e){let[t]=e;return Mn(n.value).toLocaleLowerCase(n.meta.locale).indexOf(Mn(t))>=0}ei(Rk,MPe,{name:_I,inputsCount:1,showOperators:!0});const L7="not_contains";function APe(n,e){return!dh(Rk,e)(n)}ei(L7,APe,{name:RI,inputsCount:1,showOperators:!0});const $7="date_tomorrow";function PPe(n){const e=le(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(le().subtract(-1,"days").startOf("day"),"d"):!1}ei($7,PPe,{name:HI,inputsCount:0});const F7="date_today";function IPe(n){const e=le(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(le().startOf("day"),"d"):!1}ei(F7,IPe,{name:kI,inputsCount:0});const B7="date_yesterday";function OPe(n){const e=le(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(le().subtract(1,"days").startOf("day"),"d"):!1}ei(B7,OPe,{name:DI,inputsCount:0}),S6();function kPe(n,e){let t=n;return t===""&&(t=`(${e})`),t}const xk=new Set([1]).has(1),HPe=xk&&typeof Array.from=="function";function Tw(n){let e=n;return xk&&(e=new Set(e)),function(t){let i;return xk?i=e.has(t):i=!!~e.indexOf(t),i}}function V7(n){return n??""}function Ek(n){let e=n;return HPe?e=Array.from(new Set(e)):e=zM(e),e=e.sort((t,i)=>typeof t=="number"&&typeof i=="number"?t-i:t===i?0:t>i?1:-1),e}function W7(n,e,t,i){const s=[],r=n===e;let o;return r||(o=Tw(e)),F(n,a=>{let l=!1;(r||o(a))&&(l=!0);const c={checked:l,value:a,visualValue:kPe(a,t)};i&&i(c),s.push(c)}),s}const yd="by_value";function DPe(n,e){let[t]=e;return t(n.value)}ei(yd,DPe,{name:"By value",inputsCount:0,inputValuesDecorator(n){let[e]=n;return[Tw(e)]},showOperators:!1});const Mw={};function NPe(n){if(!Mw[n])throw Error(`Operation with id "${n}" does not exist.`);const e=Mw[n].func;return function(t,i){return e(t,i)}}function LPe(n){return Mw[n].name}function Tk(n,e,t){Mw[n]={name:e,func:t}}const fh="conjunction",$Pe=$I;function FPe(n,e){return n.every(t=>t.func(e))}Tk(fh,$Pe,FPe);const P_="disjunction",BPe=bS;function VPe(n,e){return n.some(t=>t.func(e))}Tk(P_,BPe,VPe);const Mk="disjunctionWithExtraCondition",WPe=bS;function jPe(n,e){if(n.length<3)throw Error("Operation doesn't work on less then three conditions.");return n.slice(0,n.length-1).some(t=>t.func(e))&&n[n.length-1].func(e)}Tk(Mk,WPe,jPe);const zPe="numeric",j7="text",UPe="date",z7={[zPe]:[Ti,st,xw,T_,st,Ew,M_,st,P7,I7,O7,k7,A_,H7],[j7]:[Ti,st,xw,T_,st,Ew,M_,st,D7,N7,st,Rk,L7],[UPe]:[Ti,st,xw,T_,st,Ew,M_,st,_k,Sk,A_,st,$7,F7,B7]};function YPe(n){const e=[];let t=n;return z7[t]||(t=j7),F(z7[t],i=>{let s;i===st?s={name:st}:s=Co(vd(i)),e.push(s)}),e}function Aw(n,e,t){return(e=GPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GPe(n){var e=KPe(n,"string");return typeof e=="symbol"?e:e+""}function KPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const Ak="built",Pk="building",U7=["click","input","keydown","keypress","keyup","focus","blur","change"];let ko=class rG{static get DEFAULTS(){return Co({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}constructor(e,t){Aw(this,"hot",void 0),Aw(this,"eventManager",new kr(this)),Aw(this,"options",void 0),Aw(this,"_element",void 0),Aw(this,"buildState",void 0),this.hot=e,this.options=Zn(rG.DEFAULTS,t),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName)}setValue(e){this.options.value=e,this.update()}getValue(){return this.options.value}get element(){return this.buildState===Pk?this._element:this.buildState===Ak?(this.update(),this._element):(this.buildState=Pk,this.build(),this.buildState=Ak,this._element)}isBuilt(){return this.buildState===Ak}translateIfPossible(e){return typeof e=="string"&&e.startsWith(ds)?this.hot.getTranslatedPhrase(e):e}build(){const e=(t,i)=>{this.eventManager.addEventListener(t,i,s=>this.runLocalHooks(i,s,this))};if(this.buildState||(this.buildState=Pk),this._element.setAttribute("data-hot-input",!0),this.options.tabIndex!==void 0&&this._element.setAttribute("tabindex",this.options.tabIndex),this.options.role!==void 0&&this._element.setAttribute("role",this.options.role),this.options.className&&ae(this._element,this.options.className),this.options.children.length)F(this.options.children,t=>this._element.appendChild(t.element));else if(this.options.wrapIt){const t=this.hot.rootDocument.createElement(this.options.tagName);t.setAttribute("data-hot-input",!0),et(this.options,(i,s)=>{t[s]!==void 0&&s!=="className"&&s!=="tagName"&&s!=="children"&&(t[s]=this.translateIfPossible(i))}),this._element.appendChild(t),F(U7,i=>e(t,i))}else F(U7,t=>e(this._element,t))}update(){}reset(){this.options.value="",this.update()}show(){this.element.style.display=""}hide(){this.element.style.display="none"}focus(){}destroy(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}};Bt(ko,Di);function qPe(n,e){Y7(n,e),e.add(n)}function XPe(n,e,t){Y7(n,e),e.set(n,t)}function Y7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I_(n,e){return n.get(Ik(n,e))}function QPe(n,e,t){return n.set(Ik(n,e),t),t}function Ik(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var zg=new WeakMap,G7=new WeakSet;class gh extends ko{static get DEFAULTS(){return Co({placeholder:"",type:"text",tagName:"input",tabIndex:-1})}constructor(e,t){super(e,Zn(gh.DEFAULTS,t)),qPe(this,G7),XPe(this,zg,void 0),this.registerHooks()}registerHooks(){this.addLocalHook("keyup",e=>Ik(G7,this,ZPe).call(this,e))}build(){super.build();const e=this.hot.rootDocument.createElement("div");QPe(zg,this,this._element.firstChild),ae(this._element,"htUIInput"),ae(e,"htUIInputIcon"),this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(I_(zg,this).type=this.options.type,I_(zg,this).placeholder=this.translateIfPossible(this.options.placeholder),I_(zg,this).value=this.translateIfPossible(this.options.value))}focus(){this.isBuilt()&&I_(zg,this).focus()}}function ZPe(n){this.options.value=n.target.value}function JPe(n,e){K7(n,e),e.add(n)}function Pw(n,e,t){K7(n,e),e.set(n,t)}function K7(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ug(n,e,t){return n.set(Iw(n,e),t),t}function kn(n,e){return n.get(Iw(n,e))}function Iw(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var gi=new WeakMap,O_=new WeakMap,k_=new WeakMap,Ok=new WeakMap,H_=new WeakMap,D_=new WeakSet;class Ow extends ko{static get DEFAULTS(){return Co({className:"htUISelect",wrapIt:!1,tabIndex:-1})}constructor(e,t){super(e,Zn(Ow.DEFAULTS,t)),JPe(this,D_),Pw(this,gi,null),Pw(this,O_,[]),Pw(this,k_,void 0),Pw(this,Ok,void 0),Pw(this,H_,void 0),this.registerHooks()}getMenu(){return kn(gi,this)}registerHooks(){this.addLocalHook("click",()=>Iw(D_,this,nIe).call(this))}setItems(e){Ug(O_,this,this.translateNames(e)),kn(gi,this)&&kn(gi,this).setMenuItems(kn(O_,this))}translateNames(e){return F(e,t=>{t.name=this.translateIfPossible(t.name)}),e}build(){super.build(),Ug(gi,this,new Lg(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer})),kn(gi,this).setMenuItems(kn(O_,this));const e=new ko(this.hot,{className:"htUISelectCaption"}),t=new ko(this.hot,{className:"htUISelectDropdown"});Ug(k_,this,e),Ug(Ok,this,e.element),Ug(H_,this,t),this.hot.getSettings().ariaTags&&($e(t.element,[Du()]),$e(this._element,[Lj()])),F([e,t],i=>this._element.appendChild(i.element)),kn(gi,this).addLocalHook("select",i=>Iw(D_,this,eIe).call(this,i)),kn(gi,this).addLocalHook("afterClose",()=>Iw(D_,this,tIe).call(this)),this.update()}update(){if(!this.isBuilt())return;let e;this.options.value?e=this.options.value.name:e=kn(gi,this).hot.getTranslatedPhrase(mS),kn(Ok,this).textContent=e,super.update()}openOptions(){const e=this.element.getBoundingClientRect();kn(gi,this)&&(kn(gi,this).open(),kn(gi,this).setPosition({left:this.hot.isLtr()?e.left-5:e.left-31,top:e.top-1,width:e.width,height:e.height}),kn(gi,this).getNavigator().toFirstItem(),kn(gi,this).getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:t=>{this.closeOptions(),this.runLocalHooks("tabKeydown",t)}},{keys:[["Control/Meta","A"]],callback:()=>!1}]))}closeOptions(){kn(gi,this)&&kn(gi,this).close()}focus(){this.isBuilt()&&this.element.focus()}destroy(){kn(gi,this)&&(kn(gi,this).destroy(),Ug(gi,this,null)),kn(k_,this)&&kn(k_,this).destroy(),kn(H_,this)&&kn(H_,this).destroy(),super.destroy()}}function eIe(n){n.name!==st&&(this.options.value=n,this.update(),this.runLocalHooks("select",this.options.value))}function tIe(){this.runLocalHooks("afterClose")}function nIe(){this.openOptions()}function iIe(n,e){sIe(n,e),e.add(n)}function sIe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function q7(n,e,t){return(e=rIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rIe(n){var e=oIe(n,"string");return typeof e=="symbol"?e:e+""}function oIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function X7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var kk=new WeakSet;class Hk extends _w{constructor(e,t){super(e,{id:t.id,stateless:!1}),iIe(this,kk),q7(this,"name",""),q7(this,"addSeparator",!1),this.name=t.name,this.addSeparator=t.addSeparator,this.elements.push(new Ow(this.hot,{menuContainer:t.menuContainer})),this.elements.push(new gh(this.hot,{placeholder:zI})),this.elements.push(new gh(this.hot,{placeholder:UI})),this.registerHooks()}registerHooks(){this.getSelectElement().addLocalHook("select",e=>X7(kk,this,aIe).call(this,e)).addLocalHook("afterClose",()=>this.runLocalHooks("afterClose")).addLocalHook("tabKeydown",e=>this.runLocalHooks("selectTabKeydown",e)),F(this.getInputElements(),e=>{e.addLocalHook("keydown",t=>X7(kk,this,lIe).call(this,t))})}setState(e){if(this.reset(),!e)return;const t=Co(e.command);t.name.startsWith(Pn)&&(t.name=this.hot.getTranslatedPhrase(t.name)),this.getSelectElement().setValue(t),F(e.args,(i,s)=>{if(s>t.inputsCount-1)return!1;const r=this.getInputElement(s);r.setValue(i),r[t.inputsCount>s?"show":"hide"](),s||this.hot._registerTimeout(()=>r.focus(),10)})}getState(){const e=this.getSelectElement().getValue()||vd(Ti),t=[];return F(this.getInputElements(),(i,s)=>{e.inputsCount>s&&t.push(i.getValue())}),{command:e,args:t}}updateState(e,t){const i=vd(e?e.name:Ti);this.state.setValueAtIndex(t,{command:i,args:e?e.args:[]}),e||F(this.getInputElements(),s=>s.setValue(null))}getSelectElement(){return this.elements.filter(e=>e instanceof Ow)[0]}getInputElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.getInputElements()[e]}getInputElements(){return this.elements.filter(e=>e instanceof gh)}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t,i,s,r,o)=>{ae(t.parentNode,"htFiltersMenuCondition"),this.addSeparator&&ae(t.parentNode,"border");const a=this.hot.rootDocument.createElement("div");return ae(a,"htFiltersMenuLabel"),a.textContent=o,t.appendChild(a),t.parentElement.hasAttribute("ghost-table")||F(this.elements,l=>t.appendChild(l.element)),t}}}reset(){const e=this.hot.getPlugin("filters").getSelectedColumn();let t=[vd(Ti)];if(e!==null){const{visualIndex:i}=e;t=YPe(this.hot.getDataType(0,i,this.hot.countRows(),i))}F(this.getInputElements(),i=>i.hide()),this.getSelectElement().setItems(t),super.reset(),this.getSelectElement().setValue(t[0])}}function aIe(n){F(this.getInputElements(),(e,t)=>{e[n.inputsCount>t?"show":"hide"](),t===0&&this.hot._registerTimeout(()=>e.focus(),10)}),this.runLocalHooks("change",n)}function lIe(n){ig(n.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),Or(n))}function Q7(n,e,t){cIe(n,e),e.set(n,t)}function cIe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kw(n,e){return n.get(J7(n,e))}function Z7(n,e,t){return n.set(J7(n,e),t),t}function J7(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Yg=new WeakMap,Dk=new WeakMap;class N_ extends ko{static get DEFAULTS(){return Co({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}constructor(e,t){super(e,Zn(N_.DEFAULTS,t)),Q7(this,Yg,void 0),Q7(this,Dk,void 0)}build(){super.build();const e=this.hot.rootDocument.createElement("label");e.textContent=this.translateIfPossible(this.options.label.textContent),e.htmlFor=this.translateIfPossible(this.options.label.htmlFor),Z7(Dk,this,e),Z7(Yg,this,this._element.firstChild),kw(Yg,this).checked=this.options.checked,this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(kw(Dk,this).textContent=this.translateIfPossible(this.options.label.textContent))}isChecked(){return this.isBuilt()?kw(Yg,this).checked:!1}setChecked(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isBuilt()&&(kw(Yg,this).checked=e)}focus(){this.isBuilt()&&kw(Yg,this).focus()}}function hIe(n,e){uIe(n,e),e.add(n)}function uIe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dIe(n,e,t){return(e=fIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fIe(n){var e=gIe(n,"string");return typeof e=="symbol"?e:e+""}function gIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pIe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const ez=0;var tz=new WeakSet;class mIe extends _w{constructor(e,t){super(e,{id:t.id,stateless:!1}),hIe(this,tz),dIe(this,"name",""),this.name=t.name,this.buildOperatorsElement()}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t)=>(ae(t.parentNode,"htFiltersMenuOperators"),F(this.elements,i=>t.appendChild(i.element)),t)}}buildOperatorsElement(){const e=[fh,P_];F(e,t=>{const i=new N_(this.hot,{name:"operator",label:{htmlFor:t,textContent:LPe(t)},value:t,checked:t===e[ez],id:t});i.addLocalHook("change",s=>pIe(tz,this,bIe).call(this,s)),this.elements.push(i)})}setChecked(e){if(this.elements.length<e)throw Error(Ft`Radio button with index ${e} doesn't exist.`);F(this.elements,(t,i)=>{t.setChecked(i===e)})}getActiveOperationId(){const e=this.elements.find(t=>t instanceof N_&&t.isChecked());return e?e.getValue():fh}getState(){return this.getActiveOperationId()}setState(e){this.reset(),e&&this.getActiveOperationId()!==e&&F(this.elements,t=>{t.setChecked(t.getValue()===e)})}updateState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fh,t=arguments.length>1?arguments[1]:void 0,i=e;i===Mk&&(i=P_),this.state.setValueAtIndex(t,i)}reset(){this.setChecked(ez)}}function bIe(n){this.setState(n.target.value)}function wIe(n,e,t){vIe(n,e),e.set(n,t)}function vIe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Nk(n,e){return n.get(nz(n,e))}function yIe(n,e,t){return n.set(nz(n,e),t),t}function nz(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Hw=new WeakMap;class Dw extends ko{static get DEFAULTS(){return Co({href:"#",tagName:"a",tabIndex:-1,role:"button"})}constructor(e,t){super(e,Zn(Dw.DEFAULTS,t)),wIe(this,Hw,void 0)}build(){super.build(),yIe(Hw,this,this._element.firstChild)}update(){this.isBuilt()&&(Nk(Hw,this).textContent=this.translateIfPossible(this.options.textContent))}focus(){this.isBuilt()&&Nk(Hw,this).focus()}activate(){Nk(Hw,this).click()}}function CIe(n,e){iz(n,e),e.add(n)}function Gg(n,e,t){iz(n,e),e.set(n,t)}function iz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ze(n,e){return n.get(Kg(n,e))}function Ho(n,e,t){return n.set(Kg(n,e),t),t}function Kg(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const sz="multipleSelect.itemBox";var Do=new WeakMap,ti=new WeakMap,Lk=new WeakMap,ec=new WeakMap,ph=new WeakMap,mh=new WeakMap,Nw=new WeakSet;class Lw extends ko{static get DEFAULTS(){return Co({className:"htUIMultipleSelect",value:[]})}constructor(e,t){super(e,Zn(Lw.DEFAULTS,t)),CIe(this,Nw),Gg(this,Do,[]),Gg(this,ti,void 0),Gg(this,Lk,void 0),Gg(this,ec,void 0),Gg(this,ph,void 0),Gg(this,mh,void 0),Ho(ec,this,new gh(this.hot,{placeholder:jI,className:"htUIMultipleSelectSearch"})),Ho(ph,this,new Dw(this.hot,{textContent:FI,className:"htUISelectAll"})),Ho(mh,this,new Dw(this.hot,{textContent:BI,className:"htUIClearAll"})),this.registerHooks()}getItemsBox(){return Ze(ti,this)}registerHooks(){Ze(ec,this).addLocalHook("keydown",e=>Kg(Nw,this,_Ie).call(this,e)),Ze(ec,this).addLocalHook("input",e=>Kg(Nw,this,SIe).call(this,e)),Ze(ph,this).addLocalHook("click",e=>Kg(Nw,this,RIe).call(this,e)),Ze(mh,this).addLocalHook("click",e=>Kg(Nw,this,xIe).call(this,e))}setItems(e){var t;Ho(Do,this,e),(t=Ze(ti,this))===null||t===void 0||t.loadData(Ze(Do,this))}setLocale(e){Ho(Lk,this,e)}getLocale(){return Ze(Lk,this)}getItems(){return[...Ze(Do,this)]}getValue(){return TIe(Ze(Do,this))}getSearchInputElement(){return Ze(ec,this)}getSelectAllElement(){return Ze(ph,this)}getClearAllElement(){return Ze(mh,this)}isSelectedAllValues(){return Ze(Do,this).length===this.getValue().length}build(){super.build();const{rootDocument:e}=this.hot,t=e.createElement("div"),i=new ko(this.hot,{className:"htUISelectionControls",children:[Ze(ph,this),Ze(mh,this)]});this._element.appendChild(Ze(ec,this).element),this._element.appendChild(i.element),this._element.appendChild(t);const s=r=>{var o;if(!this._element)return;(o=Ze(ti,this))===null||o===void 0||o.destroy(),ae(r,"htUIMultipleSelectHot"),Ho(ti,this,new this.hot.constructor(r,{data:Ze(Do,this),columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:(c,h,u,d,f,g)=>{c.title=g.instance.getDataAtRowProp(h,g.label.property)},afterListen:()=>{this.runLocalHooks("focus",this)},beforeOnCellMouseUp:()=>{Ze(ti,this).listen()},colWidths:()=>Ze(ti,this).container.scrollWidth-ui(e),maxCols:1,autoWrapCol:!0,height:110,copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},layoutDirection:this.hot.isRtl()?"rtl":"ltr"})),Ze(ti,this).init();const l=Ze(ti,this).getShortcutManager().getContext("grid");l.removeShortcutsByKeys(["Tab"]),l.removeShortcutsByKeys(["Shift","Tab"]),l.addShortcut({keys:[["Escape"]],callback:c=>{this.runLocalHooks("keydown",c,this)},group:sz}),l.addShortcut({keys:[["Tab"],["Shift","Tab"]],callback:c=>{Ze(ti,this).deselectCell(),this.runLocalHooks("keydown",c,this),this.runLocalHooks("listTabKeydown",c,this)},group:sz})};s(t),this.hot._registerTimeout(()=>s(t),100)}focus(){this.isBuilt()&&Ze(ti,this).listen()}reset(){Ze(ec,this).reset(),Ze(ph,this).reset(),Ze(mh,this).reset()}update(){this.isBuilt()&&(Ze(ti,this).loadData(EIe(Ze(Do,this),this.options.value)),super.update())}destroy(){var e;(e=Ze(ti,this))===null||e===void 0||e.destroy(),Ze(ec,this).destroy(),Ze(mh,this).destroy(),Ze(ph,this).destroy(),Ho(ec,this,null),Ho(mh,this,null),Ho(ph,this,null),Ho(ti,this,null),Ho(Do,this,null),super.destroy()}}function SIe(n){const e=n.target.value.toLocaleLowerCase(this.getLocale());let t;e===""?t=[...Ze(Do,this)]:t=Ze(Do,this).filter(i=>`${i.value}`.toLocaleLowerCase(this.getLocale()).indexOf(e)>=0),Ze(ti,this).loadData(t)}function _Ie(n){this.runLocalHooks("keydown",n,this),uA(ig,n.keyCode)("ARROW_DOWN")&&(n.preventDefault(),Or(n),Ze(ti,this).listen(),Ze(ti,this).selectCell(0,0))}function RIe(n){const e=[];n.preventDefault(),Ze(ti,this).getSourceData().forEach((t,i)=>{t.checked=!0,e.push(_P(t,i)[0])}),Ze(ti,this).setSourceDataAtCell(e)}function xIe(n){const e=[];n.preventDefault(),Ze(ti,this).getSourceData().forEach((t,i)=>{t.checked=!1,e.push(_P(t,i)[0])}),Ze(ti,this).setSourceDataAtCell(e)}function EIe(n,e){const t=Tw(e);return n.map(i=>(i.checked=t(i.value),i))}function TIe(n){const e=[];return n.forEach(t=>{t.checked&&e.push(t.value)}),e}function MIe(n,e){AIe(n,e),e.add(n)}function AIe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function PIe(n,e,t){return(e=IIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IIe(n){var e=OIe(n,"string");return typeof e=="symbol"?e:e+""}function OIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function L_(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var $w=new WeakSet;class kIe extends _w{constructor(e,t){super(e,{id:t.id,stateless:!1}),MIe(this,$w),PIe(this,"name",""),this.name=t.name,this.elements.push(new Lw(this.hot)),this.registerHooks()}registerHooks(){this.getMultipleSelectElement().addLocalHook("keydown",e=>L_($w,this,HIe).call(this,e)).addLocalHook("listTabKeydown",e=>this.runLocalHooks("listTabKeydown",e)),this.hot.addHook("modifyFiltersMultiSelectValue",(e,t)=>L_($w,this,DIe).call(this,e,t))}getElements(){const e=this.getMultipleSelectElement();return[e.getSearchInputElement(),e.getSelectAllElement(),e.getClearAllElement(),this.getMultipleSelectElement()]}setState(e){if(this.reset(),e&&e.command.key===yd){const t=this.getMultipleSelectElement();t.setItems(e.itemsSnapshot),t.setValue(e.args[0]),t.setLocale(e.locale)}}getState(){const e=this.getMultipleSelectElement(),t=e.getItems();return{command:{key:e.isSelectedAllValues()||!t.length?Ti:yd},args:[e.getValue()],itemsSnapshot:t}}updateState(e){const t=(i,s,r,o,a)=>{const[l]=kl(s,u=>u.name===yd),c={},h=this.hot.getTranslatedPhrase(wS);if(l){const u=o(i,a),d=ct(u,y=>y.value),f=new Map(u.map(y=>[y.value,this.hot.getCellMeta(y.meta.visualRow,y.meta.visualCol)])),g=Ek(d);r&&(l.args[0]=r);const p=[],m=W7(g,l.args[0],h,y=>{y.checked&&p.push(y.value),L_($w,this,rz).call(this,y,f)}),w=e.editedConditionStack.column;c.locale=this.hot.getCellMeta(0,w).locale,c.args=[p],c.command=vd(yd),c.itemsSnapshot=m}else c.args=[],c.command=vd(Ti);this.state.setValueAtIndex(i,c)};t(e.editedConditionStack.column,e.editedConditionStack.conditions,e.conditionArgsChange,e.filteredRowsFactory),e.dependentConditionStacks.length&&t(e.dependentConditionStacks[0].column,e.dependentConditionStacks[0].conditions,e.conditionArgsChange,e.filteredRowsFactory,e.editedConditionStack)}getMultipleSelectElement(){return this.elements.filter(e=>e instanceof Lw)[0]}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t,i,s,r,o)=>{ae(t.parentNode,"htFiltersMenuValue");const a=this.hot.rootDocument.createElement("div");return ae(a,"htFiltersMenuLabel"),a.textContent=o,t.appendChild(a),t.parentElement.hasAttribute("ghost-table")||F(this.elements,l=>t.appendChild(l.element)),t}}}reset(){const e=this.hot.getTranslatedPhrase(wS),t=this._getColumnVisibleValues(),i=t.map(l=>l.value),s=new Map(t.map(l=>[l.value,l.meta])),r=Ek(i),o=W7(r,r,e,l=>{L_($w,this,rz).call(this,l,s)});this.getMultipleSelectElement().setItems(o),super.reset(),this.getMultipleSelectElement().setValue(r);const a=this.hot.getPlugin("filters").getSelectedColumn();a!==null&&this.getMultipleSelectElement().setLocale(this.hot.getCellMeta(0,a.visualIndex).locale)}_getColumnVisibleValues(){const e=this.hot.getPlugin("filters").getSelectedColumn();return e===null?[]:ct(this.hot.getDataAtCol(e.visualIndex),(t,i)=>({value:V7(t),meta:this.hot.getCellMeta(i,e.visualIndex)}))}}function HIe(n){ig(n.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),Or(n))}function rz(n,e){this.hot.hasHook("modifyFiltersMultiSelectValue")&&(n.visualValue=this.hot.runHooks("modifyFiltersMultiSelectValue",n.visualValue,e.get(n.value)))}function DIe(n,e){switch(e.type){case"numeric":return d4(n,e);default:return n}}var oz;function NIe(n,e){LIe(n,e),e.add(n)}function LIe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $Ie(n,e,t){return(e=FIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FIe(n){var e=BIe(n,"string");return typeof e=="symbol"?e:e+""}function BIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function VIe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var az=new WeakSet;class Fw extends _w{static get BUTTON_OK(){return"ok"}static get BUTTON_CANCEL(){return"cancel"}constructor(e,t){super(e,{id:t.id,stateless:!0}),NIe(this,az),$Ie(this,"name",""),this.name=t.name,this.elements.push(new gh(this.hot,{type:"button",value:VI,className:"htUIButton htUIButtonOK",identifier:Fw.BUTTON_OK})),this.elements.push(new gh(this.hot,{type:"button",value:WI,className:"htUIButton htUIButtonCancel",identifier:Fw.BUTTON_CANCEL})),this.registerHooks()}registerHooks(){F(this.elements,e=>{e.addLocalHook("click",(t,i)=>VIe(az,this,WIe).call(this,t,i))})}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t)=>(ae(t.parentNode,"htFiltersMenuActionBar"),F(this.elements,i=>t.appendChild(i.element)),t)}}accept(){this.runLocalHooks("accept")}cancel(){this.runLocalHooks("cancel")}}oz=Fw;function WIe(n,e){e.options.identifier===oz.BUTTON_OK?this.accept():this.cancel()}function $_(n,e,t){return(e=jIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jIe(n){var e=zIe(n,"string");return typeof e=="symbol"?e:e+""}function zIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const lz="ConditionCollection.filteringStates";class $k{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;$_(this,"hot",void 0),$_(this,"isMapRegistrable",void 0),$_(this,"filteringStates",new nS),$_(this,"previousConditionStack",null),this.hot=e,this.isMapRegistrable=t,this.isMapRegistrable===!0?this.hot.columnIndexMapper.registerMap(lz,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}isEmpty(){return this.getFilteredColumns().length===0}isMatch(e,t){var i;const s=this.filteringStates.getValueAtIndex(t),r=(i=s==null?void 0:s.conditions)!==null&&i!==void 0?i:[],o=s==null?void 0:s.operation;return this.isMatchInConditions(r,e,o)}isMatchInConditions(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fh;return e.length?NPe(i)(e,t):!0}addCondition(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fh,s=arguments.length>3?arguments[3]:void 0;const r=this.hot.getCellMeta(0,e).locale,o=ct(t.args,h=>typeof h=="string"?h.toLocaleLowerCase(r):h),a=t.name||t.command.key;this.previousConditionStack===null&&this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeAdd",e);const l=this.getOperation(e);if(l){if(l!==i)throw Error(Ft`The column of index ${e} has been already applied with a \`${l}\`\x20
        filter operation. Use \`removeConditions\` to clear the current conditions and then add new ones.\x20
        Mind that you cannot mix different types of operations (for instance, if you use \`conjunction\`,\x20
        use it consequently for a particular column).`)}else if(nn(Mw[i]))throw new Error(Ft`Unexpected operation named \`${i}\`. Possible ones are\x20
        \`disjunction\` and \`conjunction\`.`);const c=this.getConditions(e);c.length===0?this.filteringStates.setValueAtIndex(e,{operation:i,conditions:[{name:a,args:o,func:dh(a,o)}]},s):c.push({name:a,args:o,func:dh(a,o)}),this.runLocalHooks("afterAdd",e)}getConditions(e){var t,i;return(t=(i=this.filteringStates.getValueAtIndex(e))===null||i===void 0?void 0:i.conditions)!==null&&t!==void 0?t:[]}getOperation(e){var t;return(t=this.filteringStates.getValueAtIndex(e))===null||t===void 0?void 0:t.operation}getFilteredColumns(){return this.filteringStates.getEntries().map(e=>{let[t]=e;return t})}getColumnStackPosition(e){return this.getFilteredColumns().indexOf(e)}exportAllConditions(){return Qn(this.filteringStates.getEntries(),(e,t)=>{let[i,{operation:s,conditions:r}]=t;return e.push({column:i,operation:s,conditions:ct(r,o=>{let{name:a,args:l}=o;return{name:a,args:l}})}),e},[])}importAllConditions(e){this.clean(),F(e,t=>{F(t.conditions,i=>this.addCondition(t.column,i))})}removeConditions(e){this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeRemove",e),this.filteringStates.clearValue(e),this.runLocalHooks("afterRemove",e)}clean(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}hasConditions(e,t){const i=this.getConditions(e);return t?i.some(s=>s.name===t):i.length>0}setPreviousConditionStack(e){this.previousConditionStack=e}destroy(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(lz),this.filteringStates=null,this.clearLocalHooks()}}Bt($k,Di);function cz(n,e,t){return(e=UIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UIe(n){var e=YIe(n,"string");return typeof e=="symbol"?e:e+""}function YIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class hz{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>[];cz(this,"conditionCollection",void 0),cz(this,"columnDataFactory",void 0),this.conditionCollection=e,this.columnDataFactory=t}filter(){let e=[];return F(this.conditionCollection.getFilteredColumns(),(t,i)=>{let s=this.columnDataFactory(t);i&&(s=this._getIntersectData(s,e)),e=this.filterByColumn(t,s)}),e}filterByColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=[];return F(t,s=>{s!==void 0&&this.conditionCollection.isMatch(s,e)&&i.push(s)}),i}_getIntersectData(e,t){const i=[];return F(t,s=>{const r=s.meta.visualRow;e[r]!==void 0&&(i[r]=e[r])}),i}}function GIe(n,e){KIe(n,e),e.add(n)}function KIe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Cd(n,e,t){return(e=qIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qIe(n){var e=XIe(n,"string");return typeof e=="symbol"?e:e+""}function XIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Fk(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var F_=new WeakSet;class uz{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>[];GIe(this,F_),Cd(this,"hot",void 0),Cd(this,"conditionCollection",void 0),Cd(this,"columnDataFactory",void 0),Cd(this,"changes",[]),Cd(this,"grouping",!1),Cd(this,"latestEditedColumnPosition",-1),Cd(this,"latestOrderStack",[]),this.hot=e,this.conditionCollection=t,this.columnDataFactory=i,this.conditionCollection.addLocalHook("beforeRemove",s=>Fk(F_,this,QIe).call(this,s)),this.conditionCollection.addLocalHook("afterRemove",s=>this.updateStatesAtColumn(s)),this.conditionCollection.addLocalHook("afterAdd",s=>this.updateStatesAtColumn(s)),this.conditionCollection.addLocalHook("beforeClean",()=>Fk(F_,this,ZIe).call(this)),this.conditionCollection.addLocalHook("afterClean",()=>Fk(F_,this,JIe).call(this))}groupChanges(){this.grouping=!0}flush(){this.grouping=!1,F(this.changes,e=>{this.updateStatesAtColumn(e)}),this.changes.length=0}updateStatesAtColumn(e,t){var i=this;if(this.grouping){this.changes.indexOf(e)===-1&&this.changes.push(e);return}const s=this.conditionCollection.exportAllConditions();let r=this.conditionCollection.getColumnStackPosition(e);r===-1&&(r=this.latestEditedColumnPosition);const o=s.slice(0,r),a=s.slice(r);a.length&&a[0].column===e&&a.shift();const l=r6(function(h,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const f=new $k(i.hot,!1),g=[].concat(h,d);f.importAllConditions(g);const p=i.columnDataFactory(u);let m;f.isEmpty()?m=p:m=new hz(f,y=>i.columnDataFactory(y)).filter(),m=ct(m,y=>y.meta.visualRow);const w=Tw(m);return f.destroy(),kl(p,y=>w(y.meta.visualRow))})(o),c=[].concat(this.conditionCollection.getConditions(e));this.runLocalHooks("update",{editedConditionStack:{column:e,conditions:c},dependentConditionStacks:a,filteredRowsFactory:l,conditionArgsChange:t})}destroy(){this.clearLocalHooks(),et(this,(e,t)=>{this[t]=null})}}function QIe(n){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(n)}function ZIe(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}function JIe(){F(this.latestOrderStack,n=>{this.updateStatesAtColumn(n)})}Bt(uz,Di);function eOe(n){return o7({initialPage:0,size:()=>n.length,onItemSelect:(t,i)=>{const s=n[t];if(s instanceof Lw)return i;if(s.element&&!Fu(s.element))return!1;s.focus()}})}const Bw="filters";function tOe(n,e){let t=-1;const i=eOe(e),s=l=>()=>{n.isOpened()&&n.getKeyboardShortcutsCtrl().listen(Bw),i.setCurrentPage(e.indexOf(l))};e.forEach(l=>{l instanceof ko&&(l.addLocalHook("click",s(l)),l.addLocalHook("focus",s(l)),l.addLocalHook("afterClose",s(l)))}),n.addLocalHook("afterSelectionChange",l=>{l.key.startsWith("filter_")||i.clear()});function r(l){const c=n.getKeyboardShortcutsCtrl(),h=l.getKeyboardShortcutsCtrl();i.clear(),h.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],forwardToContext:c.getContext(Bw),callback:()=>{l.isSubMenu()&&l.close(),c.listen(Bw)}}]),!l.isSubMenu()&&c.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:u=>{const d=n.getNavigator();d.getCurrentPage()>-1&&(t=d.getCurrentPage()),d.clear(),u.shiftKey?i.toPreviousItem():i.toNextItem()}},{keys:[["Escape"]],callback:()=>{n.close()}},{keys:[["Enter"],["Space"]],preventDefault:!1,callback:u=>{const d=e[i.getCurrentPage()];d instanceof Ow&&(d.openOptions(),u.preventDefault()),d instanceof Dw&&(d.activate(),u.preventDefault()),d instanceof ko||u.preventDefault()}}],Bw)}n.addLocalHook("afterSubmenuOpen",r),n.addLocalHook("afterOpen",r);function o(){n.focus(),n.getKeyboardShortcutsCtrl().listen(Bw)}function a(){return t}return{...i,listen:o,getLastMenuPage:a}}function nOe(n,e){dz(n,e),e.add(n)}function iOe(n,e,t){dz(n,e),e.set(n,t)}function dz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vw(n,e,t){return(e=sOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sOe(n){var e=rOe(n,"string");return typeof e=="symbol"?e:e+""}function rOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function oOe(n,e,t){return n.set(rr(n,e),t),t}function Ww(n,e){return n.get(rr(n,e))}function rr(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Bk="filters",aOe=250,fz=Bk;var Sd=new WeakMap,jr=new WeakSet;class lOe extends Pt{static get PLUGIN_KEY(){return Bk}static get PLUGIN_PRIORITY(){return aOe}static get PLUGIN_DEPS(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}constructor(e){super(e),nOe(this,jr),Vw(this,"dropdownMenuPlugin",null),Vw(this,"conditionCollection",null),Vw(this,"conditionUpdateObserver",null),Vw(this,"components",new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]])),Vw(this,"filtersRowsMap",null),iOe(this,Sd,void 0),this.hot.addHook("afterGetColHeader",(t,i)=>rr(jr,this,gOe).call(this,t,i))}isEnabled(){return!!this.hot.getSettings()[Bk]}enablePlugin(){if(this.enabled)return;this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new Fb),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");const e=this.hot.getSettings().dropdownMenu,t=e&&e.uiContainer||this.hot.rootDocument.body,i=o=>(o.addLocalHook("accept",()=>rr(jr,this,gz).call(this,"accept")),o.addLocalHook("cancel",()=>rr(jr,this,gz).call(this,"cancel")),o.addLocalHook("change",a=>rr(jr,this,fOe).call(this,o,a)),o),s=()=>`${this.hot.getTranslatedPhrase(NI)}:`,r=()=>`${this.hot.getTranslatedPhrase(LI)}:`;if(!this.components.get("filter_by_condition")){const o=new Hk(this.hot,{id:"filter_by_condition",name:s,addSeparator:!1,menuContainer:t});o.addLocalHook("afterClose",()=>rr(jr,this,pz).call(this)),this.components.set("filter_by_condition",i(o))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new mIe(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){const o=new Hk(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:t});o.addLocalHook("afterClose",()=>rr(jr,this,pz).call(this)),this.components.set("filter_by_condition2",i(o))}if(this.components.get("filter_by_value")||this.components.set("filter_by_value",i(new kIe(this.hot,{id:"filter_by_value",name:r}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",i(new Fw(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new $k(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new uz(this.hot,this.conditionCollection,o=>this.getDataMapAtColumn(o)),this.conditionUpdateObserver.addLocalHook("update",o=>rr(jr,this,pOe).call(this,o))),this.components.forEach(o=>o.show()),this.addHook("afterDropdownMenuDefaultOptions",o=>rr(jr,this,dOe).call(this,o)),this.addHook("afterDropdownMenuShow",()=>rr(jr,this,hOe).call(this)),this.addHook("afterDropdownMenuHide",()=>rr(jr,this,uOe).call(this)),this.addHook("afterChange",o=>rr(jr,this,cOe).call(this,o)),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),!Ww(Sd,this)&&this.dropdownMenuPlugin.enabled){const o=this.dropdownMenuPlugin.menu,a=[{focus:()=>{const c=o.getNavigator(),h=Ww(Sd,this).getLastMenuPage();o.focus(),h>0?c.setCurrentPage(h):c.toFirstItem()}},...Array.from(this.components).map(c=>{let[,h]=c;return h.getElements()}).flat()];oOe(Sd,this,tOe(o,a));const l=c=>{Ww(Sd,this).listen(),c.preventDefault(),ig(c.keyCode,"TAB")&&(c.shiftKey?Ww(Sd,this).toPreviousItem():Ww(Sd,this).toNextItem())};this.components.get("filter_by_value").addLocalHook("listTabKeydown",l),this.components.get("filter_by_condition").addLocalHook("selectTabKeydown",l)}this.registerShortcuts(),super.enablePlugin()}disablePlugin(){if(this.enabled){var e;(e=this.dropdownMenuPlugin)!==null&&e!==void 0&&e.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach((t,i)=>{t.destroy(),this.components.set(i,null)}),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName)}this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Alt","A"]],stopPropagation:!0,callback:()=>{const e=this.hot.getSelected();this.clearConditions(),this.filter(),e&&this.hot.selectCells(e)},group:fz})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(fz)}addCondition(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:fh;const r=this.hot.toPhysicalColumn(e);this.conditionCollection.addCondition(r,{command:{key:t},args:i},s)}removeConditions(e){const t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}clearConditions(e){if(e===void 0)this.conditionCollection.clean();else{const t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}}filter(){const{navigableHeaders:e}=this.hot.getSettings(),t=this._createDataFilter(),i=!this.conditionCollection.isEmpty();let s=[];const r=this.conditionCollection.exportAllConditions();if(this.hot.runHooks("beforeFilter",r,this.conditionCollection.previousConditionStack)!==!1)if(i){const a=[];this.hot.batchExecution(()=>{this.filtersRowsMap.clear(),s=ct(t.filter(),c=>c.meta.visualRow);const l=Tw(s);Oe(this.hot.countSourceRows()-1,c=>{l(c)||a.push(c)}),F(a,c=>{this.filtersRowsMap.setValueAtIndex(c,!0)})},!0),!e&&!s.length&&this.hot.deselectCell()}else this.filtersRowsMap.clear();this.hot.runHooks("afterFilter",r),this.conditionCollection.setPreviousConditionStack(null),this.hot.view.adjustElementsSize(),this.hot.render(),this.hot.selection.isSelected()&&this.hot.selectCell(e?-1:0,this.hot.getSelectedRangeLast().highlight.col)}getSelectedColumn(){var e;const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t?{visualIndex:t.col,physicalIndex:this.hot.toPhysicalColumn(t.col)}:null}getDataMapAtColumn(e){const t=this.hot.toVisualColumn(e),i=[];return F(this.hot.getSourceDataAtCol(t),(s,r)=>{var o;const{row:a,col:l,visualCol:c,visualRow:h,type:u,instance:d,dateFormat:f,locale:g}=this.hot.getCellMeta(r,t),p=(o=this.hot.getDataAtCell(this.hot.toVisualRow(r),t))!==null&&o!==void 0?o:s;i.push({meta:{row:a,col:l,visualCol:c,visualRow:h,type:u,instance:d,dateFormat:f,locale:g},value:V7(p)})}),i}updateValueComponentCondition(e){const t=this.hot.getDataAtCol(e),i=Ek(t);this.conditionUpdateObserver.updateStatesAtColumn(e,i)}restoreComponents(e){var t;const i=(t=this.getSelectedColumn())===null||t===void 0?void 0:t.physicalIndex;e.forEach(s=>{s.isHidden()||s.restoreState(i)}),this.updateDependentComponentsVisibility()}getOperationBasedOnArguments(e,t,i,s){let r=e;return r===P_&&t.command.key!==Ti&&i.command.key!==Ti&&s.command.key!==Ti?r=Mk:s.command.key!==Ti&&(t.command.key===Ti||i.command.key===Ti)&&(r=fh),r}setListeningDropdownMenu(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}updateDependentComponentsVisibility(){const e=this.components.get("filter_by_condition"),{command:t}=e.getState(),i=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];t.showOperators?this.showComponents(...i):this.hideComponents(...i)}_createDataFilter(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.conditionCollection;return new hz(e,t=>this.getDataMapAtColumn(t))}getIndexesOfComponents(){const e=[];if(!this.dropdownMenuPlugin)return e;const t=this.dropdownMenuPlugin.menu;for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return F(s,o=>{F(t.menuItems,(a,l)=>{a.key===o.getMenuItemDescriptor().key&&e.push(l)})}),e}changeComponentsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.dropdownMenuPlugin)return;const i=this.dropdownMenuPlugin.menu.hotMenu,s=i.getPlugin("hiddenRows");for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];const l=this.getIndexesOfComponents(...o);e?s.showRows(l):s.hideRows(l),i.render()}hideComponents(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changeComponentsVisibility(!1,...t)}showComponents(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changeComponentsVisibility(!0,...t)}destroy(){this.enabled&&(this.components.forEach((e,t)=>{e!==null&&(e.destroy(),this.components.set(t,null))}),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),super.destroy()}}function cOe(n){n&&F(n,e=>{const[,t]=e,i=this.hot.propToCol(t);this.conditionCollection.hasConditions(i)&&this.updateValueComponentCondition(i)})}function hOe(){const n=this.dropdownMenuPlugin.menu;this.restoreComponents(Array.from(this.components.values())),n.updateMenuDimensions()}function uOe(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}function dOe(n){n.items.push({name:st}),this.components.forEach(e=>{n.items.push(e.getMenuItemDescriptor())})}function gz(n){var e;if(n==="accept"){const i=this.getSelectedColumn();if(i===null){var t;(t=this.dropdownMenuPlugin)===null||t===void 0||t.close();return}const{physicalIndex:s}=i,r=this.components.get("filter_by_condition").getState(),o=this.components.get("filter_by_condition2").getState(),a=this.components.get("filter_by_value").getState(),l=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),r,o,a);this.conditionUpdateObserver.groupChanges();let c=this.conditionCollection.getColumnStackPosition(s);c===-1&&(c=void 0),this.conditionCollection.removeConditions(s),r.command.key!==Ti&&(this.conditionCollection.addCondition(s,r,l,c),o.command.key!==Ti&&this.conditionCollection.addCondition(s,o,l,c)),a.command.key!==Ti&&this.conditionCollection.addCondition(s,a,l,c),this.conditionUpdateObserver.flush(),this.components.forEach(h=>h.saveState(s)),this.filtersRowsMap.clear(),this.filter()}(e=this.dropdownMenuPlugin)===null||e===void 0||e.close()}function fOe(n,e){this.updateDependentComponentsVisibility(),n.constructor===Hk&&!e.inputsCount&&this.setListeningDropdownMenu()}function pz(){this.setListeningDropdownMenu()}function gOe(n,e){const t=this.hot.toPhysicalColumn(n);this.enabled&&this.conditionCollection.hasConditions(t)?ae(e,"htFiltersActive"):Ue(e,"htFiltersActive")}function pOe(n){var e;if(!((e=this.dropdownMenuPlugin)!==null&&e!==void 0&&e.enabled))return;const{editedConditionStack:{conditions:t,column:i}}=n,s=t.filter(o=>o.name===yd),r=t.filter(o=>o.name!==yd);if(s.length>=2||r.length>=3)Vt(Ft`The filter conditions have been applied properly, but couldn’t be displayed visually.\x20
        The overall amount of conditions exceed the capability of the dropdown menu.\x20
        For more details see the documentation.`);else{const o=this.conditionCollection.getOperation(i);this.components.get("filter_by_condition").updateState(r[0],i),this.components.get("filter_by_condition2").updateState(r[1],i),this.components.get("filter_operators").updateState(o,i),this.components.get("filter_by_value").updateState(n)}}const mz="internal-use-in-handsontable",Vk={licenseKey:mz,useArrayArithmetic:!0,useColumnIndex:!1,useStats:!1,evaluateNullToZero:!0,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,leapYear1900:!1,nullDate:{year:1899,month:12,day:30},nullYear:30,dateFormats:["DD/MM/YYYY","DD/MM/YY"],timeFormats:["hh:mm","hh:mm:ss.sss"],matchWholeCell:!0,useRegularExpressions:!1,useWildcards:!0,functionArgSeparator:",",thousandSeparator:"",decimalSeparator:".",language:"enGB"};function bz(n){var e;return{maxColumns:n.maxColumns,maxRows:n.maxRows,language:(e=n[es])===null||e===void 0||(e=e.language)===null||e===void 0?void 0:e.langCode}}function wz(n){return Object.keys(n).reduce((e,t)=>(t!=="hyperformula"&&(e[t]=n[t]),e),{})}function mOe(n){var e;const t=n[es],i=wz(t!=null&&(e=t.engine)!==null&&e!==void 0&&e.hyperformula?t.engine:{}),s=bz(n);return{...Vk,...i,...s}}function bOe(n){var e;const t=n[es],i=wz(t!=null&&(e=t.engine)!==null&&e!==void 0&&e.hyperformula?t.engine:{}),s=bz(n);return{...i,...s}}function wOe(n,e){return Object.keys(e).some(t=>e[t]!==void 0&&e[t]!==n[t])}function B_(){const n="engine_relationship",e=So(es);return e.hasItem(n)||e.register(n,new Map),e.getItem(n)}function Wk(){const n="shared_engine_usage",e=So(es);return e.hasItem(n)||e.register(n,new Map),e.getItem(n)}function vOe(n){const e=n.getSettings(),t=e[es],i=t==null?void 0:t.engine;if(t===!0||nn(i))return null;if(typeof i.hyperformula=="function"||typeof i=="function"){var s;return yOe((s=i.hyperformula)!==null&&s!==void 0?s:i,e,n)}else if(typeof i=="object"&&nn(i.hyperformula)){const r=B_(),o=Wk().get(i);return r.has(i)||r.set(i,[]),r.get(i).push(n),o&&o.push(n.guid),i.getConfig().licenseKey||i.updateConfig({licenseKey:mz}),(i.getConfig().leapYear1900!==Vk.leapYear1900||mC(i.getConfig().nullDate,Vk.nullDate)===!1)&&Vt(Ft`If you use HyperFormula with Handsontable, keep the default \`leapYear1900\` and \`nullDate\` 
      settings. Otherwise, HyperFormula's dates may not sync correctly with Handsontable's dates.`),i}return null}function yOe(n,e,t){const i=e[es],s=mOe(e),r=B_(),o=Wk();COe(n,i.functions),SOe(n,i.language);const a=n.buildEmpty(s);return r.set(a,[t]),o.set(a,[t.guid]),_Oe(a,i.namedExpressions),a.on("sheetAdded",()=>{a.rebuildAndRecalculate()}),a.on("sheetRemoved",()=>{a.rebuildAndRecalculate()}),a}function vz(n){var e;const t=B_(),i=t.size===0?[]:Array.from((e=t.get(n))!==null&&e!==void 0?e:[]);return new Map(i.map(s=>[s.getPlugin("formulas").sheetId,s]))}function yz(n,e){if(n){const t=B_(),i=t.get(n),s=Wk(),r=s.get(n);i&&i.includes(e)&&(i.splice(i.indexOf(e),1),i.length===0&&t.delete(n)),r&&r.includes(e.guid)&&(r.splice(r.indexOf(e.guid),1),r.length===0&&(s.delete(n),n.destroy()))}}function COe(n,e){e&&e.forEach(t=>{const{name:i,plugin:s,translations:r}=t;try{n.registerFunction(i,s,r)}catch(o){Vt(o.message)}})}function SOe(n,e){if(e){const{langCode:t}=e;try{n.registerLanguage(t,e)}catch(i){Vt(i.message)}}}function _Oe(n,e){e&&(n.suspendEvaluation(),e.forEach(t=>{const{name:i,expression:s,scope:r,options:o}=t;try{n.addNamedExpression(i,s,r,o)}catch(a){Vt(a.message)}}),n.resumeEvaluation())}function ROe(n,e){return(nn(e)||!n.doesSheetExist(e))&&(e=n.addSheet(e)),e}const Cz="DD/MM/YYYY";function Sz(n){return typeof n=="string"&&n.charAt(0)==="'"&&n.charAt(1)==="="}function xOe(n){return Sz(n)?n.substr(1):n}function EOe(n){return typeof n=="string"&&n.startsWith("=")}function jk(n,e){return typeof n=="string"&&e==="date"}function _z(n,e){return le(n,e,!0).isValid()}function Rz(n,e){return le(n,e,!0).format(Cz)}function TOe(n,e){return le(n,Cz,!0).format(e)}function xz(n,e){const i=new Date(Date.UTC(0,0,n+-1));return le(i).format(e)}function MOe(n,e,t){const i=Array.from(Array(t).keys()).filter(r=>n.includes(r)===!1);if(e===0){var s;return(s=i[e])!==null&&s!==void 0?s:0}return i[e-1]+1}function AOe(n,e){const t=[];return n.forEach(i=>{const s={from:i,to:e};t.forEach(r=>{const o=r.from>r.to,a=r.to<=s.from;r.from>s.from&&a&&o&&(s.from+=1)}),s.from>=e&&(e+=1),t.push(s)}),t}function POe(n){return n.forEach((e,t)=>{n.slice(t+1).forEach(s=>{const r=s.from<s.to;s.from>e.from&&r&&(s.from-=1)})}),n}function zk(n,e,t){const i=AOe(n,MOe(n,e,t));return POe(i)}function _d(n,e,t){IOe(n,e),e.set(n,t)}function IOe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mn(n,e){return n.get(Ez(n,e))}function bh(n,e,t){return n.set(Ez(n,e),t),t}function Ez(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var jw=new WeakMap,wh=new WeakMap,or=new WeakMap,V_=new WeakMap,Uk=new WeakMap,Yk=new WeakMap,W_=new WeakMap;class Tz{constructor(e,t,i){_d(this,jw,void 0),_d(this,wh,void 0),_d(this,or,void 0),_d(this,V_,[]),_d(this,Uk,[]),_d(this,Yk,void 0),_d(this,W_,[]),bh(jw,this,e),bh(wh,this,t),bh(or,this,i)}setRemovedHfIndexes(e){return bh(W_,this,e.map(t=>{const i=mn(wh,this).getVisualFromPhysicalIndex(t);return this.getHfIndexFromVisualIndex(i)})),mn(W_,this)}getRemovedHfIndexes(){return mn(W_,this)}getHfIndexFromVisualIndex(e){const t=mn(wh,this).getIndexesSequence(),i=mn(wh,this).getNotTrimmedIndexes();return t.indexOf(i[e])}syncMoves(e){const i=`move${Ki(mn(jw,this))}s`;mn(or,this).getEngine().batch(()=>{e.forEach(s=>{const r=s.from!==s.to,o=s.from+1!==s.to;r&&o&&mn(or,this).getEngine()[i](mn(or,this).getSheetId(),s.from,1,s.to)})})}storeMovesInformation(e,t,i){i!==!1&&(bh(Uk,this,e.map(s=>this.getHfIndexFromVisualIndex(s))),bh(Yk,this,this.getHfIndexFromVisualIndex(t)))}calculateAndSyncMoves(e,t){if(mn(or,this).isPerformingUndoRedo()||e===!1||t===!1)return;const i=zk(mn(Uk,this),mn(Yk,this),mn(wh,this).getNumberOfIndexes());mn(or,this).getSheetId()===null?mn(or,this).getPostponeAction(()=>this.syncMoves(i)):this.syncMoves(i)}getIndexesChangeSyncMethod(){const e=`set${Ki(mn(jw,this))}Order`;return t=>{if(mn(or,this).isPerformingUndoRedo())return;const i=mn(wh,this).getIndexesSequence();if(t==="update"&&i.length>0){const s=mn(V_,this).map(l=>i.indexOf(l)),r=mn(or,this).getEngine().getSheetDimensions(mn(or,this).getSheetId());let o;mn(jw,this)==="row"?o=r.height:o=r.width;const a=s.length;for(let l=a;l<o;l+=1)s.push(l);mn(or,this).getEngine()[e](mn(or,this).getSheetId(),s)}bh(V_,this,i)}}init(){bh(V_,this,mn(wh,this).getIndexesSequence())}}function Rd(n,e,t){OOe(n,e),e.set(n,t)}function OOe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tc(n,e){return n.get(Mz(n,e))}function xd(n,e,t){return n.set(Mz(n,e),t),t}function Mz(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var j_=new WeakMap,z_=new WeakMap,Gk=new WeakMap,Kk=new WeakMap,qk=new WeakMap,Xk=new WeakMap,Qk=new WeakMap;class kOe{constructor(e,t,i){Rd(this,j_,void 0),Rd(this,z_,void 0),Rd(this,Gk,void 0),Rd(this,Kk,!1),Rd(this,qk,!1),Rd(this,Xk,null),Rd(this,Qk,null),xd(j_,this,new Tz("row",e,this)),xd(z_,this,new Tz("column",t,this)),xd(Gk,this,i)}getForAxis(e){return e==="row"?tc(j_,this):tc(z_,this)}setPerformUndo(e){xd(Kk,this,e)}setPerformRedo(e){xd(qk,this,e)}isPerformingUndoRedo(){return tc(Kk,this)||tc(qk,this)}getSheetId(){return tc(Qk,this)}getEngine(){return tc(Xk,this)}getPostponeAction(){return tc(Gk,this)}setupSyncEndpoint(e,t){xd(Xk,this,e),xd(Qk,this,t),tc(j_,this).init(),tc(z_,this).init()}}function HOe(n,e){Az(n,e),e.add(n)}function qg(n,e,t){return(e=DOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DOe(n){var e=NOe(n,"string");return typeof e=="symbol"?e:e+""}function NOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Zk(n,e,t){Az(n,e),e.set(n,t)}function Az(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vh(n,e,t){return n.set(Ut(n,e),t),t}function Xg(n,e){return n.get(Ut(n,e))}function Ut(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const es="formulas",LOe=["maxRows","maxColumns","language"],$Oe=260;xe.getSingleton().register("afterNamedExpressionAdded"),xe.getSingleton().register("afterNamedExpressionRemoved"),xe.getSingleton().register("afterSheetAdded"),xe.getSingleton().register("afterSheetRemoved"),xe.getSingleton().register("afterSheetRenamed"),xe.getSingleton().register("afterFormulasValuesUpdate");const Qg=n=>n==="UndoRedo.undo"||n==="UndoRedo.redo"||n==="auto";var nc=new WeakMap,Jk=new WeakMap,zw=new WeakMap,Zt=new WeakSet;class FOe extends Pt{constructor(){var e;super(...arguments),e=this,HOe(this,Zt),Zk(this,nc,!1),Zk(this,Jk,!1),Zk(this,zw,[["valuesUpdated",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ut(Zt,e,tke).call(e,...i)}],["namedExpressionAdded",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ut(Zt,e,nke).call(e,...i)}],["namedExpressionRemoved",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ut(Zt,e,ike).call(e,...i)}],["sheetAdded",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ut(Zt,e,ske).call(e,...i)}],["sheetRenamed",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ut(Zt,e,rke).call(e,...i)}],["sheetRemoved",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ut(Zt,e,oke).call(e,...i)}]]),qg(this,"staticRegister",So("formulas")),qg(this,"engine",null),qg(this,"sheetName",null),qg(this,"indexSyncer",null),qg(this,"rowAxisSyncer",null),qg(this,"columnAxisSyncer",null)}static get PLUGIN_KEY(){return es}static get PLUGIN_PRIORITY(){return $Oe}static get SETTING_KEYS(){return[es,...LOe]}get sheetId(){return this.sheetName===null?null:this.engine.getSheetId(this.sheetName)}isEnabled(){return!!this.hot.getSettings()[es]}enablePlugin(){var e,t=this;if(!this.enabled){if(this.engine=(e=vOe(this.hot))!==null&&e!==void 0?e:this.engine,!this.engine){Vt("Missing the required `engine` key in the Formulas settings. Please fill it with either an engine class or an engine instance.");return}if(this.sheetName!==null&&!this.engine.doesSheetExist(this.sheetName)){const i=this.addSheet(this.sheetName,this.hot.getSourceDataArray());i!==!1&&(this.sheetName=i)}this.addHook("beforeLoadData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,Pz).call(t,...s)}),this.addHook("afterLoadData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,Iz).call(t,...s)}),this.addHook("beforeUpdateData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,Pz).call(t,...s)}),this.addHook("afterUpdateData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,Iz).call(t,...s)}),this.addHook("modifyData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,jOe).call(t,...s)}),this.addHook("modifySourceData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,zOe).call(t,...s)}),this.addHook("beforeValidate",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,BOe).call(t,...s)}),this.addHook("afterSetSourceDataAtCell",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,UOe).call(t,...s)}),this.addHook("afterSetDataAtCell",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,Oz).call(t,...s)}),this.addHook("afterSetDataAtRowProp",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,Oz).call(t,...s)}),this.addHook("beforeCreateRow",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,YOe).call(t,...s)}),this.addHook("beforeCreateCol",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,GOe).call(t,...s)}),this.addHook("afterCreateRow",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,XOe).call(t,...s)}),this.addHook("afterCreateCol",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,QOe).call(t,...s)}),this.addHook("beforeRemoveRow",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,KOe).call(t,...s)}),this.addHook("beforeRemoveCol",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,qOe).call(t,...s)}),this.addHook("afterRemoveRow",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,ZOe).call(t,...s)}),this.addHook("afterRemoveCol",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,JOe).call(t,...s)}),this.indexSyncer=new kOe(this.hot.rowIndexMapper,this.hot.columnIndexMapper,i=>{this.hot.addHookOnce("init",()=>{i()})}),this.rowAxisSyncer=this.indexSyncer.getForAxis("row"),this.columnAxisSyncer=this.indexSyncer.getForAxis("column"),this.hot.addHook("afterRowSequenceChange",this.rowAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("afterColumnSequenceChange",this.columnAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("beforeRowMove",(i,s,r,o)=>{this.rowAxisSyncer.storeMovesInformation(i,s,o)}),this.hot.addHook("beforeColumnMove",(i,s,r,o)=>{this.columnAxisSyncer.storeMovesInformation(i,s,o)}),this.hot.addHook("afterRowMove",(i,s,r,o,a)=>{this.rowAxisSyncer.calculateAndSyncMoves(o,a)}),this.hot.addHook("afterColumnMove",(i,s,r,o,a)=>{this.columnAxisSyncer.calculateAndSyncMoves(o,a)}),this.hot.addHook("beforeColumnFreeze",(i,s)=>{this.columnAxisSyncer.storeMovesInformation([i],this.hot.getSettings().fixedColumnsStart,s)}),this.hot.addHook("afterColumnFreeze",(i,s)=>{this.columnAxisSyncer.calculateAndSyncMoves(s,s)}),this.hot.addHook("beforeColumnUnfreeze",(i,s)=>{this.columnAxisSyncer.storeMovesInformation([i],this.hot.getSettings().fixedColumnsStart-1,s)}),this.hot.addHook("afterColumnUnfreeze",(i,s)=>{this.columnAxisSyncer.calculateAndSyncMoves(s,s)}),this.addHook("afterCellMetaReset",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,WOe).call(t,...s)}),this.addHook("beforeUndo",()=>{this.indexSyncer.setPerformUndo(!0),this.engine.undo()}),this.addHook("beforeRedo",()=>{this.indexSyncer.setPerformRedo(!0),this.engine.redo()}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformUndo(!1)}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformRedo(!1)}),this.addHook("afterDetachChild",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,eke).call(t,...s)}),this.addHook("beforeAutofill",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ut(Zt,t,VOe).call(t,...s)}),Xg(zw,this).forEach(i=>{let[s,r]=i;return this.engine.on(s,r)}),super.enablePlugin()}}disablePlugin(){Xg(zw,this).forEach(e=>{let[t,i]=e;return this.engine.off(t,i)}),yz(this.engine,this.hot),this.engine=null,super.disablePlugin()}updatePlugin(e){const t=bOe(this.hot.getSettings());wOe(this.engine.getConfig(),t)&&this.engine.updateConfig(t);const i=this.hot.getSettings()[es];if(Me(i)&&Me(i.sheetName)&&i.sheetName!==this.sheetName&&this.switchSheet(i.sheetName),!e.data&&this.sheetName===null){const s=this.hot.getSettings()[es].sheetName;s&&this.engine.doesSheetExist(s)?this.switchSheet(this.sheetName):this.sheetName=this.addSheet(s??void 0,this.hot.getSourceDataArray())}super.updatePlugin(e)}destroy(){Xg(zw,this).forEach(e=>{var t;let[i,s]=e;return(t=this.engine)===null||t===void 0?void 0:t.off(i,s)}),vh(zw,this,null),yz(this.engine,this.hot),this.engine=null,super.destroy()}addSheet(e,t){if(Me(t)&&!U5(t))return Vt("The provided data should be an array of arrays."),!1;if(e!=null&&this.engine.doesSheetExist(e))return Vt("Sheet with the provided name already exists."),!1;try{const i=this.engine.addSheet(e??void 0);return t&&this.engine.setSheetContent(this.engine.getSheetId(i),t),i}catch(i){return Vt(i.message),!1}}switchSheet(e){if(!this.engine.doesSheetExist(e)){xA(`The sheet named \`${e}\` does not exist, switch aborted.`);return}this.sheetName=e;const t=this.engine.getSheetSerialized(this.sheetId);t.length>0&&this.hot.loadData(t,`${Ki(es)}.switchSheet`)}getCellType(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.sheetId;const s=this.hot.toPhysicalRow(e),r=this.hot.toPhysicalColumn(t);return s!==null&&r!==null?this.engine.getCellType({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t)}):"EMPTY"}isFormulaCellType(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.sheetId;return this.engine.doesCellHaveFormula({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t)})}renderDependentSheets(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=new Set;e.forEach(s=>{var r;const o=s==null||(r=s.address)===null||r===void 0?void 0:r.sheet;o!==void 0&&(i.has(o)||i.add(o))}),vz(this.engine).forEach((s,r)=>{if((t||r!==this.sheetId)&&i.has(r)){var o;s.render(),(o=s.view)===null||o===void 0||o.adjustElementsSize()}})}validateDependentCells(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=r=>{var o;const{row:a,col:l,sheet:c}=(o=r==null?void 0:r.address)!==null&&o!==void 0?o:{};return Me(c)?`${c}:${a}x${l}`:""},s=new Set(t.map(r=>i(r)));e.forEach(r=>{var o,a;const{row:l,col:c}=(o=r.address)!==null&&o!==void 0?o:{};if(Me(l)===!1||Me(c)===!1||l>=this.hot.countRows()||c>=this.hot.countCols())return;const h=r==null||(a=r.address)===null||a===void 0?void 0:a.sheet,u=i(r);if(h!==void 0&&!s.has(u)){const d=vz(this.engine).get(h);if(!d)return;d.validateCell(d.getDataAtCell(l,c),d.getCellMeta(l,c),()=>{})}})}syncChangeWithEngine(e,t,i){const s={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(s)){Vt(`Not possible to set cell data at ${JSON.stringify(s)}`);return}const r=this.hot.getCellMeta(e,t);return jk(i,r.type)&&(_z(i,r.dateFormat)?i=Rz(i,r.dateFormat):EOe(i)===!1&&(i=`'${i}`)),this.engine.setCellContents(s,i)}}function BOe(n,e,t){const i=this.hot.propToCol(t);if(this.isFormulaCellType(e,i)){const s={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(i),sheet:this.sheetId},r=this.hot.getCellMeta(e,i);let o=this.engine.getCellValue(s);return r.type==="date"&&Xi(o)&&(o=xz(o,r.dateFormat)),typeof o=="object"&&o!==null?o.value:o}return n}function VOe(n,e,t){const{row:i,col:s}=e.getTopStartCorner(),{row:r,col:o}=e.getBottomEndCorner(),{row:a,col:l}=t.getTopStartCorner(),{row:c,col:h}=t.getBottomEndCorner(),u={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(i),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(s),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(o),sheet:this.sheetId}},d={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(a),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(c),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(h),sheet:this.sheetId}};if(this.engine.isItPossibleToSetCellContents(d)===!1)return!1;const f=this.engine.getFillRangeData(u,d),{row:g,col:p}=u.start,{row:m,col:w}=u.end,y=m-g+1,C=w-p+1;for(let R=0;R<f.length;R+=1)for(let _=0;_<f[R].length;_+=1){const x=f[R][_],M=g+R%y,I=p+_%C,A=this.hot.getCellMeta(M,I);jk(x,A.type)&&(x.startsWith("'")?f[R][_]=x.slice(1):this.isFormulaCellType(M,I,this.sheetId)===!1&&(f[R][_]=TOe(x,A.dateFormat)))}return f}function Pz(n,e){(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"").includes(Ki(es))||vh(Jk,this,nn(this.hot.getSettings().data))}function WOe(){const n=this.hot.getSourceDataArray();let e=!1;n.forEach((t,i)=>{t.forEach((s,r)=>{const o=this.hot.getCellMeta(i,r),a=o.dateFormat;jk(s,o.type)&&(e=!0,_z(s,a)?n[i][r]=Rz(s,a):this.isFormulaCellType(i,r)===!1&&(n[i][r]=`'${s}`))})}),e===!0&&(vh(nc,this,!0),this.engine.setSheetContent(this.sheetId,n),vh(nc,this,!1))}function Iz(n,e){if(!(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"").includes(Ki(es)))if(this.sheetName=ROe(this.engine,this.hot.getSettings()[es].sheetName),Xg(Jk,this))this.switchSheet(this.sheetName);else{const i=this.hot.getSourceDataArray();if(this.engine.isItPossibleToReplaceSheetContent(this.sheetId,i)){vh(nc,this,!0);const s=this.engine.setSheetContent(this.sheetId,i);this.indexSyncer.setupSyncEndpoint(this.engine,this.sheetId),this.renderDependentSheets(s),vh(nc,this,!1)}}}function jOe(n,e,t,i){if(i!=="get"||Xg(nc,this)||this.sheetName===null||!this.engine.doesSheetExist(this.sheetName))return;const s=this.hot.toVisualRow(n);if(s===null||e===null)return;if(!this.isFormulaCellType(s,e)&&this.getCellType(s,e)!=="ARRAY"){Sz(t.value)&&(t.value=xOe(t.value));return}const o={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(s),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e),sheet:this.sheetId};let a=this.engine.getCellValue(o),l=this.hot.getCellsMeta().find(h=>h.visualRow===s&&h.visualCol===e);l===void 0&&(l={}),l.type==="date"&&Xi(a)&&(a=xz(a,l.dateFormat));const c=typeof a=="object"&&a!==null?a.value:a;t.value=c}function zOe(n,e,t,i){if(i!=="get"||Xg(nc,this)||this.sheetName===null||!this.engine.doesSheetExist(this.sheetName))return;const s=this.hot.toVisualRow(n),r=this.hot.propToCol(e);if(s===null||r===null||!this.isFormulaCellType(s,r)&&this.getCellType(s,r)!=="ARRAY")return;const a=this.engine.getSheetDimensions(this.engine.getSheetId(this.sheetName));if(a.width===0&&a.height===0)return;const l={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(s),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(r),sheet:this.sheetId};t.value=this.engine.getCellSerialized(l)}function Oz(n,e){if(Qg(e))return;const t=[],i=[],s=this.engine.batch(()=>{n.forEach(r=>{let[o,a,,l]=r;const c=this.hot.propToCol(a),h=this.hot.toPhysicalRow(o),u=this.hot.toPhysicalColumn(c),d={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(o),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(c),sheet:this.sheetId};h!==null&&u!==null?this.syncChangeWithEngine(o,c,l):t.push([o,c,l]),i.push({address:d})})});t.length&&this.hot.addHookOnce("afterChange",()=>{const r=this.engine.batch(()=>{t.forEach(o=>{let[a,l,c]=o;this.syncChangeWithEngine(a,l,c)})});this.renderDependentSheets(r,!0)}),this.renderDependentSheets(s),this.validateDependentCells(s,i)}function UOe(n,e){if(Qg(e))return;const t=[],i=[];n.forEach(s=>{let[r,o,,a]=s;const l=this.hot.propToCol(o);if(!Xi(l))return;const c={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(c)){Vt(`Not possible to set source cell data at ${JSON.stringify(c)}`);return}i.push({address:c}),t.push(...this.engine.setCellContents(c,a))}),this.renderDependentSheets(t),this.validateDependentCells(t,i)}function YOe(n,e){let t=this.rowAxisSyncer.getHfIndexFromVisualIndex(n);if(n>=this.hot.countRows()&&(t=n),this.sheetId===null||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddRows(this.sheetId,[t,e]))return!1}function GOe(n,e){let t=this.columnAxisSyncer.getHfIndexFromVisualIndex(n);if(n>=this.hot.countCols()&&(t=n),this.sheetId===null||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddColumns(this.sheetId,[t,e]))return!1}function KOe(n,e,t){return this.rowAxisSyncer.setRemovedHfIndexes(t).every(r=>this.engine.isItPossibleToRemoveRows(this.sheetId,[r,1]))===!1?!1:void 0}function qOe(n,e,t){return this.columnAxisSyncer.setRemovedHfIndexes(t).every(r=>this.engine.isItPossibleToRemoveColumns(this.sheetId,[r,1]))===!1?!1:void 0}function XOe(n,e,t){if(Qg(t))return;const i=this.engine.addRows(this.sheetId,[this.rowAxisSyncer.getHfIndexFromVisualIndex(n),e]);this.renderDependentSheets(i)}function QOe(n,e,t){if(Qg(t))return;const i=this.engine.addColumns(this.sheetId,[this.columnAxisSyncer.getHfIndexFromVisualIndex(n),e]);this.renderDependentSheets(i)}function ZOe(n,e,t,i){if(Qg(i))return;const s=this.rowAxisSyncer.getRemovedHfIndexes().sort((o,a)=>a-o),r=this.engine.batch(()=>{s.forEach(o=>{this.engine.removeRows(this.sheetId,[o,1])})});this.renderDependentSheets(r)}function JOe(n,e,t,i){if(Qg(i))return;const s=this.columnAxisSyncer.getRemovedHfIndexes().sort((o,a)=>a-o),r=this.engine.batch(()=>{s.forEach(o=>{this.engine.removeColumns(this.sheetId,[o,1])})});this.renderDependentSheets(r)}function eke(n,e,t){var i;vh(nc,this,!0);const s=this.hot.getSourceDataArray(t,0,t+(((i=e.__children)===null||i===void 0?void 0:i.length)||0),this.hot.countSourceCols());vh(nc,this,!1),s.forEach((r,o)=>{r.forEach((a,l)=>{this.engine.setCellContents({col:l,row:t+o,sheet:this.sheetId},[[a]])})})}function tke(n){this.hot.runHooks("afterFormulasValuesUpdate",n)}function nke(n,e){this.hot.runHooks("afterNamedExpressionAdded",n,e)}function ike(n,e){this.hot.runHooks("afterNamedExpressionRemoved",n,e)}function ske(n){this.hot.runHooks("afterSheetAdded",n)}function rke(n,e){this.sheetName=e,this.hot.runHooks("afterSheetRenamed",n,e)}function oke(n,e){this.hot.runHooks("afterSheetRemoved",n,e)}function ake(n){return{key:"hidden_columns_hide",name(){const e=this.getSelectedLast();let t=0;if(Array.isArray(e)){const[,i,,s]=e;i-s!==0&&(t=1)}return this.getTranslatedPhrase(fI,t)},callback(){const{from:e,to:t}=this.getSelectedRangeLast(),i=Math.max(Math.min(e.col,t.col),0),s=Math.max(e.col,t.col),r=[];for(let l=i;l<=s;l+=1)r.push(l);n.hideColumns(r);const o=r[r.length-1],a=this.columnIndexMapper.getNearestNotHiddenIndex(o,1,!0);Number.isInteger(a)&&a>=0?this.selectColumns(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}}function lke(n){const e=[];return{key:"hidden_columns_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(gI,t)},callback(){var t,i;if(e.length===0)return;let s=e[0],r=e[e.length-1];s=(t=this.columnIndexMapper.getNearestNotHiddenIndex(s-1,-1))!==null&&t!==void 0?t:0,r=(i=this.columnIndexMapper.getNearestNotHiddenIndex(r+1,1))!==null&&i!==void 0?i:this.countCols()-1,n.showColumns(e),this.render(),this.view.adjustElementsSize(),r-s+1===this.countCols()||this.selectColumns(s,r)},disabled:!1,hidden(){const t=ct(n.getHiddenColumns(),u=>this.toPhysicalColumn(u));if(!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())||t.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),s=i.getTopStartCorner().col,r=i.getBottomEndCorner().col,o=this.columnIndexMapper,a=o.getRenderableFromVisualIndex(s),l=o.getRenderableFromVisualIndex(r),c=o.getNotTrimmedIndexes(),h=[];if(s!==r){const u=r-s+1,d=l-a+1;if(u>d){const f=c.slice(s,r+1);h.push(...f.filter(g=>t.includes(g)))}}else if(a===0&&a<s)h.push(...c.slice(0,s));else if(a===null)h.push(...c.slice(0,this.countCols()));else{const u=this.countCols()-1,d=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(u,-1));l===d&&u>r&&h.push(...c.slice(r+1))}return F(h,u=>{e.push(this.toVisualColumn(u))}),e.length===0}}}function cke(n,e){Hz(n,e),e.add(n)}function kz(n,e,t){Hz(n,e),e.set(n,t)}function Hz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ar(n,e){return n.get(yh(n,e))}function Uw(n,e,t){return n.set(yh(n,e),t),t}function yh(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}xe.getSingleton().register("beforeHideColumns"),xe.getSingleton().register("afterHideColumns"),xe.getSingleton().register("beforeUnhideColumns"),xe.getSingleton().register("afterUnhideColumns");const eH="hiddenColumns",hke=310;var Oa=new WeakMap,ka=new WeakMap,Ed=new WeakSet;class uke extends Pt{constructor(){super(...arguments),cke(this,Ed),kz(this,Oa,{}),kz(this,ka,null)}static get PLUGIN_KEY(){return eH}static get PLUGIN_PRIORITY(){return hke}isEnabled(){return!!this.hot.getSettings()[eH]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[eH];Je(t)&&(Uw(Oa,this,t),nn(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),Uw(ka,this,new tS),ar(ka,this).addLocalHook("init",()=>yh(Ed,this,bke).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,ar(ka,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return yh(Ed,e,mke).call(e,...s)}),this.addHook("afterGetCellMeta",(i,s,r)=>yh(Ed,this,fke).call(this,i,s,r)),this.addHook("modifyColWidth",(i,s)=>yh(Ed,this,dke).call(this,i,s),2),this.addHook("afterGetColHeader",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return yh(Ed,e,pke).call(e,...s)}),this.addHook("modifyCopyableRange",i=>yh(Ed,this,gke).call(this,i)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),Uw(Oa,this,{}),super.disablePlugin(),this.resetCellsMeta()}showColumns(e){const t=this.getHiddenColumns(),i=this.isValidConfig(e);let s=t;const r=ar(ka,this).getValues().slice(),o=e.length>0;if(i&&o){const l=e.map(c=>this.hot.toPhysicalColumn(c));F(l,c=>{r[c]=!1}),s=Qn(r,(c,h,u)=>(h&&c.push(this.hot.toVisualColumn(u)),c),[])}this.hot.runHooks("beforeUnhideColumns",t,s,i&&o)!==!1&&(i&&o&&ar(ka,this).setValues(r),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",t,s,i&&o,i&&s.length<t.length))}showColumn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.showColumns(t)}hideColumns(e){const t=this.getHiddenColumns(),i=this.isValidConfig(e);let s=t;i&&(s=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeHideColumns",t,s,i)!==!1&&(i&&this.hot.batchExecution(()=>{F(e,o=>{ar(ka,this).setValueAtIndex(this.hot.toPhysicalColumn(o),!0)})},!0),this.hot.runHooks("afterHideColumns",t,s,i,i&&s.length>t.length))}hideColumn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.hideColumns(t)}getHiddenColumns(){return ct(ar(ka,this).getHiddenIndexes(),e=>this.hot.toVisualColumn(e))}isHidden(e){return ar(ka,this).getValueAtIndex(this.hot.toPhysicalColumn(e))||!1}isValidConfig(e){const t=this.hot.countCols();return Array.isArray(e)&&e.length>0?e.every(i=>Number.isInteger(i)&&i>=0&&i<t):!1}resetCellsMeta(){F(this.hot.getCellsMeta(),e=>{e&&(e.skipColumnOnPaste=!1)})}destroy(){Uw(Oa,this,null),Uw(ka,this,null),super.destroy()}}function dke(n,e){if(this.isHidden(e))return 0;if(ar(Oa,this).indicators&&(this.isHidden(e+1)||this.isHidden(e-1))&&typeof n=="number"&&this.hot.hasColHeaders())return n+15}function fke(n,e,t){if(ar(Oa,this).copyPasteEnabled===!1&&this.isHidden(e)&&(t.skipColumnOnPaste=!0),this.isHidden(e-1))t.className=t.className||"",t.className.indexOf("afterHiddenColumn")===-1&&(t.className+=" afterHiddenColumn");else if(t.className){const i=t.className.split(" ");if(i.length>0){const s=i.indexOf("afterHiddenColumn");s>-1&&i.splice(s,1),t.className=i.join(" ")}}}function gke(n){if(ar(Oa,this).copyPasteEnabled)return n;const e=[],t=(i,s,r,o)=>{e.push({startRow:i,endRow:s,startCol:r,endCol:o})};return F(n,i=>{let s=!0,r=0;Oe(i.startCol,i.endCol,o=>{this.isHidden(o)?(s||t(i.startRow,i.endRow,r,o-1),s=!0):(s&&(r=o),o===i.endCol&&t(i.startRow,i.endRow,r,o),s=!1)})}),e}function pke(n,e){if(!ar(Oa,this).indicators||n<0)return;const t=[];n>=1&&this.isHidden(n-1)&&t.push("afterHiddenColumn"),n<this.hot.countCols()-1&&this.isHidden(n+1)&&t.push("beforeHiddenColumn"),ae(e,t)}function mke(n){n.items.push({name:st},ake(this),lke(this))}function bke(){Array.isArray(ar(Oa,this).columns)&&this.hideColumns(ar(Oa,this).columns)}function wke(n){return{key:"hidden_rows_hide",name(){const e=this.getSelectedLast();let t=0;if(Array.isArray(e)){const[i,,s]=e;i-s!==0&&(t=1)}return this.getTranslatedPhrase(pI,t)},callback(){const{from:e,to:t}=this.getSelectedRangeLast(),i=Math.max(Math.min(e.row,t.row),0),s=Math.max(e.row,t.row),r=[];for(let l=i;l<=s;l+=1)r.push(l);n.hideRows(r);const o=r[r.length-1],a=this.rowIndexMapper.getNearestNotHiddenIndex(o,1,!0);Number.isInteger(a)&&a>=0?this.selectRows(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}}function vke(n){const e=[];return{key:"hidden_rows_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(mI,t)},callback(){var t,i;if(e.length===0)return;let s=e[0],r=e[e.length-1];s=(t=this.rowIndexMapper.getNearestNotHiddenIndex(s-1,-1))!==null&&t!==void 0?t:0,r=(i=this.rowIndexMapper.getNearestNotHiddenIndex(r+1,1))!==null&&i!==void 0?i:this.countRows()-1,n.showRows(e),this.render(),this.view.adjustElementsSize(),r-s+1===this.countRows()||this.selectRows(s,r)},disabled:!1,hidden(){const t=ct(n.getHiddenRows(),u=>this.toPhysicalRow(u));if(!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())||t.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),s=i.getTopStartCorner().row,r=i.getBottomEndCorner().row,o=this.rowIndexMapper,a=o.getRenderableFromVisualIndex(s),l=o.getRenderableFromVisualIndex(r),c=o.getNotTrimmedIndexes(),h=[];if(s!==r){const u=r-s+1,d=l-a+1;if(u>d){const f=c.slice(s,r+1);h.push(...f.filter(g=>t.includes(g)))}}else if(a===0&&a<s)h.push(...c.slice(0,s));else if(a===null)h.push(...c.slice(0,this.countRows()));else{const u=this.countRows()-1,d=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(u,-1));l===d&&u>r&&h.push(...c.slice(r+1))}return F(h,u=>{e.push(this.toVisualRow(u))}),e.length===0}}}function yke(n,e){Nz(n,e),e.add(n)}function Dz(n,e,t){Nz(n,e),e.set(n,t)}function Nz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zr(n,e){return n.get(Ch(n,e))}function Yw(n,e,t){return n.set(Ch(n,e),t),t}function Ch(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}xe.getSingleton().register("beforeHideRows"),xe.getSingleton().register("afterHideRows"),xe.getSingleton().register("beforeUnhideRows"),xe.getSingleton().register("afterUnhideRows");const tH="hiddenRows",Cke=320;var ic=new WeakMap,Ha=new WeakMap,Td=new WeakSet;class Ske extends Pt{constructor(){super(...arguments),yke(this,Td),Dz(this,ic,{}),Dz(this,Ha,null)}static get PLUGIN_KEY(){return tH}static get PLUGIN_PRIORITY(){return Cke}isEnabled(){return!!this.hot.getSettings()[tH]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[tH];Je(t)&&(Yw(ic,this,t),nn(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),Yw(Ha,this,new tS),zr(Ha,this).addLocalHook("init",()=>Ch(Td,this,Mke).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,zr(Ha,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ch(Td,e,Tke).call(e,...s)}),this.addHook("afterGetCellMeta",(i,s,r)=>Ch(Td,this,Rke).call(this,i,s,r)),this.addHook("modifyRowHeight",(i,s)=>Ch(Td,this,_ke).call(this,i,s)),this.addHook("afterGetRowHeader",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ch(Td,e,Eke).call(e,...s)}),this.addHook("modifyCopyableRange",i=>Ch(Td,this,xke).call(this,i)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),Yw(ic,this,{}),super.disablePlugin(),this.resetCellsMeta()}showRows(e){const t=this.getHiddenRows(),i=this.isValidConfig(e);let s=t;const r=zr(Ha,this).getValues().slice(),o=e.length>0;if(i&&o){const l=e.map(c=>this.hot.toPhysicalRow(c));F(l,c=>{r[c]=!1}),s=Qn(r,(c,h,u)=>(h&&c.push(this.hot.toVisualRow(u)),c),[])}this.hot.runHooks("beforeUnhideRows",t,s,i&&o)!==!1&&(i&&o&&zr(Ha,this).setValues(r),this.hot.runHooks("afterUnhideRows",t,s,i&&o,i&&s.length<t.length))}showRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.showRows(t)}hideRows(e){const t=this.getHiddenRows(),i=this.isValidConfig(e);let s=t;i&&(s=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeHideRows",t,s,i)!==!1&&(i&&this.hot.batchExecution(()=>{F(e,o=>{zr(Ha,this).setValueAtIndex(this.hot.toPhysicalRow(o),!0)})},!0),this.hot.runHooks("afterHideRows",t,s,i,i&&s.length>t.length))}hideRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.hideRows(t)}getHiddenRows(){return ct(zr(Ha,this).getHiddenIndexes(),e=>this.hot.toVisualRow(e))}isHidden(e){return zr(Ha,this).getValueAtIndex(this.hot.toPhysicalRow(e))||!1}isValidConfig(e){const t=this.hot.countRows();return Array.isArray(e)&&e.length>0?e.every(i=>Number.isInteger(i)&&i>=0&&i<t):!1}resetCellsMeta(){F(this.hot.getCellsMeta(),e=>{e&&(e.skipRowOnPaste=!1)})}destroy(){Yw(ic,this,null),Yw(Ha,this,null),super.destroy()}}function _ke(n,e){return this.isHidden(e)?0:n}function Rke(n,e,t){if(zr(ic,this).copyPasteEnabled===!1&&this.isHidden(n)&&(t.skipRowOnPaste=!0),this.isHidden(n-1))t.className=t.className||"",t.className.indexOf("afterHiddenRow")===-1&&(t.className+=" afterHiddenRow");else if(t.className){const i=t.className.split(" ");if(i.length>0){const s=i.indexOf("afterHiddenRow");s>-1&&i.splice(s,1),t.className=i.join(" ")}}}function xke(n){if(zr(ic,this).copyPasteEnabled)return n;const e=[],t=(i,s,r,o)=>{e.push({startRow:i,endRow:s,startCol:r,endCol:o})};return F(n,i=>{let s=!0,r=0;Oe(i.startRow,i.endRow,o=>{this.isHidden(o)?(s||t(r,o-1,i.startCol,i.endCol),s=!0):(s&&(r=o),o===i.endRow&&t(r,o,i.startCol,i.endCol),s=!1)})}),e}function Eke(n,e){if(!zr(ic,this).indicators||n<0)return;const t=[];n>=1&&this.isHidden(n-1)&&t.push("afterHiddenRow"),n<this.hot.countRows()-1&&this.isHidden(n+1)&&t.push("beforeHiddenRow"),ae(e,t)}function Tke(n){n.items.push({name:st},wke(this),vke(this))}function Mke(){Array.isArray(zr(ic,this).rows)&&this.hideRows(zr(ic,this).rows)}function Ake(n){return{key:"freeze_column",name(){return this.getTranslatedPhrase(XP)},callback(e,t){const[{start:{col:i}}]=t;n.freezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const e=this.getSelectedRange();let t=!1;return(e===void 0||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col<=this.getSettings().fixedColumnsStart-1)&&(t=!0),t}}}function Pke(n){return{key:"unfreeze_column",name(){return this.getTranslatedPhrase(QP)},callback(e,t){const[{start:{col:i}}]=t;n.unfreezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const e=this.getSelectedRange();let t=!1;return(e===void 0||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col>=this.getSettings().fixedColumnsStart)&&(t=!0),t}}}function Ike(n,e){Lz(n,e),e.add(n)}function Oke(n,e,t){Lz(n,e),e.set(n,t)}function Lz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nH(n,e){return n.get(U_(n,e))}function iH(n,e,t){return n.set(U_(n,e),t),t}function U_(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}xe.getSingleton().register("beforeColumnFreeze"),xe.getSingleton().register("afterColumnFreeze"),xe.getSingleton().register("beforeColumnUnfreeze"),xe.getSingleton().register("afterColumnUnfreeze");const $z="manualColumnFreeze",kke=110;var Md=new WeakMap,sH=new WeakSet;class Hke extends Pt{constructor(){super(...arguments),Ike(this,sH),Oke(this,Md,!1)}static get PLUGIN_KEY(){return $z}static get PLUGIN_PRIORITY(){return kke}isEnabled(){return!!this.hot.getSettings()[$z]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",e=>U_(sH,this,Dke).call(this,e)),this.addHook("beforeColumnMove",(e,t)=>U_(sH,this,Nke).call(this,e,t)),super.enablePlugin())}disablePlugin(){iH(Md,this,!1),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}freezeColumn(e){const t=this.hot.getSettings(),i=t.fixedColumnsStart<this.hot.countCols()&&e>t.fixedColumnsStart-1;nH(Md,this)||iH(Md,this,!0),this.hot.runHooks("beforeColumnFreeze",e,i)!==!1&&(i&&(this.hot.columnIndexMapper.moveIndexes(e,t.fixedColumnsStart),t._fixedColumnsStart+=1),this.hot.runHooks("afterColumnFreeze",e,i))}unfreezeColumn(e){const t=this.hot.getSettings(),i=t.fixedColumnsStart>0&&e<=t.fixedColumnsStart-1;nH(Md,this)||iH(Md,this,!0),this.hot.runHooks("beforeColumnUnfreeze",e,i)!==!1&&(i&&(t._fixedColumnsStart-=1,this.hot.columnIndexMapper.moveIndexes(e,t.fixedColumnsStart)),this.hot.runHooks("afterColumnUnfreeze",e,i))}}function Dke(n){n.items.push({name:"---------"},Ake(this),Pke(this))}function Nke(n,e){if(nH(Md,this)){const t=this.hot.getSettings().fixedColumnsStart;if(e<t||n.some(i=>i<t))return!1}}function Y_(n,e,t){return(e=Lke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lke(n){var e=$ke(n,"string");return typeof e=="symbol"?e:e+""}function $ke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const rH=0,Fz=1,Bz=2,Zg="px";let Vz=class{constructor(e){Y_(this,"hot",void 0),Y_(this,"_element",null),Y_(this,"state",rH),Y_(this,"inlineProperty",void 0),this.hot=e,this.inlineProperty=e.isRtl()?"right":"left"}appendTo(e){e.appendChild(this._element),this.state=Bz}build(){this.state===rH&&(this._element=this.hot.rootDocument.createElement("div"),this.state=Fz)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=rH}isAppended(){return this.state===Bz}isBuilt(){return this.state>=Fz}setPosition(e,t){Xi(e)&&(this._element.style.top=e+Zg),Xi(t)&&(this._element.style[this.inlineProperty]=t+Zg)}getPosition(){const e=this._element.style;return{top:e.top?parseInt(e.top,10):0,start:e[this.inlineProperty]?parseInt(e[this.inlineProperty],10):0}}setSize(e,t){Xi(e)&&(this._element.style.width=e+Zg),Xi(t)&&(this._element.style.height=t+Zg)}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(e,t){Xi(e)&&(this._element.style.marginTop=e+Zg),Xi(t)&&(this._element.style[`margin${Ki(this.inlineProperty)}`]=t+Zg)}getOffset(){const e=this._element.style,t=`margin${Ki(this.inlineProperty)}`;return{top:e.marginTop?parseInt(e.marginTop,10):0,start:e[t]?parseInt(e[t],10):0}}};const Fke="ht__manualColumnMove--backlight";let Bke=class extends Vz{build(){super.build(),ae(this._element,Fke)}};const Vke="ht__manualColumnMove--guideline";let Wke=class extends Vz{build(){super.build(),ae(this._element,Vke)}};function jke(n,e){Wz(n,e),e.add(n)}function No(n,e,t){Wz(n,e),e.set(n,t)}function Wz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ds(n,e,t){return n.set(Sh(n,e),t),t}function Pe(n,e){return n.get(Sh(n,e))}function Sh(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}xe.getSingleton().register("beforeColumnMove"),xe.getSingleton().register("afterColumnMove");const oH="manualColumnMove",zke=120,jz="ht__manualColumnMove",G_="show-ui",aH="on-moving--columns",lH="after-selection--columns";var ps=new WeakMap,_h=new WeakMap,sc=new WeakMap,K_=new WeakMap,Rh=new WeakMap,ms=new WeakMap,q_=new WeakMap,Ur=new WeakMap,Jg=new WeakMap,X_=new WeakMap,Gw=new WeakMap,Ad=new WeakSet;class Uke extends Pt{constructor(){super(...arguments),jke(this,Ad),No(this,ps,new Bke(this.hot)),No(this,_h,new Wke(this.hot)),No(this,sc,[]),No(this,K_,0),No(this,Rh,!1),No(this,ms,{}),No(this,q_,void 0),No(this,Ur,void 0),No(this,Jg,void 0),No(this,X_,void 0),No(this,Gw,void 0)}static get PLUGIN_KEY(){return oH}static get PLUGIN_PRIORITY(){return zke}isEnabled(){return!!this.hot.getSettings()[oH]}enablePlugin(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Sh(Ad,e,Yke).call(e,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Sh(Ad,e,Kke).call(e,...i)}),this.addHook("afterScrollVertically",()=>Sh(Ad,this,Xke).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Sh(Ad,e,Qke).call(e,...i)}),this.buildPluginUI(),this.registerEvents(),ae(this.hot.rootElement,jz),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){Ue(this.hot.rootElement,jz),this.unregisterEvents(),Pe(ps,this).destroy(),Pe(_h,this).destroy(),super.disablePlugin()}moveColumn(e,t){return this.moveColumns([e],t)}moveColumns(e,t){const i=Pe(q_,this),s=this.isMovePossible(e,t),r=this.hot.runHooks("beforeColumnMove",e,t,i,s);if(Ds(q_,this,void 0),r===!1)return;s&&this.hot.columnIndexMapper.moveIndexes(e,t);const o=s&&this.isColumnOrderChanged(e,t);return this.hot.runHooks("afterColumnMove",e,t,i,s,o),o}dragColumn(e,t){return this.dragColumns([e],t)}dragColumns(e,t){const i=this.countFinalIndex(e,t);return Ds(q_,this,t),this.moveColumns(e,i)}isMovePossible(e,t){const i=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),s=e.length+t>i,r=t<0,o=e.some(l=>l<0),a=e.some(l=>l>=i);return!(s||r||o||a)}isColumnOrderChanged(e,t){return e.some((i,s)=>i-s!==t)}countFinalIndex(e,t){const i=Qn(e,(s,r)=>(r<t&&(s+=1),s),0);return t-i}getColumnsWidth(e,t){const i=this.hot.columnIndexMapper;let s=0;for(let r=e;r<=t;r+=1){const o=i.getRenderableFromVisualIndex(r);r<0?s+=this.hot.view._wt.wtViewport.getRowHeaderWidth()||0:o!==null&&(s+=this.hot.view._wt.wtTable.getStretchedColumnWidth(o)||0)}return s}moveBySettingsOrLoad(){const e=this.hot.getSettings()[oH];if(Array.isArray(e))this.moveColumns(e,0);else if(e!==void 0){const t=this.persistentStateLoad();t.length&&this.moveColumns(t,0)}}isFixedColumnsStart(e){return e<this.hot.getSettings().fixedColumnsStart}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}persistentStateLoad(){const e={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",e),e.value?e.value:[]}prepareColumnsToMoving(e,t){const i=[];return Oe(e,t,s=>{i.push(s)}),i}refreshPositions(){const e=this.hot.view.getFirstFullyVisibleColumn();this.isFixedColumnsStart(Pe(Ur,this))&&e>0&&this.hot.scrollViewportTo({col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(e-1,-1)});const t=this.hot.view._wt.wtTable,i=this.hot.view._wt.wtOverlays.scrollableElement,s=typeof i.scrollX=="number"?i.scrollX:i.scrollLeft;let r=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,Pe(Ur,this)-1);const o=t.hider.offsetWidth,a=t.TBODY.offsetLeft,l=Pe(ps,this).getOffset().start,c=Pe(ps,this).getSize().width;let h=0,u=0;if(this.hot.isRtl()){const g=this.hot.rootWindow,p=sn(this.hot.rootElement),m=g.innerWidth-Pe(Jg,this)-p;u=g.innerWidth-Pe(ms,this).eventPageX-m-(i.scrollX===void 0?s:0)}else u=Pe(ms,this).eventPageX-(Pe(Jg,this)-(i.scrollX===void 0?s:0));if(Pe(X_,this)&&(h=this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsStart(Pe(Ur,this))&&(r+=s),r+=h,Pe(Ur,this)<0)Pe(Gw,this)>0?Pe(ms,this).col=0:Pe(ms,this).col=e>0?e-1:e;else if(Pe(ms,this).TD.offsetWidth/2+r<=u){const g=Pe(Ur,this)>=Pe(K_,this)?Pe(K_,this)-1:Pe(Ur,this);Pe(ms,this).col=g+1,r+=Pe(ms,this).TD.offsetWidth}else Pe(ms,this).col=Pe(Ur,this);let d=u,f=r;u+c+l>=o?d=o-c-l:u+l<a+h&&(d=a+h+Math.abs(l)),r>=o-1?f=o-1:f===0?f=1:i.scrollX!==void 0&&Pe(Ur,this)<Pe(Gw,this)&&(f-=Pe(Jg,this)<=i.scrollX?Pe(Jg,this):0),Pe(ps,this).setPosition(null,d),Pe(_h,this).setPosition(null,f)}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mousemove",t=>Sh(Ad,this,Gke).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>Sh(Ad,this,qke).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){Pe(ps,this).build(),Pe(_h,this).build()}destroy(){Pe(ps,this).destroy(),Pe(_h,this).destroy(),super.destroy()}}function Yke(n,e,t,i){const s=this.hot.view._wt.wtTable,r=this.hot.selection.isSelectedByColumnHeader(),o=this.hot.getSelectedRangeLast(),a=Fe(n.target,"sortAction");if(!o||!r||Pe(Rh,this)||n.button!==0||a){Ds(Rh,this,!1),Pe(sc,this).length=0,Ue(this.hot.rootElement,[aH,G_]);return}const l=Pe(_h,this).isBuilt()&&!Pe(_h,this).isAppended(),c=Pe(ps,this).isBuilt()&&!Pe(ps,this).isAppended();l&&c&&(Pe(_h,this).appendTo(s.hider),Pe(ps,this).appendTo(s.hider));const{from:h,to:u}=o,d=Math.min(h.col,u.col),f=Math.max(h.col,u.col);if(e.row<0&&e.col>=d&&e.col<=f){i.column=!0,Ds(Rh,this,!0);const g=t.firstChild?I6(n,t.firstChild).x:n.offsetX;Pe(ms,this).eventPageX=n.pageX,Ds(Ur,this,e.col),Pe(ms,this).TD=t,Pe(ms,this).col=e.col,Ds(sc,this,this.prepareColumnsToMoving(d,f)),Ds(X_,this,!!this.hot.getSettings().rowHeaders),Ds(K_,this,this.hot.countCols()),Ds(Gw,this,this.hot.getSettings().fixedColumnsStart),Ds(Jg,this,hi(this.hot.rootElement).left);const p=Pe(X_,this)?-1:0,m=s.holder.scrollTop+s.getColumnHeaderHeight(0)+1,w=e.col<Pe(Gw,this),y=this.hot.view._wt.wtOverlays.inlineStartOverlay.getOverlayOffset(),C=Math.abs(g-(this.hot.isRtl()?t.offsetWidth:0)),R=this.getColumnsWidth(d,e.col-1)+C,_=this.getColumnsWidth(p,d-1)+(w?y:0)+R;Pe(ps,this).setPosition(m,_),Pe(ps,this).setSize(this.getColumnsWidth(d,f),s.hider.offsetHeight-m),Pe(ps,this).setOffset(null,-R),ae(this.hot.rootElement,aH)}else Ue(this.hot.rootElement,lH),Ds(Rh,this,!1),Pe(sc,this).length=0}function Gke(n){Pe(Rh,this)&&(Pe(ms,this).eventPageX=n.pageX,this.refreshPositions())}function Kke(n,e,t,i){!this.hot.getSelectedRangeLast()||!Pe(Rh,this)||(Pe(sc,this).indexOf(e.col)>-1?Ue(this.hot.rootElement,G_):ae(this.hot.rootElement,G_),i.row=!0,i.column=!0,i.cell=!0,Ds(Ur,this,e.col),Pe(ms,this).TD=t)}function qke(){const n=Pe(ms,this).col,e=Pe(sc,this).length;if(Ds(Ur,this,void 0),Ds(Rh,this,!1),Ue(this.hot.rootElement,[aH,G_,lH]),this.hot.selection.isSelectedByColumnHeader()&&ae(this.hot.rootElement,lH),e<1||n===void 0)return;const t=Pe(sc,this)[0],i=this.hot.toPhysicalColumn(t),s=this.dragColumns(Pe(sc,this),n);if(Pe(sc,this).length=0,s===!0){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const r=this.hot.toVisualColumn(i),o=r+e-1;this.hot.selectColumns(r,o)}}function Xke(){const n=this.hot.view._wt.wtTable,e=n.getColumnHeaderHeight(0)+1,t=n.holder.scrollTop,i=e+t;Pe(ps,this).setPosition(i),Pe(ps,this).setSize(null,n.hider.offsetHeight-i)}function Qke(){this.moveBySettingsOrLoad()}function Zke(n,e){zz(n,e),e.add(n)}function ts(n,e,t){zz(n,e),e.set(n,t)}function zz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Un(n,e,t){return n.set(Lo(n,e),t),t}function we(n,e){return n.get(Lo(n,e))}function Lo(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Q_="manualColumnResize",Jke=130,Uz="manualColumnWidths";var rc=new WeakMap,Z_=new WeakMap,lr=new WeakMap,J_=new WeakMap,Da=new WeakMap,eHe=new WeakMap,ep=new WeakMap,eR=new WeakMap,Ns=new WeakMap,oc=new WeakMap,Pd=new WeakMap,tR=new WeakMap,Kw=new WeakMap,qw=new WeakMap,cr=new WeakMap,Xw=new WeakMap,Na=new WeakSet;class tHe extends Pt{static get PLUGIN_KEY(){return Q_}static get PLUGIN_PRIORITY(){return Jke}constructor(e){super(e),Zke(this,Na),ts(this,rc,null),ts(this,Z_,null),ts(this,lr,[]),ts(this,J_,null),ts(this,Da,null),ts(this,eHe,null),ts(this,ep,null),ts(this,eR,null),ts(this,Ns,this.hot.rootDocument.createElement("DIV")),ts(this,oc,this.hot.rootDocument.createElement("DIV")),ts(this,Pd,null),ts(this,tR,!1),ts(this,Kw,0),ts(this,qw,null),ts(this,cr,void 0),ts(this,Xw,void 0),ae(we(Ns,this),"manualColumnResizer"),ae(we(oc,this),"manualColumnResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[Q_]}enablePlugin(){this.enabled||(Un(cr,this,new nh),we(cr,this).addLocalHook("init",()=>Lo(Na,this,nHe).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,we(cr,this)),this.addHook("modifyColWidth",(e,t)=>Lo(Na,this,lHe).call(this,e,t),1),this.addHook("beforeStretchingColumnWidth",(e,t)=>Lo(Na,this,cHe).call(this,e,t)),this.addHook("beforeColumnResize",(e,t,i)=>Lo(Na,this,hHe).call(this,e,t,i)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Un(Xw,this,we(cr,this).getValues()),this.hot.columnIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualColumnWidths(){this.hot.runHooks("persistentStateSave",Uz,we(cr,this).getValues())}loadManualColumnWidths(){const e={};return this.hot.runHooks("persistentStateLoad",Uz,e),e.value}setManualSize(e,t){const i=Math.max(t,20),s=this.hot.toPhysicalColumn(e);return we(cr,this).setValueAtIndex(s,i),i}clearManualSize(e){const t=this.hot.toPhysicalColumn(e);we(cr,this).setValueAtIndex(t,null)}setupHandlePosition(e){if(!e.parentNode)return;Un(rc,this,e);const{_wt:t}=this.hot.view,i=t.wtTable.getCoords(we(rc,this)),s=i.col;if(s<0)return;const r=jn(we(rc,this)),o=we(rc,this).getBoundingClientRect(),a=s<t.getSetting("fixedColumnsStart");let l;a&&(l=t.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(we(rc,this),i.row,i.col)),l||(l=t.wtOverlays.topOverlay.getRelativeCellPosition(we(rc,this),i.row,i.col)),Un(Z_,this,this.hot.columnIndexMapper.getVisualFromRenderableIndex(s)),Un(lr,this,[]);const c=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&c){const h=this.hot.getSelectedRange();F(h,u=>{const d=u.getTopStartCorner().col,f=u.getBottomEndCorner().col;Oe(d,f,g=>{we(lr,this).includes(g)||we(lr,this).push(g)})})}we(lr,this).includes(we(Z_,this))||Un(lr,this,[we(Z_,this)]),Un(eR,this,l.start-6),Un(ep,this,parseInt(o.width,10)),we(Ns,this).style.top=`${l.top}px`,we(Ns,this).style[this.inlineDir]=`${we(eR,this)+we(ep,this)}px`,we(Ns,this).style.height=`${r}px`,this.hot.rootElement.appendChild(we(Ns,this))}refreshHandlePosition(){we(Ns,this).style[this.inlineDir]=`${we(eR,this)+we(J_,this)}px`}setupGuidePosition(){const e=parseInt(jn(we(Ns,this)),10),t=parseInt(we(Ns,this).style.top,10)+e,i=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);ae(we(Ns,this),"active"),ae(we(oc,this),"active"),we(oc,this).style.top=`${t}px`,this.refreshGuidePosition(),we(oc,this).style.height=`${i-e}px`,this.hot.rootElement.appendChild(we(oc,this))}refreshGuidePosition(){we(oc,this).style[this.inlineDir]=we(Ns,this).style[this.inlineDir]}hideHandleAndGuide(){Ue(we(Ns,this),"active"),Ue(we(oc,this),"active")}checkIfColumnHeader(e){const t=Uc(e,["THEAD"],this.hot.rootElement),{topOverlay:i,topInlineStartCornerOverlay:s}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.THEAD,s.clone.wtTable.THEAD].includes(t)}getClosestTHParent(e){return e.tagName!=="TABLE"?e.tagName==="TH"?e:this.getClosestTHParent(e.parentNode):null}afterMouseDownTimeout(){const e=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},t=(i,s)=>{const r=this.hot.runHooks("beforeColumnResize",we(Da,this),i,!0);r!==void 0&&Un(Da,this,r),this.hot.getSettings().stretchH==="all"?this.clearManualSize(i):this.setManualSize(i,we(Da,this)),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",we(Da,this),i,!0),s&&e()};we(Kw,this)>=2&&(we(lr,this).length>1?(F(we(lr,this),s=>{t(s)}),e()):F(we(lr,this),s=>{t(s,!0)})),Un(Kw,this,0),Un(qw,this,null)}bindEvents(){const{rootWindow:e,rootElement:t}=this.hot;this.eventManager.addEventListener(t,"mouseover",i=>Lo(Na,this,iHe).call(this,i)),this.eventManager.addEventListener(t,"mousedown",i=>Lo(Na,this,sHe).call(this,i)),this.eventManager.addEventListener(e,"mousemove",i=>Lo(Na,this,rHe).call(this,i)),this.eventManager.addEventListener(e,"mouseup",()=>Lo(Na,this,oHe).call(this)),this.eventManager.addEventListener(we(Ns,this),"contextmenu",()=>Lo(Na,this,aHe).call(this))}destroy(){super.destroy()}}function nHe(){const n=this.hot.getSettings()[Q_],e=this.loadManualColumnWidths();typeof e<"u"?this.hot.batchExecution(()=>{e.forEach((t,i)=>{we(cr,this).setValueAtIndex(i,t)})},!0):Array.isArray(n)?(this.hot.batchExecution(()=>{n.forEach((t,i)=>{we(cr,this).setValueAtIndex(i,t)})},!0),Un(Xw,this,n)):n===!0&&Array.isArray(we(Xw,this))&&this.hot.batchExecution(()=>{we(Xw,this).forEach((t,i)=>{we(cr,this).setValueAtIndex(i,t)})},!0)}function iHe(n){if(!lA(n.target)&&we(tR,this)!==!0&&this.checkIfColumnHeader(n.target)){const e=this.getClosestTHParent(n.target);if(!e)return;const t=e.getAttribute("colspan");e&&(t===null||t==="1")&&(we(Pd,this)||this.setupHandlePosition(e))}}function sHe(n){n.target.parentNode===this.hot.rootElement&&Fe(n.target,"manualColumnResizer")&&(this.setupHandlePosition(we(rc,this)),this.setupGuidePosition(),Un(Pd,this,!0),we(qw,this)===null&&(Un(qw,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(we(qw,this))),Un(Kw,this,we(Kw,this)+1),this.startX=n.pageX,Un(Da,this,we(ep,this)))}function rHe(n){if(we(Pd,this)){const e=(n.pageX-this.startX)*this.hot.getDirectionFactor();Un(J_,this,we(ep,this)+e),F(we(lr,this),t=>{Un(Da,this,this.setManualSize(t,we(J_,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition()}}function oHe(){const n=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(t,i)=>{this.hot.runHooks("beforeColumnResize",we(Da,this),t,!1),i&&n(),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",we(Da,this),t,!1)};we(Pd,this)&&(this.hideHandleAndGuide(),Un(Pd,this,!1),we(Da,this)!==we(ep,this)&&(we(lr,this).length>1?(F(we(lr,this),i=>{e(i)}),n()):F(we(lr,this),i=>{e(i,!0)})),this.setupHandlePosition(we(rc,this)))}function aHe(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(we(Ns,this)),this.hot.rootElement.removeChild(we(oc,this)),Un(Pd,this,!1),Un(tR,this,!0),this.hot._registerImmediate(()=>{Un(tR,this,!1)})}function lHe(n,e){let t=n;if(this.enabled){const i=this.hot.toPhysicalColumn(e),s=we(cr,this).getValueAtIndex(i);this.hot.getSettings()[Q_]&&s&&(t=s)}return t}function cHe(n,e){let t=we(cr,this).getValueAtIndex(e);return t===null&&(t=n),t}function hHe(){this.hot.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked()}function cH(n,e,t){return(e=uHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uHe(n){var e=dHe(n,"string");return typeof e=="symbol"?e:e+""}function dHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const hH=0,Yz=1,Gz=2,tp="px";let Kz=class{constructor(e){cH(this,"hot",void 0),cH(this,"_element",null),cH(this,"state",hH),this.hot=e}appendTo(e){e.appendChild(this._element),this.state=Gz}build(){this.state===hH&&(this._element=this.hot.rootDocument.createElement("div"),this.state=Yz)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=hH}isAppended(){return this.state===Gz}isBuilt(){return this.state>=Yz}setPosition(e,t){e!==void 0&&(this._element.style.top=e+tp),t!==void 0&&(this._element.style.left=t+tp)}getPosition(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}setSize(e,t){e&&(this._element.style.width=e+tp),t&&(this._element.style.height=t+tp)}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(e,t){e&&(this._element.style.marginTop=e+tp),t&&(this._element.style.marginLeft=t+tp)}getOffset(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}};const fHe="ht__manualRowMove--backlight";class gHe extends Kz{build(){super.build(),ae(this._element,fHe)}}const pHe="ht__manualRowMove--guideline";class mHe extends Kz{build(){super.build(),ae(this._element,pHe)}}function bHe(n,e){qz(n,e),e.add(n)}function np(n,e,t){qz(n,e),e.set(n,t)}function qz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Id(n,e,t){return n.set(xh(n,e),t),t}function qe(n,e){return n.get(xh(n,e))}function xh(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}xe.getSingleton().register("beforeRowMove"),xe.getSingleton().register("afterRowMove");const uH="manualRowMove",wHe=140,Xz="ht__manualRowMove",nR="show-ui",dH="on-moving--rows",fH="after-selection--rows";var bs=new WeakMap,Eh=new WeakMap,ac=new WeakMap,Th=new WeakMap,Ls=new WeakMap,iR=new WeakMap,Od=new WeakSet;class vHe extends Pt{constructor(){super(...arguments),bHe(this,Od),np(this,bs,new gHe(this.hot)),np(this,Eh,new mHe(this.hot)),np(this,ac,[]),np(this,Th,void 0),np(this,Ls,{}),np(this,iR,void 0)}static get PLUGIN_KEY(){return uH}static get PLUGIN_PRIORITY(){return wHe}isEnabled(){return!!this.hot.getSettings()[uH]}enablePlugin(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return xh(Od,e,yHe).call(e,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return xh(Od,e,SHe).call(e,...i)}),this.addHook("afterScrollHorizontally",()=>xh(Od,this,RHe).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return xh(Od,e,xHe).call(e,...i)}),this.buildPluginUI(),this.registerEvents(),ae(this.hot.rootElement,Xz),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){Ue(this.hot.rootElement,Xz),this.unregisterEvents(),qe(bs,this).destroy(),qe(Eh,this).destroy(),super.disablePlugin()}moveRow(e,t){return this.moveRows([e],t)}moveRows(e,t){const i=qe(iR,this),s=this.isMovePossible(e,t),r=this.hot.runHooks("beforeRowMove",e,t,i,s);if(Id(iR,this,void 0),r===!1)return;s&&this.hot.rowIndexMapper.moveIndexes(e,t);const o=s&&this.isRowOrderChanged(e,t);return this.hot.runHooks("afterRowMove",e,t,i,s,o),o}dragRow(e,t){return this.dragRows([e],t)}dragRows(e,t){const i=this.countFinalIndex(e,t);return Id(iR,this,t),this.moveRows(e,i)}isMovePossible(e,t){const i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),s=e.length+t>i,r=t<0,o=e.some(l=>l<0),a=e.some(l=>l>=i);return!(s||r||o||a)}isRowOrderChanged(e,t){return e.some((i,s)=>i-s!==t)}countFinalIndex(e,t){const i=Qn(e,(s,r)=>(r<t&&(s+=1),s),0);return t-i}getRowsHeight(e,t){const i=this.hot.rowIndexMapper;let s=0;for(let r=e;r<=t;r++){const o=i.getRenderableFromVisualIndex(r);o!==null&&(s+=this.hot.view._wt.wtTable.getRowHeight(o)||23)}return s}moveBySettingsOrLoad(){const e=this.hot.getSettings()[uH];if(Array.isArray(e))this.moveRows(e,0);else if(e!==void 0){const t=this.persistentStateLoad();t.length&&this.moveRows(t,0)}}isFixedRowTop(e){return e<this.hot.getSettings().fixedRowsTop}isFixedRowBottom(e){return e>this.hot.countRows()-1-this.hot.getSettings().fixedRowsBottom}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}persistentStateLoad(){const e={};return this.hot.runHooks("persistentStateLoad","manualRowMove",e),e.value?e.value:[]}prepareRowsToMoving(){const e=this.hot.getSelectedRangeLast(),t=[];if(!e)return t;const{from:i,to:s}=e,r=Math.min(i.row,s.row),o=Math.max(i.row,s.row);return Oe(r,o,a=>{t.push(a)}),t}refreshPositions(){const e=qe(Ls,this).coords,t=this.hot.view.getFirstFullyVisibleRow(),i=this.hot.view.getLastFullyVisibleRow(),s=this.hot.countRows();this.isFixedRowTop(e.row)&&t>0&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(t-1,-1)),this.isFixedRowBottom(e.row)&&i<s&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(i+1,1),void 0,!0);const r=this.hot.view._wt.wtTable,o=qe(Ls,this).TD,a=this.hot.rootElement,l=hi(a),c=Bu(a),h=r.holder.scrollTop,u=this.hot.rootWindow!==c?c.scrollTop:0,d=l.top-u,f=qe(Ls,this).eventPageY-d+h,g=r.hider.offsetHeight,p=r.TBODY.offsetTop,m=qe(bs,this).getOffset().top,w=qe(bs,this).getSize().height,y=o.offsetHeight/2,C=o.offsetHeight;let R=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,e.row-1);const _=f>=R+y;this.isFixedRowTop(e.row)&&(R+=this.hot.view._wt.wtOverlays.topOverlay.getOverlayOffset()),e.row<0?qe(Ls,this).row=t>0?t-1:t:_?(qe(Ls,this).row=e.row+1,R+=e.row===0?C-1:C):qe(Ls,this).row=e.row;let x=f,M=R;f+w+m>=g?x=g-w-m:f+m<p&&(x=p+Math.abs(m)),R>=g-1&&(M=g-1),qe(bs,this).setPosition(x),qe(Eh,this).setPosition(M)}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mousemove",t=>xh(Od,this,CHe).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>xh(Od,this,_He).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){qe(bs,this).build(),qe(Eh,this).build()}destroy(){qe(bs,this).destroy(),qe(Eh,this).destroy(),super.destroy()}}function yHe(n,e,t,i){const{wtTable:s,wtViewport:r}=this.hot.view._wt,o=this.hot.selection.isSelectedByRowHeader(),a=this.hot.getSelectedRangeLast();if(!a||!o||qe(Th,this)||n.button!==0){Id(Th,this,!1),qe(ac,this).length=0,Ue(this.hot.rootElement,[dH,nR]);return}const l=qe(Eh,this).isBuilt()&&!qe(Eh,this).isAppended(),c=qe(bs,this).isBuilt()&&!qe(bs,this).isAppended();l&&c&&(qe(Eh,this).appendTo(s.hider),qe(bs,this).appendTo(s.hider));const{from:h,to:u}=a,d=Math.min(h.row,u.row),f=Math.max(h.row,u.row);if(e.col<0&&e.row>=d&&e.row<=f){i.row=!0,Id(Th,this,!0),qe(Ls,this).eventPageY=n.pageY,qe(Ls,this).coords=e,qe(Ls,this).TD=t,Id(ac,this,this.prepareRowsToMoving());const g=s.holder.scrollLeft+r.getRowHeaderWidth(),p=this.getRowsHeight(d,e.row-1)+n.offsetY;qe(bs,this).setPosition(null,g),qe(bs,this).setSize(s.hider.offsetWidth-g,this.getRowsHeight(d,f)),qe(bs,this).setOffset(-p,null),ae(this.hot.rootElement,dH),this.refreshPositions()}else Ue(this.hot.rootElement,fH),Id(Th,this,!1),qe(ac,this).length=0}function CHe(n){qe(Th,this)&&(qe(Ls,this).eventPageY=n.pageY,this.refreshPositions())}function SHe(n,e,t,i){!this.hot.getSelectedRangeLast()||!qe(Th,this)||(qe(ac,this).indexOf(e.row)>-1?Ue(this.hot.rootElement,nR):ae(this.hot.rootElement,nR),i.row=!0,i.column=!0,i.cell=!0,qe(Ls,this).coords=e,qe(Ls,this).TD=t)}function _He(){const n=qe(Ls,this).row,e=qe(ac,this).length;if(Id(Th,this,!1),Ue(this.hot.rootElement,[dH,nR,fH]),this.hot.selection.isSelectedByRowHeader()&&ae(this.hot.rootElement,fH),e<1||n===void 0)return;const t=qe(ac,this)[0],i=this.hot.toPhysicalRow(t),s=this.dragRows(qe(ac,this),n);if(qe(ac,this).length=0,s===!0){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const r=this.hot.toVisualRow(i),o=r+e-1;this.hot.selectRows(r,o)}}function RHe(){const n=this.hot.view._wt.wtTable,e=this.hot.view._wt.wtViewport.getRowHeaderWidth(),t=n.holder.scrollLeft,i=e+t;qe(bs,this).setPosition(null,i),qe(bs,this).setSize(n.hider.offsetWidth-i)}function xHe(){this.moveBySettingsOrLoad()}function EHe(n,e){Qz(n,e),e.add(n)}function ns(n,e,t){Qz(n,e),e.set(n,t)}function Qz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Hn(n,e,t){return n.set(lc(n,e),t),t}function be(n,e){return n.get(lc(n,e))}function lc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const sR="manualRowResize",THe=30,Zz="manualRowHeights";var La=new WeakMap,rR=new WeakMap,hr=new WeakMap,Qw=new WeakMap,Mh=new WeakMap,gH=new WeakMap,ip=new WeakMap,oR=new WeakMap,ws=new WeakMap,$a=new WeakMap,kd=new WeakMap,aR=new WeakMap,Zw=new WeakMap,Jw=new WeakMap,$o=new WeakMap,ev=new WeakMap,Ah=new WeakSet;class MHe extends Pt{static get PLUGIN_KEY(){return sR}static get PLUGIN_PRIORITY(){return THe}constructor(e){super(e),EHe(this,Ah),ns(this,La,null),ns(this,rR,null),ns(this,hr,[]),ns(this,Qw,null),ns(this,Mh,null),ns(this,gH,null),ns(this,ip,null),ns(this,oR,null),ns(this,ws,this.hot.rootDocument.createElement("DIV")),ns(this,$a,this.hot.rootDocument.createElement("DIV")),ns(this,kd,!1),ns(this,aR,!1),ns(this,Zw,0),ns(this,Jw,null),ns(this,$o,void 0),ns(this,ev,void 0),ae(be(ws,this),"manualRowResizer"),ae(be($a,this),"manualRowResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[sR]}enablePlugin(){this.enabled||(Hn($o,this,new nh),be($o,this).addLocalHook("init",()=>lc(Ah,this,DHe).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,be($o,this)),this.addHook("modifyRowHeight",(e,t)=>lc(Ah,this,HHe).call(this,e,t)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Hn(ev,this,be($o,this).getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualRowHeights(){this.hot.runHooks("persistentStateSave",Zz,be($o,this).getValues())}loadManualRowHeights(){const e={};return this.hot.runHooks("persistentStateLoad",Zz,e),e.value}setManualSize(e,t){const i=this.hot.toPhysicalRow(e),s=Math.max(t,a5);return be($o,this).setValueAtIndex(i,s),s}getLastDesiredRowHeight(){return be(Qw,this)}setupHandlePosition(e){Hn(La,this,e);const{view:t}=this.hot,{_wt:i}=t,s=i.wtTable.getCoords(be(La,this)),r=s.row;if(r<0)return;const o=sn(be(La,this)),a=be(La,this).getBoundingClientRect(),l=r<i.getSetting("fixedRowsTop"),c=r>=t.countNotHiddenRowIndexes(0,1)-i.getSetting("fixedRowsBottom");let h;l?h=i.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(be(La,this),s.row,s.col):c&&(h=i.wtOverlays.bottomInlineStartCornerOverlay.getRelativeCellPosition(be(La,this),s.row,s.col)),h||(h=i.wtOverlays.inlineStartOverlay.getRelativeCellPosition(be(La,this),s.row,s.col)),Hn(rR,this,this.hot.rowIndexMapper.getVisualFromRenderableIndex(r)),Hn(hr,this,[]);const u=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&u){const d=this.hot.getSelectedRange();F(d,f=>{const g=f.getTopStartCorner().row,p=f.getBottomStartCorner().row;Oe(g,p,m=>{be(hr,this).includes(m)||be(hr,this).push(m)})})}be(hr,this).includes(be(rR,this))||Hn(hr,this,[be(rR,this)]),Hn(oR,this,h.top-6),Hn(ip,this,parseInt(a.height,10)),be(ws,this).style.top=`${be(oR,this)+be(ip,this)}px`,be(ws,this).style[this.inlineDir]=`${h.start}px`,be(ws,this).style.width=`${o}px`,this.hot.rootElement.appendChild(be(ws,this))}refreshHandlePosition(){be(ws,this).style.top=`${be(oR,this)+be(Qw,this)}px`}setupGuidePosition(){const e=parseInt(sn(be(ws,this)),10),t=parseInt(be(ws,this).style[this.inlineDir],10)+e,i=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);ae(be(ws,this),"active"),ae(be($a,this),"active"),be($a,this).style.top=be(ws,this).style.top,be($a,this).style[this.inlineDir]=`${t}px`,be($a,this).style.width=`${i-e}px`,this.hot.rootElement.appendChild(be($a,this))}refreshGuidePosition(){be($a,this).style.top=be(ws,this).style.top}hideHandleAndGuide(){Ue(be(ws,this),"active"),Ue(be($a,this),"active")}checkIfRowHeader(e){const t=Uc(e,["TBODY"],this.hot.rootElement),{inlineStartOverlay:i,topInlineStartCornerOverlay:s,bottomInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.TBODY,s.clone.wtTable.TBODY,r.clone.wtTable.TBODY].includes(t)}getClosestTHParent(e){return e.tagName!=="TABLE"?e.tagName==="TH"?e:this.getClosestTHParent(e.parentNode):null}getActualRowHeight(e){const t=this.hot.view._wt.wtTable.getRowHeight(e);return t!==void 0&&be(Mh,this)<t?t:be(Mh,this)}afterMouseDownTimeout(){const e=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},t=(i,s)=>{const r=this.hot.runHooks("beforeRowResize",this.getActualRowHeight(i),i,!0);r!==void 0&&Hn(Mh,this,r),this.setManualSize(i,be(Mh,this)),this.hot.runHooks("afterRowResize",this.getActualRowHeight(i),i,!0),s&&e()};be(Zw,this)>=2&&(be(hr,this).length>1?(F(be(hr,this),s=>{t(s)}),e()):F(be(hr,this),s=>{t(s,!0)})),Hn(Zw,this,0),Hn(Jw,this,null)}bindEvents(){const{rootElement:e,rootWindow:t}=this.hot;this.eventManager.addEventListener(e,"mouseover",i=>lc(Ah,this,AHe).call(this,i)),this.eventManager.addEventListener(e,"mousedown",i=>lc(Ah,this,PHe).call(this,i)),this.eventManager.addEventListener(t,"mousemove",i=>lc(Ah,this,IHe).call(this,i)),this.eventManager.addEventListener(t,"mouseup",()=>lc(Ah,this,OHe).call(this)),this.eventManager.addEventListener(be(ws,this),"contextmenu",()=>lc(Ah,this,kHe).call(this))}destroy(){super.destroy()}}function AHe(n){if(!lA(n.target)&&be(aR,this)!==!0&&this.checkIfRowHeader(n.target)){const e=this.getClosestTHParent(n.target);e&&(be(kd,this)||this.setupHandlePosition(e))}}function PHe(n){Fe(n.target,"manualRowResizer")&&(this.setupHandlePosition(be(La,this)),this.setupGuidePosition(),Hn(kd,this,!0),be(Jw,this)===null&&(Hn(Jw,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(be(Jw,this))),Hn(Zw,this,be(Zw,this)+1),Hn(gH,this,n.pageY),Hn(Mh,this,be(ip,this)))}function IHe(n){be(kd,this)&&(Hn(Qw,this,be(ip,this)+(n.pageY-be(gH,this))),F(be(hr,this),e=>{Hn(Mh,this,this.setManualSize(e,be(Qw,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition())}function OHe(){const n=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(t,i)=>{this.hot.runHooks("beforeRowResize",this.getActualRowHeight(t),t,!1),i&&n(),this.saveManualRowHeights(),this.hot.runHooks("afterRowResize",this.getActualRowHeight(t),t,!1)};be(kd,this)&&(this.hideHandleAndGuide(),Hn(kd,this,!1),be(Mh,this)!==be(ip,this)&&(be(hr,this).length>1?(F(be(hr,this),i=>{e(i)}),n()):F(be(hr,this),i=>{e(i,!0)})),this.setupHandlePosition(be(La,this)))}function kHe(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(be(ws,this)),this.hot.rootElement.removeChild(be($a,this)),Hn(kd,this,!1),Hn(aR,this,!0),this.hot._registerImmediate(()=>{Hn(aR,this,!1)})}function HHe(n,e){let t=n;if(this.enabled){const i=this.hot.toPhysicalRow(e),s=be($o,this).getValueAtIndex(i);this.hot.getSettings()[sR]&&s&&(t=s)}return t}function DHe(){const n=this.hot.getSettings()[sR],e=this.loadManualRowHeights();this.hot.batchExecution(()=>{typeof e<"u"?e.forEach((t,i)=>{be($o,this).setValueAtIndex(i,t)}):Array.isArray(n)?(n.forEach((t,i)=>{be($o,this).setValueAtIndex(i,t)}),Hn(ev,this,n)):n===!0&&Array.isArray(be(ev,this))&&be(ev,this).forEach((t,i)=>{be($o,this).setValueAtIndex(i,t)})},!0)}function NHe(n,e,t){LHe(n,e),e.set(n,t)}function LHe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Hd(n,e,t){return(e=$He(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $He(n){var e=FHe(n,"string");return typeof e=="symbol"?e:e+""}function FHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Jz(n,e){return n.get(e9(n,e))}function lR(n,e,t){return n.set(e9(n,e),t),t}function e9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Dd=new WeakMap;class Fa{constructor(e,t,i,s,r,o){Hd(this,"row",void 0),Hd(this,"col",void 0),Hd(this,"rowspan",void 0),Hd(this,"colspan",void 0),Hd(this,"removed",!1),Hd(this,"cellCoordsFactory",void 0),Hd(this,"cellRangeFactory",void 0),NHe(this,Dd,null),this.row=e,this.col=t,this.rowspan=i,this.colspan=s,this.cellCoordsFactory=r,this.cellRangeFactory=o}static NEGATIVE_VALUES_WARNING(e){let{row:t,col:i,rowspan:s,colspan:r}=e;return Ft`The merged cell declared with {row: ${t}, col: ${i},\x20
      rowspan: ${s}, colspan: ${r}} contains negative values, which is\x20
      not supported. It will not be added to the collection.`}static IS_OUT_OF_BOUNDS_WARNING(e){let{row:t,col:i}=e;return Ft`The merged cell declared at [${t}, ${i}] is positioned\x20
      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup.`}static IS_SINGLE_CELL(e){let{row:t,col:i}=e;return Ft`The merged cell declared at [${t}, ${i}] has both "rowspan"\x20
      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.`}static ZERO_SPAN_WARNING(e){let{row:t,col:i}=e;return Ft`The merged cell declared at [${t}, ${i}] has "rowspan"\x20
      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.`}static containsNegativeValues(e){let{row:t,col:i,rowspan:s,colspan:r}=e;return t<0||i<0||s<0||r<0}static isSingleCell(e){let{rowspan:t,colspan:i}=e;return i===1&&t===1}static containsZeroSpan(e){let{rowspan:t,colspan:i}=e;return i===0||t===0}static isOutOfBounds(e,t,i){return e.row<0||e.col<0||e.row>=t||e.row+e.rowspan-1>=t||e.col>=i||e.col+e.colspan-1>=i}normalize(e){const t=e.countRows(),i=e.countCols();this.row<0?this.row=0:this.row>t-1&&(this.row=t-1),this.col<0?this.col=0:this.col>i-1&&(this.col=i-1),this.row+this.rowspan>t-1&&(this.rowspan=t-this.row),this.col+this.colspan>i-1&&(this.colspan=i-this.col),lR(Dd,this,null)}includes(e,t){return this.row<=e&&this.col<=t&&this.row+this.rowspan-1>=e&&this.col+this.colspan-1>=t}includesHorizontally(e){return this.col<=e&&this.col+this.colspan-1>=e}includesVertically(e){return this.row<=e&&this.row+this.rowspan-1>=e}shift(e,t){const i=e[0]||e[1],s=t+Math.abs(e[0]||e[1])-1,r=e[0]?"colspan":"rowspan",o=e[0]?"col":"row",a=Math.min(t,s),l=Math.max(t,s),c=this[o],h=this[o]+this[r]-1;if(c>=t&&(this[o]+=i),i>0)t<=h&&t>c&&(this[r]+=i);else if(i<0){if(a<=c&&l>=h)return this.removed=!0,lR(Dd,this,null),!1;if(c>=a&&c<=l){const u=l-c+1,d=Math.abs(i)-u;this[o]-=d+i,this[r]-=u}else if(c<=a&&h>=l)this[r]+=i;else if(c<=a&&h>=a&&h<l){const u=h-a+1;this[r]-=u}}return lR(Dd,this,null),!0}isFarther(e,t){return e?t==="down"?e.row+e.rowspan-1<this.row+this.rowspan-1:t==="up"?e.row>this.row:t==="right"?e.col+e.colspan-1<this.col+this.colspan-1:t==="left"?e.col>this.col:null:!0}getLastRow(){return this.row+this.rowspan-1}getLastColumn(){return this.col+this.colspan-1}getRange(){return Jz(Dd,this)||lR(Dd,this,this.cellRangeFactory(this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.getLastRow(),this.getLastColumn()))),Jz(Dd,this)}}function BHe(n,e){VHe(n,e),e.add(n)}function VHe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cR(n,e,t){return(e=WHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WHe(n){var e=jHe(n,"string");return typeof e=="symbol"?e:e+""}function jHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Nd(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ph=new WeakSet;class hR{constructor(e){BHe(this,Ph),cR(this,"plugin",void 0),cR(this,"mergedCells",[]),cR(this,"mergedCellsMatrix",new Map),cR(this,"hot",void 0),this.plugin=e,this.hot=e.hot}static IS_OVERLAPPING_WARNING(e){let{row:t,col:i}=e;return Ft`The merged cell declared at [${t}, ${i}], overlaps\x20
      with the other declared merged cell. The overlapping merged cell was not added to the table, please\x20
      fix your setup.`}get(e,t){var i;return this.mergedCellsMatrix.has(e)&&(i=this.mergedCellsMatrix.get(e).get(t))!==null&&i!==void 0?i:!1}getByRange(e){let t=!1;return F(this.mergedCells,i=>i.row<=e.from.row&&i.row+i.rowspan-1>=e.to.row&&i.col<=e.from.col&&i.col+i.colspan-1>=e.to.col?(t=i,t):!0),t}filterOverlappingMergeCells(e){const t=new Set;return this.mergedCells.forEach(s=>{const{row:r,col:o,colspan:a,rowspan:l}=s;for(let c=r;c<r+l;c++)for(let h=o;h<o+a;h++)t.add(`r${c},c${h}`)}),e.filter(s=>{const{row:r,col:o,colspan:a,rowspan:l}=s,c=new Set;let h=!1;for(let u=r;u<r+l;u++){for(let d=o;d<o+a;d++){const f=`r${u},c${d}`;if(t.has(f)){Vt(hR.IS_OVERLAPPING_WARNING(s)),h=!0;break}c.add(f)}if(h)break}return h||t.add(...c),!h})}getWithinRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{row:i,col:s}=e.getTopStartCorner(),{row:r,col:o}=e.getBottomEndCorner(),a=[];for(let l=i;l<=r;l++)for(let c=s;c<=o;c++){const h=this.get(l,c);h&&(t||!t&&h.row===l&&h.col===c)&&a.push(h)}return a}add(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=e.row,s=e.col,r=e.rowspan,o=e.colspan,a=new Fa(i,s,r,o,this.hot._createCellCoords,this.hot._createCellRange),l=this.get(i,s),c=t?!1:this.isOverlapping(a);return!l&&!c?(this.hot&&a.normalize(this.hot),this.mergedCells.push(a),Nd(Ph,this,t9).call(this,a),a):(Vt(hR.IS_OVERLAPPING_WARNING(a)),!1)}remove(e,t){const i=this.get(e,t),s=i?this.mergedCells.indexOf(i):-1;return i&&s!==-1?(this.mergedCells.splice(s,1),Nd(Ph,this,zHe).call(this,i),i):!1}clear(){F(this.mergedCells,e=>{let{row:t,col:i,rowspan:s,colspan:r}=e;Oe(t,t+s,o=>{Oe(i,i+r,a=>{const l=this.hot.getCell(o,a);l&&(l.removeAttribute("rowspan"),l.removeAttribute("colspan"),l.style.display="")})})}),this.mergedCells.length=0,this.mergedCellsMatrix=new Map}isOverlapping(e){const t=e.getRange();for(let i=0;i<this.mergedCells.length;i++)if(this.mergedCells[i].getRange().overlaps(t))return!0;return!1}isFirstRenderableMergedCell(e,t){const i=this.get(e,t);return i&&this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1)===e&&this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1)===t}getFirstRenderableCoords(e,t){const i=this.get(e,t);if(!i||this.isFirstRenderableMergedCell(e,t))return this.hot._createCellCoords(e,t);const s=this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1),r=this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1);return this.hot._createCellCoords(s,r)}getStartMostColumnIndex(e,t){const i=Nd(Ph,this,uR).call(this,e,"col",-1);let s=t;for(let r=0;r<i.length;r++)if(i[r]<=t){s=i[r];break}return s}getEndMostColumnIndex(e,t){const i=Nd(Ph,this,uR).call(this,e,"col",1);let s=t;for(let r=0;r<i.length;r++)if(i[r]>=t){s=i[r];break}return s}getTopMostRowIndex(e,t){const i=Nd(Ph,this,uR).call(this,e,"row",-1);let s=t;for(let r=0;r<i.length;r++)if(i[r]<=t){s=i[r];break}return s}getBottomMostRowIndex(e,t){const i=Nd(Ph,this,uR).call(this,e,"row",1);let s=t;for(let r=0;r<i.length;r++)if(i[r]>=t){s=i[r];break}return s}shiftCollections(e,t,i){const s=[0,0];switch(e){case"right":s[0]+=i;break;case"left":s[0]-=i;break;case"down":s[1]+=i;break;case"up":s[1]-=i;break}const r=[];this.mergedCells.forEach(o=>{o.shift(s,t),o.removed&&r.push(o)}),r.forEach(o=>{this.mergedCells.splice(this.mergedCells.indexOf(o),1)}),this.mergedCellsMatrix.clear(),this.mergedCells.forEach(o=>{Nd(Ph,this,t9).call(this,o)})}}function uR(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=new Map,s=t===1?n.getTopStartCorner():n.getBottomEndCorner(),r=t===1?n.getBottomEndCorner():n.getTopStartCorner();for(let o=s.row;t===1?o<=r.row:o>=r.row;o+=t)for(let a=s.col;t===1?a<=r.col:a>=r.col;a+=t){const l=e==="row"?o:a,c=this.get(o,a);let h=l;c&&(h=t===1?c[e]+c[`${e}span`]-1:c[e]),i.has(l)||i.set(l,new Set),i.get(l).add(h)}return Array.from(new Set(Array.from(i.entries()).filter(o=>{let[,a]=o;return a.size===1}).flatMap(o=>{let[,a]=o;return Array.from(a)})))}function t9(n){for(let e=n.row;e<n.row+n.rowspan;e++)for(let t=n.col;t<n.col+n.colspan;t++)this.mergedCellsMatrix.has(e)||this.mergedCellsMatrix.set(e,new Map),this.mergedCellsMatrix.get(e).set(t,n)}function zHe(n){for(let e=n.row;e<n.row+n.rowspan;e++)for(let t=n.col;t<n.col+n.colspan;t++)this.mergedCellsMatrix.get(e).delete(t)}function pH(n,e,t){return(e=UHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UHe(n){var e=YHe(n,"string");return typeof e=="symbol"?e:e+""}function YHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class GHe{constructor(e){pH(this,"plugin",void 0),pH(this,"mergedCellsCollection",void 0),pH(this,"currentFillData",null),this.plugin=e,this.mergedCellsCollection=this.plugin.mergedCellsCollection}correctSelectionAreaSize(e){if(e[0]===e[2]&&e[1]===e[3]){const t=this.mergedCellsCollection.get(e[0],e[1]);t&&(e[2]=e[0]+t.rowspan-1,e[3]=e[1]+t.colspan-1)}}getDirection(e,t){let i=null;return t[0]===e[0]&&t[1]===e[1]&&t[3]===e[3]?i="down":t[2]===e[2]&&t[1]===e[1]&&t[3]===e[3]?i="up":t[1]===e[1]&&t[2]===e[2]?i="right":i="left",i}snapDragArea(e,t,i,s){const r=t.slice(0),o=this.getAutofillSize(e,t,i),[a,l,c,h]=e,d=["up","down"].indexOf(i)>-1?c-a+1:h-l+1,f=Math.floor(o/d)*d,g=o-f,p=this.getFarthestCollection(e,t,i,s);if(p){if(i==="down"){const m=p.row+p.rowspan-a-g;r[2]+m>=this.plugin.hot.countRows()?r[2]-=g:r[2]+=g?m:0}else if(i==="right"){const m=p.col+p.colspan-l-g;r[3]+m>=this.plugin.hot.countCols()?r[3]-=g:r[3]+=g?m:0}else if(i==="up"){const m=c-g-p.row+1;r[0]+m<0?r[0]+=g:r[0]-=g?m:0}else if(i==="left"){const m=h-g-p.col+1;r[1]+m<0?r[1]+=g:r[1]-=g?m:0}}return this.updateCurrentFillCache({baseArea:e,dragDirection:i,foundMergedCells:s,fillSize:o,dragArea:r,cycleLength:d}),r}updateCurrentFillCache(e){this.currentFillData||(this.currentFillData={}),Zn(this.currentFillData,e)}getAutofillSize(e,t,i){const[s,r,o,a]=e,[l,c,h,u]=t;switch(i){case"up":return s-l;case"down":return h-o;case"left":return r-c;case"right":return u-a;default:return null}}getDragArea(e,t,i){const[s,r,o,a]=e,[l,c,h,u]=t;switch(i){case"up":return[l,c,s-1,a];case"down":return[o+1,r,h,a];case"left":return[l,c,o,r-1];case"right":return[s,a+1,h,u];default:return null}}getFarthestCollection(e,t,i,s){const[r,o,a,l]=e,c=["up","down"].indexOf(i)>-1,h=c?a:l,u=c?r:o,d=this.getAutofillSize(e,t,i),f=c?a-r+1:l-o+1,g=Math.floor(d/f)*f,p=d-g;let m=null,w=null,y=null;switch(i){case"up":m="includesVertically",y=h-p+1;break;case"left":m="includesHorizontally",y=h-p+1;break;case"down":m="includesVertically",y=u+p-1;break;case"right":m="includesHorizontally",y=u+p-1;break}return F(s,C=>{C[m](y)&&C.isFarther(w,i)&&(w=C)}),w}recreateAfterDataPopulation(e){if(!this.currentFillData)return;const t=this.getRangeFromChanges(e),i=this.currentFillData.foundMergedCells,s=this.currentFillData.dragDirection,r=(c,h)=>{switch(s){case"up":return c.row-h>=t.from.row;case"down":return c.row+c.rowspan-1+h<=t.to.row;case"left":return c.col-h>=t.from.column;case"right":return c.col+c.colspan-1+h<=t.to.column;default:return null}};let o=0,a=null,l=1;do for(let c=0;c<i.length;c+=1){if(a=i[c],o=l*this.currentFillData.cycleLength,r(a,o))switch(s){case"up":this.plugin.mergedCellsCollection.add({row:a.row-o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:a.row+o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col-o,colspan:a.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col+o,colspan:a.colspan});break}c===i.length-1&&(l+=1)}while(r(a,o));this.currentFillData=null,this.plugin.hot.render(),i.length>0&&this.plugin.ifChromeForceRepaint()}getRangeFromChanges(e){const t={min:null,max:null},i={min:null,max:null};return F(e,s=>{const r=s[0],o=this.plugin.hot.propToCol(s[1]);(t.min===null||r<t.min)&&(t.min=r),(t.max===null||r>t.max)&&(t.max=r),(i.min===null||o<i.min)&&(i.min=o),(i.max===null||o>i.max)&&(i.max=o)}),{from:{row:t.min,column:i.min},to:{row:t.max,column:i.max}}}dragAreaOverlapsCollections(e,t,i){const s=this.getDragArea(e,t,i),[r,o,a,l]=s,c=this.plugin.hot._createCellCoords(r,o),h=this.plugin.hot._createCellCoords(a,l),u=this.plugin.hot._createCellRange(c,c,h);return this.mergedCellsCollection.getWithinRange(u,!0).length>0}}function mH(n,e,t){return(e=KHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KHe(n){var e=qHe(n,"string");return typeof e=="symbol"?e:e+""}function qHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class XHe{constructor(e){mH(this,"plugin",void 0),mH(this,"hot",void 0),mH(this,"fullySelectedMergedCellClassName","fullySelectedMergedCell"),this.plugin=e,this.hot=e.hot}getSelectedMergedCellClassName(e,t,i,s){const r=Math.min(i[0],i[2]),o=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),l=Math.max(i[1],i[3]);if(s===void 0||!this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(e,t))return;const h=this.plugin.mergedCellsCollection.get(e,t);if(!h)return;const u=h.getLastRow(),d=h.getLastColumn();if(r<=h.row&&o<=h.col&&a>=u&&l>=d)return`${this.fullySelectedMergedCellClassName}-${s}`;if(this.isMergeCellFullySelected(h,this.plugin.hot.getSelectedRange()))return`${this.fullySelectedMergedCellClassName}-multiple`}isMergeCellFullySelected(e,t){const i=[];if(!t||!e)return!1;for(let s=0;s<e.rowspan;s+=1)for(let r=0;r<e.colspan;r+=1)i.push(this.hot._createCellCoords(e.row+s,e.col+r));for(let s=0;s<i.length;s+=1){const r=[];for(let o=0;o<t.length;o+=1)r[o]=t[o].includes(i[s]);if(!r.includes(!0))return!1}return!0}getSelectedMergedCellClassNameToRemove(){const e=[];for(let t=0;t<=7;t+=1)e.push(`${this.fullySelectedMergedCellClassName}-${t}`);return e.push(`${this.fullySelectedMergedCellClassName}-multiple`),e}}function QHe(n){return{key:"mergeCells",name(){const e=this.getSelectedLast();if(e){const t=n.mergedCellsCollection.get(e[0],e[1]);if(t.row===e[0]&&t.col===e[1]&&t.row+t.rowspan-1===e[2]&&t.col+t.colspan-1===e[3])return this.getTranslatedPhrase(JP)}return this.getTranslatedPhrase(ZP)},callback(){const e=this.getSelectedRangeLast();if(!e)return;e.setDirection(this.isRtl()?"NE-SW":"NW-SE");const{from:t,to:i}=e;n.toggleMerge(e),this.selectCell(t.row,t.col,i.row,i.col,!1)},disabled(){const e=this.getSelectedLast();return e?Fa.isSingleCell({row:e[0],col:e[1],rowspan:e[2]-e[0]+1,colspan:e[3]-e[1]+1})||this.selection.isSelectedByCorner():!0},hidden:!1}}function tv(n,e,t){return(e=ZHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZHe(n){var e=JHe(n,"string");return typeof e=="symbol"?e:e+""}function JHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class n9{constructor(e){tv(this,"data",void 0),tv(this,"next",null),tv(this,"prev",null),this.data=e}}class dR{constructor(){tv(this,"first",null),tv(this,"last",null)}push(e){const t=new n9(e);if(this.first===null)this.first=t,this.last=t;else{const i=this.last;this.last=t,t.prev=i,i.next=t}return t}unshift(e){const t=new n9(e);if(this.first===null)this.first=t,this.last=t;else{const i=this.first;this.first=t,t.next=i,i.prev=t}}inorder(e){let t=this.first;for(;t;){const i=e(t);if(t===this.last||i===!0)break;t=t.next}}remove(e){if(this.first===null)return!1;let t=this.first,i,s;for(;t;){if(t.data===e)return i=t.next,s=t.prev,i&&(i.prev=s),s&&(s.next=i),t===this.first&&(this.first=i),t===this.last&&(this.last=s),!0;t=t.next}return!1}hasCycle(){let e=this.first,t=this.first;for(;;){if(e===null||(e=e.next,e===null))return!1;if(e=e.next,t=t.next,e===t)return!0}}pop(){if(this.last===null)return null;const e=this.last;return this.last=this.last.prev,e}shift(){if(this.first===null)return null;const e=this.first;return this.first=this.first.next,e}recursiveReverse(){function e(i,s){s&&(e(s,s.next),s.next=i)}if(!this.first)return;e(this.first,this.first.next),this.first.next=null;const t=this.first;this.first=this.last,this.last=t}reverse(){if(!this.first||!this.first.next)return;let e=this.first.next,t=this.first,i;for(;e;)i=e.next,e.next=t,t.prev=e,t=e,e=i;this.first.next=null,this.last.prev=null,i=this.first,this.first=t,this.last=i}}function eDe(n,e){i9(n,e),e.add(n)}function Ld(n,e,t){i9(n,e),e.set(n,t)}function i9(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Nt(n,e){return n.get(fR(n,e))}function ur(n,e,t){return n.set(fR(n,e),t),t}function fR(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ba=new WeakMap,Va=new WeakMap,Wa=new WeakMap,ja=new WeakMap,bH=new WeakMap,gR=new WeakMap,pR=new WeakMap,wH=new WeakSet;class tDe{constructor(e){let{mergedCellsGetter:t,rowIndexMapper:i,columnIndexMapper:s}=e;eDe(this,wH),Ld(this,Ba,new dR),Ld(this,Va,new dR),Ld(this,Wa,null),Ld(this,ja,null),Ld(this,bH,null),Ld(this,gR,null),Ld(this,pR,null),ur(bH,this,t),ur(gR,this,i),ur(pR,this,s)}getCurrentVerticalNode(){return Nt(ja,this).data}getFirstVerticalNode(){return Nt(Va,this).first.data}getNextVerticalNode(){return Nt(ja,this).next.data}getPrevVerticalNode(){return Nt(ja,this).prev.data}getCurrentHorizontalNode(){return Nt(Wa,this).data}getFirstHorizontalNode(){return Nt(Ba,this).first.data}getNextHorizontalNode(){return Nt(Wa,this).next.data}getPrevHorizontalNode(){return Nt(Wa,this).prev.data}setPrevNodeAsActive(){ur(ja,this,Nt(ja,this).prev),ur(Wa,this,Nt(Wa,this).prev)}setNextNodeAsActive(){ur(ja,this,Nt(ja,this).next),ur(Wa,this,Nt(Wa,this).next)}buildFocusOrder(e){const t=e.getTopStartCorner(),i=e.getBottomEndCorner(),s=new WeakSet;ur(Ba,this,new dR);for(let o=t.row;o<=i.row;o++)if(!Nt(gR,this).isHidden(o))for(let a=t.col;a<=i.col;a++){if(Nt(pR,this).isHidden(a))continue;const l=fR(wH,this,s9).call(this,e,Nt(Ba,this),s,o,a);l&&ur(Wa,this,l)}Nt(Ba,this).first&&(Nt(Ba,this).first.prev=Nt(Ba,this).last,Nt(Ba,this).last.next=Nt(Ba,this).first);const r=new WeakSet;ur(Va,this,new dR);for(let o=t.col;o<=i.col;o++)if(!Nt(pR,this).isHidden(o))for(let a=t.row;a<=i.row;a++){if(Nt(gR,this).isHidden(a))continue;const l=fR(wH,this,s9).call(this,e,Nt(Va,this),r,a,o);l&&ur(ja,this,l)}Nt(Va,this).first&&(Nt(Va,this).first.prev=Nt(Va,this).last,Nt(Va,this).last.next=Nt(Va,this).first)}setActiveNode(e,t){return Nt(Ba,this).inorder(i=>{const{rowStart:s,rowEnd:r,colStart:o,colEnd:a}=i.data;if(e>=s&&e<=r&&t>=o&&t<=a)return ur(Wa,this,i),!1}),Nt(Va,this).inorder(i=>{const{rowStart:s,rowEnd:r,colStart:o,colEnd:a}=i.data;if(e>=s&&e<=r&&t>=o&&t<=a)return ur(ja,this,i),!1}),this}}function s9(n,e,t,i,s){const r=n.getTopStartCorner(),o=n.getBottomEndCorner(),a=n.highlight.clone().normalize(),l=Nt(bH,this).call(this,i,s);if(l&&t.has(l))return null;const c={colStart:s,colEnd:s,rowStart:i,rowEnd:i};if(l){if(t.add(l),l.row<r.row||l.row+l.rowspan-1>o.row||l.col<r.col||l.col+l.colspan-1>o.col)return null;c.colStart=l.col,c.colEnd=l.col+l.colspan-1,c.rowStart=l.row,c.rowEnd=l.row+l.rowspan-1}const h=e.push(c);return i===a.row&&s===a.col||l&&a.row>=l.row&&a.row<=l.row+l.rowspan-1&&a.col>=l.col&&a.col<=l.col+l.colspan-1?h:null}function nDe(n){const{hot:e}=n,{rowIndexMapper:t,columnIndexMapper:i}=e;function s(){}function r(o,a,l){const c=n.mergedCellsCollection.get(a,l);if(!Je(c)){o.removeAttribute("rowspan"),o.removeAttribute("colspan"),o.style.display="";return}const{row:h,col:u,colspan:d,rowspan:f}=c,[g,p]=n.translateMergedCellToRenderable(h,f,u,d),m=t.getRenderableFromVisualIndex(a),w=i.getRenderableFromVisualIndex(l),y=g-m+1,C=p-w+1,R=t.getNearestNotHiddenIndex(h,1),_=i.getNearestNotHiddenIndex(u,1),x=Math.min(f,y),M=Math.min(d,C);R===a&&_===l?(o.setAttribute("rowspan",x),o.setAttribute("colspan",M)):(o.removeAttribute("rowspan"),o.removeAttribute("colspan"),o.style.display="none")}return{before:s,after:r}}function iDe(n,e){r9(n,e),e.add(n)}function mR(n,e,t){r9(n,e),e.set(n,t)}function r9(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vH(n,e,t){return(e=sDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sDe(n){var e=rDe(n,"string");return typeof e=="symbol"?e:e+""}function rDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nv(n,e,t){return n.set(jt(n,e),t),t}function on(n,e){return n.get(jt(n,e))}function jt(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}xe.getSingleton().register("beforeMergeCells"),xe.getSingleton().register("afterMergeCells"),xe.getSingleton().register("beforeUnmergeCells"),xe.getSingleton().register("afterUnmergeCells");const iv="mergeCells",oDe=150,o9=iv;var Yr=new WeakMap,Gr=new WeakMap,za=new WeakMap,a9=new WeakMap,Yt=new WeakSet;class aDe extends Pt{constructor(){super(...arguments),iDe(this,Yt),vH(this,"mergedCellsCollection",null),vH(this,"autofillCalculations",null),vH(this,"selectionCalculations",null),mR(this,Yr,null),mR(this,Gr,{row:0,col:0}),mR(this,za,new tDe({mergedCellsGetter:(e,t)=>this.mergedCellsCollection.get(e,t),rowIndexMapper:this.hot.rowIndexMapper,columnIndexMapper:this.hot.columnIndexMapper})),mR(this,a9,nDe(this))}static get PLUGIN_KEY(){return iv}static get PLUGIN_PRIORITY(){return oDe}isEnabled(){return!!this.hot.getSettings()[iv]}enablePlugin(){var e=this;this.enabled||(this.mergedCellsCollection=new hR(this),this.autofillCalculations=new GHe(this),this.selectionCalculations=new XHe(this),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,lDe).call(e,...i)}),this.addHook("modifyTransformFocus",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,hDe).call(e,...i)}),this.addHook("modifyTransformStart",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,uDe).call(e,...i)}),this.addHook("modifyTransformEnd",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,dDe).call(e,...i)}),this.addHook("beforeSelectionHighlightSet",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,fDe).call(e,...i)}),this.addHook("beforeSetRangeStart",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,l9).call(e,...i)}),this.addHook("beforeSetRangeStartOnly",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,l9).call(e,...i)}),this.addHook("beforeSelectionFocusSet",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,mDe).call(e,...i)}),this.addHook("afterSelectionFocusSet",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,bDe).call(e,...i)}),this.addHook("afterSelectionEnd",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,wDe).call(e,...i)}),this.addHook("modifyGetCellCoords",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,gDe).call(e,...i)}),this.addHook("afterIsMultipleSelection",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,cDe).call(e,...i)}),this.addHook("afterRenderer",function(){return on(a9,e).after(...arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,pDe).call(e,...i)}),this.addHook("afterGetCellMeta",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,vDe).call(e,...i)}),this.addHook("afterViewportRowCalculatorOverride",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,yDe).call(e,...i)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,CDe).call(e,...i)}),this.addHook("modifyAutofillRange",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,SDe).call(e,...i)}),this.addHook("afterCreateCol",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,_De).call(e,...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,RDe).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,xDe).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,EDe).call(e,...i)}),this.addHook("afterChange",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,TDe).call(e,...i)}),this.addHook("beforeDrawBorders",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,MDe).call(e,...i)}),this.addHook("afterDrawSelection",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,ADe).call(e,...i)}),this.addHook("beforeRemoveCellClassNames",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,PDe).call(e,...i)}),this.addHook("beforeBeginEditing",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,IDe).call(e,...i)}),this.addHook("modifyRowHeightByOverlayName",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return jt(Yt,e,ODe).call(e,...i)}),this.addHook("beforeUndoStackChange",(t,i)=>{if(i==="MergeCells")return!1}),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.clearCollections(),this.unregisterShortcuts(),this.hot.render(),super.disablePlugin()}updatePlugin(){const e=this.hot.getSettings()[iv];this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(e),super.updatePlugin()}ifChromeForceRepaint(){if(!fA())return;const e=[];let t=[];this.mergedCellsCollection.mergedCells.forEach(i=>{const{row:s,rowspan:r}=i;for(let o=s+1;o<s+r;o++)t.push(o)}),t=[...new Set(t)],t.forEach(i=>{const s=this.hot.rowIndexMapper.getRenderableFromVisualIndex(i);this.hot.view._wt.wtOverlays.getOverlays(!0).map(r=>(r==null?void 0:r.name)==="master"?r:r.clone.wtTable).forEach(r=>{const o=r.getRow(s);o&&(o.style.background=Jf(o,"backgroundColor").replace(")",", 0.99)"),e.push(o))})}),this.hot._registerTimeout(()=>{e.forEach(i=>{i.style.background=Jf(i,"backgroundColor").replace(", 0.99)",")")})},1)}validateSetting(e){return e?Fa.containsNegativeValues(e)?(Vt(Fa.NEGATIVE_VALUES_WARNING(e)),!1):Fa.isOutOfBounds(e,this.hot.countRows(),this.hot.countCols())?(Vt(Fa.IS_OUT_OF_BOUNDS_WARNING(e)),!1):Fa.isSingleCell(e)?(Vt(Fa.IS_SINGLE_CELL(e)),!1):Fa.containsZeroSpan(e)?(Vt(Fa.ZERO_SPAN_WARNING(e)),!1):!0:!1}generateFromSettings(e){if(!Array.isArray(e))return;const t=e.filter(r=>this.validateSetting(r)),i=this.mergedCellsCollection.filterOverlappingMergeCells(t),s=[];i.forEach(r=>{const{row:o,col:a,rowspan:l,colspan:c}=r,h=this.hot._createCellCoords(o,a),u=this.hot._createCellCoords(o+l-1,a+c-1),d=this.hot._createCellRange(h,h,u);this.mergeRange(d,!0,!0);for(let f=o;f<o+l;f++)for(let g=a;g<a+c;g++)(f!==o||g!==a)&&s.push([f,g,null])}),s.length!==0&&this.hot.setDataAtCell(s,void 0,void 0,this.pluginName)}clearCollections(){this.mergedCellsCollection.clear()}canMergeRange(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?!0:this.validateSetting(e)}mergeSelection(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hot.getSelectedRangeLast();if(!e)return;e.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");const{from:t,to:i}=e;this.unmergeRange(e,!0),this.mergeRange(e),this.hot.selectCell(t.row,t.col,i.row,i.col,!1)}unmergeSelection(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hot.getSelectedRangeLast();if(!e)return;const{from:t,to:i}=e;this.unmergeRange(e,!0),this.hot.selectCell(t.row,t.col,i.row,i.col,!1)}mergeRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=e.getTopStartCorner(),r=e.getBottomEndCorner(),o={row:s.row,col:s.col,rowspan:r.row-s.row+1,colspan:r.col-s.col+1},a=[];let l=null;return this.canMergeRange(o,t)?(this.hot.runHooks("beforeMergeCells",e,t),Oe(0,o.rowspan-1,h=>{Oe(0,o.colspan-1,u=>{let d=null;a[h]||(a[h]=[]),h===0&&u===0?d=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o.row),this.hot.toPhysicalColumn(o.col)):this.hot.setCellMeta(o.row+h,o.col+u,"hidden",!0),a[h][u]=d})}),this.hot.setCellMeta(o.row,o.col,"spanned",!0),this.mergedCellsCollection.add(o,t)?(i?l=[o.row,o.col,a]:this.hot.populateFromArray(o.row,o.col,a,void 0,void 0,this.pluginName),t||this.ifChromeForceRepaint(),this.hot.runHooks("afterMergeCells",e,o,t),l):!0):!1}unmergeRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=this.mergedCellsCollection.getWithinRange(e);i.length!==0&&(this.hot.runHooks("beforeUnmergeCells",e,t),F(i,s=>{this.mergedCellsCollection.remove(s.row,s.col),Oe(0,s.rowspan-1,r=>{Oe(0,s.colspan-1,o=>{this.hot.removeCellMeta(s.row+r,s.col+o,"hidden"),this.hot.removeCellMeta(s.row+r,s.col+o,"copyable")})}),this.hot.removeCellMeta(s.row,s.col,"spanned")}),this.hot.runHooks("afterUnmergeCells",e,t),this.hot.render())}toggleMerge(e){const t=this.mergedCellsCollection.get(e.from.row,e.from.col);t.row===e.from.row&&t.col===e.from.col&&t.row+t.rowspan-1===e.to.row&&t.col+t.colspan-1===e.to.col?this.unmergeRange(e):this.mergeSelection(e)}merge(e,t,i,s){const r=this.hot._createCellCoords(e,t),o=this.hot._createCellCoords(i,s);this.mergeRange(this.hot._createCellRange(r,r,o))}unmerge(e,t,i,s){const r=this.hot._createCellCoords(e,t),o=this.hot._createCellCoords(i,s);this.unmergeRange(this.hot._createCellRange(r,r,o))}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control","m"]],callback:()=>{const i=this.hot.getSelectedRangeLast();i&&!i.isSingleHeader()&&(this.toggleMerge(i),this.hot.render())},runOnlyIf:i=>!i.altKey,group:o9})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(o9)}modifyViewportRowStart(e,t){const i=this.hot.rowIndexMapper,s=i.getVisualFromRenderableIndex(e.startRow);for(let r=0;r<t;r+=1){const o=this.mergedCellsCollection.get(s,r);if(Je(o)){const a=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.row,1));if(a<e.startRow){e.startRow=a,this.modifyViewportRowStart(e,t);return}}}}modifyViewportRowEnd(e,t){const i=this.hot.rowIndexMapper,s=i.getVisualFromRenderableIndex(e.endRow);for(let r=0;r<t;r+=1){const o=this.mergedCellsCollection.get(s,r);if(Je(o)){const a=o.row+o.rowspan-1,l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(a,-1));if(l>e.endRow){e.endRow=l,this.modifyViewportRowEnd(e,t);return}}}}modifyViewportColumnStart(e,t){const i=this.hot.columnIndexMapper,s=i.getVisualFromRenderableIndex(e.startColumn);for(let r=0;r<t;r+=1){const o=this.mergedCellsCollection.get(r,s);if(Je(o)){const a=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.col,1));if(a<e.startColumn){e.startColumn=a,this.modifyViewportColumnStart(e,t);return}}}}modifyViewportColumnEnd(e,t){const i=this.hot.columnIndexMapper,s=i.getVisualFromRenderableIndex(e.endColumn);for(let r=0;r<t;r+=1){const o=this.mergedCellsCollection.get(r,s);if(Je(o)){const a=o.col+o.colspan-1,l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(a,-1));if(l>e.endColumn){e.endColumn=l,this.modifyViewportColumnEnd(e,t);return}}}}translateMergedCellToRenderable(e,t,i,s){const{rowIndexMapper:r,columnIndexMapper:o}=this.hot;let a,l;t===0?a=r.getNearestNotHiddenIndex(e,1):a=r.getNearestNotHiddenIndex(e+t-1,-1),s===0?l=o.getNearestNotHiddenIndex(i,1):l=o.getNearestNotHiddenIndex(i+s-1,-1);const c=e>=0?r.getRenderableFromVisualIndex(a):e,h=i>=0?o.getRenderableFromVisualIndex(l):i;return[c,h]}}function lDe(){this.generateFromSettings(this.hot.getSettings()[iv]),this.hot.render()}function cDe(n){if(n){const e=this.mergedCellsCollection.mergedCells,t=this.hot.getSelectedRangeLast(),i=t.getTopStartCorner(),s=t.getBottomEndCorner();for(let r=0;r<e.length;r+=1)if(i.row===e[r].row&&i.col===e[r].col&&s.row===e[r].row+e[r].rowspan-1&&s.col===e[r].col+e[r].colspan-1)return!1}return n}function hDe(n){on(Gr,this).row=n.row,on(Gr,this).col=n.col}function uDe(n){const e=this.hot.getSelectedRangeLast(),{highlight:t}=e,{columnIndexMapper:i,rowIndexMapper:s}=this.hot;on(Yr,this)&&(s.getRenderableFromVisualIndex(on(Yr,this).row)!==null&&(t.row=on(Yr,this).row),i.getRenderableFromVisualIndex(on(Yr,this).col)!==null&&(t.col=on(Yr,this).col),nv(Yr,this,null));const r=this.mergedCellsCollection.get(t.row,t.col);if(!r)return;const o=r.col,a=r.col+r.colspan-1;if(n.col<0){const h=t.col>=o&&t.col<=a?o-1:a,u=i.getNearestNotHiddenIndex(h,-1);u===null?n.col=-this.hot.view.countRenderableColumnsInRange(0,t.col):n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(u,t.col)-1,1)}else if(n.col>0){const h=t.col>=o&&t.col<=a?a+1:o,u=i.getNearestNotHiddenIndex(h,1);u===null?n.col=this.hot.view.countRenderableColumnsInRange(t.col,this.hot.countCols()):n.col=Math.max(this.hot.view.countRenderableColumnsInRange(t.col,u)-1,1)}const l=r.row,c=r.row+r.rowspan-1;if(n.row<0){const h=t.row>=l&&t.row<=c?l-1:c,u=s.getNearestNotHiddenIndex(h,-1);u===null?n.row=-this.hot.view.countRenderableRowsInRange(0,t.row):n.row=-Math.max(this.hot.view.countRenderableRowsInRange(u,t.row)-1,1)}else if(n.row>0){const h=t.row>=l&&t.row<=c?c+1:l,u=s.getNearestNotHiddenIndex(h,1);u===null?n.row=this.hot.view.countRenderableRowsInRange(t.row,this.hot.countRows()):n.row=Math.max(this.hot.view.countRenderableRowsInRange(t.row,u)-1,1)}}function dDe(n){const e=this.hot.getSelectedRangeLast(),t=e.clone(),{to:i}=e,{columnIndexMapper:s,rowIndexMapper:r}=this.hot,o=(a,l)=>{t.expand(this.hot._createCellCoords(a,l));for(let c=0;c<this.mergedCellsCollection.mergedCells.length;c+=1)t.expandByRange(this.mergedCellsCollection.mergedCells[c].getRange())};if(n.col<0){let a=this.mergedCellsCollection.getStartMostColumnIndex(e,i.col)+n.col;o(i.row,a),e.getHorizontalDirection()==="E-W"&&t.getHorizontalDirection()==="E-W"&&(a=t.getTopStartCorner().col);const l=s.getNearestNotHiddenIndex(a,1);l!==null&&(n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(l,i.col)-1,1))}else if(n.col>0){let a=this.mergedCellsCollection.getEndMostColumnIndex(e,i.col)+n.col;o(i.row,a),e.getHorizontalDirection()==="W-E"&&t.getHorizontalDirection()==="W-E"&&(a=t.getBottomEndCorner().col);const l=s.getNearestNotHiddenIndex(a,-1);l!==null&&(n.col=Math.max(this.hot.view.countRenderableColumnsInRange(i.col,l)-1,1))}if(n.row<0){let a=this.mergedCellsCollection.getTopMostRowIndex(e,i.row)+n.row;o(a,i.col),e.getVerticalDirection()==="S-N"&&t.getVerticalDirection()==="S-N"&&(a=t.getTopStartCorner().row);const l=r.getNearestNotHiddenIndex(a,1);l!==null&&(n.row=-Math.max(this.hot.view.countRenderableRowsInRange(l,i.row)-1,1))}else if(n.row>0){let a=this.mergedCellsCollection.getBottomMostRowIndex(e,i.row)+n.row;o(a,i.col),e.getVerticalDirection()==="N-S"&&t.getVerticalDirection()==="N-S"&&(a=t.getBottomStartCorner().row);const l=r.getNearestNotHiddenIndex(a,-1);l!==null&&(n.row=Math.max(this.hot.view.countRenderableRowsInRange(i.row,l)-1,1))}}function fDe(){const n=this.hot.getSelectedRangeLast(),{highlight:e}=n;if(this.hot.selection.isSelectedByColumnHeader()||this.hot.selection.isSelectedByRowHeader()){nv(Yr,this,e.clone());return}for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);const t=this.mergedCellsCollection.get(e.row,e.col);nv(Yr,this,e.clone()),t&&e.assign(t)}function gDe(n,e){if(n<0||e<0)return;const t=this.mergedCellsCollection.get(n,e);if(!t)return;const{row:i,col:s,colspan:r,rowspan:o}=t;return[i,s,i+o-1,s+r-1]}function pDe(n){n.items.push({name:"---------"},QHe(this))}function l9(){nv(Yr,this,null)}function mDe(){if(on(Yr,this).isCell())return;const n=this.hot.getSelectedRangeLast(),e=n.getVerticalDirection(),t=n.getHorizontalDirection(),i=on(Yr,this).clone().normalize();on(za,this).setActiveNode(i.row,i.col),on(Gr,this).row>0||on(Gr,this).col>0?on(za,this).setPrevNodeAsActive():(t==="E-W"&&on(Gr,this).col<0||e==="S-N"&&on(Gr,this).row<0)&&on(za,this).setNextNodeAsActive()}function bDe(n,e){const t=this.hot.getSelectedRangeLast(),{columnIndexMapper:i,rowIndexMapper:s}=this.hot;let r=null,o=null;if(on(Gr,this).col<0){const{rowEnd:a,colEnd:l}=on(za,this).getPrevHorizontalNode();o=i.getNearestNotHiddenIndex(l,-1),r=s.getNearestNotHiddenIndex(a,-1)}else if(on(Gr,this).col>0){const{rowStart:a,colStart:l}=on(za,this).getNextHorizontalNode();o=i.getNearestNotHiddenIndex(l,1),r=s.getNearestNotHiddenIndex(a,1)}else if(on(Gr,this).row<0){const{rowEnd:a,colEnd:l}=on(za,this).getPrevVerticalNode();o=i.getNearestNotHiddenIndex(l,-1),r=s.getNearestNotHiddenIndex(a,-1)}else if(on(Gr,this).row>0){const{rowStart:a,colStart:l}=on(za,this).getNextVerticalNode();o=i.getNearestNotHiddenIndex(l,1),r=s.getNearestNotHiddenIndex(a,1)}if(r!==null||o!==null){const a=this.hot._createCellCoords(r,o),l=this.mergedCellsCollection.get(a.row,a.col),c=this.hot.selection.highlight.getFocus();n=a.row,e=a.col,l?t.highlight.assign({row:this.hot.rowIndexMapper.getNearestNotHiddenIndex(l.row,1),col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(l.col,1)}):t.highlight.assign(a),c.clear(),c.add(a).commit()}on(za,this).setActiveNode(n,e),nv(Gr,this,{row:0,col:0})}function wDe(){this.hot.getSelectedRangeLast().isHeader()||on(za,this).buildFocusOrder(this.hot.getSelectedRangeLast())}function vDe(n,e,t){const i=this.mergedCellsCollection.get(n,e);i&&(i.row!==n||i.col!==e?t.copyable=!1:(t.rowspan=i.rowspan,t.colspan=i.colspan))}function yDe(n){const e=this.hot.countCols();this.modifyViewportRowStart(n,e),this.modifyViewportRowEnd(n,e)}function CDe(n){const e=this.hot.countRows();this.modifyViewportColumnStart(n,e),this.modifyViewportColumnEnd(n,e)}function SDe(n,e){this.autofillCalculations.correctSelectionAreaSize(e);const t=this.autofillCalculations.getDirection(e,n);let i=n;if(this.autofillCalculations.dragAreaOverlapsCollections(e,i,t))return i=e,i;const s=this.hot._createCellCoords(e[0],e[1]),r=this.hot._createCellCoords(e[2],e[3]),o=this.hot._createCellRange(s,s,r),a=this.mergedCellsCollection.getWithinRange(o);return a.length===0||(i=this.autofillCalculations.snapDragArea(e,i,t,a)),i}function _De(n,e){this.mergedCellsCollection.shiftCollections("right",n,e)}function RDe(n,e){this.mergedCellsCollection.shiftCollections("left",n,e)}function xDe(n,e,t){t!=="auto"&&this.mergedCellsCollection.shiftCollections("down",n,e)}function EDe(n,e){this.mergedCellsCollection.shiftCollections("up",n,e)}function TDe(n,e){e==="Autofill.fill"&&this.autofillCalculations.recreateAfterDataPopulation(n)}function MDe(n,e){if(e&&e==="area"){const t=this.hot.getSelectedRangeLast(),i=this.mergedCellsCollection.getWithinRange(t);F(i,s=>{t.getBottomEndCorner().row===s.getLastRow()&&t.getBottomEndCorner().col===s.getLastColumn()&&(n[2]=s.row,n[3]=s.col)})}}function ADe(n,e,t,i){if(t)return this.selectionCalculations.getSelectedMergedCellClassName(n,e,t,i)}function PDe(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}function IDe(n,e,t,i){if(!(i instanceof MouseEvent))return;const s=this.hot.getSelectedRangeLast(),r=this.mergedCellsCollection.getByRange(s);if(!r)return;const o=this.hot._createCellCoords(r.row,r.col),a=this.hot._createCellCoords(r.row+r.rowspan-1,r.col+r.colspan-1);return this.hot.selection.getLayerLevel()===0&&s.isEqual(this.hot._createCellRange(o,o,a))}function ODe(n,e,t){if(this.hot.getSettings().rowHeaders||t==="bottom"||t==="bottom_inline_start_corner")return n;let i,s;if(t==="master")i=this.hot.view.getFirstRenderedVisibleColumn(),s=this.hot.view.getLastRenderedVisibleColumn();else{const d=this.hot.view.getOverlayByName(t);i=this.hot.columnIndexMapper.getVisualFromRenderableIndex(d.clone.wtTable.getFirstRenderedColumn()),s=this.hot.columnIndexMapper.getVisualFromRenderableIndex(d.clone.wtTable.getLastRenderedColumn())}if(!this.mergedCellsCollection.get(e,i))return n;const o=this.hot._createCellCoords(e,i),a=this.hot._createCellCoords(e,s),l=this.hot._createCellRange(o,o,a),c=this.mergedCellsCollection.getWithinRange(l),h=c.reduce((d,f)=>{let{rowspan:g}=f;return Math.max(d,g)},1);let u=0;return c.length>1&&c[0].rowspan<h&&(u=h-c[0].rowspan),c.forEach(d=>{var f;let{rowspan:g}=d,p=0;t==="top"||t==="top_inline_start_corner"?p=Math.min(h,this.hot.view.countNotHiddenFixedRowsTop()-e):p=g-u,n=Math.max((f=n)!==null&&f!==void 0?f:0,jt(Yt,this,kDe).call(this,e,p))}),n}function kDe(n,e){const t=this.hot.view._wt.wtSettings.getSettingPure("defaultRowHeight"),i=this.hot.getPlugin("autoRowSize");let s=0;for(let o=n;o<n+e;o++)if(!this.hot.rowIndexMapper.isHidden(o)){var r;s+=(r=i==null?void 0:i.getRowHeight(o))!==null&&r!==void 0?r:t}return s}function HDe(n,e){return function(t,i){const[,...s]=t,[,...r]=i;return function o(a){const l=n[a],c=e[a],h=s[a],u=r[a],d=c.multiColumnSorting,g=(d.compareFunctionFactory?d.compareFunctionFactory:N4(c.type))(l,c,d)(h,u);if(g===Ma){const p=a+1;if(typeof e[p]<"u")return o(p)}return g}(0)}}function c9(){Vt(Ft`Plugins \`columnSorting\` and \`multiColumnSorting\` should not be enabled simultaneously. 
    Only \`multiColumnSorting\` will work. The \`columnSorting\` plugin will be disabled.`)}const h9="sort";function DDe(n,e,t){const i=[];return t===!1||n.isColumnSorted(e)&&n.getNumberOfSortedColumns()>1&&i.push(`${h9}-${n.getIndexOfColumnInSortQueue(e)+1}`),i}function NDe(n){const e=n.className.split(" "),t=new RegExp(`^${h9}-[0-9]{1,2}$`);return e.filter(i=>t.test(i))}function LDe(n,e,t){return(e=$De(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $De(n){var e=FDe(n,"string");return typeof e=="symbol"?e:e+""}function FDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const bR="multiColumnSorting",BDe=170,yH="columnSorting",u9=bR;D4(bR,HDe);class VDe extends G4{constructor(){super(...arguments),LDe(this,"pluginKey",bR)}static get PLUGIN_KEY(){return bR}static get PLUGIN_PRIORITY(){return BDe}isEnabled(){return super.isEnabled()}enablePlugin(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[yH]&&(c9(),this.hot.getPlugin(yH).disablePlugin()),super.enablePlugin()}disablePlugin(){super.disablePlugin()}registerShortcuts(){super.registerShortcuts(),this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Shift","Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();return e.row===-1&&e.col>=0&&this.sort(this.getNextSortConfig(e.col,KS)),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.isHeader()},relativeToGroup:ih,position:"before",group:u9})}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(u9)}sort(e){super.sort(e)}clearSort(){super.clearSort()}isSorted(){return super.isSorted()}getSortConfig(e){return super.getSortConfig(e)}setSortConfig(e){super.setSortConfig(e)}getNormalizedSortConfigs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)?e:[e]}updateHeaderClasses(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];super.updateHeaderClasses(e,...i),Ue(e,NDe(e)),this.enabled!==!1&&ae(e,DDe(...i))}onUpdateSettings(e){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[yH]&&c9(),super.onUpdateSettings(e)}onAfterOnCellMouseDown(e,t){VO(t.row,t.col,e)!==!1&&this.wasClickableHeaderClicked(e,t.col)&&(this.hot.getShortcutManager().isCtrlPressed()?(this.hot.deselectCell(),this.hot.selectColumns(t.col),this.sort(this.getNextSortConfig(t.col,KS))):this.sort(this.getColumnNextConfig(t.col)))}}function d9(n,e,t){return(e=WDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WDe(n){var e=jDe(n,"string");return typeof e=="symbol"?e:e+""}function jDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const zDe="multipleSelectionHandles",UDe=160;class YDe extends Pt{constructor(){super(...arguments),d9(this,"dragged",[]),d9(this,"lastSetCell",null)}static get PLUGIN_KEY(){return zDe}static get PLUGIN_PRIORITY(){return UDe}isEnabled(){return Dl()}enablePlugin(){this.enabled||(this.registerListeners(),super.enablePlugin())}registerListeners(){const e=this,{rootElement:t}=this.hot;function i(s){if(e.dragged.length===1)return e.dragged.splice(0,e.dragged.length),!0;const r=e.dragged.indexOf(s);if(r===-1)return!1;r===0?e.dragged=e.dragged.slice(0,1):r===1&&(e.dragged=e.dragged.slice(-1))}this.eventManager.addEventListener(t,"touchstart",s=>{let r;if(Fe(s.target,"topSelectionHandle-HitArea"))return r=e.hot.getSelectedRangeLast(),e.dragged.push("top"),e.touchStartRange={width:r.getWidth(),height:r.getHeight(),direction:r.getDirection()},s.preventDefault(),!1;if(Fe(s.target,"bottomSelectionHandle-HitArea"))return r=e.hot.getSelectedRangeLast(),e.dragged.push("bottom"),e.touchStartRange={width:r.getWidth(),height:r.getHeight(),direction:r.getDirection()},s.preventDefault(),!1}),this.eventManager.addEventListener(t,"touchend",s=>{if(Fe(s.target,"topSelectionHandle-HitArea"))return i.call(e,"top"),e.touchStartRange=void 0,s.preventDefault(),!1;if(Fe(s.target,"bottomSelectionHandle-HitArea"))return i.call(e,"bottom"),e.touchStartRange=void 0,s.preventDefault(),!1}),this.eventManager.addEventListener(t,"touchmove",s=>{const{rootDocument:r}=this.hot;let o,a,l,c,h,u;if(e.dragged.length===0)return;const d=r.elementFromPoint(s.touches[0].clientX,s.touches[0].clientY);!d||d===e.lastSetCell||((d.nodeName==="TD"||d.nodeName==="TH")&&(o=e.hot.getCoords(d),o.col===-1&&(o.col=0),a=e.hot.getSelectedRangeLast(),l=a.getWidth(),c=a.getHeight(),h=a.getDirection(),l===1&&c===1&&e.hot.selection.setRangeEnd(o),u=e.getCurrentRangeCoords(a,o,e.touchStartRange.direction,h,e.dragged[0]),u.start!==null&&e.hot.selection.setRangeStart(u.start),e.hot.selection.setRangeEnd(u.end),e.lastSetCell=d),s.preventDefault())})}getCurrentRangeCoords(e,t,i,s,r){const o=e.getTopStartCorner(),a=e.getBottomEndCorner(),l=e.getBottomStartCorner(),c=e.getTopEndCorner();let h={start:null,end:null};switch(i){case"NE-SW":switch(s){case"NE-SW":case"NW-SE":r==="top"?h={start:this.hot._createCellCoords(t.row,e.highlight.col),end:this.hot._createCellCoords(l.row,t.col)}:h={start:this.hot._createCellCoords(e.highlight.row,t.col),end:this.hot._createCellCoords(t.row,o.col)};break;case"SE-NW":r==="bottom"&&(h={start:this.hot._createCellCoords(a.row,t.col),end:this.hot._createCellCoords(t.row,o.col)});break}break;case"NW-SE":switch(s){case"NE-SW":r==="top"?h={start:t,end:l}:h.end=t;break;case"NW-SE":r==="top"?h={start:t,end:a}:h.end=t;break;case"SE-NW":r==="top"?h={start:t,end:o}:h.end=t;break;case"SW-NE":r==="top"?h={start:t,end:c}:h.end=t;break}break;case"SW-NE":switch(s){case"NW-SE":r==="bottom"?h={start:this.hot._createCellCoords(t.row,o.col),end:this.hot._createCellCoords(l.row,t.col)}:h={start:this.hot._createCellCoords(o.row,t.col),end:this.hot._createCellCoords(t.row,a.col)};break;case"SW-NE":r==="top"?h={start:this.hot._createCellCoords(e.highlight.row,t.col),end:this.hot._createCellCoords(t.row,a.col)}:h={start:this.hot._createCellCoords(t.row,o.col),end:this.hot._createCellCoords(o.row,t.col)};break;case"SE-NW":r==="bottom"?h={start:this.hot._createCellCoords(t.row,c.col),end:this.hot._createCellCoords(o.row,t.col)}:r==="top"&&(h={start:l,end:t});break}break;case"SE-NW":switch(s){case"NW-SE":case"NE-SW":case"SW-NE":r==="top"&&(h.end=t);break;case"SE-NW":r==="top"?h.end=t:h={start:t,end:o};break}break}return h}isDragged(){return this.dragged.length>0}}function CH(){let{label:n="",colspan:e=1,origColspan:t=1,collapsible:i=!1,crossHiddenColumns:s=[],isCollapsed:r=!1,isHidden:o=!1,isRoot:a=!1,isPlaceholder:l=!1,headerClassNames:c=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{label:n,colspan:e,origColspan:t,collapsible:i,isCollapsed:r,crossHiddenColumns:s,isHidden:o,isRoot:a,isPlaceholder:l,headerClassNames:c}}function f9(){return{label:"",isPlaceholder:!0}}function GDe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0;const t=[];if(e===0)return t;F(n,s=>{const r=[];let o=0;t.push(r),F(s,a=>{const l=CH();if(Je(a)){const{label:h,colspan:u,headerClassName:d}=a;l.label=Mn(h),typeof u=="number"&&u>1&&(l.colspan=u,l.origColspan=u),typeof d=="string"&&(l.headerClassNames=[...d.split(" ")])}else l.label=Mn(a);o+=l.origColspan;let c=!1;if(o>=e&&(l.colspan=l.origColspan-(o-e),l.origColspan=l.colspan,c=!0),r.push(l),l.colspan>1)for(let h=0;h<l.colspan-1;h++)r.push(f9());return!c})});const i=Math.max(...ct(t,s=>s.length));return F(t,s=>{if(s.length<i){const r=ct(new Array(i-s.length),()=>CH());s.splice(s.length,0,...r)}}),t}function SH(n,e,t){KDe(n,e),e.set(n,t)}function KDe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fo(n,e){return n.get(g9(n,e))}function sv(n,e,t){return n.set(g9(n,e),t),t}function g9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const p9=["label","collapsible"];var cc=new WeakMap,$d=new WeakMap,_H=new WeakMap;class qDe{constructor(){SH(this,cc,[]),SH(this,$d,0),SH(this,_H,1/0)}setColumnsLimit(e){sv(_H,this,e)}setData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];sv(cc,this,GDe(e,Fo(_H,this))),sv($d,this,Fo(cc,this).length)}getData(){return Fo(cc,this)}mergeWith(e){F(e,t=>{let{row:i,col:s,...r}=t;const o=this.getHeaderSettings(i,s);o!==null&&Zn(o,r,p9)})}map(e){F(Fo(cc,this),t=>{F(t,i=>{const s=e({...i});Je(s)&&Zn(i,s,p9)})})}getHeaderSettings(e,t){var i;if(e>=Fo($d,this)||e<0)return null;const s=Fo(cc,this)[e];return Array.isArray(s)===!1||t>=s.length?null:(i=s[t])!==null&&i!==void 0?i:null}getHeadersSettings(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const s=[];if(e>=Fo($d,this)||e<0)return s;const r=Fo(cc,this)[e];let o=0;for(let a=t;a<r.length;a++){const l=r[a];if(l.isPlaceholder)throw new Error("The first column settings cannot overlap the other header layers");if(o+=l.colspan,s.push(l),l.colspan>1&&(a+=l.colspan-1),o===i)break;if(o>i)throw new Error("The last column settings cannot overlap the other header layers")}return s}getLayersCount(){return Fo($d,this)}getColumnsCount(){return Fo($d,this)>0?Fo(cc,this)[0].length:0}clear(){sv(cc,this,[]),sv($d,this,0)}}function RH(n,e,t){return(e=XDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XDe(n){var e=QDe(n,"string");return typeof e=="symbol"?e:e+""}function QDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const m9="DF-pre-order";function b9(n,e){let t=n.call(e,this);for(let i=0;i<this.childs.length;i++){if(t===!1)return!1;t=b9.call(this.childs[i],n,e)}return t}const ZDe="DF-post-order";function w9(n,e){for(let t=0;t<this.childs.length;t++)if(w9.call(this.childs[t],n,e)===!1)return!1;return n.call(e,this)}const v9="BF";function JDe(n,e){const t=[this];function i(){if(t.length===0)return;const s=t.shift();t.push(...s.childs),n.call(e,s)!==!1&&i()}i()}const eNe=v9,y9=new Map([[m9,b9],[ZDe,w9],[v9,JDe]]);class wR{constructor(e){RH(this,"data",{}),RH(this,"parent",null),RH(this,"childs",[]),this.data=e}addChild(e){e.parent=this,this.childs.push(e)}cloneTree(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this;const t=new wR({...e.data});for(let i=0;i<e.childs.length;i++)t.addChild(this.cloneTree(e.childs[i]));return t}replaceTreeWith(e){this.data={...e.data},this.childs=[];for(let t=0;t<e.childs.length;t++)this.addChild(e.childs[t])}walkDown(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:eNe;if(!y9.has(t))throw new Error(`Traversal strategy "${t}" does not exist`);y9.get(t).call(this,e,this)}walkUp(e){const t=this,i=s=>{e.call(t,s)!==!1&&s.parent!==null&&i(s.parent)};i(this)}}function xH(n,e,t){tNe(n,e),e.set(n,t)}function tNe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vs(n,e){return n.get(C9(n,e))}function nNe(n,e,t){return n.set(C9(n,e),t),t}function C9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var sp=new WeakMap,Fd=new WeakMap,rp=new WeakMap;class iNe{constructor(e){xH(this,sp,new Map),xH(this,Fd,new Map),xH(this,rp,null),nNe(rp,this,e)}getRoots(){return Array.from(vs(sp,this).values())}getRootByColumn(e){let t;return vs(Fd,this).has(e)&&(t=vs(sp,this).get(vs(Fd,this).get(e))),t}getNode(e,t){const i=this.getRootByColumn(t);if(!i)return;const s=t-vs(Fd,this).get(t);let r=0,o;return i.walkDown(a=>{const{data:{origColspan:l,headerLevel:c}}=a;if(e===c){if(s>=r&&s<=r+l-1)return o=a,o.data.isRoot=t===o.data.columnIndex,!1;r+=l}}),o}rebuildTreeIndex(){let e=0;vs(Fd,this).clear(),F(vs(sp,this),t=>{let[,{data:{colspan:i}}]=t;for(let s=e;s<e+i;s++)vs(Fd,this).set(s,e);e+=i})}buildTree(){this.clear();const e=vs(rp,this).getColumnsCount();let t=0;for(;t<e;){const i=vs(rp,this).getHeaderSettings(0,t),s=new wR;vs(sp,this).set(t,s),this.buildLeaves(s,t,0,i.origColspan),t+=i.origColspan}this.rebuildTreeIndex()}buildLeaves(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;const r=vs(rp,this).getHeadersSettings(i,t,s);i+=1,F(r,o=>{const a={...o,headerLevel:i-1,columnIndex:t};let l;i===1?(e.data=a,l=e):(l=new wR(a),e.addChild(l)),i<vs(rp,this).getLayersCount()&&this.buildLeaves(l,t,i,o.origColspan),t+=o.origColspan})}clear(){vs(sp,this).clear(),vs(Fd,this).clear()}}function S9(n,e){n.walkDown(t=>{let{data:i,childs:s}=t;if(!i.isHidden&&(e(i.columnIndex),s.length===0))for(let r=1;r<i.colspan;r++)e(i.columnIndex+r)})}function vR(n,e){let{childs:t}=n;if(t.length!==0)return t[0].data[e]}function yR(n){return vR(n,"origColspan")===n.data.origColspan}function EH(n){const{data:e,childs:t}=n;if(!e.isCollapsed||e.isHidden||e.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(yR(n))return EH(t[0]);e.isCollapsed=!1;const s=t.slice(1),r=new Set;let o=0;if(s.length>0)F(s,a=>{a.replaceTreeWith(a.data.clonedTree),a.data.clonedTree=null;const l=a.data;o+=l.colspan,S9(a,c=>{r.add(c)})});else{const{colspan:a,origColspan:l,columnIndex:c}=e;o=l-a;for(let h=1;h<l;h++)r.add(c+h)}return n.walkUp(a=>{const{data:l}=a;l.colspan+=o,l.colspan>=l.origColspan?(l.colspan=l.origColspan,l.isCollapsed=!1):yR(a)&&(l.isCollapsed=vR(a,"isCollapsed"))}),{rollbackModification:()=>TH(n),affectedColumns:Array.from(r),colspanCompensation:o}}function TH(n){var e;const{data:t,childs:i}=n;if(t.isCollapsed||t.isHidden||t.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(yR(n))return TH(i[0]);t.isCollapsed=!0;const r=i.slice(1),o=new Set;if(r.length>0)F(r,l=>{S9(l,c=>{o.add(c)}),l.data.clonedTree=l.cloneTree(),l.walkDown(c=>{let{data:h}=c;h.isHidden=!0})});else{const{origColspan:l,columnIndex:c}=t;for(let h=1;h<l;h++){const u=c+h;o.add(u)}}const a=t.colspan-((e=vR(n,"colspan"))!==null&&e!==void 0?e:1);return n.walkUp(l=>{const{data:c}=l;c.colspan-=a,c.colspan<=1?(c.colspan=1,c.isCollapsed=!0):yR(l)&&(c.isCollapsed=vR(l,"isCollapsed"))}),{rollbackModification:()=>EH(n),affectedColumns:Array.from(o),colspanCompensation:a}}function sNe(n,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(n.childs.length>0)throw new Error(Ft`The passed node is not the last node on the tree. Only for\x20
the last node, the hide column modification can be applied.`);const{crossHiddenColumns:t}=n.data;if(t.includes(e))return;let i=!1;n.walkUp(s=>{const{data:{collapsible:r}}=s;if(r)return i=!0,!1}),!i&&n.walkUp(s=>{const{data:r}=s;r.crossHiddenColumns.push(e),r.colspan>1?r.colspan-=1:r.isHidden=!0})}function rNe(n,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(n.childs.length>0)throw new Error(Ft`The passed node is not the last node on the tree. Only for\x20
the last node, the show column modification can be applied.`);const{crossHiddenColumns:t}=n.data;if(!t.includes(e))return;let i=!1;n.walkUp(s=>{const{data:{collapsible:r}}=s;if(r)return i=!0,!1}),!i&&n.walkUp(s=>{const{data:r}=s;r.crossHiddenColumns.splice(r.crossHiddenColumns.indexOf(e),1),!r.isHidden&&r.colspan<r.origColspan&&(r.colspan+=1),r.isHidden=!1})}const _9=new Map([["collapse",TH],["expand",EH],["hide-column",sNe],["show-column",rNe]]);function oNe(n,e,t){if(!_9.has(n))throw new Error(`The node modifier action ("${n}") does not exist.`);return _9.get(n)(e,t)}function CR(n){const e=[];return F(n,t=>{t.walkDown(i=>{const s=i.data,{origColspan:r,columnIndex:o,headerLevel:a,crossHiddenColumns:l}=s,c=lNe(e,a);let h=!1;for(let u=o;u<o+r;u++)if(l.includes(u)||h)c.push(f9());else{const f=aNe(s);f.isRoot=!0,c.push(f),h=!0}})}),e}function aNe(n){const{crossHiddenColumns:e,...t}=CH(n);return t}function lNe(n,e){let t;return Array.isArray(n[e])?t=n[e]:(t=[],n[e]=t),t}function MH(n,e,t){cNe(n,e),e.set(n,t)}function cNe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rv(n,e,t){return n.set(R9(n,e),t),t}function Dn(n,e){return n.get(R9(n,e))}function R9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ua=new WeakMap,$s=new WeakMap,Bd=new WeakMap;class hNe{constructor(){MH(this,Ua,new qDe),MH(this,$s,new iNe(Dn(Ua,this))),MH(this,Bd,[[]])}setState(e){Dn(Ua,this).setData(e);let t=!1;try{Dn($s,this).buildTree()}catch{Dn($s,this).clear(),Dn(Ua,this).clear(),t=!0}return rv(Bd,this,CR(Dn($s,this).getRoots())),t}setColumnsLimit(e){Dn(Ua,this).setColumnsLimit(e)}mergeStateWith(e){const t=ct(e,i=>{let{row:s,...r}=i;return{row:s<0?this.rowCoordsToLevel(s):s,...r}});Dn(Ua,this).mergeWith(t),Dn($s,this).buildTree(),rv(Bd,this,CR(Dn($s,this).getRoots()))}mapState(e){Dn(Ua,this).map(e),Dn($s,this).buildTree(),rv(Bd,this,CR(Dn($s,this).getRoots()))}mapNodes(e){return Qn(Dn($s,this).getRoots(),(t,i)=>(i.walkDown(s=>{const r=e(s.data);r!==void 0&&t.push(r)}),t),[])}triggerNodeModification(e,t,i){t<0&&(t=this.rowCoordsToLevel(t));const s=Dn($s,this).getNode(t,i);let r;return s&&(r=oNe(e,s,i),rv(Bd,this,CR(Dn($s,this).getRoots()))),r}triggerColumnModification(e,t){return this.triggerNodeModification(e,-1,t)}rowCoordsToLevel(e){if(e>=0)return null;const t=e+Math.max(this.getLayersCount(),1);return t<0?null:t}levelToRowCoords(e){if(e<0)return null;const t=e-Math.max(this.getLayersCount(),1);return t>=0?null:t}getHeaderSettings(e,t){var i,s;return e<0&&(e=this.rowCoordsToLevel(e)),e===null||e>=this.getLayersCount()?null:(i=(s=Dn(Bd,this)[e])===null||s===void 0?void 0:s[t])!==null&&i!==void 0?i:null}getHeaderTreeNodeData(e,t){const i=this.getHeaderTreeNode(e,t);return i?{...i.data}:null}getHeaderTreeNode(e,t){if(e<0&&(e=this.rowCoordsToLevel(e)),e===null||e>=this.getLayersCount())return null;const i=Dn($s,this).getNode(e,t);return i||null}findTopMostEntireHeaderLevel(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;const s=i-e+1;let r=!1,o=null;for(let a=e;a<=i;a++){const l=Dn($s,this).getRootByColumn(a);if(!l)break;r=!0,l.walkDown(c=>{const{columnIndex:h,headerLevel:u,origColspan:d,isHidden:f}=c.data;f||d<=s&&h>=e&&h+d-1<=i&&(o===null||u<o)&&(o=u)},m9)}return r&&o===null?-1:this.levelToRowCoords((t=o)!==null&&t!==void 0?t:0)}findLeftMostColumnIndex(e,t){var i;const{isRoot:s}=(i=this.getHeaderSettings(e,t))!==null&&i!==void 0?i:{isRoot:!0};if(s)return t;let r=t-1;for(;r>=0;){var o;const{isRoot:a}=(o=this.getHeaderSettings(e,r))!==null&&o!==void 0?o:{isRoot:!0};if(a)break;r-=1}return r}findRightMostColumnIndex(e,t){var i;const{isRoot:s,origColspan:r}=(i=this.getHeaderSettings(e,t))!==null&&i!==void 0?i:{isRoot:!0,origColspan:1};if(s)return t+r-1;let o=t+1;for(;o<this.getColumnsCount();){var a;const{isRoot:l}=(a=this.getHeaderSettings(e,o))!==null&&a!==void 0?a:{isRoot:!0};if(l)break;o+=1}return o-1}getLayersCount(){return Dn(Ua,this).getLayersCount()}getColumnsCount(){return Dn(Ua,this).getColumnsCount()}clear(){rv(Bd,this,[]),Dn(Ua,this).clear(),Dn($s,this).clear()}}function ov(n,e,t){return(e=uNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uNe(n){var e=dNe(n,"string");return typeof e=="symbol"?e:e+""}function dNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class fNe{constructor(e,t){ov(this,"hot",void 0),ov(this,"nestedHeaderSettingsGetter",void 0),ov(this,"layersCount",0),ov(this,"container",void 0),ov(this,"widthsMap",void 0),this.hot=e,this.nestedHeaderSettingsGetter=t,this.widthsMap=this.hot.columnIndexMapper.createAndRegisterIndexMap("nestedHeaders.widthsMap","physicalIndexToValue")}setLayersCount(e){return this.layersCount=e,this}getWidth(e){return this.widthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e))}buildWidthsMap(){this.container=this.hot.rootDocument.createElement("div"),this.container.classList.add("handsontable","htGhostTable","htAutoSize"),this._buildGhostTable(this.container),this.hot.rootDocument.body.appendChild(this.container);const e=this.container.querySelectorAll("tr:last-of-type th"),t=e.length;this.widthsMap.clear();for(let i=0;i<t;i++){const s=this.hot.columnIndexMapper.getVisualFromRenderableIndex(i),r=this.hot.toPhysicalColumn(s);this.widthsMap.setValueAtIndex(r,e[i].offsetWidth)}this.container.parentNode.removeChild(this.container),this.container=null}_buildGhostTable(e){const{rootDocument:t,columnIndexMapper:i}=this.hot,s=t.createDocumentFragment(),r=t.createElement("table"),o=!!this.hot.getSettings().dropdownMenu,a=i.getRenderableIndexesLength();for(let l=0;l<this.layersCount;l++){const c=t.createElement("tr");for(let h=0;h<a;h++){let u=i.getVisualFromRenderableIndex(h);u===null&&(u=h);const d=t.createElement("th"),f=this.nestedHeaderSettingsGetter(l,u);if(f&&(!f.isPlaceholder||f.isHidden)){let g=f.label;o&&(g+='<button class="changeType"></button>'),$u(d,g),d.colSpan=f.colspan,c.appendChild(d)}}r.appendChild(c)}s.appendChild(r),e.appendChild(s)}clear(){this.widthsMap.clear(),this.container=null}}function gNe(n,e){E9(n,e),e.add(n)}function x9(n,e,t){return(e=pNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pNe(n){var e=mNe(n,"string");return typeof e=="symbol"?e:e+""}function mNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function SR(n,e,t){E9(n,e),e.set(n,t)}function E9(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vd(n,e,t){return n.set(Nn(n,e),t),t}function yt(n,e){return n.get(Nn(n,e))}function Nn(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const T9="nestedHeaders",bNe=280;var Gt=new WeakMap,Ih=new WeakMap,av=new WeakMap,_R=new WeakMap,Yn=new WeakSet;class wNe extends Pt{constructor(){super(...arguments),gNe(this,Yn),SR(this,Gt,new hNe),SR(this,Ih,null),SR(this,av,null),SR(this,_R,!1),x9(this,"ghostTable",new fNe(this.hot,(e,t)=>this.getHeaderSettings(e,t))),x9(this,"detectedOverlappedHeaders",!1)}static get PLUGIN_KEY(){return T9}static get PLUGIN_PRIORITY(){return bNe}isEnabled(){return!!this.hot.getSettings()[T9]}enablePlugin(){var e=this;if(this.enabled)return;const{nestedHeaders:t}=this.hot.getSettings();(!Array.isArray(t)||!Array.isArray(t[0]))&&Vt(Ft`Your Nested Headers plugin configuration is invalid. The settings has to be\x20
                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]`),this.addHook("init",()=>Nn(Yn,this,HNe).call(this)),this.addHook("afterLoadData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,DNe).call(e,...s)}),this.addHook("beforeOnCellMouseDown",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,SNe).call(e,...s)}),this.addHook("afterOnCellMouseDown",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,_Ne).call(e,...s)}),this.addHook("beforeOnCellMouseOver",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,RNe).call(e,...s)}),this.addHook("beforeOnCellMouseUp",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,xNe).call(e,...s)}),this.addHook("beforeSelectionHighlightSet",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,ENe).call(e,...s)}),this.addHook("modifyTransformStart",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,TNe).call(e,...s)}),this.addHook("afterSelection",()=>Nn(Yn,this,RR).call(this)),this.addHook("afterSelectionFocusSet",()=>Nn(Yn,this,RR).call(this)),this.addHook("beforeViewportScrollHorizontally",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,vNe).call(e,...s)}),this.addHook("afterGetColumnHeaderRenderers",i=>Nn(Yn,this,ANe).call(this,i)),this.addHook("modifyColWidth",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,INe).call(e,...s)}),this.addHook("modifyColumnHeaderValue",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,ONe).call(e,...s)}),this.addHook("beforeHighlightingColumnHeader",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,yNe).call(e,...s)}),this.addHook("beforeCopy",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,CNe).call(e,...s)}),this.addHook("beforeSelectColumns",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,MNe).call(e,...s)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,PNe).call(e,...s)}),this.addHook("modifyFocusedElement",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Nn(Yn,e,kNe).call(e,...s)}),this.hot.columnIndexMapper.addLocalHook("cacheUpdated",()=>Nn(Yn,this,RR).call(this)),this.hot.rowIndexMapper.addLocalHook("cacheUpdated",()=>Nn(Yn,this,RR).call(this)),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(!this.hot.view)return;const{nestedHeaders:e}=this.hot.getSettings();yt(Gt,this).setColumnsLimit(this.hot.countCols()),Array.isArray(e)&&(this.detectedOverlappedHeaders=yt(Gt,this).setState(e)),this.detectedOverlappedHeaders&&Vt(Ft`Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\x20
                        is currently not supported.`),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach((t,i)=>{const s=t===!0?"hide-column":"show-column";yt(Gt,this).triggerColumnModification(s,i)}),!yt(Ih,this)&&this.enabled&&Vd(Ih,this,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe(t=>{t.forEach(i=>{let{op:s,index:r,newValue:o}=i;if(s==="replace"){const a=o===!0?"hide-column":"show-column";yt(Gt,this).triggerColumnModification(a,r)}}),this.ghostTable.buildWidthsMap()})),this.ghostTable.setLayersCount(this.getLayersCount()).buildWidthsMap(),super.updatePlugin()}disablePlugin(){this.clearColspans(),yt(Gt,this).clear(),yt(Ih,this).unsubscribe(),Vd(Ih,this,null),this.ghostTable.clear(),super.disablePlugin()}getStateManager(){return yt(Gt,this)}getLayersCount(){return yt(Gt,this).getLayersCount()}getHeaderSettings(e,t){return yt(Gt,this).getHeaderSettings(e,t)}clearColspans(){if(!this.hot.view)return;const{_wt:e}=this.hot.view,t=e.getSetting("columnHeaders").length,i=e.wtTable.THEAD,s=e.wtOverlays.topOverlay.clone.wtTable.THEAD,r=e.wtOverlays.topInlineStartCornerOverlay?e.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null;for(let o=0;o<t;o++){const a=i.childNodes[o];if(!a)break;const l=s.childNodes[o],c=r?r.childNodes[o]:null;for(let h=0,u=a.childNodes.length;h<u;h++)a.childNodes[h].removeAttribute("colspan"),Ue(a.childNodes[h],"hiddenHeader"),l&&l.childNodes[h]&&(l.childNodes[h].removeAttribute("colspan"),Ue(l.childNodes[h],"hiddenHeader")),r&&c&&c.childNodes[h]&&(c.childNodes[h].removeAttribute("colspan"),Ue(c.childNodes[h],"hiddenHeader"))}}headerRendererFactory(e){var t=this;const i=this.hot.view._wt.getSetting("fixedColumnsStart");return(s,r)=>{var o;const{columnIndexMapper:a,view:l}=this.hot;let c=a.getVisualFromRenderableIndex(s);c===null&&(c=s),r.removeAttribute("colspan"),Ue(r,"hiddenHeader");const{colspan:h,isHidden:u,isPlaceholder:d,headerClassNames:f}=(o=yt(Gt,this).getHeaderSettings(e,c))!==null&&o!==void 0?o:{label:""};if(d||u)ae(r,"hiddenHeader");else if(h>1){var g,p;const{wtOverlays:m}=l._wt,w=(g=m.topInlineStartCornerOverlay)===null||g===void 0?void 0:g.clone.wtTable.THEAD.contains(r),y=(p=m.inlineStartOverlay)===null||p===void 0?void 0:p.clone.wtTable.THEAD.contains(r),C=w||y?Math.min(h,i-s):h;C>1&&r.setAttribute("colspan",C)}if(this.hot.view.appendColHeader(c,r,function(){return t.getColumnHeaderValue(...arguments)},e),!d&&!u){const m=r.querySelector("div.relative");m&&f&&f.length>0&&(Ue(m,this.hot.getColumnMeta(c).headerClassName),ae(m,f))}}}getColumnHeaderValue(e,t){var i;const{isHidden:s,isPlaceholder:r}=(i=yt(Gt,this).getHeaderSettings(t,e))!==null&&i!==void 0?i:{};return r||s?"":this.hot.getColHeader(e,t)}destroy(){Vd(Gt,this,null),yt(Ih,this)!==null&&(yt(Ih,this).unsubscribe(),Vd(Ih,this,null)),super.destroy()}_getHeaderTreeNodeDataByCoords(e){if(!(e.row>=0||e.col<0))return yt(Gt,this).getHeaderTreeNodeData(e.row,e.col)}}function RR(){var n;const e=(n=this.hot)===null||n===void 0?void 0:n.getSelectedRangeLast();if(!e)return;const{highlight:t}=e;if(t.isHeader()&&t.col>=0){const s=yt(Gt,this).findLeftMostColumnIndex(t.row,t.col),r=this.hot.selection.highlight.getFocus();r.visualCellRange.highlight.col=s,r.visualCellRange.from.col=s,r.visualCellRange.to.col=s,r.commit()}}function vNe(n){const e=this.hot.getSelectedRangeLast();if(!e)return n;const{highlight:t}=e;if(!(t.isHeader()&&t.col>=0))return n;const s=this.hot.view.getFirstFullyVisibleColumn(),r=this.hot.view.getLastFullyVisibleColumn(),o=yt(Gt,this).findLeftMostColumnIndex(t.row,t.col),a=yt(Gt,this).findRightMostColumnIndex(t.row,t.col);return o<s&&a>r?n:o<s?o:a}function yNe(n,e,t){const i=yt(Gt,this).getHeaderTreeNodeData(e,n);if(!i)return n;const{columnCursor:s,selectionType:r,selectionWidth:o}=t,{isRoot:a,colspan:l}=yt(Gt,this).getHeaderSettings(e,n);if(r===rP){if(!a)return i.columnIndex}else if(r===M5&&(l>o-s||!a))return null;return n}function CNe(n,e,t){let{columnHeadersCount:i}=t;if(i!==0)for(let r=0;r<e.length;r++){const{startRow:o,startCol:a,endRow:l,endCol:c}=e[r],h=l-o+1,u=a-c+1;if(o>=0||u===1)break;for(let d=a;d<=c;d++)for(let f=o;f<=l;f++){var s;const g=h+f,p=d-a;if(p===0)continue;((s=yt(Gt,this).getHeaderTreeNodeData(f,d))===null||s===void 0?void 0:s.isRoot)===!1&&(n[g][p]="")}}}function SNe(n,e,t,i){this._getHeaderTreeNodeDataByCoords(e)&&(i.column=!0)}function _Ne(n,e){const t=this._getHeaderTreeNodeDataByCoords(e);if(!t)return;Vd(av,this,e.clone()),Vd(_R,this,!0);const{selection:i}=this.hot,s=i.isSelected()?i.getSelectedRange().current():null,r=[],{columnIndex:o,origColspan:a}=t,l=!i.inInSelection(e);n.shiftKey&&s?e.col<s.from.col?r.push(s.getTopEndCorner().col,o,e.row):e.col>s.from.col?r.push(s.getTopStartCorner().col,o+a-1,e.row):r.push(o,o+a-1,e.row):(CC(n)||Qc(n)&&l||P6(n))&&r.push(o,o+a-1,e.row),i.selectColumns(...r)}function RNe(n,e,t,i){if(!this.hot.view.isMouseDown())return;const s=this._getHeaderTreeNodeDataByCoords(e);if(!s)return;const{columnIndex:r,origColspan:o}=s,a=this.hot.getSelectedRangeLast(),l=a.getTopStartCorner(),c=a.getBottomEndCorner(),{from:h}=a;i.column=!0,i.cell=!0;const u=[],d=Wt(e.row,-1/0,-1);e.col<h.col?u.push(c.col,r,d):e.col>h.col?u.push(l.col,r+o-1,d):u.push(r,r+o-1,d),this.hot.selection.selectColumns(...u)}function xNe(){Vd(_R,this,!1)}function ENe(){const{navigableHeaders:n}=this.hot.getSettings();if(!this.hot.view.isMouseDown()||!yt(_R,this)||!n)return;const e=this.hot.getSelectedRangeLast(),t=e.getTopStartCorner().col,i=e.getBottomEndCorner().col,{columnIndex:s,origColspan:r}=yt(Gt,this).getHeaderTreeNodeData(yt(av,this).row,yt(av,this).col);if(e.setHighlight(yt(av,this)),r>e.getWidth()||s<t||s+r-1>i){const o=yt(Gt,this).findTopMostEntireHeaderLevel(Wt(t,s,s+r-1),Wt(i,s,s+r-1));e.highlight.row=o,e.highlight.col=e.from.col}}function TNe(n){const{highlight:e}=this.hot.getSelectedRangeLast(),t=this.hot._createCellCoords(e.row+n.row,e.col+n.col);if(!(t.isHeader()&&t.col>=0))return;const s=yt(Gt,this).findLeftMostColumnIndex(t.row,t.col),r=yt(Gt,this).findRightMostColumnIndex(t.row,t.col);if(n.col<0){const o=e.col>=s&&e.col<=r?s-1:r,a=this.hot.columnIndexMapper.getNearestNotHiddenIndex(o,-1);a===null?n.col=-this.hot.view.countRenderableColumnsInRange(0,e.col):n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(a,e.col)-1,1)}else if(n.col>0){const o=e.col>=s&&e.col<=r?r+1:s,a=this.hot.columnIndexMapper.getNearestNotHiddenIndex(o,1);a===null?n.col=this.hot.view.countRenderableColumnsInRange(e.col,this.hot.countCols()):n.col=Math.max(this.hot.view.countRenderableColumnsInRange(e.col,a)-1,1)}}function MNe(n,e){const t=n.row,i=this._getHeaderTreeNodeDataByCoords({row:t,col:n.col}),s=this._getHeaderTreeNodeDataByCoords({row:t,col:e.col});e.col<n.col?(i&&(n.col=i.columnIndex+i.origColspan-1),s&&(e.col=s.columnIndex)):e.col>=n.col&&(i&&(n.col=i.columnIndex),s&&(e.col=s.columnIndex+s.origColspan-1))}function ANe(n){n.length=0;for(let e=0;e<yt(Gt,this).getLayersCount();e++)n.push(this.headerRendererFactory(e))}function PNe(n){const e=yt(Gt,this).getLayersCount();let t=n.startColumn,i=!!e;for(let s=0;s<e;s++){const r=yt(Gt,this).findLeftMostColumnIndex(s,n.startColumn),o=this.hot.columnIndexMapper.getRenderableFromVisualIndex(r);if(r>=0&&(i=!1),Xi(o)&&o<n.startColumn){t=o;break}}n.startColumn=i?yt(Gt,this).getHeaderTreeNodeData(0,t).columnIndex:t}function INe(n,e){const t=this.ghostTable.getWidth(e);return n>t?n:t}function ONe(n,e,t){var i;const{label:s}=(i=yt(Gt,this).getHeaderTreeNodeData(t,e))!==null&&i!==void 0?i:{label:""};return s}function kNe(n,e){if(n<0)return this.hot.getCell(n,yt(Gt,this).findLeftMostColumnIndex(n,e),!0)}function HNe(){this.updatePlugin()}function DNe(n,e){e||this.updatePlugin()}function lv(n,e,t){return(e=NNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NNe(n){var e=LNe(n,"string");return typeof e=="symbol"?e:e+""}function LNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class $Ne{constructor(e,t){lv(this,"hot",void 0),lv(this,"data",null),lv(this,"plugin",void 0),lv(this,"parentReference",new WeakMap),lv(this,"cache",{levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}),this.hot=t,this.plugin=e}setData(e){this.data=e}getData(){return this.data}getRawSourceData(){let e=null;return this.plugin.disableCoreAPIModifiers(),e=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),e}updateWithData(e){this.setData(e),this.rewriteCache()}rewriteCache(){this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},Oe(0,this.data.length-1,e=>{this.cacheNode(this.data[e],0,null)})}cacheNode(e,t,i){this.cache.levels[t]||(this.cache.levels[t]=[],this.cache.levelCount+=1),this.cache.levels[t].push(e),this.cache.rows.push(e),this.cache.nodeInfo.set(e,{parent:i,row:this.cache.rows.length-1,level:t}),this.hasChildren(e)&&F(e.__children,s=>{this.cacheNode(s,t+1,e)})}getDataObject(e){return e==null?null:this.cache.rows[e]}readTreeNodes(e,t,i,s){let r=!1,o=t;if(isNaN(o)&&o.end)return o;let a=e;return a||(a={__children:this.data},r=!0,o-=1),i!=null&&o===i?{result:a,end:!0}:s!=null&&a===s?{result:o,end:!0}:(o+=1,a.__children&&F(a.__children,l=>{if(this.parentReference.set(l,r?null:a),o=this.readTreeNodes(l,o,i,s),isNaN(o)&&o.end)return!1}),o)}mockParent(){const e=this.mockNode();return e.__children=this.data,e}mockNode(){const e={};return et(this.data[0],(t,i)=>{e[i]=null}),e}getRowIndex(e){return e==null?null:this.cache.nodeInfo.get(e).row}getRowIndexWithinParent(e){let t=null;isNaN(e)?t=e:t=this.getDataObject(e);const i=this.getRowParent(e);return i==null?this.data.indexOf(t):i.__children.indexOf(t)}countAllRows(){const e={__children:this.data};return this.countChildren(e)}countChildren(e){let t=0,i=e;return isNaN(i)||(i=this.getDataObject(i)),!i||!i.__children?0:(F(i.__children,s=>{t+=1,s.__children&&(t+=this.countChildren(s))}),t)}getRowParent(e){let t;return isNaN(e)?t=e:t=this.getDataObject(e),this.getRowObjectParent(t)}getRowObjectParent(e){return!e||typeof e!="object"?null:this.cache.nodeInfo.get(e).parent}getRowLevel(e){let t=null;return isNaN(e)?t=e:t=this.getDataObject(e),t?this.getRowObjectLevel(t):null}getRowObjectLevel(e){return e==null?null:this.cache.nodeInfo.get(e).level}hasChildren(e){let t=e;return isNaN(t)||(t=this.getDataObject(t)),!!(t.__children&&t.__children.length)}isChild(e){return this.getRowParent(e)!==null}getChild(e,t){var i;return((i=e.__children)===null||i===void 0?void 0:i[t])||null}isRowHighestLevel(e){return!this.isChild(e)}isParent(e){var t;let i=e;return isNaN(i)||(i=this.getDataObject(i)),i&&!!i.__children&&((t=i.__children)===null||t===void 0?void 0:t.length)!==0}addChild(e,t){let i=t;this.hot.runHooks("beforeAddChild",e,i);let s=null;e&&(s=this.getRowIndex(e)),this.hot.runHooks("beforeCreateRow",s+this.countChildren(e)+1,1);let r=e;e||(r=this.mockParent()),r.__children||(r.__children=[]),i||(i=this.mockNode()),r.__children.push(i),this.rewriteCache();const o=this.getRowIndex(i);this.hot.rowIndexMapper.insertIndexes(o,1),this.hot.runHooks("afterCreateRow",o,1),this.hot.runHooks("afterAddChild",e,i)}addChildAtIndex(e,t,i){let s=i,r;if(s||(s=this.mockNode()),this.hot.runHooks("beforeAddChild",e,s,t),e){const a=this.getRowIndex(e)+t+1;this.hot.runHooks("beforeCreateRow",a,1),e.__children.splice(t,null,s),this.rewriteCache(),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(e),"__children",e.__children,"NestedRows.addChildAtIndex"),this.hot.rowIndexMapper.insertIndexes(a,1),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",a,1),r=a}else this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row_above",t,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),r=this.getRowIndex(this.data[t]);s=this.getDataObject(r),this.hot.runHooks("afterAddChild",e,s,t)}addSibling(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"below";const i=this.translateTrimmedRow(e),s=this.getRowParent(i),r=this.getRowIndexWithinParent(i);switch(t){case"below":this.addChildAtIndex(s,r+1,null);break;case"above":this.addChildAtIndex(s,r,null);break}}detachFromParent(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=null;const s=[];Array.isArray(e)?(Oe(e[0],e[2],d=>{const f=this.translateTrimmedRow(d);s.push(this.getDataObject(f))}),Oe(0,s.length-2,d=>{this.detachFromParent(s[d],!1)}),i=s[s.length-1]):i=e;const r=this.getRowIndex(i),o=this.countChildren(i),a=this.getRowIndexWithinParent(i),l=this.getRowParent(i),c=this.getRowParent(l),h=this.getRowIndex(c);let u=null;if(this.hot.runHooks("beforeDetachChild",l,i),a!=null){const d=Array.from(new Array(r+o+1).keys()).splice(-1*(o+1));if(this.hot.runHooks("beforeRemoveRow",r,o+1,d,this.plugin.pluginName),l.__children.splice(a,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",r,o+1,d,this.plugin.pluginName),c){u=h+this.countChildren(c);const f=this.getChild(c,this.countChildren(c)-1),g=this.getRowIndex(f);this.hot.runHooks("beforeCreateRow",g+1,o+1,this.plugin.pluginName),c.__children.push(i)}else u=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",u-2,o+1,this.plugin.pluginName),this.data.push(i)}this.rewriteCache(),this.hot.runHooks("afterCreateRow",u-2,o+1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",l,i,this.getRowIndex(i)),t&&this.hot.render()}filterData(e,t,i){const s=[];F(i,r=>{s.push(this.getDataObject(r))}),F(s,r=>{const o=this.getRowIndexWithinParent(r),a=this.getRowParent(r);a===null?this.data.splice(o,1):a.__children.splice(o,1)}),this.rewriteCache()}spliceData(e,t,i){const s=this.getDataObject(e-1);let r=null,o=e;s&&s.__children&&s.__children.length===0?(r=s,o=0):e<this.countAllRows()&&(r=this.getRowParent(e),o=this.getRowIndexWithinParent(e)),r?i?r.__children.splice(o,t,...i):r.__children.splice(o,t):i?this.data.splice(o,t,...i):this.data.splice(o,t),this.rewriteCache()}syncRowWithRawSource(e){let t=e,i=null;do i=this.getRowParent(i),i!==null&&(t=i);while(i!==null);this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(t),"__children",t.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}moveRow(e,t,i,s){const r=t===this.hot.countRows(),o=this.getRowParent(e),a=this.getRowIndexWithinParent(e),l=o.__children.slice(a,a+1),c=e>t;let h=r?this.getRowParent(t-1):this.getRowParent(t);h==null&&(h=this.getRowParent(t-1)),h==null&&(h=this.getDataObject(t-1)),h?h.__children||(h.__children=[]):(h=this.getDataObject(t),h.__children=[]);const u=r||i||s?h.__children.length:this.getRowIndexWithinParent(t),d=o===h;h.__children.splice(u,0,l[0]),o.__children.splice(a+(c&&d?1:0),1),this.syncRowWithRawSource(o),d||this.syncRowWithRawSource(h)}translateTrimmedRow(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(e):e}untranslateTrimmedRow(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(e):e}}function M9(n,e,t){return(e=FNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FNe(n){var e=BNe(n,"string");return typeof e=="symbol"?e:e+""}function BNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class AH{constructor(e,t){M9(this,"hot",void 0),M9(this,"plugin",void 0),this.hot=t,this.plugin=e}}class Ya extends AH{static get CSS_CLASSES(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}constructor(e,t){super(e,t),this.dataManager=this.plugin.dataManager,this.collapsingUI=this.plugin.collapsingUI,this.rowHeaderWidthCache=null}appendLevelIndicators(e,t){const i=this.hot.toPhysicalRow(e),s=this.dataManager.getRowLevel(i),r=this.dataManager.getDataObject(i),o=t.getElementsByTagName("DIV")[0],a=o.querySelector("span.rowHeader"),l=o.querySelectorAll('[class^="ht_nesting"]'),c=this.hot.getSettings().ariaTags;if(F(l,h=>{h&&o.removeChild(h)}),ae(t,Ya.CSS_CLASSES.indicatorContainer),s){const{rootDocument:h}=this.hot,u=a.cloneNode(!0);o.innerHTML="",Oe(0,s-1,()=>{const d=h.createElement("SPAN");ae(d,Ya.CSS_CLASSES.emptyIndicator),o.appendChild(d)}),o.appendChild(u)}if(this.dataManager.hasChildren(r)){const h=this.hot.rootDocument.createElement("DIV");c&&$e(h,[Du()]),ae(t,Ya.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(i)?(ae(h,`${Ya.CSS_CLASSES.button} ${Ya.CSS_CLASSES.expandButton}`),c&&$e(t,[Ar(!1)])):(ae(h,`${Ya.CSS_CLASSES.button} ${Ya.CSS_CLASSES.collapseButton}`),c&&$e(t,[Ar(!0)])),o.appendChild(h)}}updateRowHeaderWidth(e){let t=e;t||(t=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*t+25),this.hot.render()}}class VNe extends AH{constructor(e,t){var i;super(e,t),i=this,this.dataManager=this.plugin.dataManager,this.collapsedRows=[],this.collapsedRowsStash={stash:function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;i.lastCollapsedRows=i.collapsedRows.slice(0),i.expandMultipleChildren(i.lastCollapsedRows,s)},shiftStash:function(s,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;r==null&&(r=1/0),F(i.lastCollapsedRows,(a,l)=>{a>=s&&a<r&&(i.lastCollapsedRows[l]=a+o)})},applyStash:function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i.collapseMultipleChildren(i.lastCollapsedRows,s),i.lastCollapsedRows=void 0},trimStash:(s,r)=>{Oe(s,s+r-1,o=>{const a=this.lastCollapsedRows.indexOf(o);a>-1&&this.lastCollapsedRows.splice(a,1)})}}}collapseChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=[];let r=null,o=null,a=null;return isNaN(e)?(r=e,o=this.dataManager.getRowIndex(r)):(r=this.dataManager.getDataObject(e),o=e),this.dataManager.hasChildren(r)&&F(r.__children,l=>{s.push(this.dataManager.getRowIndex(l))}),a=this.collapseRows(s,!0,!1),i&&this.trimRows(a),t&&this.renderAndAdjust(),this.collapsedRows.indexOf(o)===-1&&this.collapsedRows.push(o),a}collapseMultipleChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=[];F(e,r=>{s.push(...this.collapseChildren(r,!1,!1))}),i&&this.trimRows(s),t&&this.renderAndAdjust()}collapseRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.collapseRows([e],t)}collapseRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=[];return F(e,r=>{s.push(r),t&&this.collapseChildRows(r,s)}),i&&this.trimRows(s),s}collapseChildRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(this.dataManager.hasChildren(e)){const s=this.dataManager.getDataObject(e);F(s.__children,r=>{const o=this.dataManager.getRowIndex(r);t.push(o),this.collapseChildRows(o,t)})}i&&this.trimRows(t)}expandRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.expandRows([e],t)}expandRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=[];return F(e,r=>{s.push(r),t&&this.expandChildRows(r,s)}),i&&this.untrimRows(s),s}expandChildRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(this.dataManager.hasChildren(e)){const s=this.dataManager.getDataObject(e);F(s.__children,r=>{if(!this.isAnyParentCollapsed(r)){const o=this.dataManager.getRowIndex(r);t.push(o),this.expandChildRows(o,t)}})}i&&this.untrimRows(t)}expandChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=[];let r=null,o=null,a=null;return isNaN(e)?(r=e,o=this.dataManager.getRowIndex(e)):(r=this.dataManager.getDataObject(e),o=e),this.collapsedRows.splice(this.collapsedRows.indexOf(o),1),this.dataManager.hasChildren(r)&&F(r.__children,l=>{const c=this.dataManager.getRowIndex(l);s.push(c)}),a=this.expandRows(s,!0,!1),i&&this.untrimRows(a),t&&this.renderAndAdjust(),a}expandMultipleChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=[];F(e,r=>{s.push(...this.expandChildren(r,!1,!1))}),i&&this.untrimRows(s),t&&this.renderAndAdjust()}collapseAll(){const e=this.dataManager.getData(),t=[];F(e,i=>{this.dataManager.hasChildren(i)&&t.push(i)}),this.collapseMultipleChildren(t),this.renderAndAdjust()}expandAll(){const e=this.dataManager.getData(),t=[];F(e,i=>{this.dataManager.hasChildren(i)&&t.push(i)}),this.expandMultipleChildren(t),this.renderAndAdjust()}trimRows(e){this.hot.batchExecution(()=>{F(e,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!0)})},!0)}untrimRows(e){this.hot.batchExecution(()=>{F(e,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!1)})},!0)}areChildrenCollapsed(e){let t=isNaN(e)?e:this.dataManager.getDataObject(e),i=!0;return t===null&&(t={__children:this.dataManager.data}),this.dataManager.hasChildren(t)&&F(t.__children,s=>{const r=this.dataManager.getRowIndex(s);if(!this.plugin.collapsedRowsMap.getValueAtIndex(r))return i=!1,!1}),i}isAnyParentCollapsed(e){let t=e;for(;t!==null;){t=this.dataManager.getRowParent(t);const i=this.dataManager.getRowIndex(t);if(this.collapsedRows.indexOf(i)>-1)return!0}return!1}toggleState(e,t){if(t.col>=0)return;const i=this.translateTrimmedRow(t.row);Fe(e.target,Ya.CSS_CLASSES.button)&&(this.areChildrenCollapsed(i)?this.expandChildren(i):this.collapseChildren(i),Or(e))}translateTrimmedRow(e){return this.hot.toPhysicalRow(e)}untranslateTrimmedRow(e){return this.hot.toVisualRow(e)}renderAndAdjust(){this.hot.render(),this.hot.view.adjustElementsSize()}}function WNe(n,e,t){jNe(n,e),e.set(n,t)}function jNe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zNe(n,e,t){return(e=UNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UNe(n){var e=YNe(n,"string");return typeof e=="symbol"?e:e+""}function YNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GNe(n,e){return n.get(KNe(n,e))}function KNe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var A9=new WeakMap;class qNe extends AH{constructor(){super(...arguments),zNe(this,"dataManager",this.plugin.dataManager),WNe(this,A9,{row_above:(e,t)=>{const i=t[t.length-1];this.dataManager.addSibling(i.start.row,"above")},row_below:(e,t)=>{const i=t[t.length-1];this.dataManager.addSibling(i.start.row,"below")}})}appendOptions(e){const t=[{key:"add_child",name(){return this.getTranslatedPhrase(uI)},callback:()=>{const i=this.dataManager.translateTrimmedRow(this.hot.getSelectedLast()[0]),s=this.dataManager.getDataObject(i);this.dataManager.addChild(s)},disabled:()=>{const i=this.hot.getSelectedLast();return!i||i[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{key:"detach_from_parent",name(){return this.getTranslatedPhrase(dI)},callback:()=>{this.dataManager.detachFromParent(this.hot.getSelectedLast())},disabled:()=>{const i=this.hot.getSelectedLast(),s=this.dataManager.translateTrimmedRow(i[0]);return!this.dataManager.getRowParent(s)||!i||i[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{name:"---------"}];return Oe(0,e.items.length-1,i=>{if(i===0)return F(t,(s,r)=>{e.items.splice(i+r,0,s)}),!1}),this.modifyRowInsertingOptions(e)}modifyRowInsertingOptions(e){return Oe(0,e.items.length-1,t=>{const i=GNe(A9,this)[e.items[t].key];i!=null&&(e.items[t].callback=i)}),e}}function xR(n,e,t){return(e=XNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XNe(n){var e=QNe(n,"string");return typeof e=="symbol"?e:e+""}function QNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ZNe{constructor(e){xR(this,"plugin",void 0),xR(this,"hot",void 0),xR(this,"dataManager",void 0),xR(this,"collapsingUI",void 0),this.plugin=e,this.hot=e.hot,this.dataManager=e.dataManager,this.collapsingUI=e.collapsingUI}onBeforeRowMove(e,t,i,s){if(this.displayAPICompatibilityWarning({rows:e,finalIndex:t,dropIndex:i,movePossible:s}))return!1;this.movedToCollapsed=!1;const o=i===this.hot.countRows(),a=o?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(i);let l=!0;const c=e.map(g=>{if(!l)return!1;const p=this.dataManager.translateTrimmedRow(g);return l=this.shouldAllowMoving(p,a),p}),h=c.indexOf(a)===-1;if(!l||!h)return!1;const u=this.getBaseParent(c),d=this.getTargetParent(o,a),f=u===d;return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(d),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(c,a,f),this.moveRows(c,a,d),this.dataManager.rewriteCache(),this.moveCellsMeta(c,a),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",e,t,i,s,s&&this.isRowOrderChanged(e,t)),this.hot.render(),this.selectCells(e,i),!1}displayAPICompatibilityWarning(e){const{rows:t,finalIndex:i,dropIndex:s,movePossible:r}=e;let o=!1;return nn(s)&&(Vt(Ft`Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\x20
      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead.`),this.hot.runHooks("afterRowMove",t,i,s,r,!1),o=!0),o}shouldAllowMoving(e,t){return!(this.dataManager.isParent(e)||this.dataManager.isRowHighestLevel(e)||e===t||t===0)}getBaseParent(e){return this.dataManager.getRowParent(e[0])}getTargetParent(e,t){let i=this.dataManager.getRowParent(e?t-1:t);return i==null&&(i=this.dataManager.getRowParent(t-1)),i}shiftCollapsibleParentsLocations(e,t,i){i||(Math.max(...e)<=t?this.collapsingUI.collapsedRowsStash.shiftStash(e[0],t,-1*e.length):this.collapsingUI.collapsedRowsStash.shiftStash(t,e[0],e.length))}moveRows(e,t,i){const s=t===this.dataManager.getRowIndex(i)+this.dataManager.countChildren(i)+1;this.hot.batchRender(()=>{e.forEach(r=>{this.dataManager.moveRow(r,t,this.movedToCollapsed,s)})})}moveCellsMeta(e,t){const i=[],s=Math.max(...e)<t;e.forEach(r=>{i.push(this.hot.getCellMetaAtRow(r))}),this.hot.spliceCellsMeta(e[0],e.length),this.hot.spliceCellsMeta(t-(s?i.length:0),0,...i)}selectCells(e,t){const i=e.length;let s=0,r=0,o=null,a=null;if(this.movedToCollapsed){let l=null;e[i-1]<t?l=this.dataManager.translateTrimmedRow(t-i):l=this.dataManager.translateTrimmedRow(t);const c=this.dataManager.getRowParent(l===null?this.hot.countSourceRows()-1:l-1),h=this.dataManager.getRowIndex(c);s=this.dataManager.untranslateTrimmedRow(h),r=s}else e[i-1]<t?(r=t-1,s=r-i+1):(s=t,r=s+i-1);o=this.hot.selection,a=this.hot.countCols()-1,o.setRangeStart(this.hot._createCellCoords(s,0)),o.setRangeEnd(this.hot._createCellCoords(r,a),!0)}isRowOrderChanged(e,t){return e.some((i,s)=>i-s!==t)}}function JNe(n,e){I9(n,e),e.add(n)}function P9(n,e,t){I9(n,e),e.set(n,t)}function I9(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function PH(n,e,t){return(e=eLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eLe(n){var e=tLe(n,"string");return typeof e=="symbol"?e:e+""}function tLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ER(n,e){return n.get(pi(n,e))}function TR(n,e,t){return n.set(pi(n,e),t),t}function pi(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const MR="nestedRows",nLe=300,O9=MR,iLe="The Nested Rows plugin requires an Array of Objects as a dataset to be provided. The plugin has been disabled.";var AR=new WeakMap,op=new WeakMap,Mi=new WeakSet;class sLe extends Pt{constructor(){super(...arguments),JNe(this,Mi),PH(this,"dataManager",null),PH(this,"headersUI",null),PH(this,"collapsedRowsMap",null),P9(this,AR,!1),P9(this,op,!1)}static get PLUGIN_KEY(){return MR}static get PLUGIN_PRIORITY(){return nLe}isEnabled(){return!!this.hot.getSettings()[MR]}enablePlugin(){var e=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new Fb),this.dataManager=new $Ne(this,this.hot),this.collapsingUI=new VNe(this,this.hot),this.headersUI=new Ya(this,this.hot),this.contextMenuUI=new qNe(this,this.hot),this.rowMoveController=new ZNe(this),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,wLe).call(e,...i)}),this.addHook("beforeViewRender",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,vLe).call(e,...i)}),this.addHook("modifyRowData",function(){return e.onModifyRowData(...arguments)}),this.addHook("modifySourceLength",function(){return e.onModifySourceLength(...arguments)}),this.addHook("beforeDataSplice",function(){return e.onBeforeDataSplice(...arguments)}),this.addHook("filterData",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,aLe).call(e,...i)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,lLe).call(e,...i)}),this.addHook("afterGetRowHeader",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,cLe).call(e,...i)}),this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,oLe).call(e,...i)}),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,dLe).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,uLe).call(e,...i)}),this.addHook("beforeAddChild",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,fLe).call(e,...i)}),this.addHook("afterAddChild",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,gLe).call(e,...i)}),this.addHook("beforeDetachChild",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,pLe).call(e,...i)}),this.addHook("afterDetachChild",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,mLe).call(e,...i)}),this.addHook("modifyRowHeaderWidth",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,hLe).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,bLe).call(e,...i)}),this.addHook("beforeRowMove",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return pi(Mi,e,rLe).call(e,...i)}),this.addHook("beforeLoadData",t=>pi(Mi,this,k9).call(this,t)),this.addHook("beforeUpdateData",t=>pi(Mi,this,k9).call(this,t)),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),this.unregisterShortcuts(),super.disablePlugin()}updatePlugin(){this.disablePlugin();const e=this.dataManager.getData();this.enablePlugin(),this.dataManager.updateWithData(e),super.updatePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast(),t=this.collapsingUI.translateTrimmedRow(e.row);return this.collapsingUI.areChildrenCollapsed(t)?this.collapsingUI.expandChildren(t):this.collapsingUI.collapseChildren(t),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.col===-1&&i.row>=0},group:O9,relativeToGroup:ih,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(O9)}disableCoreAPIModifiers(){TR(op,this,!0)}enableCoreAPIModifiers(){TR(op,this,!1)}onModifyRowData(e){if(!ER(op,this))return this.dataManager.getDataObject(e)}onModifySourceLength(){if(!ER(op,this))return this.dataManager.countAllRows()}onBeforeDataSplice(e,t,i){return ER(op,this)||this.dataManager.isRowHighestLevel(e)?!0:(this.dataManager.spliceData(e,t,i),!1)}destroy(){super.destroy()}}function rLe(n,e,t,i){return this.rowMoveController.onBeforeRowMove(n,e,t,i)}function oLe(n,e,t){this.collapsingUI.toggleState(n,e,t)}function aLe(n,e,t){return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(t[0],e),this.collapsingUI.collapsedRowsStash.shiftStash(t[0],null,-1*e),this.dataManager.filterData(n,e,t),TR(AR,this,!0),this.dataManager.getData().slice()}function lLe(n){return this.contextMenuUI.appendOptions(n)}function cLe(n,e){this.headersUI.appendLevelIndicators(n,e)}function hLe(n){return Math.max(this.headersUI.rowHeaderWidthCache,n)}function uLe(n,e,t,i){i!==this.pluginName&&this.hot._registerTimeout(()=>{TR(AR,this,!1),this.headersUI.updateRowHeaderWidth(),this.collapsingUI.collapsedRowsStash.applyStash()})}function dLe(n,e,t){const i=Array.from(t.reduce((s,r)=>{if(this.dataManager.isParent(r)){const o=this.dataManager.getDataObject(r).__children;return s.add(r),Array.isArray(o)&&o.forEach(a=>s.add(this.dataManager.getRowIndex(a))),s}return s.add(r)},new Set));t.length=0,t.push(...i)}function fLe(){this.collapsingUI.collapsedRowsStash.stash()}function gLe(n,e){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(e)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function pLe(){this.collapsingUI.collapsedRowsStash.stash()}function mLe(n,e,t){this.collapsingUI.collapsedRowsStash.shiftStash(t,null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function bLe(){this.dataManager.rewriteCache()}function wLe(){this.headersUI.updateRowHeaderWidth()}function vLe(n,e){ER(AR,this)&&(e.skipRender=!0)}function k9(n){if(!Y5(n)){xA(iLe),this.hot.getSettings()[MR]=!1,this.disablePlugin();return}this.dataManager.setData(n),this.dataManager.rewriteCache()}function IH(n,e,t){return(e=yLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yLe(n){var e=CLe(n,"string");return typeof e=="symbol"?e:e+""}function CLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class SLe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;IH(this,"rootWindow",void 0),IH(this,"prefix",void 0),IH(this,"savedKeys",[]),this.rootWindow=t,this.prefix=e,this.loadSavedKeys()}saveValue(e,t){this.rootWindow.localStorage.setItem(`${this.prefix}_${e}`,JSON.stringify(t)),this.savedKeys.indexOf(e)===-1&&(this.savedKeys.push(e),this.saveSavedKeys())}loadValue(e,t){const i=typeof e>"u"?t:e,s=this.rootWindow.localStorage.getItem(`${this.prefix}_${i}`);return s===null?void 0:JSON.parse(s)}reset(e){this.rootWindow.localStorage.removeItem(`${this.prefix}_${e}`)}resetAll(){F(this.savedKeys,(e,t)=>{this.rootWindow.localStorage.removeItem(`${this.prefix}_${this.savedKeys[t]}`)}),this.clearSavedKeys()}loadSavedKeys(){const e=this.rootWindow.localStorage.getItem(`${this.prefix}__persistentStateKeys`),t=typeof e=="string"?JSON.parse(e):void 0;this.savedKeys=t||[]}saveSavedKeys(){this.rootWindow.localStorage.setItem(`${this.prefix}__persistentStateKeys`,JSON.stringify(this.savedKeys))}clearSavedKeys(){this.savedKeys.length=0,this.saveSavedKeys()}}function _Le(n,e,t){return(e=RLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RLe(n){var e=xLe(n,"string");return typeof e=="symbol"?e:e+""}function xLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}xe.getSingleton().register("persistentStateSave"),xe.getSingleton().register("persistentStateLoad"),xe.getSingleton().register("persistentStateReset");const H9="persistentState",ELe=0;class TLe extends Pt{constructor(){super(...arguments),_Le(this,"storage",void 0)}static get PLUGIN_KEY(){return H9}static get PLUGIN_PRIORITY(){return ELe}isEnabled(){return!!this.hot.getSettings()[H9]}enablePlugin(){this.enabled||(this.storage||(this.storage=new SLe(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",(e,t)=>this.saveValue(e,t)),this.addHook("persistentStateLoad",(e,t)=>this.loadValue(e,t)),this.addHook("persistentStateReset",()=>this.resetValue()),super.enablePlugin())}disablePlugin(){this.storage=void 0,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}loadValue(e,t){t.value=this.storage.loadValue(e)}saveValue(e,t){this.storage.saveValue(e,t)}resetValue(e){typeof e>"u"?this.storage.resetAll():this.storage.reset(e)}destroy(){super.destroy()}}function MLe(n,e){ALe(n,e),e.add(n)}function ALe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function OH(n,e,t){return(e=PLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PLe(n){var e=ILe(n,"string");return typeof e=="symbol"?e:e+""}function ILe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function D9(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const kH="search",OLe=190,kLe="htSearchResult",HLe=function(n,e,t,i,s){n.getCellMeta(e,t).isSearchResult=s},DLe=function(n,e,t){return nn(n)||n===null||!n.toLocaleLowerCase||n.length===0||nn(e)||e===null?!1:e.toString().toLocaleLowerCase(t.locale).indexOf(n.toLocaleLowerCase(t.locale))!==-1};var HH=new WeakSet;class NLe extends Pt{constructor(){super(...arguments),MLe(this,HH),OH(this,"callback",HLe),OH(this,"queryMethod",DLe),OH(this,"searchResultClass",kLe)}static get PLUGIN_KEY(){return kH}static get PLUGIN_PRIORITY(){return OLe}isEnabled(){return this.hot.getSettings()[kH]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[kH];this.updatePluginSettings(t),this.addHook("beforeRenderer",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return D9(HH,e,N9).call(e,...s)}),super.enablePlugin()}disablePlugin(){var e=this;const t=function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return D9(HH,e,N9).call(e,...s)};this.hot.addHook("beforeRenderer",t),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("beforeRenderer",t)}),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}query(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getCallback(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getQueryMethod();const s=this.hot.countRows(),r=this.hot.countCols(),o=[],a=this.hot;return Oe(0,s-1,l=>{Oe(0,r-1,c=>{const h=this.hot.getDataAtCell(l,c),u=this.hot.getCellMeta(l,c),d=u.search.callback||t,g=(u.search.queryMethod||i)(e,h,u);if(g){const p={row:l,col:c,data:h};o.push(p)}d&&d(a,l,c,h,g)})}),o}getCallback(){return this.callback}setCallback(e){this.callback=e}getQueryMethod(){return this.queryMethod}setQueryMethod(e){this.queryMethod=e}getSearchResultClass(){return this.searchResultClass}setSearchResultClass(e){this.searchResultClass=e}updatePluginSettings(e){Je(e)&&(e.searchResultClass&&this.setSearchResultClass(e.searchResultClass),e.queryMethod&&this.setQueryMethod(e.queryMethod),e.callback&&this.setCallback(e.callback))}destroy(){super.destroy()}}function N9(n,e,t,i,s,r){const o=r.className||[];let a=[];typeof o=="string"?a=o.split(" "):a.push(...o),this.isEnabled()&&r.isSearchResult?a.includes(this.searchResultClass)||a.push(`${this.searchResultClass}`):a.includes(this.searchResultClass)&&a.splice(a.indexOf(this.searchResultClass),1),r.className=a.join(" ")}function LLe(n,e){$Le(n,e),e.add(n)}function $Le(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function PR(n,e,t){return(e=FLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FLe(n){var e=BLe(n,"string");return typeof e=="symbol"?e:e+""}function BLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DH(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const VLe="touchScroll",WLe=200;var IR=new WeakSet;class jLe extends Pt{constructor(){super(...arguments),LLe(this,IR),PR(this,"scrollbars",[]),PR(this,"clones",[]),PR(this,"lockedCollection",!1),PR(this,"freezeOverlays",!1)}static get PLUGIN_KEY(){return VLe}static get PLUGIN_PRIORITY(){return WLe}static get SETTING_KEYS(){return!0}isEnabled(){return dA()}enablePlugin(){this.enabled||(this.addHook("afterViewRender",()=>DH(IR,this,zLe).call(this)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.lockedCollection=!1,super.updatePlugin()}disablePlugin(){super.disablePlugin()}registerEvents(){this.addHook("beforeTouchScroll",()=>DH(IR,this,ULe).call(this)),this.addHook("afterMomentumScroll",()=>DH(IR,this,YLe).call(this))}}function zLe(){if(this.lockedCollection)return;const{topOverlay:n,bottomOverlay:e,inlineStartOverlay:t,topInlineStartCornerOverlay:i,bottomInlineStartCornerOverlay:s}=this.hot.view._wt.wtOverlays;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(n),e.clone&&this.scrollbars.push(e),this.scrollbars.push(t),i&&this.scrollbars.push(i),s&&s.clone&&this.scrollbars.push(s),this.clones=[],n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),t.needFullRender&&this.clones.push(t.clone.wtTable.holder.parentNode),i&&this.clones.push(i.clone.wtTable.holder.parentNode),s&&s.clone&&this.clones.push(s.clone.wtTable.holder.parentNode)}function ULe(){this.freezeOverlays=!0,F(this.clones,n=>{ae(n,"hide-tween")})}function YLe(){this.freezeOverlays=!1,F(this.clones,n=>{Ue(n,"hide-tween"),ae(n,"show-tween")}),this.hot._registerTimeout(()=>{F(this.clones,n=>{Ue(n,"show-tween")})},400),F(this.scrollbars,n=>{n.refresh(),n.resetFixedPosition()}),this.hot.view._wt.wtOverlays.syncScrollWithMaster()}function GLe(n,e){KLe(n,e),e.add(n)}function KLe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qLe(n,e,t){return(e=XLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XLe(n){var e=QLe(n,"string");return typeof e=="symbol"?e:e+""}function QLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ZLe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const OR="trimRows",JLe=330;var L9=new WeakSet;class e$e extends Pt{constructor(){super(...arguments),GLe(this,L9),qLe(this,"trimmedRowsMap",null)}static get PLUGIN_KEY(){return OR}static get PLUGIN_PRIORITY(){return JLe}isEnabled(){return!!this.hot.getSettings()[OR]}enablePlugin(){this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new Fb),this.trimmedRowsMap.addLocalHook("init",()=>ZLe(L9,this,t$e).call(this)),super.enablePlugin())}updatePlugin(){const e=this.hot.getSettings()[OR];Array.isArray(e)&&this.hot.batchExecution(()=>{this.trimmedRowsMap.clear(),F(e,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("trimRows"),super.disablePlugin()}getTrimmedRows(){return this.trimmedRowsMap.getTrimmedIndexes()}trimRows(e){const t=this.getTrimmedRows(),i=this.isValidConfig(e);let s=t;i&&(s=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeTrimRow",t,s,i)!==!1&&(i&&this.hot.batchExecution(()=>{F(e,o=>{this.trimmedRowsMap.setValueAtIndex(o,!0)})},!0),this.hot.runHooks("afterTrimRow",t,s,i,i&&s.length>t.length))}trimRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.trimRows(t)}untrimRows(e){const t=this.getTrimmedRows(),i=this.isValidConfig(e);let s=t;const r=this.trimmedRowsMap.getValues().slice(),o=e.length>0;i&&o&&(F(e,l=>{r[l]=!1}),s=Qn(r,(l,c,h)=>(c&&l.push(h),l),[])),this.hot.runHooks("beforeUntrimRow",t,s,i&&o)!==!1&&(i&&o&&this.trimmedRowsMap.setValues(r),this.hot.runHooks("afterUntrimRow",t,s,i&&o,i&&s.length<t.length))}untrimRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.untrimRows(t)}isTrimmed(e){return this.trimmedRowsMap.getValueAtIndex(e)||!1}untrimAll(){this.untrimRows(this.getTrimmedRows())}isValidConfig(e){const t=this.hot.countSourceRows();return e.every(i=>Number.isInteger(i)&&i>=0&&i<t)}destroy(){super.destroy()}}function t$e(){const n=this.hot.getSettings()[OR];Array.isArray(n)&&this.hot.batchExecution(()=>{F(n,e=>{this.trimmedRowsMap.setValueAtIndex(e,!0)})},!0)}var $9={},n$e=Fc,i$e=$9,s$e=n$e("iterator"),r$e=Array.prototype,o$e=function(n){return n!==void 0&&(i$e.Array===n||r$e[s$e]===n)},a$e=E3,F9=y0,l$e=g0,c$e=$9,h$e=Fc,u$e=h$e("iterator"),B9=function(n){if(!l$e(n))return F9(n,u$e)||F9(n,"@@iterator")||c$e[a$e(n)]},d$e=ho,f$e=Om,g$e=_l,p$e=v0,m$e=B9,b$e=TypeError,w$e=function(n,e){var t=arguments.length<2?m$e(n):e;if(f$e(t))return g$e(d$e(t,n));throw new b$e(p$e(n)+" is not iterable")},v$e=iW,y$e=ho,C$e=_l,S$e=v0,_$e=o$e,R$e=Lm,V9=m0,x$e=w$e,E$e=B9,W9=zT,T$e=TypeError,kR=function(n,e){this.stopped=n,this.result=e},j9=kR.prototype,M$e=function(n,e,t){var i=t&&t.that,s=!!(t&&t.AS_ENTRIES),r=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=v$e(e,i),c,h,u,d,f,g,p,m=function(y){return c&&W9(c,"normal",y),new kR(!0,y)},w=function(y){return s?(C$e(y),a?l(y[0],y[1],m):l(y[0],y[1])):a?l(y,m):l(y)};if(r)c=n.iterator;else if(o)c=n;else{if(h=E$e(n),!h)throw new T$e(S$e(n)+" is not iterable");if(_$e(h)){for(u=0,d=R$e(n);d>u;u++)if(f=w(n[u]),f&&V9(j9,f))return f;return new kR(!1)}c=x$e(n,h)}for(g=r?n.next:c.next;!(p=y$e(g,c)).done;){try{f=w(p.value)}catch(y){W9(c,"throw",y)}if(typeof f=="object"&&f&&V9(j9,f))return f}return new kR(!1)},A$e=co,P$e=Bc,I$e=f0,O$e=function(n,e,t){A$e?P$e.f(n,e,I$e(0,t)):n[e]=t},k$e=ki,H$e=M$e,D$e=O$e;k$e({target:"Object",stat:!0},{fromEntries:function(e){var t={};return H$e(e,function(i,s){D$e(t,i,s)},{AS_ENTRIES:!0}),t}});const z9="undoRedo",N$e="undoRedo";function me(n){const e=this;this.instance=n,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,n.addHook("afterChange",function(i,s){const r=i&&i.length;if(!r||!i.find(l=>{const[,,c,h]=l;return c!==h}))return;const a=()=>{const l=i.reduce((h,u)=>(h.push([...u]),h),[]);F(l,h=>{h[1]=n.propToCol(h[1])});const c=r>1?this.getSelected():[[l[0][0],l[0][1]]];return new me.ChangeAction(l,c)};e.done(a,s)}),n.addHook("afterCreateRow",(i,s,r)=>{e.done(()=>new me.CreateRowAction(i,s),r)});const t=(i,s,r,o)=>{const a=["visualRow","visualCol","row","col","prop"],l=a.length,c=[];return Oe(r,o,h=>{Oe(i,s,u=>{const d=n.getCellMeta(u,h);if(Object.keys(d).length!==l){const f=Object.fromEntries(Object.entries(d).filter(g=>{let[p]=g;return a.includes(p)===!1}));c.push([d.visualRow,d.visualCol,f])}})}),c};n.addHook("beforeRemoveRow",(i,s,r,o)=>{const a=()=>{const l=n.toPhysicalRow(i),c=l+s-1,h=qi(e.instance.getSourceData(l,0,l+s-1,e.instance.countSourceCols()-1));return new me.RemoveRowAction(l,h,n.getSettings().fixedRowsBottom,n.getSettings().fixedRowsTop,n.rowIndexMapper.getIndexesSequence(),t(l,c,0,n.countCols()-1))};e.done(a,o)}),n.addHook("afterCreateCol",(i,s,r)=>{e.done(()=>new me.CreateColumnAction(i,s),r)}),n.addHook("beforeRemoveCol",(i,s,r,o)=>{const a=()=>{const l=e.instance.getSourceDataArray(),c=(e.instance.countCols()+i)%e.instance.countCols(),h=c+s-1,u=[],d=[],f=[];Oe(l.length-1,m=>{const w=[],y=l[m];Oe(c,h,C=>{w.push(y[n.toPhysicalColumn(C)])}),u.push(w)}),Oe(s-1,m=>{f.push(n.toPhysicalColumn(c+m))}),Array.isArray(n.getSettings().colHeaders)&&Oe(s-1,m=>{d.push(n.getSettings().colHeaders[n.toPhysicalColumn(c+m)]||null)});const g=n.columnIndexMapper.getIndexesSequence(),p=n.rowIndexMapper.getIndexesSequence();return new me.RemoveColumnAction(c,f,u,d,g,p,n.getSettings().fixedColumnsStart,t(0,n.countRows(),c,h))};e.done(a,o)}),n.addHook("beforeCellAlignment",(i,s,r,o)=>{e.done(()=>new me.CellAlignmentAction(i,s,r,o))}),n.addHook("beforeFilter",(i,s)=>{e.done(()=>new me.FiltersAction(i,s))}),n.addHook("beforeRowMove",(i,s)=>{i!==!1&&e.done(()=>new me.RowMoveAction(i,s))}),n.addHook("beforeColumnMove",(i,s)=>{i!==!1&&e.done(()=>new me.ColumnMoveAction(i,s))}),n.addHook("beforeMergeCells",(i,s)=>{s||e.done(()=>new me.MergeCellsAction(n,i))}),n.addHook("afterUnmergeCells",(i,s)=>{s||e.done(()=>new me.UnmergeCellsAction(n,i))}),n.addHook("beforeColumnSort",(i,s,r)=>{r&&e.done(()=>new me.ColumnSortAction(i,s))}),n.addHook("afterInit",()=>{e.init()})}me.prototype.done=function(n,e){if(this.ignoreNewActions||e==="UndoRedo.undo"||e==="UndoRedo.redo"||e==="auto")return;const i=this.doneActions.slice();if(this.instance.runHooks("beforeUndoStackChange",i,e)===!1)return;const r=n(),o=this.undoneActions.slice();this.doneActions.push(r),this.instance.runHooks("afterUndoStackChange",i,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",o),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",o,this.undoneActions.slice())},me.prototype.undo=function(){if(this.isUndoAvailable()){const n=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",n);const e=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",n,this.doneActions.slice());const t=qi(e);if(this.instance.runHooks("beforeUndo",t)===!1)return;this.ignoreNewActions=!0;const s=this,r=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",r),e.undo(this.instance,()=>{s.ignoreNewActions=!1,s.undoneActions.push(e)}),this.instance.runHooks("afterRedoStackChange",r,this.undoneActions.slice()),this.instance.runHooks("afterUndo",t)}},me.prototype.redo=function(){if(this.isRedoAvailable()){const n=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",n);const e=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",n,this.undoneActions.slice());const t=qi(e);if(this.instance.runHooks("beforeRedo",t)===!1)return;this.ignoreNewActions=!0;const s=this,r=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",r),e.redo(this.instance,()=>{s.ignoreNewActions=!1,s.doneActions.push(e)}),this.instance.runHooks("afterUndoStackChange",r,this.doneActions.slice()),this.instance.runHooks("afterRedo",t)}},me.prototype.isUndoAvailable=function(){return this.doneActions.length>0},me.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},me.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},me.prototype.isEnabled=function(){return this.enabled},me.prototype.enable=function(){if(this.isEnabled())return;const n=this.instance;this.enabled=!0,F$e(n),this.registerShortcuts(),n.addHook("afterChange",U9)},me.prototype.disable=function(){if(!this.isEnabled())return;const n=this.instance;this.enabled=!1,B$e(n),this.unregisterShortcuts(),n.removeHook("afterChange",U9)},me.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null},me.Action=function(){},me.Action.prototype.undo=function(){},me.Action.prototype.redo=function(){},me.ChangeAction=function(n,e){this.changes=n,this.selected=e,this.actionType="change"},yo(me.ChangeAction,me.Action),me.ChangeAction.prototype.undo=function(n,e){const t=qi(this.changes),i=n.countEmptyRows(!0),s=n.countEmptyCols(!0);for(let o=0,a=t.length;o<a;o++)t[o].splice(3,1);n.addHookOnce("afterChange",e),n.setDataAtCell(t,null,null,"UndoRedo.undo");for(let o=0,a=t.length;o<a;o++){const[l,c]=t[o];n.getSettings().minSpareRows&&l+1+n.getSettings().minSpareRows===n.countRows()&&i===n.getSettings().minSpareRows&&(n.alter("remove_row",parseInt(l+1,10),n.getSettings().minSpareRows),n.undoRedo.doneActions.pop()),n.getSettings().minSpareCols&&c+1+n.getSettings().minSpareCols===n.countCols()&&s===n.getSettings().minSpareCols&&(n.alter("remove_col",parseInt(c+1,10),n.getSettings().minSpareCols),n.undoRedo.doneActions.pop())}const r=n.getSelectedLast();if(r!==void 0){const[o,a]=t[0],[l,c]=r,h=n.view.getFirstFullyVisibleRow(),u=n.view.getFirstFullyVisibleColumn(),d=o>=h,f=a>=u;if((d&&f)===!1&&(l!==o||c!==a)===!0){const m={row:o,col:a};d===!1&&(m.verticalSnap="top"),f===!1&&(m.horizontalSnap="start"),n.scrollViewportTo(m)}}n.selectCells(this.selected,!1,!1)},me.ChangeAction.prototype.redo=function(n,e){const t=qi(this.changes);for(let i=0,s=t.length;i<s;i++)t[i].splice(2,1);n.addHookOnce("afterChange",e),n.setDataAtCell(t,null,null,"UndoRedo.redo"),this.selected&&n.selectCells(this.selected,!1,!1)},me.CreateRowAction=function(n,e){this.index=n,this.amount=e,this.actionType="insert_row"},yo(me.CreateRowAction,me.Action),me.CreateRowAction.prototype.undo=function(n,e){const t=n.countRows(),i=n.getSettings().minSpareRows;this.index>=t&&this.index-i<t&&(this.index-=i),n.addHookOnce("afterRemoveRow",e),n.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},me.CreateRowAction.prototype.redo=function(n,e){n.addHookOnce("afterCreateRow",e),n.alter("insert_row_above",this.index,this.amount,"UndoRedo.redo")},me.RemoveRowAction=function(n,e,t,i,s,r){this.index=n,this.data=e,this.actionType="remove_row",this.fixedRowsBottom=t,this.fixedRowsTop=i,this.rowIndexesSequence=s,this.removedCellMetas=r},yo(me.RemoveRowAction,me.Action),me.RemoveRowAction.prototype.undo=function(n,e){const t=n.getSettings(),i=[];t.fixedRowsBottom=this.fixedRowsBottom,t.fixedRowsTop=this.fixedRowsTop,this.data.forEach((s,r)=>{Object.keys(s).forEach(o=>{const a=parseInt(o,10);i.push([this.index+r,isNaN(a)?o:a,s[o]])})}),n.alter("insert_row_above",this.index,this.data.length,"UndoRedo.undo"),this.removedCellMetas.forEach(s=>{let[r,o,a]=s;n.setCellMetaObject(r,o,a)}),n.addHookOnce("afterViewRender",e),n.setSourceDataAtCell(i,null,null,"UndoRedo.undo"),n.rowIndexMapper.setIndexesSequence(this.rowIndexesSequence)},me.RemoveRowAction.prototype.redo=function(n,e){n.addHookOnce("afterRemoveRow",e),n.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},me.CreateColumnAction=function(n,e){this.index=n,this.amount=e,this.actionType="insert_col"},yo(me.CreateColumnAction,me.Action),me.CreateColumnAction.prototype.undo=function(n,e){n.addHookOnce("afterRemoveCol",e),n.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},me.CreateColumnAction.prototype.redo=function(n,e){n.addHookOnce("afterCreateCol",e),n.alter("insert_col_start",this.index,this.amount,"UndoRedo.redo")},me.RemoveColumnAction=function(n,e,t,i,s,r,o,a){this.index=n,this.indexes=e,this.data=t,this.amount=this.data[0].length,this.headers=i,this.columnPositions=s.slice(0),this.rowPositions=r.slice(0),this.actionType="remove_col",this.fixedColumnsStart=o,this.removedCellMetas=a},yo(me.RemoveColumnAction,me.Action),me.RemoveColumnAction.prototype.undo=function(n,e){const t=n.getSettings();t.fixedColumnsStart=this.fixedColumnsStart;const i=this.indexes.slice(0).sort(),s=(c,h,u)=>u[this.indexes.indexOf(i[h])],r=this.data.length,o=[];for(let c=0;c<r;c++)o.push(ct(this.data[c],s));const a=ct(this.headers,s),l=[];n.alter("insert_col_start",this.indexes[0],this.indexes.length,"UndoRedo.undo"),F(n.getSourceDataArray(),(c,h)=>{F(i,(u,d)=>{c[u]=o[h][d],l.push([h,u,c[u]])})}),n.setSourceDataAtCell(l,void 0,void 0,"UndoRedo.undo"),typeof this.headers<"u"&&F(a,(c,h)=>{n.getSettings().colHeaders[i[h]]=c}),this.removedCellMetas.forEach(c=>{let[h,u,d]=c;n.setCellMetaObject(h,u,d)}),n.batchExecution(()=>{n.rowIndexMapper.setIndexesSequence(this.rowPositions),n.columnIndexMapper.setIndexesSequence(this.columnPositions)},!0),n.addHookOnce("afterViewRender",e),n.render()},me.RemoveColumnAction.prototype.redo=function(n,e){n.addHookOnce("afterRemoveCol",e),n.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},me.CellAlignmentAction=function(n,e,t,i){this.stateBefore=n,this.range=e,this.type=t,this.alignment=i},me.CellAlignmentAction.prototype.undo=function(n,e){F(this.range,t=>{t.forAll((i,s)=>{i>=0&&s>=0&&n.setCellMeta(i,s,"className",this.stateBefore[i][s]||" htLeft")})}),n.addHookOnce("afterViewRender",e),n.render()},me.CellAlignmentAction.prototype.redo=function(n,e){oh(this.range,this.type,this.alignment,(t,i)=>n.getCellMeta(t,i),(t,i,s,r)=>n.setCellMeta(t,i,s,r)),n.addHookOnce("afterViewRender",e),n.render()},me.FiltersAction=function(n,e){this.previousConditionsStack=e,this.conditionsStack=n,this.actionType="filter"},yo(me.FiltersAction,me.Action),me.FiltersAction.prototype.undo=function(n,e){const t=n.getPlugin("filters");n.addHookOnce("afterViewRender",e),this.previousConditionsStack&&t.conditionCollection.importAllConditions(this.previousConditionsStack),t.filter()},me.FiltersAction.prototype.redo=function(n,e){const t=n.getPlugin("filters");n.addHookOnce("afterViewRender",e),t.conditionCollection.importAllConditions(this.conditionsStack),t.filter()};class L$e extends me.Action{constructor(e,t){super(),this.cellRange=t;const i=this.cellRange.getTopStartCorner(),s=this.cellRange.getBottomEndCorner();this.rangeData=e.getData(i.row,i.col,s.row,s.col)}undo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.unmergeRange(this.cellRange,!0);const s=this.cellRange.getTopStartCorner();e.populateFromArray(s.row,s.col,this.rangeData,void 0,void 0,"MergeCells")}redo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.mergeRange(this.cellRange)}}me.MergeCellsAction=L$e;class $$e extends me.Action{constructor(e,t){super(),this.cellRange=t}undo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.mergeRange(this.cellRange,!0)}redo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.unmergeRange(this.cellRange,!0),e.render()}}me.UnmergeCellsAction=$$e,me.RowMoveAction=function(n,e){this.rows=n.slice(),this.finalRowIndex=e,this.actionType="row_move"},yo(me.RowMoveAction,me.Action),me.RowMoveAction.prototype.undo=function(n,e){const t=n.getPlugin("manualRowMove");n.addHookOnce("afterViewRender",e),zk(this.rows,this.finalRowIndex,n.rowIndexMapper.getNumberOfIndexes()).reverse().forEach(s=>{let{from:r,to:o}=s;r<o&&(o-=1),t.moveRow(o,r)}),n.render(),n.deselectCell(),n.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)},me.RowMoveAction.prototype.redo=function(n,e){const t=n.getPlugin("manualRowMove");n.addHookOnce("afterViewRender",e),t.moveRows(this.rows.slice(),this.finalRowIndex),n.render(),n.deselectCell(),n.selectRows(this.finalRowIndex,this.finalRowIndex+this.rows.length-1)},me.ColumnMoveAction=function(n,e){this.columns=n.slice(),this.finalColumnIndex=e,this.actionType="col_move"},yo(me.ColumnMoveAction,me.Action),me.ColumnMoveAction.prototype.undo=function(n,e){const t=n.getPlugin("manualColumnMove");n.addHookOnce("afterViewRender",e),zk(this.columns,this.finalColumnIndex,n.columnIndexMapper.getNumberOfIndexes()).reverse().forEach(s=>{let{from:r,to:o}=s;r<o&&(o-=1),t.moveColumn(o,r)}),n.render(),n.deselectCell(),n.selectColumns(this.columns[0],this.columns[0]+this.columns.length-1)},me.ColumnMoveAction.prototype.redo=function(n,e){const t=n.getPlugin("manualColumnMove");n.addHookOnce("afterViewRender",e),t.moveColumns(this.columns.slice(),this.finalColumnIndex),n.render(),n.deselectCell(),n.selectColumns(this.finalColumnIndex,this.finalColumnIndex+this.columns.length-1)},me.ColumnSortAction=function(n,e){this.previousSortState=n,this.nextSortState=e},yo(me.ColumnSortAction,me.Action),me.ColumnSortAction.prototype.undo=function(n,e){const t=n.getPlugin("columnSorting"),i=n.getPlugin("multiColumnSorting"),s=i.isEnabled()?i:t;this.previousSortState.length?s.sort(this.previousSortState):s.clearSort(),e()},me.ColumnSortAction.prototype.redo=function(n,e){const t=n.getPlugin("columnSorting"),i=n.getPlugin("multiColumnSorting");(i.isEnabled()?i:t).sort(this.nextSortState),e()},me.prototype.init=function(){const n=this.instance.getSettings().undo,e=typeof n>"u"||n;this.instance.undoRedo||(this.instance.undoRedo=this),e?this.instance.undoRedo.enable():this.instance.undoRedo.disable()},me.prototype.registerShortcuts=function(){const e=this.instance.getShortcutManager().getContext("grid"),i={runOnlyIf:s=>!s.altKey,group:z9};e.addShortcuts([{keys:[["Control/Meta","z"]],callback:()=>{this.undo()}},{keys:[["Control/Meta","y"],["Control/Meta","Shift","z"]],callback:()=>{this.redo()}}],i)},me.prototype.unregisterShortcuts=function(){this.instance.getShortcutManager().getContext("grid").removeShortcutsByGroup(z9)};function U9(n,e){const t=this;if(e==="loadData")return t.undoRedo.clear()}function F$e(n){n.undo=function(){return n.undoRedo.undo()},n.redo=function(){return n.undoRedo.redo()},n.isUndoAvailable=function(){return n.undoRedo.isUndoAvailable()},n.isRedoAvailable=function(){return n.undoRedo.isRedoAvailable()},n.clearUndo=function(){return n.undoRedo.clear()}}function B$e(n){delete n.undo,delete n.redo,delete n.isUndoAvailable,delete n.isRedoAvailable,delete n.clearUndo}const cv=xe.getSingleton();cv.add("afterUpdateSettings",function(){var n;(n=this.getPlugin("undoRedo"))===null||n===void 0||n.init()}),cv.register("beforeUndo"),cv.register("afterUndo"),cv.register("beforeRedo"),cv.register("afterRedo"),me.PLUGIN_KEY=N$e,me.SETTING_KEYS=!0;function V$e(){_t(Qb),_t(bxe),_t(ew),_t(Qxe),_t(rEe),_t(G4),_t(JEe),_t($Te),_t(b_),_t(iAe),_t(AAe),_t(LAe),_t(E_),_t(hPe),_t(lOe),_t(FOe),_t(uke),_t(Ske),_t(Hke),_t(Uke),_t(tHe),_t(vHe),_t(MHe),_t(aDe),_t(VDe),_t(YDe),_t(wNe),_t(sLe),_t(TLe),_t(NLe),_t(jLe),_t(e$e),_t(me)}function W$e(){t1e(),v1e(),M1e(),F1e(),V$e()}function j$e(n){const e=typeof window>"u"?!1:window.jQuery;e&&(e.fn.handsontable=function(t){const i=this.first();let s=i.data("handsontable");if(typeof t!="string"){const c=t||{};return s?s.updateSettings(c):(s=new n.Core(i[0],c),i.data("handsontable",s),s.init()),i}let r;if(s)if(typeof s[t]<"u"){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];r=s[t].call(s,...a),t==="destroy"&&i.removeData()}else throw new Error(`Handsontable do not provide action: ${t}`);return r})}var NH,LH,$H,FH,BH;W$e(),j$e(Ye),Ye.__GhostTable=NO,Ye._getListenersCounter=rwe,Ye._getRegisteredMapsCounter=ECe,Ye.EventManager=kr;const z$e=[dme,ybe,fCe,C1e,bbe,ebe,mme,qwe,mbe,wme,_be,Kwe],U$e=[Xme,Rbe];Ye.helper={},Ye.dom={},F(z$e,n=>{F(Object.getOwnPropertyNames(n),e=>{e.charAt(0)!=="_"&&(Ye.helper[e]=n[e])})}),F(U$e,n=>{F(Object.getOwnPropertyNames(n),e=>{e.charAt(0)!=="_"&&(Ye.dom[e]=n[e])})}),Ye.cellTypes=(NH=Ye.cellTypes)!==null&&NH!==void 0?NH:{},F(ISe(),n=>{Ye.cellTypes[n]=sO(n)}),Ye.cellTypes.registerCellType=Fr,Ye.cellTypes.getCellType=sO,Ye.editors=(LH=Ye.editors)!==null&&LH!==void 0?LH:{},F(Jbe(),n=>{Ye.editors[`${Ki(n)}Editor`]=xC(n)}),Ye.editors.registerEditor=Es,Ye.editors.getEditor=xC,Ye.renderers=($H=Ye.renderers)!==null&&$H!==void 0?$H:{},F(lve(),n=>{const e=OC(n);n==="base"&&(Ye.renderers.cellDecorator=e),Ye.renderers[`${Ki(n)}Renderer`]=e}),Ye.renderers.registerRenderer=tr,Ye.renderers.getRenderer=OC,Ye.validators=(FH=Ye.validators)!==null&&FH!==void 0?FH:{},F(uve(),n=>{Ye.validators[`${Ki(n)}Validator`]=YA(n)}),Ye.validators.registerValidator=ju,Ye.validators.getValidator=YA,Ye.plugins=(BH=Ye.plugins)!==null&&BH!==void 0?BH:{},F(UA(),n=>{Ye.plugins[n]=wb(n)}),Ye.plugins[`${Ki(Pt.PLUGIN_KEY)}Plugin`]=Pt,Ye.plugins.registerPlugin=_t,Ye.plugins.getPlugin=wb;var Y9;let G9,K9,q9,X9,Q9;function Y$e(n,e,t,i,s,r){var o,a,l,c,h,u,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],w=e.length;function y(x,M,I){return function(A,O){M&&(O=A,A=n);for(var D=0;D<x.length;D++)O=x[D].apply(A,I?[O]:[]);return I?O:A}}function C(x,M,I,A){if(typeof x!="function"&&(A||x!==void 0))throw new TypeError(M+" must "+(I||"be")+" a function"+(A?"":" or undefined"));return x}function R(x,M,I,A,O,D,j,Y,Z,$,B){function ie(oe){if(!B(oe))throw new TypeError("Attempted to access private element on non-instance")}var se=[].concat(M[0]),te=M[3],pe=!j,b=O===1,v=O===3,S=O===4,T=O===2;function H(oe,ce,Ve){return function(Se,_e){return ce&&(_e=Se,Se=x),Ve&&Ve(Se),E[oe].call(Se,_e)}}if(!pe){var E={},N=[],X=v?"get":S||b?"set":"value";if(Z?($||b?E={get:Z9(function(){return te(this)},A,"get"),set:function(oe){M[4](this,oe)}}:E[X]=te,$||Z9(E[X],A,T?"":X)):$||(E=Object.getOwnPropertyDescriptor(x,A)),!$&&!Z){if((a=m[+Y][A])&&(a^O)!=7)throw Error("Decorating two elements with the same name ("+E[X].name+") is not supported yet");m[+Y][A]=O<3?1:O}}for(var ne=x,he=se.length-1;he>=0;he-=I?2:1){var re=C(se[he],"A decorator","be",!0),ke=I?se[he-1]:void 0,Ee={},J={kind:["field","accessor","method","getter","setter","class"][O],name:A,metadata:o,addInitializer:(function(oe,ce){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");C(ce,"An initializer","be",!0),D.push(ce)}).bind(null,Ee)};if(pe)a=re.call(ke,ne,J),Ee.v=1,C(a,"class decorators","return")&&(ne=a);else if(J.static=Y,J.private=Z,a=J.access={has:Z?B.bind():function(oe){return A in oe}},S||(a.get=Z?T?function(oe){return ie(oe),E.value}:H("get",0,ie):function(oe){return oe[A]}),T||v||(a.set=Z?H("set",0,ie):function(oe,ce){oe[A]=ce}),ne=re.call(ke,b?{get:E.get,set:E.set}:E[X],J),Ee.v=1,b){if(typeof ne=="object"&&ne)(a=C(ne.get,"accessor.get"))&&(E.get=a),(a=C(ne.set,"accessor.set"))&&(E.set=a),(a=C(ne.init,"accessor.init"))&&N.unshift(a);else if(ne!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else C(ne,($?"field":"method")+" decorators","return")&&($?N.unshift(ne):E[X]=ne)}return O<2&&j.push(y(N,Y,1),y(D,Y,0)),$||pe||(Z?b?j.splice(-1,0,H("get",Y),H("set",Y)):j.push(T?E[X]:C.call.bind(E[X])):g(x,A,E)),ne}function _(x){return g(x,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),h=[],u=function(x){x&&h.push(y(x))},d=function(x,M){for(var I=0;I<t.length;I++){var A=t[I],O=A[1],D=7&O;if((8&O)==x&&!D==M){var j=A[2],Y=!!A[3],Z=16&O;R(x?n:n.prototype,A,Z,Y?"#"+j:G$e(j),D,D<2?[]:x?c=c||[]:l=l||[],h,!!x,Y,M,x&&Y?function($){return q$e($)===n}:s)}}},d(8,0),d(0,0),d(8,1),d(0,1),u(l),u(c),a=h,w||_(n),{e:a,get c(){var x=[];return w&&[_(n=R(n,[e],i,n.name,5,x)),y(x,1)]}}}function G$e(n){var e=K$e(n,"string");return typeof e=="symbol"?e:e+""}function K$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Z9(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function q$e(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let J9;class X$e{constructor(){this.ea=ue(zG),this.mytable=void 0,this.hot=void 0,this.datachannel=K9(this),this.tabid=(q9(this),X9(this)),this.showtable=(Q9(this),!0)}attached(){let e=[["Subject/Object/Predicate","type","CRC Risk","CRC Neoplasia","Physical Activity"],["Trans-Chlordane","environmental","corelates","is",0],["PCB194","environmental","corelates",1],["Sterilisation","biometric","increase",0],["Tobacco Consumption","lifestyle","increase",1,1],["PAC-RSK","Interaction Term","decrease",0,1]],t=this;this.hot=new Ye(this.mytable,{data:e,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,autoWrapCol:!0,licenseKey:"non-commercial-and-evaluation",afterChange:function(i,s){s==="loadData"||!i||i.forEach(([r,o,a,l])=>{t.changeContent(r,o,a,l)})}})}changeContent(e,t,i,s){if(console.log(`Cell at row ${e}, column ${t} changed from "${i}" to "${s}".`),e==0)this.ea.publish(this.datachannel,{type:"changeNode",old:i,value:s});else if(t==0)this.ea.publish(this.datachannel,{type:"changeNode",old:i,value:s});else if(t==1){const r=this.hot.getDataAtCell(e,0);this.ea.publish(this.datachannel,{type:"changeType",node:r,old:i,value:s})}else{const r=this.hot.getDataAtCell(e,0),o=this.hot.getDataAtCell(0,t);this.ea.publish(this.datachannel,{type:"changeEdge",subject:r,object:o,old:i,value:s})}}submit(){let e=this.hot.getData();console.log("submit data:",e),this.ea.publish(this.datachannel,e)}showHide(){this.showtable=!this.showtable}addRow(){let e=prompt("Subject name","");if(e){const t=this.hot.countRows();this.hot.alter("insert_row_below",t),this.hot.setDataAtCell(t,0,e),this.hot.setDataAtCell(t,1,"environmental"),this.hot.selectCell(t,0)}}addColumn(){let e=prompt("Object name","");if(e){const t=this.hot.countCols();this.hot.alter("insert_col_end",t),this.hot.setDataAtCell(0,t,e),this.hot.selectCell(0,t)}}}Y9=X$e,{e:[K9,q9,X9,Q9],c:[J9,G9]}=Y$e(Y9,[Cy({...Rse,name:"sv-table"})],[[oy,0,"datachannel"],[oy,0,"tabid"]]),G9();const eU="chartjs-geo",VH=`<div class="chartjsgeocontainer">
    <div class="w3-bar w3-light-grey w3-small">
        <button class="w3-bar-item w3-button" click.trigger="resetView()">Home</button>
        <button class="w3-bar-item w3-button" click.trigger="toggleAnimation()">Animate</button>
        <div class="w3-dropdown-hover">
            <button class="w3-button">Projection</button>
            <div class="w3-dropdown-content w3-bar-block w3-card-4">
              <button repeat.for="item of projections" click.trigger='switchProjection(item)' class="w3-bar-item w3-button w3-ripple">\${item}</button>                           
          </div>
        </div>
        <div class="w3-dropdown-hover">
          <button class="w3-button">Continent</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <button click.trigger='switchToEurope()' class="w3-bar-item w3-button w3-ripple">Europe</button> 
            <button click.trigger='switchToAsia()' class="w3-bar-item w3-button w3-ripple">Asia</button> 
            <button click.trigger='switchToNAmerica()' class="w3-bar-item w3-button w3-ripple">N.America</button> 
            <button click.trigger='switchToSAmerica()' class="w3-bar-item w3-button w3-ripple">S.America</button>
            <button click.trigger='switchToAfrica()' class="w3-bar-item w3-button w3-ripple">Africa</button> 
            <button click.trigger='switchToPacific()' class="w3-bar-item w3-button w3-ripple">Australia &amp; Oceania</button> 
            <button click.trigger='switchToWorld()' class="w3-bar-item w3-button w3-ripple">World</button>          
        </div>
      </div>
      </div>
<canvas ref="geochart" class="chartjsgeo"></canvas>
<div class="chartjsgeodesc">    
    click country for details: <b>\${countryName}</b><br/>
    <span>\${projectName} \${projectStatus} \${projectStatusText}</span><br/>
    <i>\${projectPublication}</i><br/>
    <span repeat.for="url of projecturls"><a href.bind='url' target="_blank" class="truncate">\${url}</a><br/></span>    
</div>
</div>`,tU=[],nU={};let WH;function Q$e(n){WH||(WH=Ks.define({name:eU,template:VH,dependencies:tU,bindables:nU})),n.register(WH)}const Z$e=Object.freeze(Object.defineProperty({__proto__:null,bindables:nU,default:VH,dependencies:tU,name:eU,register:Q$e,template:VH},Symbol.toStringTag,{value:"Module"}));class Oh{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let i=0;for(let s=0;s<this._n&&s<32;s++){const r=t[s],o=e+r,a=Math.abs(e)<Math.abs(r)?e-(o-r):r-(o-e);a&&(t[i++]=a),e=o}return t[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let t=this._n,i,s,r,o=0;if(t>0){for(o=e[--t];t>0&&(i=o,s=e[--t],o=i+s,r=s-(o-i),!r););t>0&&(r<0&&e[t-1]<0||r>0&&e[t-1]>0)&&(s=r*2,i=o+s,s==i-o&&(o=i))}return o}}function*J$e(n){for(const e of n)yield*e}function iU(n){return Array.from(J$e(n))}function ap(n,e,t){n=+n,e=+e,t=(s=arguments.length)<2?(e=n,n=0,1):s<3?1:+t;for(var i=-1,s=Math.max(0,Math.ceil((e-n)/t))|0,r=new Array(s);++i<s;)r[i]=n+i*t;return r}var We=1e-6,jH=1e-12,dt=Math.PI,Gn=dt/2,sU=dt/4,dr=dt*2,ys=180/dt,Jt=dt/180,It=Math.abs,lp=Math.atan,Ga=Math.atan2,tt=Math.cos,HR=Math.ceil,rU=Math.exp,DR=Math.log,zH=Math.pow,Xe=Math.sin,Kr=Math.sign||function(n){return n>0?1:n<0?-1:0},Cs=Math.sqrt,UH=Math.tan;function oU(n){return n>1?0:n<-1?dt:Math.acos(n)}function qr(n){return n>1?Gn:n<-1?-Gn:Math.asin(n)}function Ai(){}function NR(n,e){n&&lU.hasOwnProperty(n.type)&&lU[n.type](n,e)}var aU={Feature:function(n,e){NR(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,s=t.length;++i<s;)NR(t[i].geometry,e)}},lU={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)n=t[i],e.point(n[0],n[1],n[2])},LineString:function(n,e){YH(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)YH(t[i],e,0)},Polygon:function(n,e){cU(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)cU(t[i],e)},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,s=t.length;++i<s;)NR(t[i],e)}};function YH(n,e,t){var i=-1,s=n.length-t,r;for(e.lineStart();++i<s;)r=n[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function cU(n,e){var t=-1,i=n.length;for(e.polygonStart();++t<i;)YH(n[t],e,1);e.polygonEnd()}function Wd(n,e){n&&aU.hasOwnProperty(n.type)?aU[n.type](n,e):NR(n,e)}function GH(n){return[Ga(n[1],n[0]),qr(n[2])]}function cp(n){var e=n[0],t=n[1],i=tt(t);return[i*tt(e),i*Xe(e),Xe(t)]}function LR(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function $R(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function KH(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function FR(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function qH(n){var e=Cs(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}function XH(n,e){function t(i,s){return i=n(i,s),e(i[0],i[1])}return n.invert&&e.invert&&(t.invert=function(i,s){return i=e.invert(i,s),i&&n.invert(i[0],i[1])}),t}function QH(n,e){return It(n)>dt&&(n-=Math.round(n/dr)*dr),[n,e]}QH.invert=QH;function hU(n,e,t){return(n%=dr)?e||t?XH(dU(n),fU(e,t)):dU(n):e||t?fU(e,t):QH}function uU(n){return function(e,t){return e+=n,It(e)>dt&&(e-=Math.round(e/dr)*dr),[e,t]}}function dU(n){var e=uU(n);return e.invert=uU(-n),e}function fU(n,e){var t=tt(n),i=Xe(n),s=tt(e),r=Xe(e);function o(a,l){var c=tt(l),h=tt(a)*c,u=Xe(a)*c,d=Xe(l),f=d*t+h*i;return[Ga(u*s-f*r,h*t-d*i),qr(f*s+u*r)]}return o.invert=function(a,l){var c=tt(l),h=tt(a)*c,u=Xe(a)*c,d=Xe(l),f=d*s-u*r;return[Ga(u*s+d*r,h*t+f*i),qr(f*t-h*i)]},o}function e2e(n){n=hU(n[0]*Jt,n[1]*Jt,n.length>2?n[2]*Jt:0);function e(t){return t=n(t[0]*Jt,t[1]*Jt),t[0]*=ys,t[1]*=ys,t}return e.invert=function(t){return t=n.invert(t[0]*Jt,t[1]*Jt),t[0]*=ys,t[1]*=ys,t},e}function t2e(n,e,t,i,s,r){if(t){var o=tt(e),a=Xe(e),l=i*t;s==null?(s=e+i*dr,r=e-l/2):(s=gU(o,s),r=gU(o,r),(i>0?s<r:s>r)&&(s+=i*dr));for(var c,h=s;i>0?h>r:h<r;h-=l)c=GH([o,-a*tt(h),-a*Xe(h)]),n.point(c[0],c[1])}}function gU(n,e){e=cp(e),e[0]-=n,qH(e);var t=oU(-e[1]);return((-e[2]<0?-t:t)+dr-We)%dr}function pU(){var n=[],e;return{point:function(t,i,s){e.push([t,i,s])},lineStart:function(){n.push(e=[])},lineEnd:Ai,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function BR(n,e){return It(n[0]-e[0])<We&&It(n[1]-e[1])<We}function VR(n,e,t,i){this.x=n,this.z=e,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function mU(n,e,t,i,s){var r=[],o=[],a,l;if(n.forEach(function(g){if(!((p=g.length-1)<=0)){var p,m=g[0],w=g[p],y;if(BR(m,w)){if(!m[2]&&!w[2]){for(s.lineStart(),a=0;a<p;++a)s.point((m=g[a])[0],m[1]);s.lineEnd();return}w[0]+=2*We}r.push(y=new VR(m,g,null,!0)),o.push(y.o=new VR(m,null,y,!1)),r.push(y=new VR(w,g,null,!1)),o.push(y.o=new VR(w,null,y,!0))}}),!!r.length){for(o.sort(e),bU(r),bU(o),a=0,l=o.length;a<l;++a)o[a].e=t=!t;for(var c=r[0],h,u;;){for(var d=c,f=!0;d.v;)if((d=d.n)===c)return;h=d.z,s.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(a=0,l=h.length;a<l;++a)s.point((u=h[a])[0],u[1]);else i(d.x,d.n.x,1,s);d=d.n}else{if(f)for(h=d.p.z,a=h.length-1;a>=0;--a)s.point((u=h[a])[0],u[1]);else i(d.x,d.p.x,-1,s);d=d.p}d=d.o,h=d.z,f=!f}while(!d.v);s.lineEnd()}}}function bU(n){if(e=n.length){for(var e,t=0,i=n[0],s;++t<e;)i.n=s=n[t],s.p=i,i=s;i.n=s=n[0],s.p=i}}function ZH(n){return It(n[0])<=dt?n[0]:Kr(n[0])*((It(n[0])+dt)%dr-dt)}function wU(n,e){var t=ZH(e),i=e[1],s=Xe(i),r=[Xe(t),-tt(t),0],o=0,a=0,l=new Oh;s===1?i=Gn+We:s===-1&&(i=-Gn-We);for(var c=0,h=n.length;c<h;++c)if(d=(u=n[c]).length)for(var u,d,f=u[d-1],g=ZH(f),p=f[1]/2+sU,m=Xe(p),w=tt(p),y=0;y<d;++y,g=R,m=x,w=M,f=C){var C=u[y],R=ZH(C),_=C[1]/2+sU,x=Xe(_),M=tt(_),I=R-g,A=I>=0?1:-1,O=A*I,D=O>dt,j=m*x;if(l.add(Ga(j*A*Xe(O),w*M+j*tt(O))),o+=D?I+A*dr:I,D^g>=t^R>=t){var Y=$R(cp(f),cp(C));qH(Y);var Z=$R(r,Y);qH(Z);var $=(D^I>=0?-1:1)*qr(Z[2]);(i>$||i===$&&(Y[0]||Y[1]))&&(a+=D^I>=0?1:-1)}}return(o<-We||o<We&&l<-jH)^a&1}function vU(n,e,t,i){return function(s){var r=e(s),o=pU(),a=e(o),l=!1,c,h,u,d={point:f,lineStart:p,lineEnd:m,polygonStart:function(){d.point=w,d.lineStart=y,d.lineEnd=C,h=[],c=[]},polygonEnd:function(){d.point=f,d.lineStart=p,d.lineEnd=m,h=iU(h);var R=wU(c,i);h.length?(l||(s.polygonStart(),l=!0),mU(h,i2e,R,t,s)):R&&(l||(s.polygonStart(),l=!0),s.lineStart(),t(null,null,1,s),s.lineEnd()),l&&(s.polygonEnd(),l=!1),h=c=null},sphere:function(){s.polygonStart(),s.lineStart(),t(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function f(R,_){n(R,_)&&s.point(R,_)}function g(R,_){r.point(R,_)}function p(){d.point=g,r.lineStart()}function m(){d.point=f,r.lineEnd()}function w(R,_){u.push([R,_]),a.point(R,_)}function y(){a.lineStart(),u=[]}function C(){w(u[0][0],u[0][1]),a.lineEnd();var R=a.clean(),_=o.result(),x,M=_.length,I,A,O;if(u.pop(),c.push(u),u=null,!!M){if(R&1){if(A=_[0],(I=A.length-1)>0){for(l||(s.polygonStart(),l=!0),s.lineStart(),x=0;x<I;++x)s.point((O=A[x])[0],O[1]);s.lineEnd()}return}M>1&&R&2&&_.push(_.pop().concat(_.shift())),h.push(_.filter(n2e))}}return d}}function n2e(n){return n.length>1}function i2e(n,e){return((n=n.x)[0]<0?n[1]-Gn-We:Gn-n[1])-((e=e.x)[0]<0?e[1]-Gn-We:Gn-e[1])}const yU=vU(function(){return!0},s2e,o2e,[-dt,-Gn]);function s2e(n){var e=NaN,t=NaN,i=NaN,s;return{lineStart:function(){n.lineStart(),s=1},point:function(r,o){var a=r>0?dt:-dt,l=It(r-e);It(l-dt)<We?(n.point(e,t=(t+o)/2>0?Gn:-Gn),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(r,t),s=0):i!==a&&l>=dt&&(It(e-i)<We&&(e-=i*We),It(r-a)<We&&(r-=a*We),t=r2e(e,t,r,o),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),s=0),n.point(e=r,t=o),i=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-s}}}function r2e(n,e,t,i){var s,r,o=Xe(n-t);return It(o)>We?lp((Xe(e)*(r=tt(i))*Xe(t)-Xe(i)*(s=tt(e))*Xe(n))/(s*r*o)):(e+i)/2}function o2e(n,e,t,i){var s;if(n==null)s=t*Gn,i.point(-dt,s),i.point(0,s),i.point(dt,s),i.point(dt,0),i.point(dt,-s),i.point(0,-s),i.point(-dt,-s),i.point(-dt,0),i.point(-dt,s);else if(It(n[0]-e[0])>We){var r=n[0]<e[0]?dt:-dt;s=t*r/2,i.point(-r,s),i.point(0,s),i.point(r,s)}else i.point(e[0],e[1])}function a2e(n){var e=tt(n),t=2*Jt,i=e>0,s=It(e)>We;function r(h,u,d,f){t2e(f,n,t,d,h,u)}function o(h,u){return tt(h)*tt(u)>e}function a(h){var u,d,f,g,p;return{lineStart:function(){g=f=!1,p=1},point:function(m,w){var y=[m,w],C,R=o(m,w),_=i?R?0:c(m,w):R?c(m+(m<0?dt:-dt),w):0;if(!u&&(g=f=R)&&h.lineStart(),R!==f&&(C=l(u,y),(!C||BR(u,C)||BR(y,C))&&(y[2]=1)),R!==f)p=0,R?(h.lineStart(),C=l(y,u),h.point(C[0],C[1])):(C=l(u,y),h.point(C[0],C[1],2),h.lineEnd()),u=C;else if(s&&u&&i^R){var x;!(_&d)&&(x=l(y,u,!0))&&(p=0,i?(h.lineStart(),h.point(x[0][0],x[0][1]),h.point(x[1][0],x[1][1]),h.lineEnd()):(h.point(x[1][0],x[1][1]),h.lineEnd(),h.lineStart(),h.point(x[0][0],x[0][1],3)))}R&&(!u||!BR(u,y))&&h.point(y[0],y[1]),u=y,f=R,d=_},lineEnd:function(){f&&h.lineEnd(),u=null},clean:function(){return p|(g&&f)<<1}}}function l(h,u,d){var f=cp(h),g=cp(u),p=[1,0,0],m=$R(f,g),w=LR(m,m),y=m[0],C=w-y*y;if(!C)return!d&&h;var R=e*w/C,_=-e*y/C,x=$R(p,m),M=FR(p,R),I=FR(m,_);KH(M,I);var A=x,O=LR(M,A),D=LR(A,A),j=O*O-D*(LR(M,M)-1);if(!(j<0)){var Y=Cs(j),Z=FR(A,(-O-Y)/D);if(KH(Z,M),Z=GH(Z),!d)return Z;var $=h[0],B=u[0],ie=h[1],se=u[1],te;B<$&&(te=$,$=B,B=te);var pe=B-$,b=It(pe-dt)<We,v=b||pe<We;if(!b&&se<ie&&(te=ie,ie=se,se=te),v?b?ie+se>0^Z[1]<(It(Z[0]-$)<We?ie:se):ie<=Z[1]&&Z[1]<=se:pe>dt^($<=Z[0]&&Z[0]<=B)){var S=FR(A,(-O+Y)/D);return KH(S,M),[Z,GH(S)]}}}function c(h,u){var d=i?n:dt-n,f=0;return h<-d?f|=1:h>d&&(f|=2),u<-d?f|=4:u>d&&(f|=8),f}return vU(o,a,r,i?[0,-n]:[-dt,n-dt])}function l2e(n,e,t,i,s,r){var o=n[0],a=n[1],l=e[0],c=e[1],h=0,u=1,d=l-o,f=c-a,g;if(g=t-o,!(!d&&g>0)){if(g/=d,d<0){if(g<h)return;g<u&&(u=g)}else if(d>0){if(g>u)return;g>h&&(h=g)}if(g=s-o,!(!d&&g<0)){if(g/=d,d<0){if(g>u)return;g>h&&(h=g)}else if(d>0){if(g<h)return;g<u&&(u=g)}if(g=i-a,!(!f&&g>0)){if(g/=f,f<0){if(g<h)return;g<u&&(u=g)}else if(f>0){if(g>u)return;g>h&&(h=g)}if(g=r-a,!(!f&&g<0)){if(g/=f,f<0){if(g>u)return;g>h&&(h=g)}else if(f>0){if(g<h)return;g<u&&(u=g)}return h>0&&(n[0]=o+h*d,n[1]=a+h*f),u<1&&(e[0]=o+u*d,e[1]=a+u*f),!0}}}}}var hv=1e9,WR=-hv;function c2e(n,e,t,i){function s(c,h){return n<=c&&c<=t&&e<=h&&h<=i}function r(c,h,u,d){var f=0,g=0;if(c==null||(f=o(c,u))!==(g=o(h,u))||l(c,h)<0^u>0)do d.point(f===0||f===3?n:t,f>1?i:e);while((f=(f+u+4)%4)!==g);else d.point(h[0],h[1])}function o(c,h){return It(c[0]-n)<We?h>0?0:3:It(c[0]-t)<We?h>0?2:1:It(c[1]-e)<We?h>0?1:0:h>0?3:2}function a(c,h){return l(c.x,h.x)}function l(c,h){var u=o(c,1),d=o(h,1);return u!==d?u-d:u===0?h[1]-c[1]:u===1?c[0]-h[0]:u===2?c[1]-h[1]:h[0]-c[0]}return function(c){var h=c,u=pU(),d,f,g,p,m,w,y,C,R,_,x,M={point:I,lineStart:j,lineEnd:Y,polygonStart:O,polygonEnd:D};function I($,B){s($,B)&&h.point($,B)}function A(){for(var $=0,B=0,ie=f.length;B<ie;++B)for(var se=f[B],te=1,pe=se.length,b=se[0],v,S,T=b[0],H=b[1];te<pe;++te)v=T,S=H,b=se[te],T=b[0],H=b[1],S<=i?H>i&&(T-v)*(i-S)>(H-S)*(n-v)&&++$:H<=i&&(T-v)*(i-S)<(H-S)*(n-v)&&--$;return $}function O(){h=u,d=[],f=[],x=!0}function D(){var $=A(),B=x&&$,ie=(d=iU(d)).length;(B||ie)&&(c.polygonStart(),B&&(c.lineStart(),r(null,null,1,c),c.lineEnd()),ie&&mU(d,a,$,r,c),c.polygonEnd()),h=c,d=f=g=null}function j(){M.point=Z,f&&f.push(g=[]),_=!0,R=!1,y=C=NaN}function Y(){d&&(Z(p,m),w&&R&&u.rejoin(),d.push(u.result())),M.point=I,R&&h.lineEnd()}function Z($,B){var ie=s($,B);if(f&&g.push([$,B]),_)p=$,m=B,w=ie,_=!1,ie&&(h.lineStart(),h.point($,B));else if(ie&&R)h.point($,B);else{var se=[y=Math.max(WR,Math.min(hv,y)),C=Math.max(WR,Math.min(hv,C))],te=[$=Math.max(WR,Math.min(hv,$)),B=Math.max(WR,Math.min(hv,B))];l2e(se,te,n,e,t,i)?(R||(h.lineStart(),h.point(se[0],se[1])),h.point(te[0],te[1]),ie||h.lineEnd(),x=!1):ie&&(h.lineStart(),h.point($,B),x=!1)}y=$,C=B,R=ie}return M}}var JH,eD,jR,zR,hp={sphere:Ai,point:Ai,lineStart:h2e,lineEnd:Ai,polygonStart:Ai,polygonEnd:Ai};function h2e(){hp.point=d2e,hp.lineEnd=u2e}function u2e(){hp.point=hp.lineEnd=Ai}function d2e(n,e){n*=Jt,e*=Jt,eD=n,jR=Xe(e),zR=tt(e),hp.point=f2e}function f2e(n,e){n*=Jt,e*=Jt;var t=Xe(e),i=tt(e),s=It(n-eD),r=tt(s),o=Xe(s),a=i*o,l=zR*t-jR*i*r,c=jR*t+zR*i*r;JH.add(Ga(Cs(a*a+l*l),c)),eD=n,jR=t,zR=i}function g2e(n){return JH=new Oh,Wd(n,hp),+JH}var tD=[null,null],p2e={type:"LineString",coordinates:tD};function nD(n,e){return tD[0]=n,tD[1]=e,g2e(p2e)}var CU={Feature:function(n,e){return UR(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,s=t.length;++i<s;)if(UR(t[i].geometry,e))return!0;return!1}},SU={Sphere:function(){return!0},Point:function(n,e){return _U(n.coordinates,e)},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)if(_U(t[i],e))return!0;return!1},LineString:function(n,e){return RU(n.coordinates,e)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)if(RU(t[i],e))return!0;return!1},Polygon:function(n,e){return xU(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)if(xU(t[i],e))return!0;return!1},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,s=t.length;++i<s;)if(UR(t[i],e))return!0;return!1}};function UR(n,e){return n&&SU.hasOwnProperty(n.type)?SU[n.type](n,e):!1}function _U(n,e){return nD(n,e)===0}function RU(n,e){for(var t,i,s,r=0,o=n.length;r<o;r++){if(i=nD(n[r],e),i===0||r>0&&(s=nD(n[r],n[r-1]),s>0&&t<=s&&i<=s&&(t+i-s)*(1-Math.pow((t-i)/s,2))<jH*s))return!0;t=i}return!1}function xU(n,e){return!!wU(n.map(m2e),EU(e))}function m2e(n){return n=n.map(EU),n.pop(),n}function EU(n){return[n[0]*Jt,n[1]*Jt]}function b2e(n,e){return(n&&CU.hasOwnProperty(n.type)?CU[n.type]:UR)(n,e)}function TU(n,e,t){var i=ap(n,e-We,t).concat(e);return function(s){return i.map(function(r){return[s,r]})}}function MU(n,e,t){var i=ap(n,e-We,t).concat(e);return function(s){return i.map(function(r){return[r,s]})}}function AU(){var n,e,t,i,s,r,o,a,l=10,c=l,h=90,u=360,d,f,g,p,m=2.5;function w(){return{type:"MultiLineString",coordinates:y()}}function y(){return ap(HR(i/h)*h,t,h).map(g).concat(ap(HR(a/u)*u,o,u).map(p)).concat(ap(HR(e/l)*l,n,l).filter(function(C){return It(C%h)>We}).map(d)).concat(ap(HR(r/c)*c,s,c).filter(function(C){return It(C%u)>We}).map(f))}return w.lines=function(){return y().map(function(C){return{type:"LineString",coordinates:C}})},w.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(p(o).slice(1),g(t).reverse().slice(1),p(a).reverse().slice(1))]}},w.extent=function(C){return arguments.length?w.extentMajor(C).extentMinor(C):w.extentMinor()},w.extentMajor=function(C){return arguments.length?(i=+C[0][0],t=+C[1][0],a=+C[0][1],o=+C[1][1],i>t&&(C=i,i=t,t=C),a>o&&(C=a,a=o,o=C),w.precision(m)):[[i,a],[t,o]]},w.extentMinor=function(C){return arguments.length?(e=+C[0][0],n=+C[1][0],r=+C[0][1],s=+C[1][1],e>n&&(C=e,e=n,n=C),r>s&&(C=r,r=s,s=C),w.precision(m)):[[e,r],[n,s]]},w.step=function(C){return arguments.length?w.stepMajor(C).stepMinor(C):w.stepMinor()},w.stepMajor=function(C){return arguments.length?(h=+C[0],u=+C[1],w):[h,u]},w.stepMinor=function(C){return arguments.length?(l=+C[0],c=+C[1],w):[l,c]},w.precision=function(C){return arguments.length?(m=+C,d=TU(r,s,90),f=MU(e,n,m),g=TU(a,o,90),p=MU(i,t,m),w):m},w.extentMajor([[-180,-90+We],[180,90-We]]).extentMinor([[-180,-80-We],[180,80+We]])}function w2e(){return AU()()}const iD=n=>n;var sD=new Oh,rD=new Oh,PU,IU,oD,aD,hc={point:Ai,lineStart:Ai,lineEnd:Ai,polygonStart:function(){hc.lineStart=v2e,hc.lineEnd=C2e},polygonEnd:function(){hc.lineStart=hc.lineEnd=hc.point=Ai,sD.add(It(rD)),rD=new Oh},result:function(){var n=sD/2;return sD=new Oh,n}};function v2e(){hc.point=y2e}function y2e(n,e){hc.point=OU,PU=oD=n,IU=aD=e}function OU(n,e){rD.add(aD*n-oD*e),oD=n,aD=e}function C2e(){OU(PU,IU)}var up=1/0,YR=up,uv=-up,GR=uv,KR={point:S2e,lineStart:Ai,lineEnd:Ai,polygonStart:Ai,polygonEnd:Ai,result:function(){var n=[[up,YR],[uv,GR]];return uv=GR=-(YR=up=1/0),n}};function S2e(n,e){n<up&&(up=n),n>uv&&(uv=n),e<YR&&(YR=e),e>GR&&(GR=e)}var lD=0,cD=0,dv=0,qR=0,XR=0,dp=0,hD=0,uD=0,fv=0,kU,HU,Ka,qa,Xr={point:jd,lineStart:DU,lineEnd:NU,polygonStart:function(){Xr.lineStart=x2e,Xr.lineEnd=E2e},polygonEnd:function(){Xr.point=jd,Xr.lineStart=DU,Xr.lineEnd=NU},result:function(){var n=fv?[hD/fv,uD/fv]:dp?[qR/dp,XR/dp]:dv?[lD/dv,cD/dv]:[NaN,NaN];return lD=cD=dv=qR=XR=dp=hD=uD=fv=0,n}};function jd(n,e){lD+=n,cD+=e,++dv}function DU(){Xr.point=_2e}function _2e(n,e){Xr.point=R2e,jd(Ka=n,qa=e)}function R2e(n,e){var t=n-Ka,i=e-qa,s=Cs(t*t+i*i);qR+=s*(Ka+n)/2,XR+=s*(qa+e)/2,dp+=s,jd(Ka=n,qa=e)}function NU(){Xr.point=jd}function x2e(){Xr.point=T2e}function E2e(){LU(kU,HU)}function T2e(n,e){Xr.point=LU,jd(kU=Ka=n,HU=qa=e)}function LU(n,e){var t=n-Ka,i=e-qa,s=Cs(t*t+i*i);qR+=s*(Ka+n)/2,XR+=s*(qa+e)/2,dp+=s,s=qa*n-Ka*e,hD+=s*(Ka+n),uD+=s*(qa+e),fv+=s*3,jd(Ka=n,qa=e)}function $U(n){this._context=n}$U.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._context.moveTo(n,e),this._point=1;break}case 1:{this._context.lineTo(n,e);break}default:{this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,dr);break}}},result:Ai};var dD=new Oh,fD,FU,BU,gv,pv,mv={point:Ai,lineStart:function(){mv.point=M2e},lineEnd:function(){fD&&VU(FU,BU),mv.point=Ai},polygonStart:function(){fD=!0},polygonEnd:function(){fD=null},result:function(){var n=+dD;return dD=new Oh,n}};function M2e(n,e){mv.point=VU,FU=gv=n,BU=pv=e}function VU(n,e){gv-=n,pv-=e,dD.add(Cs(gv*gv+pv*pv)),gv=n,pv=e}let WU,QR,jU,zU;class UU{constructor(e){this._append=e==null?YU:A2e(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:{this._append`M${e},${t}`,this._point=1;break}case 1:{this._append`L${e},${t}`;break}default:{if(this._append`M${e},${t}`,this._radius!==jU||this._append!==QR){const i=this._radius,s=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,jU=i,QR=this._append,zU=this._,this._=s}this._+=zU;break}}}result(){const e=this._;return this._="",e.length?e:null}}function YU(n){let e=1;this._+=n[0];for(const t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function A2e(n){const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);if(e>15)return YU;if(e!==WU){const t=10**e;WU=e,QR=function(s){let r=1;this._+=s[0];for(const o=s.length;r<o;++r)this._+=Math.round(arguments[r]*t)/t+s[r]}}return QR}function GU(n,e){let t=3,i=4.5,s,r;function o(a){return a&&(typeof i=="function"&&r.pointRadius(+i.apply(this,arguments)),Wd(a,s(r))),r.result()}return o.area=function(a){return Wd(a,s(hc)),hc.result()},o.measure=function(a){return Wd(a,s(mv)),mv.result()},o.bounds=function(a){return Wd(a,s(KR)),KR.result()},o.centroid=function(a){return Wd(a,s(Xr)),Xr.result()},o.projection=function(a){return arguments.length?(s=a==null?(n=null,iD):(n=a).stream,o):n},o.context=function(a){return arguments.length?(r=a==null?(e=null,new UU(t)):new $U(e=a),typeof i!="function"&&r.pointRadius(i),o):e},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(r.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);t=l}return e===null&&(r=new UU(t)),o},o.projection(n).digits(t).context(e)}function gD(n){return function(e){var t=new pD;for(var i in n)t[i]=n[i];return t.stream=e,t}}function pD(){}pD.prototype={constructor:pD,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function mD(n,e,t){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),Wd(t,n.stream(KR)),e(KR.result()),i!=null&&n.clipExtent(i),n}function bD(n,e,t){return mD(n,function(i){var s=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=Math.min(s/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),a=+e[0][0]+(s-o*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(r-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([a,l])},t)}function KU(n,e,t){return bD(n,[[0,0],e],t)}function qU(n,e,t){return mD(n,function(i){var s=+e,r=s/(i[1][0]-i[0][0]),o=(s-r*(i[1][0]+i[0][0]))/2,a=-r*i[0][1];n.scale(150*r).translate([o,a])},t)}function XU(n,e,t){return mD(n,function(i){var s=+e,r=s/(i[1][1]-i[0][1]),o=-r*i[0][0],a=(s-r*(i[1][1]+i[0][1]))/2;n.scale(150*r).translate([o,a])},t)}var QU=16,P2e=tt(30*Jt);function ZU(n,e){return+e?O2e(n,e):I2e(n)}function I2e(n){return gD({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function O2e(n,e){function t(i,s,r,o,a,l,c,h,u,d,f,g,p,m){var w=c-i,y=h-s,C=w*w+y*y;if(C>4*e&&p--){var R=o+d,_=a+f,x=l+g,M=Cs(R*R+_*_+x*x),I=qr(x/=M),A=It(It(x)-1)<We||It(r-u)<We?(r+u)/2:Ga(_,R),O=n(A,I),D=O[0],j=O[1],Y=D-i,Z=j-s,$=y*Y-w*Z;($*$/C>e||It((w*Y+y*Z)/C-.5)>.3||o*d+a*f+l*g<P2e)&&(t(i,s,r,o,a,l,D,j,A,R/=M,_/=M,x,p,m),m.point(D,j),t(D,j,A,R,_,x,c,h,u,d,f,g,p,m))}}return function(i){var s,r,o,a,l,c,h,u,d,f,g,p,m={point:w,lineStart:y,lineEnd:R,polygonStart:function(){i.polygonStart(),m.lineStart=_},polygonEnd:function(){i.polygonEnd(),m.lineStart=y}};function w(I,A){I=n(I,A),i.point(I[0],I[1])}function y(){u=NaN,m.point=C,i.lineStart()}function C(I,A){var O=cp([I,A]),D=n(I,A);t(u,d,h,f,g,p,u=D[0],d=D[1],h=I,f=O[0],g=O[1],p=O[2],QU,i),i.point(u,d)}function R(){m.point=w,i.lineEnd()}function _(){y(),m.point=x,m.lineEnd=M}function x(I,A){C(s=I,A),r=u,o=d,a=f,l=g,c=p,m.point=C}function M(){t(u,d,h,f,g,p,r,o,s,a,l,c,QU,i),m.lineEnd=R,R()}return m}}var k2e=gD({point:function(n,e){this.stream.point(n*Jt,e*Jt)}});function H2e(n){return gD({point:function(e,t){var i=n(e,t);return this.stream.point(i[0],i[1])}})}function D2e(n,e,t,i,s){function r(o,a){return o*=i,a*=s,[e+n*o,t-n*a]}return r.invert=function(o,a){return[(o-e)/n*i,(t-a)/n*s]},r}function JU(n,e,t,i,s,r){if(!r)return D2e(n,e,t,i,s);var o=tt(r),a=Xe(r),l=o*n,c=a*n,h=o/n,u=a/n,d=(a*t-o*e)/n,f=(a*e+o*t)/n;function g(p,m){return p*=i,m*=s,[l*p-c*m+e,t-c*p-l*m]}return g.invert=function(p,m){return[i*(h*p-u*m+d),s*(f-u*p-h*m)]},g}function uc(n){return eY(function(){return n})()}function eY(n){var e,t=150,i=480,s=250,r=0,o=0,a=0,l=0,c=0,h,u=0,d=1,f=1,g=null,p=yU,m=null,w,y,C,R=iD,_=.5,x,M,I,A,O;function D($){return I($[0]*Jt,$[1]*Jt)}function j($){return $=I.invert($[0],$[1]),$&&[$[0]*ys,$[1]*ys]}D.stream=function($){return A&&O===$?A:A=k2e(H2e(h)(p(x(R(O=$)))))},D.preclip=function($){return arguments.length?(p=$,g=void 0,Z()):p},D.postclip=function($){return arguments.length?(R=$,m=w=y=C=null,Z()):R},D.clipAngle=function($){return arguments.length?(p=+$?a2e(g=$*Jt):(g=null,yU),Z()):g*ys},D.clipExtent=function($){return arguments.length?(R=$==null?(m=w=y=C=null,iD):c2e(m=+$[0][0],w=+$[0][1],y=+$[1][0],C=+$[1][1]),Z()):m==null?null:[[m,w],[y,C]]},D.scale=function($){return arguments.length?(t=+$,Y()):t},D.translate=function($){return arguments.length?(i=+$[0],s=+$[1],Y()):[i,s]},D.center=function($){return arguments.length?(r=$[0]%360*Jt,o=$[1]%360*Jt,Y()):[r*ys,o*ys]},D.rotate=function($){return arguments.length?(a=$[0]%360*Jt,l=$[1]%360*Jt,c=$.length>2?$[2]%360*Jt:0,Y()):[a*ys,l*ys,c*ys]},D.angle=function($){return arguments.length?(u=$%360*Jt,Y()):u*ys},D.reflectX=function($){return arguments.length?(d=$?-1:1,Y()):d<0},D.reflectY=function($){return arguments.length?(f=$?-1:1,Y()):f<0},D.precision=function($){return arguments.length?(x=ZU(M,_=$*$),Z()):Cs(_)},D.fitExtent=function($,B){return bD(D,$,B)},D.fitSize=function($,B){return KU(D,$,B)},D.fitWidth=function($,B){return qU(D,$,B)},D.fitHeight=function($,B){return XU(D,$,B)};function Y(){var $=JU(t,0,0,d,f,u).apply(null,e(r,o)),B=JU(t,i-$[0],s-$[1],d,f,u);return h=hU(a,l,c),M=XH(e,B),I=XH(h,M),x=ZU(M,_),Z()}function Z(){return A=O=null,D}return function(){return e=n.apply(this,arguments),D.invert=e.invert&&j,Y()}}function wD(n){var e=0,t=dt/3,i=eY(n),s=i(e,t);return s.parallels=function(r){return arguments.length?i(e=r[0]*Jt,t=r[1]*Jt):[e*ys,t*ys]},s}function N2e(n){var e=tt(n);function t(i,s){return[i*e,Xe(s)/e]}return t.invert=function(i,s){return[i/e,qr(s*e)]},t}function L2e(n,e){var t=Xe(n),i=(t+Xe(e))/2;if(It(i)<We)return N2e(n);var s=1+t*(2*i-t),r=Cs(s)/i;function o(a,l){var c=Cs(s-2*i*Xe(l))/i;return[c*Xe(a*=i),r-c*tt(a)]}return o.invert=function(a,l){var c=r-l,h=Ga(a,It(c))*Kr(c);return c*i<0&&(h-=dt*Kr(a)*Kr(c)),[h/i,qr((s-(a*a+c*c)*i*i)/(2*i))]},o}function ZR(){return wD(L2e).scale(155.424).center([0,33.6442])}function tY(){return ZR().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function $2e(n){var e=n.length;return{point:function(t,i){for(var s=-1;++s<e;)n[s].point(t,i)},sphere:function(){for(var t=-1;++t<e;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<e;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<e;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<e;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<e;)n[t].polygonEnd()}}}function F2e(){var n,e,t=tY(),i,s=ZR().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r,o=ZR().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(d,f){l=[d,f]}};function h(d){var f=d[0],g=d[1];return l=null,i.point(f,g),l||(r.point(f,g),l)||(a.point(f,g),l)}h.invert=function(d){var f=t.scale(),g=t.translate(),p=(d[0]-g[0])/f,m=(d[1]-g[1])/f;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?s:m>=.166&&m<.234&&p>=-.214&&p<-.115?o:t).invert(d)},h.stream=function(d){return n&&e===d?n:n=$2e([t.stream(e=d),s.stream(d),o.stream(d)])},h.precision=function(d){return arguments.length?(t.precision(d),s.precision(d),o.precision(d),u()):t.precision()},h.scale=function(d){return arguments.length?(t.scale(d),s.scale(d*.35),o.scale(d),h.translate(t.translate())):t.scale()},h.translate=function(d){if(!arguments.length)return t.translate();var f=t.scale(),g=+d[0],p=+d[1];return i=t.translate(d).clipExtent([[g-.455*f,p-.238*f],[g+.455*f,p+.238*f]]).stream(c),r=s.translate([g-.307*f,p+.201*f]).clipExtent([[g-.425*f+We,p+.12*f+We],[g-.214*f-We,p+.234*f-We]]).stream(c),a=o.translate([g-.205*f,p+.212*f]).clipExtent([[g-.214*f+We,p+.166*f+We],[g-.115*f-We,p+.234*f-We]]).stream(c),u()},h.fitExtent=function(d,f){return bD(h,d,f)},h.fitSize=function(d,f){return KU(h,d,f)},h.fitWidth=function(d,f){return qU(h,d,f)},h.fitHeight=function(d,f){return XU(h,d,f)};function u(){return n=e=null,h}return h.scale(1070)}function nY(n){return function(e,t){var i=tt(e),s=tt(t),r=n(i*s);return r===1/0?[2,0]:[r*s*Xe(e),r*Xe(t)]}}function bv(n){return function(e,t){var i=Cs(e*e+t*t),s=n(i),r=Xe(s),o=tt(s);return[Ga(e*r,i*o),qr(i&&t*r/i)]}}var iY=nY(function(n){return Cs(2/(1+n))});iY.invert=bv(function(n){return 2*qr(n/2)});function B2e(){return uc(iY).scale(124.75).clipAngle(180-.001)}var sY=nY(function(n){return(n=oU(n))&&n/Xe(n)});sY.invert=bv(function(n){return n});function V2e(){return uc(sY).scale(79.4188).clipAngle(180-.001)}function JR(n,e){return[n,DR(UH((Gn+e)/2))]}JR.invert=function(n,e){return[n,2*lp(rU(e))-Gn]};function W2e(){return rY(JR).scale(961/dr)}function rY(n){var e=uc(n),t=e.center,i=e.scale,s=e.translate,r=e.clipExtent,o=null,a,l,c;e.scale=function(u){return arguments.length?(i(u),h()):i()},e.translate=function(u){return arguments.length?(s(u),h()):s()},e.center=function(u){return arguments.length?(t(u),h()):t()},e.clipExtent=function(u){return arguments.length?(u==null?o=a=l=c=null:(o=+u[0][0],a=+u[0][1],l=+u[1][0],c=+u[1][1]),h()):o==null?null:[[o,a],[l,c]]};function h(){var u=dt*i(),d=e(e2e(e.rotate()).invert([0,0]));return r(o==null?[[d[0]-u,d[1]-u],[d[0]+u,d[1]+u]]:n===JR?[[Math.max(d[0]-u,o),a],[Math.min(d[0]+u,l),c]]:[[o,Math.max(d[1]-u,a)],[l,Math.min(d[1]+u,c)]])}return h()}function e1(n){return UH((Gn+n)/2)}function j2e(n,e){var t=tt(n),i=n===e?Xe(n):DR(t/tt(e))/DR(e1(e)/e1(n)),s=t*zH(e1(n),i)/i;if(!i)return JR;function r(o,a){s>0?a<-Gn+We&&(a=-Gn+We):a>Gn-We&&(a=Gn-We);var l=s/zH(e1(a),i);return[l*Xe(i*o),s-l*tt(i*o)]}return r.invert=function(o,a){var l=s-a,c=Kr(i)*Cs(o*o+l*l),h=Ga(o,It(l))*Kr(l);return l*i<0&&(h-=dt*Kr(o)*Kr(l)),[h/i,2*lp(zH(s/c,1/i))-Gn]},r}function z2e(){return wD(j2e).scale(109.5).parallels([30,30])}function t1(n,e){return[n,e]}t1.invert=t1;function U2e(){return uc(t1).scale(152.63)}function Y2e(n,e){var t=tt(n),i=n===e?Xe(n):(t-tt(e))/(e-n),s=t/i+n;if(It(i)<We)return t1;function r(o,a){var l=s-a,c=i*o;return[l*Xe(c),s-l*tt(c)]}return r.invert=function(o,a){var l=s-a,c=Ga(o,It(l))*Kr(l);return l*i<0&&(c-=dt*Kr(o)*Kr(l)),[c/i,s-Kr(i)*Cs(o*o+l*l)]},r}function G2e(){return wD(Y2e).scale(131.154).center([0,13.9389])}var wv=1.340264,vv=-.081106,yv=893e-6,Cv=.003796,n1=Cs(3)/2,K2e=12;function oY(n,e){var t=qr(n1*Xe(e)),i=t*t,s=i*i*i;return[n*tt(t)/(n1*(wv+3*vv*i+s*(7*yv+9*Cv*i))),t*(wv+vv*i+s*(yv+Cv*i))]}oY.invert=function(n,e){for(var t=e,i=t*t,s=i*i*i,r=0,o,a,l;r<K2e&&(a=t*(wv+vv*i+s*(yv+Cv*i))-e,l=wv+3*vv*i+s*(7*yv+9*Cv*i),t-=o=a/l,i=t*t,s=i*i*i,!(It(o)<jH));++r);return[n1*n*(wv+3*vv*i+s*(7*yv+9*Cv*i))/tt(t),qr(Xe(t)/n1)]};function q2e(){return uc(oY).scale(177.158)}function aY(n,e){var t=tt(e),i=tt(n)*t;return[t*Xe(n)/i,Xe(e)/i]}aY.invert=bv(lp);function X2e(){return uc(aY).scale(144.049).clipAngle(60)}function lY(n,e){var t=e*e,i=t*t;return[n*(.8707-.131979*t+i*(-.013791+i*(.003971*t-.001529*i))),e*(1.007226+t*(.015085+i*(-.044475+.028874*t-.005916*i)))]}lY.invert=function(n,e){var t=e,i=25,s;do{var r=t*t,o=r*r;t-=s=(t*(1.007226+r*(.015085+o*(-.044475+.028874*r-.005916*o)))-e)/(1.007226+r*(.015085*3+o*(-.044475*7+.028874*9*r-.005916*11*o)))}while(It(s)>We&&--i>0);return[n/(.8707+(r=t*t)*(-.131979+r*(-.013791+r*r*r*(.003971-.001529*r)))),t]};function Q2e(){return uc(lY).scale(175.295)}function cY(n,e){return[tt(e)*Xe(n),Xe(e)]}cY.invert=bv(qr);function vD(){return uc(cY).scale(249.5).clipAngle(90+We)}function hY(n,e){var t=tt(e),i=1+tt(n)*t;return[t*Xe(n)/i,Xe(e)/i]}hY.invert=bv(function(n){return 2*lp(n)});function Z2e(){return uc(hY).scale(250).clipAngle(142)}function uY(n,e){return[DR(UH((Gn+e)/2)),-n]}uY.invert=function(n,e){return[-e,2*lp(rU(n))-Gn]};function J2e(){var n=rY(uY),e=n.center,t=n.rotate;return n.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},n.rotate=function(i){return arguments.length?t([i[0],i[1],i.length>2?i[2]+90:90]):(i=t(),[i[0],i[1],i[2]-90])},t([0,0,90]).scale(159.155)}function Lt(n){for(var e=n.length/6|0,t=new Array(e),i=0;i<e;)t[i]="#"+n.slice(i*6,++i*6);return t}function i1(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function yD(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function fp(){}var zd=.7,gp=1/zd,pp="\\s*([+-]?\\d+)\\s*",Sv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eFe=/^#([0-9a-f]{3,8})$/,tFe=new RegExp(`^rgb\\(${pp},${pp},${pp}\\)$`),nFe=new RegExp(`^rgb\\(${Xa},${Xa},${Xa}\\)$`),iFe=new RegExp(`^rgba\\(${pp},${pp},${pp},${Sv}\\)$`),sFe=new RegExp(`^rgba\\(${Xa},${Xa},${Xa},${Sv}\\)$`),rFe=new RegExp(`^hsl\\(${Sv},${Xa},${Xa}\\)$`),oFe=new RegExp(`^hsla\\(${Sv},${Xa},${Xa},${Sv}\\)$`),dY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};i1(fp,CD,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:fY,formatHex:fY,formatHex8:aFe,formatHsl:lFe,formatRgb:gY,toString:gY});function fY(){return this.rgb().formatHex()}function aFe(){return this.rgb().formatHex8()}function lFe(){return yY(this).formatHsl()}function gY(){return this.rgb().formatRgb()}function CD(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=eFe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?pY(e):t===3?new is(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?s1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?s1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tFe.exec(n))?new is(e[1],e[2],e[3],1):(e=nFe.exec(n))?new is(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=iFe.exec(n))?s1(e[1],e[2],e[3],e[4]):(e=sFe.exec(n))?s1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rFe.exec(n))?vY(e[1],e[2]/100,e[3]/100,1):(e=oFe.exec(n))?vY(e[1],e[2]/100,e[3]/100,e[4]):dY.hasOwnProperty(n)?pY(dY[n]):n==="transparent"?new is(NaN,NaN,NaN,0):null}function pY(n){return new is(n>>16&255,n>>8&255,n&255,1)}function s1(n,e,t,i){return i<=0&&(n=e=t=NaN),new is(n,e,t,i)}function mY(n){return n instanceof fp||(n=CD(n)),n?(n=n.rgb(),new is(n.r,n.g,n.b,n.opacity)):new is}function _v(n,e,t,i){return arguments.length===1?mY(n):new is(n,e,t,i??1)}function is(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}i1(is,_v,yD(fp,{brighter(n){return n=n==null?gp:Math.pow(gp,n),new is(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?zd:Math.pow(zd,n),new is(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new is(Ud(this.r),Ud(this.g),Ud(this.b),r1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bY,formatHex:bY,formatHex8:cFe,formatRgb:wY,toString:wY}));function bY(){return`#${Yd(this.r)}${Yd(this.g)}${Yd(this.b)}`}function cFe(){return`#${Yd(this.r)}${Yd(this.g)}${Yd(this.b)}${Yd((isNaN(this.opacity)?1:this.opacity)*255)}`}function wY(){const n=r1(this.opacity);return`${n===1?"rgb(":"rgba("}${Ud(this.r)}, ${Ud(this.g)}, ${Ud(this.b)}${n===1?")":`, ${n})`}`}function r1(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ud(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Yd(n){return n=Ud(n),(n<16?"0":"")+n.toString(16)}function vY(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Bo(n,e,t,i)}function yY(n){if(n instanceof Bo)return new Bo(n.h,n.s,n.l,n.opacity);if(n instanceof fp||(n=CD(n)),!n)return new Bo;if(n instanceof Bo)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,s=Math.min(e,t,i),r=Math.max(e,t,i),o=NaN,a=r-s,l=(r+s)/2;return a?(e===r?o=(t-i)/a+(t<i)*6:t===r?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?r+s:2-r-s,o*=60):a=l>0&&l<1?0:o,new Bo(o,a,l,n.opacity)}function hFe(n,e,t,i){return arguments.length===1?yY(n):new Bo(n,e,t,i??1)}function Bo(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}i1(Bo,hFe,yD(fp,{brighter(n){return n=n==null?gp:Math.pow(gp,n),new Bo(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?zd:Math.pow(zd,n),new Bo(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,s=2*t-i;return new is(SD(n>=240?n-240:n+120,s,i),SD(n,s,i),SD(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new Bo(CY(this.h),o1(this.s),o1(this.l),r1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=r1(this.opacity);return`${n===1?"hsl(":"hsla("}${CY(this.h)}, ${o1(this.s)*100}%, ${o1(this.l)*100}%${n===1?")":`, ${n})`}`}}));function CY(n){return n=(n||0)%360,n<0?n+360:n}function o1(n){return Math.max(0,Math.min(1,n||0))}function SD(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const uFe=Math.PI/180,dFe=180/Math.PI;var SY=-.14861,_D=1.78277,RD=-.29227,a1=-.90649,Rv=1.97294,_Y=Rv*a1,RY=Rv*_D,xY=_D*RD-a1*SY;function fFe(n){if(n instanceof Gd)return new Gd(n.h,n.s,n.l,n.opacity);n instanceof is||(n=mY(n));var e=n.r/255,t=n.g/255,i=n.b/255,s=(xY*i+_Y*e-RY*t)/(xY+_Y-RY),r=i-s,o=(Rv*(t-s)-RD*r)/a1,a=Math.sqrt(o*o+r*r)/(Rv*s*(1-s)),l=a?Math.atan2(o,r)*dFe-120:NaN;return new Gd(l<0?l+360:l,a,s,n.opacity)}function Qa(n,e,t,i){return arguments.length===1?fFe(n):new Gd(n,e,t,i??1)}function Gd(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}i1(Gd,Qa,yD(fp,{brighter(n){return n=n==null?gp:Math.pow(gp,n),new Gd(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?zd:Math.pow(zd,n),new Gd(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*uFe,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(n),s=Math.sin(n);return new is(255*(e+t*(SY*i+_D*s)),255*(e+t*(RD*i+a1*s)),255*(e+t*(Rv*i)),this.opacity)}}));function gFe(n,e,t,i,s){var r=n*n,o=r*n;return((1-3*n+3*r-o)*e+(4-6*r+3*o)*t+(1+3*n+3*r-3*o)*i+o*s)/6}function pFe(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),s=n[i],r=n[i+1],o=i>0?n[i-1]:2*s-r,a=i<e-1?n[i+2]:2*r-s;return gFe((t-i/e)*e,o,s,r,a)}}const xD=n=>()=>n;function EY(n,e){return function(t){return n+t*e}}function mFe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function bFe(n,e){var t=e-n;return t?EY(n,t>180||t<-180?t-360*Math.round(t/360):t):xD(isNaN(n)?e:n)}function wFe(n){return(n=+n)==1?mp:function(e,t){return t-e?mFe(e,t,n):xD(isNaN(e)?t:e)}}function mp(n,e){var t=e-n;return t?EY(n,t):xD(isNaN(n)?e:n)}(function n(e){var t=wFe(e);function i(s,r){var o=t((s=_v(s)).r,(r=_v(r)).r),a=t(s.g,r.g),l=t(s.b,r.b),c=mp(s.opacity,r.opacity);return function(h){return s.r=o(h),s.g=a(h),s.b=l(h),s.opacity=c(h),s+""}}return i.gamma=n,i})(1);function vFe(n){return function(e){var t=e.length,i=new Array(t),s=new Array(t),r=new Array(t),o,a;for(o=0;o<t;++o)a=_v(e[o]),i[o]=a.r||0,s[o]=a.g||0,r[o]=a.b||0;return i=n(i),s=n(s),r=n(r),a.opacity=1,function(l){return a.r=i(l),a.g=s(l),a.b=r(l),a+""}}}var yFe=vFe(pFe);function TY(n){return function e(t){t=+t;function i(s,r){var o=n((s=Qa(s)).h,(r=Qa(r)).h),a=mp(s.s,r.s),l=mp(s.l,r.l),c=mp(s.opacity,r.opacity);return function(h){return s.h=o(h),s.s=a(h),s.l=l(Math.pow(h,t)),s.opacity=c(h),s+""}}return i.gamma=e,i}(1)}TY(bFe);var ED=TY(mp);const an=n=>yFe(n[n.length-1]);var CFe=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Lt);const SFe=an(CFe);var _Fe=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Lt);const RFe=an(_Fe);var xFe=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Lt);const EFe=an(xFe);var TFe=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Lt);const MFe=an(TFe);var AFe=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Lt);const PFe=an(AFe);var IFe=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Lt);const OFe=an(IFe);var kFe=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Lt);const HFe=an(kFe);var DFe=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Lt);const NFe=an(DFe);var LFe=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Lt);const $Fe=an(LFe);var FFe=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Lt);const BFe=an(FFe);var VFe=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Lt);const WFe=an(VFe);var jFe=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Lt);const zFe=an(jFe);var UFe=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Lt);const YFe=an(UFe);var GFe=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Lt);const KFe=an(GFe);var qFe=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Lt);const XFe=an(qFe);var QFe=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Lt);const ZFe=an(QFe);var JFe=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Lt);const eBe=an(JFe);var tBe=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Lt);const nBe=an(tBe);var iBe=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Lt);const sBe=an(iBe);var rBe=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Lt);const oBe=an(rBe);var aBe=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Lt);const lBe=an(aBe);var cBe=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Lt);const hBe=an(cBe);var uBe=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Lt);const dBe=an(uBe);var fBe=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Lt);const gBe=an(fBe);var pBe=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Lt);const mBe=an(pBe);var bBe=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Lt);const wBe=an(bBe);var vBe=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Lt);const yBe=an(vBe);function CBe(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-n*(35.34-n*(2381.73-n*(6402.7-n*(7024.72-n*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+n*(170.73+n*(52.82-n*(131.46-n*(176.58-n*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+n*(442.36-n*(2482.43-n*(6167.24-n*(6614.94-n*2475.67)))))))+")"}const SBe=ED(Qa(300,.5,0),Qa(-240,.5,1));var _Be=ED(Qa(-100,.75,.35),Qa(80,1.5,.8)),RBe=ED(Qa(260,.75,.35),Qa(80,1.5,.8)),l1=Qa();function xBe(n){(n<0||n>1)&&(n-=Math.floor(n));var e=Math.abs(n-.5);return l1.h=360*n-100,l1.s=1.5-1.5*e,l1.l=.8-.9*e,l1+""}var c1=_v(),EBe=Math.PI/3,TBe=Math.PI*2/3;function MBe(n){var e;return n=(.5-n)*Math.PI,c1.r=255*(e=Math.sin(n))*e,c1.g=255*(e=Math.sin(n+EBe))*e,c1.b=255*(e=Math.sin(n+TBe))*e,c1+""}function ABe(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+n*(1172.33-n*(10793.56-n*(33300.12-n*(38394.49-n*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+n*(557.33+n*(1225.33-n*(3574.96-n*(1073.77+n*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+n*(3211.1-n*(15327.97-n*(27814-n*(22569.18-n*6838.66)))))))+")"}function h1(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}const PBe=h1(Lt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var IBe=h1(Lt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),OBe=h1(Lt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),kBe=h1(Lt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function HBe(n){return n}function DBe(n){if(n==null)return HBe;var e,t,i=n.scale[0],s=n.scale[1],r=n.translate[0],o=n.translate[1];return function(a,l){l||(e=t=0);var c=2,h=a.length,u=new Array(h);for(u[0]=(e+=a[0])*i+r,u[1]=(t+=a[1])*s+o;c<h;)u[c]=a[c],++c;return u}}function NBe(n,e){for(var t,i=n.length,s=i-e;s<--i;)t=n[s],n[s++]=n[i],n[i]=t}function LBe(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return MY(n,t)})}:MY(n,e)}function MY(n,e){var t=e.id,i=e.bbox,s=e.properties==null?{}:e.properties,r=$Be(n,e);return t==null&&i==null?{type:"Feature",properties:s,geometry:r}:i==null?{type:"Feature",id:t,properties:s,geometry:r}:{type:"Feature",id:t,bbox:i,properties:s,geometry:r}}function $Be(n,e){var t=DBe(n.transform),i=n.arcs;function s(h,u){u.length&&u.pop();for(var d=i[h<0?~h:h],f=0,g=d.length;f<g;++f)u.push(t(d[f],f));h<0&&NBe(u,g)}function r(h){return t(h)}function o(h){for(var u=[],d=0,f=h.length;d<f;++d)s(h[d],u);return u.length<2&&u.push(u[0]),u}function a(h){for(var u=o(h);u.length<4;)u.push(u[0]);return u}function l(h){return h.map(a)}function c(h){var u=h.type,d;switch(u){case"GeometryCollection":return{type:u,geometries:h.geometries.map(c)};case"Point":d=r(h.coordinates);break;case"MultiPoint":d=h.coordinates.map(r);break;case"LineString":d=o(h.arcs);break;case"MultiLineString":d=h.arcs.map(o);break;case"Polygon":d=l(h.arcs);break;case"MultiPolygon":d=h.arcs.map(l);break;default:return null}return{type:u,coordinates:d}}return c(e)}const xv={geoAzimuthalEqualArea:B2e,geoAzimuthalEquidistant:V2e,geoGnomonic:X2e,geoOrthographic:vD,geoStereographic:Z2e,geoEqualEarth:q2e,geoAlbers:tY,geoAlbersUsa:F2e,geoConicConformal:z2e,geoConicEqualArea:ZR,geoConicEquidistant:G2e,geoEquirectangular:U2e,geoMercator:W2e,geoTransverseMercator:J2e,geoNaturalEarth1:Q2e};Object.keys(xv).forEach(n=>{xv[`${n.charAt(3).toLowerCase()}${n.slice(4)}`]=xv[n]});class Kd extends Nc{constructor(e){super(e),this.outlineBounds=null,this.oldChartBounds=null,this.geoPath=GU()}init(e){e.position="chartArea",super.init(e),typeof e.projection=="function"?this.projection=e.projection:this.projection=(xv[e.projection]||xv.albersUsa)(),this.geoPath.projection(this.projection),this.outlineBounds=null,this.oldChartBounds=null}computeBounds(e){const t=GU(this.projection.fitWidth(1e3,e)).bounds(e),i=Math.ceil(t[1][1]-t[0][1]),s=Math.ceil(t[1][0]-t[0][0]),r=this.projection.translate();this.outlineBounds={width:s,height:i,aspectRatio:s/i,refScale:this.projection.scale(),refX:r[0],refY:r[1]}}updateBounds(){const e=this.chart.chartArea,t=this.outlineBounds;if(!t)return!1;const i=this.options.padding,s=typeof i=="number"?i:i.top,r=typeof i=="number"?i:i.left,o=typeof i=="number"?i:i.bottom,a=typeof i=="number"?i:i.right,l=e.right-e.left-r-a,c=e.bottom-e.top-s-o,h=this.oldChartBounds;this.oldChartBounds={chartWidth:l,chartHeight:c};const u=Math.min(l/t.width,c/t.height),d=t.width*u,f=t.height*u,g=(l-d)*.5+e.left+r,p=(c-f)*.5+e.top+s,m=this.options;return this.projection.scale(t.refScale*u*m.projectionScale).translate([u*t.refX+g+m.projectionOffset[0],u*t.refY+p+m.projectionOffset[1]]),!h||h.chartWidth!==this.oldChartBounds.chartWidth||h.chartHeight!==this.oldChartBounds.chartHeight}}Kd.id="projection",Kd.defaults={projection:"albersUsa",projectionScale:1,projectionOffset:[0,0],padding:0},Kd.descriptors={_scriptable:n=>n!=="projection",_indexable:n=>n!=="projectionOffset"};const u1={position:"chartArea",property:"value",grid:{z:1,drawOnChartArea:!1},ticks:{z:1},legend:{align:"right",position:"bottom-right",length:100,width:50,margin:8,indicatorWidth:10}};function FBe(n){const{indicatorWidth:e,align:t,margin:i}=n,s=(typeof i=="number"?i:i.left)+(t==="right"?e:0),r=(typeof i=="number"?i:i.top)+(t==="bottom"?e:0),o=(typeof i=="number"?i:i.right)+(t==="left"?e:0),a=(typeof i=="number"?i:i.bottom)+(t==="top"?e:0);return{left:s,top:r,right:o,bottom:a}}function BBe(n,e,t,i,s){const{indicatorWidth:r,align:o,position:a}=e,l=o==="top"||o==="bottom",c=(o==="left"?s.w:t)+(l?r:0),h=(o==="top"?s.h:i)+(l?0:r),u=FBe(e);if(typeof a=="string")switch(a){case"top-left":return[u.left,u.top];case"top":return[(n.right-c)/2,u.top];case"left":return[u.left,(n.bottom-h)/2];case"top-right":return[n.right-c-u.right,u.top];case"bottom-right":return[n.right-c-u.right,n.bottom-h-u.bottom];case"bottom":return[(n.right-c)/2,n.bottom-h-u.bottom];case"bottom-left":return[u.left,n.bottom-h-u.bottom];default:return[n.right-c-u.right,(n.bottom-h)/2]}return[a.x,a.y]}class bp extends Lf{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(e){e.position="chartArea",super.init(e),this.axis="r"}parse(e,t){return e&&typeof e[this.options.property]=="number"?e[this.options.property]:super.parse(e,t)}isHorizontal(){return this.options.legend.align==="top"||this.options.legend.align==="bottom"}_getNormalizedValue(e){return e==null||Number.isNaN(e)?null:(e-this._startValue)/this._valueRange}update(e,t,i){const s=Math.min(t,this.bottom==null?Number.POSITIVE_INFINITY:this.bottom),r=Math.min(e,this.right==null?Number.POSITIVE_INFINITY:this.right),o=this.options.legend,a=this.isHorizontal(),l=(f,g)=>f<1?g*f:f,c=Math.min(r,l(a?o.length:o.width,r))-(a?0:o.indicatorWidth),h=Math.min(s,l(a?o.width:o.length,s))-(a?o.indicatorWidth:0);this.legendSize={w:c,h},this.bottom=h,this.height=h,this.right=c,this.width=c;const u=this.options.position;this.options.position=this.options.legend.align;const d=super.update(c,h,i);return this.options.position=u,this.height=Math.min(h,this.height),this.width=Math.min(c,this.width),d}_computeLabelArea(){}draw(e){if(!this._isVisible())return;const t=BBe(e,this.options.legend,this.width,this.height,this.legendSize),{ctx:i}=this;i.save(),i.translate(t[0],t[1]);const s=this.options.position;this.options.position=this.options.legend.align,super.draw({...e,bottom:this.height+10,right:this.width}),this.options.position=s;const{indicatorWidth:r}=this.options.legend;switch(this.options.legend.align){case"left":i.translate(this.legendSize.w,0);break;case"top":i.translate(0,this.legendSize.h);break;case"bottom":i.translate(0,-r);break;default:i.translate(-r,0);break}this._drawIndicator(),i.restore()}_drawIndicator(){}}class AY extends $f{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(e){bp.prototype.init.call(this,e)}parse(e,t){return bp.prototype.parse.call(this,e,t)}isHorizontal(){return this.options.legend.align==="top"||this.options.legend.align==="bottom"}_getNormalizedValue(e){return e==null||Number.isNaN(e)?null:(Math.log10(e)-this._startValue)/this._valueRange}update(e,t,i){return bp.prototype.update.call(this,e,t,i)}_computeLabelArea(){}draw(e){return bp.prototype.draw.call(this,e)}_drawIndicator(){}}const dc={interpolateBlues:hBe,interpolateBrBG:SFe,interpolateBuGn:BFe,interpolateBuPu:WFe,interpolateCividis:CBe,interpolateCool:RBe,interpolateCubehelixDefault:SBe,interpolateGnBu:zFe,interpolateGreens:dBe,interpolateGreys:gBe,interpolateInferno:OBe,interpolateMagma:IBe,interpolateOrRd:YFe,interpolateOranges:yBe,interpolatePRGn:RFe,interpolatePiYG:EFe,interpolatePlasma:kBe,interpolatePuBu:XFe,interpolatePuBuGn:KFe,interpolatePuOr:MFe,interpolatePuRd:ZFe,interpolatePurples:mBe,interpolateRainbow:xBe,interpolateRdBu:PFe,interpolateRdGy:OFe,interpolateRdPu:eBe,interpolateRdYlBu:HFe,interpolateRdYlGn:NFe,interpolateReds:wBe,interpolateSinebow:MBe,interpolateSpectral:$Fe,interpolateTurbo:ABe,interpolateViridis:PBe,interpolateWarm:_Be,interpolateYlGn:sBe,interpolateYlGnBu:nBe,interpolateYlOrBr:oBe,interpolateYlOrRd:lBe};Object.keys(dc).forEach(n=>{dc[`${n.charAt(11).toLowerCase()}${n.slice(12)}`]=dc[n],dc[n.slice(11)]=dc[n]});function PY(n,e){const t=1/e;if(n<=t)return 0;if(n>=1-t)return 1;for(let i=0;i<1;i+=t)if(n<i)return i-t/2;return n}const IY={interpolate:"blues",missing:"transparent",quantize:0};class kh extends bp{get interpolate(){const e=this.options;return e?typeof e.interpolate=="function"?e.interpolate:dc[e.interpolate]||dc.blues:t=>`rgb(${t},${t},${t})`}getColorForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getColor(t)}getColor(e){let t=e;return this.options.quantize>0&&(t=PY(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){const{indicatorWidth:e}=this.options.legend,t=this._reversePixels;if(this.isHorizontal()){const i=this.width;if(this.options.quantize>0){const s=i/this.options.quantize,r=t?o=>i-s-o:o=>o;for(let o=0;o<i;o+=s){const a=(o+s/2)/i;this.ctx.fillStyle=this.getColor(a),this.ctx.fillRect(r(o),0,s,e)}}else{const s=t?r=>i-1-r:r=>r;for(let r=0;r<i;r+=1)this.ctx.fillStyle=this.getColor((r+.5)/i),this.ctx.fillRect(s(r),0,1,e)}}else{const i=this.height;if(this.options.quantize>0){const s=i/this.options.quantize,r=t?o=>i-s-o:o=>o;for(let o=0;o<i;o+=s){const a=(o+s/2)/i;this.ctx.fillStyle=this.getColor(a),this.ctx.fillRect(0,r(o),e,s)}}else{const s=t?r=>i-1-r:r=>r;for(let r=0;r<i;r+=1)this.ctx.fillStyle=this.getColor((r+.5)/i),this.ctx.fillRect(0,s(r),e,1)}}}}kh.id="color",kh.defaults=Xs({},[Lf.defaults,u1,IY]),kh.descriptors={_scriptable:n=>n!=="interpolate",_indexable:!1};class TD extends AY{constructor(){super(...arguments),this.interpolate=e=>`rgb(${e},${e},${e})`}init(e){super.init(e),typeof e.interpolate=="function"?this.interpolate=e.interpolate:this.interpolate=dc[e.interpolate]||dc.blues}getColorForValue(e){return kh.prototype.getColorForValue.call(this,e)}getColor(e){let t=e;return this.options.quantize>0&&(t=PY(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){return kh.prototype._drawIndicator.call(this)}}TD.id="colorLogarithmic",TD.defaults=Xs({},[$f.defaults,u1,IY]),TD.descriptors={_scriptable:n=>n!=="interpolate",_indexable:!1};const OY={missing:1,mode:"area",range:[2,20],legend:{align:"bottom",length:90,width:70,indicatorWidth:42}};class qd extends bp{constructor(){super(...arguments),this._model=null}getSizeForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(e){const[t,i]=this.options.range;if(this.options.mode==="area"){const r=i*i*Math.PI,o=t*t*Math.PI,a=r-o,l=e*a+o;return Math.sqrt(l/Math.PI)}const s=i-t;return e*s+t}_drawIndicator(){const{ctx:e}=this,t=this.options.legend.indicatorWidth/2,i=this.isHorizontal(),s=this.ticks,r=this.getLabelItems(),o=r?r.map(a=>({[i?"x":"y"]:a.options.translation[i?0:1]})):s.map((a,l)=>({[i?"x":"y"]:this.getPixelForTick(l)}));if((this._gridLineItems||[]).forEach(a=>{if(e.save(),e.strokeStyle=a.color,e.lineWidth=a.width,e.setLineDash&&(e.setLineDash(a.borderDash),e.lineDashOffset=a.borderDashOffset),e.beginPath(),this.options.grid.drawTicks)switch(this.options.legend.align){case"left":e.moveTo(0,a.ty1),e.lineTo(t,a.ty2);break;case"top":e.moveTo(a.tx1,0),e.lineTo(a.tx2,t);break;case"bottom":e.moveTo(a.tx1,t),e.lineTo(a.tx2,t*2);break;default:e.moveTo(t,a.ty1),e.lineTo(t*2,a.ty2);break}e.stroke(),e.restore()}),this._model){const a=this._model;e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth||0,e.fillStyle=a.backgroundColor}else e.fillStyle="blue";s.forEach((a,l)=>{const c=o[l],h=this.getSizeForValue(a.value),u=i?c.x:t,d=i?t:c.y,f={pointStyle:"circle",borderWidth:0,...this._model||{},radius:h};By(e,f,u,d)})}}qd.id="size",qd.defaults=Xs({},[Lf.defaults,u1,OY]),qd.descriptors={_scriptable:!0,_indexable:n=>n!=="range"};class kY extends AY{constructor(){super(...arguments),this._model=null}getSizeForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(e){return qd.prototype.getSizeImpl.call(this,e)}_drawIndicator(){qd.prototype._drawIndicator.call(this)}}kY.id="sizeLogarithmic",kY.defaults=Xs({},[$f.defaults,u1,OY]);function VBe(n,e){return[[n[0][0]-e,n[0][1]-e],[n[1][0]+e,n[1][1]+e]]}class fc extends _r{constructor(){super(...arguments),this.cache=void 0}inRange(e,t){const i=this.getBounds(),s=(Number.isNaN(e)||e>=i.x&&e<=i.x2)&&(Number.isNaN(t)||t>=i.y&&t<=i.y2),r=this.projectionScale.geoPath.projection();if(s&&!Number.isNaN(e)&&!Number.isNaN(t)&&typeof r.invert=="function"){const o=r.invert([e,t]);return o!=null&&b2e(this.feature,o)}return s}inXRange(e){return this.inRange(e,Number.NaN)}inYRange(e){return this.inRange(Number.NaN,e)}getCenterPoint(){if(this.cache&&this.cache.center)return this.cache.center;let e;if(this.center){const t=this.projectionScale.projection([this.center.longitude,this.center.latitude]);e={x:t[0],y:t[1]}}else{const t=this.projectionScale.geoPath.centroid(this.feature);e={x:t[0],y:t[1]}}return this.cache={...this.cache||{},center:e},e}getBounds(){if(this.cache&&this.cache.bounds)return this.cache.bounds;const e=VBe(this.projectionScale.geoPath.bounds(this.feature),this.options.borderWidth/2),t={x:e[0][0],x2:e[1][0],y:e[0][1],y2:e[1][1],width:e[1][0]-e[0][0],height:e[1][1]-e[0][1]};return this.cache={...this.cache||{},bounds:t},t}_drawInCache(e){const t=this.getBounds();if(!Number.isFinite(t.x))return;const i=this.cache&&this.cache.canvas?this.cache.canvas:e.createElement("canvas"),s=Math.floor(t.x),r=Math.floor(t.y),o=Math.ceil(t.x+t.width),a=Math.ceil(t.y+t.height),l=this.pixelRatio||1,c=Math.ceil(Math.max(o-s,1)*l),h=Math.ceil(Math.max(a-r,1)*l);if(c<=0||h<=0)return;i.width=c,i.height=h;const u=i.getContext("2d");u&&(u.clearRect(0,0,i.width,i.height),u.save(),u.scale(l,l),u.translate(-s,-r),this._drawImpl(u),u.restore(),this.cache={...this.cache||{},canvas:i,canvasKey:this._optionsToKey()})}_optionsToKey(){const{options:e}=this;return`${e.backgroundColor};${e.borderColor};${e.borderWidth};${this.pixelRatio}`}_drawImpl(e){const{feature:t}=this,{options:i}=this;e.beginPath(),this.projectionScale.geoPath.context(e)(t),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fill()),i.borderColor&&(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.stroke())}draw(e){const{feature:t}=this;if(!t)return;(!this.cache||this.cache.canvasKey!==this._optionsToKey())&&e.canvas.ownerDocument!=null&&this._drawInCache(e.canvas.ownerDocument);const i=this.getBounds();if(this.cache&&this.cache.canvas&&this.cache.canvas.width>0&&this.cache.canvas.height>0){const s=Math.floor(i.x),r=Math.floor(i.y),o=Math.ceil(i.x+i.width),a=Math.ceil(i.y+i.height),l=o-s,c=a-r;l>0&&c>0&&e.drawImage(this.cache.canvas,s,r,o-s,a-r)}else Number.isFinite(i.x)&&(e.save(),this._drawImpl(e),e.restore())}}fc.id="geoFeature",fc.defaults={...Nf.defaults,outlineBackgroundColor:null,outlineBorderWidth:0,graticuleBorderColor:"#CCCCCC",graticuleBorderWidth:0},fc.defaultRoutes={outlineBorderColor:"borderColor",...Nf.defaultRoutes||{}};const HY={showOutline:!1,showGraticule:!1,clipMap:!0},DY={scales:{projection:{axis:"x",type:Kd.id,position:"chartArea",display:!1}}};function NY(n){const e={...n};return Object.keys(n).forEach(t=>{let i=t;if(t.startsWith("outline")){const s=t.slice(7);i=s[0].toLowerCase()+s.slice(1)}else if(t.startsWith("hoverOutline"))i=`hover${t.slice(12)}`;else return;delete e[t],e[i]=n[t]}),e}class LY extends Sr{getGeoDataset(){return super.getDataset()}getGeoOptions(){return this.chart.options}getProjectionScale(){return this.getScaleForId("projection")}linkScales(){const e=this.getGeoDataset(),t=this.getMeta();t.xAxisID="projection",e.xAxisID="projection",t.yAxisID="projection",e.yAxisID="projection",t.xScale=this.getScaleForId("projection"),t.yScale=this.getScaleForId("projection"),this.getProjectionScale().computeBounds(this.resolveOutline())}showOutline(){return Ke(this.getGeoDataset().showOutline,this.getGeoOptions().showOutline)}clipMap(){return Ke(this.getGeoDataset().clipMap,this.getGeoOptions().clipMap)}getGraticule(){return Ke(this.getGeoDataset().showGraticule,this.getGeoOptions().showGraticule)}update(e){super.update(e);const t=this.getMeta(),i=this.getProjectionScale(),s=i.updateBounds();if(this.showOutline()){const r=t.dataset;if(s&&delete r.cache,r.projectionScale=i,r.pixelRatio=this.chart.currentDevicePixelRatio,e!=="resize"){const o=NY(this.resolveDatasetElementOptions(e)),a={feature:this.resolveOutline(),options:o};this.updateElement(r,void 0,a,e),this.getGraticule()&&(t.graticule=o)}}else this.getGraticule()&&e!=="resize"&&(t.graticule=NY(this.resolveDatasetElementOptions(e)));this.updateElements(t.data,0,t.data.length,e),s&&t.data.forEach(r=>delete r.cache)}resolveOutline(){const t=this.getGeoDataset().outline||{type:"Sphere"};return Array.isArray(t)?{type:"FeatureCollection",features:t}:t}showGraticule(){const e=this.getGraticule(),t=this.getMeta().graticule;if(!e||!t)return;const{ctx:i}=this.chart,r=this.getProjectionScale().geoPath.context(i);if(i.save(),i.beginPath(),typeof e=="boolean")e&&r(w2e());else{const o=AU();e.stepMajor&&o.stepMajor(e.stepMajor),e.stepMinor&&o.stepMinor(e.stepMinor),r(o())}i.strokeStyle=t.graticuleBorderColor,i.lineWidth=t.graticuleBorderWidth,i.stroke(),i.restore()}draw(){const{chart:e}=this,t=this.clipMap();let i=!1;(t===!0||t==="outline"||t==="outline+graticule")&&(i=!0,fu(e.ctx,e.chartArea)),this.showOutline()&&this.getMeta().dataset&&this.getMeta().dataset.draw.call(this.getMeta().dataset,e.ctx,e.chartArea),t===!0||t==="graticule"||t==="outline+graticule"?i||fu(e.ctx,e.chartArea):i&&(i=!1,gu(e.ctx)),this.showGraticule(),t===!0||t==="items"?i||fu(e.ctx,e.chartArea):i&&(i=!1,gu(e.ctx)),this.getMeta().data.forEach(s=>s.draw.call(s,e.ctx,e.chartArea)),i&&(i=!1,gu(e.ctx))}}function $Y(n,e,t,i=[],s=[]){cs.addControllers(t),Array.isArray(i)?cs.addElements(...i):cs.addElements(i),Array.isArray(s)?cs.addScales(...s):cs.addScales(s);const r=e;return r.type=n,r}class wp extends LY{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const e=this.getGeoDataset(),t=this.getMeta();t.vAxisID="color",t.rAxisID="color",e.vAxisID="color",e.rAxisID="color",t.rScale=this.getScaleForId("color"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,e.iAxisID=t.xAxisID}_getOtherScale(e){return e}parse(e,t){const i=this.getMeta().rScale,{data:s}=this.getDataset(),r=this._cachedMeta;for(let o=e;o<e+t;o+=1)r._parsed[o]={[i.axis]:i.parse(s[o],o)}}updateElements(e,t,i,s){const r=this.resolveDataElementOptions(t,s),o=this.getSharedOptions(r),a=this.includeOptions(s,o),l=this.getProjectionScale();this.updateSharedOptions(o,s,r);for(let c=t;c<t+i;c+=1){const h=e[c];h.projectionScale=l,h.feature=this._data[c].feature,h.center=this._data[c].center,h.pixelRatio=this.chart.currentDevicePixelRatio;const u=h.getCenterPoint(),d={x:u.x,y:u.y};a&&(d.options=o||this.resolveDataElementOptions(c,s)),this.updateElement(h,c,d,s)}}indexToColor(e){const t=this.getMeta().rScale;return t.getColorForValue(this.getParsed(e)[t.axis])}}wp.id="choropleth",wp.defaults=Xs({},[HY,{datasetElementType:fc.id,dataElementType:fc.id}]),wp.overrides=Xs({},[DY,{plugins:{tooltip:{callbacks:{title(){return""},label(n){var e,t,i,s;return n.formattedValue==null?(t=(e=n.chart.data)===null||e===void 0?void 0:e.labels)===null||t===void 0?void 0:t[n.dataIndex]:`${(s=(i=n.chart.data)===null||i===void 0?void 0:i.labels)===null||s===void 0?void 0:s[n.dataIndex]}: ${n.formattedValue}`}}},colors:{enabled:!1}},scales:{color:{type:kh.id,axis:"x"}},elements:{geoFeature:{backgroundColor(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToColor(n.dataIndex)}}}}]);class WBe extends Zs{constructor(e,t){super(e,$Y("choropleth",t,wp,fc,[kh,Kd]))}}WBe.id=wp.id;class Ev extends LY{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const e=this.getGeoDataset(),t=this.getMeta();t.vAxisID="size",t.rAxisID="size",e.vAxisID="size",e.rAxisID="size",t.rScale=this.getScaleForId("size"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,e.iAxisID=t.xAxisID}_getOtherScale(e){return e}parse(e,t){const i=this.getMeta().rScale,s=this.getDataset().data,r=this._cachedMeta;for(let o=e;o<e+t;o+=1){const a=s[o];r._parsed[o]={x:a.longitude==null?a.x:a.longitude,y:a.latitude==null?a.y:a.latitude,[i.axis]:i.parse(a,o)}}}updateElements(e,t,i,s){const r=s==="reset",o=this.resolveDataElementOptions(t,s),a=this.getSharedOptions(o),l=this.includeOptions(s,a),c=this.getProjectionScale();this.getMeta().rScale._model=o,this.updateSharedOptions(a,s,o);for(let h=t;h<t+i;h+=1){const u=e[h],d=this.getParsed(h),f=c.projection([d.x,d.y]),g={x:f?f[0]:0,y:f?f[1]:0,skip:Number.isNaN(d.x)||Number.isNaN(d.y)};l&&(g.options=a||this.resolveDataElementOptions(h,s),r&&(g.options.radius=0)),this.updateElement(u,h,g,s)}}indexToRadius(e){const t=this.getMeta().rScale;return t.getSizeForValue(this.getParsed(e)[t.axis])}}Ev.id="bubbleMap",Ev.defaults=Xs({},[HY,{dataElementType:xm.id,datasetElementType:fc.id,showOutline:!0,clipMap:"outline+graticule"}]),Ev.overrides=Xs({},[DY,{plugins:{tooltip:{callbacks:{title(){return""},label(n){var e,t,i,s;return n.formattedValue==null?(t=(e=n.chart.data)===null||e===void 0?void 0:e.labels)===null||t===void 0?void 0:t[n.dataIndex]:`${(s=(i=n.chart.data)===null||i===void 0?void 0:i.labels)===null||s===void 0?void 0:s[n.dataIndex]}: ${n.formattedValue}`}}}},scales:{size:{axis:"x",type:qd.id}},elements:{point:{radius(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)},hoverRadius(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)+1}}}}]);class jBe extends Zs{constructor(e,t){super(e,$Y("bubbleMap",t,Ev,fc,[qd,Kd]))}}jBe.id=Ev.id;var MD={},AD={};Object.defineProperty(AD,"__esModule",{value:!0});const zBe=[{country:"Afghanistan",alpha2:"AF",alpha3:"AFG",numeric:"004"},{country:"Åland Islands",alpha2:"AX",alpha3:"ALA",numeric:"248"},{country:"Albania",alpha2:"AL",alpha3:"ALB",numeric:"008"},{country:"Algeria",alpha2:"DZ",alpha3:"DZA",numeric:"012"},{country:"American Samoa",alpha2:"AS",alpha3:"ASM",numeric:"016"},{country:"Andorra",alpha2:"AD",alpha3:"AND",numeric:"020"},{country:"Angola",alpha2:"AO",alpha3:"AGO",numeric:"024"},{country:"Anguilla",alpha2:"AI",alpha3:"AIA",numeric:"660"},{country:"Antarctica",alpha2:"AQ",alpha3:"ATA",numeric:"010"},{country:"Antigua and Barbuda",alpha2:"AG",alpha3:"ATG",numeric:"028"},{country:"Argentina",alpha2:"AR",alpha3:"ARG",numeric:"032"},{country:"Armenia",alpha2:"AM",alpha3:"ARM",numeric:"051"},{country:"Aruba",alpha2:"AW",alpha3:"ABW",numeric:"533"},{country:"Australia",alpha2:"AU",alpha3:"AUS",numeric:"036"},{country:"Austria",alpha2:"AT",alpha3:"AUT",numeric:"040"},{country:"Azerbaijan",alpha2:"AZ",alpha3:"AZE",numeric:"031"},{country:"Bahamas",alpha2:"BS",alpha3:"BHS",numeric:"044"},{country:"Bahrain",alpha2:"BH",alpha3:"BHR",numeric:"048"},{country:"Bangladesh",alpha2:"BD",alpha3:"BGD",numeric:"050"},{country:"Barbados",alpha2:"BB",alpha3:"BRB",numeric:"052"},{country:"Belarus",alpha2:"BY",alpha3:"BLR",numeric:"112"},{country:"Belgium",alpha2:"BE",alpha3:"BEL",numeric:"056"},{country:"Belize",alpha2:"BZ",alpha3:"BLZ",numeric:"084"},{country:"Benin",alpha2:"BJ",alpha3:"BEN",numeric:"204"},{country:"Bermuda",alpha2:"BM",alpha3:"BMU",numeric:"060"},{country:"Bhutan",alpha2:"BT",alpha3:"BTN",numeric:"064"},{country:"Bolivia",alpha2:"BO",alpha3:"BOL",numeric:"068"},{country:"Bonaire, Sint Eustatius and Saba",alpha2:"BQ",alpha3:"BES",numeric:"535"},{country:"Bosnia and Herzegovina",alpha2:"BA",alpha3:"BIH",numeric:"070"},{country:"Botswana",alpha2:"BW",alpha3:"BWA",numeric:"072"},{country:"Bouvet Island",alpha2:"BV",alpha3:"BVT",numeric:"074"},{country:"Brazil",alpha2:"BR",alpha3:"BRA",numeric:"076"},{country:"British Indian Ocean Territory",alpha2:"IO",alpha3:"IOT",numeric:"086"},{country:"Brunei Darussalam",alpha2:"BN",alpha3:"BRN",numeric:"096"},{country:"Bulgaria",alpha2:"BG",alpha3:"BGR",numeric:"100"},{country:"Burkina Faso",alpha2:"BF",alpha3:"BFA",numeric:"854"},{country:"Burundi",alpha2:"BI",alpha3:"BDI",numeric:"108"},{country:"Cabo Verde",alpha2:"CV",alpha3:"CPV",numeric:"132"},{country:"Cambodia",alpha2:"KH",alpha3:"KHM",numeric:"116"},{country:"Cameroon",alpha2:"CM",alpha3:"CMR",numeric:"120"},{country:"Canada",alpha2:"CA",alpha3:"CAN",numeric:"124"},{country:"Cayman Islands",alpha2:"KY",alpha3:"CYM",numeric:"136"},{country:"Central African Republic",alpha2:"CF",alpha3:"CAF",numeric:"140"},{country:"Chad",alpha2:"TD",alpha3:"TCD",numeric:"148"},{country:"Chile",alpha2:"CL",alpha3:"CHL",numeric:"152"},{country:"China",alpha2:"CN",alpha3:"CHN",numeric:"156"},{country:"Christmas Island",alpha2:"CX",alpha3:"CXR",numeric:"162"},{country:"Cocos Islands",alpha2:"CC",alpha3:"CCK",numeric:"166"},{country:"Colombia",alpha2:"CO",alpha3:"COL",numeric:"170"},{country:"Comoros",alpha2:"KM",alpha3:"COM",numeric:"174"},{country:"Congo",alpha2:"CG",alpha3:"COG",numeric:"178"},{country:"Congo",alpha2:"CD",alpha3:"COD",numeric:"180"},{country:"Cook Islands",alpha2:"CK",alpha3:"COK",numeric:"184"},{country:"Costa Rica",alpha2:"CR",alpha3:"CRI",numeric:"188"},{country:"Côte d'Ivoire",alpha2:"CI",alpha3:"CIV",numeric:"384"},{country:"Croatia",alpha2:"HR",alpha3:"HRV",numeric:"191"},{country:"Cuba",alpha2:"CU",alpha3:"CUB",numeric:"192"},{country:"Curaçao",alpha2:"CW",alpha3:"CUW",numeric:"531"},{country:"Cyprus",alpha2:"CY",alpha3:"CYP",numeric:"196"},{country:"Czech Republic",alpha2:"CZ",alpha3:"CZE",numeric:"203"},{country:"Denmark",alpha2:"DK",alpha3:"DNK",numeric:"208"},{country:"Djibouti",alpha2:"DJ",alpha3:"DJI",numeric:"262"},{country:"Dominica",alpha2:"DM",alpha3:"DMA",numeric:"212"},{country:"Dominican Republic",alpha2:"DO",alpha3:"DOM",numeric:"214"},{country:"Ecuador",alpha2:"EC",alpha3:"ECU",numeric:"218"},{country:"Egypt",alpha2:"EG",alpha3:"EGY",numeric:"818"},{country:"El Salvador",alpha2:"SV",alpha3:"SLV",numeric:"222"},{country:"Equatorial Guinea",alpha2:"GQ",alpha3:"GNQ",numeric:"226"},{country:"Eritrea",alpha2:"ER",alpha3:"ERI",numeric:"232"},{country:"Estonia",alpha2:"EE",alpha3:"EST",numeric:"233"},{country:"Ethiopia",alpha2:"ET",alpha3:"ETH",numeric:"231"},{country:"Falkland Islands",alpha2:"FK",alpha3:"FLK",numeric:"238"},{country:"Faroe Islands",alpha2:"FO",alpha3:"FRO",numeric:"234"},{country:"Fiji",alpha2:"FJ",alpha3:"FJI",numeric:"242"},{country:"Finland",alpha2:"FI",alpha3:"FIN",numeric:"246"},{country:"France",alpha2:"FR",alpha3:"FRA",numeric:"250"},{country:"French Guiana",alpha2:"GF",alpha3:"GUF",numeric:"254"},{country:"French Polynesia",alpha2:"PF",alpha3:"PYF",numeric:"258"},{country:"French Southern Territories",alpha2:"TF",alpha3:"ATF",numeric:"260"},{country:"Gabon",alpha2:"GA",alpha3:"GAB",numeric:"266"},{country:"Gambia",alpha2:"GM",alpha3:"GMB",numeric:"270"},{country:"Georgia",alpha2:"GE",alpha3:"GEO",numeric:"268"},{country:"Germany",alpha2:"DE",alpha3:"DEU",numeric:"276"},{country:"Ghana",alpha2:"GH",alpha3:"GHA",numeric:"288"},{country:"Gibraltar",alpha2:"GI",alpha3:"GIB",numeric:"292"},{country:"Greece",alpha2:"GR",alpha3:"GRC",numeric:"300"},{country:"Greenland",alpha2:"GL",alpha3:"GRL",numeric:"304"},{country:"Grenada",alpha2:"GD",alpha3:"GRD",numeric:"308"},{country:"Guadeloupe",alpha2:"GP",alpha3:"GLP",numeric:"312"},{country:"Guam",alpha2:"GU",alpha3:"GUM",numeric:"316"},{country:"Guatemala",alpha2:"GT",alpha3:"GTM",numeric:"320"},{country:"Guernsey",alpha2:"GG",alpha3:"GGY",numeric:"831"},{country:"Guinea",alpha2:"GN",alpha3:"GIN",numeric:"324"},{country:"Guinea-Bissau",alpha2:"GW",alpha3:"GNB",numeric:"624"},{country:"Guyana",alpha2:"GY",alpha3:"GUY",numeric:"328"},{country:"Haiti",alpha2:"HT",alpha3:"HTI",numeric:"332"},{country:"Heard Island and McDonald Islands",alpha2:"HM",alpha3:"HMD",numeric:"334"},{country:"Holy See",alpha2:"VA",alpha3:"VAT",numeric:"336"},{country:"Honduras",alpha2:"HN",alpha3:"HND",numeric:"340"},{country:"Hong Kong",alpha2:"HK",alpha3:"HKG",numeric:"344"},{country:"Hungary",alpha2:"HU",alpha3:"HUN",numeric:"348"},{country:"Iceland",alpha2:"IS",alpha3:"ISL",numeric:"352"},{country:"India",alpha2:"IN",alpha3:"IND",numeric:"356"},{country:"Indonesia",alpha2:"ID",alpha3:"IDN",numeric:"360"},{country:"Islamic Republic of Iran",alpha2:"IR",alpha3:"IRN",numeric:"364"},{country:"Iraq",alpha2:"IQ",alpha3:"IRQ",numeric:"368"},{country:"Ireland",alpha2:"IE",alpha3:"IRL",numeric:"372"},{country:"Isle of Man",alpha2:"IM",alpha3:"IMN",numeric:"833"},{country:"Israel",alpha2:"IL",alpha3:"ISR",numeric:"376"},{country:"Italy",alpha2:"IT",alpha3:"ITA",numeric:"380"},{country:"Jamaica",alpha2:"JM",alpha3:"JAM",numeric:"388"},{country:"Japan",alpha2:"JP",alpha3:"JPN",numeric:"392"},{country:"Jersey",alpha2:"JE",alpha3:"JEY",numeric:"832"},{country:"Jordan",alpha2:"JO",alpha3:"JOR",numeric:"400"},{country:"Kazakhstan",alpha2:"KZ",alpha3:"KAZ",numeric:"398"},{country:"Kenya",alpha2:"KE",alpha3:"KEN",numeric:"404"},{country:"Kiribati",alpha2:"KI",alpha3:"KIR",numeric:"296"},{country:"Democratic People's Republic of Korea",alpha2:"KP",alpha3:"PRK",numeric:"408"},{country:"Republic of Korea",alpha2:"KR",alpha3:"KOR",numeric:"410"},{country:"Kuwait",alpha2:"KW",alpha3:"KWT",numeric:"414"},{country:"Kyrgyzstan",alpha2:"KG",alpha3:"KGZ",numeric:"417"},{country:"Lao People's Democratic Republic",alpha2:"LA",alpha3:"LAO",numeric:"418"},{country:"Latvia",alpha2:"LV",alpha3:"LVA",numeric:"428"},{country:"Lebanon",alpha2:"LB",alpha3:"LBN",numeric:"422"},{country:"Lesotho",alpha2:"LS",alpha3:"LSO",numeric:"426"},{country:"Liberia",alpha2:"LR",alpha3:"LBR",numeric:"430"},{country:"Libya",alpha2:"LY",alpha3:"LBY",numeric:"434"},{country:"Liechtenstein",alpha2:"LI",alpha3:"LIE",numeric:"438"},{country:"Lithuania",alpha2:"LT",alpha3:"LTU",numeric:"440"},{country:"Luxembourg",alpha2:"LU",alpha3:"LUX",numeric:"442"},{country:"Macao",alpha2:"MO",alpha3:"MAC",numeric:"446"},{country:"Macedonia",alpha2:"MK",alpha3:"MKD",numeric:"807"},{country:"Madagascar",alpha2:"MG",alpha3:"MDG",numeric:"450"},{country:"Malawi",alpha2:"MW",alpha3:"MWI",numeric:"454"},{country:"Malaysia",alpha2:"MY",alpha3:"MYS",numeric:"458"},{country:"Maldives",alpha2:"MV",alpha3:"MDV",numeric:"462"},{country:"Mali",alpha2:"ML",alpha3:"MLI",numeric:"466"},{country:"Malta",alpha2:"MT",alpha3:"MLT",numeric:"470"},{country:"Marshall Islands",alpha2:"MH",alpha3:"MHL",numeric:"584"},{country:"Martinique",alpha2:"MQ",alpha3:"MTQ",numeric:"474"},{country:"Mauritania",alpha2:"MR",alpha3:"MRT",numeric:"478"},{country:"Mauritius",alpha2:"MU",alpha3:"MUS",numeric:"480"},{country:"Mayotte",alpha2:"YT",alpha3:"MYT",numeric:"175"},{country:"Mexico",alpha2:"MX",alpha3:"MEX",numeric:"484"},{country:"Federated States of Micronesia",alpha2:"FM",alpha3:"FSM",numeric:"583"},{country:"Republic of Moldova",alpha2:"MD",alpha3:"MDA",numeric:"498"},{country:"Monaco",alpha2:"MC",alpha3:"MCO",numeric:"492"},{country:"Mongolia",alpha2:"MN",alpha3:"MNG",numeric:"496"},{country:"Montenegro",alpha2:"ME",alpha3:"MNE",numeric:"499"},{country:"Montserrat",alpha2:"MS",alpha3:"MSR",numeric:"500"},{country:"Morocco",alpha2:"MA",alpha3:"MAR",numeric:"504"},{country:"Mozambique",alpha2:"MZ",alpha3:"MOZ",numeric:"508"},{country:"Myanmar",alpha2:"MM",alpha3:"MMR",numeric:"104"},{country:"Namibia",alpha2:"NA",alpha3:"NAM",numeric:"516"},{country:"Nauru",alpha2:"NR",alpha3:"NRU",numeric:"520"},{country:"Nepal",alpha2:"NP",alpha3:"NPL",numeric:"524"},{country:"Netherlands",alpha2:"NL",alpha3:"NLD",numeric:"528"},{country:"New Caledonia",alpha2:"NC",alpha3:"NCL",numeric:"540"},{country:"New Zealand",alpha2:"NZ",alpha3:"NZL",numeric:"554"},{country:"Nicaragua",alpha2:"NI",alpha3:"NIC",numeric:"558"},{country:"Niger",alpha2:"NE",alpha3:"NER",numeric:"562"},{country:"Nigeria",alpha2:"NG",alpha3:"NGA",numeric:"566"},{country:"Niue",alpha2:"NU",alpha3:"NIU",numeric:"570"},{country:"Norfolk Island",alpha2:"NF",alpha3:"NFK",numeric:"574"},{country:"Northern Mariana Islands",alpha2:"MP",alpha3:"MNP",numeric:"580"},{country:"Norway",alpha2:"NO",alpha3:"NOR",numeric:"578"},{country:"Oman",alpha2:"OM",alpha3:"OMN",numeric:"512"},{country:"Pakistan",alpha2:"PK",alpha3:"PAK",numeric:"586"},{country:"Palau",alpha2:"PW",alpha3:"PLW",numeric:"585"},{country:"State of Palestine",alpha2:"PS",alpha3:"PSE",numeric:"275"},{country:"Panama",alpha2:"PA",alpha3:"PAN",numeric:"591"},{country:"Papua New Guinea",alpha2:"PG",alpha3:"PNG",numeric:"598"},{country:"Paraguay",alpha2:"PY",alpha3:"PRY",numeric:"600"},{country:"Peru",alpha2:"PE",alpha3:"PER",numeric:"604"},{country:"Philippines",alpha2:"PH",alpha3:"PHL",numeric:"608"},{country:"Pitcairn",alpha2:"PN",alpha3:"PCN",numeric:"612"},{country:"Poland",alpha2:"PL",alpha3:"POL",numeric:"616"},{country:"Portugal",alpha2:"PT",alpha3:"PRT",numeric:"620"},{country:"Puerto Rico",alpha2:"PR",alpha3:"PRI",numeric:"630"},{country:"Qatar",alpha2:"QA",alpha3:"QAT",numeric:"634"},{country:"Réunion",alpha2:"RE",alpha3:"REU",numeric:"638"},{country:"Romania",alpha2:"RO",alpha3:"ROU",numeric:"642"},{country:"Russian Federation",alpha2:"RU",alpha3:"RUS",numeric:"643"},{country:"Rwanda",alpha2:"RW",alpha3:"RWA",numeric:"646"},{country:"Saint Barthélemy",alpha2:"BL",alpha3:"BLM",numeric:"652"},{country:"Saint Helena, Ascension and Tristan da Cunha",alpha2:"SH",alpha3:"SHN",numeric:"654"},{country:"Saint Kitts and Nevis",alpha2:"KN",alpha3:"KNA",numeric:"659"},{country:"Saint Lucia",alpha2:"LC",alpha3:"LCA",numeric:"662"},{country:"Saint Martin",alpha2:"MF",alpha3:"MAF",numeric:"663"},{country:"Saint Pierre and Miquelon",alpha2:"PM",alpha3:"SPM",numeric:"666"},{country:"Saint Vincent and the Grenadines",alpha2:"VC",alpha3:"VCT",numeric:"670"},{country:"Samoa",alpha2:"WS",alpha3:"WSM",numeric:"882"},{country:"San Marino",alpha2:"SM",alpha3:"SMR",numeric:"674"},{country:"Sao Tome and Principe",alpha2:"ST",alpha3:"STP",numeric:"678"},{country:"Saudi Arabia",alpha2:"SA",alpha3:"SAU",numeric:"682"},{country:"Senegal",alpha2:"SN",alpha3:"SEN",numeric:"686"},{country:"Serbia",alpha2:"RS",alpha3:"SRB",numeric:"688"},{country:"Seychelles",alpha2:"SC",alpha3:"SYC",numeric:"690"},{country:"Sierra Leone",alpha2:"SL",alpha3:"SLE",numeric:"694"},{country:"Singapore",alpha2:"SG",alpha3:"SGP",numeric:"702"},{country:"Sint Maarten",alpha2:"SX",alpha3:"SXM",numeric:"534"},{country:"Slovakia",alpha2:"SK",alpha3:"SVK",numeric:"703"},{country:"Slovenia",alpha2:"SI",alpha3:"SVN",numeric:"705"},{country:"Solomon Islands",alpha2:"SB",alpha3:"SLB",numeric:"090"},{country:"Somalia",alpha2:"SO",alpha3:"SOM",numeric:"706"},{country:"South Africa",alpha2:"ZA",alpha3:"ZAF",numeric:"710"},{country:"South Georgia and the South Sandwich Islands",alpha2:"GS",alpha3:"SGS",numeric:"239"},{country:"South Sudan",alpha2:"SS",alpha3:"SSD",numeric:"728"},{country:"Spain",alpha2:"ES",alpha3:"ESP",numeric:"724"},{country:"Sri Lanka",alpha2:"LK",alpha3:"LKA",numeric:"144"},{country:"Sudan",alpha2:"SD",alpha3:"SDN",numeric:"729"},{country:"Suriname",alpha2:"SR",alpha3:"SUR",numeric:"740"},{country:"Svalbard and Jan Mayen",alpha2:"SJ",alpha3:"SJM",numeric:"744"},{country:"Swaziland",alpha2:"SZ",alpha3:"SWZ",numeric:"748"},{country:"Sweden",alpha2:"SE",alpha3:"SWE",numeric:"752"},{country:"Switzerland",alpha2:"CH",alpha3:"CHE",numeric:"756"},{country:"Syrian Arab Republic",alpha2:"SY",alpha3:"SYR",numeric:"760"},{country:"Taiwan, Province of China",alpha2:"TW",alpha3:"TWN",numeric:"158"},{country:"Tajikistan",alpha2:"TJ",alpha3:"TJK",numeric:"762"},{country:"United Republic of Tanzania",alpha2:"TZ",alpha3:"TZA",numeric:"834"},{country:"Thailand",alpha2:"TH",alpha3:"THA",numeric:"764"},{country:"Timor-Leste",alpha2:"TL",alpha3:"TLS",numeric:"626"},{country:"Togo",alpha2:"TG",alpha3:"TGO",numeric:"768"},{country:"Tokelau",alpha2:"TK",alpha3:"TKL",numeric:"772"},{country:"Tonga",alpha2:"TO",alpha3:"TON",numeric:"776"},{country:"Trinidad and Tobago",alpha2:"TT",alpha3:"TTO",numeric:"780"},{country:"Tunisia",alpha2:"TN",alpha3:"TUN",numeric:"788"},{country:"Turkey",alpha2:"TR",alpha3:"TUR",numeric:"792"},{country:"Turkmenistan",alpha2:"TM",alpha3:"TKM",numeric:"795"},{country:"Turks and Caicos Islands",alpha2:"TC",alpha3:"TCA",numeric:"796"},{country:"Tuvalu",alpha2:"TV",alpha3:"TUV",numeric:"798"},{country:"Uganda",alpha2:"UG",alpha3:"UGA",numeric:"800"},{country:"Ukraine",alpha2:"UA",alpha3:"UKR",numeric:"804"},{country:"United Arab Emirates",alpha2:"AE",alpha3:"ARE",numeric:"784"},{country:"United Kingdom of Great Britain and Northern Ireland",alpha2:"GB",alpha3:"GBR",numeric:"826"},{country:"United States of America",alpha2:"US",alpha3:"USA",numeric:"840"},{country:"United States Minor Outlying Islands",alpha2:"UM",alpha3:"UMI",numeric:"581"},{country:"Uruguay",alpha2:"UY",alpha3:"URY",numeric:"858"},{country:"Uzbekistan",alpha2:"UZ",alpha3:"UZB",numeric:"860"},{country:"Vanuatu",alpha2:"VU",alpha3:"VUT",numeric:"548"},{country:"Venezuela (Bolivarian Republic of)",alpha2:"VE",alpha3:"VEN",numeric:"862"},{country:"Viet Nam",alpha2:"VN",alpha3:"VNM",numeric:"704"},{country:"Virgin Islands",alpha2:"VG",alpha3:"VGB",numeric:"092"},{country:"Virgin Islands of the United States",alpha2:"VI",alpha3:"VIR",numeric:"850"},{country:"Wallis and Futuna",alpha2:"WF",alpha3:"WLF",numeric:"876"},{country:"Western Sahara",alpha2:"EH",alpha3:"ESH",numeric:"732"},{country:"Yemen",alpha2:"YE",alpha3:"YEM",numeric:"887"},{country:"Zambia",alpha2:"ZM",alpha3:"ZMB",numeric:"894"},{country:"Zimbabwe",alpha2:"ZW",alpha3:"ZWE",numeric:"716"}];AD.default=zBe,function(n){var e=Ff&&Ff.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(n,"__esModule",{value:!0}),n.all=n.whereNumeric=n.whereAlpha3=n.whereAlpha2=n.whereCountry=void 0;const t=e(AD);n.whereCountry=i=>t.default.find(s=>s.country.toUpperCase()===i.toUpperCase()),n.whereAlpha2=i=>t.default.find(s=>s.alpha2===i.toUpperCase()),n.whereAlpha3=i=>t.default.find(s=>s.alpha3===i.toUpperCase()),n.whereNumeric=i=>t.default.find(s=>s.numeric===String(i)),n.all=()=>t.default,n.default={all:n.all,whereCountry:n.whereCountry,whereAlpha2:n.whereAlpha2,whereAlpha3:n.whereAlpha3,whereNumeric:n.whereNumeric}}(MD);var FY;let BY,VY,WY,jY,zY,UY,YY;function UBe(n,e,t,i,s,r){var o,a,l,c,h,u,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],w=e.length;function y(x,M,I){return function(A,O){M&&(O=A,A=n);for(var D=0;D<x.length;D++)O=x[D].apply(A,I?[O]:[]);return I?O:A}}function C(x,M,I,A){if(typeof x!="function"&&(A||x!==void 0))throw new TypeError(M+" must "+(I||"be")+" a function"+(A?"":" or undefined"));return x}function R(x,M,I,A,O,D,j,Y,Z,$,B){function ie(oe){if(!B(oe))throw new TypeError("Attempted to access private element on non-instance")}var se=[].concat(M[0]),te=M[3],pe=!j,b=O===1,v=O===3,S=O===4,T=O===2;function H(oe,ce,Ve){return function(Se,_e){return ce&&(_e=Se,Se=x),Ve&&Ve(Se),E[oe].call(Se,_e)}}if(!pe){var E={},N=[],X=v?"get":S||b?"set":"value";if(Z?($||b?E={get:GY(function(){return te(this)},A,"get"),set:function(oe){M[4](this,oe)}}:E[X]=te,$||GY(E[X],A,T?"":X)):$||(E=Object.getOwnPropertyDescriptor(x,A)),!$&&!Z){if((a=m[+Y][A])&&(a^O)!=7)throw Error("Decorating two elements with the same name ("+E[X].name+") is not supported yet");m[+Y][A]=O<3?1:O}}for(var ne=x,he=se.length-1;he>=0;he-=I?2:1){var re=C(se[he],"A decorator","be",!0),ke=I?se[he-1]:void 0,Ee={},J={kind:["field","accessor","method","getter","setter","class"][O],name:A,metadata:o,addInitializer:(function(oe,ce){if(oe.v)throw new TypeError("attempted to call addInitializer after decoration was finished");C(ce,"An initializer","be",!0),D.push(ce)}).bind(null,Ee)};if(pe)a=re.call(ke,ne,J),Ee.v=1,C(a,"class decorators","return")&&(ne=a);else if(J.static=Y,J.private=Z,a=J.access={has:Z?B.bind():function(oe){return A in oe}},S||(a.get=Z?T?function(oe){return ie(oe),E.value}:H("get",0,ie):function(oe){return oe[A]}),T||v||(a.set=Z?H("set",0,ie):function(oe,ce){oe[A]=ce}),ne=re.call(ke,b?{get:E.get,set:E.set}:E[X],J),Ee.v=1,b){if(typeof ne=="object"&&ne)(a=C(ne.get,"accessor.get"))&&(E.get=a),(a=C(ne.set,"accessor.set"))&&(E.set=a),(a=C(ne.init,"accessor.init"))&&N.unshift(a);else if(ne!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else C(ne,($?"field":"method")+" decorators","return")&&($?N.unshift(ne):E[X]=ne)}return O<2&&j.push(y(N,Y,1),y(D,Y,0)),$||pe||(Z?b?j.splice(-1,0,H("get",Y),H("set",Y)):j.push(T?E[X]:C.call.bind(E[X])):g(x,A,E)),ne}function _(x){return g(x,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),h=[],u=function(x){x&&h.push(y(x))},d=function(x,M){for(var I=0;I<t.length;I++){var A=t[I],O=A[1],D=7&O;if((8&O)==x&&!D==M){var j=A[2],Y=!!A[3],Z=16&O;R(x?n:n.prototype,A,Z,Y?"#"+j:YBe(j),D,D<2?[]:x?c=c||[]:l=l||[],h,!!x,Y,M,x&&Y?function($){return KBe($)===n}:s)}}},d(8,0),d(0,0),d(8,1),d(0,1),u(l),u(c),a=h,w||_(n),{e:a,get c(){var x=[];return w&&[_(n=R(n,[e],i,n.name,5,x)),y(x,1)]}}}function YBe(n){var e=GBe(n,"string");return typeof e=="symbol"?e:e+""}function GBe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GY(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function KBe(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}const qBe=n=>n.startsWith("#")?n.slice(1):n;let KY;class XBe{constructor(){this.datasrc=VY(this,"g/National_Initiatives_Figure_Data.csv"),this.countriessrc=(WY(this),jY(this,"g/countries-50m.json")),this.geochart=void zY(this),this.continent="",this.countryDataDesc={},this.projecturls=[],this.projections=["azimuthalEqualArea","azimuthalEquidistant","gnomonic","orthographic","stereographic","equalEarth","albers","albersUsa","conicConformal","conicEqualArea","conicEquidistant","equirectangular","mercator","transverseMercator","naturalEarth1"],this.countryName=UY(this,""),this.isAnimating=(YY(this),!1)}parseCSV(e){const t=[];let i=!1;for(let s=0,r=0,o=0;o<e.length;o++){let a=e[o],l=e[o+1];if(t[s]=t[s]||[],t[s][r]=t[s][r]||"",a=='"'&&i&&l=='"'){t[s][r]+=a,++o;continue}if(a=='"'){i=!i;continue}if(a==","&&!i){++r;continue}if(a=="\r"&&l==`
`&&!i){++s,r=0,++o;continue}if(a==`
`&&!i){++s,r=0;continue}if(a=="\r"&&!i){++s,r=0;continue}t[s][r]+=a}return t}showSelected(e){this.countryDataDesc?(this.selected=this.countryDataDesc[e],this.selected?(this.countryName=this.selected[0],this.projectName=this.selected[3],this.projectPublication=this.selected[2],this.projectStatus=this.selected[8],this.projectStatusText=this.selected[7],this.selected[4]?this.projecturls=this.selected[4].split(" / "):this.projecturls=[]):console.warn("showselected this.selected is null")):console.warn("showselected countryDataDesc is null")}bound(){if(this.paramshash=window.location.hash,this.params=this.paramshash.split("&"),console.log("bound() params",this.params),this.params.length>0){const e=this.params.length;if(e>0){const t=qBe(this.params[0]);t&&(this.datasrc=t)}e>1&&(this.continent=this.params[1]),console.log("hash contains url:"+this.datasrc)}}attached(){console.log("attached"),Zs.register(wp,fc,Kd,kh,...uV),Promise.all([fetch(this.countriessrc).then(e=>e.json()),fetch(this.datasrc).then(e=>e.text())]).then(([e,t])=>{let i=this;this.countries=LBe(e,e.objects.countries).features;const s=this.parseCSV(t);let r={};this.countryDataDesc={};for(let o of s)try{let a=MD.whereAlpha2(o[1]);a&&(r[a.numeric]=o[8],this.countryDataDesc[a.numeric]=o)}catch(a){console.warn(a)}this.myData=[];for(let o of this.countries){let a=0,l=r[o.id];l?a=parseFloat(l):console.warn("no data for country with id"+o.id+" name:"+o.properties.name),this.myData.push({feature:o,value:a})}if(this.worlddata=this.myData,this.worldcountries=this.countries,console.log("geoOrthographic function:",vD),this.chart=new Zs(this.geochart.getContext("2d"),{type:"choropleth",data:{labels:this.countries.map(o=>o.id+":"+o.properties.name),datasets:[{label:"Countries",data:this.myData,outline:this.countries}]},options:{showOutline:!1,showGraticule:!0,plugins:{legend:{display:!1}},scales:{projection:{axis:"x",projection:"equalEarth"},color:{axis:"x",interpolate:"oranges",legend:{position:"bottom-right",align:"right"}}},onClick:(o,a)=>{let l=a.map(c=>c.element.feature.id);i.showSelected(l[0])}}}),this.continent)switch(console.log("switching to continent",this.continent),this.continent){case"europe":this.switchToEurope();break;case"asia":this.switchToAsia();break;case"namerica":this.switchToNAmerica();break;case"africa":this.switchToAfrica();break;case"samerica":this.switchToSAmerica();break;case"australia":this.switchToAustralia();break;default:console.warn("Unknown continent:",this.continent),this.switchToWorld();break}})}detached(){}switchToEurope(){this.currentProjection=="orthographic"&&this.chart.scales.projection.projection.rotate([0,0,0]);let e=4;this.chart.options.scales.projection.projectionScale=e;let t=e*(3/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionOffset=[0,t],this.chart.update()}switchToWorld(){this.currentProjection=="orthographic"&&this.chart.scales.projection.projection.rotate([0,0,0]),this.chart.options.scales.projection.projectionScale=1,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.update()}switchToAsia(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([-80,0,0])}else{let e=2.3,t=-e*(2/8*this.chart.chartArea.width),i=e*(3/16*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToNAmerica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([90,0,0])}else{let e=2.5,t=e*(2/8*this.chart.chartArea.width),i=e*(2/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToSAmerica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([60,0,0])}else{let e=2,t=e*(1/8*this.chart.chartArea.width),i=-e*(5/32*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToAfrica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([0,0,0])}else this.chart.options.scales.projection.projectionScale=1.8,this.chart.options.scales.projection.projectionOffset=[0,0];this.chart.update()}switchToPacific(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([-160,0,0])}else{let e=2,t=-e*(5/16*this.chart.chartArea.width),i=-e*(1/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}zoomChart(e,t,i){console.log("zoomChart:",e),e.options.scales.xy.projection.center=t,e.options.scales.xy.projection.scale=i,e.update()}switchToEurope2(){this.eucountryids=this.europeanCountryCodes.map(e=>{console.log("mapping "+e+" to numeric");let t=MD.whereAlpha2(e);return console.log("numeric",t),t?t.numeric:null}),this.eudata=this.worlddata.filter(e=>this.eucountryids.includes(e.feature.id)),this.eucountries=this.worldcountries.filter(e=>this.eucountryids.includes(e.id)),console.log("switching to EU view",this.eudata,this.eucountries),console.log("debug world data",this.worlddata,this.worldcountries),this.chart.data.labels=this.eucountries.map(e=>e.properties.name),this.chart.data.datasets[0].data=this.eudata,this.chart.data.outline=this.eucountries,this.chart.update()}switchToworld2(){this.chart.data.labels=this.worldcountries.map(e=>e.properties.name),this.chart.data.datasets[0].data=this.worlddata,this.chart.data.outline=this.worldcountries,this.chart.update()}switchProjection(e){console.log("switching projection:",e),this.currentProjection=e,e=="orthographic"?this.chart.options.scales.projection.projection=vD().rotate([0,0,0]):this.chart.options.scales.projection.projection=e,this.chart.update()}resetView(){this.switchProjection("equalEarth"),this.switchToWorld()}animate(){}toggleAnimation(){this.currentProjection=="orthographic"&&(this.isAnimating?(cancelAnimationFrame(this.animationFrameId),this.isAnimating=!1,console.log("Animation stopped.")):(this.isAnimating=!0,console.log("Animation started."),this.performAnimationFrame()))}performAnimationFrame(){this.isAnimating&&(this.animate(),this.animationFrameId=requestAnimationFrame(this.performAnimationFrame.bind(this)))}animate(){let e=performance.now()/1e3;this.chart.scales.projection.projection.rotate([e,0,0]),this.chart.update()}}FY=XBe,{e:[VY,WY,jY,zY,UY,YY],c:[KY,BY]}=UBe(FY,[Cy({...Z$e,name:"sv-chartjs-geo"})],[[oy,0,"datasrc"],[oy,0,"countriessrc"],[VX,0,"countryName"]]),BY();const PD=Lh.createContainer();PD.register(Hh.instance(br,Cc.getOrCreate(globalThis))),PD.register(nJ);const d1=PD.get(iJ);d1.define("sv-chartjs",h0),d1.define("sv-chartjs-scatter",SV),d1.define("sv-table",J9),d1.define("sv-chartjs-geo",KY)});
