var FK=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var oDe=FK((zDe,lC)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function BK(){Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"))}const El={get(n,e){var t;return(t=e[Symbol.metadata])==null?void 0:t[n]},define(n,e,...t){var r;let i=(r=Object.getOwnPropertyDescriptor(e,Symbol.metadata))==null?void 0:r.value;i==null&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const s=t.length;switch(s){case 0:throw new Error("At least one key must be provided");case 1:i[t[0]]=n;return;case 2:i[t[0]]=i[t[1]]=n;return;default:{for(let o=0;o<s;++o)i[t[o]]=n;return}}},has(n,e){const t=e[Symbol.metadata];return t==null?!1:n in t},delete(n,e){const t=e[Symbol.metadata];t!=null&&Reflect.deleteProperty(t,n)}},yw=Object.freeze,xB=Object.assign,VK=String,oa=El.get,Lp=El.define,Xn=n=>n instanceof Promise,jn=n=>n instanceof Array,Qf=n=>n instanceof Set,_c=n=>n instanceof Map,EB=n=>n instanceof Object;function cC(n){return typeof n=="object"&&n!==null||typeof n=="function"}const Ht=n=>typeof n=="function",yt=n=>typeof n=="string",WK=n=>typeof n=="number",Kt=()=>Object.create(null),bl=Object.is,qn=(n,...e)=>new Error(`AUR${VK(n).padStart(4,"0")}: ${zK(n,...e)}`),jK={1:"No registration for interface: '{{0}}'",2:`'{{0}}' was registered with "none" resolver, are you injecting the right key?`,3:"Cyclic dependency found: {{0}}",4:"Resolver for {{0}} returned a null factory",5:"Invalid resolver strategy specified: {{0}}. Did you assign an invalid strategy value?",6:"Unable to autoregister dependency: {{0}}",7:'Resource key "{{0}}" already registered',8:"Unable to resolve key: {{0}}",9:"Attempted to jitRegister something that is not a constructor: '{{0}}'. Did you forget to register this resource?",10:'Attempted to jitRegister an intrinsic type: "{{0}}". Did you forget to add @inject(Key)',11:"Invalid resolver, null/undefined returned from the static register method.",12:"Attempted to jitRegister an interface: {{0}}",13:"Cannot call resolve '{{0}}' before calling prepare or after calling dispose.",14:"Key cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?A common cause is circular dependency with bundler, did you accidentally introduce circular dependency into your module graph?",15:"'{{0}}' is a native function and cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.",16:'There is not a currently active container to resolve "{{0}}". Are you trying to "new Class(...)" that has a resolve(...) call?',17:"Failed to instantiate '{{0}}' via @newInstanceOf/@newInstanceForScope, there's no registration and no default implementation, or the default implementation does not result in factory for constructing the instances.",18:"Invalid channel name or instance: '{{0}}'.",19:"Invalid channel name or type: {{0}}.",20:"No defined value found when calling firstDefined()",21:"Invalid module transform input: {{0}}. Expected Promise or Object.",22:"The @inject decorator on the target ('{{0}}') type '{{1}}' is not supported.",23:"Resource key '{{0}}' has already been registered."},zK=(n,...e)=>{let t=jK[n];for(let i=0;i<e.length;++i)t=t.replace(`{{${i}}}`,String(e[i]));return t},Lf=(...n)=>globalThis.console.error(...n),$p=(()=>{const n={};let e=!1,t=0,i=0,s=0;return r=>{switch(typeof r){case"number":return r>=0&&(r|0)===r;case"string":if(e=n[r],e!==void 0)return e;if(t=r.length,t===0)return n[r]=!1;for(i=0,s=0;s<t;++s)if(i=r.charCodeAt(s),s===0&&i===48&&t>1||i<48||i>57)return n[r]=!1;return n[r]=!0;default:return!1}}})(),TB=function(){const n=xB(Kt(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=t=>t===""?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:n[t]===!0?1:0;return(t,i)=>{const s=t.length;if(s===0)return t;let r=!1,o="",a,l="",c=0,h=t.charAt(0),u=e(h),d=0;for(;d<s;++d)a=c,l=h,c=u,h=t.charAt(d+1),u=e(h),c===0?o.length>0&&(r=!0):(!r&&o.length>0&&c===2&&(r=a===3||u===3),o+=i(l,r),r=!1);return o}}(),wi=function(){const n=Kt(),e=(t,i)=>i?t.toUpperCase():t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=TB(t,e)),i}}(),MB=function(){const n=Kt();return e=>{let t=n[e];return t===void 0&&(t=wi(e),t.length>0&&(t=t[0].toUpperCase()+t.slice(1)),n[e]=t),t}}(),AB=function(){const n=Kt(),e=(t,i)=>i?`-${t.toLowerCase()}`:t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=TB(t,e)),i}}(),T_=n=>{const e=n.length,t=Array(e);let i=0;for(;i<e;++i)t[i]=n[i];return t},hd=(n,e)=>{const t=e.name;e.addInitializer(function(){Reflect.defineProperty(this,t,{value:n.bind(this),writable:!0,configurable:!0,enumerable:!1})})},Kn=(...n)=>{const e=[];let t=0;const i=n.length;let s=0,r,o=0;for(;o<i;++o)if(r=n[o],r!==void 0){s=r.length;let a=0;for(;a<s;++a)e[t++]=r[a]}return e},oc=(...n)=>{const e=n.length;let t,i=0;for(;e>i;++i)if(t=n[i],t!==void 0)return t;throw qn(20)},UK=function(){const n=Function.prototype,e=Object.getPrototypeOf,t=new WeakMap;let i=n,s=0,r;return function(o){if(r=t.get(o),r===void 0)for(t.set(o,r=[i=o]),s=0;(i=e(i))!==n;)r[++s]=i;return r}}();function KE(...n){return xB(Kt(),...n)}const dk=(()=>{const n=new WeakMap;let e=!1,t="",i=0;return s=>(e=n.get(s),e==null&&(i=(t=s.toString()).length,e=i>28&&t.indexOf("[native code] }")===i-15,n.set(s,e)),e)})(),Ge=(n,e)=>Xn(n)?n.then(e):e(n),ai=(...n)=>{let e,t,i,s=0,r=n.length;for(;s<r;++s)e=n[s],Xn(e=n[s])&&(t===void 0?t=e:i===void 0?i=[t,e]:i.push(e));return i===void 0?t:Promise.all(i)},YK=(n,e)=>new _r(n,0,e),Fp=(n,e)=>new _r(n,1,e),PB=(n,e)=>new _r(n,2,e),GK=(n,e)=>new _r(n,3,e),KK=(n,e)=>new _r(n,3,IB(e)),hC=(n,e)=>new _r(e,5,n),qK=(n,...e)=>new u5(n,e),fk=new WeakMap,IB=n=>(e,t,i)=>{let s=fk.get(e);if(s===void 0&&fk.set(e,s=new WeakMap),s.has(i))return s.get(i);const r=n(e,t,i);return s.set(i,r),r},Ru={instance:YK,singleton:Fp,transient:PB,callback:GK,cachedCallback:KK,aliasTo:hC,defer:qK},Cw=function(n){return function(t){t.register(Fp(this,this),hC(this,n))}},vu="au:annotation",Rc=(n,e)=>e===void 0?`${vu}:${n}`:`${vu}:${n}:${e}`,XK=(n,e)=>{const t=oa(vu,n);t===void 0?Lp([e],n,vu):t.push(e)},QK=yw({name:"au:annotation",appendTo:XK,set(n,e,t){Lp(t,n,Rc(e))},get:(n,e)=>oa(Rc(e),n),getKeys(n){let e=oa(vu,n);return e===void 0&&Lp(e=[],n,vu),e},isKey:n=>n.startsWith(vu),keyFor:Rc}),Jo="au:resource",Uu=(n,e,t)=>`${Jo}:${n}`,OB={annotation:QK},kB=Object.prototype.hasOwnProperty;function Zs(n,e,t,i){let s=oa(Rc(n),t);return s===void 0?(s=e[n],s===void 0?(s=t[n],s===void 0||!kB.call(t,n)?i():s):s):s}function Ir(n,e,t){let i=oa(Rc(n),e);return i===void 0?(i=e[n],i===void 0||!kB.call(e,n)?t():i):i}function Or(n,e,t){const i=e[n];return i===void 0?t():i}const fa=Symbol.for("au:registrable"),ZK={none(n){throw qn(2,n)},singleton:n=>new _r(n,1,n),transient:n=>new _r(n,2,n)};class na{constructor(e,t){this.inheritParentResources=e,this.defaultResolver=t}static from(e){return e===void 0||e===na.DEFAULT?na.DEFAULT:new na(e.inheritParentResources??!1,e.defaultResolver??ZK.singleton)}}na.DEFAULT=na.from({});const JK=n=>new zm(null,na.from(n)),e5=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let t5=0,gn=null;class zm{get depth(){return this._parent===null?0:this._parent.depth+1}get parent(){return this._parent}constructor(e,t){if(this.id=++t5,this._registerDepth=0,this._disposableResolvers=new Map,this._parent=e,this.config=t,this._resolvers=new Map,this.res={},e===null)this.root=this,this._factories=new Map;else if(this.root=e.root,this._factories=e._factories,t.inheritParentResources)for(const i in e.res)this.registerResolver(i,e.res[i]);this._resolvers.set(Sw,i5)}register(...e){var h,u,d,f;if(++this._registerDepth===100)throw qn(6,...e);let t,i,s,r,o,a=0,l=e.length,c;for(;a<l;++a)if(t=e[a],!!cC(t))if(km(t))t.register(this);else if((c=oa(Jo,t))!=null)c.register(this);else if(r5(t)){const g=(h=t[Symbol.metadata])==null?void 0:h[fa];if(km(g))g.register(this);else if(yt((u=t.$au)==null?void 0:u.type)){const m=t.$au,w=(t.aliases??at).concat(m.aliases??at);let v=`${Jo}:${m.type}:${m.name}`;if(this.has(v,!1)){(d=globalThis.console)==null||d.warn(qn(7,v));continue}for(hC(t,v).register(this),this.has(t,!1)||Fp(t,t).register(this),r=0,o=w.length;r<o;++r){if(v=`${Jo}:${m.type}:${w[r]}`,this.has(v,!1)){(f=globalThis.console)==null||f.warn(qn(7,v));continue}hC(t,v).register(this)}}else Fp(t,t).register(this)}else for(i=Object.keys(t),r=0,o=i.length;r<o;++r)s=t[i[r]],cC(s)&&(km(s)?s.register(this):this.register(s));return--this._registerDepth,this}registerResolver(e,t,i=!1){vg(e);const s=this._resolvers,r=s.get(e);if(r==null){if(s.set(e,t),M_(e)){if(this.res[e]!==void 0)throw qn(7,e);this.res[e]=t}}else r instanceof _r&&r._strategy===4?r._state.push(t):s.set(e,new _r(e,4,[r,t]));return i&&this._disposableResolvers.set(e,t),t}deregister(e){vg(e);const t=this._resolvers.get(e);t!=null&&(this._resolvers.delete(e),M_(e)&&delete this.res[e],this._disposableResolvers.has(e)&&(t.dispose(),this._disposableResolvers.delete(e)))}registerTransformer(e,t){const i=this.getResolver(e);if(i==null)return!1;if(i.getFactory){const s=i.getFactory(this);return s==null?!1:(s.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(vg(e),e.resolve!==void 0)return e;const i=gn;let s=gn=this,r,o;try{for(;s!=null;)if(r=s._resolvers.get(e),r==null){if(s._parent==null)return o=pk(e)?this:s,t?this._jitRegister(e,o):null;s=s._parent}else return r}finally{gn=i}return null}has(e,t=!1){var i;return this._resolvers.has(e)||M_(e)&&e in this.res||((t&&((i=this._parent)==null?void 0:i.has(e,!0)))??!1)}get(e){if(vg(e),e.$isResolver)return e.resolve(this,this);const t=gn;let i=gn=this,s,r;try{for(;i!=null;)if(s=i._resolvers.get(e),s==null){if(i._parent==null)return r=pk(e)?this:i,s=this._jitRegister(e,r),s.resolve(i,this);i=i._parent}else return s.resolve(i,this)}finally{gn=t}throw qn(8,e)}getAll(e,t=!1){vg(e);const i=gn,s=gn=this;let r=s,o,a=at;try{if(t){for(;r!=null;)o=r._resolvers.get(e),o!=null&&(a=a.concat(mk(o,r,s))),r=r._parent;return a}for(;r!=null;)if(o=r._resolvers.get(e),o==null){if(r=r._parent,r==null)return at}else return mk(o,r,s)}finally{gn=i}return at}invoke(e,t){if(dk(e))throw qn(15,e);const i=gn;gn=this;{let s,r;try{s=uf(e).map(o=>this.get(r=o))}catch(o){throw Lf(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}, caused by dependency: ${String(r)}`),gn=i,o}try{return t===void 0?new e(...s):new e(...s,...t)}catch(o){throw Lf(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}`),o}finally{gn=i}}try{return t===void 0?new e(...uf(e).map(Bp,this)):new e(...uf(e).map(Bp,this),...t)}finally{gn=i}}hasFactory(e){return this._factories.has(e)}getFactory(e){let t=this._factories.get(e);if(t===void 0){if(dk(e))throw qn(15,e);this._factories.set(e,t=new n5(e,uf(e)))}return t}registerFactory(e,t){this._factories.set(e,t)}createChild(e){return e===void 0&&this.config.inheritParentResources?this.config===na.DEFAULT?new zm(this,this.config):new zm(this,na.from({...this.config,inheritParentResources:!1})):new zm(this,na.from(e??this.config))}disposeResolvers(){var r;const e=this._resolvers,t=this._disposableResolvers;let i,s;for([s,i]of t.entries())(r=i.dispose)==null||r.call(i),e.delete(s);t.clear()}useResources(e){const t=e.res;for(const i in t)this.registerResolver(i,t[i])}find(e,t){var o,a;const i=yt(t)?`${Jo}:${e}:${t}`:e;let s=this,r=s.res[i];return r==null&&(s=s.root,r=s.res[i]),r==null?null:((a=(o=r.getFactory)==null?void 0:o.call(r,s))==null?void 0:a.Type)??null}dispose(){this._disposableResolvers.size>0&&this.disposeResolvers(),this._resolvers.clear(),this.root===this&&(this._factories.clear(),this.res={})}_jitRegister(e,t){const i=km(e);if(!Ht(e)&&!i)throw qn(9,e);if(e5.has(e.name))throw qn(10,e);if(i){const r=e.register(t,e);if(!(r instanceof Object)||r.resolve==null){const o=t._resolvers.get(e);if(o!=null)return o;throw qn(11,e)}return r}if(e.$isInterface)throw qn(12,e.friendlyName);const s=this.config.defaultResolver(e,t);return t._resolvers.set(e,s),s}}class n5{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){const i=gn;gn=e;let s;{let r,o;try{r=this.dependencies.map(a=>e.get(o=a))}catch(a){throw Lf(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}, caused by dependency: ${String(o)}`),gn=i,a}try{return t===void 0?s=new this.Type(...r):s=new this.Type(...r,...t),this.transformers==null?s:this.transformers.reduce(gk,s)}catch(a){throw Lf(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}`),a}finally{gn=i}}try{return t===void 0?s=new this.Type(...this.dependencies.map(Bp,e)):s=new this.Type(...this.dependencies.map(Bp,e),...t),this.transformers==null?s:this.transformers.reduce(gk,s)}finally{gn=i}}registerTransformer(e){(this.transformers??(this.transformers=[])).push(e)}}function gk(n,e){return e(n)}function vg(n){if(n==null)throw qn(14)}function Bp(n){return this.get(n)}function ge(...n){if(gn==null)throw qn(16,...n);if(n.length===1)try{return gn.get(n[0])}catch(e){throw Lf(`[DEV:aurelia] resolve() call error for: ${String(n[0])}`),e}else{let e;try{return n.map(t=>gn.get(e=t))}catch(t){throw Lf(`[DEV:aurelia] resolve() call error for: ${String(e)}`),t}}return n.length===1?gn.get(n[0]):n.map(Bp,gn)}const mk=(n,e,t)=>{if(n instanceof _r&&n._strategy===4){const i=n._state,s=i.length,r=Array(s);let o=0;for(;o<s;++o)r[o]=i[o].resolve(e,t);return r}return[n.resolve(e,t)]},i5={$isResolver:!0,resolve(n,e){return e}},km=n=>Ht(n==null?void 0:n.register),s5=n=>km(n)&&typeof n.registerInRequestor=="boolean",pk=n=>s5(n)&&n.registerInRequestor,r5=n=>n.prototype!==void 0,M_=n=>yt(n)&&n.indexOf(":")>0;class o5{constructor(e,t){this._container=e,this._key=t}instance(e){return this._registerResolver(0,e)}singleton(e){return this._registerResolver(1,e)}transient(e){return this._registerResolver(2,e)}callback(e){return this._registerResolver(3,e)}cachedCallback(e){return this._registerResolver(3,IB(e))}aliasTo(e){return this._registerResolver(5,e)}_registerResolver(e,t){const{_container:i,_key:s}=this;return this._container=this._key=void 0,i.registerResolver(s,new _r(s,e,t))}}const bg=n=>{const e=n.slice(),t=Object.keys(n),i=t.length;let s;for(let r=0;r<i;++r)s=t[r],$p(s)||(e[s]=n[s]);return e},xy=Rc("di:paramtypes"),a5=n=>oa(xy,n),HB=n=>oa("design:paramtypes",n),wk=n=>{var e;return(e=n.metadata)[xy]??(e[xy]=[])},uf=n=>{const e=Rc("di:dependencies");let t=oa(e,n);if(t===void 0){const i=n.inject;if(i===void 0){const s=HB(n),r=a5(n);if(s===void 0)if(r===void 0){const o=Object.getPrototypeOf(n);Ht(o)&&o!==Function.prototype?t=bg(uf(o)):t=[]}else t=bg(r);else if(r===void 0)t=bg(s);else{t=bg(s);let o=r.length,a,l=0;for(;l<o;++l)a=r[l],a!==void 0&&(t[l]=a);const c=Object.keys(r);let h;for(l=0,o=c.length,l=0;l<o;++l)h=c[l],$p(h)||(t[h]=r[h])}}else t=bg(i);Lp(t,n,e)}return t},Wc=(n,e)=>{const t=Ht(n)?n:e,i=(yt(n)?n:void 0)??"(anonymous)",s={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:t!=null?(r,o)=>t(new o5(r,o??s)):void 0};return s},s1=(...n)=>(e,t)=>{switch(t.kind){case"class":{const i=wk(t);let s,r=0;for(;r<n.length;++r)s=n[r],s!==void 0&&(i[r]=s);break}case"field":{const i=wk(t),s=n[0];s!==void 0&&(i[t.name]=s);break}default:throw qn(22,String(t.name),t.kind)}},jc=(BK(),{createContainer:JK,getDesignParamtypes:HB,getDependencies:uf,createInterface:Wc,inject:s1,transient(n){return n.register=function(e){return PB(n,n).register(e,n)},n.registerInRequestor=!1,n},singleton(n,e=h5){return n.register=function(t){return Fp(n,n).register(t,n)},n.registerInRequestor=e.scoped,n}}),Sw=Wc("IContainer"),l5=Sw;function vk(n,e){return jc.transient(n)}function c5(n,e){return n==null?vk:vk(n)}const h5={scoped:!1};class _r{get $isResolver(){return!0}constructor(e,t,i){this._resolving=!1,this._cachedFactory=null,this._key=e,this._strategy=t,this._state=i}register(e,t){return e.registerResolver(t||this._key,this)}resolve(e,t){switch(this._strategy){case 0:return this._state;case 1:{if(this._resolving)throw qn(3,this._state.name);return this._resolving=!0,this._state=(this._cachedFactory=e.getFactory(this._state)).construct(t),this._strategy=0,this._resolving=!1,this._state}case 2:{const i=e.getFactory(this._state);if(i===null)throw qn(4,this._key);return i.construct(t)}case 3:return this._state(e,t,this);case 4:return this._state[0].resolve(e,t);case 5:return t.get(this._state);default:throw qn(5,this._strategy)}}getFactory(e){var t,i;switch(this._strategy){case 1:case 2:return e.getFactory(this._state);case 5:return((i=(t=e.getResolver(this._state))==null?void 0:t.getFactory)==null?void 0:i.call(t,e))??null;case 0:return this._cachedFactory;default:return null}}}class Qn{get friendlyName(){return this._name}constructor(e,t=null,i=null){this._name=e,this._instance=t,this._Type=i}prepare(e){this._instance=e}get $isResolver(){return!0}resolve(){if(this._instance==null)throw qn(13,this._name);return this._instance}getFactory(e){return this._Type==null?null:e.getFactory(this._Type)}dispose(){this._instance=null}}class u5{constructor(e,t){this.key=e,this.params=t}register(e){e.has(this.key,!0)?e.get(this.key).register(e,...this.params):e.register(...this.params.filter(t=>typeof t=="object"))}}const at=yw([]),d5=yw({});function ia(){}const Zf=Wc("IPlatform");function _w(n){return function(e){function t(i,s){s1(t)(i,s)}return t.$isResolver=!0,t.resolve=function(i,s){return n(e,i,s)},t}}const r1=(n,e=!1)=>{function t(i,s){s1(t)(i,s)}return t.$isResolver=!0,t.resolve=(i,s)=>s.getAll(n,e),t},DB=_w((n,e,t)=>{if(t.has(n,!0))return t.get(n)}),f5=_w((n,e,t)=>t.has(n,!1)?t.get(n):void 0),$f=_w((n,e,t)=>t.has(n,!1)?t.get(n):t.root.get(n)),g5=_w((n,e,t)=>t.has(n,!1)?t.get(n):t.root.has(n,!1)?t.root.get(n):void 0),m5=_w((n,e,t)=>t===t.root?t.getAll(n,!1):t.has(n,!1)?t.getAll(n,!1).concat(t.root.getAll(n,!1)):t.root.getAll(n,!1));function ud(n,e,t,i,s,r){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=i.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=n?i.static?n:n.prototype:null,h=c?Object.getOwnPropertyDescriptor(c,i.name):{},u,d=!1,f=t.length-1;f>=0;f--){var g={};for(var m in i)g[m]=m==="access"?{}:i[m];for(var m in i.access)g.access[m]=i.access[m];g.addInitializer=function(v){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(v||null))};var w=(0,t[f])(a==="accessor"?{get:h.get,set:h.set}:h[l],g);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(u=o(w.get))&&(h.get=u),(u=o(w.set))&&(h.set=u),(u=o(w.init))&&s.unshift(u)}else(u=o(w))&&(a==="field"?s.unshift(u):h[l]=u)}c&&Object.defineProperty(c,i.name,h),d=!0}function p5(n,e,t){for(var i=arguments.length>2,s=0;s<e.length;s++)t=i?e[s].call(n,t):e[s].call(n);return i?t:void 0}const Um=0,Ym=1,Gm=2,xf=3,Km=4,qm=5,w5=6,v5=yw({trace:Um,debug:Ym,info:Gm,warn:xf,error:Km,fatal:qm,none:w5}),NB=Wc("ILogConfig",n=>n.instance(new _5("no-colors",xf))),b5=Wc("ISink"),y5=Wc("ILogEventFactory",n=>n.singleton(x5)),xu=Wc("ILogger",n=>n.singleton(E5)),C5=Wc("ILogScope"),S5=yw({key:Rc("logger-sink-handles"),define(n,e){Lp(e.handles,n,this.key)},getHandles(n){return oa(this.key,n.constructor)}}),qa=KE({red(n){return`\x1B[31m${n}\x1B[39m`},green(n){return`\x1B[32m${n}\x1B[39m`},yellow(n){return`\x1B[33m${n}\x1B[39m`},blue(n){return`\x1B[34m${n}\x1B[39m`},magenta(n){return`\x1B[35m${n}\x1B[39m`},cyan(n){return`\x1B[36m${n}\x1B[39m`},white(n){return`\x1B[37m${n}\x1B[39m`},grey(n){return`\x1B[90m${n}\x1B[39m`}});class _5{constructor(e,t){this.colorOptions=e,this.level=t}}const A_=function(){const n={"no-colors":KE({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:KE({TRC:qa.grey("TRC"),DBG:qa.grey("DBG"),INF:qa.white("INF"),WRN:qa.yellow("WRN"),ERR:qa.red("ERR"),FTL:qa.red("FTL"),QQQ:qa.grey("???")})};return(e,t)=>e<=Um?n[t].TRC:e<=Ym?n[t].DBG:e<=Gm?n[t].INF:e<=xf?n[t].WRN:e<=Km?n[t].ERR:e<=qm?n[t].FTL:n[t].QQQ}(),bk=(n,e)=>e==="no-colors"?n.join("."):n.map(qa.cyan).join("."),P_=(n,e)=>e==="no-colors"?new Date(n).toISOString():qa.grey(new Date(n).toISOString());class R5{constructor(e,t,i,s,r,o){this.severity=e,this.message=t,this.optionalParams=i,this.scope=s,this.colorOptions=r,this.timestamp=o}toString(){const{severity:e,message:t,scope:i,colorOptions:s,timestamp:r}=this;return i.length===0?`${P_(r,s)} [${A_(e,s)}] ${t}`:`${P_(r,s)} [${A_(e,s)} ${bk(i,s)}] ${t}`}getFormattedLogInfo(e=!1){const{severity:t,message:i,scope:s,colorOptions:r,timestamp:o,optionalParams:a}=this;let l=null,c="";e&&i instanceof Error?l=i:c=i;const h=s.length===0?"":` ${bk(s,r)}`;let u=`${P_(o,r)} [${A_(t,r)}${h}] ${c}`;if(a===void 0||a.length===0)return l===null?[u]:[u,l];let d=0;for(;u.includes("%s");)u=u.replace("%s",String(a[d++]));return l!==null?[u,l,...a.slice(d)]:[u,...a.slice(d)]}}class x5{constructor(){this.config=ge(NB)}createLogEvent(e,t,i,s){return new R5(t,i,s,e.scope,this.config.colorOptions,Date.now())}}let E5=(()=>{var n;let e=[],t,i,s,r,o,a;return n=class{constructor(c=ge(NB),h=ge(y5),u=ge(r1(b5)),d=ge(DB(C5))??[],f=null){this.scope=(p5(this,e),d),this._scopedLoggers=Kt();let g,m,w,v,C,S;if(this.config=c,this._factory=h,this.sinks=u,f===null){this.root=this,this.parent=this,g=this._traceSinks=[],m=this._debugSinks=[],w=this._infoSinks=[],v=this._warnSinks=[],C=this._errorSinks=[],S=this._fatalSinks=[];for(const x of u){const _=S5.getHandles(x);((_==null?void 0:_.includes(Um))??!0)&&g.push(x),((_==null?void 0:_.includes(Ym))??!0)&&m.push(x),((_==null?void 0:_.includes(Gm))??!0)&&w.push(x),((_==null?void 0:_.includes(xf))??!0)&&v.push(x),((_==null?void 0:_.includes(Km))??!0)&&C.push(x),((_==null?void 0:_.includes(qm))??!0)&&S.push(x)}}else this.root=f.root,this.parent=f,g=this._traceSinks=f._traceSinks,m=this._debugSinks=f._debugSinks,w=this._infoSinks=f._infoSinks,v=this._warnSinks=f._warnSinks,C=this._errorSinks=f._errorSinks,S=this._fatalSinks=f._fatalSinks}trace(c,...h){this.config.level<=Um&&this._emit(this._traceSinks,Um,c,h)}debug(c,...h){this.config.level<=Ym&&this._emit(this._debugSinks,Ym,c,h)}info(c,...h){this.config.level<=Gm&&this._emit(this._infoSinks,Gm,c,h)}warn(c,...h){this.config.level<=xf&&this._emit(this._warnSinks,xf,c,h)}error(c,...h){this.config.level<=Km&&this._emit(this._errorSinks,Km,c,h)}fatal(c,...h){this.config.level<=qm&&this._emit(this._fatalSinks,qm,c,h)}scopeTo(c){const h=this._scopedLoggers;let u=h[c];return u===void 0&&(u=h[c]=new n(this.config,this._factory,null,this.scope.concat(c),this)),u}_emit(c,h,u,d){const f=Ht(u)?u():u,g=this._factory.createLogEvent(this,h,f,d);for(let m=0,w=c.length;m<w;++m)c[m].handleEvent(g)}},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[hd],i=[hd],s=[hd],r=[hd],o=[hd],a=[hd],ud(n,null,t,{kind:"method",name:"trace",static:!1,private:!1,access:{has:c=>"trace"in c,get:c=>c.trace},metadata:l},null,e),ud(n,null,i,{kind:"method",name:"debug",static:!1,private:!1,access:{has:c=>"debug"in c,get:c=>c.debug},metadata:l},null,e),ud(n,null,s,{kind:"method",name:"info",static:!1,private:!1,access:{has:c=>"info"in c,get:c=>c.info},metadata:l},null,e),ud(n,null,r,{kind:"method",name:"warn",static:!1,private:!1,access:{has:c=>"warn"in c,get:c=>c.warn},metadata:l},null,e),ud(n,null,o,{kind:"method",name:"error",static:!1,private:!1,access:{has:c=>"error"in c,get:c=>c.error},metadata:l},null,e),ud(n,null,a,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:c=>"fatal"in c,get:c=>c.fatal},metadata:l},null,e),l&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),n})();const LB="AccessThis",T5="AccessBoundary",o1="AccessGlobal",a1="AccessScope",M5="ArrayLiteral",A5="ObjectLiteral",P5="PrimitiveLiteral",I5="Template",O5="Unary",k5="CallScope",H5="CallMember",D5="CallFunction",N5="CallGlobal",$S="AccessMember",$B="AccessKeyed",L5="TaggedTemplate",$5="Binary",F5="Conditional",B5="Assign",V5="ArrowFunction",W5="ValueConverter",j5="BindingBehavior",FB="ArrayBindingPattern",BB="ObjectBindingPattern",VB="BindingIdentifier",z5="ForOfStatement",U5="Interpolation",WB="ArrayDestructuring",Y5="ObjectDestructuring",G5="DestructuringAssignmentLeaf",K5="Custom";class jB{constructor(e){this.value=e,this.$kind=K5}evaluate(...e){return this.value}assign(...e){return e}bind(...e){}unbind(...e){}accept(e){}}class q5{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=j5,this.key=`_bb_${t}`}}class X5{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=W5}}class Q5{constructor(e,t,i="="){this.target=e,this.value=t,this.op=i,this.$kind=B5}}class Z5{constructor(e,t,i){this.condition=e,this.yes=t,this.no=i,this.$kind=F5}}class J5{constructor(e){this.name=e,this.$kind=o1}}class Xm{constructor(e=0){this.ancestor=e,this.$kind=LB}}class e6{constructor(){this.$kind=T5}}class Qm{constructor(e,t=0){this.name=e,this.ancestor=t,this.$kind=a1}}const zB=n=>n.$kind===o1||(n.$kind===$S||n.$kind===$B)&&n.accessGlobal;class qE{constructor(e,t,i=!1){this.object=e,this.name=t,this.optional=i,this.$kind=$S,this.accessGlobal=zB(e)}}class UB{constructor(e,t,i=!1){this.object=e,this.key=t,this.optional=i,this.$kind=$B,this.accessGlobal=zB(e)}}class YB{constructor(e,t,i=0,s=!1){this.name=e,this.args=t,this.ancestor=i,this.optional=s,this.$kind=k5}}class uC{constructor(e,t,i,s=!1,r=!1){this.object=e,this.name=t,this.args=i,this.optionalMember=s,this.optionalCall=r,this.$kind=H5}}class Ey{constructor(e,t,i=!1){this.func=e,this.args=t,this.optional=i,this.$kind=D5}}class t6{constructor(e,t){this.name=e,this.args=t,this.$kind=N5}}class n6{constructor(e,t,i){this.operation=e,this.left=t,this.right=i,this.$kind=$5}}class yk{constructor(e,t,i=0){this.operation=e,this.expression=t,this.pos=i,this.$kind=O5}}class bi{constructor(e){this.value=e,this.$kind=P5}}bi.$undefined=new bi(void 0);bi.$null=new bi(null);bi.$true=new bi(!0);bi.$false=new bi(!1);bi.$empty=new bi("");class XE{constructor(e){this.elements=e,this.$kind=M5}}XE.$empty=new XE(at);class QE{constructor(e,t){this.keys=e,this.values=t,this.$kind=A5}}QE.$empty=new QE(at,at);class dC{constructor(e,t=at){this.cooked=e,this.expressions=t,this.$kind=I5}}dC.$empty=new dC([""]);class GB{constructor(e,t,i,s=at){this.cooked=e,this.func=i,this.expressions=s,this.$kind=L5,e.raw=t}}class i6{constructor(e){this.elements=e,this.$kind=FB}}class s6{constructor(e,t){this.keys=e,this.values=t,this.$kind=BB}}class fC{constructor(e){this.name=e,this.$kind=VB}}class r6{constructor(e,t,i){this.declaration=e,this.iterable=t,this.semiIdx=i,this.$kind=z5}}class o6{constructor(e,t=at){this.parts=e,this.expressions=t,this.$kind=U5,this.isMulti=t.length>1,this.firstExpression=t[0]}}class a6{constructor(e,t,i,s){this.$kind=e,this.list=t,this.source=i,this.initializer=s}}class KB{constructor(e,t,i){this.target=e,this.source=t,this.initializer=i,this.$kind=G5}}class ZE{constructor(e,t,i=!1){this.args=e,this.body=t,this.rest=i,this.$kind=V5}}const JE=String,Ty=()=>Object.create(null),Zt=(n,...e)=>new Error(`AUR${JE(n).padStart(4,"0")}: ${c6(n,...e)}`),l6={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`},c6=(n,...e)=>{var i;let t=l6[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=JE(l[a.slice(1)]):l=JE(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t},Jf=jc.createInterface("IExpressionParser");class qB{constructor(){this._expressionLookup=Ty(),this._forOfLookup=Ty(),this._interpolationLookup=Ty()}parse(e,t){let i;switch(t){case ZB:return new jB(e);case gC:return i=this._interpolationLookup[e],i===void 0&&(i=this._interpolationLookup[e]=this.$parse(e,t)),i;case sl:return i=this._forOfLookup[e],i===void 0&&(i=this._forOfLookup[e]=this.$parse(e,t)),i;default:{if(e.length===0){if(t===g6||t===Ck)return bi.$empty;throw P6()}return i=this._expressionLookup[e],i===void 0&&(i=this._expressionLookup[e]=this.$parse(e,t)),i}}}$parse(e,t){return Rt=e,ct=0,aa=e.length,Ws=0,Eu=0,Ce=6291456,nn="",qt=Tu(0),It=!0,St=!1,Hm=!0,c1=-1,Dn(61,t===void 0?Ck:t)}}qB.register=Cw(Jf);function l1(n){switch(n){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return n}}const h6=bi.$false,u6=bi.$true,d6=bi.$null,XB=bi.$undefined,Zm=new Xm(0),I_=new Xm(1),f6=new e6,ml="None",gC="Interpolation",sl="IsIterator",QB="IsChainable",g6="IsFunction",Ck="IsProperty",ZB="IsCustom";let Rt="",ct=0,aa=0,Ws=0,Eu=0,Ce=6291456,nn="",qt,It=!0,St=!1,Hm=!0,c1=-1;const Vp=String.fromCharCode,Tu=n=>Rt.charCodeAt(n),pl=()=>Rt.slice(Eu,ct),m6="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Dn(n,e){if(e===ZB)return new jB(Rt);if(ct===0){if(e===gC)return _6();if(Ve(),Ce&4194304)throw T6()}It=513>n,St=!1,Hm=514>n;let t=!1,i,s=0;if(Ce&131072){const r=ef[Ce&63];Ve(),i=new yk(r,Dn(514,e)),It=!1}else{e:switch(Ce){case 12295:s=Ws,It=!1,Hm=!1;do switch(Ve(),++s,Ce){case 65546:if(Ve(),!(Ce&12288))throw Wa();break;case 11:case 12:throw Wa();case 2162701:if(St=!0,Ve(),!(Ce&12288)){i=s===0?Zm:s===1?I_:new Xm(s),t=!0;break e}break;default:if(Ce&2097152){i=s===0?Zm:s===1?I_:new Xm(s);break e}throw M6()}while(Ce===12295);case 4096:{const r=nn;if(e===sl)i=new fC(r);else if(Hm&&m6.includes(r))i=new J5(r);else{if(Hm&&r==="import")throw D6();i=new Qm(r,s)}if(It=!St,Ve(),Go(51)){if(Ce===524297)throw iV();const o=St,a=Ws;++Ws;const l=Dn(62,ml);St=o,Ws=a,It=!1,i=new ZE([new fC(r)],l)}break}case 11:throw B6();case 12:throw eT();case 12292:switch(It=!1,Ve(),Ws){case 0:i=Zm;break;case 1:i=I_;break;default:i=new Xm(Ws);break}break;case 12293:It=!1,Ve(),i=f6;break;case 2688008:i=v6(e);break;case 2688019:i=Rt.search(/\s+of\s+/)>ct?p6():b6(e);break;case 524297:i=S6(e);break;case 2163760:i=new dC([nn]),It=!1,Ve();break;case 2163761:i=O_(e,i,!1);break;case 16384:case 32768:i=new bi(nn),It=!1,Ve();break;case 8194:case 8195:case 8193:case 8192:i=ef[Ce&63],It=!1,Ve();break;default:throw ct>=aa?A6():k_()}if(e===sl)return C6(i);switch(Ce){case 2228280:case 2228281:i=new yk(ef[Ce&63],i,1),Ve(),It=!1;break}if(514<n)return i;if(Ce===11||Ce===12)throw Wa();if(i.$kind===LB)switch(Ce){case 2162701:if(St=!0,It=!1,Ve(),!(Ce&13312))throw h1();if(Ce&12288)i=new Qm(nn,i.ancestor),Ve();else if(Ce===2688008)i=new Ey(i,Qr(),!0);else if(Ce===2688019)i=My(i,!0);else throw Ay();break;case 65546:if(It=!St,Ve(),!(Ce&12288))throw Wa();i=new Qm(nn,i.ancestor),Ve();break;case 11:case 12:throw Wa();case 2688008:i=new Ey(i,Qr(),t);break;case 2688019:i=My(i,t);break;case 2163760:i=Sk(i);break;case 2163761:i=O_(e,i,!0);break}for(;(Ce&65536)>0;)switch(Ce){case 2162701:i=w6(i);break;case 65546:if(Ve(),!(Ce&12288))throw Wa();i=JB(i,!1);break;case 11:case 12:throw Wa();case 2688008:i.$kind===a1?i=new YB(i.name,Qr(),i.ancestor,!1):i.$kind===$S?i=new uC(i.object,i.name,Qr(),i.optional,!1):i.$kind===o1?i=new t6(i.name,Qr()):i=new Ey(i,Qr(),!1);break;case 2688019:i=My(i,!1);break;case 2163760:if(St)throw Ay();i=Sk(i);break;case 2163761:if(St)throw Ay();i=O_(e,i,!0);break}}if(Ce===11||Ce===12)throw Wa();if(513<n)return i;for(;(Ce&262144)>0;){const r=Ce;if((r&960)<=n)break;Ve(),i=new n6(ef[r&63],i,Dn(r&960,e)),It=!1}if(63<n)return i;if(Go(6291479)){const r=Dn(62,e);to(6291477),i=new Z5(i,r,Dn(62,e)),It=!1}if(62<n)return i;switch(Ce){case 4194350:case 4194356:case 4194357:case 4194358:case 4194359:{if(!It)throw I6();const r=ef[Ce&63];Ve(),i=new Q5(i,Dn(62,e),r);break}}if(61<n)return i;for(;Go(6291481);){if(Ce===6291456)throw O6();const r=nn;Ve();const o=new Array;for(;Go(6291477);)o.push(Dn(62,e));i=new X5(i,r,o)}for(;Go(6291480);){if(Ce===6291456)throw k6();const r=nn;Ve();const o=new Array;for(;Go(6291477);)o.push(Dn(62,e));i=new q5(i,r,o)}if(Ce!==6291456){if(e===gC&&Ce===7340046)return i;if(e===QB&&Ce===6291478){if(ct===aa)throw k_();return c1=ct-1,i}throw pl()==="of"?H6():k_()}return i}function p6(){const n=[],e=new a6(WB,n,void 0,void 0);let t="",i=!0,s=0;for(;i;)switch(Ve(),Ce){case 7340052:i=!1,r();break;case 6291472:r();break;case 4096:t=pl();break;default:throw $6()}return to(7340052),e;function r(){t!==""?(n.push(new KB(new qE(Zm,t),new UB(Zm,new bi(s++)),void 0)),t=""):s++}}function Qr(){const n=St;Ve();const e=[];for(;Ce!==7340047&&(e.push(Dn(62,ml)),!!Go(6291472)););return to(7340047),It=!1,St=n,e}function My(n,e){const t=St;return Ve(),n=new UB(n,Dn(62,ml),e),to(7340052),It=!t,St=t,n}function w6(n){if(St=!0,It=!1,Ve(),!(Ce&13312))throw h1();if(Ce&12288)return JB(n,!0);if(Ce===2688008)return n.$kind===a1?new YB(n.name,Qr(),n.ancestor,!0):n.$kind===$S?new uC(n.object,n.name,Qr(),n.optional,!0):new Ey(n,Qr(),!0);if(Ce===2688019)return My(n,!0);throw Ay()}function JB(n,e){const t=nn;switch(Ce){case 2162701:{St=!0,It=!1;const i=ct,s=Eu,r=Ce,o=qt,a=nn,l=It,c=St;if(Ve(),!(Ce&13312))throw h1();return Ce===2688008?new uC(n,t,Qr(),e,!0):(ct=i,Eu=s,Ce=r,qt=o,nn=a,It=l,St=c,new qE(n,t,e))}case 2688008:return It=!1,new uC(n,t,Qr(),e,!1);default:return It=!St,Ve(),new qE(n,t,e)}}function v6(n){Ve();const e=ct,t=Eu,i=Ce,s=qt,r=nn,o=St,a=[];let l=1,c=!1;e:for(;;){if(Ce===12){if(Ve(),Ce!==4096)throw Wa();if(a.push(new fC(nn)),Ve(),Ce===6291472)throw F6();if(Ce!==7340047||(Ve(),Ce!==51))throw eT();Ve();const d=St,f=Ws;++Ws;const g=Dn(62,ml);return St=d,Ws=f,It=!1,new ZE(a,g,!0)}switch(Ce){case 4096:a.push(new fC(nn)),Ve();break;case 7340047:Ve();break e;case 524297:case 2688019:Ve(),l=4;break;case 6291472:l=2,c=!0;break e;case 2688008:l=2;break e;default:Ve(),l=2;break}switch(Ce){case 6291472:if(Ve(),c=!0,l===1)break;break e;case 7340047:Ve();break e;case 4194350:l===1&&(l=3);break e;case 51:if(c)throw fv();Ve(),l=2;break e;default:l===1&&(l=2);break e}}if(Ce===51){if(l===1){if(Ve(),Ce===524297)throw iV();const d=St,f=Ws;++Ws;const g=Dn(62,ml);return St=d,Ws=f,It=!1,new ZE(a,g)}throw fv()}else if(l===1&&a.length===0)throw nV(51);if(c)switch(l){case 2:throw fv();case 3:throw xk();case 4:throw Ek()}ct=e,Eu=t,Ce=i,qt=s,nn=r,St=o;const h=St,u=Dn(62,n);if(St=h,to(7340047),Ce===51)switch(l){case 2:throw fv();case 3:throw xk();case 4:throw Ek()}return u}function b6(n){const e=St;Ve();const t=new Array;for(;Ce!==7340052;)if(Go(6291472)){if(t.push(XB),Ce===7340052)break}else if(t.push(Dn(62,n===sl?ml:n)),Go(6291472)){if(Ce===7340052)break}else break;return St=e,to(7340052),n===sl?new i6(t):(It=!1,new XE(t))}const y6=[FB,BB,VB,WB,Y5];function C6(n){if(!y6.includes(n.$kind)||Ce!==4204594)throw Rk(n.$kind);Ve();const e=n,t=Dn(61,QB);return new r6(e,t,c1)}function S6(n){const e=St,t=new Array,i=new Array;for(Ve();Ce!==7340046;){if(t.push(nn),Ce&49152)Ve(),to(6291477),i.push(Dn(62,n===sl?ml:n));else if(Ce&12288){const s=qt,r=Ce,o=ct;Ve(),Go(6291477)?i.push(Dn(62,n===sl?ml:n)):(qt=s,Ce=r,ct=o,i.push(Dn(515,n===sl?ml:n)))}else throw N6();Ce!==7340046&&to(6291472)}return St=e,to(7340046),n===sl?new s6(t,i):(It=!1,new QE(t,i))}function _6(){const n=[],e=[],t=aa;let i="";for(;ct<t;){switch(qt){case 36:if(Tu(ct+1)===123){n.push(i),i="",ct+=2,qt=Tu(ct),Ve();const s=Dn(61,gC);e.push(s);continue}else i+="$";break;case 92:i+=Vp(l1(je()));break;default:i+=Vp(qt)}je()}return e.length?(n.push(i),new o6(n,e)):null}function O_(n,e,t){const i=St,s=[nn];to(2163761);const r=[Dn(62,n)];for(;(Ce=E6())!==2163760;)s.push(nn),to(2163761),r.push(Dn(62,n));return s.push(nn),It=!1,St=i,t?(Ve(),new GB(s,s,e,r)):(Ve(),new dC(s,r))}function Sk(n){It=!1;const e=[nn];return Ve(),new GB(e,e,n)}function Ve(){for(;ct<aa;)if(Eu=ct,(Ce=W6[qt]())!=null)return;Ce=6291456}function je(){return qt=Tu(++ct)}function R6(){for(;j6[je()];);const n=V6[nn=pl()];return n===void 0?4096:n}function _k(n){let e=qt;if(n===!1){do e=je();while(e<=57&&e>=48);if(e!==46)return nn=parseInt(pl(),10),32768;if(e=je(),ct>=aa)return nn=parseInt(pl().slice(0,-1),10),32768}if(e<=57&&e>=48)do e=je();while(e<=57&&e>=48);else qt=Tu(--ct);return nn=parseFloat(pl()),32768}function x6(){const n=qt;je();let e=0;const t=new Array;let i=ct;for(;qt!==n;)if(qt===92)t.push(Rt.slice(i,ct)),je(),e=l1(qt),je(),t.push(Vp(e)),i=ct;else{if(ct>=aa)throw L6();je()}const s=Rt.slice(i,ct);return je(),t.push(s),nn=t.join(""),16384}function eV(){let n=!0,e="";for(;je()!==96;)if(qt===36)if(ct+1<aa&&Tu(ct+1)===123){ct++,n=!1;break}else e+="$";else if(qt===92)e+=Vp(l1(je()));else{if(ct>=aa)throw tV();e+=Vp(qt)}return je(),nn=e,n?2163760:2163761}const E6=()=>{if(ct>=aa)throw tV();return ct--,eV()},Go=n=>Ce===n?(Ve(),!0):!1,to=n=>{if(Ce===n)Ve();else throw nV(n)},T6=()=>Zt(151,Rt),eT=()=>Zt(152,Rt),Wa=()=>Zt(153,Rt),M6=()=>Zt(154,Rt),A6=()=>Zt(155,Rt),k_=()=>Zt(156,pl(),ct,Rt),P6=()=>Zt(157),I6=()=>Zt(158,Rt),O6=()=>Zt(159,Rt),k6=()=>Zt(160,Rt),H6=()=>Zt(161,Rt),D6=()=>Zt(162,Rt),Rk=n=>Zt(163,Rt,n),N6=()=>Zt(164,Rt),L6=()=>Zt(165,Rt),tV=()=>Zt(166,Rt),nV=n=>Zt(167,ef[n&63],Rt),$6=()=>Zt(170,pl(),ct,Rt),h1=()=>Zt(171,pl(),ct-1,Rt),Ay=()=>Zt(172,Rt),fv=()=>Zt(173,Rt),xk=()=>Zt(174,Rt),Ek=()=>Zt(175,Rt),F6=()=>Zt(176,Rt),iV=()=>Zt(178,Rt),B6=()=>Zt(179,ct-1,Rt),ef=[h6,u6,d6,XB,"this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163760,2163761,"of","=>","+=","-=","*=","/=","++","--"],V6=Object.assign(Ty(),{true:8193,null:8194,false:8192,undefined:8195,this:12293,$this:12292,$parent:12295,in:6562213,instanceof:6562214,typeof:139305,void:139306,of:4204594}),{CharScanners:W6,IdParts:j6}=(()=>{const n=()=>{throw Zt(168,Rt)};n.notMapped=!0;const e={AsciiIdPart:[36,0,48,58,65,91,95,0,97,123],IdStart:[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Digit:[48,58],Skip:[0,33,127,161]},t=(o,a,l,c)=>{const h=l.length;for(let u=0;u<h;u+=2){const d=l[u];let f=l[u+1];f=f>0?f:d+1,o&&o.fill(c,d,f)}},i=(o=>(t(o,null,e.IdStart,1),t(o,null,e.Digit,1),o))(new Uint8Array(65535)),s=o=>()=>(je(),o),r=new Array(65535);return r.fill(n,0,65535),t(r,null,e.Skip,()=>(je(),null)),t(r,null,e.IdStart,R6),t(r,null,e.Digit,()=>_k(!1)),r[34]=r[39]=()=>x6(),r[96]=()=>eV(),r[33]=()=>je()!==61?131119:je()!==61?6553950:(je(),6553952),r[61]=()=>je()===62?(je(),51):qt!==61?4194350:je()!==61?6553949:(je(),6553951),r[38]=()=>je()!==38?6291480:(je(),6553884),r[124]=()=>je()!==124?6291481:(je(),6553819),r[63]=()=>{if(je()===46){const o=Tu(ct+1);return o<=48||o>=57?(je(),2162701):6291479}return qt!==63?6291479:(je(),6553754)},r[46]=()=>je()<=57&&qt>=48?_k(!0):qt===46?je()!==46?11:(je(),12):65546,r[60]=()=>je()!==61?6554017:(je(),6554019),r[62]=()=>je()!==61?6554018:(je(),6554020),r[37]=s(6554156),r[40]=s(2688008),r[41]=s(7340047),r[42]=()=>je()!==61?6554155:(je(),4194358),r[43]=()=>je()===43?(je(),2228280):qt!==61?2490855:(je(),4194356),r[44]=s(6291472),r[45]=()=>je()===45?(je(),2228281):qt!==61?2490856:(je(),4194357),r[47]=()=>je()!==61?6554157:(je(),4194359),r[58]=s(6291477),r[59]=s(6291478),r[91]=s(2688019),r[93]=s(7340052),r[123]=s(524297),r[125]=s(7340046),{CharScanners:r,IdParts:i}})(),ga=jc.createInterface,eg=Object.freeze,{aliasTo:Tk,singleton:u1}=Ru,kr="Interpolation",sV="IsFunction",ma="IsProperty",tf="custom-element",Rw=eg({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),FS=ga("ITemplateCompiler"),rV=ga("IAttrMapper"),On=(n,...e)=>new Error(`AUR${String(n).padStart(4,"0")}: ${U6(n,...e)}`),z6={88:"AttributeParser is already initialized; cannot add patterns after initialization.",89:'Attribute pattern "{{0}}" has already been registered.',99:"Method {{0}} not implemented",157:"Binding command {{0}} has already been registered.",701:'Template compilation error in element "{{0:name}}": the root <template> cannot be a local element template.',702:'Template compilation error: attribute "{{0}}" is invalid on element surrogate.',703:'Template compilation error: template controller "{{0}}" is invalid on element surrogate.',704:'Template compilation error: Invalid command "{{0:.command}}" for <let>. Only to-view/bind supported.',706:'Template compilation error: detected projection with [au-slot="{{0}}"] attempted on a non custom element {{1}}.',707:"Template compilation error: creating binding to non-bindable property {{0}} on {{1}}.",708:'Template compilation error: the custom element "{{0}}" does not have any content other than local template(s).',709:'Template compilation error: local element template needs to be defined directly under root of element "{{0}}".',710:'Template compilation error: bindable properties of local element "{{0}}" template needs to be defined directly under <template>.',711:`Template compilation error: the attribute 'property' is missing in {{0:outerHTML}} in local element "{{1}}"`,712:"Template compilation error: Bindable property and attribute needs to be unique; found property: {{0}}, attribute: {{1}}",713:'Template compilation error: unknown binding command: "{{0}}".{{0:bindingCommandHelp}}',714:'Template compilation error: primary already exists on element/attribute "{{0}}"',715:'Template compilation error: the value of "as-custom-element" attribute cannot be empty for local element in element "{{0}}"',716:'Template compilation error: duplicate definition of the local template named "{{0}} in element {{1}}"',717:'Template compilation error: detected a usage of "<slot>" element without specifying shadow DOM options in element: {{0}}',718:'Spreading template controller "{{0}}" is not supported.',719:"Attribute {{0}} has been already registered for {{1:element}}",720:'Spreading syntax "...xxx" is reserved. Encountered "...{{0}}"',721:'Usage of $bindables is only allowed on custom element. Encountered: <{{0}} {{1}}="{{2}}">',722:"Invalid platform object provided to the compilation, no DOM API found.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?"},U6=(n,...e)=>{var i;let t=z6[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=Y6(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=String(l[a.slice(1)]):l=String(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function Y6(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}var oV,aV,lV,cV,hV;class d1{constructor(e,t,i,s){if(this.chars=e,this.repeat=t,this.isSymbol=i,this.isInverted=s,s)switch(e.length){case 0:this.has=this._hasOfNoneInverse;break;case 1:this.has=this._hasOfSingleInverse;break;default:this.has=this._hasOfMultipleInverse}else switch(e.length){case 0:this.has=this._hasOfNone;break;case 1:this.has=this._hasOfSingle;break;default:this.has=this._hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}_hasOfMultiple(e){return this.chars.includes(e)}_hasOfSingle(e){return this.chars===e}_hasOfNone(e){return!1}_hasOfMultipleInverse(e){return!this.chars.includes(e)}_hasOfSingleInverse(e){return this.chars!==e}_hasOfNoneInverse(e){return!0}}class G6{constructor(){this.parts=at,this._pattern="",this._currentRecord={},this._partsRecord={}}get pattern(){const e=this._pattern;return e===""?null:e}set pattern(e){e==null?(this._pattern="",this.parts=at):(this._pattern=e,this.parts=this._partsRecord[e])}append(e,t){const i=this._currentRecord;i[e]===void 0?i[e]=t:i[e]+=t}next(e){const t=this._currentRecord;let i;t[e]!==void 0&&(i=this._partsRecord,i[e]===void 0?i[e]=[t[e]]:i[e].push(t[e]),t[e]=void 0)}}class f1{get _pattern(){return this._isEndpoint?this._patterns[0]:null}constructor(e,...t){this.charSpec=e,this._nextStates=[],this._types=null,this._isEndpoint=!1,this._patterns=t}findChild(e){const t=this._nextStates,i=t.length;let s=null,r=0;for(;r<i;++r)if(s=t[r],e.equals(s.charSpec))return s;return null}append(e,t){const i=this._patterns;i.includes(t)||i.push(t);let s=this.findChild(e);return s==null&&(s=new f1(e,t),this._nextStates.push(s),e.repeat&&s._nextStates.push(s)),s}findMatches(e,t){const i=[],s=this._nextStates,r=s.length;let o=0,a=null,l=0,c=0;for(;l<r;++l)if(a=s[l],a.charSpec.has(e))if(i.push(a),o=a._patterns.length,c=0,a.charSpec.isSymbol)for(;c<o;++c)t.next(a._patterns[c]);else for(;c<o;++c)t.append(a._patterns[c],e);return i}}class Mk{constructor(e){this.text=e;const t=this._len=e.length,i=this._specs=[];let s=0;for(;t>s;++s)i.push(new d1(e[s],!1,!1,!1))}eachChar(e){const t=this._len,i=this._specs;let s=0;for(;t>s;++s)e(i[s])}}class K6{constructor(e){this.text="PART",this._spec=new d1(e,!0,!1,!0)}eachChar(e){e(this._spec)}}class q6{constructor(e){this.text=e,this._spec=new d1(e,!1,!0,!1)}eachChar(e){e(this._spec)}}class X6{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Q6=ga("ISyntaxInterpreter",n=>n.singleton(Z6));class Z6{constructor(){this._rootState=new f1(null),this._initialStates=[this._rootState]}add(e){e=e.slice(0).sort((d,f)=>d.pattern>f.pattern?1:-1);const t=e.length;let i,s,r,o,a,l,c,h=0,u;for(;t>h;){for(i=this._rootState,s=e[h],r=s.pattern,o=new X6,a=this._parse(s,o),l=a.length,c=d=>i=i.append(d,r),u=0;l>u;++u)a[u].eachChar(c);i._types=o,i._isEndpoint=!0,++h}}interpret(e){const t=new G6,i=e.length;let s=this._initialStates,r=0,o;for(;r<i&&(s=this._getNextStates(s,e.charAt(r),t),s.length!==0);++r);return s=s.filter(J6),s.length>0&&(s.sort(e4),o=s[0],o.charSpec.isSymbol||t.next(o._pattern),t.pattern=o._pattern),t}_getNextStates(e,t,i){const s=[];let r=null;const o=e.length;let a=0;for(;a<o;++a)r=e[a],s.push(...r.findMatches(t,i));return s}_parse(e,t){const i=[],s=e.pattern,r=s.length,o=e.symbols;let a=0,l=0,c="";for(;a<r;)c=s.charAt(a),o.length===0||!o.includes(c)?a===l&&c==="P"&&s.slice(a,a+4)==="PART"?(l=a=a+4,i.push(new K6(o)),++t.dynamics):++a:a!==l?(i.push(new Mk(s.slice(l,a))),++t.statics,l=a):(i.push(new q6(s.slice(l,a+1))),++t.symbols,l=++a);return l!==a&&(i.push(new Mk(s.slice(l,a))),++t.statics),i}}function J6(n){return n._isEndpoint}function e4(n,e){const t=n._types,i=e._types;return t.statics!==i.statics?i.statics-t.statics:t.dynamics!==i.dynamics?i.dynamics-t.dynamics:t.symbols!==i.symbols?i.symbols-t.symbols:0}class Gs{constructor(e,t,i,s,r=null){this.rawName=e,this.rawValue=t,this.target=i,this.command=s,this.parts=r}}const t4=ga("IAttributePattern"),g1=ga("IAttributeParser",n=>n.singleton(n4));class n4{constructor(){this._cache={},this._patterns={},this._initialized=!1,this._allDefinitions=[],this._interpreter=ge(Q6),this._container=ge(Sw)}registerPattern(e,t){if(this._initialized)throw On(88);const i=this._patterns;for(const{pattern:s}of e){if(i[s]!=null)throw On(89,s);i[s]={patternType:t}}this._allDefinitions.push(...e)}_initialize(){this._interpreter.add(this._allDefinitions);const e=this._container;for(const[,t]of Object.entries(this._patterns))t.pattern=e.get(t.patternType)}parse(e,t){this._initialized||(this._initialize(),this._initialized=!0);let i=this._cache[e];i==null&&(i=this._cache[e]=this._interpreter.interpret(e));const s=i.pattern;return s==null?new Gs(e,t,e,null,null):this._patterns[s].pattern[s](e,t,i.parts)}}const zc=eg({name:Uu("attribute-pattern"),create(n,e){return{register(t){t.get(g1).registerPattern(n,e),u1(t4,e).register(t)}}}});class tT{"PART.PART"(e,t,i){return new Gs(e,t,i[0],i[1])}"PART.PART.PART"(e,t,i){return new Gs(e,t,`${i[0]}.${i[1]}`,i[2])}}oV=Symbol.metadata;tT[oV]={[fa]:zc.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],tT)};class nT{ref(e,t,i){return new Gs(e,t,"element","ref")}"PART.ref"(e,t,i){let s=i[0];return s==="view-model"&&(s="component",console.warn(`[aurelia] Detected view-model.ref usage: "${e}=${t}". This is deprecated and component.ref should be used instead`)),new Gs(e,t,s,"ref")}}aV=Symbol.metadata;nT[aV]={[fa]:zc.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],nT)};class iT{"PART.trigger:PART"(e,t,i){return new Gs(e,t,i[0],"trigger",i)}"PART.capture:PART"(e,t,i){return new Gs(e,t,i[0],"capture",i)}}lV=Symbol.metadata;iT[lV]={[fa]:zc.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],iT)};class Ak{":PART"(e,t,i){return new Gs(e,t,i[0],"bind")}}cV=Symbol.metadata;Ak[cV]={[fa]:zc.create([{pattern:":PART",symbols:":"}],Ak)};class Pk{"@PART"(e,t,i){return new Gs(e,t,i[0],"trigger")}"@PART:PART"(e,t,i){return new Gs(e,t,i[0],"trigger",[i[0],"trigger",...i.slice(1)])}}hV=Symbol.metadata;Pk[hV]={[fa]:zc.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],Pk)};const sT=El.get,Ik=El.define,uV="ra",dV="rb",fV="rc",gV="rd",mV="re",pV="rf",m1="rg",wV="ri",vV="rj",bV="rk",yV="rl",CV="ha",SV="hb",_V="hc",i4="hd",RV="he",xV="hf",EV="hg",TV="hs",MV="hp",AV="svb",Jn=eg({hydrateElement:uV,hydrateAttribute:dV,hydrateTemplateController:fV,hydrateLetElement:gV,setProperty:mV,interpolation:pV,propertyBinding:m1,letBinding:wV,refBinding:vV,iteratorBinding:bV,multiAttr:yV,textBinding:CV,listenerBinding:SV,attributeBinding:_V,stylePropertyBinding:i4,setAttribute:RV,setClassAttribute:xV,setStyleAttribute:EV,spreadTransferedBinding:TV,spreadElementProp:MV,spreadValueBinding:AV}),tg=ga("Instruction");class Ea{constructor(e,t){this.from=e,this.to=t,this.type=pV}}class xw{constructor(e,t,i){this.from=e,this.to=t,this.mode=i,this.type=m1}}class s4{constructor(e,t,i){this.forOf=e,this.to=t,this.props=i,this.type=bV}}class r4{constructor(e,t){this.from=e,this.to=t,this.type=vV}}class dd{constructor(e,t){this.value=e,this.to=t,this.type=mV}}class o4{constructor(e,t,i){this.value=e,this.to=t,this.command=i,this.type=yV}}class a4{constructor(e,t,i,s,r,o){this.res=e,this.props=t,this.projections=i,this.containerless=s,this.captures=r,this.data=o,this.type=uV}}class H_{constructor(e,t,i){this.res=e,this.alias=t,this.props=i,this.type=dV}}class l4{constructor(e,t,i,s){this.def=e,this.res=t,this.alias=i,this.props=s,this.type=fV}}class c4{constructor(e,t){this.instructions=e,this.toBindingContext=t,this.type=gV}}class Ok{constructor(e,t){this.from=e,this.to=t,this.type=wV}}class h4{constructor(e){this.from=e,this.type=CV}}class PV{constructor(e,t,i,s){this.from=e,this.to=t,this.capture=i,this.modifier=s,this.type=SV}}class kk{constructor(e,t){this.value=e,this.to=t,this.type=RV}}class Hk{constructor(e){this.value=e,this.type=xV}}class Dk{constructor(e){this.value=e,this.type=EV}}class p1{constructor(e,t,i){this.attr=e,this.from=t,this.to=i,this.type=_V}}class Nk{constructor(){this.type=TV}}class Lk{constructor(e){this.instruction=e,this.type=MV}}class rT{constructor(e,t){this.target=e,this.from=t,this.type=AV}}class mC{constructor(e,t,i,s){this.Type=e,this.name=t,this.aliases=i,this.key=s}static create(e,t){let i,s;return yt(e)?(i=e,s={name:i}):(i=e.name,s=e),new mC(t,oc(oT(t,"name"),i),Kn(oT(t,"aliases"),s.aliases,t.aliases),Ef(i))}register(e,t){const i=this.Type,s=typeof t=="string"?Ef(t):this.key,r=this.aliases;e.has(s,!1)?console.warn(`[DEV:aurelia] ${On(157,this.name)}`):e.register(e.has(i,!1)?null:u1(i,i),Tk(i,s),...r.map(o=>Tk(i,Ef(o))))}}const Vi="binding-command",Py=Uu(Vi),Ef=n=>`${Py}:${n}`,oT=(n,e)=>sT(OB.annotation.keyFor(e),n),u4=(()=>{const n="__au_static_resource__",e=(t,i,s)=>{var o;let r=sT(n,t);return r==null&&((o=t.$au)==null?void 0:o.type)===i&&(r=s(t.$au,t),Ik(r,t,n)),r};return eg({name:Py,keyFrom:Ef,define(t,i){const s=mC.create(t,i),r=s.Type;return Ik(s,r,Py,Jo),r},getAnnotation:oT,find(t,i){const s=t.find(Vi,i);return s==null?null:sT(Py,s)??e(s,Vi,mC.create)??null},get(t,i){try{return t.get($f(Ef(i)))}catch(s){throw console.log(`


[DEV:aurelia] Cannot retrieve binding command with name




`,i),s}return t.get($f(Ef(i)))}})})();class IV{get ignoreAttr(){return!1}build(e,t,i){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?wi(r):o,e.bindable==null?r=i.map(e.node,r)??wi(r):r=e.bindable.name,new xw(t.parse(o,ma),r,1)}}IV.$au={type:Vi,name:"one-time"};class OV{get ignoreAttr(){return!1}build(e,t,i){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?wi(r):o,e.bindable==null?r=i.map(e.node,r)??wi(r):r=e.bindable.name,new xw(t.parse(o,ma),r,2)}}OV.$au={type:Vi,name:"to-view"};class kV{get ignoreAttr(){return!1}build(e,t,i){const s=e.attr;let r=s.target,o=s.rawValue;return o=o===""?wi(r):o,e.bindable==null?r=i.map(e.node,r)??wi(r):r=e.bindable.name,new xw(t.parse(o,ma),r,4)}}kV.$au={type:Vi,name:"from-view"};class HV{get ignoreAttr(){return!1}build(e,t,i){const s=e.attr;let r=s.target,o=s.rawValue;return o=o===""?wi(r):o,e.bindable==null?r=i.map(e.node,r)??wi(r):r=e.bindable.name,new xw(t.parse(o,ma),r,6)}}HV.$au={type:Vi,name:"two-way"};class DV{get ignoreAttr(){return!1}build(e,t,i){const s=e.attr,r=e.bindable;let o=s.rawValue,a=s.target,l,c;return o=o===""?wi(a):o,r==null?(c=i.isTwoWay(e.node,a)?6:2,a=i.map(e.node,a)??wi(a)):(l=e.def.defaultBindingMode??0,c=r.mode===0||r.mode==null?l==null||l===0?2:l:r.mode,a=r.name),new xw(t.parse(o,ma),a,yt(c)?Rw[c]??0:c)}}DV.$au={type:Vi,name:"bind"};class NV{constructor(){this._attrParser=ge(g1)}get ignoreAttr(){return!1}build(e,t){const i=e.bindable===null?wi(e.attr.target):e.bindable.name,s=t.parse(e.attr.rawValue,"IsIterator");let r=at;if(s.semiIdx>-1){const o=e.attr.rawValue.slice(s.semiIdx+1),a=o.indexOf(":");if(a>-1){const l=o.slice(0,a).trim(),c=o.slice(a+1).trim(),h=this._attrParser.parse(l,c);r=[new o4(c,h.target,h.command)]}}return new s4(s,i,r)}}NV.$au={type:Vi,name:"for"};class LV{get ignoreAttr(){return!0}build(e,t){var i;return new PV(t.parse(e.attr.rawValue,sV),e.attr.target,!1,((i=e.attr.parts)==null?void 0:i[2])??null)}}LV.$au={type:Vi,name:"trigger"};class $V{get ignoreAttr(){return!0}build(e,t){var i;return new PV(t.parse(e.attr.rawValue,sV),e.attr.target,!0,((i=e.attr.parts)==null?void 0:i[2])??null)}}$V.$au={type:Vi,name:"capture"};class FV{get ignoreAttr(){return!0}build(e,t){const i=e.attr,s=i.target;let r=i.rawValue;return r=r===""?wi(s):r,new p1(s,t.parse(r,ma),s)}}FV.$au={type:Vi,name:"attr"};class BV{get ignoreAttr(){return!0}build(e,t){return new p1("style",t.parse(e.attr.rawValue,ma),e.attr.target)}}BV.$au={type:Vi,name:"style"};class VV{get ignoreAttr(){return!0}build(e,t){return new p1("class",t.parse(e.attr.rawValue,ma),e.attr.target)}}VV.$au={type:Vi,name:"class"};class WV{get ignoreAttr(){return!0}build(e,t){return new r4(t.parse(e.attr.rawValue,ma),e.attr.target)}}WV.$au={type:Vi,name:"ref"};class jV{get ignoreAttr(){return!1}build(e){return new rT(e.attr.target,e.attr.rawValue)}}jV.$au={type:Vi,name:"spread"};const d4=ga("ITemplateElementFactory",n=>n.singleton(f4)),$k={};class f4{constructor(){this.p=ge(Zf),this._template=this.t()}t(){return this.p.document.createElement("template")}createTemplate(e){var i;if(yt(e)){let s=$k[e];if(s===void 0){const r=this._template;r.innerHTML=e;const o=r.content.firstElementChild;t(o)?(this._template=this.t(),s=r):(r.content.removeChild(o),s=o),$k[e]=s}return s.cloneNode(!0)}if(e.nodeName!=="TEMPLATE"){const s=this.t();return s.content.appendChild(e),s}return(i=e.parentNode)==null||i.removeChild(e),e.cloneNode(!0);function t(s){if(s==null||s.nodeName!=="TEMPLATE"||s.nextElementSibling!=null)return!0;const o=s.previousSibling;if(o!=null)switch(o.nodeType){case 3:return o.textContent.trim().length>0}const a=s.nextSibling;if(a!=null)switch(a.nodeType){case 3:return a.textContent.trim().length>0}return!1}}}const D_="au-start",N_="au-end",L_=(n,e,t)=>n.insertBefore(e,t),Fk=(n,e,t)=>{if(n===null)return;const i=t.length;let s=0;for(;i>s;)n.insertBefore(t[s],e),++s},ih=(n,e)=>n.content.appendChild(e),Bk=(n,e)=>{const t=e.length;let i=0;for(;t>i;)n.content.appendChild(e[i]),++i},Vk=n=>n.nodeType===1,Wk=n=>n.nodeType===3,yg="au-slot",jk="default",Cg=(n=>()=>`anonymous-${++n}`)(0);class zV{constructor(){this.debug=!1,this.resolveResources=!0}compile(e,t){var u,d;if(e.template==null||e.needsCompile===!1)return e;const i=new pC(e,t,null,null,void 0),s=yt(e.template)||!e.enhance?i._templateFactory.createTemplate(e.template):e.template,r=s.nodeName===$_&&s.content!=null,o=r?s.content:s,a=b4.findAll(t),l=a.length;let c=0;if(l>0)for(;l>c;)(d=(u=a[c]).compiling)==null||d.call(u,s),++c;if(s.hasAttribute(aT))throw On(701,e);return this._compileLocalElement(o,i),this._compileNode(o,i),{...e,name:e.name||Cg(),dependencies:(e.dependencies??at).concat(i.deps??at),instructions:i.rows,surrogates:r?this._compileSurrogate(s,i):at,template:s,hasSlots:i.hasSlot,needsCompile:!1}}compileSpread(e,t,i,s,r){const o=new pC(e,i,null,null,void 0),a=[],l=r??o._findElement(s.nodeName.toLowerCase()),c=l!==null,h=o._exprParser,u=t.length;let d=0,f,g=null,m,w,v,C,S,x=null,_,R,M,O;for(;u>d;++d){if(f=t[d],M=f.target,O=f.rawValue,M==="...$attrs"){a.push(new Nk);continue}if(x=o._getCommand(f),x!==null&&x.ignoreAttr){Te.node=s,Te.attr=f,Te.bindable=null,Te.def=null,a.push(x.build(Te,o._exprParser,o._attrMapper));continue}if(c&&(v=o._getBindables(l),C=v.attrs[M],C!==void 0)){x==null?(_=h.parse(O,kr),a.push(new Lk(_==null?new dd(O,C.name):new Ea(_,C.name)))):(Te.node=s,Te.attr=f,Te.bindable=C,Te.def=l,a.push(new Lk(x.build(Te,o._exprParser,o._attrMapper))));continue}if(g=o._findAttr(M),g!==null){if(g.isTemplateController)throw On(9998,M);v=o._getBindables(g),R=g.noMultiBindings===!1&&x===null&&F_(O),R?w=this._compileMultiBindings(s,O,g,o):(S=v.primary,x===null?(_=h.parse(O,kr),w=[_===null?new dd(O,S.name):new Ea(_,S.name)]):(Te.node=s,Te.attr=f,Te.bindable=S,Te.def=g,w=[x.build(Te,o._exprParser,o._attrMapper)])),(m??(m=[])).push(new H_(this.resolveResources?g:g.name,g.aliases!=null&&g.aliases.includes(M)?M:void 0,w));continue}if(x==null)if(_=h.parse(O,kr),_!=null)a.push(new Ea(_,o._attrMapper.map(s,M)??wi(M)));else switch(M){case"class":a.push(new Hk(O));break;case"style":a.push(new Dk(O));break;default:a.push(new kk(O,M))}else Te.node=s,Te.attr=f,Te.bindable=null,Te.def=null,a.push(x.build(Te,o._exprParser,o._attrMapper))}return gv(),m!=null?m.concat(a):a}_compileSurrogate(e,t){const i=[],s=e.attributes,r=t._exprParser;let o=s.length,a=0,l,c,h,u,d=null,f,g,m,w,v=null,C,S,x,_;for(;o>a;++a){if(l=s[a],c=l.name,h=l.value,u=t._attrParser.parse(c,h),x=u.target,_=u.rawValue,m4[x])throw On(702,c);if(v=t._getCommand(u),v!==null&&v.ignoreAttr){Te.node=e,Te.attr=u,Te.bindable=null,Te.def=null,i.push(v.build(Te,t._exprParser,t._attrMapper));continue}if(d=t._findAttr(x),d!==null){if(d.isTemplateController)throw On(703,x);m=t._getBindables(d),S=d.noMultiBindings===!1&&v===null&&F_(_),S?g=this._compileMultiBindings(e,_,d,t):(w=m.primary,v===null?(C=r.parse(_,kr),g=C===null?_===""?[]:[new dd(_,w.name)]:[new Ea(C,w.name)]):(Te.node=e,Te.attr=u,Te.bindable=w,Te.def=d,g=[v.build(Te,t._exprParser,t._attrMapper)])),e.removeAttribute(c),--a,--o,(f??(f=[])).push(new H_(this.resolveResources?d:d.name,d.aliases!=null&&d.aliases.includes(x)?x:void 0,g));continue}if(v===null)if(C=r.parse(_,kr),C!=null)e.removeAttribute(c),--a,--o,i.push(new Ea(C,t._attrMapper.map(e,x)??wi(x)));else switch(c){case"class":i.push(new Hk(_));break;case"style":i.push(new Dk(_));break;default:i.push(new kk(_,c))}else Te.node=e,Te.attr=u,Te.bindable=null,Te.def=null,i.push(v.build(Te,t._exprParser,t._attrMapper))}return gv(),f!=null?f.concat(i):i}_compileNode(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this._compileLet(e,t);default:return this._compileElement(e,t)}case 3:return this._compileText(e,t);case 11:{let i=e.firstChild;for(;i!==null;)i=this._compileNode(i,t);break}}return e.nextSibling}_compileLet(e,t){const i=e.attributes,s=i.length,r=[],o=t._exprParser;let a=!1,l=0,c,h,u,d,f,g,m,w;for(;s>l;++l){if(c=i[l],u=c.name,d=c.value,u==="to-binding-context"){a=!0;continue}if(h=t._attrParser.parse(u,d),g=h.target,m=h.rawValue,f=t._getCommand(h),f!==null){if(h.command==="bind")r.push(new Ok(o.parse(m,ma),wi(g)));else throw On(704,h);continue}w=o.parse(m,kr),w===null&&console.warn(`[DEV:aurelia] Property "${g}" is declared with literal string ${m}. Did you mean ${g}.bind="${m}"?`),r.push(new Ok(w===null?new bi(m):w,wi(g)))}return t.rows.push([new c4(r,a)]),this._markAsTarget(e,t).nextSibling}_compileElement(e,t){var K,ee,he,se,Ie,xe,X,re;const i=e.nextSibling,s=(e.getAttribute("as-element")??e.nodeName).toLowerCase(),r=t._findElement(s),o=r!==null,a=o&&r.shadowOptions!=null,l=r==null?void 0:r.capture,c=l!=null&&typeof l!="boolean",h=l?[]:at,u=t._exprParser,d=this.debug?ia:()=>{e.removeAttribute(C),--w,--m};let f=e.attributes,g,m=f.length,w=0,v,C,S,x,_,R,M=null,O=!1,P,k,B,z,Q,te,ne,j=null,ie,oe,J,pe,p=!0,b=!1,y=!1,T=!1,H,E=0;if(s==="slot"){if(t.root.def.shadowOptions==null)throw On(717,t.root.def.name);t.root.hasSlot=!0}for(o&&(H={},p=(K=r.processContent)==null?void 0:K.call(r.Type,e,t.p,H),f=e.attributes,m=f.length);m>w;++w){switch(v=f[w],C=v.name,S=v.value,C){case"as-element":case"containerless":d(),b=b||C==="containerless";continue}if(x=t._attrParser.parse(C,S),j=t._getCommand(x),J=x.target,pe=x.rawValue,l&&(!c||c&&l(J))){if(j!=null&&j.ignoreAttr){d(),h.push(x);continue}if(y=J!==yg&&J!=="slot"&&((E=J.indexOf("..."))===-1||E===0&&J==="...$attrs"),y&&(ie=t._getBindables(r),ie.attrs[J]==null&&!((ee=t._findAttr(J))!=null&&ee.isTemplateController))){d(),h.push(x);continue}}if(J==="...$attrs"){(_??(_=[])).push(new Nk),d();continue}if(j!=null&&j.ignoreAttr){Te.node=e,Te.attr=x,Te.bindable=null,Te.def=null,(_??(_=[])).push(j.build(Te,t._exprParser,t._attrMapper)),d();continue}if(J.indexOf("...")===0){if(o&&(J=J.slice(3))!=="$element"){(R??(R=[])).push(new rT("$bindables",J==="$bindables"?pe:J)),d();continue}throw(J==="$bindable"||J==="bindables")&&console.warn(`[DEV:aurelia] Detected usage of ${J} on <${e.nodeName}>, did you mean "$bindables"?`),On(720,J)}if(o){if(ie=t._getBindables(r),P=ie.attrs[J],P!==void 0){j===null?(te=u.parse(pe,kr),(R??(R=[])).push(te==null?new dd(pe,P.name):new Ea(te,P.name))):(Te.node=e,Te.attr=x,Te.bindable=P,Te.def=r,(R??(R=[])).push(j.build(Te,t._exprParser,t._attrMapper))),d(),M=t._findAttr(J),M!==null&&console.warn(`[DEV:aurelia] Binding with bindable "${J}" on custom element "${r.name}" is ambiguous.There is a custom attribute with the same name.`);continue}if(J==="$bindables"){if(j!=null){Te.node=e,Te.attr=x,Te.bindable=null,Te.def=r;{const ce=j.build(Te,t._exprParser,t._attrMapper);ce instanceof rT||console.warn(`[DEV:aurelia] Binding with "$bindables" on custom element "${r.name}" with command ${x.command}  did not result in a spread binding instruction. This likely won't work as expected.`),(R??(R=[])).push(ce)}}else console.warn(`[DEV:aurelia] Usage of "$bindables" on custom element "<${r.name}>" is ignored.`);d();continue}}if(J==="$bindables")throw On(721,e.nodeName,J,pe);if(M=t._findAttr(J),M!==null){ie=t._getBindables(M),O=M.noMultiBindings===!1&&j===null&&F_(pe),O?B=this._compileMultiBindings(e,pe,M,t):(oe=ie.primary,j===null?(te=u.parse(pe,kr),B=te===null?pe===""?[]:[new dd(pe,oe.name)]:[new Ea(te,oe.name)]):(Te.node=e,Te.attr=x,Te.bindable=oe,Te.def=M,B=[j.build(Te,t._exprParser,t._attrMapper)])),d(),M.isTemplateController?(z??(z=[])).push(new l4(g4,this.resolveResources?M:M.name,void 0,B)):(k??(k=[])).push(new H_(this.resolveResources?M:M.name,M.aliases!=null&&M.aliases.includes(J)?J:void 0,B));continue}if(j===null){te=u.parse(pe,kr),te!=null&&(d(),(_??(_=[])).push(new Ea(te,t._attrMapper.map(e,J)??wi(J))));continue}Te.node=e,Te.attr=x,Te.bindable=null,Te.def=null,(_??(_=[])).push(j.build(Te,t._exprParser,t._attrMapper)),d()}gv(),this._shouldReorderAttrs(e,_)&&_!=null&&_.length>1&&this._reorder(e,_),o&&(ne=new a4(this.resolveResources?r:r.name,R??at,null,b,h,H)),(_!=null||ne!=null||k!=null)&&(g=at.concat(ne??at,k??at,_??at),T=!0);let D;if(z!=null){m=z.length-1,w=m,Q=z[w];let ce;zk(e)?(ce=t.t(),Bk(ce,[t._marker(),t._comment(D_),t._comment(N_)])):(this._replaceByMarker(e,t),e.nodeName==="TEMPLATE"?ce=e:(ce=t.t(),ih(ce,e)));const Be=ce,Se=t._createChild(g==null?[]:[g]);let _e,A,I=!1,N,U,$,q,W,F,Y=0,G=0,Z=e.firstChild,fe=!1;if(p!==!1)for(;Z!==null;){if(A=Vk(Z)?Z.getAttribute(yg):null,I=A!==null||o&&!a,_e=Z.nextSibling,I){if(!o)throw On(706,A,s);(he=Z.removeAttribute)==null||he.call(Z,yg),fe=Wk(Z)&&Z.textContent.trim()==="",fe||((se=U??(U={}))[Ie=A||jk]??(se[Ie]=[])).push(Z),e.removeChild(Z)}Z=_e}if(U!=null){N={};for(A in U){for(ce=t.t(),$=U[A],Y=0,G=$.length;G>Y;++Y)q=$[Y],q.nodeName==="TEMPLATE"?q.attributes.length>0?ih(ce,q):ih(ce,q.content):ih(ce,q);F=t._createChild(),this._compileNode(ce.content,F),N[A]={name:Cg(),type:tf,template:ce,instructions:F.rows,needsCompile:!1}}ne.projections=N}if(T&&(o&&(b||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),D=!o||!r.containerless&&!b&&p!==!1,D)if(e.nodeName===$_)this._compileNode(e.content,Se);else for(Z=e.firstChild;Z!==null;)Z=this._compileNode(Z,Se);for(Q.def={name:Cg(),type:tf,template:Be,instructions:Se.rows,needsCompile:!1};w-- >0;)Q=z[w],ce=t.t(),W=t._marker(),Bk(ce,[W,t._comment(D_),t._comment(N_)]),Q.def={name:Cg(),type:tf,template:ce,needsCompile:!1,instructions:[[z[w+1]]]};t.rows.push([Q])}else{g!=null&&t.rows.push(g);let ce=e.firstChild,Be,Se,_e=!1,A=null,I,N,U,$,q,W=!1,F=0,Y=0;if(p!==!1)for(;ce!==null;){if(Se=Vk(ce)?ce.getAttribute(yg):null,_e=Se!==null||o&&!a,Be=ce.nextSibling,_e){if(!o)throw On(706,Se,s);(xe=ce.removeAttribute)==null||xe.call(ce,yg),W=Wk(ce)&&ce.textContent.trim()==="",W||((X=I??(I={}))[re=Se||jk]??(X[re]=[])).push(ce),e.removeChild(ce)}ce=Be}if(I!=null){A={};for(Se in I){for($=t.t(),N=I[Se],F=0,Y=N.length;Y>F;++F)U=N[F],U.nodeName===$_?U.attributes.length>0?ih($,U):ih($,U.content):ih($,U);q=t._createChild(),this._compileNode($.content,q),A[Se]={name:Cg(),type:tf,template:$,instructions:q.rows,needsCompile:!1}}ne.projections=A}if(T&&(o&&(b||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),D=!o||!r.containerless&&!b&&p!==!1,D&&e.childNodes.length>0)for(ce=e.firstChild;ce!==null;)ce=this._compileNode(ce,t)}return i}_compileText(e,t){const i=e.parentNode,s=t._exprParser.parse(e.textContent,kr),r=e.nextSibling;let o,a,l,c,h;if(s!==null){for({parts:o,expressions:a}=s,(h=o[0])&&L_(i,t._text(h),e),l=0,c=a.length;c>l;++l)Fk(i,e,[t._marker(),t._text(" ")]),(h=o[l+1])&&L_(i,t._text(h),e),t.rows.push([new h4(a[l])]);i.removeChild(e)}return r}_compileMultiBindings(e,t,i,s){const r=s._getBindables(i),o=t.length,a=[];let l,c,h=0,u=0,d,f,g,m;for(let w=0;w<o;++w)if(u=t.charCodeAt(w),u===92)++w;else if(u===58){for(l=t.slice(h,w);t.charCodeAt(++w)<=32;);for(h=w;w<o;++w)if(u=t.charCodeAt(w),u===92)++w;else if(u===59){c=t.slice(h,w);break}if(c===void 0&&(c=t.slice(h)),f=s._attrParser.parse(l,c),g=s._getCommand(f),m=r.attrs[f.target],m==null)throw On(707,f.target,i.name);for(g===null?(d=s._exprParser.parse(c,kr),a.push(d===null?new dd(c,m.name):new Ea(d,m.name))):(Te.node=e,Te.attr=f,Te.bindable=m,Te.def=i,a.push(g.build(Te,s._exprParser,s._attrMapper)));w<o&&t.charCodeAt(++w)<=32;);h=w,l=void 0,c=void 0}return gv(),a}_compileLocalElement(e,t){const i=t.root.def.name,s=e,r=T_(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(o===0)return;if(o===s.childElementCount)throw On(708,i);const a=new Set,l=[];for(const h of r){if(h.parentNode!==s)throw On(709,i);const u=v4(i,h,a),d=h.content,f=T_(d.querySelectorAll("bindable")),g=new Set,m=new Set,w=f.reduce((C,S)=>{if(S.parentNode!==d)throw On(710,u);const x=S.getAttribute("name");if(x===null)throw On(711,S,u);const _=S.getAttribute("attribute");if(_!==null&&m.has(_)||g.has(x))throw On(712,g,_);_!==null&&m.add(_),g.add(x);const R=T_(S.attributes).filter(M=>!Uk.includes(M.name));return R.length>0&&console.warn(`[DEV:aurelia] The attribute(s) ${R.map(M=>M.name).join(", ")} will be ignored for ${S.outerHTML}. Only ${Uk.join(", ")} are processed.`),S.remove(),C[x]={name:x,attribute:_??void 0,mode:S.getAttribute("mode")??"default"},C},{});class v{}v.$au={type:tf,name:u,template:h,bindables:w},Reflect.defineProperty(v,"name",{value:MB(u)}),l.push(v),s.removeChild(h)}const c=(t.root.def.dependencies??[]).concat(t.root.def.Type==null?at:[t.root.def.Type]);for(const h of l)h.dependencies=c.concat(l.filter(u=>u!==h)),t._addLocalDep(h)}_shouldReorderAttrs(e,t){const i=e.nodeName;return i==="INPUT"&&p4[e.type]===1||i==="SELECT"&&(e.hasAttribute("multiple")||(t==null?void 0:t.some(s=>s.type===m1&&s.to==="multiple")))}_reorder(e,t){switch(e.nodeName){case"INPUT":{const i=t;let s,r,o=0,a;for(let l=0;l<i.length&&o<3;l++)switch(a=i[l],a.to){case"model":case"value":case"matcher":s=l,o++;break;case"checked":r=l,o++;break}r!==void 0&&s!==void 0&&r<s&&([i[s],i[r]]=[i[r],i[s]]);break}case"SELECT":{const i=t;let s=0,r=0,o=0,a;for(let l=0;l<i.length&&o<2;++l){switch(a=i[l],a.to){case"multiple":r=l,o++;break;case"value":s=l,o++;break}o===2&&s<r&&([i[r],i[s]]=[i[s],i[r]])}}}}_markAsTarget(e,t){return L_(e.parentNode,t._comment("au*"),e),e}_replaceByMarker(e,t){if(zk(e))return e;const i=e.parentNode,s=t._marker();return Fk(i,e,[s,t._comment(D_),t._comment(N_)]),i.removeChild(e),s}}zV.register=Cw(FS);const $_="TEMPLATE",zk=n=>n.nodeValue==="au*";class pC{constructor(e,t,i,s,r){var a;this.hasSlot=!1,this.deps=null;const o=i!==null;if(this.c=t,this.root=s===null?this:s,this.def=e,this.parent=i,this._resourceResolver=o?i._resourceResolver:t.get(UV),this._commandResolver=o?i._commandResolver:t.get(w4),this._templateFactory=o?i._templateFactory:t.get(d4),this._attrParser=o?i._attrParser:t.get(g1),this._exprParser=o?i._exprParser:t.get(Jf),this._attrMapper=o?i._attrMapper:t.get(rV),this._logger=o?i._logger:t.get(xu),typeof((a=(this.p=o?i.p:t.get(Zf)).document)==null?void 0:a.nodeType)!="number")throw On(722);this.localEls=o?i.localEls:new Set,this.rows=r??[]}_addLocalDep(e){var t;return((t=this.root).deps??(t.deps=[])).push(e),this.root.c.register(e),this}_text(e){return this.p.document.createTextNode(e)}_comment(e){return this.p.document.createComment(e)}_marker(){return this._comment("au*")}h(e){const t=this.p.document.createElement(e);return e==="template"&&this.p.document.adoptNode(t.content),t}t(){return this.h("template")}_findElement(e){return this._resourceResolver.el(this.c,e)}_findAttr(e){return this._resourceResolver.attr(this.c,e)}_getBindables(e){return this._resourceResolver.bindables(e)}_createChild(e){return new pC(this.def,this.c,this,this.root,e)}_getCommand(e){const t=e.command;return t===null?null:this._commandResolver.get(this.c,t)}}const F_=n=>{const e=n.length;let t=0,i=0;for(;e>i;){if(t=n.charCodeAt(i),t===92)++i;else{if(t===58)return!0;if(t===36&&n.charCodeAt(i+1)===123)return!1}++i}return!1},gv=()=>{Te.node=Te.attr=Te.bindable=Te.def=null},g4={name:"unnamed",type:tf},Te={node:null,attr:null,bindable:null,def:null},m4={id:!0,name:!0,"au-slot":!0,"as-element":!0},p4={checkbox:1,radio:1},UV=ga("IResourceResolver"),w4=ga("IBindingCommandResolver",n=>{class e{constructor(){this._cache=new WeakMap}get(i,s){let r=this._cache.get(i);return r||this._cache.set(i,r={}),s in r?r[s]:r[s]=u4.get(i,s)}}return n.singleton(e)}),Uk=eg(["name","attribute","mode"]),aT="as-custom-element",v4=(n,e,t)=>{const i=e.getAttribute(aT);if(i===null||i==="")throw On(715,n);if(t.has(i))throw On(716,i,n);return t.add(i),e.removeAttribute(aT),i},Yk=ga("ITemplateCompilerHooks"),b4=eg({name:Uu("compiler-hooks"),define(n){return{register(e){u1(Yk,n).register(e)}}},findAll(n){return n.get(m5(Yk))}}),y4=Object.prototype.hasOwnProperty,Oc=Reflect.defineProperty;function la(n,e,t){return Oc(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t}function nl(n,e,t){e in n||la(n,e,t)}const YV=Object.assign,w1=Object.freeze,Ff=String,BS=jc.createInterface,C4=El.get,S4=El.define,Ke=(n,...e)=>new Error(`AUR${Ff(n).padStart(4,"0")}: ${R4(n,...e)}`),_4={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`,199:"Trying to observe property {{0}} on null/undefined",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",206:"Trying to switch to a null/undefined connectable",207:"Trying to enter an active connectable",208:"Trying to pop a null/undefined connectable",209:"Trying to exit an inactive connectable",210:"Unrecognised collection type {{0:toString}}.",217:"There is no registration for IDirtyChecker interface. If you want to use your own dirty checker, make sure you register it.",218:"Dirty checked is not permitted in this application. Property key {{0}} is being dirty checked.",219:"Trying to set value for property {{0}} in dirty checker",220:'Map/Set "size" is a readonly property',221:'Trying to assign value to readonly property "{{0}}" through computed observer.',224:"Invalid @observable decorator usage, cannot determine property name",225:"Trying to stop an effect that has already been stopped",226:"Maximum number of recursive effect run reached. Consider handle effect dependencies differently."},R4=(n,...e)=>{var i;let t=_4[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"typeof":l=typeof l;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Ff(l[a.slice(1)]):l=Ff(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};class Zn{constructor(e,t,i,s){this.parent=e,this.bindingContext=t,this.overrideContext=i,this.isBoundary=s}static getContext(e,t,i){if(e==null)throw Ke(203);let s=e.overrideContext,r=e;if(i>0){for(;i>0;)if(i--,r=r.parent,r==null)return;return s=r.overrideContext,t in s?s:r.bindingContext}for(;r!=null&&!r.isBoundary&&!(t in r.overrideContext)&&!(t in r.bindingContext);)r=r.parent;return r==null?e.bindingContext:(s=r.overrideContext,t in s?s:r.bindingContext)}static create(e,t,i){if(e==null)throw Ke(204);return new Zn(null,e,t??new Kk,i??!1)}static fromParent(e,t,i=new Kk){if(e==null)throw Ke(203);return new Zn(e,t,i,!1)}}class Gk{constructor(e,t){e!==void 0&&(this[e]=t)}}class Kk{}const{astAssign:Wp,astEvaluate:bn,astBind:Uc,astUnbind:Yc}=(()=>{const n="AccessThis",e="AccessBoundary",t="AccessGlobal",i="AccessScope",s="ArrayLiteral",r="ObjectLiteral",o="PrimitiveLiteral",a="Template",l="Unary",c="CallScope",h="CallMember",u="CallFunction",d="CallGlobal",f="AccessMember",g="AccessKeyed",m="TaggedTemplate",w="Binary",v="Conditional",C="Assign",S="ArrowFunction",x="ValueConverter",_="BindingBehavior",R="ArrayBindingPattern",M="ObjectBindingPattern",O="BindingIdentifier",P="ForOfStatement",k="Interpolation",B="ArrayDestructuring",z="ObjectDestructuring",Q="DestructuringAssignmentLeaf",te="Custom",ne=Zn.getContext;function j(p,b,y,T){var H;switch(p.$kind){case n:{let E=b.overrideContext,D=b,K=p.ancestor;for(;K--&&E;)D=D.parent,E=(D==null?void 0:D.overrideContext)??null;return K<1&&D?D.bindingContext:void 0}case e:{let E=b;for(;E!=null&&!E.isBoundary;)E=E.parent;return E?E.bindingContext:void 0}case i:{const E=ne(b,p.name,p.ancestor);T!==null&&T.observe(E,p.name);const D=E[p.name];if(D==null){if(p.name==="$host")throw Ke(105);return D}return y!=null&&y.boundFn&&Ht(D)?D.bind(E):D}case t:return globalThis[p.name];case d:{const E=globalThis[p.name];if(Ht(E))return E(...p.args.map(D=>j(D,b,y,T)));if(!(y!=null&&y.strict)&&E==null)return;throw Ke(107)}case s:return p.elements.map(E=>j(E,b,y,T));case r:{const E={};for(let D=0;D<p.keys.length;++D)E[p.keys[D]]=j(p.values[D],b,y,T);return E}case o:return p.value;case a:{let E=p.cooked[0];for(let D=0;D<p.expressions.length;++D)E+=Ff(j(p.expressions[D],b,y,T)),E+=p.cooked[D+1];return E}case l:{const E=j(p.expression,b,y,T);switch(p.operation){case"void":return;case"typeof":return typeof E;case"!":return!E;case"-":return-E;case"+":return+E;case"--":if(T!=null)throw Ke(113);return ie(p.expression,b,y,E-1)+p.pos;case"++":if(T!=null)throw Ke(113);return ie(p.expression,b,y,E+1)-p.pos;default:throw Ke(109,p.operation)}}case c:{const E=ne(b,p.name,p.ancestor);if(E==null){if(y!=null&&y.strict)throw Ke(114,p.name,E);return}const D=E[p.name];if(Ht(D))return D.apply(E,p.args.map(K=>j(K,b,y,T)));if(D==null){if(y!=null&&y.strict&&!p.optional)throw Ke(111,p.name);return}throw Ke(111,p.name)}case h:{const E=j(p.object,b,y,T);if(E==null&&y!=null&&y.strict&&!p.optionalMember)throw Ke(114,p.name,E);const D=E==null?void 0:E[p.name];if(D==null){if(!p.optionalCall&&(y!=null&&y.strict))throw Ke(111,p.name);return}if(!Ht(D))throw Ke(111,p.name);const K=D.apply(E,p.args.map(ee=>j(ee,b,y,T)));return jn(E)&&pe.includes(p.name)&&(T==null||T.observeCollection(E)),K}case u:{const E=j(p.func,b,y,T);if(Ht(E))return E(...p.args.map(D=>j(D,b,y,T)));if(E==null){if(!p.optional&&(y!=null&&y.strict))throw Ke(107);return}throw Ke(107)}case S:return(...D)=>{const K=p.args,ee=p.rest,he=K.length-1,se=K.reduce((xe,X,re)=>(ee&&re===he?xe[X.name]=D.slice(re):xe[X.name]=D[re],xe),{}),Ie=Zn.fromParent(b,se);return j(p.body,Ie,y,T)};case f:{const E=j(p.object,b,y,T);if(E==null){if(!p.optional&&(y!=null&&y.strict))throw Ke(114,p.name,E);return}T!==null&&!p.accessGlobal&&T.observe(E,p.name);const D=E[p.name];return y!=null&&y.boundFn&&Ht(D)?D.bind(E):D}case g:{const E=j(p.object,b,y,T),D=j(p.key,b,y,T);if(E==null){if(!p.optional&&(y!=null&&y.strict))throw Ke(115,D,E);return}return T!==null&&!p.accessGlobal&&T.observe(E,D),E[D]}case m:{const E=p.expressions.map(K=>j(K,b,y,T)),D=j(p.func,b,y,T);if(!Ht(D))throw Ke(110);return D(p.cooked,...E)}case w:{const E=p.left,D=p.right;switch(p.operation){case"&&":return j(E,b,y,T)&&j(D,b,y,T);case"||":return j(E,b,y,T)||j(D,b,y,T);case"??":return j(E,b,y,T)??j(D,b,y,T);case"==":return j(E,b,y,T)==j(D,b,y,T);case"===":return j(E,b,y,T)===j(D,b,y,T);case"!=":return j(E,b,y,T)!=j(D,b,y,T);case"!==":return j(E,b,y,T)!==j(D,b,y,T);case"instanceof":{const K=j(D,b,y,T);return Ht(K)?j(E,b,y,T)instanceof K:!1}case"in":{const K=j(D,b,y,T);return cC(K)?j(E,b,y,T)in K:!1}case"+":return j(E,b,y,T)+j(D,b,y,T);case"-":return j(E,b,y,T)-j(D,b,y,T);case"*":return j(E,b,y,T)*j(D,b,y,T);case"/":return j(E,b,y,T)/j(D,b,y,T);case"%":return j(E,b,y,T)%j(D,b,y,T);case"<":return j(E,b,y,T)<j(D,b,y,T);case">":return j(E,b,y,T)>j(D,b,y,T);case"<=":return j(E,b,y,T)<=j(D,b,y,T);case">=":return j(E,b,y,T)>=j(D,b,y,T);default:throw Ke(108,p.operation)}}case v:return j(p.condition,b,y,T)?j(p.yes,b,y,T):j(p.no,b,y,T);case C:{let E=j(p.value,b,y,T);if(p.op!=="="){if(T!=null)throw Ke(113);const D=j(p.target,b,y,T);switch(p.op){case"/=":E=D/E;break;case"*=":E=D*E;break;case"+=":E=D+E;break;case"-=":E=D-E;break;default:throw Ke(108,p.op)}}return ie(p.target,b,y,E)}case x:return(H=y==null?void 0:y.useConverter)==null?void 0:H.call(y,p.name,"toView",j(p.expression,b,y,T),p.args.map(E=>j(E,b,y,T)));case _:return j(p.expression,b,y,T);case O:return p.name;case P:return j(p.iterable,b,y,T);case k:if(p.isMulti){let E=p.parts[0],D=0;for(;D<p.expressions.length;++D)E+=Ff(j(p.expressions[D],b,y,T)),E+=p.parts[D+1];return E}else return`${p.parts[0]}${j(p.firstExpression,b,y,T)}${p.parts[1]}`;case Q:return j(p.target,b,y,T);case B:return p.list.map(E=>j(E,b,y,T));case R:case M:case z:default:return;case te:return p.evaluate(b,y,T)}}function ie(p,b,y,T){var H;switch(p.$kind){case i:{if(p.name==="$host")throw Ke(106);const E=ne(b,p.name,p.ancestor);return E[p.name]=T}case f:{const E=j(p.object,b,y,null);if(E==null){if(y!=null&&y.strict)throw Ke(116,p.name);ie(p.object,b,y,{[p.name]:T})}else cC(E)&&(p.name==="length"&&jn(E)&&!isNaN(T)?E.splice(T):E[p.name]=T);return T}case g:{const E=j(p.object,b,y,null),D=j(p.key,b,y,null);if(E==null){if(y!=null&&y.strict)throw Ke(116,D);return ie(p.object,b,y,{[D]:T}),T}if(jn(E)){if(D==="length"&&!isNaN(T))return E.splice(T),T;if($p(D))return E.splice(D,1,T),T}return E[D]=T}case C:return ie(p.value,b,y,T),ie(p.target,b,y,T);case x:return T=(H=y==null?void 0:y.useConverter)==null?void 0:H.call(y,p.name,"fromView",T,p.args.map(E=>j(E,b,y,null))),ie(p.expression,b,y,T);case _:return ie(p.expression,b,y,T);case B:case z:{const E=p.list,D=E.length;let K,ee;for(K=0;K<D;K++)switch(ee=E[K],ee.$kind){case Q:ie(ee,b,y,T);break;case B:case z:{if(typeof T!="object"||T===null)throw Ke(112);let he=j(ee.source,Zn.create(T),y,null);he===void 0&&ee.initializer&&(he=j(ee.initializer,b,y,null)),ie(ee,b,y,he);break}}break}case Q:{if(p instanceof KB){if(T==null)return;if(typeof T!="object")throw Ke(112);let E=j(p.source,Zn.create(T),y,null);E===void 0&&p.initializer&&(E=j(p.initializer,b,y,null)),ie(p.target,b,y,E)}else{if(T==null)return;if(typeof T!="object")throw Ke(112);const E=p.indexOrProperties;let D;if($p(E)){if(!Array.isArray(T))throw Ke(112);D=T.slice(E)}else D=Object.entries(T).reduce((K,[ee,he])=>(E.includes(ee)||(K[ee]=he),K),{});ie(p.target,b,y,D)}break}case te:return p.assign(b,y,T);default:return}}function oe(p,b,y){var T,H,E;switch(p.$kind){case _:{(T=y.bindBehavior)==null||T.call(y,p.name,b,p.args.map(D=>j(D,b,y,null))),oe(p.expression,b,y);break}case x:{(H=y.bindConverter)==null||H.call(y,p.name),oe(p.expression,b,y);break}case P:{oe(p.iterable,b,y);break}case te:(E=p.bind)==null||E.call(p,b,y)}}function J(p,b,y){var T,H,E;switch(p.$kind){case _:{(T=y.unbindBehavior)==null||T.call(y,p.name,b),J(p.expression,b,y);break}case x:{(H=y.unbindConverter)==null||H.call(y,p.name),J(p.expression,b,y);break}case P:{J(p.iterable,b,y);break}case te:(E=p.unbind)==null||E.call(p,b,y)}}const pe="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:j,astAssign:ie,astBind:oe,astUnbind:J}})(),x4=n=>{const e=n.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{la(e,t,()=>{throw Ke(99,t)})})},GV=jc.createInterface("ICoercionConfiguration"),VS=0,Gc=1,E4=2,T4=4,v1=w1({None:VS,Observer:Gc,Node:E4,Layout:T4});function Mu(n=0){const e=Array(n);let t=0;for(;t<n;)e[t]=t++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}let M4=!1;const so=(()=>{function n(a,l){return a==null?r:r(a)}function e(){return la(this,"subs",new o)}function t(a){return this.subs.add(a)}function i(a){return this.subs.remove(a)}const s=new WeakSet;function r(a,l){if(!s.has(a)){s.add(a);const c=a.prototype;Oc(c,"subs",{get:e}),nl(c,"subscribe",t),nl(c,"unsubscribe",i)}return a}class o{constructor(){this.count=0,this._subs=[],this._requestDirtySubs=[],this._hasDirtySubs=!1}add(l){return this._subs.includes(l)?!1:(this._subs[this._subs.length]=l,"handleDirty"in l&&(this._requestDirtySubs[this._requestDirtySubs.length]=l,this._hasDirtySubs=!0),++this.count,!0)}remove(l){let c=this._subs.indexOf(l);return c!==-1?(this._subs.splice(c,1),c=this._requestDirtySubs.indexOf(l),c!==-1&&(this._requestDirtySubs.splice(c,1),this._hasDirtySubs=this._requestDirtySubs.length>0),--this.count,!0):!1}notify(l,c){for(const h of this._subs.slice(0))h.handleChange(l,c)}notifyCollection(l,c){const h=this._subs.slice(0),u=h.length;let d=0;for(;d<u;++d)h[d].handleCollectionChange(l,c)}notifyDirty(){if(this._hasDirtySubs)for(const l of this._requestDirtySubs.slice(0))l.handleDirty()}}return n})();class KV{constructor(e){this.owner=e,this.type=Gc,this._value=(this._obj=e.collection).length}getValue(){return this._obj.length}setValue(e){e!==this._value&&(Number.isNaN(e)?console.warn(`Invalid value "${e}" for array length`):(this._obj.splice(e),this._value=this._obj.length))}handleDirty(){this._value!==this._obj.length&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,s=this._obj.length;(this._value=s)!==i&&(this.subs.notifyDirty(),this.subs.notify(this._value,i))}}qV(KV);class b1{constructor(e){this.owner=e,this.type=Gc,this._value=(this._obj=e.collection).size}getValue(){return this._obj.size}setValue(){throw Ke(220)}handleDirty(){this._value!==this._obj.size&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,s=this._obj.size;(this._value=s)!==i&&this.subs.notify(this._value,i)}}qV(b1);function qV(n){const e=n.prototype;return nl(e,"subscribe",A4),nl(e,"unsubscribe",P4),so(n,null)}function A4(n){this.subs.add(n)&&this.subs.count===1&&this.owner.subscribe(this)}function P4(n){this.subs.remove(n)&&this.subs.count===0&&this.owner.subscribe(this)}const Jm=(()=>{const n=Symbol.for("__au_arr_obs__"),e=Array[n]??la(Array,n,new WeakMap);function t(m,w){return m===w?0:(m=m===null?"null":m.toString(),w=w===null?"null":w.toString(),m<w?-1:1)}function i(m,w){return m===void 0?w===void 0?0:1:w===void 0?-1:0}function s(m,w,v,C,S){let x,_,R,M,O,P,k;for(P=v+1;P<C;P++){for(x=m[P],_=w[P],k=P-1;k>=v&&(R=m[k],M=w[k],O=S(R,x),O>0);k--)m[k+1]=R,w[k+1]=M;m[k+1]=x,w[k+1]=_}}function r(m,w,v,C,S){let x=0,_=0,R,M,O,P,k,B,z,Q,te,ne,j,ie,oe,J,pe,p,b,y,T;for(;;){if(C-v<=10){s(m,w,v,C,S);return}x=v+(C-v>>1),R=m[v],P=w[v],M=m[C-1],k=w[C-1],O=m[x],B=w[x],z=S(R,M),z>0&&(ne=R,j=P,R=M,P=k,M=ne,k=j),Q=S(R,O),Q>=0?(ne=R,j=P,R=O,P=B,O=M,B=k,M=ne,k=j):(te=S(M,O),te>0&&(ne=M,j=k,M=O,k=B,O=ne,B=j)),m[v]=R,w[v]=P,m[C-1]=O,w[C-1]=B,ie=M,oe=k,J=v+1,pe=C-1,m[x]=m[J],w[x]=w[J],m[J]=ie,w[J]=oe;e:for(_=J+1;_<pe;_++)if(p=m[_],b=w[_],y=S(p,ie),y<0)m[_]=m[J],w[_]=w[J],m[J]=p,w[J]=b,J++;else if(y>0){do{if(pe--,pe==_)break e;T=m[pe],y=S(T,ie)}while(y>0);m[_]=m[pe],w[_]=w[pe],m[pe]=p,w[pe]=b,y<0&&(p=m[_],b=w[_],m[_]=m[J],w[_]=w[J],m[J]=p,w[J]=b,J++)}C-pe<J-v?(r(m,w,pe,C,S),C=J):(r(m,w,v,J,S),v=pe)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let l;function c(){const m=o.push,w=o.unshift,v=o.pop,C=o.shift,S=o.splice,x=o.reverse,_=o.sort;l={push:function(...R){const M=e.get(this);if(M===void 0)return m.apply(this,R);const O=this.length,P=R.length;if(P===0)return O;this.length=M.indexMap.length=O+P;let k=O;for(;k<this.length;)this[k]=R[k-O],M.indexMap[k]=-2,k++;return M.notify(),this.length},unshift:function(...R){const M=e.get(this);if(M===void 0)return w.apply(this,R);const O=R.length,P=new Array(O);let k=0;for(;k<O;)P[k++]=-2;w.apply(M.indexMap,P);const B=w.apply(this,R);return M.notify(),B},pop:function(){const R=e.get(this);if(R===void 0)return v.call(this);const M=R.indexMap,O=v.call(this),P=M.length-1;return M[P]>-1&&(M.deletedIndices.push(M[P]),M.deletedItems.push(O)),v.call(M),R.notify(),O},shift:function(){const R=e.get(this);if(R===void 0)return C.call(this);const M=R.indexMap,O=C.call(this);return M[0]>-1&&(M.deletedIndices.push(M[0]),M.deletedItems.push(O)),C.call(M),R.notify(),O},splice:function(...R){const M=R[0],O=R[1],P=e.get(this);if(P===void 0)return S.apply(this,R);const k=this.length,B=M|0,z=B<0?Math.max(k+B,0):Math.min(B,k),Q=P.indexMap,te=R.length,ne=te===0?0:te===1?k-z:O;let j=z;if(ne>0){const oe=j+ne;for(;j<oe;)Q[j]>-1&&(Q.deletedIndices.push(Q[j]),Q.deletedItems.push(this[j])),j++}if(j=0,te>2){const oe=te-2,J=new Array(oe);for(;j<oe;)J[j++]=-2;S.call(Q,M,O,...J)}else S.apply(Q,R);const ie=S.apply(this,R);return(ne>0||j>0)&&P.notify(),ie},reverse:function(){const R=e.get(this);if(R===void 0)return x.call(this),this;const M=this.length,O=M/2|0;let P=0;for(;P!==O;){const k=M-P-1,B=this[P],z=R.indexMap[P],Q=this[k],te=R.indexMap[k];this[P]=Q,R.indexMap[P]=te,this[k]=B,R.indexMap[k]=z,P++}return R.notify(),this},sort:function(R){const M=e.get(this);if(M===void 0)return _.call(this,R),this;let O=this.length;if(O<2)return this;r(this,M.indexMap,0,O,i);let P=0;for(;P<O&&this[P]!==void 0;)P++;(R===void 0||!Ht(R))&&(R=t),r(this,M.indexMap,0,P,R);let k=!1;for(P=0,O=M.indexMap.length;O>P;++P)if(M.indexMap[P]!==P){k=!0;break}return(k||M4)&&M.notify(),this}};for(const R of a)Oc(l[R],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1})}let h=!1;const u="__au_arr_on__";function d(){if(l===void 0&&c(),!(C4(u,Array)??!1)){S4(!0,Array,u);for(const m of a)o[m].observing!==!0&&la(o,m,l[m])}}class f{constructor(w){this.type=Gc,h||(h=!0,d()),this.indexObservers={},this.collection=w,this.indexMap=Mu(w.length),this.lenObs=void 0,e.set(w,this)}notify(){const w=this.subs;w.notifyDirty();const v=this.indexMap,C=this.collection,S=C.length;this.indexMap=Mu(S),w.notifyCollection(C,v)}getLengthObserver(){return this.lenObs??(this.lenObs=new KV(this))}getIndexObserver(w){var v;return(v=this.indexObservers)[w]??(v[w]=new g(this,w))}}so(f,null);class g{constructor(w,v){this.owner=w,this.index=v,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(w){if(w===this.getValue())return;const v=this.owner,C=this.index,S=v.indexMap;S[C]>-1&&S.deletedIndices.push(S[C]),S[C]=-2,v.collection[C]=w,v.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(w,v){const C=this.index;if(v[C]===C)return;const x=this.value,_=this.value=this.getValue();x!==_&&this.subs.notify(_,x)}subscribe(w){this.subs.add(w)&&this.subs.count===1&&this.owner.subscribe(this)}unsubscribe(w){this.subs.remove(w)&&this.subs.count===0&&this.owner.unsubscribe(this)}}return so(g,null),function(w){let v=e.get(w);return v===void 0&&(e.set(w,v=new f(w)),d()),v}})(),wC=(()=>{const n=Symbol.for("__au_set_obs__"),e=Set[n]??la(Set,n,new WeakMap),{add:t,clear:i,delete:s}=Set.prototype,r=["add","clear","delete"],o={add:function(c){const h=e.get(this);if(h===void 0)return t.call(this,c),this;const u=this.size;return t.call(this,c),this.size===u?this:(h.indexMap[u]=-2,h.notify(),this)},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const u=c.indexMap;let d=0;for(const f of this.keys())u[d]>-1&&(u.deletedIndices.push(u[d]),u.deletedItems.push(f)),d++;i.call(this),u.length=0,c.notify()}},delete:function(c){const h=e.get(this);if(h===void 0)return s.call(this,c);if(this.size===0)return!1;let d=0;const f=h.indexMap;for(const g of this.keys()){if(g===c){f[d]>-1&&(f.deletedIndices.push(f[d]),f.deletedItems.push(g)),f.splice(d,1);const m=s.call(this,c);return m===!0&&h.notify(),m}d++}return!1}};function a(c){for(const h of r)la(c,h,o[h])}class l{constructor(h){this.type=Gc,this.collection=h,this.indexMap=Mu(h.size),this.lenObs=void 0}notify(){const h=this.subs;h.notifyDirty();const u=this.indexMap,d=this.collection,f=d.size;this.indexMap=Mu(f),h.notifyCollection(d,u)}getLengthObserver(){return this.lenObs??(this.lenObs=new b1(this))}}return so(l,null),function(h){let u=e.get(h);return u===void 0&&(e.set(h,u=new l(h)),a(h)),u}})(),vC=(()=>{const n=Symbol.for("__au_map_obs__"),e=Map[n]??la(Map,n,new WeakMap),{set:t,clear:i,delete:s}=Map.prototype,r=["set","clear","delete"],o={set:function(c,h){const u=e.get(this);if(u===void 0)return t.call(this,c,h),this;const d=this.get(c),f=this.size;if(t.call(this,c,h),this.size===f){let m=0;for(const w of this.entries()){if(w[0]===c)return w[1]!==d&&(u.indexMap.deletedIndices.push(u.indexMap[m]),u.indexMap.deletedItems.push(w),u.indexMap[m]=-2,u.notify()),this;m++}return this}return u.indexMap[f]=-2,u.notify(),this},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const u=c.indexMap;let d=0;for(const f of this.keys())u[d]>-1&&(u.deletedIndices.push(u[d]),u.deletedItems.push(f)),d++;i.call(this),u.length=0,c.notify()}},delete:function(c){const h=e.get(this);if(h===void 0)return s.call(this,c);if(this.size===0)return!1;let d=0;const f=h.indexMap;for(const g of this.keys()){if(g===c){f[d]>-1&&(f.deletedIndices.push(f[d]),f.deletedItems.push(g)),f.splice(d,1);const m=s.call(this,c);return m===!0&&h.notify(),m}++d}return!1}};function a(c){for(const h of r)la(c,h,o[h])}class l{constructor(h){this.type=Gc,this.collection=h,this.indexMap=Mu(h.size),this.lenObs=void 0}notify(){const h=this.subs;h.notifyDirty();const u=this.indexMap,d=this.collection,f=d.size;this.indexMap=Mu(f),h.notifyCollection(d,u)}getLengthObserver(){return this.lenObs??(this.lenObs=new b1(this))}}return so(l,null),function(h){let u=e.get(h);return u===void 0&&(e.set(h,u=new l(h)),a(h)),u}})(),qk=(()=>{class n{constructor(h){this.version=0,this.count=0,this.o=new Map,this.b=h}add(h){this.o.has(h)||(h.subscribe(this.b),++this.count),this.o.set(h,this.version)}clear(){this.o.forEach(t,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(c,h){h.unsubscribe(this.b)}function t(c,h){this.version!==c&&(h.unsubscribe(this.b),this.o.delete(h))}function i(){return la(this,"obs",new n(this))}function s(c,h){this.obs.add(this.oL.getObserver(c,h))}function r(c){let h;if(jn(c))h=Jm(c);else if(Qf(c))h=wC(c);else if(_c(c))h=vC(c);else throw Ke(210,c);this.obs.add(h)}function o(c){this.obs.add(c)}function a(){throw Ke(99,"handleChange")}function l(){throw Ke(99,"handleCollectionChange")}return function(h,u){const d=h.prototype;return nl(d,"observe",s),nl(d,"observeCollection",r),nl(d,"subscribeTo",o),Oc(d,"obs",{get:i}),nl(d,"handleChange",a),nl(d,"handleCollectionChange",l),h}})();function ho(n,e){return n==null?qk:qk(n,e)}let ft=null;const df=[];let yl=!1;function I4(){yl=!1}function O4(){yl=!0}function y1(){return ft}function C1(n){if(n==null)throw Ke(206);if(ft==null){ft=n,df[0]=ft,yl=!0;return}if(ft===n)throw Ke(207);df.push(n),ft=n,yl=!0}function S1(n){if(n==null)throw Ke(208);if(ft!==n)throw Ke(209);df.pop(),ft=df.length>0?df[df.length-1]:null,yl=ft!=null}const k4=w1({get current(){return ft},get connecting(){return yl},enter:C1,exit:S1,pause:I4,resume:O4}),Bf=Reflect.get,H4=Object.prototype.toString,lT=new WeakMap,D4="__au_nw__",N4="__au_nw";function XV(n){switch(H4.call(n)){case"[object Object]":return n.constructor[D4]!==!0;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const ng="__raw__";function ut(n){return XV(n)?WS(n):n}function WS(n){return lT.get(n)??L4(n)}function Et(n){return n[ng]??n}function ss(n){return XV(n)&&n[ng]||n}function _1(n,e){return e==="constructor"||e==="__proto__"||e==="$observers"||e===Symbol.toPrimitive||e===Symbol.toStringTag||n.constructor[`${N4}_${Ff(e)}__`]===!0}function L4(n){const e=jn(n)?F4:_c(n)||Qf(n)?l7:$4,t=new Proxy(n,e);return lT.set(n,t),lT.set(t,t),t}const $4={get(n,e,t){if(e===ng)return n;const i=y1();return!yl||_1(n,e)||i==null?Bf(n,e,t):(i.observe(n,e),ut(Bf(n,e,t)))}},F4={get(n,e,t){if(e===ng)return n;if(!yl||_1(n,e)||ft==null)return Bf(n,e,t);switch(e){case"length":return ft.observe(n,"length"),n.length;case"map":return B4;case"includes":return j4;case"indexOf":return z4;case"lastIndexOf":return U4;case"every":return V4;case"filter":return W4;case"find":return G4;case"findIndex":return Y4;case"flat":return K4;case"flatMap":return q4;case"join":return X4;case"push":return Z4;case"pop":return Q4;case"reduce":return o7;case"reduceRight":return a7;case"reverse":return n7;case"shift":return J4;case"unshift":return e7;case"slice":return r7;case"splice":return t7;case"some":return i7;case"sort":return s7;case"keys":return QV;case"values":case Symbol.iterator:return cT;case"entries":return hT}return ft.observe(n,e),ut(Bf(n,e,t))},ownKeys(n){var e;return(e=y1())==null||e.observe(n,"length"),Reflect.ownKeys(n)}};function B4(n,e){const t=Et(this),i=t.map((s,r)=>ss(n.call(e,ut(s),r,this)));return An(ft,t),ut(i)}function V4(n,e){const t=Et(this),i=t.every((s,r)=>n.call(e,ut(s),r,this));return An(ft,t),i}function W4(n,e){const t=Et(this),i=t.filter((s,r)=>ss(n.call(e,ut(s),r,this)));return An(ft,t),ut(i)}function j4(n){const e=Et(this),t=e.includes(ss(n));return An(ft,e),t}function z4(n){const e=Et(this),t=e.indexOf(ss(n));return An(ft,e),t}function U4(n){const e=Et(this),t=e.lastIndexOf(ss(n));return An(ft,e),t}function Y4(n,e){const t=Et(this),i=t.findIndex((s,r)=>ss(n.call(e,ut(s),r,this)));return An(ft,t),i}function G4(n,e){const t=Et(this),i=t.find((s,r)=>n(ut(s),r,this),e);return An(ft,t),ut(i)}function K4(){const n=Et(this);return An(ft,n),ut(n.flat())}function q4(n,e){const t=Et(this);return An(ft,t),WS(t.flatMap((i,s)=>ut(n.call(e,ut(i),s,this))))}function X4(n){const e=Et(this);return An(ft,e),e.join(n)}function Q4(){return ut(Et(this).pop())}function Z4(...n){return Et(this).push(...n)}function J4(){return ut(Et(this).shift())}function e7(...n){return Et(this).unshift(...n)}function t7(...n){return ut(Et(this).splice(...n))}function n7(...n){const e=Et(this),t=e.reverse();return An(ft,e),ut(t)}function i7(n,e){const t=Et(this),i=t.some((s,r)=>ss(n.call(e,ut(s),r,this)));return An(ft,t),i}function s7(n){const e=Et(this),t=e.sort(n);return An(ft,e),ut(t)}function r7(n,e){const t=Et(this);return An(ft,t),WS(t.slice(n,e))}function o7(n,e){const t=Et(this),i=t.reduce((s,r,o)=>n(s,ut(r),o,this),e);return An(ft,t),ut(i)}function a7(n,e){const t=Et(this),i=t.reduceRight((s,r,o)=>n(s,ut(r),o,this),e);return An(ft,t),ut(i)}const l7={get(n,e,t){if(e===ng)return n;const i=y1();if(!yl||_1(n,e)||i==null)return Bf(n,e,t);switch(e){case"size":return i.observe(n,"size"),n.size;case"clear":return g7;case"delete":return m7;case"forEach":return c7;case"add":if(Qf(n))return f7;break;case"get":if(_c(n))return u7;break;case"set":if(_c(n))return d7;break;case"has":return h7;case"keys":return QV;case"values":return cT;case"entries":return hT;case Symbol.iterator:return _c(n)?hT:cT}return ut(Bf(n,e,t))}};function c7(n,e){const t=Et(this);return An(ft,t),t.forEach((i,s)=>{n.call(e,ut(i),ut(s),this)})}function h7(n){const e=Et(this);return An(ft,e),e.has(ss(n))}function u7(n){const e=Et(this);return An(ft,e),ut(e.get(ss(n)))}function d7(n,e){return ut(Et(this).set(ss(n),ss(e)))}function f7(n){return ut(Et(this).add(ss(n)))}function g7(){return ut(Et(this).clear())}function m7(n){return ut(Et(this).delete(ss(n)))}function QV(){const n=Et(this);An(ft,n);const e=n.keys();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:ut(i),done:s}},[Symbol.iterator](){return this}}}function cT(){const n=Et(this);An(ft,n);const e=n.values();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:ut(i),done:s}},[Symbol.iterator](){return this}}}function hT(){const n=Et(this);An(ft,n);const e=n.entries();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:[ut(i[0]),ut(i[1])],done:s}},[Symbol.iterator](){return this}}}const An=(n,e)=>n==null?void 0:n.observeCollection(e),p7=w1({getProxy:WS,getRaw:Et,wrap:ut,unwrap:ss,rawKey:ng});class bC{constructor(e,t,i,s,r){this.type=Gc,this._value=void 0,this._isRunning=!1,this._isDirty=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._wrapped=r?ut(e):e,this.$get=t,this.$set=i,this.oL=s}init(e){this._value=e,this._isDirty=!1}getValue(){return this.subs.count===0?this.$get.call(this._obj,this._obj,this):(this._isDirty&&(this.compute(),this._isDirty=!1),this._value)}setValue(e){if(Ht(this.$set))this._coercer!==void 0&&(e=this._coercer.call(null,e,this._coercionConfig)),bl(e,this._value)||(this._isRunning=!0,this.$set.call(this._obj,e),this._isRunning=!1,this.run());else throw Ke(221)}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,!0}useCallback(e){return this._callback=e,!0}handleDirty(){this._isDirty||(this._isDirty=!0,this.subs.notifyDirty())}handleChange(){this._isDirty=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this._isDirty=!0,this.subs.count>0&&this.run()}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this.compute(),this._isDirty=!1)}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&(this._isDirty=!0,this.obs.clearAll())}run(){var i;if(this._isRunning)return;const e=this._value,t=this.compute();this._isDirty=!1,bl(t,e)||((i=this._callback)==null||i.call(this,t,e),this.subs.notify(this._value,e))}compute(){this._isRunning=!0,this.obs.version++;try{return C1(this),this._value=ss(this.$get.call(this._wrapped,this._wrapped,this))}finally{this.obs.clear(),this._isRunning=!1,S1(this)}}}ho(bC,null),so(bC,null);const R1=BS("IDirtyChecker",n=>n.callback(()=>{throw Ke(217)})),w7={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class v7{static register(e){e.register(Ru.singleton(this,this),Ru.aliasTo(this,R1))}constructor(){this.tracked=[],this._task=null,this._elapsedFrames=0,this.p=ge(Zf),this.check=()=>{if(++this._elapsedFrames<w7.timeoutsPerCheck)return;this._elapsedFrames=0;const e=this.tracked,t=e.length;let i,s=0;for(;s<t;++s)i=e[s],i.isDirty()&&i.flush()},so(Xk,null)}createProperty(e,t){return new Xk(this,e,t)}addProperty(e){this.tracked.push(e),this.tracked.length===1&&(this._task=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(e){this.tracked.splice(this.tracked.indexOf(e),1),this.tracked.length===0&&(this._task.cancel(),this._task=null)}}class Xk{constructor(e,t,i){this.obj=t,this.key=i,this.type=VS,this._oldValue=void 0,this._dirtyChecker=e}getValue(){return this.obj[this.key]}setValue(e){throw Ke(219,this.key)}isDirty(){return this._oldValue!==this.obj[this.key]}flush(){const e=this._oldValue,t=this.getValue();this._oldValue=t,this.subs.notify(t,e)}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.obj[this.key],this._dirtyChecker.addProperty(this))}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&this._dirtyChecker.removeProperty(this)}}class b7{get doNotCache(){return!0}constructor(e,t){this.type=VS,this._obj=e,this._key=t}getValue(){return this._obj[this._key]}setValue(){}subscribe(){}unsubscribe(){}}class ZV{constructor(){this.type=VS}getValue(e,t){return e[t]}setValue(e,t,i){t[i]=e}}class x1{constructor(e,t){this.type=Gc,this._value=void 0,this._observing=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._key=t}getValue(){return this._value}setValue(e){var t,i;if(this._coercer!==void 0&&(e=this._coercer.call(void 0,e,this._coercionConfig)),this._observing){if(bl(e,this._value))return;mv=this._value,this._value=e,this.subs.notifyDirty(),this.subs.notify(e,mv),bl(e,this._value)&&((t=this._callback)==null||t.call(this,e,mv))}else this._value=this._obj[this._key]=e,(i=this._callback)==null||i.call(this,e,mv)}useCallback(e){return this._callback=e,this.start(),!0}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,this.start(),!0}subscribe(e){this._observing===!1&&this.start(),this.subs.add(e)}start(){return this._observing===!1&&(this._observing=!0,this._value=this._obj[this._key],Oc(this._obj,this._key,{enumerable:!0,configurable:!0,get:YV(()=>this.getValue(),{getObserver:()=>this}),set:e=>{this.setValue(e)}})),this}stop(){return this._observing&&(Oc(this._obj,this._key,{enumerable:!0,configurable:!0,writable:!0,value:this._value}),this._observing=!1),this}}so(x1,null);let mv;const uT=new ZV,ig=BS("IObserverLocator",n=>n.singleton(S7)),E1=BS("INodeObserverLocator",n=>n.cachedCallback(e=>(e.getAll(xu).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new y7)));class y7{handles(){return!1}getObserver(){return uT}getAccessor(){return uT}}const C7=BS("IComputedObserverLocator",n=>n.singleton(class{getObserver(t,i,s,r){const o=new bC(t,s.get,s.set,r,!0);return Oc(t,i,{enumerable:s.enumerable,configurable:!0,get:YV(()=>o.getValue(),{getObserver:()=>o}),set:a=>{o.setValue(a)}}),o}}));class S7{constructor(){this._adapters=[],this._dirtyChecker=ge(R1),this._nodeObserverLocator=ge(E1),this._computedObserverLocator=ge(C7)}addAdapter(e){this._adapters.push(e)}getObserver(e,t){if(e==null)throw Ke(199,t);if(!EB(e))return new b7(e,Ht(t)?"":t);if(Ht(t))return new bC(e,t,void 0,this,!0);const i=JV(e);let s=i[t];return s===void 0&&(s=this.createObserver(e,t),s.doNotCache||(i[t]=s)),s}getAccessor(e,t){var s;const i=(s=e.$observers)==null?void 0:s[t];return i!==void 0?i:this._nodeObserverLocator.handles(e,t,this)?this._nodeObserverLocator.getAccessor(e,t,this):uT}getArrayObserver(e){return Jm(e)}getMapObserver(e){return vC(e)}getSetObserver(e){return wC(e)}createObserver(e,t){var s,r;if(this._nodeObserverLocator.handles(e,t,this))return this._nodeObserverLocator.getObserver(e,t,this);switch(t){case"length":if(jn(e))return Jm(e).getLengthObserver();break;case"size":if(_c(e))return vC(e).getLengthObserver();if(Qf(e))return wC(e).getLengthObserver();break;default:if(jn(e)&&$p(t))return Jm(e).getIndexObserver(Number(t));break}let i=Zk(e,t);if(i===void 0){let o=Qk(e);for(;o!==null&&(i=Zk(o,t),i===void 0);)o=Qk(o)}if(i!==void 0&&!y4.call(i,"value")){let o=this._getAdapterObserver(e,t,i);return o==null&&(o=(r=(s=i.get)==null?void 0:s.getObserver)==null?void 0:r.call(s,e)),o??(i.configurable?this._computedObserverLocator.getObserver(e,t,i,this):this._dirtyChecker.createProperty(e,t))}return new x1(e,t)}_getAdapterObserver(e,t,i){if(this._adapters.length>0)for(const s of this._adapters){const r=s.getObserver(e,t,i,this);if(r!=null)return r}return null}}const T1=n=>{let e;return jn(n)?e=Jm(n):_c(n)?e=vC(n):Qf(n)&&(e=wC(n)),e},Qk=Object.getPrototypeOf,Zk=Object.getOwnPropertyDescriptor,JV=n=>{let e=n.$observers;return e===void 0&&Oc(n,"$observers",{enumerable:!1,value:e=Kt()}),e};class _7{constructor(e,t){this.oL=e,this.fn=t,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this._cleanupTask=void 0,this.run=()=>{var i;if(this.stopped)throw Ke(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{(i=this._cleanupTask)==null||i.call(void 0),C1(this),this._cleanupTask=this.fn(this)}finally{this.obs.clear(),this.running=!1,S1(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,Ke(226);this.run()}else this.runCount=0}},this.stop=()=>{var i;(i=this._cleanupTask)==null||i.call(void 0),this._cleanupTask=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}}ho(_7,null);class Jk{constructor(e,t,i,s){this.oL=t,this._value=void 0,this.boundFn=!1,this._scope=e,this.ast=i,this._callback=s}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const e=this._value,t=bn(this.ast,this._scope,this,this);this.obs.clear(),bl(t,e)||(this._value=t,this._callback.call(void 0,t,e))}stop(){this.obs.clearAll(),this._value=void 0}}ho(Jk,null),x4(Jk);const Sg="pending",Iy="running",B_="completed",pv="canceled",V_=new Map,eH=n=>()=>{throw Au(`AUR1005: The PLATFORM did not receive a valid reference to the global function '${n}'.`)};class M1{constructor(e,t={}){var i,s;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=e,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(r=>{this[r]=r in t?t[r]:e[r]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(r=>{var o;this[r]=r in t?t[r]:((o=e[r])==null?void 0:o.bind(e))??eH(r)}),this.performanceNow="performanceNow"in t?t.performanceNow:((s=(i=e.performance)==null?void 0:i.now)==null?void 0:s.bind(e.performance))??eH("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new A1(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(e,t={}){let i=V_.get(e);return i===void 0&&V_.set(e,i=new M1(e,t)),i}static set(e,t){V_.set(e,t)}requestMacroTask(){this.macroTaskRequested=!0,this.macroTaskHandle===-1&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,this.macroTaskRequested===!0&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class A1{get isEmpty(){return this._pendingAsyncCount===0&&this._processing.length===0&&this._pending.length===0&&this._delayed.length===0}get _hasNoMoreFiniteWork(){return this._pendingAsyncCount===0&&this._processing.every(W_)&&this._pending.every(W_)&&this._delayed.every(W_)}constructor(e,t,i){this.platform=e,this.$request=t,this.$cancel=i,this._suspenderTask=void 0,this._pendingAsyncCount=0,this._processing=[],this._pending=[],this._delayed=[],this._flushRequested=!1,this._yieldPromise=void 0,this._lastRequest=0,this._lastFlush=0,this._requestFlush=()=>{this._tracer.enabled&&this._tracer.enter(this,"requestFlush"),this._flushRequested||(this._flushRequested=!0,this._lastRequest=this._now(),this.$request()),this._tracer.enabled&&this._tracer.leave(this,"requestFlush")},this._now=e.performanceNow,this._tracer=new E7(e.console)}flush(e=this._now()){if(this._tracer.enabled&&this._tracer.enter(this,"flush"),this._flushRequested=!1,this._lastFlush=e,this._suspenderTask===void 0){let t;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let s=0;s<this._delayed.length;++s)t=this._delayed[s],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(s--,1));let i;for(;this._processing.length>0;)if((i=this._processing.shift()).run(),i.status===Iy)if(i.suspend===!0){this._suspenderTask=i,this._requestFlush(),this._tracer.enabled&&this._tracer.leave(this,"flush early async");return}else++this._pendingAsyncCount;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let s=0;s<this._delayed.length;++s)t=this._delayed[s],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(s--,1));if((this._processing.length>0||this._delayed.length>0||this._pendingAsyncCount>0)&&this._requestFlush(),this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const s=this._yieldPromise;this._yieldPromise=void 0,s.resolve()}}else this._requestFlush();this._tracer.enabled&&this._tracer.leave(this,"flush full")}cancel(){this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._flushRequested&&(this.$cancel(),this._flushRequested=!1),this._tracer.enabled&&this._tracer.leave(this,"cancel")}async yield(){this._tracer.enabled&&this._tracer.enter(this,"yield"),this.isEmpty?this._tracer.enabled&&this._tracer.leave(this,"yield empty"):(this._yieldPromise===void 0&&(this._tracer.enabled&&this._tracer.trace(this,"yield - creating promise"),this._yieldPromise=nW()),await this._yieldPromise,this._tracer.enabled&&this._tracer.leave(this,"yield task"))}queueTask(e,t){this._tracer.enabled&&this._tracer.enter(this,"queueTask");const{delay:i,preempt:s,persistent:r,suspend:o}={...T7,...t};if(s){if(i>0)throw A7();if(r)throw P7()}this._processing.length===0&&this._requestFlush();const a=this._now(),l=new x7(this._tracer,this,a,a+i,s,r,o,e);return s?this._processing[this._processing.length]=l:i===0?this._pending[this._pending.length]=l:this._delayed[this._delayed.length]=l,this._tracer.enabled&&this._tracer.leave(this,"queueTask"),l}remove(e){this._tracer.enabled&&this._tracer.enter(this,"remove");let t=this._processing.indexOf(e);if(t>-1){this._processing.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove processing");return}if(t=this._pending.indexOf(e),t>-1){this._pending.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove pending");return}if(t=this._delayed.indexOf(e),t>-1){this._delayed.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove delayed");return}throw this._tracer.enabled&&this._tracer.leave(this,"remove error"),Au(`Task #${e.id} could not be found`)}_resetPersistentTask(e){this._tracer.enabled&&this._tracer.enter(this,"resetPersistentTask"),e.reset(this._now()),e.createdTime===e.queueTime?this._pending[this._pending.length]=e:this._delayed[this._delayed.length]=e,this._tracer.enabled&&this._tracer.leave(this,"resetPersistentTask")}_completeAsyncTask(e){var t;if(this._tracer.enabled&&this._tracer.enter(this,"completeAsyncTask"),e.suspend===!0){if(this._suspenderTask!==e)throw this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask error"),Au(`Async task completion mismatch: suspenderTask=${(t=this._suspenderTask)==null?void 0:t.id}, task=${e.id}`);this._suspenderTask=void 0}else--this._pendingAsyncCount;if(this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const i=this._yieldPromise;this._yieldPromise=void 0,i.resolve()}this.isEmpty&&this.cancel(),this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask")}}class dT extends Error{constructor(e){super("Task was canceled."),this.task=e}}let R7=0;class x7{get result(){const e=this._result;if(e===void 0)switch(this._status){case Sg:{const t=this._result=nW();return this._resolve=t.resolve,this._reject=t.reject,t}case Iy:throw Au("Trying to await task from within task will cause a deadlock.");case B_:return this._result=Promise.resolve();case pv:return this._result=Promise.reject(new dT(this))}return e}get status(){return this._status}constructor(e,t,i,s,r,o,a,l){this.taskQueue=t,this.createdTime=i,this.queueTime=s,this.preempt=r,this.persistent=o,this.suspend=a,this.callback=l,this.id=++R7,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._status=Sg,this._tracer=e}run(e=this.taskQueue.platform.performanceNow()){if(this._tracer.enabled&&this._tracer.enter(this,"run"),this._status!==Sg)throw this._tracer.enabled&&this._tracer.leave(this,"run error"),Au(`Cannot run task in ${this._status} state`);const{persistent:t,taskQueue:i,callback:s,_resolve:r,_reject:o,createdTime:a}=this;let l;this._status=Iy;try{l=s(e-a),l instanceof Promise?l.then(c=>{this.persistent?i._resetPersistentTask(this):(t?this._status=pv:this._status=B_,this.dispose()),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async then"),r!==void 0&&r(c)}).catch(c=>{if(this.persistent||this.dispose(),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async catch"),o!==void 0)o(c);else throw c}):(this.persistent?i._resetPersistentTask(this):(t?this._status=pv:this._status=B_,this.dispose()),this._tracer.enabled&&this._tracer.leave(this,"run sync success"),r!==void 0&&r(l))}catch(c){if(this.persistent||this.dispose(),this._tracer.enabled&&this._tracer.leave(this,"run sync error"),o!==void 0)o(c);else throw c}}cancel(){if(this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._status===Sg){const e=this.taskQueue,t=this._reject;return e.remove(this),e.isEmpty&&e.cancel(),this._status=pv,this.dispose(),t!==void 0&&t(new dT(this)),this._tracer.enabled&&this._tracer.leave(this,"cancel true =pending"),!0}else if(this._status===Iy&&this.persistent)return this.persistent=!1,this._tracer.enabled&&this._tracer.leave(this,"cancel true =running+persistent"),!0;return this._tracer.enabled&&this._tracer.leave(this,"cancel false"),!1}reset(e){this._tracer.enabled&&this._tracer.enter(this,"reset");const t=this.queueTime-this.createdTime;this.createdTime=e,this.queueTime=e+t,this._status=Sg,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._tracer.enabled&&this._tracer.leave(this,"reset")}dispose(){this._tracer.enabled&&this._tracer.trace(this,"dispose"),this.callback=void 0,this._resolve=void 0,this._reject=void 0,this._result=void 0}}class E7{constructor(e){this.console=e,this.enabled=!1,this.depth=0}enter(e,t){this.log(`${"  ".repeat(this.depth++)}> `,e,t)}leave(e,t){this.log(`${"  ".repeat(--this.depth)}< `,e,t)}trace(e,t){this.log(`${"  ".repeat(this.depth)}- `,e,t)}log(e,t,i){if(t instanceof A1){const s=t._processing.length,r=t._pending.length,o=t._delayed.length,a=t._flushRequested,l=!!t._suspenderTask,c=`processing=${s} pending=${r} delayed=${o} flushReq=${a} susTask=${l}`;this.console.log(`${e}[Q.${i}] ${c}`)}else{const s=t.id,r=Math.round(t.createdTime*10)/10,o=Math.round(t.queueTime*10)/10,a=t.preempt,l=t.persistent,c=t.suspend,h=t._status,u=`id=${s} created=${r} queue=${o} preempt=${a} persistent=${l} status=${h} suspend=${c}`;this.console.log(`${e}[T.${i}] ${u}`)}}}const T7={delay:0,preempt:!1,persistent:!1,suspend:!1};let eW,tW;const M7=(n,e)=>{eW=n,tW=e},nW=()=>{const n=new Promise(M7);return n.resolve=eW,n.reject=tW,n},W_=n=>n.persistent,A7=()=>Au("AUR1006: Invalid arguments: preempt cannot be combined with a greater-than-zero delay"),P7=()=>Au("AUR1007: Invalid arguments: preempt cannot be combined with persistent"),Au=n=>new Error(n);class dc extends M1{static getOrCreate(e,t={}){let i=dc._lookup.get(e);return i===void 0&&dc._lookup.set(e,i=new dc(e,t)),i}static set(e,t){dc._lookup.set(e,t)}get domWriteQueue(){return this.console.log("[DEV:aurelia] platform.domQueue is deprecated, please use platform.domQueue instead."),this.domQueue}get domReadQueue(){return this.console.log("[DEV:aurelia] platform.domReadQueue has been removed, please use platform.domQueue instead."),this.domQueue}constructor(e,t={}){super(e,t);const i=s=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${s}'.`)};"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(s=>this[s]=s in t?t[s]:e[s]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(s=>{var r;return this[s]=s in t?t[s]:((r=e[s])==null?void 0:r.bind(e))??i(s)}),this.domQueue=(()=>{let s=!1,r=-1;const o=()=>{s=!0,r===-1&&(r=this.requestAnimationFrame(l))},a=()=>{s=!1,r>-1&&(this.cancelAnimationFrame(r),r=-1)},l=()=>{r=-1,s===!0&&(s=!1,c.flush())},c=new A1(this,o,a);return c})()}}dc._lookup=new WeakMap;const{default:P1,oneTime:jS,toView:Nn,fromView:Cl,twoWay:iW}=Rw,Wi=El.get,zS=El.has,ro=El.define,{annotation:I7}=OB,Tl=I7.keyFor,Ew=Object,Pu=String,sW=Ew.prototype,lu=sW.hasOwnProperty,Ml=Ew.freeze,rW=Ew.assign,oW=Ew.getOwnPropertyNames,I1=Ew.keys,tH=Kt(),fT=(n,e,t)=>{if(tH[e]===!0)return!0;if(!yt(e))return!1;const i=e.slice(0,5);return tH[e]=i==="aria-"||i==="data-"||t.isStandardSvgAttribute(n,e)},gT=n=>{throw n},aW=Reflect.defineProperty,js=(n,e,t)=>(aW(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t),lW=(n,e,t)=>n.addSignalListener(e,t),cW=(n,e,t)=>n.removeSignalListener(e,t),O7="Interpolation",k7="IsIterator",H7="IsFunction",ca="IsProperty",nH="pending",j_="running",O1=v1.Observer,Kc=v1.Node,pa=v1.Layout,be=(n,...e)=>new Error(`AUR${Pu(n).padStart(4,"0")}: ${N7(n,...e)}`),D7={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:"No binding behavior definition found for type {{0:name}}",152:"No value converter definition found for type {{0:name}}",153:'Element "{{0}}" has already been registered.',154:'Attribute "{{0}}" has already been registered.',155:"Value converter {{0}} has already been registered.",156:"Binding behavior {{0}} has already been registered.",157:"Binding command {{0}} has already been registered.",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",227:"@bindable is not supported for properties that uses a symbol for name. Use a string for the property name instead.",228:"@bindable cannot be used as a class decorator when no configuration object is supplied.",229:"@bindable cannot be used as a class decorator when no property name is supplied in the configuration object.",500:"There is no cached controller for the provided ViewModel: {{0}}",501:"Invalid combination: cannot combine the containerless custom element option with Shadow DOM.",502:"Trying to activate a disposed controller: {{0}}.",503:"Controller at {{0}} is in an unexpected state: {{1}} during activation.",504:"Synthetic view at {{0}} is being activated with null/undefined scope.",505:"Controller at {{0}} is in an unexpected state: {{1}} during deactivation.",506:"Invalid callback for @watch decorator: {{0}}",507:"Observer for bindable property {{0}} does not support coercion.",508:"Observer for property {{0}} does not support change handler.",759:"No attribute definition found for type {{0:name}}",760:"No element definition found for type {{0:name}}",761:"Cannot create a custom element definition with only a name and no type: {{0}}",762:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",763:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",764:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",765:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",766:"Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a {{0:typeof}}.",652:"Aurelia is unable to observe property {{0}}. Register observation mapping with .useConfig().",653:"Mapping for property {{0}} of <{{1}} /> already exists",654:"Array values can only be bound to a multi-select.",714:'Template compilation error: primary already exists on element/attribute "{{0}}"',719:"Attribute {{0}} has been already registered for {{1:element}}",767:"Aurelia.root was accessed without a valid root.",768:"An instance of Aurelia is already registered with the container or an ancestor of it.",769:"Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView, did you create the host from a DOMParser and forget to call adoptNode()?",770:"Aurelia.start() was called without a composition root",771:"The aurelia instance must be fully stopped before it can be disposed",750:"view.ref is not supported. If you are migrating from v1, this can be understood as the controller.",751:`Attempted to reference "{{0}}", but it was not found amongst the target's API.`,752:"Element {{0:.res}} is not registered in {{1:name}}.",753:"Attribute {{0:.res}} is not registered in {{1:name}}.",754:"Attribute {{0:.res}} is not registered in {{1:name}}.",755:"Cannot resolve ViewFactory before the provider was prepared.",756:"Cannot resolve ViewFactory without a (valid) name.",757:"AUR0757: The compiled template is not aligned with the render instructions. There are {{0}} targets and {{1}} instructions.",772:"Invalid @watch decorator config. Expected an expression or a fn but received null/undefined.",773:'Invalid @watch decorator change handler config.Method "{{0}}" not found in class {{1}}',774:"Invalid @watch decorator usage: decorated target {{0}} is not a class method.",775:'Invalid command "{{0}}" usage with [repeat]',776:'Invalid [repeat] usage, found extraneous target "{{0}}"',777:"Unsupported: [repeat] cannot iterate over {{0:toString}}",778:"Unsupported: [repeat] cannot count {{0:toString}}",814:"[repeat] encountered an error: number of views != number of items {{0:join(!=)}}",779:"Invalid portal insertion position: {{0}}",801:'"& self" binding behavior only supports listener binding via trigger/capture command.',802:`"& updateTrigger" invalid usage. This binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:'blur'">`,803:'"& updateTrigger" invalid usage. This binding behavior can only be applied to two-way/ from-view bindings.',805:'Invalid scope behavior "{{0}}" on <au-compose />. Only "scoped" or "auto" allowed.',806:`<au-compose /> couldn't find a custom element with name "{{0}}", did you forget to register it locally or globally?`,807:"Composition has already been activated/deactivated. Id: {{0:controller}}",808:"Composition has already been deactivated.",810:"Invalid [else] usage, it should follow an [if]",811:"Invalid portal strict target query, empty query.",812:"Invalid portal strict target resolution, target not found.",813:'Invalid [pending]/[then]/[catch] usage. The parent [promise].resolve not found; only "*[promise.resolve] > *[pending|then|catch]" relation is supported.',815:'Invalid [case/default-case] usage. The parent [switch] not found; only "*[switch] > *[case|default-case]" relation is supported.',816:"Invalid [default-case] usage. Multiple 'default-case's are not allowed.",817:'"& signal" binding behavior can only be used with bindings that have a "handleChange" method',818:`"& signal" invalid usage. At least one signal name must be passed to the signal behavior, e.g. "expr & signal:'my-signal'"`,819:"Spreading to bindables onto non custom element",820:"Invalid spread target {{0}}",9999:"No scope context for spread binding.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?",9997:"Marker is malformed. This likely happens when a compiled template has been modified. Did you accidentally modified some compiled template? You can modify template before compilation with compiling Template compiler hook.",9996:"Invalid usage, a rate limit has already been applied. Did you have both throttle and debounce on the same binding?",9995:"The binding already has a target subscriber.",9994:`"& attr" can be only used on property binding. It's used on {{0:ctor}}`,9993:'"& updateTrigger" binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger',9992:'"& updateTrigger" uses node observer to observe, but it does not know how to use events to observe property <{{0:target@property}} />',9991:"Invalid @children usage. @children decorator can only be used on a field",9990:"Invalid @slotted usage. @slotted decorator can only be used on a field",9989:"Invalid query selector. Only selectors with alpha-numeric characters, or $all are allowed. Got {{0}} instead."},N7=(n,...e)=>{var i;let t=D7[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=L7(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Pu(l[a.slice(1)]):l=Pu(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function L7(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}const _g=Tl("bindables"),Ds=Ml({name:_g,keyFrom:n=>`${_g}:${n}`,from(...n){const e={},t=Array.isArray;function i(o){e[o]=fc.create(o)}function s(o,a){e[o]=a instanceof fc?a:fc.create(o,a===!0?{}:a)}function r(o){t(o)?o.forEach(a=>yt(a)?i(a):s(a.name,a)):o instanceof fc?e[o.name]=o:o!==void 0&&I1(o).forEach(a=>s(a,o[a]))}return n.forEach(r),e},getAll(n){const e=[],t=UK(n);let i=t.length,s;for(;--i>=0;){s=t[i];const r=Wi(_g,s);r!=null&&e.push(...Object.values(r))}return e},_add(n,e){let t=Wi(_g,e);t==null&&ro(t=Kt(),e,_g),t[n.name]=n}});class fc{constructor(e,t,i,s,r,o){this.attribute=e,this.callback=t,this.mode=i,this.primary=s,this.name=r,this.set=o}static create(e,t={}){const i=t.mode??Nn;return new fc(t.attribute??AB(e),t.callback??`${e}Changed`,yt(i)?Rw[i]??P1:i,t.primary??!1,t.name??e,t.set??$7(t))}}const mT={key:Tl("coercer"),define(n,e){ro(n[e].bind(n),n,mT.key)},for(n){return Wi(mT.key,n)}};function $7(n={}){const e=n.type??null;if(e==null)return ia;let t;switch(e){case Number:case Boolean:case String:case BigInt:t=e;break;default:{const i=e.coerce;t=typeof i=="function"?i.bind(e):mT.for(e)??ia;break}}return t===ia?t:F7(t,n.nullable)}function F7(n,e){return function(t,i){return i!=null&&i.enableCoercion?(e??!((i==null?void 0:i.coerceNullish)??!1))&&t==null?t:n(t,i):t}}const Jt=jc.createInterface,wa=Ru.singleton,kc=Ru.aliasTo,hW=Ru.instance,an=(n,e,t)=>n.registerResolver(e,t),B7="custom-element",V7="custom-attribute",Hc=(n,e,t,i="__au_static_resource__")=>{var r;let s=Wi(i,n);return s==null&&((r=n.$au)==null?void 0:r.type)===e&&(s=t(n.$au,n),ro(s,n,i)),s};class ep{constructor(e,t,i,s){this.Type=e,this.name=t,this.aliases=i,this.key=s}static create(e,t){let i,s;return yt(e)?(i=e,s={name:i}):(i=e.name,s=e),new ep(t,oc(iH(t,"name"),i),Kn(iH(t,"aliases"),s.aliases,t.aliases),uW.keyFrom(i))}register(e,t){const i=this.Type,s=typeof t=="string"?tp(t):this.key,r=this.aliases;e.has(s,!1)?console.warn(`[DEV:aurelia] ${be(156,this.name)}`):e.register(e.has(i,!1)?null:wa(i,i),kc(i,s),...r.map(o=>kc(i,tp(o))))}}const br="binding-behavior",nf=Uu(br),iH=(n,e)=>Wi(Tl(e),n),tp=n=>`${nf}:${n}`,uW=Ml({name:nf,keyFrom:tp,isType(n){var e;return Ht(n)&&(zS(nf,n)||((e=n.$au)==null?void 0:e.type)===br)},define(n,e){const t=ep.create(n,e),i=t.Type;return ro(t,i,nf,Jo),i},getDefinition(n){const e=Wi(nf,n)??Hc(n,br,ep.create);if(e===void 0)throw be(151,n);return e},find(n,e){const t=n.find(br,e);return t==null?null:Wi(nf,t)??Hc(t,br,ep.create)??null},get(n,e){try{return n.get($f(tp(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve binding behavior with name",e),t}return n.get($f(tp(e)))}}),z_=new Map,US=n=>({type:br,name:n});class YS{bind(e,t){z_.set(t,t.mode),t.mode=this.mode}unbind(e,t){t.mode=z_.get(t),z_.delete(t)}}class dW extends YS{get mode(){return jS}}dW.$au=US("oneTime");class fW extends YS{get mode(){return Nn}}fW.$au=US("toView");class gW extends YS{get mode(){return Cl}}gW.$au=US("fromView");class mW extends YS{get mode(){return iW}}mW.$au=US("twoWay");const U_=new WeakMap,W7=200;class pW{constructor(){this._platform=ge(Zf)}bind(e,t,i,s){var a;const r={type:"debounce",delay:i??W7,now:this._platform.performanceNow,queue:this._platform.taskQueue,signals:yt(s)?[s]:s??at},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):U_.set(t,o)}unbind(e,t){var i;(i=U_.get(t))==null||i.dispose(),U_.delete(t)}}pW.$au={type:br,name:"debounce"};const yC=Jt("ISignaler",n=>n.singleton(j7));class j7{constructor(){this.signals=Kt()}dispatchSignal(e){const t=this.signals[e];if(t===void 0)return;let i;for(i of t.keys())i.handleChange(void 0,void 0)}addSignalListener(e,t){var i;((i=this.signals)[e]??(i[e]=new Set)).add(t)}removeSignalListener(e,t){var i;(i=this.signals[e])==null||i.delete(t)}}class wW{constructor(){this._lookup=new Map,this._signaler=ge(yC)}bind(e,t,...i){if(!("handleChange"in t))throw be(817);if(i.length===0)throw be(818);this._lookup.set(t,i);let s;for(s of i)lW(this._signaler,s,t)}unbind(e,t){const i=this._lookup.get(t);this._lookup.delete(t);let s;for(s of i)cW(this._signaler,s,t)}}wW.$au={type:br,name:"signal"};const Y_=new WeakMap,z7=200;class vW{constructor(){({performanceNow:this._now,taskQueue:this._taskQueue}=ge(Zf))}bind(e,t,i,s){var a;const r={type:"throttle",delay:i??z7,now:this._now,queue:this._taskQueue,signals:yt(s)?[s]:s??at},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):Y_.set(t,o)}unbind(e,t){var i;(i=Y_.get(t))==null||i.dispose(),Y_.delete(t)}}vW.$au={type:br,name:"throttle"};const sH=Jt("IAppTask"),is=Zf,pT=(()=>{const n=new WeakMap;return Ml({add(e,t){let i=n.get(e);i==null&&n.set(e,i=[]),i.push(t)},getDefinitions(e){return n.get(e)??at}})})();class Iu{get type(){return V7}constructor(e,t,i,s,r,o,a,l,c,h,u){this.Type=e,this.name=t,this.aliases=i,this.key=s,this.defaultBindingMode=r,this.isTemplateController=o,this.bindables=a,this.noMultiBindings=l,this.watches=c,this.dependencies=h,this.containerStrategy=u}static create(e,t){let i,s;yt(e)?(i=e,s={name:i}):(i=e.name,s=e);const r=oc(ja(t,"defaultBindingMode"),s.defaultBindingMode,t.defaultBindingMode,Nn);for(const o of Object.values(Ds.from(s.bindables)))Ds._add(o,t);return new Iu(t,oc(ja(t,"name"),i),Kn(ja(t,"aliases"),s.aliases,t.aliases),Tf(i),yt(r)?Rw[r]??P1:r,oc(ja(t,"isTemplateController"),s.isTemplateController,t.isTemplateController,!1),Ds.from(...Ds.getAll(t),ja(t,"bindables"),t.bindables,s.bindables),oc(ja(t,"noMultiBindings"),s.noMultiBindings,t.noMultiBindings,!1),Kn(pT.getDefinitions(t),t.watches),Kn(ja(t,"dependencies"),s.dependencies,t.dependencies),oc(ja(t,"containerStrategy"),s.containerStrategy,t.containerStrategy,"reuse"))}register(e,t){const i=this.Type,s=typeof t=="string"?Tf(t):this.key,r=this.aliases;e.has(s,!1)?(Iu.warnDuplicate&&e.get(xu).warn(be(154,this.name)),console.warn(`[DEV:aurelia] ${be(154,this.name)}`)):e.register(e.has(i,!1)?null:wa(i,i),kc(i,s),...r.map(o=>kc(i,Tf(o))))}toString(){return`au:ca:${this.name}`}}Iu.warnDuplicate=!0;const ji="custom-attribute",Vf=Uu(ji),Tf=n=>`${Vf}:${n}`,ja=(n,e)=>Wi(Tl(e),n),U7=n=>{var e;return Ht(n)&&(zS(Vf,n)||((e=n.$au)==null?void 0:e.type)===ji)},bW=(n,e)=>vf(n,Tf(e))??void 0,k1=(n,e)=>{const t=Iu.create(n,e),i=t.Type;return ro(t,i,Vf,Jo),i},H1=n=>{const e=Wi(Vf,n)??Hc(n,ji,Iu.create);if(e===void 0)throw be(759,n);return e},Y7=(n,e)=>{let t="",i="";if(yt(e))t=Tf(e),i=e;else{const r=H1(e);t=r.key,i=r.name}let s=n;for(;s!==null;){const r=vf(s,t);if(r!=null&&r.is(i))return r;s=_C(s)}return null},D1=Ml({name:Vf,keyFrom:Tf,isType:U7,for:bW,closest:Y7,define:k1,getDefinition:H1,annotate(n,e,t){ro(t,n,Tl(e))},getAnnotation:ja,find(n,e){const t=n.find(ji,e);return t===null?null:Wi(Vf,t)??Hc(t,ji,Iu.create)??null}}),fd=Jt("ILifecycleHooks");class G7{constructor(e,t){this.definition=e,this.instance=t}}class N1{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const i=new Set;let s=t.prototype;for(;s!==sW;){for(const r of oW(s))r!=="constructor"&&!r.startsWith("_")&&i.add(r);s=Object.getPrototypeOf(s)}return new N1(t,i)}}const rH=(()=>{const n=new WeakMap,e=new WeakMap;return Ml({define(t,i){const s=N1.create(t,i),r=s.Type;return e.set(r,s),{register(o){wa(fd,r).register(o)}}},resolve(t){let i=n.get(t);if(i===void 0){n.set(t,i=new K7);const s=t.root,r=s===t?t.getAll(fd):t.has(fd,!1)?s.getAll(fd).concat(t.getAll(fd)):s.getAll(fd);let o,a,l,c,h;for(o of r){a=e.get(o.constructor),l=new G7(a,o);for(c of a.propertyNames)h=i[c],h===void 0?i[c]=[l]:h.push(l)}}return i}})})();class K7{}class np{constructor(e,t,i,s){this.Type=e,this.name=t,this.aliases=i,this.key=s}static create(e,t){let i,s;return yt(e)?(i=e,s={name:i}):(i=e.name,s=e),new np(t,oc(wT(t,"name"),i),Kn(wT(t,"aliases"),s.aliases,t.aliases),yW.keyFrom(i))}register(e,t){const i=this.Type,s=typeof t=="string"?ip(t):this.key,r=this.aliases;e.has(s,!1)?console.warn(`[DEV:aurelia] ${be(155,this.name)}`):e.register(e.has(i,!1)?null:wa(i,i),kc(i,s),...r.map(o=>kc(i,ip(o))))}}const ff="value-converter",sf=Uu(ff),wT=(n,e)=>Wi(Tl(e),n),ip=n=>`${sf}:${n}`,yW=Ml({name:sf,keyFrom:ip,isType(n){var e;return Ht(n)&&(zS(sf,n)||((e=n.$au)==null?void 0:e.type)===ff)},define(n,e){const t=np.create(n,e),i=t.Type;return ro(t,i,sf,Jo),i},getDefinition(n){const e=Wi(sf,n)??Hc(n,ff,np.create);if(e===void 0)throw be(152,n);return e},annotate(n,e,t){ro(t,n,Tl(e))},getAnnotation:wT,find(n,e){const t=n.find(ff,e);return t==null?null:Wi(sf,t)??Hc(t,ff,np.create)??null},get(n,e){try{return n.get($f(ip(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve value converter with name",e),t}return n.get($f(ip(e)))}});class q7{constructor(e,t){this._value=void 0,this.b=e,this._flushQueue=t}flush(){this.b.updateSource(this._value)}handleChange(e,t){const i=this.b;e!==bn(i.ast,i._scope,i,null)&&(this._value=e,this._flushQueue.add(this))}}const Yu=(()=>{function n(e){this._scope=e}return e=>{js(e.prototype,"useScope",n)}})(),Al=(()=>{class n{}const e=new WeakMap,t=new WeakMap,i=new WeakMap;function s(d){return this.l.get(d)}function r(d,f){let g=t.get(d);return g==null&&t.set(d,g=new n),g[f]??(g[f]=uW.get(d.l,f))}function o(d,f,g){var v;const m=r(this,d);if(m==null)throw be(101,d);let w=i.get(this);if(w==null&&i.set(this,w={}),w[d])throw be(102,d);(v=m.bind)==null||v.call(m,f,this,...g)}function a(d,f){var w;const g=r(this,d),m=i.get(this);(w=g==null?void 0:g.unbind)==null||w.call(g,f,this),m!=null&&(m[d]=!1)}function l(d,f){let g=e.get(d);return g==null&&e.set(d,g=new n),g[f]??(g[f]=yW.get(d.l,f))}function c(d){const f=l(this,d);if(f==null)throw be(103,d);const g=f.signals;if(g!=null){const m=this.l.get(yC),w=g.length;let v=0;for(;v<w;++v)m.addSignalListener(g[v],this)}}function h(d){const f=l(this,d);if((f==null?void 0:f.signals)===void 0)return;const g=this.l.get(yC);let m=0;for(;m<f.signals.length;++m)g.removeSignalListener(f.signals[m],this)}function u(d,f,g,m){var v;const w=l(this,d);if(w==null)throw be(103,d);switch(f){case"toView":return"toView"in w?w.toView(g,...m):g;case"fromView":return"fromView"in w?(v=w.fromView)==null?void 0:v.call(w,g,...m):g}}return d=>{const f=d.prototype;js(f,"get",s),js(f,"bindBehavior",o),js(f,"unbindBehavior",a),js(f,"bindConverter",c),js(f,"unbindConverter",h),js(f,"useConverter",u)}})(),X7=Jt("IFlushQueue",n=>n.singleton(Q7));class Q7{constructor(){this._flushing=!1,this._items=new Set}get count(){return this._items.size}add(e){if(this._items.add(e),!this._flushing){this._flushing=!0;try{this._items.forEach(Z7)}finally{this._flushing=!1}}}clear(){this._items.clear(),this._flushing=!1}}const Z7=function(n,e,t){t.delete(n),n.flush()},Gu=(()=>{const n=new WeakSet,e=(i,s,r)=>{let o,a,l,c=!1;const h=i.queue,u=()=>s(l),d=g=>{l=g,r.isBound?(a=o,o=h.queueTask(u,{delay:i.delay}),a==null||a.cancel()):u()},f=d.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return d.flush=()=>{c=(o==null?void 0:o.status)===nH,f(),c&&u()},d},t=(i,s,r)=>{let o,a,l=0,c=0,h,u=!1;const d=i.queue,f=()=>i.now(),g=()=>s(h),m=v=>{h=v,r.isBound?(c=f()-l,a=o,c>i.delay?(l=f(),g()):o=d.queueTask(()=>{l=f(),g()},{delay:i.delay-c}),a==null||a.cancel()):g()},w=m.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return m.flush=()=>{u=(o==null?void 0:o.status)===nH,w(),u&&g()},m};return(i,s)=>{js(i.prototype,"limit",function(r){if(n.has(this))throw be(9996);n.add(this);const o=s(this,r),a=r.signals,l=a.length>0?this.get(yC):null,c=this[o],h=(...f)=>c.call(this,...f),u=r.type==="debounce"?e(r,h,this):t(r,h,this),d=l?{handleChange:u.flush}:null;return this[o]=u,l&&a.forEach(f=>lW(l,f,d)),{dispose:()=>{l&&a.forEach(f=>cW(l,f,d)),n.delete(this),u.dispose(),delete this[o]}}})}})(),qc=((n=new WeakSet)=>e=>function(){n.has(this)||(n.add(this),e.call(this))})(),J7={preempt:!0};class nu{constructor(e,t,i,s,r,o,a,l,c,h){this.targetAttribute=a,this.targetProperty=l,this.mode=c,this.strict=h,this.isBound=!1,this._scope=void 0,this._task=null,this._value=void 0,this.boundFn=!1,this.l=t,this.ast=r,this._controller=e,this.target=o,this.oL=i,this._taskQueue=s}updateTarget(e){const t=this.target,i=this.targetAttribute,s=this.targetProperty;switch(i){case"class":t.classList.toggle(s,!!e);break;case"style":{let r="",o=Pu(e);yt(o)&&o.includes("!important")&&(r="important",o=o.replace("!important","")),t.style.setProperty(s,o,r);break}default:e==null?t.removeAttribute(i):t.setAttribute(i,Pu(e))}}handleChange(){if(!this.isBound)return;let e;this.obs.version++;const t=bn(this.ast,this._scope,this,(this.mode&Nn)>0?this:null);this.obs.clear(),t!==this._value&&(this._value=t,this._controller.state!==zs?(e=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(t)},J7),e==null||e.cancel()):this.updateTarget(t))}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Uc(this.ast,e,this),this.mode&(Nn|jS)&&this.updateTarget(this._value=bn(this.ast,e,this,(this.mode&Nn)>0?this:null)),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,Yc(this.ast,this._scope,this),this._scope=void 0,this._value=void 0,(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}}nu.mix=qc(()=>{Yu(nu),Gu(nu,()=>"updateTarget"),ho(nu,null),Al(nu)});const e9={preempt:!0};class t9{constructor(e,t,i,s,r,o,a,l,c){this.ast=r,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._task=null,this._controller=e,this.oL=i,this._taskQueue=s,this._targetObserver=i.getAccessor(o,a);const h=r.expressions,u=this.partBindings=Array(h.length),d=h.length;let f=0;for(;d>f;++f)u[f]=new iu(h[f],o,a,t,i,c,this)}_handlePartChange(){this.updateTarget()}updateTarget(){const e=this.partBindings,t=this.ast.parts,i=e.length;let s="",r=0;if(i===1)s=t[0]+e[0]._value+t[1];else for(s=t[0];i>r;++r)s+=e[r]._value+t[r+1];const o=this._targetObserver,a=this._controller.state!==zs&&(o.type&pa)>0;let l;a?(l=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,o.setValue(s,this.target,this.targetProperty)},e9),l==null||l.cancel(),l=null):o.setValue(s,this.target,this.targetProperty)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e;const t=this.partBindings,i=t.length;let s=0;for(;i>s;++s)t[s].bind(e);this.updateTarget(),this.isBound=!0}unbind(){var s;if(!this.isBound)return;this.isBound=!1,this._scope=void 0;const e=this.partBindings,t=e.length;let i=0;for(;t>i;++i)e[i].unbind();(s=this._task)==null||s.cancel(),this._task=null}useAccessor(e){this._targetObserver=e}}class iu{constructor(e,t,i,s,r,o,a){this.ast=e,this.target=t,this.targetProperty=i,this.strict=o,this.owner=a,this.mode=Nn,this.task=null,this.isBound=!1,this._value="",this.boundFn=!1,this.l=s,this.oL=r}updateTarget(){this.owner._handlePartChange()}handleChange(){if(!this.isBound)return;this.obs.version++;const e=bn(this.ast,this._scope,this,(this.mode&Nn)>0?this:null);this.obs.clear(),e!=this._value&&(this._value=e,jn(e)&&this.observeCollection(e),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Uc(this.ast,e,this),this._value=bn(this.ast,this._scope,this,(this.mode&Nn)>0?this:null),jn(this._value)&&this.observeCollection(this._value),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Yc(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}iu.mix=qc(()=>{Yu(iu),Gu(iu,()=>"updateTarget"),ho(iu,null),Al(iu)});const n9={preempt:!0};class su{constructor(e,t,i,s,r,o,a,l){this.p=r,this.ast=o,this.target=a,this.strict=l,this.isBound=!1,this.mode=Nn,this._task=null,this._value="",this._needsRemoveNode=!1,this.boundFn=!1,this.l=t,this._controller=e,this.oL=i,this._taskQueue=s}updateTarget(e){var s,r;const t=this.target,i=this._value;this._value=e,this._needsRemoveNode&&((s=i.parentNode)==null||s.removeChild(i),this._needsRemoveNode=!1),e instanceof this.p.Node&&((r=t.parentNode)==null||r.insertBefore(e,t),e="",this._needsRemoveNode=!0),t.textContent=Pu(e??"")}handleChange(){var i;if(!this.isBound)return;this.obs.version++;const e=bn(this.ast,this._scope,this,(this.mode&Nn)>0?this:null);if(this.obs.clear(),e===this._value){(i=this._task)==null||i.cancel(),this._task=null;return}this._controller.state!==zs?this._queueUpdate(e):this.updateTarget(e)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const e=this._value=bn(this.ast,this._scope,this,(this.mode&Nn)>0?this:null);this.obs.clear(),jn(e)&&this.observeCollection(e),this._controller.state!==zs?this._queueUpdate(e):this.updateTarget(e)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Uc(this.ast,e,this);const t=this._value=bn(this.ast,this._scope,this,(this.mode&Nn)>0?this:null);jn(t)&&this.observeCollection(t),this.updateTarget(t),this.isBound=!0}unbind(){var e,t;this.isBound&&(this.isBound=!1,Yc(this.ast,this._scope,this),this._needsRemoveNode&&((e=this._value.parentNode)==null||e.removeChild(this._value)),this._scope=void 0,this.obs.clearAll(),(t=this._task)==null||t.cancel(),this._task=null)}_queueUpdate(e){const t=this._task;this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(e)},n9),t==null||t.cancel()}}su.mix=qc(()=>{Yu(su),Gu(su,()=>"updateTarget"),ho(su,null),Al(su)});class ru{constructor(e,t,i,s,r,o){this.ast=i,this.targetProperty=s,this.isBound=!1,this._scope=void 0,this.target=null,this.boundFn=!1,this.l=e,this.oL=t,this.strict=o,this._toBindingContext=r}updateTarget(){this.target[this.targetProperty]=this._value}handleChange(){this.isBound&&(this.obs.version++,this._value=bn(this.ast,this._scope,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,this.target=this._toBindingContext?e.bindingContext:e.overrideContext,Uc(this.ast,e,this),this._value=bn(this.ast,this._scope,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Yc(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}ru.mix=qc(()=>{Yu(ru),Gu(ru,()=>"updateTarget"),ho(ru,null),Al(ru)});class ns{constructor(e,t,i,s,r,o,a,l,c){this.ast=r,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._targetObserver=void 0,this._task=null,this._targetSubscriber=null,this.boundFn=!1,this.l=t,this._controller=e,this._taskQueue=s,this.oL=i}updateTarget(e){this._targetObserver.setValue(e,this.target,this.targetProperty)}updateSource(e){Wp(this.ast,this._scope,this,e)}handleChange(){if(!this.isBound)return;this.obs.version++;const e=bn(this.ast,this._scope,this,(this.mode&Nn)>0?this:null);this.obs.clear(),this._controller.state!==zs&&(this._targetObserver.type&pa)>0?(Rg=this._task,this._task=this._taskQueue.queueTask(()=>{this.updateTarget(e),this._task=null},i9),Rg==null||Rg.cancel(),Rg=null):this.updateTarget(e)}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Uc(this.ast,e,this);const t=this.oL,i=this.mode;let s=this._targetObserver;s||(i&Cl?s=t.getObserver(this.target,this.targetProperty):s=t.getAccessor(this.target,this.targetProperty),this._targetObserver=s);const r=(i&Nn)>0;i&(Nn|jS)&&this.updateTarget(bn(this.ast,this._scope,this,r?this:null)),i&Cl&&(s.subscribe(this._targetSubscriber??(this._targetSubscriber=new q7(this,this.l.get(X7)))),r||this.updateSource(s.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,Yc(this.ast,this._scope,this),this._scope=void 0,this._targetSubscriber&&(this._targetObserver.unsubscribe(this._targetSubscriber),this._targetSubscriber=null),(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}useTargetObserver(e){var t;(t=this._targetObserver)==null||t.unsubscribe(this),(this._targetObserver=e).subscribe(this)}useTargetSubscriber(e){if(this._targetSubscriber!=null)throw be(9995);this._targetSubscriber=e}}ns.mix=qc(()=>{Yu(ns),Gu(ns,n=>n.mode&Cl?"updateSource":"updateTarget"),ho(ns,null),Al(ns)});let Rg=null;const i9={preempt:!0};class vT{constructor(e,t,i,s){this.ast=t,this.target=i,this.strict=s,this.isBound=!1,this._scope=void 0,this.l=e}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Uc(this.ast,e,this),Wp(this.ast,this._scope,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,bn(this.ast,this._scope,this,null)===this.target&&Wp(this.ast,this._scope,this,null),Yc(this.ast,this._scope,this),this._scope=void 0)}}vT.mix=qc(()=>{Al(vT)});class s9{constructor(e,t=!1,i){this.prevent=e,this.capture=t,this.onError=i}}class gf{constructor(e,t,i,s,r,o,a){this.ast=t,this.target=i,this.targetEvent=s,this.strict=a,this.isBound=!1,this.self=!1,this.boundFn=!0,this._modifiedEventHandler=null,this.l=e,this._options=r,this._modifiedEventHandler=o}callSource(e){const t=this._scope.overrideContext;t.$event=e;let i=bn(this.ast,this._scope,this,null);delete t.$event,Ht(i)&&(i=i(e)),i!==!0&&this._options.prevent&&e.preventDefault()}handleEvent(e){var t;if(!(this.self&&this.target!==e.composedPath()[0])&&((t=this._modifiedEventHandler)==null?void 0:t.call(this,e))!==!1)try{this.callSource(e)}catch(i){this._options.onError(e,i)}}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,Uc(this.ast,e,this),this.target.addEventListener(this.targetEvent,this,this._options),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Yc(this.ast,this._scope,this),this._scope=void 0,this.target.removeEventListener(this.targetEvent,this,this._options))}}gf.mix=qc(function(){Yu(gf),Gu(gf,()=>"callSource"),Al(gf)});const GS=Jt("IEventModifier"),CW=Jt("IKeyMapping",n=>n.instance({meta:Ml(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((e,t,i)=>{let s=String.fromCharCode(i+65);return e[i+65]=s,s=String.fromCharCode(i+97),e[i+97]=e[s]=s,e},{})}}));class L1{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this._mapping=ge(CW),this._mouseButtons=["left","middle","right"]}static register(e){e.register(wa(GS,L1))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let s=!1,r=!1,o;for(o of t){switch(o){case"prevent":s=!0;continue;case"stop":r=!0;continue;case"left":case"middle":case"right":if(i.button!==this._mouseButtons.indexOf(o))return!1;continue}if(this._mapping.meta.includes(o)&&i[`${o}Key`]!==!0)return!1;console.warn(`Modifier '${o}' is not supported for mouse events.`)}return s&&i.preventDefault(),r&&i.stopPropagation(),!0}}}class $1{constructor(){this._mapping=ge(CW),this.type=["keydown","keyup"]}static register(e){e.register(wa(GS,$1))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let s=!1,r=!1,o;for(o of t){switch(o){case"prevent":s=!0;continue;case"stop":r=!0;continue}if(this._mapping.meta.includes(o)){if(i[`${o}Key`]!==!0)return!1;continue}if(this._mapping.keys[o]!==i.key)return!1;console.warn(`Modifier '${o}' is not supported for keyboard event with key "${i.key}".`)}return s&&i.preventDefault(),r&&i.stopPropagation(),!0}}}class F1{constructor(){this.type=["$ALL"]}static register(e){e.register(wa(GS,F1))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let s=!1,r=!1,o;for(o of t){switch(o){case"prevent":s=!0;continue;case"stop":r=!0;continue}console.warn(`Modifier '${o}' is not supported for event "${i.type}".`)}return s&&i.preventDefault(),r&&i.stopPropagation(),!0}}}const SW=Jt("IEventModifierHandler",n=>n.instance({getHandler:()=>(console.warn("No event modifier handler registered"),null)}));class B1{constructor(){this._reg=ge(r1(GS)).reduce((e,t)=>((jn(t.type)?t.type:[t.type]).forEach(s=>e[s]=t),e),{})}static register(e){e.register(wa(SW,B1))}getHandler(e,t){var i;return yt(t)?((i=this._reg[e]??this._reg.$ALL)==null?void 0:i.getHandler(t))??null:null}}const r9={register(n){n.register(B1,L1,$1,F1)}},Ks=Jt("IViewFactory");class KS{constructor(e,t){this.isCaching=!1,this._cache=null,this._cacheSize=-1,this.name=t.name,this.container=e,this.def=t}setCacheSize(e,t){e&&(e==="*"?e=KS.maxCacheSize:yt(e)&&(e=parseInt(e,10)),(this._cacheSize===-1||!t)&&(this._cacheSize=e)),this._cacheSize>0?this._cache=[]:this._cache=null,this.isCaching=this._cacheSize>0}canReturnToCache(e){return this._cache!=null&&this._cache.length<this._cacheSize}tryReturnToCache(e){return this.canReturnToCache(e)?(this._cache.push(e),!0):!1}create(e){const t=this._cache;let i;return t!=null&&t.length>0?(i=t.pop(),i):(i=Us.$view(this,e),i)}}KS.maxCacheSize=65535;const o9=(()=>{const n=(e,t)=>e.document.createComment(t);return e=>{const t=n(e,"au-end");return t.$start=n(e,"au-start"),t}})(),wv=(n,e,t)=>{if(n===null)return;const i=t.length;let s=0;for(;i>s;)n.insertBefore(t[s],e),++s},_W=(n,e)=>new n.ownerDocument.defaultView.MutationObserver(e),a9=n=>n.nodeType===1,RW="default",l9="au-slot",xW=Jt("IAuSlotsInfo");class EW{constructor(e){this.projectedSlots=e}}const c9=Jt("IAuSlotWatcher");class qS{static create(e,t,i,s,r,o,a,l){const c=[],h=s.renderers,u=f=>{let g=f,m=e;for(;m!=null&&g>0;)m=m.parent,--g;if(m==null)throw be(9999);return m},d=f=>{var C;const g=u(f),m=new qS(g),w=r.compileSpread(g.controller.definition,((C=g.instruction)==null?void 0:C.captures)??at,g.controller.container,t,i);let v;for(v of w)switch(v.type){case Jn.spreadTransferedBinding:d(f+1);break;case Jn.spreadElementProp:h[v.instruction.type].render(m,bu(t),v.instruction,o,a,l);break;default:h[v.type].render(m,t,v,o,a,l)}c.push(m)};return d(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(e){this.isBound=!1,this._innerBindings=[],this.locator=(this.$controller=(this._hydrationContext=e).controller).container}get(e){return this.locator.get(e)}bind(e){if(this.isBound)return;this.isBound=!0;const t=this.scope=this._hydrationContext.controller.scope.parent??void 0;if(t==null)throw be(9999);this._innerBindings.forEach(i=>i.bind(t))}unbind(){this._innerBindings.forEach(e=>e.unbind()),this.isBound=!1}addBinding(e){this._innerBindings.push(e)}addChild(e){if(e.vmKind!==Qh)throw be(9998);this.$controller.addChild(e)}}class Ko{constructor(e,t,i,s,r,o,a,l){this.target=t,this.targetKeys=i,this.ast=s,this.strict=l,this.isBound=!1,this._scope=void 0,this.boundFn=!1,this._bindingCache={},this._scopeCache=new WeakMap,this._controller=e,this.oL=r,this.l=o,this._taskQueue=a}updateTarget(){this.obs.version++;const e=bn(this.ast,this._scope,this,this);this.obs.clear(),this._createBindings(e,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(e){if(this.isBound){if(e===this._scope)return;this.unbind()}this.isBound=!0,this._scope=e,Uc(this.ast,e,this);const t=bn(this.ast,e,this,this);this._createBindings(t,!1)}unbind(){if(!this.isBound)return;this.isBound=!1,Yc(this.ast,this._scope,this),this._scope=void 0;let e;for(e in this._bindingCache)this._bindingCache[e].unbind()}_createBindings(e,t){var o,a;let i;if(!EB(e)){console.warn(`[DEV:aurelia] $bindable spread is given a non object for properties: "${this.targetKeys.join(", ")}" of ${this.target.constructor.name}`);for(i in this._bindingCache)(o=this._bindingCache[i])==null||o.unbind();return}let s,r=this._scopeCache.get(e);r==null&&this._scopeCache.set(e,r=Zn.fromParent(this._scope,e));for(i of this.targetKeys)s=this._bindingCache[i],i in e?(s==null&&(s=this._bindingCache[i]=new ns(this._controller,this.l,this.oL,this._taskQueue,(a=Ko._astCache)[i]??(a[i]=new Qm(i,0)),this.target,i,Rw.toView,this.strict)),s.bind(r)):t&&(s==null||s.unbind())}}Ko.mix=qc(()=>{Yu(Ko),Gu(Ko,()=>"updateTarget"),ho(Ko,null),Al(Ko)});Ko._astCache={};const oH=(n,e,t,i)=>{n.addEventListener(e,t,i)},aH=(n,e,t,i)=>{n.removeEventListener(e,t,i)},V1=n=>{let e;const t=n.prototype;js(t,"subscribe",function(i){var s;if(this.subs.add(i)&&this.subs.count===1){for(e of this._config.events)oH(this._el,e,this);this._listened=!0,(s=this._start)==null||s.call(this)}}),js(t,"unsubscribe",function(i){var s;if(this.subs.remove(i)&&this.subs.count===0){for(e of this._config.events)aH(this._el,e,this);this._listened=!1,(s=this._stop)==null||s.call(this)}}),js(t,"useConfig",function(i){if(this._config=i,this._listened){for(e of this._config.events)aH(this._el,e,this);for(e of this._config.events)oH(this._el,e,this)}})},XS=n=>{js(n.prototype,"subscribe",ia),js(n.prototype,"unsubscribe",ia)};class QS{get doNotCache(){return!0}constructor(e,t={}){this.obj=e,this.mapping=t,this.type=Kc|pa,this._value="",this._nameIndex={},this._version=0}getValue(){return this._value}setValue(e){e!==this._value&&(this._value=e,this._flushChanges())}_flushChanges(){const e=this._nameIndex,t=++this._version,i=this.obj.classList,s=TW(this._value),r=s.length;let o=0,a;if(r>0)for(;o<r;o++)a=s[o],a=this.mapping[a]||a,a.length!==0&&(e[a]=this._version,i.add(a));if(t!==1)for(a in e)a=this.mapping[a]||a,e[a]!==t&&i.remove(a)}}XS(QS);function TW(n){if(yt(n))return lH(n);if(typeof n!="object")return at;if(jn(n)){const i=n.length;if(i>0){const s=[];let r=0;for(;i>r;++r)s.push(...TW(n[r]));return s}else return at}const e=[];let t;for(t in n)n[t]&&(t.includes(" ")?e.push(...lH(t)):e.push(t));return e}function lH(n){const e=n.match(/\S+/g);return e===null?at:e}const MW=n=>({$isResolver:!0,resolve(e,t){return t.get(Ou).controller.container.get(f5(n))}}),AW=Jt("IRenderer");function yi(n,e){var i;const t=n[i=Symbol.metadata]??(n[i]=Object.create(null));return t[fa]={register(s){wa(AW,n).register(s)}},n}function ha(n,e,t){return yt(e)?n.parse(e,t):e}function ZS(n){return n.viewModel!=null?n.viewModel:n}function h9(n,e){if(e==="element")return n;switch(e){case"controller":return bu(n);case"view":throw be(750);case"component":return bu(n).viewModel;default:{const t=bW(n,e);if(t!==void 0)return t.viewModel;const i=bu(n,{name:e});if(i===void 0)throw be(751,e);return i.viewModel}}}const u9=yi(class{constructor(){this.target=Jn.setProperty}render(e,t,i){var r;const s=ZS(t);((r=s.$observers)==null?void 0:r[i.to])!==void 0?s.$observers[i.to].setValue(i.value):s[i.to]=i.value}}),d9=yi(class{constructor(){this._rendering=ge(Ku),this.target=Jn.hydrateElement}render(e,t,i,s,r,o){let a,l,c;const h=i.res,u=i.projections,d=e.container;switch(typeof h){case"string":if(a=yr.find(d,h),a==null)throw be(752,i,e);break;default:a=h}const g=i.containerless||a.containerless?jp(t):null,m=H9(s,e,t,i,g,u==null?void 0:new EW(I1(u)));l=m.invoke(a.Type),c=Us.$el(m,l,t,i,a,g),Zi(t,a.key,c);const w=this._rendering.renderers,v=i.props,C=v.length;let S=0,x;for(;C>S;)x=v[S],w[x.type].render(e,c,x,s,r,o),++S;e.addChild(c)}}),f9=yi(class{constructor(){this._rendering=ge(Ku),this.target=Jn.hydrateAttribute}render(e,t,i,s,r,o){let a=e.container,l;switch(typeof i.res){case"string":if(l=D1.find(a,i.res),l==null)throw be(753,i,e);break;default:l=i.res}const c=HW(s,l,e,t,i,void 0,void 0),h=Us.$attr(c.ctn,c.vm,t,l);Zi(t,l.key,h);const u=this._rendering.renderers,d=i.props,f=d.length;let g=0,m;for(;f>g;)m=d[g],u[m.type].render(e,h,m,s,r,o),++g;e.addChild(h)}}),g9=yi(class{constructor(){this._rendering=ge(Ku),this.target=Jn.hydrateTemplateController}render(e,t,i,s,r,o){var C,S;let a=e.container,l;switch(typeof i.res){case"string":if(l=D1.find(a,i.res),l==null)throw be(754,i,e);break;default:l=i.res}const c=this._rendering.getViewFactory(i.def,l.containerStrategy==="new"?a.createChild({inheritParentResources:!0}):a),h=jp(t),u=HW(s,l,e,t,i,c,h),d=Us.$attr(u.ctn,u.vm,t,l);Zi(h,l.key,d),(S=(C=u.vm).link)==null||S.call(C,e,d,t,i);const f=this._rendering.renderers,g=i.props,m=g.length;let w=0,v;for(;m>w;)v=g[w],f[v.type].render(e,d,v,s,r,o),++w;e.addChild(d)}}),m9=yi(class{constructor(){this.target=Jn.hydrateLetElement,ru.mix()}render(e,t,i,s,r,o){t.remove();const a=i.instructions,l=i.toBindingContext,c=e.container,h=a.length;let u,d,f=0;for(;h>f;)u=a[f],d=ha(r,u.from,ca),e.addBinding(new ru(c,o,d,u.to,l,e.strict??!1)),++f}}),p9=yi(class{constructor(){this.target=Jn.refBinding}render(e,t,i,s,r){e.addBinding(new vT(e.container,ha(r,i.from,ca),h9(t,i.to),e.strict??!1))}}),w9=yi(class{constructor(){this.target=Jn.interpolation,iu.mix()}render(e,t,i,s,r,o){const a=e.container,l=new t9(e,a,o,s.domQueue,ha(r,i.from,O7),ZS(t),i.to,Nn,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(MW(CC));l.useAccessor(new QS(l.target,c))}e.addBinding(l)}}),v9=yi(class{constructor(){this.target=Jn.propertyBinding,ns.mix()}render(e,t,i,s,r,o){const a=e.container,l=new ns(e,a,o,s.domQueue,ha(r,i.from,ca),ZS(t),i.to,i.mode,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(MW(CC));l.useTargetObserver(new QS(l.target,c))}e.addBinding(l)}}),b9=yi(class{constructor(){this.target=Jn.iteratorBinding,ns.mix()}render(e,t,i,s,r,o){e.addBinding(new ns(e,e.container,o,s.domQueue,ha(r,i.forOf,k7),ZS(t),i.to,Nn,e.strict??!1))}}),y9=yi(class{constructor(){this.target=Jn.textBinding,su.mix()}render(e,t,i,s,r,o){e.addBinding(new su(e,e.container,o,s.domQueue,s,ha(r,i.from,ca),t,e.strict??!1))}}),C9=Jt("IListenerBindingOptions",n=>n.singleton(class{constructor(){this.p=ge(is),this.prevent=!1,this.onError=(e,t)=>{const i=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:e,error:t}});if(this.p.window.dispatchEvent(i),!i.defaultPrevented)throw t}}})),S9=yi(class{constructor(){this.target=Jn.listenerBinding,this._modifierHandler=ge(SW),this._defaultOptions=ge(C9),gf.mix()}render(e,t,i,s,r){e.addBinding(new gf(e.container,ha(r,i.from,H7),t,i.to,new s9(this._defaultOptions.prevent,i.capture,this._defaultOptions.onError),this._modifierHandler.getHandler(i.to,i.modifier),e.strict??!1))}}),_9=yi(class{constructor(){this.target=Jn.setAttribute}render(e,t,i){t.setAttribute(i.to,i.value)}}),R9=yi(class{constructor(){this.target=Jn.setClassAttribute}render(e,t,i){O9(t.classList,i.value)}}),x9=yi(class{constructor(){this.target=Jn.setStyleAttribute}render(e,t,i){t.style.cssText+=i.value}}),E9=["height","width","border-width","padding","padding-left","padding-right","padding-top","padding-right","padding-inline","padding-block","margin","margin-left","margin-right","margin-top","margin-bottom","margin-inline","margin-block","top","right","bottom","left"],T9=yi(class{constructor(){this.target=Jn.stylePropertyBinding,ns.mix()}render(e,t,i,s,r,o){if(E9.includes(i.to)){e.addBinding(new M9(e,e.container,o,s.domQueue,ha(r,i.from,ca),t.style,i.to,Nn,e.strict??!1));return}e.addBinding(new ns(e,e.container,o,s.domQueue,ha(r,i.from,ca),t.style,i.to,Nn,e.strict??!1))}});class M9 extends ns{updateTarget(e){return typeof e=="number"&&e>0&&console.warn(`[DEV]: Setting number ${e} as value for style.${this.targetProperty}. Did you meant "${e}px"?`),super.updateTarget(e)}}const A9=yi(class{constructor(){this.target=Jn.attributeBinding,nu.mix()}render(e,t,i,s,r,o){const a=e.container,l=a.has(CC,!1)?a.get(CC):null;e.addBinding(new nu(e,a,o,s.domQueue,ha(r,i.from,ca),t,i.attr,l==null?i.to:i.to.split(/\s/g).map(c=>l[c]??c).join(" "),Nn,e.strict??!1))}}),P9=yi(class{constructor(){this._compiler=ge(FS),this._rendering=ge(Ku),this.target=Jn.spreadTransferedBinding}render(e,t,i,s,r,o){qS.create(e.container.get(Ou),t,void 0,this._rendering,this._compiler,s,r,o).forEach(a=>e.addBinding(a))}}),I9=yi(class{constructor(){this.target=Jn.spreadValueBinding,Ko.mix()}render(e,t,i,s,r,o){const a=i.target;if(a==="$bindables")e.addBinding(new Ko(e,t.viewModel,I1(t.definition.bindables),r.parse(i.from,ca),o,e.container,s.domQueue,e.strict??!1));else throw be(820,a)}});function O9(n,e){const t=e.length;let i=0;for(let s=0;s<t;++s)e.charCodeAt(s)===32?(s!==i&&n.add(e.slice(i,s)),i=s+1):s+1===t&&n.add(e.slice(i))}const PW="IController",IW="IInstruction",k9="IRenderLocation",OW="ISlotsInfo";function H9(n,e,t,i,s,r){const o=e.container.createChild();return t0(o,t,n),an(o,JS,new Qn(PW,e)),an(o,tg,new Qn(IW,i)),an(o,rs,s==null?NW:new DW(s)),an(o,Ks,LW),an(o,xW,r==null?$W:new Qn(OW,r)),o}class kW{get $isResolver(){return!0}constructor(e){this.f=e}resolve(){const e=this.f;if(e===null)throw be(755);if(!yt(e.name)||e.name.length===0)throw be(756);return e}}function HW(n,e,t,i,s,r,o,a){const l=t instanceof Us?t:t.$controller,c=l.container.createChild();return t0(c,i,n),an(c,JS,new Qn(PW,l)),an(c,tg,new Qn(IW,s)),an(c,rs,o==null?NW:new Qn(k9,o)),an(c,Ks,r==null?LW:new kW(r)),an(c,xW,$W),{vm:c.invoke(e.Type),ctn:c}}class DW{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(e){this._location=e}resolve(){return this._location}}const NW=new DW(null),LW=new kW(null),$W=new Qn(OW,new EW(at)),Ku=Jt("IRendering",n=>n.singleton(D9));class D9{get renderers(){return this._renderers??(this._renderers=this._ctn.getAll(AW,!1).reduce((e,t)=>{var i;return e[t.target]!==void 0&&console.warn(`[DEV:aurelia] Renderer for target ${t.target} already exists.`),e[i=t.target]??(e[i]=t),e},Kt()))}constructor(){this._compilationCache=new WeakMap,this._fragmentCache=new WeakMap;const e=this._ctn=ge(Sw).root,t=this._platform=e.get(is);this._exprParser=e.get(Jf),this._observerLocator=e.get(ig),this._marker=t.document.createElement("au-m"),this._empty=new X_(t,t.document.createDocumentFragment())}compile(e,t){const i=t.get(FS),s=this._compilationCache;let r=s.get(e);return r==null&&s.set(e,r=Rs.create(e.needsCompile?i.compile(e,t):e)),r}getViewFactory(e,t){return new KS(t,Rs.getOrCreate(e))}createNodes(e){if(e.enhance===!0)return new X_(this._platform,this._transformMarker(e.template));let t,i=!1;const s=this._fragmentCache,r=this._platform,o=r.document;if(s.has(e))t=s.get(e);else{const a=e.template;let l;a==null?t=null:a instanceof r.Node?a.nodeName==="TEMPLATE"?(t=a.content,i=!0):(t=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(l=o.createElement("template"),yt(a)&&(l.innerHTML=a),t=l.content,i=!0),this._transformMarker(t),s.set(e,t)}return t==null?this._empty:new X_(this._platform,i?o.importNode(t,!0):o.adoptNode(t.cloneNode(!0)))}render(e,t,i,s){const r=i.instructions,o=this.renderers,a=t.length;let l=0,c=0,h=r.length,u,d,f;if(a!==h)throw be(757,a,h);if(a>0)for(;a>l;){for(u=r[l],f=t[l],c=0,h=u.length;h>c;)d=u[c],o[d.type].render(e,f,d,this._platform,this._exprParser,this._observerLocator),++c;++l}if(s!=null&&(u=i.surrogates,(h=u.length)>0))for(c=0;h>c;)d=u[c],o[d.type].render(e,s,d,this._platform,this._exprParser,this._observerLocator),++c}_transformMarker(e){if(e==null)return null;const t=this._platform.document.createTreeWalker(e,128);let i;for(;(i=t.nextNode())!=null;)i.nodeValue==="au*"&&i.parentNode.replaceChild(t.currentNode=this._marker.cloneNode(),i);return e}}const cH=Jt("IShadowDOMStyles"),N9=Jt("IShadowDOMGlobalStyles",n=>n.instance({applyTo:ia})),{enter:L9,exit:$9}=k4,{wrap:F9,unwrap:B9}=p7;class FW{get value(){return this._value}constructor(e,t,i,s,r){this.obj=e,this.$get=i,this.useProxy=r,this.isBound=!1,this.running=!1,this._value=void 0,this._callback=s,this.oL=t}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const e=this.obj,t=this._value,i=this.compute();bl(i,t)||this._callback.call(e,i,t,e)}compute(){this.running=!0,this.obs.version++;try{return L9(this),this._value=B9(this.$get.call(void 0,this.useProxy?F9(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,$9(this)}}}ho(FW,null);class bT{get value(){return this._value}constructor(e,t,i,s,r){this.scope=e,this.l=t,this.oL=i,this.isBound=!1,this.boundFn=!1,this.obj=e.bindingContext,this._expression=s,this._callback=r}handleChange(e){const t=this._expression,i=this.obj,s=this._value;t.$kind==="AccessScope"&&this.obs.count===1||(this.obs.version++,e=bn(t,this.scope,this,this),this.obs.clear()),bl(e,s)||(this._value=e,this._callback.call(i,e,s,i))}bind(){this.isBound||(this.obs.version++,this._value=bn(this._expression,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this._value=void 0)}}ho(bT,null),Al(bT);class Us{get lifecycleHooks(){return this._lifecycleHooks}get isActive(){return(this.state&(zs|ou))>0&&(this.state&sp)===0}get name(){var e;if(this.parent===null)switch(this.vmKind){case Qh:return`[${this.definition.name}]`;case lr:return this.definition.name;case Pi:return this.viewFactory.name}switch(this.vmKind){case Qh:return`${this.parent.name}>[${this.definition.name}]`;case lr:return`${this.parent.name}>${this.definition.name}`;case Pi:return this.viewFactory.name===((e=this.parent.definition)==null?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this._vm}set viewModel(e){this._vm=e,this._vmHooks=e==null||this.vmKind===Pi?mf.none:new mf(e)}get strict(){var e;return(e=this.definition)==null?void 0:e.strict}constructor(e,t,i,s,r,o,a){this.container=e,this.vmKind=t,this.definition=i,this.viewFactory=s,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this._isBindingDone=!1,this.hostController=null,this.mountTarget=BW,this.shadowRoot=null,this.nodes=null,this.location=null,this._lifecycleHooks=null,this.state=G_,this._fullyNamed=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._activatingStack=0,this._detachingStack=0,this._unbindingStack=0,this._vm=r,this._vmHooks=t===Pi?mf.none:new mf(r),this.logger=null,this.debug=!1,this.location=a,this._rendering=e.root.get(Ku),this.coercion=t===Pi?void 0:e.get(j9)}static getCached(e){return Ll.get(e)}static getCachedOrThrow(e){const t=Us.getCached(e);if(t===void 0)throw be(500,e);return t}static $el(e,t,i,s,r=void 0,o=null){if(Ll.has(t))return Ll.get(t);if(r==null)try{r=zW(t.constructor)}catch(c){throw console.error(`[DEV:aurelia] Custom element definition not found for creating a controller with host: <${i.nodeName} /> and component ${t.constructor.name||"(Anonymous) class"}`),c}an(e,r.Type,new Qn(r.key,t,r.Type));const a=new Us(e,lr,r,null,t,i,o),l=e.get(DB(Ou));return r.dependencies.length>0&&e.register(...r.dependencies),an(e,Ou,new Qn("IHydrationContext",new VW(a,s,l))),Ll.set(t,a),(s==null||s.hydrate!==!1)&&a._hydrateCustomElement(s),a}static $attr(e,t,i,s){if(Ll.has(t))return Ll.get(t);s=s??H1(t.constructor),an(e,s.Type,new Qn(s.key,t,s.Type));const r=new Us(e,Qh,s,null,t,i,null);return s.dependencies.length>0&&e.register(...s.dependencies),Ll.set(t,r),r._hydrateCustomAttribute(),r}static $view(e,t=void 0){const i=new Us(e.container,Pi,null,e,null,null,null);return i.parent=t??null,i._hydrateSynthetic(),i}_hydrateCustomElement(e){this.logger=this.container.get(xu).root,this.debug=this.logger.config.level<=v5.debug,this.debug&&(this.logger=this.logger.scopeTo(this.name));const t=this.container,i=this._vm,s=this.definition;this.scope=Zn.create(i,null,!0),s.watches.length>0&&dH(this,t,s,i),hH(this,s,i),this._lifecycleHooks=rH.resolve(t),t.register(s.Type),s.injectable!==null&&an(t,s.injectable,new Qn("definition.injectable",i)),(e==null||e.hydrate!==!1)&&(this._hydrate(e==null?void 0:e.hostController),this._hydrateChildren())}_hydrate(e){this._lifecycleHooks.hydrating!=null&&this._lifecycleHooks.hydrating.forEach(K9,this),this._vmHooks._hydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this._vm.hydrating(this));const t=this.definition,i=this._compiledDef=this._rendering.compile(t,this.container),s=i.shadowOptions,r=i.hasSlots,o=i.containerless;let a=this.host,l=this.location,c=!1;if(e!=null?(this.hostController=e,c=!0):(this.hostController=bu(a,W9))!==null&&(a=this.host=this.container.root.get(is).document.createElement(t.name),c=!0),c&&o&&l==null&&(l=this.location=jp(a)),Zi(a,Ri,this),Zi(a,t.key,this),s!==null||r){if(l!=null)throw be(501);Zi(this.shadowRoot=a.attachShadow(s??U9),Ri,this),Zi(this.shadowRoot,t.key,this),this.mountTarget=qh}else l!=null?(Zi(l,Ri,this),Zi(l,t.key,this),this.mountTarget=Xh):this.mountTarget=Kh;this._vm.$controller=this,this.nodes=this._rendering.createNodes(i),this._lifecycleHooks.hydrated!==void 0&&this._lifecycleHooks.hydrated.forEach(q9,this),this._vmHooks._hydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this._vm.hydrated(this))}_hydrateChildren(){this._rendering.render(this,this.nodes.findTargets(),this._compiledDef,this.host),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(fH,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateCustomAttribute(){const e=this.definition,t=this._vm;e.watches.length>0&&dH(this,this.container,e,t),hH(this,e,t),t.$controller=this,this._lifecycleHooks=rH.resolve(this.container),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(fH,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateSynthetic(){this._compiledDef=this._rendering.compile(this.viewFactory.def,this.container),this._rendering.render(this,(this.nodes=this._rendering.createNodes(this._compiledDef)).findTargets(),this._compiledDef,void 0)}activate(e,t,i){switch(this.state){case G_:case pf:if(!(t===null||t.isActive))return;this.state=zs;break;case ou:return;case ec:throw be(502,this.name);default:throw be(503,this.name,Y9(this.state))}switch(this.parent=t,this.debug&&!this._fullyNamed&&(this._fullyNamed=!0,(this.logger??(this.logger=this.container.get(xu).root.scopeTo(this.name))).trace("activate()")),this.vmKind){case lr:this.scope.parent=i??null;break;case Qh:this.scope=i??null;break;case Pi:if(i==null)throw be(504,this.name);this.hasLockedScope||(this.scope=i);break}this.$initiator=e,this._enterActivating();let s;return this.vmKind!==Pi&&this._lifecycleHooks.binding!=null&&(this.debug&&this.logger.trace("lifecycleHooks.binding()"),s=ai(...this._lifecycleHooks.binding.map(X9,this))),this._vmHooks._binding&&(this.debug&&this.logger.trace("binding()"),s=ai(s,this._vm.binding(this.$initiator,this.parent))),Xn(s)?(this._ensurePromise(),s.then(()=>{this._isBindingDone=!0,this.state!==zs?this._leaveActivating():this.bind()}).catch(r=>{this._reject(r)}),this.$promise):(this._isBindingDone=!0,this.bind(),this.$promise)}bind(){this.debug&&this.logger.trace("bind()");let e=0,t=0,i;if(this.bindings!==null)for(e=0,t=this.bindings.length;t>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Pi&&this._lifecycleHooks.bound!=null&&(this.debug&&this.logger.trace("lifecycleHooks.bound()"),i=ai(...this._lifecycleHooks.bound.map(Q9,this))),this._vmHooks._bound&&(this.debug&&this.logger.trace("bound()"),i=ai(i,this._vm.bound(this.$initiator,this.parent))),Xn(i)){this._ensurePromise(),i.then(()=>{this.isBound=!0,this.state!==zs?this._leaveActivating():this._attach()}).catch(s=>{this._reject(s)});return}this.isBound=!0,this._attach()}_append(...e){switch(this.mountTarget){case Kh:this.host.append(...e);break;case qh:this.shadowRoot.append(...e);break;case Xh:{let t=0;for(;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location);break}}}_attach(){if(this.debug&&this.logger.trace("attach()"),this.hostController!==null)switch(this.mountTarget){case Kh:case qh:this.hostController._append(this.host);break;case Xh:this.hostController._append(this.location.$start,this.location);break}switch(this.mountTarget){case Kh:this.nodes.appendTo(this.host,this.definition!=null&&this.definition.enhance);break;case qh:{const i=this.container;(i.has(cH,!1)?i.get(cH):i.get(N9)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case Xh:this.nodes.insertBefore(this.location);break}let e=0,t;if(this.vmKind!==Pi&&this._lifecycleHooks.attaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.attaching()"),t=ai(...this._lifecycleHooks.attaching.map(Z9,this))),this._vmHooks._attaching&&(this.debug&&this.logger.trace("attaching()"),t=ai(t,this._vm.attaching(this.$initiator,this.parent))),Xn(t)&&(this._ensurePromise(),this._enterActivating(),t.then(()=>{this._leaveActivating()}).catch(i=>{this._reject(i)})),this.children!==null)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this._leaveActivating()}deactivate(e,t){var o;let i;switch(this.state&~wf){case ou:this.state=sp;break;case zs:this.state=sp,i=(o=this.$promise)==null?void 0:o.catch(a=>{this.logger.warn("The activation error will be ignored, as the controller is already scheduled for deactivation. The activation was rejected with: %s",a)});break;case G_:case pf:case ec:case pf|ec:return;default:throw be(505,this.name,this.state)}this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,e===this&&this._enterDetaching();let s=0,r;if(this.children!==null)for(s=0;s<this.children.length;++s)this.children[s].deactivate(e,this);return Ge(i,()=>{if(this.isBound&&(this.vmKind!==Pi&&this._lifecycleHooks.detaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.detaching()"),r=ai(...this._lifecycleHooks.detaching.map(e8,this))),this._vmHooks._detaching&&(this.debug&&this.logger.trace("detaching()"),r=ai(r,this._vm.detaching(this.$initiator,this.parent)))),Xn(r)&&(this._ensurePromise(),e._enterDetaching(),r.then(()=>{e._leaveDetaching()}).catch(a=>{e._reject(a)})),e.head===null?e.head=this:e.tail.next=this,e.tail=this,e===this)return this._leaveDetaching(),this.$promise})}removeNodes(){switch(this.vmKind){case lr:case Pi:this.nodes.remove(),this.nodes.unlink()}if(this.hostController!==null)switch(this.mountTarget){case Kh:case qh:this.host.remove();break;case Xh:this.location.$start.remove(),this.location.remove();break}}unbind(){this.debug&&this.logger.trace("unbind()");let e=0;if(this.bindings!==null)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case Qh:this.scope=null;break;case Pi:this.hasLockedScope||(this.scope=null),(this.state&wf)===wf&&!this.viewFactory.tryReturnToCache(this)&&this.$initiator===this&&this.dispose();break;case lr:this.scope.parent=null;break}this.state=pf,this.$initiator=null,this._resolve()}_ensurePromise(){this.$promise===void 0&&(this.$promise=new Promise((e,t)=>{this.$resolve=e,this.$reject=t}),this.$initiator!==this&&this.parent._ensurePromise())}_resolve(){this.$promise!==void 0&&(K_=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,K_(),K_=void 0)}_reject(e){this.$promise!==void 0&&(q_=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,q_(e),q_=void 0),this.$initiator!==this&&this.parent._reject(e)}_enterActivating(){++this._activatingStack,this.$initiator!==this&&this.parent._enterActivating()}_leaveActivating(){if(this.state!==zs){--this._activatingStack,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating();return}if(--this._activatingStack===0){if(this.vmKind!==Pi&&this._lifecycleHooks.attached!=null&&(sh=ai(...this._lifecycleHooks.attached.map(J9,this))),this._vmHooks._attached&&(this.debug&&this.logger.trace("attached()"),sh=ai(sh,this._vm.attached(this.$initiator))),Xn(sh)){this._ensurePromise(),sh.then(()=>{this.state=ou,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating()}).catch(e=>{this._reject(e)}),sh=void 0;return}sh=void 0,this.state=ou,this._resolve()}this.$initiator!==this&&this.parent._leaveActivating()}_enterDetaching(){++this._detachingStack}_leaveDetaching(){if(--this._detachingStack===0){this.debug&&this.logger.trace("detach()"),this._enterUnbinding(),this.removeNodes();let e=this.$initiator.head,t;for(;e!==null;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e._isBindingDone&&(e.vmKind!==Pi&&e._lifecycleHooks.unbinding!=null&&(t=ai(...e._lifecycleHooks.unbinding.map(t8,e))),e._vmHooks._unbinding&&(e.debug&&e.logger.trace("unbinding()"),t=ai(t,e.viewModel.unbinding(e.$initiator,e.parent)))),Xn(t)&&(this._ensurePromise(),this._enterUnbinding(),t.then(()=>{this._leaveUnbinding()}).catch(i=>{this._reject(i)})),t=void 0,e=e.next;this._leaveUnbinding()}}_enterUnbinding(){++this._unbindingStack}_leaveUnbinding(){if(--this._unbindingStack===0){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;e!==null;)e!==this&&(e._isBindingDone=!1,e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this._isBindingDone=!1,this.isBound=!1,this.unbind()}}addBinding(e){this.bindings===null?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){this.children===null?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case Qh:case lr:return this.definition.name===e;case Pi:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return this.vmKind===lr&&(Zi(e,Ri,this),Zi(e,this.definition.key,this)),this.host=e,this.mountTarget=Kh,this}setShadowRoot(e){return this.vmKind===lr&&(Zi(e,Ri,this),Zi(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=qh,this}setLocation(e){return this.vmKind===lr&&(Zi(e,Ri,this),Zi(e,this.definition.key,this)),this.location=e,this.mountTarget=Xh,this}release(){this.state|=wf}dispose(){this.debug&&this.logger.trace("dispose()"),(this.state&ec)!==ec&&(this.state|=ec,this._vmHooks._dispose&&this._vm.dispose(),this.children!==null&&(this.children.forEach(G9),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,this._vm!==null&&(Ll.delete(this._vm),this._vm=null),this._vm=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(e){if(e(this)===!0||this._vmHooks._accept&&this._vm.accept(e)===!0)return!0;if(this.children!==null){const{children:t}=this;for(let i=0,s=t.length;i<s;++i)if(t[i].accept(e)===!0)return!0}}}const Ll=new WeakMap,BW=0,Kh=1,qh=2,Xh=3,V9=Ml({none:BW,host:Kh,shadowRoot:qh,location:Xh}),W9={optional:!0},j9=g5(GV);function hH(n,e,t){var c,h;const i=e.bindables,s=oW(i),r=s.length,o=n.container.get(ig),a="propertiesChanged"in t;if(r===0)return;const l=a?(()=>{let u={},d,f=0;const g=Promise.resolve(),m=()=>{d==null&&(d=g.then(()=>{var v;const w=u;u={},f=0,d=void 0,n.isBound&&((v=t.propertiesChanged)==null||v.call(t,w),f>0&&m())}))};return(w,v,C)=>{u[w]={newValue:v,oldValue:C},f++,m()}})():ia;for(let u=0;u<r;++u){const d=s[u],f=i[d],g=f.callback,m=o.getObserver(t,d);if(f.set!==ia&&((c=m.useCoercer)==null?void 0:c.call(m,f.set,n.coercion))!==!0)throw be(507,d);if(t[g]!=null||t.propertyChanged!=null||a){const w=(v,C)=>{var S,x;n.isBound&&((S=t[g])==null||S.call(t,v,C),(x=t.propertyChanged)==null||x.call(t,d,v,C),l(d,v,C))};if(((h=m.useCallback)==null?void 0:h.call(m,w))!==!0)throw be(508,d)}}}const uH=new Map,z9=n=>{let e=uH.get(n);return e==null&&(e=new Qm(n,0),uH.set(n,e)),e};function dH(n,e,t,i){const s=e.get(ig),r=e.get(Jf),o=t.watches,a=n.vmKind===lr?n.scope:Zn.create(i,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if({expression:c,callback:h}=o[d],h=Ht(h)?h:Reflect.get(i,h),!Ht(h))throw be(506,h);Ht(c)?n.addBinding(new FW(i,s,c,h,!0)):(u=yt(c)?r.parse(c,ca):z9(c),n.addBinding(new bT(a,e,s,u,h)))}}class mf{constructor(e){this._define="define"in e,this._hydrating="hydrating"in e,this._hydrated="hydrated"in e,this._created="created"in e,this._binding="binding"in e,this._bound="bound"in e,this._attaching="attaching"in e,this._attached="attached"in e,this._detaching="detaching"in e,this._unbinding="unbinding"in e,this._dispose="dispose"in e,this._accept="accept"in e}}mf.none=new mf({});const U9={mode:"open"},lr="customElement",Qh="customAttribute",Pi="synthetic",G_=0,zs=1,ou=2,sp=4,pf=8,wf=16,ec=32;function Y9(n){const e=[];return(n&zs)===zs&&e.push("activating"),(n&ou)===ou&&e.push("activated"),(n&sp)===sp&&e.push("deactivating"),(n&pf)===pf&&e.push("deactivated"),(n&wf)===wf&&e.push("released"),(n&ec)===ec&&e.push("disposed"),e.length===0?"none":e.join("|")}const JS=Jt("IController"),Ou=Jt("IHydrationContext");class VW{constructor(e,t,i){this.instruction=t,this.parent=i,this.controller=e}}function G9(n){n.dispose()}function fH(n){n.instance.created(this._vm,this)}function K9(n){n.instance.hydrating(this._vm,this)}function q9(n){n.instance.hydrated(this._vm,this)}function X9(n){return n.instance.binding(this._vm,this.$initiator,this.parent)}function Q9(n){return n.instance.bound(this._vm,this.$initiator,this.parent)}function Z9(n){return n.instance.attaching(this._vm,this.$initiator,this.parent)}function J9(n){return n.instance.attached(this._vm,this.$initiator)}function e8(n){return n.instance.detaching(this._vm,this.$initiator,this.parent)}function t8(n){return n.instance.unbinding(this._vm,this.$initiator,this.parent)}let K_,q_,sh;class n8{}function vf(n,e){var t;return((t=n.$au)==null?void 0:t[e])??null}function Zi(n,e,t){(n.$au??(n.$au=new n8))[e]=t}const e0=Jt("INode"),i8=Jt("IEventTarget",n=>n.cachedCallback(e=>e.has(xC,!0)?e.get(xC).host:e.get(is).document)),rs=Jt("IRenderLocation"),CC=Jt("ICssClassMapping"),SC=new WeakMap;function _C(n){if(SC.has(n))return SC.get(n);let e=0,t=n.nextSibling;for(;t!==null;){if(t.nodeType===8)switch(t.textContent){case"au-start":++e;break;case"au-end":if(e--===0)return t}t=t.nextSibling}if(n.parentNode===null&&n.nodeType===11){const i=bu(n,{optional:!0});if(i==null)return null;if(i.mountTarget===V9.shadowRoot)return _C(i.host)}return n.parentNode}function s8(n,e){if(n.platform!==void 0&&!(n instanceof n.platform.Node)){const t=n.childNodes;for(let i=0,s=t.length;i<s;++i)SC.set(t[i],e)}else SC.set(n,e)}function jp(n){if(WW(n))return n;const e=n.ownerDocument.createComment("au-end"),t=e.$start=n.ownerDocument.createComment("au-start"),i=n.parentNode;return i!==null&&(i.replaceChild(e,n),i.insertBefore(t,e)),e}function WW(n){return n.textContent==="au-end"}class X_{get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}constructor(e,t){this.platform=e,this.next=void 0,this._isMounted=!1,this._isLinked=!1,this.ref=null;const i=(this.f=t).querySelectorAll("au-m");let s=0,r=i.length,o=this.t=Array(r),a,l;for(;r>s;)l=i[s],a=l.nextSibling,l.remove(),a.nodeType===8&&(l=a,(a=a.nextSibling).$start=l),o[s]=a,++s;const c=t.childNodes,h=this.childNodes=Array(r=c.length);for(s=0;r>s;)h[s]=c[s],++s;this._firstChild=t.firstChild,this._lastChild=t.lastChild}findTargets(){return this.t}insertBefore(e){if(this._isLinked&&this.ref)this.addToLinked();else{const t=e.parentNode;if(this._isMounted){let i=this._firstChild,s;const r=this._lastChild;for(;i!=null&&(s=i.nextSibling,t.insertBefore(i,e),i!==r);)i=s}else this._isMounted=!0,e.parentNode.insertBefore(this.f,e)}}appendTo(e,t=!1){if(this._isMounted){let i=this._firstChild,s;const r=this._lastChild;for(;i!=null&&(s=i.nextSibling,e.appendChild(i),i!==r);)i=s}else this._isMounted=!0,t||e.appendChild(this.f)}remove(){if(this._isMounted){this._isMounted=!1;const e=this.f,t=this._lastChild;let i,s=this._firstChild;for(;s!==null&&(i=s.nextSibling,e.appendChild(s),s!==t);)s=i}}addToLinked(){const e=this.ref,t=e.parentNode;if(this._isMounted){let i=this._firstChild,s;const r=this._lastChild;for(;i!=null&&(s=i.nextSibling,t.insertBefore(i,e),i!==r);)i=s}else this._isMounted=!0,t.insertBefore(this.f,e)}unlink(){this._isLinked=!1,this.next=void 0,this.ref=void 0}link(e){this._isLinked=!0,WW(e)?this.ref=e:(this.next=e,this._obtainRefNode())}_obtainRefNode(){this.next!==void 0?this.ref=this.next.firstChild:this.ref=void 0}}const t0=(n,e,t=n.get(is))=>(an(n,t.HTMLElement,an(n,t.Element,an(n,e0,new Qn("ElementResolver",e)))),n);function n0(n){return function(e,t){return t.addInitializer(function(){jW(n,this)}),e}}const Q_=new WeakMap;class Rs{get type(){return B7}constructor(e,t,i,s,r,o,a,l,c,h,u,d,f,g,m,w,v,C,S){this.Type=e,this.name=t,this.aliases=i,this.key=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.containerless=f,this.shadowOptions=g,this.hasSlots=m,this.enhance=w,this.watches=v,this.strict=C,this.processContent=S}static create(e,t=null){if(t===null){const s=e;if(yt(s))throw be(761,e);const r=Or("name",s,RC);Ht(s.Type)?t=s.Type:t=UW(MB(r));for(const o of Object.values(Ds.from(s.bindables)))Ds._add(o,t);return new Rs(t,r,Kn(s.aliases),Or("key",s,()=>rf(r)),Zs("capture",s,t,er),Or("template",s,Js),Kn(s.instructions),Kn(As(t,"dependencies"),s.dependencies),Or("injectable",s,Js),Or("needsCompile",s,J_),Kn(s.surrogates),Ds.from(As(t,"bindables"),s.bindables),Zs("containerless",s,t,er),Or("shadowOptions",s,Js),Or("hasSlots",s,er),Or("enhance",s,er),Or("watches",s,o8),Or("strict",s,Z_),Ir("processContent",t,Js))}if(yt(e))return new Rs(t,e,Kn(As(t,"aliases"),t.aliases),rf(e),Ir("capture",t,er),Ir("template",t,Js),Kn(As(t,"instructions"),t.instructions),Kn(As(t,"dependencies"),t.dependencies),Ir("injectable",t,Js),Ir("needsCompile",t,J_),Kn(As(t,"surrogates"),t.surrogates),Ds.from(...Ds.getAll(t),As(t,"bindables"),t.bindables),Ir("containerless",t,er),Ir("shadowOptions",t,Js),Ir("hasSlots",t,er),Ir("enhance",t,er),Kn(pT.getDefinitions(t),t.watches),Ir("strict",t,Z_),Ir("processContent",t,Js));const i=Or("name",e,RC);for(const s of Object.values(Ds.from(e.bindables)))Ds._add(s,t);return new Rs(t,i,Kn(As(t,"aliases"),e.aliases,t.aliases),rf(i),Zs("capture",e,t,er),Zs("template",e,t,Js),Kn(As(t,"instructions"),e.instructions,t.instructions),Kn(As(t,"dependencies"),e.dependencies,t.dependencies),Zs("injectable",e,t,Js),Zs("needsCompile",e,t,J_),Kn(As(t,"surrogates"),e.surrogates,t.surrogates),Ds.from(...Ds.getAll(t),As(t,"bindables"),t.bindables,e.bindables),Zs("containerless",e,t,er),Zs("shadowOptions",e,t,Js),Zs("hasSlots",e,t,er),Zs("enhance",e,t,er),Kn(e.watches,pT.getDefinitions(t),t.watches),Zs("strict",e,t,Z_),Zs("processContent",e,t,Js))}static getOrCreate(e){if(e instanceof Rs)return e;if(Q_.has(e))return Q_.get(e);const t=Rs.create(e);return Q_.set(e,t),ro(t,t.Type,Ri),t}register(e,t){const i=this.Type,s=typeof t=="string"?rf(t):this.key,r=this.aliases;if(e.has(s,!1)){console.warn(be(153,this.name));return}e.register(e.has(i,!1)?null:wa(i,i),kc(i,s),...r.map(o=>kc(i,rf(o))))}toString(){return`au:ce:${this.name}`}}const r8={name:void 0,searchParents:!1,optional:!1},Js=()=>null,Z_=()=>{},er=()=>!1,J_=()=>!0,o8=()=>at,ku="custom-element",Ri=Uu(ku),rf=n=>`${Ri}:${n}`,RC=(n=>()=>`unnamed-${++n}`)(0),a8=(n,e,t)=>{ro(t,n,Tl(e))},jW=(n,e)=>{const t=Rs.create(n,e),i=t.Type;return ro(t,i,Ri,Jo),i},l8=n=>{var e;return Ht(n)&&(zS(Ri,n)||((e=n.$au)==null?void 0:e.type)===ku)},bu=(n,e=r8)=>{if(e.name===void 0&&e.searchParents!==!0){const i=vf(n,Ri);if(i===null){if(e.optional===!0)return null;throw be(762,n)}return i}if(e.name!==void 0){if(e.searchParents!==!0){const r=vf(n,Ri);if(r===null)throw be(763,n);return r.is(e.name)?r:void 0}let i=n,s=!1;for(;i!==null;){const r=vf(i,Ri);if(r!==null&&(s=!0,r.is(e.name)))return r;i=_C(i)}if(s)return;throw be(764,n)}let t=n;for(;t!==null;){const i=vf(t,Ri);if(i!==null)return i;t=_C(t)}throw be(765,n)},As=(n,e)=>Wi(Tl(e),n),zW=n=>{const e=Wi(Ri,n)??Hc(n,ku,Rs.create);if(e==null)throw be(760,n);return e},c8=()=>{const n={$isInterface:!1,register(){return{$isResolver:!0,resolve(e,t){return t.has(n,!0)?t.get(n):null}}}};return n},UW=function(){const n={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(t,i=e){const s=class{};return n.value=t,aW(s,"name",n),i!==e&&rW(s.prototype,i),s}}(),yr=Ml({name:Ri,keyFrom:rf,isType:l8,for:bu,define:jW,getDefinition:zW,annotate:a8,getAnnotation:As,generateName:RC,createInjectable:c8,generateType:UW,find(n,e){const t=n.find(ku,e);return t==null?null:Wi(Ri,t)??Hc(t,ku,Rs.create)??null}}),xC=Jt("IAppRoot");class gH{get controller(){return this._controller}constructor(e,t,i,s=!1){this.config=e,this.container=t,this._hydratePromise=void 0,this._useOwnAppTasks=s;const r=this.host=e.host;i.prepare(this),an(t,i8,new Qn("IEventTarget",r)),t0(t,r,this.platform=this._createPlatform(t,r)),this._hydratePromise=Ge(this._runAppTasks("creating"),()=>{e.allowActionlessForm||r.addEventListener("submit",d=>{const f=d.target,g=!f.getAttribute("action");f.tagName==="FORM"&&g&&d.preventDefault()},!1);const o=s?t:t.createChild(),a=e.component;let l;Ht(a)?l=o.invoke(a):l=e.component;const c={hydrate:!1,projections:null},h=s?Rs.create({name:RC(),template:this.host,enhance:!0,strict:e.strictBinding}):void 0,u=this._controller=Us.$el(o,l,r,c,h);return u._hydrateCustomElement(c),Ge(this._runAppTasks("hydrating"),()=>(u._hydrate(),Ge(this._runAppTasks("hydrated"),()=>{u._hydrateChildren(),this._hydratePromise=void 0})))})}activate(){return Ge(this._hydratePromise,()=>Ge(this._runAppTasks("activating"),()=>Ge(this._controller.activate(this._controller,null,void 0),()=>this._runAppTasks("activated"))))}deactivate(){return Ge(this._runAppTasks("deactivating"),()=>Ge(this._controller.deactivate(this._controller,null),()=>this._runAppTasks("deactivated")))}_runAppTasks(e){const t=this.container,i=this._useOwnAppTasks&&!t.has(sH,!1)?[]:t.getAll(sH);return ai(...i.reduce((s,r)=>(r.slot===e&&s.push(r.run()),s),[]))}_createPlatform(e,t){let i;if(e.has(is,!1))i=e.get(is);else{if(t.ownerDocument.defaultView===null)throw be(769);i=new dc(t.ownerDocument.defaultView),e.register(hW(is,i))}return i}dispose(){var e;(e=this._controller)==null||e.dispose()}}const mH=Jt("IAurelia");let h8=class yT{get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(this._root==null){if(this.next==null)throw be(767);return this.next}return this._root}constructor(e=jc.createContainer()){if(this.container=e,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this._startPromise=void 0,this._stopPromise=void 0,e.has(mH,!0)||e.has(yT,!0))throw be(768);an(e,mH,new Qn("IAurelia",this)),an(e,yT,new Qn("Aurelia",this)),an(e,xC,this._rootProvider=new Qn("IAppRoot"))}register(...e){return this.container.register(...e),this}app(e){return this.next=new gH(e,this.container,this._rootProvider),this}enhance(e){const t=e.container??this.container.createChild(),i=an(t,xC,new Qn("IAppRoot")),s=new gH({host:e.host,component:e.component},t,i,!0);return Ge(s.activate(),()=>s)}async waitForIdle(){const e=this.root.platform;await e.domQueue.yield(),await e.taskQueue.yield()}start(e=this.next){if(e==null)throw be(770);return Xn(this._startPromise)?this._startPromise:this._startPromise=Ge(this.stop(),()=>(Reflect.set(e.host,"$aurelia",this),this._rootProvider.prepare(this._root=e),this._isStarting=!0,Ge(e.activate(),()=>{this._isRunning=!0,this._isStarting=!1,this._startPromise=void 0,this._dispatchEvent(e,"au-started",e.host)})))}stop(e=!1){if(Xn(this._stopPromise))return this._stopPromise;if(this._isRunning===!0){const t=this._root;return this._isRunning=!1,this._isStopping=!0,this._stopPromise=Ge(t.deactivate(),()=>{Reflect.deleteProperty(t.host,"$aurelia"),e&&t.dispose(),this._root=void 0,this._rootProvider.dispose(),this._isStopping=!1,this._dispatchEvent(t,"au-stopped",t.host)})}}dispose(){if(this._isRunning||this._isStopping)throw be(771);this.container.dispose()}_dispatchEvent(e,t,i){const s=new e.platform.window.CustomEvent(t,{detail:this,bubbles:!0,cancelable:!0});i.dispatchEvent(s)}};const YW=Jt("ISVGAnalyzer",n=>n.singleton(u8));class u8{isStandardSvgAttribute(e,t){return!1}}class GW{constructor(){this.fns=[],this._tagAttrMap=Kt(),this._globalAttrMap=Kt(),this.svg=ge(YW),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(e){var o;let t,i,s,r;for(s in e){t=e[s],i=(o=this._tagAttrMap)[s]??(o[s]=Kt());for(r in t){if(i[r]!==void 0)throw pH(r,s);i[r]=t[r]}}}useGlobalMapping(e){const t=this._globalAttrMap;for(const i in e){if(t[i]!==void 0)throw pH(i,"*");t[i]=e[i]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return d8(e,t)||this.fns.length>0&&this.fns.some(i=>i(e,t))}map(e,t){var i;return((i=this._tagAttrMap[e.nodeName])==null?void 0:i[t])??this._globalAttrMap[t]??(fT(e,t,this.svg)?t:null)}}GW.register=Cw(rV);function d8(n,e){switch(n.nodeName){case"INPUT":switch(n.type){case"checkbox":case"radio":return e==="checked";default:return e==="value"||e==="files"||e==="value-as-number"||e==="value-as-date"}case"TEXTAREA":case"SELECT":return e==="value";default:switch(e){case"textcontent":case"innerhtml":return n.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}function pH(n,e){return be(719,n,e)}const f8={register(n){n.register(zV,GW,KW)}};class g8{constructor(e,t,i){this.attrs=e,this.bindables=t,this.primary=i}}class KW{constructor(){this._resourceCache=new WeakMap,this._bindableCache=new WeakMap}el(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new wH),t in i._element?i._element[t]:i._element[t]=yr.find(e,t)}attr(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new wH),t in i._attr?i._attr[t]:i._attr[t]=D1.find(e,t)}bindables(e){let t=this._bindableCache.get(e);if(t==null){const i=e.bindables,s=Kt();let r,o,a=!1,l,c;for(o in i){if(r=i[o],c=r.attribute,r.primary===!0){if(a)throw be(714,e);a=!0,l=r}else!a&&l==null&&(l=r);s[c]=fc.create(o,r)}r==null&&e.type==="custom-attribute"&&(l=s.value=fc.create("value",{mode:e.defaultBindingMode??P1})),this._bindableCache.set(e,t=new g8(s,i,l??null))}return t}}KW.register=Cw(UV);class wH{constructor(){this._element=Kt(),this._attr=Kt()}}const eR=Kt();class zp{static forNs(e){return eR[e]??(eR[e]=new zp(e))}constructor(e){this.ns=e,this.type=Kc|pa}getValue(e,t){return e.getAttributeNS(this.ns,t)}setValue(e,t,i){e==null?t.removeAttributeNS(this.ns,i):t.setAttributeNS(this.ns,i,e)}}XS(zp);class qW{constructor(){this.type=Kc|pa}getValue(e,t){return e.getAttribute(t)}setValue(e,t,i){e==null?t.removeAttribute(i):t.setAttribute(i,e)}}XS(qW);const Oy=new qW;class yu{static _getSelectedOptions(e){const t=[];if(e.length===0)return t;const i=e.length;let s=0,r;for(;i>s;)r=e[s],r.selected&&(t[t.length]=lu.call(r,"model")?r.model:r.value),++s;return t}static _defaultMatcher(e,t){return e===t}constructor(e,t,i,s){this.type=Kc|O1|pa,this._value=void 0,this._oldValue=void 0,this._hasChanges=!1,this._arrayObserver=void 0,this._nodeObserver=void 0,this._observing=!1,this._listened=!1,this._el=e,this._observerLocator=s,this._config=i}getValue(){return this._observing?this._value:this._el.multiple?yu._getSelectedOptions(this._el.options):this._el.value}setValue(e){this._oldValue=this._value,this._value=e,this._hasChanges=e!==this._oldValue,this._observeArray(e instanceof Array?e:null),this._flushChanges()}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const e=this._value,t=this._el,i=jn(e),s=t.matcher??yu._defaultMatcher,r=t.options;let o=r.length;for(;o-- >0;){const a=r[o],l=lu.call(a,"model")?a.model:a.value;if(i){a.selected=e.findIndex(c=>!!s(l,c))!==-1;continue}a.selected=!!s(l,e)}}syncValue(){const e=this._el,t=e.options,i=t.length,s=this._value;let r=0;if(e.multiple){if(!(s instanceof Array))return!0;let l;const c=e.matcher||yu._defaultMatcher,h=[];for(;r<i;)l=t[r],l.selected&&h.push(lu.call(l,"model")?l.model:l.value),++r;let u;for(r=0;r<s.length;)u=s[r],h.findIndex(d=>!!c(u,d))===-1?s.splice(r,1):++r;for(r=0;r<h.length;)u=h[r],s.findIndex(d=>!!c(u,d))===-1&&s.push(u),++r;return!1}let o=null,a;for(;r<i;){if(a=t[r],a.selected){o=lu.call(a,"model")?a.model:a.value;break}++r}return this._oldValue=this._value,this._value=o,!0}_start(){(this._nodeObserver=_W(this._el,this._handleNodeChange.bind(this))).observe(this._el,{childList:!0,subtree:!0,characterData:!0}),this._observeArray(this._value instanceof Array?this._value:null),this._observing=!0}_stop(){var e;this._nodeObserver.disconnect(),(e=this._arrayObserver)==null||e.unsubscribe(this),this._nodeObserver=this._arrayObserver=void 0,this._observing=!1}_observeArray(e){var t;if((t=this._arrayObserver)==null||t.unsubscribe(this),this._arrayObserver=void 0,e!=null){if(!this._el.multiple)throw be(654);(this._arrayObserver=this._observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this._flush()}_handleNodeChange(e){this.syncOptions(),this.syncValue()&&this._flush()}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}V1(yu),so(yu,null);const m8="--";class XW{constructor(e){this.obj=e,this.type=Kc|pa,this._value="",this._oldValue="",this.styles={},this.version=0,this._hasChanges=!1}getValue(){return this.obj.style.cssText}setValue(e){this._value=e,this._hasChanges=e!==this._oldValue,this._flushChanges()}_getStyleTuplesFromString(e){const t=[],i=/url\([^)]+$/;let s=0,r="",o,a,l,c;for(;s<e.length;){if(o=e.indexOf(";",s),o===-1&&(o=e.length),r+=e.substring(s,o),s=o+1,i.test(r)){r+=";";continue}a=r.indexOf(":"),l=r.substring(0,a).trim(),c=r.substring(a+1).trim(),t.push([l,c]),r=""}return t}_getStyleTuplesFromObject(e){let t,i;const s=[];for(i in e)if(t=e[i],t!=null){if(yt(t)){if(i.startsWith(m8)){s.push([i,t]);continue}s.push([AB(i),t]);continue}s.push(...this._getStyleTuples(t))}return s}_getStyleTuplesFromArray(e){const t=e.length;if(t>0){const i=[];let s=0;for(;t>s;++s)i.push(...this._getStyleTuples(e[s]));return i}return at}_getStyleTuples(e){return yt(e)?this._getStyleTuplesFromString(e):e instanceof Array?this._getStyleTuplesFromArray(e):e instanceof Object?this._getStyleTuplesFromObject(e):at}_flushChanges(){if(this._hasChanges){this._hasChanges=!1;const e=this._value,t=this.styles,i=this._getStyleTuples(e);let s,r=this.version;this._oldValue=e;let o,a,l,c=0;const h=i.length;for(;c<h;++c)o=i[c],a=o[0],l=o[1],this.setProperty(a,l),t[a]=r;if(this.styles=t,this.version+=1,r===0)return;r-=1;for(s in t)!lu.call(t,s)||t[s]!==r||this.obj.style.removeProperty(s)}}setProperty(e,t){let i="";t!=null&&Ht(t.indexOf)&&t.includes("!important")&&(i="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,i)}bind(){this._value=this._oldValue=this.obj.style.cssText}}XS(XW);class CT{constructor(e,t,i){this.type=Kc|O1|pa,this._value="",this._oldValue="",this._hasChanges=!1,this._listened=!1,this._el=e,this._key=t,this._config=i}getValue(){return this._value}setValue(e){bl(e,this._value)||(this._oldValue=this._value,this._value=e,this._hasChanges=!0,this._config.readonly||this._flushChanges())}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this._el[this._key]=this._value??this._config.default,this._flush())}handleEvent(){this._oldValue=this._value,this._value=this._el[this._key],this._oldValue!==this._value&&(this._hasChanges=!1,this._flush())}_start(){this._value=this._oldValue=this._el[this._key]}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}V1(CT),so(CT,null);const vH=(()=>{const n="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/2000/xmlns/";return rW(Kt(),{"xlink:actuate":["actuate",n],"xlink:arcrole":["arcrole",n],"xlink:href":["href",n],"xlink:role":["role",n],"xlink:show":["show",n],"xlink:title":["title",n],"xlink:type":["type",n],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",t],"xmlns:xlink":["xlink",t]})})(),QW=new ZV;QW.type=Kc|pa;class W1{constructor(){this.allowDirtyCheck=!0,this._events=Kt(),this._globalEvents=Kt(),this._overrides=Kt(),this._globalOverrides=Kt(),this._locator=ge(l5),this._platform=ge(is),this._dirtyChecker=ge(R1),this.svg=ge(YW);const e=["change","input"],t={events:e,default:""};this.useConfig({INPUT:{value:t,valueAsNumber:{events:e,default:0},checked:{type:ST,events:e},files:{events:e,readonly:!0}},SELECT:{value:{type:yu,events:["change"],default:""}},TEXTAREA:{value:t}});const i={events:["change","input","blur","keyup","paste"],default:""},s={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:s,scrollLeft:s,textContent:i,innerHTML:i}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(e,t){return e instanceof this._platform.Node}useConfig(e,t,i){const s=this._events;let r;if(yt(e))r=s[e]??(s[e]=Kt()),r[t]==null?r[t]=i:vv(e,t);else for(const o in e){r=s[o]??(s[o]=Kt());const a=e[o];for(t in a)r[t]==null?r[t]=a[t]:vv(o,t)}}useConfigGlobal(e,t){const i=this._globalEvents;if(typeof e=="object")for(const s in e)i[s]==null?i[s]=e[s]:vv("*",s);else i[e]==null?i[e]=t:vv("*",e)}getAccessor(e,t,i){if(t in this._globalOverrides||t in(this._overrides[e.tagName]??d5))return this.getObserver(e,t,i);switch(t){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return(t==="popovertarget"||t==="popovertargetaction")&&e.nodeName!=="INPUT"&&e.nodeName!=="BUTTON"&&console.warn(`[aurelia] Popover API are only valid on <input> or <button>. Detected ${t} on <${e.nodeName.toLowerCase()}>`),Oy;default:{const s=vH[t];return s!==void 0?zp.forNs(s[1]):fT(e,t,this.svg)?Oy:QW}}}overrideAccessor(e,t){var s,r;let i;if(yt(e))i=(s=this._overrides)[e]??(s[e]=Kt()),i[t]=!0;else for(const o in e)for(const a of e[o])i=(r=this._overrides)[o]??(r[o]=Kt()),i[a]=!0}overrideAccessorGlobal(...e){for(const t of e)this._globalOverrides[t]=!0}getNodeObserverConfig(e,t){var i;return((i=this._events[e.tagName])==null?void 0:i[t])??this._globalEvents[t]}getNodeObserver(e,t,i){var o;const s=((o=this._events[e.tagName])==null?void 0:o[t])??this._globalEvents[t];let r;return s!=null?(r=new(s.type??CT)(e,t,s,i,this._locator),r.doNotCache||(JV(e)[t]=r),r):null}getObserver(e,t,i){switch(t){case"class":return new QS(e);case"css":case"style":return new XW(e)}const s=this.getNodeObserver(e,t,i);if(s!=null)return s;const r=vH[t];if(r!==void 0)return zp.forNs(r[1]);if(fT(e,t,this.svg))return Oy;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this._dirtyChecker.createProperty(e,t);throw be(652,t)}else return new x1(e,t)}}W1.register=Cw(E1);function p8(n,e){if(n instanceof Array)return e.getArrayObserver(n);if(n instanceof Map)return e.getMapObserver(n);if(n instanceof Set)return e.getSetObserver(n)}function vv(n,e){throw be(653,n,e)}function bH(n,e){return n===e}class ST{constructor(e,t,i,s){this.type=Kc|O1|pa,this._value=void 0,this._oldValue=void 0,this._collectionObserver=void 0,this._valueObserver=void 0,this._listened=!1,this._el=e,this.oL=s,this._config=i}getValue(){return this._value}setValue(e){const t=this._value;e!==t&&(this._value=e,this._oldValue=t,this._observe(),this._synchronizeElement(),this._flush())}handleCollectionChange(){this._synchronizeElement()}handleChange(e,t){this._synchronizeElement()}_synchronizeElement(){const e=this._value,t=this._el,i=lu.call(t,"model")?t.model:t.value,s=t.type==="radio",r=t.matcher!==void 0?t.matcher:bH;if(s)t.checked=!!r(e,i);else if(e===!0)t.checked=!0;else{let o=!1;if(jn(e))o=e.findIndex(a=>!!r(a,i))!==-1;else if(e instanceof Set){for(const a of e)if(r(a,i)){o=!0;break}}else if(e instanceof Map)for(const a of e){const l=a[0],c=a[1];if(r(l,i)&&c===!0){o=!0;break}}t.checked=o}}handleEvent(){let e=this._oldValue=this._value;const t=this._el,i=lu.call(t,"model")?t.model:t.value,s=t.checked,r=t.matcher!==void 0?t.matcher:bH;if(t.type==="checkbox"){if(jn(e)){const o=e.findIndex(a=>!!r(a,i));s&&o===-1?e.push(i):!s&&o!==-1&&e.splice(o,1);return}else if(e instanceof Set){const o={};let a=o;for(const l of e)if(r(l,i)===!0){a=l;break}s&&a===o?e.add(i):!s&&a!==o&&e.delete(a);return}else if(e instanceof Map){let o;for(const a of e){const l=a[0];if(r(l,i)===!0){o=l;break}}e.set(o,s);return}e=s}else if(s)e=i;else return;this._value=e,this._flush()}_start(){this._observe()}_stop(){var e,t;this._value=this._oldValue=void 0,(e=this._collectionObserver)==null||e.unsubscribe(this),(t=this._valueObserver)==null||t.unsubscribe(this),this._collectionObserver=this._valueObserver=void 0}_flush(){tR=this._oldValue,this._oldValue=this._value,this.subs.notify(this._value,tR),tR=void 0}_observe(){var t,i,s,r,o;const e=this._el;(s=this._valueObserver??(this._valueObserver=((t=e.$observers)==null?void 0:t.model)??((i=e.$observers)==null?void 0:i.value)))==null||s.subscribe(this),(r=this._collectionObserver)==null||r.unsubscribe(this),this._collectionObserver=void 0,e.type==="checkbox"&&((o=this._collectionObserver=p8(this._value,this.oL))==null||o.subscribe(this))}}V1(ST),so(ST,null);let tR;class ZW{bind(e,t){if(!(t instanceof ns))throw be(9994,t);t.useTargetObserver(Oy)}}ZW.$au={type:br,name:"attr"};class JW{bind(e,t){if(!("handleEvent"in t))throw be(801);t.self=!0}unbind(e,t){t.self=!1}}JW.$au={type:br,name:"self"};class e2{constructor(){this._observerLocator=ge(ig),this._nodeObserverLocator=ge(E1)}bind(e,t,...i){if(!(this._nodeObserverLocator instanceof W1))throw be(9993);if(i.length===0)throw be(802);if(!(t instanceof ns)||!(t.mode&Cl))throw be(803);const s=this._nodeObserverLocator.getNodeObserverConfig(t.target,t.targetProperty);if(s==null)throw be(9992,t);const r=this._nodeObserverLocator.getNodeObserver(t.target,t.targetProperty,this._observerLocator);r.useConfig({readonly:s.readonly,default:s.default,events:i}),t.useTargetObserver(r)}}e2.$au={type:br,name:"updateTrigger"};class EC{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this._wantsDeactivate=!1,this._swapId=0,this._ifFactory=ge(Ks),this._location=ge(rs)}attaching(e,t){return this._swap(this.value)}detaching(e,t){return this._wantsDeactivate=!0,Ge(this.pending,()=>{var i;this._wantsDeactivate=!1,this.pending=void 0,(i=this.view)==null||i.deactivate(e,this.$controller)})}valueChanged(e,t){if(this.$controller.isActive&&(e=!!e,t=!!t,e!==t))return this._swap(e)}_swap(e){const t=this.view,i=this.$controller,s=this._swapId++,r=()=>!this._wantsDeactivate&&this._swapId===s+1;let o;return Ge(this.pending,()=>this.pending=Ge(t==null?void 0:t.deactivate(t,i),()=>{var a;if(r()&&(e?o=this.view=this.ifView=this.cache&&this.ifView!=null?this.ifView:this._ifFactory.create():o=this.view=this.elseView=this.cache&&this.elseView!=null?this.elseView:(a=this.elseFactory)==null?void 0:a.create(),o!=null))return o.setLocation(this._location),Ge(o.activate(o,i,i.scope),()=>{r()&&(this.pending=void 0)})}))}dispose(){var e,t;(e=this.ifView)==null||e.dispose(),(t=this.elseView)==null||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}EC.$au={type:ji,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:n=>n===""||!!n&&n!=="false"}}};class t2{constructor(){this._factory=ge(Ks)}link(e,t,i,s){const r=e.children,o=r[r.length-1];if(o instanceof EC)o.elseFactory=this._factory;else if(o.viewModel instanceof EC)o.viewModel.elseFactory=this._factory;else throw be(810)}}t2.$au={type:"custom-attribute",name:"else",isTemplateController:!0};function w8(n){n.dispose()}const v8=["BindingBehavior","ValueConverter"];class n2{constructor(){this.views=[],this.key=null,this._oldViews=[],this._scopes=[],this._oldScopes=[],this._scopeMap=new Map,this._observer=void 0,this._observingInnerItems=!1,this._reevaluating=!1,this._innerItemsExpression=null,this._normalizedItems=void 0,this._hasDestructuredLocal=!1,this._location=ge(rs),this._parent=ge(JS),this._factory=ge(Ks),this._resolver=ge(y8);const t=ge(tg).props[0].props[0];if(t!==void 0){const{to:i,value:s,command:r}=t;if(i==="key")if(r===null)this.key=s;else if(r==="bind")this.key=ge(Jf).parse(s,ca);else throw be(775,r);else throw be(776,i)}}binding(e,t){const i=this._parent.bindings,s=i.length;let r,o,a=0;for(;s>a;++a)if(r=i[a],r.target===this&&r.targetProperty==="items"){o=this.forOf=r.ast,this._forOfBinding=r;let c=o.iterable;for(;c!=null&&v8.includes(c.$kind);)c=c.expression,this._observingInnerItems=!0;this._innerItemsExpression=c;break}this._refreshCollectionObserver();const l=o.declaration;(this._hasDestructuredLocal=l.$kind==="ArrayDestructuring"||l.$kind==="ObjectDestructuring")||(this.local=bn(l,this.$controller.scope,r,null))}attaching(e,t){return this._normalizeToArray(),this._createScopes(),this._activateAllViews(e,this._normalizedItems??at)}detaching(e,t){return this._refreshCollectionObserver(),this._deactivateAllViews(e)}unbinding(e,t){this._scopeMap.clear()}itemsChanged(){this.$controller.isActive&&(this._refreshCollectionObserver(),this._normalizeToArray(),this._createScopes(),this._applyIndexMap(void 0))}handleCollectionChange(e,t){const i=this.$controller;if(i.isActive){if(this._observingInnerItems){if(this._reevaluating)return;this._reevaluating=!0,this.items=bn(this.forOf.iterable,i.scope,this._forOfBinding,null),this._reevaluating=!1;return}this._normalizeToArray(),this._createScopes(),this._applyIndexMap(t)}}_applyIndexMap(e){const t=this.views;this._oldViews=t.slice();const i=t.length,s=this.key,r=s!==null,o=this._oldScopes,a=this._scopes;if(r||e===void 0){const l=this.local,h=this._normalizedItems.length,d=this.forOf.declaration,f=this._forOfBinding,g=this._hasDestructuredLocal;e=Mu(h);let m=0;if(i===0)for(;m<h;++m)e[m]=-2;else if(h===0)for(m=0;m<i;++m)e.deletedIndices.push(m),e.deletedItems.push(ky(g,d,o[m],f,l));else if(r){const w=Array(i);for(m=0;m<i;++m)w[m]=EH(g,s,d,o[m],f,l);const v=Array(i);for(m=0;m<h;++m)v[m]=EH(g,s,d,a[m],f,l);for(m=0;m<h;++m)w.includes(v[m])?e[m]=w.indexOf(v[m]):e[m]=-2;for(m=0;m<i;++m)v.includes(w[m])||(e.deletedIndices.push(m),e.deletedItems.push(ky(g,d,o[m],f,l)))}else{for(m=0;m<h;++m)o.includes(a[m])?e[m]=o.indexOf(a[m]):e[m]=-2;for(m=0;m<i;++m)a.includes(o[m])||(e.deletedIndices.push(m),e.deletedItems.push(ky(g,d,o[m],f,l)))}}if(e.deletedIndices.length>0){const l=Ge(this._deactivateAndRemoveViewsByKey(e),()=>this._createAndActivateAndSortViewsByKey(e));Xn(l)&&l.catch(gT)}else this._createAndActivateAndSortViewsByKey(e)}_refreshCollectionObserver(){var o,a;const e=this.$controller.scope;let t=this._innerItems,i=this._observingInnerItems,s;i&&(t=this._innerItems=bn(this._innerItemsExpression,e,this._forOfBinding,null)??null,i=this._observingInnerItems=!bl(this.items,t));const r=this._observer;if(this.$controller.isActive){const l=i?t:this.items;s=this._observer=(a=(o=this._resolver.resolve(l)).getObserver)==null?void 0:a.call(o,l),r!==s&&(r==null||r.unsubscribe(this),s==null||s.subscribe(this))}else r==null||r.unsubscribe(this),this._observer=void 0}_createScopes(){const e=this._scopes;this._oldScopes=e.slice();const t=this._normalizedItems,i=t.length,s=this._scopes=Array(t.length),r=this._scopeMap,o=new Map,a=this.$controller.scope,l=this._forOfBinding,c=this.forOf,h=this.local,u=this._hasDestructuredLocal;for(let d=0;d<i;++d)s[d]=x8(r,o,t[d],c,a,l,h,u);r.clear(),this._scopeMap=o}_normalizeToArray(){const e=this.items;if(jn(e)){this._normalizedItems=e.slice(0);return}const t=[];this._resolver.resolve(e).iterate(e,(i,s)=>{t[s]=i}),this._normalizedItems=t}_activateAllViews(e,t){let i,s,r,o;const{$controller:a,_factory:l,_location:c,_scopes:h}=this,u=t.length,d=this.views=Array(u);for(let f=0;f<u;++f)r=d[f]=l.create().setLocation(c),r.nodes.unlink(),o=h[f],yv(o.overrideContext,f,u),s=r.activate(e??r,a,o),Xn(s)&&(i??(i=[])).push(s);if(i!==void 0)return i.length===1?i[0]:Promise.all(i)}_deactivateAllViews(e){let t,i,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),i=s.deactivate(e??s,a),Xn(i)&&(t??(t=[])).push(i);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_deactivateAndRemoveViewsByKey(e){let t,i,s;const{$controller:r,views:o}=this,a=e.deletedIndices.slice().sort(T8),l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),i=s.deactivate(s,r),Xn(i)&&(t??(t=[])).push(i);for(c=0;l>c;++c)o.splice(a[c]-c,1);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_createAndActivateAndSortViewsByKey(e){let t,i,s,r=0;const{$controller:o,_factory:a,_location:l,views:c,_scopes:h,_oldViews:u}=this,d=e.length;for(;d>r;++r)e[r]===-2&&(s=a.create(),c.splice(r,0,s));if(c.length!==d)throw be(814,[c.length,d]);let f=0;for(r=0;r<e.length;++r)(f=e[r])!==-2&&(c[r]=u[f]);const g=b8(e),m=g.length;let w,v=m-1;for(r=d-1;r>=0;--r)s=c[r],w=c[r+1],s.nodes.link((w==null?void 0:w.nodes)??l),e[r]===-2?(s.setLocation(l),yv(h[r].overrideContext,r,d),i=s.activate(s,o,h[r]),Xn(i)&&(t??(t=[])).push(i)):v<0||m===1||r!==g[v]?(yv(s.scope.overrideContext,r,d),s.nodes.insertBefore(s.location)):(yv(s.scope.overrideContext,r,d),--v);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}dispose(){this.views.forEach(w8),this.views=void 0}accept(e){const{views:t}=this;if(t!==void 0){for(let i=0,s=t.length;i<s;++i)if(t[i].accept(e)===!0)return!0}}}n2.$au={type:ji,name:"repeat",isTemplateController:!0,bindables:["items"]};let TC=16,Ta=new Int32Array(TC),bv=new Int32Array(TC);function b8(n){const e=n.length;e>TC&&(TC=e,Ta=new Int32Array(e),bv=new Int32Array(e));let t=0,i=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(i=n[r],i!==-2){if(o=Ta[t],s=n[o],s!==-2&&s<i){bv[r]=o,Ta[++t]=r;continue}for(a=0,l=t;a<l;)c=a+l>>1,s=n[Ta[c]],s!==-2&&s<i?a=c+1:l=c;s=n[Ta[a]],(i<s||s===-2)&&(a>0&&(bv[r]=Ta[a-1]),Ta[a]=r)}r=++t;const h=new Int32Array(r);for(i=Ta[t-1];t-- >0;)h[t]=i,i=bv[i];for(;r-- >0;)Ta[r]=0;return h}class yH{get $odd(){return!this.$even}get $even(){return this.$index%2===0}get $first(){return this.$index===0}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(e=0,t=1){this.$index=e,this.$length=t}}const yv=(n,e,t)=>{n.$index=e,n.$length=t},y8=Jt("IRepeatableHandlerResolver",n=>n.singleton(C8));class C8{constructor(){this._handlers=ge(r1(S8))}resolve(e){if(CH.handles(e))return CH;if(SH.handles(e))return SH;if(_H.handles(e))return _H;if(RH.handles(e))return RH;if(xH.handles(e))return xH;const t=this._handlers.find(i=>i.handles(e));return t!==void 0?t:_8}}const S8=Jt("IRepeatableHandler"),CH={handles:jn,getObserver:T1,iterate(n,e){const t=n.length;let i=0;for(;i<t;++i)e(n[i],i,n)}},SH={handles:Qf,getObserver:T1,iterate(n,e){let t=0,i;for(i of n.keys())e(i,t++,n)}},_H={handles:_c,getObserver:T1,iterate(n,e){let t=0,i;for(i of n.entries())e(i,t++,n)}},RH={handles:WK,iterate(n,e){let t=0;for(;t<n;++t)e(t,t,n)}},xH={handles:n=>n==null,iterate(){}},_8={handles(n){return!1},iterate(n,e){throw be(777,n)}},R8=(n,e,t,i,s,r)=>{n?Wp(e,t,i,r):t.bindingContext[s]=r},ky=(n,e,t,i,s)=>n?bn(e,t,i,null):t.bindingContext[s],EH=(n,e,t,i,s,r)=>typeof e=="string"?ky(n,t,i,s,r)[e]:bn(e,i,s,null),x8=(n,e,t,i,s,r,o,a)=>{let l=n.get(t);if(l===void 0?l=E8(t,i,s,r,o,a):l instanceof Zn?n.delete(t):l.length===1?(l=l[0],n.delete(t)):l=l.shift(),e.has(t)){const c=e.get(t);c instanceof Zn?e.set(t,[c,l]):c.push(l)}else e.set(t,l);return R8(a,i.declaration,l,r,o,t),l},E8=(n,e,t,i,s,r)=>{if(r){const o=Zn.fromParent(t,new Gk,new yH);Wp(e.declaration,o,i,n)}return Zn.fromParent(t,new Gk(s,n),new yH)},T8=(n,e)=>n-e;class i2{constructor(){this.view=ge(Ks).create().setLocation(ge(rs))}valueChanged(e,t){const i=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(i.isActive&&s!=null)for(r=Zn.fromParent(i.scope,e===void 0?{}:e),a=s.length;a>o;++o)s[o].bind(r)}attaching(e,t){const{$controller:i,value:s}=this,r=Zn.fromParent(i.scope,s===void 0?{}:s);return this.view.activate(e,i,r)}detaching(e,t){return this.view.deactivate(e,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}i2.$au={type:ji,name:"with",isTemplateController:!0,bindables:["value"]};class j1{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this._factory=ge(Ks),this._location=ge(rs)}link(e,t,i,s){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,s=this.$controller;return this.queue(()=>i.activate(e,s,s.scope)),this.queue(()=>this.swap(e,this.value)),this.promise}detaching(e,t){return this.queue(()=>this.view.deactivate(e,this.$controller)),this.promise}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}valueChanged(e,t){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(e){this.queue(()=>this._handleCaseChange(e))}_handleCaseChange(e){const t=e.isMatch(this.value),i=this.activeCases,s=i.length;if(!t)return s>0&&i[0].id===e.id?this._clearActiveCases(null):void 0;if(s>0&&i[0].id<e.id)return;const r=[];let o=e.fallThrough;if(!o)r.push(e);else{const a=this.cases,l=a.indexOf(e);for(let c=l,h=a.length;c<h&&o;c++){const u=a[c];r.push(u),o=u.fallThrough}}return Ge(this._clearActiveCases(null,r),()=>(this.activeCases=r,this._activateCases(null)))}swap(e,t){const i=[];let s=!1;for(const o of this.cases)if((s||o.isMatch(t))&&(i.push(o),s=o.fallThrough),i.length>0&&!s)break;const r=this.defaultCase;return i.length===0&&r!==void 0&&i.push(r),Ge(this.activeCases.length>0?this._clearActiveCases(e,i):void 0,()=>{if(this.activeCases=i,i.length!==0)return this._activateCases(e)})}_activateCases(e){const t=this.$controller;if(!t.isActive)return;const i=this.activeCases,s=i.length;if(s===0)return;const r=t.scope;return s===1?i[0].activate(e,r):ai(...i.map(o=>o.activate(e,r)))}_clearActiveCases(e,t=[]){const i=this.activeCases,s=i.length;if(s!==0){if(s===1){const r=i[0];return t.includes(r)?void 0:(i.length=0,r.deactivate(e))}return Ge(ai(...i.reduce((r,o)=>(t.includes(o)||r.push(o.deactivate(e)),r),[])),()=>{i.length=0})}}queue(e){const t=this.promise;let i;i=this.promise=Ge(Ge(t,e),()=>{this.promise===i&&(this.promise=void 0)})}accept(e){if(this.$controller.accept(e)===!0||this.activeCases.some(t=>t.accept(e)))return!0}}j1.$au={type:ji,name:"switch",isTemplateController:!0,bindables:["value"]};let M8=0;const s2=["value",{name:"fallThrough",mode:jS,set(n){switch(n){case"true":return!0;case"false":return!1;default:return!!n}}}];class z1{constructor(){this.id=++M8,this.fallThrough=!1,this.view=void 0,this._factory=ge(Ks),this._locator=ge(ig),this._location=ge(rs),this._logger=ge(xu).scopeTo(`${this.constructor.name}-#${this.id}`)}link(e,t,i,s){const r=e.parent,o=r==null?void 0:r.viewModel;if(o instanceof j1)this.$switch=o,this.linkToSwitch(o);else throw be(815)}detaching(e,t){return this.deactivate(e)}isMatch(e){this._logger.debug("isMatch()");const t=this.value;return jn(t)?(this._observer===void 0&&(this._observer=this._observeCollection(t)),t.includes(e)):t===e}valueChanged(e,t){var i;jn(e)?((i=this._observer)==null||i.unsubscribe(this),this._observer=this._observeCollection(e)):this._observer!==void 0&&this._observer.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(e??i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(e??t,this.$controller)}dispose(){var e,t;(e=this._observer)==null||e.unsubscribe(this),(t=this.view)==null||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}_observeCollection(e){const t=this._locator.getArrayObserver(e);return t.subscribe(this),t}accept(e){var t;return this.$controller.accept(e)===!0?!0:(t=this.view)==null?void 0:t.accept(e)}}k1({name:"case",bindables:s2,isTemplateController:!0},z1);class r2 extends z1{linkToSwitch(e){if(e.defaultCase!==void 0)throw be(816);e.defaultCase=this}}k1({name:"default-case",bindables:s2,isTemplateController:!0},r2);var o2,a2,l2;class U1{constructor(){this.preSettledTask=null,this.postSettledTask=null,this._factory=ge(Ks),this._location=ge(rs),this._platform=ge(is),this.logger=ge(xu).scopeTo("promise.resolve")}link(e,t,i,s){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,s=this.$controller;return Ge(i.activate(e,s,this.viewScope=Zn.fromParent(s.scope,{})),()=>this.swap(e))}valueChanged(e,t){this.$controller.isActive&&this.swap(null)}swap(e){var h,u;const t=this.value;if(!Xn(t)){this.logger.warn(`The value '${Pu(t)}' is not a promise. No change will be done.`);return}const i=this._platform.domQueue,s=this.fulfilled,r=this.rejected,o=this.pending,a=this.viewScope;let l;const c=()=>{ai(l=(this.preSettledTask=i.queueTask(()=>ai(s==null?void 0:s.deactivate(e),r==null?void 0:r.deactivate(e),o==null?void 0:o.activate(e,a)))).result.catch(d=>{if(!(d instanceof dT))throw d}),t.then(d=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>ai(o==null?void 0:o.deactivate(e),r==null?void 0:r.deactivate(e),s==null?void 0:s.activate(e,a,d)))).result};this.preSettledTask.status===j_?l.then(f):(this.preSettledTask.cancel(),f())},d=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>ai(o==null?void 0:o.deactivate(e),s==null?void 0:s.deactivate(e),r==null?void 0:r.activate(e,a,d)))).result};this.preSettledTask.status===j_?l.then(f):(this.preSettledTask.cancel(),f())}))};((h=this.postSettledTask)==null?void 0:h.status)===j_?this.postSettlePromise.then(c):((u=this.postSettledTask)==null||u.cancel(),c())}detaching(e,t){var i,s;return(i=this.preSettledTask)==null||i.cancel(),(s=this.postSettledTask)==null||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}U1.$au={type:ji,name:"promise",isTemplateController:!0,bindables:["value"]};class c2{constructor(){this.view=void 0,this._factory=ge(Ks),this._location=ge(rs)}link(e,t,i,s){Y1(e).pending=this}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}c2.$au={type:ji,name:"pending",isTemplateController:!0,bindables:{value:{mode:Nn}}};class h2{constructor(){this.view=void 0,this._factory=ge(Ks),this._location=ge(rs)}link(e,t,i,s){Y1(e).fulfilled=this}activate(e,t,i){this.value=i;let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}h2.$au={type:ji,name:"then",isTemplateController:!0,bindables:{value:{mode:Cl}}};class u2{constructor(){this.view=void 0,this._factory=ge(Ks),this._location=ge(rs)}link(e,t,i,s){Y1(e).rejected=this}activate(e,t,i){this.value=i;let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}u2.$au={type:ji,name:"catch",isTemplateController:!0,bindables:{value:{mode:Cl}}};function Y1(n){const e=n.parent,t=e==null?void 0:e.viewModel;if(t instanceof U1)return t;throw be(813)}class _T{"promise.resolve"(e,t){return new Gs(e,t,"promise","bind")}}o2=Symbol.metadata;_T[o2]={[fa]:zc.create([{pattern:"promise.resolve",symbols:""}],_T)};class RT{then(e,t){return new Gs(e,t,"then","from-view")}}a2=Symbol.metadata;RT[a2]={[fa]:zc.create([{pattern:"then",symbols:""}],RT)};class xT{catch(e,t){return new Gs(e,t,"catch","from-view")}}l2=Symbol.metadata;xT[l2]={[fa]:zc.create([{pattern:"catch",symbols:""}],xT)};class d2{constructor(){this._needsApply=!1,this._element=ge(e0),this._platform=ge(is)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this._apply():this._needsApply=!0}attached(){this._needsApply&&(this._needsApply=!1,this._apply()),this._element.addEventListener("focus",this),this._element.addEventListener("blur",this)}detaching(){const e=this._element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){e.type==="focus"?this.value=!0:this._isElFocused||(this.value=!1)}_apply(){const e=this._element,t=this._isElFocused,i=this.value;i&&!t?e.focus():!i&&t&&e.blur()}get _isElFocused(){return this._element===this._platform.document.activeElement}}d2.$au={type:ji,name:"focus",bindables:{value:{mode:iW}}};class f2{constructor(){this.position="beforeend",this.strict=!1;const e=ge(Ks),t=ge(rs),i=ge(is);this._platform=i,this._resolvedTarget=i.document.createElement("div"),(this.view=e.create()).setLocation(this._targetLocation=o9(i)),s8(this.view.nodes,t)}attaching(e){this.callbackContext==null&&(this.callbackContext=this.$controller.scope.bindingContext);const t=this._resolvedTarget=this._getTarget();return this._moveLocation(t,this.position),this._activating(e,t)}detaching(e){return this._deactivating(e,this._resolvedTarget)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this._getTarget();if(this._resolvedTarget===t)return;this._resolvedTarget=t;const i=Ge(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Xn(i)&&i.catch(gT)}positionChanged(){const{$controller:e,_resolvedTarget:t}=this;if(!e.isActive)return;const i=Ge(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Xn(i)&&i.catch(gT)}_activating(e,t){const{activating:i,callbackContext:s,view:r}=this;return Ge(i==null?void 0:i.call(s,t,r),()=>this._activate(e,t))}_activate(e,t){const{$controller:i,view:s}=this;if(e===null)s.nodes.insertBefore(this._targetLocation);else return Ge(s.activate(e??s,i,i.scope),()=>this._activated(t));return this._activated(t)}_activated(e){const{activated:t,callbackContext:i,view:s}=this;return t==null?void 0:t.call(i,e,s)}_deactivating(e,t){const{deactivating:i,callbackContext:s,view:r}=this;return Ge(i==null?void 0:i.call(s,t,r),()=>this._deactivate(e,t))}_deactivate(e,t){const{$controller:i,view:s}=this;if(e===null)s.nodes.remove();else return Ge(s.deactivate(e,i),()=>this._deactivated(t));return this._deactivated(t)}_deactivated(e){const{deactivated:t,callbackContext:i,view:s}=this;return Ge(t==null?void 0:t.call(i,e,s),()=>this._removeLocation())}_getTarget(){const e=this._platform,t=e.document;let i=this.target,s=this.renderContext;if(i===""){if(this.strict)throw be(811);return t.body}if(yt(i)){let r=t;yt(s)&&(s=t.querySelector(s)),s instanceof e.Node&&(r=s),i=r.querySelector(i)}if(i instanceof e.Node)return i;if(i==null){if(this.strict)throw be(812);return t.body}return i}_removeLocation(){this._targetLocation.remove(),this._targetLocation.$start.remove()}_moveLocation(e,t){const i=this._targetLocation,s=i.$start,r=e.parentNode,o=[s,i];switch(t){case"beforeend":wv(e,null,o);break;case"afterbegin":wv(e,e.firstChild,o);break;case"beforebegin":wv(r,e,o);break;case"afterend":wv(r,e.nextSibling,o);break;default:throw be(779,t)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}f2.$au={type:ji,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};let A8;class i0{constructor(){var u,d,f,g;this._parentScope=null,this._outerScope=null,this._attached=!1,this.expose=null,this.slotchange=null,this._subs=new Set,this._observer=null;const e=ge(Ou),t=ge(rs),i=ge(tg),s=ge(Ku),r=this.name=i.data.name,o=(u=i.projections)==null?void 0:u[RW],a=(f=(d=e.instruction)==null?void 0:d.projections)==null?void 0:f[r],l=e.controller.container;let c,h;a==null?(h=l.createChild({inheritParentResources:!0}),c=s.getViewFactory(o??A8??(A8=Rs.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),h),this._hasProjection=!1):(h=l.createChild(),h.useResources(e.parent.controller.container),an(h,Ou,new Qn(void 0,e.parent)),c=s.getViewFactory(a,h),this._hasProjection=!0,this._slotwatchers=((g=l.getAll(c9,!1))==null?void 0:g.filter(m=>m.slotName==="*"||m.slotName===r))??at),this._hasSlotWatcher=(this._slotwatchers??(this._slotwatchers=at)).length>0,this._hdrContext=e,this.view=c.create().setLocation(this._location=t)}get nodes(){const e=[],t=this._location;let i=t.$start.nextSibling;for(;i!=null&&i!==t;)i.nodeType!==8&&e.push(i),i=i.nextSibling;return e}subscribe(e){this._subs.add(e)}unsubscribe(e){this._subs.delete(e)}binding(e,t){var r;for(this._parentScope=t.scope;t.vmKind==="synthetic"&&((r=t.parent)==null?void 0:r.viewModel)instanceof i0;)t=t.parent.parent;const i=t.scope.bindingContext;let s;this._hasProjection&&(s=this._hdrContext.controller.scope.parent,(this._outerScope=Zn.fromParent(s,s.bindingContext)).overrideContext.$host=this.expose??i)}attaching(e,t){return Ge(this.view.activate(e,this.$controller,this._hasProjection?this._outerScope:this._parentScope),()=>{this._hasSlotWatcher&&(this._slotwatchers.forEach(i=>i.watch(this)),this._observe(),this._notifySlotChange(),this._attached=!0)})}detaching(e,t){return this._attached=!1,this._unobserve(),this._slotwatchers.forEach(i=>i.unwatch(this)),this.view.deactivate(e,this.$controller)}exposeChanged(e){this._hasProjection&&this._outerScope!=null&&(this._outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}_observe(){if(this._observer!=null)return;const e=this._location,t=e.parentElement;t!=null&&(this._observer=_W(t,i=>{P8(e,i)&&this._notifySlotChange()})).observe(t,{childList:!0})}_unobserve(){var e;(e=this._observer)==null||e.disconnect(),this._observer=null}_notifySlotChange(){var s;const e=this.nodes,t=new Set(this._subs);let i;this._attached&&((s=this.slotchange)==null||s.call(void 0,this.name,e));for(i of t)i.handleSlotChange(this,e)}}i0.$au={type:ku,name:"au-slot",template:null,containerless:!0,processContent(n,e,t){t.name=n.getAttribute("name")??RW;let i=n.firstChild,s=null;for(;i!==null;)s=i.nextSibling,a9(i)&&i.hasAttribute(l9)&&(console.warn("[DEV:aurelia] detected [au-slot] attribute on a child node",`of an <au-slot> element: "<${i.nodeName} au-slot>".`,"This element will be ignored and removed"),n.removeChild(i)),i=s},bindables:["expose","slotchange"]};const Cv=(n,e)=>n.compareDocumentPosition(e),P8=(n,e)=>{for(const{addedNodes:t,removedNodes:i,nextSibling:s}of e){let r=0,o=t.length,a;for(;r<o;++r)if(a=t[r],Cv(n.$start,a)===4&&Cv(n,a)===2)return!0;if(i.length>0&&s!=null&&Cv(n.$start,s)===4&&Cv(n,s)===2)return!0}};class g2{constructor(){this.scopeBehavior="auto",this._composition=void 0,this.tag=null,this._container=ge(Sw),this.parent=ge(JS),this._host=ge(e0),this._location=ge(rs),this._platform=ge(is),this._rendering=ge(Ku),this._instruction=ge(tg),this._contextFactory=ge(c5(O8)),this._compiler=ge(FS),this._hydrationContext=ge(Ou),this._exprParser=ge(Jf),this._observerLocator=ge(ig)}get composing(){return this._composing}get composition(){return this._composition}attaching(e,t){return this._composing=Ge(this.queue(new TH(this.template,this.component,this.model,void 0),e),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)})}detaching(e){const t=this._composition,i=this._composing;return this._contextFactory.invalidate(),this._composition=this._composing=void 0,Ge(i,()=>t==null?void 0:t.deactivate(e))}propertyChanged(e){var t;if(!(e==="composing"||e==="composition")){if(e==="model"&&this._composition!=null){this._composition.update(this.model);return}if(e==="tag"&&((t=this._composition)==null?void 0:t.controller.vmKind)===lr){console.warn("[DEV:aurelia] Changing tag name of a custom element composition is ignored.");return}this._composing=Ge(this._composing,()=>Ge(this.queue(new TH(this.template,this.component,this.model,e),void 0),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)}))}}queue(e,t){const i=this._contextFactory,s=this._composition;return Ge(i.create(e),r=>i._isCurrent(r)?Ge(this.compose(r),o=>i._isCurrent(r)?Ge(o.activate(t),()=>i._isCurrent(r)?(this._composition=o,Ge(s==null?void 0:s.deactivate(t),()=>r)):Ge(o.controller.deactivate(o.controller,this.$controller),()=>(o.controller.dispose(),r))):(o.controller.dispose(),r)):r)}compose(e){const{_template:t,_component:i,_model:s}=e.change,{_container:r,$controller:o,_location:a,_instruction:l}=this,c=this._getDefinition(this._hydrationContext.controller.container,i),h=r.createChild(),u=this._platform.document.createElement(c==null?this.tag??"div":c.name);a.parentNode.insertBefore(u,a);let d;c==null?d=this.tag==null?jp(u):null:d=c.containerless?jp(u):null;const f=()=>{var w;if(u.remove(),d!=null){let v=d.$start.nextSibling,C=null;for(;v!==null&&v!==d;)C=v.nextSibling,v.remove(),v=C;(w=d.$start)==null||w.remove(),d.remove()}},g=this._createComponentInstance(h,typeof i=="string"?c.Type:i,u,d),m=()=>{const w=l.captures??at;if(c!==null){const v=c.capture,[C,S]=w.reduce((_,R)=>{const M=!(R.target in c.bindables)&&(v===!0||Ht(v)&&!!v(R.target));return _[M?0:1].push(R),_},[[],[]]),x=Us.$el(h,g,u,{projections:l.projections,captures:C},c,d);return this._createSpreadBindings(u,c,S).forEach(_=>x.addBinding(_)),new AH(x,_=>x.activate(_??x,o,o.scope.parent),_=>Ge(x.deactivate(_??x,o),f),_=>{var R;return(R=g.activate)==null?void 0:R.call(g,_)},e)}else{const v=Rs.create({name:yr.generateName(),template:t}),C=this._rendering.getViewFactory(v,h),S=Us.$view(C,o),x=this.scopeBehavior==="auto"?Zn.fromParent(this.parent.scope,g):Zn.create(g);return S.setHost(u),d==null?this._createSpreadBindings(u,v,w).forEach(_=>S.addBinding(_)):S.setLocation(d),new AH(S,_=>S.activate(_??S,o,x),_=>Ge(S.deactivate(_??S,o),f),_=>{var R;return(R=g.activate)==null?void 0:R.call(g,_)},e)}};return"activate"in g?Ge(g.activate(s),()=>m()):m()}_createComponentInstance(e,t,i,s){if(t==null)return new I8;if(typeof t=="object")return t;const r=this._platform;t0(e,i,r),an(e,rs,new Qn("IRenderLocation",s));const o=e.invoke(t);return an(e,t,new Qn("au-compose.component",o)),o}_getDefinition(e,t){if(typeof t=="string"){const s=yr.find(e,t);if(s==null)throw be(806,t);return s}const i=Ht(t)?t:t==null?void 0:t.constructor;return yr.isType(i,void 0)?yr.getDefinition(i,null):null}_createSpreadBindings(e,t,i){const s=new VW(this.$controller,{projections:null,captures:i},this._hydrationContext.parent);return qS.create(s,e,t,this._rendering,this._compiler,this._platform,this._exprParser,this._observerLocator)}}g2.$au={type:ku,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:n=>{if(n==="scoped"||n==="auto")return n;throw be(805,n)}},{name:"composing",mode:Cl},{name:"composition",mode:Cl},"tag"]};class I8{}class O8{constructor(){this.id=0}_isCurrent(e){return e.id===this.id}create(e){return Ge(e.load(),t=>new k8(++this.id,t))}invalidate(){this.id++}}class TH{constructor(e,t,i,s){this._template=e,this._component=t,this._model=i,this._src=s}load(){return Xn(this._template)||Xn(this._component)?Promise.all([this._template,this._component]).then(([e,t])=>new MH(e,t,this._model,this._src)):new MH(this._template,this._component,this._model,this._src)}}class MH{constructor(e,t,i,s){this._template=e,this._component=t,this._model=i,this._src=s}}class k8{constructor(e,t){this.id=e,this.change=t}}class AH{constructor(e,t,i,s,r){this.controller=e,this.start=t,this.stop=i,this.update=s,this.context=r,this.state=0}activate(e){if(this.state!==0)throw be(807,this);return this.state=1,this.start(e)}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw be(808);default:this.state=-1}}}const H8=Jt("ISanitizer",n=>n.singleton(class{sanitize(){throw be(99,"sanitize")}}));class m2{constructor(){this._sanitizer=ge(H8)}toView(e){return e==null?null:this._sanitizer.sanitize(e)}}m2.$au={type:ff,name:"sanitize"};class p2{constructor(){this.el=ge(e0),this.p=ge(is),this._isActive=!1,this._task=null,this.$val="",this.$prio="",this.update=()=>{this._task=null,!!this.value!==this._isToggled&&(this._isToggled===this._base?(this._isToggled=!this._base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this._isToggled=this._base,this.el.style.setProperty("display",this.$val,this.$prio),this.el.getAttribute("style")===""&&this.el.removeAttribute("style")))};const e=ge(tg);this._isToggled=this._base=e.alias!=="hide"}binding(){this._isActive=!0,this.update()}detaching(){var e;this._isActive=!1,(e=this._task)==null||e.cancel(),this._task=null}valueChanged(){this._isActive&&this._task===null&&(this._task=this.p.domQueue.queueTask(this.update))}}p2.$au={type:ji,name:"show",bindables:["value"],aliases:["hide"]};const D8=[f8,v7,W1],N8=[nT,tT,iT,r9],L8=[DV,IV,kV,OV,HV,NV,WV,LV,$V,VV,BV,FV,jV],$8=[pW,dW,fW,gW,wW,vW,mW,m2,EC,t2,n2,i2,j1,z1,r2,U1,c2,h2,u2,_T,RT,xT,ZW,JW,e2,g2,f2,d2,p2,i0],F8=[v9,b9,p9,w9,u9,d9,f9,g9,m9,S9,A9,_9,R9,x9,T9,y9,P9,I9],B8=w2(ia);function w2(n){return{optionsProvider:n,register(e){const t={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return n(t),e.register(hW(GV,t.coercingOptions),qB,...D8,...$8,...N8,...L8,...F8)},customize(e){return w2(e??n)}}}const V8=dc.getOrCreate(globalThis);function W8(){return jc.createContainer().register(Ru.instance(is,V8),B8)}class rp extends h8{constructor(e=W8()){super(e)}static app(e){return new rp().app(e)}static enhance(e){return new rp().enhance(e)}static register(...e){return new rp().register(...e)}app(e){if(yr.isType(e)){const t=yr.getDefinition(e);let i=document.querySelector(t.name);return i===null&&(i=document.body),super.app({host:i,component:e})}return super.app(e)}}const v2="chartjs",ET=`<div>
    <canvas ref="mychart"></canvas>
</div>
`,b2=[],y2={};let nR;function j8(n){nR||(nR=yr.define({name:v2,template:ET,dependencies:b2,bindables:y2})),n.register(nR)}const z8=Object.freeze(Object.defineProperty({__proto__:null,bindables:y2,default:ET,dependencies:b2,name:v2,register:j8,template:ET},Symbol.toStringTag,{value:"Module"}));/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Tw(n){return n+.5|0}const gc=(n,e,t)=>Math.max(Math.min(n,t),e);function Dm(n){return gc(Tw(n*2.55),0,255)}function xc(n){return gc(Tw(n*255),0,255)}function tl(n){return gc(Tw(n/2.55)/100,0,1)}function PH(n){return gc(Tw(n*100),0,100)}const tr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},TT=[..."0123456789ABCDEF"],U8=n=>TT[n&15],Y8=n=>TT[(n&240)>>4]+TT[n&15],Sv=n=>(n&240)>>4===(n&15),G8=n=>Sv(n.r)&&Sv(n.g)&&Sv(n.b)&&Sv(n.a);function K8(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&tr[n[1]]*17,g:255&tr[n[2]]*17,b:255&tr[n[3]]*17,a:e===5?tr[n[4]]*17:255}:(e===7||e===9)&&(t={r:tr[n[1]]<<4|tr[n[2]],g:tr[n[3]]<<4|tr[n[4]],b:tr[n[5]]<<4|tr[n[6]],a:e===9?tr[n[7]]<<4|tr[n[8]]:255})),t}const q8=(n,e)=>n<255?e(n):"";function X8(n){var e=G8(n)?U8:Y8;return n?"#"+e(n.r)+e(n.g)+e(n.b)+q8(n.a,e):void 0}const Q8=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function C2(n,e,t){const i=e*Math.min(t,1-t),s=(r,o=(r+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Z8(n,e,t){const i=(s,r=(s+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function J8(n,e,t){const i=C2(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function eq(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function G1(n){const t=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=eq(t,i,s,h,r),l=l*60+.5),[l|0,c||0,a]}function K1(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(xc)}function q1(n,e,t){return K1(C2,n,e,t)}function tq(n,e,t){return K1(J8,n,e,t)}function nq(n,e,t){return K1(Z8,n,e,t)}function S2(n){return(n%360+360)%360}function iq(n){const e=Q8.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Dm(+e[5]):xc(+e[5]));const s=S2(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=tq(s,r,o):e[1]==="hsv"?i=nq(s,r,o):i=q1(s,r,o),{r:i[0],g:i[1],b:i[2],a:t}}function sq(n,e){var t=G1(n);t[0]=S2(t[0]+e),t=q1(t),n.r=t[0],n.g=t[1],n.b=t[2]}function rq(n){if(!n)return;const e=G1(n),t=e[0],i=PH(e[1]),s=PH(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${tl(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const IH={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},OH={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function oq(){const n={},e=Object.keys(OH),t=Object.keys(IH);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<t.length;s++)r=t[s],a=a.replace(r,IH[r]);r=parseInt(OH[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let _v;function aq(n){_v||(_v=oq(),_v.transparent=[0,0,0,0]);const e=_v[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const lq=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function cq(n){const e=lq.exec(n);let t=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?Dm(o):gc(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Dm(i):gc(i,0,255)),s=255&(e[4]?Dm(s):gc(s,0,255)),r=255&(e[6]?Dm(r):gc(r,0,255)),{r:i,g:s,b:r,a:t}}}function hq(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${tl(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const iR=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,gd=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function uq(n,e,t){const i=gd(tl(n.r)),s=gd(tl(n.g)),r=gd(tl(n.b));return{r:xc(iR(i+t*(gd(tl(e.r))-i))),g:xc(iR(s+t*(gd(tl(e.g))-s))),b:xc(iR(r+t*(gd(tl(e.b))-r))),a:n.a+t*(e.a-n.a)}}function Rv(n,e,t){if(n){let i=G1(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=q1(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function _2(n,e){return n&&Object.assign(e||{},n)}function kH(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=xc(n[3]))):(e=_2(n,{r:0,g:0,b:0,a:1}),e.a=xc(e.a)),e}function dq(n){return n.charAt(0)==="r"?cq(n):iq(n)}class Up{constructor(e){if(e instanceof Up)return e;const t=typeof e;let i;t==="object"?i=kH(e):t==="string"&&(i=K8(e)||aq(e)||dq(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=_2(this._rgb);return e&&(e.a=tl(e.a)),e}set rgb(e){this._rgb=kH(e)}rgbString(){return this._valid?hq(this._rgb):void 0}hexString(){return this._valid?X8(this._rgb):void 0}hslString(){return this._valid?rq(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=uq(this._rgb,e._rgb,t)),this}clone(){return new Up(this.rgb)}alpha(e){return this._rgb.a=xc(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Tw(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Rv(this._rgb,2,e),this}darken(e){return Rv(this._rgb,2,-e),this}saturate(e){return Rv(this._rgb,1,e),this}desaturate(e){return Rv(this._rgb,1,-e),this}rotate(e){return sq(this._rgb,e),this}}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Ma(){}const fq=(()=>{let n=0;return()=>n++})();function _t(n){return n===null||typeof n>"u"}function pn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function gt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ln(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ks(n,e){return Ln(n)?n:e}function Ze(n,e){return typeof n>"u"?e:n}const gq=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,R2=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function tn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Vt(n,e,t,i){let s,r,o;if(pn(n))for(r=n.length,s=0;s<r;s++)e.call(t,n[s],s);else if(gt(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)e.call(t,n[o[s]],o[s])}function MC(n,e){let t,i,s,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function AC(n){if(pn(n))return n.map(AC);if(gt(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=AC(n[t[s]]);return e}return n}function x2(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function mq(n,e,t,i){if(!x2(n))return;const s=e[n],r=t[n];gt(s)&&gt(r)?Yp(s,r,i):e[n]=AC(r)}function Yp(n,e,t){const i=pn(e)?e:[e],s=i.length;if(!gt(n))return n;t=t||{};const r=t.merger||mq;let o;for(let a=0;a<s;++a){if(o=i[a],!gt(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],n,o,t)}return n}function op(n,e){return Yp(n,e,{merger:pq})}function pq(n,e,t){if(!x2(n))return;const i=e[n],s=t[n];gt(i)&&gt(s)?op(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=AC(s))}const HH={"":n=>n,x:n=>n.x,y:n=>n.y};function wq(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function vq(n){const e=wq(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Dc(n,e){return(HH[e]||(HH[e]=vq(e)))(n)}function X1(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Gp=n=>typeof n<"u",Nc=n=>typeof n=="function",DH=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function bq(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const cn=Math.PI,ln=2*cn,yq=ln+cn,PC=Number.POSITIVE_INFINITY,Cq=cn/180,Wn=cn/2,rh=cn/4,NH=cn*2/3,mc=Math.log10,sa=Math.sign;function ap(n,e,t){return Math.abs(n-e)<t}function LH(n){const e=Math.round(n);n=ap(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(mc(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Sq(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}function Wf(n){return!isNaN(parseFloat(n))&&isFinite(n)}function _q(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function E2(n,e,t){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Jr(n){return n*(cn/180)}function Q1(n){return n*(180/cn)}function $H(n){if(!Ln(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function T2(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*cn&&(r+=ln),{angle:r,distance:s}}function MT(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Rq(n,e){return(n-e+yq)%ln-cn}function Bs(n){return(n%ln+ln)%ln}function Kp(n,e,t,i){const s=Bs(n),r=Bs(e),o=Bs(t),a=Bs(r-s),l=Bs(o-s),c=Bs(s-r),h=Bs(s-o);return s===r||s===o||i&&r===o||a>l&&c<h}function vi(n,e,t){return Math.max(e,Math.min(t,n))}function xq(n){return vi(n,-32768,32767)}function rl(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Z1(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,t(r)?s=r:i=r;return{lo:s,hi:i}}const ol=(n,e,t,i)=>Z1(n,t,i?s=>{const r=n[s][e];return r<t||r===t&&n[s+1][e]===t}:s=>n[s][e]<t),Eq=(n,e,t)=>Z1(n,t,i=>n[i][e]>=t);function Tq(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const M2=["push","pop","shift","splice","unshift"];function Mq(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),M2.forEach(t=>{const i="_onData"+X1(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function FH(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(M2.forEach(r=>{delete n[r]}),delete n._chartjs)}function A2(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const P2=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function I2(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,P2.call(window,()=>{i=!1,n.apply(e,t)}))}}function Aq(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const J1=n=>n==="start"?"left":n==="end"?"right":"center",Ni=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,Pq=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function O2(n,e,t){const i=e.length;let s=0,r=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:h,minDefined:u,maxDefined:d}=o.getUserBounds();u&&(s=vi(Math.min(ol(a,l,c).lo,t?i:ol(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?r=vi(Math.max(ol(a,o.axis,h,!0).hi+1,t?0:ol(e,l,o.getPixelForValue(h),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function k2(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),r}const xv=n=>n===0||n===1,BH=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*ln/t)),VH=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*ln/t)+1,lp={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Wn)+1,easeOutSine:n=>Math.sin(n*Wn),easeInOutSine:n=>-.5*(Math.cos(cn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>xv(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>xv(n)?n:BH(n,.075,.3),easeOutElastic:n=>xv(n)?n:VH(n,.075,.3),easeInOutElastic(n){return xv(n)?n:n<.5?.5*BH(n*2,.1125,.45):.5+.5*VH(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-lp.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?lp.easeInBounce(n*2)*.5:lp.easeOutBounce(n*2-1)*.5+.5};function eA(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function WH(n){return eA(n)?n:new Up(n)}function sR(n){return eA(n)?n:new Up(n).saturate(.5).darken(.1).hexString()}const Iq=["x","y","borderWidth","radius","tension"],Oq=["color","borderColor","backgroundColor"];function kq(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Oq},numbers:{type:"number",properties:Iq}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Hq(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const jH=new Map;function Dq(n,e){e=e||{};const t=n+JSON.stringify(e);let i=jH.get(t);return i||(i=new Intl.NumberFormat(n,e),jH.set(t,i)),i}function Mw(n,e,t){return Dq(e,t).format(n)}const H2={values(n){return pn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=Nq(n,t)}const o=mc(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Mw(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(mc(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?H2.numeric.call(this,n,e,t):""}};function Nq(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var s0={formatters:H2};function Lq(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:s0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Hu=Object.create(null),AT=Object.create(null);function cp(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const r=t[i];n=n[r]||(n[r]=Object.create(null))}return n}function rR(n,e,t){return typeof e=="string"?Yp(cp(n,e),t):Yp(cp(n,""),e)}class $q{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>sR(s.backgroundColor),this.hoverBorderColor=(i,s)=>sR(s.borderColor),this.hoverColor=(i,s)=>sR(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return rR(this,e,t)}get(e){return cp(this,e)}describe(e,t){return rR(AT,e,t)}override(e,t){return rR(Hu,e,t)}route(e,t,i,s){const r=cp(this,e),o=cp(this,i),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[s];return gt(l)?Object.assign({},c,l):Ze(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var vn=new $q({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[kq,Hq,Lq]);function Fq(n){return!n||_t(n.size)||_t(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function IC(n,e,t,i,s){let r=e[s];return r||(r=e[s]=n.measureText(s).width,t.push(s)),r>i&&(i=r),i}function Bq(n,e,t,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,h,u,d;for(l=0;l<a;l++)if(u=t[l],u!=null&&!pn(u))o=IC(n,s,r,o,u);else if(pn(u))for(c=0,h=u.length;c<h;c++)d=u[c],d!=null&&!pn(d)&&(o=IC(n,s,r,o,d));n.restore();const f=r.length/2;if(f>t.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function oh(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function zH(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function PT(n,e,t,i){D2(n,e,t,i,null)}function D2(n,e,t,i,s){let r,o,a,l,c,h,u,d;const f=e.pointStyle,g=e.rotation,m=e.radius;let w=(g||0)*Cq;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(w),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),f){default:s?n.ellipse(t,i,s/2,m,0,0,ln):n.arc(t,i,m,0,ln),n.closePath();break;case"triangle":h=s?s/2:m,n.moveTo(t+Math.sin(w)*h,i-Math.cos(w)*m),w+=NH,n.lineTo(t+Math.sin(w)*h,i-Math.cos(w)*m),w+=NH,n.lineTo(t+Math.sin(w)*h,i-Math.cos(w)*m),n.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(w+rh)*l,u=Math.cos(w+rh)*(s?s/2-c:l),a=Math.sin(w+rh)*l,d=Math.sin(w+rh)*(s?s/2-c:l),n.arc(t-u,i-a,c,w-cn,w-Wn),n.arc(t+d,i-o,c,w-Wn,w),n.arc(t+u,i+a,c,w,w+Wn),n.arc(t-d,i+o,c,w+Wn,w+cn),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,h=s?s/2:l,n.rect(t-h,i-l,2*h,2*l);break}w+=rh;case"rectRot":u=Math.cos(w)*(s?s/2:m),o=Math.cos(w)*m,a=Math.sin(w)*m,d=Math.sin(w)*(s?s/2:m),n.moveTo(t-u,i-a),n.lineTo(t+d,i-o),n.lineTo(t+u,i+a),n.lineTo(t-d,i+o),n.closePath();break;case"crossRot":w+=rh;case"cross":u=Math.cos(w)*(s?s/2:m),o=Math.cos(w)*m,a=Math.sin(w)*m,d=Math.sin(w)*(s?s/2:m),n.moveTo(t-u,i-a),n.lineTo(t+u,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"star":u=Math.cos(w)*(s?s/2:m),o=Math.cos(w)*m,a=Math.sin(w)*m,d=Math.sin(w)*(s?s/2:m),n.moveTo(t-u,i-a),n.lineTo(t+u,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o),w+=rh,u=Math.cos(w)*(s?s/2:m),o=Math.cos(w)*m,a=Math.sin(w)*m,d=Math.sin(w)*(s?s/2:m),n.moveTo(t-u,i-a),n.lineTo(t+u,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"line":o=s?s/2:Math.cos(w)*m,a=Math.sin(w)*m,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(w)*(s?s/2:m),i+Math.sin(w)*m);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function al(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function r0(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function o0(n){n.restore()}function Vq(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Wq(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function jq(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),_t(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function zq(n,e,t,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,c=t+r.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function Uq(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Du(n,e,t,i,s,r={}){const o=pn(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,jq(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Uq(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),_t(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,t,i,r.maxWidth)),n.fillText(c,t,i,r.maxWidth),zq(n,t,i,c,r),i+=Number(s.lineHeight);n.restore()}function qp(n,e){const{x:t,y:i,w:s,h:r,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*cn,cn,!0),n.lineTo(t,i+r-o.bottomLeft),n.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,cn,Wn,!0),n.lineTo(t+s-o.bottomRight,i+r),n.arc(t+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Wn,0,!0),n.lineTo(t+s,i+o.topRight),n.arc(t+s-o.topRight,i+o.topRight,o.topRight,0,-Wn,!0),n.lineTo(t+o.topLeft,i)}const Yq=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Gq=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Kq(n,e){const t=(""+n).match(Yq);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const qq=n=>+n||0;function tA(n,e){const t={},i=gt(e),s=i?Object.keys(e):e,r=gt(n)?i?o=>Ze(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of s)t[o]=qq(r(o));return t}function N2(n){return tA(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Cu(n){return tA(n,["topLeft","topRight","bottomLeft","bottomRight"])}function zi(n){const e=N2(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ci(n,e){n=n||{},e=e||vn.font;let t=Ze(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Ze(n.style,e.style);i&&!(""+i).match(Gq)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Ze(n.family,e.family),lineHeight:Kq(Ze(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Ze(n.weight,e.weight),string:""};return s.string=Fq(s),s}function Nm(n,e,t,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function Xq(n,e,t){const{min:i,max:s}=n,r=R2(e,(s-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Xc(n,e){return Object.assign(Object.create(n),e)}function nA(n,e=[""],t,i,s=()=>n[0]){const r=t||n;typeof i>"u"&&(i=B2("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>nA([a,...n],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return $2(a,l,()=>sX(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return YH(a).includes(l)},ownKeys(a){return YH(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function jf(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:L2(n,i),setContext:r=>jf(n,r,t,i),override:r=>jf(n.override(r),e,t,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return $2(r,o,()=>Zq(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function L2(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:Nc(t)?t:()=>t,isIndexable:Nc(i)?i:()=>i}}const Qq=(n,e)=>n?n+X1(e):e,iA=(n,e)=>gt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function $2(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function Zq(n,e,t){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[e];return Nc(a)&&o.isScriptable(e)&&(a=Jq(e,a,n,t)),pn(a)&&a.length&&(a=eX(e,a,n,o.isIndexable)),iA(e,a)&&(a=jf(a,s,r&&r[e],o)),a}function Jq(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(r,o||i);return a.delete(n),iA(n,l)&&(l=sA(s._scopes,s,n,l)),l}function eX(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=t;if(typeof r.index<"u"&&i(n))return e[r.index%e.length];if(gt(e[0])){const l=e,c=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const u=sA(c,s,n,h);e.push(jf(u,r,o&&o[n],a))}}return e}function F2(n,e,t){return Nc(n)?n(e,t):n}const tX=(n,e)=>n===!0?e:typeof n=="string"?Dc(e,n):void 0;function nX(n,e,t,i,s){for(const r of e){const o=tX(t,r);if(o){n.add(o);const a=F2(o._fallback,t,s);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function sA(n,e,t,i){const s=e._rootScopes,r=F2(e._fallback,t,i),o=[...n,...s],a=new Set;a.add(i);let l=UH(a,o,t,r||t,i);return l===null||typeof r<"u"&&r!==t&&(l=UH(a,o,r,l,i),l===null)?!1:nA(Array.from(a),[""],s,r,()=>iX(e,t,i))}function UH(n,e,t,i,s){for(;t;)t=nX(n,e,t,i,s);return t}function iX(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return pn(s)&&gt(t)?t:s||{}}function sX(n,e,t,i){let s;for(const r of e)if(s=B2(Qq(r,n),t),typeof s<"u")return iA(n,s)?sA(t,i,n,s):s}function B2(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function YH(n){let e=n._keys;return e||(e=n._keys=rX(n._scopes)),e}function rX(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function V2(n,e,t,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+t,h=e[c],o[a]={r:s.parse(Dc(h,r),c)};return o}const oX=Number.EPSILON||1e-14,zf=(n,e)=>e<n.length&&!n[e].skip&&n[e],W2=n=>n==="x"?"y":"x";function aX(n,e,t,i){const s=n.skip?e:n,r=e,o=t.skip?e:t,a=MT(r,s),l=MT(o,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=i*c,d=i*h;return{previous:{x:r.x-u*(o.x-s.x),y:r.y-u*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function lX(n,e,t){const i=n.length;let s,r,o,a,l,c=zf(n,0);for(let h=0;h<i-1;++h)if(l=c,c=zf(n,h+1),!(!l||!c)){if(ap(e[h],0,oX)){t[h]=t[h+1]=0;continue}s=t[h]/e[h],r=t[h+1]/e[h],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[h]=s*o*e[h],t[h+1]=r*o*e[h])}}function cX(n,e,t="x"){const i=W2(t),s=n.length;let r,o,a,l=zf(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=zf(n,c+1),!a)continue;const h=a[t],u=a[i];o&&(r=(h-o[t])/3,a[`cp1${t}`]=h-r,a[`cp1${i}`]=u-r*e[c]),l&&(r=(l[t]-h)/3,a[`cp2${t}`]=h+r,a[`cp2${i}`]=u+r*e[c])}}function hX(n,e="x"){const t=W2(e),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=zf(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=zf(n,o+1),!!l){if(c){const h=c[e]-l[e];s[o]=h!==0?(c[t]-l[t])/h:0}r[o]=a?c?sa(s[o-1])!==sa(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}lX(n,s,r),cX(n,r,e)}function Ev(n,e,t){return Math.max(Math.min(n,t),e)}function uX(n,e){let t,i,s,r,o,a=al(n[0],e);for(t=0,i=n.length;t<i;++t)o=r,r=a,a=t<i-1&&al(n[t+1],e),r&&(s=n[t],o&&(s.cp1x=Ev(s.cp1x,e.left,e.right),s.cp1y=Ev(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Ev(s.cp2x,e.left,e.right),s.cp2y=Ev(s.cp2y,e.top,e.bottom)))}function dX(n,e,t,i,s){let r,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")hX(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=aX(c,a,n[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&uX(n,t)}function rA(){return typeof window<"u"&&typeof document<"u"}function oA(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function OC(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const a0=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function fX(n,e){return a0(n).getPropertyValue(e)}const gX=["top","right","bottom","left"];function Su(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=gX[s];i[r]=parseFloat(n[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const mX=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function pX(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(mX(s,r,n.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Zh(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=a0(t),r=s.boxSizing==="border-box",o=Su(s,"padding"),a=Su(s,"border","width"),{x:l,y:c,box:h}=pX(n,t),u=o.left+(h&&a.left),d=o.top+(h&&a.top);let{width:f,height:g}=e;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-u)/f*t.width/i),y:Math.round((c-d)/g*t.height/i)}}function wX(n,e,t){let i,s;if(e===void 0||t===void 0){const r=n&&oA(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const o=r.getBoundingClientRect(),a=a0(r),l=Su(a,"border","width"),c=Su(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=OC(a.maxWidth,r,"clientWidth"),s=OC(a.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:i||PC,maxHeight:s||PC}}const Tv=n=>Math.round(n*10)/10;function vX(n,e,t,i){const s=a0(n),r=Su(s,"margin"),o=OC(s.maxWidth,n,"clientWidth")||PC,a=OC(s.maxHeight,n,"clientHeight")||PC,l=wX(n,e,t);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const d=Su(s,"border","width"),f=Su(s,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-r.width),h=Math.max(0,i?c/i:h-r.height),c=Tv(Math.min(c,o,l.maxWidth)),h=Tv(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Tv(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=Tv(Math.floor(h*i))),{width:c,height:h}}function GH(n,e,t){const i=e||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const bX=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};rA()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function KH(n,e){const t=fX(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Jh(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function yX(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function CX(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=Jh(n,s,t),a=Jh(s,r,t),l=Jh(r,e,t),c=Jh(o,a,t),h=Jh(a,l,t);return Jh(c,h,t)}const SX=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},_X=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Mf(n,e,t){return n?SX(e,t):_X()}function j2(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function z2(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function U2(n){return n==="angle"?{between:Kp,compare:Rq,normalize:Bs}:{between:rl,compare:(e,t)=>e-t,normalize:e=>e}}function qH({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function RX(n,e,t){const{property:i,start:s,end:r}=t,{between:o,normalize:a}=U2(i),l=e.length;let{start:c,end:h,loop:u}=n,d,f;if(u){for(c+=l,h+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),s,r);++d)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:u,style:n.style}}function Y2(n,e,t){if(!t)return[n];const{property:i,start:s,end:r}=t,o=e.length,{compare:a,between:l,normalize:c}=U2(i),{start:h,end:u,loop:d,style:f}=RX(n,e,t),g=[];let m=!1,w=null,v,C,S;const x=()=>l(s,S,v)&&a(s,S)!==0,_=()=>a(r,v)===0||l(r,S,v),R=()=>m||x(),M=()=>!m||_();for(let O=h,P=h;O<=u;++O)C=e[O%o],!C.skip&&(v=c(C[i]),v!==S&&(m=l(v,s,r),w===null&&R()&&(w=a(v,s)===0?O:P),w!==null&&M()&&(g.push(qH({start:w,end:O,loop:d,count:o,style:f})),w=null),P=O,S=v));return w!==null&&g.push(qH({start:w,end:u,loop:d,count:o,style:f})),g}function G2(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const r=Y2(i[s],n.points,e);r.length&&t.push(...r)}return t}function xX(n,e,t,i){let s=0,r=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(r+=s);r>s&&n[r%e].skip;)r--;return r%=e,{start:s,end:r}}function EX(n,e,t,i){const s=n.length,r=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function TX(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=xX(t,s,r,i);if(i===!0)return XH(n,[{start:o,end:a,loop:r}],t,e);const l=a<o?a+s:a,c=!!n._fullLoop&&o===0&&a===s-1;return XH(n,EX(t,o,l,c),t,e)}function XH(n,e,t,i){return!i||!i.setContext||!t?e:MX(n,e,t,i)}function MX(n,e,t,i){const s=n._chart.getContext(),r=QH(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let h=r,u=e[0].start,d=u;function f(g,m,w,v){const C=a?-1:1;if(g!==m){for(g+=l;t[g%l].skip;)g-=C;for(;t[m%l].skip;)m+=C;g%l!==m%l&&(c.push({start:g%l,end:m%l,loop:w,style:v}),h=v,u=m%l)}}for(const g of e){u=a?u:g.start;let m=t[u%l],w;for(d=u+1;d<=g.end;d++){const v=t[d%l];w=QH(i.setContext(Xc(s,{type:"segment",p0:m,p1:v,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),AX(w,h)&&f(u,d-1,g.loop,h),m=v,h=w}u<d-1&&f(u,d-1,g.loop,h)}return c}function QH(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function AX(n,e){if(!e)return!1;const t=[],i=function(s,r){return eA(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class PX{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const r=t.listeners[s],o=t.duration;r.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=P2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var za=new PX;const ZH="transparent",IX={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=WH(n||ZH),s=i.valid&&WH(e||ZH);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class OX{constructor(e,t,i,s){const r=t[i];s=Nm([e.to,s,r,e.from]);const o=Nm([e.from,r,s]);this._active=!0,this._fn=e.fn||IX[e.type||typeof o],this._easing=lp[e.easing]||lp.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Nm([e.to,t,s,e.from]),this._from=Nm([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<i),!this._active){this._target[s]=a,this._notify(!0);return}if(t<0){this._target[s]=r;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class K2{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!gt(e))return;const t=Object.keys(vn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!gt(r))return;const o={};for(const a of t)o[a]=r[a];(pn(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,s=HX(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&kX(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,t));continue}const h=t[c];let u=r[c];const d=i.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){e[c]=h;continue}r[c]=u=new OX(d,e,c,h),s.push(u)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return za.add(this._chart,i),!0}}function kX(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function HX(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function JH(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function DX(n,e,t){if(t===!1)return!1;const i=JH(n,t),s=JH(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function NX(n){let e,t,i,s;return gt(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function q2(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)t.push(i[s].index);return t}function eD(n,e,t,i={}){const s=n.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===t){if(h=!0,i.all)continue;break}c=n.values[l],Ln(c)&&(r||e===0||sa(e)===sa(c))&&(e+=c)}return!h&&!i.all?0:e}function LX(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[r]:n[h]};return a}function oR(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function $X(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function FX(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function BX(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function tD(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function nD(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,h=$X(r,o,i),u=e.length;let d;for(let f=0;f<u;++f){const g=e[f],{[l]:m,[c]:w}=g,v=g._stacks||(g._stacks={});d=v[c]=BX(s,h,m),d[a]=w,d._top=tD(d,o,!0,i.type),d._bottom=tD(d,o,!1,i.type);const C=d._visualValues||(d._visualValues={});C[a]=w}}function aR(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function VX(n,e){return Xc(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function WX(n,e,t){return Xc(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function xg(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][t]===void 0)return;delete r[i][t],r[i]._visualValues!==void 0&&r[i]._visualValues[t]!==void 0&&delete r[i]._visualValues[t]}}}const lR=n=>n==="reset"||n==="none",iD=(n,e)=>e?n:Object.assign({},n),jX=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:q2(t,!0),values:null};class uo{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=oR(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&xg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(u,d,f,g)=>u==="x"?d:u==="r"?g:f,r=t.xAxisID=Ze(i.xAxisID,aR(e,"x")),o=t.yAxisID=Ze(i.yAxisID,aR(e,"y")),a=t.rAxisID=Ze(i.rAxisID,aR(e,"r")),l=t.indexAxis,c=t.iAxisID=s(l,r,o,a),h=t.vAxisID=s(l,o,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&FH(this._data,this),e._stacked&&xg(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(gt(t)){const s=this._cachedMeta;this._data=LX(t,s)}else if(i!==t){if(i){FH(i,this);const s=this._cachedMeta;xg(s),s._parsed=[]}t&&Object.isExtensible(t)&&Mq(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=oR(t.vScale,t),t.stack!==i.stack&&(s=!0,xg(t),t.stack=i.stack),this._resyncElements(e),(s||r!==t._stacked)&&(nD(this,t._parsed),t._stacked=oR(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&t===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,u,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{pn(s[e])?d=this.parseArrayData(i,s,e,t):gt(s[e])?d=this.parseObjectData(i,s,e,t):d=this.parsePrimitiveData(i,s,e,t);const f=()=>u[a]===null||c&&u[a]<c[a];for(h=0;h<t;++h)i._parsed[h+e]=u=d[h],l&&(f()&&(l=!1),c=u);i._sorted=l}o&&nD(this,d)}parsePrimitiveData(e,t,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,u=new Array(s);let d,f,g;for(d=0,f=s;d<f;++d)g=d+i,u[d]={[a]:h||r.parse(c[g],g),[l]:o.parse(t[g],g)};return u}parseArrayData(e,t,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,h,u;for(l=0,c=s;l<c;++l)h=l+i,u=t[h],a[l]={x:r.parse(u[0],h),y:o.parse(u[1],h)};return a}parseObjectData(e,t,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,u,d,f;for(h=0,u=s;h<u;++h)d=h+i,f=t[d],c[h]={x:r.parse(Dc(f,a),d),y:o.parse(Dc(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,r=this._cachedMeta,o=t[e.axis],a={keys:q2(s,!0),values:t._stacks[e.axis]._visualValues};return eD(a,o,r.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const r=i[t.axis];let o=r===null?NaN:r;const a=s&&i._stacks[t.axis];s&&a&&(s.values=a,o=eD(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=jX(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=FX(a);let d,f;function g(){f=s[d];const m=f[a.axis];return!Ln(f[e.axis])||h>m||u<m}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=t.length;s<r;++s)o=t[s][e.axis],Ln(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=NX(Ze(this.options.clip,DX(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],r=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,r,a,l),h=a;h<a+l;++h){const u=s[h];u.hidden||(u.active&&c?o.push(u):u.draw(e,r))}for(h=0;h<o.length;++h)o[h].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=WX(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=VX(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",r=this._cachedDataOpts,o=e+"-"+t,a=r[o],l=this.enableOptionSharing&&Gp(i);if(a)return iD(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),u=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),h),f=Object.keys(vn.elements[e]),g=()=>this.getContext(i,s,t),m=c.resolveNamedOptions(d,f,g,u);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(iD(m,l))),m}_resolveAnimations(e,t,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,t),d=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(d,this.getContext(e,i,t))}const c=new K2(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||lR(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:o}}updateElement(e,t,i,s){lR(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!lR(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=t.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t,i=!0){const s=this._cachedMeta,r=s.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&xg(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}uo.defaults={};uo.datasetElementType=null;uo.dataElementType=null;function zX(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=t.length;s<r;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=A2(i.sort((s,r)=>s-r))}return n._cache.$bar}function UX(n){const e=n.iScale,t=zX(e,n.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Gp(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=t.length;s<r;++s)o=e.getPixelForValue(t[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function YX(n,e,t,i){const s=t.barThickness;let r,o;return _t(s)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[n]-r/2}}function GX(n,e,t,i){const s=e.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=t.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function KX(n,e,t,i){const s=t.parse(n[0],i),r=t.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function X2(n,e,t,i){return pn(n)?KX(n,e,t,i):e[t.axis]=t.parse(n,i),e}function sD(n,e,t,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let c,h,u,d;for(c=t,h=t+i;c<h;++c)d=e[c],u={},u[s.axis]=a||s.parse(o[c],c),l.push(X2(d,u,r,c));return l}function cR(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function qX(n,e,t){return n!==0?sa(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function XX(n){let e,t,i,s,r;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:t,end:i,reverse:e,top:s,bottom:r}}function QX(n,e,t,i){let s=e.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=XX(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=c:(t._bottom||0)===i?s=h:(r[rD(h,o,a,l)]=!0,s=c)),r[rD(s,o,a,l)]=!0,n.borderSkipped=r}function rD(n,e,t,i){return i?(n=ZX(n,e,t),n=oD(n,t,e)):n=oD(n,e,t),n}function ZX(n,e,t){return n===e?t:n===t?e:n}function oD(n,e,t){return n==="start"?e:n==="end"?t:n}function JX(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class l0 extends uo{parsePrimitiveData(e,t,i,s){return sD(e,t,i,s)}parseArrayData(e,t,i,s){return sD(e,t,i,s)}parseObjectData(e,t,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,u=[];let d,f,g,m;for(d=i,f=i+s;d<f;++d)m=t[d],g={},g[r.axis]=r.parse(Dc(m,c),d),u.push(X2(Dc(m,h),g,o,d));return u}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);const r=i._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:s}=t,r=this.getParsed(e),o=r._custom,a=cR(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,s);for(let f=t;f<t+i;f++){const g=this.getParsed(f),m=r||_t(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),w=this._calculateBarIndexPixels(f,h),v=(g._stacks||{})[a.axis],C={horizontal:c,base:m.base,enableBorderRadius:!v||cR(g._custom)||o===v._top||o===v._bottom,x:c?m.head:w.center,y:c?w.center:m.head,height:c?w.size:Math.abs(m.size),width:c?Math.abs(m.size):w.size};d&&(C.options=u||this.resolveDataElementOptions(f,e[f].active?"active":s));const S=C.options||e[f].options;QX(C,S,v,o),JX(C,S,h.ratio),this.updateElement(e[f],f,C,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[i.axis],c=h=>{const u=h._parsed.find(f=>f[i.axis]===l),d=u&&u[h.vScale.axis];if(_t(d)||isNaN(d))return!0};for(const h of s)if(!(t!==void 0&&c(h))&&((r===!1||o.indexOf(h.stack)===-1||r===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const s=this._getStacks(e,i),r=t!==void 0?s.indexOf(t):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,s=[];let r,o;for(r=0,o=t.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||UX(t),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,h=cR(c);let u=l[t.axis],d=0,f=i?this.applyStack(t,l,i):u,g,m;f!==u&&(d=f-u,f=u),h&&(u=c.barStart,f=c.barEnd-c.barStart,u!==0&&sa(u)!==sa(c.barEnd)&&(d=0),d+=u);const w=!_t(r)&&!h?r:d;let v=t.getPixelForValue(w);if(this.chart.getDataVisibility(e)?g=t.getPixelForValue(d+f):g=v,m=g-v,Math.abs(m)<o){m=qX(m,t,a)*o,u===a&&(v-=m/2);const C=t.getPixelForDecimal(0),S=t.getPixelForDecimal(1),x=Math.min(C,S),_=Math.max(C,S);v=Math.max(Math.min(v,_),x),g=v+m,i&&!h&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(g)-t.getValueForPixel(v))}if(v===t.getPixelForValue(a)){const C=sa(m)*t.getLineWidthForValue(a)/2;v+=C,m-=C}return{size:m,base:v,head:g,center:g+m/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,r=s.skipNull,o=Ze(s.maxBarThickness,1/0);let a,l;if(t.grouped){const c=r?this._getStackCount(e):t.stackCount,h=s.barThickness==="flex"?GX(e,t,s,c):YX(e,t,s,c),u=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=h.start+h.chunk*u+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[t.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}l0.id="bar";l0.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};l0.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class c0 extends uo{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,s){const r=super.parsePrimitiveData(e,t,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,t,i,s){const r=super.parseArrayData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=Ze(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,t,i,s){const r=super.parseObjectData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=Ze(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,s),h=o.axis,u=a.axis;for(let d=t;d<t+i;d++){const f=e[d],g=!r&&this.getParsed(d),m={},w=m[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(g[h]),v=m[u]=r?a.getBasePixel():a.getPixelForValue(g[u]);m.skip=isNaN(w)||isNaN(v),c&&(m.options=l||this.resolveDataElementOptions(d,f.active?"active":s),r&&(m.options.radius=0)),this.updateElement(f,d,m,s)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return t!=="active"&&(s.radius=0),s.radius+=Ze(i&&i._custom,r),s}}c0.id="bubble";c0.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};c0.overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};function eQ(n,e,t){let i=1,s=1,r=0,o=0;if(e<ln){const a=n,l=a+e,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(S,x,_)=>Kp(S,a,l,!0)?1:Math.max(x,x*t,_,_*t),g=(S,x,_)=>Kp(S,a,l,!0)?-1:Math.min(x,x*t,_,_*t),m=f(0,c,u),w=f(Wn,h,d),v=g(cn,c,u),C=g(cn+Wn,h,d);i=(m-v)/2,s=(w-C)/2,r=-(m+v)/2,o=-(w+C)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class qu extends uo{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(gt(i[e])){const{key:l="value"}=this._parsing;r=c=>+Dc(i[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return Jr(this.options.rotation-90)}_getCircumference(){return Jr(this.options.circumference)}_getRotationExtents(){let e=ln,t=-ln;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(gq(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:m}=eQ(u,h,l),w=(i.width-o)/d,v=(i.height-o)/f,C=Math.max(Math.min(w,v)/2,0),S=R2(this.options.radius,C),x=Math.max(S*l,0),_=(S-x)/this._getVisibleDatasetWeightTotal();this.offsetX=g*S,this.offsetY=m*S,s.total=this.calculateTotal(),this.outerRadius=S-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/ln)}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,u=(a.top+a.bottom)/2,d=r&&c.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:m,includeOptions:w}=this._getSharedOptions(t,s);let v=this._getRotation(),C;for(C=0;C<t;++C)v+=this._circumference(C,r);for(C=t;C<t+i;++C){const S=this._circumference(C,r),x=e[C],_={x:h+this.offsetX,y:u+this.offsetY,startAngle:v,endAngle:v+S,circumference:S,outerRadius:g,innerRadius:f};w&&(_.options=m||this.resolveDataElementOptions(C,x.active?"active":s)),v+=S,this.updateElement(x,C,_,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,s;for(s=0;s<t.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ln*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Mw(t._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(Ze(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}qu.id="doughnut";qu.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};qu.descriptors={_scriptable:n=>n!=="spacing",_indexable:n=>n!=="spacing"&&!n.startsWith("borderDash")&&!n.startsWith("hoverBorderDash")};qu.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:i}}=n.legend.options;return e.labels.map((s,r)=>{const a=n.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(r),index:r}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}}};class h0 extends uo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=O2(t,s,o);this._drawStart=a,this._drawCount=l,k2(t)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(t,s),d=o.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,w=Wf(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||s==="none",C=t+i,S=e.length;let x=t>0&&this.getParsed(t-1);for(let _=0;_<S;++_){const R=e[_],M=v?R:{};if(_<t||_>=C){M.skip=!0;continue}const O=this.getParsed(_),P=_t(O[f]),k=M[d]=o.getPixelForValue(O[d],_),B=M[f]=r||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[f],_);M.skip=isNaN(k)||isNaN(B)||P,M.stop=_>0&&Math.abs(O[d]-x[d])>w,m&&(M.parsed=O,M.raw=c.data[_]),u&&(M.options=h||this.resolveDataElementOptions(_,R.active?"active":s)),v||this.updateElement(R,_,M,s),x=O}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}h0.id="line";h0.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};h0.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Aw extends uo{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Mw(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,t,i,s){return V2.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,u=c.yCenter,d=c.getIndexAngle(0)-.5*cn;let f=d,g;const m=360/this.countVisibleElements();for(g=0;g<t;++g)f+=this._computeAngle(g,s,m);for(g=t;g<t+i;g++){const w=e[g];let v=f,C=f+this._computeAngle(g,s,m),S=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=C,r&&(l.animateScale&&(S=0),l.animateRotate&&(v=C=d));const x={x:h,y:u,innerRadius:0,outerRadius:S,startAngle:v,endAngle:C,options:this.resolveDataElementOptions(g,w.active?"active":s)};this.updateElement(w,g,x,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?Jr(this.resolveDataElementOptions(e,t).angle||i):0}}Aw.id="polarArea";Aw.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};Aw.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:i}}=n.legend.options;return e.labels.map((s,r)=>{const a=n.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(r),index:r}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class aA extends qu{}aA.id="pie";aA.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class u0 extends uo{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return V2.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta,i=t.dataset,s=t.data||[],r=t.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=t;a<t+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),h=r.getPointPositionForValue(a,this.getParsed(a).r),u=o?r.xCenter:h.x,d=o?r.yCenter:h.y,f={x:u,y:d,angle:h.angle,skip:isNaN(u)||isNaN(d),options:c};this.updateElement(l,a,f,s)}}}u0.id="radar";u0.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};u0.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class d0 extends uo{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled;let{start:r,count:o}=O2(t,i,s);if(this._drawStart=r,this._drawCount=o,k2(t)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(t,s),u=this.getSharedOptions(h),d=this.includeOptions(s,u),f=o.axis,g=a.axis,{spanGaps:m,segment:w}=this.options,v=Wf(m)?m:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||r||s==="none";let S=t>0&&this.getParsed(t-1);for(let x=t;x<t+i;++x){const _=e[x],R=this.getParsed(x),M=C?_:{},O=_t(R[g]),P=M[f]=o.getPixelForValue(R[f],x),k=M[g]=r||O?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,R,l):R[g],x);M.skip=isNaN(P)||isNaN(k)||O,M.stop=x>0&&Math.abs(R[f]-S[f])>v,w&&(M.parsed=R,M.raw=c.data[x]),d&&(M.options=u||this.resolveDataElementOptions(x,_.active?"active":s)),C||this.updateElement(_,x,M,s),S=R}this.updateSharedOptions(u,s,h)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!t.length)return s;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,r,o)/2}}d0.id="scatter";d0.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};d0.overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};var tQ=Object.freeze({__proto__:null,BarController:l0,BubbleController:c0,DoughnutController:qu,LineController:h0,PieController:aA,PolarAreaController:Aw,RadarController:u0,ScatterController:d0});function ah(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class lA{static override(e){Object.assign(lA.prototype,e)}constructor(e){this.options=void 0,this.options=e||{}}init(){}formats(){return ah()}parse(){return ah()}format(){return ah()}add(){return ah()}diff(){return ah()}startOf(){return ah()}endOf(){return ah()}}var nQ={_date:lA};function iQ(n,e,t,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?Eq:ol;if(i){if(s._sharedOptions){const c=r[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const u=l(r,e,t-h),d=l(r,e,t+h);return{lo:u.lo,hi:d.hi}}}}else return l(r,e,t)}return{lo:0,hi:r.length-1}}function Pw(n,e,t,i,s){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:u,hi:d}=iQ(r[a],e,o,s);for(let f=u;f<=d;++f){const g=h[f];g.skip||i(g,c,f)}}}function sQ(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function hR(n,e,t,i,s){const r=[];return!s&&!n.isPointInArea(e)||Pw(n,t,e,function(a,l,c){!s&&!al(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function rQ(n,e,t,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:u}=T2(o,{x:e.x,y:e.y});Kp(u,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return Pw(n,t,e,r),s}function oQ(n,e,t,i,s,r){let o=[];const a=sQ(t);let l=Number.POSITIVE_INFINITY;function c(h,u,d){const f=h.inRange(e.x,e.y,s);if(i&&!f)return;const g=h.getCenterPoint(s);if(!(!!r||n.isPointInArea(g))&&!f)return;const w=a(e,g);w<l?(o=[{element:h,datasetIndex:u,index:d}],l=w):w===l&&o.push({element:h,datasetIndex:u,index:d})}return Pw(n,t,e,c),o}function uR(n,e,t,i,s,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!i?rQ(n,e,t,s):oQ(n,e,t,i,s,r)}function aD(n,e,t,i,s){const r=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Pw(n,t,e,(l,c,h)=>{l[o]&&l[o](e[t],s)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var aQ={evaluateInteractionItems:Pw,modes:{index(n,e,t,i){const s=Zh(e,n),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?hR(n,s,r,i,o):uR(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(n,e,t,i){const s=Zh(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?hR(n,s,r,i,o):uR(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(n,e,t,i){const s=Zh(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return hR(n,s,r,i,o)},nearest(n,e,t,i){const s=Zh(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return uR(n,s,r,t.intersect,i,o)},x(n,e,t,i){const s=Zh(e,n);return aD(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=Zh(e,n);return aD(n,s,"y",t.intersect,i)}}};const Q2=["left","top","right","bottom"];function Eg(n,e){return n.filter(t=>t.pos===e)}function lD(n,e){return n.filter(t=>Q2.indexOf(t.pos)===-1&&t.box.axis===e)}function Tg(n,e){return n.sort((t,i)=>{const s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function lQ(n){const e=[];let t,i,s,r,o,a;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function cQ(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:r}=t;if(!i||!Q2.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function hQ(n,e){const t=cQ(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=t[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:l&&e.availableHeight)}return t}function uQ(n){const e=lQ(n),t=Tg(e.filter(c=>c.box.fullSize),!0),i=Tg(Eg(e,"left"),!0),s=Tg(Eg(e,"right")),r=Tg(Eg(e,"top"),!0),o=Tg(Eg(e,"bottom")),a=lD(e,"x"),l=lD(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Eg(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function cD(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function Z2(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function dQ(n,e,t,i){const{pos:s,box:r}=t,o=n.maxPadding;if(!gt(s)){t.size&&(n[s]-=t.size);const u=i[t.stack]||{size:0,count:1};u.size=Math.max(u.size,t.horizontal?r.height:r.width),t.size=u.size/u.count,n[s]+=t.size}r.getPadding&&Z2(o,r.getPadding());const a=Math.max(0,e.outerWidth-cD(o,n,"left","right")),l=Math.max(0,e.outerHeight-cD(o,n,"top","bottom")),c=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:h}:{same:h,other:c}}function fQ(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function gQ(n,e){const t=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return i(n?["left","right"]:["top","bottom"])}function Lm(n,e,t,i){const s=[];let r,o,a,l,c,h;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||e.w,a.height||e.h,gQ(a.horizontal,e));const{same:u,other:d}=dQ(e,t,a,i);c|=u&&s.length,h=h||d,l.fullSize||s.push(a)}return c&&Lm(s,e,t,i)||h}function Mv(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function hD(n,e,t,i){const s=t.padding;let{x:r,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const u=e.w*h,d=c.size||l.height;Gp(c.start)&&(o=c.start),l.fullSize?Mv(l,s.left,o,t.outerWidth-s.right-s.left,d):Mv(l,e.left+c.placed,o,u,d),c.start=o,c.placed+=u,o=l.bottom}else{const u=e.h*h,d=c.size||l.width;Gp(c.start)&&(r=c.start),l.fullSize?Mv(l,r,s.top,d,t.outerHeight-s.bottom-s.top):Mv(l,r,e.top+c.placed,d,u),c.start=r,c.placed+=u,r=l.right}}e.x=r,e.y=o}var Fi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=zi(n.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(t-s.height,0),a=uQ(n.boxes),l=a.vertical,c=a.horizontal;Vt(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const h=l.reduce((m,w)=>w.box.options&&w.box.options.display===!1?m:m+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},s);Z2(d,zi(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),g=hQ(l.concat(c),u);Lm(a.fullSize,f,u,g),Lm(l,f,u,g),Lm(c,f,u,g)&&Lm(l,f,u,g),fQ(f),hD(a.leftAndTop,f,u,g),f.x+=f.w,f.y+=f.h,hD(a.rightAndBottom,f,u,g),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Vt(a.chartArea,m=>{const w=m.box;Object.assign(w,n.chartArea),w.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class J2{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class mQ extends J2{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Hy="$chartjs",pQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},uD=n=>n===null||n==="";function wQ(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Hy]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",uD(s)){const r=KH(n,"width");r!==void 0&&(n.width=r)}if(uD(i))if(n.style.height==="")n.height=n.width/(e||2);else{const r=KH(n,"height");r!==void 0&&(n.height=r)}return n}const ej=bX?{passive:!0}:!1;function vQ(n,e,t){n&&n.addEventListener(e,t,ej)}function bQ(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,ej)}function yQ(n,e){const t=pQ[n.type]||n.type,{x:i,y:s}=Zh(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function kC(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function CQ(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||kC(a.addedNodes,i),o=o&&!kC(a.removedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function SQ(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||kC(a.removedNodes,i),o=o&&!kC(a.addedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const Xp=new Map;let dD=0;function tj(){const n=window.devicePixelRatio;n!==dD&&(dD=n,Xp.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function _Q(n,e){Xp.size||window.addEventListener("resize",tj),Xp.set(n,e)}function RQ(n){Xp.delete(n),Xp.size||window.removeEventListener("resize",tj)}function xQ(n,e,t){const i=n.canvas,s=i&&oA(i);if(!s)return;const r=I2((a,l)=>{const c=s.clientWidth;t(a,l),c<s.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(s),_Q(n,r),o}function dR(n,e,t){t&&t.disconnect(),e==="resize"&&RQ(n)}function EQ(n,e,t){const i=n.canvas,s=I2(r=>{n.ctx!==null&&t(yQ(r,n))},n);return vQ(i,e,s),s}class TQ extends J2{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(wQ(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Hy])return!1;const i=t[Hy].initial;["height","width"].forEach(r=>{const o=i[r];_t(o)?t.removeAttribute(r):t.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[Hy],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),o={attach:CQ,detach:SQ,resize:xQ}[t]||EQ;s[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:dR,detach:dR,resize:dR}[t]||bQ)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return vX(e,t,i,s)}isAttached(e){const t=e&&oA(e);return!!(t&&t.isConnected)}}function MQ(n){return!rA()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?mQ:TQ}class fo{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Wf(this.x)&&Wf(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}fo.defaults={};fo.defaultRoutes=void 0;function AQ(n,e){const t=n.options.ticks,i=PQ(n),s=Math.min(t.maxTicksLimit||i,i),r=t.major.enabled?OQ(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return kQ(e,c,r,o/s),c;const h=IQ(r,e,s);if(o>0){let u,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Av(e,c,h,_t(f)?0:a-f,a),u=0,d=o-1;u<d;u++)Av(e,c,h,r[u],r[u+1]);return Av(e,c,h,l,_t(f)?e.length:l+f),c}return Av(e,c,h),c}function PQ(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function IQ(n,e,t){const i=HQ(n),s=e.length/t;if(!i)return Math.max(s,1);const r=Sq(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function OQ(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function kQ(n,e,t,i){let s=0,r=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(e.push(n[o]),s++,r=t[s*i])}function Av(n,e,t,i,s){const r=Ze(i,0),o=Math.min(Ze(s,n.length),n.length);let a=0,l,c,h;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),h=r;h<0;)a++,h=Math.round(r+a*t);for(c=Math.max(r,0);c<o;c++)c===h&&(e.push(n[c]),a++,h=Math.round(r+a*t))}function HQ(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const DQ=n=>n==="left"?"right":n==="right"?"left":n,fD=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,gD=(n,e)=>Math.min(e||n,n);function mD(n,e){const t=[],i=n.length/e,s=n.length;let r=0;for(;r<s;r+=i)t.push(n[Math.floor(r)]);return t}function NQ(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),c;if(!(t&&(i===1?c=Math.max(l-r,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function LQ(n,e){Vt(n,t=>{const i=t.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[i[r]];i.splice(0,s)}})}function Mg(n){return n.drawTicks?n.tickLength:0}function pD(n,e){if(!n.display)return 0;const t=ci(n.font,e),i=zi(n.padding);return(pn(n.text)?n.text.length:1)*t.lineHeight+i.height}function $Q(n,e){return Xc(n,{scale:e,type:"scale"})}function FQ(n,e,t){return Xc(n,{tick:t,index:e,type:"tick"})}function BQ(n,e,t){let i=J1(n);return(t&&e!=="right"||!t&&e==="right")&&(i=DQ(i)),i}function VQ(n,e,t,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:h}=l;let u=0,d,f,g;const m=o-s,w=a-r;if(n.isHorizontal()){if(f=Ni(i,r,a),gt(t)){const v=Object.keys(t)[0],C=t[v];g=h[v].getPixelForValue(C)+m-e}else t==="center"?g=(c.bottom+c.top)/2+m-e:g=fD(n,t,e);d=a-r}else{if(gt(t)){const v=Object.keys(t)[0],C=t[v];f=h[v].getPixelForValue(C)-w+e}else t==="center"?f=(c.left+c.right)/2-w+e:f=fD(n,t,e);g=Ni(i,o,s),u=t==="left"?-Wn:Wn}return{titleX:f,titleY:g,maxWidth:d,rotation:u}}class Xu extends fo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=ks(e,Number.POSITIVE_INFINITY),t=ks(t,Number.NEGATIVE_INFINITY),i=ks(i,Number.POSITIVE_INFINITY),s=ks(s,Number.NEGATIVE_INFINITY),{min:ks(e,i),max:ks(t,s),minDefined:Ln(e),maxDefined:Ln(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=s&&t>i?t:i,{min:ks(t,ks(i,t)),max:ks(i,ks(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){tn(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Xq(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?mD(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=AQ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){tn(this.options.afterUpdate,[this])}beforeSetDimensions(){tn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){tn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),tn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){tn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=tn(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){tn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){tn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=gD(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=vi(this.chart.width-u,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),u+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Mg(e.grid)-t.padding-pD(e.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),o=Q1(Math.min(Math.asin(vi((h.highest.height+6)/a,-1,1)),Math.asin(vi(l/c,-1,1))-Math.asin(vi(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){tn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){tn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=pD(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=Mg(r)+l):(e.height=this.maxHeight,e.width=Mg(r)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=i.padding*2,g=Jr(this.labelRotation),m=Math.cos(g),w=Math.sin(g);if(a){const v=i.mirror?0:w*u.width+m*d.height;e.height=Math.min(this.maxHeight,e.height+v+f)}else{const v=i.mirror?0:m*u.width+w*d.height;e.width=Math.min(this.maxWidth,e.width+v+f)}this._calculatePadding(c,h,w,m)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*e.width,f=i*t.height):(d=i*e.height,f=s*t.width):r==="start"?f=t.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=t.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let h=t.height/2,u=e.height/2;r==="start"?(h=0,u=e.height):r==="end"&&(h=t.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){tn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)_t(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=mD(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(t/gD(t,i));let c=0,h=0,u,d,f,g,m,w,v,C,S,x,_;for(u=0;u<t;u+=l){if(g=e[u].label,m=this._resolveTickFontOptions(u),s.font=w=m.string,v=r[w]=r[w]||{data:{},gc:[]},C=m.lineHeight,S=x=0,!_t(g)&&!pn(g))S=IC(s,v.data,v.gc,S,g),x=C;else if(pn(g))for(d=0,f=g.length;d<f;++d)_=g[d],!_t(_)&&!pn(_)&&(S=IC(s,v.data,v.gc,S,_),x+=C);o.push(S),a.push(x),c=Math.max(S,c),h=Math.max(x,h)}LQ(r,t);const R=o.indexOf(c),M=a.indexOf(h),O=P=>({width:o[P]||0,height:a[P]||0});return{first:O(0),last:O(t-1),widest:O(R),highest:O(M),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return xq(this._alignToPixels?oh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=FQ(this.getContext(),e,i))}return this.$context||(this.$context=$Q(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Jr(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=Mg(r),f=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,w=m/2,v=function(j){return oh(i,j,m)};let C,S,x,_,R,M,O,P,k,B,z,Q;if(o==="top")C=v(this.bottom),M=this.bottom-d,P=C-w,B=v(e.top)+w,Q=e.bottom;else if(o==="bottom")C=v(this.top),B=e.top,Q=v(e.bottom)-w,M=C+w,P=this.top+d;else if(o==="left")C=v(this.right),R=this.right-d,O=C-w,k=v(e.left)+w,z=e.right;else if(o==="right")C=v(this.left),k=e.left,z=v(e.right)-w,R=C+w,O=this.left+d;else if(t==="x"){if(o==="center")C=v((e.top+e.bottom)/2+.5);else if(gt(o)){const j=Object.keys(o)[0],ie=o[j];C=v(this.chart.scales[j].getPixelForValue(ie))}B=e.top,Q=e.bottom,M=C+w,P=M+d}else if(t==="y"){if(o==="center")C=v((e.left+e.right)/2);else if(gt(o)){const j=Object.keys(o)[0],ie=o[j];C=v(this.chart.scales[j].getPixelForValue(ie))}R=C-w,O=R-d,k=e.left,z=e.right}const te=Ze(s.ticks.maxTicksLimit,u),ne=Math.max(1,Math.ceil(u/te));for(S=0;S<u;S+=ne){const j=this.getContext(S),ie=r.setContext(j),oe=a.setContext(j),J=ie.lineWidth,pe=ie.color,p=oe.dash||[],b=oe.dashOffset,y=ie.tickWidth,T=ie.tickColor,H=ie.tickBorderDash||[],E=ie.tickBorderDashOffset;x=NQ(this,S,l),x!==void 0&&(_=oh(i,x,J),c?R=O=k=z=_:M=P=B=Q=_,f.push({tx1:R,ty1:M,tx2:O,ty2:P,x1:k,y1:B,x2:z,y2:Q,width:J,color:pe,borderDash:p,borderDashOffset:b,tickWidth:y,tickColor:T,tickBorderDash:H,tickBorderDashOffset:E}))}return this._ticksLength=u,this._borderValue=C,f}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,d=Mg(i.grid),f=d+h,g=u?-h:f,m=-Jr(this.labelRotation),w=[];let v,C,S,x,_,R,M,O,P,k,B,z,Q="middle";if(s==="top")R=this.bottom-g,M=this._getXAxisLabelAlignment();else if(s==="bottom")R=this.top+g,M=this._getXAxisLabelAlignment();else if(s==="left"){const ne=this._getYAxisLabelAlignment(d);M=ne.textAlign,_=ne.x}else if(s==="right"){const ne=this._getYAxisLabelAlignment(d);M=ne.textAlign,_=ne.x}else if(t==="x"){if(s==="center")R=(e.top+e.bottom)/2+f;else if(gt(s)){const ne=Object.keys(s)[0],j=s[ne];R=this.chart.scales[ne].getPixelForValue(j)+f}M=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")_=(e.left+e.right)/2-f;else if(gt(s)){const ne=Object.keys(s)[0],j=s[ne];_=this.chart.scales[ne].getPixelForValue(j)}M=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?Q="top":l==="end"&&(Q="bottom"));const te=this._getLabelSizes();for(v=0,C=a.length;v<C;++v){S=a[v],x=S.label;const ne=r.setContext(this.getContext(v));O=this.getPixelForTick(v)+r.labelOffset,P=this._resolveTickFontOptions(v),k=P.lineHeight,B=pn(x)?x.length:1;const j=B/2,ie=ne.color,oe=ne.textStrokeColor,J=ne.textStrokeWidth;let pe=M;o?(_=O,M==="inner"&&(v===C-1?pe=this.options.reverse?"left":"right":v===0?pe=this.options.reverse?"right":"left":pe="center"),s==="top"?c==="near"||m!==0?z=-B*k+k/2:c==="center"?z=-te.highest.height/2-j*k+k:z=-te.highest.height+k/2:c==="near"||m!==0?z=k/2:c==="center"?z=te.highest.height/2-j*k:z=te.highest.height-B*k,u&&(z*=-1),m!==0&&!ne.showLabelBackdrop&&(_+=k/2*Math.sin(m))):(R=O,z=(1-B)*k/2);let p;if(ne.showLabelBackdrop){const b=zi(ne.backdropPadding),y=te.heights[v],T=te.widths[v];let H=z-b.top,E=0-b.left;switch(Q){case"middle":H-=y/2;break;case"bottom":H-=y;break}switch(M){case"center":E-=T/2;break;case"right":E-=T;break;case"inner":v===C-1?E-=T:v>0&&(E-=T/2);break}p={left:E,top:H,width:T+b.width,height:y+b.height,color:ne.backdropColor}}w.push({label:x,font:P,textOffset:z,options:{rotation:m,color:ie,strokeColor:oe,strokeWidth:J,textAlign:pe,textBaseline:Q,translation:[_,R],backdrop:p}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Jr(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,h;return t==="left"?s?(h=this.right+r,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):t==="right"?s?(h=this.left+r,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=s.length;r<o;++r){const l=s[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=oh(e,this.left,o)-o/2,h=oh(e,this.right,a)+a/2,u=d=l):(u=oh(e,this.top,o)-o/2,d=oh(e,this.bottom,a)+a/2,c=h=l),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(c,u),t.lineTo(h,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&r0(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Du(i,c,0,h,l,a)}s&&o0(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=ci(i.font),o=zi(i.padding),a=i.align;let l=r.lineHeight/2;t==="bottom"||t==="center"||gt(t)?(l+=o.bottom,pn(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:u,rotation:d}=VQ(this,l,t,a);Du(e,i.text,0,0,r,{color:i.color,maxWidth:u,rotation:d,textAlign:BQ(a,t,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Ze(e.grid&&e.grid.z,-1),s=Ze(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Xu.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return ci(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Pv{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;zQ(t)&&(i=this.register(t));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,WQ(e,o,i),this.override&&vn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in vn[s]&&(delete vn[s][i],this.override&&delete Hu[i])}}function WQ(n,e,t){const i=Yp(Object.create(null),[t?vn.get(t):{},vn.get(e),n.defaults]);vn.set(e,i),n.defaultRoutes&&jQ(e,n.defaultRoutes),n.descriptors&&vn.describe(e,n.descriptors)}function jQ(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),r=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");vn.route(r,s,l,a)})}function zQ(n){return"id"in n&&"defaults"in n}class UQ{constructor(){this.controllers=new Pv(uo,"datasets",!0),this.elements=new Pv(fo,"elements"),this.plugins=new Pv(Object,"plugins"),this.scales=new Pv(Xu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):Vt(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const s=X1(e);tn(i["before"+s],[],i),t[e](i),tn(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var jo=new UQ;class YQ{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,t,i);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[t,s,r.options];if(tn(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){_t(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=Ze(i.options&&i.options.plugins,{}),r=GQ(i);return s===!1&&!t?[]:qQ(e,r,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function GQ(n){const e={},t=[],i=Object.keys(jo.plugins.items);for(let r=0;r<i.length;r++)t.push(jo.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function KQ(n,e){return!e&&n===!1?null:n===!0?{}:n}function qQ(n,{plugins:e,localIds:t},i,s){const r=[],o=n.getContext();for(const a of e){const l=a.id,c=KQ(i[l],s);c!==null&&r.push({plugin:a,options:XQ(n.config,{plugin:a,local:t[l]},c,o)})}return r}function XQ(n,{plugin:e,local:t},i,s){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function IT(n,e){const t=vn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function QQ(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function ZQ(n,e){return n===e?"_index_":"_value_"}function wD(n){if(n==="x"||n==="y"||n==="r")return n}function JQ(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function OT(n,...e){if(wD(n))return n;for(const t of e){const i=t.axis||JQ(t.position)||n.length>1&&wD(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function vD(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function eZ(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return vD(n,"x",t[0])||vD(n,"y",t[0])}return{}}function tZ(n,e){const t=Hu[n.type]||{scales:{}},i=e.scales||{},s=IT(n.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!gt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=OT(o,a,eZ(o,n),vn.scales[a.type]),c=ZQ(l,s),h=t.scales||{};r[o]=op(Object.create(null),[{axis:l},a,h[l],h[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||IT(a,e),h=(Hu[a]||{}).scales||{};Object.keys(h).forEach(u=>{const d=QQ(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),op(r[f],[{axis:d},i[f],h[u]])})}),Object.keys(r).forEach(o=>{const a=r[o];op(a,[vn.scales[a.type],vn.scale])}),r}function nj(n){const e=n.options||(n.options={});e.plugins=Ze(e.plugins,{}),e.scales=tZ(n,e)}function ij(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function nZ(n){return n=n||{},n.data=ij(n.data),nj(n),n}const bD=new Map,sj=new Set;function Iv(n,e){let t=bD.get(n);return t||(t=e(),bD.set(n,t),sj.add(t)),t}const Ag=(n,e,t)=>{const i=Dc(e,t);i!==void 0&&n.add(i)};class iZ{constructor(e){this._config=nZ(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ij(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),nj(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Iv(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Iv(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Iv(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Iv(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(h=>{e&&(l.add(e),h.forEach(u=>Ag(l,e,u))),h.forEach(u=>Ag(l,s,u)),h.forEach(u=>Ag(l,Hu[r]||{},u)),h.forEach(u=>Ag(l,vn,u)),h.forEach(u=>Ag(l,AT,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),sj.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Hu[t]||{},vn.datasets[t]||{},{type:t},vn,AT]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=yD(this._resolverCache,e,s);let l=o;if(rZ(o,t)){r.$shared=!1,i=Nc(i)?i():i;const c=this.createResolver(e,i,a);l=jf(o,i,c)}for(const c of t)r[c]=l[c];return r}createResolver(e,t,i=[""],s){const{resolver:r}=yD(this._resolverCache,e,i);return gt(t)?jf(r,t,void 0,s):r}}function yD(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let r=i.get(s);return r||(r={resolver:nA(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const sZ=n=>gt(n)&&Object.getOwnPropertyNames(n).some(e=>Nc(n[e]));function rZ(n,e){const{isScriptable:t,isIndexable:i}=L2(n);for(const s of e){const r=t(s),o=i(s),a=(o||r)&&n[s];if(r&&(Nc(a)||sZ(a))||o&&pn(a))return!0}return!1}var oZ="4.4.6";const aZ=["top","bottom","left","right","chartArea"];function CD(n,e){return n==="top"||n==="bottom"||aZ.indexOf(n)===-1&&e==="x"}function SD(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function _D(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),tn(t&&t.onComplete,[n],e)}function lZ(n){const e=n.chart,t=e.options.animation;tn(t&&t.onProgress,[n],e)}function rj(n){return rA()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const HC={},oj=n=>{const e=rj(n);return Object.values(HC).filter(t=>t.canvas===e).pop()};function cZ(n,e,t){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=e){const o=n[s];delete n[s],(t>0||r>e)&&(n[r+t]=o)}}}function hZ(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function Ov(n,e,t){return n.options.clip?n[t]:e[t]}function uZ(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Ov(t,e,"left"),right:Ov(t,e,"right"),top:Ov(i,e,"top"),bottom:Ov(i,e,"bottom")}:e}class Pl{static register(...e){jo.add(...e),RD()}static unregister(...e){jo.remove(...e),RD()}constructor(e,t){const i=this.config=new iZ(t),s=rj(e),r=oj(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||MQ(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=fq(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new YQ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Aq(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],HC[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}za.listen(this,"complete",_D),za.listen(this,"progress",lZ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return _t(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return jo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():GH(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zH(this.canvas,this.ctx),this}stop(){return za.stop(this),this}resize(e,t){za.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,t,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,GH(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),tn(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Vt(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=OT(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Vt(r,o=>{const a=o.options,l=a.id,c=OT(l,a),h=Ze(a.type,o.dtype);(a.position===void 0||CD(a.position,c)!==CD(o.dposition))&&(a.position=o.dposition),s[l]=!0;let u=null;if(l in i&&i[l].type===h)u=i[l];else{const d=jo.getScale(h);u=new d({id:l,type:h,ctx:this.ctx,chart:this}),i[u.id]=u}u.init(a,e)}),Vt(s,(o,a)=>{o||delete i[a]}),Vt(i,o=>{Fi.configure(this,o,o.options),Fi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(SD("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const r=t[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||IT(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=jo.getController(a),{datasetElementType:c,dataElementType:h}=vn.datasets[a];Object.assign(l,{dataElementType:jo.getElement(h),datasetElementType:c&&jo.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Vt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:u}=this.getDatasetMeta(c),d=!s&&r.indexOf(u)===-1;u.buildOrUpdateElements(d),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||Vt(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(SD("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Vt(this.scales,e=>{Fi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!DH(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t){const o=i==="_removeElements"?-r:r;cZ(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!DH(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fi.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Vt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Nc(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(za.has(this)?this.attached&&!za.running(this)&&za.start(this):(this.draw(),_D({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const o=t[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,s=!i.disabled,r=uZ(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&r0(t,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&o0(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return al(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=aQ.modes[t];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Xc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);Gp(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),za.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),zH(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete HC[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Vt(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){Vt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Vt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,o,a,l;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!MC(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=r(t,e),a=i?e:r(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,o=t,a=this._getActiveElements(e,s,i,o),l=bq(e),c=hZ(e,this._lastEvent,i,l);i&&(this._lastEvent=null,tn(r.onHover,[e,a,this],this),l&&tn(r.onClick,[e,a,this],this));const h=!MC(a,s);return(h||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=c,h}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}Pl.defaults=vn;Pl.instances=HC;Pl.overrides=Hu;Pl.registry=jo;Pl.version=oZ;Pl.getChart=oj;function RD(){return Vt(Pl.instances,n=>n._plugins.invalidate())}function dZ(n,e,t){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;n.beginPath(),n.arc(r,o,a,i-c,t+c),l>s?(c=s/l,n.arc(r,o,l,t+c,i-c,!0)):n.arc(r,o,s,t+Wn,i-Wn),n.closePath(),n.clip()}function fZ(n){return tA(n,["outerStart","outerEnd","innerStart","innerEnd"])}function gZ(n,e,t,i){const s=fZ(n.options.borderRadius),r=(t-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(t-Math.min(r,l))*i/2;return vi(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:vi(s.innerStart,0,o),innerEnd:vi(s.innerEnd,0,o)}}function md(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function DC(n,e,t,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,u=Math.max(e.outerRadius+i+t-c,0),d=h>0?h+i+t+c:0;let f=0;const g=s-l;if(i){const ne=h>0?h-i:0,j=u>0?u-i:0,ie=(ne+j)/2,oe=ie!==0?g*ie/(ie+i):g;f=(g-oe)/2}const m=Math.max(.001,g*u-t/cn)/u,w=(g-m)/2,v=l+w+f,C=s-w-f,{outerStart:S,outerEnd:x,innerStart:_,innerEnd:R}=gZ(e,d,u,C-v),M=u-S,O=u-x,P=v+S/M,k=C-x/O,B=d+_,z=d+R,Q=v+_/B,te=C-R/z;if(n.beginPath(),r){const ne=(P+k)/2;if(n.arc(o,a,u,P,ne),n.arc(o,a,u,ne,k),x>0){const J=md(O,k,o,a);n.arc(J.x,J.y,x,k,C+Wn)}const j=md(z,C,o,a);if(n.lineTo(j.x,j.y),R>0){const J=md(z,te,o,a);n.arc(J.x,J.y,R,C+Wn,te+Math.PI)}const ie=(C-R/d+(v+_/d))/2;if(n.arc(o,a,d,C-R/d,ie,!0),n.arc(o,a,d,ie,v+_/d,!0),_>0){const J=md(B,Q,o,a);n.arc(J.x,J.y,_,Q+Math.PI,v-Wn)}const oe=md(M,v,o,a);if(n.lineTo(oe.x,oe.y),S>0){const J=md(M,P,o,a);n.arc(J.x,J.y,S,v-Wn,P)}}else{n.moveTo(o,a);const ne=Math.cos(P)*u+o,j=Math.sin(P)*u+a;n.lineTo(ne,j);const ie=Math.cos(k)*u+o,oe=Math.sin(k)*u+a;n.lineTo(ie,oe)}n.closePath()}function mZ(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){DC(n,e,t,i,l,s);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+(a%ln||ln))}return DC(n,e,t,i,l,s),n.fill(),l}function pZ(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;n.setLineDash(u||[]),n.lineDashOffset=d,f?(n.lineWidth=c*2,n.lineJoin=h||"round"):(n.lineWidth=c,n.lineJoin=h||"bevel");let g=e.endAngle;if(r){DC(n,e,t,i,g,s);for(let m=0;m<r;++m)n.stroke();isNaN(a)||(g=o+(a%ln||ln))}f&&dZ(n,e,g),r||(DC(n,e,t,i,g,s),n.stroke())}class Iw extends fo{constructor(e){super(),this.circumference=void 0,this.endAngle=void 0,this.fullCircles=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=void 0,this.startAngle=void 0,this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.getProps(["x","y"],i),{angle:r,distance:o}=T2(s,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,f=Ze(u,l-a),g=Kp(r,a,l)&&a!==l,m=f>=ln||g,w=rl(o,c+d,h+d);return m&&w}getCenterPoint(e){const{x:t,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,h=(s+r)/2,u=(o+a+c+l)/2;return{x:t+Math.cos(h)*u,y:i+Math.sin(h)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,s=(t.offset||0)/4,r=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>ln?Math.floor(i/ln):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s);const l=1-Math.sin(Math.min(cn,i||0)),c=s*l;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,mZ(e,this,c,r,o),pZ(e,this,c,r,o),e.restore()}}Iw.id="arc";Iw.defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};Iw.defaultRoutes={backgroundColor:"backgroundColor"};Iw.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"};function aj(n,e,t=e){n.lineCap=Ze(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Ze(t.borderDash,e.borderDash)),n.lineDashOffset=Ze(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Ze(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Ze(t.borderWidth,e.borderWidth),n.strokeStyle=Ze(t.borderColor,e.borderColor)}function wZ(n,e,t){n.lineTo(t.x,t.y)}function vZ(n){return n.stepped?Vq:n.tension||n.cubicInterpolationMode==="monotone"?Wq:wZ}function lj(n,e,t={}){const i=n.length,{start:s=0,end:r=i-1}=t,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),h=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function bZ(n,e,t,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=lj(s,t,i),h=vZ(r);let{move:u=!0,reverse:d}=i||{},f,g,m;for(f=0;f<=c;++f)g=s[(a+(d?c-f:f))%o],!g.skip&&(u?(n.moveTo(g.x,g.y),u=!1):h(n,m,g,d,r.stepped),m=g);return l&&(g=s[(a+(d?c:0))%o],h(n,m,g,d,r.stepped)),!!l}function yZ(n,e,t,i){const s=e.points,{count:r,start:o,ilen:a}=lj(s,t,i),{move:l=!0,reverse:c}=i||{};let h=0,u=0,d,f,g,m,w,v;const C=x=>(o+(c?a-x:x))%r,S=()=>{m!==w&&(n.lineTo(h,w),n.lineTo(h,m),n.lineTo(h,v))};for(l&&(f=s[C(0)],n.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[C(d)],f.skip)continue;const x=f.x,_=f.y,R=x|0;R===g?(_<m?m=_:_>w&&(w=_),h=(u*h+x)/++u):(S(),n.lineTo(x,_),g=R,u=0,m=w=_),v=_}S()}function kT(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?yZ:bZ}function CZ(n){return n.stepped?yX:n.tension||n.cubicInterpolationMode==="monotone"?CX:Jh}function SZ(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),aj(n,e.options),n.stroke(s)}function _Z(n,e,t,i){const{segments:s,options:r}=e,o=kT(e);for(const a of s)aj(n,r,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const RZ=typeof Path2D=="function";function xZ(n,e,t,i){RZ&&!e.options.segment?SZ(n,e,t,i):_Z(n,e,t,i)}class Qc extends fo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;dX(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=TX(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],r=this.points,o=G2(this,{property:t,start:s,end:s});if(!o.length)return;const a=[],l=CZ(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:u,end:d}=o[c],f=r[u],g=r[d];if(f===g){a.push(f);continue}const m=Math.abs((s-f[t])/(g[t]-f[t])),w=l(f,g,m,i.stepped);w[t]=e[t],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,t,i){return kT(this)(e,this,t,i)}path(e,t,i){const s=this.segments,r=kT(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of s)o&=r(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),xZ(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Qc.id="line";Qc.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};Qc.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};Qc.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"&&n!=="fill"};function xD(n,e,t,i){const s=n.options,{[t]:r}=n.getProps([t],i);return Math.abs(e-r)<s.radius+s.hitRadius}class f0 extends fo{constructor(e){super(),this.parsed=void 0,this.skip=void 0,this.stop=void 0,this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.options,{x:r,y:o}=this.getProps(["x","y"],i);return Math.pow(e-r,2)+Math.pow(t-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return xD(this,e,"x",t)}inYRange(e,t){return xD(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!al(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,PT(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}f0.id="point";f0.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};f0.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function cj(n,e){const{x:t,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,h,u;return n.horizontal?(u=o/2,a=Math.min(t,s),l=Math.max(t,s),c=i-u,h=i+u):(u=r/2,a=t-u,l=t+u,c=Math.min(i,s),h=Math.max(i,s)),{left:a,top:c,right:l,bottom:h}}function pc(n,e,t,i){return n?0:vi(e,t,i)}function EZ(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,r=N2(i);return{t:pc(s.top,r.top,0,t),r:pc(s.right,r.right,0,e),b:pc(s.bottom,r.bottom,0,t),l:pc(s.left,r.left,0,e)}}function TZ(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=Cu(s),o=Math.min(e,t),a=n.borderSkipped,l=i||gt(s);return{topLeft:pc(!l||a.top||a.left,r.topLeft,0,o),topRight:pc(!l||a.top||a.right,r.topRight,0,o),bottomLeft:pc(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:pc(!l||a.bottom||a.right,r.bottomRight,0,o)}}function MZ(n){const e=cj(n),t=e.right-e.left,i=e.bottom-e.top,s=EZ(n,t/2,i/2),r=TZ(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function fR(n,e,t,i){const s=e===null,r=t===null,a=n&&!(s&&r)&&cj(n,i);return a&&(s||rl(e,a.left,a.right))&&(r||rl(t,a.top,a.bottom))}function AZ(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function PZ(n,e){n.rect(e.x,e.y,e.w,e.h)}function gR(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class g0 extends fo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=MZ(this),a=AZ(o.radius)?qp:PZ;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,gR(o,t,r)),e.clip(),a(e,gR(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,gR(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return fR(this,e,t,i)}inXRange(e,t){return fR(this,e,null,t)}inYRange(e,t){return fR(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}g0.id="bar";g0.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};g0.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var IZ=Object.freeze({__proto__:null,ArcElement:Iw,BarElement:g0,LineElement:Qc,PointElement:f0});const HT=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],ED=HT.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function hj(n){return HT[n%HT.length]}function uj(n){return ED[n%ED.length]}function OZ(n,e){return n.borderColor=hj(e),n.backgroundColor=uj(e),++e}function kZ(n,e){return n.backgroundColor=n.data.map(()=>hj(e++)),e}function HZ(n,e){return n.backgroundColor=n.data.map(()=>uj(e++)),e}function DZ(n){let e=0;return(t,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof qu?e=kZ(t,e):s instanceof Aw?e=HZ(t,e):s&&(e=OZ(t,e))}}function TD(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function NZ(n){return n&&(n.borderColor||n.backgroundColor)}function LZ(){return vn.borderColor!=="rgba(0,0,0,0.1)"||vn.backgroundColor!=="rgba(0,0,0,0.1)"}var $Z={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s,o=TD(i)||NZ(s)||r&&TD(r)||LZ();if(!t.forceOverride&&o)return;const a=DZ(n);i.forEach(a)}};function FZ(n,e,t,i,s){const r=s.samples||i;if(r>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(r-2);let l=0;const c=e+t-1;let h=e,u,d,f,g,m;for(o[l++]=n[h],u=0;u<r-2;u++){let w=0,v=0,C;const S=Math.floor((u+1)*a)+1+e,x=Math.min(Math.floor((u+2)*a)+1,t)+e,_=x-S;for(C=S;C<x;C++)w+=n[C].x,v+=n[C].y;w/=_,v/=_;const R=Math.floor(u*a)+1+e,M=Math.min(Math.floor((u+1)*a)+1,t)+e,{x:O,y:P}=n[h];for(f=g=-1,C=R;C<M;C++)g=.5*Math.abs((O-w)*(n[C].y-P)-(O-n[C].x)*(v-P)),g>f&&(f=g,d=n[C],m=C);o[l++]=d,h=m}return o[l++]=n[c],o}function BZ(n,e,t,i){let s=0,r=0,o,a,l,c,h,u,d,f,g,m;const w=[],v=e+t-1,C=n[e].x,x=n[v].x-C;for(o=e;o<e+t;++o){a=n[o],l=(a.x-C)/x*i,c=a.y;const _=l|0;if(_===h)c<g?(g=c,u=o):c>m&&(m=c,d=o),s=(r*s+a.x)/++r;else{const R=o-1;if(!_t(u)&&!_t(d)){const M=Math.min(u,d),O=Math.max(u,d);M!==f&&M!==R&&w.push({...n[M],x:s}),O!==f&&O!==R&&w.push({...n[O],x:s})}o>0&&R!==f&&w.push(n[R]),w.push(a),h=_,r=0,g=m=c,u=d=f=o}}return w}function dj(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function MD(n){n.data.datasets.forEach(e=>{dj(e)})}function VZ(n,e){const t=e.length;let i=0,s;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=vi(ol(e,r.axis,o).lo,0,t-1)),c?s=vi(ol(e,r.axis,a).hi+1,i,t)-i:s=t-i,{start:i,count:s}}var WZ={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){MD(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),c=o||s.data;if(Nm([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=n.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:u,count:d}=VZ(l,c);const f=t.threshold||4*i;if(d<=f){dj(s);return}_t(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let g;switch(t.algorithm){case"lttb":g=FZ(c,u,d,i,t);break;case"min-max":g=BZ(c,u,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=g})},destroy(n){MD(n)}};function jZ(n,e,t){const i=n.segments,s=n.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=cA(l,c,s);const h=DT(t,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:s[l],end:s[c]});continue}const u=G2(e,h);for(const d of u){const f=DT(t,r[d.start],r[d.end],d.loop),g=Y2(a,s,f);for(const m of g)o.push({source:m,target:d,start:{[t]:AD(h,f,"start",Math.max)},end:{[t]:AD(h,f,"end",Math.min)}})}}return o}function DT(n,e,t,i){if(i)return;let s=e[n],r=t[n];return n==="angle"&&(s=Bs(s),r=Bs(r)),{property:n,start:s,end:r}}function zZ(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=cA(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):t!==null&&(r.push({x:t,y:l.y}),r.push({x:t,y:c.y}))}),r}function cA(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function AD(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function fj(n,e){let t=[],i=!1;return pn(n)?(i=!0,t=n):t=zZ(n,e),t.length?new Qc({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function PD(n){return n&&n.fill!==!1}function UZ(n,e,t){let s=n[e].fill;const r=[e];let o;if(!t)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!Ln(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function YZ(n,e,t){const i=XZ(n);if(gt(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Ln(s)&&Math.floor(s)===s?GZ(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function GZ(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function KZ(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:gt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function qZ(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:gt(n)?i=n.value:i=e.getBaseValue(),i}function XZ(n){const e=n.options,t=e.fill;let i=Ze(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function QZ(n){const{scale:e,index:t,line:i}=n,s=[],r=i.segments,o=i.points,a=ZZ(e,t);a.push(fj({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let h=c.start;h<=c.end;h++)JZ(s,o[h],a)}return new Qc({points:s,options:{}})}function ZZ(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function JZ(n,e,t){const i=[];for(let s=0;s<t.length;s++){const r=t[s],{first:o,last:a,point:l}=eJ(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function eJ(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const h=r[c],u=o[h.start][t],d=o[h.end][t];if(rl(s,u,d)){a=s===u,l=s===d;break}}return{first:a,last:l,point:i}}class gj{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:r,radius:o}=this;return t=t||{start:0,end:ln},e.arc(s,r,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,r=e.angle;return{x:t+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function tJ(n){const{chart:e,fill:t,line:i}=n;if(Ln(t))return nJ(e,t);if(t==="stack")return QZ(n);if(t==="shape")return!0;const s=iJ(n);return s instanceof gj?s:fj(s,i)}function nJ(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function iJ(n){return(n.scale||{}).getPointPositionForValue?rJ(n):sJ(n)}function sJ(n){const{scale:e={},fill:t}=n,i=KZ(t,e);if(Ln(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function rJ(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=qZ(t,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new gj({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function mR(n,e,t){const i=tJ(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:u=c}=l||{};i&&s.points.length&&(r0(n,t),oJ(n,{line:s,target:i,above:h,below:u,area:t,scale:r,axis:o}),o0(n))}function oJ(n,e){const{line:t,target:i,above:s,below:r,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&r!==s&&(ID(n,i,o.top),OD(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),ID(n,i,o.bottom)),OD(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore()}function ID(n,e,t){const{segments:i,points:s}=e;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,h=s[l],u=s[cA(l,c,s)];r?(n.moveTo(h.x,h.y),r=!1):(n.lineTo(h.x,t),n.lineTo(h.x,h.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(u.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function OD(n,e){const{line:t,target:i,property:s,color:r,scale:o}=e,a=jZ(t,i,s);for(const{source:l,target:c,start:h,end:u}of a){const{style:{backgroundColor:d=r}={}}=l,f=i!==!0;n.save(),n.fillStyle=d,aJ(n,o,f&&DT(s,h,u)),n.beginPath();const g=!!t.pathSegment(n,l);let m;if(f){g?n.closePath():kD(n,i,u,s);const w=!!i.pathSegment(n,c,{move:g,reverse:!0});m=g&&w,m||kD(n,i,h,s)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function aJ(n,e,t){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=t||{};r==="x"&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function kD(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var lJ={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Qc&&(l={visible:n.isDatasetVisible(o),index:o,fill:YZ(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=UZ(s,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&mR(n.ctx,a,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;PD(r)&&mR(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!PD(i)||t.drawTime!=="beforeDatasetDraw"||mR(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const HD=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},cJ=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class DD extends fo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=tn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=ci(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=HD(i,r);let c,h;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let u=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((g,m)=>{const w=i+t/2+r.measureText(g.text).width;(m===0||c[c.length-1]+w+2*a>o)&&(u+=h,c[c.length-(m>0?0:1)]=0,f+=h,d++),l[m]={left:0,top:f,row:d,width:w,height:s},c[c.length-1]+=w+a}),u}_fitCols(e,t,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let u=a,d=0,f=0,g=0,m=0;return this.legendItems.forEach((w,v)=>{const{itemWidth:C,itemHeight:S}=hJ(i,t,r,w,s);v>0&&f+S+2*a>h&&(u+=d+a,c.push({width:d,height:f}),g+=d+a,m++,d=f=0),l[v]={left:g,top:f,col:m,width:C,height:S},d=Math.max(d,C),f+=S+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Mf(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ni(i,this.left+s,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=Ni(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Ni(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=Ni(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;r0(e,this),this._draw(),o0(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=vn.color,l=Mf(e.rtl,this.left,this.width),c=ci(o.font),{padding:h}=o,u=c.size,d=u/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:w}=HD(o,u),v=function(R,M,O){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;s.save();const P=Ze(O.lineWidth,1);if(s.fillStyle=Ze(O.fillStyle,a),s.lineCap=Ze(O.lineCap,"butt"),s.lineDashOffset=Ze(O.lineDashOffset,0),s.lineJoin=Ze(O.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=Ze(O.strokeStyle,a),s.setLineDash(Ze(O.lineDash,[])),o.usePointStyle){const k={radius:m*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:P},B=l.xPlus(R,g/2),z=M+d;D2(s,k,B,z,o.pointStyleWidth&&g)}else{const k=M+Math.max((u-m)/2,0),B=l.leftForLtr(R,g),z=Cu(O.borderRadius);s.beginPath(),Object.values(z).some(Q=>Q!==0)?qp(s,{x:B,y:k,w:g,h:m,radius:z}):s.rect(B,k,g,m),s.fill(),P!==0&&s.stroke()}s.restore()},C=function(R,M,O){Du(s,O.text,R,M+w/2,c,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},S=this.isHorizontal(),x=this._computeTitleHeight();S?f={x:Ni(r,this.left+h,this.right-i[0]),y:this.top+h+x,line:0}:f={x:this.left+h,y:Ni(r,this.top+x+h,this.bottom-t[0].height),line:0},j2(this.ctx,e.textDirection);const _=w+h;this.legendItems.forEach((R,M)=>{s.strokeStyle=R.fontColor,s.fillStyle=R.fontColor;const O=s.measureText(R.text).width,P=l.textAlign(R.textAlign||(R.textAlign=o.textAlign)),k=g+d+O;let B=f.x,z=f.y;l.setWidth(this.width),S?M>0&&B+k+h>this.right&&(z=f.y+=_,f.line++,B=f.x=Ni(r,this.left+h,this.right-i[f.line])):M>0&&z+_>this.bottom&&(B=f.x=B+t[f.line].width+h,f.line++,z=f.y=Ni(r,this.top+x+h,this.bottom-t[f.line].height));const Q=l.x(B);if(v(Q,z,R),B=Pq(P,B+g+d,S?B+k:this.right,e.rtl),C(l.x(B),z,R),S)f.x+=k+h;else if(typeof R.text!="string"){const te=c.lineHeight;f.y+=mj(R,te)+h}else f.y+=_}),z2(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=ci(t.font),s=zi(t.padding);if(!t.display)return;const r=Mf(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=s.top+l;let h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=Ni(e.align,u,this.right-d);else{const g=this.columnSizes.reduce((m,w)=>Math.max(m,w.height),0);h=c+Ni(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=Ni(a,u,u+d);o.textAlign=r.textAlign(J1(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Du(o,t.text,f,h,i)}_computeTitleHeight(){const e=this.options.title,t=ci(e.font),i=zi(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(rl(e,this.left,this.right)&&rl(t,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],rl(e,s.left,s.left+s.width)&&rl(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!fJ(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=cJ(s,i);s&&!r&&tn(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&tn(t.onHover,[e,i,this],this)}else i&&tn(t.onClick,[e,i,this],this)}}function hJ(n,e,t,i,s){const r=uJ(i,n,e,t),o=dJ(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function uJ(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+i.measureText(s).width}function dJ(n,e,t){let i=n;return typeof e.text!="string"&&(i=mj(e,t)),i}function mj(n,e){const t=n.text?n.text.length:0;return e*t}function fJ(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var gJ={id:"legend",_element:DD,start(n,e,t){const i=n.legend=new DD({ctx:n.ctx,options:t,chart:n});Fi.configure(n,i,t),Fi.addBox(n,i)},stop(n){Fi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;Fi.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),h=zi(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class hA extends fo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=pn(i.text)?i.text.length:1;this._padding=zi(i.padding);const r=s*ci(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,h,u;return this.isHorizontal()?(h=Ni(a,i,r),u=t+e,c=r-i):(o.position==="left"?(h=i+e,u=Ni(a,s,t),l=cn*-.5):(h=r-e,u=Ni(a,t,s),l=cn*.5),c=s-t),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=ci(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Du(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:J1(t.align),textBaseline:"middle",translation:[o,a]})}}function mJ(n,e){const t=new hA({ctx:n.ctx,options:e,chart:n});Fi.configure(n,t,e),Fi.addBox(n,t),n.titleBlock=t}var pJ={id:"title",_element:hA,start(n,e,t){mJ(n,t)},stop(n){const e=n.titleBlock;Fi.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;Fi.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const kv=new WeakMap;var wJ={id:"subtitle",start(n,e,t){const i=new hA({ctx:n.ctx,options:t,chart:n});Fi.configure(n,i,t),Fi.addBox(n,i),kv.set(n,i)},stop(n){Fi.removeBox(n,kv.get(n)),kv.delete(n)},beforeUpdate(n,e,t){const i=kv.get(n);Fi.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const hp={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,r=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=MT(e,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Lo(n,e){return e&&(pn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Ua(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function vJ(n,e){const{element:t,datasetIndex:i,index:s}=e,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function ND(n,e){const t=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=e,l=ci(e.bodyFont),c=ci(e.titleFont),h=ci(e.footerFont),u=r.length,d=s.length,f=i.length,g=zi(e.padding);let m=g.height,w=0,v=i.reduce((x,_)=>x+_.before.length+_.lines.length+_.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),v){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*x+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}d&&(m+=e.footerMarginTop+d*h.lineHeight+(d-1)*e.footerSpacing);let C=0;const S=function(x){w=Math.max(w,t.measureText(x).width+C)};return t.save(),t.font=c.string,Vt(n.title,S),t.font=l.string,Vt(n.beforeBody.concat(n.afterBody),S),C=e.displayColors?o+2+e.boxPadding:0,Vt(i,x=>{Vt(x.before,S),Vt(x.lines,S),Vt(x.after,S)}),C=0,t.font=h.string,Vt(n.footer,S),t.restore(),w+=g.width,{width:w,height:m}}function bJ(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function yJ(n,e,t,i){const{x:s,width:r}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&s+r+o>e.width||n==="right"&&s-r-o<0)return!0}function CJ(n,e,t,i){const{x:s,width:r}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),yJ(c,n,e,t)&&(c="center"),c}function LD(n,e,t){const i=t.yAlign||e.yAlign||bJ(n,t);return{xAlign:t.xAlign||e.xAlign||CJ(n,e,t,i),yAlign:i}}function SJ(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function _J(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function $D(n,e,t,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=s+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=Cu(o);let g=SJ(e,a);const m=_J(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(h,d)+s:a==="right"&&(g+=Math.max(u,f)+s),{x:vi(g,0,i.width-e.width),y:vi(m,0,i.height-e.height)}}function Hv(n,e,t){const i=zi(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function FD(n){return Lo([],Ua(n))}function RJ(n,e,t){return Xc(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function BD(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const pj={beforeTitle:Ma,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Ma,beforeBody:Ma,beforeLabel:Ma,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return _t(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ma,afterBody:Ma,beforeFooter:Ma,footer:Ma,afterFooter:Ma};function cs(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?pj[e].call(t,i):s}class NT extends fo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,r=new K2(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=RJ(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=cs(i,"beforeTitle",this,e),r=cs(i,"title",this,e),o=cs(i,"afterTitle",this,e);let a=[];return a=Lo(a,Ua(s)),a=Lo(a,Ua(r)),a=Lo(a,Ua(o)),a}getBeforeBody(e,t){return FD(cs(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return Vt(e,r=>{const o={before:[],lines:[],after:[]},a=BD(i,r);Lo(o.before,Ua(cs(a,"beforeLabel",this,r))),Lo(o.lines,cs(a,"label",this,r)),Lo(o.after,Ua(cs(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,t){return FD(cs(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=cs(i,"beforeFooter",this,e),r=cs(i,"footer",this,e),o=cs(i,"afterFooter",this,e);let a=[];return a=Lo(a,Ua(s)),a=Lo(a,Ua(r)),a=Lo(a,Ua(o)),a}_createItems(e){const t=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(vJ(this.chart,t[l]));return e.filter&&(a=a.filter((h,u,d)=>e.filter(h,u,d,i))),e.itemSort&&(a=a.sort((h,u)=>e.itemSort(h,u,i))),Vt(a,h=>{const u=BD(e.callbacks,h);s.push(cs(u,"labelColor",this,h)),r.push(cs(u,"labelPointStyle",this,h)),o.push(cs(u,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=hp[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=ND(this,i),c=Object.assign({},a,l),h=LD(this.chart,i,c),u=$D(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const r=this.getCaretPosition(e,i,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:u}=Cu(a),{x:d,y:f}=e,{width:g,height:m}=t;let w,v,C,S,x,_;return r==="center"?(x=f+m/2,s==="left"?(w=d,v=w-o,S=x+o,_=x-o):(w=d+g,v=w+o,S=x-o,_=x+o),C=w):(s==="left"?v=d+Math.max(l,h)+o:s==="right"?v=d+g-Math.max(c,u)-o:v=this.caretX,r==="top"?(S=f,x=S-o,w=v-o,C=v+o):(S=f+m,x=S+o,w=v+o,C=v-o),_=S),{x1:w,x2:v,x3:C,y1:S,y2:x,y3:_}}drawTitle(e,t,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Mf(i.rtl,this.x,this.width);for(e.x=Hv(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=ci(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<r;++l)t.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,h=ci(r.bodyFont),u=Hv(this,"left",r),d=s.x(u),f=l<h.lineHeight?(h.lineHeight-l)/2:0,g=t.y+f;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=s.leftForLtr(d,c)+c/2,v=g+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,PT(e,m,w,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,PT(e,m,w,v)}else{e.lineWidth=gt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=s.leftForLtr(d,c),w=s.leftForLtr(s.xPlus(d,1),c-2),v=Cu(o.borderRadius);Object.values(v).some(C=>C!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,qp(e,{x:m,y:g,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),qp(e,{x:w,y:g+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(m,g,c,l),e.strokeRect(m,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,u=ci(i.bodyFont);let d=u.lineHeight,f=0;const g=Mf(i.rtl,this.x,this.width),m=function(O){t.fillText(O,g.x(e.x+f),e.y+d/2),e.y+=d+r},w=g.textAlign(o);let v,C,S,x,_,R,M;for(t.textAlign=o,t.textBaseline="middle",t.font=u.string,e.x=Hv(this,w,i),t.fillStyle=i.bodyColor,Vt(this.beforeBody,m),f=a&&w!=="right"?o==="center"?c/2+h:c+2+h:0,x=0,R=s.length;x<R;++x){for(v=s[x],C=this.labelTextColors[x],t.fillStyle=C,Vt(v.before,m),S=v.lines,a&&S.length&&(this._drawColorBox(t,e,x,g,i),d=Math.max(u.lineHeight,l)),_=0,M=S.length;_<M;++_)m(S[_]),d=u.lineHeight;Vt(v.after,m)}f=0,d=u.lineHeight,Vt(this.afterBody,m),e.y-=r}drawFooter(e,t,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Mf(i.rtl,this.x,this.width);for(e.x=Hv(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=ci(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<r;++a)t.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:g}=Cu(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(a+u,l),o==="top"&&this.drawCaret(e,t,i,s),t.lineTo(a+c-d,l),t.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(e,t,i,s),t.lineTo(a+c,l+h-g),t.quadraticCurveTo(a+c,l+h,a+c-g,l+h),o==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(a+f,l+h),t.quadraticCurveTo(a,l+h,a,l+h-f),o==="center"&&r==="left"&&this.drawCaret(e,t,i,s),t.lineTo(a,l+u),t.quadraticCurveTo(a,l,a+u,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=hp[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=ND(this,e),l=Object.assign({},o,this._size),c=LD(t,e,l),h=$D(e,l,c,t);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=zi(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,t),j2(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),z2(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!MC(i,s),o=this._positionChanged(s,t);(r||o)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,i),a=this._positionChanged(o,e),l=t||!MC(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:s,options:r}=this,o=hp[r.position].call(this,e,t);return o!==!1&&(i!==o.x||s!==o.y)}}NT.positioners=hp;var xJ={id:"tooltip",_element:NT,positioners:hp,afterInit(n,e,t){t&&(n.tooltip=new NT({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pj},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},EJ=Object.freeze({__proto__:null,Colors:$Z,Decimation:WZ,Filler:lJ,Legend:gJ,SubTitle:wJ,Title:pJ,Tooltip:xJ});const TJ=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function MJ(n,e,t,i){const s=n.indexOf(e);if(s===-1)return TJ(n,e,t,i);const r=n.lastIndexOf(e);return s!==r?t:s}const AJ=(n,e)=>n===null?null:vi(Math.round(n),0,e);function wj(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class uA extends Xu{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:r}of t)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(_t(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:MJ(i,e,Ze(t,e),this._addedLabels),AJ(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)s.push({value:o});return s}getLabelForValue(e){return wj.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}uA.id="category";uA.defaults={ticks:{callback:wj}};function PJ(n,e){const t=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:d}=n,f=r||1,g=h-1,{min:m,max:w}=e,v=!_t(o),C=!_t(a),S=!_t(c),x=(w-m)/(u+1);let _=LH((w-m)/g/f)*f,R,M,O,P;if(_<1e-14&&!v&&!C)return[{value:m},{value:w}];P=Math.ceil(w/_)-Math.floor(m/_),P>g&&(_=LH(P*_/g/f)*f),_t(l)||(R=Math.pow(10,l),_=Math.ceil(_*R)/R),s==="ticks"?(M=Math.floor(m/_)*_,O=Math.ceil(w/_)*_):(M=m,O=w),v&&C&&r&&_q((a-o)/r,_/1e3)?(P=Math.round(Math.min((a-o)/_,h)),_=(a-o)/P,M=o,O=a):S?(M=v?o:M,O=C?a:O,P=c-1,_=(O-M)/P):(P=(O-M)/_,ap(P,Math.round(P),_/1e3)?P=Math.round(P):P=Math.ceil(P));const k=Math.max($H(_),$H(M));R=Math.pow(10,_t(l)?k:l),M=Math.round(M*R)/R,O=Math.round(O*R)/R;let B=0;for(v&&(d&&M!==o?(t.push({value:o}),M<o&&B++,ap(Math.round((M+B*_)*R)/R,o,VD(o,x,n))&&B++):M<o&&B++);B<P;++B){const z=Math.round((M+B*_)*R)/R;if(C&&z>a)break;t.push({value:z})}return C&&d&&O!==a?t.length&&ap(t[t.length-1].value,a,VD(a,x,n))?t[t.length-1].value=a:t.push({value:a}):(!C||O===a)&&t.push({value:O}),t}function VD(n,e,{horizontal:t,minRotation:i}){const s=Jr(i),r=(t?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+n).length;return Math.min(e/r,o)}class NC extends Xu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return _t(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=t?s:l,a=l=>r=i?r:l;if(e){const l=sa(s),c=sa(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=PJ(s,r);return e.bounds==="ticks"&&E2(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Mw(e,this.chart.options.locale,this.options.ticks.format)}}class dA extends NC{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ln(e)?e:0,this.max=Ln(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Jr(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}dA.id="linear";dA.defaults={ticks:{callback:s0.formatters.numeric}};const Qp=n=>Math.floor(mc(n)),lh=(n,e)=>Math.pow(10,Qp(n)+e);function WD(n){return n/Math.pow(10,Qp(n))===1}function jD(n,e,t){const i=Math.pow(10,t),s=Math.floor(n/i);return Math.ceil(e/i)-s}function IJ(n,e){const t=e-n;let i=Qp(t);for(;jD(n,e,i)>10;)i++;for(;jD(n,e,i)<10;)i--;return Math.min(i,Qp(n))}function OJ(n,{min:e,max:t}){e=ks(n.min,e);const i=[],s=Qp(e);let r=IJ(e,t),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let u=Math.floor((c-h)/Math.pow(10,r)),d=ks(n.min,Math.round((l+h+u*Math.pow(10,r))*o)/o);for(;d<t;)i.push({value:d,major:WD(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),d=Math.round((l+h+u*Math.pow(10,r))*o)/o;const f=ks(n.max,d);return i.push({value:f,major:WD(f),significand:u}),i}class fA extends Xu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=NC.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Ln(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ln(e)?Math.max(0,e):null,this.max=Ln(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ln(this._userMin)&&(this.min=e===lh(this.min,0)?lh(this.min,-1):lh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=t?s:a;i===s&&(i<=0?(r(1),o(10)):(r(lh(i,-1)),o(lh(s,1)))),i<=0&&r(lh(s,-1)),s<=0&&o(lh(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=OJ(t,this);return e.bounds==="ticks"&&E2(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Mw(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=mc(e),this._valueRange=mc(this.max)-mc(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(mc(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}fA.id="logarithmic";fA.defaults={ticks:{callback:s0.formatters.logarithmic,major:{enabled:!0}}};function LT(n){const e=n.ticks;if(e.display&&n.display){const t=zi(e.backdropPadding);return Ze(e.font&&e.font.size,vn.font.size)+t.height}return 0}function kJ(n,e,t){return t=pn(t)?t:[t],{w:Bq(n,e.string,t),h:t.length*e.lineHeight}}function zD(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function HJ(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?cn/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;const h=n.getPointPosition(l,n.drawingArea+s[l],a),u=ci(c.font),d=kJ(n.ctx,u,n._pointLabels[l]);i[l]=d;const f=Bs(n.getIndexAngle(l)+a),g=Math.round(Q1(f)),m=zD(g,h.x,d.w,0,180),w=zD(g,h.y,d.h,90,270);DJ(t,e,f,m,w)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=$J(n,i,s)}function DJ(n,e,t,i,s){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,n.r=Math.max(n.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,n.t=Math.min(n.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function NJ(n,e,t){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=t,l=n.getPointPosition(e,i+s+o,r),c=Math.round(Q1(Bs(l.angle+Wn))),h=VJ(l.y,a.h,c),u=FJ(c),d=BJ(l.x,a.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+a.w,bottom:h+a.h}}function LJ(n,e){if(!e)return!0;const{left:t,top:i,right:s,bottom:r}=n;return!(al({x:t,y:i},e)||al({x:t,y:r},e)||al({x:s,y:i},e)||al({x:s,y:r},e))}function $J(n,e,t){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:LT(r)/2,additionalAngle:o?cn/s:0};let c;for(let h=0;h<s;h++){l.padding=t[h],l.size=e[h];const u=NJ(n,h,l);i.push(u),a==="auto"&&(u.visible=LJ(u,c),u.visible&&(c=u))}return i}function FJ(n){return n===0||n===180?"center":n<180?"left":"right"}function BJ(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function VJ(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function WJ(n,e,t){const{left:i,top:s,right:r,bottom:o}=t,{backdropColor:a}=e;if(!_t(a)){const l=Cu(e.borderRadius),c=zi(e.backdropPadding);n.fillStyle=a;const h=i-c.left,u=s-c.top,d=r-i+c.width,f=o-s+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),qp(n,{x:h,y:u,w:d,h:f,radius:l}),n.fill()):n.fillRect(h,u,d,f)}}function jJ(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));WJ(t,o,r);const a=ci(o.font),{x:l,y:c,textAlign:h}=r;Du(t,n._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function vj(n,e,t,i){const{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,ln);else{let r=n.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function zJ(n,e,t,i,s){const r=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),vj(n,t,o,i),r.closePath(),r.stroke(),r.restore())}function UJ(n,e,t){return Xc(n,{label:t,index:e,type:"pointLabel"})}class Ow extends NC{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=zi(LT(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Ln(e)&&!isNaN(e)?e:0,this.max=Ln(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/LT(this.options))}generateTickLabels(e){NC.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const s=tn(this.options.pointLabels.callback,[t,i],this);return s||s===0?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?HJ(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){const t=ln/(this._pointLabels.length||1),i=this.options.startAngle||0;return Bs(e*t+Jr(i))}getDistanceFromCenterForValue(e){if(_t(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(_t(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return UJ(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-Wn+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),vj(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s,border:r}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&jJ(this,o),s.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const d=this.getContext(u),f=s.setContext(d),g=r.setContext(d);zJ(this,f,l,o,g)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=h;!d||!u||(e.lineWidth=d,e.strokeStyle=u,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),h=ci(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const u=zi(c.backdropPadding);e.fillRect(-o/2-u.left,-r-h.size/2-u.top,o+u.width,h.size+u.height)}Du(e,a.label,0,-r,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ow.id="radialLinear";Ow.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:s0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};Ow.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};Ow.descriptors={angleLines:{_fallback:"grid"}};const m0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},xs=Object.keys(m0);function UD(n,e){return n-e}function YD(n,e){if(_t(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Ln(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(s&&(o=s==="week"&&(Wf(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,s)),+o)}function GD(n,e,t,i){const s=xs.length;for(let r=xs.indexOf(n);r<s-1;++r){const o=m0[xs[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return xs[r]}return xs[s-1]}function YJ(n,e,t,i,s){for(let r=xs.length-1;r>=xs.indexOf(t);r--){const o=xs[r];if(m0[o].common&&n._adapter.diff(s,i,o)>=e-1)return o}return xs[t?xs.indexOf(t):0]}function GJ(n){for(let e=xs.indexOf(n)+1,t=xs.length;e<t;++e)if(m0[xs[e]].common)return xs[e]}function KD(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=Z1(t,e),r=t[i]>=e?t[i]:t[s];n[r]=!0}}function KJ(n,e,t,i){const s=n._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function qD(n,e,t){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!t?i:KJ(n,i,s,t)}class kw extends Xu{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new nQ._date(e.adapters.date);s.init(t),op(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:YD(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ln(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),r=Ln(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=Tq(s,r,o);return this._unit=t.unit||(i.autoSkip?GD(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):YJ(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:GJ(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),qD(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=vi(t,0,o),i=vi(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||GD(r.minUnit,t,i,this._getLabelCapacity(t)),a=Ze(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Wf(l)||l===!0,h={};let u=t,d,f;if(c&&(u=+e.startOf(u,"isoWeek",l)),u=+e.startOf(u,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(d=u,f=0;d<i;d=+e.add(d,a,o),f++)KD(h,d,g);return(d===i||s.bounds==="ticks"||f===1)&&KD(h,d,g),Object.keys(h).sort(UD).map(m=>+m)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,o=t||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,s){const r=this.options,o=r.ticks.callback;if(o)return tn(o,[e,t,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],u=c&&a[c],d=i[t],f=c&&u&&d&&d.major;return this._adapter.format(e,s||(f?u:h))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=Jr(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,qD(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(YD(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return A2(e.sort(UD))}}kw.id="time";kw.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};function Dv(n,e,t){let i=0,s=n.length-1,r,o,a,l;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=ol(n,"pos",e)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=ol(n,"time",e)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class gA extends kw{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Dv(t,this.min),this._tableRange=Dv(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],r=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Dv(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Dv(this._table,i*this._tableRange+this._minPos,!0)}}gA.id="timeseries";gA.defaults=kw.defaults;var qJ=Object.freeze({__proto__:null,CategoryScale:uA,LinearScale:dA,LogarithmicScale:fA,RadialLinearScale:Ow,TimeScale:kw,TimeSeriesScale:gA});const XJ=[tQ,IZ,EJ,qJ];Pl.register(...XJ);function bj(n,e,t,i={}){return new Pl(n,{type:e,data:t,options:i})}var yj;let Cj;function QJ(n,e,t,i,s,r){var o,a,l,c,h,u,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,m=Object.create,w=[m(null),m(null)],v=e.length;function C(R,M,O){return function(P,k){M&&(k=P,P=n);for(var B=0;B<R.length;B++)k=R[B].apply(P,O?[k]:[]);return O?k:P}}function S(R,M,O,P){if(typeof R!="function"&&(P||R!==void 0))throw new TypeError(M+" must "+(O||"be")+" a function"+(P?"":" or undefined"));return R}function x(R,M,O,P,k,B,z,Q,te,ne,j){function ie(re){if(!j(re))throw new TypeError("Attempted to access private element on non-instance")}var oe=[].concat(M[0]),J=M[3],pe=!z,p=k===1,b=k===3,y=k===4,T=k===2;function H(re,ce,Be){return function(Se,_e){return ce&&(_e=Se,Se=R),Be&&Be(Se),E[re].call(Se,_e)}}if(!pe){var E={},D=[],K=b?"get":y||p?"set":"value";if(te?(ne||p?E={get:XD(function(){return J(this)},P,"get"),set:function(re){M[4](this,re)}}:E[K]=J,ne||XD(E[K],P,T?"":K)):ne||(E=Object.getOwnPropertyDescriptor(R,P)),!ne&&!te){if((a=w[+Q][P])&&(a^k)!=7)throw Error("Decorating two elements with the same name ("+E[K].name+") is not supported yet");w[+Q][P]=k<3?1:k}}for(var ee=R,he=oe.length-1;he>=0;he-=O?2:1){var se=S(oe[he],"A decorator","be",!0),Ie=O?oe[he-1]:void 0,xe={},X={kind:["field","accessor","method","getter","setter","class"][k],name:P,metadata:o,addInitializer:(function(re,ce){if(re.v)throw new TypeError("attempted to call addInitializer after decoration was finished");S(ce,"An initializer","be",!0),B.push(ce)}).bind(null,xe)};if(pe)a=se.call(Ie,ee,X),xe.v=1,S(a,"class decorators","return")&&(ee=a);else if(X.static=Q,X.private=te,a=X.access={has:te?j.bind():function(re){return P in re}},y||(a.get=te?T?function(re){return ie(re),E.value}:H("get",0,ie):function(re){return re[P]}),T||b||(a.set=te?H("set",0,ie):function(re,ce){re[P]=ce}),ee=se.call(Ie,p?{get:E.get,set:E.set}:E[K],X),xe.v=1,p){if(typeof ee=="object"&&ee)(a=S(ee.get,"accessor.get"))&&(E.get=a),(a=S(ee.set,"accessor.set"))&&(E.set=a),(a=S(ee.init,"accessor.init"))&&D.unshift(a);else if(ee!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else S(ee,(ne?"field":"method")+" decorators","return")&&(ne?D.unshift(ee):E[K]=ee)}return k<2&&z.push(C(D,Q,1),C(B,Q,0)),ne||pe||(te?p?z.splice(-1,0,H("get",Q),H("set",Q)):z.push(T?E[K]:S.call.bind(E[K])):g(R,P,E)),ee}function _(R){return g(R,f,{configurable:!0,enumerable:!0,value:o})}return o=m(o??null),h=[],u=function(R){R&&h.push(C(R))},d=function(R,M){for(var O=0;O<t.length;O++){var P=t[O],k=P[1],B=7&k;if((8&k)==R&&!B==M){var z=P[2],Q=!!P[3],te=16&k;x(R?n:n.prototype,P,te,Q?"#"+z:ZJ(z),B,B<2?[]:R?c=c||[]:l=l||[],h,!!R,Q,M,R&&Q?function(ne){return eee(ne)===n}:s)}}},d(8,0),d(0,0),d(8,1),d(0,1),u(l),u(c),a=h,v||_(n),{e:a,get c(){var R=[];return v&&[_(n=x(n,[e],i,n.name,5,R)),C(R,1)]}}}function ZJ(n){var e=JJ(n,"string");return typeof e=="symbol"?e:e+""}function JJ(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function XD(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function eee(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let p0;class tee{constructor(){this.mychart=void 0}bind(){}attached(){const e=[{year:2010,count:10},{year:2011,count:20},{year:2012,count:15},{year:2013,count:25},{year:2014,count:22},{year:2015,count:30},{year:2016,count:28}],t={labels:e.map(i=>i.year),datasets:[{label:"Acquisitions by year",data:e.map(i=>i.count)}]};this.chartjs=bj(this.mychart,"bar",t)}}yj=tee;[p0,Cj]=QJ(yj,[n0({...z8,name:"sv-chartjs"})],[]).c;Cj();const nee=Object.freeze(Object.defineProperty({__proto__:null,get Chartjs(){return p0}},Symbol.toStringTag,{value:"Module"})),Sj="chartjs-scatter",$T=`<div>
    chart-scatter view - should not be used
    <canvas ref="mychart"></canvas>
</div>
`,_j=[],Rj={};let pR;function iee(n){pR||(pR=yr.define({name:Sj,template:$T,dependencies:_j,bindables:Rj})),n.register(pR)}const see=Object.freeze(Object.defineProperty({__proto__:null,bindables:Rj,default:$T,dependencies:_j,name:Sj,register:iee,template:$T},Symbol.toStringTag,{value:"Module"}));var xj;let Ej;function ree(n,e,t,i,s,r){var o,a,l,c,h,u,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,m=Object.create,w=[m(null),m(null)],v=e.length;function C(R,M,O){return function(P,k){M&&(k=P,P=n);for(var B=0;B<R.length;B++)k=R[B].apply(P,O?[k]:[]);return O?k:P}}function S(R,M,O,P){if(typeof R!="function"&&(P||R!==void 0))throw new TypeError(M+" must "+(O||"be")+" a function"+(P?"":" or undefined"));return R}function x(R,M,O,P,k,B,z,Q,te,ne,j){function ie(re){if(!j(re))throw new TypeError("Attempted to access private element on non-instance")}var oe=[].concat(M[0]),J=M[3],pe=!z,p=k===1,b=k===3,y=k===4,T=k===2;function H(re,ce,Be){return function(Se,_e){return ce&&(_e=Se,Se=R),Be&&Be(Se),E[re].call(Se,_e)}}if(!pe){var E={},D=[],K=b?"get":y||p?"set":"value";if(te?(ne||p?E={get:QD(function(){return J(this)},P,"get"),set:function(re){M[4](this,re)}}:E[K]=J,ne||QD(E[K],P,T?"":K)):ne||(E=Object.getOwnPropertyDescriptor(R,P)),!ne&&!te){if((a=w[+Q][P])&&(a^k)!=7)throw Error("Decorating two elements with the same name ("+E[K].name+") is not supported yet");w[+Q][P]=k<3?1:k}}for(var ee=R,he=oe.length-1;he>=0;he-=O?2:1){var se=S(oe[he],"A decorator","be",!0),Ie=O?oe[he-1]:void 0,xe={},X={kind:["field","accessor","method","getter","setter","class"][k],name:P,metadata:o,addInitializer:(function(re,ce){if(re.v)throw new TypeError("attempted to call addInitializer after decoration was finished");S(ce,"An initializer","be",!0),B.push(ce)}).bind(null,xe)};if(pe)a=se.call(Ie,ee,X),xe.v=1,S(a,"class decorators","return")&&(ee=a);else if(X.static=Q,X.private=te,a=X.access={has:te?j.bind():function(re){return P in re}},y||(a.get=te?T?function(re){return ie(re),E.value}:H("get",0,ie):function(re){return re[P]}),T||b||(a.set=te?H("set",0,ie):function(re,ce){re[P]=ce}),ee=se.call(Ie,p?{get:E.get,set:E.set}:E[K],X),xe.v=1,p){if(typeof ee=="object"&&ee)(a=S(ee.get,"accessor.get"))&&(E.get=a),(a=S(ee.set,"accessor.set"))&&(E.set=a),(a=S(ee.init,"accessor.init"))&&D.unshift(a);else if(ee!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else S(ee,(ne?"field":"method")+" decorators","return")&&(ne?D.unshift(ee):E[K]=ee)}return k<2&&z.push(C(D,Q,1),C(B,Q,0)),ne||pe||(te?p?z.splice(-1,0,H("get",Q),H("set",Q)):z.push(T?E[K]:S.call.bind(E[K])):g(R,P,E)),ee}function _(R){return g(R,f,{configurable:!0,enumerable:!0,value:o})}return r!==void 0&&(o=r[f]),o=m(o??null),h=[],u=function(R){R&&h.push(C(R))},d=function(R,M){for(var O=0;O<t.length;O++){var P=t[O],k=P[1],B=7&k;if((8&k)==R&&!B==M){var z=P[2],Q=!!P[3],te=16&k;x(R?n:n.prototype,P,te,Q?"#"+z:oee(z),B,B<2?[]:R?c=c||[]:l=l||[],h,!!R,Q,M,R&&Q?function(ne){return lee(ne)===n}:s)}}},d(8,0),d(0,0),d(8,1),d(0,1),u(l),u(c),a=h,v||_(n),{e:a,get c(){var R=[];return v&&[_(n=x(n,[e],i,n.name,5,R)),C(R,1)]}}}function oee(n){var e=aee(n,"string");return typeof e=="symbol"?e:e+""}function aee(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function QD(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function lee(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let Tj;class cee extends p0{constructor(...e){super(...e),this.mychart=void 0}bind(){}attached(){const e={datasets:[{label:"First Dataset",data:[{x:20,y:30,r:15},{x:40,y:10,r:10},{x:30,y:12,r:5}]},{label:"Second Dataset",data:[{x:19,y:32,r:2},{x:41,y:12,r:5},{x:35,y:11,r:6}]}]};this.chartjs=bj(this.mychart,"bubble",e)}}xj=cee;[Tj,Ej]=ree(xj,[n0({...see,name:"sv-chartjs-scatter"})],[],0,void 0,p0).c;Ej();const hee=Object.freeze(Object.defineProperty({__proto__:null,get ChartjsScatter(){return Tj}},Symbol.toStringTag,{value:"Module"})),Mj="table",FT='<div ref="mytable">here is table</div>',Aj=[],Pj={};let wR;function uee(n){wR||(wR=yr.define({name:Mj,template:FT,dependencies:Aj,bindables:Pj})),n.register(wR)}const dee=Object.freeze(Object.defineProperty({__proto__:null,bindables:Pj,default:FT,dependencies:Aj,name:Mj,register:uee,template:FT},Symbol.toStringTag,{value:"Module"}));var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fee(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pg=function(n){return n&&n.Math===Math&&n},xi=Pg(typeof globalThis=="object"&&globalThis)||Pg(typeof window=="object"&&window)||Pg(typeof self=="object"&&self)||Pg(typeof Nv=="object"&&Nv)||Pg(typeof Nv=="object"&&Nv)||function(){return this}()||Function("return this")(),mA={},Es=function(n){try{return!!n()}catch{return!0}},gee=Es,go=!gee(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),mee=Es,w0=!mee(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),pee=w0,Lv=Function.prototype.call,mo=pee?Lv.bind(Lv):function(){return Lv.apply(Lv,arguments)},Ij={},Oj={}.propertyIsEnumerable,kj=Object.getOwnPropertyDescriptor,wee=kj&&!Oj.call({1:2},1);Ij.f=wee?function(e){var t=kj(this,e);return!!t&&t.enumerable}:Oj;var v0=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}},Hj=w0,Dj=Function.prototype,BT=Dj.call,vee=Hj&&Dj.bind.bind(BT,BT),ei=Hj?vee:function(n){return function(){return BT.apply(n,arguments)}},Nj=ei,bee=Nj({}.toString),yee=Nj("".slice),Qu=function(n){return yee(bee(n),8,-1)},Cee=ei,See=Es,_ee=Qu,vR=Object,Ree=Cee("".split),xee=See(function(){return!vR("z").propertyIsEnumerable(0)})?function(n){return _ee(n)==="String"?Ree(n,""):vR(n)}:vR,b0=function(n){return n==null},Eee=b0,Tee=TypeError,Hw=function(n){if(Eee(n))throw new Tee("Can't call method on "+n);return n},Mee=xee,Aee=Hw,y0=function(n){return Mee(Aee(n))},bR=typeof document=="object"&&document.all,Ei=typeof bR>"u"&&bR!==void 0?function(n){return typeof n=="function"||n===bR}:function(n){return typeof n=="function"},Pee=Ei,va=function(n){return typeof n=="object"?n!==null:Pee(n)},yR=xi,Iee=Ei,Oee=function(n){return Iee(n)?n:void 0},sg=function(n,e){return arguments.length<2?Oee(yR[n]):yR[n]&&yR[n][e]},kee=ei,C0=kee({}.isPrototypeOf),Hee=xi,ZD=Hee.navigator,JD=ZD&&ZD.userAgent,S0=JD?String(JD):"",Lj=xi,CR=S0,eN=Lj.process,tN=Lj.Deno,nN=eN&&eN.versions||tN&&tN.version,iN=nN&&nN.v8,Zr,LC;iN&&(Zr=iN.split("."),LC=Zr[0]>0&&Zr[0]<4?1:+(Zr[0]+Zr[1]));!LC&&CR&&(Zr=CR.match(/Edge\/(\d+)/),(!Zr||Zr[1]>=74)&&(Zr=CR.match(/Chrome\/(\d+)/),Zr&&(LC=+Zr[1])));var Dee=LC,sN=Dee,Nee=Es,Lee=xi,$ee=Lee.String,pA=!!Object.getOwnPropertySymbols&&!Nee(function(){var n=Symbol("symbol detection");return!$ee(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&sN&&sN<41}),Fee=pA,$j=Fee&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Bee=sg,Vee=Ei,Wee=C0,jee=$j,zee=Object,wA=jee?function(n){return typeof n=="symbol"}:function(n){var e=Bee("Symbol");return Vee(e)&&Wee(e.prototype,zee(n))},Uee=String,_0=function(n){try{return Uee(n)}catch{return"Object"}},Yee=Ei,Gee=_0,Kee=TypeError,Dw=function(n){if(Yee(n))return n;throw new Kee(Gee(n)+" is not a function")},qee=Dw,Xee=b0,R0=function(n,e){var t=n[e];return Xee(t)?void 0:qee(t)},SR=mo,_R=Ei,RR=va,Qee=TypeError,Zee=function(n,e){var t,i;if(e==="string"&&_R(t=n.toString)&&!RR(i=SR(t,n))||_R(t=n.valueOf)&&!RR(i=SR(t,n))||e!=="string"&&_R(t=n.toString)&&!RR(i=SR(t,n)))return i;throw new Qee("Can't convert object to primitive value")},Fj={exports:{}},rN=xi,Jee=Object.defineProperty,vA=function(n,e){try{Jee(rN,n,{value:e,configurable:!0,writable:!0})}catch{rN[n]=e}return e},ete=xi,tte=vA,oN="__core-js_shared__",aN=Fj.exports=ete[oN]||tte(oN,{});(aN.versions||(aN.versions=[])).push({version:"3.39.0",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"});var bA=Fj.exports,lN=bA,Bj=function(n,e){return lN[n]||(lN[n]=e||{})},nte=Hw,ite=Object,Nw=function(n){return ite(nte(n))},ste=ei,rte=Nw,ote=ste({}.hasOwnProperty),ba=Object.hasOwn||function(e,t){return ote(rte(e),t)},ate=ei,lte=0,cte=Math.random(),hte=ate(1 .toString),Vj=function(n){return"Symbol("+(n===void 0?"":n)+")_"+hte(++lte+cte,36)},ute=xi,dte=Bj,cN=ba,fte=Vj,gte=pA,mte=$j,bf=ute.Symbol,xR=dte("wks"),pte=mte?bf.for||bf:bf&&bf.withoutSetter||fte,Zc=function(n){return cN(xR,n)||(xR[n]=gte&&cN(bf,n)?bf[n]:pte("Symbol."+n)),xR[n]},wte=mo,hN=va,uN=wA,vte=R0,bte=Zee,yte=Zc,Cte=TypeError,Ste=yte("toPrimitive"),_te=function(n,e){if(!hN(n)||uN(n))return n;var t=vte(n,Ste),i;if(t){if(e===void 0&&(e="default"),i=wte(t,n,e),!hN(i)||uN(i))return i;throw new Cte("Can't convert object to primitive value")}return e===void 0&&(e="number"),bte(n,e)},Rte=_te,xte=wA,Wj=function(n){var e=Rte(n,"string");return xte(e)?e:e+""},Ete=xi,dN=va,VT=Ete.document,Tte=dN(VT)&&dN(VT.createElement),yA=function(n){return Tte?VT.createElement(n):{}},Mte=go,Ate=Es,Pte=yA,jj=!Mte&&!Ate(function(){return Object.defineProperty(Pte("div"),"a",{get:function(){return 7}}).a!==7}),Ite=go,Ote=mo,kte=Ij,Hte=v0,Dte=y0,Nte=Wj,Lte=ba,$te=jj,fN=Object.getOwnPropertyDescriptor;mA.f=Ite?fN:function(e,t){if(e=Dte(e),t=Nte(t),$te)try{return fN(e,t)}catch{}if(Lte(e,t))return Hte(!Ote(kte.f,e,t),e[t])};var Jc={},Fte=go,Bte=Es,zj=Fte&&Bte(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Vte=va,Wte=String,jte=TypeError,Il=function(n){if(Vte(n))return n;throw new jte(Wte(n)+" is not an object")},zte=go,Ute=jj,Yte=zj,$v=Il,gN=Wj,Gte=TypeError,ER=Object.defineProperty,Kte=Object.getOwnPropertyDescriptor,TR="enumerable",MR="configurable",AR="writable";Jc.f=zte?Yte?function(e,t,i){if($v(e),t=gN(t),$v(i),typeof e=="function"&&t==="prototype"&&"value"in i&&AR in i&&!i[AR]){var s=Kte(e,t);s&&s[AR]&&(e[t]=i.value,i={configurable:MR in i?i[MR]:s[MR],enumerable:TR in i?i[TR]:s[TR],writable:!1})}return ER(e,t,i)}:ER:function(e,t,i){if($v(e),t=gN(t),$v(i),Ute)try{return ER(e,t,i)}catch{}if("get"in i||"set"in i)throw new Gte("Accessors not supported");return"value"in i&&(e[t]=i.value),e};var qte=go,Xte=Jc,Qte=v0,Lw=qte?function(n,e,t){return Xte.f(n,e,Qte(1,t))}:function(n,e,t){return n[e]=t,n},Uj={exports:{}},WT=go,Zte=ba,Yj=Function.prototype,Jte=WT&&Object.getOwnPropertyDescriptor,CA=Zte(Yj,"name"),ene=CA&&(function(){}).name==="something",tne=CA&&(!WT||WT&&Jte(Yj,"name").configurable),nne={EXISTS:CA,PROPER:ene,CONFIGURABLE:tne},ine=ei,sne=Ei,jT=bA,rne=ine(Function.toString);sne(jT.inspectSource)||(jT.inspectSource=function(n){return rne(n)});var one=jT.inspectSource,ane=xi,lne=Ei,mN=ane.WeakMap,cne=lne(mN)&&/native code/.test(String(mN)),hne=Bj,une=Vj,pN=hne("keys"),Gj=function(n){return pN[n]||(pN[n]=une(n))},SA={},dne=cne,Kj=xi,fne=va,gne=Lw,PR=ba,IR=bA,mne=Gj,pne=SA,wN="Object already initialized",zT=Kj.TypeError,wne=Kj.WeakMap,$C,Zp,FC,vne=function(n){return FC(n)?Zp(n):$C(n,{})},bne=function(n){return function(e){var t;if(!fne(e)||(t=Zp(e)).type!==n)throw new zT("Incompatible receiver, "+n+" required");return t}};if(dne||IR.state){var bo=IR.state||(IR.state=new wne);bo.get=bo.get,bo.has=bo.has,bo.set=bo.set,$C=function(n,e){if(bo.has(n))throw new zT(wN);return e.facade=n,bo.set(n,e),e},Zp=function(n){return bo.get(n)||{}},FC=function(n){return bo.has(n)}}else{var pd=mne("state");pne[pd]=!0,$C=function(n,e){if(PR(n,pd))throw new zT(wN);return e.facade=n,gne(n,pd,e),e},Zp=function(n){return PR(n,pd)?n[pd]:{}},FC=function(n){return PR(n,pd)}}var yne={set:$C,get:Zp,has:FC,enforce:vne,getterFor:bne},_A=ei,Cne=Es,Sne=Ei,Fv=ba,UT=go,_ne=nne.CONFIGURABLE,Rne=one,qj=yne,xne=qj.enforce,Ene=qj.get,vN=String,Dy=Object.defineProperty,Tne=_A("".slice),Mne=_A("".replace),Ane=_A([].join),Pne=UT&&!Cne(function(){return Dy(function(){},"length",{value:8}).length!==8}),Ine=String(String).split("String"),One=Uj.exports=function(n,e,t){Tne(vN(e),0,7)==="Symbol("&&(e="["+Mne(vN(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!Fv(n,"name")||_ne&&n.name!==e)&&(UT?Dy(n,"name",{value:e,configurable:!0}):n.name=e),Pne&&t&&Fv(t,"arity")&&n.length!==t.arity&&Dy(n,"length",{value:t.arity});try{t&&Fv(t,"constructor")&&t.constructor?UT&&Dy(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var i=xne(n);return Fv(i,"source")||(i.source=Ane(Ine,typeof e=="string"?e:"")),n};Function.prototype.toString=One(function(){return Sne(this)&&Ene(this).source||Rne(this)},"toString");var kne=Uj.exports,Hne=Ei,Dne=Jc,Nne=kne,Lne=vA,$ne=function(n,e,t,i){i||(i={});var s=i.enumerable,r=i.name!==void 0?i.name:e;if(Hne(t)&&Nne(t,r,i),i.global)s?n[e]=t:Lne(e,t);else{try{i.unsafe?n[e]&&(s=!0):delete n[e]}catch{}s?n[e]=t:Dne.f(n,e,{value:t,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return n},Xj={},Fne=Math.ceil,Bne=Math.floor,Vne=Math.trunc||function(e){var t=+e;return(t>0?Bne:Fne)(t)},Wne=Vne,$w=function(n){var e=+n;return e!==e||e===0?0:Wne(e)},jne=$w,zne=Math.max,Une=Math.min,Yne=function(n,e){var t=jne(n);return t<0?zne(t+e,0):Une(t,e)},Gne=$w,Kne=Math.min,qne=function(n){var e=Gne(n);return e>0?Kne(e,9007199254740991):0},Xne=qne,Fw=function(n){return Xne(n.length)},Qne=y0,Zne=Yne,Jne=Fw,bN=function(n){return function(e,t,i){var s=Qne(e),r=Jne(s);if(r===0)return!n&&-1;var o=Zne(i,r),a;if(n&&t!==t){for(;r>o;)if(a=s[o++],a!==a)return!0}else for(;r>o;o++)if((n||o in s)&&s[o]===t)return n||o||0;return!n&&-1}},eie={includes:bN(!0),indexOf:bN(!1)},tie=ei,OR=ba,nie=y0,iie=eie.indexOf,sie=SA,yN=tie([].push),Qj=function(n,e){var t=nie(n),i=0,s=[],r;for(r in t)!OR(sie,r)&&OR(t,r)&&yN(s,r);for(;e.length>i;)OR(t,r=e[i++])&&(~iie(s,r)||yN(s,r));return s},RA=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],rie=Qj,oie=RA,aie=oie.concat("length","prototype");Xj.f=Object.getOwnPropertyNames||function(e){return rie(e,aie)};var Zj={};Zj.f=Object.getOwnPropertySymbols;var lie=sg,cie=ei,hie=Xj,uie=Zj,die=Il,fie=cie([].concat),gie=lie("Reflect","ownKeys")||function(e){var t=hie.f(die(e)),i=uie.f;return i?fie(t,i(e)):t},CN=ba,mie=gie,pie=mA,wie=Jc,Jj=function(n,e,t){for(var i=mie(e),s=wie.f,r=pie.f,o=0;o<i.length;o++){var a=i[o];!CN(n,a)&&!(t&&CN(t,a))&&s(n,a,r(e,a))}},vie=Es,bie=Ei,yie=/#|\.prototype\./,Bw=function(n,e){var t=Sie[Cie(n)];return t===Rie?!0:t===_ie?!1:bie(e)?vie(e):!!e},Cie=Bw.normalize=function(n){return String(n).replace(yie,".").toLowerCase()},Sie=Bw.data={},_ie=Bw.NATIVE="N",Rie=Bw.POLYFILL="P",xie=Bw,Bv=xi,Eie=mA.f,Tie=Lw,Mie=$ne,Aie=vA,Pie=Jj,Iie=xie,Ti=function(n,e){var t=n.target,i=n.global,s=n.stat,r,o,a,l,c,h;if(i?o=Bv:s?o=Bv[t]||Aie(t,{}):o=Bv[t]&&Bv[t].prototype,o)for(a in e){if(c=e[a],n.dontCallGetSet?(h=Eie(o,a),l=h&&h.value):l=o[a],r=Iie(i?a:t+(s?".":"#")+a,n.forced),!r&&l!==void 0){if(typeof c==typeof l)continue;Pie(c,l)}(n.sham||l&&l.sham)&&Tie(c,"sham",!0),Mie(o,a,c,n)}},Oie=w0,ez=Function.prototype,SN=ez.apply,_N=ez.call,x0=typeof Reflect=="object"&&Reflect.apply||(Oie?_N.bind(SN):function(){return _N.apply(SN,arguments)}),kie=ei,Hie=Dw,tz=function(n,e,t){try{return kie(Hie(Object.getOwnPropertyDescriptor(n,e)[t]))}catch{}},Die=va,Nie=function(n){return Die(n)||n===null},Lie=Nie,$ie=String,Fie=TypeError,Bie=function(n){if(Lie(n))return n;throw new Fie("Can't set "+$ie(n)+" as a prototype")},Vie=tz,Wie=va,jie=Hw,zie=Bie,nz=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,e={},t;try{t=Vie(Object.prototype,"__proto__","set"),t(e,[]),n=e instanceof Array}catch{}return function(s,r){return jie(s),zie(r),Wie(s)&&(n?t(s,r):s.__proto__=r),s}}():void 0),Uie=Jc.f,Yie=function(n,e,t){t in n||Uie(n,t,{configurable:!0,get:function(){return e[t]},set:function(i){e[t]=i}})},Gie=Ei,Kie=va,RN=nz,qie=function(n,e,t){var i,s;return RN&&Gie(i=e.constructor)&&i!==t&&Kie(s=i.prototype)&&s!==t.prototype&&RN(n,s),n},Xie=Zc,Qie=Xie("toStringTag"),iz={};iz[Qie]="z";var Zie=String(iz)==="[object z]",Jie=Zie,ese=Ei,Ny=Qu,tse=Zc,nse=tse("toStringTag"),ise=Object,sse=Ny(function(){return arguments}())==="Arguments",rse=function(n,e){try{return n[e]}catch{}},sz=Jie?Ny:function(n){var e,t,i;return n===void 0?"Undefined":n===null?"Null":typeof(t=rse(e=ise(n),nse))=="string"?t:sse?Ny(e):(i=Ny(e))==="Object"&&ese(e.callee)?"Arguments":i},ose=sz,ase=String,E0=function(n){if(ose(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return ase(n)},lse=E0,cse=function(n,e){return n===void 0?arguments.length<2?"":e:lse(n)},hse=va,use=Lw,dse=function(n,e){hse(e)&&"cause"in e&&use(n,"cause",e.cause)},fse=ei,rz=Error,gse=fse("".replace),mse=function(n){return String(new rz(n).stack)}("zxcasd"),oz=/\n\s*at [^:]*:[^\n]*/,pse=oz.test(mse),wse=function(n,e){if(pse&&typeof n=="string"&&!rz.prepareStackTrace)for(;e--;)n=gse(n,oz,"");return n},vse=Es,bse=v0,yse=!vse(function(){var n=new Error("a");return"stack"in n?(Object.defineProperty(n,"stack",bse(1,7)),n.stack!==7):!0}),Cse=Lw,Sse=wse,_se=yse,xN=Error.captureStackTrace,Rse=function(n,e,t,i){_se&&(xN?xN(n,e):Cse(n,"stack",Sse(t,i)))},EN=sg,xse=ba,TN=Lw,Ese=C0,MN=nz,AN=Jj,PN=Yie,Tse=qie,Mse=cse,Ase=dse,Pse=Rse,Ise=go,Ose=function(n,e,t,i){var s="stackTraceLimit",r=i?2:1,o=n.split("."),a=o[o.length-1],l=EN.apply(null,o);if(l){var c=l.prototype;if(xse(c,"cause")&&delete c.cause,!t)return l;var h=EN("Error"),u=e(function(d,f){var g=Mse(i?f:d,void 0),m=i?new l(d):new l;return g!==void 0&&TN(m,"message",g),Pse(m,u,m.stack,2),this&&Ese(c,this)&&Tse(m,this,u),arguments.length>r&&Ase(m,arguments[r]),m});u.prototype=c,a!=="Error"?MN?MN(u,h):AN(u,h,{name:!0}):Ise&&s in l&&(PN(u,l,s),PN(u,l,"prepareStackTrace")),AN(u,l);try{c.name!==a&&TN(c,"name",a),c.constructor=u}catch{}return u}},az=Ti,kse=xi,ya=x0,lz=Ose,YT="WebAssembly",IN=kse[YT],BC=new Error("e",{cause:7}).cause!==7,Zu=function(n,e){var t={};t[n]=lz(n,e,BC),az({global:!0,constructor:!0,arity:1,forced:BC},t)},xA=function(n,e){if(IN&&IN[n]){var t={};t[n]=lz(YT+"."+n,e,BC),az({target:YT,stat:!0,constructor:!0,arity:1,forced:BC},t)}};Zu("Error",function(n){return function(t){return ya(n,this,arguments)}});Zu("EvalError",function(n){return function(t){return ya(n,this,arguments)}});Zu("RangeError",function(n){return function(t){return ya(n,this,arguments)}});Zu("ReferenceError",function(n){return function(t){return ya(n,this,arguments)}});Zu("SyntaxError",function(n){return function(t){return ya(n,this,arguments)}});Zu("TypeError",function(n){return function(t){return ya(n,this,arguments)}});Zu("URIError",function(n){return function(t){return ya(n,this,arguments)}});xA("CompileError",function(n){return function(t){return ya(n,this,arguments)}});xA("LinkError",function(n){return function(t){return ya(n,this,arguments)}});xA("RuntimeError",function(n){return function(t){return ya(n,this,arguments)}});var Hse=Qu,cz=Array.isArray||function(e){return Hse(e)==="Array"},Dse=go,Nse=cz,Lse=TypeError,$se=Object.getOwnPropertyDescriptor,Fse=Dse&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(n){return n instanceof TypeError}}(),hz=Fse?function(n,e){if(Nse(n)&&!$se(n,"length").writable)throw new Lse("Cannot set read only .length");return n.length=e}:function(n,e){return n.length=e},Bse=TypeError,Vse=9007199254740991,uz=function(n){if(n>Vse)throw Bse("Maximum allowed index exceeded");return n},Wse=Ti,jse=Nw,zse=Fw,Use=hz,Yse=uz,Gse=Es,Kse=Gse(function(){return[].push.call({length:4294967296},1)!==4294967297}),qse=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(n){return n instanceof TypeError}},Xse=Kse||!qse();Wse({target:"Array",proto:!0,arity:1,forced:Xse},{push:function(e){var t=jse(this),i=zse(t),s=arguments.length;Yse(i+s);for(var r=0;r<s;r++)t[i]=arguments[r],i++;return Use(t,i),i}});var kR=ei,Vv=Set.prototype,Ca={Set,add:kR(Vv.add),has:kR(Vv.has),remove:kR(Vv.delete),proto:Vv},Qse=Ca.has,Ju=function(n){return Qse(n),n},Zse=mo,ed=function(n,e,t){for(var i=t?n:n.iterator,s=n.next,r,o;!(r=Zse(s,i)).done;)if(o=e(r.value),o!==void 0)return o},dz=ei,Jse=ed,fz=Ca,ere=fz.Set,gz=fz.proto,tre=dz(gz.forEach),mz=dz(gz.keys),nre=mz(new ere).next,Vw=function(n,e,t){return t?Jse({iterator:mz(n),next:nre},e):tre(n,e)},pz=Ca,ire=Vw,sre=pz.Set,rre=pz.add,EA=function(n){var e=new sre;return ire(n,function(t){rre(e,t)}),e},ore=tz,are=Ca,Ww=ore(are.proto,"size","get")||function(n){return n.size},lre=function(n){return{iterator:n,next:n.next,done:!1}},ON=Dw,wz=Il,kN=mo,cre=$w,hre=lre,HN="Invalid size",ure=RangeError,dre=TypeError,fre=Math.max,vz=function(n,e){this.set=n,this.size=fre(e,0),this.has=ON(n.has),this.keys=ON(n.keys)};vz.prototype={getIterator:function(){return hre(wz(kN(this.keys,this.set)))},includes:function(n){return kN(this.has,this.set,n)}};var td=function(n){wz(n);var e=+n.size;if(e!==e)throw new dre(HN);var t=cre(e);if(t<0)throw new ure(HN);return new vz(n,t)},gre=Ju,bz=Ca,mre=EA,pre=Ww,wre=td,vre=Vw,bre=ed,yre=bz.has,DN=bz.remove,Cre=function(e){var t=gre(this),i=wre(e),s=mre(t);return pre(t)<=i.size?vre(t,function(r){i.includes(r)&&DN(s,r)}):bre(i.getIterator(),function(r){yre(t,r)&&DN(s,r)}),s},Sre=sg,NN=function(n){return{size:n,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},nd=function(n){var e=Sre("Set");try{new e()[n](NN(0));try{return new e()[n](NN(-1)),!1}catch{return!0}}catch{return!1}},_re=Ti,Rre=Cre,xre=nd;_re({target:"Set",proto:!0,real:!0,forced:!xre("difference")},{difference:Rre});var Ere=Ju,TA=Ca,Tre=Ww,Mre=td,Are=Vw,Pre=ed,Ire=TA.Set,LN=TA.add,Ore=TA.has,kre=function(e){var t=Ere(this),i=Mre(e),s=new Ire;return Tre(t)>i.size?Pre(i.getIterator(),function(r){Ore(t,r)&&LN(s,r)}):Are(t,function(r){i.includes(r)&&LN(s,r)}),s},Hre=Ti,Dre=Es,Nre=kre,Lre=nd,$re=!Lre("intersection")||Dre(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});Hre({target:"Set",proto:!0,real:!0,forced:$re},{intersection:Nre});var Fre=mo,$N=Il,Bre=R0,MA=function(n,e,t){var i,s;$N(n);try{if(i=Bre(n,"return"),!i){if(e==="throw")throw t;return t}i=Fre(i,n)}catch(r){s=!0,i=r}if(e==="throw")throw t;if(s)throw i;return $N(i),t},Vre=Ju,Wre=Ca.has,jre=Ww,zre=td,Ure=Vw,Yre=ed,Gre=MA,Kre=function(e){var t=Vre(this),i=zre(e);if(jre(t)<=i.size)return Ure(t,function(r){if(i.includes(r))return!1},!0)!==!1;var s=i.getIterator();return Yre(s,function(r){if(Wre(t,r))return Gre(s,"normal",!1)})!==!1},qre=Ti,Xre=Kre,Qre=nd;qre({target:"Set",proto:!0,real:!0,forced:!Qre("isDisjointFrom")},{isDisjointFrom:Xre});var Zre=Ju,Jre=Ww,eoe=Vw,toe=td,noe=function(e){var t=Zre(this),i=toe(e);return Jre(t)>i.size?!1:eoe(t,function(s){if(!i.includes(s))return!1},!0)!==!1},ioe=Ti,soe=noe,roe=nd;ioe({target:"Set",proto:!0,real:!0,forced:!roe("isSubsetOf")},{isSubsetOf:soe});var ooe=Ju,aoe=Ca.has,loe=Ww,coe=td,hoe=ed,uoe=MA,doe=function(e){var t=ooe(this),i=coe(e);if(loe(t)<i.size)return!1;var s=i.getIterator();return hoe(s,function(r){if(!aoe(t,r))return uoe(s,"normal",!1)})!==!1},foe=Ti,goe=doe,moe=nd;foe({target:"Set",proto:!0,real:!0,forced:!moe("isSupersetOf")},{isSupersetOf:goe});var poe=Ju,AA=Ca,woe=EA,voe=td,boe=ed,yoe=AA.add,Coe=AA.has,Soe=AA.remove,_oe=function(e){var t=poe(this),i=voe(e).getIterator(),s=woe(t);return boe(i,function(r){Coe(t,r)?Soe(s,r):yoe(s,r)}),s},Roe=Ti,xoe=_oe,Eoe=nd;Roe({target:"Set",proto:!0,real:!0,forced:!Eoe("symmetricDifference")},{symmetricDifference:xoe});var Toe=Ju,Moe=Ca.add,Aoe=EA,Poe=td,Ioe=ed,Ooe=function(e){var t=Toe(this),i=Poe(e).getIterator(),s=Aoe(t);return Ioe(i,function(r){Moe(s,r)}),s},koe=Ti,Hoe=Ooe,Doe=nd;koe({target:"Set",proto:!0,real:!0,forced:!Doe("union")},{union:Hoe});var Noe=Qu,Loe=ei,$oe=function(n){if(Noe(n)==="Function")return Loe(n)},FN=$oe,Foe=Dw,Boe=w0,Voe=FN(FN.bind),yz=function(n,e){return Foe(n),e===void 0?n:Boe?Voe(n,e):function(){return n.apply(e,arguments)}},Woe=sg,Cz=Woe("document","documentElement"),joe=ei,PA=joe([].slice),zoe=TypeError,Sz=function(n,e){if(n<e)throw new zoe("Not enough arguments");return n},Uoe=S0,Yoe=/(?:ipad|iphone|ipod).*applewebkit/i.test(Uoe),Ig=xi,Goe=S0,Koe=Qu,Wv=function(n){return Goe.slice(0,n.length)===n},_z=function(){return Wv("Bun/")?"BUN":Wv("Cloudflare-Workers")?"CLOUDFLARE":Wv("Deno/")?"DENO":Wv("Node.js/")?"NODE":Ig.Bun&&typeof Bun.version=="string"?"BUN":Ig.Deno&&typeof Deno.version=="object"?"DENO":Koe(Ig.process)==="process"?"NODE":Ig.window&&Ig.document?"BROWSER":"REST"}(),qoe=_z,Xoe=qoe==="NODE",Ys=xi,Qoe=x0,Zoe=yz,BN=Ei,Joe=ba,Rz=Es,VN=Cz,eae=PA,WN=yA,tae=Sz,nae=Yoe,iae=Xoe,GT=Ys.setImmediate,KT=Ys.clearImmediate,sae=Ys.process,HR=Ys.Dispatch,rae=Ys.Function,jN=Ys.MessageChannel,oae=Ys.String,DR=0,up={},zN="onreadystatechange",Jp,ch,NR,LR;Rz(function(){Jp=Ys.location});var IA=function(n){if(Joe(up,n)){var e=up[n];delete up[n],e()}},$R=function(n){return function(){IA(n)}},UN=function(n){IA(n.data)},YN=function(n){Ys.postMessage(oae(n),Jp.protocol+"//"+Jp.host)};(!GT||!KT)&&(GT=function(e){tae(arguments.length,1);var t=BN(e)?e:rae(e),i=eae(arguments,1);return up[++DR]=function(){Qoe(t,void 0,i)},ch(DR),DR},KT=function(e){delete up[e]},iae?ch=function(n){sae.nextTick($R(n))}:HR&&HR.now?ch=function(n){HR.now($R(n))}:jN&&!nae?(NR=new jN,LR=NR.port2,NR.port1.onmessage=UN,ch=Zoe(LR.postMessage,LR)):Ys.addEventListener&&BN(Ys.postMessage)&&!Ys.importScripts&&Jp&&Jp.protocol!=="file:"&&!Rz(YN)?(ch=YN,Ys.addEventListener("message",UN,!1)):zN in WN("script")?ch=function(n){VN.appendChild(WN("script"))[zN]=function(){VN.removeChild(this),IA(n)}}:ch=function(n){setTimeout($R(n),0)});var xz={set:GT,clear:KT},aae=Ti,lae=xi,GN=xz.clear;aae({global:!0,bind:!0,enumerable:!0,forced:lae.clearImmediate!==GN},{clearImmediate:GN});var Ez=xi,cae=x0,hae=Ei,uae=_z,dae=S0,fae=PA,gae=Sz,mae=Ez.Function,pae=/MSIE .\./.test(dae)||uae==="BUN"&&function(){var n=Ez.Bun.version.split(".");return n.length<3||n[0]==="0"&&(n[1]<3||n[1]==="3"&&n[2]==="0")}(),wae=function(n,e){var t=e?2:1;return pae?function(i,s){var r=gae(arguments.length,1)>t,o=hae(i)?i:mae(i),a=r?fae(arguments,t):[],l=r?function(){cae(o,this,a)}:o;return e?n(l,s):n(l)}:n},vae=Ti,Tz=xi,KN=xz.set,bae=wae,qN=Tz.setImmediate?bae(KN,!1):KN;vae({global:!0,bind:!0,enumerable:!0,forced:Tz.setImmediate!==qN},{setImmediate:qN});/*! @license DOMPurify 2.5.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.7/LICENSE */function ac(n){"@babel/helpers - typeof";return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ac(n)}function qT(n,e){return qT=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},qT(n,e)}function yae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ly(n,e,t){return yae()?Ly=Reflect.construct:Ly=function(s,r,o){var a=[null];a.push.apply(a,r);var l=Function.bind.apply(s,a),c=new l;return o&&qT(c,o.prototype),c},Ly.apply(null,arguments)}function zr(n){return Cae(n)||Sae(n)||_ae(n)||Rae()}function Cae(n){if(Array.isArray(n))return XT(n)}function Sae(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _ae(n,e){if(n){if(typeof n=="string")return XT(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return XT(n,e)}}function XT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Rae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xae=Object.hasOwnProperty,XN=Object.setPrototypeOf,Eae=Object.isFrozen,Tae=Object.getPrototypeOf,Mae=Object.getOwnPropertyDescriptor,os=Object.freeze,Rr=Object.seal,Aae=Object.create,Mz=typeof Reflect<"u"&&Reflect,VC=Mz.apply,QT=Mz.construct;VC||(VC=function(e,t,i){return e.apply(t,i)});os||(os=function(e){return e});Rr||(Rr=function(e){return e});QT||(QT=function(e,t){return Ly(e,zr(t))});var Pae=xr(Array.prototype.forEach),QN=xr(Array.prototype.pop),Og=xr(Array.prototype.push),$y=xr(String.prototype.toLowerCase),FR=xr(String.prototype.toString),ZN=xr(String.prototype.match),Hr=xr(String.prototype.replace),Iae=xr(String.prototype.indexOf),Oae=xr(String.prototype.trim),_i=xr(RegExp.prototype.test),BR=kae(TypeError);function xr(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return VC(n,e,i)}}function kae(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return QT(n,t)}}function st(n,e,t){var i;t=(i=t)!==null&&i!==void 0?i:$y,XN&&XN(n,null);for(var s=e.length;s--;){var r=e[s];if(typeof r=="string"){var o=t(r);o!==r&&(Eae(e)||(e[s]=o),r=o)}n[r]=!0}return n}function hh(n){var e=Aae(null),t;for(t in n)VC(xae,n,[t])===!0&&(e[t]=n[t]);return e}function jv(n,e){for(;n!==null;){var t=Mae(n,e);if(t){if(t.get)return xr(t.get);if(typeof t.value=="function")return xr(t.value)}n=Tae(n)}function i(s){return console.warn("fallback value for",s),null}return i}var JN=os(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),VR=os(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),WR=os(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Hae=os(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),jR=os(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Dae=os(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),eL=os(["#text"]),tL=os(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),zR=os(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nL=os(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),zv=os(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Nae=Rr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Lae=Rr(/<%[\w\W]*|[\w\W]*%>/gm),$ae=Rr(/\${[\w\W]*}/gm),Fae=Rr(/^data-[\-\w.\u00B7-\uFFFF]/),Bae=Rr(/^aria-[\-\w]+$/),Vae=Rr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Wae=Rr(/^(?:\w+script|data):/i),jae=Rr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zae=Rr(/^html$/i),Uae=Rr(/^[a-z][.\w]*(-[.\w]+)+$/i),Yae=function(){return typeof window>"u"?null:window},Gae=function(e,t){if(ac(e)!=="object"||typeof e.createPolicy!="function")return null;var i=null,s="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(s)&&(i=t.currentScript.getAttribute(s));var r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML:function(a){return a},createScriptURL:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function Az(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yae(),e=function(V){return Az(V)};if(e.version="2.5.7",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;var t=n.document,i=n.document,s=n.DocumentFragment,r=n.HTMLTemplateElement,o=n.Node,a=n.Element,l=n.NodeFilter,c=n.NamedNodeMap,h=c===void 0?n.NamedNodeMap||n.MozNamedAttrMap:c,u=n.HTMLFormElement,d=n.DOMParser,f=n.trustedTypes,g=a.prototype,m=jv(g,"cloneNode"),w=jv(g,"nextSibling"),v=jv(g,"childNodes"),C=jv(g,"parentNode");if(typeof r=="function"){var S=i.createElement("template");S.content&&S.content.ownerDocument&&(i=S.content.ownerDocument)}var x=Gae(f,t),_=x?x.createHTML(""):"",R=i,M=R.implementation,O=R.createNodeIterator,P=R.createDocumentFragment,k=R.getElementsByTagName,B=t.importNode,z={};try{z=hh(i).documentMode?i.documentMode:{}}catch{}var Q={};e.isSupported=typeof C=="function"&&M&&M.createHTMLDocument!==void 0&&z!==9;var te=Nae,ne=Lae,j=$ae,ie=Fae,oe=Bae,J=Wae,pe=jae,p=Uae,b=Vae,y=null,T=st({},[].concat(zr(JN),zr(VR),zr(WR),zr(jR),zr(eL))),H=null,E=st({},[].concat(zr(tL),zr(zR),zr(nL),zr(zv))),D=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,ee=null,he=!0,se=!0,Ie=!1,xe=!0,X=!1,re=!0,ce=!1,Be=!1,Se=!1,_e=!1,A=!1,I=!1,N=!0,U=!1,$="user-content-",q=!0,W=!1,F={},Y=null,G=st({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Z=null,fe=st({},["audio","video","img","source","image","track"]),Re=null,De=st({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qe="http://www.w3.org/1998/Math/MathML",dt="http://www.w3.org/2000/svg",it="http://www.w3.org/1999/xhtml",We=it,pt=!1,yn=null,cd=st({},[Qe,dt,it],FR),Pr,pg=["application/xhtml+xml","text/html"],Xs="text/html",dn,ti=null,Ci=i.createElement("form"),sn=function(V){return V instanceof RegExp||V instanceof Function},R_=function(V){ti&&ti===V||((!V||ac(V)!=="object")&&(V={}),V=hh(V),Pr=pg.indexOf(V.PARSER_MEDIA_TYPE)===-1?Pr=Xs:Pr=V.PARSER_MEDIA_TYPE,dn=Pr==="application/xhtml+xml"?FR:$y,y="ALLOWED_TAGS"in V?st({},V.ALLOWED_TAGS,dn):T,H="ALLOWED_ATTR"in V?st({},V.ALLOWED_ATTR,dn):E,yn="ALLOWED_NAMESPACES"in V?st({},V.ALLOWED_NAMESPACES,FR):cd,Re="ADD_URI_SAFE_ATTR"in V?st(hh(De),V.ADD_URI_SAFE_ATTR,dn):De,Z="ADD_DATA_URI_TAGS"in V?st(hh(fe),V.ADD_DATA_URI_TAGS,dn):fe,Y="FORBID_CONTENTS"in V?st({},V.FORBID_CONTENTS,dn):G,K="FORBID_TAGS"in V?st({},V.FORBID_TAGS,dn):{},ee="FORBID_ATTR"in V?st({},V.FORBID_ATTR,dn):{},F="USE_PROFILES"in V?V.USE_PROFILES:!1,he=V.ALLOW_ARIA_ATTR!==!1,se=V.ALLOW_DATA_ATTR!==!1,Ie=V.ALLOW_UNKNOWN_PROTOCOLS||!1,xe=V.ALLOW_SELF_CLOSE_IN_ATTR!==!1,X=V.SAFE_FOR_TEMPLATES||!1,re=V.SAFE_FOR_XML!==!1,ce=V.WHOLE_DOCUMENT||!1,_e=V.RETURN_DOM||!1,A=V.RETURN_DOM_FRAGMENT||!1,I=V.RETURN_TRUSTED_TYPE||!1,Se=V.FORCE_BODY||!1,N=V.SANITIZE_DOM!==!1,U=V.SANITIZE_NAMED_PROPS||!1,q=V.KEEP_CONTENT!==!1,W=V.IN_PLACE||!1,b=V.ALLOWED_URI_REGEXP||b,We=V.NAMESPACE||it,D=V.CUSTOM_ELEMENT_HANDLING||{},V.CUSTOM_ELEMENT_HANDLING&&sn(V.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(D.tagNameCheck=V.CUSTOM_ELEMENT_HANDLING.tagNameCheck),V.CUSTOM_ELEMENT_HANDLING&&sn(V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(D.attributeNameCheck=V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),V.CUSTOM_ELEMENT_HANDLING&&typeof V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(D.allowCustomizedBuiltInElements=V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(se=!1),A&&(_e=!0),F&&(y=st({},zr(eL)),H=[],F.html===!0&&(st(y,JN),st(H,tL)),F.svg===!0&&(st(y,VR),st(H,zR),st(H,zv)),F.svgFilters===!0&&(st(y,WR),st(H,zR),st(H,zv)),F.mathMl===!0&&(st(y,jR),st(H,nL),st(H,zv))),V.ADD_TAGS&&(y===T&&(y=hh(y)),st(y,V.ADD_TAGS,dn)),V.ADD_ATTR&&(H===E&&(H=hh(H)),st(H,V.ADD_ATTR,dn)),V.ADD_URI_SAFE_ATTR&&st(Re,V.ADD_URI_SAFE_ATTR,dn),V.FORBID_CONTENTS&&(Y===G&&(Y=hh(Y)),st(Y,V.FORBID_CONTENTS,dn)),q&&(y["#text"]=!0),ce&&st(y,["html","head","body"]),y.table&&(st(y,["tbody"]),delete K.tbody),os&&os(V),ti=V)},nk=st({},["mi","mo","mn","ms","mtext"]),ik=st({},["annotation-xml"]),NK=st({},["title","style","font","a","script"]),uv=st({},VR);st(uv,WR),st(uv,Hae);var x_=st({},jR);st(x_,Dae);var LK=function(V){var de=C(V);(!de||!de.tagName)&&(de={namespaceURI:We,tagName:"template"});var ye=$y(V.tagName),At=$y(de.tagName);return yn[V.namespaceURI]?V.namespaceURI===dt?de.namespaceURI===it?ye==="svg":de.namespaceURI===Qe?ye==="svg"&&(At==="annotation-xml"||nk[At]):!!uv[ye]:V.namespaceURI===Qe?de.namespaceURI===it?ye==="math":de.namespaceURI===dt?ye==="math"&&ik[At]:!!x_[ye]:V.namespaceURI===it?de.namespaceURI===dt&&!ik[At]||de.namespaceURI===Qe&&!nk[At]?!1:!x_[ye]&&(NK[ye]||!uv[ye]):!!(Pr==="application/xhtml+xml"&&yn[V.namespaceURI]):!1},Qs=function(V){Og(e.removed,{element:V});try{V.parentNode.removeChild(V)}catch{try{V.outerHTML=_}catch{V.remove()}}},dv=function(V,de){try{Og(e.removed,{attribute:de.getAttributeNode(V),from:de})}catch{Og(e.removed,{attribute:null,from:de})}if(de.removeAttribute(V),V==="is"&&!H[V])if(_e||A)try{Qs(de)}catch{}else try{de.setAttribute(V,"")}catch{}},sk=function(V){var de,ye;if(Se)V="<remove></remove>"+V;else{var At=ZN(V,/^[\r\n\t ]+/);ye=At&&At[0]}Pr==="application/xhtml+xml"&&We===it&&(V='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+V+"</body></html>");var ls=x?x.createHTML(V):V;if(We===it)try{de=new d().parseFromString(ls,Pr)}catch{}if(!de||!de.documentElement){de=M.createDocument(We,"template",null);try{de.documentElement.innerHTML=pt?_:ls}catch{}}var Ai=de.body||de.documentElement;return V&&ye&&Ai.insertBefore(i.createTextNode(ye),Ai.childNodes[0]||null),We===it?k.call(de,ce?"html":"body")[0]:ce?de.documentElement:Ai},rk=function(V){return O.call(V.ownerDocument||V,V,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null,!1)},ok=function(V){return V instanceof u&&(typeof V.nodeName!="string"||typeof V.textContent!="string"||typeof V.removeChild!="function"||!(V.attributes instanceof h)||typeof V.removeAttribute!="function"||typeof V.setAttribute!="function"||typeof V.namespaceURI!="string"||typeof V.insertBefore!="function"||typeof V.hasChildNodes!="function")},wg=function(V){return ac(o)==="object"?V instanceof o:V&&ac(V)==="object"&&typeof V.nodeType=="number"&&typeof V.nodeName=="string"},xa=function(V,de,ye){Q[V]&&Pae(Q[V],function(At){At.call(e,de,ye,ti)})},ak=function(V){var de;if(xa("beforeSanitizeElements",V,null),ok(V)||_i(/[\u0080-\uFFFF]/,V.nodeName))return Qs(V),!0;var ye=dn(V.nodeName);if(xa("uponSanitizeElement",V,{tagName:ye,allowedTags:y}),V.hasChildNodes()&&!wg(V.firstElementChild)&&(!wg(V.content)||!wg(V.content.firstElementChild))&&_i(/<[/\w]/g,V.innerHTML)&&_i(/<[/\w]/g,V.textContent)||ye==="select"&&_i(/<template/i,V.innerHTML)||V.nodeType===7||re&&V.nodeType===8&&_i(/<[/\w]/g,V.data))return Qs(V),!0;if(!y[ye]||K[ye]){if(!K[ye]&&ck(ye)&&(D.tagNameCheck instanceof RegExp&&_i(D.tagNameCheck,ye)||D.tagNameCheck instanceof Function&&D.tagNameCheck(ye)))return!1;if(q&&!Y[ye]){var At=C(V)||V.parentNode,ls=v(V)||V.childNodes;if(ls&&At)for(var Ai=ls.length,Si=Ai-1;Si>=0;--Si){var nh=m(ls[Si],!0);nh.__removalCount=(V.__removalCount||0)+1,At.insertBefore(nh,w(V))}}return Qs(V),!0}return V instanceof a&&!LK(V)||(ye==="noscript"||ye==="noembed"||ye==="noframes")&&_i(/<\/no(script|embed|frames)/i,V.innerHTML)?(Qs(V),!0):(X&&V.nodeType===3&&(de=V.textContent,de=Hr(de,te," "),de=Hr(de,ne," "),de=Hr(de,j," "),V.textContent!==de&&(Og(e.removed,{element:V.cloneNode()}),V.textContent=de)),xa("afterSanitizeElements",V,null),!1)},lk=function(V,de,ye){if(N&&(de==="id"||de==="name")&&(ye in i||ye in Ci))return!1;if(!(se&&!ee[de]&&_i(ie,de))){if(!(he&&_i(oe,de))){if(!H[de]||ee[de]){if(!(ck(V)&&(D.tagNameCheck instanceof RegExp&&_i(D.tagNameCheck,V)||D.tagNameCheck instanceof Function&&D.tagNameCheck(V))&&(D.attributeNameCheck instanceof RegExp&&_i(D.attributeNameCheck,de)||D.attributeNameCheck instanceof Function&&D.attributeNameCheck(de))||de==="is"&&D.allowCustomizedBuiltInElements&&(D.tagNameCheck instanceof RegExp&&_i(D.tagNameCheck,ye)||D.tagNameCheck instanceof Function&&D.tagNameCheck(ye))))return!1}else if(!Re[de]){if(!_i(b,Hr(ye,pe,""))){if(!((de==="src"||de==="xlink:href"||de==="href")&&V!=="script"&&Iae(ye,"data:")===0&&Z[V])){if(!(Ie&&!_i(J,Hr(ye,pe,"")))){if(ye)return!1}}}}}}return!0},ck=function(V){return V!=="annotation-xml"&&ZN(V,p)},hk=function(V){var de,ye,At,ls;xa("beforeSanitizeAttributes",V,null);var Ai=V.attributes;if(Ai){var Si={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};for(ls=Ai.length;ls--;){de=Ai[ls];var nh=de,ni=nh.name,E_=nh.namespaceURI;if(ye=ni==="value"?de.value:Oae(de.value),At=dn(ni),Si.attrName=At,Si.attrValue=ye,Si.keepAttr=!0,Si.forceKeepAttr=void 0,xa("uponSanitizeAttribute",V,Si),ye=Si.attrValue,!Si.forceKeepAttr&&(dv(ni,V),!!Si.keepAttr)){if(!xe&&_i(/\/>/i,ye)){dv(ni,V);continue}X&&(ye=Hr(ye,te," "),ye=Hr(ye,ne," "),ye=Hr(ye,j," "));var uk=dn(V.nodeName);if(lk(uk,At,ye)){if(U&&(At==="id"||At==="name")&&(dv(ni,V),ye=$+ye),re&&_i(/((--!?|])>)|<\/(style|title)/i,ye)){dv(ni,V);continue}if(x&&ac(f)==="object"&&typeof f.getAttributeType=="function"&&!E_)switch(f.getAttributeType(uk,At)){case"TrustedHTML":{ye=x.createHTML(ye);break}case"TrustedScriptURL":{ye=x.createScriptURL(ye);break}}try{E_?V.setAttributeNS(E_,ni,ye):V.setAttribute(ni,ye),ok(V)?Qs(V):QN(e.removed)}catch{}}}}xa("afterSanitizeAttributes",V,null)}},$K=function Ne(V){var de,ye=rk(V);for(xa("beforeSanitizeShadowDOM",V,null);de=ye.nextNode();)xa("uponSanitizeShadowNode",de,null),!ak(de)&&(de.content instanceof s&&Ne(de.content),hk(de));xa("afterSanitizeShadowDOM",V,null)};return e.sanitize=function(Ne){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de,ye,At,ls,Ai;if(pt=!Ne,pt&&(Ne="<!-->"),typeof Ne!="string"&&!wg(Ne))if(typeof Ne.toString=="function"){if(Ne=Ne.toString(),typeof Ne!="string")throw BR("dirty is not a string, aborting")}else throw BR("toString is not a function");if(!e.isSupported){if(ac(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Ne=="string")return n.toStaticHTML(Ne);if(wg(Ne))return n.toStaticHTML(Ne.outerHTML)}return Ne}if(Be||R_(V),e.removed=[],typeof Ne=="string"&&(W=!1),W){if(Ne.nodeName){var Si=dn(Ne.nodeName);if(!y[Si]||K[Si])throw BR("root node is forbidden and cannot be sanitized in-place")}}else if(Ne instanceof o)de=sk("<!---->"),ye=de.ownerDocument.importNode(Ne,!0),ye.nodeType===1&&ye.nodeName==="BODY"||ye.nodeName==="HTML"?de=ye:de.appendChild(ye);else{if(!_e&&!X&&!ce&&Ne.indexOf("<")===-1)return x&&I?x.createHTML(Ne):Ne;if(de=sk(Ne),!de)return _e?null:I?_:""}de&&Se&&Qs(de.firstChild);for(var nh=rk(W?Ne:de);At=nh.nextNode();)At.nodeType===3&&At===ls||ak(At)||(At.content instanceof s&&$K(At.content),hk(At),ls=At);if(ls=null,W)return Ne;if(_e){if(A)for(Ai=P.call(de.ownerDocument);de.firstChild;)Ai.appendChild(de.firstChild);else Ai=de;return(H.shadowroot||H.shadowrootmod)&&(Ai=B.call(t,Ai,!0)),Ai}var ni=ce?de.outerHTML:de.innerHTML;return ce&&y["!doctype"]&&de.ownerDocument&&de.ownerDocument.doctype&&de.ownerDocument.doctype.name&&_i(zae,de.ownerDocument.doctype.name)&&(ni="<!DOCTYPE "+de.ownerDocument.doctype.name+`>
`+ni),X&&(ni=Hr(ni,te," "),ni=Hr(ni,ne," "),ni=Hr(ni,j," ")),x&&I?x.createHTML(ni):ni},e.setConfig=function(Ne){R_(Ne),Be=!0},e.clearConfig=function(){ti=null,Be=!1},e.isValidAttribute=function(Ne,V,de){ti||R_({});var ye=dn(Ne),At=dn(V);return lk(ye,At,de)},e.addHook=function(Ne,V){typeof V=="function"&&(Q[Ne]=Q[Ne]||[],Og(Q[Ne],V))},e.removeHook=function(Ne){if(Q[Ne])return QN(Q[Ne])},e.removeHooks=function(Ne){Q[Ne]&&(Q[Ne]=[])},e.removeAllHooks=function(){Q={}},e}var Kae=Az();//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Pz;function le(){return Pz.apply(null,arguments)}function qae(n){Pz=n}function oo(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function _u(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function Tt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function OA(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var e;for(e in n)if(Tt(n,e))return!1;return!0}function ws(n){return n===void 0}function Sl(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function jw(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function Iz(n,e){var t=[],i,s=n.length;for(i=0;i<s;++i)t.push(e(n[i],i));return t}function wc(n,e){for(var t in e)Tt(e,t)&&(n[t]=e[t]);return Tt(e,"toString")&&(n.toString=e.toString),Tt(e,"valueOf")&&(n.valueOf=e.valueOf),n}function Sa(n,e,t,i){return eU(n,e,t,i,!0).utc()}function Xae(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function tt(n){return n._pf==null&&(n._pf=Xae()),n._pf}var ZT;Array.prototype.some?ZT=Array.prototype.some:ZT=function(n){var e=Object(this),t=e.length>>>0,i;for(i=0;i<t;i++)if(i in e&&n.call(this,e[i],i,e))return!0;return!1};function kA(n){var e=null,t=!1,i=n._d&&!isNaN(n._d.getTime());if(i&&(e=tt(n),t=ZT.call(e.parsedDateParts,function(s){return s!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),n._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=i;else return i;return n._isValid}function T0(n){var e=Sa(NaN);return n!=null?wc(tt(e),n):tt(e).userInvalidated=!0,e}var iL=le.momentProperties=[],UR=!1;function HA(n,e){var t,i,s,r=iL.length;if(ws(e._isAMomentObject)||(n._isAMomentObject=e._isAMomentObject),ws(e._i)||(n._i=e._i),ws(e._f)||(n._f=e._f),ws(e._l)||(n._l=e._l),ws(e._strict)||(n._strict=e._strict),ws(e._tzm)||(n._tzm=e._tzm),ws(e._isUTC)||(n._isUTC=e._isUTC),ws(e._offset)||(n._offset=e._offset),ws(e._pf)||(n._pf=tt(e)),ws(e._locale)||(n._locale=e._locale),r>0)for(t=0;t<r;t++)i=iL[t],s=e[i],ws(s)||(n[i]=s);return n}function zw(n){HA(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),UR===!1&&(UR=!0,le.updateOffset(this),UR=!1)}function ao(n){return n instanceof zw||n!=null&&n._isAMomentObject!=null}function Oz(n){le.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function Tr(n,e){var t=!0;return wc(function(){if(le.deprecationHandler!=null&&le.deprecationHandler(null,n),t){var i=[],s,r,o,a=arguments.length;for(r=0;r<a;r++){if(s="",typeof arguments[r]=="object"){s+=`
[`+r+"] ";for(o in arguments[0])Tt(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[r];i.push(s)}Oz(n+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var sL={};function kz(n,e){le.deprecationHandler!=null&&le.deprecationHandler(n,e),sL[n]||(Oz(e),sL[n]=!0)}le.suppressDeprecationWarnings=!1;le.deprecationHandler=null;function _a(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function Qae(n){var e,t;for(t in n)Tt(n,t)&&(e=n[t],_a(e)?this[t]=e:this["_"+t]=e);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function JT(n,e){var t=wc({},n),i;for(i in e)Tt(e,i)&&(_u(n[i])&&_u(e[i])?(t[i]={},wc(t[i],n[i]),wc(t[i],e[i])):e[i]!=null?t[i]=e[i]:delete t[i]);for(i in n)Tt(n,i)&&!Tt(e,i)&&_u(n[i])&&(t[i]=wc({},t[i]));return t}function DA(n){n!=null&&this.set(n)}var eM;Object.keys?eM=Object.keys:eM=function(n){var e,t=[];for(e in n)Tt(n,e)&&t.push(e);return t};var Zae={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Jae(n,e,t){var i=this._calendar[n]||this._calendar.sameElse;return _a(i)?i.call(e,t):i}function ua(n,e,t){var i=""+Math.abs(n),s=e-i.length,r=n>=0;return(r?t?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var NA=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Uv=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,YR={},Af={};function Le(n,e,t,i){var s=i;typeof i=="string"&&(s=function(){return this[i]()}),n&&(Af[n]=s),e&&(Af[e[0]]=function(){return ua(s.apply(this,arguments),e[1],e[2])}),t&&(Af[t]=function(){return this.localeData().ordinal(s.apply(this,arguments),n)})}function ele(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function tle(n){var e=n.match(NA),t,i;for(t=0,i=e.length;t<i;t++)Af[e[t]]?e[t]=Af[e[t]]:e[t]=ele(e[t]);return function(s){var r="",o;for(o=0;o<i;o++)r+=_a(e[o])?e[o].call(s,n):e[o];return r}}function Fy(n,e){return n.isValid()?(e=Hz(e,n.localeData()),YR[e]=YR[e]||tle(e),YR[e](n)):n.localeData().invalidDate()}function Hz(n,e){var t=5;function i(s){return e.longDateFormat(s)||s}for(Uv.lastIndex=0;t>=0&&Uv.test(n);)n=n.replace(Uv,i),Uv.lastIndex=0,t-=1;return n}var nle={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ile(n){var e=this._longDateFormat[n],t=this._longDateFormat[n.toUpperCase()];return e||!t?e:(this._longDateFormat[n]=t.match(NA).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[n])}var sle="Invalid date";function rle(){return this._invalidDate}var ole="%d",ale=/\d{1,2}/;function lle(n){return this._ordinal.replace("%d",n)}var cle={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function hle(n,e,t,i){var s=this._relativeTime[t];return _a(s)?s(n,e,t,i):s.replace(/%d/i,n)}function ule(n,e){var t=this._relativeTime[n>0?"future":"past"];return _a(t)?t(e):t.replace(/%s/i,e)}var rL={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Mr(n){return typeof n=="string"?rL[n]||rL[n.toLowerCase()]:void 0}function LA(n){var e={},t,i;for(i in n)Tt(n,i)&&(t=Mr(i),t&&(e[t]=n[i]));return e}var dle={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function fle(n){var e=[],t;for(t in n)Tt(n,t)&&e.push({unit:t,priority:dle[t]});return e.sort(function(i,s){return i.priority-s.priority}),e}var Dz=/\d/,qs=/\d\d/,Nz=/\d{3}/,$A=/\d{4}/,M0=/[+-]?\d{6}/,un=/\d\d?/,Lz=/\d\d\d\d?/,$z=/\d\d\d\d\d\d?/,A0=/\d{1,3}/,FA=/\d{1,4}/,P0=/[+-]?\d{1,6}/,rg=/\d+/,I0=/[+-]?\d+/,gle=/Z|[+-]\d\d:?\d\d/gi,O0=/Z|[+-]\d\d(?::?\d\d)?/gi,mle=/[+-]?\d+(\.\d{1,3})?/,Uw=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,og=/^[1-9]\d?/,BA=/^([1-9]\d|\d)/,WC;WC={};function Ae(n,e,t){WC[n]=_a(e)?e:function(i,s){return i&&t?t:e}}function ple(n,e){return Tt(WC,n)?WC[n](e._strict,e._locale):new RegExp(wle(n))}function wle(n){return wl(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,s,r){return t||i||s||r}))}function wl(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function pr(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function mt(n){var e=+n,t=0;return e!==0&&isFinite(e)&&(t=pr(e)),t}var tM={};function Ut(n,e){var t,i=e,s;for(typeof n=="string"&&(n=[n]),Sl(e)&&(i=function(r,o){o[e]=mt(r)}),s=n.length,t=0;t<s;t++)tM[n[t]]=i}function Yw(n,e){Ut(n,function(t,i,s,r){s._w=s._w||{},e(t,s._w,s,r)})}function vle(n,e,t){e!=null&&Tt(tM,n)&&tM[n](e,t._a,t,n)}function k0(n){return n%4===0&&n%100!==0||n%400===0}var Bi=0,ll=1,qo=2,hi=3,eo=4,cl=5,cu=6,ble=7,yle=8;Le("Y",0,0,function(){var n=this.year();return n<=9999?ua(n,4):"+"+n});Le(0,["YY",2],0,function(){return this.year()%100});Le(0,["YYYY",4],0,"year");Le(0,["YYYYY",5],0,"year");Le(0,["YYYYYY",6,!0],0,"year");Ae("Y",I0);Ae("YY",un,qs);Ae("YYYY",FA,$A);Ae("YYYYY",P0,M0);Ae("YYYYYY",P0,M0);Ut(["YYYYY","YYYYYY"],Bi);Ut("YYYY",function(n,e){e[Bi]=n.length===2?le.parseTwoDigitYear(n):mt(n)});Ut("YY",function(n,e){e[Bi]=le.parseTwoDigitYear(n)});Ut("Y",function(n,e){e[Bi]=parseInt(n,10)});function dp(n){return k0(n)?366:365}le.parseTwoDigitYear=function(n){return mt(n)+(mt(n)>68?1900:2e3)};var Fz=ag("FullYear",!0);function Cle(){return k0(this.year())}function ag(n,e){return function(t){return t!=null?(Bz(this,n,t),le.updateOffset(this,e),this):ew(this,n)}}function ew(n,e){if(!n.isValid())return NaN;var t=n._d,i=n._isUTC;switch(e){case"Milliseconds":return i?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return i?t.getUTCSeconds():t.getSeconds();case"Minutes":return i?t.getUTCMinutes():t.getMinutes();case"Hours":return i?t.getUTCHours():t.getHours();case"Date":return i?t.getUTCDate():t.getDate();case"Day":return i?t.getUTCDay():t.getDay();case"Month":return i?t.getUTCMonth():t.getMonth();case"FullYear":return i?t.getUTCFullYear():t.getFullYear();default:return NaN}}function Bz(n,e,t){var i,s,r,o,a;if(!(!n.isValid()||isNaN(t))){switch(i=n._d,s=n._isUTC,e){case"Milliseconds":return void(s?i.setUTCMilliseconds(t):i.setMilliseconds(t));case"Seconds":return void(s?i.setUTCSeconds(t):i.setSeconds(t));case"Minutes":return void(s?i.setUTCMinutes(t):i.setMinutes(t));case"Hours":return void(s?i.setUTCHours(t):i.setHours(t));case"Date":return void(s?i.setUTCDate(t):i.setDate(t));case"FullYear":break;default:return}r=t,o=n.month(),a=n.date(),a=a===29&&o===1&&!k0(r)?28:a,s?i.setUTCFullYear(r,o,a):i.setFullYear(r,o,a)}}function Sle(n){return n=Mr(n),_a(this[n])?this[n]():this}function _le(n,e){if(typeof n=="object"){n=LA(n);var t=fle(n),i,s=t.length;for(i=0;i<s;i++)this[t[i].unit](n[t[i].unit])}else if(n=Mr(n),_a(this[n]))return this[n](e);return this}function Rle(n,e){return(n%e+e)%e}var Vn;Array.prototype.indexOf?Vn=Array.prototype.indexOf:Vn=function(n){var e;for(e=0;e<this.length;++e)if(this[e]===n)return e;return-1};function VA(n,e){if(isNaN(n)||isNaN(e))return NaN;var t=Rle(e,12);return n+=(e-t)/12,t===1?k0(n)?29:28:31-t%7%2}Le("M",["MM",2],"Mo",function(){return this.month()+1});Le("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});Le("MMMM",0,0,function(n){return this.localeData().months(this,n)});Ae("M",un,og);Ae("MM",un,qs);Ae("MMM",function(n,e){return e.monthsShortRegex(n)});Ae("MMMM",function(n,e){return e.monthsRegex(n)});Ut(["M","MM"],function(n,e){e[ll]=mt(n)-1});Ut(["MMM","MMMM"],function(n,e,t,i){var s=t._locale.monthsParse(n,i,t._strict);s!=null?e[ll]=s:tt(t).invalidMonth=n});var xle="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Vz="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Wz=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ele=Uw,Tle=Uw;function Mle(n,e){return n?oo(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||Wz).test(e)?"format":"standalone"][n.month()]:oo(this._months)?this._months:this._months.standalone}function Ale(n,e){return n?oo(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[Wz.test(e)?"format":"standalone"][n.month()]:oo(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Ple(n,e,t){var i,s,r,o=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=Sa([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return t?e==="MMM"?(s=Vn.call(this._shortMonthsParse,o),s!==-1?s:null):(s=Vn.call(this._longMonthsParse,o),s!==-1?s:null):e==="MMM"?(s=Vn.call(this._shortMonthsParse,o),s!==-1?s:(s=Vn.call(this._longMonthsParse,o),s!==-1?s:null)):(s=Vn.call(this._longMonthsParse,o),s!==-1?s:(s=Vn.call(this._shortMonthsParse,o),s!==-1?s:null))}function Ile(n,e,t){var i,s,r;if(this._monthsParseExact)return Ple.call(this,n,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=Sa([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[i].test(n))return i;if(t&&e==="MMM"&&this._shortMonthsParse[i].test(n))return i;if(!t&&this._monthsParse[i].test(n))return i}}function jz(n,e){if(!n.isValid())return n;if(typeof e=="string"){if(/^\d+$/.test(e))e=mt(e);else if(e=n.localeData().monthsParse(e),!Sl(e))return n}var t=e,i=n.date();return i=i<29?i:Math.min(i,VA(n.year(),t)),n._isUTC?n._d.setUTCMonth(t,i):n._d.setMonth(t,i),n}function zz(n){return n!=null?(jz(this,n),le.updateOffset(this,!0),this):ew(this,"Month")}function Ole(){return VA(this.year(),this.month())}function kle(n){return this._monthsParseExact?(Tt(this,"_monthsRegex")||Uz.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(Tt(this,"_monthsShortRegex")||(this._monthsShortRegex=Ele),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function Hle(n){return this._monthsParseExact?(Tt(this,"_monthsRegex")||Uz.call(this),n?this._monthsStrictRegex:this._monthsRegex):(Tt(this,"_monthsRegex")||(this._monthsRegex=Tle),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function Uz(){function n(l,c){return c.length-l.length}var e=[],t=[],i=[],s,r,o,a;for(s=0;s<12;s++)r=Sa([2e3,s]),o=wl(this.monthsShort(r,"")),a=wl(this.months(r,"")),e.push(o),t.push(a),i.push(a),i.push(o);e.sort(n),t.sort(n),i.sort(n),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Dle(n,e,t,i,s,r,o){var a;return n<100&&n>=0?(a=new Date(n+400,e,t,i,s,r,o),isFinite(a.getFullYear())&&a.setFullYear(n)):a=new Date(n,e,t,i,s,r,o),a}function tw(n){var e,t;return n<100&&n>=0?(t=Array.prototype.slice.call(arguments),t[0]=n+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(n)):e=new Date(Date.UTC.apply(null,arguments)),e}function jC(n,e,t){var i=7+e-t,s=(7+tw(n,0,i).getUTCDay()-e)%7;return-s+i-1}function Yz(n,e,t,i,s){var r=(7+t-i)%7,o=jC(n,i,s),a=1+7*(e-1)+r+o,l,c;return a<=0?(l=n-1,c=dp(l)+a):a>dp(n)?(l=n+1,c=a-dp(n)):(l=n,c=a),{year:l,dayOfYear:c}}function nw(n,e,t){var i=jC(n.year(),e,t),s=Math.floor((n.dayOfYear()-i-1)/7)+1,r,o;return s<1?(o=n.year()-1,r=s+vl(o,e,t)):s>vl(n.year(),e,t)?(r=s-vl(n.year(),e,t),o=n.year()+1):(o=n.year(),r=s),{week:r,year:o}}function vl(n,e,t){var i=jC(n,e,t),s=jC(n+1,e,t);return(dp(n)-i+s)/7}Le("w",["ww",2],"wo","week");Le("W",["WW",2],"Wo","isoWeek");Ae("w",un,og);Ae("ww",un,qs);Ae("W",un,og);Ae("WW",un,qs);Yw(["w","ww","W","WW"],function(n,e,t,i){e[i.substr(0,1)]=mt(n)});function Nle(n){return nw(n,this._week.dow,this._week.doy).week}var Lle={dow:0,doy:6};function $le(){return this._week.dow}function Fle(){return this._week.doy}function Ble(n){var e=this.localeData().week(this);return n==null?e:this.add((n-e)*7,"d")}function Vle(n){var e=nw(this,1,4).week;return n==null?e:this.add((n-e)*7,"d")}Le("d",0,"do","day");Le("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});Le("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});Le("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});Le("e",0,0,"weekday");Le("E",0,0,"isoWeekday");Ae("d",un);Ae("e",un);Ae("E",un);Ae("dd",function(n,e){return e.weekdaysMinRegex(n)});Ae("ddd",function(n,e){return e.weekdaysShortRegex(n)});Ae("dddd",function(n,e){return e.weekdaysRegex(n)});Yw(["dd","ddd","dddd"],function(n,e,t,i){var s=t._locale.weekdaysParse(n,i,t._strict);s!=null?e.d=s:tt(t).invalidWeekday=n});Yw(["d","e","E"],function(n,e,t,i){e[i]=mt(n)});function Wle(n,e){return typeof n!="string"?n:isNaN(n)?(n=e.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function jle(n,e){return typeof n=="string"?e.weekdaysParse(n)%7||7:isNaN(n)?null:n}function WA(n,e){return n.slice(e,7).concat(n.slice(0,e))}var zle="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Gz="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ule="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Yle=Uw,Gle=Uw,Kle=Uw;function qle(n,e){var t=oo(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return n===!0?WA(t,this._week.dow):n?t[n.day()]:t}function Xle(n){return n===!0?WA(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function Qle(n){return n===!0?WA(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function Zle(n,e,t){var i,s,r,o=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=Sa([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return t?e==="dddd"?(s=Vn.call(this._weekdaysParse,o),s!==-1?s:null):e==="ddd"?(s=Vn.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=Vn.call(this._minWeekdaysParse,o),s!==-1?s:null):e==="dddd"?(s=Vn.call(this._weekdaysParse,o),s!==-1||(s=Vn.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=Vn.call(this._minWeekdaysParse,o),s!==-1?s:null)):e==="ddd"?(s=Vn.call(this._shortWeekdaysParse,o),s!==-1||(s=Vn.call(this._weekdaysParse,o),s!==-1)?s:(s=Vn.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=Vn.call(this._minWeekdaysParse,o),s!==-1||(s=Vn.call(this._weekdaysParse,o),s!==-1)?s:(s=Vn.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function Jle(n,e,t){var i,s,r;if(this._weekdaysParseExact)return Zle.call(this,n,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=Sa([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[i].test(n))return i;if(t&&e==="ddd"&&this._shortWeekdaysParse[i].test(n))return i;if(t&&e==="dd"&&this._minWeekdaysParse[i].test(n))return i;if(!t&&this._weekdaysParse[i].test(n))return i}}function ece(n){if(!this.isValid())return n!=null?this:NaN;var e=ew(this,"Day");return n!=null?(n=Wle(n,this.localeData()),this.add(n-e,"d")):e}function tce(n){if(!this.isValid())return n!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return n==null?e:this.add(n-e,"d")}function nce(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var e=jle(n,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function ice(n){return this._weekdaysParseExact?(Tt(this,"_weekdaysRegex")||jA.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(Tt(this,"_weekdaysRegex")||(this._weekdaysRegex=Yle),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function sce(n){return this._weekdaysParseExact?(Tt(this,"_weekdaysRegex")||jA.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Tt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gle),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function rce(n){return this._weekdaysParseExact?(Tt(this,"_weekdaysRegex")||jA.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Tt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Kle),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function jA(){function n(h,u){return u.length-h.length}var e=[],t=[],i=[],s=[],r,o,a,l,c;for(r=0;r<7;r++)o=Sa([2e3,1]).day(r),a=wl(this.weekdaysMin(o,"")),l=wl(this.weekdaysShort(o,"")),c=wl(this.weekdays(o,"")),e.push(a),t.push(l),i.push(c),s.push(a),s.push(l),s.push(c);e.sort(n),t.sort(n),i.sort(n),s.sort(n),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function zA(){return this.hours()%12||12}function oce(){return this.hours()||24}Le("H",["HH",2],0,"hour");Le("h",["hh",2],0,zA);Le("k",["kk",2],0,oce);Le("hmm",0,0,function(){return""+zA.apply(this)+ua(this.minutes(),2)});Le("hmmss",0,0,function(){return""+zA.apply(this)+ua(this.minutes(),2)+ua(this.seconds(),2)});Le("Hmm",0,0,function(){return""+this.hours()+ua(this.minutes(),2)});Le("Hmmss",0,0,function(){return""+this.hours()+ua(this.minutes(),2)+ua(this.seconds(),2)});function Kz(n,e){Le(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Kz("a",!0);Kz("A",!1);function qz(n,e){return e._meridiemParse}Ae("a",qz);Ae("A",qz);Ae("H",un,BA);Ae("h",un,og);Ae("k",un,og);Ae("HH",un,qs);Ae("hh",un,qs);Ae("kk",un,qs);Ae("hmm",Lz);Ae("hmmss",$z);Ae("Hmm",Lz);Ae("Hmmss",$z);Ut(["H","HH"],hi);Ut(["k","kk"],function(n,e,t){var i=mt(n);e[hi]=i===24?0:i});Ut(["a","A"],function(n,e,t){t._isPm=t._locale.isPM(n),t._meridiem=n});Ut(["h","hh"],function(n,e,t){e[hi]=mt(n),tt(t).bigHour=!0});Ut("hmm",function(n,e,t){var i=n.length-2;e[hi]=mt(n.substr(0,i)),e[eo]=mt(n.substr(i)),tt(t).bigHour=!0});Ut("hmmss",function(n,e,t){var i=n.length-4,s=n.length-2;e[hi]=mt(n.substr(0,i)),e[eo]=mt(n.substr(i,2)),e[cl]=mt(n.substr(s)),tt(t).bigHour=!0});Ut("Hmm",function(n,e,t){var i=n.length-2;e[hi]=mt(n.substr(0,i)),e[eo]=mt(n.substr(i))});Ut("Hmmss",function(n,e,t){var i=n.length-4,s=n.length-2;e[hi]=mt(n.substr(0,i)),e[eo]=mt(n.substr(i,2)),e[cl]=mt(n.substr(s))});function ace(n){return(n+"").toLowerCase().charAt(0)==="p"}var lce=/[ap]\.?m?\.?/i,cce=ag("Hours",!0);function hce(n,e,t){return n>11?t?"pm":"PM":t?"am":"AM"}var Xz={calendar:Zae,longDateFormat:nle,invalidDate:sle,ordinal:ole,dayOfMonthOrdinalParse:ale,relativeTime:cle,months:xle,monthsShort:Vz,week:Lle,weekdays:zle,weekdaysMin:Ule,weekdaysShort:Gz,meridiemParse:lce},mn={},kg={},iw;function uce(n,e){var t,i=Math.min(n.length,e.length);for(t=0;t<i;t+=1)if(n[t]!==e[t])return t;return i}function oL(n){return n&&n.toLowerCase().replace("_","-")}function dce(n){for(var e=0,t,i,s,r;e<n.length;){for(r=oL(n[e]).split("-"),t=r.length,i=oL(n[e+1]),i=i?i.split("-"):null;t>0;){if(s=H0(r.slice(0,t).join("-")),s)return s;if(i&&i.length>=t&&uce(r,i)>=t-1)break;t--}e++}return iw}function fce(n){return!!(n&&n.match("^[^/\\\\]*$"))}function H0(n){var e=null,t;if(mn[n]===void 0&&typeof lC<"u"&&lC&&lC.exports&&fce(n))try{e=iw._abbr,t=require,t("./locale/"+n),Ec(e)}catch{mn[n]=null}return mn[n]}function Ec(n,e){var t;return n&&(ws(e)?t=Ol(n):t=UA(n,e),t?iw=t:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),iw._abbr}function UA(n,e){if(e!==null){var t,i=Xz;if(e.abbr=n,mn[n]!=null)kz("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=mn[n]._config;else if(e.parentLocale!=null)if(mn[e.parentLocale]!=null)i=mn[e.parentLocale]._config;else if(t=H0(e.parentLocale),t!=null)i=t._config;else return kg[e.parentLocale]||(kg[e.parentLocale]=[]),kg[e.parentLocale].push({name:n,config:e}),null;return mn[n]=new DA(JT(i,e)),kg[n]&&kg[n].forEach(function(s){UA(s.name,s.config)}),Ec(n),mn[n]}else return delete mn[n],null}function gce(n,e){if(e!=null){var t,i,s=Xz;mn[n]!=null&&mn[n].parentLocale!=null?mn[n].set(JT(mn[n]._config,e)):(i=H0(n),i!=null&&(s=i._config),e=JT(s,e),i==null&&(e.abbr=n),t=new DA(e),t.parentLocale=mn[n],mn[n]=t),Ec(n)}else mn[n]!=null&&(mn[n].parentLocale!=null?(mn[n]=mn[n].parentLocale,n===Ec()&&Ec(n)):mn[n]!=null&&delete mn[n]);return mn[n]}function Ol(n){var e;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return iw;if(!oo(n)){if(e=H0(n),e)return e;n=[n]}return dce(n)}function mce(){return eM(mn)}function YA(n){var e,t=n._a;return t&&tt(n).overflow===-2&&(e=t[ll]<0||t[ll]>11?ll:t[qo]<1||t[qo]>VA(t[Bi],t[ll])?qo:t[hi]<0||t[hi]>24||t[hi]===24&&(t[eo]!==0||t[cl]!==0||t[cu]!==0)?hi:t[eo]<0||t[eo]>59?eo:t[cl]<0||t[cl]>59?cl:t[cu]<0||t[cu]>999?cu:-1,tt(n)._overflowDayOfYear&&(e<Bi||e>qo)&&(e=qo),tt(n)._overflowWeeks&&e===-1&&(e=ble),tt(n)._overflowWeekday&&e===-1&&(e=yle),tt(n).overflow=e),n}var pce=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wce=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vce=/Z|[+-]\d\d(?::?\d\d)?/,Yv=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],GR=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],bce=/^\/?Date\((-?\d+)/i,yce=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Cce={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Qz(n){var e,t,i=n._i,s=pce.exec(i)||wce.exec(i),r,o,a,l,c=Yv.length,h=GR.length;if(s){for(tt(n).iso=!0,e=0,t=c;e<t;e++)if(Yv[e][1].exec(s[1])){o=Yv[e][0],r=Yv[e][2]!==!1;break}if(o==null){n._isValid=!1;return}if(s[3]){for(e=0,t=h;e<t;e++)if(GR[e][1].exec(s[3])){a=(s[2]||" ")+GR[e][0];break}if(a==null){n._isValid=!1;return}}if(!r&&a!=null){n._isValid=!1;return}if(s[4])if(vce.exec(s[4]))l="Z";else{n._isValid=!1;return}n._f=o+(a||"")+(l||""),KA(n)}else n._isValid=!1}function Sce(n,e,t,i,s,r){var o=[_ce(n),Vz.indexOf(e),parseInt(t,10),parseInt(i,10),parseInt(s,10)];return r&&o.push(parseInt(r,10)),o}function _ce(n){var e=parseInt(n,10);return e<=49?2e3+e:e<=999?1900+e:e}function Rce(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function xce(n,e,t){if(n){var i=Gz.indexOf(n),s=new Date(e[0],e[1],e[2]).getDay();if(i!==s)return tt(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function Ece(n,e,t){if(n)return Cce[n];if(e)return 0;var i=parseInt(t,10),s=i%100,r=(i-s)/100;return r*60+s}function Zz(n){var e=yce.exec(Rce(n._i)),t;if(e){if(t=Sce(e[4],e[3],e[2],e[5],e[6],e[7]),!xce(e[1],t,n))return;n._a=t,n._tzm=Ece(e[8],e[9],e[10]),n._d=tw.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),tt(n).rfc2822=!0}else n._isValid=!1}function Tce(n){var e=bce.exec(n._i);if(e!==null){n._d=new Date(+e[1]);return}if(Qz(n),n._isValid===!1)delete n._isValid;else return;if(Zz(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:le.createFromInputFallback(n)}le.createFromInputFallback=Tr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function of(n,e,t){return n??e??t}function Mce(n){var e=new Date(le.now());return n._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function GA(n){var e,t,i=[],s,r,o;if(!n._d){for(s=Mce(n),n._w&&n._a[qo]==null&&n._a[ll]==null&&Ace(n),n._dayOfYear!=null&&(o=of(n._a[Bi],s[Bi]),(n._dayOfYear>dp(o)||n._dayOfYear===0)&&(tt(n)._overflowDayOfYear=!0),t=tw(o,0,n._dayOfYear),n._a[ll]=t.getUTCMonth(),n._a[qo]=t.getUTCDate()),e=0;e<3&&n._a[e]==null;++e)n._a[e]=i[e]=s[e];for(;e<7;e++)n._a[e]=i[e]=n._a[e]==null?e===2?1:0:n._a[e];n._a[hi]===24&&n._a[eo]===0&&n._a[cl]===0&&n._a[cu]===0&&(n._nextDay=!0,n._a[hi]=0),n._d=(n._useUTC?tw:Dle).apply(null,i),r=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[hi]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==r&&(tt(n).weekdayMismatch=!0)}}function Ace(n){var e,t,i,s,r,o,a,l,c;e=n._w,e.GG!=null||e.W!=null||e.E!=null?(r=1,o=4,t=of(e.GG,n._a[Bi],nw(hn(),1,4).year),i=of(e.W,1),s=of(e.E,1),(s<1||s>7)&&(l=!0)):(r=n._locale._week.dow,o=n._locale._week.doy,c=nw(hn(),r,o),t=of(e.gg,n._a[Bi],c.year),i=of(e.w,c.week),e.d!=null?(s=e.d,(s<0||s>6)&&(l=!0)):e.e!=null?(s=e.e+r,(e.e<0||e.e>6)&&(l=!0)):s=r),i<1||i>vl(t,r,o)?tt(n)._overflowWeeks=!0:l!=null?tt(n)._overflowWeekday=!0:(a=Yz(t,i,s,r,o),n._a[Bi]=a.year,n._dayOfYear=a.dayOfYear)}le.ISO_8601=function(){};le.RFC_2822=function(){};function KA(n){if(n._f===le.ISO_8601){Qz(n);return}if(n._f===le.RFC_2822){Zz(n);return}n._a=[],tt(n).empty=!0;var e=""+n._i,t,i,s,r,o,a=e.length,l=0,c,h;for(s=Hz(n._f,n._locale).match(NA)||[],h=s.length,t=0;t<h;t++)r=s[t],i=(e.match(ple(r,n))||[])[0],i&&(o=e.substr(0,e.indexOf(i)),o.length>0&&tt(n).unusedInput.push(o),e=e.slice(e.indexOf(i)+i.length),l+=i.length),Af[r]?(i?tt(n).empty=!1:tt(n).unusedTokens.push(r),vle(r,i,n)):n._strict&&!i&&tt(n).unusedTokens.push(r);tt(n).charsLeftOver=a-l,e.length>0&&tt(n).unusedInput.push(e),n._a[hi]<=12&&tt(n).bigHour===!0&&n._a[hi]>0&&(tt(n).bigHour=void 0),tt(n).parsedDateParts=n._a.slice(0),tt(n).meridiem=n._meridiem,n._a[hi]=Pce(n._locale,n._a[hi],n._meridiem),c=tt(n).era,c!==null&&(n._a[Bi]=n._locale.erasConvertYear(c,n._a[Bi])),GA(n),YA(n)}function Pce(n,e,t){var i;return t==null?e:n.meridiemHour!=null?n.meridiemHour(e,t):(n.isPM!=null&&(i=n.isPM(t),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function Ice(n){var e,t,i,s,r,o,a=!1,l=n._f.length;if(l===0){tt(n).invalidFormat=!0,n._d=new Date(NaN);return}for(s=0;s<l;s++)r=0,o=!1,e=HA({},n),n._useUTC!=null&&(e._useUTC=n._useUTC),e._f=n._f[s],KA(e),kA(e)&&(o=!0),r+=tt(e).charsLeftOver,r+=tt(e).unusedTokens.length*10,tt(e).score=r,a?r<i&&(i=r,t=e):(i==null||r<i||o)&&(i=r,t=e,o&&(a=!0));wc(n,t||e)}function Oce(n){if(!n._d){var e=LA(n._i),t=e.day===void 0?e.date:e.day;n._a=Iz([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),GA(n)}}function kce(n){var e=new zw(YA(Jz(n)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Jz(n){var e=n._i,t=n._f;return n._locale=n._locale||Ol(n._l),e===null||t===void 0&&e===""?T0({nullInput:!0}):(typeof e=="string"&&(n._i=e=n._locale.preparse(e)),ao(e)?new zw(YA(e)):(jw(e)?n._d=e:oo(t)?Ice(n):t?KA(n):Hce(n),kA(n)||(n._d=null),n))}function Hce(n){var e=n._i;ws(e)?n._d=new Date(le.now()):jw(e)?n._d=new Date(e.valueOf()):typeof e=="string"?Tce(n):oo(e)?(n._a=Iz(e.slice(0),function(t){return parseInt(t,10)}),GA(n)):_u(e)?Oce(n):Sl(e)?n._d=new Date(e):le.createFromInputFallback(n)}function eU(n,e,t,i,s){var r={};return(e===!0||e===!1)&&(i=e,e=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(_u(n)&&OA(n)||oo(n)&&n.length===0)&&(n=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=t,r._i=n,r._f=e,r._strict=i,kce(r)}function hn(n,e,t,i){return eU(n,e,t,i,!1)}var Dce=Tr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=hn.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:T0()}),Nce=Tr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=hn.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:T0()});function tU(n,e){var t,i;if(e.length===1&&oo(e[0])&&(e=e[0]),!e.length)return hn();for(t=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][n](t))&&(t=e[i]);return t}function Lce(){var n=[].slice.call(arguments,0);return tU("isBefore",n)}function $ce(){var n=[].slice.call(arguments,0);return tU("isAfter",n)}var Fce=function(){return Date.now?Date.now():+new Date},Hg=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Bce(n){var e,t=!1,i,s=Hg.length;for(e in n)if(Tt(n,e)&&!(Vn.call(Hg,e)!==-1&&(n[e]==null||!isNaN(n[e]))))return!1;for(i=0;i<s;++i)if(n[Hg[i]]){if(t)return!1;parseFloat(n[Hg[i]])!==mt(n[Hg[i]])&&(t=!0)}return!0}function Vce(){return this._isValid}function Wce(){return po(NaN)}function D0(n){var e=LA(n),t=e.year||0,i=e.quarter||0,s=e.month||0,r=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._isValid=Bce(e),this._milliseconds=+h+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+r*7,this._months=+s+i*3+t*12,this._data={},this._locale=Ol(),this._bubble()}function By(n){return n instanceof D0}function nM(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function jce(n,e,t){var i=Math.min(n.length,e.length),s=Math.abs(n.length-e.length),r=0,o;for(o=0;o<i;o++)mt(n[o])!==mt(e[o])&&r++;return r+s}function nU(n,e){Le(n,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+ua(~~(t/60),2)+e+ua(~~t%60,2)})}nU("Z",":");nU("ZZ","");Ae("Z",O0);Ae("ZZ",O0);Ut(["Z","ZZ"],function(n,e,t){t._useUTC=!0,t._tzm=qA(O0,n)});var zce=/([\+\-]|\d\d)/gi;function qA(n,e){var t=(e||"").match(n),i,s,r;return t===null?null:(i=t[t.length-1]||[],s=(i+"").match(zce)||["-",0,0],r=+(s[1]*60)+mt(s[2]),r===0?0:s[0]==="+"?r:-r)}function XA(n,e){var t,i;return e._isUTC?(t=e.clone(),i=(ao(n)||jw(n)?n.valueOf():hn(n).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),le.updateOffset(t,!1),t):hn(n).local()}function iM(n){return-Math.round(n._d.getTimezoneOffset())}le.updateOffset=function(){};function Uce(n,e,t){var i=this._offset||0,s;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=qA(O0,n),n===null)return this}else Math.abs(n)<16&&!t&&(n=n*60);return!this._isUTC&&e&&(s=iM(this)),this._offset=n,this._isUTC=!0,s!=null&&this.add(s,"m"),i!==n&&(!e||this._changeInProgress?rU(this,po(n-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,le.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:iM(this)}function Yce(n,e){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,e),this):-this.utcOffset()}function Gce(n){return this.utcOffset(0,n)}function Kce(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(iM(this),"m")),this}function qce(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=qA(gle,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function Xce(n){return this.isValid()?(n=n?hn(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function Qce(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Zce(){if(!ws(this._isDSTShifted))return this._isDSTShifted;var n={},e;return HA(n,this),n=Jz(n),n._a?(e=n._isUTC?Sa(n._a):hn(n._a),this._isDSTShifted=this.isValid()&&jce(n._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Jce(){return this.isValid()?!this._isUTC:!1}function ehe(){return this.isValid()?this._isUTC:!1}function iU(){return this.isValid()?this._isUTC&&this._offset===0:!1}var the=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,nhe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function po(n,e){var t=n,i=null,s,r,o;return By(n)?t={ms:n._milliseconds,d:n._days,M:n._months}:Sl(n)||!isNaN(+n)?(t={},e?t[e]=+n:t.milliseconds=+n):(i=the.exec(n))?(s=i[1]==="-"?-1:1,t={y:0,d:mt(i[qo])*s,h:mt(i[hi])*s,m:mt(i[eo])*s,s:mt(i[cl])*s,ms:mt(nM(i[cu]*1e3))*s}):(i=nhe.exec(n))?(s=i[1]==="-"?-1:1,t={y:uh(i[2],s),M:uh(i[3],s),w:uh(i[4],s),d:uh(i[5],s),h:uh(i[6],s),m:uh(i[7],s),s:uh(i[8],s)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=ihe(hn(t.from),hn(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),r=new D0(t),By(n)&&Tt(n,"_locale")&&(r._locale=n._locale),By(n)&&Tt(n,"_isValid")&&(r._isValid=n._isValid),r}po.fn=D0.prototype;po.invalid=Wce;function uh(n,e){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*e}function aL(n,e){var t={};return t.months=e.month()-n.month()+(e.year()-n.year())*12,n.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+n.clone().add(t.months,"M"),t}function ihe(n,e){var t;return n.isValid()&&e.isValid()?(e=XA(e,n),n.isBefore(e)?t=aL(n,e):(t=aL(e,n),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function sU(n,e){return function(t,i){var s,r;return i!==null&&!isNaN(+i)&&(kz(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=t,t=i,i=r),s=po(t,i),rU(this,s,n),this}}function rU(n,e,t,i){var s=e._milliseconds,r=nM(e._days),o=nM(e._months);n.isValid()&&(i=i??!0,o&&jz(n,ew(n,"Month")+o*t),r&&Bz(n,"Date",ew(n,"Date")+r*t),s&&n._d.setTime(n._d.valueOf()+s*t),i&&le.updateOffset(n,r||o))}var she=sU(1,"add"),rhe=sU(-1,"subtract");function oU(n){return typeof n=="string"||n instanceof String}function ohe(n){return ao(n)||jw(n)||oU(n)||Sl(n)||lhe(n)||ahe(n)||n===null||n===void 0}function ahe(n){var e=_u(n)&&!OA(n),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,r,o=i.length;for(s=0;s<o;s+=1)r=i[s],t=t||Tt(n,r);return e&&t}function lhe(n){var e=oo(n),t=!1;return e&&(t=n.filter(function(i){return!Sl(i)&&oU(n)}).length===0),e&&t}function che(n){var e=_u(n)&&!OA(n),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,r;for(s=0;s<i.length;s+=1)r=i[s],t=t||Tt(n,r);return e&&t}function hhe(n,e){var t=n.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function uhe(n,e){arguments.length===1&&(arguments[0]?ohe(arguments[0])?(n=arguments[0],e=void 0):che(arguments[0])&&(e=arguments[0],n=void 0):(n=void 0,e=void 0));var t=n||hn(),i=XA(t,this).startOf("day"),s=le.calendarFormat(this,i)||"sameElse",r=e&&(_a(e[s])?e[s].call(this,t):e[s]);return this.format(r||this.localeData().calendar(s,this,hn(t)))}function dhe(){return new zw(this)}function fhe(n,e){var t=ao(n)?n:hn(n);return this.isValid()&&t.isValid()?(e=Mr(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function ghe(n,e){var t=ao(n)?n:hn(n);return this.isValid()&&t.isValid()?(e=Mr(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function mhe(n,e,t,i){var s=ao(n)?n:hn(n),r=ao(e)?e:hn(e);return this.isValid()&&s.isValid()&&r.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(s,t):!this.isBefore(s,t))&&(i[1]===")"?this.isBefore(r,t):!this.isAfter(r,t))):!1}function phe(n,e){var t=ao(n)?n:hn(n),i;return this.isValid()&&t.isValid()?(e=Mr(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function whe(n,e){return this.isSame(n,e)||this.isAfter(n,e)}function vhe(n,e){return this.isSame(n,e)||this.isBefore(n,e)}function bhe(n,e,t){var i,s,r;if(!this.isValid())return NaN;if(i=XA(n,this),!i.isValid())return NaN;switch(s=(i.utcOffset()-this.utcOffset())*6e4,e=Mr(e),e){case"year":r=Vy(this,i)/12;break;case"month":r=Vy(this,i);break;case"quarter":r=Vy(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-s)/864e5;break;case"week":r=(this-i-s)/6048e5;break;default:r=this-i}return t?r:pr(r)}function Vy(n,e){if(n.date()<e.date())return-Vy(e,n);var t=(e.year()-n.year())*12+(e.month()-n.month()),i=n.clone().add(t,"months"),s,r;return e-i<0?(s=n.clone().add(t-1,"months"),r=(e-i)/(i-s)):(s=n.clone().add(t+1,"months"),r=(e-i)/(s-i)),-(t+r)||0}le.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";le.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function yhe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Che(n){if(!this.isValid())return null;var e=n!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?Fy(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):_a(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Fy(t,"Z")):Fy(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function She(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",e="",t,i,s,r;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+n+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",r=e+'[")]',this.format(t+i+s+r)}function _he(n){n||(n=this.isUtc()?le.defaultFormatUtc:le.defaultFormat);var e=Fy(this,n);return this.localeData().postformat(e)}function Rhe(n,e){return this.isValid()&&(ao(n)&&n.isValid()||hn(n).isValid())?po({to:this,from:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function xhe(n){return this.from(hn(),n)}function Ehe(n,e){return this.isValid()&&(ao(n)&&n.isValid()||hn(n).isValid())?po({from:this,to:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function The(n){return this.to(hn(),n)}function aU(n){var e;return n===void 0?this._locale._abbr:(e=Ol(n),e!=null&&(this._locale=e),this)}var lU=Tr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function cU(){return this._locale}var zC=1e3,Pf=60*zC,UC=60*Pf,hU=(365*400+97)*24*UC;function If(n,e){return(n%e+e)%e}function uU(n,e,t){return n<100&&n>=0?new Date(n+400,e,t)-hU:new Date(n,e,t).valueOf()}function dU(n,e,t){return n<100&&n>=0?Date.UTC(n+400,e,t)-hU:Date.UTC(n,e,t)}function Mhe(n){var e,t;if(n=Mr(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?dU:uU,n){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=If(e+(this._isUTC?0:this.utcOffset()*Pf),UC);break;case"minute":e=this._d.valueOf(),e-=If(e,Pf);break;case"second":e=this._d.valueOf(),e-=If(e,zC);break}return this._d.setTime(e),le.updateOffset(this,!0),this}function Ahe(n){var e,t;if(n=Mr(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?dU:uU,n){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=UC-If(e+(this._isUTC?0:this.utcOffset()*Pf),UC)-1;break;case"minute":e=this._d.valueOf(),e+=Pf-If(e,Pf)-1;break;case"second":e=this._d.valueOf(),e+=zC-If(e,zC)-1;break}return this._d.setTime(e),le.updateOffset(this,!0),this}function Phe(){return this._d.valueOf()-(this._offset||0)*6e4}function Ihe(){return Math.floor(this.valueOf()/1e3)}function Ohe(){return new Date(this.valueOf())}function khe(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function Hhe(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function Dhe(){return this.isValid()?this.toISOString():null}function Nhe(){return kA(this)}function Lhe(){return wc({},tt(this))}function $he(){return tt(this).overflow}function Fhe(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Le("N",0,0,"eraAbbr");Le("NN",0,0,"eraAbbr");Le("NNN",0,0,"eraAbbr");Le("NNNN",0,0,"eraName");Le("NNNNN",0,0,"eraNarrow");Le("y",["y",1],"yo","eraYear");Le("y",["yy",2],0,"eraYear");Le("y",["yyy",3],0,"eraYear");Le("y",["yyyy",4],0,"eraYear");Ae("N",QA);Ae("NN",QA);Ae("NNN",QA);Ae("NNNN",Xhe);Ae("NNNNN",Qhe);Ut(["N","NN","NNN","NNNN","NNNNN"],function(n,e,t,i){var s=t._locale.erasParse(n,i,t._strict);s?tt(t).era=s:tt(t).invalidEra=n});Ae("y",rg);Ae("yy",rg);Ae("yyy",rg);Ae("yyyy",rg);Ae("yo",Zhe);Ut(["y","yy","yyy","yyyy"],Bi);Ut(["yo"],function(n,e,t,i){var s;t._locale._eraYearOrdinalRegex&&(s=n.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[Bi]=t._locale.eraYearOrdinalParse(n,s):e[Bi]=parseInt(n,10)});function Bhe(n,e){var t,i,s,r=this._eras||Ol("en")._eras;for(t=0,i=r.length;t<i;++t){switch(typeof r[t].since){case"string":s=le(r[t].since).startOf("day"),r[t].since=s.valueOf();break}switch(typeof r[t].until){case"undefined":r[t].until=1/0;break;case"string":s=le(r[t].until).startOf("day").valueOf(),r[t].until=s.valueOf();break}}return r}function Vhe(n,e,t){var i,s,r=this.eras(),o,a,l;for(n=n.toUpperCase(),i=0,s=r.length;i<s;++i)if(o=r[i].name.toUpperCase(),a=r[i].abbr.toUpperCase(),l=r[i].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(a===n)return r[i];break;case"NNNN":if(o===n)return r[i];break;case"NNNNN":if(l===n)return r[i];break}else if([o,a,l].indexOf(n)>=0)return r[i]}function Whe(n,e){var t=n.since<=n.until?1:-1;return e===void 0?le(n.since).year():le(n.since).year()+(e-n.offset)*t}function jhe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].name;return""}function zhe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].narrow;return""}function Uhe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].abbr;return""}function Yhe(){var n,e,t,i,s=this.localeData().eras();for(n=0,e=s.length;n<e;++n)if(t=s[n].since<=s[n].until?1:-1,i=this.clone().startOf("day").valueOf(),s[n].since<=i&&i<=s[n].until||s[n].until<=i&&i<=s[n].since)return(this.year()-le(s[n].since).year())*t+s[n].offset;return this.year()}function Ghe(n){return Tt(this,"_erasNameRegex")||ZA.call(this),n?this._erasNameRegex:this._erasRegex}function Khe(n){return Tt(this,"_erasAbbrRegex")||ZA.call(this),n?this._erasAbbrRegex:this._erasRegex}function qhe(n){return Tt(this,"_erasNarrowRegex")||ZA.call(this),n?this._erasNarrowRegex:this._erasRegex}function QA(n,e){return e.erasAbbrRegex(n)}function Xhe(n,e){return e.erasNameRegex(n)}function Qhe(n,e){return e.erasNarrowRegex(n)}function Zhe(n,e){return e._eraYearOrdinalRegex||rg}function ZA(){var n=[],e=[],t=[],i=[],s,r,o,a,l,c=this.eras();for(s=0,r=c.length;s<r;++s)o=wl(c[s].name),a=wl(c[s].abbr),l=wl(c[s].narrow),e.push(o),n.push(a),t.push(l),i.push(o),i.push(a),i.push(l);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}Le(0,["gg",2],0,function(){return this.weekYear()%100});Le(0,["GG",2],0,function(){return this.isoWeekYear()%100});function N0(n,e){Le(0,[n,n.length],0,e)}N0("gggg","weekYear");N0("ggggg","weekYear");N0("GGGG","isoWeekYear");N0("GGGGG","isoWeekYear");Ae("G",I0);Ae("g",I0);Ae("GG",un,qs);Ae("gg",un,qs);Ae("GGGG",FA,$A);Ae("gggg",FA,$A);Ae("GGGGG",P0,M0);Ae("ggggg",P0,M0);Yw(["gggg","ggggg","GGGG","GGGGG"],function(n,e,t,i){e[i.substr(0,2)]=mt(n)});Yw(["gg","GG"],function(n,e,t,i){e[i]=le.parseTwoDigitYear(n)});function Jhe(n){return fU.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function eue(n){return fU.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function tue(){return vl(this.year(),1,4)}function nue(){return vl(this.isoWeekYear(),1,4)}function iue(){var n=this.localeData()._week;return vl(this.year(),n.dow,n.doy)}function sue(){var n=this.localeData()._week;return vl(this.weekYear(),n.dow,n.doy)}function fU(n,e,t,i,s){var r;return n==null?nw(this,i,s).year:(r=vl(n,i,s),e>r&&(e=r),rue.call(this,n,e,t,i,s))}function rue(n,e,t,i,s){var r=Yz(n,e,t,i,s),o=tw(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Le("Q",0,"Qo","quarter");Ae("Q",Dz);Ut("Q",function(n,e){e[ll]=(mt(n)-1)*3});function oue(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}Le("D",["DD",2],"Do","date");Ae("D",un,og);Ae("DD",un,qs);Ae("Do",function(n,e){return n?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Ut(["D","DD"],qo);Ut("Do",function(n,e){e[qo]=mt(n.match(un)[0])});var gU=ag("Date",!0);Le("DDD",["DDDD",3],"DDDo","dayOfYear");Ae("DDD",A0);Ae("DDDD",Nz);Ut(["DDD","DDDD"],function(n,e,t){t._dayOfYear=mt(n)});function aue(n){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?e:this.add(n-e,"d")}Le("m",["mm",2],0,"minute");Ae("m",un,BA);Ae("mm",un,qs);Ut(["m","mm"],eo);var lue=ag("Minutes",!1);Le("s",["ss",2],0,"second");Ae("s",un,BA);Ae("ss",un,qs);Ut(["s","ss"],cl);var cue=ag("Seconds",!1);Le("S",0,0,function(){return~~(this.millisecond()/100)});Le(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Le(0,["SSS",3],0,"millisecond");Le(0,["SSSS",4],0,function(){return this.millisecond()*10});Le(0,["SSSSS",5],0,function(){return this.millisecond()*100});Le(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Le(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Le(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Le(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Ae("S",A0,Dz);Ae("SS",A0,qs);Ae("SSS",A0,Nz);var vc,mU;for(vc="SSSS";vc.length<=9;vc+="S")Ae(vc,rg);function hue(n,e){e[cu]=mt(("0."+n)*1e3)}for(vc="S";vc.length<=9;vc+="S")Ut(vc,hue);mU=ag("Milliseconds",!1);Le("z",0,0,"zoneAbbr");Le("zz",0,0,"zoneName");function uue(){return this._isUTC?"UTC":""}function due(){return this._isUTC?"Coordinated Universal Time":""}var ue=zw.prototype;ue.add=she;ue.calendar=uhe;ue.clone=dhe;ue.diff=bhe;ue.endOf=Ahe;ue.format=_he;ue.from=Rhe;ue.fromNow=xhe;ue.to=Ehe;ue.toNow=The;ue.get=Sle;ue.invalidAt=$he;ue.isAfter=fhe;ue.isBefore=ghe;ue.isBetween=mhe;ue.isSame=phe;ue.isSameOrAfter=whe;ue.isSameOrBefore=vhe;ue.isValid=Nhe;ue.lang=lU;ue.locale=aU;ue.localeData=cU;ue.max=Nce;ue.min=Dce;ue.parsingFlags=Lhe;ue.set=_le;ue.startOf=Mhe;ue.subtract=rhe;ue.toArray=khe;ue.toObject=Hhe;ue.toDate=Ohe;ue.toISOString=Che;ue.inspect=She;typeof Symbol<"u"&&Symbol.for!=null&&(ue[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ue.toJSON=Dhe;ue.toString=yhe;ue.unix=Ihe;ue.valueOf=Phe;ue.creationData=Fhe;ue.eraName=jhe;ue.eraNarrow=zhe;ue.eraAbbr=Uhe;ue.eraYear=Yhe;ue.year=Fz;ue.isLeapYear=Cle;ue.weekYear=Jhe;ue.isoWeekYear=eue;ue.quarter=ue.quarters=oue;ue.month=zz;ue.daysInMonth=Ole;ue.week=ue.weeks=Ble;ue.isoWeek=ue.isoWeeks=Vle;ue.weeksInYear=iue;ue.weeksInWeekYear=sue;ue.isoWeeksInYear=tue;ue.isoWeeksInISOWeekYear=nue;ue.date=gU;ue.day=ue.days=ece;ue.weekday=tce;ue.isoWeekday=nce;ue.dayOfYear=aue;ue.hour=ue.hours=cce;ue.minute=ue.minutes=lue;ue.second=ue.seconds=cue;ue.millisecond=ue.milliseconds=mU;ue.utcOffset=Uce;ue.utc=Gce;ue.local=Kce;ue.parseZone=qce;ue.hasAlignedHourOffset=Xce;ue.isDST=Qce;ue.isLocal=Jce;ue.isUtcOffset=ehe;ue.isUtc=iU;ue.isUTC=iU;ue.zoneAbbr=uue;ue.zoneName=due;ue.dates=Tr("dates accessor is deprecated. Use date instead.",gU);ue.months=Tr("months accessor is deprecated. Use month instead",zz);ue.years=Tr("years accessor is deprecated. Use year instead",Fz);ue.zone=Tr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Yce);ue.isDSTShifted=Tr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Zce);function fue(n){return hn(n*1e3)}function gue(){return hn.apply(null,arguments).parseZone()}function pU(n){return n}var Mt=DA.prototype;Mt.calendar=Jae;Mt.longDateFormat=ile;Mt.invalidDate=rle;Mt.ordinal=lle;Mt.preparse=pU;Mt.postformat=pU;Mt.relativeTime=hle;Mt.pastFuture=ule;Mt.set=Qae;Mt.eras=Bhe;Mt.erasParse=Vhe;Mt.erasConvertYear=Whe;Mt.erasAbbrRegex=Khe;Mt.erasNameRegex=Ghe;Mt.erasNarrowRegex=qhe;Mt.months=Mle;Mt.monthsShort=Ale;Mt.monthsParse=Ile;Mt.monthsRegex=Hle;Mt.monthsShortRegex=kle;Mt.week=Nle;Mt.firstDayOfYear=Fle;Mt.firstDayOfWeek=$le;Mt.weekdays=qle;Mt.weekdaysMin=Qle;Mt.weekdaysShort=Xle;Mt.weekdaysParse=Jle;Mt.weekdaysRegex=ice;Mt.weekdaysShortRegex=sce;Mt.weekdaysMinRegex=rce;Mt.isPM=ace;Mt.meridiem=hce;function YC(n,e,t,i){var s=Ol(),r=Sa().set(i,e);return s[t](r,n)}function wU(n,e,t){if(Sl(n)&&(e=n,n=void 0),n=n||"",e!=null)return YC(n,e,t,"month");var i,s=[];for(i=0;i<12;i++)s[i]=YC(n,i,t,"month");return s}function JA(n,e,t,i){typeof n=="boolean"?(Sl(e)&&(t=e,e=void 0),e=e||""):(e=n,t=e,n=!1,Sl(e)&&(t=e,e=void 0),e=e||"");var s=Ol(),r=n?s._week.dow:0,o,a=[];if(t!=null)return YC(e,(t+r)%7,i,"day");for(o=0;o<7;o++)a[o]=YC(e,(o+r)%7,i,"day");return a}function mue(n,e){return wU(n,e,"months")}function pue(n,e){return wU(n,e,"monthsShort")}function wue(n,e,t){return JA(n,e,t,"weekdays")}function vue(n,e,t){return JA(n,e,t,"weekdaysShort")}function bue(n,e,t){return JA(n,e,t,"weekdaysMin")}Ec("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var e=n%10,t=mt(n%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return n+t}});le.lang=Tr("moment.lang is deprecated. Use moment.locale instead.",Ec);le.langData=Tr("moment.langData is deprecated. Use moment.localeData instead.",Ol);var Aa=Math.abs;function yue(){var n=this._data;return this._milliseconds=Aa(this._milliseconds),this._days=Aa(this._days),this._months=Aa(this._months),n.milliseconds=Aa(n.milliseconds),n.seconds=Aa(n.seconds),n.minutes=Aa(n.minutes),n.hours=Aa(n.hours),n.months=Aa(n.months),n.years=Aa(n.years),this}function vU(n,e,t,i){var s=po(e,t);return n._milliseconds+=i*s._milliseconds,n._days+=i*s._days,n._months+=i*s._months,n._bubble()}function Cue(n,e){return vU(this,n,e,1)}function Sue(n,e){return vU(this,n,e,-1)}function lL(n){return n<0?Math.floor(n):Math.ceil(n)}function _ue(){var n=this._milliseconds,e=this._days,t=this._months,i=this._data,s,r,o,a,l;return n>=0&&e>=0&&t>=0||n<=0&&e<=0&&t<=0||(n+=lL(sM(t)+e)*864e5,e=0,t=0),i.milliseconds=n%1e3,s=pr(n/1e3),i.seconds=s%60,r=pr(s/60),i.minutes=r%60,o=pr(r/60),i.hours=o%24,e+=pr(o/24),l=pr(bU(e)),t+=l,e-=lL(sM(l)),a=pr(t/12),t%=12,i.days=e,i.months=t,i.years=a,this}function bU(n){return n*4800/146097}function sM(n){return n*146097/4800}function Rue(n){if(!this.isValid())return NaN;var e,t,i=this._milliseconds;if(n=Mr(n),n==="month"||n==="quarter"||n==="year")switch(e=this._days+i/864e5,t=this._months+bU(e),n){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(sM(this._months)),n){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+n)}}function kl(n){return function(){return this.as(n)}}var yU=kl("ms"),xue=kl("s"),Eue=kl("m"),Tue=kl("h"),Mue=kl("d"),Aue=kl("w"),Pue=kl("M"),Iue=kl("Q"),Oue=kl("y"),kue=yU;function Hue(){return po(this)}function Due(n){return n=Mr(n),this.isValid()?this[n+"s"]():NaN}function id(n){return function(){return this.isValid()?this._data[n]:NaN}}var Nue=id("milliseconds"),Lue=id("seconds"),$ue=id("minutes"),Fue=id("hours"),Bue=id("days"),Vue=id("months"),Wue=id("years");function jue(){return pr(this.days()/7)}var Xa=Math.round,yf={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function zue(n,e,t,i,s){return s.relativeTime(e||1,!!t,n,i)}function Uue(n,e,t,i){var s=po(n).abs(),r=Xa(s.as("s")),o=Xa(s.as("m")),a=Xa(s.as("h")),l=Xa(s.as("d")),c=Xa(s.as("M")),h=Xa(s.as("w")),u=Xa(s.as("y")),d=r<=t.ss&&["s",r]||r<t.s&&["ss",r]||o<=1&&["m"]||o<t.m&&["mm",o]||a<=1&&["h"]||a<t.h&&["hh",a]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(d=d||h<=1&&["w"]||h<t.w&&["ww",h]),d=d||c<=1&&["M"]||c<t.M&&["MM",c]||u<=1&&["y"]||["yy",u],d[2]=e,d[3]=+n>0,d[4]=i,zue.apply(null,d)}function Yue(n){return n===void 0?Xa:typeof n=="function"?(Xa=n,!0):!1}function Gue(n,e){return yf[n]===void 0?!1:e===void 0?yf[n]:(yf[n]=e,n==="s"&&(yf.ss=e-1),!0)}function Kue(n,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=yf,s,r;return typeof n=="object"&&(e=n,n=!1),typeof n=="boolean"&&(t=n),typeof e=="object"&&(i=Object.assign({},yf,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),s=this.localeData(),r=Uue(this,!t,i,s),t&&(r=s.pastFuture(+this,r)),s.postformat(r)}var KR=Math.abs;function wd(n){return(n>0)-(n<0)||+n}function L0(){if(!this.isValid())return this.localeData().invalidDate();var n=KR(this._milliseconds)/1e3,e=KR(this._days),t=KR(this._months),i,s,r,o,a=this.asSeconds(),l,c,h,u;return a?(i=pr(n/60),s=pr(i/60),n%=60,i%=60,r=pr(t/12),t%=12,o=n?n.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=wd(this._months)!==wd(a)?"-":"",h=wd(this._days)!==wd(a)?"-":"",u=wd(this._milliseconds)!==wd(a)?"-":"",l+"P"+(r?c+r+"Y":"")+(t?c+t+"M":"")+(e?h+e+"D":"")+(s||i||n?"T":"")+(s?u+s+"H":"")+(i?u+i+"M":"")+(n?u+o+"S":"")):"P0D"}var Ct=D0.prototype;Ct.isValid=Vce;Ct.abs=yue;Ct.add=Cue;Ct.subtract=Sue;Ct.as=Rue;Ct.asMilliseconds=yU;Ct.asSeconds=xue;Ct.asMinutes=Eue;Ct.asHours=Tue;Ct.asDays=Mue;Ct.asWeeks=Aue;Ct.asMonths=Pue;Ct.asQuarters=Iue;Ct.asYears=Oue;Ct.valueOf=kue;Ct._bubble=_ue;Ct.clone=Hue;Ct.get=Due;Ct.milliseconds=Nue;Ct.seconds=Lue;Ct.minutes=$ue;Ct.hours=Fue;Ct.days=Bue;Ct.weeks=jue;Ct.months=Vue;Ct.years=Wue;Ct.humanize=Kue;Ct.toISOString=L0;Ct.toString=L0;Ct.toJSON=L0;Ct.locale=aU;Ct.localeData=cU;Ct.toIsoString=Tr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",L0);Ct.lang=lU;Le("X",0,0,"unix");Le("x",0,0,"valueOf");Ae("x",I0);Ae("X",mle);Ut("X",function(n,e,t){t._d=new Date(parseFloat(n)*1e3)});Ut("x",function(n,e,t){t._d=new Date(mt(n))});//! moment.js
le.version="2.30.1";qae(hn);le.fn=ue;le.min=Lce;le.max=$ce;le.now=Fce;le.utc=Sa;le.unix=fue;le.months=mue;le.isDate=jw;le.locale=Ec;le.invalid=T0;le.duration=po;le.isMoment=ao;le.weekdays=wue;le.parseZone=gue;le.localeData=Ol;le.isDuration=By;le.monthsShort=pue;le.weekdaysMin=bue;le.defineLocale=UA;le.updateLocale=gce;le.locales=mce;le.weekdaysShort=vue;le.normalizeUnits=Mr;le.relativeTimeRounding=Yue;le.relativeTimeThreshold=Gue;le.calendarFormat=hhe;le.prototype=ue;le.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function CU(n){const e=n.length;let t=0;for(;t<e;)n[t]=[n[t]],t+=1}function rM(n,e){const t=e.length;let i=0;for(;i<t;)n.push(e[i]),i+=1}function fp(n){const e=[];if(!n||n.length===0||!n[0]||n[0].length===0)return e;const t=n.length,i=n[0].length;for(let s=0;s<t;s++)for(let r=0;r<i;r++)e[r]||(e[r]=[]),e[r][s]=n[s][r];return e}function Un(n,e,t,i){let s=-1,r=n,o=t;Array.isArray(n)||(r=Array.from(n));const a=r.length;for(i&&a&&(s+=1,o=r[s]),s+=1;s<a;)o=e(o,r[s],s,r),s+=1;return o}function _l(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const s=i.length,r=[];let o=-1;for(;t<s;){const a=i[t];e(a,t,i)&&(o+=1,r[o]=a),t+=1}return r}function lt(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const s=i.length,r=[];let o=-1;for(;t<s;){const a=i[t];o+=1,r[o]=e(a,t,i),t+=1}return r}function L(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const s=i.length;for(;t<s&&e(i[t],t,i)!==!1;)t+=1;return n}function SU(n){return Un(n,(e,t)=>e+t,0)}function que(n){return Un(n,(e,t)=>e>t?e:t,Array.isArray(n)?n[0]:void 0)}function Xue(n){return Un(n,(e,t)=>e<t?e:t,Array.isArray(n)?n[0]:void 0)}function Que(n){return n.length?SU(n)/n.length:0}function _U(n){return Un(n,(e,t)=>e.concat(Array.isArray(t)?_U(t):t),[])}function eP(n){const e=[];return L(n,t=>{e.indexOf(t)===-1&&e.push(t)}),e}function oM(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...s]=[...e];let r=i;return L(s,o=>{r=r.filter(a=>!o.includes(a))}),r}function Zue(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...s]=[...e];let r=i;return L(s,o=>{r=r.filter(a=>o.includes(a))}),r}function Jue(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...s]=[...e],r=new Set(i);return L(s,o=>{L(o,a=>{r.has(a)||r.add(a)})}),Array.from(r)}function aM(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";return n.split(e)}const ede=Object.freeze(Object.defineProperty({__proto__:null,arrayAvg:Que,arrayEach:L,arrayFilter:_l,arrayFlatten:_U,arrayMap:lt,arrayMax:que,arrayMin:Xue,arrayReduce:Un,arraySum:SU,arrayUnique:eP,extendArray:rM,getDifferenceOfArrays:oM,getIntersectionOfArrays:Zue,getUnionOfArrays:Jue,pivot:fp,stringToArray:aM,to2dArray:CU},Symbol.toStringTag,{value:"Module"}));function Nt(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Un(n,(r,o,a)=>{const l=o.replace(/\r?\n\s*/g,""),c=t[a]?t[a]:"";return r+l+c},"").trim()}function Tn(n){let e;switch(typeof n){case"string":case"number":e=`${n}`;break;case"object":e=n===null?"":n.toString();break;case"undefined":e="";break;default:e=n.toString();break}return e}function Me(n){return typeof n<"u"}function Xt(n){return typeof n>"u"}function Mn(n){return n===null||n===""||Xt(n)}function RU(n){return Object.prototype.toString.call(n)==="[object RegExp]"}const $m="length",gp=n=>parseInt(n,16),cL=n=>parseInt(n,10),GC=(n,e,t)=>n.substr(e,t),mp=n=>n.codePointAt(0)-65,lM=n=>`${n}`.replace(/\-/g,""),tde=n=>gp(GC(lM(n),gp("12"),mp("F")))/(gp(GC(lM(n),mp("B"),~~![][$m]))||9),nde=()=>typeof location<"u"&&/^([a-z0-9\-]+\.)?\x68\x61\x6E\x64\x73\x6F\x6E\x74\x61\x62\x6C\x65\x2E\x63\x6F\x6D$/i.test(location.host);let hL=!1;const uL={invalid:()=>Nt`
    The license key for Handsontable is invalid.\x20
    If you need any help, contact us at support@handsontable.com.`,expired:n=>{let{keyValidityDate:e,hotVersion:t}=n;return Nt`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${t}. Renew your license key at handsontable.com or downgrade to a version released prior\x20
    to ${e}. If you need any help, contact us at sales@handsontable.com.`},missing:()=>Nt`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'. If you need any help, contact\x20
    us at support@handsontable.com.`,non_commercial:()=>""},dL={invalid:()=>Nt`
    The license key for Handsontable is invalid.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> on how to\x20
    install it properly or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,expired:n=>{let{keyValidityDate:e,hotVersion:t}=n;return Nt`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${t}. <a href="https://handsontable.com/pricing" target="_blank">Renew</a> your\x20
    license key or downgrade to a version released prior to ${e}. If you need any\x20
    help, contact us at <a href="mailto:sales@handsontable.com">sales@handsontable.com</a>.`},missing:()=>Nt`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> about it in\x20
    the documentation or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,non_commercial:()=>""};function xU(n,e){const t=!Mn(n),i=typeof n=="string"&&n.toLowerCase()==="non-commercial-and-evaluation",s="14.6.1";let r,o="invalid",a="invalid";n=lM(n||"");const l=ide(n);if(t||i||l)if(l){const c=le("17/10/2024","DD/MM/YYYY"),h=Math.floor(c.toDate().getTime()/864e5),u=tde(n);r=le((u+1)*864e5,"x").format("MMMM DD, YYYY"),h>u?(o="expired",a="expired"):(o="valid",a="valid")}else i?(o="non_commercial",a="valid"):(o="invalid",a="invalid");else o="missing",a="missing";if(nde()&&(o="valid",a="valid"),!hL&&o!=="valid"&&(uL[o]({keyValidityDate:r,hotVersion:s})&&console[o==="non_commercial"?"info":"warn"](uL[o]({keyValidityDate:r,hotVersion:s})),hL=!0),a!=="valid"&&e.parentNode&&dL[a]({keyValidityDate:r,hotVersion:s})){const h=document.createElement("div");h.className="hot-display-license-info",h.innerHTML=dL[a]({keyValidityDate:r,hotVersion:s}),e.parentNode.insertBefore(h,e.nextSibling)}}function ide(n){let e=[][$m],t=e;if(n[$m]!==mp("Z"))return!1;for(let i="",s="B<H4P+".split(""),r=mp(s.shift());r;r=mp(s.shift()||"A"))--r<""[$m]?t=t|(cL(`${cL(gp(i)+(gp(GC(n,Math.abs(r),2))+[]).padStart(2,"0"))}`)%97||2)>>1:i=GC(n,r,r?s[$m]===1?9:8:6);return t===e}const sde=Object.freeze(Object.defineProperty({__proto__:null,_injectProductInfo:xU,isDefined:Me,isEmpty:Mn,isRegExp:RU,isUndefined:Xt,stringify:Tn},Symbol.toStringTag,{value:"Module"}));function Ui(n){return n[0].toUpperCase()+n.substr(1)}function rde(){const n=[];for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];let s=t.length;for(;s;){s-=1;const r=Tn(t[s]).toLowerCase();n.indexOf(r)===-1&&n.push(r)}return n.length===1}function tP(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+n()+n()}function nP(n){return/^([0-9][0-9]?%$)|(^100%$)/.test(n)}function iP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return`${n}`.replace(/(?:\\)?\[([^[\]]+)]/g,(t,i)=>t.charAt(0)==="\\"?t.substr(1,t.length-1):e[i]===void 0?"":e[i])}function cM(n){return $0(`${n}`,{ALLOWED_TAGS:[]})}function $0(n,e){return Kae.sanitize(n,e)}const ode=Object.freeze(Object.defineProperty({__proto__:null,equalsIgnoreCase:rde,isPercentValue:nP,randomString:tP,sanitize:$0,stripTags:cM,substitute:iP,toUpperCaseFirst:Ui},Symbol.toStringTag,{value:"Module"})),lg=n=>["tabindex",n],ade=()=>["role","treegrid"],ea=()=>["role","presentation"],lde=()=>["role","gridcell"],cde=()=>["role","rowheader"],EU=()=>["role","rowgroup"],hde=()=>["role","columnheader"],hM=()=>["role","row"],ude=()=>["role","menu"],dde=()=>["role","menuitem"],fde=()=>["role","menuitemcheckbox"],gde=()=>["role","combobox"],TU=()=>["role","listbox"],mde=()=>["role","option"],pde=()=>["role","checkbox"],wde=()=>["scope","col"],vde=()=>["scope","row"],bde=()=>["type","text"],KC=n=>["aria-label",n],sd=()=>["aria-hidden","true"],yde=()=>["aria-disabled","true"],Cde=()=>["aria-multiselectable","true"],MU=n=>["aria-haspopup",n],AU=n=>["aria-rowcount",n],F0=n=>["aria-colcount",n],PU=n=>["aria-rowindex",n],sP=n=>["aria-colindex",n],Sr=n=>["aria-expanded",n],Sde=n=>["aria-sort",n],fL=()=>["aria-readonly","true"],gL=()=>["aria-invalid","true"],IU=n=>["aria-checked",n],rP=()=>["aria-selected","true"],_de=()=>["aria-autocomplete","list"],Rde=n=>["aria-controls",n],xde=n=>["aria-activedescendant",n],Ede=n=>["aria-live",n],Tde=n=>["aria-relevant",n],Mde=n=>["aria-setsize",n],Ade=n=>["aria-posinset",n];function OU(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,i=null,s=n;for(;s!==null;){if(t===e){i=s;break}s.host&&s.nodeType===Node.DOCUMENT_FRAGMENT_NODE?s=s.host:(t+=1,s=s.parentNode)}return i}function kU(n,e){const t=n.closest(".handsontable");return!!t&&(t.parentNode===e||t===e)}function HU(n){return Object.getPrototypeOf(n.parent)&&n.frameElement}function Nu(n){return HU(n)&&n.parent}function Pde(n){return!!Object.getPrototypeOf(n.parent)}function Lc(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;const{ELEMENT_NODE:i,DOCUMENT_FRAGMENT_NODE:s}=Node;let r=n;for(;r!=null&&r!==t;){const{nodeType:o,nodeName:a}=r;if(o===i&&(e.includes(a)||e.includes(r)))return r;const{host:l}=r;l&&o===s?r=l:r=r.parentNode}return null}function Fm(n,e,t){const i=[];let s=n;for(;s&&(s=Lc(s,e,t),!(!s||t&&!t.contains(s)));)i.push(s),s.host&&s.nodeType===Node.DOCUMENT_FRAGMENT_NODE?s=s.host:s=s.parentNode;const r=i.length;return r?i[r-1]:null}function Tc(n,e){let t=n.parentNode,i=[];for(typeof e=="string"?n.defaultView?i=Array.prototype.slice.call(n.querySelectorAll(e),0):i=Array.prototype.slice.call(n.ownerDocument.querySelectorAll(e),0):i.push(e);t!==null;){if(i.indexOf(t)>-1)return!0;t=t.parentNode}return!1}function DU(n){let e=0,t=n;if(t.previousSibling)for(;t=t.previousSibling;)e+=1;return e}function Zl(n,e,t){const i=t.parentElement.querySelector(`.ht_clone_${n}`);return i?i.contains(e):null}function NU(n){return!n||!n.length?[]:n.filter(e=>!!e)}function LU(n,e){if(!n||!n.length)return{regexFree:[],regexes:[]};const t=[],i=[];return i.push(...n.filter(s=>{const r=s instanceof RegExp;return r&&e&&t.push(s),!r})),{regexFree:i,regexes:t}}function Fe(n,e){return n.classList===void 0||typeof e!="string"||e===""?!1:n.classList.contains(e)}function ae(n,e){typeof e=="string"&&(e=e.split(" ")),e=NU(e),e.length>0&&n.classList.add(...e)}function ze(n,e){typeof e=="string"?e=e.split(" "):e instanceof RegExp&&(e=[e]);let{regexFree:t,regexes:i}=LU(e,!0);t=NU(t),t.length>0&&n.classList.remove(...t),i.forEach(s=>{n.classList.forEach(r=>{s.test(r)&&n.classList.remove(r)})})}function $e(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;Array.isArray(e)||(e=[[e,t]]),e.forEach(i=>{Array.isArray(i)&&i[0]!==""&&n.setAttribute(...i)})}function rd(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];typeof e=="string"?e=e.split(" "):e instanceof RegExp&&(e=[e]);const{regexFree:t,regexes:i}=LU(e,!0);t.forEach(s=>{s!==""&&n.removeAttribute(s)}),i.forEach(s=>{n.getAttributeNames().forEach(r=>{s.test(r)&&n.removeAttribute(r)})})}function oP(n){if(n.nodeType===3)n.parentNode.removeChild(n);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(n.nodeName)>-1){const e=n.childNodes;for(let t=e.length-1;t>=0;t--)oP(e[t])}}function lo(n){let e;for(;e=n.lastChild;)n.removeChild(e)}const $U=/(<(.*)>|&(.*);)/;function od(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;$U.test(e)?n.innerHTML=t?$0(e):e:$c(n,e)}function $c(n,e){const t=n.firstChild;t&&t.nodeType===3&&t.nextSibling===null?t.textContent=e:(lo(n),n.appendChild(n.ownerDocument.createTextNode(e)))}function Lu(n){const e=n.ownerDocument.documentElement;let t=n;for(;t!==e;){if(t===null)return!1;if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)if(t.host){if(t.host.impl)return Lu(t.host.impl);if(t.host)return Lu(t.host);throw new Error("Lost in Web Components world")}else return!1;else if(da(t).display==="none")return!1;t=t.parentNode}return!0}function li(n){const e=n.ownerDocument,t=e.defaultView,i=e.documentElement;let s=n,r,o,a;for(r=s.offsetLeft,o=s.offsetTop,a=s;(s=s.offsetParent)&&!(s===e.body||!("offsetLeft"in s));)r+=s.offsetLeft,o+=s.offsetTop,a=s;return a&&a.style.position==="fixed"&&(r+=t.pageXOffset||i.scrollLeft,o+=t.pageYOffset||i.scrollTop),{left:r,top:o}}function aP(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).scrollY}function B0(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).scrollX}function V0(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n===e?aP(e):n.scrollTop}function lP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n===e?B0(e):n.scrollLeft}function sw(n){let e=n.ownerDocument,t=e?e.defaultView:void 0;e||(e=n.document?n.document:n,t=e.defaultView);const i=["auto","scroll"];let s=n.parentNode;for(;s&&s.style&&e.body!==s;){let{overflow:r,overflowX:o,overflowY:a}=s.style;if([r,o,a].includes("scroll"))return s;if({overflow:r,overflowX:o,overflowY:a}=t.getComputedStyle(s),i.includes(r)||i.includes(o)||i.includes(a)||s.clientHeight<=s.scrollHeight+1&&(i.includes(a)||i.includes(r))||s.clientWidth<=s.scrollWidth+1&&(i.includes(o)||i.includes(r)))return s;s=s.parentNode}return t}function FU(n){return n.scrollHeight-n.clientHeight}function BU(n){return n.scrollWidth-n.clientWidth}function $u(n){const e=n.ownerDocument,t=e.defaultView;let i=n.parentNode;for(;i&&i.style&&e.body!==i;){if(i.style.overflow!=="visible"&&i.style.overflow!=="")return i;const s=da(i,t),r=["scroll","hidden","auto"],o=s.getPropertyValue("overflow"),a=s.getPropertyValue("overflow-y"),l=s.getPropertyValue("overflow-x");if(r.includes(o)||r.includes(a)||r.includes(l))return i;i=i.parentNode}return t}function Uf(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window;if(n){if(n===t)return e==="width"?`${t.innerWidth}px`:e==="height"?`${t.innerHeight}px`:void 0}else return;const i=n.style[e];if(i!==""&&i!==void 0)return i;const s=da(n,t);if(s[e]!==""&&s[e]!==void 0)return s[e]}function Ide(n,e){const{selectorText:t}=e;let i=!1;return e.type===CSSRule.STYLE_RULE&&t&&(n.msMatchesSelector?i=n.msMatchesSelector(t):n.matches&&(i=n.matches(t))),i}function da(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n.currentStyle||e.getComputedStyle(n)}function Qt(n){return n.offsetWidth}function $n(n){return n.offsetHeight}function hu(n){return n.clientHeight||n.innerHeight}function cP(n){return n.clientWidth||n.innerWidth}function Ode(n,e,t){n.addEventListener(e,t,!1)}function kde(n,e,t){n.removeEventListener(e,t,!1)}function hP(n){return n.selectionStart?n.selectionStart:0}function VU(n){return n.selectionEnd?n.selectionEnd:0}function Hde(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;const e=n.document;let t="";return n.getSelection?t=n.getSelection().toString():e.selection&&e.selection.type!=="Control"&&(t=e.selection.createRange().text),t}function uM(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;n.getSelection&&(n.getSelection().empty?n.getSelection().empty():n.getSelection().removeAllRanges&&n.getSelection().removeAllRanges())}function Gw(n,e,t){if(t===void 0&&(t=e),n.setSelectionRange){n.focus();try{n.setSelectionRange(e,t)}catch{const s=n.parentNode,r=s.style.display;s.style.display="block",n.setSelectionRange(e,t),s.style.display=r}}}let qR;function Dde(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;const e=n.createElement("div");e.style.height="200px",e.style.width="100%";const t=n.createElement("div");t.style.boxSizing="content-box",t.style.height="150px",t.style.left="0px",t.style.overflow="hidden",t.style.position="absolute",t.style.top="0px",t.style.width="200px",t.style.visibility="hidden",t.appendChild(e),(n.body||n.documentElement).appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let s=e.offsetWidth;return i===s&&(s=t.clientWidth),(n.body||n.documentElement).removeChild(t),i-s}function ui(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return qR===void 0&&(qR=Dde(n)),qR}function WU(n){return n.offsetWidth!==n.clientWidth}function jU(n){return n.offsetHeight!==n.clientHeight}function W0(n,e,t){n.style.transform=`translate3d(${e},${t},0)`}function Nde(n){let e;return n.style.transform&&(e=n.style.transform)!==""?["transform",e]:-1}function Kw(n){n.style.transform&&n.style.transform!==""&&(n.style.transform="")}function pp(n){return n&&(["INPUT","SELECT","TEXTAREA"].indexOf(n.nodeName)>-1||n.contentEditable==="true")}function j0(n){return pp(n)&&n.hasAttribute("data-hot-input")===!1}function Lde(n){const e=n.ownerDocument.activeElement;j0(e)||n.select()}function uP(n){return!n.parentNode}function zU(n,e){new IntersectionObserver((i,s)=>{i.forEach(r=>{r.isIntersecting&&n.offsetParent!==null&&(e(),s.unobserve(n))})},{root:n.ownerDocument.body}).observe(n)}function dP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=n.ownerDocument,s=i.createRange(),r=i.defaultView.getSelection();$e(n,"contenteditable",!0),t&&$e(n,...sd()),e&&ae(n,"invisibleSelection"),s.selectNodeContents(n),r.removeAllRanges(),r.addRange(s)}function fP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const t=n.ownerDocument.defaultView.getSelection();n.hasAttribute("aria-hidden")&&n.removeAttribute("aria-hidden"),t.removeAllRanges(),e&&ze(n,"invisibleSelection"),n.removeAttribute("contenteditable")}function UU(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;dP(n,t),e(),fP(n,t)}const $de=Object.freeze(Object.defineProperty({__proto__:null,HTML_CHARACTERS:$U,addClass:ae,addEvent:Ode,clearTextSelection:uM,closest:Lc,closestDown:Fm,empty:lo,fastInnerHTML:od,fastInnerText:$c,getCaretPosition:hP,getComputedStyle:da,getCssTransform:Nde,getFrameElement:HU,getMaximumScrollLeft:BU,getMaximumScrollTop:FU,getParent:OU,getParentWindow:Nu,getScrollLeft:lP,getScrollTop:V0,getScrollableElement:sw,getScrollbarWidth:ui,getSelectionEndPosition:VU,getSelectionText:Hde,getStyle:Uf,getTrimmingContainer:$u,getWindowScrollLeft:B0,getWindowScrollTop:aP,hasAccessToParentWindow:Pde,hasClass:Fe,hasHorizontalScrollbar:jU,hasVerticalScrollbar:WU,index:DU,innerHeight:hu,innerWidth:cP,isChildOf:Tc,isDetached:uP,isInput:pp,isOutsideInput:j0,isThisHotChild:kU,isVisible:Lu,makeElementContentEditableAndSelectItsContent:dP,matchesCSSRules:Ide,observeVisibilityChangeOnce:zU,offset:li,outerHeight:$n,outerWidth:Qt,overlayContainsElement:Zl,removeAttribute:rd,removeClass:ze,removeContentEditableFromElementAndDeselect:fP,removeEvent:kde,removeTextNodes:oP,resetCssTransform:Kw,runWithSelectedContendEditableElement:UU,selectElementIfAllowed:Lde,setAttribute:$e,setCaretPosition:Gw,setOverlayPosition:W0},Symbol.toStringTag,{value:"Module"}));function Yt(n){return typeof n=="function"}function YU(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=0;const i={lastCallThrottled:!0};let s=null;function r(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];const c=Date.now();let h=!1;i.lastCallThrottled=!0,t||(t=c,h=!0);const u=e-(c-t);return h?(i.lastCallThrottled=!1,n.apply(this,a)):(s&&clearTimeout(s),s=setTimeout(()=>{i.lastCallThrottled=!1,n.apply(this,a),t=0,s=void 0},u)),i}return r}function Fde(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10;const i=YU(n,e);let s=t;function r(){s=t}function o(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return s?(s-=1,n.apply(this,l)):i.apply(this,l)}return o.clearHits=r,o}function z0(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=null,i;function s(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t&&clearTimeout(t),t=setTimeout(()=>{i=n.apply(this,o)},e),i}return s}function Bde(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...s]=e;return function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return Un(s,(c,h)=>h(c),i.apply(this,a))}}function gP(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n.apply(this,t.concat(o))}}function GU(n){const e=n.length;function t(i){return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const l=i.concat(o);let c;return l.length>=e?c=n.apply(this,l):c=t(l),c}}return t([])}function Vde(n){const e=n.length;function t(i){return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];const l=i.concat(o.reverse());let c;return l.length>=e?c=n.apply(this,l):c=t(l),c}}return t([])}function qC(n,e,t,i,s,r,o,a){return Me(a)?n.call(e,t,i,s,r,o,a):Me(o)?n.call(e,t,i,s,r,o):Me(r)?n.call(e,t,i,s,r):Me(s)?n.call(e,t,i,s):Me(i)?n.call(e,t,i):Me(t)?n.call(e,t):n.call(e)}const Wde=Object.freeze(Object.defineProperty({__proto__:null,curry:GU,curryRight:Vde,debounce:z0,fastCall:qC,isFunction:Yt,partial:gP,pipe:Bde,throttle:YU,throttleAfterHits:Fde},Symbol.toStringTag,{value:"Module"}));var jde=ei,mL=cz,zde=Ei,pL=Qu,Ude=E0,wL=jde([].push),Yde=function(n){if(zde(n))return n;if(mL(n)){for(var e=n.length,t=[],i=0;i<e;i++){var s=n[i];typeof s=="string"?wL(t,s):(typeof s=="number"||pL(s)==="Number"||pL(s)==="String")&&wL(t,Ude(s))}var r=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(mL(this))return l;for(var c=0;c<r;c++)if(t[c]===a)return l}}},Gde=Ti,KU=sg,qU=x0,Kde=mo,qw=ei,XU=Es,vL=Ei,bL=wA,QU=PA,qde=Yde,Xde=pA,Qde=String,Mc=KU("JSON","stringify"),Gv=qw(/./.exec),yL=qw("".charAt),Zde=qw("".charCodeAt),Jde=qw("".replace),efe=qw(1 .toString),tfe=/[\uD800-\uDFFF]/g,CL=/^[\uD800-\uDBFF]$/,SL=/^[\uDC00-\uDFFF]$/,_L=!Xde||XU(function(){var n=KU("Symbol")("stringify detection");return Mc([n])!=="[null]"||Mc({a:n})!=="{}"||Mc(Object(n))!=="{}"}),RL=XU(function(){return Mc("\uDF06\uD834")!=='"\\udf06\\ud834"'||Mc("\uDEAD")!=='"\\udead"'}),nfe=function(n,e){var t=QU(arguments),i=qde(e);if(!(!vL(i)&&(n===void 0||bL(n))))return t[1]=function(s,r){if(vL(i)&&(r=Kde(i,this,Qde(s),r)),!bL(r))return r},qU(Mc,null,t)},ife=function(n,e,t){var i=yL(t,e-1),s=yL(t,e+1);return Gv(CL,n)&&!Gv(SL,s)||Gv(SL,n)&&!Gv(CL,i)?"\\u"+efe(Zde(n,0),16):n};Mc&&Gde({target:"JSON",stat:!0,arity:3,forced:_L||RL},{stringify:function(e,t,i){var s=QU(arguments),r=qU(_L?nfe:Mc,null,s);return RL&&typeof r=="string"?Jde(r,tfe,ife):r}});function Yf(n){let e;return Array.isArray(n)?e=n.length?new Array(n.length).fill(null):[]:(e={},et(n,(t,i)=>{i!=="__children"&&(t&&typeof t=="object"&&!Array.isArray(t)?e[i]=Yf(t):Array.isArray(t)?t.length&&typeof t[0]=="object"&&!Array.isArray(t[0])?e[i]=[Yf(t[0])]:e[i]=[]:e[i]=null)})),e}function wo(n,e){return e.prototype.constructor=e,n.prototype=new e,n.prototype.constructor=n,n}function zn(n,e,t){const i=Array.isArray(t);return et(e,(s,r)=>{(i===!1||t.includes(r))&&(n[r]=s)}),n}function Xw(n,e){et(e,(t,i)=>{e[i]&&typeof e[i]=="object"?(n[i]||(Array.isArray(e[i])?n[i]=[]:Object.prototype.toString.call(e[i])==="[object Date]"?n[i]=e[i]:n[i]={}),Xw(n[i],e[i])):n[i]=e[i]})}function Yi(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function co(n){const e={};return et(n,(t,i)=>{e[i]=t}),e}function Lt(n){n.MIXINS||(n.MIXINS=[]);for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return L(t,s=>{n.MIXINS.push(s.MIXIN_NAME),et(s,(r,o)=>{if(n.prototype[o]!==void 0)throw new Error(`Mixin conflict. Property '${o}' already exist and cannot be overwritten.`);if(typeof r=="function")n.prototype[o]=r;else{const a=function(h,u){const d=`_${h}`,f=g=>{let m=g;return(Array.isArray(m)||Je(m))&&(m=Yi(m)),m};return function(){return this[d]===void 0&&(this[d]=f(u)),this[d]}},l=function(h){const u=`_${h}`;return function(d){this[u]=d}};Object.defineProperty(n.prototype,o,{get:a(o,r),set:l(o),configurable:!0})}})}),n}function U0(n,e){return JSON.stringify(n)===JSON.stringify(e)}function Je(n){return Object.prototype.toString.call(n)==="[object Object]"}function Ra(n,e,t,i){i.value=t,i.writable=i.writable!==!1,i.enumerable=i.enumerable!==!1,i.configurable=i.configurable!==!1,Object.defineProperty(n,e,i)}function et(n,e){for(const t in n)if((!n.hasOwnProperty||n.hasOwnProperty&&Object.prototype.hasOwnProperty.call(n,t))&&e(n[t],t,n)===!1)break;return n}function ZU(n,e){const t=e.split(".");let i=n;return et(t,s=>{if(i=i[s],i===void 0)return i=void 0,!1}),i}function Wy(n,e,t){const i=e.split(".");let s=n;i.forEach((r,o)=>{o!==i.length-1?(wn(s,r)||(s[r]={}),s=s[r]):s[r]=t})}function Y0(n){if(!Je(n))return 0;const e=function(t){let i=0;return Je(t)?et(t,(s,r)=>{r!=="__children"&&(i+=e(s))}):i+=1,i};return e(n)}function Cr(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"value";const t=`_${e}`,i={_touched:!1,[t]:n,isTouched(){return this._touched}};return Object.defineProperty(i,e,{get(){return this[t]},set(s){this._touched=!0,this[t]=s},enumerable:!0,configurable:!0}),i}function wn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const sfe=Object.freeze(Object.defineProperty({__proto__:null,clone:co,createObjectPropListener:Cr,deepClone:Yi,deepExtend:Xw,deepObjectSize:Y0,defineGetter:Ra,duckSchema:Yf,extend:zn,getProperty:ZU,hasOwnProperty:wn,inherit:wo,isObject:Je,isObjectEqual:U0,mixin:Lt,objectEach:et,setProperty:Wy},Symbol.toStringTag,{value:"Module"}));function G0(n){return window.requestAnimationFrame(n)}function rw(n){window.cancelAnimationFrame(n)}function mP(){return"ontouchstart"in window}function JU(){return typeof window<"u"}let vd;function eY(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return vd||(typeof Intl=="object"?vd=new Intl.Collator(n,e).compare:typeof String.prototype.localeCompare=="function"?vd=(t,i)=>`${t}`.localeCompare(i):vd=(t,i)=>t===i?0:t>i?-1:1,vd)}const rfe=Object.freeze(Object.defineProperty({__proto__:null,cancelAnimationFrame:rw,getComparisonFunction:eY,isCSR:JU,isTouchSupported:mP,requestAnimationFrame:G0},Symbol.toStringTag,{value:"Module"})),ur=n=>{const e={value:!1};return e.test=(t,i)=>{e.value=n(t,i)},e},Hl={chrome:ur((n,e)=>/Chrome/.test(n)&&/Google/.test(e)),chromeWebKit:ur(n=>/CriOS/.test(n)),edge:ur(n=>/Edge/.test(n)),edgeWebKit:ur(n=>/EdgiOS/.test(n)),firefox:ur(n=>/Firefox/.test(n)),firefoxWebKit:ur(n=>/FxiOS/.test(n)),mobile:ur(n=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n)),safari:ur((n,e)=>/Safari/.test(n)&&/Apple Computer/.test(e))},cg={mac:ur(n=>/^Mac/.test(n)),win:ur(n=>/^Win/.test(n)),linux:ur(n=>/^Linux/.test(n)),ios:ur(n=>/iPhone|iPad|iPod/i.test(n))};function tY(){let{userAgent:n=navigator.userAgent,vendor:e=navigator.vendor}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et(Hl,t=>{let{test:i}=t;return void i(n,e)})}function nY(){let{platform:n=navigator.platform}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et(cg,e=>{let{test:t}=e;return void t(n)})}JU()&&(tY(),nY());function pP(){return Hl.chrome.value}function iY(){return Hl.chromeWebKit.value}function jy(){return Hl.firefox.value}function sY(){return Hl.firefoxWebKit.value}function wP(){return Hl.safari.value}function rY(){return Hl.edge.value}function ofe(){return Hl.edgeWebKit.value}function hl(){return Hl.mobile.value}function vP(){return cg.ios.value}function bP(){let{maxTouchPoints:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:navigator;return n>2&&cg.mac.value}function dM(){return cg.win.value}function ow(){return cg.mac.value}function afe(){return cg.linux.value}const lfe=Object.freeze(Object.defineProperty({__proto__:null,isChrome:pP,isChromeWebKit:iY,isEdge:rY,isEdgeWebKit:ofe,isFirefox:jy,isFirefoxWebKit:sY,isIOS:vP,isIpadOS:bP,isLinuxOS:afe,isMacOS:ow,isMobileBrowser:hl,isSafari:wP,isWindowsOS:dM,setBrowserMeta:tY,setPlatformMeta:nY},Symbol.toStringTag,{value:"Module"})),Oe={ALT:18,ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,AUDIO_DOWN:jy()?182:174,AUDIO_MUTE:jy()?181:173,AUDIO_UP:jy()?183:175,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND_LEFT:91,COMMAND_RIGHT:93,COMMAND_FIREFOX:224,CONTROL:17,DELETE:46,END:35,ENTER:13,ESCAPE:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,HOME:36,INSERT:45,MEDIA_NEXT:176,MEDIA_PLAY_PAUSE:179,MEDIA_PREV:177,MEDIA_STOP:178,NULL:0,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PERIOD:190,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,A:65,C:67,D:68,F:70,L:76,O:79,P:80,S:83,V:86,X:88,Y:89,Z:90},cfe=[Oe.ALT,Oe.ARROW_DOWN,Oe.ARROW_LEFT,Oe.ARROW_RIGHT,Oe.ARROW_UP,Oe.AUDIO_DOWN,Oe.AUDIO_MUTE,Oe.AUDIO_UP,Oe.BACKSPACE,Oe.CAPS_LOCK,Oe.DELETE,Oe.END,Oe.ENTER,Oe.ESCAPE,Oe.F1,Oe.F2,Oe.F3,Oe.F4,Oe.F5,Oe.F6,Oe.F7,Oe.F8,Oe.F9,Oe.F10,Oe.F11,Oe.F12,Oe.F13,Oe.F14,Oe.F15,Oe.F16,Oe.F17,Oe.F18,Oe.F19,Oe.HOME,Oe.INSERT,Oe.MEDIA_NEXT,Oe.MEDIA_PLAY_PAUSE,Oe.MEDIA_PREV,Oe.MEDIA_STOP,Oe.NULL,Oe.NUM_LOCK,Oe.PAGE_DOWN,Oe.PAGE_UP,Oe.PAUSE,Oe.SCROLL_LOCK,Oe.SHIFT,Oe.TAB];function oY(n){return n===32||n>=48&&n<=57||n>=96&&n<=111||n>=186&&n<=192||n>=219&&n<=222||n>=226||n>=65&&n<=90}function yP(n){return cfe.includes(n)}function hfe(n){const e=[];return ow()?e.push(Oe.COMMAND_LEFT,Oe.COMMAND_RIGHT,Oe.COMMAND_FIREFOX):e.push(Oe.CONTROL),e.includes(n)}function aY(n){return[Oe.CONTROL,Oe.COMMAND_LEFT,Oe.COMMAND_RIGHT,Oe.COMMAND_FIREFOX].includes(n)}function hg(n,e){const t=e.split("|");let i=!1;return L(t,s=>{if(n===Oe[s])return i=!0,!1}),i}const ufe=Object.freeze(Object.defineProperty({__proto__:null,KEY_CODES:Oe,isCtrlKey:hfe,isCtrlMetaKey:aY,isFunctionKey:yP,isKey:hg,isPrintableChar:oY},Symbol.toStringTag,{value:"Module"}));function Ar(n){n.isImmediatePropagationEnabled=!1,n.cancelBubble=!0}function lc(n){return n.isImmediatePropagationEnabled===!1}function Fc(n){return n.button===2}function K0(n){return n.button===0}function lY(n){return n instanceof TouchEvent}function cY(n,e){const t={x:n.offsetX,y:n.offsetY};let i=n.target;if(!(e instanceof HTMLElement)||i!==e&&i.contains(e))return t;for(;i!==e;)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;return t}const dfe=Object.freeze(Object.defineProperty({__proto__:null,isImmediatePropagationStopped:lc,isLeftClick:K0,isRightClick:Fc,isTouchEvent:lY,offsetRelativeTo:cY,stopImmediatePropagation:Ar},Symbol.toStringTag,{value:"Module"}));var hY={},ffe=Qj,gfe=RA,mfe=Object.keys||function(e){return ffe(e,gfe)},pfe=go,wfe=zj,vfe=Jc,bfe=Il,yfe=y0,Cfe=mfe;hY.f=pfe&&!wfe?Object.defineProperties:function(e,t){bfe(e);for(var i=yfe(t),s=Cfe(t),r=s.length,o=0,a;r>o;)vfe.f(e,a=s[o++],i[a]);return e};var Sfe=Il,_fe=hY,xL=RA,Rfe=SA,xfe=Cz,Efe=yA,Tfe=Gj,EL=">",TL="<",fM="prototype",gM="script",uY=Tfe("IE_PROTO"),XR=function(){},dY=function(n){return TL+gM+EL+n+TL+"/"+gM+EL},ML=function(n){n.write(dY("")),n.close();var e=n.parentWindow.Object;return n=null,e},Mfe=function(){var n=Efe("iframe"),e="java"+gM+":",t;return n.style.display="none",xfe.appendChild(n),n.src=String(e),t=n.contentWindow.document,t.open(),t.write(dY("document.F=Object")),t.close(),t.F},Kv,zy=function(){try{Kv=new ActiveXObject("htmlfile")}catch{}zy=typeof document<"u"?document.domain&&Kv?ML(Kv):Mfe():ML(Kv);for(var n=xL.length;n--;)delete zy[fM][xL[n]];return zy()};Rfe[uY]=!0;var Afe=Object.create||function(e,t){var i;return e!==null?(XR[fM]=Sfe(e),i=new XR,XR[fM]=null,i[uY]=e):i=zy(),t===void 0?i:_fe.f(i,t)},Pfe=Zc,Ife=Afe,Ofe=Jc.f,mM=Pfe("unscopables"),pM=Array.prototype;pM[mM]===void 0&&Ofe(pM,mM,{configurable:!0,value:Ife(null)});var CP=function(n){pM[mM][n]=!0},kfe=CP;kfe("flatMap");function Dt(){Me(console)&&console.warn(...arguments)}function SP(){Me(console)&&console.error(...arguments)}function Hfe(n,e,t){return(e=Dfe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dfe(n){var e=Nfe(n,"string");return typeof e=="symbol"?e:e+""}function Nfe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const bd=["afterCellMetaReset","afterChange","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","beforeContextMenuShow","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterColumnSequenceChange","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterDrawSelection","beforeRemoveCellClassNames","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterUpdateData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseUp","afterOnCellContextMenu","afterOnCellMouseOver","afterOnCellMouseOut","afterRemoveCol","afterRemoveRow","beforeRenderer","afterRenderer","afterRowSequenceChange","beforeViewportScrollVertically","beforeViewportScrollHorizontally","beforeViewportScroll","afterScrollHorizontally","afterScrollVertically","afterScroll","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSelectionFocusSet","beforeSelectColumns","afterSelectColumns","beforeSelectRows","afterSelectRows","afterSetCellMeta","afterRemoveCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterSetSourceDataAtCell","afterUpdateSettings","afterValidate","beforeLanguageChange","afterLanguageChange","beforeAutofill","afterAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeRemoveCellMeta","beforeInit","beforeInitWalkontable","beforeLoadData","beforeUpdateData","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseUp","beforeOnCellContextMenu","beforeOnCellMouseOver","beforeOnCellMouseOut","beforeRemoveCol","beforeRemoveRow","beforeViewRender","afterViewRender","beforeRender","afterRender","beforeRowWrap","beforeColumnWrap","beforeSetCellMeta","beforeSelectionFocusSet","beforeSetRangeStartOnly","beforeSetRangeStart","beforeSetRangeEnd","beforeSelectionHighlightSet","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyColHeader","modifyColWidth","modifyFiltersMultiSelectValue","modifyFocusedElement","modifyRowHeader","modifyRowHeight","modifyRowHeightByOverlayName","modifyData","modifySourceData","modifyRowData","modifyGetCellCoords","modifyFocusOnTabNavigation","beforeHighlightingRowHeader","beforeHighlightingColumnHeader","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeCut","afterCut","beforeCopy","afterCopy","beforePaste","afterPaste","beforeColumnFreeze","afterColumnFreeze","beforeColumnMove","afterColumnMove","beforeColumnUnfreeze","afterColumnUnfreeze","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","afterFormulasValuesUpdate","afterNamedExpressionAdded","afterNamedExpressionRemoved","afterSheetAdded","afterSheetRenamed","afterSheetRemoved","modifyColumnHeaderHeight","modifyColumnHeaderValue","beforeUndo","beforeUndoStackChange","afterUndo","afterUndoStackChange","beforeRedo","beforeRedoStackChange","afterRedo","afterRedoStackChange","modifyRowHeaderWidth","modifyTransformFocus","modifyTransformStart","modifyTransformEnd","afterModifyTransformFocus","afterModifyTransformStart","afterModifyTransformEnd","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","beforeHideRows","afterHideRows","beforeUnhideRows","afterUnhideRows","beforeHideColumns","afterHideColumns","beforeUnhideColumns","afterUnhideColumns","beforeTrimRow","afterTrimRow","beforeUntrimRow","afterUntrimRow","beforeDropdownMenuShow","afterDropdownMenuShow","afterDropdownMenuHide","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","beforeBeginEditing","afterBeginEditing","beforeMergeCells","afterMergeCells","beforeUnmergeCells","afterUnmergeCells","afterListen","afterUnlisten","afterRefreshDimensions","beforeRefreshDimensions","beforeColumnCollapse","afterColumnCollapse","beforeColumnExpand","afterColumnExpand","modifyAutoColumnSizeSeed"],Lfe=Nt`The plugin hook "[hookName]" was removed in Handsontable [removedInVersion].\x20
  Please consult release notes https://github.com/handsontable/handsontable/releases/tag/[removedInVersion] to\x20
  learn about the migration path.`,QR=new Map([["modifyRow","8.0.0"],["modifyCol","8.0.0"],["unmodifyRow","8.0.0"],["unmodifyCol","8.0.0"],["skipLengthCache","8.0.0"],["hiddenColumn","8.0.0"],["hiddenRow","8.0.0"]]),ZR=new Map([[]]),qv=new WeakMap;class Ee{static getSingleton(){return Ffe()}constructor(){Hfe(this,"globalBucket",void 0),this.globalBucket=this.createEmptyBucket()}createEmptyBucket(){const e=Object.create(null);return L(bd,t=>{e[t]=[],this.initOrderMap(e,t)}),e}getBucket(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e?(e.pluginHookBucket||(e.pluginHookBucket=this.createEmptyBucket()),e.pluginHookBucket):this.globalBucket}add(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3?arguments[3]:void 0;if(Array.isArray(t))L(t,r=>this.add(e,r,i));else{QR.has(e)&&Dt(iP(Lfe,{hookName:e,removedInVersion:QR.get(e)})),ZR.has(e)&&Dt(ZR.get(e));const r=this.getBucket(i);if(typeof r[e]>"u"&&(this.register(e),r[e]=[],this.initOrderMap(r,e)),t.skip=!1,r[e].indexOf(t)===-1){let o=!1;t.initialHook&&L(r[e],(a,l)=>{if(a.initialHook)return r[e][l]=t,o=!0,!1}),o||r[e].push(t)}this.setCallbackOrderIndex(r,e,t,s),this.orderBucketByOrderIndex(r,e)}return this}once(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3?arguments[3]:void 0;Array.isArray(t)?L(t,r=>this.once(e,r,i)):(t.runOnce=!0,this.add(e,t,i,s))}remove(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const s=this.getBucket(i);return typeof s[e]<"u"&&s[e].indexOf(t)>=0?(t.skip=!0,!0):!1}has(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const i=this.getBucket(t);return!!(i[e]!==void 0&&i[e].length)}run(e,t,i,s,r,o,a,l){{const c=this.globalBucket[t],h=c?c.length:0;let u=0;if(h)for(;u<h;){if(!c[u]||c[u].skip){u+=1;continue}const d=qC(c[u],e,i,s,r,o,a,l);d!==void 0&&(i=d),c[u]&&c[u].runOnce&&this.remove(t,c[u]),u+=1}}{const c=this.getBucket(e)[t],h=c?c.length:0;let u=0;if(h)for(;u<h;){if(!c[u]||c[u].skip){u+=1;continue}const d=qC(c[u],e,i,s,r,o,a,l);d!==void 0&&(i=d),c[u]&&c[u].runOnce&&this.remove(t,c[u],e),u+=1}}return i}destroy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;et(this.getBucket(e),(t,i,s)=>s[i].length=0)}register(e){this.isRegistered(e)||bd.push(e)}deregister(e){this.isRegistered(e)&&bd.splice(bd.indexOf(e),1)}isDeprecated(e){return ZR.has(e)||QR.has(e)}isRegistered(e){return bd.indexOf(e)>=0}getRegistered(){return bd}setCallbackOrderIndex(e,t,i,s){const r=Number.isInteger(s)?s:0,o=this.getCallbackOrderMap(e,t);o.set(r,[...o.get(r)||[],i])}orderBucketByOrderIndex(e,t){const i=this.getCallbackOrderMap(e,t);i===void 0||i.size===0||i.size===1&&i.has(0)||(e[t]=[...i].sort((s,r)=>s[0]-r[0]).flatMap(s=>{let[,r]=s;return r}))}initOrderMap(e,t){qv.has(e)||qv.set(e,[]),qv.get(e)[t]=new Map}getCallbackOrderMap(e,t){return qv.get(e)[t]}}const $fe=new Ee;function Ffe(){return $fe}const JR=new Map;function vo(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"common";JR.has(n)||JR.set(n,new Map);const e=JR.get(n);function t(a,l){e.set(a,l)}function i(a){return e.get(a)}function s(a){return e.has(a)}function r(){return[...e.keys()]}function o(){return[...e.values()]}return{register:t,getItem:i,hasItem:s,getNames:r,getValues:o}}const wM=new WeakMap,{register:Bfe,getItem:fY,hasItem:gY,getNames:Vfe,getValues:PDe}=vo("editors");function Wfe(n){const e={},t=n;this.getConstructor=function(){return n},this.getInstance=function(i){return i.guid in e||(e[i.guid]=new t(i)),e[i.guid]},Ee.getSingleton().add("afterDestroy",function(){e[this.guid]=null})}function mY(n,e){let t;if(typeof n=="function")wM.get(n)||vs(null,n),t=wM.get(n);else if(typeof n=="string")t=fY(n);else throw Error('Only strings and functions can be passed as "editor" parameter');if(!t)throw Error(`No editor registered under name "${n}"`);return t.getInstance(e)}function XC(n){if(typeof n=="function")return n;if(!gY(n))throw Error(`No registered editor found under "${n}" name`);return fY(n).getConstructor()}function vs(n,e){n&&typeof n!="string"&&(e=n,n=e.EDITOR_TYPE);const t=new Wfe(e);typeof n=="string"&&Bfe(n,t),wM.set(e,t)}function jfe(n,e,t){return(e=zfe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zfe(n){var e=Ufe(n,"string");return typeof e=="symbol"?e:e+""}function Ufe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let Uy=0;class Er{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;jfe(this,"context",void 0),this.context=e||this,this.context.eventListeners||(this.context.eventListeners=[])}addEventListener(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;function r(o){i.call(this,Yfe(o))}return this.context.eventListeners.push({element:e,event:t,callback:i,callbackProxy:r,options:s,eventManager:this}),e.addEventListener(t,r,s),Uy+=1,()=>{this.removeEventListener(e,t,i)}}removeEventListener(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=this.context.eventListeners.length,o;for(;r;)if(r-=1,o=this.context.eventListeners[r],o.event===t&&o.element===e){if(i&&i!==o.callback||s&&o.eventManager!==this)continue;this.context.eventListeners.splice(r,1),o.element.removeEventListener(o.event,o.callbackProxy,o.options),Uy-=1}}clearEvents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.context)return;let t=this.context.eventListeners.length;for(;t;){t-=1;const i=this.context.eventListeners[t];e&&i.eventManager!==this||(this.context.eventListeners.splice(t,1),i.element.removeEventListener(i.event,i.callbackProxy,i.options),Uy-=1)}}clear(){this.clearEvents()}destroy(){this.clearEvents(),this.context=null}destroyWithOwnEventsOnly(){this.clearEvents(!0),this.context=null}fireEvent(e,t){let i=e.document,s=e;i||(i=e.ownerDocument?e.ownerDocument:e,s=i.defaultView);const r={bubbles:!0,cancelable:t!=="mousemove",view:s,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};let o;i.createEvent?(o=i.createEvent("MouseEvents"),o.initMouseEvent(t,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,i.body.parentNode)):o=i.createEventObject(),e.dispatchEvent?e.dispatchEvent(o):e.fireEvent(`on${t}`,o)}}function Yfe(n){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=function(){e.apply(this),Ar(this)},n}function Gfe(){return Uy}function Kfe(n,e){qfe(n,e),e.add(n)}function qfe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dh(n,e,t){return(e=Xfe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xfe(n){var e=Qfe(n,"string");return typeof e=="symbol"?e:e+""}function Qfe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function AL(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var ex=new WeakSet;class vM{constructor(e,t,i){Kfe(this,ex),dh(this,"hot",void 0),dh(this,"tableMeta",void 0),dh(this,"selection",void 0),dh(this,"eventManager",void 0),dh(this,"destroyed",!1),dh(this,"activeEditor",void 0),dh(this,"cellProperties",void 0),this.hot=e,this.tableMeta=t,this.selection=i,this.eventManager=new Er(e),this.hot.addHook("afterDocumentKeyDown",s=>AL(ex,this,Zfe).call(this,s)),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"compositionstart",s=>{!this.destroyed&&this.hot.isListening()&&this.openEditor("",s)}),this.hot.view._wt.update("onCellDblClick",(s,r,o)=>AL(ex,this,Jfe).call(this,s,r,o))}getActiveEditor(){return this.activeEditor}prepareEditor(){var e;if(this.activeEditor&&this.activeEditor.isWaiting()){this.closeEditor(!1,!1,c=>{c&&this.prepareEditor()});return}const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;if(!t||t.isHeader())return;const{row:i,col:s}=t,r=this.hot.runHooks("modifyGetCellCoords",i,s);let o=i,a=s;if(Array.isArray(r)&&([o,a]=r),this.cellProperties=this.hot.getCellMeta(o,a),!this.isCellEditable()){this.clearActiveEditor();return}const l=this.hot.getCell(i,s,!0);if(l){const c=this.hot.getCellEditor(this.cellProperties),h=this.hot.colToProp(a),u=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o),a);this.activeEditor=mY(c,this.hot),this.activeEditor.prepare(i,s,h,l,u,this.cellProperties)}}isEditorOpened(){return this.activeEditor&&this.activeEditor.isOpened()}openEditor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!this.isCellEditable()){this.clearActiveEditor();return}const s=this.hot.getSelectedRangeLast();let r=this.hot.runHooks("beforeBeginEditing",s.highlight.row,s.highlight.col,e,t,i);if(t instanceof MouseEvent&&typeof r!="boolean"&&(r=this.hot.selection.getLayerLevel()===0&&s.isSingle()),r===!1){this.clearActiveEditor();return}this.activeEditor||(this.hot.scrollToFocusedCell(),this.prepareEditor()),this.activeEditor&&(i&&this.activeEditor.enableFullEditMode(),this.activeEditor.beginEditing(e,t))}closeEditor(e,t,i){this.activeEditor?this.activeEditor.finishEditing(e,t,i):i&&i(!1)}closeEditorAndSaveChanges(e){this.closeEditor(!1,e)}closeEditorAndRestoreOriginalValue(e){this.closeEditor(!0,e)}clearActiveEditor(){this.activeEditor=void 0}isCellEditable(){const e=this.hot.getSelectedRangeLast();if(!e)return!1;const t=this.hot.getCellEditor(this.cellProperties),{row:i,col:s}=e.highlight,{rowIndexMapper:r,columnIndexMapper:o}=this.hot,a=r.isHidden(this.hot.toPhysicalRow(i))||o.isHidden(this.hot.toPhysicalColumn(s));return!(this.cellProperties.readOnly||!t||a)}moveSelectionAfterEnter(e){const t={...typeof this.tableMeta.enterMoves=="function"?this.tableMeta.enterMoves(e):this.tableMeta.enterMoves};e.shiftKey&&(t.row=-t.row,t.col=-t.col),this.hot.selection.isMultiple()?this.selection.transformFocus(t.row,t.col):this.selection.transformStart(t.row,t.col,!0)}destroy(){this.destroyed=!0,this.eventManager.destroy()}}function Zfe(n){const e=this.hot.getSelectedRangeLast();if(!this.hot.isListening()||!e||e.highlight.isHeader()||lc(n))return;const{keyCode:t}=n,i=(n.ctrlKey||n.metaKey)&&!n.altKey;(!this.activeEditor||this.activeEditor&&!this.activeEditor.isWaiting())&&!yP(t)&&!aY(t)&&!i&&!this.isEditorOpened()&&this.openEditor("",n)}function Jfe(n,e){e.isCell()&&this.openEditor(null,n,!0)}const PL=new WeakMap;vM.getInstance=function(n,e,t){let i=PL.get(n);return i||(i=new vM(n,e,t),PL.set(n,i)),i};function ege(n,e){pY(n,e),e.add(n)}function Dg(n,e,t){pY(n,e),e.set(n,t)}function pY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fn(n,e){return n.get(il(n,e))}function Ng(n,e,t){return n.set(il(n,e),t),t}function il(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Of=Object.freeze({CELL:"cell",MIXED:"mixed"});var mi=new WeakMap,Xv=new WeakMap,Qv=new WeakMap,Zv=new WeakMap,Jv=new WeakMap,tc=new WeakSet;class tge{constructor(e){var t=this;ege(this,tc),Dg(this,mi,void 0),Dg(this,Xv,void 0),Dg(this,Qv,1),Dg(this,Zv,null),Dg(this,Jv,new Map);const i=e.getSettings();Ng(mi,this,e),Ng(Xv,this,i.imeFastEdit?Of.MIXED:Of.CELL),fn(mi,this).addHook("afterUpdateSettings",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return il(tc,t,ige).call(t,...r)}),fn(mi,this).addHook("afterSelection",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return il(tc,t,IL).call(t,...r)}),fn(mi,this).addHook("afterSelectionFocusSet",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return il(tc,t,IL).call(t,...r)}),fn(mi,this).addHook("afterSelectionEnd",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return il(tc,t,nge).call(t,...r)})}getFocusMode(){return fn(Xv,this)}setFocusMode(e){Object.values(Of).includes(e)?Ng(Xv,this,e):Dt(`"${e}" is not a valid focus mode.`)}getRefocusDelay(){return fn(Qv,this)}setRefocusDelay(e){Ng(Qv,this,e)}setRefocusElementGetter(e){Ng(Zv,this,e)}getRefocusElement(){if(typeof fn(Zv,this)=="function")return fn(Zv,this).call(this);var e;return(e=fn(mi,this).getActiveEditor())===null||e===void 0?void 0:e.TEXTAREA}focusOnHighlightedCell(e){const t=i=>{var s,r;const o=(s=fn(mi,this).getSelectedRangeLast())===null||s===void 0?void 0:s.highlight;if(!o)return;let a=fn(mi,this).runHooks("modifyFocusedElement",o.row,o.col,i);a instanceof HTMLElement||(a=i),a&&!((r=fn(mi,this).getActiveEditor())!==null&&r!==void 0&&r.isOpened())&&a.focus({preventScroll:!0})};e?t(e):il(tc,this,_P).call(this,i=>t(i))}refocusToEditorTextarea(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fn(Qv,this);const i=this.getRefocusElement();fn(mi,this).getSettings().imeFastEdit&&!((e=fn(mi,this).getActiveEditor())!==null&&e!==void 0&&e.isOpened())&&i&&(fn(Jv,this).has(t)||fn(Jv,this).set(t,z0(()=>{i.select()},t)),fn(Jv,this).get(t)())}}function _P(n){var e;const t=(e=fn(mi,this).getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;if(!t||!fn(mi,this).selection.isCellVisible(t)){n(null);return}const i=fn(mi,this).getCell(t.row,t.col,!0);i===null?fn(mi,this).addHookOnce("afterScroll",()=>{n(fn(mi,this).getCell(t.row,t.col,!0))}):n(i)}function IL(){il(tc,this,_P).call(this,n=>{const{activeElement:e}=fn(mi,this).rootDocument;e&&j0(e)&&e.blur(),this.focusOnHighlightedCell(n)})}function nge(){il(tc,this,_P).call(this,n=>{this.getFocusMode()===Of.MIXED&&n.nodeName==="TD"&&this.refocusToEditorTextarea()})}function ige(n){typeof n.imeFastEdit=="boolean"&&this.setFocusMode(n.imeFastEdit?Of.MIXED:Of.CELL)}var sge=va,rge=Qu,oge=Zc,age=oge("match"),lge=function(n){var e;return sge(n)&&((e=n[age])!==void 0?!!e:rge(n)==="RegExp")},cge=Il,hge=function(){var n=cge(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e},uge=mo,dge=ba,fge=C0,gge=hge,OL=RegExp.prototype,mge=function(n){var e=n.flags;return e===void 0&&!("flags"in OL)&&!dge(n,"flags")&&fge(OL,n)?uge(gge,n):e},RP=ei,pge=Nw,wge=Math.floor,tx=RP("".charAt),vge=RP("".replace),nx=RP("".slice),bge=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,yge=/\$([$&'`]|\d{1,2})/g,Cge=function(n,e,t,i,s,r){var o=t+n.length,a=i.length,l=yge;return s!==void 0&&(s=pge(s),l=bge),vge(r,l,function(c,h){var u;switch(tx(h,0)){case"$":return"$";case"&":return n;case"`":return nx(e,0,t);case"'":return nx(e,o);case"<":u=s[nx(h,1,-1)];break;default:var d=+h;if(d===0)return c;if(d>a){var f=wge(d/10);return f===0?c:f<=a?i[f-1]===void 0?tx(h,1):i[f-1]+tx(h,1):c}u=i[d-1]}return u===void 0?"":u})},Sge=Ti,_ge=mo,xP=ei,kL=Hw,Rge=Ei,xge=b0,Ege=lge,Lg=E0,Tge=R0,Mge=mge,Age=Cge,Pge=Zc,Ige=Pge("replace"),Oge=TypeError,ix=xP("".indexOf);xP("".replace);var HL=xP("".slice),kge=Math.max;Sge({target:"String",proto:!0},{replaceAll:function(e,t){var i=kL(this),s,r,o,a,l,c,h,u,d,f,g=0,m="";if(!xge(e)){if(s=Ege(e),s&&(r=Lg(kL(Mge(e))),!~ix(r,"g")))throw new Oge("`.replaceAll` does not allow non-global regexes");if(o=Tge(e,Ige),o)return _ge(o,e,i,t)}for(a=Lg(i),l=Lg(e),c=Rge(t),c||(t=Lg(t)),h=l.length,u=kge(1,h),d=ix(a,l);d!==-1;)f=c?Lg(t(l,d,a)):Age(l,a,d,[],void 0,t),m+=HL(a,g,d)+f,g=d+h,d=d+u>a.length?-1:ix(a,l,d+u);return g<a.length&&(m+=HL(a,g)),m}});const wY={"&nbsp;":" ","&amp;":"&","&lt;":"<","&gt;":">"},Hge=new RegExp(Object.keys(wY).map(n=>`(${n})`).join("|"),"gi");function Dge(n){return(n&&n.nodeName||"")==="TABLE"}function bM(n){const e=n.hasColHeaders(),t=n.hasRowHeaders(),i=[e?-1:0,t?-1:0,n.countRows()-1,n.countCols()-1],s=n.getData(...i),r=s.length,o=r>0?s[0].length:0,a=["<table>","</table>"],l=e?["<thead>","</thead>"]:[],c=["<tbody>","</tbody>"],h=t?1:0,u=e?1:0;for(let d=0;d<r;d+=1){const f=e&&d===0,g=[];for(let w=0;w<o;w+=1){const v=!f&&t&&w===0;let C="";if(f)C=`<th>${n.getColHeader(w-h)}</th>`;else if(v)C=`<th>${n.getRowHeader(d-u)}</th>`;else{const S=s[d][w],{hidden:x,rowspan:_,colspan:R}=n.getCellMeta(d-u,w-h);if(!x){const M=[];if(_&&M.push(`rowspan="${_}"`),R&&M.push(`colspan="${R}"`),Mn(S))C=`<td ${M.join(" ")}></td>`;else{const O=S.toString().replace("<","&lt;").replace(">","&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20/gi,"&nbsp;").replace(/\t/gi,"&#9;");C=`<td ${M.join(" ")}>${O}</td>`}}}g.push(C)}const m=["<tr>",...g,"</tr>"].join("");f?l.splice(1,0,m):c.splice(-1,0,m)}return a.splice(1,0,l.join(""),c.join("")),a.join("")}function yM(n){const e=n.length,t=["<table>"];for(let i=0;i<e;i+=1){const s=n[i],r=s.length,o=[];i===0&&t.push("<tbody>");for(let a=0;a<r;a+=1){const l=s[a],c=Mn(l)?"":l.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20{2,}/gi,h=>`<span style="mso-spacerun: yes">${"&nbsp;".repeat(h.length-1)} </span>`).replace(/\t/gi,"&#9;");o.push(`<td>${c}</td>`)}t.push("<tr>",...o,"</tr>"),i+1===e&&t.push("</tbody>")}return t.push("</table>"),t.join("")}function vY(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;const t={},i=e.createDocumentFragment(),s=e.createElement("div");i.appendChild(s);let r=n;if(typeof r=="string"){const S=r.replace(/<td\b[^>]*?>([\s\S]*?)<\/\s*td>/g,x=>{const _=x.match(/<td\b[^>]*?>/g)[0],R=/<p.*?>/g,M=x.substring(_.length,x.lastIndexOf("<")).trim().replaceAll(/\n\s+/g," ").replaceAll(R,`
`).replace(`
`,"").replaceAll(/<\/(.*)>\s+$/mg,"</$1>").replace(/(<(?!br)([^>]+)>)/gi,"").replaceAll(/^&nbsp;$/mg,"");return`${_}${M}</td>`});s.insertAdjacentHTML("afterbegin",`${S}`),r=s.querySelector("table")}if(!r||!Dge(r))return;const o=s.querySelector('meta[name$="enerator"]'),a=r.querySelector("tbody th")!==null,l=r.querySelector("tr"),c=l?Array.from(l.cells).reduce((S,x)=>S+x.colSpan,0)-(a?1:0):0,h=r.tFoot&&Array.from(r.tFoot.rows)||[],u=[];let d=!1,f=0,g=0;if(r.tHead){const S=Array.from(r.tHead.rows).filter(x=>{const _=x.querySelector("td")!==null;return _&&u.push(x),!_});f=S.length,d=f>0,f>1?t.nestedHeaders=Array.from(S).reduce((x,_)=>{const R=Array.from(_.cells).reduce((M,O,P)=>{if(a&&P===0)return M;const{colSpan:k,innerHTML:B}=O,z=k>1?{label:B,colspan:k}:B;return M.push(z),M},[]);return x.push(R),x},[]):d&&(t.colHeaders=Array.from(S[0].children).reduce((x,_,R)=>(a&&R===0||x.push(_.innerHTML),x),[]))}u.length&&(t.fixedRowsTop=u.length),h.length&&(t.fixedRowsBottom=h.length);const m=[...u,...Array.from(r.tBodies).reduce((S,x)=>(S.push(...Array.from(x.rows)),S),[]),...h];g=m.length;const w=new Array(g);for(let S=0;S<g;S++)w[S]=new Array(c);const v=[],C=[];for(let S=0;S<g;S++){const x=m[S],_=Array.from(x.cells),R=_.length;for(let M=0;M<R;M++){const O=_[M],{nodeName:P,innerHTML:k,rowSpan:B,colSpan:z}=O,Q=w[S].findIndex(te=>te===void 0);if(P==="TD"){if(B>1||z>1){for(let ie=S;ie<S+B;ie++)if(ie<g)for(let oe=Q;oe<Q+z;oe++)w[ie][oe]=null;const ne=O.getAttribute("style");ne&&ne.includes("mso-ignore:colspan")||v.push({col:Q,row:S,rowspan:B,colspan:z})}let te="";o&&/excel/gi.test(o.content)?te=k.replace(/[\r\n][\x20]{0,2}/g," ").replace(/<br(\s*|\/)>[\r\n]?[\x20]{0,3}/gim,`\r
`):te=k.replace(/<br(\s*|\/)>[\r\n]?/gim,`\r
`),w[S][Q]=te.replace(Hge,ne=>wY[ne])}else C.push(k)}}return v.length&&(t.mergeCells=v),C.length&&(t.rowHeaders=C),w.length&&(t.data=w),t}const Nge=Object.freeze(Object.defineProperty({__proto__:null,_dataToHTML:yM,htmlToGridSettings:vY,instanceToHTML:bM},Symbol.toStringTag,{value:"Module"}));function Li(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=typeof n;if(t==="number")return!isNaN(n)&&isFinite(n);if(t==="string"){if(n.length===0)return!1;if(n.length===1)return/\d/.test(n);const i=Array.from(new Set([".",...e])).map(s=>`\\${s}`).join("|");return new RegExp(`^[+-]?(((${i})?\\d+((${i})\\d+)?(e[+-]?\\d+)?)|(0x[a-f\\d]+))$`,"i").test(n.trim())}else if(t==="object")return!!n&&typeof n.valueOf()=="number"&&!(n instanceof Date);return!1}function bY(n){return Li(n,[","])}function ke(n,e,t){let i=-1;for(typeof e=="function"?(t=e,e=n):i=n-1;++i<=e&&t(i)!==!1;);}function CM(n,e,t){let i=n+1;for(typeof e=="function"&&(t=e,e=0);--i>=e&&t(i)!==!1;);}function EP(n,e){return e=parseInt(e.toString().replace("%",""),10),e=isNaN(e)?0:e,parseInt(n*e/100,10)}function kt(n,e,t){return Math.min(n,e)===n?e:Math.max(n,t)===n?t:n}const Lge=Object.freeze(Object.defineProperty({__proto__:null,clamp:kt,isNumeric:Li,isNumericLike:bY,rangeEach:ke,rangeEachReverse:CM,valueAccordingPercent:EP},Symbol.toStringTag,{value:"Module"})),SM="asc",$ge="desc",DL=new Map([[SM,[-1,1]],[$ge,[1,-1]]]),Fge=n=>`The priority '${n}' is already declared in a map.`,Bge=n=>`The priority '${n}' is not a number.`;function Vge(){let{errorPriorityExists:n,errorPriorityNaN:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=new Map;n=Yt(n)?n:Fge,e=Yt(e)?e:Bge;function i(r,o){if(!Li(r))throw new Error(e(r));if(t.has(r))throw new Error(n(r));t.set(r,o)}function s(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SM;const[o,a]=DL.get(r)||DL.get(SM);return[...t].sort((l,c)=>l[0]<c[0]?o:a).map(l=>l[1])}return{addItem:i,getItems:s}}const Wge=n=>`The id '${n}' is already declared in a map.`;function q0(){let{errorIdExists:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=new Map;n=Yt(n)?n:Wge;function t(c,h){if(l(c))throw new Error(n(c));e.set(c,h)}function i(c){return e.delete(c)}function s(){e.clear()}function r(c){const[h]=a().find(u=>{let[d,f]=u;return c===f?d:!1})||[null];return h}function o(c){return e.get(c)}function a(){return[...e]}function l(c){return e.has(c)}return{addItem:t,clear:s,getId:r,getItem:o,getItems:a,hasItem:l,removeItem:i}}const jge=n=>`'${n}' value is already declared in a unique set.`;function zge(){let{errorItemExists:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=new Set;n=Yt(n)?n:jge;function t(r){if(e.has(r))throw new Error(n(r));e.add(r)}function i(){return[...e]}function s(){e.clear()}return{addItem:t,clear:s,getItems:i}}const TP=n=>`There is already registered "${n}" plugin.`,Uge=n=>`There is already registered plugin on priority "${n}".`,Yge=n=>`The priority "${n}" is not a number.`,yY=Vge({errorPriorityExists:Uge,errorPriorityNaN:Yge}),CY=zge({errorItemExists:TP}),_M=q0({errorIdExists:TP});function MP(){return[...yY.getItems(),...CY.getItems()]}function Qw(n){const e=Ui(n);return _M.getItem(e)}function Gge(n){return!!Qw(n)}function vt(n,e,t){[n,e,t]=qge(n,e,t),Qw(n)===void 0&&Kge(n,e,t)}function Kge(n,e,t){const i=Ui(n);if(_M.hasItem(i))throw new Error(TP(i));t===void 0?CY.addItem(i):yY.addItem(t,i),_M.addItem(i,e)}function qge(n,e,t){return typeof n=="function"&&(e=n,n=e.PLUGIN_KEY,t=e.PLUGIN_PRIORITY),[n,e,t]}const{register:Xge,getItem:Qge,hasItem:SY,getNames:Zge,getValues:IDe}=vo("renderers");function QC(n){if(typeof n=="function")return n;if(!SY(n))throw Error(`No registered renderer found under "${n}" name`);return Qge(n)}function Is(n,e){typeof n!="string"&&(e=n,n=e.RENDERER_TYPE),Xge(n,e)}const{register:Jge,getItem:eme,hasItem:_Y,getNames:tme,getValues:ODe}=vo("validators");function AP(n){if(typeof n=="function")return n;if(!_Y(n))throw Error(`No registered validator found under "${n}" name`);return eme(n)}function au(n,e){typeof n!="string"&&(e=n,n=e.VALIDATOR_TYPE),Jge(n,e)}var nme=Ti,ime=Nw,sme=Fw,rme=$w,ome=CP;nme({target:"Array",proto:!0},{at:function(e){var t=ime(this),i=sme(t),s=rme(e),r=s>=0?s:i+s;return r<0||r>=i?void 0:t[r]}});ome("at");var ame=Ti,lme=ei,cme=Hw,hme=$w,ume=E0,dme=Es,fme=lme("".charAt),gme=dme(function(){return"𠮷".at(-2)!=="\uD842"});ame({target:"String",proto:!0,forced:gme},{at:function(e){var t=ume(cme(this)),i=t.length,s=hme(e),r=s>=0?s:i+s;return r<0||r>=i?void 0:fme(t,r)}});function $g(n,e,t){return(e=mme(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mme(n){var e=pme(n,"string");return typeof e=="symbol"?e:e+""}function pme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class wme{constructor(){$g(this,"count",0),$g(this,"startColumn",null),$g(this,"endColumn",null),$g(this,"startPosition",null),$g(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedWidth:i,zeroBasedScrollOffset:s,viewportWidth:r,columnWidth:o}=t,a=s>0?r+1:r;i>=s&&i+o<=s+a&&((this.startColumn===null||this.startColumn===void 0)&&(this.startColumn=e),this.endColumn=e)}finalize(e){var t;const{scrollOffset:i,viewportWidth:s,inlineStartOffset:r,zeroBasedScrollOffset:o,totalColumns:a,needReverse:l,startPositions:c,columnWidth:h}=e;if(this.endColumn===a-1&&l)for(this.startColumn=this.endColumn;this.startColumn>0;){const g=c[this.endColumn]+h-c[this.startColumn-1];if(g<=s&&(this.startColumn-=1),g>=s)break}this.startPosition=(t=c[this.startColumn])!==null&&t!==void 0?t:null;const u=o>0?s+1:s,d=i+s-u,f=this.startColumn===null?0:e.getColumnWidth(this.startColumn);d<-1*r||i>c.at(-1)||-1*i-s>-1*f?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}function Fg(n,e,t){return(e=vme(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vme(n){var e=bme(n,"string");return typeof e=="symbol"?e:e+""}function bme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class yme{constructor(){Fg(this,"count",0),Fg(this,"startRow",null),Fg(this,"endRow",null),Fg(this,"startPosition",null),Fg(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedHeight:i,zeroBasedScrollOffset:s,innerViewportHeight:r,rowHeight:o}=t;i>=s&&i+o<=r&&(this.startRow===null&&(this.startRow=e),this.endRow=e)}finalize(e){var t;const{scrollOffset:i,viewportHeight:s,horizontalScrollbarHeight:r,totalRows:o,needReverse:a,startPositions:l,rowHeight:c}=e;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){const d=l[this.endRow]+c-l[this.startRow-1];if(d<=s-r&&(this.startRow-=1),d>=s-r)break}this.startPosition=(t=l[this.startRow])!==null&&t!==void 0?t:null;const h=i+s-r,u=this.startRow===null?0:e.getRowHeight(this.startRow);h<u||i>l.at(-1)?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function Bg(n,e,t){return(e=Cme(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cme(n){var e=Sme(n,"string");return typeof e=="symbol"?e:e+""}function Sme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class RY{constructor(){Bg(this,"count",0),Bg(this,"startColumn",null),Bg(this,"endColumn",null),Bg(this,"startPosition",null),Bg(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedWidth:i,zeroBasedScrollOffset:s,viewportWidth:r}=t;i<=s&&(this.startColumn=e);const o=s>0?r+1:r;i>=s&&i<=s+o&&(this.startColumn===null||this.startColumn===void 0)&&(this.startColumn=e),this.endColumn=e}finalize(e){var t;const{scrollOffset:i,viewportWidth:s,inlineStartOffset:r,zeroBasedScrollOffset:o,totalColumns:a,needReverse:l,startPositions:c,columnWidth:h}=e;if(this.endColumn===a-1&&l)for(this.startColumn=this.endColumn;this.startColumn>0;){const f=c[this.endColumn]+h-c[this.startColumn-1];if(this.startColumn-=1,f>s)break}this.startPosition=(t=c[this.startColumn])!==null&&t!==void 0?t:null;const u=o>0?s+1:s;i+s-u<-1*r||i>c.at(-1)+h||-1*i-s>0?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}function Vg(n,e,t){return(e=_me(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _me(n){var e=Rme(n,"string");return typeof e=="symbol"?e:e+""}function Rme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class xY{constructor(){Vg(this,"count",0),Vg(this,"startRow",null),Vg(this,"endRow",null),Vg(this,"startPosition",null),Vg(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedHeight:i,zeroBasedScrollOffset:s,innerViewportHeight:r}=t;i<=s&&(this.startRow=e),i>=s&&i<=r&&this.startRow===null&&(this.startRow=e),this.endRow=e}finalize(e){var t;const{scrollOffset:i,viewportHeight:s,horizontalScrollbarHeight:r,totalRows:o,needReverse:a,startPositions:l,rowHeight:c}=e;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){const u=l[this.endRow]+c-l[this.startRow-1];if(this.startRow-=1,u>=s-r)break}this.startPosition=(t=l[this.startRow])!==null&&t!==void 0?t:null,i+s-r<0||i>l.at(-1)+c?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function Wg(n,e,t){return(e=xme(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xme(n){var e=Eme(n,"string");return typeof e=="symbol"?e:e+""}function Eme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Tme{constructor(){Wg(this,"count",0),Wg(this,"startColumn",0),Wg(this,"endColumn",0),Wg(this,"startPosition",0),Wg(this,"isVisibleInTrimmingContainer",!0)}initialize(e){let{totalColumns:t}=e;this.count=t,this.endColumn=this.count-1}process(){}finalize(){}}function jg(n,e,t){return(e=Mme(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mme(n){var e=Ame(n,"string");return typeof e=="symbol"?e:e+""}function Ame(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Pme{constructor(){jg(this,"count",0),jg(this,"startRow",0),jg(this,"endRow",0),jg(this,"startPosition",0),jg(this,"isVisibleInTrimmingContainer",!0)}initialize(e){let{totalRows:t}=e;this.count=t,this.endRow=this.count-1}process(){}finalize(){}}class Ime extends RY{finalize(e){var t;super.finalize(e);const{overrideFn:i,totalColumns:s,startPositions:r}=e;this.startColumn!==null&&typeof i=="function"&&i(this),this.startColumn<0&&(this.startColumn=0),this.startPosition=(t=r[this.startColumn])!==null&&t!==void 0?t:null,s<this.endColumn&&(this.endColumn=s-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}class Ome extends xY{finalize(e){var t;super.finalize(e);const{overrideFn:i,totalRows:s,startPositions:r}=e;this.startRow!==null&&typeof i=="function"&&i(this),this.startRow<0&&(this.startRow=0),this.startPosition=(t=r[this.startRow])!==null&&t!==void 0?t:null,s<this.endRow&&(this.endRow=s-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function NL(n,e,t){return(e=kme(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kme(n){var e=Hme(n,"string");return typeof e=="symbol"?e:e+""}function Hme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class EY{constructor(e){NL(this,"calculationTypes",[]),NL(this,"calculationResults",new Map),this.calculationTypes=e}_initialize(e){this.calculationTypes.forEach(t=>{let[i,s]=t;this.calculationResults.set(i,s),s.initialize(e)})}_process(e,t){this.calculationTypes.forEach(i=>{let[,s]=i;return s.process(e,t)})}_finalize(e){this.calculationTypes.forEach(t=>{let[,i]=t;return i.finalize(e)})}getResultsFor(e){return this.calculationResults.get(e)}}function Dr(n,e,t){return(e=Dme(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dme(n){var e=Nme(n,"string");return typeof e=="symbol"?e:e+""}function Nme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const X0=50;class Lme extends EY{constructor(e){let{calculationTypes:t,viewportWidth:i,scrollOffset:s,totalColumns:r,columnWidthFn:o,overrideFn:a,inlineStartOffset:l}=e;super(t),Dr(this,"viewportWidth",0),Dr(this,"scrollOffset",0),Dr(this,"zeroBasedScrollOffset",0),Dr(this,"totalColumns",0),Dr(this,"columnWidthFn",null),Dr(this,"columnWidth",0),Dr(this,"overrideFn",null),Dr(this,"inlineStartOffset",0),Dr(this,"totalCalculatedWidth",0),Dr(this,"startPositions",[]),Dr(this,"needReverse",!0),this.viewportWidth=i,this.scrollOffset=s,this.zeroBasedScrollOffset=Math.max(s,0),this.totalColumns=r,this.columnWidthFn=o,this.overrideFn=a,this.inlineStartOffset=l,this.calculate()}calculate(){this._initialize(this);for(let e=0;e<this.totalColumns;e++)if(this.columnWidth=this.getColumnWidth(e),this._process(e,this),this.startPositions.push(this.totalCalculatedWidth),this.totalCalculatedWidth+=this.columnWidth,this.totalCalculatedWidth>=this.zeroBasedScrollOffset+this.viewportWidth){this.needReverse=!1;break}this._finalize(this)}getColumnWidth(e){const t=this.columnWidthFn(e);return isNaN(t)?X0:t}}function nr(n,e,t){return(e=$me(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $me(n){var e=Fme(n,"string");return typeof e=="symbol"?e:e+""}function Fme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const TY=23;class Bme extends EY{constructor(e){let{calculationTypes:t,viewportHeight:i,scrollOffset:s,totalRows:r,rowHeightFn:o,overrideFn:a,horizontalScrollbarHeight:l}=e;super(t),nr(this,"viewportHeight",0),nr(this,"scrollOffset",0),nr(this,"zeroBasedScrollOffset",0),nr(this,"totalRows",0),nr(this,"rowHeightFn",null),nr(this,"rowHeight",0),nr(this,"overrideFn",null),nr(this,"horizontalScrollbarHeight",0),nr(this,"innerViewportHeight",0),nr(this,"totalCalculatedHeight",0),nr(this,"startPositions",[]),nr(this,"needReverse",!0),this.viewportHeight=i,this.scrollOffset=s,this.zeroBasedScrollOffset=Math.max(s,0),this.totalRows=r,this.rowHeightFn=o,this.overrideFn=a,this.horizontalScrollbarHeight=l??0,this.innerViewportHeight=this.zeroBasedScrollOffset+this.viewportHeight-this.horizontalScrollbarHeight,this.calculate()}calculate(){this._initialize(this);for(let e=0;e<this.totalRows;e++)if(this.rowHeight=this.getRowHeight(e),this._process(e,this),this.startPositions.push(this.totalCalculatedHeight),this.totalCalculatedHeight+=this.rowHeight,this.totalCalculatedHeight>=this.innerViewportHeight){this.needReverse=!1;break}this._finalize(this)}getRowHeight(e){const t=this.rowHeightFn(e);return isNaN(t)?TY:t}}function Vme(n,e,t){Wme(n,e),e.set(n,t)}function Wme(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function LL(n,e,t){return(e=jme(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jme(n){var e=zme(n,"string");return typeof e=="symbol"?e:e+""}function zme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yd(n,e){return n.get(MY(n,e))}function $L(n,e,t){return n.set(MY(n,e),t),t}function MY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Pa=new WeakMap;class Fu{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;LL(this,"row",null),LL(this,"col",null),Vme(this,Pa,!1),$L(Pa,this,i),typeof e<"u"&&typeof t<"u"&&(this.row=e,this.col=t)}isValid(e){const{countRows:t,countCols:i,countRowHeaders:s,countColHeaders:r}={countRows:0,countCols:0,countRowHeaders:0,countColHeaders:0,...e};return!(!Number.isInteger(this.row)||!Number.isInteger(this.col)||this.row<-r||this.col<-s||this.row>=t||this.col>=i)}isEqual(e){return e===this?!0:this.row===e.row&&this.col===e.col}isHeader(){return!this.isCell()}isCell(){return this.row>=0&&this.col>=0}isRtl(){return yd(Pa,this)}isSouthEastOf(e){return this.row>=e.row&&(yd(Pa,this)?this.col<=e.col:this.col>=e.col)}isNorthWestOf(e){return this.row<=e.row&&(yd(Pa,this)?this.col>=e.col:this.col<=e.col)}isSouthWestOf(e){return this.row>=e.row&&(yd(Pa,this)?this.col>=e.col:this.col<=e.col)}isNorthEastOf(e){return this.row<=e.row&&(yd(Pa,this)?this.col<=e.col:this.col>=e.col)}normalize(){return this.row=this.row===null?this.row:Math.max(this.row,0),this.col=this.col===null?this.col:Math.max(this.col,0),this}assign(e){return Number.isInteger(e==null?void 0:e.row)&&(this.row=e.row),Number.isInteger(e==null?void 0:e.col)&&(this.col=e.col),e instanceof Fu&&$L(Pa,this,e.isRtl()),this}clone(){return new Fu(this.row,this.col,yd(Pa,this))}toObject(){return{row:this.row,col:this.col}}}function Ume(n,e,t){Yme(n,e),e.set(n,t)}function Yme(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sx(n,e,t){return(e=Gme(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gme(n){var e=Kme(n,"string");return typeof e=="symbol"?e:e+""}function Kme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ir(n,e){return n.get(AY(n,e))}function qme(n,e,t){return n.set(AY(n,e),t),t}function AY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var hs=new WeakMap;class Zw{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;sx(this,"highlight",null),sx(this,"from",null),sx(this,"to",null),Ume(this,hs,!1),this.highlight=e.clone(),this.from=t.clone(),this.to=i.clone(),qme(hs,this,s)}setHighlight(e){return this.highlight=e.clone(),this}setFrom(e){return this.from=e.clone(),this}setTo(e){return this.to=e.clone(),this}isValid(e){return this.from.isValid(e)&&this.to.isValid(e)}isSingle(){return this.isSingleCell()||this.isSingleHeader()}isSingleCell(){return this.from.row>=0&&this.from.row===this.to.row&&this.from.col>=0&&this.from.col===this.to.col}isSingleHeader(){return(this.from.row<0||this.from.col<0)&&this.from.row===this.to.row&&this.from.col===this.to.col}isHeader(){return this.from.isHeader()&&this.to.isHeader()?!0:this.from.col<0&&this.to.col<0||this.from.row<0&&this.to.row<0}containsHeaders(){return this.from.isHeader()||this.to.isHeader()}getOuterHeight(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}getOuterWidth(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}getHeight(){if(this.from.row<0&&this.to.row<0)return 0;const e=Math.max(this.from.row,0),t=Math.max(this.to.row,0);return Math.max(e,t)-Math.min(e,t)+1}getWidth(){if(this.from.col<0&&this.to.col<0)return 0;const e=Math.max(this.from.col,0),t=Math.max(this.to.col,0);return Math.max(e,t)-Math.min(e,t)+1}getCellsCount(){return this.getWidth()*this.getHeight()}includes(e){const{row:t,col:i}=e,s=this.getOuterTopStartCorner(),r=this.getOuterBottomEndCorner();return s.row<=t&&r.row>=t&&s.col<=i&&r.col>=i}includesRange(e){return this.includes(e.getOuterTopStartCorner())&&this.includes(e.getOuterBottomEndCorner())}isEqual(e){return Math.min(this.from.row,this.to.row)===Math.min(e.from.row,e.to.row)&&Math.max(this.from.row,this.to.row)===Math.max(e.from.row,e.to.row)&&Math.min(this.from.col,this.to.col)===Math.min(e.from.col,e.to.col)&&Math.max(this.from.col,this.to.col)===Math.max(e.from.col,e.to.col)}overlaps(e){return e.isSouthEastOf(this.getOuterTopLeftCorner())&&e.isNorthWestOf(this.getOuterBottomRightCorner())}isSouthEastOf(e){return this.getOuterTopLeftCorner().isSouthEastOf(e)||this.getOuterBottomRightCorner().isSouthEastOf(e)}isNorthWestOf(e){return this.getOuterTopLeftCorner().isNorthWestOf(e)||this.getOuterBottomRightCorner().isNorthWestOf(e)}isOverlappingHorizontally(e){return this.getOuterTopEndCorner().col>=e.getOuterTopStartCorner().col&&this.getOuterTopEndCorner().col<=e.getOuterTopEndCorner().col||this.getOuterTopStartCorner().col<=e.getOuterTopEndCorner().col&&this.getOuterTopStartCorner().col>=e.getOuterTopStartCorner().col}isOverlappingVertically(e){return this.getOuterBottomStartCorner().row>=e.getOuterTopRightCorner().row&&this.getOuterBottomStartCorner().row<=e.getOuterBottomStartCorner().row||this.getOuterTopEndCorner().row<=e.getOuterBottomStartCorner().row&&this.getOuterTopEndCorner().row>=e.getOuterTopRightCorner().row}expand(e){const t=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();return e.row<t.row||e.col<t.col||e.row>i.row||e.col>i.col?(this.from=this._createCellCoords(Math.min(t.row,e.row),Math.min(t.col,e.col)),this.to=this._createCellCoords(Math.max(i.row,e.row),Math.max(i.col,e.col)),!0):!1}expandByRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(this.includesRange(e)||!this.overlaps(e))return!1;const i=this.getOuterTopStartCorner(),s=this.getOuterBottomEndCorner(),r=this.getDirection(),o=e.getOuterTopStartCorner(),a=e.getOuterBottomEndCorner(),l=Math.min(i.row,o.row),c=Math.min(i.col,o.col),h=Math.max(s.row,a.row),u=Math.max(s.col,a.col),d=this._createCellCoords(l,c),f=this._createCellCoords(h,u);return this.from=d,this.to=f,this.setDirection(r),t&&(this.highlight.row===this.getOuterBottomRightCorner().row&&this.getVerticalDirection()==="N-S"&&this.flipDirectionVertically(),this.highlight.col===this.getOuterTopRightCorner().col&&this.getHorizontalDirection()==="W-E"&&this.flipDirectionHorizontally()),!0}getDirection(){if(this.from.isNorthWestOf(this.to))return"NW-SE";if(this.from.isNorthEastOf(this.to))return"NE-SW";if(this.from.isSouthEastOf(this.to))return"SE-NW";if(this.from.isSouthWestOf(this.to))return"SW-NE"}setDirection(e){switch(e){case"NW-SE":[this.from,this.to]=[this.getOuterTopLeftCorner(),this.getOuterBottomRightCorner()];break;case"NE-SW":[this.from,this.to]=[this.getOuterTopRightCorner(),this.getOuterBottomLeftCorner()];break;case"SE-NW":[this.from,this.to]=[this.getOuterBottomRightCorner(),this.getOuterTopLeftCorner()];break;case"SW-NE":[this.from,this.to]=[this.getOuterBottomLeftCorner(),this.getOuterTopRightCorner()];break}}getVerticalDirection(){return["NE-SW","NW-SE"].indexOf(this.getDirection())>-1?"N-S":"S-N"}getHorizontalDirection(){return["NW-SE","SW-NE"].indexOf(this.getDirection())>-1?"W-E":"E-W"}flipDirectionVertically(){switch(this.getDirection()){case"NW-SE":this.setDirection("SW-NE");break;case"NE-SW":this.setDirection("SE-NW");break;case"SE-NW":this.setDirection("NE-SW");break;case"SW-NE":this.setDirection("NW-SE");break}}flipDirectionHorizontally(){switch(this.getDirection()){case"NW-SE":this.setDirection("NE-SW");break;case"NE-SW":this.setDirection("NW-SE");break;case"SE-NW":this.setDirection("SW-NE");break;case"SW-NE":this.setDirection("SE-NW");break}}getTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getTopLeftCorner(){return ir(hs,this)?this.getTopEndCorner():this.getTopStartCorner()}getBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getBottomRightCorner(){return ir(hs,this)?this.getBottomStartCorner():this.getBottomEndCorner()}getTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getTopRightCorner(){return ir(hs,this)?this.getTopStartCorner():this.getTopEndCorner()}getBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getBottomLeftCorner(){return ir(hs,this)?this.getBottomEndCorner():this.getBottomStartCorner()}getOuterTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterTopLeftCorner(){return ir(hs,this)?this.getOuterTopEndCorner():this.getOuterTopStartCorner()}getOuterBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterBottomRightCorner(){return ir(hs,this)?this.getOuterBottomStartCorner():this.getOuterBottomEndCorner()}getOuterTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterTopRightCorner(){return ir(hs,this)?this.getOuterTopStartCorner():this.getOuterTopEndCorner()}getOuterBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterBottomLeftCorner(){return ir(hs,this)?this.getOuterBottomEndCorner():this.getOuterBottomStartCorner()}isCorner(e){return e.isEqual(this.getOuterTopLeftCorner())||e.isEqual(this.getOuterTopRightCorner())||e.isEqual(this.getOuterBottomLeftCorner())||e.isEqual(this.getOuterBottomRightCorner())}getOppositeCorner(e){if(!(e instanceof Fu))return!1;if(e.isEqual(this.getOuterBottomEndCorner()))return this.getOuterTopStartCorner();if(e.isEqual(this.getOuterTopStartCorner()))return this.getOuterBottomEndCorner();if(e.isEqual(this.getOuterTopEndCorner()))return this.getOuterBottomStartCorner();if(e.isEqual(this.getOuterBottomStartCorner()))return this.getOuterTopEndCorner()}getBordersSharedWith(e){if(!this.includesRange(e))return[];const t={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},i={top:Math.min(e.from.row,e.to.row),bottom:Math.max(e.from.row,e.to.row),left:Math.min(e.from.col,e.to.col),right:Math.max(e.from.col,e.to.col)},s=[];return t.top===i.top&&s.push("top"),t.right===i.right&&s.push(ir(hs,this)?"left":"right"),t.bottom===i.bottom&&s.push("bottom"),t.left===i.left&&s.push(ir(hs,this)?"right":"left"),s}getInner(){const e=this.getOuterTopStartCorner(),t=this.getOuterBottomEndCorner(),i=[];for(let s=e.row;s<=t.row;s++)for(let r=e.col;r<=t.col;r++)!(this.from.row===s&&this.from.col===r)&&!(this.to.row===s&&this.to.col===r)&&i.push(this._createCellCoords(s,r));return i}getAll(){const e=this.getOuterTopStartCorner(),t=this.getOuterBottomEndCorner(),i=[];for(let s=e.row;s<=t.row;s++)for(let r=e.col;r<=t.col;r++)e.row===s&&e.col===r?i.push(e):t.row===s&&t.col===r?i.push(t):i.push(this._createCellCoords(s,r));return i}forAll(e){const t=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();for(let s=t.row;s<=i.row;s++)for(let r=t.col;r<=i.col;r++)if(e(s,r)===!1)return}clone(){return new Zw(this.highlight,this.from,this.to,ir(hs,this))}toObject(){return{from:this.from.toObject(),to:this.to.toObject()}}_createCellCoords(e,t){return new Fu(e,t,ir(hs,this))}}function yo(n,e,t){Xme(n,e),e.set(n,t)}function Xme(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function He(n,e){return n.get(PY(n,e))}function $l(n,e,t){return n.set(PY(n,e),t),t}function PY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var sr=new WeakMap,rx=new WeakMap,di=new WeakMap,Cd=new WeakMap,eb=new WeakMap,Nr=new WeakMap,ox=new WeakMap,zg=new WeakMap,fh=new WeakMap,Co=new WeakMap;let IY=class{constructor(e,t,i,s,r,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;yo(this,sr,void 0),yo(this,rx,void 0),yo(this,di,void 0),yo(this,Cd,void 0),yo(this,eb,void 0),yo(this,Nr,void 0),yo(this,ox,void 0),yo(this,zg,void 0),yo(this,fh,[null,null]),yo(this,Co,[null,null]),$l(sr,this,i),$l(rx,this,t),$l(di,this,r),$l(Cd,this,o),$l(eb,this,a),$l(Nr,this,s),$l(ox,this,e),this.registerEvents()}registerEvents(){He(Nr,this).addEventListener(He(di,this).holder,"contextmenu",i=>this.onContextMenu(i)),He(Nr,this).addEventListener(He(di,this).TABLE,"mouseover",i=>this.onMouseOver(i)),He(Nr,this).addEventListener(He(di,this).TABLE,"mouseout",i=>this.onMouseOut(i));const e=()=>{He(Nr,this).addEventListener(He(di,this).holder,"touchstart",i=>this.onTouchStart(i)),He(Nr,this).addEventListener(He(di,this).holder,"touchend",i=>this.onTouchEnd(i)),this.momentumScrolling||(this.momentumScrolling={}),He(Nr,this).addEventListener(He(di,this).holder,"scroll",()=>{clearTimeout(this.momentumScrolling._timeout),this.momentumScrolling.ongoing||He(sr,this).getSetting("onBeforeTouchScroll"),this.momentumScrolling.ongoing=!0,this.momentumScrolling._timeout=setTimeout(()=>{this.touchApplied||(this.momentumScrolling.ongoing=!1,He(sr,this).getSetting("onAfterMomentumScroll"))},200)})},t=()=>{He(Nr,this).addEventListener(He(di,this).holder,"mouseup",i=>this.onMouseUp(i)),He(Nr,this).addEventListener(He(di,this).holder,"mousedown",i=>this.onMouseDown(i))};hl()?e():(mP()&&e(),t())}selectedCellWasTouched(e){const i=this.parentCell(e).coords;if(He(zg,this)&&i){const[s,r]=[i.row,He(zg,this).from.row],[o,a]=[i.col,He(zg,this).from.col];return s===r&&o===a}return!1}parentCell(e){const t={},i=He(di,this).TABLE,s=Fm(e,["TD","TH"],i);return s?(t.coords=He(di,this).getCoords(s),t.TD=s):Fe(e,"wtBorder")&&Fe(e,"current")?(t.coords=He(Cd,this).getFocusSelection().cellRange.highlight,t.TD=He(di,this).getCell(t.coords)):Fe(e,"wtBorder")&&Fe(e,"area")&&He(Cd,this).getAreaSelection().cellRange&&(t.coords=He(Cd,this).getAreaSelection().cellRange.to,t.TD=He(di,this).getCell(t.coords)),t}onMouseDown(e){const t=He(rx,this).rootDocument.activeElement,i=gP(OU,e.target),s=e.target;if(!["TD","TH"].includes(t.nodeName)&&(s===t||i(0)===t||i(1)===t))return;const r=this.parentCell(s);Fe(s,"corner")?He(sr,this).getSetting("onCellCornerMouseDown",e,s):r.TD&&He(sr,this).has("onCellMouseDown")&&this.callListener("onCellMouseDown",e,r.coords,r.TD),(e.button===0||this.touchApplied)&&r.TD&&(He(Co,this)[0]=r.TD,clearTimeout(He(fh,this)[0]),He(fh,this)[0]=setTimeout(()=>{He(Co,this)[0]=null},1e3))}onContextMenu(e){if(He(sr,this).has("onCellContextMenu")){const t=this.parentCell(e.target);t.TD&&this.callListener("onCellContextMenu",e,t.coords,t.TD)}}onMouseOver(e){if(!He(sr,this).has("onCellMouseOver"))return;const t=He(di,this).TABLE,i=Fm(e.target,["TD","TH"],t),s=He(eb,this)||this;i&&i!==s.lastMouseOver&&Tc(i,t)&&(s.lastMouseOver=i,this.callListener("onCellMouseOver",e,He(di,this).getCoords(i),i))}onMouseOut(e){if(!He(sr,this).has("onCellMouseOut"))return;const t=He(di,this).TABLE,i=Fm(e.target,["TD","TH"],t),s=Fm(e.relatedTarget,["TD","TH"],t),r=He(eb,this)||this;i&&i!==s&&Tc(i,t)&&(this.callListener("onCellMouseOut",e,He(di,this).getCoords(i),i),s===null&&(r.lastMouseOver=null))}onMouseUp(e){const t=this.parentCell(e.target);t.TD&&He(sr,this).has("onCellMouseUp")&&this.callListener("onCellMouseUp",e,t.coords,t.TD),!(e.button!==0&&!this.touchApplied)&&(t.TD===He(Co,this)[0]&&t.TD===He(Co,this)[1]?(Fe(e.target,"corner")?this.callListener("onCellCornerDblClick",e,t.coords,t.TD):this.callListener("onCellDblClick",e,t.coords,t.TD),He(Co,this)[0]=null,He(Co,this)[1]=null):t.TD===He(Co,this)[0]&&(He(Co,this)[1]=t.TD,clearTimeout(He(fh,this)[1]),He(fh,this)[1]=setTimeout(()=>{He(Co,this)[1]=null},500)))}onTouchStart(e){$l(zg,this,He(Cd,this).getFocusSelection().cellRange),this.touchApplied=!0,this.onMouseDown(e)}onTouchEnd(e){var t;const i=e.target,s=(t=this.parentCell(i))===null||t===void 0?void 0:t.coords,r=Me(s)&&s.row>=0&&s.col>=0;if(e.cancelable&&r&&He(sr,this).getSetting("isDataViewInstance")){const a=["A","BUTTON","INPUT"];vP()&&(iY()||sY())&&this.selectedCellWasTouched(i)&&!a.includes(i.tagName)?e.preventDefault():this.selectedCellWasTouched(i)||e.preventDefault()}this.onMouseUp(e),this.touchApplied=!1}callListener(e,t,i,s){const r=He(sr,this).getSettingPure(e);r&&r(t,i,s,He(ox,this).call(this))}destroy(){clearTimeout(He(fh,this)[0]),clearTimeout(He(fh,this)[1]),He(Nr,this).destroy()}};function ax(n,e,t){return(e=Qme(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qme(n){var e=Zme(n,"string");return typeof e=="symbol"?e:e+""}function Zme(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Jme{constructor(e,t,i){ax(this,"offset",void 0),ax(this,"total",void 0),ax(this,"countTH",void 0),this.offset=e,this.total=t,this.countTH=i}offsetted(e){return e+this.offset}unOffsetted(e){return e-this.offset}renderedToSource(e){return this.offsetted(e)}sourceToRendered(e){return this.unOffsetted(e)}offsettedTH(e){return e-this.countTH}unOffsettedTH(e){return e+this.countTH}visibleRowHeadedColumnToSourceColumn(e){return this.renderedToSource(this.offsettedTH(e))}sourceColumnToVisibleRowHeadedColumn(e){return this.unOffsettedTH(this.sourceToRendered(e))}}function lx(n,e,t){return(e=epe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function epe(n){var e=tpe(n,"string");return typeof e=="symbol"?e:e+""}function tpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class npe{constructor(e,t,i){lx(this,"offset",void 0),lx(this,"total",void 0),lx(this,"countTH",void 0),this.offset=e,this.total=t,this.countTH=i}offsetted(e){return e+this.offset}unOffsetted(e){return e-this.offset}renderedToSource(e){return this.offsetted(e)}sourceToRendered(e){return this.unOffsetted(e)}offsettedTH(e){return e-this.countTH}unOffsettedTH(e){return e+this.countTH}visibleColHeadedRowToSourceRow(e){return this.renderedToSource(this.offsettedTH(e))}sourceRowToVisibleColHeadedRow(e){return this.unOffsettedTH(this.sourceToRendered(e))}}const ipe=0,ZC=1,JC=2;function tb(n,e,t){return(e=spe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function spe(n){var e=rpe(n,"string");return typeof e=="symbol"?e:e+""}function rpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class FL{constructor(){tb(this,"currentSize",0),tb(this,"nextSize",0),tb(this,"currentOffset",0),tb(this,"nextOffset",0)}setSize(e){this.currentSize=this.nextSize,this.nextSize=e}setOffset(e){this.currentOffset=this.nextOffset,this.nextOffset=e}}function cx(n,e,t){return(e=ope(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ope(n){var e=ape(n,"string");return typeof e=="symbol"?e:e+""}function ape(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class lpe{constructor(){cx(this,"size",new FL),cx(this,"workingSpace",ipe),cx(this,"sharedSize",null)}setSize(e){this.size.setSize(e)}setOffset(e){this.size.setOffset(e)}getViewSize(){return this.size}isShared(){return this.sharedSize instanceof FL}isPlaceOn(e){return this.workingSpace===e}append(e){this.workingSpace=ZC,e.workingSpace=JC,this.sharedSize=e.getViewSize()}prepend(e){this.workingSpace=JC,e.workingSpace=ZC,this.sharedSize=e.getViewSize()}}function Sd(n,e,t){return(e=cpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cpe(n){var e=hpe(n,"string");return typeof e=="symbol"?e:e+""}function hpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class OY{constructor(e,t,i){Sd(this,"rootNode",void 0),Sd(this,"nodesPool",void 0),Sd(this,"sizeSet",new lpe),Sd(this,"childNodeType",void 0),Sd(this,"visualIndex",0),Sd(this,"collectedNodes",[]),this.rootNode=e,this.nodesPool=t,this.childNodeType=i.toUpperCase()}setSize(e){return this.sizeSet.setSize(e),this}setOffset(e){return this.sizeSet.setOffset(e),this}isSharedViewSet(){return this.sizeSet.isShared()}getNode(e){return e<this.collectedNodes.length?this.collectedNodes[e]:null}getCurrentNode(){const e=this.collectedNodes.length;return e>0?this.collectedNodes[e-1]:null}getRenderedChildCount(){const{rootNode:e,sizeSet:t}=this;let i=0;if(this.isSharedViewSet()){let s=e.firstElementChild;for(;s;){if(s.tagName===this.childNodeType)i+=1;else if(t.isPlaceOn(ZC))break;s=s.nextElementSibling}}else i=e.childElementCount;return i}start(){this.collectedNodes.length=0,this.visualIndex=0;const{rootNode:e,sizeSet:t}=this,i=this.isSharedViewSet(),{nextSize:s}=t.getViewSize();let r=this.getRenderedChildCount();for(;r<s;){const a=this.nodesPool();!i||i&&t.isPlaceOn(JC)?e.appendChild(a):e.insertBefore(a,e.firstChild),r+=1}const o=i&&t.isPlaceOn(ZC);for(;r>s;)e.removeChild(o?e.firstChild:e.lastChild),r-=1}render(){const{rootNode:e,sizeSet:t}=this;let i=this.visualIndex;this.isSharedViewSet()&&t.isPlaceOn(JC)&&(i+=t.sharedSize.nextSize);let s=e.childNodes[i];if(s.tagName!==this.childNodeType){const r=this.nodesPool();e.replaceChild(r,s),s=r}this.collectedNodes.push(s),this.visualIndex+=1}end(){}}class kY extends OY{prependView(e){return this.sizeSet.prepend(e.sizeSet),e.sizeSet.append(this.sizeSet),this}appendView(e){return this.sizeSet.append(e.sizeSet),e.sizeSet.prepend(this.sizeSet),this}}function upe(n,e,t){return(e=dpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dpe(n){var e=fpe(n,"string");return typeof e=="symbol"?e:e+""}function fpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class gpe{constructor(e){upe(this,"nodeType",void 0),this.nodeType=e.toUpperCase()}setRootDocument(e){this.rootDocument=e}obtain(){return this.rootDocument.createElement(this.nodeType)}}function Ug(n,e,t){return(e=mpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mpe(n){var e=ppe(n,"string");return typeof e=="symbol"?e:e+""}function ppe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Jw{constructor(e,t){Ug(this,"nodesPool",null),Ug(this,"nodeType",void 0),Ug(this,"rootNode",void 0),Ug(this,"table",null),Ug(this,"renderedNodes",0),this.nodesPool=typeof e=="string"?new gpe(e):null,this.nodeType=e,this.rootNode=t}setTable(e){this.nodesPool&&this.nodesPool.setRootDocument(e.rootDocument),this.table=e}adjust(){}render(){}}function BL(n,e,t){return(e=wpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wpe(n){var e=vpe(n,"string");return typeof e=="symbol"?e:e+""}function vpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class bpe extends Jw{constructor(){super("TH"),BL(this,"orderViews",new WeakMap),BL(this,"sourceRowIndex",0)}obtainOrderView(e){let t;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new kY(e,i=>this.nodesPool.obtain(this.sourceRowIndex,i),this.nodeType),this.orderViews.set(e,t)),t}render(){const{rowsToRender:e,rowHeaderFunctions:t,rowHeadersCount:i,rows:s,cells:r}=this.table;for(let o=0;o<e;o++){const a=this.table.renderedRowToSource(o),l=s.getRenderedNode(o);this.sourceRowIndex=a;const c=this.obtainOrderView(l),h=r.obtainOrderView(l);c.appendView(h).setSize(i).setOffset(this.table.renderedColumnToSource(0)).start();for(let u=0;u<i;u++){c.render();const d=c.getCurrentNode();d.className="",d.removeAttribute("style"),rd(d,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&$e(d,[cde(),vde(),sP(u+1),lg(-1)]),t[u](a,d,u)}c.end()}}}class ype extends Jw{constructor(e){super(null,e)}adjust(){const{columnHeadersCount:e,rowHeadersCount:t}=this.table;let i=this.rootNode.firstChild;if(e){const{columnsToRender:s}=this.table,r=s+t;for(let a=0,l=e;a<l;a++){for(i=this.rootNode.childNodes[a],i||(i=this.table.rootDocument.createElement("tr"),this.rootNode.appendChild(i)),this.renderedNodes=i.childNodes.length;this.renderedNodes<r;)i.appendChild(this.table.rootDocument.createElement("th")),this.renderedNodes+=1;for(;this.renderedNodes>r;)i.removeChild(i.lastChild),this.renderedNodes-=1}const o=this.rootNode.childNodes.length;if(o>e)for(let a=e;a<o;a++)this.rootNode.removeChild(this.rootNode.lastChild)}else i&&lo(i)}render(){const{columnHeadersCount:e}=this.table;this.table.isAriaEnabled()&&$e(this.rootNode,[EU()]);for(let t=0;t<e;t+=1){const{columnHeaderFunctions:i,columnsToRender:s,rowHeadersCount:r}=this.table,o=this.rootNode.childNodes[t];this.table.isAriaEnabled()&&$e(o,[hM(),PU(t+1)]);for(let a=-1*r;a<s;a+=1){const l=this.table.renderedColumnToSource(a),c=o.childNodes[a+r];c.className="",c.removeAttribute("style"),rd(c,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&$e(c,[sP(a+1+this.table.rowHeadersCount),lg(-1),hde(),...a>=0?[wde()]:[hM()]]),i[t](l,c,t)}}}}let VL=!1;class Cpe extends Jw{constructor(e){super(null,e)}adjust(){const{columnsToRender:e,rowHeadersCount:t}=this.table,i=e+t;for(;this.renderedNodes<i;)this.rootNode.appendChild(this.table.rootDocument.createElement("col")),this.renderedNodes+=1;for(;this.renderedNodes>i;)this.rootNode.removeChild(this.rootNode.lastChild),this.renderedNodes-=1}render(){this.adjust();const{columnsToRender:e,rowHeadersCount:t}=this.table;!VL&&e>1e3&&(VL=!0,Dt(Nt`Performance tip: Handsontable rendered more than 1000 visible columns.\x20
        Consider limiting the number of rendered columns by specifying the table width and/or\x20
        turning off the "renderAllColumns" option.`));for(let s=0;s<t;s++){const r=this.table.renderedColumnToSource(s),o=this.table.columnUtils.getHeaderWidth(r);this.rootNode.childNodes[s].style.width=`${o}px`}for(let s=0;s<e;s++){const r=this.table.renderedColumnToSource(s),o=this.table.columnUtils.getStretchedColumnWidth(r);this.rootNode.childNodes[s+t].style.width=`${o}px`}const i=this.rootNode.firstChild;i&&ae(i,"rowHeader")}}function Spe(n,e,t){return(e=_pe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _pe(n){var e=Rpe(n,"string");return typeof e=="symbol"?e:e+""}function Rpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const nb={rowEven:"ht__row_even",rowOdd:"ht__row_odd"};let WL=!1;class xpe extends Jw{constructor(e){super("TR",e),Spe(this,"orderView",void 0),this.orderView=new OY(e,t=>this.nodesPool.obtain(t),this.nodeType)}getRenderedNode(e){return this.orderView.getNode(e)}render(){const{rowsToRender:e}=this.table;!WL&&e>1e3&&(WL=!0,Dt(Nt`Performance tip: Handsontable rendered more than 1000 visible rows.\x20
        Consider limiting the number of rendered rows by specifying the table height and/or\x20
        turning off the "renderAllRows" option.`)),this.table.isAriaEnabled()&&$e(this.rootNode,[EU()]),this.orderView.setSize(e).setOffset(this.table.renderedRowToSource(0)).start();for(let s=0;s<e;s++){this.orderView.render();const r=this.orderView.getCurrentNode(),o=this.table.renderedRowToSource(s);if(this.table.isAriaEnabled()){var t,i;$e(r,[hM(),PU(o+((t=(i=this.table.rowUtils)===null||i===void 0||(i=i.dataAccessObject)===null||i===void 0?void 0:i.columnHeaders.length)!==null&&t!==void 0?t:0)+1)])}ze(r,[nb.rowEven,nb.rowOdd]),(o+1)%2===0?ae(r,nb.rowEven):ae(r,nb.rowOdd)}this.orderView.end()}}function jL(n,e,t){return(e=Epe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Epe(n){var e=Tpe(n,"string");return typeof e=="symbol"?e:e+""}function Tpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Mpe extends Jw{constructor(){super("TD"),jL(this,"orderViews",new WeakMap),jL(this,"sourceRowIndex",0)}obtainOrderView(e){let t;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new kY(e,i=>this.nodesPool.obtain(this.sourceRowIndex,i),this.nodeType),this.orderViews.set(e,t)),t}render(){const{rowsToRender:e,columnsToRender:t,rows:i,rowHeaders:s}=this.table;for(let a=0;a<e;a++){const l=this.table.renderedRowToSource(a),c=i.getRenderedNode(a);this.sourceRowIndex=l;const h=this.obtainOrderView(c),u=s.obtainOrderView(c);h.prependView(u).setSize(t).setOffset(this.table.renderedColumnToSource(0)).start();for(let d=0;d<t;d++){h.render();const f=h.getCurrentNode(),g=this.table.renderedColumnToSource(d);if(Fe(f,"hide")||(f.className=""),f.removeAttribute("style"),f.removeAttribute("dir"),rd(f,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.cellRenderer(l,g,f),this.table.isAriaEnabled()){var r,o;$e(f,[...f.hasAttribute("role")?[]:[lde()],lg(-1),sP(g+((r=(o=this.table.rowUtils)===null||o===void 0||(o=o.dataAccessObject)===null||o===void 0?void 0:o.rowHeaders.length)!==null&&r!==void 0?r:0)+1)])}}h.end()}}}function ii(n,e,t){return(e=Ape(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ape(n){var e=Ppe(n,"string");return typeof e=="symbol"?e:e+""}function Ppe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Ipe{constructor(e){let{cellRenderer:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ii(this,"rootNode",void 0),ii(this,"rootDocument",void 0),ii(this,"rowHeaders",null),ii(this,"columnHeaders",null),ii(this,"colGroup",null),ii(this,"rows",null),ii(this,"cells",null),ii(this,"rowFilter",null),ii(this,"columnFilter",null),ii(this,"rowUtils",null),ii(this,"columnUtils",null),ii(this,"rowsToRender",0),ii(this,"columnsToRender",0),ii(this,"rowHeaderFunctions",[]),ii(this,"rowHeadersCount",0),ii(this,"columnHeaderFunctions",[]),ii(this,"columnHeadersCount",0),ii(this,"cellRenderer",void 0),ii(this,"activeOverlayName",void 0),this.rootNode=e,this.rootDocument=this.rootNode.ownerDocument,this.cellRenderer=t}setActiveOverlayName(e){this.activeOverlayName=e}setAxisUtils(e,t){this.rowUtils=e,this.columnUtils=t}setViewportSize(e,t){this.rowsToRender=e,this.columnsToRender=t}setFilters(e,t){this.rowFilter=e,this.columnFilter=t}setHeaderContentRenderers(e,t){this.rowHeaderFunctions=e,this.rowHeadersCount=e.length,this.columnHeaderFunctions=t,this.columnHeadersCount=t.length}setRenderers(){let{rowHeaders:e,columnHeaders:t,colGroup:i,rows:s,cells:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.setTable(this),t.setTable(this),i.setTable(this),s.setTable(this),r.setTable(this),this.rowHeaders=e,this.columnHeaders=t,this.colGroup=i,this.rows=s,this.cells=r}renderedRowToSource(e){return this.rowFilter.renderedToSource(e)}renderedColumnToSource(e){return this.columnFilter.renderedToSource(e)}isAriaEnabled(){return this.rowUtils.wtSettings.getSetting("ariaTags")}render(){this.colGroup.adjust(),this.columnHeaders.adjust(),this.rows.adjust(),this.rowHeaders.adjust(),this.columnHeaders.render(),this.rows.render(),this.rowHeaders.render(),this.cells.render(),this.columnUtils.calculateWidths(),this.colGroup.render();const{rowsToRender:e,rows:t}=this;for(let i=0;i<e;i++){const s=t.getRenderedNode(i);if(s.firstChild){const r=this.renderedRowToSource(i),o=this.rowUtils.getHeightByOverlayName(r,this.activeOverlayName);o?s.firstChild.style.height=`${o-1}px`:s.firstChild.style.height=""}}}}class Ope{constructor(){let{TABLE:e,THEAD:t,COLGROUP:i,TBODY:s,rowUtils:r,columnUtils:o,cellRenderer:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.renderer=new Ipe(e,{cellRenderer:a}),this.renderer.setRenderers({rowHeaders:new bpe,columnHeaders:new ype(t),colGroup:new Cpe(i),rows:new xpe(s),cells:new Mpe}),this.renderer.setAxisUtils(r,o)}setActiveOverlayName(e){return this.renderer.setActiveOverlayName(e),this}setFilters(e,t){return this.renderer.setFilters(e,t),this}setViewportSize(e,t){return this.renderer.setViewportSize(e,t),this}setHeaderContentRenderers(e,t){return this.renderer.setHeaderContentRenderers(e,t),this}adjust(){this.renderer.adjust()}render(){this.renderer.render()}}function Yg(n,e,t){kpe(n,e),e.set(n,t)}function kpe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ib(n,e,t){return(e=Hpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hpe(n){var e=Dpe(n,"string");return typeof e=="symbol"?e:e+""}function Dpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ii(n,e){return n.get(HY(n,e))}function Gg(n,e,t){return n.set(HY(n,e),t),t}function HY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var sb=new WeakMap,_d=new WeakMap,Kg=new WeakMap,rb=new WeakMap,gh=new WeakMap;class Npe{constructor(e){let{totalColumns:t,stretchMode:i,stretchingColumnWidthFn:s,columnWidthFn:r}=e;ib(this,"stretchAllRatio",0),ib(this,"stretchLastWidth",0),ib(this,"stretchAllColumnsWidth",[]),Yg(this,sb,0),ib(this,"needVerifyLastColumnWidth",!0),Yg(this,_d,()=>0),Yg(this,Kg,o=>o),Yg(this,rb,o=>o),Yg(this,gh,()=>"none"),Gg(_d,this,t),Gg(gh,this,i),Gg(Kg,this,s??Ii(Kg,this)),Gg(rb,this,r??Ii(rb,this))}refreshStretching(e){if(Ii(gh,this).call(this)==="none")return;this.stretchAllRatio=0,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0,this.stretchLastWidth=0,Gg(sb,this,e);let t=0;for(let s=0;s<Ii(_d,this).call(this);s++){const r=this._getColumnWidth(s),o=Ii(Kg,this).call(this,void 0,s);typeof o=="number"?e-=o:t+=r}const i=e-t;if(Ii(gh,this).call(this)==="all"&&i>0)this.stretchAllRatio=e/t,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if(Ii(gh,this).call(this)==="last"&&e!==1/0){const s=this._getColumnWidth(Ii(_d,this).call(this)-1),r=i+s;this.stretchLastWidth=r>=0?r:s}}getStretchedColumnWidth(e,t){let i=null;return Ii(gh,this).call(this)==="all"&&this.stretchAllRatio!==0?i=this._getStretchedAllColumnWidth(e,t):Ii(gh,this).call(this)==="last"&&this.stretchLastWidth!==0&&(i=this._getStretchedLastColumnWidth(e)),i}_getStretchedAllColumnWidth(e,t){let i=0;if(!this.stretchAllColumnsWidth[e]){const s=Math.round(t*this.stretchAllRatio),r=Ii(Kg,this).call(this,s,e);r===void 0?this.stretchAllColumnsWidth[e]=s:this.stretchAllColumnsWidth[e]=isNaN(r)?this._getColumnWidth(e):r}if(this.stretchAllColumnsWidth.length===Ii(_d,this).call(this)&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(let s=0;s<this.stretchAllColumnsWidth.length;s++)i+=this.stretchAllColumnsWidth[s];i!==Ii(sb,this)&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=Ii(sb,this)-i)}return this.stretchAllColumnsWidth[e]}_getStretchedLastColumnWidth(e){return e===Ii(_d,this).call(this)-1?this.stretchLastWidth:null}_getColumnWidth(e){let t=Ii(rb,this).call(this,e);return isNaN(t)&&(t=X0),t}}function ob(n,e,t){return(e=Lpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lpe(n){var e=$pe(n,"string");return typeof e=="symbol"?e:e+""}function $pe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Fpe{constructor(e,t){ob(this,"dataAccessObject",void 0),ob(this,"wtSettings",void 0),ob(this,"headerWidths",new Map),ob(this,"stretching",void 0),this.dataAccessObject=e,this.wtSettings=t,this.stretching=new Npe({totalColumns:()=>this.wtSettings.getSetting("totalColumns"),stretchMode:()=>this.wtSettings.getSetting("stretchH"),stretchingColumnWidthFn:(i,s)=>this.wtSettings.getSetting("onBeforeStretchingColumnWidth",i,s),columnWidthFn:i=>this.dataAccessObject.wtTable.getColumnWidth(i)})}getWidth(e){return this.wtSettings.getSetting("columnWidth",e)||this.wtSettings.getSetting("defaultColumnWidth")}getStretchedColumnWidth(e){let t=this.getWidth(e);const i=this.stretching.getStretchedColumnWidth(e,t);return i&&(t=i),t}getHeaderHeight(e){let t=this.wtSettings.getSetting("defaultRowHeight");const i=this.dataAccessObject.wtViewport.oversizedColumnHeaders[e];return i!==void 0&&(t=t?Math.max(t,i):i),t}getHeaderWidth(e){return this.headerWidths.get(this.dataAccessObject.wtTable.columnFilter.sourceToRendered(e))}refreshStretching(){const{wtTable:e,wtViewport:t,cloneSource:i}=this.dataAccessObject,s=i?i.wtTable.holder:e.holder,r=s.offsetHeight<s.scrollHeight?ui():0;this.stretching.refreshStretching(t.getViewportWidth()-r)}calculateWidths(){const{wtSettings:e}=this;let t=e.getSetting("rowHeaderWidth");if(this.refreshStretching(),t=e.getSetting("onModifyRowHeaderWidth",t),t!=null){const i=e.getSetting("rowHeaders").length,s=e.getSetting("defaultColumnWidth");for(let r=0;r<i;r++){let o=Array.isArray(t)?t[r]:t;o=o??s,this.headerWidths.set(r,o)}}}}function zL(n,e,t){return(e=Bpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bpe(n){var e=Vpe(n,"string");return typeof e=="symbol"?e:e+""}function Vpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Wpe{constructor(e,t){zL(this,"dataAccessObject",void 0),zL(this,"wtSettings",void 0),this.dataAccessObject=e,this.wtSettings=t}getHeight(e){let t=this.wtSettings.getSetting("rowHeight",e);const i=this.dataAccessObject.wtViewport.oversizedRows[e];return i!==void 0&&(t=t===void 0?i:Math.max(t,i)),t}getHeightByOverlayName(e,t){let i=this.wtSettings.getSetting("rowHeightByOverlayName",e,t);const s=this.dataAccessObject.wtViewport.oversizedRows[e];return s!==void 0&&(i=i===void 0?s:Math.max(i,s)),i}}function So(n,e,t){return(e=jpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jpe(n){var e=zpe(n,"string");return typeof e=="symbol"?e:e+""}function zpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let ug=class{constructor(e,t,i,s,r){So(this,"wtSettings",null),So(this,"domBindings",void 0),So(this,"TBODY",null),So(this,"THEAD",null),So(this,"COLGROUP",null),So(this,"hasTableHeight",!0),So(this,"hasTableWidth",!0),So(this,"isTableVisible",!1),So(this,"tableOffset",0),So(this,"holderOffset",0),this.domBindings=i,this.isMaster=r==="master",this.name=r,this.dataAccessObject=e,this.facadeGetter=t,this.wtSettings=s,this.instance=this.dataAccessObject.wot,this.wot=this.dataAccessObject.wot,this.TABLE=i.rootTable,oP(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.isMaster&&this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;const o=this.wtSettings.getSettingPure("rowHeaderWidth");this.wtSettings.update("rowHeaderWidth",()=>this._modifyRowHeaderWidth(o)),this.rowUtils=new Wpe(this.dataAccessObject,this.wtSettings),this.columnUtils=new Fpe(this.dataAccessObject,this.wtSettings),this.tableRenderer=new Ope({TABLE:this.TABLE,THEAD:this.THEAD,COLGROUP:this.COLGROUP,TBODY:this.TBODY,rowUtils:this.rowUtils,columnUtils:this.columnUtils,cellRenderer:this.wtSettings.getSettingPure("cellRenderer")})}is(e){return this.name===e}fixTableDomTree(){const e=this.domBindings.rootDocument;this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=e.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=e.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=e.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD))}createSpreader(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Fe(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.className="wtSpreader",t&&t.insertBefore(i,e),i.appendChild(e)),i.style.position="relative",this.wtSettings.getSetting("ariaTags")&&$e(i,[ea()]),i}createHider(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Fe(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.className="wtHider",t&&t.insertBefore(i,e),i.appendChild(e)),this.wtSettings.getSetting("ariaTags")&&$e(i,[ea()]),i}createHolder(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Fe(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.style.position="relative",i.className="wtHolder",t&&t.insertBefore(i,e),this.isMaster&&(i.parentNode.className+="ht_master handsontable",i.parentNode.setAttribute("dir",this.wtSettings.getSettingPure("rtlMode")?"rtl":"ltr"),this.wtSettings.getSetting("ariaTags")&&$e(i.parentNode,[ea()])),i.appendChild(e)),this.wtSettings.getSetting("ariaTags")&&$e(i,[ea()]),i}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{wtSettings:t}=this,{wtOverlays:i,wtViewport:s}=this.dataAccessObject,r=t.getSetting("totalRows"),o=t.getSetting("totalColumns"),a=t.getSetting("rowHeaders"),l=a.length,c=t.getSetting("columnHeaders"),h=c.length;let u=e;if(this.isMaster&&(i.beforeDraw(),this.holderOffset=li(this.holder),u=s.createCalculators(u),l&&!t.getSetting("fixedColumnsStart"))){const f=i.inlineStartOverlay.getScrollPosition(),g=this.correctHeaderWidth;this.correctHeaderWidth=f!==0,g!==this.correctHeaderWidth&&(u=!1)}if(u)this.isMaster&&i.refresh(!0);else{this.isMaster?this.tableOffset=li(this.TABLE):this.tableOffset=this.dataAccessObject.parentTableOffset;const f=r>0?this.getFirstRenderedRow():0,g=o>0?this.getFirstRenderedColumn():0;this.rowFilter=new npe(f,r,h),this.columnFilter=new Jme(g,o,l);let m=!0;if(this.isMaster){this.alignOverlaysWithTrimmingContainer();const w={};this.wtSettings.getSetting("beforeDraw",!0,w),m=w.skipRender!==!0}if(m){this.tableRenderer.setHeaderContentRenderers(a,c),(this.is(Xo)||this.is(Ac))&&this.tableRenderer.setHeaderContentRenderers(a,[]),this.resetOversizedRows(),this.tableRenderer.setActiveOverlayName(this.name).setViewportSize(this.getRenderedRowsCount(),this.getRenderedColumnsCount()).setFilters(this.rowFilter,this.columnFilter).render();let w;if(this.isMaster&&(w=this.dataAccessObject.workspaceWidth,s.containerWidth=null,this.markOversizedColumnHeaders()),this.adjustColumnHeaderHeights(),(this.isMaster||this.is(Xo))&&this.markOversizedRows(),this.isMaster){this.wtSettings.getSetting("externalRowCalculator")||s.createVisibleCalculators(),i.refresh(!1),i.applyToDOM();const v=Qt(this.hider),C=Qt(this.TABLE);v!==0&&C!==v&&(this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),w!==s.getWorkspaceWidth()&&(s.containerWidth=null,this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),this.wtSettings.getSetting("onDraw",!0)}else this.is(Xo)&&this.dataAccessObject.cloneSource.wtOverlays.adjustElementsSize()}}let d=!1;return this.isMaster&&(d=i.topOverlay.resetFixedPosition(),i.bottomOverlay.clone&&(d=i.bottomOverlay.resetFixedPosition()||d),d=i.inlineStartOverlay.resetFixedPosition()||d,i.topInlineStartCornerOverlay&&i.topInlineStartCornerOverlay.resetFixedPosition(),i.bottomInlineStartCornerOverlay&&i.bottomInlineStartCornerOverlay.clone&&i.bottomInlineStartCornerOverlay.resetFixedPosition()),d?(i.refreshAll(),i.adjustElementsSize()):this.dataAccessObject.selectionManager.setActiveOverlay(this.facadeGetter()).render(u),this.isMaster&&i.afterDraw(),this.dataAccessObject.drawn=!0,this}markIfOversizedColumnHeader(e){const t=this.columnFilter.renderedToSource(e);let i=this.wtSettings.getSetting("columnHeaders").length;const s=this.wtSettings.getSetting("defaultRowHeight");let r,o,a;const l=this.wtSettings.getSetting("columnHeaderHeight")||[];for(;i;)i-=1,r=this.getColumnHeaderHeight(i),o=this.getColumnHeader(t,i),o&&(a=hu(o),(!r&&s<a||r<a)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=a),Array.isArray(l)?l[i]!==null&&l[i]!==void 0&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l[i]):isNaN(l)||(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l),this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]<(l[i]||l)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l[i]||l))}adjustColumnHeaderHeights(){const{wtSettings:e}=this,t=this.THEAD.childNodes,i=this.dataAccessObject.wtViewport.oversizedColumnHeaders,s=e.getSetting("columnHeaders");for(let r=0,o=s.length;r<o;r++)if(i[r]){if(!t[r]||t[r].childNodes.length===0)return;t[r].childNodes[0].style.height=`${i[r]}px`}}resetOversizedRows(){const{wtSettings:e}=this,{wtViewport:t}=this.dataAccessObject;if(!(!this.isMaster&&!this.is(Xo))&&!e.getSetting("externalRowCalculator")){const i=this.getRenderedRowsCount();for(let s=0;s<i;s++){const r=this.rowFilter.renderedToSource(s);t.oversizedRows&&t.oversizedRows[r]&&(t.oversizedRows[r]=void 0)}}}getCell(e){let t=e.row,i=e.col;const s=this.wtSettings.getSetting("onModifyGetCellCoords",t,i);if(s&&Array.isArray(s)&&([t,i]=s),this.isRowBeforeRenderedRows(t))return-1;if(this.isRowAfterRenderedRows(t))return-2;if(this.isColumnBeforeRenderedColumns(i))return-3;if(this.isColumnAfterRenderedColumns(i))return-4;const r=this.getRow(t);if(!r&&t>=0)throw new Error("TR was expected to be rendered but is not");const o=r.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(i)];if(!o&&i>=0)throw new Error("TD or TH was expected to be rendered but is not");return o}getRow(e){let t=null,i=null;if(e<0){var s;t=(s=this.rowFilter)===null||s===void 0?void 0:s.sourceRowToVisibleColHeadedRow(e),i=this.THEAD}else{var r;t=(r=this.rowFilter)===null||r===void 0?void 0:r.sourceToRendered(e),i=this.TBODY}return t!==void 0&&i!==void 0?i.childNodes.length<t+1?!1:i.childNodes[t]:!1}getColumnHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.THEAD.childNodes[t];return i==null?void 0:i.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]}getColumnHeaders(e){const t=[],i=this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e);return this.THEAD.childNodes.forEach(s=>{const r=s.childNodes[i];r&&t.push(r)}),t}getRowHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.wtSettings.getSetting("rowHeaders").length;if(t>=i)return;const s=this.rowFilter.sourceToRendered(e),r=s<0?this.rowFilter.sourceRowToVisibleColHeadedRow(e):s,a=(s<0?this.THEAD:this.TBODY).childNodes[r];return a==null?void 0:a.childNodes[t]}getRowHeaders(e){const t=[],i=this.wtSettings.getSetting("rowHeaders").length;for(let s=0;s<i;s++){const r=this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)],o=r==null?void 0:r.childNodes[s];o&&t.push(o)}return t}getCoords(e){let t=e;if(t.nodeName!=="TD"&&t.nodeName!=="TH"&&(t=Lc(t,["TD","TH"])),t===null)return null;const i=t.parentNode,s=i.parentNode;let r=DU(i),o=t.cellIndex;return Zl(Wu,t,this.wtRootElement)||Zl(Bu,t,this.wtRootElement)?s.nodeName==="THEAD"&&(r-=s.childNodes.length):Zl(Ac,t,this.wtRootElement)||Zl(Xo,t,this.wtRootElement)?r=this.wtSettings.getSetting("totalRows")-s.childNodes.length+r:s===this.THEAD?r=this.rowFilter.visibleColHeadedRowToSourceRow(r):r=this.rowFilter.renderedToSource(r),Zl(Wu,t,this.wtRootElement)||Zl(Vu,t,this.wtRootElement)||Zl(Ac,t,this.wtRootElement)?o=this.columnFilter.offsettedTH(o):o=this.columnFilter.visibleRowHeadedColumnToSourceColumn(o),this.wot.createCellCoords(r,o)}markOversizedRows(){if(this.wtSettings.getSetting("externalRowCalculator"))return;let e=this.TBODY.childNodes.length;const t=e*this.wtSettings.getSetting("defaultRowHeight"),i=hu(this.TBODY)-1;let s,r,o,a,l;if(!(t===i&&!this.wtSettings.getSetting("fixedRowsBottom")))for(;e;)e-=1,o=this.rowFilter.renderedToSource(e),s=this.getRowHeight(o),a=this.getTrForRow(o),l=a.querySelector("th"),l?r=hu(l):r=hu(a)-1,(!s&&this.wtSettings.getSetting("defaultRowHeight")<r||s<r)&&(r+=1,this.dataAccessObject.wtViewport.oversizedRows[o]=r)}getTrForRow(e){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)]}isColumnHeaderRendered(e){if(e>=0)return!1;const i=this.wtSettings.getSetting("rowHeaders").length;return Math.abs(e)<=i}isRowHeaderRendered(e){if(e>=0)return!1;const i=this.wtSettings.getSetting("columnHeaders").length;return Math.abs(e)<=i}isRowBeforeRenderedRows(e){const t=this.getFirstRenderedRow();return e<0&&t<=0?!this.isRowHeaderRendered(e):e<t}isRowAfterRenderedRows(e){return e>this.getLastRenderedRow()}isColumnBeforeRenderedColumns(e){const t=this.getFirstRenderedColumn();return e<0&&t<=0?!this.isColumnHeaderRendered(e):e<t}isColumnAfterRenderedColumns(e){return this.columnFilter&&e>this.getLastRenderedColumn()}isColumnAfterViewport(e){return this.columnFilter&&e>this.getLastVisibleColumn()}isRowAfterViewport(e){return this.rowFilter&&e>this.getLastVisibleRow()}isColumnBeforeViewport(e){return this.columnFilter&&this.columnFilter.sourceToRendered(e)<0&&e>=0}isLastRowFullyVisible(){return this.getLastVisibleRow()===this.getLastRenderedRow()}isLastColumnFullyVisible(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()}allRowsInViewport(){return this.wtSettings.getSetting("totalRows")===this.getVisibleRowsCount()}allColumnsInViewport(){return this.wtSettings.getSetting("totalColumns")===this.getVisibleColumnsCount()}getRowHeight(e){return this.rowUtils.getHeight(e)}getColumnHeaderHeight(e){return this.columnUtils.getHeaderHeight(e)}getColumnWidth(e){return this.columnUtils.getWidth(e)}getStretchedColumnWidth(e){return this.columnUtils.getStretchedColumnWidth(e)}hasDefinedSize(){return this.hasTableHeight&&this.hasTableWidth}getWidth(){return Qt(this.TABLE)}getHeight(){return $n(this.TABLE)}getTotalWidth(){const e=Qt(this.hider);return e!==0?e:this.getWidth()}getTotalHeight(){const e=$n(this.hider);return e!==0?e:this.getHeight()}isVisible(){return Lu(this.TABLE)}_modifyRowHeaderWidth(e){let t=Yt(e)?e():null;return Array.isArray(t)?(t=[...t],t[t.length-1]=this._correctRowHeaderWidth(t[t.length-1])):t=this._correctRowHeaderWidth(t),t}_correctRowHeaderWidth(e){let t=e;return typeof e!="number"&&(t=this.wtSettings.getSetting("defaultColumnWidth")),this.correctHeaderWidth&&(t+=1),t}};const Upe="stickyRowsBottom",PP={getFirstRenderedRow(){const n=this.wtSettings.getSetting("totalRows"),e=this.wtSettings.getSetting("fixedRowsBottom"),t=n-e;return n===0||e===0?-1:t<0?0:t},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.wtSettings.getSetting("totalRows")-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const n=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsBottom"),n)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return 0}};Ra(PP,"MIXIN_NAME",Upe,{writable:!1,enumerable:!1});const Ype="stickyColumnsStart",Q0={getFirstRenderedColumn(){return this.wtSettings.getSetting("totalColumns")===0?-1:0},getFirstVisibleColumn(){return this.getFirstRenderedColumn()},getFirstPartiallyVisibleColumn(){return this.getFirstRenderedColumn()},getLastRenderedColumn(){return this.getRenderedColumnsCount()-1},getLastVisibleColumn(){return this.getLastRenderedColumn()},getLastPartiallyVisibleColumn(){return this.getLastRenderedColumn()},getRenderedColumnsCount(){const n=this.wtSettings.getSetting("totalColumns");return Math.min(this.wtSettings.getSetting("fixedColumnsStart"),n)},getVisibleColumnsCount(){return this.getRenderedColumnsCount()},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};Ra(Q0,"MIXIN_NAME",Ype,{writable:!1,enumerable:!1});class IP extends ug{constructor(e,t,i,s){super(e,t,i,s,Ac)}}Lt(IP,PP);Lt(IP,Q0);const Bu="top",Xo="bottom",Vu="inline_start",Wu="top_inline_start_corner",Ac="bottom_inline_start_corner",DY=[Bu,Xo,Vu,Wu,Ac],Gpe=new Map([[Bu,`ht_clone_${Bu}`],[Xo,`ht_clone_${Xo}`],[Vu,`ht_clone_${Vu} ht_clone_left`],[Wu,`ht_clone_${Wu} ht_clone_top_left_corner`],[Ac,`ht_clone_${Ac} ht_clone_bottom_left_corner`]]);function Kpe(n,e){qpe(n,e),e.add(n)}function qpe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xpe(n,e,t){return(e=Qpe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qpe(n){var e=Zpe(n,"string");return typeof e=="symbol"?e:e+""}function Zpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ab(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var qg=new WeakSet;class Jpe{constructor(e){Kpe(this,qg),Xpe(this,"dataAccessObject",void 0),this.dataAccessObject=e}scrollViewport(e,t,i,s,r){const o=this.scrollViewportHorizontally(e.col,i,r),a=this.scrollViewportVertically(e.row,t,s);return o||a}scrollViewportHorizontally(e,t,i){const{drawn:s,totalColumns:r}=this.dataAccessObject;if(!s||!Number.isInteger(e)||e<0||e>r)return!1;const o=t===void 0&&i===void 0,{fixedColumnsStart:a,inlineStartOverlay:l}=this.dataAccessObject;if(o&&e<a||(e=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollHorizontally",e),!Number.isInteger(e)||e<0||e>r))return!1;const c=this.getFirstVisibleColumn(),h=this.getLastVisibleColumn();let u=!1;return(o&&(e<c||e>h)||!o)&&(u=l.scrollTo(e,o?e>=this.getLastPartiallyVisibleColumn():t)),u}scrollViewportVertically(e,t,i){const{drawn:s,totalRows:r}=this.dataAccessObject;if(!s||!Number.isInteger(e)||e<0||e>r)return!1;const o=t===void 0&&i===void 0,{fixedRowsBottom:a,fixedRowsTop:l,topOverlay:c}=this.dataAccessObject;if(o&&(e<l||e>r-a-1)||(e=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollVertically",e),!Number.isInteger(e)||e<0||e>r))return!1;const h=this.getFirstVisibleRow(),u=this.getLastVisibleRow();let d=!1;return(o&&(e<h||e>u)||!o)&&(d=c.scrollTo(e,o?e>=this.getLastPartiallyVisibleRow():i)),d}getFirstVisibleRow(){return this.dataAccessObject.wtTable.getFirstVisibleRow()}getLastVisibleRow(){return ab(qg,this,YL).call(this,this.dataAccessObject.wtTable.getLastVisibleRow())}getFirstPartiallyVisibleRow(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleRow()}getLastPartiallyVisibleRow(){return ab(qg,this,YL).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleRow())}getFirstVisibleColumn(){return this.dataAccessObject.wtTable.getFirstVisibleColumn()}getLastVisibleColumn(){return ab(qg,this,UL).call(this,this.dataAccessObject.wtTable.getLastVisibleColumn())}getFirstPartiallyVisibleColumn(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleColumn()}getLastPartiallyVisibleColumn(){return ab(qg,this,UL).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleColumn())}}function UL(n){const{wtSettings:e,inlineStartOverlay:t,wtTable:i,wtViewport:s,totalColumns:r,rootWindow:o}=this.dataAccessObject;if(t.mainTableScrollableElement===o){const a=e.getSetting("rtlMode");let l=null;if(a){const h=i.TABLE.getBoundingClientRect(),d=this.dataAccessObject.rootWindow.document.documentElement.offsetWidth;l=Math.abs(h.right-d)}else l=li(i.wtRootElement).left;const c=Math.abs(lP(o,o));if(l>c){const h=cP(o);let u=s.getRowHeaderWidth();for(let d=1;d<=r;d++)if(u+=t.sumCellSizes(d-1,d),l+u-c>=h){n=d-2;break}}}return n}function YL(n){const{topOverlay:e,wtTable:t,wtViewport:i,totalRows:s,rootWindow:r}=this.dataAccessObject;if(e.mainTableScrollableElement===r){const o=li(t.wtRootElement),a=V0(r,r);if(o.top>a){const l=hu(r);let c=i.getColumnHeaderHeight();for(let h=1;h<=s;h++)if(c+=e.sumCellSizes(h-1,h),o.top+c-a>=l){n=h-2;break}}}return n}function Lr(n,e,t){return(e=ewe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ewe(n){var e=twe(n,"string");return typeof e=="symbol"?e:e+""}function twe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class OP{get eventManager(){return new Er(this)}constructor(e,t){Lr(this,"wtTable",void 0),Lr(this,"wtScroll",void 0),Lr(this,"wtViewport",void 0),Lr(this,"wtOverlays",void 0),Lr(this,"selectionManager",void 0),Lr(this,"wtEvent",void 0),Lr(this,"guid",`wt_${tP()}`),Lr(this,"drawInterrupted",!1),Lr(this,"drawn",!1),Lr(this,"domBindings",void 0),Lr(this,"wtSettings",void 0),this.domBindings={rootTable:e,rootDocument:e.ownerDocument,rootWindow:e.ownerDocument.defaultView},this.wtSettings=t,this.wtScroll=new Jpe(this.createScrollDao())}findOriginalHeaders(){const e=[];if(this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(let t=0,i=this.wtTable.THEAD.childNodes[0].childNodes.length;t<i;t++)e.push(this.wtTable.THEAD.childNodes[0].childNodes[t].innerHTML);this.wtSettings.getSetting("columnHeaders").length||this.wtSettings.update("columnHeaders",[function(t,i){$c(i,e[t])}])}}createCellCoords(e,t){return new Fu(e,t,this.wtSettings.getSetting("rtlMode"))}createCellRange(e,t,i){return new Zw(e,t,i,this.wtSettings.getSetting("rtlMode"))}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.drawInterrupted=!1,this.wtTable.isVisible()?this.wtTable.draw(e):this.drawInterrupted=!0,this}getCell(e){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1))return this.wtTable.getCell(e);const i=this.wtSettings.getSetting("totalRows"),s=this.wtSettings.getSetting("fixedRowsTop"),r=this.wtSettings.getSetting("fixedRowsBottom"),o=this.wtSettings.getSetting("fixedColumnsStart");if(e.row<s&&e.col<o)return this.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.getCell(e);if(e.row<s)return this.wtOverlays.topOverlay.clone.wtTable.getCell(e);if(e.col<o&&e.row>=i-r){if(this.wtOverlays.bottomInlineStartCornerOverlay&&this.wtOverlays.bottomInlineStartCornerOverlay.clone)return this.wtOverlays.bottomInlineStartCornerOverlay.clone.wtTable.getCell(e)}else{if(e.col<o)return this.wtOverlays.inlineStartOverlay.clone.wtTable.getCell(e);if(e.row<i&&e.row>=i-r&&this.wtOverlays.bottomOverlay&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(e)}return this.wtTable.getCell(e)}scrollViewport(e,t,i,s,r){return e.col<0||e.row<0?!1:this.wtScroll.scrollViewport(e,t,i,s,r)}scrollViewportHorizontally(e,t,i){return e<0?!1:this.wtScroll.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return e<0?!1:this.wtScroll.scrollViewportVertically(e,t,i)}getViewport(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]}destroy(){this.wtOverlays.destroy(),this.wtEvent.destroy()}createScrollDao(){const e=this;return{get drawn(){return e.drawn},get topOverlay(){return e.wtOverlays.topOverlay},get inlineStartOverlay(){return e.wtOverlays.inlineStartOverlay},get wtTable(){return e.wtTable},get wtViewport(){return e.wtViewport},get wtSettings(){return e.wtSettings},get rootWindow(){return e.domBindings.rootWindow},get totalRows(){return e.wtSettings.getSetting("totalRows")},get totalColumns(){return e.wtSettings.getSetting("totalColumns")},get fixedRowsTop(){return e.wtSettings.getSetting("fixedRowsTop")},get fixedRowsBottom(){return e.wtSettings.getSetting("fixedRowsBottom")},get fixedColumnsStart(){return e.wtSettings.getSetting("fixedColumnsStart")}}}getTableDao(){const e=this;return{get wot(){return e},get parentTableOffset(){return e.cloneSource.wtTable.tableOffset},get cloneSource(){return e.cloneSource},get workspaceWidth(){return e.wtViewport.getWorkspaceWidth()},get wtViewport(){return e.wtViewport},get wtOverlays(){return e.wtOverlays},get selectionManager(){return e.selectionManager},get drawn(){return e.drawn},set drawn(t){e.drawn=t},get wtTable(){return e.wtTable},get startColumnRendered(){return e.wtViewport.columnsRenderCalculator.startColumn},get startColumnVisible(){return e.wtViewport.columnsVisibleCalculator.startColumn},get startColumnPartiallyVisible(){return e.wtViewport.columnsPartiallyVisibleCalculator.startColumn},get endColumnRendered(){return e.wtViewport.columnsRenderCalculator.endColumn},get endColumnVisible(){return e.wtViewport.columnsVisibleCalculator.endColumn},get endColumnPartiallyVisible(){return e.wtViewport.columnsPartiallyVisibleCalculator.endColumn},get countColumnsRendered(){return e.wtViewport.columnsRenderCalculator.count},get countColumnsVisible(){return e.wtViewport.columnsVisibleCalculator.count},get startRowRendered(){return e.wtViewport.rowsRenderCalculator.startRow},get startRowVisible(){return e.wtViewport.rowsVisibleCalculator.startRow},get startRowPartiallyVisible(){return e.wtViewport.rowsPartiallyVisibleCalculator.startRow},get endRowRendered(){return e.wtViewport.rowsRenderCalculator.endRow},get endRowVisible(){return e.wtViewport.rowsVisibleCalculator.endRow},get endRowPartiallyVisible(){return e.wtViewport.rowsPartiallyVisibleCalculator.endRow},get countRowsRendered(){return e.wtViewport.rowsRenderCalculator.count},get countRowsVisible(){return e.wtViewport.rowsVisibleCalculator.count},get columnHeaders(){return e.wtSettings.getSetting("columnHeaders")},get rowHeaders(){return e.wtSettings.getSetting("rowHeaders")}}}}function GL(n,e,t){return(e=nwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nwe(n){var e=iwe(n,"string");return typeof e=="symbol"?e:e+""}function iwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class swe extends OP{constructor(e,t,i){super(e,t),GL(this,"cloneSource",void 0),GL(this,"cloneOverlay",void 0);const s=this.wtSettings.getSetting("facade",this);this.cloneSource=i.source,this.cloneOverlay=i.overlay,this.wtTable=this.cloneOverlay.createTable(this.getTableDao(),s,this.domBindings,this.wtSettings),this.wtViewport=i.viewport,this.selectionManager=i.selectionManager,this.wtEvent=new IY(s,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager,i.event),this.findOriginalHeaders()}}function rwe(n,e,t){return(e=owe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function owe(n){var e=awe(n,"string");return typeof e=="symbol"?e:e+""}function awe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ev{constructor(e,t,i,s,r){rwe(this,"wtSettings",null),Ra(this,"wot",e,{writable:!1}),this.domBindings=r,this.facadeGetter=t,this.wtSettings=s;const{TABLE:o,hider:a,spreader:l,holder:c,wtRootElement:h}=this.wot.wtTable;this.instance=this.wot,this.type=i,this.mainTableScrollableElement=null,this.TABLE=o,this.hider=a,this.spreader=l,this.holder=c,this.wtRootElement=h,this.trimmingContainer=$u(this.hider.parentNode.parentNode),this.needFullRender=this.shouldBeRendered(),this.clone=this.makeClone()}hasRenderingStateChanged(){return this.needFullRender!==this.shouldBeRendered()}updateStateOfRendering(e){e==="before"&&this.shouldBeRendered()?this.needFullRender=!0:e==="after"&&!this.shouldBeRendered()&&(this.needFullRender=!1)}shouldBeRendered(){return!0}updateTrimmingContainer(){this.trimmingContainer=$u(this.hider.parentNode.parentNode)}updateMainScrollableElement(){const{wtTable:e}=this.wot,{rootWindow:t}=this.domBindings;t.getComputedStyle(e.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden"?this.mainTableScrollableElement=this.wot.wtTable.holder:this.mainTableScrollableElement=sw(e.TABLE)}getRelativeCellPosition(e,t,i){if(this.clone.wtTable.holder.contains(e)===!1){Dt(`The provided element is not a child of the ${this.type} overlay`);return}const s=this.mainTableScrollableElement===this.domBindings.rootWindow,r=i<this.wtSettings.getSetting("fixedColumnsStart"),o=t<this.wtSettings.getSetting("fixedRowsTop"),a=t>=this.wtSettings.getSetting("totalRows")-this.wtSettings.getSetting("fixedRowsBottom"),l=this.clone.wtTable.spreader,c={start:this.getRelativeStartPosition(l),top:l.offsetTop},h={start:this.getRelativeStartPosition(e),top:e.offsetTop};let u=null;return s?u=this.getRelativeCellPositionWithinWindow(o,r,h,c):u=this.getRelativeCellPositionWithinHolder(o,a,r,h,c),u}getRelativeStartPosition(e){return this.isRtl()?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:e.offsetLeft}getRelativeCellPositionWithinWindow(e,t,i,s){const r=this.wot.wtTable.wtRootElement.getBoundingClientRect();let o=0,a=0;if(!t)o=s.start;else{let l=r.left;this.isRtl()&&(l=this.domBindings.rootWindow.innerWidth-(r.left+r.width+ui())),o=l<=0?-1*l:0}return e?a=this.clone.wtTable.TABLE.getBoundingClientRect().top-r.top:a=s.top,{start:i.start+o,top:i.top+a}}getRelativeCellPositionWithinHolder(e,t,i,s,r){const o={horizontal:this.wot.wtOverlays.inlineStartOverlay.getScrollPosition(),vertical:this.wot.wtOverlays.topOverlay.getScrollPosition()};let a=0,l=0;if(i||(a=o.horizontal-r.start),t){const c=this.wot.wtTable.wtRootElement.getBoundingClientRect();l=this.clone.wtTable.TABLE.getBoundingClientRect().top*-1+c.top}else e||(l=o.vertical-r.top);return{start:s.start-a,top:s.top-l}}makeClone(){if(DY.indexOf(this.type)===-1)throw new Error(`Clone type "${this.type}" is not supported.`);const{wtTable:e,wtSettings:t}=this.wot,{rootDocument:i,rootWindow:s}=this.domBindings,r=i.createElement("div"),o=i.createElement("table"),a=e.wtRootElement.parentNode;r.className=`${Gpe.get(this.type)} handsontable`,r.setAttribute("dir",this.isRtl()?"rtl":"ltr"),r.style.position="absolute",r.style.top=0,r.style.overflow="visible",this.isRtl()?r.style.right=0:r.style.left=0,t.getSetting("ariaTags")&&$e(r,[ea()]),o.className=e.TABLE.className,e.TABLE.getAttribute("role")&&o.setAttribute("role",e.TABLE.getAttribute("role")),r.appendChild(o),a.appendChild(r);const c=this.wtSettings.getSetting("preventOverflow");return c===!0||c==="horizontal"&&this.type===Bu||c==="vertical"&&this.type===Vu?this.mainTableScrollableElement=s:s.getComputedStyle(a).getPropertyValue("overflow")==="hidden"?this.mainTableScrollableElement=e.holder:this.mainTableScrollableElement=sw(e.TABLE),new swe(o,this.wtSettings,{source:this.wot,overlay:this,viewport:this.wot.wtViewport,event:this.wot.wtEvent,selectionManager:this.wot.selectionManager})}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.needFullRender&&this.clone.draw(e)}reset(){const e=this.clone.wtTable.holder,t=this.clone.wtTable.hider,i=e.style,s=t.style,r=e.parentNode.style;[i,s,r].forEach(o=>{o.width="",o.height=""})}isRtl(){return this.wtSettings.getSetting("rtlMode")}destroy(){this.clone.eventManager.destroy()}}class lwe extends ev{constructor(e,t,i,s,r,o){super(e,t,Ac,i,s),this.bottomOverlay=r,this.inlineStartOverlay=o}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new IP(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wot:e}=this;if(this.updateTrimmingContainer(),!e.wtTable.holder.parentNode)return!1;const t=this.clone.wtTable.holder.parentNode;if(t.style.top="",this.trimmingContainer===this.domBindings.rootWindow){const r=this.inlineStartOverlay.getOverlayOffset(),o=this.bottomOverlay.getOverlayOffset();t.style[this.isRtl()?"right":"left"]=`${r}px`,t.style.bottom=`${o}px`}else Kw(t),this.repositionOverlay();let i=$n(this.clone.wtTable.TABLE);const s=Qt(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(i=0),t.style.height=`${i}px`,t.style.width=`${s}px`,!1}repositionOverlay(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i}=this.domBindings,s=this.clone.wtTable.holder.parentNode;let r=0;t.hasVerticalScroll()||(r+=t.getWorkspaceHeight()-e.getTotalHeight()),t.hasVerticalScroll()&&t.hasHorizontalScroll()&&(r+=ui(i)),s.style.bottom=`${r}px`}}const cwe="calculatedColumns",Z0={getFirstRenderedColumn(){const n=this.dataAccessObject.startColumnRendered;return n===null?-1:n},getFirstVisibleColumn(){const n=this.dataAccessObject.startColumnVisible;return n===null?-1:n},getFirstPartiallyVisibleColumn(){const n=this.dataAccessObject.startColumnPartiallyVisible;return n===null?-1:n},getLastRenderedColumn(){const n=this.dataAccessObject.endColumnRendered;return n===null?-1:n},getLastVisibleColumn(){const n=this.dataAccessObject.endColumnVisible;return n===null?-1:n},getLastPartiallyVisibleColumn(){const n=this.dataAccessObject.endColumnPartiallyVisible;return n===null?-1:n},getRenderedColumnsCount(){return this.dataAccessObject.countColumnsRendered},getVisibleColumnsCount(){return this.dataAccessObject.countColumnsVisible},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};Ra(Z0,"MIXIN_NAME",cwe,{writable:!1,enumerable:!1});class kP extends ug{constructor(e,t,i,s){super(e,t,i,s,Xo)}}Lt(kP,PP);Lt(kP,Z0);function hwe(n,e,t){return(e=uwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uwe(n){var e=dwe(n,"string");return typeof e=="symbol"?e:e+""}function dwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class fwe extends ev{constructor(e,t,i,s){super(e,t,Xo,i,s),hwe(this,"cachedFixedRowsBottom",-1),this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom")}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new kP(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const{rootWindow:e}=this.domBindings,t=this.clone.wtTable.holder.parentNode;t.style.top="";let i=0;const s=this.wtSettings.getSetting("preventOverflow");this.trimmingContainer===e&&(!s||s!=="vertical")?(i=this.getOverlayOffset(),t.style.bottom=`${i}px`):(i=this.getScrollPosition(),this.repositionOverlay());const r=this.adjustHeaderBordersPosition(i);return this.adjustElementsSize(),r}repositionOverlay(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i}=this.domBindings,s=this.clone.wtTable.holder.parentNode;let r=0;t.hasVerticalScroll()||(r+=t.getWorkspaceHeight()-e.getTotalHeight()),t.hasVerticalScroll()&&t.hasHorizontalScroll()&&(r+=ui(i)),s.style.bottom=`${r}px`}setScrollPosition(e){const{rootWindow:t}=this.domBindings;let i=!1;return this.mainTableScrollableElement===t?(t.scrollTo(B0(t),e),i=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(e,t){const{wtTable:i,wtSettings:s}=this.wot,r=s.getSetting("defaultRowHeight");let o=e,a=0;for(;o<t;){const l=i.getRowHeight(o);a+=l===void 0?r:l,o+=1}return a}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i,rootWindow:s}=this.domBindings,r=ui(i),a=this.clone.wtTable.holder.parentNode.style,l=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==s||l==="horizontal"){let h=t.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(h-=r),h=Math.min(h,e.wtRootElement.scrollWidth),a.width=`${h}px`}else a.width="";this.clone.wtTable.holder.style.width=a.width;let c=$n(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(c=0),a.height=`${c}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=e.parentNode.style.height}applyToDOM(){const e=this.wtSettings.getSetting("totalRows");if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number")this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style.top="0";else throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const e=this.isRtl()?"right":"left",{spreader:t}=this.clone.wtTable;typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number"?t.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:t.style[e]=""}scrollTo(e,t){let i=this.getTableParentOffset();const r=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder;let o=0;t&&r.offsetHeight!==r.clientHeight&&(o=ui(this.domBindings.rootDocument)),t?(i+=this.sumCellSizes(0,e+1),i-=this.wot.wtViewport.getViewportHeight(),i+=1):i+=this.sumCellSizes(this.wtSettings.getSetting("fixedRowsBottom"),e),i+=o,this.setScrollPosition(i)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return V0(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="vertical")){const s=this.wot.wtTable.getTotalHeight(),r=this.clone.wtTable.getTotalHeight(),o=s-r,a=this.domBindings.rootDocument.documentElement.clientHeight;i=Math.max(this.getTableParentOffset()-this.getScrollPosition()-a+s,0),i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){const t=this.wtSettings.getSetting("fixedRowsBottom"),i=this.cachedFixedRowsBottom!==t,s=this.wtSettings.getSetting("columnHeaders");let r=!1;if((i||t===0)&&s.length>0){const o=this.wot.wtTable.holder.parentNode,a=Fe(o,"innerBorderBottom");this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom"),e||this.wtSettings.getSetting("totalRows")===0?(ae(o,"innerBorderBottom"),r=!a):(ze(o,"innerBorderBottom"),r=a)}return r}}const gwe="calculatedRows",HP={getFirstRenderedRow(){const n=this.dataAccessObject.startRowRendered;return n===null?-1:n},getFirstVisibleRow(){const n=this.dataAccessObject.startRowVisible;return n===null?-1:n},getFirstPartiallyVisibleRow(){const n=this.dataAccessObject.startRowPartiallyVisible;return n===null?-1:n},getLastRenderedRow(){const n=this.dataAccessObject.endRowRendered;return n===null?-1:n},getLastVisibleRow(){const n=this.dataAccessObject.endRowVisible;return n===null?-1:n},getLastPartiallyVisibleRow(){const n=this.dataAccessObject.endRowPartiallyVisible;return n===null?-1:n},getRenderedRowsCount(){return this.dataAccessObject.countRowsRendered},getVisibleRowsCount(){return this.dataAccessObject.countRowsVisible},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};Ra(HP,"MIXIN_NAME",gwe,{writable:!1,enumerable:!1});class DP extends ug{constructor(e,t,i,s){super(e,t,i,s,Vu)}}Lt(DP,HP);Lt(DP,Q0);const mwe="localHooks",Mi={_localHooks:Object.create(null),addLocalHook(n,e){return this._localHooks[n]||(this._localHooks[n]=[]),this._localHooks[n].push(e),this},runLocalHooks(n,e,t,i,s,r,o){if(this._localHooks[n]){const a=this._localHooks[n].length;for(let l=0;l<a;l++)qC(this._localHooks[n][l],this,e,t,i,s,r,o)}},clearLocalHooks(){return this._localHooks={},this}};Ra(Mi,"MIXIN_NAME",mwe,{writable:!1,enumerable:!1});let NY=class{constructor(e,t){this.settings=e,this.cellRange=t||null}isEmpty(){return this.cellRange===null}add(e){return this.isEmpty()?this.cellRange=this.settings.createCellRange(e):this.cellRange.expand(e),this}replace(e,t){if(!this.isEmpty()){if(this.cellRange.from.isEqual(e))return this.cellRange.from=t,!0;if(this.cellRange.to.isEqual(e))return this.cellRange.to=t,!0}return!1}clear(){return this.cellRange=null,this}getCorners(){const e=this.cellRange.getOuterTopStartCorner(),t=this.cellRange.getOuterBottomEndCorner();return[e.row,e.col,t.row,t.col]}destroy(){this.runLocalHooks("destroy")}};Lt(NY,Mi);const LY="active-header",NP="header",LP="area",$P="focus",pwe="fill",wwe="row",vwe="column",bwe="custom-selection",FP=Object.freeze({width:"6px",height:"6px",borderWidth:"1px",borderStyle:"solid",borderColor:"#FFF"});var ywe=CP;ywe("flat");function Cwe(n,e){$Y(n,e),e.add(n)}function KL(n,e,t){$Y(n,e),e.set(n,t)}function $Y(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fn(n,e){return n.get(wp(n,e))}function qL(n,e,t){return n.set(wp(n,e),t),t}function wp(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var $r=new WeakMap,ms=new WeakMap,lb=new WeakSet;class Swe{constructor(){Cwe(this,lb),KL(this,$r,void 0),KL(this,ms,void 0)}setActiveOverlay(e){return qL(ms,this,e),this}setActiveSelection(e){return qL($r,this,e),this}scan(){const e=Fn($r,this).settings.selectionType,t=new Set;return e==="active-header"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i))):e==="area"?this.scanCellsRange(i=>t.add(i)):e==="focus"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i)),this.scanCellsRange(i=>t.add(i))):e==="fill"?this.scanCellsRange(i=>t.add(i)):e==="header"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i))):e==="row"?(this.scanRowsInHeadersRange(i=>t.add(i)),this.scanRowsInCellsRange(i=>t.add(i))):e==="column"&&(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanColumnsInCellsRange(i=>t.add(i))),t}scanColumnsInHeadersRange(e){const[t,i,s,r]=Fn($r,this).getCorners(),{wtTable:o}=Fn(ms,this),a=o.getRenderedColumnsCount(),l=o.getColumnHeadersCount();let c=0;for(let h=-o.getRowHeadersCount();h<a;h++){const u=o.columnFilter.renderedToSource(h);if(!(u<i||u>r)){for(let d=-l;d<0;d++){if(d<t||d>s)continue;const f=d+l;let g=o.getColumnHeader(u,f);const m=Fn(ms,this).getSetting("onBeforeHighlightingColumnHeader",u,f,{selectionType:Fn($r,this).settings.selectionType,columnCursor:c,selectionWidth:r-i+1});m!==null&&(m!==u&&(g=o.getColumnHeader(m,f)),e(g))}c+=1}}}scanRowsInHeadersRange(e){const[t,i,s,r]=Fn($r,this).getCorners(),{wtTable:o}=Fn(ms,this),a=o.getRenderedRowsCount(),l=o.getRowHeadersCount();let c=0;for(let h=-o.getColumnHeadersCount();h<a;h++){const u=o.rowFilter.renderedToSource(h);if(!(u<t||u>s)){for(let d=-l;d<0;d++){if(d<i||d>r)continue;const f=d+l;let g=o.getRowHeader(u,f);const m=Fn(ms,this).getSetting("onBeforeHighlightingRowHeader",u,f,{selectionType:Fn($r,this).settings.selectionType,rowCursor:c,selectionHeight:s-t+1});m!==null&&(m!==u&&(g=o.getRowHeader(m,f)),e(g))}c+=1}}}scanCellsRange(e){const[t,i,s,r]=Fn($r,this).getCorners(),{wtTable:o}=Fn(ms,this);wp(lb,this,hx).call(this,(a,l)=>{if(a>=t&&a<=s&&l>=i&&l<=r){const c=o.getCell(Fn(ms,this).createCellCoords(a,l)),h=Fn(ms,this).getSetting("onAfterDrawSelection",a,l,Fn($r,this).settings.layerLevel);typeof h=="string"&&ae(c,h),e(c)}})}scanRowsInCellsRange(e){const[t,,i]=Fn($r,this).getCorners(),{wtTable:s}=Fn(ms,this);wp(lb,this,hx).call(this,(r,o)=>{if(r>=t&&r<=i){const a=s.getCell(Fn(ms,this).createCellCoords(r,o));e(a)}})}scanColumnsInCellsRange(e){const[,t,,i]=Fn($r,this).getCorners(),{wtTable:s}=Fn(ms,this);wp(lb,this,hx).call(this,(r,o)=>{if(o>=t&&o<=i){const a=s.getCell(Fn(ms,this).createCellCoords(r,o));e(a)}})}}function hx(n){const{wtTable:e}=Fn(ms,this),t=e.getRenderedRowsCount(),i=e.getRenderedColumnsCount();for(let s=0;s<t;s+=1){const r=e.rowFilter.renderedToSource(s);for(let o=0;o<i;o+=1)n(r,e.columnFilter.renderedToSource(o))}}class XL{constructor(e,t){t&&(this.eventManager=e.eventManager,this.instance=e,this.wot=e,this.settings=t,this.mouseDown=!1,this.main=null,this.top=null,this.bottom=null,this.start=null,this.end=null,this.topStyle=null,this.bottomStyle=null,this.startStyle=null,this.endStyle=null,this.cornerDefaultStyle=FP,this.cornerCenterPointOffset=-(parseInt(this.cornerDefaultStyle.width,10)/2),this.corner=null,this.cornerStyle=null,this.createBorders(t),this.registerListeners())}registerListeners(){const e=this.wot.rootDocument.body;this.eventManager.addEventListener(e,"mousedown",()=>this.onMouseDown()),this.eventManager.addEventListener(e,"mouseup",()=>this.onMouseUp());for(let t=0,i=this.main.childNodes.length;t<i;t++){const s=this.main.childNodes[t];this.eventManager.addEventListener(s,"mouseenter",r=>this.onMouseEnter(r,this.main.childNodes[t]))}}onMouseDown(){this.mouseDown=!0}onMouseUp(){this.mouseDown=!1}onMouseEnter(e,t){if(!this.mouseDown||!this.wot.getSetting("hideBorderOnMouseDownOver"))return;e.preventDefault(),Ar(e);const i=this,s=this.wot.rootDocument.body,r=t.getBoundingClientRect();t.style.display="none";function o(l){if(l.clientY<Math.floor(r.top)||l.clientY>Math.ceil(r.top+r.height)||l.clientX<Math.floor(r.left)||l.clientX>Math.ceil(r.left+r.width))return!0}function a(l){o(l)&&(i.eventManager.removeEventListener(s,"mousemove",a),t.style.display="block")}this.eventManager.addEventListener(s,"mousemove",a)}createBorders(e){const{rootDocument:t}=this.wot;this.main=t.createElement("div");const i=["top","start","bottom","end","corner"];let s=this.main.style;s.position="absolute",s.top=0,s.left=0;for(let a=0;a<5;a++){const l=i[a],c=t.createElement("div");c.className=`wtBorder ${this.settings.className||""}`,this.settings[l]&&this.settings[l].hide&&(c.className+=" hidden"),s=c.style,s.backgroundColor=this.settings[l]&&this.settings[l].color?this.settings[l].color:e.border.color,s.height=this.settings[l]&&this.settings[l].width?`${this.settings[l].width}px`:`${e.border.width}px`,s.width=this.settings[l]&&this.settings[l].width?`${this.settings[l].width}px`:`${e.border.width}px`,this.main.appendChild(c)}this.top=this.main.childNodes[0],this.start=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.end=this.main.childNodes[3],this.topStyle=this.top.style,this.startStyle=this.start.style,this.bottomStyle=this.bottom.style,this.endStyle=this.end.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),hl()&&this.instance.getSetting("isDataViewInstance")&&this.createMultipleSelectorHandles(),this.disappear();const{wtTable:r}=this.wot;let o=r.bordersHolder;o||(o=t.createElement("div"),o.className="htBorders",r.bordersHolder=o,r.spreader.appendChild(o)),o.appendChild(this.main)}createMultipleSelectorHandles(){const{rootDocument:e}=this.wot;this.selectionHandles={top:e.createElement("DIV"),topHitArea:e.createElement("DIV"),bottom:e.createElement("DIV"),bottomHitArea:e.createElement("DIV")};const t=10,i=40;this.selectionHandles.top.className="topSelectionHandle topLeftSelectionHandle",this.selectionHandles.topHitArea.className="topSelectionHandle-HitArea topLeftSelectionHandle-HitArea",this.selectionHandles.bottom.className="bottomSelectionHandle bottomRightSelectionHandle",this.selectionHandles.bottomHitArea.className="bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={top:this.selectionHandles.top.style,topHitArea:this.selectionHandles.topHitArea.style,bottom:this.selectionHandles.bottom.style,bottomHitArea:this.selectionHandles.bottomHitArea.style};const s={position:"absolute",height:`${i}px`,width:`${i}px`,"border-radius":`${parseInt(i/1.5,10)}px`};et(s,(o,a)=>{this.selectionHandles.styles.bottomHitArea[a]=o,this.selectionHandles.styles.topHitArea[a]=o});const r={position:"absolute",height:`${t}px`,width:`${t}px`,"border-radius":`${parseInt(t/1.5,10)}px`,background:"#F5F5FF",border:"1px solid #4285c8"};et(r,(o,a)=>{this.selectionHandles.styles.bottom[a]=o,this.selectionHandles.styles.top[a]=o}),this.main.appendChild(this.selectionHandles.top),this.main.appendChild(this.selectionHandles.bottom),this.main.appendChild(this.selectionHandles.topHitArea),this.main.appendChild(this.selectionHandles.bottomHitArea)}isPartRange(e,t){const i=this.wot.selectionManager.getAreaSelection();return!!(i.cellRange&&(e!==i.cellRange.to.row||t!==i.cellRange.to.col))}updateMultipleSelectionHandlesPosition(e,t,i,s,r,o){const l=this.wot.wtSettings.getSetting("rtlMode")?"right":"left",{top:c,topHitArea:h,bottom:u,bottomHitArea:d}=this.selectionHandles.styles,f=parseInt(c.borderWidth,10),g=parseInt(c.width,10),m=parseInt(h.width,10),w=this.wot.wtTable.getWidth(),v=this.wot.wtTable.getHeight();c.top=`${parseInt(i-g-1,10)}px`,c[l]=`${parseInt(s-g-1,10)}px`,h.top=`${parseInt(i-m/4*3,10)}px`,h[l]=`${parseInt(s-m/4*3,10)}px`;const C=Math.min(parseInt(s+r,10),w-g-f*2),S=Math.min(parseInt(s+r-m/4,10),w-m-f*2);u[l]=`${C}px`,d[l]=`${S}px`;const x=Math.min(parseInt(i+o,10),v-g-f*2),_=Math.min(parseInt(i+o-m/4,10),v-m-f*2);u.top=`${x}px`,d.top=`${_}px`,this.settings.border.cornerVisible&&this.settings.border.cornerVisible()?(c.display="block",h.display="block",this.isPartRange(e,t)?(u.display="none",d.display="none"):(u.display="block",d.display="block")):(c.display="none",u.display="none",h.display="none",d.display="none"),e===this.wot.wtSettings.getSetting("fixedRowsTop")||t===this.wot.wtSettings.getSetting("fixedColumnsStart")?(c.zIndex="9999",h.zIndex="9999"):(c.zIndex="",h.zIndex="")}appear(e){if(this.disabled)return;const{wtTable:t,rootDocument:i,rootWindow:s}=this.wot;let r,o,a,l,c,h;const u=t.getRenderedRowsCount();for(let oe=0;oe<u;oe+=1){const J=t.rowFilter.renderedToSource(oe);if(J>=e[0]&&J<=e[2]){r=J,c=e[0];break}}for(let oe=u-1;oe>=0;oe-=1){const J=t.rowFilter.renderedToSource(oe);if(J>=e[0]&&J<=e[2]){o=J;break}}const d=t.getRenderedColumnsCount();for(let oe=0;oe<d;oe+=1){const J=t.columnFilter.renderedToSource(oe);if(J>=e[1]&&J<=e[3]){a=J,h=e[1];break}}for(let oe=d-1;oe>=0;oe-=1){const J=t.columnFilter.renderedToSource(oe);if(J>=e[1]&&J<=e[3]){l=J;break}}if(r===void 0||a===void 0){this.disappear();return}let f=t.getCell(this.wot.createCellCoords(r,a));const g=r!==o||a!==l,m=g?t.getCell(this.wot.createCellCoords(o,l)):f,w=li(f),v=g?li(m):w,C=li(t.TABLE),S=Qt(t.TABLE),x=w.top,_=w.left,R=this.wot.wtSettings.getSetting("rtlMode");let M=0,O=0;if(R){const oe=Qt(f),J=s.innerWidth-C.left-S;O=_+oe-v.left,M=s.innerWidth-_-oe-J-1}else O=v.left+Qt(m)-_,M=_-C.left-1;if(this.isEntireColumnSelected(r,o)){const oe=this.getDimensionsFromHeader("columns",a,l,c,C);let J=null;oe&&([J,M,O]=oe),J&&(f=J)}let P=x-C.top-1,k=v.top+$n(m)-x;if(this.isEntireRowSelected(a,l)){const oe=this.getDimensionsFromHeader("rows",r,o,h,C);let J=null;oe&&([J,P,k]=oe),J&&(f=J)}const B=da(f,s);parseInt(B.borderTopWidth,10)>0&&(P+=1,k=k>0?k-1:0),parseInt(B[R?"borderRightWidth":"borderLeftWidth"],10)>0&&(M+=1,O=O>0?O-1:0);const z=R?"right":"left";this.topStyle.top=`${P}px`,this.topStyle[z]=`${M}px`,this.topStyle.width=`${O}px`,this.topStyle.display="block",this.startStyle.top=`${P}px`,this.startStyle[z]=`${M}px`,this.startStyle.height=`${k}px`,this.startStyle.display="block";const Q=Math.floor(this.settings.border.width/2);this.bottomStyle.top=`${P+k-Q}px`,this.bottomStyle[z]=`${M}px`,this.bottomStyle.width=`${O}px`,this.bottomStyle.display="block",this.endStyle.top=`${P}px`,this.endStyle[z]=`${M+O-Q}px`,this.endStyle.height=`${k+1}px`,this.endStyle.display="block";let te=this.settings.border.cornerVisible;te=typeof te=="function"?te(this.settings.layerLevel):te;const ne=this.wot.getSetting("onModifyGetCellCoords",o,l);let[j,ie]=[o,l];if(ne&&Array.isArray(ne)&&([,,j,ie]=ne),hl()||!te||this.isPartRange(j,ie))this.cornerStyle.display="none";else{this.cornerStyle.top=`${P+k+this.cornerCenterPointOffset-1}px`,this.cornerStyle[z]=`${M+O+this.cornerCenterPointOffset-1}px`,this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none";let oe=$u(t.TABLE);const J=oe===s;J&&(oe=i.documentElement);const pe=parseInt(this.cornerDefaultStyle.width,10)/2,p=parseInt(this.cornerDefaultStyle.height,10)/2;if(l===this.wot.getSetting("totalColumns")-1){const b=J?m.getBoundingClientRect().left:m.offsetLeft;let y=!1,T=0;R?(T=b-parseInt(this.cornerDefaultStyle.width,10)/2,y=T<0):(T=b+Qt(m)+parseInt(this.cornerDefaultStyle.width,10)/2,y=T>=cP(oe)),y&&(this.cornerStyle[z]=`${Math.floor(M+O+this.cornerCenterPointOffset-pe)}px`,this.cornerStyle[R?"borderLeftWidth":"borderRightWidth"]=0)}o===this.wot.getSetting("totalRows")-1&&(J?m.getBoundingClientRect().top:m.offsetTop)+$n(m)+parseInt(this.cornerDefaultStyle.height,10)/2>=hu(oe)&&(this.cornerStyle.top=`${Math.floor(P+k+this.cornerCenterPointOffset-p)}px`,this.cornerStyle.borderBottomWidth=0),this.cornerStyle.display="block"}hl()&&this.instance.getSetting("isDataViewInstance")&&this.updateMultipleSelectionHandlesPosition(o,l,P,M,O,k)}isEntireColumnSelected(e,t){return e===this.wot.wtTable.getFirstRenderedRow()&&t===this.wot.wtTable.getLastRenderedRow()}isEntireRowSelected(e,t){return e===this.wot.wtTable.getFirstRenderedColumn()&&t===this.wot.wtTable.getLastRenderedColumn()}getDimensionsFromHeader(e,t,i,s,r){const{wtTable:o}=this.wot,a=o.wtRootElement.parentNode;let l=null,c=null,h=null,u=null,d=null,f=null,g=null,m=null;switch(e){case"rows":l=function(){return o.getRowHeader(...arguments)},c=function(){return $n(...arguments)},h="ht__selection--rows",f="top";break;case"columns":l=function(){return o.getColumnHeader(...arguments)},c=function(){return Qt(...arguments)},h="ht__selection--columns",f="left";break}if(a.classList.contains(h)){const w=this.wot.getSetting("columnHeaders").length;if(g=l(t,w-s),m=l(i,w-s),!g||!m)return!1;const v=li(g),C=li(m);return g&&m&&(u=v[f]-r[f]-1,d=C[f]+c(m)-v[f]),[g,u,d]}return!1}changeBorderStyle(e,t){const i=this[e].style,s=t[e];!s||s.hide?ae(this[e],"hidden"):(Fe(this[e],"hidden")&&ze(this[e],"hidden"),i.backgroundColor=s.color,(e==="top"||e==="bottom")&&(i.height=`${s.width}px`),(e==="start"||e==="end")&&(i.width=`${s.width}px`))}changeBorderToDefaultStyle(e){const t={width:1,color:"#000"},i=this[e].style;i.backgroundColor=t.color,i.width=`${t.width}px`,i.height=`${t.width}px`}toggleHiddenClass(e,t){this.changeBorderToDefaultStyle(e),t?ae(this[e],"hidden"):ze(this[e],"hidden")}disappear(){this.topStyle.display="none",this.bottomStyle.display="none",this.startStyle.display="none",this.endStyle.display="none",this.cornerStyle.display="none",hl()&&this.instance.getSetting("isDataViewInstance")&&(this.selectionHandles.styles.top.display="none",this.selectionHandles.styles.topHitArea.display="none",this.selectionHandles.styles.bottom.display="none",this.selectionHandles.styles.bottomHitArea.display="none")}destroy(){this.eventManager.destroyWithOwnEventsOnly(),this.main.parentNode.removeChild(this.main)}}function _we(n,e){FY(n,e),e.add(n)}function Rd(n,e,t){FY(n,e),e.set(n,t)}function FY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rt(n,e){return n.get(BP(n,e))}function QL(n,e,t){return n.set(BP(n,e),t),t}function BP(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Di=new WeakMap,bs=new WeakMap,ux=new WeakMap,Bm=new WeakMap,dx=new WeakMap,mh=new WeakMap,ZL=new WeakSet;class Rwe{constructor(e){_we(this,ZL),Rd(this,Di,void 0),Rd(this,bs,void 0),Rd(this,ux,new Swe),Rd(this,Bm,new WeakMap),Rd(this,dx,new WeakSet),Rd(this,mh,new Map),QL(bs,this,e)}setActiveOverlay(e){return QL(Di,this,e),rt(ux,this).setActiveOverlay(rt(Di,this)),rt(Bm,this).has(rt(Di,this))||rt(Bm,this).set(rt(Di,this),new Set),this}getFocusSelection(){return rt(bs,this)!==null?rt(bs,this).getFocus():null}getAreaSelection(){return rt(bs,this)!==null?rt(bs,this).createLayeredArea():null}getBorderInstance(e){if(!e.settings.border)return null;if(rt(mh,this).has(e)){const i=rt(mh,this).get(e);if(i.has(rt(Di,this)))return i.get(rt(Di,this));const s=new XL(rt(Di,this),e.settings);return i.set(rt(Di,this),s),s}const t=new XL(rt(Di,this),e.settings);return rt(mh,this).set(e,new Map([[rt(Di,this),t]])),t}getBorderInstances(e){var t,i;return Array.from((t=(i=rt(mh,this).get(e))===null||i===void 0?void 0:i.values())!==null&&t!==void 0?t:[])}destroyBorders(e){rt(mh,this).get(e).forEach(t=>t.destroy()),rt(mh,this).delete(e)}render(e){if(rt(bs,this)===null)return;e&&BP(ZL,this,xwe).call(this);const t=Array.from(rt(bs,this)),i=new Map,s=new Map;for(let r=0;r<t.length;r++){const o=t[r],{className:a,headerAttributes:l,createLayers:c,selectionType:h}=o.settings;rt(dx,this).has(o)||(rt(dx,this).add(o),o.addLocalHook("destroy",()=>this.destroyBorders(o)));const u=this.getBorderInstance(o);if(o.isEmpty()){u==null||u.disappear();continue}a&&rt(ux,this).setActiveSelection(o).scan().forEach(g=>{if(i.has(g)){const m=i.get(g);m.has(a)&&c===!0?m.set(a,m.get(a)+1):m.set(a,1)}else i.set(g,new Map([[a,1]]));l&&(s.has(g)||s.set(g,[]),g.nodeName==="TH"&&s.get(g).push(...l))});const d=o.getCorners();rt(Di,this).getSetting("onBeforeDrawBorders",d,h),u==null||u.appear(d)}i.forEach((r,o)=>{var a;const l=Array.from(r).map(c=>{let[h,u]=c;return u===1?h:[h,...Array.from({length:u-1},(d,f)=>`${h}-${f+1}`)]}).flat();l.forEach(c=>rt(Bm,this).get(rt(Di,this)).add(c)),ae(o,l),o.nodeName==="TD"&&Array.isArray((a=rt(bs,this).options)===null||a===void 0?void 0:a.cellAttributes)&&$e(o,rt(bs,this).options.cellAttributes)}),Array.from(s.keys()).forEach(r=>{$e(r,[...s.get(r)])})}}function xwe(){const n=rt(Bm,this).get(rt(Di,this)),e=rt(Di,this).wtSettings.getSetting("onBeforeRemoveCellClassNames");if(Array.isArray(e))for(let t=0;t<e.length;t++)n.add(e[t]);n.forEach(t=>{var i,s;const r=rt(Di,this).wtTable.TABLE.querySelectorAll(`.${t}`);let o=[];Array.isArray((i=rt(bs,this).options)===null||i===void 0?void 0:i.cellAttributes)&&(o=rt(bs,this).options.cellAttributes.map(a=>a[0])),Array.isArray((s=rt(bs,this).options)===null||s===void 0?void 0:s.headerAttributes)&&(o=[...o,...rt(bs,this).options.headerAttributes.map(a=>a[0])]);for(let a=0,l=r.length;a<l;a++)ze(r[a],t),rd(r[a],o)}),n.clear()}class Ewe extends ev{constructor(e,t,i,s){super(e,t,Vu,i,s)}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new DP(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wtTable:e}=this.wot;if(!this.needFullRender||!this.shouldBeRendered()||!e.holder.parentNode)return!1;const{rootWindow:t}=this.domBindings,i=this.clone.wtTable.holder.parentNode,s=this.wtSettings.getSetting("preventOverflow");let r=0;this.trimmingContainer===t&&(!s||s!=="horizontal")?(r=this.getOverlayOffset()*(this.isRtl()?-1:1),W0(i,`${r}px`,"0px")):(r=this.getScrollPosition(),Kw(i));const o=this.adjustHeaderBordersPosition(r);return this.adjustElementsSize(),o}setScrollPosition(e){const{rootWindow:t}=this.domBindings;let i=!1;return this.isRtl()&&(e=-e),this.mainTableScrollableElement===t&&t.scrollX!==e?(t.scrollTo(e,aP(t)),i=!0):this.mainTableScrollableElement.scrollLeft!==e&&(this.mainTableScrollableElement.scrollLeft=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollVertically")}sumCellSizes(e,t){const i=this.wtSettings.getSetting("defaultColumnWidth");let s=e,r=0;for(;s<t;)r+=this.wot.wtTable.getStretchedColumnWidth(s)||i,s+=1;return r}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e}=this.wot,{rootDocument:t,rootWindow:i}=this.domBindings,s=ui(t),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||a==="vertical"){let c=this.wot.wtViewport.getWorkspaceHeight();this.wot.wtOverlays.hasScrollbarBottom&&(c-=s),c=Math.min(c,e.wtRootElement.scrollHeight),o.height=`${c}px`}else o.height="";this.clone.wtTable.holder.style.height=o.height;const l=Qt(this.clone.wtTable.TABLE);o.width=`${l}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable,t=this.wot.selectionManager.getFocusSelection()?parseInt(FP.width,10)/2:0;this.clone.wtTable.hider.style.height=this.hider.style.height,e.style.height=e.parentNode.style.height,e.style.width=`${parseInt(e.parentNode.style.width,10)+t}px`}applyToDOM(){const e=this.wtSettings.getSetting("totalColumns"),t=this.isRtl()?"right":"left";if(typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number")this.spreader.style[t]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style[t]="0";else throw new Error("Incorrect value of the columnsRenderCalculator");this.isRtl()?this.spreader.style.left="":this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number"?this.clone.wtTable.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`:this.clone.wtTable.spreader.style.top=""}scrollTo(e,t){const{wtSettings:i}=this,s=i.getSetting("rowHeaders"),r=i.getSetting("fixedColumnsStart"),a=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,l=r===0&&s.length>0&&!Fe(a.parentNode,"innerBorderInlineStart")?1:0;let c=this.getTableParentOffset(),h=0;if(t){const u=this.wot.wtTable.getColumnWidth(e),d=this.wot.wtViewport.getViewportWidth();u>d&&(t=!1)}return t&&a.offsetWidth!==a.clientWidth&&(h=ui(this.domBindings.rootDocument)),t?(c+=this.sumCellSizes(0,e+1),c-=this.wot.wtViewport.getViewportWidth(),c+=l):c+=this.sumCellSizes(this.wtSettings.getSetting("fixedColumnsStart"),e),c+=h,BU(this.mainTableScrollableElement)===c-l&&l>0&&this.wot.wtOverlays.expandHiderHorizontallyBy(l),this.setScrollPosition(c)}getTableParentOffset(){const e=this.wtSettings.getSetting("preventOverflow");let t=0;return!e&&this.trimmingContainer===this.domBindings.rootWindow&&(t=this.wot.wtTable.holderOffset.left),t}getScrollPosition(){return Math.abs(lP(this.mainTableScrollableElement,this.domBindings.rootWindow))}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="horizontal")){this.isRtl()?i=Math.abs(Math.min(this.getTableParentOffset()-this.getScrollPosition(),0)):i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0);const s=this.wot.wtTable.getTotalWidth(),r=this.clone.wtTable.getTotalWidth(),o=s-r;i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){const{wtSettings:t}=this,i=this.wot.wtTable.holder.parentNode,s=t.getSetting("rowHeaders"),r=t.getSetting("fixedColumnsStart"),o=t.getSetting("totalRows"),a=t.getSetting("preventOverflow")==="vertical";o?ze(i,"emptyRows"):ae(i,"emptyRows");let l=!1;if(!a){if(r&&!s.length)ae(i,"innerBorderLeft innerBorderInlineStart");else if(!r&&s.length){const c=Fe(i,"innerBorderInlineStart");e?(ae(i,"innerBorderLeft innerBorderInlineStart"),l=!c):(ze(i,"innerBorderLeft innerBorderInlineStart"),l=c)}}return l}}const Twe="stickyRowsTop",VP={getFirstRenderedRow(){return this.wtSettings.getSetting("totalRows")===0?-1:0},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.getRenderedRowsCount()-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const n=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsTop"),n)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};Ra(VP,"MIXIN_NAME",Twe,{writable:!1,enumerable:!1});class WP extends ug{constructor(e,t,i,s){super(e,t,i,s,Wu)}}Lt(WP,VP);Lt(WP,Q0);function JL(n,e,t){return(e=Mwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mwe(n){var e=Awe(n,"string");return typeof e=="symbol"?e:e+""}function Awe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Pwe extends ev{constructor(e,t,i,s,r,o){super(e,t,Wu,i,s),JL(this,"topOverlay",void 0),JL(this,"inlineStartOverlay",void 0),this.topOverlay=r,this.inlineStartOverlay=o}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new WP(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){if(this.updateTrimmingContainer(),!this.wot.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode;if(this.trimmingContainer===this.domBindings.rootWindow){const s=this.inlineStartOverlay.getOverlayOffset()*(this.isRtl()?-1:1),r=this.topOverlay.getOverlayOffset();W0(e,`${s}px`,`${r}px`)}else Kw(e);let t=$n(this.clone.wtTable.TABLE);const i=Qt(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(t=0),e.style.height=`${t}px`,e.style.width=`${i}px`,!1}}class jP extends ug{constructor(e,t,i,s){super(e,t,i,s,Bu)}}Lt(jP,VP);Lt(jP,Z0);function Iwe(n,e,t){return(e=Owe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Owe(n){var e=kwe(n,"string");return typeof e=="symbol"?e:e+""}function kwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Hwe extends ev{constructor(e,t,i,s){super(e,t,Bu,i,s),Iwe(this,"cachedFixedRowsTop",-1),this.cachedFixedRowsTop=this.wtSettings.getSetting("fixedRowsTop")}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new jP(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode,{rootWindow:t}=this.domBindings,i=this.wtSettings.getSetting("preventOverflow");let s=0,r=!1;if(this.trimmingContainer===t&&(!i||i!=="vertical")){const{wtTable:a}=this.wot,l=a.hider.getBoundingClientRect(),c=Math.ceil(l.bottom),h=e.offsetHeight;r=c===h,s=this.getOverlayOffset(),W0(e,"0px",`${s}px`)}else s=this.getScrollPosition(),Kw(e);const o=this.adjustHeaderBordersPosition(s,r);return this.adjustElementsSize(),o}setScrollPosition(e){const t=this.domBindings.rootWindow;let i=!1;return this.mainTableScrollableElement===t&&t.scrollY!==e?(t.scrollTo(B0(t),e),i=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(e,t){const i=this.wtSettings.getSetting("defaultRowHeight");let s=e,r=0;for(;s<t;){const o=this.wot.wtTable.getRowHeight(s);r+=o===void 0?i:o,s+=1}return r}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e}=this.wot,{rootDocument:t,rootWindow:i}=this.domBindings,s=ui(t),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||a==="horizontal"){let c=this.wot.wtViewport.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(c-=s),c=Math.min(c,e.wtRootElement.scrollWidth),o.width=`${c}px`}else o.width="";this.clone.wtTable.holder.style.width=o.width;let l=$n(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(l=0),o.height=`${l}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable,t=this.wot.selectionManager.getFocusSelection()?parseInt(FP.height,10)/2:0;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=`${parseInt(e.parentNode.style.height,10)+t}px`}applyToDOM(){const e=this.wtSettings.getSetting("totalRows");if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number")this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style.top="0";else throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const e=this.isRtl()?"right":"left",{spreader:t}=this.clone.wtTable;typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number"?t.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:t.style[e]=""}scrollTo(e,t){const{wot:i,wtSettings:s}=this,o=(i.cloneSource?i.cloneSource:i).wtTable.holder,a=s.getSetting("columnHeaders"),c=s.getSetting("fixedRowsTop")===0&&a.length>0&&!Fe(o.parentNode,"innerBorderTop")?1:0;let h=this.getTableParentOffset(),u=0;if(t){const d=this.wot.wtTable.getRowHeight(e),f=this.wot.wtViewport.getViewportHeight();d>f&&(t=!1)}if(t&&o.offsetHeight!==o.clientHeight&&(u=ui(this.domBindings.rootDocument)),t){const d=s.getSetting("fixedRowsBottom"),f=s.getSetting("totalRows");h+=this.sumCellSizes(0,e+1),h-=i.wtViewport.getViewportHeight()-this.sumCellSizes(f-d,f),h+=1,h+=c}else h+=this.sumCellSizes(s.getSetting("fixedRowsTop"),e);return h+=u,FU(this.mainTableScrollableElement)===h-c&&c>0&&this.wot.wtOverlays.expandHiderVerticallyBy(c),this.setScrollPosition(h)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return V0(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="vertical")){const s=this.wot.wtTable.getTotalHeight(),r=this.clone.wtTable.getTotalHeight(),o=s-r;i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0),i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{wtSettings:i}=this,s=this.wot.wtTable.holder.parentNode,r=i.getSetting("totalColumns"),o=i.getSetting("preventOverflow")==="horizontal";r?ze(s,"emptyColumns"):ae(s,"emptyColumns");let a=!1;if(!t&&!o){const l=i.getSetting("fixedRowsTop"),c=this.cachedFixedRowsTop!==l,h=i.getSetting("columnHeaders");if((c||l===0)&&h.length>0){const u=Fe(s,"innerBorderTop");this.cachedFixedRowsTop=i.getSetting("fixedRowsTop"),e||i.getSetting("totalRows")===0?(ae(s,"innerBorderTop"),a=!u):(ze(s,"innerBorderTop"),a=u)}}return a}}function cb(n,e,t){Dwe(n,e),e.set(n,t)}function Dwe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ia(n,e,t){return(e=Nwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Nwe(n){var e=Lwe(n,"string");return typeof e=="symbol"?e:e+""}function Lwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ph(n,e,t){return n.set(BY(n,e),t),t}function Oa(n,e){return n.get(BY(n,e))}function BY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var xd=new WeakMap,hb=new WeakMap,Ed=new WeakMap,ub=new WeakMap;class $we{constructor(e,t,i,s,r,o){Ia(this,"wot",null),cb(this,xd,[]),Ia(this,"topOverlay",null),Ia(this,"bottomOverlay",null),Ia(this,"inlineStartOverlay",null),Ia(this,"topInlineStartCornerOverlay",null),Ia(this,"bottomInlineStartCornerOverlay",null),Ia(this,"browserLineHeight",void 0),Ia(this,"wtSettings",null),cb(this,hb,!1),cb(this,Ed,0),cb(this,ub,null),Ia(this,"resizeObserver",new ResizeObserver(h=>{G0(()=>{!Array.isArray(h)||!h.length||(ph(Ed,this,Oa(Ed,this)+1),Oa(Ed,this)===100&&(Dt("The ResizeObserver callback was fired too many times in direct succession.\nThis may be due to an infinite loop caused by setting a dynamic height/width (for example, with the `dvh` units) to a Handsontable container's parent. \nThe observer will be disconnected."),this.resizeObserver.disconnect()),Oa(ub,this)!==null&&clearTimeout(Oa(ub,this)),ph(ub,this,setTimeout(()=>{ph(Ed,this,0)},100)),this.wtSettings.getSetting("onContainerElementResize"))})})),this.wot=e,this.wtSettings=s,this.domBindings=i,this.facadeGetter=t,this.wtTable=o;const{rootDocument:a,rootWindow:l}=this.domBindings;this.instance=this.wot,this.eventManager=r,this.scrollbarSize=ui(a);const c=l.getComputedStyle(o.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden";this.scrollableElement=c?o.holder:sw(o.TABLE),this.initOverlays(),this.hasScrollbarBottom=!1,this.hasScrollbarRight=!1,this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.initBrowserLineHeight(),this.registerListeners(),this.lastScrollX=l.scrollX,this.lastScrollY=l.scrollY}getOverlays(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=[...Oa(xd,this)];return e&&t.push(this.wtTable),t}initBrowserLineHeight(){const{rootWindow:e,rootDocument:t}=this.domBindings,i=e.getComputedStyle(t.body),s=parseInt(i.lineHeight,10),r=parseInt(i.fontSize,10)*1.2;this.browserLineHeight=s||r}initOverlays(){const e=[this.wot,this.facadeGetter,this.wtSettings,this.domBindings];this.topOverlay=new Hwe(...e),this.bottomOverlay=new fwe(...e),this.inlineStartOverlay=new Ewe(...e),this.topInlineStartCornerOverlay=new Pwe(...e,this.topOverlay,this.inlineStartOverlay),this.bottomInlineStartCornerOverlay=new lwe(...e,this.bottomOverlay,this.inlineStartOverlay),ph(xd,this,[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay])}beforeDraw(){ph(hb,this,Oa(xd,this).reduce((e,t)=>t.hasRenderingStateChanged()||e,!1)),Oa(xd,this).forEach(e=>e.updateStateOfRendering("before"))}afterDraw(){this.syncScrollWithMaster(),Oa(xd,this).forEach(e=>{const t=e.hasRenderingStateChanged();e.updateStateOfRendering("after"),t&&!e.needFullRender&&e.reset()})}refreshAll(){if(this.wot.drawn){if(!this.wtTable.holder.parentNode){this.destroy();return}this.wot.draw(!0),this.verticalScrolling&&this.inlineStartOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1}}registerListeners(){const{rootDocument:e,rootWindow:t}=this.domBindings,{mainTableScrollableElement:i}=this.topOverlay,{mainTableScrollableElement:s}=this.inlineStartOverlay;this.eventManager.addEventListener(e.documentElement,"keydown",u=>this.onKeyDown(u)),this.eventManager.addEventListener(e.documentElement,"keyup",()=>this.onKeyUp()),this.eventManager.addEventListener(e,"visibilitychange",()=>this.onKeyUp()),this.eventManager.addEventListener(i,"scroll",u=>this.onTableScroll(u),{passive:!0}),i!==s&&this.eventManager.addEventListener(s,"scroll",u=>this.onTableScroll(u),{passive:!0});const r=t.devicePixelRatio&&t.devicePixelRatio>1,o=this.scrollableElement===t,a=this.wtSettings.getSetting("preventWheel"),l={passive:o};(a||r||!pP())&&this.eventManager.addEventListener(this.wtTable.wtRootElement,"wheel",u=>this.onCloneWheel(u,a),l),[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay].forEach(u=>{if(u&&u.needFullRender){const{holder:d}=u.clone.wtTable;this.eventManager.addEventListener(d,"wheel",f=>this.onCloneWheel(f,a),l)}});let h;this.eventManager.addEventListener(t,"resize",()=>{clearTimeout(h),h=setTimeout(()=>{this.wtSettings.getSetting("onWindowResize"),ph(Ed,this,0)},200)}),o||this.resizeObserver.observe(this.wtTable.wtRootElement.parentElement)}deregisterListeners(){this.eventManager.clearEvents(!0)}onTableScroll(e){const t=this.domBindings.rootWindow,i=this.inlineStartOverlay.mainTableScrollableElement,s=this.topOverlay.mainTableScrollableElement,r=e.target;this.keyPressed&&(s!==t&&r!==t&&!e.target.contains(s)||i!==t&&r!==t&&!e.target.contains(i))||this.syncScrollPositions(e)}onCloneWheel(e,t){const{rootWindow:i}=this.domBindings,s=this.inlineStartOverlay.mainTableScrollableElement,r=this.topOverlay.mainTableScrollableElement,o=e.target,a=r!==i&&o!==i&&!o.contains(r),l=s!==i&&o!==i&&!o.contains(s);if(this.keyPressed&&(a||l)||this.scrollableElement===i)return;const c=this.translateMouseWheelToScroll(e);(t||this.scrollableElement!==i&&c)&&e.preventDefault()}onKeyDown(e){this.keyPressed=hg(e.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")}onKeyUp(){this.keyPressed=!1}translateMouseWheelToScroll(e){let t=isNaN(e.deltaY)?-1*e.wheelDeltaY:e.deltaY,i=isNaN(e.deltaX)?-1*e.wheelDeltaX:e.deltaX;e.deltaMode===1&&(i+=i*this.browserLineHeight,t+=t*this.browserLineHeight);const s=this.scrollVertically(t),r=this.scrollHorizontally(i);return s||r}scrollVertically(e){const t=this.scrollableElement.scrollTop;return this.scrollableElement.scrollTop+=e,t!==this.scrollableElement.scrollTop}scrollHorizontally(e){const t=this.scrollableElement.scrollLeft;return this.scrollableElement.scrollLeft+=e,t!==this.scrollableElement.scrollLeft}syncScrollPositions(){if(this.destroyed)return;const{rootWindow:e}=this.domBindings,t=this.topOverlay.clone.wtTable.holder,i=this.inlineStartOverlay.clone.wtTable.holder,[s,r]=[this.scrollableElement.scrollLeft,this.scrollableElement.scrollTop];if(this.horizontalScrolling=t.scrollLeft!==s||this.lastScrollX!==e.scrollX,this.verticalScrolling=i.scrollTop!==r||this.lastScrollY!==e.scrollY,this.lastScrollX=e.scrollX,this.lastScrollY=e.scrollY,this.horizontalScrolling){t.scrollLeft=s;const o=this.bottomOverlay.needFullRender?this.bottomOverlay.clone.wtTable.holder:null;o&&(o.scrollLeft=s)}this.verticalScrolling&&(i.scrollTop=r),this.refreshAll()}syncScrollWithMaster(){if(!Oa(hb,this))return;const e=this.topOverlay.mainTableScrollableElement,{scrollLeft:t,scrollTop:i}=e;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=t),this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=t),this.inlineStartOverlay.needFullRender&&(this.inlineStartOverlay.clone.wtTable.holder.scrollTop=i),ph(hb,this,!1)}updateMainScrollableElements(){this.deregisterListeners(),this.inlineStartOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement();const{wtTable:e}=this,{rootWindow:t}=this.domBindings;t.getComputedStyle(e.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden"?this.scrollableElement=e.holder:this.scrollableElement=sw(e.TABLE),this.registerListeners()}destroy(){this.resizeObserver.disconnect(),this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.inlineStartOverlay.destroy(),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.destroy(),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.destroy(),this.destroyed=!0}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.updateLastSpreaderSize()&&this.adjustElementsSize(),this.bottomOverlay.clone&&this.bottomOverlay.refresh(e),this.inlineStartOverlay.refresh(e),this.topOverlay.refresh(e),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.refresh(e),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.refresh(e)}updateLastSpreaderSize(){const e=this.wtTable.spreader,t=e.clientWidth,i=e.clientHeight,s=t!==this.spreaderLastSize.width||i!==this.spreaderLastSize.height;return s&&(this.spreaderLastSize.width=t,this.spreaderLastSize.height=i),s}adjustElementsSize(){const{wtViewport:e}=this.wot,{wtTable:t}=this,{rootWindow:i}=this.domBindings,s=this.scrollableElement===i,r=this.wtSettings.getSetting("totalColumns"),o=this.wtSettings.getSetting("totalRows"),a=e.getRowHeaderWidth(),c=e.getColumnHeaderHeight()+this.topOverlay.sumCellSizes(0,o)+1,h=a+this.inlineStartOverlay.sumCellSizes(0,r),d=t.hider.style,f=()=>s?!1:this.scrollableElement.scrollTop>Math.max(0,c-t.holder.clientHeight),g=()=>s?!1:this.scrollableElement.scrollLeft>Math.max(0,h-t.holder.clientWidth),m=f()?1:0,w=g()?1:0;if(d.width=`${h+w}px`,d.height=`${c+m}px`,this.scrollbarSize>0){const{scrollHeight:v,scrollWidth:C}=t.wtRootElement,{scrollHeight:S,scrollWidth:x}=t.holder;this.hasScrollbarRight=v<S,this.hasScrollbarBottom=C<x,this.hasScrollbarRight&&t.hider.scrollWidth+this.scrollbarSize>C?this.hasScrollbarBottom=!0:this.hasScrollbarBottom&&t.hider.scrollHeight+this.scrollbarSize>v&&(this.hasScrollbarRight=!0)}this.topOverlay.adjustElementsSize(),this.inlineStartOverlay.adjustElementsSize(),this.bottomOverlay.adjustElementsSize()}expandHiderVerticallyBy(e){const{wtTable:t}=this;t.hider.style.height=`${parseInt(t.hider.style.height,10)+e}px`}expandHiderHorizontallyBy(e){const{wtTable:t}=this;t.hider.style.width=`${parseInt(t.hider.style.width,10)+e}px`}applyToDOM(){this.wtTable.isVisible()&&(this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.inlineStartOverlay.applyToDOM())}getParentOverlay(e){if(!e)return null;const t=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];let i=null;return L(t,s=>{s&&s.clone&&s.clone.wtTable.TABLE.contains(e)&&(i=s.clone)}),i}syncOverlayTableClassNames(){const e=this.wtTable.TABLE,t=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];L(t,i=>{i&&(i.clone.wtTable.TABLE.className=e.className)})}}function e$(n,e,t){return(e=Fwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fwe(n){var e=Bwe(n,"string");return typeof e=="symbol"?e:e+""}function Bwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Vwe{constructor(e){e$(this,"settings",{}),e$(this,"defaults",Object.freeze(this.getDefaults())),et(this.defaults,(t,i)=>{if(e[i]!==void 0)this.settings[i]=e[i];else{if(t===void 0)throw new Error(`A required setting "${i}" was not provided`);this.settings[i]=t}})}getDefaults(){return{facade:void 0,table:void 0,isDataViewInstance:!0,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow(){return!1},preventWheel:!1,data:void 0,freezeOverlays:!1,fixedColumnsStart:0,fixedRowsTop:0,fixedRowsBottom:0,shouldRenderInlineStartOverlay:()=>this.getSetting("fixedColumnsStart")>0||this.getSetting("rowHeaders").length>0,shouldRenderTopOverlay:()=>this.getSetting("fixedRowsTop")>0||this.getSetting("columnHeaders").length>0,shouldRenderBottomOverlay:()=>this.getSetting("fixedRowsBottom")>0,minSpareRows:0,rowHeaders(){return[]},columnHeaders(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:(e,t,i)=>{const s=this.getSetting("data",e,t);$c(i,s??"")},columnWidth(){},rowHeight(){},rowHeightByOverlayName(){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellContextMenu:null,onCellMouseOver:null,onCellMouseOut:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeRemoveCellClassNames:null,onAfterDrawSelection:null,onBeforeDrawBorders:null,onBeforeViewportScrollHorizontally:e=>e,onBeforeViewportScrollVertically:e=>e,onScrollHorizontally:null,onScrollVertically:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:e=>e,onModifyRowHeaderWidth:null,onModifyGetCellCoords:null,onBeforeHighlightingRowHeader:e=>e,onBeforeHighlightingColumnHeader:e=>e,onWindowResize:null,onContainerElementResize:null,renderAllColumns:!1,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null,rtlMode:!1,ariaTags:!0}}update(e,t){return t===void 0?et(e,(i,s)=>{this.settings[s]=i}):this.settings[e]=t,this}getSetting(e,t,i,s,r){return typeof this.settings[e]=="function"?this.settings[e](t,i,s,r):t!==void 0&&Array.isArray(this.settings[e])?this.settings[e][t]:this.settings[e]}getSettingPure(e){return this.settings[e]}has(e){return!!this.settings[e]}}class zP extends ug{constructor(e,t,i,s){super(e,t,i,s,"master")}alignOverlaysWithTrimmingContainer(){const e=$u(this.wtRootElement),{rootWindow:t}=this.domBindings;if(e===t)this.wtSettings.getSetting("preventOverflow")||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible");else{const i=e.parentElement,s=Uf(e,"height",t),r=Uf(e,"overflow",t),o=this.holder.style,{scrollWidth:a,scrollHeight:l}=e;let c=e.offsetWidth,h=e.offsetHeight;if(i&&["auto","hidden","scroll"].includes(r)){const d=e.cloneNode(!1);d.style.overflow="auto",d.style.position="absolute",e.nextElementSibling?i.insertBefore(d,e.nextElementSibling):i.appendChild(d);const f=parseInt(da(d,t).height,10);i.removeChild(d),f===0&&(h=0)}h=Math.min(h,l),o.height=s==="auto"?"auto":`${h}px`,c=Math.min(c,a),o.width=`${c}px`,o.overflow="",this.hasTableHeight=o.height==="auto"?!0:h>0,this.hasTableWidth=c>0}this.isTableVisible=Lu(this.TABLE)}markOversizedColumnHeaders(){const{wtSettings:e}=this,{wtViewport:t}=this.dataAccessObject,i="master",r=e.getSetting("columnHeaders").length;if(r&&!t.hasOversizedColumnHeadersMarked[i]){const a=e.getSetting("rowHeaders").length,l=this.getRenderedColumnsCount();for(let c=0;c<r;c++)for(let h=-1*a;h<l;h++)this.markIfOversizedColumnHeader(h);t.hasOversizedColumnHeadersMarked[i]=!0}}}Lt(zP,HP);Lt(zP,Z0);class Wwe{constructor(e,t,i,s,r){this.dataAccessObject=e,this.wot=e.wot,this.instance=this.wot,this.domBindings=t,this.wtSettings=i,this.wtTable=r,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.rowsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllRows")?new Pme:new Ome],["fullyVisible",()=>new yme],["partiallyVisible",()=>new xY]]),this.columnsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllColumns")?new Tme:new Ime],["fullyVisible",()=>new wme],["partiallyVisible",()=>new RY]]),this.eventManager=s,this.eventManager.addEventListener(this.domBindings.rootWindow,"resize",()=>{this.clientHeight=this.getWorkspaceHeight()})}getWorkspaceHeight(){const e=this.domBindings.rootDocument,t=this.dataAccessObject.topOverlayTrimmingContainer;let i=0;return t===this.domBindings.rootWindow?i=e.documentElement.clientHeight:i=$n(t)>0&&t.clientHeight>0?t.clientHeight:1/0,i}getWorkspaceWidth(){const{wtSettings:e}=this,{rootDocument:t,rootWindow:i}=this.domBindings,s=this.dataAccessObject.inlineStartOverlayTrimmingContainer,r=t.documentElement.offsetWidth,o=e.getSetting("totalColumns"),a=e.getSetting("preventOverflow"),l=e.getSetting("rtlMode"),c=this.wtTable.TABLE.getBoundingClientRect(),h=l?c.right-r:c.left,u=r-h;let d,f;if(a)return Qt(this.wtTable.wtRootElement);if(e.getSetting("freezeOverlays")?d=Math.min(u,r):d=Math.min(this.getContainerFillWidth(),u,r),s===i&&o>0&&this.sumColumnWidths(0,o-1)>d)return t.documentElement.clientWidth;if(s!==i&&(f=Uf(this.dataAccessObject.inlineStartOverlayTrimmingContainer,"overflow",i),f==="scroll"||f==="hidden"||f==="auto"))return Math.max(d,s.clientWidth);const g=e.getSetting("stretchH");return g==="none"||!g?Math.max(d,Qt(this.wtTable.TABLE)):d}hasVerticalScroll(){return this.wtTable.hider.offsetHeight>this.getWorkspaceHeight()}hasHorizontalScroll(){return this.wtTable.hider.offsetWidth>this.getWorkspaceWidth()}sumColumnWidths(e,t){let i=0,s=e;for(;s<t;)i+=this.wtTable.getColumnWidth(s),s+=1;return i}getContainerFillWidth(){if(this.containerWidth)return this.containerWidth;const e=this.wtTable.holder,t=this.domBindings.rootDocument.createElement("div");t.style.width="100%",t.style.height="1px",e.appendChild(t);const i=t.offsetWidth;return this.containerWidth=i,e.removeChild(t),i}getWorkspaceOffset(){return li(this.wtTable.TABLE)}getColumnHeaderHeight(){return this.wtSettings.getSetting("columnHeaders").length?isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=$n(this.wtTable.THEAD)):this.columnHeaderHeight=0,this.columnHeaderHeight}getViewportHeight(){let e=this.getWorkspaceHeight();if(e===1/0)return e;const t=this.getColumnHeaderHeight();return t>0&&(e-=t),e}getRowHeaderWidth(){const e=this.wtSettings.getSetting("rowHeaderWidth"),t=this.wtSettings.getSetting("rowHeaders");if(e){this.rowHeaderWidth=0;for(let i=0,s=t.length;i<s;i++)this.rowHeaderWidth+=e[i]||e}if(isNaN(this.rowHeaderWidth))if(t.length){let i=this.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(let s=0,r=t.length;s<r;s++)i?(this.rowHeaderWidth+=Qt(i),i=i.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.wtSettings.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth}getViewportWidth(){const e=this.getWorkspaceWidth();if(e===1/0)return e;const t=this.getRowHeaderWidth();return t>0?e-t:e}createRowsCalculator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:t,wtTable:i}=this;let s=this.getViewportHeight(),r,o;this.rowHeaderWidth=NaN;let a=this.dataAccessObject.topScrollPosition-this.dataAccessObject.topParentOffset;const l=t.getSetting("fixedRowsTop"),c=t.getSetting("fixedRowsBottom"),h=t.getSetting("totalRows");return l&&a>=0&&(o=this.dataAccessObject.topOverlay.sumCellSizes(0,l),a+=o,s-=o),c&&this.dataAccessObject.bottomOverlay.clone&&(o=this.dataAccessObject.bottomOverlay.sumCellSizes(h-c,h),s-=o),i.holder.clientHeight===i.holder.offsetHeight?r=0:r=ui(this.domBindings.rootDocument),new Bme({calculationTypes:e.map(u=>[u,this.rowsCalculatorTypes.get(u)()]),viewportHeight:s,scrollOffset:a,totalRows:t.getSetting("totalRows"),rowHeightFn:u=>i.getRowHeight(u),overrideFn:t.getSettingPure("viewportRowCalculatorOverride"),horizontalScrollbarHeight:r})}createColumnsCalculator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:t,wtTable:i}=this;let s=this.getViewportWidth(),r=Math.abs(this.dataAccessObject.inlineStartScrollPosition)-this.dataAccessObject.inlineStartParentOffset;this.columnHeaderHeight=NaN;const o=t.getSetting("fixedColumnsStart");if(o&&r>=0){const a=this.dataAccessObject.inlineStartOverlay.sumCellSizes(0,o);r+=a,s-=a}return i.holder.clientWidth!==i.holder.offsetWidth&&(s-=ui(this.domBindings.rootDocument)),new Lme({calculationTypes:e.map(a=>[a,this.columnsCalculatorTypes.get(a)()]),viewportWidth:s,scrollOffset:r,totalColumns:t.getSetting("totalColumns"),columnWidthFn:a=>i.getColumnWidth(a),overrideFn:t.getSettingPure("viewportColumnCalculatorOverride"),inlineStartOffset:this.dataAccessObject.inlineStartParentOffset})}createCalculators(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{wtSettings:t}=this,i=this.createRowsCalculator(),s=this.createColumnsCalculator();if(e&&!t.getSetting("renderAllRows")){const r=i.getResultsFor("fullyVisible");e=this.areAllProposedVisibleRowsAlreadyRendered(r)}if(e&&!t.getSetting("renderAllColumns")){const r=s.getResultsFor("fullyVisible");e=this.areAllProposedVisibleColumnsAlreadyRendered(r)}return e||(this.rowsRenderCalculator=i.getResultsFor("rendered"),this.columnsRenderCalculator=s.getResultsFor("rendered")),this.rowsVisibleCalculator=i.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=s.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=i.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=s.getResultsFor("partiallyVisible"),e}createVisibleCalculators(){const e=this.createRowsCalculator(["fullyVisible","partiallyVisible"]),t=this.createColumnsCalculator(["fullyVisible","partiallyVisible"]);this.rowsVisibleCalculator=e.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=t.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=e.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=t.getResultsFor("partiallyVisible")}areAllProposedVisibleRowsAlreadyRendered(e){if(!this.rowsVisibleCalculator)return!1;let{startRow:t,endRow:i}=e;if(t===null&&i===null){if(!e.isVisibleInTrimmingContainer)return!0;t=this.rowsPartiallyVisibleCalculator.startRow,i=this.rowsPartiallyVisibleCalculator.endRow}const{startRow:s,endRow:r}=this.rowsRenderCalculator;return t<s||t===s&&t>0?!1:!(i>r||i===r&&i<this.wtSettings.getSetting("totalRows")-1)}areAllProposedVisibleColumnsAlreadyRendered(e){if(!this.columnsVisibleCalculator)return!1;let{startColumn:t,endColumn:i}=e;if(t===null&&i===null){if(!e.isVisibleInTrimmingContainer)return!0;t=this.columnsPartiallyVisibleCalculator.startColumn,i=this.columnsPartiallyVisibleCalculator.endColumn}const{startColumn:s,endColumn:r}=this.columnsRenderCalculator;return t<s||t===s&&t>0?!1:!(i>r||i===r&&i<this.wtSettings.getSetting("totalColumns")-1)}resetHasOversizedColumnHeadersMarked(){et(this.hasOversizedColumnHeadersMarked,(e,t,i)=>{i[t]=void 0})}}class jwe extends OP{constructor(e,t){super(e,new Vwe(t));const i=this.wtSettings.getSetting("facade",this);this.wtTable=new zP(this.getTableDao(),i,this.domBindings,this.wtSettings),this.wtViewport=new Wwe(this.getViewportDao(),this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.selectionManager=new Rwe(this.wtSettings.getSetting("selections")),this.wtEvent=new IY(i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager),this.wtOverlays=new $we(this,i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.exportSettingsAsClassNames(),this.findOriginalHeaders()}exportSettingsAsClassNames(){const e={rowHeaders:"htRowHeaders",columnHeaders:"htColumnHeaders"},t=[],i=[];et(e,(s,r)=>{this.wtSettings.getSetting(r).length&&i.push(s),t.push(s)}),ze(this.wtTable.wtRootElement.parentNode,t),ae(this.wtTable.wtRootElement.parentNode,i)}getOverlayByName(e){var t;if(!DY.includes(e))return null;const i=e.replace(/_([a-z])/g,s=>s[1].toUpperCase());return(t=this.wtOverlays[`${i}Overlay`])!==null&&t!==void 0?t:null}getViewportDao(){const e=this;return{get wot(){return e},get topOverlayTrimmingContainer(){return e.wtOverlays.topOverlay.trimmingContainer},get inlineStartOverlayTrimmingContainer(){return e.wtOverlays.inlineStartOverlay.trimmingContainer},get topScrollPosition(){return e.wtOverlays.topOverlay.getScrollPosition()},get topParentOffset(){return e.wtOverlays.topOverlay.getTableParentOffset()},get inlineStartScrollPosition(){return e.wtOverlays.inlineStartOverlay.getScrollPosition()},get inlineStartParentOffset(){return e.wtOverlays.inlineStartOverlay.getTableParentOffset()},get topOverlay(){return e.wtOverlays.topOverlay},get inlineStartOverlay(){return e.wtOverlays.inlineStartOverlay},get bottomOverlay(){return e.wtOverlays.bottomOverlay}}}}class UP{constructor(e){e instanceof OP?this._wot=e:this._initFromSettings(e)}_initFromSettings(e){e.facade=t=>{const i=new UP(t);return()=>i},this._wot=new jwe(e.table,e)}get guid(){return this._wot.guid}get rootDocument(){return this._wot.domBindings.rootDocument}get rootWindow(){return this._wot.domBindings.rootWindow}get wtSettings(){return this._wot.wtSettings}get cloneSource(){return this._wot.cloneSource}get cloneOverlay(){return this._wot.cloneOverlay}get selectionManager(){return this._wot.selectionManager}get wtViewport(){return this._wot.wtViewport}get wtOverlays(){return this._wot.wtOverlays}get wtTable(){return this._wot.wtTable}get wtEvent(){return this._wot.wtEvent}get wtScroll(){return this._wot.wtScroll}get drawn(){return this._wot.drawn}set drawn(e){this._wot.drawn=e}get drawInterrupted(){return this._wot.drawInterrupted}set drawInterrupted(e){this._wot.drawInterrupted=e}get lastMouseOver(){return this._wot.lastMouseOver}set lastMouseOver(e){this._wot.lastMouseOver=e}get momentumScrolling(){return this._wot.momentumScrolling}set momentumScrolling(e){this._wot.momentumScrolling=e}get touchApplied(){return this._wot.touchApplied}set touchApplied(e){this._wot.touchApplied=e}get domBindings(){return this._wot.domBindings}get eventListeners(){return this._wot.eventListeners}set eventListeners(e){this._wot.eventListeners=e}get eventManager(){return this._wot.eventManager}createCellCoords(e,t){return this._wot.createCellCoords(e,t)}createCellRange(e,t,i){return this._wot.createCellRange(e,t,i)}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._wot.draw(e),this}getCell(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._wot.getCell(e,t)}scrollViewport(e,t,i,s,r){return this._wot.scrollViewport(e,t,i,s,r)}scrollViewportHorizontally(e,t,i){return this._wot.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return this._wot.scrollViewportVertically(e,t,i)}getViewport(){return this._wot.getViewport()}getOverlayName(){return this._wot.cloneOverlay?this._wot.cloneOverlay.type:"master"}getOverlayByName(e){return this._wot.getOverlayByName(e)}exportSettingsAsClassNames(){return this._wot.exportSettingsAsClassNames()}update(e,t){return this._wot.wtSettings.update(e,t),this}getSetting(e,t,i,s,r){return this._wot.wtSettings.getSetting(e,t,i,s,r)}hasSetting(e){return this._wot.wtSettings.hasSetting(e)}destroy(){this._wot.destroy()}}function t$(n){let{isShiftKey:e,isLeftClick:t,isRightClick:i,coords:s,selection:r,controller:o,cellCoordsFactory:a}=n;const l=r.isSelected()?r.getSelectedRange().current():null,c=r.isSelectedByCorner(),h=r.isSelectedByRowHeader();if(r.markSource("mouse"),e&&l)s.row>=0&&s.col>=0&&!o.cell?r.setRangeEnd(s):(c||h)&&s.row>=0&&s.col>=0&&!o.cell?r.setRangeEnd(a(s.row,s.col)):c&&s.row<0&&!o.column?r.setRangeEnd(a(l.to.row,s.col)):h&&s.col<0&&!o.row?r.setRangeEnd(a(s.row,l.to.col)):(!c&&!h&&s.col<0||c&&s.col<0)&&!o.row?r.selectRows(Math.max(l.from.row,0),s.row,s.col):(!c&&!h&&s.row<0||h&&s.row<0)&&!o.column&&r.selectColumns(Math.max(l.from.col,0),s.col,s.row);else{const u=!r.inInSelection(s),d=t||i&&u;s.row<0&&s.col>=0&&!o.column?d&&r.selectColumns(s.col,s.col,s.row):s.col<0&&s.row>=0&&!o.row?d&&r.selectRows(s.row,s.row,s.col):s.col>=0&&s.row>=0&&!o.cell?d&&r.setRangeStart(s):s.col<0&&s.row<0&&r.selectAll(!0,!0,{disableHeadersHighlight:!0,focusPosition:{row:0,col:0}})}r.markEndSource()}function zwe(n){let{isLeftClick:e,coords:t,selection:i,controller:s,cellCoordsFactory:r}=n;if(!e)return;const o=i.isSelectedByRowHeader(),a=i.isSelectedByColumnHeader(),l=i.tableProps.countCols(),c=i.tableProps.countRows();i.markSource("mouse"),a&&!s.column?i.setRangeEnd(r(c-1,t.col)):o&&!s.row?i.setRangeEnd(r(t.row,l-1)):s.cell||i.setRangeEnd(t),i.markEndSource()}const Uwe=new Map([["mousedown",t$],["mouseover",zwe],["touchstart",t$]]);function n$(n,e){let{coords:t,selection:i,controller:s,cellCoordsFactory:r}=e;Uwe.get(n.type)({coords:t,selection:i,controller:s,cellCoordsFactory:r,isShiftKey:n.shiftKey,isLeftClick:K0(n)||n.type==="touchstart",isRightClick:Fc(n)})}const VY=new WeakMap,YP=Symbol("rootInstance");function Ywe(n){VY.set(n,!0)}function Gwe(n){return n===YP}function Yy(n){return VY.has(n)}function Kwe(n,e){WY(n,e),e.add(n)}function wh(n,e,t){WY(n,e),e.set(n,t)}function WY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fl(n,e,t){return(e=qwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qwe(n){var e=Xwe(n,"string");return typeof e=="symbol"?e:e+""}function Xwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fi(n,e){return n.get(aw(n,e))}function rr(n,e,t){return n.set(aw(n,e),t),t}function aw(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var fx=new WeakMap,db=new WeakMap,fb=new WeakMap,ka=new WeakMap,Fr=new WeakMap,gx=new WeakMap,mx=new WeakMap,Gy=new WeakSet;class Qwe{constructor(e){Kwe(this,Gy),Fl(this,"hot",void 0),Fl(this,"eventManager",void 0),Fl(this,"settings",void 0),Fl(this,"THEAD",void 0),Fl(this,"TBODY",void 0),Fl(this,"_wt",void 0),Fl(this,"activeWt",void 0),wh(this,fx,0),wh(this,db,0),Fl(this,"postponedAdjustElementsSize",!1),wh(this,fb,!1),wh(this,ka,void 0),wh(this,Fr,void 0),wh(this,gx,0),wh(this,mx,0),this.hot=e,this.eventManager=new Er(this.hot),this.settings=this.hot.getSettings(),this.createElements(),this.registerEvents(),this.initializeWalkontable()}render(){this.hot.isRenderSuspended()||(this.hot.runHooks("beforeRender",this.hot.forceFullRender),this.postponedAdjustElementsSize&&(this.postponedAdjustElementsSize=!1,this.adjustElementsSize(!0)),this._wt.draw(!this.hot.forceFullRender),this.hot.runHooks("afterRender",this.hot.forceFullRender),this.hot.forceFullRender=!1,this.hot.renderCall=!1)}adjustElementsSize(){this.hot.isRenderSuspended()?this.postponedAdjustElementsSize=!0:this._wt.wtOverlays.adjustElementsSize()}getCellAtCoords(e,t){const i=this._wt.getCell(e,t);return i<0?null:i}scrollViewport(e,t,i,s,r){return this._wt.scrollViewport(e,t,i,s,r)}scrollViewportHorizontally(e,t,i){return this._wt.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return this._wt.scrollViewportVertically(e,t,i)}createElements(){const{rootElement:e,rootDocument:t}=this.hot,i=e.getAttribute("style");i&&e.setAttribute("data-originalstyle",i),ae(e,"handsontable"),rr(Fr,this,t.createElement("TABLE")),ae(fi(Fr,this),"htCore"),this.hot.getSettings().tableClassName&&ae(fi(Fr,this),this.hot.getSettings().tableClassName),this.settings.ariaTags&&($e(fi(Fr,this),[ea()]),$e(e,[ade(),AU(-1),F0(this.hot.countCols()),Cde()])),this.THEAD=t.createElement("THEAD"),fi(Fr,this).appendChild(this.THEAD),this.TBODY=t.createElement("TBODY"),fi(Fr,this).appendChild(this.TBODY),this.hot.table=fi(Fr,this),this.hot.container.insertBefore(fi(Fr,this),this.hot.container.firstChild)}registerEvents(){const{rootElement:e,rootDocument:t,selection:i,rootWindow:s}=this.hot,r=t.documentElement;this.eventManager.addEventListener(e,"mousedown",a=>{rr(fb,this,!0),this.isTextSelectionAllowed(a.target)||(uM(s),a.preventDefault(),s.focus())}),this.eventManager.addEventListener(e,"mouseup",()=>{rr(fb,this,!1)}),this.eventManager.addEventListener(e,"mousemove",a=>{fi(fb,this)&&!this.isTextSelectionAllowed(a.target)&&(this.settings.fragmentSelection&&uM(s),a.preventDefault())}),this.eventManager.addEventListener(r,"keyup",a=>{i.isInProgress()&&!a.shiftKey&&i.finish()}),this.eventManager.addEventListener(r,"mouseup",a=>{i.isInProgress()&&K0(a)&&i.finish(),rr(ka,this,!1);const l=j0(t.activeElement);pp(t.activeElement)&&!l||(l||!i.isSelected()&&!i.isSelectedByAnyHeader()&&!e.contains(a.target)&&!Fc(a))&&this.hot.unlisten()}),this.eventManager.addEventListener(r,"contextmenu",a=>{i.isInProgress()&&Fc(a)&&(i.finish(),rr(ka,this,!1))}),this.eventManager.addEventListener(r,"touchend",()=>{i.isInProgress()&&i.finish(),rr(ka,this,!1)}),this.eventManager.addEventListener(r,"mousedown",a=>{const l=a.target,c=a.x||a.clientX,h=a.y||a.clientY;let u=a.target;if(fi(ka,this)||!e||!this.hot.view)return;const{holder:d}=this._wt.wtTable;if(u===d){const g=ui(t);if(t.elementFromPoint(c+g,h)!==d||t.elementFromPoint(c,h+g)!==d)return}else for(;u!==r;){if(u===null){if(a.isTargetWebComponent)break;return}if(u===e)return;u=u.parentNode}(typeof this.settings.outsideClickDeselects=="function"?this.settings.outsideClickDeselects(l):this.settings.outsideClickDeselects)?this.hot.deselectCell():this.hot.destroyEditor(!1,!1)});let o=Nu(s);for(;o!==null;)this.eventManager.addEventListener(o.document.documentElement,"click",()=>{this.hot.unlisten()}),o=Nu(o);this.eventManager.addEventListener(fi(Fr,this),"selectstart",a=>{this.settings.fragmentSelection||pp(a.target)||a.preventDefault()})}translateFromRenderableToVisualCoords(e){let{row:t,col:i}=e;return this.hot._createCellCoords(...this.translateFromRenderableToVisualIndex(t,i))}translateFromRenderableToVisualIndex(e,t){let i=e>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(e):e,s=t>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(t):t;return i===null&&(i=e),s===null&&(s=t),[i,s]}countRenderableIndexes(e,t){const i=Math.min(e.getNotTrimmedIndexesLength(),t),s=e.getNearestNotHiddenIndex(i-1,-1);return s===null?0:e.getRenderableFromVisualIndex(s)+1}countRenderableColumns(){return this.countRenderableIndexes(this.hot.columnIndexMapper,this.settings.maxCols)}countRenderableRows(){return this.countRenderableIndexes(this.hot.rowIndexMapper,this.settings.maxRows)}countNotHiddenRowIndexes(e,t){return this.countNotHiddenIndexes(e,t,this.hot.rowIndexMapper,this.countRenderableRows())}countNotHiddenColumnIndexes(e,t){return this.countNotHiddenIndexes(e,t,this.hot.columnIndexMapper,this.countRenderableColumns())}countNotHiddenIndexes(e,t,i,s){if(isNaN(e)||e<0)return 0;const r=i.getNearestNotHiddenIndex(e,t),o=i.getRenderableFromVisualIndex(r);if(!Number.isInteger(o))return 0;let a=0;return t<0?a=o+1:t>0&&(a=s-o),a}countNotHiddenFixedColumnsStart(){const e=this.hot.countCols(),t=Math.min(parseInt(this.settings.fixedColumnsStart,10),e)-1;return this.countNotHiddenColumnIndexes(t,-1)}countNotHiddenFixedRowsTop(){const e=this.hot.countRows(),t=Math.min(parseInt(this.settings.fixedRowsTop,10),e)-1;return this.countNotHiddenRowIndexes(t,-1)}countNotHiddenFixedRowsBottom(){const e=this.hot.countRows(),t=Math.max(e-parseInt(this.settings.fixedRowsBottom,10),0);return this.countNotHiddenRowIndexes(t,1)}countRenderableColumnsInRange(e,t){let i=0;for(let s=e;s<=t;s++)this.hot.columnIndexMapper.getRenderableFromVisualIndex(s)!==null&&(i+=1);return i}countRenderableRowsInRange(e,t){let i=0;for(let s=e;s<=t;s++)this.hot.rowIndexMapper.getRenderableFromVisualIndex(s)!==null&&(i+=1);return i}isMainTableNotFullyCoveredByOverlays(){const e=this.countNotHiddenFixedRowsTop()+this.countNotHiddenFixedRowsBottom(),t=this.countNotHiddenFixedColumnsStart();return this.hot.countRenderedRows()>e&&this.hot.countRenderedCols()>t}initializeWalkontable(){const e={ariaTags:this.settings.ariaTags,rtlMode:this.hot.isRtl(),externalRowCalculator:this.hot.getPlugin("autoRowSize")&&this.hot.getPlugin("autoRowSize").isEnabled(),table:fi(Fr,this),isDataViewInstance:()=>Yy(this.hot),preventOverflow:()=>this.settings.preventOverflow,preventWheel:()=>this.settings.preventWheel,stretchH:()=>this.settings.stretchH,data:(r,o)=>this.hot.getDataAtCell(...this.translateFromRenderableToVisualIndex(r,o)),totalRows:()=>this.countRenderableRows(),totalColumns:()=>this.countRenderableColumns(),fixedColumnsStart:()=>this.countNotHiddenFixedColumnsStart(),fixedRowsTop:()=>this.countNotHiddenFixedRowsTop(),fixedRowsBottom:()=>this.countNotHiddenFixedRowsBottom(),shouldRenderInlineStartOverlay:()=>this.settings.fixedColumnsStart>0||e.rowHeaders().length>0,shouldRenderTopOverlay:()=>this.settings.fixedRowsTop>0||e.columnHeaders().length>0,shouldRenderBottomOverlay:()=>this.settings.fixedRowsBottom>0,minSpareRows:()=>this.settings.minSpareRows,renderAllRows:this.settings.renderAllRows,renderAllColumns:this.settings.renderAllColumns,rowHeaders:()=>{const r=[];return this.hot.hasRowHeaders()&&r.push((o,a)=>{const l=o>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(o):o;this.appendRowHeader(l,a)}),this.hot.runHooks("afterGetRowHeaderRenderers",r),rr(db,this,r.length),this.hot.getSettings().ariaTags&&aw(Gy,this,jY).call(this)===this.hot.countCols()&&aw(Gy,this,Zwe).call(this,fi(db,this)),r},columnHeaders:()=>{const r=[];return this.hot.hasColHeaders()&&r.push((o,a)=>{const l=o>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(o):o;this.appendColHeader(l,a)}),this.hot.runHooks("afterGetColumnHeaderRenderers",r),rr(fx,this,r.length),r},columnWidth:r=>{const o=this.hot.columnIndexMapper.getVisualFromRenderableIndex(r);return this.hot.getColWidth(o===null?r:o)},rowHeight:r=>{const o=this.hot.rowIndexMapper.getVisualFromRenderableIndex(r);return this.hot.getRowHeight(o===null?r:o)},rowHeightByOverlayName:(r,o)=>{const a=this.hot.rowIndexMapper.getVisualFromRenderableIndex(r),l=a===null?r:a;return this.hot.runHooks("modifyRowHeightByOverlayName",this.hot.getRowHeight(l),l,o)},cellRenderer:(r,o,a)=>{const[l,c]=this.translateFromRenderableToVisualIndex(r,o),h=this.hot.runHooks("modifyGetCellCoords",l,c);let u=l,d=c;Array.isArray(h)&&([u,d]=h);const f=this.hot.getCellMeta(u,d),g=this.hot.colToProp(d);let m=this.hot.getDataAtRowProp(u,g);this.hot.hasHook("beforeValueRender")&&(m=this.hot.runHooks("beforeValueRender",m,f)),this.hot.runHooks("beforeRenderer",a,l,c,g,m,f),this.hot.getCellRenderer(f)(this.hot,a,l,c,g,m,f),this.hot.runHooks("afterRenderer",a,l,c,g,m,f)},selections:this.hot.selection.highlight,hideBorderOnMouseDownOver:()=>this.settings.fragmentSelection,onWindowResize:()=>{this.hot&&!this.hot.isDestroyed&&this.hot.refreshDimensions()},onContainerElementResize:()=>{this.hot&&!this.hot.isDestroyed&&Lu(this.hot.rootElement)&&this.hot.refreshDimensions()},onCellMouseDown:(r,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o),h={row:!1,column:!1,cell:!1};this.hot.listen(),this.activeWt=l,rr(ka,this,!0),this.hot.runHooks("beforeOnCellMouseDown",r,c,a,h),!lc(r)&&(n$(r,{coords:c,selection:this.hot.selection,controller:h,cellCoordsFactory:(u,d)=>this.hot._createCellCoords(u,d)}),this.hot.runHooks("afterOnCellMouseDown",r,c,a),this.activeWt=this._wt)},onCellContextMenu:(r,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,rr(ka,this,!1),this.hot.selection.isInProgress()&&this.hot.selection.finish(),this.hot.runHooks("beforeOnCellContextMenu",r,c,a),!lc(r)&&(this.hot.runHooks("afterOnCellContextMenu",r,c,a),this.activeWt=this._wt)},onCellMouseOut:(r,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,this.hot.runHooks("beforeOnCellMouseOut",r,c,a),!lc(r)&&(this.hot.runHooks("afterOnCellMouseOut",r,c,a),this.activeWt=this._wt)},onCellMouseOver:(r,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o),h={row:!1,column:!1,cell:!1};this.activeWt=l,this.hot.runHooks("beforeOnCellMouseOver",r,c,a,h),!lc(r)&&(fi(ka,this)&&n$(r,{coords:c,selection:this.hot.selection,controller:h,cellCoordsFactory:(u,d)=>this.hot._createCellCoords(u,d)}),this.hot.runHooks("afterOnCellMouseOver",r,c,a),this.activeWt=this._wt)},onCellMouseUp:(r,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,this.hot.runHooks("beforeOnCellMouseUp",r,c,a),!(lc(r)||this.hot.isDestroyed)&&(this.hot.runHooks("afterOnCellMouseUp",r,c,a),this.activeWt=this._wt)},onCellCornerMouseDown:r=>{r.preventDefault(),this.hot.runHooks("afterOnCellCornerMouseDown",r)},onCellCornerDblClick:r=>{r.preventDefault(),this.hot.runHooks("afterOnCellCornerDblClick",r)},beforeDraw:(r,o)=>this.beforeRender(r,o),onDraw:r=>this.afterRender(r),onBeforeViewportScrollVertically:r=>{const o=this.hot.rowIndexMapper,a=r<0;let l=r;return!a&&(l=o.getVisualFromRenderableIndex(r),l===null)?r:(l=this.hot.runHooks("beforeViewportScrollVertically",l),this.hot.runHooks("beforeViewportScroll"),a?l:o.getRenderableFromVisualIndex(l))},onBeforeViewportScrollHorizontally:r=>{const o=this.hot.columnIndexMapper,a=r<0;let l=r;return!a&&(l=o.getVisualFromRenderableIndex(r),l===null)?r:(l=this.hot.runHooks("beforeViewportScrollHorizontally",l),this.hot.runHooks("beforeViewportScroll"),a?l:o.getRenderableFromVisualIndex(l))},onScrollVertically:()=>{this.hot.runHooks("afterScrollVertically"),this.hot.runHooks("afterScroll")},onScrollHorizontally:()=>{this.hot.runHooks("afterScrollHorizontally"),this.hot.runHooks("afterScroll")},onBeforeRemoveCellClassNames:()=>this.hot.runHooks("beforeRemoveCellClassNames"),onBeforeHighlightingRowHeader:(r,o,a)=>{const l=this.hot.rowIndexMapper,c=r<0;let h=r;c||(h=l.getVisualFromRenderableIndex(r));const u=this.hot.runHooks("beforeHighlightingRowHeader",h,o,a);return c?u:l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(u,1))},onBeforeHighlightingColumnHeader:(r,o,a)=>{const l=this.hot.columnIndexMapper,c=r<0;let h=r;c||(h=l.getVisualFromRenderableIndex(r));const u=this.hot.runHooks("beforeHighlightingColumnHeader",h,o,a);return c?u:l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(u,1))},onAfterDrawSelection:(r,o,a)=>{let l;const[c,h]=this.translateFromRenderableToVisualIndex(r,o),u=this.hot.selection.getSelectedRange();if(u.size()>0){const f=u.peekByIndex(a??0);l=[f.from.row,f.from.col,f.to.row,f.to.col]}return this.hot.runHooks("afterDrawSelection",c,h,l,a)},onBeforeDrawBorders:(r,o)=>{const[a,l,c,h]=r,u=[this.hot.rowIndexMapper.getVisualFromRenderableIndex(a),this.hot.columnIndexMapper.getVisualFromRenderableIndex(l),this.hot.rowIndexMapper.getVisualFromRenderableIndex(c),this.hot.columnIndexMapper.getVisualFromRenderableIndex(h)];return this.hot.runHooks("beforeDrawBorders",u,o)},onBeforeTouchScroll:()=>this.hot.runHooks("beforeTouchScroll"),onAfterMomentumScroll:()=>this.hot.runHooks("afterMomentumScroll"),onBeforeStretchingColumnWidth:(r,o)=>{const a=this.hot.columnIndexMapper.getVisualFromRenderableIndex(o);return this.hot.runHooks("beforeStretchingColumnWidth",r,a)},onModifyRowHeaderWidth:r=>this.hot.runHooks("modifyRowHeaderWidth",r),onModifyGetCellCoords:(r,o,a)=>{const l=this.hot.rowIndexMapper,c=this.hot.columnIndexMapper,h=o>=0?c.getVisualFromRenderableIndex(o):o,u=r>=0?l.getVisualFromRenderableIndex(r):r,d=this.hot.runHooks("modifyGetCellCoords",u,h,a);if(Array.isArray(d)){const[f,g,m,w]=d;return[f>=0?l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(f,1)):f,g>=0?c.getRenderableFromVisualIndex(c.getNearestNotHiddenIndex(g,1)):g,m>=0?l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(m,-1)):m,w>=0?c.getRenderableFromVisualIndex(c.getNearestNotHiddenIndex(w,-1)):w]}},viewportRowCalculatorOverride:r=>{let o=this.settings.viewportRowRenderingOffset;if(o==="auto"&&this.settings.fixedRowsTop&&(o=10),o>0||o==="auto"){const a=this.countRenderableRows(),l=r.startRow,c=r.endRow;if(typeof o=="number")r.startRow=Math.max(l-o,0),r.endRow=Math.min(c+o,a-1);else if(o==="auto"){const h=Math.ceil(c/a*12);r.startRow=Math.max(l-h,0),r.endRow=Math.min(c+h,a-1)}}this.hot.runHooks("afterViewportRowCalculatorOverride",r)},viewportColumnCalculatorOverride:r=>{let o=this.settings.viewportColumnRenderingOffset;if(o==="auto"&&this.settings.fixedColumnsStart&&(o=10),o>0||o==="auto"){const a=this.countRenderableColumns(),l=r.startColumn,c=r.endColumn;if(typeof o=="number"&&(r.startColumn=Math.max(l-o,0),r.endColumn=Math.min(c+o,a-1)),o==="auto"){const h=Math.ceil(c/a*6);r.startColumn=Math.max(l-h,0),r.endColumn=Math.min(c+h,a-1)}}this.hot.runHooks("afterViewportColumnCalculatorOverride",r)},rowHeaderWidth:()=>this.settings.rowHeaderWidth,columnHeaderHeight:()=>{const r=this.hot.runHooks("modifyColumnHeaderHeight");return this.settings.columnHeaderHeight||r}};this.hot.runHooks("beforeInitWalkontable",e),this._wt=new UP(e),this.activeWt=this._wt;const t=this._wt.wtTable.spreader,{width:i,height:s}=this.hot.rootElement.getBoundingClientRect();this.setLastSize(i,s),this.eventManager.addEventListener(t,"mousedown",r=>{r.target===t&&r.which===3&&r.stopPropagation()}),this.eventManager.addEventListener(t,"contextmenu",r=>{r.target===t&&r.which===3&&r.stopPropagation()}),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"click",()=>{this.settings.observeDOMVisibility&&this._wt.drawInterrupted&&(this.hot.forceFullRender=!0,this.render())})}isTextSelectionAllowed(e){if(pp(e))return!0;const t=Tc(e,this._wt.wtTable.spreader);return!!(this.settings.fragmentSelection===!0&&t||this.settings.fragmentSelection==="cell"&&this.isSelectedOnlyCell()&&t||!this.settings.fragmentSelection&&this.isCellEdited()&&this.isSelectedOnlyCell())}isMouseDown(){return fi(ka,this)}isSelectedOnlyCell(){var e,t;return(e=(t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingleCell())!==null&&e!==void 0?e:!1}isCellEdited(){const e=this.hot.getActiveEditor();return e&&e.isOpened()}beforeRender(e,t){e&&this.hot.runHooks("beforeViewRender",this.hot.forceFullRender,t)}afterRender(e){e&&this.hot.runHooks("afterViewRender",this.hot.forceFullRender)}appendRowHeader(e,t){if(t.firstChild){const i=t.firstChild;if(!Fe(i,"relative")){lo(t),this.appendRowHeader(e,t);return}this.updateCellHeader(i.querySelector(".rowHeader"),e,this.hot.getRowHeader)}else{const{rootDocument:i,getRowHeader:s}=this.hot,r=i.createElement("div"),o=i.createElement("span");r.className="relative",o.className="rowHeader",this.updateCellHeader(o,e,s),r.appendChild(o),t.appendChild(r)}this.hot.runHooks("afterGetRowHeader",e,t)}appendColHeader(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hot.getColHeader,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const r=()=>{const o=e>=0?this.hot.getColumnMeta(e).headerClassName:null;return o?o.split(" "):[]};if(t.firstChild){const o=t.firstChild;Fe(o,"relative")?(this.updateCellHeader(o.querySelector(".colHeader"),e,i,s),o.className="",ae(o,["relative",...r()])):(lo(t),this.appendColHeader(e,t,i,s))}else{const{rootDocument:o}=this.hot,a=o.createElement("div"),l=o.createElement("span"),c=r();a.classList.add("relative",...c),l.className="colHeader",this.settings.ariaTags&&($e(a,...ea()),$e(l,...ea())),this.updateCellHeader(l,e,i,s),a.appendChild(l),t.appendChild(a)}this.hot.runHooks("afterGetColHeader",e,t,s)}updateCellHeader(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=t;const o=this._wt.wtOverlays.getParentOverlay(e)||this._wt;e.parentNode&&(Fe(e,"colHeader")?r=o.wtTable.columnFilter.sourceToRendered(t):Fe(e,"rowHeader")&&(r=o.wtTable.rowFilter.sourceToRendered(t))),r>-1?od(e,i(t,s)):($c(e," "),ae(e,"cornerHeader"))}maximumVisibleElementWidth(e){const i=this._wt.wtViewport.getWorkspaceWidth()-e;return i>0?i:0}maximumVisibleElementHeight(e){const i=this._wt.wtViewport.getWorkspaceHeight()-e;return i>0?i:0}setLastSize(e,t){rr(gx,this,e),rr(mx,this,t)}getLastSize(){return{width:fi(gx,this),height:fi(mx,this)}}getFirstRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedRow(),1):null}getLastRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedRow(),-1):null}getFirstRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedColumn(),1):null}getLastRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedColumn(),-1):null}getFirstFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleRow())}getLastFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleRow())}getFirstFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleColumn())}getLastFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleColumn())}getFirstPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleRow())}getLastPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleRow())}getFirstPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleColumn())}getLastPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleColumn())}getColumnHeadersCount(){return fi(fx,this)}getRowHeadersCount(){return fi(db,this)}getViewportWidth(){return this._wt.wtViewport.getViewportWidth()}getWorkspaceWidth(){return this._wt.wtViewport.getWorkspaceWidth()}getViewportHeight(){return this._wt.wtViewport.getViewportHeight()}getWorkspaceHeight(){return this._wt.wtViewport.getWorkspaceHeight()}getElementOverlayName(e){var t;return((t=this._wt.wtOverlays.getParentOverlay(e))!==null&&t!==void 0?t:this._wt).wtTable.name}getOverlayByName(e){return this._wt.getOverlayByName(e)}isVisible(){return this._wt.wtTable.isVisible()}destroy(){this._wt.destroy(),this.eventManager.destroy()}}function jY(){return parseInt(this.hot.rootElement.getAttribute(F0()[0]),10)}function Zwe(n){const e=aw(Gy,this,jY).call(this)+n;$e(this.hot.rootElement,...F0(e))}const zY="ABCDEFGHIJKLMNOPQRSTUVWXYZ",RM=zY.length;function J0(n){let e=n+1,t="",i;for(;e>0;)i=(e-1)%RM,t=String.fromCharCode(65+i)+t,e=parseInt((e-i)/RM,10);return t}function Jwe(n){let e=0;if(n)for(let t=0,i=n.length-1;t<n.length;t+=1,i-=1)e+=RM**i*(zY.indexOf(n[t])+1);return e-=1,e}function eve(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;const t=[];let i,s;for(i=0;i<n;i++){const r=[];for(s=0;s<e;s++)r.push(J0(s)+(i+1));t.push(r)}return t}function tve(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;const t=[];let i,s;for(i=0;i<n;i++){const r={};for(s=0;s<e;s++)r[`prop${s}`]=J0(s)+(i+1);t.push(r)}return t}function nve(n,e){const t=[];let i;for(let s=0;s<n;s++){i=[];for(let r=0;r<e;r++)i.push("");t.push(i)}return t}function GP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=n;const i=[];return(!Array.isArray(n)||!Array.isArray(n[0]))&&(t=[n]),t.forEach((s,r)=>{Array.isArray(s)?s.forEach((o,a)=>{i.push([r+e,a,o])}):Object.keys(s).forEach(o=>{i.push([r+e,o,s[o]])})}),i}function KP(n){let e=0;return Array.isArray(n)&&(n[0]&&Array.isArray(n[0])?e=n[0].length:n[0]&&Je(n[0])&&(e=Y0(n[0]))),e}function UY(n){return!!(Array.isArray(n)&&n.length&&n.every(e=>Array.isArray(e)))}function YY(n){return!!(Array.isArray(n)&&n.length&&n.every(e=>typeof e=="object"&&!Array.isArray(e)&&e!==null))}const ive=Object.freeze(Object.defineProperty({__proto__:null,countFirstRowKeys:KP,createEmptySpreadsheetData:nve,createSpreadsheetData:eve,createSpreadsheetObjectData:tve,dataRowToChangesArray:GP,isArrayOfArrays:UY,isArrayOfObjects:YY,spreadsheetColumnIndex:Jwe,spreadsheetColumnLabel:J0},Symbol.toStringTag,{value:"Module"}));function Xg(n,e,t){return(e=sve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sve(n){var e=rve(n,"string");return typeof e=="symbol"?e:e+""}function rve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ove{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];Xg(this,"hot",void 0),Xg(this,"data",void 0),Xg(this,"dataType","array"),Xg(this,"colToProp",()=>{}),Xg(this,"propToCol",()=>{}),this.hot=e,this.data=t}modifyRowData(e){let t;return this.hot.hasHook("modifyRowData")&&(t=this.hot.runHooks("modifyRowData",e)),t!==void 0&&!Number.isInteger(t)?t:this.data[e]}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return!this.data||this.data.length===0?this.data:this.getByRange(null,null,e)}setData(e){this.data=e}getAtColumn(e){const t=[];return L(this.data,(i,s)=>{const r=this.getAtCell(s,e);t.push(r)}),t}getAtRow(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=t===void 0&&i===void 0,{dataDotNotation:o}=this.hot.getSettings();let a=null,l=null;if(a=this.modifyRowData(e),Array.isArray(a))l=[],r?a.forEach((c,h)=>{l[h]=this.getAtPhysicalCell(e,h,a)}):ke(t,i,c=>{l[c-t]=this.getAtPhysicalCell(e,c,a)});else if(Je(a)||Yt(a))if(s?l=[]:l={},!r||s){const h=this.countFirstRowKeys()-1;ke(0,h,u=>{const d=this.colToProp(u);if(u>=(t||0)&&u<=(i||h)&&!Number.isInteger(d)){const f=this.getAtPhysicalCell(e,d,a);s?l.push(f):o?Wy(l,d,f):l[d]=f}})}else et(a,(c,h)=>{const u=this.getAtPhysicalCell(e,h,a);o?Wy(l,h,u):l[h]=u});return l}setAtCell(e,t,i){if(!(e>=this.countRows()||t>=this.countFirstRowKeys())){if(this.hot.hasHook("modifySourceData")){const s=Cr(i);this.hot.runHooks("modifySourceData",e,t,s,"set"),s.isTouched()&&(i=s.value)}Number.isInteger(t)?this.data[e][t]=i:Wy(this.data[e],t,i)}}getAtPhysicalCell(e,t,i){let s=null;if(i)if(typeof t=="string"){const{dataDotNotation:r}=this.hot.getSettings();s=r?ZU(i,t):i[t]}else typeof t=="function"?s=t(i):s=i[t];if(this.hot.hasHook("modifySourceData")){const r=Cr(s);this.hot.runHooks("modifySourceData",e,t,r,"get"),r.isTouched()&&(s=r.value)}return s}getAtCell(e,t){const i=this.modifyRowData(e);return this.getAtPhysicalCell(e,this.colToProp(t),i)}getByRange(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1,r=null,o=null,a=null,l=null;e===null||t===null?(s=!0,r=0,a=this.countRows()-1):(r=Math.min(e.row,t.row),o=Math.min(e.col,t.col),a=Math.max(e.row,t.row),l=Math.max(e.col,t.col));const c=[];return ke(r,a,h=>{c.push(s?this.getAtRow(h,void 0,void 0,i):this.getAtRow(h,o,l,i))}),c}countRows(){if(this.hot.hasHook("modifySourceLength")){const e=this.hot.runHooks("modifySourceLength");if(Number.isInteger(e))return e}return this.data.length}countFirstRowKeys(){return KP(this.data)}destroy(){this.data=null,this.hot=null}}function i$(n,e,t){return(e=ave(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ave(n){var e=lve(n,"string");return typeof e=="symbol"?e:e+""}function lve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ad{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;i$(this,"indexedValues",[]),i$(this,"initValueOrFn",void 0),this.initValueOrFn=e}getValues(){return this.indexedValues}getValueAtIndex(e){const t=this.indexedValues;if(e<t.length)return t[e]}setValues(e){this.indexedValues=e.slice(),this.runLocalHooks("change")}setValueAtIndex(e,t){return e<this.indexedValues.length?(this.indexedValues[e]=t,this.runLocalHooks("change"),!0):!1}clear(){this.setDefaultValues()}getLength(){return this.getValues().length}setDefaultValues(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.indexedValues.length;this.indexedValues.length=0,Yt(this.initValueOrFn)?ke(e-1,t=>this.indexedValues.push(this.initValueOrFn(t))):ke(e-1,()=>this.indexedValues.push(this.initValueOrFn)),this.runLocalHooks("change")}init(e){return this.setDefaultValues(e),this.runLocalHooks("init"),this}insert(){this.runLocalHooks("change")}remove(){this.runLocalHooks("change")}destroy(){this.clearLocalHooks(),this.indexedValues=null,this.initValueOrFn=null}}Lt(ad,Mi);function qP(n,e,t,i){const s=t.length?t[0]:void 0;return[...n.slice(0,s),...t.map((r,o)=>Yt(i)?i(r,o):i),...s===void 0?[]:n.slice(s)]}function XP(n,e){return _l(n,(t,i)=>e.includes(i)===!1)}class eh extends ad{insert(e,t){this.indexedValues=qP(this.indexedValues,e,t,this.initValueOrFn),super.insert(e,t)}remove(e){this.indexedValues=XP(this.indexedValues,e),super.remove(e)}}class e_ extends eh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;super(e)}getHiddenIndexes(){return Un(this.getValues(),(e,t,i)=>(t&&e.push(i),e),[])}}function QP(n,e,t){return[...n.slice(0,e),...t,...n.slice(e)]}function lw(n,e){return _l(n,t=>e.includes(t)===!1)}function ZP(n,e){return lt(n,t=>t-e.filter(i=>i<t).length)}function JP(n,e){const t=e[0],i=e.length;return lt(n,s=>s>=t?s+i:s)}function cve(n,e,t){return(e=hve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hve(n){var e=uve(n,"string");return typeof e=="symbol"?e:e+""}function uve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class t_ extends ad{constructor(){super(...arguments),cve(this,"orderOfIndexes",[])}getValues(){return this.orderOfIndexes.map(e=>this.indexedValues[e])}setValues(e){this.orderOfIndexes=[...Array(e.length).keys()],super.setValues(e)}setValueAtIndex(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.orderOfIndexes.length;return e<this.indexedValues.length?(this.indexedValues[e]=t,this.orderOfIndexes.includes(e)===!1&&this.orderOfIndexes.splice(i,0,e),this.runLocalHooks("change"),!0):!1}clearValue(e){this.orderOfIndexes=lw(this.orderOfIndexes,[e]),Yt(this.initValueOrFn)?super.setValueAtIndex(e,this.initValueOrFn(e)):super.setValueAtIndex(e,this.initValueOrFn)}getLength(){return this.orderOfIndexes.length}setDefaultValues(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.indexedValues.length;this.orderOfIndexes.length=0,super.setDefaultValues(e)}insert(e,t){this.indexedValues=qP(this.indexedValues,e,t,this.initValueOrFn),this.orderOfIndexes=JP(this.orderOfIndexes,t),super.insert(e,t)}remove(e){this.indexedValues=XP(this.indexedValues,e),this.orderOfIndexes=lw(this.orderOfIndexes,e),this.orderOfIndexes=ZP(this.orderOfIndexes,e),super.remove(e)}getEntries(){return this.orderOfIndexes.map(e=>[e,this.getValueAtIndex(e)])}}class tv extends eh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;super(e)}getTrimmedIndexes(){return Un(this.getValues(),(e,t,i)=>(t&&e.push(i),e),[])}}const s$=new Map([["indexesSequence",{getListWithInsertedItems:QP,getListWithRemovedItems:lw}],["physicallyIndexed",{getListWithInsertedItems:qP,getListWithRemovedItems:XP}]]),GY=n=>{if(s$.has(n)===!1)throw new Error(`Alter strategy with ID '${n}' does not exist.`);return s$.get(n)};class KY extends ad{constructor(){super(e=>e)}insert(e,t){const i=JP(this.indexedValues,t);this.indexedValues=QP(i,e,t),super.insert(e,t)}remove(e){const t=lw(this.indexedValues,e);this.indexedValues=ZP(t,e),super.remove(e)}}const r$=new Map([["hiding",e_],["index",ad],["linkedPhysicalIndexToValue",t_],["physicalIndexToValue",eh],["trimming",tv]]);function dve(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!r$.has(n))throw new Error(`The provided map type ("${n}") does not exist.`);return new(r$.get(n))(e)}function fve(n,e,t){return(e=gve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gve(n){var e=mve(n,"string");return typeof e=="symbol"?e:e+""}function mve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let xM=0;class eI{constructor(){fve(this,"collection",new Map)}register(e,t){this.collection.has(e)===!1&&(this.collection.set(e,t),t.addLocalHook("change",()=>this.runLocalHooks("change",t)),xM+=1)}unregister(e){const t=this.collection.get(e);Me(t)&&(t.destroy(),this.collection.delete(e),this.runLocalHooks("change",t),xM-=1)}unregisterAll(){this.collection.forEach((e,t)=>this.unregister(t)),this.collection.clear()}get(e){return Xt(e)?Array.from(this.collection.values()):this.collection.get(e)}getLength(){return this.collection.size}removeFromEvery(e){this.collection.forEach(t=>{t.remove(e)})}insertToEvery(e,t){this.collection.forEach(i=>{i.insert(e,t)})}initEvery(e){this.collection.forEach(t=>{t.init(e)})}}Lt(eI,Mi);function pve(){return xM}function px(n,e,t){return(e=wve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wve(n){var e=vve(n,"string");return typeof e=="symbol"?e:e+""}function vve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class o$ extends eI{constructor(e,t){super(),px(this,"mergedValuesCache",[]),px(this,"aggregationFunction",void 0),px(this,"fallbackValue",void 0),this.aggregationFunction=e,this.fallbackValue=t}getMergedValues(){if((arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0)return this.mergedValuesCache;if(this.getLength()===0)return[];const t=lt(this.get(),r=>r.getValues()),i=[],s=Me(t[0])&&t[0].length||0;for(let r=0;r<s;r+=1){const o=[];for(let a=0;a<this.getLength();a+=1)o.push(t[a][r]);i.push(o)}return lt(i,this.aggregationFunction)}getMergedValueAtIndex(e,t){const i=this.getMergedValues(t)[e];return Me(i)?i:this.fallbackValue}updateCache(){this.mergedValuesCache=this.getMergedValues(!1)}}function bve(n,e,t){yve(n,e),e.set(n,t)}function yve(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Cve(n,e,t){return n.set(qY(n,e),t),t}function Sve(n,e){return n.get(qY(n,e))}function qY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var wx=new WeakMap;class XY{constructor(){bve(this,wx,[])}subscribe(e){return this.addLocalHook("change",e),this._write(Sve(wx,this)),this}unsubscribe(){return this.runLocalHooks("unsubscribe"),this.clearLocalHooks(),this}_write(e){return e.length>0&&this.runLocalHooks("change",e),this}_writeInitialChanges(e){Cve(wx,this,e)}}Lt(XY,Mi);function a$(n,e){const t=[];let i=0,s=0;for(;i<n.length&&s<e.length;i++,s++)n[i]!==e[s]&&t.push({op:"replace",index:s,oldValue:n[i],newValue:e[s]});for(;i<e.length;i++)t.push({op:"insert",index:i,oldValue:void 0,newValue:e[i]});for(;s<n.length;s++)t.push({op:"remove",index:s,oldValue:n[s],newValue:void 0});return t}function Qg(n,e,t){_ve(n,e),e.set(n,t)}function _ve(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function or(n,e){return n.get(QY(n,e))}function gb(n,e,t){return n.set(QY(n,e),t),t}function QY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var mb=new WeakMap,Zg=new WeakMap,pb=new WeakMap,wb=new WeakMap,vb=new WeakMap;class Rve{constructor(){let{initialIndexValue:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Qg(this,mb,new Set),Qg(this,Zg,[]),Qg(this,pb,[]),Qg(this,wb,!1),Qg(this,vb,!1),gb(vb,this,e??!1)}createObserver(){const e=new XY;return or(mb,this).add(e),e.addLocalHook("unsubscribe",()=>{or(mb,this).delete(e)}),e._writeInitialChanges(a$(or(Zg,this),or(pb,this))),e}emit(e){let t=or(pb,this);(!or(wb,this)||or(Zg,this).length!==e.length)&&(e.length===0?e=new Array(t.length).fill(or(vb,this)):gb(Zg,this,new Array(e.length).fill(or(vb,this))),or(wb,this)||(gb(wb,this,!0),t=or(Zg,this)));const i=a$(t,e);or(mb,this).forEach(s=>s._write(i)),gb(pb,this,e)}}function Gi(n,e,t){return(e=xve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xve(n){var e=Eve(n,"string");return typeof e=="symbol"?e:e+""}function Eve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class EM{constructor(){Gi(this,"indexesSequence",new KY),Gi(this,"trimmingMapsCollection",new o$(e=>e.some(t=>t===!0),!1)),Gi(this,"hidingMapsCollection",new o$(e=>e.some(t=>t===!0),!1)),Gi(this,"variousMapsCollection",new eI),Gi(this,"hidingChangesObservable",new Rve({initialIndexValue:!1})),Gi(this,"notTrimmedIndexesCache",[]),Gi(this,"notHiddenIndexesCache",[]),Gi(this,"isBatched",!1),Gi(this,"indexesSequenceChanged",!1),Gi(this,"indexesChangeSource",void 0),Gi(this,"trimmedIndexesChanged",!1),Gi(this,"hiddenIndexesChanged",!1),Gi(this,"renderablePhysicalIndexesCache",[]),Gi(this,"fromPhysicalToVisualIndexesCache",new Map),Gi(this,"fromVisualToRenderableIndexesCache",new Map),this.indexesSequence.addLocalHook("change",()=>{this.indexesSequenceChanged=!0,this.updateCache(),this.runLocalHooks("indexesSequenceChange",this.indexesChangeSource),this.runLocalHooks("change",this.indexesSequence,null)}),this.trimmingMapsCollection.addLocalHook("change",e=>{this.trimmedIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",e,this.trimmingMapsCollection)}),this.hidingMapsCollection.addLocalHook("change",e=>{this.hiddenIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",e,this.hidingMapsCollection)}),this.variousMapsCollection.addLocalHook("change",e=>{this.runLocalHooks("change",e,this.variousMapsCollection)})}suspendOperations(){this.isBatched=!0}resumeOperations(){this.isBatched=!1,this.updateCache()}createChangesObserver(e){if(e!=="hiding")throw new Error(`Unsupported index map type "${e}".`);return this.hidingChangesObservable.createObserver()}createAndRegisterIndexMap(e,t,i){return this.registerMap(e,dve(t,i))}registerMap(e,t){if(this.trimmingMapsCollection.get(e)||this.hidingMapsCollection.get(e)||this.variousMapsCollection.get(e))throw Error(`Map with name "${e}" has been already registered.`);t instanceof tv?this.trimmingMapsCollection.register(e,t):t instanceof e_?this.hidingMapsCollection.register(e,t):this.variousMapsCollection.register(e,t);const i=this.getNumberOfIndexes();return i>0&&t.init(i),t}unregisterMap(e){this.trimmingMapsCollection.unregister(e),this.hidingMapsCollection.unregister(e),this.variousMapsCollection.unregister(e)}unregisterAll(){this.trimmingMapsCollection.unregisterAll(),this.hidingMapsCollection.unregisterAll(),this.variousMapsCollection.unregisterAll()}getPhysicalFromVisualIndex(e){const t=this.notTrimmedIndexesCache[e];return Me(t)?t:null}getPhysicalFromRenderableIndex(e){const t=this.renderablePhysicalIndexesCache[e];return Me(t)?t:null}getVisualFromPhysicalIndex(e){const t=this.fromPhysicalToVisualIndexesCache.get(e);return Me(t)?t:null}getVisualFromRenderableIndex(e){return this.getVisualFromPhysicalIndex(this.getPhysicalFromRenderableIndex(e))}getRenderableFromVisualIndex(e){const t=this.fromVisualToRenderableIndexesCache.get(e);return Me(t)?t:null}getNearestNotHiddenIndex(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.getPhysicalFromVisualIndex(e)===null)return null;if(this.fromVisualToRenderableIndexesCache.has(e))return e;const r=Array.from(this.fromVisualToRenderableIndexesCache.keys());let o=-1;return t>0?o=r.findIndex(a=>a>e):o=r.reverse().findIndex(a=>a<e),o===-1?i?this.getNearestNotHiddenIndex(e,-t,!1):null:r[o]}initToLength(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNumberOfIndexes();this.notTrimmedIndexesCache=[...new Array(e).keys()],this.notHiddenIndexesCache=[...new Array(e).keys()],this.suspendOperations(),this.indexesChangeSource="init",this.indexesSequence.init(e),this.indexesChangeSource=void 0,this.trimmingMapsCollection.initEvery(e),this.resumeOperations(),this.suspendOperations(),this.hidingMapsCollection.initEvery(e),this.variousMapsCollection.initEvery(e),this.resumeOperations(),this.runLocalHooks("init")}fitToLength(e){const t=this.getNumberOfIndexes();if(e<t){const i=[...Array(this.getNumberOfIndexes()-e).keys()].map(s=>s+e);this.removeIndexes(i)}else this.insertIndexes(t,e-t)}getIndexesSequence(){return this.indexesSequence.getValues()}setIndexesSequence(e){this.indexesChangeSource===void 0&&(this.indexesChangeSource="update"),this.indexesSequence.setValues(e),this.indexesChangeSource==="update"&&(this.indexesChangeSource=void 0)}getNotTrimmedIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.notTrimmedIndexesCache:this.getIndexesSequence().filter(i=>this.isTrimmed(i)===!1)}getNotTrimmedIndexesLength(){return this.getNotTrimmedIndexes().length}getNotHiddenIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.notHiddenIndexesCache:this.getIndexesSequence().filter(i=>this.isHidden(i)===!1)}getNotHiddenIndexesLength(){return this.getNotHiddenIndexes().length}getRenderableIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.renderablePhysicalIndexesCache:this.getNotTrimmedIndexes().filter(i=>this.isHidden(i)===!1)}getRenderableIndexesLength(){return this.getRenderableIndexes().length}getNumberOfIndexes(){return this.getIndexesSequence().length}moveIndexes(e,t){typeof e=="number"&&(e=[e]);const i=lt(e,c=>this.getPhysicalFromVisualIndex(c)),s=this.getNotTrimmedIndexesLength(),r=e.length,o=lw(this.getIndexesSequence(),i),a=o.filter(c=>this.isTrimmed(c)===!1);let l=o.indexOf(a[a.length-1])+1;if(t+r<s){const c=a[t];l=o.indexOf(c)}this.indexesChangeSource="move",this.setIndexesSequence(QP(o,l,i)),this.indexesChangeSource=void 0}isTrimmed(e){return this.trimmingMapsCollection.getMergedValueAtIndex(e)}isHidden(e){return this.hidingMapsCollection.getMergedValueAtIndex(e)}insertIndexes(e,t){const i=this.getNotTrimmedIndexes()[e],s=Me(i)?i:this.getNumberOfIndexes(),r=this.getIndexesSequence().includes(i)?this.getIndexesSequence().indexOf(i):this.getNumberOfIndexes(),o=lt(new Array(t).fill(s),(a,l)=>a+l);this.suspendOperations(),this.indexesChangeSource="insert",this.indexesSequence.insert(r,o),this.indexesChangeSource=void 0,this.trimmingMapsCollection.insertToEvery(r,o),this.hidingMapsCollection.insertToEvery(r,o),this.variousMapsCollection.insertToEvery(r,o),this.resumeOperations()}removeIndexes(e){this.suspendOperations(),this.indexesChangeSource="remove",this.indexesSequence.remove(e),this.indexesChangeSource=void 0,this.trimmingMapsCollection.removeFromEvery(e),this.hidingMapsCollection.removeFromEvery(e),this.variousMapsCollection.removeFromEvery(e),this.resumeOperations()}updateCache(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=this.indexesSequenceChanged||this.trimmedIndexesChanged||this.hiddenIndexesChanged;(e===!0||this.isBatched===!1&&t===!0)&&(this.trimmingMapsCollection.updateCache(),this.hidingMapsCollection.updateCache(),this.notTrimmedIndexesCache=this.getNotTrimmedIndexes(!1),this.notHiddenIndexesCache=this.getNotHiddenIndexes(!1),this.renderablePhysicalIndexesCache=this.getRenderableIndexes(!1),this.cacheFromPhysicalToVisualIndexes(),this.cacheFromVisualToRenderableIndexes(),this.hiddenIndexesChanged&&this.hidingChangesObservable.emit(this.hidingMapsCollection.getMergedValues()),this.runLocalHooks("cacheUpdated",{indexesSequenceChanged:this.indexesSequenceChanged,trimmedIndexesChanged:this.trimmedIndexesChanged,hiddenIndexesChanged:this.hiddenIndexesChanged}),this.indexesSequenceChanged=!1,this.trimmedIndexesChanged=!1,this.hiddenIndexesChanged=!1)}cacheFromPhysicalToVisualIndexes(){const e=this.getNotTrimmedIndexesLength();this.fromPhysicalToVisualIndexesCache.clear();for(let t=0;t<e;t+=1){const i=this.getPhysicalFromVisualIndex(t);this.fromPhysicalToVisualIndexesCache.set(i,t)}}cacheFromVisualToRenderableIndexes(){const e=this.getRenderableIndexesLength();this.fromVisualToRenderableIndexesCache.clear();for(let t=0;t<e;t+=1){const i=this.getPhysicalFromRenderableIndex(t),s=this.getVisualFromPhysicalIndex(i);this.fromVisualToRenderableIndexesCache.set(s,t)}}}Lt(EM,Mi);function Tve(n,e){return et(e,(t,i)=>{Xt(n[i])&&(n[i]=t)}),n}function ZY(n){const t=/^([a-zA-Z]{2})-([a-zA-Z]{2})$/.exec(n);return t?`${t[1].toLowerCase()}-${t[2].toUpperCase()}`:n}function JY(n){Me(n)&&SP(Nt`Language with code "${n}" was not found. You should register particular language\x20
    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.`)}function Mve(n,e){return Array.isArray(n)&&Number.isInteger(e)?n[e]:n}const{register:Ave,getValues:Pve}=vo("phraseFormatters");function Ive(n,e){Ave(n,e)}function Ove(){return Pve()}Ive("pluralize",Mve);const eG="ContextMenu:items",qe=eG,tI=`${qe}.noItems`,nI=`${qe}.insertRowAbove`,iI=`${qe}.insertRowBelow`,sI=`${qe}.insertColumnOnTheLeft`,rI=`${qe}.insertColumnOnTheRight`,oI=`${qe}.removeRow`,aI=`${qe}.removeColumn`,lI=`${qe}.undo`,cI=`${qe}.redo`,eS=`${qe}.readOnly`,hI=`${qe}.clearColumn`,uI=`${qe}.copy`,dI=`${qe}.copyWithHeaders`,fI=`${qe}.copyWithGroupHeaders`,gI=`${qe}.copyHeadersOnly`,mI=`${qe}.cut`,pI=`${qe}.freezeColumn`,wI=`${qe}.unfreezeColumn`,vI=`${qe}.mergeCells`,bI=`${qe}.unmergeCells`,yI=`${qe}.addComment`,CI=`${qe}.editComment`,SI=`${qe}.removeComment`,_I=`${qe}.readOnlyComment`,RI=`${qe}.align`,tS=`${qe}.align.left`,nS=`${qe}.align.center`,iS=`${qe}.align.right`,sS=`${qe}.align.justify`,rS=`${qe}.align.top`,oS=`${qe}.align.middle`,aS=`${qe}.align.bottom`,xI=`${qe}.borders`,EI=`${qe}.borders.top`,TI=`${qe}.borders.right`,MI=`${qe}.borders.bottom`,AI=`${qe}.borders.left`,PI=`${qe}.borders.remove`,II=`${qe}.nestedHeaders.insertChildRow`,OI=`${qe}.nestedHeaders.detachFromParent`,kI=`${qe}.hideColumn`,HI=`${qe}.showColumn`,DI=`${qe}.hideRow`,NI=`${qe}.showRow`,as="Filters:",Pn=`${as}conditions`,n_=`${Pn}.none`,LI=`${Pn}.isEmpty`,$I=`${Pn}.isNotEmpty`,FI=`${Pn}.isEqualTo`,BI=`${Pn}.isNotEqualTo`,VI=`${Pn}.beginsWith`,WI=`${Pn}.endsWith`,jI=`${Pn}.contains`,zI=`${Pn}.doesNotContain`,kve=`${Pn}.byValue`,UI=`${Pn}.greaterThan`,YI=`${Pn}.greaterThanOrEqualTo`,GI=`${Pn}.lessThan`,KI=`${Pn}.lessThanOrEqualTo`,qI=`${Pn}.isBetween`,XI=`${Pn}.isNotBetween`,QI=`${Pn}.after`,ZI=`${Pn}.before`,JI=`${Pn}.today`,eO=`${Pn}.tomorrow`,tO=`${Pn}.yesterday`,nO=`${as}labels.filterByCondition`,iO=`${as}labels.filterByValue`,sO=`${as}labels.conjunction`,i_=`${as}labels.disjunction`,lS=`${as}values.blankCells`,rO=`${as}buttons.selectAll`,oO=`${as}buttons.clear`,aO=`${as}buttons.ok`,lO=`${as}buttons.cancel`,cO=`${as}buttons.placeholder.search`,hO=`${as}buttons.placeholder.value`,uO=`${as}buttons.placeholder.secondValue`,dO="CheckboxRenderer:",fO=`${dO}checked`,gO=`${dO}unchecked`,Hve=Object.freeze(Object.defineProperty({__proto__:null,CHECKBOX_CHECKED:fO,CHECKBOX_RENDERER_NAMESPACE:dO,CHECKBOX_UNCHECKED:gO,CONTEXTMENU_ITEMS_ADD_COMMENT:yI,CONTEXTMENU_ITEMS_ALIGNMENT:RI,CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM:aS,CONTEXTMENU_ITEMS_ALIGNMENT_CENTER:nS,CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY:sS,CONTEXTMENU_ITEMS_ALIGNMENT_LEFT:tS,CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE:oS,CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT:iS,CONTEXTMENU_ITEMS_ALIGNMENT_TOP:rS,CONTEXTMENU_ITEMS_BORDERS:xI,CONTEXTMENU_ITEMS_BORDERS_BOTTOM:MI,CONTEXTMENU_ITEMS_BORDERS_LEFT:AI,CONTEXTMENU_ITEMS_BORDERS_RIGHT:TI,CONTEXTMENU_ITEMS_BORDERS_TOP:EI,CONTEXTMENU_ITEMS_CLEAR_COLUMN:hI,CONTEXTMENU_ITEMS_COPY:uI,CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY:gI,CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS:fI,CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS:dI,CONTEXTMENU_ITEMS_CUT:mI,CONTEXTMENU_ITEMS_EDIT_COMMENT:CI,CONTEXTMENU_ITEMS_FREEZE_COLUMN:pI,CONTEXTMENU_ITEMS_HIDE_COLUMN:kI,CONTEXTMENU_ITEMS_HIDE_ROW:DI,CONTEXTMENU_ITEMS_INSERT_LEFT:sI,CONTEXTMENU_ITEMS_INSERT_RIGHT:rI,CONTEXTMENU_ITEMS_MERGE_CELLS:vI,CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD:OI,CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD:II,CONTEXTMENU_ITEMS_NO_ITEMS:tI,CONTEXTMENU_ITEMS_READ_ONLY:eS,CONTEXTMENU_ITEMS_READ_ONLY_COMMENT:_I,CONTEXTMENU_ITEMS_REDO:cI,CONTEXTMENU_ITEMS_REMOVE_BORDERS:PI,CONTEXTMENU_ITEMS_REMOVE_COLUMN:aI,CONTEXTMENU_ITEMS_REMOVE_COMMENT:SI,CONTEXTMENU_ITEMS_REMOVE_ROW:oI,CONTEXTMENU_ITEMS_ROW_ABOVE:nI,CONTEXTMENU_ITEMS_ROW_BELOW:iI,CONTEXTMENU_ITEMS_SHOW_COLUMN:HI,CONTEXTMENU_ITEMS_SHOW_ROW:NI,CONTEXTMENU_ITEMS_UNDO:lI,CONTEXTMENU_ITEMS_UNFREEZE_COLUMN:wI,CONTEXTMENU_ITEMS_UNMERGE_CELLS:bI,CONTEXT_MENU_ITEMS_NAMESPACE:eG,FILTERS_BUTTONS_CANCEL:lO,FILTERS_BUTTONS_CLEAR:oO,FILTERS_BUTTONS_OK:aO,FILTERS_BUTTONS_PLACEHOLDER_SEARCH:cO,FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE:uO,FILTERS_BUTTONS_PLACEHOLDER_VALUE:hO,FILTERS_BUTTONS_SELECT_ALL:rO,FILTERS_CONDITIONS_AFTER:QI,FILTERS_CONDITIONS_BEFORE:ZI,FILTERS_CONDITIONS_BEGINS_WITH:VI,FILTERS_CONDITIONS_BETWEEN:qI,FILTERS_CONDITIONS_BY_VALUE:kve,FILTERS_CONDITIONS_CONTAINS:jI,FILTERS_CONDITIONS_EMPTY:LI,FILTERS_CONDITIONS_ENDS_WITH:WI,FILTERS_CONDITIONS_EQUAL:FI,FILTERS_CONDITIONS_GREATER_THAN:UI,FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL:YI,FILTERS_CONDITIONS_LESS_THAN:GI,FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL:KI,FILTERS_CONDITIONS_NAMESPACE:Pn,FILTERS_CONDITIONS_NONE:n_,FILTERS_CONDITIONS_NOT_BETWEEN:XI,FILTERS_CONDITIONS_NOT_CONTAIN:zI,FILTERS_CONDITIONS_NOT_EMPTY:$I,FILTERS_CONDITIONS_NOT_EQUAL:BI,FILTERS_CONDITIONS_TODAY:JI,FILTERS_CONDITIONS_TOMORROW:eO,FILTERS_CONDITIONS_YESTERDAY:tO,FILTERS_DIVS_FILTER_BY_CONDITION:nO,FILTERS_DIVS_FILTER_BY_VALUE:iO,FILTERS_LABELS_CONJUNCTION:sO,FILTERS_LABELS_DISJUNCTION:i_,FILTERS_NAMESPACE:as,FILTERS_VALUES_BLANK_CELLS:lS},Symbol.toStringTag,{value:"Module"}));/**
 * @preserve
 * Authors: Handsoncode
 * Last updated: Nov 15, 2017
 *
 * Description: Definition file for English - United States language-country.
 */const tG={languageCode:"en-US",[tI]:"No available options",[nI]:"Insert row above",[iI]:"Insert row below",[sI]:"Insert column left",[rI]:"Insert column right",[oI]:["Remove row","Remove rows"],[aI]:["Remove column","Remove columns"],[lI]:"Undo",[cI]:"Redo",[eS]:"Read only",[hI]:"Clear column",[RI]:"Alignment",[tS]:"Left",[nS]:"Center",[iS]:"Right",[sS]:"Justify",[rS]:"Top",[oS]:"Middle",[aS]:"Bottom",[pI]:"Freeze column",[wI]:"Unfreeze column",[xI]:"Borders",[EI]:"Top",[TI]:"Right",[MI]:"Bottom",[AI]:"Left",[PI]:"Remove border(s)",[yI]:"Add comment",[CI]:"Edit comment",[SI]:"Delete comment",[_I]:"Read-only comment",[vI]:"Merge cells",[bI]:"Unmerge cells",[uI]:"Copy",[dI]:["Copy with header","Copy with headers"],[fI]:["Copy with group header","Copy with group headers"],[gI]:["Copy header only","Copy headers only"],[mI]:"Cut",[II]:"Insert child row",[OI]:"Detach from parent",[kI]:["Hide column","Hide columns"],[HI]:["Show column","Show columns"],[DI]:["Hide row","Hide rows"],[NI]:["Show row","Show rows"],[n_]:"None",[LI]:"Is empty",[$I]:"Is not empty",[FI]:"Is equal to",[BI]:"Is not equal to",[VI]:"Begins with",[WI]:"Ends with",[jI]:"Contains",[zI]:"Does not contain",[UI]:"Greater than",[YI]:"Greater than or equal to",[GI]:"Less than",[KI]:"Less than or equal to",[qI]:"Is between",[XI]:"Is not between",[QI]:"After",[ZI]:"Before",[JI]:"Today",[eO]:"Tomorrow",[tO]:"Yesterday",[lS]:"Blank cells",[nO]:"Filter by condition",[iO]:"Filter by value",[sO]:"And",[i_]:"Or",[rO]:"Select all",[oO]:"Clear",[aO]:"OK",[lO]:"Cancel",[cO]:"Search",[hO]:"Value",[uO]:"Second value",[fO]:"Checked",[gO]:"Unchecked"},Dve=Hve,TM=tG.languageCode,{register:Nve,getItem:nG,hasItem:Lve,getValues:$ve}=vo("languagesDictionaries");iG(tG);function iG(n,e){let t=n,i=e;return Je(n)&&(i=n,t=i.languageCode),Fve(t,i),Nve(t,Yi(i)),Yi(i)}function Fve(n,e){n!==TM&&Tve(e,nG(TM))}function sG(n){return mO(n)?Yi(nG(n)):null}function mO(n){return Lve(n)}function Bve(){return $ve()}function rG(n,e,t){const i=sG(n);if(i===null)return null;const s=i[e];if(Xt(s))return null;const r=Vve(s,t);return Array.isArray(r)?r[0]:r}function Vve(n,e){let t=n;return L(Ove(),i=>{t=i(n,e)}),t}function Wve(n){let e=ZY(n);return mO(e)||(e=TM,JY(n)),e}function jve(n,e,t){return(e=zve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zve(n){var e=Uve(n,"string");return typeof e=="symbol"?e:e+""}function Uve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Dl extends NY{constructor(e,t){super(e,null),jve(this,"visualCellRange",null),this.visualCellRange=t||null,this.commit()}add(e){return this.visualCellRange===null?this.visualCellRange=this.settings.createCellRange(e):this.visualCellRange.expand(e),this}clear(){return this.visualCellRange=null,super.clear()}trimToVisibleCellsRangeOnly(e){let{from:t,to:i}=e,s=this.getNearestNotHiddenCoords(t,1),r=this.getNearestNotHiddenCoords(i,-1);return s===null||r===null?null:((s.row>r.row||s.col>r.col)&&(s=t,r=i),this.settings.createCellRange(s,s,r))}getNearestNotHiddenCoords(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t;const s=this.getNearestNotHiddenIndex(this.settings.rowIndexMapper,e.row,t);if(s===null)return null;const r=this.getNearestNotHiddenIndex(this.settings.columnIndexMapper,e.col,i);return r===null?null:this.settings.createCellCoords(s,r)}getNearestNotHiddenIndex(e,t,i){return t<0?t:e.getNearestNotHiddenIndex(t,i)}commit(){if(this.visualCellRange===null)return this;const e=this.trimToVisibleCellsRangeOnly(this.visualCellRange);return e===null?this.cellRange=null:this.cellRange=this.createRenderableCellRange(e.from,e.to),this}syncWith(e){const t=e.from.clone().normalize(),i=e.getVerticalDirection()==="N-S"?1:-1,s=e.getHorizontalDirection()==="W-E"?1:-1,r=this.settings.visualToRenderableCoords(this.visualCellRange.highlight);let o=null;if((r===null||r.col===null||r.row===null)&&(o=this.getNearestNotHiddenCoords(t,i,s)),o!==null&&e.overlaps(o)){const a=e.highlight.clone();if(a.row>=0&&(a.row=o.row),a.col>=0&&(a.col=o.col),this.cellRange===null){const l=this.settings.visualToRenderableCoords(a);this.cellRange=this.settings.createCellRange(l)}e.setHighlight(a)}return this.settings.selectionType==="focus"&&r!==null&&o===null&&e.setHighlight(this.visualCellRange.highlight),this}getCorners(){const{from:e,to:t}=this.cellRange;return[Math.min(e.row,t.row),Math.min(e.col,t.col),Math.max(e.row,t.row),Math.max(e.col,t.col)]}getVisualCorners(){const e=this.settings.renderableToVisualCoords(this.cellRange.getTopStartCorner()),t=this.settings.renderableToVisualCoords(this.cellRange.getBottomEndCorner());return[e.row,e.col,t.row,t.col]}createRenderableCellRange(e,t){const i=this.settings.visualToRenderableCoords(e),s=this.settings.visualToRenderableCoords(t);return i.row===null||i.col===null||s.row===null||s.col===null?null:this.settings.createCellRange(i,i,s)}}function vx(n){let{activeHeaderClassName:e,...t}=n;return new Dl({className:e,...t,selectionType:LY})}function Yve(n){let{areaCornerVisible:e,...t}=n;return new Dl({className:"area",createLayers:!0,border:{width:1,color:"#4b89ff",cornerVisible:e},...t,selectionType:LP})}function Gve(n){let{...e}=n;return new Dl({className:"highlight",...e,selectionType:LP})}function Kve(n){let{columnClassName:e,...t}=n;return new Dl({className:e,...t,selectionType:vwe})}function qve(n){let{cellCornerVisible:e,...t}=n;return new Dl({className:"current",headerAttributes:[rP()],border:{width:2,color:"#4b89ff",cornerVisible:e},...t,selectionType:$P})}function Xve(n){let{border:e,visualCellRange:t,...i}=n;return new Dl({...e,...i,selectionType:bwe},t)}function Qve(n){let{...e}=n;return new Dl({className:"fill",border:{width:1,color:"#ff0000"},...e,selectionType:pwe})}function l$(n){let{headerClassName:e,...t}=n;return new Dl({className:e,...t,selectionType:NP})}function Zve(n){let{rowClassName:e,...t}=n;return new Dl({className:e,...t,selectionType:wwe})}function Jve(n,e){ebe(n,e),e.add(n)}function ebe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function us(n,e,t){return(e=tbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tbe(n){var e=nbe(n,"string");return typeof e=="symbol"?e:e+""}function nbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ha(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var _o=new WeakSet;class ibe{constructor(e){Jve(this,_o),us(this,"options",void 0),us(this,"layerLevel",0),us(this,"focus",void 0),us(this,"fill",void 0),us(this,"layeredAreas",new Map),us(this,"areas",new Map),us(this,"rowHeaders",new Map),us(this,"columnHeaders",new Map),us(this,"activeRowHeaders",new Map),us(this,"activeColumnHeaders",new Map),us(this,"activeCornerHeaders",new Map),us(this,"rowHighlights",new Map),us(this,"columnHighlights",new Map),us(this,"customSelections",[]),this.options=e,this.focus=qve(e),this.fill=Qve(e)}isEnabledFor(e,t){let i=e;e===$P&&(i="current");let s=this.options.disabledCellSelection(t.row,t.col);return typeof s=="string"&&(s=[s]),s===!1||Array.isArray(s)&&!s.includes(i)}useLayerLevel(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.layerLevel=e,this}getFocus(){return this.focus}getFill(){return this.fill}createLayeredArea(){return Ha(_o,this,Da).call(this,this.layeredAreas,Yve)}getLayeredAreas(){return[...this.layeredAreas.values()]}createArea(){return Ha(_o,this,Da).call(this,this.areas,Gve)}getAreas(){return[...this.areas.values()]}createRowHeader(){return Ha(_o,this,Da).call(this,this.rowHeaders,l$)}getRowHeaders(){return[...this.rowHeaders.values()]}createColumnHeader(){return Ha(_o,this,Da).call(this,this.columnHeaders,l$)}getColumnHeaders(){return[...this.columnHeaders.values()]}createActiveRowHeader(){return Ha(_o,this,Da).call(this,this.activeRowHeaders,vx)}getActiveRowHeaders(){return[...this.activeRowHeaders.values()]}createActiveColumnHeader(){return Ha(_o,this,Da).call(this,this.activeColumnHeaders,vx)}getActiveColumnHeaders(){return[...this.activeColumnHeaders.values()]}createActiveCornerHeader(){return Ha(_o,this,Da).call(this,this.activeCornerHeaders,vx)}getActiveCornerHeaders(){return[...this.activeCornerHeaders.values()]}createRowHighlight(){return Ha(_o,this,Da).call(this,this.rowHighlights,Zve)}getRowHighlights(){return[...this.rowHighlights.values()]}createColumnHighlight(){return Ha(_o,this,Da).call(this,this.columnHighlights,Kve)}getColumnHighlights(){return[...this.columnHighlights.values()]}getCustomSelections(){return[...this.customSelections.values()]}addCustomSelection(e){this.customSelections.push(Xve({...this.options,...e}))}clear(){this.focus.clear(),this.fill.clear(),L(this.areas.values(),e=>void e.clear()),L(this.layeredAreas.values(),e=>void e.clear()),L(this.rowHeaders.values(),e=>void e.clear()),L(this.columnHeaders.values(),e=>void e.clear()),L(this.activeRowHeaders.values(),e=>void e.clear()),L(this.activeColumnHeaders.values(),e=>void e.clear()),L(this.activeCornerHeaders.values(),e=>void e.clear()),L(this.rowHighlights.values(),e=>void e.clear()),L(this.columnHighlights.values(),e=>void e.clear())}[Symbol.iterator](){return[this.focus,this.fill,...this.areas.values(),...this.layeredAreas.values(),...this.rowHeaders.values(),...this.columnHeaders.values(),...this.activeRowHeaders.values(),...this.activeColumnHeaders.values(),...this.activeCornerHeaders.values(),...this.rowHighlights.values(),...this.columnHighlights.values(),...this.customSelections][Symbol.iterator]()}}function Da(n,e){const t=this.layerLevel;if(n.has(t))return n.get(t);const i=e({layerLevel:t,...this.options});return n.set(t,i),i}function c$(n,e,t){return(e=sbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sbe(n){var e=rbe(n,"string");return typeof e=="symbol"?e:e+""}function rbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class obe{constructor(e){c$(this,"ranges",[]),c$(this,"createCellRange",void 0),this.createCellRange=e}isEmpty(){return this.size()===0}set(e){return this.clear(),this.ranges.push(this.createCellRange(e)),this}add(e){return this.ranges.push(this.createCellRange(e)),this}pop(){return this.ranges.pop(),this}current(){return this.peekByIndex(this.size()-1)}previous(){return this.peekByIndex(this.size()-2)}includes(e){return this.ranges.some(t=>t.includes(e))}clear(){return this.ranges.length=0,this}size(){return this.ranges.length}peekByIndex(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t;return e>=0&&e<this.size()&&(t=this.ranges[e]),t}[Symbol.iterator](){return this.ranges[Symbol.iterator]()}}function abe(n,e){oG(n,e),e.add(n)}function bx(n,e,t){oG(n,e),e.set(n,t)}function oG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function bt(n,e){return n.get(Gn(n,e))}function bb(n,e,t){return n.set(Gn(n,e),t),t}function Gn(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var yb=new WeakMap,en=new WeakMap,no=new WeakMap,ri=new WeakSet;class MM{constructor(e,t){abe(this,ri),bx(this,yb,void 0),bx(this,en,void 0),bx(this,no,{x:0,y:0}),bb(yb,this,e),bb(en,this,t)}transformStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=bt(en,this).createCellCoords(e,t);let r=bt(yb,this).current().highlight;const o=bt(en,this).visualToRenderableCoords(r);let a=0,l=0;if(this.runLocalHooks("beforeTransformStart",s),o.row!==null&&o.col!==null){const{width:c,height:h}=Gn(ri,this,aG).call(this),{row:u,col:d}=Gn(ri,this,u$).call(this,r),f=bt(en,this).fixedRowsBottom(),g=bt(en,this).minSpareRows(),m=bt(en,this).minSpareCols(),w=bt(en,this).autoWrapRow(),v=bt(en,this).autoWrapCol(),C=bt(en,this).createCellCoords(u+s.row,d+s.col);if(C.row>=h){const _=Cr(i&&g>0&&f===0),R=C.col+1,M=bt(en,this).createCellCoords(C.row-h,R>=c?R-c:R);this.runLocalHooks("beforeColumnWrap",_,Gn(ri,this,Td).call(this,M),R>=c),_.value?this.runLocalHooks("insertRowRequire",bt(en,this).countRenderableRows()):v&&C.assign(M)}else if(C.row<0){const _=Cr(v),R=C.col-1,M=bt(en,this).createCellCoords(h+C.row,R<0?c+R:R);this.runLocalHooks("beforeColumnWrap",_,Gn(ri,this,Td).call(this,M),R<0),v&&C.assign(M)}if(C.col>=c){const _=Cr(i&&m>0),R=C.row+1,M=bt(en,this).createCellCoords(R>=h?R-h:R,C.col-c);this.runLocalHooks("beforeRowWrap",_,Gn(ri,this,Td).call(this,M),R>=h),_.value?this.runLocalHooks("insertColRequire",bt(en,this).countRenderableColumns()):w&&C.assign(M)}else if(C.col<0){const _=Cr(w),R=C.row-1,M=bt(en,this).createCellCoords(R<0?h+R:R,c+C.col);this.runLocalHooks("beforeRowWrap",_,Gn(ri,this,Td).call(this,M),R<0),w&&C.assign(M)}const{rowDir:S,colDir:x}=Gn(ri,this,h$).call(this,C);a=S,l=x,r=Gn(ri,this,Td).call(this,C)}return this.runLocalHooks("afterTransformStart",r,a,l),r}transformEnd(e,t){const i=bt(en,this).createCellCoords(e,t),s=bt(yb,this).current(),r=bt(en,this).visualToRenderableCoords(s.highlight),o=Gn(ri,this,yx).call(this,s.to.row,s.from.row),a=Gn(ri,this,Cx).call(this,s.to.col,s.from.col),l=s.to.clone();let c=0,h=0;if(this.runLocalHooks("beforeTransformEnd",i),r.row!==null&&r.col!==null&&o!==null&&a!==null){const{row:u,col:d}=Gn(ri,this,u$).call(this,s.highlight),f=bt(en,this).createCellCoords(o+i.row,a+i.col),g=s.getTopStartCorner(),m=s.getTopEndCorner(),w=s.getBottomEndCorner();if(i.col<0&&a>=d&&f.col<d){const x=f.col-d;f.col=Gn(ri,this,Cx).call(this,g.col,m.col)+x}else if(i.col>0&&a<=d&&f.col>d){const x=Gn(ri,this,Cx).call(this,m.col,g.col),_=Math.max(f.col-x,1);f.col=x+_}if(i.row<0&&o>=u&&f.row<u){const x=f.row-u;f.row=Gn(ri,this,yx).call(this,g.row,w.row)+x}else if(i.row>0&&o<=u&&f.row>u){const x=Gn(ri,this,yx).call(this,w.row,g.row),_=Math.max(f.row-x,1);f.row=x+_}const{rowDir:v,colDir:C}=Gn(ri,this,h$).call(this,f);c=v,h=C;const S=Gn(ri,this,Td).call(this,f);i.row===0&&i.col!==0?l.col=S.col:i.row!==0&&i.col===0?l.row=S.row:(l.row=S.row,l.col=S.col)}return this.runLocalHooks("afterTransformEnd",l,c,h),l}setOffsetSize(e){let{x:t,y:i}=e;bb(no,this,{x:t,y:i})}resetOffsetSize(){bb(no,this,{x:0,y:0})}}function h$(n){const{width:e,height:t}=Gn(ri,this,aG).call(this);let i=0,s=0;return n.row<0?(i=-1,n.row=0):n.row>0&&n.row>=t&&(i=1,n.row=t-1),n.col<0?(s=-1,n.col=0):n.col>0&&n.col>=e&&(s=1,n.col=e-1),{rowDir:i,colDir:s}}function aG(){return{width:bt(no,this).x+bt(en,this).countRenderableColumns(),height:bt(no,this).y+bt(en,this).countRenderableRows()}}function yx(n,e){const t=bt(en,this).findFirstNonHiddenRenderableRow(n,e);return t===null?null:bt(no,this).y+t}function Cx(n,e){const t=bt(en,this).findFirstNonHiddenRenderableColumn(n,e);return t===null?null:bt(no,this).x+t}function u$(n){const{row:e,col:t}=bt(en,this).visualToRenderableCoords(n);if(e===null||t===null)throw new Error("Renderable coords are not visible.");return bt(en,this).createCellCoords(bt(no,this).y+e,bt(no,this).x+t)}function Td(n){const e=n.clone();return e.col=n.col-bt(no,this).x,e.row=n.row-bt(no,this).y,bt(en,this).renderableToVisualCoords(e)}Lt(MM,Mi);const s_=0,r_=1,lG=2,pO=3,lbe=[pO,lG],cbe=[["number"],["number","string"],["number","undefined"],["number","string","undefined"]],Sx=Symbol("root"),d$=Symbol("child");function Gf(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sx;if(e!==Sx&&e!==d$)throw new Error("The second argument is used internally only and cannot be overwritten.");const t=Array.isArray(n),i=e===Sx;let s=s_;if(t){const r=n[0];n.length===0?s=r_:i&&r instanceof Zw?s=pO:i&&Array.isArray(r)?s=Gf(r,d$):n.length>=2&&n.length<=4&&!n.some((a,l)=>!cbe[l].includes(typeof a))&&(s=lG)}return s}function cw(n){let{createCellCoords:e,createCellRange:t,keepDirection:i=!1,propToCol:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!lbe.includes(n))throw new Error("Unsupported selection ranges schema type was provided.");return function(r){const o=n===pO;let a=o?r.from.row:r[0],l=o?r.from.col:r[1],c=o?r.to.row:r[2],h=o?r.to.col:r[3];if(typeof s=="function"&&(typeof l=="string"&&(l=s(l)),typeof h=="string"&&(h=s(h))),Xt(c)&&(c=a),Xt(h)&&(h=l),!i){const f=a,g=l,m=c,w=h;a=Math.min(f,m),l=Math.min(g,w),c=Math.max(f,m),h=Math.max(g,w)}const u=e(a,l),d=e(c,h);return t(u,u,d)}}function hbe(n){const e=Gf(n.getSelected());if(e===s_||e===r_)return[];const t=cw(e,{createCellCoords:n._createCellCoords.bind(n),createCellRange:n._createCellRange.bind(n)}),i=new Set;L(n.getSelected(),o=>{const{from:a,to:l}=t(o),c=Math.max(a.col,0),h=l.col-c+1;L(Array.from(new Array(h),(u,d)=>c+d),u=>{i.has(u)||i.add(u)})});const s=Array.from(i).sort((o,a)=>o-a);return Un(s,(o,a,l,c)=>(l!==0&&a===c[l-1]+1?o[o.length-1][1]+=1:o.push([a,1]),o),[])}function ube(n){const e=Gf(n.getSelected());if(e===s_||e===r_)return[];const t=cw(e,{createCellCoords:n._createCellCoords.bind(n),createCellRange:n._createCellRange.bind(n)}),i=new Set;L(n.getSelected(),o=>{const{from:a,to:l}=t(o),c=Math.max(a.row,0),h=l.row-c+1;L(Array.from(new Array(h),(u,d)=>c+d),u=>{i.has(u)||i.add(u)})});const s=Array.from(i).sort((o,a)=>o-a);return Un(s,(o,a,l,c)=>(l!==0&&a===c[l-1]+1?o[o.length-1][1]+=1:o.push([a,1]),o),[])}function Md(n,e,t){dbe(n,e),e.set(n,t)}function dbe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vh(n,e,t){return(e=fbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fbe(n){var e=gbe(n,"string");return typeof e=="symbol"?e:e+""}function gbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rn(n,e){return n.get(cG(n,e))}function Ro(n,e,t){return n.set(cG(n,e),t),t}function cG(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Oi=new WeakMap,bh=new WeakMap,Cb=new WeakMap,Jg=new WeakMap,Sb=new WeakMap,em=new WeakMap;class hG{constructor(e,t){var i=this;vh(this,"settings",void 0),vh(this,"tableProps",void 0),vh(this,"inProgress",!1),vh(this,"selectedRange",new obe((s,r,o)=>this.tableProps.createCellRange(s,r,o))),vh(this,"highlight",void 0),Md(this,Oi,void 0),Md(this,bh,void 0),vh(this,"selectedByRowHeader",new Set),vh(this,"selectedByColumnHeader",new Set),Md(this,Cb,!1),Md(this,Jg,!1),Md(this,Sb,"unknown"),Md(this,em,-1),this.settings=e,this.tableProps=t,this.highlight=new ibe({headerClassName:e.currentHeaderClassName,activeHeaderClassName:e.activeHeaderClassName,rowClassName:e.currentRowClassName,columnClassName:e.currentColClassName,cellAttributes:[rP()],rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,disabledCellSelection:(s,r)=>this.tableProps.isDisabledCellSelection(s,r),cellCornerVisible:function(){return i.isCellCornerVisible(...arguments)},areaCornerVisible:function(){return i.isAreaCornerVisible(...arguments)},visualToRenderableCoords:s=>this.tableProps.visualToRenderableCoords(s),renderableToVisualCoords:s=>this.tableProps.renderableToVisualCoords(s),createCellCoords:(s,r)=>this.tableProps.createCellCoords(s,r),createCellRange:(s,r,o)=>this.tableProps.createCellRange(s,r,o)}),Ro(Oi,this,new MM(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>this.tableProps.countRenderableRows(),countRenderableColumns:()=>this.tableProps.countRenderableColumns(),visualToRenderableCoords:s=>this.tableProps.visualToRenderableCoords(s),renderableToVisualCoords:s=>this.tableProps.renderableToVisualCoords(s),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(s,r)=>this.tableProps.createCellCoords(s,r),fixedRowsBottom:()=>e.fixedRowsBottom,minSpareRows:()=>e.minSpareRows,minSpareCols:()=>e.minSpareCols,autoWrapRow:()=>e.autoWrapRow,autoWrapCol:()=>e.autoWrapCol})),Ro(bh,this,new MM(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>{const s=this.selectedRange.current();return this.tableProps.countRenderableRowsInRange(0,s.getOuterBottomEndCorner().row)},countRenderableColumns:()=>{const s=this.selectedRange.current();return this.tableProps.countRenderableColumnsInRange(0,s.getOuterBottomEndCorner().col)},visualToRenderableCoords:s=>this.tableProps.visualToRenderableCoords(s),renderableToVisualCoords:s=>this.tableProps.renderableToVisualCoords(s),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(s,r)=>this.tableProps.createCellCoords(s,r),fixedRowsBottom:()=>0,minSpareRows:()=>0,minSpareCols:()=>0,autoWrapRow:()=>!0,autoWrapCol:()=>!0})),rn(Oi,this).addLocalHook("beforeTransformStart",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformStart",...r)}),rn(Oi,this).addLocalHook("afterTransformStart",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("afterModifyTransformStart",...r)}),rn(Oi,this).addLocalHook("beforeTransformEnd",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformEnd",...r)}),rn(Oi,this).addLocalHook("afterTransformEnd",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("afterModifyTransformEnd",...r)}),rn(Oi,this).addLocalHook("insertRowRequire",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("insertRowRequire",...r)}),rn(Oi,this).addLocalHook("insertColRequire",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("insertColRequire",...r)}),rn(Oi,this).addLocalHook("beforeRowWrap",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("beforeRowWrap",...r)}),rn(Oi,this).addLocalHook("beforeColumnWrap",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("beforeColumnWrap",...r)}),rn(bh,this).addLocalHook("beforeTransformStart",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformFocus",...r)}),rn(bh,this).addLocalHook("afterTransformStart",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("afterModifyTransformFocus",...r)})}getSelectedRange(){return this.selectedRange}markSource(e){Ro(Sb,this,e)}markEndSource(){Ro(Sb,this,"unknown")}getSelectionSource(){return rn(Sb,this)}setExpectedLayers(e){Ro(em,this,e)}begin(){this.inProgress=!0}finish(){this.runLocalHooks("afterSelectionFinished",Array.from(this.selectedRange)),this.inProgress=!1,Ro(em,this,-1)}isInProgress(){return this.inProgress}setRangeStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e;const r=this.settings.selectionMode==="multiple",o=Xt(t)?this.tableProps.getShortcutManager().isCtrlPressed():t,a=e.clone();Ro(Cb,this,!1),this.runLocalHooks(`beforeSetRangeStart${i?"Only":""}`,a),(!r||r&&!o&&Xt(t))&&this.selectedRange.clear(),this.selectedRange.add(a).current().setHighlight(s.clone()),this.getLayerLevel()===0&&(this.selectedByRowHeader.clear(),this.selectedByColumnHeader.clear()),i||this.setRangeEnd(e)}setRangeStartOnly(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;this.setRangeStart(e,t,!0,i)}setRangeEnd(e){if(this.selectedRange.isEmpty())return;const t=e.clone(),i=this.tableProps.countRows(),s=this.tableProps.countCols(),r=this.selectedRange.current().clone().setTo(e).isSingleHeader();if((i>0||s>0)&&(i===0&&t.col<0&&!r||s===0&&t.row<0&&!r))return;this.runLocalHooks("beforeSetRangeEnd",t),this.begin();const o=this.selectedRange.current();if(this.settings.navigableHeaders||o.highlight.normalize(),this.settings.selectionMode==="single")o.setFrom(o.highlight),o.setTo(o.highlight);else{const l=o.getHorizontalDirection(),c=o.getVerticalDirection(),h=this.isMultiple();o.setTo(t),h&&(l!==o.getHorizontalDirection()||o.getWidth()===1&&!o.includes(o.highlight))&&o.from.assign({col:o.highlight.col}),h&&(c!==o.getVerticalDirection()||o.getHeight()===1&&!o.includes(o.highlight))&&o.from.assign({row:o.highlight.row})}i>0&&s>0&&(!this.settings.navigableHeaders||this.settings.navigableHeaders&&!o.isSingleHeader())&&o.to.normalize(),this.runLocalHooks("beforeHighlightSet"),this.setRangeFocus(this.selectedRange.current().highlight),this.applyAndCommit();const a=rn(em,this)===-1||this.selectedRange.size()===rn(em,this);this.runLocalHooks("afterSetRangeEnd",e,a)}applyAndCommit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectedRange.current(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLayerLevel();const i=this.tableProps.countRows(),s=this.tableProps.countCols();t<this.highlight.layerLevel&&(L(this.highlight.getAreas(),g=>void g.clear()),L(this.highlight.getLayeredAreas(),g=>void g.clear()),L(this.highlight.getRowHeaders(),g=>void g.clear()),L(this.highlight.getColumnHeaders(),g=>void g.clear()),L(this.highlight.getActiveRowHeaders(),g=>void g.clear()),L(this.highlight.getActiveColumnHeaders(),g=>void g.clear()),L(this.highlight.getActiveCornerHeaders(),g=>void g.clear()),L(this.highlight.getRowHighlights(),g=>void g.clear()),L(this.highlight.getColumnHighlights(),g=>void g.clear())),this.highlight.useLayerLevel(t);const r=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),l=this.highlight.createColumnHeader(),c=this.highlight.createActiveRowHeader(),h=this.highlight.createActiveColumnHeader(),u=this.highlight.createActiveCornerHeader(),d=this.highlight.createRowHighlight(),f=this.highlight.createColumnHighlight();if(r.clear(),o.clear(),a.clear(),l.clear(),c.clear(),h.clear(),u.clear(),d.clear(),f.clear(),this.highlight.isEnabledFor(LP,e.highlight)&&(this.isMultiple()||t>=1)&&(r.add(e.from).add(e.to).commit(),o.add(e.from).add(e.to).commit(),t===1)){const g=this.selectedRange.previous();this.highlight.useLayerLevel(t-1),this.highlight.createArea().add(g.from).commit().syncWith(g),this.highlight.createLayeredArea().add(g.from).commit().syncWith(g),this.highlight.useLayerLevel(t)}if(this.highlight.isEnabledFor(NP,e.highlight)){if(!e.isSingleHeader()){const w=this.tableProps.createCellCoords(Math.max(e.from.row,0),-1),v=this.tableProps.createCellCoords(e.to.row,-1),C=this.tableProps.createCellCoords(-1,Math.max(e.from.col,0)),S=this.tableProps.createCellCoords(-1,e.to.col);this.settings.selectionMode==="single"?(a.add(w).commit(),l.add(C).commit(),d.add(w).commit(),f.add(C).commit()):(a.add(w).add(v).commit(),l.add(C).add(S).commit(),d.add(w).add(v).commit(),f.add(C).add(S).commit())}const g=!rn(Jg,this)&&this.isEntireRowSelected()&&(s>0&&s===e.getWidth()||s===0&&this.isSelectedByRowHeader()),m=!rn(Jg,this)&&this.isEntireColumnSelected()&&(i>0&&i===e.getHeight()||i===0&&this.isSelectedByColumnHeader());g&&c.add(this.tableProps.createCellCoords(Math.max(e.from.row,0),Math.min(-this.tableProps.countRowHeaders(),-1))).add(this.tableProps.createCellCoords(Math.max(e.to.row,0),-1)).commit(),m&&h.add(this.tableProps.createCellCoords(Math.min(-this.tableProps.countColHeaders(),-1),Math.max(e.from.col,0))).add(this.tableProps.createCellCoords(-1,Math.max(e.to.col,0))).commit(),g&&m&&u.add(this.tableProps.createCellCoords(-this.tableProps.countColHeaders(),-this.tableProps.countRowHeaders())).add(this.tableProps.createCellCoords(-1,-1)).commit()}}setRangeFocus(e){if(this.selectedRange.isEmpty())return;const t=this.selectedRange.current();this.inProgress||this.runLocalHooks("beforeSetFocus",e);const i=this.highlight.getFocus();i.clear(),t.setHighlight(e),this.inProgress||this.runLocalHooks("beforeHighlightSet"),this.highlight.isEnabledFor($P,t.highlight)&&i.add(t.highlight).commit().syncWith(t),this.inProgress||(Ro(Cb,this,!0),this.runLocalHooks("afterSetFocus",t.highlight))}transformStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.settings.navigableHeaders?rn(Oi,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):rn(Oi,this).resetOffsetSize(),this.setRangeStart(rn(Oi,this).transformStart(e,t,i))}transformEnd(e,t){this.settings.navigableHeaders?rn(Oi,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):rn(Oi,this).resetOffsetSize(),this.setRangeEnd(rn(Oi,this).transformEnd(e,t))}transformFocus(e,t){const i=this.selectedRange.current(),{row:s,col:r}=i.getOuterTopStartCorner(),o=this.tableProps.countRenderableColumnsInRange(0,r-1),a=this.tableProps.countRenderableRowsInRange(0,s-1);i.highlight.isHeader()?rn(bh,this).setOffsetSize({x:r<0?Math.abs(r):-o,y:s<0?Math.abs(s):-a}):rn(bh,this).setOffsetSize({x:r<0?0:-o,y:s<0?0:-a});const l=rn(bh,this).transformStart(e,t);this.setRangeFocus(l.normalize())}shiftRows(e,t){if(!this.isSelected())return;const i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByColumnHeader()||i.getOuterTopStartCorner().row>=e){const{from:s,to:r,highlight:o}=i,a=this.tableProps.countRows(),l=this.isSelectedByRowHeader(),c=this.isSelectedByColumnHeader(),h=c?-1:0,u=c?0:t;this.getSelectedRange().pop();const d=this.tableProps.createCellCoords(kt(s.row+u,h,a-1),s.col),f=this.tableProps.createCellCoords(kt(r.row+t,h,a-1),r.col);this.markSource("shift"),o.row>=e?this.setRangeStartOnly(d,!0,this.tableProps.createCellCoords(kt(o.row+t,0,a-1),o.col)):this.setRangeStartOnly(d,!0),l&&this.selectedByRowHeader.add(this.getLayerLevel()),c&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.markEndSource()}}shiftColumns(e,t){if(!this.isSelected())return;const i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByRowHeader()||i.getOuterTopStartCorner().col>=e){const{from:s,to:r,highlight:o}=i,a=this.tableProps.countCols(),l=this.isSelectedByRowHeader(),c=this.isSelectedByColumnHeader(),h=l?-1:0,u=l?0:t;this.getSelectedRange().pop();const d=this.tableProps.createCellCoords(s.row,kt(s.col+u,h,a-1)),f=this.tableProps.createCellCoords(r.row,kt(r.col+t,h,a-1));this.markSource("shift"),o.col>=e?this.setRangeStartOnly(d,!0,this.tableProps.createCellCoords(o.row,kt(o.col+t,0,a-1))):this.setRangeStartOnly(d,!0),l&&this.selectedByRowHeader.add(this.getLayerLevel()),c&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.markEndSource()}}getLayerLevel(){return this.selectedRange.size()-1}isSelected(){return!this.selectedRange.isEmpty()}isMultiple(){if(!this.isSelected())return!1;const e=Cr(!this.selectedRange.current().isSingle());return this.runLocalHooks("afterIsMultipleSelection",e),e.value}isFocusSelectionChanged(){return this.isSelected()&&rn(Cb,this)}isSelectedByRowHeader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner(e)&&(e===-1?this.selectedByRowHeader.size>0:this.selectedByRowHeader.has(e))}isEntireRowSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();const t=s=>{const{col:r}=s.getOuterTopStartCorner(),o=this.tableProps.countRowHeaders(),a=this.tableProps.countCols();return(o>0&&r<0||o===0)&&s.getWidth()===a};if(e===-1)return Array.from(this.selectedRange).some(s=>t(s));const i=this.selectedRange.peekByIndex(e);return i?t(i):!1}isSelectedByColumnHeader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner()&&(e===-1?this.selectedByColumnHeader.size>0:this.selectedByColumnHeader.has(e))}isEntireColumnSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();const t=s=>{const{row:r}=s.getOuterTopStartCorner(),o=this.tableProps.countColHeaders(),a=this.tableProps.countRows();return(o>0&&r<0||o===0)&&s.getHeight()===a};if(e===-1)return Array.from(this.selectedRange).some(s=>t(s));const i=this.selectedRange.peekByIndex(e);return i?t(i):!1}isSelectedByAnyHeader(){return this.isSelectedByRowHeader(-1)||this.isSelectedByColumnHeader(-1)||this.isSelectedByCorner()}isSelectedByCorner(){return this.selectedByColumnHeader.has(this.getLayerLevel())&&this.selectedByRowHeader.has(this.getLayerLevel())}inInSelection(e){return this.selectedRange.includes(e)}isCellCornerVisible(){return this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&!this.isMultiple()}isCellVisible(e){const t=this.tableProps.visualToRenderableCoords(e);return t.row!==null&&t.col!==null}isAreaCornerVisible(e){return Number.isInteger(e)&&e!==this.getLayerLevel()?!1:this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&this.isMultiple()}clear(){this.selectedRange.clear(),this.highlight.clear()}deselect(){this.isSelected()&&(this.inProgress=!1,this.clear(),this.runLocalHooks("afterDeselect"))}selectAll(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{focusPosition:!1,disableHeadersHighlight:!1};const r=this.tableProps.countRows(),o=this.tableProps.countCols(),a=this.tableProps.countRowHeaders(),l=this.tableProps.countColHeaders(),c=i?-l:0,h=t?-a:0;if(c===0&&h===0&&(r===0||o===0))return;let u=(e=this.getSelectedRange().current())===null||e===void 0?void 0:e.highlight;const{focusPosition:d,disableHeadersHighlight:f}=s;Ro(Jg,this,f),d&&Number.isInteger(d==null?void 0:d.row)&&Number.isInteger(d==null?void 0:d.col)&&(u=this.tableProps.createCellCoords(kt(d.row,c,r-1),kt(d.col,h,o-1)));const g=this.tableProps.createCellCoords(c,h),m=this.tableProps.createCellCoords(r-1,o-1);this.clear(),this.setRangeStartOnly(g,void 0,u),h<0&&this.selectedByRowHeader.add(this.getLayerLevel()),c<0&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(m),this.finish(),Ro(Jg,this,!1)}selectCells(e){var t=this;const i=Gf(e);if(i===r_)return!1;if(i===s_)throw new Error(Nt`Unsupported format of the selection ranges was passed. To select cells pass\x20
        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd,\x20
        columnEnd/columnPropEnd]]) or as an array of CellRange objects.`);const s=cw(i,{createCellCoords:function(){return t.tableProps.createCellCoords(...arguments)},createCellRange:function(){return t.tableProps.createCellRange(...arguments)},propToCol:l=>this.tableProps.propToCol(l),keepDirection:!0}),r=this.settings.navigableHeaders,o={countRows:this.tableProps.countRows(),countCols:this.tableProps.countCols(),countRowHeaders:r?this.tableProps.countRowHeaders():0,countColHeaders:r?this.tableProps.countColHeaders():0},a=!e.some(l=>{const c=s(l),h=c.isValid(o);return!(h&&!c.containsHeaders()||h&&c.containsHeaders()&&c.isSingleHeader())});return a&&(this.clear(),this.setExpectedLayers(e.length),L(e,l=>{const{from:c,to:h}=s(l);this.setRangeStartOnly(c.clone(),!1),this.setRangeEnd(h.clone())}),this.finish()),a}selectColumns(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const s=typeof e=="string"?this.tableProps.propToCol(e):e,r=typeof t=="string"?this.tableProps.propToCol(t):t,o=this.tableProps.countRows(),a=this.tableProps.countCols(),l=this.tableProps.countColHeaders(),c=l===0?0:-l,h=this.tableProps.createCellCoords(c,s),u=this.tableProps.createCellCoords(o-1,r),d=this.tableProps.createCellRange(h,h,u).isValid({countRows:o,countCols:a,countRowHeaders:0,countColHeaders:l});if(d){let f=0,g=0;Number.isInteger(i==null?void 0:i.row)&&Number.isInteger(i==null?void 0:i.col)?(f=kt(i.row,c,o-1),g=kt(i.col,Math.min(s,r),Math.max(s,r))):(f=kt(i,c,o-1),g=s);const m=this.tableProps.createCellCoords(f,g),w=l===0?0:kt(m.row,c,-1),v=o-1,C=this.tableProps.createCellCoords(w,s),S=this.tableProps.createCellCoords(v,r);this.runLocalHooks("beforeSelectColumns",C,S,m),C.row=w,S.row=v,this.setRangeStartOnly(C,void 0,m),this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(S),this.runLocalHooks("afterSelectColumns",C,S,m),this.finish()}return d}selectRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const s=this.tableProps.countRows(),r=this.tableProps.countCols(),o=this.tableProps.countRowHeaders(),a=o===0?0:-o,l=this.tableProps.createCellCoords(e,a),c=this.tableProps.createCellCoords(t,r-1),h=this.tableProps.createCellRange(l,l,c).isValid({countRows:s,countCols:r,countRowHeaders:o,countColHeaders:0});if(h){let u=0,d=0;Number.isInteger(i==null?void 0:i.row)&&Number.isInteger(i==null?void 0:i.col)?(u=kt(i.row,Math.min(e,t),Math.max(e,t)),d=kt(i.col,a,r-1)):(u=e,d=kt(i,a,r-1));const f=this.tableProps.createCellCoords(u,d),g=o===0?0:kt(f.col,a,-1),m=r-1,w=this.tableProps.createCellCoords(e,g),v=this.tableProps.createCellCoords(t,m);this.runLocalHooks("beforeSelectRows",w,v,f),w.col=g,v.col=m,this.setRangeStartOnly(w,void 0,f),this.selectedByRowHeader.add(this.getLayerLevel()),this.setRangeEnd(v),this.runLocalHooks("afterSelectRows",w,v,f),this.finish()}return h}refresh(){if(!this.isSelected())return;const e=this.tableProps.countRows(),t=this.tableProps.countCols();if(e===0||t===0){this.deselect();return}const i=this.selectedRange.peekByIndex(this.selectedRange.size()-1),{from:s,to:r,highlight:o}=i;this.clear(),o.assign({row:kt(o.row,-1/0,e-1),col:kt(o.col,-1/0,t-1)}),s.assign({row:kt(s.row,-1/0,e-1),col:kt(s.col,-1/0,t-1)}),r.assign({row:kt(r.row,0,e-1),col:kt(r.col,0,t-1)}),this.selectedRange.ranges.push(i),this.highlight.getFocus().add(o).commit().syncWith(i),this.applyAndCommit(i)}commit(){if(this.highlight.getCustomSelections().forEach(s=>{s.commit()}),!this.isSelected())return;const t=this.highlight.getFocus(),i=this.getLayerLevel();t.commit().syncWith(this.selectedRange.current());for(let s=0;s<this.selectedRange.size();s+=1){this.highlight.useLayerLevel(s);const r=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),l=this.highlight.createColumnHeader(),c=this.highlight.createActiveRowHeader(),h=this.highlight.createActiveColumnHeader(),u=this.highlight.createActiveCornerHeader(),d=this.highlight.createRowHighlight(),f=this.highlight.createColumnHighlight();r.commit(),o.commit(),a.commit(),l.commit(),c.commit(),h.commit(),u.commit(),d.commit(),f.commit()}this.highlight.useLayerLevel(i)}}Lt(hG,Mi);const f$=/^(\r\n|\n\r|\r|\n)/,mbe=/^[^\t\r\n]+/,g$=/^\t/;function pbe(n){const e=[[""]];if(n.length===0)return e;let t=0,i=0,s;for(;n.length>0&&s!==n.length;)if(s=n.length,n.match(g$))n=n.replace(g$,""),t+=1,e[i][t]="";else if(n.match(f$))n=n.replace(f$,""),t=0,i+=1,e[i]=[""];else{let r="";if(n.startsWith('"')){let o=0,a=!0;for(;a;){const l=n.slice(0,1);l==='"'&&(o+=1),r+=l,n=n.slice(1),(n.length===0||n.match(/^[\t\r\n]/)&&o%2===0)&&(a=!1)}r=r.replace(/^"/,"").replace(/"$/,"").replace(/["]*/g,l=>new Array(Math.floor(l.length/2)).fill('"').join(""))}else{const o=n.match(mbe);r=o?o[0]:"",n=n.slice(r.length)}e[i][t]=r}return e}function vp(n){let e,t,i,s,r="",o;for(e=0,t=n.length;e<t;e+=1){for(s=n[e].length,i=0;i<s;i+=1)i>0&&(r+="	"),o=n[e][i],typeof o=="string"?o.indexOf(`
`)>-1?r+=`"${o.replace(/"/g,'""')}"`:r+=o:o==null?r+="":r+=o;e!==t-1&&(r+=`
`)}return r}function yh(n,e,t){return(e=wbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wbe(n){var e=vbe(n,"string");return typeof e=="symbol"?e:e+""}function vbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Cf{static get DESTINATION_RENDERER(){return 1}static get DESTINATION_CLIPBOARD_GENERATOR(){return 2}constructor(e,t,i){yh(this,"hot",void 0),yh(this,"metaManager",void 0),yh(this,"tableMeta",void 0),yh(this,"dataSource",void 0),yh(this,"duckSchema",void 0),yh(this,"colToPropCache",void 0),yh(this,"propToColCache",void 0),this.hot=e,this.metaManager=i,this.tableMeta=i.getTableMeta(),this.dataSource=t,this.duckSchema=this.createDuckSchema(),this.createMap()}createMap(){const e=this.getSchema();if(typeof e>"u")throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");const t=this.tableMeta.columns;let i;if(this.colToPropCache=[],this.propToColCache=new Map,t){let s=0,r=0,o=!1;if(typeof t=="function"){const a=Y0(e);s=a>0?a:this.countFirstRowKeys(),o=!0}else{const a=this.tableMeta.maxCols;s=Math.min(a,t.length)}for(i=0;i<s;i++){const a=o?t(i):t[i];if(Je(a)){if(typeof a.data<"u"){const l=o?r:i;this.colToPropCache[l]=a.data,this.propToColCache.set(a.data,l)}r+=1}}}else this.recursiveDuckColumns(e)}countFirstRowKeys(){return KP(this.dataSource)}recursiveDuckColumns(e,t,i){let s=t,r=i,o;return typeof s>"u"&&(s=0,r=""),typeof e=="object"&&!Array.isArray(e)&&et(e,(a,l)=>{a===null?(o=r+l,this.colToPropCache.push(o),this.propToColCache.set(o,s),s+=1):s=this.recursiveDuckColumns(a,s,`${l}.`)}),s}colToProp(e){if(Number.isInteger(e)===!1)return e;const t=this.hot.toPhysicalColumn(e);return t===null?e:this.colToPropCache&&Me(this.colToPropCache[t])?this.colToPropCache[t]:t}propToCol(e){const t=this.propToColCache.get(e);if(Me(t))return this.hot.toVisualColumn(t);const i=this.hot.toVisualColumn(e);return i===null?e:i}getSchema(){const e=this.tableMeta.dataSchema;return e?typeof e=="function"?e():e:this.duckSchema}createDuckSchema(){return this.dataSource&&this.dataSource[0]?Yf(this.dataSource[0]):{}}refreshDuckSchema(){this.duckSchema=this.createDuckSchema()}createRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,{source:i,mode:s="above"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.hot.countSourceRows();let o=r,a=0,l=e;if((typeof l!="number"||l>=r)&&(l=r),l<this.hot.countRows()&&(o=this.hot.toPhysicalRow(l)),this.hot.runHooks("beforeCreateRow",l,t,i)===!1||o===null)return{delta:0};const h=this.tableMeta.maxRows,u=this.getSchema().length,d=[];for(;a<t&&r+a<h;){let g=null;this.hot.dataType==="array"?this.tableMeta.dataSchema?g=Yi(this.getSchema()):(g=[],ke(u-1,()=>g.push(null))):this.hot.dataType==="function"?g=this.tableMeta.dataSchema(l+a):(g={},Xw(g,this.getSchema())),d.push(g),a+=1}this.hot.rowIndexMapper.insertIndexes(l,a),s==="below"&&(o=Math.min(o+1,r)),this.spliceData(o,0,d);const f=this.hot.toVisualRow(o);return this.hot.countSourceRows()===d.length&&this.hot.columnIndexMapper.initToLength(this.hot.getInitialColumnCount()),a>0&&(e==null?this.metaManager.createRow(null,a):i!=="auto"&&this.metaManager.createRow(o,t)),this.hot.runHooks("afterCreateRow",f,a,i),this.hot.forceFullRender=!0,{delta:a,startPhysicalIndex:o}}createCol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,{source:i,mode:s="start"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!this.hot.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");const r=this.dataSource,o=this.tableMeta.maxCols,a=this.hot.countSourceCols();let l=e;if((typeof l!="number"||l>=a)&&(l=a),this.hot.runHooks("beforeCreateCol",l,t,i)===!1)return{delta:0};let h=a;l<this.hot.countCols()&&(h=this.hot.toPhysicalColumn(l));const u=this.hot.countSourceRows();let d=this.hot.countCols(),f=0,g=h;s==="end"&&(g=Math.min(g+1,a));const m=g;for(;f<t&&d<o;){if(typeof l!="number"||l>=d)if(u>0)for(let v=0;v<u;v+=1)typeof r[v]>"u"&&(r[v]=[]),r[v].push(null);else r.push([null]);else for(let v=0;v<u;v++)r[v].splice(g,0,null);f+=1,g+=1,d+=1}this.hot.columnIndexMapper.insertIndexes(l,f),f>0&&(e==null?this.metaManager.createColumn(null,f):i!=="auto"&&this.metaManager.createColumn(m,t));const w=this.hot.toVisualColumn(m);return this.hot.runHooks("afterCreateCol",w,f,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),{delta:f,startPhysicalIndex:m}}removeRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,s=Number.isInteger(e)?e:-t;const r=this.visualRowsToPhysical(s,t),o=this.hot.countSourceRows();if(s=(o+s)%o,this.hot.runHooks("beforeRemoveRow",s,r.length,r,i)===!1)return!1;const l=r.length;if(this.filterData(s,l,r),s<this.hot.countRows()){this.hot.rowIndexMapper.removeIndexes(r);const h=Me(this.tableMeta.columns)||Me(this.tableMeta.dataSchema);this.hot.rowIndexMapper.getNotTrimmedIndexesLength()===0&&h===!1&&this.hot.columnIndexMapper.setIndexesSequence([])}return r.slice(0).sort((h,u)=>u-h).forEach(h=>{this.metaManager.removeRow(h,1)}),this.hot.runHooks("afterRemoveRow",s,l,r,i),this.hot.forceFullRender=!0,!0}removeCol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;if(this.hot.dataType==="object"||this.tableMeta.columns)throw new Error("cannot remove column with object data source or columns option specified");let s=typeof e!="number"?-t:e;s=(this.hot.countCols()+s)%this.hot.countCols();const r=this.visualColumnsToPhysical(s,t),o=r.slice(0).sort((u,d)=>d-u);if(this.hot.runHooks("beforeRemoveCol",s,t,r,i)===!1)return!1;let l=!0;const c=o.length,h=this.dataSource;for(let u=0;u<c;u++)l&&r[0]!==r[u]-u&&(l=!1);if(l)for(let u=0,d=this.hot.countSourceRows();u<d;u++)h[u].splice(r[0],t),u===0&&this.metaManager.removeColumn(r[0],t);else for(let u=0,d=this.hot.countSourceRows();u<d;u++)for(let f=0;f<c;f++)h[u].splice(o[f],1),u===0&&this.metaManager.removeColumn(o[f],1);return s<this.hot.countCols()&&(this.hot.columnIndexMapper.removeIndexes(r),this.hot.columnIndexMapper.getNotTrimmedIndexesLength()===0&&this.hot.rowIndexMapper.setIndexesSequence([])),this.hot.runHooks("afterRemoveCol",s,t,r,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),!0}spliceCol(e,t,i){const s=this.hot.getDataAtCol(e),r=s.slice(t,t+i),o=s.slice(t+i);for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];rM(l,o);let h=0;for(;h<i;)l.push(null),h+=1;return CU(l),this.hot.populateFromArray(t,e,l,null,null,"spliceCol"),r}spliceRow(e,t,i){const s=this.hot.getSourceDataAtRow(e),r=s.slice(t,t+i),o=s.slice(t+i);for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];rM(l,o);let h=0;for(;h<i;)l.push(null),h+=1;return this.hot.populateFromArray(e,t,[l],null,null,"spliceRow"),r}spliceData(e,t,i){if(this.hot.runHooks("beforeDataSplice",e,t,i)!==!1){const r=[...this.dataSource.slice(0,e),...i,...this.dataSource.slice(e)];this.dataSource.length=0,r.forEach(o=>this.dataSource.push(o))}}filterData(e,t,i){let s=this.hot.runHooks("filterData",e,t,i);Array.isArray(s)===!1&&(s=this.dataSource.filter((r,o)=>i.indexOf(o)===-1)),this.dataSource.length=0,Array.prototype.push.apply(this.dataSource,s)}get(e,t){const i=this.hot.toPhysicalRow(e);let s=this.dataSource[i];const r=this.hot.runHooks("modifyRowData",i);s=isNaN(r)?r:s;const{dataDotNotation:o}=this.hot.getSettings();let a=null;if(s&&s.hasOwnProperty&&wn(s,t))a=s[t];else if(o&&typeof t=="string"&&t.indexOf(".")>-1){let l=s;if(!l)return null;const c=t.split(".");for(let h=0,u=c.length;h<u;h++)if(l=l[c[h]],typeof l>"u")return null;a=l}else typeof t=="function"&&(a=t(this.dataSource.slice(i,i+1)[0]));if(this.hot.hasHook("modifyData")){const l=Cr(a);this.hot.runHooks("modifyData",i,this.propToCol(t),l,"get"),l.isTouched()&&(a=l.value)}return a}getCopyable(e,t){return this.hot.getCellMeta(e,this.propToCol(t)).copyable?this.get(e,t):""}set(e,t,i){const s=this.hot.toPhysicalRow(e);let r=i,o=this.dataSource[s];const a=this.hot.runHooks("modifyRowData",s);if(o=isNaN(a)?a:o,this.hot.hasHook("modifyData")){const c=Cr(r);this.hot.runHooks("modifyData",s,this.propToCol(t),c,"set"),c.isTouched()&&(r=c.value)}const{dataDotNotation:l}=this.hot.getSettings();if(o&&o.hasOwnProperty&&wn(o,t))o[t]=r;else if(l&&typeof t=="string"&&t.indexOf(".")>-1){let c=o,h=0,u;const d=t.split(".");for(h=0,u=d.length-1;h<u;h++)typeof c[d[h]]>"u"&&(c[d[h]]={}),c=c[d[h]];c[d[h]]=r}else typeof t=="function"?t(this.dataSource.slice(s,s+1)[0],r):o[t]=r}visualRowsToPhysical(e,t){const i=this.hot.countSourceRows(),s=[];let r=(i+e)%i,o=t,a;for(;r<i&&o;)a=this.hot.toPhysicalRow(r),s.push(a),o-=1,r+=1;return s}visualColumnsToPhysical(e,t){const i=this.hot.countCols(),s=[];let r=(i+e)%i,o=t;for(;r<i&&o;){const a=this.hot.toPhysicalColumn(r);s.push(a),o-=1,r+=1}return s}clear(){for(let e=0;e<this.hot.countSourceRows();e++)for(let t=0;t<this.hot.countCols();t++)this.set(e,this.colToProp(t),"")}getLength(){const e=this.tableMeta.maxRows;let t;e<0||e===0?t=0:t=e||1/0;const i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength();return Math.min(i,t)}getAll(){const e={row:0,col:0},t={row:Math.max(this.hot.countRows()-1,0),col:Math.max(this.hot.countCols()-1,0)};return e.row-t.row===0&&!this.hot.countSourceRows()?[]:this.getRange(e,t,Cf.DESTINATION_RENDERER)}countCachedColumns(){return this.colToPropCache.length}getRange(e,t,i){const s=[];let r,o,a;const l=this.tableMeta.maxRows,c=this.tableMeta.maxCols;if(l===0||c===0)return[];const h=i===Cf.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get,u=Math.min(Math.max(l-1,0),Math.max(e.row,t.row)),d=Math.min(Math.max(c-1,0),Math.max(e.col,t.col));for(r=Math.min(e.row,t.row);r<=u;r++){a=[];const f=r>=0?this.hot.toPhysicalRow(r):r;for(o=Math.min(e.col,t.col);o<=d&&f!==null;o++)a.push(h.call(this,r,this.colToProp(o)));f!==null&&s.push(a)}return s}getText(e,t){return vp(this.getRange(e,t,Cf.DESTINATION_RENDERER))}getCopyableText(e,t){return vp(this.getRange(e,t,Cf.DESTINATION_CLIPBOARD_GENERATOR))}destroy(){this.hot=null,this.metaManager=null,this.dataSource=null,this.duckSchema=null,this.colToPropCache.length=0,this.propToColCache.clear(),this.propToColCache=void 0}}const{register:bbe,getItem:ybe,hasItem:uG,getNames:Cbe,getValues:NDe}=vo("cellTypes");function wO(n){if(!uG(n))throw Error(`You declared cell type "${n}" as a string that is not mapped to a known object.
                 Cell type must be an object or a string mapped to an object registered by
                 "Handsontable.cellTypes.registerCellType" method`);return ybe(n)}function cr(n,e){typeof n!="string"&&(e=n,n=e.CELL_TYPE);const{editor:t,renderer:i,validator:s}=e;t&&vs(n,t),i&&Is(n,i),s&&au(n,s),bbe(n,e)}function Sbe(n,e){var t;return n==="CELL_TYPE"?!1:((t=e._automaticallyAssignedMetaProps)===null||t===void 0?void 0:t.has(n))||!wn(e,n)}function o_(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n;const i=typeof e.type=="string"?wO(e.type):e.type;if(n._automaticallyAssignedMetaProps&&et(e,(r,o)=>void n._automaticallyAssignedMetaProps.delete(o)),!Je(i))return;t===n&&!n._automaticallyAssignedMetaProps&&(n._automaticallyAssignedMetaProps=new Set);const s={};et(i,(r,o)=>{if(Sbe(o,t)){var a;s[o]=r,(a=n._automaticallyAssignedMetaProps)===null||a===void 0||a.add(o)}}),zn(n,s)}function _be(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];function t(){}wo(t,n);for(let i=0;i<e.length;i++)t.prototype[e[i]]=void 0;return t}function Ky(n){return Number.isInteger(n)&&n>=0}function qy(n,e){if(!n())throw new Error(`Assertion failed: ${e}`)}function _b(n){return n==null}const dG=()=>({_automaticallyAssignedMetaProps:void 0,activeHeaderClassName:"ht__active_highlight",allowEmpty:!0,allowHtml:!1,allowInsertColumn:!0,allowInsertRow:!0,allowInvalid:!0,allowRemoveColumn:!0,allowRemoveRow:!0,ariaTags:!0,autoColumnSize:void 0,autoRowSize:void 0,autoWrapCol:!1,autoWrapRow:!1,bindRowsWithHeaders:void 0,cell:[],cells:void 0,checkedTemplate:void 0,className:void 0,colHeaders:null,collapsibleColumns:void 0,columnHeaderHeight:void 0,columns:void 0,columnSorting:void 0,columnSummary:void 0,colWidths:void 0,commentedCellClassName:"htCommentCell",comments:!1,contextMenu:void 0,copyable:!0,copyPaste:!0,correctFormat:!1,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",currentRowClassName:void 0,customBorders:!1,data:void 0,dataDotNotation:!0,dataSchema:void 0,dateFormat:"DD/MM/YYYY",timeFormat:"h:mm:ss a",datePickerConfig:void 0,defaultDate:void 0,disableVisualSelection:!1,dragToScroll:!0,dropdownMenu:void 0,editor:void 0,enterBeginsEditing:!0,enterMoves:{col:0,row:1},fillHandle:{autoInsertRow:!1},filter:!0,filteringCaseSensitive:!1,filters:void 0,fixedColumnsLeft:0,fixedColumnsStart:0,fixedRowsBottom:0,fixedRowsTop:0,formulas:void 0,fragmentSelection:!1,headerClassName:void 0,height:void 0,hiddenColumns:void 0,hiddenRows:void 0,invalidCellClassName:"htInvalid",imeFastEdit:!1,isEmptyCol(n){let e,t,i;for(e=0,t=this.countRows();e<t;e++)if(i=this.getDataAtCell(e,n),Mn(i)===!1)return!1;return!0},isEmptyRow(n){let e,t,i,s;for(e=0,t=this.countCols();e<t;e++)if(i=this.getDataAtCell(n,e),Mn(i)===!1)return typeof i=="object"?(s=this.getCellMeta(n,e),U0(this.getSchema()[s.prop],i)):!1;return!0},label:void 0,language:"en-US",layoutDirection:"inherit",licenseKey:void 0,locale:"en-US",manualColumnFreeze:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,maxCols:1/0,maxRows:1/0,mergeCells:!1,minCols:0,minRows:0,minSpareCols:0,minSpareRows:0,multiColumnSorting:void 0,navigableHeaders:!1,tabNavigation:!0,nestedHeaders:void 0,nestedRows:void 0,noWordWrapClassName:"htNoWrap",numericFormat:void 0,observeDOMVisibility:!0,outsideClickDeselects:!0,persistentState:void 0,placeholder:void 0,placeholderCellClassName:"htPlaceholder",preventOverflow:!1,preventWheel:!1,readOnly:!1,readOnlyCellClassName:"htDimmed",renderAllRows:!1,renderAllColumns:!1,renderer:void 0,rowHeaders:void 0,rowHeaderWidth:void 0,rowHeights:void 0,search:!1,selectionMode:"multiple",selectOptions:void 0,skipColumnOnPaste:!1,skipRowOnPaste:!1,sortByRelevance:!0,source:void 0,startCols:5,startRows:5,stretchH:"none",strict:void 0,tableClassName:void 0,tabMoves:{row:0,col:1},title:void 0,trimDropdown:!0,trimRows:void 0,trimWhitespace:!0,type:"text",uncheckedTemplate:void 0,undo:void 0,validator:void 0,viewportColumnRenderingOffset:"auto",viewportRowRenderingOffset:"auto",visibleRows:10,width:void 0,wordWrap:!0});function m$(n,e,t){return(e=Rbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Rbe(n){var e=xbe(n,"string");return typeof e=="symbol"?e:e+""}function xbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ebe(){return class{}}class Tbe{constructor(e){m$(this,"metaCtor",Ebe()),m$(this,"meta",void 0),this.meta=this.metaCtor.prototype,zn(this.meta,dG()),this.meta.instance=e}getMetaConstructor(){return this.metaCtor}getMeta(){return this.meta}updateMeta(e){var t;zn(this.meta,e),o_(this.meta,{...e,type:(t=e.type)!==null&&t!==void 0?t:this.meta.type},e)}}function Mbe(n,e,t){return(e=Abe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Abe(n){var e=Pbe(n,"string");return typeof e=="symbol"?e:e+""}function Pbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Ibe{constructor(e){Mbe(this,"meta",void 0);const t=e.getMetaConstructor();this.meta=new t}getMeta(){return this.meta}updateMeta(e){zn(this.meta,e),o_(this.meta,e,e)}}function Rb(n,e,t){return(e=Obe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Obe(n){var e=kbe(n,"string");return typeof e=="symbol"?e:e+""}function kbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class cS{constructor(e){Rb(this,"valueFactory",void 0),Rb(this,"data",[]),Rb(this,"index",[]),Rb(this,"holes",new Set),this.valueFactory=e}obtain(e){qy(()=>Ky(e),"Expecting an unsigned number.");const t=this._getStorageIndexByKey(e);let i;if(t>=0)i=this.data[t],i===void 0&&(i=this.valueFactory(e),this.data[t]=i);else if(i=this.valueFactory(e),this.holes.size>0){const s=this.holes.values().next().value;this.holes.delete(s),this.data[s]=i,this.index[e]=s}else this.data.push(i),this.index[e]=this.data.length-1;return i}insert(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;qy(()=>Ky(e)||_b(e),"Expecting an unsigned number or null/undefined argument.");const i=[],s=this.data.length;for(let o=0;o<t;o++)i.push(s+o),this.data.push(void 0);const r=_b(e)?this.index.length:e;this.index=[...this.index.slice(0,r),...i,...this.index.slice(r)]}remove(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;qy(()=>Ky(e)||_b(e),"Expecting an unsigned number or null/undefined argument.");const i=this.index.splice(_b(e)?this.index.length-t:e,t);for(let s=0;s<i.length;s++){const r=i[s];typeof r=="number"&&this.holes.add(r)}}size(){return this.data.length-this.holes.size}values(){return _l(this.data,(e,t)=>!this.holes.has(t))[Symbol.iterator]()}entries(){const e=[];for(let i=0;i<this.data.length;i++){const s=this._getKeyByStorageIndex(i);s!==-1&&e.push([s,this.data[i]])}let t=0;return{next:()=>{if(t<e.length){const i=e[t];return t+=1,{value:i,done:!1}}return{done:!0}}}}clear(){this.data=[],this.index=[],this.holes.clear()}_getStorageIndexByKey(e){return this.index.length>e?this.index[e]:-1}_getKeyByStorageIndex(e){return this.index.indexOf(e)}[Symbol.iterator](){return this.entries()}}function p$(n,e,t){return(e=Hbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hbe(n){var e=Dbe(n,"string");return typeof e=="symbol"?e:e+""}function Dbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const Nbe=["data","width"];class Lbe{constructor(e){p$(this,"globalMeta",void 0),p$(this,"metas",new cS(()=>this._createMeta())),this.globalMeta=e,this.metas=new cS(()=>this._createMeta())}updateMeta(e,t){const i=this.getMeta(e);zn(i,t),o_(i,t)}createColumn(e,t){this.metas.insert(e,t)}removeColumn(e,t){this.metas.remove(e,t)}getMeta(e){return this.metas.obtain(e)}getMetaConstructor(e){return this.metas.obtain(e).constructor}clearCache(){this.metas.clear()}_createMeta(){return _be(this.globalMeta.getMetaConstructor(),Nbe).prototype}}function w$(n,e,t){return(e=$be(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $be(n){var e=Fbe(n,"string");return typeof e=="symbol"?e:e+""}function Fbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Bbe{constructor(e){w$(this,"columnMeta",void 0),w$(this,"metas",new cS(()=>this._createRow())),this.columnMeta=e}updateMeta(e,t,i){const s=this.getMeta(e,t);zn(s,i),o_(s,i)}createRow(e,t){this.metas.insert(e,t)}createColumn(e,t){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).insert(e,t)}removeRow(e,t){this.metas.remove(e,t)}removeColumn(e,t){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).remove(e,t)}getMeta(e,t,i){const s=this.metas.obtain(e).obtain(t);return i===void 0?s:s[i]}setMeta(e,t,i,s){var r;const o=this.metas.obtain(e).obtain(t);(r=o._automaticallyAssignedMetaProps)===null||r===void 0||r.delete(i),o[i]=s}removeMeta(e,t,i){const s=this.metas.obtain(e).obtain(t);delete s[i]}getMetas(){const e=[],t=Array.from(this.metas.values());for(let i=0;i<t.length;i++)Me(t[i])&&e.push(...t[i].values());return e}getMetasAtRow(e){qy(()=>Ky(e),"Expecting an unsigned number.");const t=new Map(this.metas);return t.has(e)?Array.from(t.get(e).values()):[]}clearCache(){this.metas.clear()}_createRow(){return new cS(e=>this._createMeta(e))}_createMeta(e){const t=this.columnMeta.getMetaConstructor(e);return new t}}class fG{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];this.hot=e,this.globalMeta=new Tbe(e),this.tableMeta=new Ibe(this.globalMeta),this.columnMeta=new Lbe(this.globalMeta),this.cellMeta=new Bbe(this.columnMeta),i.forEach(s=>new s(this)),this.globalMeta.updateMeta(t)}getGlobalMeta(){return this.globalMeta.getMeta()}updateGlobalMeta(e){this.globalMeta.updateMeta(e)}getTableMeta(){return this.tableMeta.getMeta()}updateTableMeta(e){this.tableMeta.updateMeta(e)}getColumnMeta(e){return this.columnMeta.getMeta(e)}updateColumnMeta(e,t){this.columnMeta.updateMeta(e,t)}getCellMeta(e,t,i){let{visualRow:s,visualColumn:r}=i;const o=this.cellMeta.getMeta(e,t);return o.visualRow=s,o.visualCol=r,o.row=e,o.col=t,this.runLocalHooks("afterGetCellMeta",o),o}getCellMetaKeyValue(e,t,i){if(typeof i!="string")throw new Error("The passed cell meta object key is not a string");return this.cellMeta.getMeta(e,t,i)}setCellMeta(e,t,i,s){this.cellMeta.setMeta(e,t,i,s)}updateCellMeta(e,t,i){this.cellMeta.updateMeta(e,t,i)}removeCellMeta(e,t,i){this.cellMeta.removeMeta(e,t,i)}getCellsMeta(){return this.cellMeta.getMetas()}getCellsMetaAtRow(e){return this.cellMeta.getMetasAtRow(e)}createRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.createRow(e,t)}removeRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.removeRow(e,t)}createColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.createColumn(e,t),this.columnMeta.createColumn(e,t)}removeColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.removeColumn(e,t),this.columnMeta.removeColumn(e,t)}clearCellsCache(){this.cellMeta.clearCache()}clearCache(){this.cellMeta.clearCache(),this.columnMeta.clearCache()}}Lt(fG,Mi);function v$(n,e,t,i){const{hotInstance:s,dataMap:r,dataSource:o,internalSource:a,source:l,metaManager:c,firstRun:h}=i,u=Ui(a),d=s.getSettings();Array.isArray(d.dataSchema)?s.dataType="array":Yt(d.dataSchema)?s.dataType="function":s.dataType="object",r&&r.destroy(),n=s.runHooks(`before${u}`,n,h,l);const f=new Cf(s,n,c);if(e(f),typeof n=="object"&&n!==null)n.push&&n.splice||(n=[n]);else if(n===null){const g=f.getSchema();n=[];let m,w=0,v=0;for(w=0,v=d.startRows;w<v;w++)if((s.dataType==="object"||s.dataType==="function")&&d.dataSchema)m=Yi(g),n.push(m);else if(s.dataType==="array")m=Yi(g[0]),n.push(m);else{m=[];for(let C=0,S=d.startCols;C<S;C++)m.push(null);n.push(m)}}else throw new Error(`${a} only accepts array of objects or array of arrays (${typeof n} given)`);Array.isArray(n[0])&&(s.dataType="array"),d.data=n,f.dataSource=n,o.data=n,o.dataType=s.dataType,o.colToProp=f.colToProp.bind(f),o.propToCol=f.propToCol.bind(f),o.countCachedColumns=f.countCachedColumns.bind(f),t(f),s.runHooks(`after${u}`,n,h,l),h||(s.runHooks("afterChange",null,a),s.render()),s.getSettings().ariaTags&&$e(s.rootElement,[AU(-1),F0(s.countCols()+(s.view?s.countRowHeaders():0))])}function b$(n,e,t){return(e=Vbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vbe(n){var e=Wbe(n,"string");return typeof e=="symbol"?e:e+""}function Wbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class jbe{constructor(e){b$(this,"metaManager",void 0),b$(this,"metaSyncMemo",new Map),this.metaManager=e,e.addLocalHook("afterGetCellMeta",t=>this.extendCellMeta(t)),Ee.getSingleton().add("beforeRender",t=>{t&&this.metaSyncMemo.clear()},this.metaManager.hot)}extendCellMeta(e){var t;const{row:i,col:s}=e;if((t=this.metaSyncMemo.get(i))!==null&&t!==void 0&&t.has(s))return;const{visualRow:r,visualCol:o}=e,a=this.metaManager.hot,l=a.colToProp(o);e.prop=l,a.runHooks("beforeGetCellMeta",r,o,e);const c=wn(e,"type")?e.type:null;let h=Yt(e.cells)?e.cells(i,s,l):null;if(c)if(h){var u;h.type=(u=h.type)!==null&&u!==void 0?u:c}else h={type:c};h&&this.metaManager.updateCellMeta(i,s,h),a.runHooks("afterGetCellMeta",r,o,e),this.metaSyncMemo.has(i)||this.metaSyncMemo.set(i,new Set),this.metaSyncMemo.get(i).add(s)}}function zbe(n,e,t){Ube(n,e),e.set(n,t)}function Ube(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _x(n,e,t){return(e=Ybe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ybe(n){var e=Gbe(n,"string");return typeof e=="symbol"?e:e+""}function Gbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kbe(n,e){return n.get(qbe(n,e))}function qbe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var y$=new WeakMap;class Xbe{constructor(e){_x(this,"metaManager",void 0),_x(this,"usageTracker",new Set),_x(this,"propDescriptors",new Map([["ariaTags",{initOnly:!0}],["fixedColumnsLeft",{target:"fixedColumnsStart",onChange(t){if(this.metaManager.hot.isRtl()&&t==="fixedColumnsLeft")throw new Error("The `fixedColumnsLeft` is not supported for RTL. Please use option `fixedColumnsStart`.");if(this.usageTracker.has("fixedColumnsLeft")&&this.usageTracker.has("fixedColumnsStart"))throw new Error("The `fixedColumnsLeft` and `fixedColumnsStart` should not be used together. Please use only the option `fixedColumnsStart`.")}}],["layoutDirection",{initOnly:!0}],["renderAllColumns",{initOnly:!0}],["renderAllRows",{initOnly:!0}]])),zbe(this,y$,(t,i,s)=>{if(!s)throw new Error(`The \`${t}\` option can not be updated after the Handsontable is initialized.`)}),this.metaManager=e,this.extendMetaProps()}extendMetaProps(){this.propDescriptors.forEach((e,t)=>{const{initOnly:i,target:s,onChange:r}=e,o=typeof s=="string",a=o?s:t,l=`_${a}`;this.metaManager.globalMeta.meta[l]=this.metaManager.globalMeta.meta[a],r?(this.installPropWatcher(t,l,r),o&&this.installPropWatcher(s,l,r)):i&&(this.installPropWatcher(t,l,Kbe(y$,this)),this.metaManager.globalMeta.meta._initOnlySettings||(this.metaManager.globalMeta.meta._initOnlySettings=[]),this.metaManager.globalMeta.meta._initOnlySettings.push(t))})}installPropWatcher(e,t,i){const s=this;Object.defineProperty(this.metaManager.globalMeta.meta,e,{get(){return this[t]},set(r){const o=!s.usageTracker.has(e);s.usageTracker.add(e),i.call(s,e,r,o),this[t]=r},enumerable:!0,configurable:!0})}}const gG="gridDefault",th="editorManager.handlingEditor",Qbe={name:"editorCloseAndSave",callback(n){n._getEditorManager().closeEditorAndSaveChanges()}},Zbe="hooksRefRegisterer",mG={_hooksStorage:Object.create(null),addHook(n,e){return this._hooksStorage[n]||(this._hooksStorage[n]=[]),this.hot.addHook(n,e),this._hooksStorage[n].push(e),this},removeHooksByKey(n){L(this._hooksStorage[n]||[],e=>{this.hot.removeHook(n,e)})},clearHooks(){et(this._hooksStorage,(n,e)=>this.removeHooksByKey(e)),this._hooksStorage={}}};Ra(mG,"MIXIN_NAME",Zbe,{writable:!1,enumerable:!1});function Br(n,e,t){return(e=Jbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jbe(n){var e=eye(n,"string");return typeof e=="symbol"?e:e+""}function eye(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const tye="base",kn=Object.freeze({VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"});class dg{static get EDITOR_TYPE(){return tye}constructor(e){Br(this,"hot",void 0),Br(this,"state",kn.VIRGIN),Br(this,"_opened",!1),Br(this,"_fullEditMode",!1),Br(this,"_closeCallback",null),Br(this,"TD",null),Br(this,"row",null),Br(this,"col",null),Br(this,"prop",null),Br(this,"originalValue",null),Br(this,"cellProperties",null),this.hot=e,this.init()}_fireCallbacks(e){this._closeCallback&&(this._closeCallback(e),this._closeCallback=null)}init(){}getValue(){throw Error("Editor getValue() method unimplemented")}setValue(){throw Error("Editor setValue() method unimplemented")}open(){throw Error("Editor open() method unimplemented")}close(){throw Error("Editor close() method unimplemented")}prepare(e,t,i,s,r,o){this.TD=s,this.row=e,this.col=t,this.prop=i,this.originalValue=r,this.cellProperties=o,this.state=this.isOpened()?this.state:kn.VIRGIN}extend(){return class extends this.constructor{}}saveValue(e,t){let i,s,r,o;if(t){const l=this.hot.getSelectedLast();i=Math.max(Math.min(l[0],l[2]),0),s=Math.max(Math.min(l[1],l[3]),0),r=Math.max(l[0],l[2]),o=Math.max(l[1],l[3])}else[i,s,r,o]=[this.row,this.col,null,null];const a=this.hot.runHooks("modifyGetCellCoords",i,s);Array.isArray(a)&&([i,s]=a),this.hot.populateFromArray(i,s,e,r,o,"edit")}beginEditing(e,t){if(this.state!==kn.VIRGIN)return;const i=this.hot,s=i.rowIndexMapper.getRenderableFromVisualIndex(this.row),r=i.columnIndexMapper.getRenderableFromVisualIndex(this.col);if(i.view.scrollViewport(i._createCellCoords(s,r)),this.state=kn.EDITING,this.isInFullEditMode()){const o=typeof e=="string"?e:Tn(this.originalValue);this.setValue(o)}this.open(t),this._opened=!0,this.focus(),i.view.render(),i.runHooks("afterBeginEditing",this.row,this.col)}finishEditing(e,t,i){let s;if(i){const r=this._closeCallback;this._closeCallback=o=>{r&&r(o),i(o),this.hot.view.render()}}if(!this.isWaiting()){if(this.state===kn.VIRGIN){this.hot._registerTimeout(()=>{this._fireCallbacks(!0)});return}if(this.state===kn.EDITING){if(e){this.cancelChanges(),this.hot.view.render();return}const r=this.getValue();this.cellProperties.trimWhitespace?s=[[typeof r=="string"?String.prototype.trim.call(r||""):r]]:s=[[r]],this.state=kn.WAITING,this.saveValue(s,t),this.hot.getCellValidator(this.cellProperties)?this.hot.addHookOnce("postAfterValidate",o=>{this.state=kn.FINISHED,this.discardEditor(o)}):(this.state=kn.FINISHED,this.discardEditor(!0))}}}cancelChanges(){this.state=kn.FINISHED,this.discardEditor()}discardEditor(e){this.state===kn.FINISHED&&(e===!1&&this.cellProperties.allowInvalid!==!0?(this.hot.selectCell(this.row,this.col),this.focus(),this.state=kn.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=kn.VIRGIN,this._fireCallbacks(!0),this.hot.getShortcutManager().setActiveContextName("grid")))}enableFullEditMode(){this._fullEditMode=!0}isInFullEditMode(){return this._fullEditMode}isOpened(){return this._opened}isWaiting(){return this.state===kn.WAITING}getEditedCellRect(){var e;const t=this.getEditedCell();if(!t)return;const{wtOverlays:i,wtViewport:s}=this.hot.view._wt,r=this.hot.rootWindow,o=li(t),a=Qt(t),l=li(this.hot.rootElement),c=Qt(this.hot.rootElement),h=i.topOverlay.holder,u=i.inlineStartOverlay.holder,d=h!==r?h.scrollTop:0,f=u!==r?u.scrollLeft:0,g=r.innerWidth-l.left-c,{wtTable:m}=(e=i.getParentOverlay(t))!==null&&e!==void 0?e:this.hot.view._wt,w=m.name,v=["master","inline_start"].includes(w)?d:0,C=["master","top","bottom"].includes(w)?f:0,S=o.top===l.top?0:1;let x=o.top-l.top-S-v,_=0;this.hot.isRtl()?_=r.innerWidth-o.left-a-g-1+C:_=o.left-l.left-1-C,["top","top_inline_start_corner"].includes(w)&&(x+=i.topOverlay.getOverlayOffset()),["inline_start","top_inline_start_corner"].includes(w)&&(_+=Math.abs(i.inlineStartOverlay.getOverlayOffset()));const R=this.hot.hasColHeaders(),M=this.hot.rowIndexMapper.getRenderableFromVisualIndex(this.row),O=this.hot.columnIndexMapper.getRenderableFromVisualIndex(this.col),k=this.hot.rowIndexMapper.getRenderableIndexesLength()-this.hot.view._wt.getSetting("fixedRowsBottom");(R&&M<=0||M===k)&&(x+=1),O<=0&&(_+=1);const B=s.rowsRenderCalculator.startPosition,z=s.columnsRenderCalculator.startPosition,Q=Math.abs(i.inlineStartOverlay.getScrollPosition()),te=i.topOverlay.getScrollPosition(),ne=ui(this.hot.rootDocument);let j=t.offsetTop;if(["inline_start","master"].includes(w)&&(j+=B-te),["bottom","bottom_inline_start_corner"].includes(w)){const{wtViewport:K,wtTable:ee}=i.bottomOverlay.clone;j+=K.getWorkspaceHeight()-ee.getHeight()-ne}let ie=t.offsetLeft;this.hot.isRtl()?(ie>=0?ie=m.getWidth()-t.offsetLeft:ie=Math.abs(ie),ie+=z-Q-a):["top","master","bottom"].includes(w)&&(ie+=z-Q);const oe=da(this.TD,this.hot.rootWindow),J=this.hot.isRtl()?"borderRightWidth":"borderLeftWidth",pe=parseInt(oe[J],10)>0?0:1,p=parseInt(oe.borderTopWidth,10)>0?0:1,b=Qt(t)+pe,y=$n(t)+p,T=WU(h)?ne:0,H=jU(u)?ne:0,E=this.hot.view.maximumVisibleElementWidth(ie)-T+pe,D=Math.max(this.hot.view.maximumVisibleElementHeight(j)-H+p,23);return{top:x,start:_,height:y,maxHeight:D,width:b,maxWidth:E}}getEditedCellsLayerClass(){switch(this.checkEditorSection()){case"inline-start":return"ht_clone_left ht_clone_inline_start";case"bottom":return"ht_clone_bottom";case"bottom-inline-start-corner":return"ht_clone_bottom_left_corner ht_clone_bottom_inline_start_corner";case"top":return"ht_clone_top";case"top-inline-start-corner":return"ht_clone_top_left_corner ht_clone_top_inline_start_corner";default:return"ht_clone_master"}}getEditedCell(){return this.hot.getCell(this.row,this.col,!0)}checkEditorSection(){const e=this.hot.countRows();let t="";return this.row<this.hot.getSettings().fixedRowsTop?this.col<this.hot.getSettings().fixedColumnsStart?t="top-inline-start-corner":t="top":this.hot.getSettings().fixedRowsBottom&&this.row>=e-this.hot.getSettings().fixedRowsBottom?this.col<this.hot.getSettings().fixedColumnsStart?t="bottom-inline-start-corner":t="bottom":this.col<this.hot.getSettings().fixedColumnsStart&&(t="inline-start"),t}}Lt(dg,mG);const nye={name:"editorCloseAndSaveByArrowKeys",callback(n,e,t){const i=n._getEditorManager(),s=i.getActiveEditor();s.isInFullEditMode()&&s.state===kn.EDITING||(i.closeEditorAndSaveChanges(),n.getSelected()&&(t.includes("arrowdown")?n.selection.transformStart(1,0):t.includes("arrowup")?n.selection.transformStart(-1,0):t.includes("arrowleft")?n.selection.transformStart(0,-1*n.getDirectionFactor()):t.includes("arrowright")&&n.selection.transformStart(0,n.getDirectionFactor())),e.preventDefault())}},iye={name:"editorCloseAndSaveByEnter",callback(n,e){const t=n._getEditorManager();t.closeEditorAndSaveChanges(e.ctrlKey||e.metaKey),t.moveSelectionAfterEnter(e)}},sye={name:"editorCloseWithoutSaving",callback(n){const e=n._getEditorManager();e.closeEditorAndRestoreOriginalValue(n.getShortcutManager().isCtrlPressed()),e.activeEditor.focus()}},rye={name:"editorFastOpen",callback(n,e){const{highlight:t}=n.getSelectedRangeLast();t.isHeader()||n._getEditorManager().openEditor(null,e,!0)}},oye={name:"editorOpen",callback(n,e,t){const i=n._getEditorManager(),s=n.getSelectedRangeLast(),{highlight:r}=s;if(n.selection.isMultiple()&&!s.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0){const o=n.getSettings(),a=typeof o.enterMoves=="function"?o.enterMoves(e):o.enterMoves;t.includes("shift")?n.selection.transformFocus(-a.row,-a.col):n.selection.transformFocus(a.row,a.col);return}r.isHeader()||(n.getSettings().enterBeginsEditing?i.cellProperties.readOnly?i.moveSelectionAfterEnter(e):i.openEditor(null,e,!0):i.moveSelectionAfterEnter(e),Ar(e))}};function aye(){return[Qbe,nye,iye,sye,rye,oye]}const lye={name:"extendCellsSelectionDown",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByColumnHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByRowHeader())&&n.selection.transformEnd(1,0)}},cye={name:"extendCellsSelectionDownByViewportHeight",callback(n){const{to:e}=n.getSelectedRangeLast(),t=Math.min(e.row+n.countVisibleRows(),n.countRows()-1),i=n.rowIndexMapper.getNearestNotHiddenIndex(t,-1);if(i!==null){const s=n._createCellCoords(i,e.col),r=e.row-n.view.getFirstFullyVisibleRow(),o=Math.min(s.row-r,n.countRows()-1);n.selection.setRangeEnd(s),n.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}},hye={name:"extendCellsSelectionLeft",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByColumnHeader())&&n.selection.transformEnd(0,-1*n.getDirectionFactor())}},uye={name:"extendCellsSelectionRight",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByColumnHeader())&&n.selection.transformEnd(0,n.getDirectionFactor())}},dye={name:"extendCellsSelectionToColumns",callback(n){const{highlight:e,from:t,to:i}=n.getSelectedRangeLast();n.selection.isSelectedByRowHeader()?n.selection.selectAll(!0,!0):n.selectColumns(t.col,i.col,e)}},fye={name:"extendCellsSelectionToMostBottom",callback(n){const{selection:e,rowIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByRowHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(n.countRows()-1,-1),l=s.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(a,r.col))}}},gye={name:"extendCellsSelectionToMostInlineEnd",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast();if(!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&i.isCell()){const o=t.getNearestNotHiddenIndex(n.countCols()-1,-1),a=s.clone();a.col=i.col,e.setRangeStart(a,void 0,!1,i.clone()),e.setRangeEnd(n._createCellCoords(r.row,o))}}},mye={name:"extendCellsSelectionToMostInlineStart",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast();if(!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&i.isCell()){const o=parseInt(n.getSettings().fixedColumnsStart,10),a=t.getNearestNotHiddenIndex(o,1),l=s.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),e.setRangeEnd(n._createCellCoords(r.row,a))}}},pye={name:"extendCellsSelectionToMostLeft",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByColumnHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(...n.isRtl()?[n.countCols()-1,-1]:[0,1]),l=s.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(r.row,a))}}},wye={name:"extendCellsSelectionToMostRight",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByColumnHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(...n.isRtl()?[0,1]:[n.countCols()-1,-1]),l=s.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(r.row,a))}}},vye={name:"extendCellsSelectionToMostTop",callback(n){const{selection:e,rowIndexMapper:t}=n,{highlight:i,from:s,to:r}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByRowHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(0,1),l=s.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(a,r.col))}}},bye={name:"extendCellsSelectionToRows",callback(n){const{highlight:e,from:t,to:i}=n.getSelectedRangeLast();n.selection.isSelectedByColumnHeader()?n.selection.selectAll(!0,!0):n.selectRows(t.row,i.row,e)}},yye={name:"extendCellsSelectionUp",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByColumnHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByRowHeader())&&n.selection.transformEnd(-1,0)}},Cye={name:"extendCellsSelectionUpByViewportHeight",callback(n){const{to:e}=n.getSelectedRangeLast(),t=Math.max(e.row-n.countVisibleRows(),0),i=n.rowIndexMapper.getNearestNotHiddenIndex(t,1);if(i!==null){const s=n._createCellCoords(i,e.col),r=e.row-n.view.getFirstFullyVisibleRow(),o=Math.max(s.row-r,0);n.selection.setRangeEnd(s),n.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}};function Sye(){return[lye,cye,hye,uye,dye,fye,gye,mye,pye,wye,vye,bye,yye,Cye]}const _ye={name:"moveCellSelectionDown",callback(n){let{selection:e}=n;e.transformStart(1,0)}},Rye={name:"moveCellSelectionDownByViewportHeight",callback(n){const{navigableHeaders:e}=n.getSettings(),t=e?n.countColHeaders():0,{row:i}=n.getSelectedRangeLast().highlight;let s=n.countVisibleRows()+t;i===n.countRows()-1?s=1:i+s>n.countRows()&&(s=n.countRows()-i-1),n.selection.transformStart(s,0),n.getSelectedRangeLast().highlight.row<0&&n.scrollViewportTo({row:0})}},xye={name:"moveCellSelectionInlineEnd",callback(n,e){const t=n.getSettings(),i=n.getSelectedRangeLast(),s=typeof t.tabMoves=="function"?t.tabMoves(e):t.tabMoves;n.selection.isMultiple()&&!i.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0?n.selection.transformFocus(-s.row,-s.col):n.selection.transformStart(-s.row,-s.col)}},Eye={name:"moveCellSelectionInlineStart",callback(n,e){const t=n.getSettings(),i=n.getSelectedRangeLast(),s=typeof t.tabMoves=="function"?t.tabMoves(e):t.tabMoves;n.selection.isMultiple()&&!i.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0?n.selection.transformFocus(s.row,s.col):n.selection.transformStart(s.row,s.col)}},Tye={name:"moveCellSelectionLeft",callback(n){n.selection.transformStart(0,-1*n.getDirectionFactor())}},Mye={name:"moveCellSelectionRight",callback(n){n.selection.transformStart(0,n.getDirectionFactor())}},Aye={name:"moveCellSelectionToMostBottom",callback(n){const{col:e}=n.getSelectedRangeLast().highlight;let t=n.rowIndexMapper.getNearestNotHiddenIndex(n.countRows()-1,-1);t===null&&(t=-1),n.selection.setRangeStart(n._createCellCoords(t,e))}},Pye={name:"moveCellSelectionToMostBottomInlineEnd",callback(n){const{selection:e,rowIndexMapper:t,columnIndexMapper:i}=n,s=parseInt(n.getSettings().fixedRowsBottom,10),r=t.getNearestNotHiddenIndex(n.countRows()-s-1,-1),o=i.getNearestNotHiddenIndex(n.countCols()-1,-1);e.setRangeStart(n._createCellCoords(r,o))}},Iye={name:"moveCellSelectionToMostInlineEnd",callback(n){const{selection:e,columnIndexMapper:t}=n;e.setRangeStart(n._createCellCoords(n.getSelectedRangeLast().highlight.row,t.getNearestNotHiddenIndex(n.countCols()-1,-1)))}},Oye={name:"moveCellSelectionToMostInlineStart",callback(n){const{selection:e,columnIndexMapper:t}=n,i=parseInt(n.getSettings().fixedColumnsStart,10),s=n.getSelectedRangeLast().highlight.row,r=t.getNearestNotHiddenIndex(i,1);e.setRangeStart(n._createCellCoords(s,r))}},kye={name:"moveCellSelectionToMostLeft",callback(n){const{selection:e,columnIndexMapper:t}=n,i=n.getSelectedRangeLast().highlight.row;let s=t.getNearestNotHiddenIndex(...n.isRtl()?[n.countCols()-1,-1]:[0,1]);s===null&&(s=n.isRtl()?-1:-n.countRowHeaders()),e.setRangeStart(n._createCellCoords(i,s))}},Hye={name:"moveCellSelectionToMostRight",callback(n){const{selection:e,columnIndexMapper:t}=n,{row:i}=n.getSelectedRangeLast().highlight;let s=t.getNearestNotHiddenIndex(...n.isRtl()?[0,1]:[n.countCols()-1,-1]);s===null&&(s=n.isRtl()?-n.countRowHeaders():-1),e.setRangeStart(n._createCellCoords(i,s))}},Dye={name:"moveCellSelectionToMostTop",callback(n){const{col:e}=n.getSelectedRangeLast().highlight;let t=n.rowIndexMapper.getNearestNotHiddenIndex(0,1);t===null&&(t=-n.countColHeaders()),n.selection.setRangeStart(n._createCellCoords(t,e))}},Nye={name:"moveCellSelectionToMostTopInlineStart",callback(n){const{selection:e,rowIndexMapper:t,columnIndexMapper:i}=n,s=parseInt(n.getSettings().fixedRowsTop,10),r=parseInt(n.getSettings().fixedColumnsStart,10),o=t.getNearestNotHiddenIndex(s,1),a=i.getNearestNotHiddenIndex(r,1);e.setRangeStart(n._createCellCoords(o,a))}},Lye={name:"moveCellSelectionUp",callback(n){let{selection:e}=n;e.transformStart(-1,0)}},$ye={name:"moveCellSelectionUpByViewportHight",callback(n){const{navigableHeaders:e}=n.getSettings(),t=e?n.countColHeaders():0,{row:i}=n.getSelectedRangeLast().highlight;let s=-(n.countVisibleRows()+t);i===-t?s=-1:i+s<t&&(s=-(i+t)),n.selection.transformStart(s,0),n.getSelectedRangeLast().highlight.row<0&&n.scrollViewportTo({row:0})}};function Fye(){return[_ye,Rye,xye,Eye,Tye,Mye,Aye,Pye,Iye,Oye,kye,Hye,Dye,Nye,Lye,$ye]}const Bye={name:"emptySelectedCells",callback(n){n.emptySelectedCells(),n._getEditorManager().prepareEditor()}},Vye={name:"scrollToFocusedCell",callback(n){const{highlight:e}=n.getSelectedRangeLast(),t=n.view.getFirstFullyVisibleRow()-1,i=n.view.getFirstFullyVisibleColumn()-1,s=n.view.getLastFullyVisibleRow()+1,r=n.view.getLastFullyVisibleColumn()+1,o=n._createCellCoords(t,i),a=n._createCellCoords(s,r);if(!n._createCellRange(o,o,a).includes(e)&&(e.row>=0||e.col>=0)){const c={};if(e.col>=0){const h=Math.floor(n.countVisibleCols()/2);c.col=Math.max(e.col-h,0)}if(e.row>=0){const h=Math.floor(n.countVisibleRows()/2);c.row=Math.max(e.row-h,0)}n.scrollViewportTo({...c,verticalSnap:"top",horizontalSnap:"start"})}}},Wye={name:"selectAllCells",callback(n){n.selection.selectAll(!0,!0,{disableHeadersHighlight:!0})}},jye={name:"selectAllCellsAndHeaders",callback(n){n.selection.selectAll(!0,!0,{disableHeadersHighlight:!1})}},zye={name:"populateSelectedCellsData",callback(n){const e=n.getSelectedRange(),{row:t,col:i}=e[e.length-1].highlight.normalize(),s=n.getDataAtCell(t,i),r=new Map;for(let o=0;o<e.length;o++)e[o].forAll((a,l)=>{if(a>=0&&l>=0&&(a!==t||l!==i)){const{readOnly:c}=n.getCellMeta(a,l);c||r.set(`${a}x${l}`,[a,l,s])}});n.setDataAtCell(Array.from(r.values()))}},Uye=[...aye(),...Sye(),...Fye(),Bye,Vye,Wye,jye,zye];function pG(n){const e={};return Uye.forEach(t=>{let{name:i,callback:s}=t;e[i]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return s(n,...o)}}),e}function Yye(n){const e=n.getShortcutManager().addContext("editor"),t=pG(n),i={group:th};e.addShortcuts([{keys:[["Enter"],["Enter","Shift"]],callback:(s,r)=>t.editorCloseAndSaveByEnter(s,r)},{keys:[["Enter","Control/Meta"],["Enter","Control/Meta","Shift"]],captureCtrl:!0,callback:(s,r)=>t.editorCloseAndSaveByEnter(s,r)},{keys:[["Tab"],["Tab","Shift"],["PageDown"],["PageUp"]],forwardToContext:n.getShortcutManager().getContext("grid"),callback:(s,r)=>t.editorCloseAndSave(s,r)},{keys:[["ArrowDown"],["ArrowUp"],["ArrowLeft"],["ArrowRight"]],preventDefault:!1,callback:(s,r)=>t.editorCloseAndSaveByArrowKeys(s,r)},{keys:[["Escape"],["Escape","Control/Meta"]],callback:()=>t.editorCloseWithoutSaving()}],i)}function Gye(n){const e=n.getShortcutManager().addContext("grid"),t=pG(n),i={runOnlyIf:()=>{const{navigableHeaders:s}=n.getSettings();return Me(n.getSelected())&&(s||!s&&n.countRenderedRows()>0&&n.countRenderedCols()>0)},group:gG};e.addShortcuts([{keys:[["F2"]],callback:s=>t.editorFastOpen(s)},{keys:[["Enter"],["Enter","Shift"]],callback:(s,r)=>t.editorOpen(s,r)},{keys:[["Backspace"],["Delete"]],callback:()=>t.emptySelectedCells()}],{group:th,runOnlyIf:()=>Me(n.getSelected())}),e.addShortcuts([{keys:[["Control/Meta","A"]],callback:()=>t.selectAllCells(),runOnlyIf:()=>{var s;return!((s=n.getSelectedRangeLast())!==null&&s!==void 0&&s.highlight.isHeader())}},{keys:[["Control/Meta","A"]],callback:()=>{},runOnlyIf:()=>{var s;return(s=n.getSelectedRangeLast())===null||s===void 0?void 0:s.highlight.isHeader()},preventDefault:!0},{keys:[["Control/Meta","Shift","Space"]],callback:()=>t.selectAllCellsAndHeaders()},{keys:[["Control/Meta","Enter"]],callback:()=>t.populateSelectedCellsData(),runOnlyIf:()=>{var s,r;return!((s=n.getSelectedRangeLast())!==null&&s!==void 0&&s.highlight.isHeader())&&((r=n.getSelectedRangeLast())===null||r===void 0?void 0:r.getCellsCount())>1}},{keys:[["Control","Space"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToColumns()},{keys:[["Shift","Space"]],stopPropagation:!0,callback:()=>t.extendCellsSelectionToRows()},{keys:[["ArrowUp"]],callback:()=>t.moveCellSelectionUp()},{keys:[["ArrowUp","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostTop()},{keys:[["ArrowUp","Shift"]],callback:()=>t.extendCellsSelectionUp()},{keys:[["ArrowUp","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostTop(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByColumnHeader())},{keys:[["ArrowDown"]],callback:()=>t.moveCellSelectionDown()},{keys:[["ArrowDown","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostBottom()},{keys:[["ArrowDown","Shift"]],callback:()=>t.extendCellsSelectionDown()},{keys:[["ArrowDown","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostBottom(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByColumnHeader())},{keys:[["ArrowLeft"]],callback:()=>t.moveCellSelectionLeft()},{keys:[["ArrowLeft","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostLeft()},{keys:[["ArrowLeft","Shift"]],callback:()=>t.extendCellsSelectionLeft()},{keys:[["ArrowLeft","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostLeft(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByRowHeader())},{keys:[["ArrowRight"]],callback:()=>t.moveCellSelectionRight()},{keys:[["ArrowRight","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostRight()},{keys:[["ArrowRight","Shift"]],callback:()=>t.extendCellsSelectionRight()},{keys:[["ArrowRight","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostRight(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByRowHeader())},{keys:[["Home"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostInlineStart(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["Home","Shift"]],callback:()=>t.extendCellsSelectionToMostInlineStart()},{keys:[["Home","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostTopInlineStart(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostInlineEnd(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End","Shift"]],callback:()=>t.extendCellsSelectionToMostInlineEnd()},{keys:[["End","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostBottomInlineEnd(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["PageUp"]],callback:()=>t.moveCellSelectionUpByViewportHight()},{keys:[["PageUp","Shift"]],callback:()=>t.extendCellsSelectionUpByViewportHeight()},{keys:[["PageDown"]],callback:()=>t.moveCellSelectionDownByViewportHeight()},{keys:[["PageDown","Shift"]],callback:()=>t.extendCellsSelectionDownByViewportHeight()},{keys:[["Tab"]],preventDefault:!1,callback:s=>t.moveCellSelectionInlineStart(s)},{keys:[["Shift","Tab"]],preventDefault:!1,callback:s=>t.moveCellSelectionInlineEnd(s)},{keys:[["Control/Meta","Backspace"]],callback:()=>t.scrollToFocusedCell()}],i)}function Kye(n){[Gye,Yye].forEach(e=>e(n))}function qye(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=n.rootElement,i=C$(n),s=C$(n);return i.addEventListener("focus",()=>e==null?void 0:e.onFocusFromTop()),s.addEventListener("focus",()=>e==null?void 0:e.onFocusFromBottom()),t.firstChild.before(i),t.lastChild.after(s),{activate(){n._registerTimeout(()=>{i.tabIndex=0,s.tabIndex=0},10)},deactivate(){n._registerTimeout(()=>{i.tabIndex=-1,s.tabIndex=-1},10)}}}function C$(n){const t=n.rootDocument.createElement("input");return t.type="text",t.classList.add("htFocusCatcher"),n.getSettings().ariaTags&&$e(t,[ea(),sd()]),t}function Xye(n){const e=Qye(n);let t;const{activate:i,deactivate:s}=qye(n,{onFocusFromTop(){var u;const d=(u=e(t))!==null&&u!==void 0?u:AM(n);d&&(n.runHooks("modifyFocusOnTabNavigation","from_above",d),n.selectCell(d.row,d.col)),n.listen()},onFocusFromBottom(){var u;const d=(u=e(t))!==null&&u!==void 0?u:PM(n);d&&(n.runHooks("modifyFocusOnTabNavigation","from_below",d),n.selectCell(d.row,d.col)),n.listen()}}),r={wrapped:!1,flipped:!1};let o=!0,a=!1,l=!1;n.addHook("afterListen",()=>s()),n.addHook("afterUnlisten",()=>i()),n.addHook("afterSelection",(u,d,f,g,m)=>{if(a&&(r.wrapped&&r.flipped||l)&&(l=!1,m.value=!0),o){var w;t=(w=n.getSelectedRangeLast())===null||w===void 0?void 0:w.highlight}}),n.addHook("beforeRowWrap",(u,d,f)=>{r.wrapped=!0,r.flipped=f});function c(){r.wrapped=!1,r.flipped=!1,n.deselectCell(),n.unlisten()}const h={keys:[["Tab"],["Shift","Tab"]],preventDefault:!1,stopPropagation:!1,relativeToGroup:gG,group:"focusCatcher"};n.getShortcutManager().getContext("grid").addShortcuts([{...h,callback:()=>{const{tabNavigation:u}=n.getSettings();a=!0,n.getSelectedRangeLast()&&!u&&(o=!1),u||(l=!0)},position:"before"},{...h,callback:u=>{const{tabNavigation:d,autoWrapRow:f}=n.getSettings();if(a=!1,o=!0,!d||!n.selection.isSelected()||f&&r.wrapped&&r.flipped||!f&&r.wrapped)return f&&r.wrapped&&r.flipped&&(t=u.shiftKey?AM(n):PM(n)),c(),!1;u.preventDefault()},position:"after"}])}function AM(n){const{rowIndexMapper:e,columnIndexMapper:t}=n,{navigableHeaders:i}=n.getSettings();let s=i&&n.countColHeaders()>0?-n.countColHeaders():0,r=i&&n.countRowHeaders()>0?-n.countRowHeaders():0;return s===0&&(s=e.getVisualFromRenderableIndex(s)),r===0&&(r=t.getVisualFromRenderableIndex(r)),s===null||r===null?null:n._createCellCoords(s,r)}function PM(n){var e,t;const{rowIndexMapper:i,columnIndexMapper:s}=n,{navigableHeaders:r}=n.getSettings();let o=i.getRenderableIndexesLength()-1,a=s.getRenderableIndexesLength()-1;if(o<0){if(!r||n.countColHeaders()===0)return null;o=-1}if(a<0){if(!r||n.countColHeaders()===0)return null;a=-1}return n._createCellCoords((e=i.getVisualFromRenderableIndex(o))!==null&&e!==void 0?e:o,(t=s.getVisualFromRenderableIndex(a))!==null&&t!==void 0?t:a)}function Qye(n){return e=>{if(!e)return null;const t=AM(n),i=PM(n);return e.col<t.col&&(e.col=t.col),e.col>i.col&&(e.col=i.col),e.row<t.row&&(e.row=t.row),e.row>i.row&&(e.row=i.row),e}}function Zye(n){return e=>{let{col:t}=e;n.scrollViewportTo({col:t})}}function Jye(){return()=>{}}function eCe(n){return e=>{n.scrollViewportTo(e.toObject())}}function tCe(n){return e=>{n.scrollViewportTo(e.toObject())}}function nCe(n){return e=>{n.scrollViewportTo(e.toObject())}}function iCe(n){return e=>{let{row:t}=e;n.scrollViewportTo({row:t})}}function sCe(n){return e=>{const t=n.selection.getSelectionSource(),{row:i,col:s}=e;if(i<0&&s>=0)n.scrollViewportTo({col:s});else if(s<0&&i>=0)n.scrollViewportTo({row:i});else{if(t==="mouse"&&(s===n.view.getLastPartiallyVisibleColumn()||i===n.view.getLastPartiallyVisibleRow()))return;n.scrollViewportTo({row:i,col:s})}}}function rCe(n){const{selection:e}=n;let t=!1,i=!1;return{resume(){i=!1},suspend(){i=!0},skipNextScrollCycle(){t=!0},scrollTo(s){var r;if(t||i){t=!1;return}let o;e.isFocusSelectionChanged()?o=eCe(n):e.isSelectedByCorner()?o=Jye():e.isSelectedByRowHeader()?o=iCe(n):e.isSelectedByColumnHeader()?o=Zye(n):e.getSelectedRange().size()===1&&e.isMultiple()?o=tCe(n):e.getSelectedRange().size()===1&&!e.isMultiple()?o=sCe(n):e.getSelectedRange().size()>1&&(o=nCe(n)),(r=o)===null||r===void 0||r(s)}}}const S$=new Map([[" ","space"],["spacebar","space"],["scroll","scrolllock"],["del","delete"],["esc","escape"],["medianexttrack","mediatracknext"],["mediaprevioustrack","mediatrackprevious"],["volumeup","audiovolumeup"],["volumedown","audiovolumedown"],["volumemute","audiovolumemute"],["multiply","*"],["add","+"],["divide","/"],["subtract","-"],["left","arrowleft"],["right","arrowright"],["up","arrowup"],["down","arrowdown"]]),xb=n=>n.map(e=>{const t=e.toLowerCase();return S$.has(t)?S$.get(t):t}).sort().join("+"),oCe=n=>n.split("+"),_$=new Map([[96,"numpad0"],[97,"numpad1"],[98,"numpad2"],[99,"numpad3"],[100,"numpad4"],[101,"numpad5"],[102,"numpad6"],[103,"numpad7"],[104,"numpad8"],[105,"numpad9"],[106,"multiply"],[107,"add"],[108,"decimal"],[109,"subtract"],[110,"decimal"],[111,"divide"],[112,"f1"],[113,"f2"],[114,"f3"],[115,"f4"],[116,"f5"],[117,"f6"],[118,"f7"],[119,"f8"],[120,"f9"],[121,"f10"],[122,"f11"],[123,"f12"],[186,"semicolon"],[187,"equal"],[188,"comma"],[189,"minus"],[190,"period"],[191,"slash"],[192,"backquote"],[219,"bracketleft"],[220,"backslash"],[221,"bracketright"],[222,"quote"]]),Rx=n=>{let{which:e,key:t}=n;if(_$.has(e))return _$.get(e);const i=String.fromCharCode(e).toLowerCase();return/^[a-z0-9]$/.test(i)?i:t.toLowerCase()},wG=Symbol("shortcut-context");function vG(n){return Je(n)&&n.__kindOf===wG}const aCe=n=>{const e=q0({errorIdExists:l=>`The "${l}" shortcut is already registered in the "${n}" context.`}),t=function(){let{keys:l,callback:c,group:h,runOnlyIf:u=()=>!0,captureCtrl:d=!1,preventDefault:f=!0,stopPropagation:g=!1,relativeToGroup:m,position:w,forwardToContext:v}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Xt(h))throw new Error("You need to define the shortcut's group.");if(Yt(c)===!1)throw new Error("The shortcut's callback needs to be a function.");if(Array.isArray(l)===!1)throw new Error(Nt`Pass the shortcut\'s keys as an array of arrays,\x20
      using the KeyboardEvent.key properties:\x20
      https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values.`);const C={callback:c,group:h,runOnlyIf:u,captureCtrl:d,preventDefault:f,stopPropagation:g};Me(m)&&(C.relativeToGroup=m,C.position=w),vG(v)&&(C.forwardToContext=v),l.forEach(S=>{const x=xb(S);if(e.hasItem(x)){const R=e.getItem(x);let M=R.findIndex(O=>O.group===m);M!==-1?w==="before"?M-=1:M+=1:M=R.length,R.splice(M,0,C)}else e.addItem(x,[C])})},i=function(l){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.forEach(h=>{et(c,(u,d)=>{Object.prototype.hasOwnProperty.call(h,d)===!1&&(h[d]=c[d])}),t(h)})},s=l=>{const c=xb(l);e.removeItem(c)};return{__kindOf:wG,addShortcut:t,addShortcuts:i,getShortcuts:l=>{const c=xb(l),h=e.getItem(c);return Me(h)?h.slice():[]},hasShortcut:l=>{const c=xb(l);return e.hasItem(c)},removeShortcutsByKeys:s,removeShortcutsByGroup:l=>{e.getItems().forEach(h=>{let[u,d]=h;const f=d.filter(g=>g.group!==l);f.length===0?s(oCe(u)):(d.length=0,d.push(...f))})}}};function lCe(){const n=new Set;return{press(e){n.add(e)},release(e){n.delete(e)},releaseAll(){n.clear()},isPressed(e){return n.has(e)}}}const cCe=["meta","alt","shift","control"],tm=lCe(),nm=[];let Eb=0;function hCe(n,e,t,i,s){const r=f=>cCe.includes(f),o=function(f){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const m=[];return f.altKey&&m.push("alt"),g&&(f.ctrlKey||f.metaKey)?m.push("control/meta"):(f.ctrlKey&&m.push("control"),f.metaKey&&m.push("meta")),f.shiftKey&&m.push("shift"),m},a=f=>{if(e(f)===!1)return;const g=t(f);if(f.keyCode===229||g===!1||lc(f))return;const m=Rx(f);let w=[];r(m)||(w=o(f));const v=[m].concat(w);!s(f,v)&&(ow()&&w.includes("meta")||!ow()&&w.includes("control"))&&s(f,[m].concat(o(f,!0))),i(f)},l=f=>{if(f.key){const g=Rx(f);r(g)&&tm.press(g)}},c=f=>{if(f.key){const g=Rx(f);r(g)&&tm.release(g)}},h=()=>{tm.releaseAll()};return{mount:()=>{let f=n;for(Eb+=1;f;)Eb===1&&(f.document.documentElement.addEventListener("keydown",l),nm.push({event:"keydown",listener:l}),f.document.documentElement.addEventListener("keyup",c),nm.push({event:"keyup",listener:c})),f.document.documentElement.addEventListener("keydown",a),f.document.documentElement.addEventListener("blur",h),f=Nu(f)},unmount:()=>{let f=n;for(Eb-=1;f;){if(Eb===0){for(let g=0;g<nm.length;g++){const{event:m,listener:w}=nm[g];f.document.documentElement.removeEventListener(m,w)}nm.length=0}f.document.documentElement.removeEventListener("keydown",a),f.document.documentElement.removeEventListener("blur",h),f=Nu(f)}},isPressed:f=>tm.isPressed(f),releasePressedKeys:()=>tm.releaseAll()}}const uCe=n=>{let{ownerWindow:e,handleEvent:t,beforeKeyDown:i,afterKeyDown:s}=n;const r=q0({errorIdExists:g=>`The "${g}" context name is already registered.`});let o="grid";const a=g=>{const m=aCe(g);return r.addItem(g,m),m},l=()=>o,c=g=>r.getItem(g),h=g=>{if(!r.hasItem(g))throw new Error(Nt`You've tried to activate the "${g}" shortcut context\x20
        that does not exist. Before activation, register the context using the "addContext" method.`);o=g};let u=!1;const d=function(g,m){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l();const v=vG(w)?w:c(w);let C=!1;if(!v.hasShortcut(m))return C;const S=v.getShortcuts(m);for(let x=0;x<S.length;x++){const{callback:_,runOnlyIf:R,preventDefault:M,stopPropagation:O,captureCtrl:P,forwardToContext:k}=S[x];if(R(g)===!0){if(u=P,C=_(g,m)===!1,u=!1,M&&g.preventDefault(),O&&(Ar(g),g.stopPropagation()),C)break;k&&d(g,m,k)}}return C},f=hCe(e,t,i,s,d);return f.mount(),{addContext:a,getActiveContextName:l,getContext:c,setActiveContextName:h,isCtrlPressed:()=>!u&&(f.isPressed("control")||f.isPressed("meta")),releasePressedKeys:()=>f.releasePressedKeys(),destroy:()=>f.unmount()}};let xx=null;const Ex=new Map;function bG(n,e){var t,i=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=this;const o=new Er(r);let a,l,c,h,u,d,f=!0;Gwe(s)&&Ywe(this),this.rootElement=n,this.rootDocument=n.ownerDocument,this.rootWindow=this.rootDocument.defaultView,this.isDestroyed=!1,this.renderSuspendedCounter=0,this.executionSuspendedCounter=0;const g=(t=e==null?void 0:e.layoutDirection)!==null&&t!==void 0?t:"inherit",m=["rtl","ltr"].includes(g)?g:this.rootWindow.getComputedStyle(this.rootElement).direction;this.rootElement.setAttribute("dir",m),this.isRtl=function(){return m==="rtl"},this.isLtr=function(){return!r.isRtl()},this.getDirectionFactor=function(){return r.isLtr()?1:-1},e.language=Wve(e.language);const w=new fG(r,e,[jbe,Xbe]),v=w.getTableMeta(),C=w.getGlobalMeta(),S=q0();this.container=this.rootDocument.createElement("div"),this.renderCall=!1,n.insertBefore(this.container,n.firstChild),Yy(this)&&xU(e.licenseKey,n),this.guid=`ht_${tP()}`,Ex.set(this.guid,this),this.columnIndexMapper=new EM,this.rowIndexMapper=new EM,this.columnIndexMapper.addLocalHook("indexesSequenceChange",p=>{r.runHooks("afterColumnSequenceChange",p)}),this.rowIndexMapper.addLocalHook("indexesSequenceChange",p=>{r.runHooks("afterRowSequenceChange",p)}),l=new ove(r),(!this.rootElement.id||this.rootElement.id.substring(0,3)==="ht_")&&(this.rootElement.id=this.guid);const x=p=>{const{row:b,col:y}=p;return r._createCellCoords(b>=0?r.rowIndexMapper.getRenderableFromVisualIndex(b):b,y>=0?r.columnIndexMapper.getRenderableFromVisualIndex(y):y)},_=p=>{const{row:b,col:y}=p;return r._createCellCoords(b>=0?r.rowIndexMapper.getVisualFromRenderableIndex(b):b,y>=0?r.columnIndexMapper.getVisualFromRenderableIndex(y):y)},R=(p,b)=>{const y=b>p?1:-1,T=Math.min(p,b),H=Math.max(p,b),E=r.rowIndexMapper.getNearestNotHiddenIndex(p,y);return E===null||y===1&&E>H||y===-1&&E<T?null:E>=0?r.rowIndexMapper.getRenderableFromVisualIndex(E):E},M=(p,b)=>{const y=b>p?1:-1,T=Math.min(p,b),H=Math.max(p,b),E=r.columnIndexMapper.getNearestNotHiddenIndex(p,y);return E===null||y===1&&E>H||y===-1&&E<T?null:E>=0?r.columnIndexMapper.getRenderableFromVisualIndex(E):E};let O=new hG(v,{rowIndexMapper:r.rowIndexMapper,columnIndexMapper:r.columnIndexMapper,countCols:()=>r.countCols(),countRows:()=>r.countRows(),propToCol:p=>a.propToCol(p),isEditorOpened:()=>r.getActiveEditor()?r.getActiveEditor().isOpened():!1,countRenderableColumns:()=>this.view.countRenderableColumns(),countRenderableRows:()=>this.view.countRenderableRows(),countRowHeaders:()=>this.countRowHeaders(),countColHeaders:()=>this.countColHeaders(),countRenderableRowsInRange:function(){return i.view.countRenderableRowsInRange(...arguments)},countRenderableColumnsInRange:function(){return i.view.countRenderableColumnsInRange(...arguments)},getShortcutManager:()=>r.getShortcutManager(),createCellCoords:(p,b)=>r._createCellCoords(p,b),createCellRange:(p,b,y)=>r._createCellRange(p,b,y),visualToRenderableCoords:x,renderableToVisualCoords:_,findFirstNonHiddenRenderableRow:R,findFirstNonHiddenRenderableColumn:M,isDisabledCellSelection:(p,b)=>p<0||b<0?r.getSettings().disableVisualSelection:r.getCellMeta(p,b).disableVisualSelection});this.selection=O;const P=p=>{let{hiddenIndexesChanged:b}=p;b&&this.selection.commit()};this.columnIndexMapper.addLocalHook("cacheUpdated",P),this.rowIndexMapper.addLocalHook("cacheUpdated",P),this.selection.addLocalHook("afterSetRangeEnd",(p,b)=>{const y=Cr(!1),T=this.selection.getSelectedRange(),{from:H,to:E}=T.current(),D=T.size()-1;this.runHooks("afterSelection",H.row,H.col,E.row,E.col,y,D),this.runHooks("afterSelectionByProp",H.row,r.colToProp(H.col),E.row,r.colToProp(E.col),y,D),b&&(!y.isTouched()||y.isTouched()&&!y.value)&&d.scrollTo(p);const K=O.isSelectedByRowHeader(),ee=O.isSelectedByColumnHeader();K&&ee?ae(this.rootElement,["ht__selection--rows","ht__selection--columns"]):K?(ze(this.rootElement,"ht__selection--columns"),ae(this.rootElement,"ht__selection--rows")):ee?(ze(this.rootElement,"ht__selection--rows"),ae(this.rootElement,"ht__selection--columns")):ze(this.rootElement,["ht__selection--rows","ht__selection--columns"]),O.getSelectionSource()!=="shift"&&h.closeEditor(null),r.view.render(),h.prepareEditor()}),this.selection.addLocalHook("beforeSetFocus",p=>{this.runHooks("beforeSelectionFocusSet",p.row,p.col)}),this.selection.addLocalHook("afterSetFocus",p=>{const b=Cr(!1);this.runHooks("afterSelectionFocusSet",p.row,p.col,b),(!b.isTouched()||b.isTouched()&&!b.value)&&d.scrollTo(p),h.closeEditor(),r.view.render(),h.prepareEditor()}),this.selection.addLocalHook("afterSelectionFinished",p=>{const b=p.length-1,{from:y,to:T}=p[b];this.runHooks("afterSelectionEnd",y.row,y.col,T.row,T.col,b),this.runHooks("afterSelectionEndByProp",y.row,r.colToProp(y.col),T.row,r.colToProp(T.col),b)}),this.selection.addLocalHook("afterIsMultipleSelection",p=>{const b=this.runHooks("afterIsMultipleSelection",p.value);p.value&&(p.value=b)}),this.selection.addLocalHook("afterDeselect",()=>{h.closeEditor(),r.view.render(),ze(this.rootElement,["ht__selection--rows","ht__selection--columns"]),this.runHooks("afterDeselect")}),this.selection.addLocalHook("beforeHighlightSet",()=>this.runHooks("beforeSelectionHighlightSet")).addLocalHook("beforeSetRangeStart",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("beforeSetRangeStart",...b)}).addLocalHook("beforeSetRangeStartOnly",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("beforeSetRangeStartOnly",...b)}).addLocalHook("beforeSetRangeEnd",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("beforeSetRangeEnd",...b)}).addLocalHook("beforeSelectColumns",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("beforeSelectColumns",...b)}).addLocalHook("afterSelectColumns",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("afterSelectColumns",...b)}).addLocalHook("beforeSelectRows",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("beforeSelectRows",...b)}).addLocalHook("afterSelectRows",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("afterSelectRows",...b)}).addLocalHook("beforeModifyTransformStart",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("modifyTransformStart",...b)}).addLocalHook("afterModifyTransformStart",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("afterModifyTransformStart",...b)}).addLocalHook("beforeModifyTransformFocus",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("modifyTransformFocus",...b)}).addLocalHook("afterModifyTransformFocus",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("afterModifyTransformFocus",...b)}).addLocalHook("beforeModifyTransformEnd",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("modifyTransformEnd",...b)}).addLocalHook("afterModifyTransformEnd",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("afterModifyTransformEnd",...b)}).addLocalHook("beforeRowWrap",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("beforeRowWrap",...b)}).addLocalHook("beforeColumnWrap",function(){for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return i.runHooks("beforeColumnWrap",...b)}).addLocalHook("insertRowRequire",p=>this.alter("insert_row_above",p,1,"auto")).addLocalHook("insertColRequire",p=>this.alter("insert_col_start",p,1,"auto")),c={alter(p,b){var y,T;let H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=arguments.length>3?arguments[3]:void 0,D=arguments.length>4?arguments[4]:void 0;const K=ee=>{if(ee.length===0)return[];const he=[...ee];return he.sort((Ie,xe)=>{let[X]=Ie,[re]=xe;return X===re?0:X>re?1:-1}),Un(he,(Ie,xe)=>{let[X,re]=xe;const ce=Ie[Ie.length-1],[Be,Se]=ce,_e=Be+Se;if(X<=_e){const A=Math.max(re-(_e-X),0);ce[1]+=A}else Ie.push([X,re]);return Ie},[he[0]])};switch(p){case"insert_row_below":case"insert_row_above":const ee=r.countSourceRows();if(v.maxRows===ee)return;const he=p==="insert_row_below"?"below":"above";b=(y=b)!==null&&y!==void 0?y:he==="below"?ee:0;const{delta:se,startPhysicalIndex:Ie}=a.createRow(b,H,{source:E,mode:he});O.shiftRows(r.toVisualRow(Ie),se);break;case"insert_col_start":case"insert_col_end":const xe=p==="insert_col_end"?"end":"start";b=(T=b)!==null&&T!==void 0?T:xe==="end"?r.countSourceCols():0;const{delta:X,startPhysicalIndex:re}=a.createCol(b,H,{source:E,mode:xe});if(X){if(Array.isArray(v.colHeaders)){const Se=[r.toVisualColumn(re),0];Se.length+=X,Array.prototype.splice.apply(v.colHeaders,Se)}O.shiftColumns(r.toVisualColumn(re),X)}break;case"remove_row":const ce=Se=>{let _e=0;L(Se,A=>{let[I,N]=A;const U=Mn(I)?r.countRows()-1:Math.max(I-_e,0);if(Number.isInteger(I)&&(I=Math.max(I-_e,0)),!a.removeRow(I,N,E))return;if(O.isSelected()){const{row:Y}=r.getSelectedRangeLast().highlight;Y>=I&&Y<=I+N-1&&h.closeEditor(!0)}const q=r.countRows();q===0?O.deselect():E==="ContextMenu.removeRow"?O.refresh():O.shiftRows(I,-N);const W=v.fixedRowsTop;W>=U+1&&(v.fixedRowsTop-=Math.min(N,W-U));const F=v.fixedRowsBottom;F&&U>=q-F&&(v.fixedRowsBottom-=Math.min(N,F)),_e+=N})};Array.isArray(b)?ce(K(b)):ce([[b,H]]);break;case"remove_col":const Be=Se=>{let _e=0;L(Se,A=>{let[I,N]=A;const U=Mn(I)?r.countCols()-1:Math.max(I-_e,0);let $=r.toPhysicalColumn(U);if(Number.isInteger(I)&&(I=Math.max(I-_e,0)),!a.removeCol(I,N,E))return;if(O.isSelected()){const{col:Y}=r.getSelectedRangeLast().highlight;Y>=I&&Y<=I+N-1&&h.closeEditor(!0)}r.countCols()===0?O.deselect():E==="ContextMenu.removeColumn"?O.refresh():O.shiftColumns(I,-N);const F=v.fixedColumnsStart;F>=U+1&&(v.fixedColumnsStart-=Math.min(N,F-U)),Array.isArray(v.colHeaders)&&(typeof $>"u"&&($=-1),v.colHeaders.splice($,N)),_e+=N})};Array.isArray(b)?Be(K(b)):Be([[b,H]]);break;default:throw new Error(`There is no such action "${p}"`)}r.view.render(),D||c.adjustRowsAndCols()},adjustRowsAndCols(){const p=v.minRows,b=v.minSpareRows,y=v.minCols,T=v.minSpareCols;if(p){const H=r.countRows();H<p&&a.createRow(H,p-H,{source:"auto"})}if(b){const H=r.countEmptyRows(!0);if(H<b){const E=b-H,D=Math.min(E,v.maxRows-r.countSourceRows());a.createRow(r.countRows(),D,{source:"auto"})}}{let H;(y||T)&&(H=r.countEmptyCols(!0));let E=r.countCols();if(y&&!v.columns&&E<y){const D=y-E;H+=D,a.createCol(E,D,{source:"auto"})}if(T&&!v.columns&&r.dataType==="array"&&H<T){E=r.countCols();const D=T-H,K=Math.min(D,v.maxCols-E);a.createCol(E,K,{source:"auto"})}}r.view&&r.view.adjustElementsSize()},populateFromArray(p,b,y,T,H){let E,D,K,ee;const he=[],se={},Ie=[],xe=p.row,X=p.col;if(D=b.length,D===0)return!1;let re=0,ce=0;switch(Je(y)&&(re=y.col-X+1,ce=y.row-xe+1),H){case"shift_down":const Be=fp(b),Se=Be.length,_e=Math.max(Se,re),A=r.getData().slice(xe),I=fp(A).slice(X,X+_e);for(K=0;K<_e;K+=1)if(K<Se){for(E=0,D=Be[K].length;E<ce-D;E+=1)Be[K].push(Be[K][E%D]);K<I.length?Ie.push(Be[K].concat(I[K])):Ie.push(Be[K].concat(new Array(A.length).fill(null)))}else Ie.push(Be[K%Se].concat(I[K]));r.populateFromArray(xe,X,fp(Ie));break;case"shift_right":const N=b.length,U=Math.max(N,ce),$=r.getData().slice(xe).map(Re=>Re.slice(X));for(E=0;E<U;E+=1)if(E<N){for(K=0,ee=b[E].length;K<re-ee;K+=1)b[E].push(b[E][K%ee]);if(E<$.length)for(let Re=0;Re<$[E].length;Re+=1)b[E].push($[E][Re]);else b[E].push(...new Array($[0].length).fill(null))}else b.push(b[E%D].slice(0,U).concat($[E]));r.populateFromArray(xe,X,b);break;case"overwrite":default:se.row=p.row,se.col=p.col;let q=0,W=0,F=!0,Y;const G=function(De){let Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const dt=b[De%b.length];return Qe!==null?dt[Qe%dt.length]:dt},Z=b.length,fe=y?y.row-p.row+1:0;for(y?D=fe:D=Math.max(Z,fe),E=0;E<D&&!(y&&se.row>y.row&&fe>Z||!v.allowInsertRow&&se.row>r.countRows()-1||se.row>=v.maxRows);E++){const Re=E-q,De=G(Re).length,Qe=y?y.col-p.col+1:0;if(y?ee=Qe:ee=Math.max(De,Qe),se.col=p.col,Y=r.getCellMeta(se.row,se.col),(T==="CopyPaste.paste"||T==="Autofill.fill")&&Y.skipRowOnPaste){q+=1,se.row+=1,D+=1;continue}for(W=0,K=0;K<ee&&!(y&&se.col>y.col&&Qe>De||!v.allowInsertColumn&&se.col>r.countCols()-1||se.col>=v.maxCols);K++){if(Y=r.getCellMeta(se.row,se.col),(T==="CopyPaste.paste"||T==="Autofill.fill")&&Y.skipColumnOnPaste){W+=1,se.col+=1,ee+=1;continue}if(Y.readOnly&&T!=="UndoRedo.undo"){se.col+=1;continue}const dt=K-W;let it=G(Re,dt),We=r.getDataAtCell(se.row,se.col);if(it!==null&&typeof it=="object")if(Array.isArray(it)&&We===null&&(We=[]),We===null||typeof We!="object")F=!1;else{const pt=Yf(Array.isArray(We)?We:We[0]||We),yn=Yf(Array.isArray(it)?it:it[0]||it);U0(pt,yn)||Array.isArray(pt)&&Array.isArray(yn)?it=Yi(it):F=!1}else We!==null&&typeof We=="object"&&(F=!1);F&&he.push([se.row,se.col,it]),F=!0,se.col+=1}se.row+=1}r.setDataAtCell(he,null,null,T||"populateFromArray");break}}};function k(p){const b=ZY(p);mO(b)?(r.runHooks("beforeLanguageChange",b),C.language=b,r.runHooks("afterLanguageChange",b)):JY(p)}function B(p,b){const y=p==="className"?r.rootElement:r.table;if(f)ae(y,b);else{let T=[],H=[];C[p]&&(T=Array.isArray(C[p])?C[p]:aM(C[p])),b&&(H=Array.isArray(b)?b:aM(b));const E=oM(T,H),D=oM(H,T);E.length&&ze(y,E),D.length&&ae(y,D)}C[p]=b}this.init=function(){l.setData(v.data),r.runHooks("beforeInit"),(hl()||bP())&&ae(r.rootElement,"mobile"),this.updateSettings(v,!0),this.view=new Qwe(this),h=vM.getInstance(r,v,O),d=rCe(r),u=new tge(r),Yy(this)&&Xye(r),r.runHooks("init"),this.forceFullRender=!0,this.view.render(),f&&r.rootElement.offsetParent===null&&zU(r.rootElement,()=>{r.view._wt.wtOverlays.updateLastSpreaderSize(),r.render(),r.view.adjustElementsSize()}),typeof f=="object"&&(r.runHooks("afterChange",f[0],f[1]),f=!1),r.runHooks("afterInit")};function z(){let p=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue(){this.validatorsInQueue+=1,p=!1},removeValidatorFormQueue(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty(){},checkIfQueueIsEmpty(){this.validatorsInQueue===0&&p===!1&&(p=!0,this.onQueueEmpty(this.valid))}}}function Q(p){const b=p.replace(",",".");return isNaN(parseFloat(b))===!1?parseFloat(b):p}function te(p,b,y){if(!p.length){y();return}const T=r.getActiveEditor(),H=new z;let E=!0;H.onQueueEmpty=()=>{T&&E&&T.cancelChanges(),y()};for(let D=p.length-1;D>=0;D--){const[K,ee,,he]=p[D],se=a.propToCol(ee);let Ie;Number.isInteger(se)?Ie=r.getCellMeta(K,se):Ie={...Object.getPrototypeOf(v),...v},Ie.type==="numeric"&&typeof he=="string"&&bY(he)&&(p[D][3]=Q(he)),r.getCellValidator(Ie)&&(H.addValidatorToQueue(),r.validateCell(p[D][3],Ie,function(xe,X){return function(re){if(typeof re!="boolean")throw new Error("Validation error: result is not boolean");re===!1&&X.allowInvalid===!1&&(E=!1,p.splice(xe,1),X.valid=!0),H.removeValidatorFormQueue()}}(D,Ie),b))}H.checkIfQueueIsEmpty()}function ne(p,b){for(let T=p.length-1;T>=0;T--){let H=!1;if(p[T]===null){p.splice(T,1);continue}if(!((p[T][2]===null||p[T][2]===void 0)&&(p[T][3]===null||p[T][3]===void 0))){if(v.allowInsertRow)for(;p[T][0]>r.countRows()-1;){const{delta:E}=a.createRow(void 0,void 0,{source:b});if(E===0){H=!0;break}}if(r.dataType==="array"&&(!v.columns||v.columns.length===0)&&v.allowInsertColumn)for(;a.propToCol(p[T][1])>r.countCols()-1;){const{delta:E}=a.createCol(void 0,void 0,{source:b});if(E===0){H=!0;break}}H||a.set(p[T][0],p[T][1],p[T][3])}}const y=p.length>0;if(r.forceFullRender=!0,y){c.adjustRowsAndCols(),r.runHooks("beforeChangeRender",p,b),h.closeEditor(),r.view.render(),h.prepareEditor(),r.view.adjustElementsSize(),r.runHooks("afterChange",p,b||"edit");const T=r.getActiveEditor();T&&Me(T.refreshValue)&&T.refreshValue()}else r.view.render()}this._createCellCoords=function(p,b){return r.view._wt.createCellCoords(p,b)},this._createCellRange=function(p,b,y){return r.view._wt.createCellRange(p,b,y)},this.validateCell=function(p,b,y,T){let H=r.getCellValidator(b);function E(D){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)||b.hidden===!0){y(D);return}const ee=b.visualCol,he=b.visualRow,se=r.getCell(he,ee,!0);if(se&&se.nodeName!=="TH"){const Ie=r.rowIndexMapper.getRenderableFromVisualIndex(he),xe=r.columnIndexMapper.getRenderableFromVisualIndex(ee);r.view._wt.getSetting("cellRenderer",Ie,xe,se)}y(D)}RU(H)&&(H=function(D){return function(K,ee){ee(D.test(K))}}(H)),Yt(H)?(p=r.runHooks("beforeValidate",p,b.visualRow,b.prop,T),r._registerImmediate(()=>{H.call(b,p,D=>{r&&(D=r.runHooks("afterValidate",D,p,b.visualRow,b.prop,T),b.valid=D,E(D),r.runHooks("postAfterValidate",D,p,b.visualRow,b.prop,T))})})):r._registerImmediate(()=>{b.valid=!0,E(b.valid,!1)})};function j(p,b,y){return Array.isArray(p)?p:[[p,b,y]]}function ie(p,b){const y=r.getActiveEditor(),T=r.runHooks("beforeChange",p,b||"edit"),H=p.filter(E=>E!==null);return T===!1||H.length===0?(y&&y.cancelChanges(),[]):H}this.setDataAtCell=function(p,b,y,T){const H=j(p,b,y),E=[];let D=T,K,ee,he;for(K=0,ee=H.length;K<ee;K++){if(typeof H[K]!="object")throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if(typeof H[K][1]!="number")throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");H[K][1]>=this.countCols()?he=H[K][1]:he=a.colToProp(H[K][1]),E.push([H[K][0],he,l.getAtCell(this.toPhysicalRow(H[K][0]),H[K][1]),H[K][2]])}!D&&typeof p=="object"&&(D=b);const se=ie(E,T);r.runHooks("afterSetDataAtCell",se,D),te(se,D,()=>{ne(se,D)})},this.setDataAtRowProp=function(p,b,y,T){const H=j(p,b,y),E=[];let D=T,K,ee;for(K=0,ee=H.length;K<ee;K++)E.push([H[K][0],H[K][1],l.getAtCell(this.toPhysicalRow(H[K][0]),H[K][1]),H[K][2]]);!D&&typeof p=="object"&&(D=b);const he=ie(E,T);r.runHooks("afterSetDataAtRowProp",he,D),te(he,D,()=>{ne(he,D)})},this.listen=function(){r&&!r.isListening()&&(Ex.forEach(p=>{r!==p&&p.unlisten()}),xx=r.guid,r.runHooks("afterListen"))},this.unlisten=function(){this.isListening()&&(xx=null,r.runHooks("afterUnlisten"))},this.isListening=function(){return xx===r.guid},this.destroyEditor=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;h.closeEditor(p),r.view.render(),b&&O.isSelected()&&h.prepareEditor()},this.populateFromArray=function(p,b,y,T,H,E,D){if(!(typeof y=="object"&&typeof y[0]=="object"))throw new Error("populateFromArray parameter `input` must be an array of arrays");const K=typeof T=="number"?r._createCellCoords(T,H):null;return c.populateFromArray(r._createCellCoords(p,b),y,K,E,D)},this.spliceCol=function(p,b,y){for(var T=arguments.length,H=new Array(T>3?T-3:0),E=3;E<T;E++)H[E-3]=arguments[E];return a.spliceCol(p,b,y,...H)},this.spliceRow=function(p,b,y){for(var T=arguments.length,H=new Array(T>3?T-3:0),E=3;E<T;E++)H[E-3]=arguments[E];return a.spliceRow(p,b,y,...H)},this.getSelected=function(){if(O.isSelected())return lt(O.getSelectedRange(),p=>{let{from:b,to:y}=p;return[b.row,b.col,y.row,y.col]})},this.getSelectedLast=function(){const p=this.getSelected();let b;return p&&p.length>0&&(b=p[p.length-1]),b},this.getSelectedRange=function(){if(O.isSelected())return Array.from(O.getSelectedRange())},this.getSelectedRangeLast=function(){const p=this.getSelectedRange();let b;return p&&p.length>0&&(b=p[p.length-1]),b},this.emptySelectedCells=function(p){if(!O.isSelected()||this.countRows()===0||this.countCols()===0)return;const b=[];L(O.getSelectedRange(),y=>{if(y.isSingleHeader())return;const T=y.getTopStartCorner(),H=y.getBottomEndCorner();ke(T.row,H.row,E=>{ke(T.col,H.col,D=>{this.getCellMeta(E,D).readOnly||b.push([E,D,null])})})}),b.length>0&&this.setDataAtCell(b,p)},this.isRenderSuspended=function(){return this.renderSuspendedCounter>0},this.suspendRender=function(){this.renderSuspendedCounter+=1},this.resumeRender=function(){const p=this.renderSuspendedCounter-1;this.renderSuspendedCounter=Math.max(p,0),!this.isRenderSuspended()&&p===this.renderSuspendedCounter&&(this.renderCall?this.render():r.view.render())},this.render=function(){this.view&&(this.renderCall=!0,this.forceFullRender=!0,this.isRenderSuspended()||r.view.render())},this.batchRender=function(p){this.suspendRender();const b=p();return this.resumeRender(),b},this.isExecutionSuspended=function(){return this.executionSuspendedCounter>0},this.suspendExecution=function(){this.executionSuspendedCounter+=1,this.columnIndexMapper.suspendOperations(),this.rowIndexMapper.suspendOperations()},this.resumeExecution=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const b=this.executionSuspendedCounter-1;this.executionSuspendedCounter=Math.max(b,0),(!this.isExecutionSuspended()&&b===this.executionSuspendedCounter||p)&&(this.columnIndexMapper.resumeOperations(),this.rowIndexMapper.resumeOperations())},this.batchExecution=function(p){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.suspendExecution();const y=p();return this.resumeExecution(b),y},this.batch=function(p){this.suspendRender(),this.suspendExecution();const b=p();return this.resumeExecution(),this.resumeRender(),b},this.refreshDimensions=function(){if(!r.view)return;const{width:p,height:b}=r.view.getLastSize(),{width:y,height:T}=r.rootElement.getBoundingClientRect(),H=y!==p||T!==b;r.runHooks("beforeRefreshDimensions",{width:p,height:b},{width:y,height:T},H)!==!1&&((H||r.view._wt.wtOverlays.scrollableElement===r.rootWindow)&&(r.view.setLastSize(y,T),r.render()),r.runHooks("afterRefreshDimensions",{width:p,height:b},{width:y,height:T},H))},this.updateData=function(p,b){v$(p,y=>{a=y},y=>{a=y,r.columnIndexMapper.fitToLength(this.getInitialColumnCount()),r.rowIndexMapper.fitToLength(this.countSourceRows()),c.adjustRowsAndCols(),O.refresh()},{hotInstance:r,dataMap:a,dataSource:l,internalSource:"updateData",source:b,metaManager:w,firstRun:f})},this.loadData=function(p,b){v$(p,y=>{a=y},()=>{w.clearCellsCache(),r.initIndexMappers(),c.adjustRowsAndCols(),O.refresh(),f&&(f=[null,"loadData"])},{hotInstance:r,dataMap:a,dataSource:l,internalSource:"loadData",source:b,metaManager:w,firstRun:f})},this.getInitialColumnCount=function(){const p=v.columns;let b=0;if(Array.isArray(p))b=p.length;else if(Yt(p))if(r.dataType==="array"){const y=this.countSourceCols();for(let T=0;T<y;T+=1)p(T)&&(b+=1)}else(r.dataType==="object"||r.dataType==="function")&&(b=a.colToPropCache.length);else if(Me(v.dataSchema)){const y=a.getSchema();b=Array.isArray(y)?y.length:Y0(y)}else b=this.countSourceCols();return b},this.initIndexMappers=function(){this.columnIndexMapper.initToLength(this.getInitialColumnCount()),this.rowIndexMapper.initToLength(this.countSourceRows())},this.getData=function(p,b,y,T){return Xt(p)?a.getAll():a.getRange(r._createCellCoords(p,b),r._createCellCoords(y,T),a.DESTINATION_RENDERER)},this.getCopyableText=function(p,b,y,T){return a.getCopyableText(r._createCellCoords(p,b),r._createCellCoords(y,T))},this.getCopyableData=function(p,b){return a.getCopyable(p,a.colToProp(b))},this.getSchema=function(){return a.getSchema()},this.updateSettings=function(p){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const y=(f?r.loadData:r.updateData).bind(this);let T=!1,H,E;if(Me(p.rows))throw new Error('The "rows" setting is no longer supported. Do you mean startRows, minRows or maxRows?');if(Me(p.cols))throw new Error('The "cols" setting is no longer supported. Do you mean startCols, minCols or maxCols?');if(Me(p.ganttChart))throw new Error('Since 8.0.0 the "ganttChart" setting is no longer supported.');for(H in p)H==="data"||(H==="language"?k(p.language):H==="className"?B("className",p.className):H==="tableClassName"&&r.table?(B("tableClassName",p.tableClassName),r.view._wt.wtOverlays.syncOverlayTableClassNames()):Ee.getSingleton().isRegistered(H)||Ee.getSingleton().isDeprecated(H)?(Yt(p[H])||Array.isArray(p[H]))&&(p[H].initialHook=!0,r.addHook(H,p[H])):!b&&wn(p,H)&&(C[H]=p[H]));p.data===void 0&&v.data===void 0?y(null,"updateSettings"):p.data!==void 0?y(p.data,"updateSettings"):p.columns!==void 0&&(a.createMap(),r.initIndexMappers());const D=r.countCols(),K=v.columns;if(K&&Yt(K)&&(T=!0),(p.cell!==void 0||p.cells!==void 0||p.columns!==void 0)&&w.clearCache(),D>0)for(H=0,E=0;H<D;H++){if(K){const se=T?K(H):K[E];se&&w.updateColumnMeta(E,se)}E+=1}Me(p.cell)&&et(p.cell,se=>{r.setCellMetaObject(se.row,se.col,se)}),r.runHooks("afterCellMetaReset");let ee=r.rootElement.style.height;ee!==""&&(ee=parseInt(r.rootElement.style.height,10));let he=p.height;if(Yt(he)&&(he=he()),b&&r.rootElement.getAttribute("style")&&r.rootElement.setAttribute("data-initialstyle",r.rootElement.getAttribute("style")),he===null){const se=r.rootElement.getAttribute("data-initialstyle");se&&(se.indexOf("height")>-1||se.indexOf("overflow")>-1)?r.rootElement.setAttribute("style",se):(r.rootElement.style.height="",r.rootElement.style.overflow="")}else he!==void 0&&(r.rootElement.style.height=isNaN(he)?`${he}`:`${he}px`,r.rootElement.style.overflow="hidden");if(typeof p.width<"u"){let se=p.width;Yt(se)&&(se=se()),r.rootElement.style.width=isNaN(se)?`${se}`:`${se}px`}b||(r.view&&(r.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked(),r.view._wt.exportSettingsAsClassNames()),r.runHooks("afterUpdateSettings",p)),c.adjustRowsAndCols(),r.view&&!f&&(r.forceFullRender=!0,r.view.render(),r.view._wt.wtOverlays.adjustElementsSize()),!b&&r.view&&(ee===""||he===""||he===void 0)&&ee!==he&&r.view._wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){const p=r.getSelectedLast();if(v.getValue){if(Yt(v.getValue))return v.getValue.call(r);if(p)return r.getData()[p[0][0]][v.getValue]}else if(p)return r.getDataAtCell(p[0],p[1])},this.getSettings=function(){return v},this.clear=function(){this.selectAll(),this.emptySelectedCells()},this.alter=function(p,b,y,T,H){c.alter(p,b,y,T,H)},this.getCell=function(p,b){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,T=b,H=p;if(b>=0){if(this.columnIndexMapper.isHidden(this.toPhysicalColumn(b)))return null;T=this.columnIndexMapper.getRenderableFromVisualIndex(b)}if(p>=0){if(this.rowIndexMapper.isHidden(this.toPhysicalRow(p)))return null;H=this.rowIndexMapper.getRenderableFromVisualIndex(p)}return H===null||T===null||H===void 0||T===void 0?null:r.view.getCellAtCoords(r._createCellCoords(H,T),y)},this.getCoords=function(p){const b=this.view._wt.wtTable.getCoords(p);if(b===null)return null;const{row:y,col:T}=b;let H=y,E=T;return y>=0&&(H=this.rowIndexMapper.getVisualFromRenderableIndex(y)),T>=0&&(E=this.columnIndexMapper.getVisualFromRenderableIndex(T)),r._createCellCoords(H,E)},this.colToProp=function(p){return a.colToProp(p)},this.propToCol=function(p){return a.propToCol(p)},this.toVisualRow=p=>this.rowIndexMapper.getVisualFromPhysicalIndex(p),this.toVisualColumn=p=>this.columnIndexMapper.getVisualFromPhysicalIndex(p),this.toPhysicalRow=p=>this.rowIndexMapper.getPhysicalFromVisualIndex(p),this.toPhysicalColumn=p=>this.columnIndexMapper.getPhysicalFromVisualIndex(p),this.getDataAtCell=function(p,b){return a.get(p,a.colToProp(b))},this.getDataAtRowProp=function(p,b){return a.get(p,b)},this.getDataAtCol=function(p){const b=[],y=a.getRange(r._createCellCoords(0,p),r._createCellCoords(v.data.length-1,p),a.DESTINATION_RENDERER);for(let T=0;T<y.length;T+=1)for(let H=0;H<y[T].length;H+=1)b.push(y[T][H]);return b},this.getDataAtProp=function(p){const b=[],y=a.getRange(r._createCellCoords(0,a.propToCol(p)),r._createCellCoords(v.data.length-1,a.propToCol(p)),a.DESTINATION_RENDERER);for(let T=0;T<y.length;T+=1)for(let H=0;H<y[T].length;H+=1)b.push(y[T][H]);return b},this.getSourceData=function(p,b,y,T){let H;return p===void 0?H=l.getData():H=l.getByRange(r._createCellCoords(p,b),r._createCellCoords(y,T)),H},this.getSourceDataArray=function(p,b,y,T){let H;return p===void 0?H=l.getData(!0):H=l.getByRange(r._createCellCoords(p,b),r._createCellCoords(y,T),!0),H},this.getSourceDataAtCol=function(p){return l.getAtColumn(p)},this.setSourceDataAtCell=function(p,b,y,T){const H=j(p,b,y),E=this.hasHook("afterSetSourceDataAtCell"),D=[];E&&L(H,ee=>{let[he,se,Ie]=ee;D.push([he,se,l.getAtCell(he,se),Ie])}),L(H,ee=>{let[he,se,Ie]=ee;l.setAtCell(he,se,Ie)}),E&&this.runHooks("afterSetSourceDataAtCell",D,T),this.render();const K=r.getActiveEditor();K&&Me(K.refreshValue)&&K.refreshValue()},this.getSourceDataAtRow=function(p){return l.getAtRow(p)},this.getSourceDataAtCell=function(p,b){return l.getAtCell(p,b)},this.getDataAtRow=function(p){return a.getRange(r._createCellCoords(p,0),r._createCellCoords(p,this.countCols()-1),a.DESTINATION_RENDERER)[0]||[]},this.getDataType=function(p,b,y,T){const H=p===void 0?[0,0,this.countRows(),this.countCols()]:[p,b,y,T],[E,D]=H;let[,,K,ee]=H,he=null,se=null;K===void 0&&(K=E),ee===void 0&&(ee=D);let Ie="mixed";return ke(Math.max(Math.min(E,K),0),Math.max(E,K),xe=>{let X=!0;return ke(Math.max(Math.min(D,ee),0),Math.max(D,ee),re=>(se=this.getCellMeta(xe,re).type,he?X=he===se:he=se,X)),Ie=X?se:"mixed",X}),Ie},this.removeCellMeta=function(p,b,y){const[T,H]=[this.toPhysicalRow(p),this.toPhysicalColumn(b)];let E=w.getCellMetaKeyValue(T,H,y);r.runHooks("beforeRemoveCellMeta",p,b,y,E)!==!1&&(w.removeCellMeta(T,H,y),r.runHooks("afterRemoveCellMeta",p,b,y,E)),E=null},this.spliceCellsMeta=function(p){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;for(var y=arguments.length,T=new Array(y>2?y-2:0),H=2;H<y;H++)T[H-2]=arguments[H];if(T.length>0&&!Array.isArray(T[0]))throw new Error("The 3rd argument (cellMetaRows) has to be passed as an array of cell meta objects array.");b>0&&w.removeRow(this.toPhysicalRow(p),b),T.length>0&&L(T.reverse(),E=>{w.createRow(this.toPhysicalRow(p)),L(E,(D,K)=>this.setCellMetaObject(p,K,D))}),r.render()},this.setCellMetaObject=function(p,b,y){typeof y=="object"&&et(y,(T,H)=>{this.setCellMeta(p,b,H,T)})},this.setCellMeta=function(p,b,y,T){if(r.runHooks("beforeSetCellMeta",p,b,y,T)===!1)return;let E=p,D=b;p<this.countRows()&&(E=this.toPhysicalRow(p)),b<this.countCols()&&(D=this.toPhysicalColumn(b)),w.setCellMeta(E,D,y,T),r.runHooks("afterSetCellMeta",p,b,y,T)},this.getCellsMeta=function(){return w.getCellsMeta()},this.getCellMeta=function(p,b){let y=this.toPhysicalRow(p),T=this.toPhysicalColumn(b);return y===null&&(y=p),T===null&&(T=b),w.getCellMeta(y,T,{visualRow:p,visualColumn:b})},this.getColumnMeta=function(p){return w.getColumnMeta(this.toPhysicalColumn(p))},this.getCellMetaAtRow=function(p){return w.getCellsMetaAtRow(p)},this.isColumnModificationAllowed=function(){return!(r.dataType==="object"||v.columns)},this.getCellRenderer=function(p,b){const y=typeof p=="number"?r.getCellMeta(p,b).renderer:p.renderer;return typeof y=="string"?QC(y):Xt(y)?QC("text"):y},this.getCellEditor=function(p,b){const y=typeof p=="number"?r.getCellMeta(p,b).editor:p.editor;return typeof y=="string"?XC(y):Xt(y)?XC("text"):y},this.getCellValidator=function(p,b){const y=typeof p=="number"?r.getCellMeta(p,b).validator:p.validator;return typeof y=="string"?AP(y):y},this.validateCells=function(p){this._validateCells(p)},this.validateRows=function(p,b){if(!Array.isArray(p))throw new Error("validateRows parameter `rows` must be an array");this._validateCells(b,p)},this.validateColumns=function(p,b){if(!Array.isArray(p))throw new Error("validateColumns parameter `columns` must be an array");this._validateCells(b,void 0,p)},this._validateCells=function(p,b,y){const T=new z;p&&(T.onQueueEmpty=p);let H=r.countRows()-1;for(;H>=0;){if(b!==void 0&&b.indexOf(H)===-1){H-=1;continue}let E=r.countCols()-1;for(;E>=0;){if(y!==void 0&&y.indexOf(E)===-1){E-=1;continue}T.addValidatorToQueue(),r.validateCell(r.getDataAtCell(H,E),r.getCellMeta(H,E),D=>{if(typeof D!="boolean")throw new Error("Validation error: result is not boolean");D===!1&&(T.valid=!1),T.removeValidatorFormQueue()},"validateCells"),E-=1}H-=1}T.checkIfQueueIsEmpty()},this.getRowHeader=function(p){let b=v.rowHeaders,y=p;return y!==void 0&&(y=r.runHooks("modifyRowHeader",y)),y===void 0?(b=[],ke(r.countRows()-1,T=>{b.push(r.getRowHeader(T))})):Array.isArray(b)&&b[y]!==void 0?b=b[y]:Yt(b)?b=b(y):b&&typeof b!="string"&&typeof b!="number"&&(b=y+1),b},this.hasRowHeaders=function(){return!!v.rowHeaders},this.hasColHeaders=function(){if(v.colHeaders!==void 0&&v.colHeaders!==null)return!!v.colHeaders;for(let p=0,b=r.countCols();p<b;p++)if(r.getColHeader(p))return!0;return!1},this.getColHeader=function(p){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;const y=r.runHooks("modifyColHeader",p);if(y===void 0){const K=[],ee=r.countCols();for(let he=0;he<ee;he++)K.push(r.getColHeader(he));return K}let T=v.colHeaders;const H=function(K){const ee=[],he=r.countCols();let se=0;for(;se<he;se++)Yt(v.columns)&&v.columns(se)&&ee.push(se);return ee[K]},E=r.toPhysicalColumn(y),D=H(E);return v.colHeaders===!1?T=null:v.columns&&Yt(v.columns)&&v.columns(D)&&v.columns(D).title?T=v.columns(D).title:v.columns&&v.columns[E]&&v.columns[E].title?T=v.columns[E].title:Array.isArray(v.colHeaders)&&v.colHeaders[E]!==void 0?T=v.colHeaders[E]:Yt(v.colHeaders)?T=v.colHeaders(E):v.colHeaders&&typeof v.colHeaders!="string"&&typeof v.colHeaders!="number"&&(T=J0(y)),T=r.runHooks("modifyColumnHeaderValue",T,p,b),T},this._getColWidthFromSettings=function(p){let b;if(p>=0&&(b=r.getCellMeta(0,p).width),(b===void 0||b===v.width)&&(b=v.colWidths),b!=null){switch(typeof b){case"object":b=b[p];break;case"function":b=b(p);break}typeof b=="string"&&(b=parseInt(b,10))}return b},this.getColWidth=function(p){let b=r._getColWidthFromSettings(p);return b=r.runHooks("modifyColWidth",b,p),b===void 0&&(b=X0),b},this._getRowHeightFromSettings=function(p){let b=v.rowHeights;if(b!=null){switch(typeof b){case"object":b=b[p];break;case"function":b=b(p);break}typeof b=="string"&&(b=parseInt(b,10))}return b},this.getRowHeight=function(p){let b=r._getRowHeightFromSettings(p);return b=r.runHooks("modifyRowHeight",b,p),b},this.countSourceRows=function(){return l.countRows()},this.countSourceCols=function(){return l.countFirstRowKeys()},this.countRows=function(){return a.getLength()},this.countCols=function(){const p=v.maxCols,b=this.columnIndexMapper.getNotTrimmedIndexesLength();return Math.min(p,b)},this.countRenderedRows=function(){return r.view._wt.drawn?r.view._wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return r.view._wt.drawn?r.view._wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return r.view._wt.drawn?r.view._wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return r.view._wt.drawn?r.view._wt.wtTable.getVisibleColumnsCount():-1},this.countRowHeaders=function(){return this.view.getRowHeadersCount()},this.countColHeaders=function(){return this.view.getColumnHeadersCount()},this.countEmptyRows=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,b=0;return CM(r.countRows()-1,y=>{if(r.isEmptyRow(y))b+=1;else if(p===!0)return!1}),b},this.countEmptyCols=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,b=0;return CM(r.countCols()-1,y=>{if(r.isEmptyCol(y))b+=1;else if(p===!0)return!1}),b},this.isEmptyRow=function(p){return v.isEmptyRow.call(r,p)},this.isEmptyCol=function(p){return v.isEmptyCol.call(r,p)},this.selectCell=function(p,b,y,T){let H=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,E=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;return Xt(p)||Xt(b)?!1:this.selectCells([[p,b,y,T]],H,E)},this.selectCells=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[[]],b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;b===!1&&d.suspend();const T=O.selectCells(p);return T&&y&&r.listen(),d.resume(),T},this.selectColumns=function(p){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p,y=arguments.length>2?arguments[2]:void 0;return O.selectColumns(p,b,y)},this.selectRows=function(p){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p,y=arguments.length>2?arguments[2]:void 0;return O.selectRows(p,b,y)},this.deselectCell=function(){O.deselect()},this.selectAll=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p,y=arguments.length>2?arguments[2]:void 0;d.skipNextScrollCycle(),O.selectAll(p,b,y)};const oe=(p,b)=>p.getNearestNotHiddenIndex(b,1,!0);this.scrollViewportTo=function(p){var b;if(typeof p=="number"){var y;p={row:arguments[0],col:arguments[1],verticalSnap:arguments[2]?"bottom":"top",horizontalSnap:arguments[3]?"end":"start",considerHiddenIndexes:(y=arguments[4])!==null&&y!==void 0?y:!0}}const{row:T,col:H,verticalSnap:E,horizontalSnap:D,considerHiddenIndexes:K}=(b=p)!==null&&b!==void 0?b:{};let ee,he,se,Ie;E!==void 0&&(ee=E==="top",he=!ee),D!==void 0&&(se=D==="start",Ie=!se);let xe=T,X=H;if(K===void 0||K){const Be=Number.isInteger(T)&&T>=0,Se=Number.isInteger(H)&&H>=0,_e=Be?oe(this.rowIndexMapper,T):void 0,A=Se?oe(this.columnIndexMapper,H):void 0;if(_e===null||A===null)return!1;xe=Be?r.rowIndexMapper.getRenderableFromVisualIndex(_e):T,X=Se?r.columnIndexMapper.getRenderableFromVisualIndex(A):H}const re=Number.isInteger(xe),ce=Number.isInteger(X);return re&&xe>=0&&ce&&X>=0?r.view.scrollViewport(r._createCellCoords(xe,X),ee,Ie,he,se):re&&xe>=0&&(ce&&X<0||!ce)?r.view.scrollViewportVertically(xe,ee,he):ce&&X>=0&&(re&&xe<0||!re)?r.view.scrollViewportHorizontally(X,Ie,se):!1},this.scrollToFocusedCell=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};if(!this.selection.isSelected())return;this.addHookOnce("afterScroll",p);const{highlight:b}=this.getSelectedRangeLast();this.scrollViewportTo(b.toObject())?this.view.render():(this.removeHook("afterScroll",p),this._registerImmediate(()=>p()))},this.destroy=function(){if(r._clearTimeouts(),r._clearImmediates(),r.view&&r.view.destroy(),l&&l.destroy(),l=null,this.getShortcutManager().destroy(),w.clearCache(),Ex.delete(this.guid),Yy(r)){const p=this.rootDocument.querySelector(".hot-display-license-info");p&&p.parentNode.removeChild(p)}lo(r.rootElement),o.destroy(),h&&h.destroy(),r.batchExecution(()=>{r.rowIndexMapper.unregisterAll(),r.columnIndexMapper.unregisterAll(),S.getItems().forEach(p=>{let[,b]=p;b.destroy()}),S.clear(),r.runHooks("afterDestroy")},!0),Ee.getSingleton().destroy(r),et(r,(p,b,y)=>{Yt(p)?y[b]=J(b):b!=="guid"&&(y[b]=null)}),r.isDestroyed=!0,a&&a.destroy(),a=null,c=null,O=null,h=null,r=null};function J(p){return()=>{throw new Error(`The "${p}" method cannot be called because this Handsontable instance has been destroyed`)}}this.getActiveEditor=function(){return h.getActiveEditor()},this.getFirstRenderedVisibleRow=function(){return r.view.getFirstRenderedVisibleRow()},this.getLastRenderedVisibleRow=function(){return r.view.getLastRenderedVisibleRow()},this.getFirstRenderedVisibleColumn=function(){return r.view.getFirstRenderedVisibleColumn()},this.getLastRenderedVisibleColumn=function(){return r.view.getLastRenderedVisibleColumn()},this.getFirstFullyVisibleRow=function(){return r.view.getFirstFullyVisibleRow()},this.getLastFullyVisibleRow=function(){return r.view.getLastFullyVisibleRow()},this.getFirstFullyVisibleColumn=function(){return r.view.getFirstFullyVisibleColumn()},this.getLastFullyVisibleColumn=function(){return r.view.getLastFullyVisibleColumn()},this.getFirstPartiallyVisibleRow=function(){return r.view.getFirstPartiallyVisibleRow()},this.getLastPartiallyVisibleRow=function(){return r.view.getLastPartiallyVisibleRow()},this.getFirstPartiallyVisibleColumn=function(){return r.view.getFirstPartiallyVisibleColumn()},this.getLastPartiallyVisibleColumn=function(){return r.view.getLastPartiallyVisibleColumn()},this.getPlugin=function(p){const b=Ui(p);return b==="UndoRedo"?this.undoRedo:S.getItem(b)},this.getPluginName=function(p){return p===this.undoRedo?this.undoRedo.constructor.PLUGIN_KEY:S.getId(p)},this.getInstance=function(){return r},this.addHook=function(p,b,y){Ee.getSingleton().add(p,b,r,y)},this.hasHook=function(p){return Ee.getSingleton().has(p,r)||Ee.getSingleton().has(p)},this.addHookOnce=function(p,b,y){Ee.getSingleton().once(p,b,r,y)},this.removeHook=function(p,b){Ee.getSingleton().remove(p,b,r)},this.runHooks=function(p,b,y,T,H,E,D){return Ee.getSingleton().run(r,p,b,y,T,H,E,D)},this.getTranslatedPhrase=function(p,b){return rG(v.language,p,b)},this.toHTML=()=>bM(this),this.toTableElement=()=>{const p=this.rootDocument.createElement("div");return p.insertAdjacentHTML("afterbegin",bM(this)),p.firstElementChild},this.timeouts=[],this._registerTimeout=function(p){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=p;typeof y=="function"&&(y=setTimeout(y,b)),this.timeouts.push(y)},this._clearTimeouts=function(){L(this.timeouts,p=>{clearTimeout(p)})},this.immediates=[],this._registerImmediate=function(p){this.immediates.push(setImmediate(p))},this._clearImmediates=function(){L(this.immediates,p=>{clearImmediate(p)})},this._getEditorManager=function(){return h},this.isRtl=function(){return r.rootWindow.getComputedStyle(r.rootElement).direction==="rtl"},this.isLtr=function(){return!r.isRtl()},this.getDirectionFactor=function(){return r.isLtr()?1:-1};const pe=uCe({handleEvent(){return r.isListening()},beforeKeyDown:p=>this.runHooks("beforeKeyDown",p),afterKeyDown:p=>{this.isDestroyed||r.runHooks("afterDocumentKeyDown",p)},ownerWindow:this.rootWindow});this.addHook("beforeOnCellMouseDown",p=>{p.ctrlKey===!1&&p.metaKey===!1&&pe.releasePressedKeys()}),this.getShortcutManager=function(){return pe},this.getFocusManager=function(){return u},MP().forEach(p=>{const b=Qw(p);S.addItem(p,new b(this))}),Kye(r),pe.setActiveContextName("grid"),Ee.getSingleton().run(r,"construct")}function R$(n,e,t){n.addEventListener(e,t,!1)}function x$(n,e,t){n.removeEventListener(e,t,!1)}function E$(n){return n.ownerDocument.defaultView.getComputedStyle(n)}function dCe(n){const e={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},t=n.body,i=n.createTextNode(""),s=n.createElement("span");let r;function o(){i.textContent=r.value,s.style.position="absolute",s.style.fontSize=E$(r).fontSize,s.style.fontFamily=E$(r).fontFamily,s.style.whiteSpace="pre",t.appendChild(s);const h=s.clientWidth+2;t.removeChild(s);const u=r.style;u.height=`${e.minHeight}px`,e.minWidth>h?u.width=`${e.minWidth}px`:h>e.maxWidth?u.width=`${e.maxWidth}px`:u.width=`${h}px`;const d=r.scrollHeight?r.scrollHeight-1:0;e.minHeight>d?u.height=`${e.minHeight}px`:e.maxHeight<d?(u.height=`${e.maxHeight}px`,u.overflowY="visible"):u.height=`${d}px`}function a(){n.defaultView.setTimeout(o,0)}function l(h){if(h&&h.minHeight)if(h.minHeight==="inherit")e.minHeight=r.clientHeight;else{const u=parseInt(h.minHeight,10);isNaN(u)||(e.minHeight=u)}if(h&&h.maxHeight)if(h.maxHeight==="inherit")e.maxHeight=r.clientHeight;else{const u=parseInt(h.maxHeight,10);isNaN(u)||(e.maxHeight=u)}if(h&&h.minWidth)if(h.minWidth==="inherit")e.minWidth=r.clientWidth;else{const u=parseInt(h.minWidth,10);isNaN(u)||(e.minWidth=u)}if(h&&h.maxWidth)if(h.maxWidth==="inherit")e.maxWidth=r.clientWidth;else{const u=parseInt(h.maxWidth,10);isNaN(u)||(e.maxWidth=u)}s.firstChild||(s.className="autoResize",s.style.display="inline-block",s.appendChild(i))}function c(h,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;r=h,l(u),r.nodeName==="TEXTAREA"&&(r.style.resize="none",r.style.height=`${e.minHeight}px`,r.style.minWidth=`${e.minWidth}px`,r.style.maxWidth=`${e.maxWidth}px`,r.style.overflowY="hidden"),d&&(R$(r,"input",o),R$(r,"keydown",a)),o()}return{init:c,resize:o,unObserve(){x$(r,"input",o),x$(r,"keydown",a)}}}function T$(n,e){const t=hP(e),i=e.value.split(`
`);let s=t,r=0;for(let o=0;o<i.length;o++){const a=i[o];o!==0&&(r+=i[o-1].length+1);const l=r+a.length;if(n==="home"?s=r:n==="end"&&(s=l),t<=l)break}Gw(e,s)}function Ch(n,e,t){return(e=fCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fCe(n){var e=gCe(n,"string");return typeof e=="symbol"?e:e+""}function gCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const mCe="ht_editor_visible",Tb="ht_editor_hidden",M$="textEditor",pCe="text";class ld extends dg{static get EDITOR_TYPE(){return pCe}constructor(e){super(e),Ch(this,"eventManager",new Er(this)),Ch(this,"autoResize",dCe(this.hot.rootDocument)),Ch(this,"TEXTAREA",void 0),Ch(this,"textareaStyle",void 0),Ch(this,"TEXTAREA_PARENT",void 0),Ch(this,"textareaParentStyle",void 0),Ch(this,"layerClass",void 0),this.eventManager=new Er(this),this.createElements(),this.bindEvents(),this.hot.addHookOnce("afterDestroy",()=>this.destroy())}getValue(){return this.TEXTAREA.value}setValue(e){this.TEXTAREA.value=e}open(){this.refreshDimensions(),this.showEditableElement(),this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this.autoResize.unObserve(),kU(this.hot.rootDocument.activeElement,this.hot.rootElement)&&this.hot.listen(),this.hideEditableElement(),this.unregisterShortcuts()}prepare(e,t,i,s,r,o){const a=this.state;if(super.prepare(e,t,i,s,r,o),!o.readOnly){this.refreshDimensions(!0);const{allowInvalid:l}=o;l&&!this.isOpened()&&(this.TEXTAREA.value=""),a!==kn.FINISHED&&!this.isOpened()&&this.hideEditableElement()}}beginEditing(e,t){this.state===kn.VIRGIN&&(this.TEXTAREA.value="",super.beginEditing(e,t))}focus(){this.TEXTAREA.select(),Gw(this.TEXTAREA,this.TEXTAREA.value.length)}createElements(){const{rootDocument:e}=this.hot;this.TEXTAREA=e.createElement("TEXTAREA"),$e(this.TEXTAREA,[["data-hot-input",""],lg(-1)]),ae(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.textareaStyle.overflowY="visible",this.TEXTAREA_PARENT=e.createElement("DIV"),ae(this.TEXTAREA_PARENT,"handsontableInputHolder"),Fe(this.TEXTAREA_PARENT,this.layerClass)&&ze(this.TEXTAREA_PARENT,this.layerClass),ae(this.TEXTAREA_PARENT,Tb),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.hot.rootElement.appendChild(this.TEXTAREA_PARENT)}hideEditableElement(){rY()&&(this.textareaStyle.textIndent="-99999px"),this.textareaStyle.overflowY="visible",this.textareaParentStyle.opacity="0",this.textareaParentStyle.height="1px",ze(this.TEXTAREA_PARENT,this.layerClass),ae(this.TEXTAREA_PARENT,Tb)}showEditableElement(){this.textareaParentStyle.height="",this.textareaParentStyle.overflow="",this.textareaParentStyle.position="",this.textareaParentStyle[this.hot.isRtl()?"left":"right"]="auto",this.textareaParentStyle.opacity="1",this.textareaStyle.textIndent="";const e=this.TEXTAREA_PARENT.childNodes;let t=!1;ke(e.length-1,i=>{const s=e[i];if(Fe(s,"handsontableEditor"))return t=!0,!1}),Fe(this.TEXTAREA_PARENT,Tb)&&ze(this.TEXTAREA_PARENT,Tb),t?(this.layerClass=mCe,ae(this.TEXTAREA_PARENT,this.layerClass)):(this.layerClass=this.getEditedCellsLayerClass(),ae(this.TEXTAREA_PARENT,this.layerClass))}refreshValue(){const e=this.hot.toPhysicalRow(this.row),t=this.hot.getSourceDataAtCell(e,this.col);this.originalValue=t,this.setValue(t),this.refreshDimensions()}refreshDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.state!==kn.EDITING&&!e)return;if(this.TD=this.getEditedCell(),!this.TD){e||this.close();return}const{top:t,start:i,width:s,maxWidth:r,height:o,maxHeight:a}=this.getEditedCellRect();this.textareaParentStyle.top=`${t}px`,this.textareaParentStyle[this.hot.isRtl()?"right":"left"]=`${i}px`,this.showEditableElement();const l=da(this.TD,this.hot.rootWindow);this.TEXTAREA.style.fontSize=l.fontSize,this.TEXTAREA.style.fontFamily=l.fontFamily,this.TEXTAREA.style.backgroundColor=this.TD.style.backgroundColor;const c=da(this.TEXTAREA),h=parseInt(c.paddingLeft,10)+parseInt(c.paddingRight,10),u=parseInt(c.paddingTop,10)+parseInt(c.paddingBottom,10),d=s-h,f=o-u,g=r-h,m=a-u;this.autoResize.init(this.TEXTAREA,{minWidth:Math.min(d,g),minHeight:Math.min(f,m),maxWidth:g,maxHeight:m},!0)}bindEvents(){vP()&&this.eventManager.addEventListener(this.TEXTAREA,"focusout",()=>this.finishEditing(!1)),this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>{this.refreshDimensions(),this.state===kn.EDITING&&this.focus()}),this.addHook("afterRowResize",()=>{this.refreshDimensions(),this.state===kn.EDITING&&this.focus()})}allowKeyEventPropagation(){}destroy(){this.eventManager.destroy(),this.clearHooks()}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),i={runOnlyIf:()=>Me(this.hot.getSelected()),group:M$},s=()=>{this.hot.rootDocument.execCommand("insertText",!1,`
`)};t.addShortcuts([{keys:[["Control","Enter"]],callback:()=>(s(),!1),runOnlyIf:r=>!this.hot.selection.isMultiple()&&!r.altKey},{keys:[["Meta","Enter"]],callback:()=>(s(),!1),runOnlyIf:()=>!this.hot.selection.isMultiple()},{keys:[["Alt","Enter"]],callback:()=>(s(),!1)},{keys:[["Home"]],callback:(r,o)=>{let[a]=o;T$(a,this.TEXTAREA)}},{keys:[["End"]],callback:(r,o)=>{let[a]=o;T$(a,this.TEXTAREA)}}],i)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(M$)}}const wCe="base";function nv(n,e,t,i,s,r,o){const a=o.ariaTags,l=[],c=[],h=[],u=[];o.className&&ae(e,o.className),o.readOnly?(l.push(o.readOnlyCellClassName),a&&u.push(fL())):a&&h.push(fL()[0]),o.valid===!1&&o.invalidCellClassName?(l.push(o.invalidCellClassName),a&&u.push(gL())):(c.push(o.invalidCellClassName),a&&h.push(gL()[0])),o.wordWrap===!1&&o.noWordWrapClassName&&l.push(o.noWordWrapClassName),!r&&o.placeholder&&l.push(o.placeholderCellClassName),ze(e,c),ae(e,l),rd(e,h),$e(e,u)}nv.RENDERER_TYPE=wCe;const vCe="text";function Nl(n,e,t,i,s,r,o){nv.apply(this,[n,e,t,i,s,r,o]);let a=r;if(!a&&o.placeholder&&(a=o.placeholder),a=Tn(a),o.trimWhitespace&&(a=a.trim()),o.rendererTemplate){lo(e);const l=n.rootDocument.createElement("TEMPLATE");l.setAttribute("bind","{{}}"),l.innerHTML=o.rendererTemplate,HTMLTemplateElement.decorate(l),l.model=n.getSourceDataAtRow(t),e.appendChild(l)}else $c(e,a)}Nl.RENDERER_TYPE=vCe;const bCe="text",yG={CELL_TYPE:bCe,editor:ld,renderer:Nl};cr(yG);Ue.editors={BaseEditor:dg};function Ue(n,e){const t=new bG(n,e||{},YP);return t.init(),t}Ue.Core=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new bG(n,e,YP)};Ue.DefaultSettings=dG();Ue.hooks=Ee.getSingleton();Ue.CellCoords=Fu;Ue.CellRange=Zw;Ue.packageName="handsontable";Ue.buildDate="17/10/2024 09:16:16";Ue.version="14.6.1";Ue.languages={dictionaryKeys:Dve,getLanguageDictionary:sG,getLanguagesDictionaries:Bve,registerLanguageDictionary:iG,getTranslatedPhrase:rG};const A$="handsontableEditor",yCe="handsontable";class vO extends ld{static get EDITOR_TYPE(){return yCe}open(){super.open(),this.htEditor&&this.htEditor.destroy(),this.htContainer.style.display==="none"&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),Gw(this.TEXTAREA,0,this.TEXTAREA.value.length),this.refreshDimensions()}close(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),super.close()}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o);const a=this,l={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,ariaTags:!1,afterOnCellMouseDown(c,h){const u=this.getSourceData(h.row,h.col);u!==void 0&&a.setValue(u),a.hot.destroyEditor()},preventWheel:!0,layoutDirection:this.hot.isRtl()?"rtl":"ltr"};this.cellProperties.handsontable&&zn(l,o.handsontable),this.htOptions=l}beginEditing(e,t){const i=this.hot.getSettings().onBeginEditing;i&&i()===!1||super.beginEditing(e,t)}createElements(){super.createElements();const e=this.hot.rootDocument.createElement("DIV");e.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(e),this.htContainer=e,this.assignHooks()}finishEditing(e,t,i){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){const s=this.htEditor.getValue();s!==void 0&&this.setValue(s)}super.finishEditing(e,t,i)}assignHooks(){this.hot.addHook("afterDestroy",()=>{this.htEditor&&this.htEditor.destroy()})}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor");super.registerShortcuts();const i={group:A$,relativeToGroup:th,position:"before"},s=(r,o)=>{const a=this.htEditor;if(r!==void 0&&(r<0||a.flipped&&r>a.countRows()-1?a.deselectCell():a.selectCell(r,0),a.getData().length))return o.preventDefault(),Ar(o),this.hot.listen(),this.TEXTAREA.focus(),!1};t.addShortcuts([{keys:[["ArrowUp"]],callback:r=>{const o=this.htEditor;let a,l;return!o.getSelectedLast()&&o.flipped?a=o.countRows()-1:o.getSelectedLast()&&(o.flipped?(l=o.getSelectedLast()[0],a=Math.max(0,l-1)):(l=o.getSelectedLast()[0],a=l-1)),s(a,r)},preventDefault:!1},{keys:[["ArrowDown"]],callback:r=>{const o=this.htEditor;let a,l;if(!o.getSelectedLast()&&!o.flipped)a=0;else if(o.getSelectedLast()){if(o.flipped)a=o.getSelectedLast()[0]+1;else if(!o.flipped){const c=o.countRows()-1;l=o.getSelectedLast()[0],a=Math.min(c,l+1)}}return s(a,r)},preventDefault:!1}],i)}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(A$)}}function CCe(n,e,t){SCe(n,e),e.set(n,t)}function SCe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Mb(n,e,t){return(e=_Ce(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Ce(n){var e=RCe(n,"string");return typeof e=="symbol"?e:e+""}function RCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function P$(n,e){return n.get(xCe(n,e))}function xCe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const ECe="autocomplete";var Tx=new WeakMap;class bO extends vO{constructor(){super(...arguments),Mb(this,"query",null),Mb(this,"strippedChoices",[]),Mb(this,"rawChoices",[]),CCe(this,Tx,this.hot.guid.slice(0,9)),Mb(this,"sortByRelevance",function(e,t,i){const s=[],r=[],o=e.length;let a=t.length,l,c,h,u;if(o===0){for(h=0;h<a;h++)r.push(h);return r}for(h=0;h<a;h++){if(c=cM(Tn(t[h])),i)u=c.indexOf(e);else{const d=this.cellProperties.locale;u=c.toLocaleLowerCase(d).indexOf(e.toLocaleLowerCase(d))}u!==-1&&(l=c.length-u-o,s.push({baseIndex:h,index:u,charsLeft:l,value:c}))}for(s.sort((d,f)=>{if(f.index===-1)return-1;if(d.index===-1)return 1;if(d.index<f.index)return-1;if(f.index<d.index)return 1;if(d.index===f.index){if(d.charsLeft<f.charsLeft)return-1;if(d.charsLeft>f.charsLeft)return 1}return 0}),h=0,a=s.length;h<a;h++)r.push(s[h].baseIndex);return r})}static get EDITOR_TYPE(){return ECe}getValue(){const e=this.rawChoices.find(t=>this.stripValueIfNeeded(t)===this.TEXTAREA.value);return Me(e)?e:this.TEXTAREA.value}createElements(){super.createElements(),ae(this.htContainer,"autocompleteEditor"),ae(this.htContainer,this.hot.rootWindow.navigator.platform.indexOf("Mac")===-1?"":"htMacScroll"),this.hot.getSettings().ariaTags&&$e(this.TEXTAREA,[bde(),gde(),MU("listbox"),_de()])}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o),this.hot.getSettings().ariaTags&&$e(this.TEXTAREA,[Sr("false"),Rde(`${P$(Tx,this)}-listbox-${e}-${t}`)])}open(){super.open();const e=this.cellProperties.trimDropdown===void 0?!0:this.cellProperties.trimDropdown,t=this.hot.getSettings().ariaTags,i=Array.isArray(this.cellProperties.source)?this.cellProperties.source:null,s=i==null?void 0:i.length,{row:r,col:o}=this;this.showEditableElement(),this.focus();let a=ui();a===0&&ow()&&(a+=15),this.addHook("beforeKeyDown",l=>this.onBeforeKeyDown(l)),this.htEditor.updateSettings({colWidths:e?[Qt(this.TEXTAREA)-2]:void 0,width:e?Qt(this.TEXTAREA)+a:void 0,autoColumnSize:!0,renderer:(l,c,h,u,d,f,g)=>{Nl(l,c,h,u,d,f,g);const{filteringCaseSensitive:m,allowHtml:w,locale:v}=this.cellProperties,C=this.query;let S=Tn(f),x,_;S&&!w&&(x=m===!0?S.indexOf(C):S.toLocaleLowerCase(v).indexOf(C.toLocaleLowerCase(v)),x!==-1&&(_=S.substr(x,C.length),S=S.replace(_,`<strong>${_}</strong>`))),t&&$e(c,[mde(),...i?[Mde(s)]:[],...i?[Ade(i.indexOf(f)+1)]:[],["id",`${this.htEditor.rootElement.id}_${h}-${u}`]]),c.innerHTML=S},afterSelectionEnd:(l,c)=>{if(t){const h=this.htEditor.getCell(l,c,!0);$e(h,[rP()]),$e(this.TEXTAREA,...xde(h.id))}}}),t&&($e(this.htEditor.view._wt.wtOverlays.wtTable.TABLE,...ea()),$e(this.htEditor.rootElement,[TU(),Ede("polite"),Tde("text"),["id",`${P$(Tx,this)}-listbox-${r}-${o}`]]),$e(this.TEXTAREA,...Sr("true"))),this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)})}close(){this.removeHooksByKey("beforeKeyDown"),super.close(),this.hot.getSettings().ariaTags&&$e(this.TEXTAREA,[Sr("false")])}discardEditor(e){super.discardEditor(e),this.hot.view.render()}queryChoices(e){const t=this.cellProperties.source;this.query=e,typeof t=="function"?t.call(this.cellProperties,e,i=>{this.rawChoices=i,this.updateChoicesList(this.stripValuesIfNeeded(i))}):Array.isArray(t)?(this.rawChoices=t,this.updateChoicesList(this.stripValuesIfNeeded(t))):this.updateChoicesList([])}updateChoicesList(e){const t=hP(this.TEXTAREA),i=VU(this.TEXTAREA),s=this.cellProperties.sortByRelevance,r=this.cellProperties.filter;let o=null,a=null,l=e;s&&(o=this.sortByRelevance(this.stripValueIfNeeded(this.getValue()),l,this.cellProperties.filteringCaseSensitive));const c=Array.isArray(o)?o.length:0;if(r===!1)c&&(a=o[0]);else{const h=[];for(let u=0,d=l.length;u<d&&!(s&&c<=u);u++)c?h.push(l[o[u]]):h.push(l[u]);a=0,l=h}this.strippedChoices=l,l.length===0?this.htEditor.rootElement.style.display="none":this.htEditor.rootElement.style.display="",this.htEditor.loadData(fp([l])),l.length>0&&(this.updateDropdownDimensions(),this.flipDropdownIfNeeded(),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(a)),this.hot.listen(),Gw(this.TEXTAREA,t,t===i?void 0:i)}flipDropdownIfNeeded(){const e=$u(this.hot.view._wt.wtTable.TABLE),t=e===this.hot.rootWindow,i=this.cellProperties.preventOverflow;if(t||!t&&(i||i==="horizontal"))return!1;const s=li(this.TEXTAREA),r=$n(this.TEXTAREA),o=this.getDropdownHeight(),a=e.scrollTop,l=$n(this.hot.view._wt.wtTable.THEAD),c=li(e),h=s.top-c.top-l+a,u=e.scrollHeight-h-l-r,d=o>u&&h>u;return d?this.flipDropdown(o):this.unflipDropdown(),this.limitDropdownIfNeeded(d?h:u,o),d}limitDropdownIfNeeded(e,t){if(t>e){let i=0,s=0,r=0,o=null;do r=this.htEditor.getRowHeight(s)||this.htEditor.view._wt.getSetting("defaultRowHeight"),i+=r,s+=1;while(i<e);o=i-r,this.htEditor.flipped&&(this.htEditor.rootElement.style.top=`${parseInt(this.htEditor.rootElement.style.top,10)+t-o}px`),this.setDropdownHeight(i-r)}}flipDropdown(e){const t=this.htEditor.rootElement.style;t.position="absolute",t.top=`${-e}px`,this.htEditor.flipped=!0}unflipDropdown(){const e=this.htEditor.rootElement.style;e.position="absolute",e.top="",this.htEditor.flipped=void 0}updateDropdownDimensions(){const e=this.htEditor.getColWidth(0)+ui(this.hot.rootDocument)+2,t=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:t?void 0:e}),this.htEditor.view._wt.wtTable.alignOverlaysWithTrimmingContainer()}setDropdownHeight(e){this.htEditor.updateSettings({height:e})}highlightBestMatchingChoice(e){typeof e=="number"?this.htEditor.selectCell(e,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}getDropdownHeight(){const e=this.htEditor.getRowHeight(0)||23,t=this.cellProperties.visibleRows;return this.strippedChoices.length>=t?t*e:this.strippedChoices.length*e+8}stripValueIfNeeded(e){return this.stripValuesIfNeeded([e])[0]}stripValuesIfNeeded(e){const{allowHtml:t}=this.cellProperties,i=lt(e,r=>Tn(r));return lt(i,r=>t?r:cM(r))}allowKeyEventPropagation(e){const t=this.htEditor.getSelectedRangeLast(),i={row:t?t.from.row:-1};let s=!1;return e===Oe.ARROW_DOWN&&i.row>0&&i.row<this.htEditor.countRows()-1&&(s=!0),e===Oe.ARROW_UP&&i.row>-1&&(s=!0),s}onBeforeKeyDown(e){if(oY(e.keyCode)||e.keyCode===Oe.BACKSPACE||e.keyCode===Oe.DELETE||e.keyCode===Oe.INSERT){let t=10;if(e.keyCode===Oe.C&&(e.ctrlKey||e.metaKey))return;this.isOpened()||(t+=10),this.htEditor&&this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)},t)}}}const TCe="checkbox";class CG extends dg{static get EDITOR_TYPE(){return TCe}beginEditing(e,t){if(t&&t.type==="mouseup"&&t.target.nodeName==="TD"){const i=this.TD.querySelector('input[type="checkbox"]');Fe(i,"htBadValue")||i.click()}}finishEditing(){}init(){}open(){}close(){}getValue(){}setValue(){}focus(){}}/*!
 * Pikaday
 *
 * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday
 */const bc=()=>window,gr=()=>window.document,IM=(n,e)=>window.setTimeout(n,e),$o=function(n,e,t,i){n.addEventListener(e,t,!!i)},Na=function(n,e,t,i){n.removeEventListener(e,t,!!i)},MCe=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},Ps=function(n,e){return(" "+n.className+" ").indexOf(" "+e+" ")!==-1},Mx=function(n,e){Ps(n,e)||(n.className=n.className===""?e:n.className+" "+e)},Ax=function(n,e){n.className=MCe((" "+n.className+" ").replace(" "+e+" "," "))},yO=function(n){return/Array/.test(Object.prototype.toString.call(n))},Ns=function(n){return/Date/.test(Object.prototype.toString.call(n))&&!isNaN(n.getTime())},ACe=function(n){let e=n.getDay();return e===0||e===6},PCe=function(n){return n%4===0&&n%100!==0||n%400===0},I$=function(n,e){return[31,PCe(n)?29:28,31,30,31,30,31,31,30,31,30,31][e]},Ab=function(n){Ns(n)&&n.setHours(0,0,0,0)},Pb=function(n,e){return n.getTime()===e.getTime()},hS=function(n,e,t){let i,s;for(i in e)s=n[i]!==void 0,s&&typeof e[i]=="object"&&e[i]!==null&&e[i].nodeName===void 0?Ns(e[i])?t&&(n[i]=new Date(e[i].getTime())):yO(e[i])?t&&(n[i]=e[i].slice(0)):n[i]=hS({},e[i],t):(t||!s)&&(n[i]=e[i]);return n},O$=function(n,e,t){let i=gr().createEvent("HTMLEvents");i.initEvent(e,!0,!1),i=hS(i,t),n.dispatchEvent(i)},k$=function(n){return n.month<0&&(n.year-=Math.ceil(Math.abs(n.month)/12),n.month+=12),n.month>11&&(n.year+=Math.floor(Math.abs(n.month)/12),n.month-=12),n},xo={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},H$=function(n,e,t){for(e+=n.firstDay;e>=7;)e-=7;return t?n.i18n.weekdaysShort[e]:n.i18n.weekdays[e]},ICe=function(n){let e=[],t="false";if(n.isEmpty)if(n.showDaysInNextAndPreviousMonths)e.push("is-outside-current-month"),n.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled");else return'<td class="is-empty"></td>';return n.isDisabled&&e.push("is-disabled"),n.isToday&&e.push("is-today"),n.isSelected&&(e.push("is-selected"),t="true"),n.hasEvent&&e.push("has-event"),n.isInRange&&e.push("is-inrange"),n.isStartRange&&e.push("is-startrange"),n.isEndRange&&e.push("is-endrange"),'<td data-day="'+n.day+'" class="'+e.join(" ")+'" aria-selected="'+t+'"><button class="pika-button pika-day" type="button" data-pika-year="'+n.year+'" data-pika-month="'+n.month+'" data-pika-day="'+n.day+'">'+n.day+"</button></td>"},OCe=function(n,e){n.setHours(0,0,0,0);let t=n.getDate(),i=n.getDay(),s=e,r=s-1,o=7,a=function(d){return(d+o-1)%o};n.setDate(t+r-a(i));let l=new Date(n.getFullYear(),0,s),c=24*60*60*1e3,h=(n.getTime()-l.getTime())/c;return 1+Math.round((h-r+a(l.getDay()))/o)},kCe=function(n,e,t,i,s){let r=new Date(i,t,e);return'<td class="pika-week">'+(n.hasMoment?n.moment(r).isoWeek():OCe(r,s))+"</td>"},HCe=function(n,e,t,i){return'<tr class="pika-row'+(t?" pick-whole-week":"")+(i?" is-selected":"")+'">'+(e?n.reverse():n).join("")+"</tr>"},DCe=function(n){return"<tbody>"+n.join("")+"</tbody>"},NCe=function(n){let e,t=[];for(n.showWeekNumber&&t.push("<th></th>"),e=0;e<7;e++)t.push('<th scope="col"><abbr title="'+H$(n,e)+'">'+H$(n,e,!0)+"</abbr></th>");return"<thead><tr>"+(n.isRTL?t.reverse():t).join("")+"</tr></thead>"},LCe=function(n,e,t,i,s,r){let o,a,l,c=n._o,h=t===c.minYear,u=t===c.maxYear,d='<div id="'+r+'" class="pika-title" role="heading" aria-live="polite">',f,g,m=!0,w=!0;for(l=[],o=0;o<12;o++)l.push('<option value="'+(t===s?o-e:12+o-e)+'"'+(o===i?' selected="selected"':"")+(h&&o<c.minMonth||u&&o>c.maxMonth?' disabled="disabled"':"")+">"+c.i18n.months[o]+"</option>");for(f='<div class="pika-label">'+c.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",yO(c.yearRange)?(o=c.yearRange[0],a=c.yearRange[1]+1):(o=t-c.yearRange,a=1+t+c.yearRange),l=[];o<a&&o<=c.maxYear;o++)o>=c.minYear&&l.push('<option value="'+o+'"'+(o===t?' selected="selected"':"")+">"+o+"</option>");return g='<div class="pika-label">'+t+c.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",c.showMonthAfterYear?d+=g+f:d+=f+g,h&&(i===0||c.minMonth>=i)&&(m=!1),u&&(i===11||c.maxMonth<=i)&&(w=!1),e===0&&(d+='<button class="pika-prev'+(m?"":" is-disabled")+'" type="button">'+c.i18n.previousMonth+"</button>"),e===n._o.numberOfMonths-1&&(d+='<button class="pika-next'+(w?"":" is-disabled")+'" type="button">'+c.i18n.nextMonth+"</button>"),d+="</div>"},$Ce=function(n,e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+t+'">'+NCe(n)+DCe(e)+"</table>"};function OM(n){let e=this,t=e.config(n);e._onMouseDown=function(s){if(!e._v)return;s=s||bc().event;let r=s.target||s.srcElement;if(r)if(Ps(r,"is-disabled")||(Ps(r,"pika-button")&&!Ps(r,"is-empty")&&!Ps(r.parentNode,"is-disabled")?(e.setDate(new Date(r.getAttribute("data-pika-year"),r.getAttribute("data-pika-month"),r.getAttribute("data-pika-day"))),t.bound&&IM(function(){e.hide(),t.blurFieldOnSelect&&t.field&&t.field.blur()},100)):Ps(r,"pika-prev")?e.prevMonth():Ps(r,"pika-next")&&e.nextMonth()),Ps(r,"pika-select"))e._c=!0;else if(s.preventDefault)s.preventDefault();else return s.returnValue=!1,!1},e._onChange=function(s){s=s||bc().event;let r=s.target||s.srcElement;r&&(Ps(r,"pika-select-month")?e.gotoMonth(r.value):Ps(r,"pika-select-year")&&e.gotoYear(r.value))},e._onKeyChange=function(s){if(s=s||bc().event,e.isVisible())switch(s.keyCode){case 13:case 27:t.field&&t.field.blur();break;case 37:e.adjustDate("subtract",1);break;case 38:e.adjustDate("subtract",7);break;case 39:e.adjustDate("add",1);break;case 40:e.adjustDate("add",7);break;case 8:case 46:e.setDate(null);break}},e._parseFieldValue=function(){if(t.parse)return t.parse(t.field.value,t.format);if(this.hasMoment){let s=this.moment(t.field.value,t.format,t.formatStrict);return s&&s.isValid()?s.toDate():null}else return new Date(Date.parse(t.field.value))},e._onInputChange=function(s){let r;s.firedBy!==e&&(r=e._parseFieldValue(),Ns(r)&&e.setDate(r),e._v||e.show())},e._onInputFocus=function(){e.show()},e._onInputClick=function(){e.show()},e._onInputBlur=function(){let s=gr().activeElement;do if(Ps(s,"pika-single"))return;while(s=s.parentNode);e._c||(e._b=IM(function(){e.hide()},50)),e._c=!1},e._onClick=function(s){s=s||bc().event;let r=s.target||s.srcElement,o=r;if(r){!hasEventListeners&&Ps(r,"pika-select")&&(r.onchange||(r.setAttribute("onchange","return;"),$o(r,"change",e._onChange)));do if(Ps(o,"pika-single")||o===t.trigger)return;while(o=o.parentNode);e._v&&r!==t.trigger&&o!==t.trigger&&e.hide()}},e.el=gr().createElement("div"),e.el.className="pika-single"+(t.isRTL?" is-rtl":"")+(t.theme?" "+t.theme:""),$o(e.el,"mousedown",e._onMouseDown,!0),$o(e.el,"touchend",e._onMouseDown,!0),$o(e.el,"change",e._onChange),t.keyboardInput&&$o(gr(),"keydown",e._onKeyChange),t.field&&(t.container?t.container.appendChild(e.el):t.bound?gr().body.appendChild(e.el):t.field.parentNode.insertBefore(e.el,t.field.nextSibling),$o(t.field,"change",e._onInputChange),t.defaultDate||(t.defaultDate=e._parseFieldValue(),t.setDefaultDate=!0));let i=t.defaultDate;Ns(i)?t.setDefaultDate?e.setDate(i,!0):e.gotoDate(i):e.gotoDate(new Date),t.bound?(this.hide(),e.el.className+=" is-bound",$o(t.trigger,"click",e._onInputClick),$o(t.trigger,"focus",e._onInputFocus),$o(t.trigger,"blur",e._onInputBlur)):this.show()}OM.prototype={config:function(n){this._o||(this._o=hS({},xo,!0));let e=hS(this._o,n,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme=typeof e.theme=="string"&&e.theme?e.theme:null,e.bound=!!(e.bound!==void 0?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn=typeof e.disableDayFn=="function"?e.disableDayFn:null;let t=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=t>4?4:t,Ns(e.minDate)||(e.minDate=!1),Ns(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),yO(e.yearRange)){let i=new Date().getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||i,e.yearRange[1]=parseInt(e.yearRange[1],10)||i}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||xo.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(n){return n=n||this._o.format,Ns(this._d)?this._o.toString?this._o.toString(this._d,n):this.hasMoment?this.moment(this._d).format(n):this._d.toDateString():""},getMoment:function(){return this.hasMoment?this.moment(this._d):null},setMoment:function(n,e){this.hasMoment&&this.moment.isMoment(n)&&this.setDate(n.toDate(),e)},useMoment:function(n){this.hasMoment=!0,this.moment=n},getDate:function(){return Ns(this._d)?new Date(this._d.getTime()):null},setDate:function(n,e){if(!n)return this._d=null,this._o.field&&(this._o.field.value="",O$(this._o.field,"change",{firedBy:this})),this.draw();if(typeof n=="string"&&(n=new Date(Date.parse(n))),!Ns(n))return;let t=this._o.minDate,i=this._o.maxDate;Ns(t)&&n<t?n=t:Ns(i)&&n>i&&(n=i),this._d=new Date(n.getTime()),Ab(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),O$(this._o.field,"change",{firedBy:this})),!e&&typeof this._o.onSelect=="function"&&this._o.onSelect.call(this,this.getDate())},clear:function(){this.setDate(null)},gotoDate:function(n){let e=!0;if(Ns(n)){if(this.calendars){let t=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),s=n.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),e=s<t.getTime()||i.getTime()<s}e&&(this.calendars=[{month:n.getMonth(),year:n.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(n,e){let t=this.getDate()||new Date,i=parseInt(e)*24*60*60*1e3,s;n==="add"?s=new Date(t.valueOf()+i):n==="subtract"&&(s=new Date(t.valueOf()-i)),this.setDate(s)},adjustCalendars:function(){this.calendars[0]=k$(this.calendars[0]);for(let n=1;n<this._o.numberOfMonths;n++)this.calendars[n]=k$({month:this.calendars[0].month+n,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(n){isNaN(n)||(this.calendars[0].month=parseInt(n,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(n){isNaN(n)||(this.calendars[0].year=parseInt(n,10),this.adjustCalendars())},setMinDate:function(n){n instanceof Date?(Ab(n),this._o.minDate=n,this._o.minYear=n.getFullYear(),this._o.minMonth=n.getMonth()):(this._o.minDate=xo.minDate,this._o.minYear=xo.minYear,this._o.minMonth=xo.minMonth,this._o.startRange=xo.startRange),this.draw()},setMaxDate:function(n){n instanceof Date?(Ab(n),this._o.maxDate=n,this._o.maxYear=n.getFullYear(),this._o.maxMonth=n.getMonth()):(this._o.maxDate=xo.maxDate,this._o.maxYear=xo.maxYear,this._o.maxMonth=xo.maxMonth,this._o.endRange=xo.endRange),this.draw()},setStartRange:function(n){this._o.startRange=n},setEndRange:function(n){this._o.endRange=n},draw:function(n){if(!this._v&&!n)return;let e=this._o,t=e.minYear,i=e.maxYear,s=e.minMonth,r=e.maxMonth,o="",a;this._y<=t&&(this._y=t,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=i&&(this._y=i,!isNaN(r)&&this._m>r&&(this._m=r));for(let l=0;l<e.numberOfMonths;l++)a="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),o+='<div class="pika-lendar">'+LCe(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,a)+this.render(this.calendars[l].year,this.calendars[l].month,a)+"</div>";this.el.innerHTML=o,e.bound&&e.field.type!=="hidden"&&IM(function(){e.trigger.focus()},1),typeof this._o.onDraw=="function"&&this._o.onDraw(this),e.bound&&e.field.setAttribute("aria-label",e.ariaLabel)},adjustPosition:function(){let n,e,t,i,s,r,o,a,l,c,h;this._o.container||(this.el.style.position="absolute",n=this._o.trigger,e=this.el.offsetWidth,t=this.el.offsetHeight,i=bc().innerWidth||gr().documentElement.clientWidth,s=bc().innerHeight||gr().documentElement.clientHeight,r=gr().body.scrollTop||gr().documentElement.scrollTop,c=!0,h=!0,l=n.getBoundingClientRect(),o=l.left+bc().pageXOffset,a=l.bottom+bc().pageYOffset,(this._o.reposition&&o+e>i||this._o.position.indexOf("right")>-1&&o-e+n.offsetWidth>0)&&(o=o-e+n.offsetWidth,c=!1),(this._o.reposition&&a+t>s+r||this._o.position.indexOf("top")>-1&&a-t-n.offsetHeight>0)&&(a=a-t-n.offsetHeight,h=!1),o<0&&(o=0),a<0&&(a=0),this.el.style.left=o+"px",this.el.style.top=a+"px",Mx(this.el,c?"left-aligned":"right-aligned"),Mx(this.el,h?"bottom-aligned":"top-aligned"),Ax(this.el,c?"right-aligned":"left-aligned"),Ax(this.el,h?"top-aligned":"bottom-aligned"))},render:function(n,e,t){let i=this._o,s=new Date,r=I$(n,e),o=new Date(n,e,1).getDay(),a=[],l=[];Ab(s),i.firstDay>0&&(o-=i.firstDay,o<0&&(o+=7));let c=e===0?11:e-1,h=e===11?0:e+1,u=e===0?n-1:n,d=e===11?n+1:n,f=I$(u,c),g=r+o,m=g;for(;m>7;)m-=7;g+=7-m;let w=!1;for(let v=0,C=0;v<g;v++){let S=new Date(n,e,1+(v-o)),x=Ns(this._d)?Pb(S,this._d):!1,_=Pb(S,s),R=i.events.indexOf(S.toDateString())!==-1,M=v<o||v>=r+o,O=1+(v-o),P=e,k=n,B=i.startRange&&Pb(i.startRange,S),z=i.endRange&&Pb(i.endRange,S),Q=i.startRange&&i.endRange&&i.startRange<S&&S<i.endRange,te=i.minDate&&S<i.minDate||i.maxDate&&S>i.maxDate||i.disableWeekends&&ACe(S)||i.disableDayFn&&i.disableDayFn(S);M&&(v<o?(O=f+O,P=c,k=u):(O=O-r,P=h,k=d));let ne={day:O,month:P,year:k,hasEvent:R,isSelected:x,isToday:_,isDisabled:te,isEmpty:M,isStartRange:B,isEndRange:z,isInRange:Q,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&x&&(w=!0),l.push(ICe(ne)),++C===7&&(i.showWeekNumber&&l.unshift(kCe(this,v-o,e,n,i.firstWeekOfYearMinDays)),a.push(HCe(l,i.isRTL,i.pickWholeWeek,w)),l=[],C=0,w=!1)}return $Ce(i,a,t)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),Ax(this.el,"is-hidden"),this._o.bound&&($o(gr(),"click",this._onClick),this.adjustPosition()),typeof this._o.onOpen=="function"&&this._o.onOpen.call(this))},hide:function(){let n=this._v;n!==!1&&(this._o.bound&&Na(gr(),"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),Mx(this.el,"is-hidden"),this._v=!1,n!==void 0&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){let n=this._o;this.hide(),Na(this.el,"mousedown",this._onMouseDown,!0),Na(this.el,"touchend",this._onMouseDown,!0),Na(this.el,"change",this._onChange),n.keyboardInput&&Na(gr(),"keydown",this._onKeyChange),n.field&&(Na(n.field,"change",this._onInputChange),n.bound&&(Na(n.trigger,"click",this._onInputClick),Na(n.trigger,"focus",this._onInputFocus),Na(n.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}};function Px(n,e,t){return(e=FCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FCe(n){var e=BCe(n,"string");return typeof e=="symbol"?e:e+""}function BCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const SG="date",D$="dateEditor";class _G extends ld{constructor(){super(...arguments),Px(this,"defaultDateFormat","DD/MM/YYYY"),Px(this,"parentDestroyed",!1),Px(this,"$datePicker",null)}static get EDITOR_TYPE(){return SG}init(){if(typeof le!="function")throw new Error("You need to include moment.js to your project.");if(typeof OM!="function")throw new Error("You need to include Pikaday to your project.");super.init(),this.hot.addHook("afterDestroy",()=>{this.parentDestroyed=!0,this.destroyElements()})}createElements(){super.createElements(),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,this.datePicker.setAttribute("dir",this.hot.isRtl()?"rtl":"ltr"),ae(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),this.eventManager.addEventListener(this.datePicker,"mousedown",e=>{Fe(e.target,"pika-day")&&this.hideDatepicker(),e.stopPropagation()})}destroyElements(){const e=this.datePicker.parentNode;this.$datePicker&&this.$datePicker.destroy(),e&&e.removeChild(this.datePicker)}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o)}open(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const i=this.hot.getShortcutManager().getContext("editor");this.showDatepicker(e),super.open(),i.addShortcuts([{keys:[["ArrowLeft"]],callback:()=>{this.$datePicker.adjustDate("subtract",1)}},{keys:[["ArrowRight"]],callback:()=>{this.$datePicker.adjustDate("add",1)}},{keys:[["ArrowUp"]],callback:()=>{this.$datePicker.adjustDate("subtract",7)}},{keys:[["ArrowDown"]],callback:()=>{this.$datePicker.adjustDate("add",7)}}],{group:D$})}close(){var e;this._opened=!1,(e=this.$datePicker)!==null&&e!==void 0&&e.destroy&&this.$datePicker.destroy(),this.hot._registerTimeout(()=>{const s=this.hot._getEditorManager();s.closeEditor(),this.hot.view.render(),s.prepareEditor()}),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(D$),super.close()}finishEditing(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.finishEditing(e,t)}showDatepicker(e){const t=this.cellProperties.dateFormat||this.defaultDateFormat,i=this.hot.view.isMouseDown(),s=e?yP(e.keyCode):!1;let r;this.datePicker.style.display="block",this.$datePicker=new OM(this.getDatePickerConfig()),typeof this.$datePicker.useMoment=="function"&&this.$datePicker.useMoment(le),this.$datePicker._onInputFocus=function(){},this.originalValue?(r=this.originalValue,le(r,t,!0).isValid()&&this.$datePicker.setMoment(le(r,t),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),!s&&!i&&this.setValue("")):this.cellProperties.defaultDate?(r=this.cellProperties.defaultDate,le(r,t,!0).isValid()&&this.$datePicker.setMoment(le(r,t),!0),!s&&!i&&this.setValue("")):this.$datePicker.gotoToday()}hideDatepicker(){this.datePickerStyle.display="none",this.$datePicker.hide()}getDatePickerConfig(){const e=this.TEXTAREA,t={};this.cellProperties&&this.cellProperties.datePickerConfig&&Xw(t,this.cellProperties.datePickerConfig);const i=t.onSelect,s=t.onClose;return t.field=e,t.trigger=e,t.container=this.datePicker,t.bound=!1,t.keyboardInput=!1,t.format=t.format||this.defaultDateFormat,t.reposition=t.reposition||!1,t.isRTL=!1,t.onSelect=r=>{let o=r;isNaN(o.getTime())||(o=le(o).format(this.cellProperties.dateFormat||this.defaultDateFormat)),this.setValue(o),i&&i()},t.onClose=()=>{this.parentDestroyed||this.finishEditing(!1),s&&s()},t}refreshDimensions(e){var t;if(super.refreshDimensions(e),this.state!==kn.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.hideDatepicker();return}const{rowIndexMapper:i,columnIndexMapper:s}=this.hot,{wtOverlays:r}=this.hot.view._wt,{wtTable:o}=(t=r.getParentOverlay(this.TD))!==null&&t!==void 0?t:this.hot.view._wt,a=i.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleRow()),l=i.getVisualFromRenderableIndex(o.getLastPartiallyVisibleRow()),c=s.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleColumn()),h=s.getVisualFromRenderableIndex(o.getLastPartiallyVisibleColumn());if(this.row>=a&&this.row<=l&&this.col>=c&&this.col<=h){const u=this.TD.getBoundingClientRect();this.datePickerStyle.top=`${this.hot.rootWindow.pageYOffset+u.top+$n(this.TD)}px`;let d=this.hot.rootWindow.pageXOffset;this.hot.isRtl()?d+=u.right-Qt(this.datePicker):d+=u.left,this.datePickerStyle.left=`${d}px`}else this.hideDatepicker()}}const VCe="dropdown";class CO extends bO{static get EDITOR_TYPE(){return VCe}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}Ee.getSingleton().add("beforeValidate",function(n,e,t){const i=this.propToCol(t);if(Number.isInteger(i)){const s=this.getCellMeta(e,i);s.editor===CO&&s.strict===void 0&&(s.filter=!1,s.strict=!0)}});const WCe="numeric";class RG extends ld{static get EDITOR_TYPE(){return WCe}}const jCe="password";class xG extends ld{static get EDITOR_TYPE(){return jCe}createElements(){super.createElements(),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,lo(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}const Ix="ht_editor_visible",N$="selectEditor",zCe="select";class EG extends dg{static get EDITOR_TYPE(){return zCe}init(){this.select=this.hot.rootDocument.createElement("select"),this.select.setAttribute("data-hot-input","true"),this.select.style.display="none",ae(this.select,"htSelectEditor"),this.hot.rootElement.appendChild(this.select),this.registerHooks()}getValue(){return this.select.value}setValue(e){this.select.value=e}open(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this._opened=!1,this.select.style.display="none",Fe(this.select,Ix)&&ze(this.select,Ix),this.unregisterShortcuts(),this.clearHooks()}focus(){this.select.focus()}registerHooks(){this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>this.refreshDimensions()),this.addHook("afterRowResize",()=>this.refreshDimensions())}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o);const a=this.cellProperties.selectOptions;let l;typeof a=="function"?l=this.prepareOptions(a(this.row,this.col,this.prop)):l=this.prepareOptions(a),lo(this.select),et(l,(c,h)=>{const u=this.hot.rootDocument.createElement("OPTION");u.value=h,od(u,c),this.select.appendChild(u)})}prepareOptions(e){let t={};if(Array.isArray(e))for(let i=0,s=e.length;i<s;i++)t[e[i]]=e[i];else typeof e=="object"&&(t=e);return t}refreshValue(){const e=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=e,this.setValue(e),this.refreshDimensions()}refreshDimensions(){if(this.state!==kn.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.close();return}const{top:e,start:t,width:i,height:s}=this.getEditedCellRect(),r=this.select.style;r.height=`${s}px`,r.width=`${i}px`,r.top=`${e}px`,r[this.hot.isRtl()?"right":"left"]=`${t}px`,r.margin="0px",ae(this.select,Ix)}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),i={group:N$};this.isInFullEditMode()&&t.addShortcuts([{keys:[["ArrowUp"]],callback:()=>{const s=this.select.selectedIndex-1;s>=0&&(this.select[s].selected=!0)}},{keys:[["ArrowDown"]],callback:()=>{const s=this.select.selectedIndex+1;s<=this.select.length-1&&(this.select[s].selected=!0)}}],i)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(N$)}}const UCe="time";class TG extends ld{static get EDITOR_TYPE(){return UCe}prepare(e,t,i,s,r,o){super.prepare(e,t,i,s,r,o),this.TEXTAREA.dir="ltr"}}function YCe(){vs(dg),vs(bO),vs(CG),vs(_G),vs(CO),vs(vO),vs(RG),vs(xG),vs(EG),vs(ld),vs(TG)}const GCe="html";function SO(n,e,t,i,s,r,o){nv.apply(this,[n,e,t,i,s,r,o]),od(e,r??"",!1)}SO.RENDERER_TYPE=GCe;const KCe="autocomplete";function fg(n,e,t,i,s,r,o){const{rootDocument:a}=n,l=o.allowHtml?SO:Nl,c=a.createElement("DIV"),h=n.getSettings().ariaTags;if(c.className="htAutocompleteArrow",h&&c.setAttribute(...sd()),c.appendChild(a.createTextNode("▼")),l.apply(this,[n,e,t,i,s,r,o]),e.firstChild||e.appendChild(a.createTextNode(" ")),e.insertBefore(c,e.firstChild),ae(e,"htAutocomplete"),!n.acArrowListener){const u=new Er(n);n.acArrowListener=function(d){Fe(d.target,"htAutocompleteArrow")&&n.view._wt.getSetting("onCellDblClick",null,n._createCellCoords(t,i),e)},u.addEventListener(n.rootElement,"mousedown",n.acArrowListener),n.addHookOnce("afterDestroy",()=>{u.destroy()})}}fg.RENDERER_TYPE=KCe;const qCe="dropdown";function _O(n,e,t,i,s,r,o){fg.apply(this,[n,e,t,i,s,r,o])}_O.RENDERER_TYPE=qCe;const L$=new WeakMap,$$=new WeakMap,XCe="htBadValue",Kf="data-row",qf="data-col",QCe="checkboxRenderer",MG="checkbox";Ee.getSingleton().add("modifyAutoColumnSizeSeed",function(n,e,t){const{label:i,type:s,row:r,column:o,prop:a}=e;if(s===MG){if(i){const{value:l,property:c}=i;let h=t;if(l)h=typeof l=="function"?l(r,o,a,t):l;else if(c){const u=this.getDataAtRowProp(r,c);h=u!==null?u:t}n=h}return n}});function RO(n,e,t,i,s,r,o){const{rootDocument:a}=n,l=n.getSettings().ariaTags;nv.apply(this,[n,e,t,i,s,r,o]),ZCe(n);let c=JCe(a);const h=o.label;let u=!1;if(typeof o.checkedTemplate>"u"&&(o.checkedTemplate=!0),typeof o.uncheckedTemplate>"u"&&(o.uncheckedTemplate=!1),lo(e),r===o.checkedTemplate||Tn(r).toLocaleLowerCase(o.locale)===Tn(o.checkedTemplate).toLocaleLowerCase(o.locale)?c.checked=!0:r===o.uncheckedTemplate||Tn(r).toLocaleLowerCase(o.locale)===Tn(o.uncheckedTemplate).toLocaleLowerCase(o.locale)?c.checked=!1:Mn(r)?ae(c,"noValue"):(c.style.display="none",ae(c,XCe),u=!0),$e(c,[[Kf,t],[qf,i]]),l&&$e(c,[KC(c.checked?n.getTranslatedPhrase(fO):n.getTranslatedPhrase(gO)),IU(c.checked),pde()]),!u&&h){let m="";if(h.value)m=typeof h.value=="function"?h.value.call(this,t,i,s,r):h.value;else if(h.property){const v=n.getDataAtRowProp(t,h.property);m=v!==null?v:""}const w=eSe(a,m,h.separated!==!0);h.position==="before"?h.separated?(e.appendChild(w),e.appendChild(c)):(w.appendChild(c),c=w):(!h.position||h.position==="after")&&(h.separated?(e.appendChild(c),e.appendChild(w)):(w.insertBefore(c,w.firstChild),c=w))}(!h||h&&!h.separated)&&e.appendChild(c),u&&e.appendChild(a.createTextNode("#bad-value#")),L$.has(n)||(L$.set(n,!0),d());function d(){const w=n.getShortcutManager().getContext("grid"),v={group:QCe,relativeToGroup:th,position:"before"};w.addShortcuts([{keys:[["space"]],callback:()=>(f(),!g()),runOnlyIf:()=>{var C;return(C=n.getSelectedRangeLast())===null||C===void 0?void 0:C.highlight.isCell()}},{keys:[["enter"]],callback:()=>(f(),!g()),runOnlyIf:()=>{const C=n.getSelectedRangeLast();return n.getSettings().enterBeginsEditing&&(C==null?void 0:C.isSingle())&&C.highlight.isCell()}},{keys:[["delete"],["backspace"]],callback:()=>(f(!0),!g()),runOnlyIf:()=>{var C;return(C=n.getSelectedRangeLast())===null||C===void 0?void 0:C.highlight.isCell()}}],v)}function f(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const w=n.getSelectedRange(),v=[],C=new Map;let S=[],x=0;if(w){for(let _=0;_<w.length;_++){const{row:R,col:M}=w[_].getTopStartCorner(),{row:O,col:P}=w[_].getBottomEndCorner();for(let k=R;k<=O;k+=1)for(let B=M;B<=P;B+=1){const z=n.getCellMeta(k,B),Q={checkedTemplate:z.checkedTemplate,uncheckedTemplate:z.uncheckedTemplate};if(z.type!=="checkbox"){m===!0&&!z.readOnly&&(C.has(v.length)?C.set(v.length,[...C.get(v.length),[k,B,null]]):C.set(v.length,[[k,B,null]]));continue}if(z.readOnly===!0)continue;typeof z.checkedTemplate>"u"&&(z.checkedTemplate=!0),typeof z.uncheckedTemplate>"u"&&(z.uncheckedTemplate=!1);const te=n.getDataAtCell(k,B);m===!1?[z.checkedTemplate,z.checkedTemplate.toString()].includes(te)?S.push([k,B,z.uncheckedTemplate,Q]):[z.uncheckedTemplate,z.uncheckedTemplate.toString(),null,void 0].includes(te)&&S.push([k,B,z.checkedTemplate,Q]):S.push([k,B,z.uncheckedTemplate,Q]),x+=1}v.push(x),x=0}S.every(_=>{let[,,R]=_;return R===S[0][2]})?S=S.map(_=>{let[R,M,O]=_;return[R,M,O]}):S=S.map(_=>{let[R,M,,O]=_;return[R,M,O.checkedTemplate]}),S.length>0&&v.forEach((_,R)=>{let M=S.splice(0,_);C.size&&C.has(R)&&(M=[...M,...C.get(R)]),n.setDataAtCell(M)})}}function g(){const m=n.getSelectedRange();if(m){for(let w=0;w<m.length;w++){const v=m[w].getTopStartCorner(),C=m[w].getBottomEndCorner();for(let S=v.row;S<=C.row;S++)for(let x=v.col;x<=C.col;x++){const _=n.getCellMeta(S,x),R=n.getCell(S,x);if(R==null)return!0;if(R.querySelectorAll("input[type=checkbox]").length>0&&!_.readOnly)return!0}}return!1}}}RO.RENDERER_TYPE=MG;function ZCe(n){let e=$$.get(n);if(!e){const{rootElement:t}=n;e=new Er(n),e.addEventListener(t,"click",i=>nSe(i,n)),e.addEventListener(t,"mouseup",i=>tSe(i,n)),e.addEventListener(t,"change",i=>iSe(i,n)),$$.set(n,e)}return e}function JCe(n){const e=n.createElement("input");return e.className="htCheckboxRendererInput",e.type="checkbox",e.setAttribute("tabindex","-1"),e.cloneNode(!1)}function eSe(n,e,t){const i=n.createElement("label");return i.className=`htCheckboxRendererLabel ${t?"fullWidth":""}`,i.appendChild(n.createTextNode(e)),i.cloneNode(!0)}function tSe(n,e){const{target:t}=n;xO(t)&&(!t.hasAttribute(Kf)||!t.hasAttribute(qf)||setTimeout(e.listen,10))}function nSe(n,e){const{target:t}=n;if(!xO(t)||!t.hasAttribute(Kf)||!t.hasAttribute(qf))return;const i=parseInt(t.getAttribute(Kf),10),s=parseInt(t.getAttribute(qf),10);e.getCellMeta(i,s).readOnly&&n.preventDefault()}function iSe(n,e){const{target:t}=n;if(!xO(t)||!t.hasAttribute(Kf)||!t.hasAttribute(qf))return;const i=parseInt(t.getAttribute(Kf),10),s=parseInt(t.getAttribute(qf),10),r=e.getCellMeta(i,s);if(!r.readOnly){let o=null;n.target.checked?o=r.uncheckedTemplate===void 0?!0:r.checkedTemplate:o=r.uncheckedTemplate===void 0?!1:r.uncheckedTemplate,e.setDataAtCell(i,s,o)}}function xO(n){return n.tagName==="INPUT"&&n.getAttribute("type")==="checkbox"}const sSe="handsontable";function EO(n,e,t,i,s,r,o){fg.apply(this,[n,e,t,i,s,r,o])}EO.RENDERER_TYPE=sSe;function Ib(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var AG={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,s,r){function o(c,h){if(!s[c]){if(!i[c]){var u=typeof Ib=="function"&&Ib;if(!h&&u)return u(c,!0);if(a)return a(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var f=s[c]={exports:{}};i[c][0].call(f.exports,function(g){return o(i[c][1][g]||g)},f,f.exports,t,i,s,r)}return s[c].exports}for(var a=typeof Ib=="function"&&Ib,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,i,s){(function(r){var o,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,l=Math.ceil,c=Math.floor,h="[BigNumber Error] ",u=h+"Number primitive has more than 15 significant digits: ",d=1e14,f=14,g=9007199254740991,m=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],w=1e7,v=1e9;function C(P){var k=0|P;return 0<P||P===k?k:k-1}function S(P){for(var k,B,z=1,Q=P.length,te=P[0]+"";z<Q;){for(k=P[z++]+"",B=f-k.length;B--;k="0"+k);te+=k}for(Q=te.length;te.charCodeAt(--Q)===48;);return te.slice(0,Q+1||1)}function x(P,k){var B,z,Q=P.c,te=k.c,ne=P.s,j=k.s,ie=P.e,oe=k.e;if(!ne||!j)return null;if(B=Q&&!Q[0],z=te&&!te[0],B||z)return B?z?0:-j:ne;if(ne!=j)return ne;if(B=ne<0,z=ie==oe,!Q||!te)return z?0:!Q^B?1:-1;if(!z)return oe<ie^B?1:-1;for(j=(ie=Q.length)<(oe=te.length)?ie:oe,ne=0;ne<j;ne++)if(Q[ne]!=te[ne])return Q[ne]>te[ne]^B?1:-1;return ie==oe?0:oe<ie^B?1:-1}function _(P,k,B,z){if(P<k||B<P||P!==(P<0?l(P):c(P)))throw Error(h+(z||"Argument")+(typeof P=="number"?P<k||B<P?" out of range: ":" not an integer: ":" not a primitive number: ")+String(P))}function R(P){var k=P.c.length-1;return C(P.e/f)==k&&P.c[k]%2!=0}function M(P,k){return(1<P.length?P.charAt(0)+"."+P.slice(1):P)+(k<0?"e":"e+")+k}function O(P,k,B){var z,Q;if(k<0){for(Q=B+".";++k;Q+=B);P=Q+P}else if(++k>(z=P.length)){for(Q=B,k-=z;--k;Q+=B);P+=Q}else k<z&&(P=P.slice(0,k)+"."+P.slice(k));return P}(o=function P(k){var B,z,Q,te,ne,j,ie,oe,J,pe,p=X.prototype={constructor:X,toString:null,valueOf:null},b=new X(1),y=20,T=4,H=-7,E=21,D=-1e7,K=1e7,ee=!1,he=1,se=0,Ie={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},xe="0123456789abcdefghijklmnopqrstuvwxyz";function X(A,I){var N,U,$,q,W,F,Y,G,Z=this;if(!(Z instanceof X))return new X(A,I);if(I==null){if(A instanceof X)return Z.s=A.s,Z.e=A.e,void(Z.c=(A=A.c)?A.slice():A);if((F=typeof A=="number")&&0*A==0){if(Z.s=1/A<0?(A=-A,-1):1,A===~~A){for(q=0,W=A;10<=W;W/=10,q++);return Z.e=q,void(Z.c=[A])}G=String(A)}else{if(G=String(A),!a.test(G))return Q(Z,G,F);Z.s=G.charCodeAt(0)==45?(G=G.slice(1),-1):1}-1<(q=G.indexOf("."))&&(G=G.replace(".","")),0<(W=G.search(/e/i))?(q<0&&(q=W),q+=+G.slice(W+1),G=G.substring(0,W)):q<0&&(q=G.length)}else{if(_(I,2,xe.length,"Base"),G=String(A),I==10)return Se(Z=new X(A instanceof X?A:G),y+Z.e+1,T);if(F=typeof A=="number"){if(0*A!=0)return Q(Z,G,F,I);if(Z.s=1/A<0?(G=G.slice(1),-1):1,X.DEBUG&&15<G.replace(/^0\.0*|\./,"").length)throw Error(u+A);F=!1}else Z.s=G.charCodeAt(0)===45?(G=G.slice(1),-1):1;for(N=xe.slice(0,I),q=W=0,Y=G.length;W<Y;W++)if(N.indexOf(U=G.charAt(W))<0){if(U=="."){if(q<W){q=Y;continue}}else if(!$&&(G==G.toUpperCase()&&(G=G.toLowerCase())||G==G.toLowerCase()&&(G=G.toUpperCase()))){$=!0,W=-1,q=0;continue}return Q(Z,String(A),F,I)}-1<(q=(G=z(G,I,10,Z.s)).indexOf("."))?G=G.replace(".",""):q=G.length}for(W=0;G.charCodeAt(W)===48;W++);for(Y=G.length;G.charCodeAt(--Y)===48;);if(G=G.slice(W,++Y)){if(Y-=W,F&&X.DEBUG&&15<Y&&(g<A||A!==c(A)))throw Error(u+Z.s*A);if(K<(q=q-W-1))Z.c=Z.e=null;else if(q<D)Z.c=[Z.e=0];else{if(Z.e=q,Z.c=[],W=(q+1)%f,q<0&&(W+=f),W<Y){for(W&&Z.c.push(+G.slice(0,W)),Y-=f;W<Y;)Z.c.push(+G.slice(W,W+=f));G=G.slice(W),W=f-G.length}else W-=Y;for(;W--;G+="0");Z.c.push(+G)}}else Z.c=[Z.e=0]}function re(A,I,N,U){var $,q,W,F,Y;if(N==null?N=T:_(N,0,8),!A.c)return A.toString();if($=A.c[0],W=A.e,I==null)Y=S(A.c),Y=U==1||U==2&&(W<=H||E<=W)?M(Y,W):O(Y,W,"0");else if(q=(A=Se(new X(A),I,N)).e,F=(Y=S(A.c)).length,U==1||U==2&&(I<=q||q<=H)){for(;F<I;Y+="0",F++);Y=M(Y,q)}else if(I-=W,Y=O(Y,q,"0"),F<q+1){if(0<--I)for(Y+=".";I--;Y+="0");}else if(0<(I+=q-F))for(q+1==F&&(Y+=".");I--;Y+="0");return A.s<0&&$?"-"+Y:Y}function ce(A,I){for(var N,U=1,$=new X(A[0]);U<A.length;U++){if(!(N=new X(A[U])).s){$=N;break}I.call($,N)&&($=N)}return $}function Be(A,I,N){for(var U=1,$=I.length;!I[--$];I.pop());for($=I[0];10<=$;$/=10,U++);return(N=U+N*f-1)>K?A.c=A.e=null:A.c=N<D?[A.e=0]:(A.e=N,I),A}function Se(A,I,N,U){var $,q,W,F,Y,G,Z,fe=A.c,Re=m;if(fe){e:{for($=1,F=fe[0];10<=F;F/=10,$++);if((q=I-$)<0)q+=f,W=I,Z=(Y=fe[G=0])/Re[$-W-1]%10|0;else if((G=l((q+1)/f))>=fe.length){if(!U)break e;for(;fe.length<=G;fe.push(0));Y=Z=0,W=(q%=f)-f+($=1)}else{for(Y=F=fe[G],$=1;10<=F;F/=10,$++);Z=(W=(q%=f)-f+$)<0?0:Y/Re[$-W-1]%10|0}if(U=U||I<0||fe[G+1]!=null||(W<0?Y:Y%Re[$-W-1]),U=N<4?(Z||U)&&(N==0||N==(A.s<0?3:2)):5<Z||Z==5&&(N==4||U||N==6&&(0<q?0<W?Y/Re[$-W]:0:fe[G-1])%10&1||N==(A.s<0?8:7)),I<1||!fe[0])return fe.length=0,U?(I-=A.e+1,fe[0]=Re[(f-I%f)%f],A.e=-I||0):fe[0]=A.e=0,A;if(q==0?(fe.length=G,F=1,G--):(fe.length=G+1,F=Re[f-q],fe[G]=0<W?c(Y/Re[$-W]%Re[W])*F:0),U)for(;;){if(G==0){for(q=1,W=fe[0];10<=W;W/=10,q++);for(W=fe[0]+=F,F=1;10<=W;W/=10,F++);q!=F&&(A.e++,fe[0]==d&&(fe[0]=1));break}if(fe[G]+=F,fe[G]!=d)break;fe[G--]=0,F=1}for(q=fe.length;fe[--q]===0;fe.pop());}A.e>K?A.c=A.e=null:A.e<D&&(A.c=[A.e=0])}return A}function _e(A){var I,N=A.e;return N===null?A.toString():(I=S(A.c),I=N<=H||E<=N?M(I,N):O(I,N,"0"),A.s<0?"-"+I:I)}return X.clone=P,X.ROUND_UP=0,X.ROUND_DOWN=1,X.ROUND_CEIL=2,X.ROUND_FLOOR=3,X.ROUND_HALF_UP=4,X.ROUND_HALF_DOWN=5,X.ROUND_HALF_EVEN=6,X.ROUND_HALF_CEIL=7,X.ROUND_HALF_FLOOR=8,X.EUCLID=9,X.config=X.set=function(A){var I,N;if(A!=null){if(typeof A!="object")throw Error(h+"Object expected: "+A);if(A.hasOwnProperty(I="DECIMAL_PLACES")&&(_(N=A[I],0,v,I),y=N),A.hasOwnProperty(I="ROUNDING_MODE")&&(_(N=A[I],0,8,I),T=N),A.hasOwnProperty(I="EXPONENTIAL_AT")&&((N=A[I])&&N.pop?(_(N[0],-v,0,I),_(N[1],0,v,I),H=N[0],E=N[1]):(_(N,-v,v,I),H=-(E=N<0?-N:N))),A.hasOwnProperty(I="RANGE"))if((N=A[I])&&N.pop)_(N[0],-v,-1,I),_(N[1],1,v,I),D=N[0],K=N[1];else{if(_(N,-v,v,I),!N)throw Error(h+I+" cannot be zero: "+N);D=-(K=N<0?-N:N)}if(A.hasOwnProperty(I="CRYPTO")){if((N=A[I])!==!!N)throw Error(h+I+" not true or false: "+N);if(N){if(typeof crypto>"u"||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw ee=!N,Error(h+"crypto unavailable");ee=N}else ee=N}if(A.hasOwnProperty(I="MODULO_MODE")&&(_(N=A[I],0,9,I),he=N),A.hasOwnProperty(I="POW_PRECISION")&&(_(N=A[I],0,v,I),se=N),A.hasOwnProperty(I="FORMAT")){if(typeof(N=A[I])!="object")throw Error(h+I+" not an object: "+N);Ie=N}if(A.hasOwnProperty(I="ALPHABET")){if(typeof(N=A[I])!="string"||/^.$|[+-.\s]|(.).*\1/.test(N))throw Error(h+I+" invalid: "+N);xe=N}}return{DECIMAL_PLACES:y,ROUNDING_MODE:T,EXPONENTIAL_AT:[H,E],RANGE:[D,K],CRYPTO:ee,MODULO_MODE:he,POW_PRECISION:se,FORMAT:Ie,ALPHABET:xe}},X.isBigNumber=function(A){return A instanceof X||A&&A._isBigNumber===!0||!1},X.maximum=X.max=function(){return ce(arguments,p.lt)},X.minimum=X.min=function(){return ce(arguments,p.gt)},X.random=(te=9007199254740992,ne=Math.random()*te&2097151?function(){return c(Math.random()*te)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(A){var I,N,U,$,q,W=0,F=[],Y=new X(b);if(A==null?A=y:_(A,0,v),$=l(A/f),ee)if(crypto.getRandomValues){for(I=crypto.getRandomValues(new Uint32Array($*=2));W<$;)9e15<=(q=131072*I[W]+(I[W+1]>>>11))?(N=crypto.getRandomValues(new Uint32Array(2)),I[W]=N[0],I[W+1]=N[1]):(F.push(q%1e14),W+=2);W=$/2}else{if(!crypto.randomBytes)throw ee=!1,Error(h+"crypto unavailable");for(I=crypto.randomBytes($*=7);W<$;)9e15<=(q=281474976710656*(31&I[W])+1099511627776*I[W+1]+4294967296*I[W+2]+16777216*I[W+3]+(I[W+4]<<16)+(I[W+5]<<8)+I[W+6])?crypto.randomBytes(7).copy(I,W):(F.push(q%1e14),W+=7);W=$/7}if(!ee)for(;W<$;)(q=ne())<9e15&&(F[W++]=q%1e14);for($=F[--W],A%=f,$&&A&&(q=m[f-A],F[W]=c($/q)*q);F[W]===0;F.pop(),W--);if(W<0)F=[U=0];else{for(U=-1;F[0]===0;F.splice(0,1),U-=f);for(W=1,q=F[0];10<=q;q/=10,W++);W<f&&(U-=f-W)}return Y.e=U,Y.c=F,Y}),X.sum=function(){for(var A=1,I=arguments,N=new X(I[0]);A<I.length;)N=N.plus(I[A++]);return N},z=function(){var A="0123456789";function I(N,U,$,q){for(var W,F,Y=[0],G=0,Z=N.length;G<Z;){for(F=Y.length;F--;Y[F]*=U);for(Y[0]+=q.indexOf(N.charAt(G++)),W=0;W<Y.length;W++)Y[W]>$-1&&(Y[W+1]==null&&(Y[W+1]=0),Y[W+1]+=Y[W]/$|0,Y[W]%=$)}return Y.reverse()}return function(N,U,$,q,W){var F,Y,G,Z,fe,Re,De,Qe,dt=N.indexOf("."),it=y,We=T;for(0<=dt&&(Z=se,se=0,N=N.replace(".",""),Re=(Qe=new X(U)).pow(N.length-dt),se=Z,Qe.c=I(O(S(Re.c),Re.e,"0"),10,$,A),Qe.e=Qe.c.length),G=Z=(De=I(N,U,$,W?(F=xe,A):(F=A,xe))).length;De[--Z]==0;De.pop());if(!De[0])return F.charAt(0);if(dt<0?--G:(Re.c=De,Re.e=G,Re.s=q,De=(Re=B(Re,Qe,it,We,$)).c,fe=Re.r,G=Re.e),dt=De[Y=G+it+1],Z=$/2,fe=fe||Y<0||De[Y+1]!=null,fe=We<4?(dt!=null||fe)&&(We==0||We==(Re.s<0?3:2)):Z<dt||dt==Z&&(We==4||fe||We==6&&1&De[Y-1]||We==(Re.s<0?8:7)),Y<1||!De[0])N=fe?O(F.charAt(1),-it,F.charAt(0)):F.charAt(0);else{if(De.length=Y,fe)for(--$;++De[--Y]>$;)De[Y]=0,Y||(++G,De=[1].concat(De));for(Z=De.length;!De[--Z];);for(dt=0,N="";dt<=Z;N+=F.charAt(De[dt++]));N=O(N,G,F.charAt(0))}return N}}(),B=function(){function A(U,$,q){var W,F,Y,G,Z=0,fe=U.length,Re=$%w,De=$/w|0;for(U=U.slice();fe--;)Z=((F=Re*(Y=U[fe]%w)+(W=De*Y+(G=U[fe]/w|0)*Re)%w*w+Z)/q|0)+(W/w|0)+De*G,U[fe]=F%q;return Z&&(U=[Z].concat(U)),U}function I(U,$,q,W){var F,Y;if(q!=W)Y=W<q?1:-1;else for(F=Y=0;F<q;F++)if(U[F]!=$[F]){Y=U[F]>$[F]?1:-1;break}return Y}function N(U,$,q,W){for(var F=0;q--;)U[q]-=F,F=U[q]<$[q]?1:0,U[q]=F*W+U[q]-$[q];for(;!U[0]&&1<U.length;U.splice(0,1));}return function(U,$,q,W,F){var Y,G,Z,fe,Re,De,Qe,dt,it,We,pt,yn,cd,Pr,pg,Xs,dn,ti=U.s==$.s?1:-1,Ci=U.c,sn=$.c;if(!(Ci&&Ci[0]&&sn&&sn[0]))return new X(U.s&&$.s&&(Ci?!sn||Ci[0]!=sn[0]:sn)?Ci&&Ci[0]==0||!sn?0*ti:ti/0:NaN);for(it=(dt=new X(ti)).c=[],ti=q+(G=U.e-$.e)+1,F||(F=d,G=C(U.e/f)-C($.e/f),ti=ti/f|0),Z=0;sn[Z]==(Ci[Z]||0);Z++);if(sn[Z]>(Ci[Z]||0)&&G--,ti<0)it.push(1),fe=!0;else{for(Pr=Ci.length,Xs=sn.length,ti+=2,1<(Re=c(F/(sn[Z=0]+1)))&&(sn=A(sn,Re,F),Ci=A(Ci,Re,F),Xs=sn.length,Pr=Ci.length),cd=Xs,pt=(We=Ci.slice(0,Xs)).length;pt<Xs;We[pt++]=0);dn=sn.slice(),dn=[0].concat(dn),pg=sn[0],sn[1]>=F/2&&pg++;do{if(Re=0,(Y=I(sn,We,Xs,pt))<0){if(yn=We[0],Xs!=pt&&(yn=yn*F+(We[1]||0)),1<(Re=c(yn/pg)))for(F<=Re&&(Re=F-1),Qe=(De=A(sn,Re,F)).length,pt=We.length;I(De,We,Qe,pt)==1;)Re--,N(De,Xs<Qe?dn:sn,Qe,F),Qe=De.length,Y=1;else Re==0&&(Y=Re=1),Qe=(De=sn.slice()).length;if(Qe<pt&&(De=[0].concat(De)),N(We,De,pt,F),pt=We.length,Y==-1)for(;I(sn,We,Xs,pt)<1;)Re++,N(We,Xs<pt?dn:sn,pt,F),pt=We.length}else Y===0&&(Re++,We=[0]);it[Z++]=Re,We[0]?We[pt++]=Ci[cd]||0:(We=[Ci[cd]],pt=1)}while((cd++<Pr||We[0]!=null)&&ti--);fe=We[0]!=null,it[0]||it.splice(0,1)}if(F==d){for(Z=1,ti=it[0];10<=ti;ti/=10,Z++);Se(dt,q+(dt.e=Z+G*f-1)+1,W,fe)}else dt.e=G,dt.r=+fe;return dt}}(),j=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ie=/^([^.]+)\.$/,oe=/^\.([^.]+)$/,J=/^-?(Infinity|NaN)$/,pe=/^\s*\+(?=[\w.])|^\s+|\s+$/g,Q=function(A,I,N,U){var $,q=N?I:I.replace(pe,"");if(J.test(q))A.s=isNaN(q)?null:q<0?-1:1,A.c=A.e=null;else{if(!N&&(q=q.replace(j,function(W,F,Y){return $=(Y=Y.toLowerCase())=="x"?16:Y=="b"?2:8,U&&U!=$?W:F}),U&&($=U,q=q.replace(ie,"$1").replace(oe,"0.$1")),I!=q))return new X(q,$);if(X.DEBUG)throw Error(h+"Not a"+(U?" base "+U:"")+" number: "+I);A.c=A.e=A.s=null}},p.absoluteValue=p.abs=function(){var A=new X(this);return A.s<0&&(A.s=1),A},p.comparedTo=function(A,I){return x(this,new X(A,I))},p.decimalPlaces=p.dp=function(A,I){var N,U,$;if(A!=null)return _(A,0,v),I==null?I=T:_(I,0,8),Se(new X(this),A+this.e+1,I);if(!(N=this.c))return null;if(U=(($=N.length-1)-C(this.e/f))*f,$=N[$])for(;$%10==0;$/=10,U--);return U<0&&(U=0),U},p.dividedBy=p.div=function(A,I){return B(this,new X(A,I),y,T)},p.dividedToIntegerBy=p.idiv=function(A,I){return B(this,new X(A,I),0,1)},p.exponentiatedBy=p.pow=function(A,I){var N,U,$,q,W,F,Y,G,Z=this;if((A=new X(A)).c&&!A.isInteger())throw Error(h+"Exponent not an integer: "+_e(A));if(I!=null&&(I=new X(I)),W=14<A.e,!Z.c||!Z.c[0]||Z.c[0]==1&&!Z.e&&Z.c.length==1||!A.c||!A.c[0])return G=new X(Math.pow(+_e(Z),W?2-R(A):+_e(A))),I?G.mod(I):G;if(F=A.s<0,I){if(I.c?!I.c[0]:!I.s)return new X(NaN);(U=!F&&Z.isInteger()&&I.isInteger())&&(Z=Z.mod(I))}else{if(9<A.e&&(0<Z.e||Z.e<-1||(Z.e==0?1<Z.c[0]||W&&24e7<=Z.c[1]:Z.c[0]<8e13||W&&Z.c[0]<=9999975e7)))return q=Z.s<0&&R(A)?-0:0,-1<Z.e&&(q=1/q),new X(F?1/q:q);se&&(q=l(se/f+2))}for(Y=W?(N=new X(.5),F&&(A.s=1),R(A)):($=Math.abs(+_e(A)))%2,G=new X(b);;){if(Y){if(!(G=G.times(Z)).c)break;q?G.c.length>q&&(G.c.length=q):U&&(G=G.mod(I))}if($){if(($=c($/2))===0)break;Y=$%2}else if(Se(A=A.times(N),A.e+1,1),14<A.e)Y=R(A);else{if(($=+_e(A))==0)break;Y=$%2}Z=Z.times(Z),q?Z.c&&Z.c.length>q&&(Z.c.length=q):U&&(Z=Z.mod(I))}return U?G:(F&&(G=b.div(G)),I?G.mod(I):q?Se(G,se,T,void 0):G)},p.integerValue=function(A){var I=new X(this);return A==null?A=T:_(A,0,8),Se(I,I.e+1,A)},p.isEqualTo=p.eq=function(A,I){return x(this,new X(A,I))===0},p.isFinite=function(){return!!this.c},p.isGreaterThan=p.gt=function(A,I){return 0<x(this,new X(A,I))},p.isGreaterThanOrEqualTo=p.gte=function(A,I){return(I=x(this,new X(A,I)))===1||I===0},p.isInteger=function(){return!!this.c&&C(this.e/f)>this.c.length-2},p.isLessThan=p.lt=function(A,I){return x(this,new X(A,I))<0},p.isLessThanOrEqualTo=p.lte=function(A,I){return(I=x(this,new X(A,I)))===-1||I===0},p.isNaN=function(){return!this.s},p.isNegative=function(){return this.s<0},p.isPositive=function(){return 0<this.s},p.isZero=function(){return!!this.c&&this.c[0]==0},p.minus=function(A,I){var N,U,$,q,W=this,F=W.s;if(I=(A=new X(A,I)).s,!F||!I)return new X(NaN);if(F!=I)return A.s=-I,W.plus(A);var Y=W.e/f,G=A.e/f,Z=W.c,fe=A.c;if(!Y||!G){if(!Z||!fe)return Z?(A.s=-I,A):new X(fe?W:NaN);if(!Z[0]||!fe[0])return fe[0]?(A.s=-I,A):new X(Z[0]?W:T==3?-0:0)}if(Y=C(Y),G=C(G),Z=Z.slice(),F=Y-G){for(($=(q=F<0)?(F=-F,Z):(G=Y,fe)).reverse(),I=F;I--;$.push(0));$.reverse()}else for(U=(q=(F=Z.length)<(I=fe.length))?F:I,F=I=0;I<U;I++)if(Z[I]!=fe[I]){q=Z[I]<fe[I];break}if(q&&($=Z,Z=fe,fe=$,A.s=-A.s),0<(I=(U=fe.length)-(N=Z.length)))for(;I--;Z[N++]=0);for(I=d-1;F<U;){if(Z[--U]<fe[U]){for(N=U;N&&!Z[--N];Z[N]=I);--Z[N],Z[U]+=d}Z[U]-=fe[U]}for(;Z[0]==0;Z.splice(0,1),--G);return Z[0]?Be(A,Z,G):(A.s=T==3?-1:1,A.c=[A.e=0],A)},p.modulo=p.mod=function(A,I){var N,U,$=this;return A=new X(A,I),!$.c||!A.s||A.c&&!A.c[0]?new X(NaN):!A.c||$.c&&!$.c[0]?new X($):(he==9?(U=A.s,A.s=1,N=B($,A,0,3),A.s=U,N.s*=U):N=B($,A,0,he),(A=$.minus(N.times(A))).c[0]||he!=1||(A.s=$.s),A)},p.multipliedBy=p.times=function(A,I){var N,U,$,q,W,F,Y,G,Z,fe,Re,De,Qe,dt,it,We=this,pt=We.c,yn=(A=new X(A,I)).c;if(!(pt&&yn&&pt[0]&&yn[0]))return!We.s||!A.s||pt&&!pt[0]&&!yn||yn&&!yn[0]&&!pt?A.c=A.e=A.s=null:(A.s*=We.s,pt&&yn?(A.c=[0],A.e=0):A.c=A.e=null),A;for(U=C(We.e/f)+C(A.e/f),A.s*=We.s,(Y=pt.length)<(fe=yn.length)&&(Qe=pt,pt=yn,yn=Qe,$=Y,Y=fe,fe=$),$=Y+fe,Qe=[];$--;Qe.push(0));for(dt=d,it=w,$=fe;0<=--$;){for(N=0,Re=yn[$]%it,De=yn[$]/it|0,q=$+(W=Y);$<q;)N=((G=Re*(G=pt[--W]%it)+(F=De*G+(Z=pt[W]/it|0)*Re)%it*it+Qe[q]+N)/dt|0)+(F/it|0)+De*Z,Qe[q--]=G%dt;Qe[q]=N}return N?++U:Qe.splice(0,1),Be(A,Qe,U)},p.negated=function(){var A=new X(this);return A.s=-A.s||null,A},p.plus=function(A,I){var N,U=this,$=U.s;if(I=(A=new X(A,I)).s,!$||!I)return new X(NaN);if($!=I)return A.s=-I,U.minus(A);var q=U.e/f,W=A.e/f,F=U.c,Y=A.c;if(!q||!W){if(!F||!Y)return new X($/0);if(!F[0]||!Y[0])return Y[0]?A:new X(F[0]?U:0*$)}if(q=C(q),W=C(W),F=F.slice(),$=q-W){for((N=0<$?(W=q,Y):($=-$,F)).reverse();$--;N.push(0));N.reverse()}for(($=F.length)-(I=Y.length)<0&&(N=Y,Y=F,F=N,I=$),$=0;I;)$=(F[--I]=F[I]+Y[I]+$)/d|0,F[I]=d===F[I]?0:F[I]%d;return $&&(F=[$].concat(F),++W),Be(A,F,W)},p.precision=p.sd=function(A,I){var N,U,$;if(A!=null&&A!==!!A)return _(A,1,v),I==null?I=T:_(I,0,8),Se(new X(this),A,I);if(!(N=this.c))return null;if(U=($=N.length-1)*f+1,$=N[$]){for(;$%10==0;$/=10,U--);for($=N[0];10<=$;$/=10,U++);}return A&&this.e+1>U&&(U=this.e+1),U},p.shiftedBy=function(A){return _(A,-g,g),this.times("1e"+A)},p.squareRoot=p.sqrt=function(){var A,I,N,U,$,q=this,W=q.c,F=q.s,Y=q.e,G=y+4,Z=new X("0.5");if(F!==1||!W||!W[0])return new X(!F||F<0&&(!W||W[0])?NaN:W?q:1/0);if((N=(F=Math.sqrt(+_e(q)))==0||F==1/0?(((I=S(W)).length+Y)%2==0&&(I+="0"),F=Math.sqrt(+I),Y=C((Y+1)/2)-(Y<0||Y%2),new X(I=F==1/0?"1e"+Y:(I=F.toExponential()).slice(0,I.indexOf("e")+1)+Y)):new X(F+"")).c[0]){for((F=(Y=N.e)+G)<3&&(F=0);;)if($=N,N=Z.times($.plus(B(q,$,G,1))),S($.c).slice(0,F)===(I=S(N.c)).slice(0,F)){if(N.e<Y&&--F,(I=I.slice(F-3,F+1))!="9999"&&(U||I!="4999")){+I&&(+I.slice(1)||I.charAt(0)!="5")||(Se(N,N.e+y+2,1),A=!N.times(N).eq(q));break}if(!U&&(Se($,$.e+y+2,0),$.times($).eq(q))){N=$;break}G+=4,F+=4,U=1}}return Se(N,N.e+y+1,T,A)},p.toExponential=function(A,I){return A!=null&&(_(A,0,v),A++),re(this,A,I,1)},p.toFixed=function(A,I){return A!=null&&(_(A,0,v),A=A+this.e+1),re(this,A,I)},p.toFormat=function(A,I,N){var U;if(N==null)A!=null&&I&&typeof I=="object"?(N=I,I=null):A&&typeof A=="object"?(N=A,A=I=null):N=Ie;else if(typeof N!="object")throw Error(h+"Argument not an object: "+N);if(U=this.toFixed(A,I),this.c){var $,q=U.split("."),W=+N.groupSize,F=+N.secondaryGroupSize,Y=N.groupSeparator||"",G=q[0],Z=q[1],fe=this.s<0,Re=fe?G.slice(1):G,De=Re.length;if(F&&($=W,W=F,De-=F=$),0<W&&0<De){for($=De%W||W,G=Re.substr(0,$);$<De;$+=W)G+=Y+Re.substr($,W);0<F&&(G+=Y+Re.slice($)),fe&&(G="-"+G)}U=Z?G+(N.decimalSeparator||"")+((F=+N.fractionGroupSize)?Z.replace(new RegExp("\\d{"+F+"}\\B","g"),"$&"+(N.fractionGroupSeparator||"")):Z):G}return(N.prefix||"")+U+(N.suffix||"")},p.toFraction=function(A){var I,N,U,$,q,W,F,Y,G,Z,fe,Re,De=this,Qe=De.c;if(A!=null&&(!(F=new X(A)).isInteger()&&(F.c||F.s!==1)||F.lt(b)))throw Error(h+"Argument "+(F.isInteger()?"out of range: ":"not an integer: ")+_e(F));if(!Qe)return new X(De);for(I=new X(b),G=N=new X(b),U=Y=new X(b),Re=S(Qe),q=I.e=Re.length-De.e-1,I.c[0]=m[(W=q%f)<0?f+W:W],A=!A||0<F.comparedTo(I)?0<q?I:G:F,W=K,K=1/0,F=new X(Re),Y.c[0]=0;Z=B(F,I,0,1),($=N.plus(Z.times(U))).comparedTo(A)!=1;)N=U,U=$,G=Y.plus(Z.times($=G)),Y=$,I=F.minus(Z.times($=I)),F=$;return $=B(A.minus(N),U,0,1),Y=Y.plus($.times(G)),N=N.plus($.times(U)),Y.s=G.s=De.s,fe=B(G,U,q*=2,T).minus(De).abs().comparedTo(B(Y,N,q,T).minus(De).abs())<1?[G,U]:[Y,N],K=W,fe},p.toNumber=function(){return+_e(this)},p.toPrecision=function(A,I){return A!=null&&_(A,1,v),re(this,A,I,2)},p.toString=function(A){var I,N=this,U=N.s,$=N.e;return $===null?U?(I="Infinity",U<0&&(I="-"+I)):I="NaN":(I=A==null?$<=H||E<=$?M(S(N.c),$):O(S(N.c),$,"0"):A===10?O(S((N=Se(new X(N),y+$+1,T)).c),N.e,"0"):(_(A,2,xe.length,"Base"),z(O(S(N.c),$,"0"),10,A,U,!0)),U<0&&N.c[0]&&(I="-"+I)),I},p.valueOf=p.toJSON=function(){return _e(this)},p._isBigNumber=!0,typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(p[Symbol.toStringTag]="BigNumber",p[Symbol.for("nodejs.util.inspect.custom")]=p.valueOf),k!=null&&X.set(k),X}()).default=o.BigNumber=o,i!==void 0&&i.exports?i.exports=o:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=o)})(this)},{}],2:[function(t,i,s){i.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(r){var o=r%10;return~~(r%100/10)==1?"th":o===1?"st":o===2?"nd":o===3?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,i,s){function r(C,S){return function(x){if(Array.isArray(x))return x}(C)||function(x,_){var R=[],M=!0,O=!1,P=void 0;try{for(var k,B=x[Symbol.iterator]();!(M=(k=B.next()).done)&&(R.push(k.value),!_||R.length!==_);M=!0);}catch(z){O=!0,P=z}finally{try{M||B.return==null||B.return()}finally{if(O)throw P}}return R}(C,S)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=t("./globalState"),a=t("./validating"),l=t("./parsing"),c=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],h={general:{scale:1024,suffixes:c,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:c,marker:"d"}},u={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};function d(C){var S=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},x=2<arguments.length?arguments[2]:void 0;if(typeof S=="string"&&(S=l.parseFormat(S)),!a.validateFormat(S))return"ERROR: invalid format";var _=S.prefix||"",R=S.postfix||"",M=function(O,P,k){switch(P.output){case"currency":return P=v(P,o.currentCurrencyDefaultFormat()),function(xe,X,re){var ce=re.currentCurrency(),Be=Object.assign({},u,X),Se=void 0,_e="",A=!!Be.totalLength||!!Be.forceAverage||Be.average,I=X.currencyPosition||ce.position,N=X.currencySymbol||ce.symbol;Be.spaceSeparated&&(_e=" "),I==="infix"&&(Se=_e+N+_e);var U=w({instance:xe,providedFormat:X,state:re,decimalSeparator:Se});return I==="prefix"&&(U=xe._value<0&&Be.negative==="sign"?"-".concat(_e).concat(N).concat(U.slice(1)):N+_e+U),I&&I!=="postfix"||(U=U+(_e=A?"":_e)+N),U}(O,P,o);case"percent":return P=v(P,o.currentPercentageDefaultFormat()),function(xe,X,re,ce){var Be=X.prefixSymbol,Se=w({instance:ce(100*xe._value),providedFormat:X,state:re}),_e=Object.assign({},u,X);return Be?"%".concat(_e.spaceSeparated?" ":"").concat(Se):"".concat(Se).concat(_e.spaceSeparated?" ":"","%")}(O,P,o,k);case"byte":return P=v(P,o.currentByteDefaultFormat()),b=O,T=o,H=k,E=(y=P).base||"binary",D=h[E],K=f(b._value,D.suffixes,D.scale),ee=K.value,he=K.suffix,se=w({instance:H(ee),providedFormat:y,state:T,defaults:T.currentByteDefaultFormat()}),Ie=T.currentAbbreviations(),"".concat(se).concat(Ie.spaced?" ":"").concat(he);case"time":return P=v(P,o.currentTimeDefaultFormat()),oe=O,J=Math.floor(oe._value/60/60),pe=Math.floor((oe._value-60*J*60)/60),p=Math.round(oe._value-60*J*60-60*pe),"".concat(J,":").concat(pe<10?"0":"").concat(pe,":").concat(p<10?"0":"").concat(p);case"ordinal":return P=v(P,o.currentOrdinalDefaultFormat()),B=O,z=P,te=(Q=o).currentOrdinal(),ne=Object.assign({},u,z),j=w({instance:B,providedFormat:z,state:Q}),ie=te(B._value),"".concat(j).concat(ne.spaceSeparated?" ":"").concat(ie);case"number":default:return w({instance:O,providedFormat:P,numbro:k})}var B,z,Q,te,ne,j,ie,oe,J,pe,p,b,y,T,H,E,D,K,ee,he,se,Ie}(C,S,x);return M=(M=_+M)+R}function f(C,S,x){var _=S[0],R=Math.abs(C);if(x<=R){for(var M=1;M<S.length;++M){var O=Math.pow(x,M),P=Math.pow(x,M+1);if(O<=R&&R<P){_=S[M],C/=O;break}}_===S[0]&&(C/=Math.pow(x,S.length-1),_=S[S.length-1])}return{value:C,suffix:_}}function g(C){for(var S="",x=0;x<C;x++)S+="0";return S}function m(C,S){return C.toString().indexOf("e")!==-1?function(x,_){var R=x.toString(),M=r(R.split("e"),2),O=M[0],P=M[1],k=r(O.split("."),2),B=k[0],z=k[1],Q=z===void 0?"":z;if(0<+P)R=B+Q+g(P-Q.length);else{var te=".";te=+B<0?"-0".concat(te):"0".concat(te);var ne=(g(-P-1)+Math.abs(B)+Q).substr(0,_);ne.length<_&&(ne+=g(_-ne.length)),R=te+ne}return 0<+P&&0<_&&(R+=".".concat(g(_))),R}(C,S):(Math.round(+"".concat(C,"e+").concat(S))/Math.pow(10,S)).toFixed(S)}function w(C){var S=C.instance,x=C.providedFormat,_=C.state,R=_===void 0?o:_,M=C.decimalSeparator,O=C.defaults,P=O===void 0?R.currentDefaults():O,k=S._value;if(k===0&&R.hasZeroFormat())return R.getZeroFormat();if(!isFinite(k))return k.toString();var B,z,Q,te,ne,j,ie,oe,J=Object.assign({},u,P,x),pe=J.totalLength,p=pe?0:J.characteristic,b=J.optionalCharacteristic,y=J.forceAverage,T=!!pe||!!y||J.average,H=pe?-1:T&&x.mantissa===void 0?0:J.mantissa,E=!pe&&(x.optionalMantissa===void 0?H===-1:J.optionalMantissa),D=J.trimMantissa,K=J.thousandSeparated,ee=J.spaceSeparated,he=J.negative,se=J.forceSign,Ie=J.exponential,xe="";if(T){var X=function(A){var I=A.value,N=A.forceAverage,U=A.abbreviations,$=A.spaceSeparated,q=$!==void 0&&$,W=A.totalLength,F=W===void 0?0:W,Y="",G=Math.abs(I),Z=-1;if(G>=Math.pow(10,12)&&!N||N==="trillion"?(Y=U.trillion,I/=Math.pow(10,12)):G<Math.pow(10,12)&&G>=Math.pow(10,9)&&!N||N==="billion"?(Y=U.billion,I/=Math.pow(10,9)):G<Math.pow(10,9)&&G>=Math.pow(10,6)&&!N||N==="million"?(Y=U.million,I/=Math.pow(10,6)):(G<Math.pow(10,6)&&G>=Math.pow(10,3)&&!N||N==="thousand")&&(Y=U.thousand,I/=Math.pow(10,3)),Y&&(Y=(q?" ":"")+Y),F){var fe=I.toString().split(".")[0];Z=Math.max(F-fe.length,0)}return{value:I,abbreviation:Y,mantissaPrecision:Z}}({value:k,forceAverage:y,abbreviations:R.currentAbbreviations(),spaceSeparated:ee,totalLength:pe});k=X.value,xe+=X.abbreviation,pe&&(H=X.mantissaPrecision)}if(Ie){var re=(z=(B={value:k,characteristicPrecision:p}).value,Q=B.characteristicPrecision,te=Q===void 0?0:Q,ne=r(z.toExponential().split("e"),2),j=ne[0],ie=ne[1],oe=+j,te&&1<te&&(oe*=Math.pow(10,te-1),ie=0<=(ie=+ie-(te-1))?"+".concat(ie):ie),{value:oe,abbreviation:"e".concat(ie)});k=re.value,xe=re.abbreviation+xe}var ce,Be,Se,_e=function(A,I,N,U,$){if(U===-1)return A;var q=m(I,U),W=r(q.toString().split("."),2),F=W[0],Y=W[1],G=Y===void 0?"":Y;if(G.match(/^0+$/)&&(N||$))return F;var Z=G.match(/0+$/);return $&&Z?"".concat(F,".").concat(G.toString().slice(0,Z.index)):q.toString()}(k.toString(),k,E,H,D);return _e=function(A,I,N,U,$){var q=U.currentDelimiters(),W=q.thousands;$=$||q.decimal;var F=q.thousandsSize||3,Y=A.toString(),G=Y.split(".")[0],Z=Y.split(".")[1];return N&&(I<0&&(G=G.slice(1)),function(fe,Re){for(var De=[],Qe=0,dt=fe;0<dt;dt--)Qe===Re&&(De.unshift(dt),Qe=0),Qe++;return De}(G.length,F).forEach(function(fe,Re){G=G.slice(0,fe+Re)+W+G.slice(fe+Re)}),I<0&&(G="-".concat(G))),Y=Z?G+$+Z:G}(_e=function(A,I,N,U){var $=A,q=r($.toString().split("."),2),W=q[0],F=q[1];if(W.match(/^-?0$/)&&N)return F?"".concat(W.replace("0",""),".").concat(F):W.replace("0","");if(W.length<U)for(var Y=U-W.length,G=0;G<Y;G++)$="0".concat($);return $.toString()}(_e,0,b,p),k,K,R,M),(T||Ie)&&(_e=_e+xe),(se||k<0)&&(ce=_e,Se=he,_e=(Be=k)===0?ce:+ce==0?ce.replace("-",""):0<Be?"+".concat(ce):Se==="sign"?ce:"(".concat(ce.replace("-",""),")")),_e}function v(C,S){if(!C)return S;var x=Object.keys(C);return x.length===1&&x[0]==="output"?S:C}i.exports=function(C){return{format:function(){for(var S=arguments.length,x=new Array(S),_=0;_<S;_++)x[_]=arguments[_];return d.apply(void 0,x.concat([C]))},getByteUnit:function(){for(var S=arguments.length,x=new Array(S),_=0;_<S;_++)x[_]=arguments[_];return(function(R){var M=h.general;return f(R._value,M.suffixes,M.scale).suffix}).apply(void 0,x.concat([C]))},getBinaryByteUnit:function(){for(var S=arguments.length,x=new Array(S),_=0;_<S;_++)x[_]=arguments[_];return(function(R){var M=h.binary;return f(R._value,M.suffixes,M.scale).suffix}).apply(void 0,x.concat([C]))},getDecimalByteUnit:function(){for(var S=arguments.length,x=new Array(S),_=0;_<S;_++)x[_]=arguments[_];return(function(R){var M=h.decimal;return f(R._value,M.suffixes,M.scale).suffix}).apply(void 0,x.concat([C]))},formatOrDefault:v}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,i,s){var r=t("./en-US"),o=t("./validating"),a=t("./parsing"),l={},c=void 0,h={},u=null,d={};function f(m){c=m}function g(){return h[c]}l.languages=function(){return Object.assign({},h)},l.currentLanguage=function(){return c},l.currentCurrency=function(){return g().currency},l.currentAbbreviations=function(){return g().abbreviations},l.currentDelimiters=function(){return g().delimiters},l.currentOrdinal=function(){return g().ordinal},l.currentDefaults=function(){return Object.assign({},g().defaults,d)},l.currentOrdinalDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().ordinalFormat)},l.currentByteDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().byteFormat)},l.currentPercentageDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().percentageFormat)},l.currentCurrencyDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().currencyFormat)},l.currentTimeDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().timeFormat)},l.setDefaults=function(m){m=a.parseFormat(m),o.validateFormat(m)&&(d=m)},l.getZeroFormat=function(){return u},l.setZeroFormat=function(m){return u=typeof m=="string"?m:null},l.hasZeroFormat=function(){return u!==null},l.languageData=function(m){if(m){if(h[m])return h[m];throw new Error('Unknown tag "'.concat(m,'"'))}return g()},l.registerLanguage=function(m){var w=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(!o.validateLanguage(m))throw new Error("Invalid language data");h[m.languageTag]=m,w&&f(m.languageTag)},l.setLanguage=function(m){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:r.languageTag;if(!h[m]){var v=m.split("-")[0],C=Object.keys(h).find(function(S){return S.split("-")[0]===v});return h[C]?void f(C):void f(w)}f(m)},l.registerLanguage(r),c=r.languageTag,i.exports=l},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,i,s){i.exports=function(r){return{loadLanguagesInNode:function(o){return a=r,void o.forEach(function(l){var c=void 0;try{c=t("../languages/".concat(l))}catch{console.error('Unable to load "'.concat(l,'". No matching language file found.'))}c&&a.registerLanguage(c)});var a}}}},{}],6:[function(t,i,s){var r=t("bignumber.js");function o(a,l,c){var h=new r(a._value),u=l;return c.isNumbro(l)&&(u=l._value),u=new r(u),a._value=h.minus(u).toNumber(),a}i.exports=function(a){return{add:function(l,c){return u=c,d=a,f=new r((h=l)._value),g=u,d.isNumbro(u)&&(g=u._value),g=new r(g),h._value=f.plus(g).toNumber(),h;var h,u,d,f,g},subtract:function(l,c){return o(l,c,a)},multiply:function(l,c){return u=c,d=a,f=new r((h=l)._value),g=u,d.isNumbro(u)&&(g=u._value),g=new r(g),h._value=f.times(g).toNumber(),h;var h,u,d,f,g},divide:function(l,c){return u=c,d=a,f=new r((h=l)._value),g=u,d.isNumbro(u)&&(g=u._value),g=new r(g),h._value=f.dividedBy(g).toNumber(),h;var h,u,d,f,g},set:function(l,c){return h=l,d=u=c,a.isNumbro(u)&&(d=u._value),h._value=d,h;var h,u,d},difference:function(l,c){return h=c,o(d=(u=a)(l._value),h,u),Math.abs(d._value);var h,u,d}}}},{"bignumber.js":1}],7:[function(t,i,s){function r(w,v){for(var C=0;C<v.length;C++){var S=v[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}var o=t("./globalState"),a=t("./validating"),l=t("./loading")(m),c=t("./unformatting"),h=t("./formatting")(m),u=t("./manipulating")(m),d=t("./parsing"),f=function(){function w(S){(function(x,_){if(!(x instanceof _))throw new TypeError("Cannot call a class as a function")})(this,w),this._value=S}var v,C;return v=w,(C=[{key:"clone",value:function(){return m(this._value)}},{key:"format",value:function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return h.format(this,S)}},{key:"formatCurrency",value:function(S){return typeof S=="string"&&(S=d.parseFormat(S)),(S=h.formatOrDefault(S,o.currentCurrencyDefaultFormat())).output="currency",h.format(this,S)}},{key:"formatTime",value:function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return S.output="time",h.format(this,S)}},{key:"binaryByteUnits",value:function(){return h.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return h.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return h.getByteUnit(this)}},{key:"difference",value:function(S){return u.difference(this,S)}},{key:"add",value:function(S){return u.add(this,S)}},{key:"subtract",value:function(S){return u.subtract(this,S)}},{key:"multiply",value:function(S){return u.multiply(this,S)}},{key:"divide",value:function(S){return u.divide(this,S)}},{key:"set",value:function(S){return u.set(this,g(S))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}])&&r(v.prototype,C),w}();function g(w){var v=w;return m.isNumbro(w)?v=w._value:typeof w=="string"?v=m.unformat(w):isNaN(w)&&(v=NaN),v}function m(w){return new f(g(w))}m.version="2.1.2",m.isNumbro=function(w){return w instanceof f},m.language=o.currentLanguage,m.registerLanguage=o.registerLanguage,m.setLanguage=o.setLanguage,m.languages=o.languages,m.languageData=o.languageData,m.zeroFormat=o.setZeroFormat,m.defaultFormat=o.currentDefaults,m.setDefaults=o.setDefaults,m.defaultCurrencyFormat=o.currentCurrencyDefaultFormat,m.validate=a.validate,m.loadLanguagesInNode=l.loadLanguagesInNode,m.unformat=c.unformat,i.exports=m},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,i,s){i.exports={parseFormat:function(r){var o,a,l,c,h,u,d,f,g,m,w,v,C,S,x,_,R,M,O,P,k=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return typeof r!="string"?r:(a=k,r=(l=(o=r).match(/^{([^}]*)}/))?(a.prefix=l[1],o.slice(l[0].length)):o,h=k,function(B,z){if(B.indexOf("$")===-1){if(B.indexOf("%")===-1)return B.indexOf("bd")!==-1?(z.output="byte",z.base="general"):B.indexOf("b")!==-1?(z.output="byte",z.base="binary"):B.indexOf("d")!==-1?(z.output="byte",z.base="decimal"):B.indexOf(":")===-1?B.indexOf("o")!==-1&&(z.output="ordinal"):z.output="time";z.output="percent"}else z.output="currency"}(r=(u=(c=r).match(/{([^}]*)}$/))?(h.postfix=u[1],c.slice(0,-u[0].length)):c,k),d=k,(f=r.match(/[1-9]+[0-9]*/))&&(d.totalLength=+f[0]),g=k,(m=r.split(".")[0].match(/0+/))&&(g.characteristic=m[0].length),function(B,z){if(B.indexOf(".")!==-1){var Q=B.split(".")[0];z.optionalCharacteristic=Q.indexOf("0")===-1}}(r,k),w=k,r.indexOf("a")!==-1&&(w.average=!0),C=k,(v=r).indexOf("K")!==-1?C.forceAverage="thousand":v.indexOf("M")!==-1?C.forceAverage="million":v.indexOf("B")!==-1?C.forceAverage="billion":v.indexOf("T")!==-1&&(C.forceAverage="trillion"),function(B,z){var Q=B.split(".")[1];if(Q){var te=Q.match(/0+/);te&&(z.mantissa=te[0].length)}}(r,k),x=k,(S=r).match(/\[\.]/)?x.optionalMantissa=!0:S.match(/\./)&&(x.optionalMantissa=!1),_=k,r.indexOf(",")!==-1&&(_.thousandSeparated=!0),R=k,r.indexOf(" ")!==-1&&(R.spaceSeparated=!0),O=k,(M=r).match(/^\+?\([^)]*\)$/)&&(O.negative="parenthesis"),M.match(/^\+?-/)&&(O.negative="sign"),P=k,r.match(/^\+/)&&(P.forceSign=!0),k)}}},{}],9:[function(t,i,s){var r=[{key:"ZiB",factor:Math.pow(1024,7)},{key:"ZB",factor:Math.pow(1e3,7)},{key:"YiB",factor:Math.pow(1024,8)},{key:"YB",factor:Math.pow(1e3,8)},{key:"TiB",factor:Math.pow(1024,4)},{key:"TB",factor:Math.pow(1e3,4)},{key:"PiB",factor:Math.pow(1024,5)},{key:"PB",factor:Math.pow(1e3,5)},{key:"MiB",factor:Math.pow(1024,2)},{key:"MB",factor:Math.pow(1e3,2)},{key:"KiB",factor:Math.pow(1024,1)},{key:"KB",factor:Math.pow(1e3,1)},{key:"GiB",factor:Math.pow(1024,3)},{key:"GB",factor:Math.pow(1e3,3)},{key:"EiB",factor:Math.pow(1024,6)},{key:"EB",factor:Math.pow(1e3,6)},{key:"B",factor:1}];function o(l){return l.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(l,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",u=3<arguments.length?arguments[3]:void 0,d=4<arguments.length?arguments[4]:void 0,f=5<arguments.length?arguments[5]:void 0,g=6<arguments.length?arguments[6]:void 0;if(l!=="")return l===d?0:function m(w,v){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",S=3<arguments.length?arguments[3]:void 0,x=4<arguments.length?arguments[4]:void 0,_=5<arguments.length?arguments[5]:void 0,R=6<arguments.length?arguments[6]:void 0;if(!isNaN(+w))return+w;var M="",O=w.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(O!==w)return-1*m(O,v,C,S,x,_,R);for(var P=0;P<r.length;P++){var k=r[P];if((M=w.replace(k.key,""))!==w)return m(M,v,C,S,x,_,R)*k.factor}if((M=w.replace("%",""))!==w)return m(M,v,C,S,x,_,R)/100;var B=parseFloat(w);if(!isNaN(B)){var z=S(B);if(z&&z!=="."&&(M=w.replace(new RegExp("".concat(o(z),"$")),""))!==w)return m(M,v,C,S,x,_,R);var Q={};Object.keys(_).forEach(function(pe){Q[_[pe]]=pe});for(var te=Object.keys(Q).sort().reverse(),ne=te.length,j=0;j<ne;j++){var ie=te[j],oe=Q[ie];if((M=w.replace(ie,""))!==w){var J=void 0;switch(oe){case"thousand":J=Math.pow(10,3);break;case"million":J=Math.pow(10,6);break;case"billion":J=Math.pow(10,9);break;case"trillion":J=Math.pow(10,12)}return m(M,v,C,S,x,_,R)*J}}}}(function(m,w){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",C=m.replace(v,"");return C=(C=C.replace(new RegExp("([0-9])".concat(o(w.thousands),"([0-9])"),"g"),"$1$2")).replace(w.decimal,".")}(l,c,h),c,h,u,d,f,g)}i.exports={unformat:function(l,c){var h,u,d,f=t("./globalState"),g=f.currentDelimiters(),m=f.currentCurrency().symbol,w=f.currentOrdinal(),v=f.getZeroFormat(),C=f.currentAbbreviations(),S=void 0;if(typeof l=="string")S=function(x,_){if(!x.indexOf(":")||_.thousands===":")return!1;var R=x.split(":");if(R.length!==3)return!1;var M=+R[0],O=+R[1],P=+R[2];return!isNaN(M)&&!isNaN(O)&&!isNaN(P)}(l,g)?(h=l.split(":"),u=+h[0],d=+h[1],+h[2]+60*d+3600*u):a(l,g,m,w,v,C,c);else{if(typeof l!="number")return;S=l}if(S!==void 0)return S}}},{"./globalState":4}],10:[function(t,i,s){function r(g){return function(m){if(Array.isArray(m)){for(var w=0,v=new Array(m.length);w<m.length;w++)v[w]=m[w];return v}}(g)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}var a=t("./unformatting"),l=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,c={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(g,m){return m.output==="byte"},message:"`base` must be provided only when the output is `byte`",mandatory:function(g){return g.output==="byte"}},characteristic:{type:"number",restriction:function(g){return 0<=g},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(g){return 0<=g},message:"value must be positive"},{restriction:function(g,m){return!m.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(g){return 0<=g},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(g,m){return m.output==="percent"},message:"`prefixSymbol` can be provided only when the output is `percent`"}},h={languageTag:{type:"string",mandatory:!0,restriction:function(g){return g.match(l)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function u(g){return!!a.unformat(g)}function d(g,m,w){var v=3<arguments.length&&arguments[3]!==void 0&&arguments[3],C=Object.keys(g).map(function(S){if(!m[S])return console.error("".concat(w," Invalid key: ").concat(S)),!1;var x=g[S],_=m[S];if(typeof _=="string"&&(_={type:_}),_.type==="format"){if(!d(x,c,"[Validate ".concat(S,"]"),!0))return!1}else if(o(x)!==_.type)return console.error("".concat(w," ").concat(S,' type mismatched: "').concat(_.type,'" expected, "').concat(o(x),'" provided')),!1;if(_.restrictions&&_.restrictions.length)for(var R=_.restrictions.length,M=0;M<R;M++){var O=_.restrictions[M],P=O.restriction,k=O.message;if(!P(x,g))return console.error("".concat(w," ").concat(S," invalid value: ").concat(k)),!1}return _.restriction&&!_.restriction(x,g)?(console.error("".concat(w," ").concat(S," invalid value: ").concat(_.message)),!1):_.validValues&&_.validValues.indexOf(x)===-1?(console.error("".concat(w," ").concat(S," invalid value: must be among ").concat(JSON.stringify(_.validValues),', "').concat(x,'" provided')),!1):!(_.children&&!d(x,_.children,"[Validate ".concat(S,"]")))});return v||C.push.apply(C,r(Object.keys(m).map(function(S){var x=m[S];if(typeof x=="string"&&(x={type:x}),x.mandatory){var _=x.mandatory;if(typeof _=="function"&&(_=_(g)),_&&g[S]===void 0)return console.error("".concat(w,' Missing mandatory key "').concat(S,'"')),!1}return!0}))),C.reduce(function(S,x){return S&&x},!0)}function f(g){return d(g,c,"[Validate format]")}i.exports={validate:function(g,m){var w=u(g),v=f(m);return w&&v},validateFormat:f,validateInput:u,validateLanguage:function(g){return d(g,h,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)})})(AG);var rSe=AG.exports;const Sh=fee(rSe),oSe="numeric";function PG(n,e){if(Li(n)){const t=e.numericFormat,i=t&&t.culture||"-",s=t&&t.pattern;if(typeof i<"u"&&!Sh.languages()[i]){const r=i.replace("-",""),o=Sh.allLanguages?Sh.allLanguages[i]:Sh[r];o&&Sh.registerLanguage(o)}Sh.setLanguage(i),n=Sh(n).format(s||"0")}return n}function TO(n,e,t,i,s,r,o){let a=r;if(Li(a)){const l=o.className||"",c=l.length?l.split(" "):[];a=PG(a,o),c.indexOf("htLeft")<0&&c.indexOf("htCenter")<0&&c.indexOf("htRight")<0&&c.indexOf("htJustify")<0&&c.push("htRight"),c.indexOf("htNumeric")<0&&c.push("htNumeric"),o.className=c.join(" "),e.dir="ltr"}Nl(n,e,t,i,s,a,o)}TO.RENDERER_TYPE=oSe;const aSe="password";function MO(n,e,t,i,s,r,o){Nl.apply(this,[n,e,t,i,s,r,o]);const a=o.hashLength||e.innerHTML.length,l=o.hashSymbol||"*";let c="";ke(a-1,()=>{c+=l}),od(e,c)}MO.RENDERER_TYPE=aSe;const lSe="select";function AO(n,e,t,i,s,r,o){Nl.apply(this,[n,e,t,i,s,r,o])}AO.RENDERER_TYPE=lSe;const cSe="time";function PO(n,e,t,i,s,r,o){Nl.apply(this,[n,e,t,i,s,r,o]),e.dir="ltr"}PO.RENDERER_TYPE=cSe;function hSe(){Is(fg),Is(nv),Is(RO),Is(_O),Is(EO),Is(SO),Is(TO),Is(MO),Is(AO),Is(Nl),Is(PO)}const uSe="autocomplete";function a_(n,e){let t=n;if(t==null&&(t=""),this.allowEmpty&&t===""){e(!0);return}this.strict&&this.source?typeof this.source=="function"?this.source(t,F$(t,e)):F$(t,e)(this.source):e(!0)}a_.VALIDATOR_TYPE=uSe;function F$(n,e){const t=n;return function(i){let s=!1;for(let r=0,o=i.length;r<o;r++)if(t===i[r]){s=!0;break}e(s)}}function IG(n){const e=new Date(n);return isNaN(new Date(`${n}T00:00`).getDate())?e:new Date(e.getTime()+e.getTimezoneOffset()*6e4)}const dSe=Object.freeze(Object.defineProperty({__proto__:null,getNormalizedDate:IG},Symbol.toStringTag,{value:"Module"})),fSe="date";function IO(n,e){const t=mY(SG,this.instance);let i=n,s=!0;i==null&&(i="");let r=le(i,this.dateFormat||t.defaultDateFormat,!0).isValid(),o=le(new Date(i)).isValid()||r;if(this.allowEmpty&&i===""&&(o=!0,r=!0),o||(s=!1),!o&&r&&(s=!0),o&&!r)if(this.correctFormat===!0){const a=gSe(i,this.dateFormat);this.instance.setDataAtCell(this.visualRow,this.visualCol,a,"dateValidator"),s=!0}else s=!1;e(s)}IO.VALIDATOR_TYPE=fSe;function gSe(n,e){const t=le(IG(n)),i=le(n,e),s=n.search(/[A-z]/g)>-1;let r;return t.isValid()&&t.format("x")===i.format("x")||!i.isValid()||s?r=t:r=i,r.format(e)}const mSe="dropdown";function OO(n,e){a_.apply(this,[n,e])}OO.VALIDATOR_TYPE=mSe;const pSe="numeric";function kO(n,e){let t=n;t==null&&(t=""),this.allowEmpty&&t===""?e(!0):e(t===""?!1:Li(n))}kO.VALIDATOR_TYPE=pSe;const wSe=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"],vSe="time";function HO(n,e){const t=this.timeFormat||"h:mm:ss a";let i=!0,s=n;s===null&&(s=""),s=/^\d{3,}$/.test(s)?parseInt(s,10):s;const r=/^\d{1,2}$/.test(s);r&&(s+=":00");const o=le(s,wSe,!0).isValid()?le(s):le(s,t);let a=o.isValid(),l=le(s,t,!0).isValid()&&!r;if(this.allowEmpty&&s===""&&(a=!0,l=!0),a||(i=!1),!a&&l&&(i=!0),a&&!l)if(this.correctFormat===!0){const c=o.format(t);this.instance.setDataAtCell(this.visualRow,this.visualCol,c,"timeValidator"),i=!0}else i=!1;e(i)}HO.VALIDATOR_TYPE=vSe;function bSe(){au(a_),au(OO),au(IO),au(kO),au(HO)}const ySe="autocomplete",CSe={CELL_TYPE:ySe,editor:bO,renderer:fg,validator:a_},SSe="checkbox",_Se={CELL_TYPE:SSe,editor:CG,renderer:RO},RSe="date";function OG(n,e,t,i,s,r,o){fg.apply(this,[n,e,t,i,s,r,o])}OG.RENDERER_TYPE=RSe;const xSe="date",ESe={CELL_TYPE:xSe,editor:_G,renderer:OG,validator:IO},TSe="dropdown",MSe={CELL_TYPE:TSe,editor:CO,renderer:_O,validator:OO},ASe="handsontable",PSe={CELL_TYPE:ASe,editor:vO,renderer:EO},ISe="numeric",OSe={CELL_TYPE:ISe,editor:RG,renderer:TO,validator:kO,dataType:"number"},kSe="password",HSe={CELL_TYPE:kSe,editor:xG,renderer:MO,copyable:!1},DSe="select",NSe={CELL_TYPE:DSe,editor:EG,renderer:AO},LSe="time",$Se={CELL_TYPE:LSe,editor:TG,renderer:PO,validator:HO};function FSe(){cr(CSe),cr(_Se),cr(ESe),cr(MSe),cr(PSe),cr(OSe),cr(HSe),cr(NSe),cr(yG),cr($Se)}function BSe(n,e){kG(n,e),e.add(n)}function VSe(n,e,t){kG(n,e),e.set(n,t)}function kG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ad(n,e,t){return(e=WSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WSe(n){var e=jSe(n,"string");return typeof e=="symbol"?e:e+""}function jSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Pd(n,e){return n.get(HG(n,e))}function HG(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const B$=new Map([["plugin",Gge],["cell-type",uG],["editor",gY],["renderer",SY],["validator",_Y]]),zSe="base",Ox=[];let Eo=null;var _h=new WeakMap,V$=new WeakSet;class xt{static get PLUGIN_KEY(){return zSe}static get SETTING_KEYS(){return[this.PLUGIN_KEY]}constructor(e){BSe(this,V$),Ad(this,"eventManager",new Er(this)),Ad(this,"pluginName",null),Ad(this,"pluginsInitializedCallbacks",[]),Ad(this,"isPluginsReady",!1),Ad(this,"enabled",!1),Ad(this,"initialized",!1),VSe(this,_h,{}),Ra(this,"hot",e,{writable:!1}),Eo=null,this.hot.addHook("afterPluginsInitialized",()=>this.onAfterPluginsInitialized()),this.hot.addHook("afterUpdateSettings",t=>this.onUpdateSettings(t)),this.hot.addHook("beforeInit",()=>this.init())}init(){this.pluginName=this.hot.getPluginName(this);const e=this.constructor.PLUGIN_DEPS,t=Array.isArray(e)?e:[];if(t.length>0){const s=[];if(t.forEach(r=>{const[o,a]=r.split(":");if(!B$.has(o))throw new Error(`Unknown plugin dependency type "${o}" was found.`);B$.get(o)(a)||s.push(` - ${a} (${o})`)}),s.length>0){const r=[`The ${this.pluginName} plugin requires the following modules:
`,`${s.join(`
`)}
`].join("");Ox.push(r)}}if(Eo||(Eo=MP()),Eo.indexOf("UndoRedo")>=0&&Eo.splice(Eo.indexOf("UndoRedo"),1),Eo.indexOf(this.pluginName)>=0&&Eo.splice(Eo.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",()=>{this.isEnabled&&this.isEnabled()&&this.enablePlugin()}),Eo.length===0){if(Ox.length>0){const s=[`${Ox.join(`
`)}
`,"You have to import and register them manually."].join("");throw new Error(s)}this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}enablePlugin(){this.enabled=!0}disablePlugin(){var e;(e=this.eventManager)===null||e===void 0||e.clear(),this.clearHooks(),this.enabled=!1}addHook(e,t,i){Pd(_h,this)[e]=Pd(_h,this)[e]||[];const s=Pd(_h,this)[e];this.hot.addHook(e,t,i),s.push(t),Pd(_h,this)[e]=s}removeHooks(e){L(Pd(_h,this)[e]||[],t=>{this.hot.removeHook(e,t)})}clearHooks(){const e=Pd(_h,this);et(e,(t,i)=>this.removeHooks(i)),e.length=0}callOnPluginsReady(e){this.isPluginsReady?e():this.pluginsInitializedCallbacks.push(e)}onAfterPluginsInitialized(){L(this.pluginsInitializedCallbacks,e=>e()),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}onUpdateSettings(e){const t=HG(V$,this,USe).call(this,e);this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&t&&this.updatePlugin(e))}updatePlugin(){}destroy(){var e;(e=this.eventManager)===null||e===void 0||e.destroy(),this.clearHooks(),et(this,(t,i)=>{i!=="hot"&&(this[i]=null)}),delete this.t,delete this.hot}}function USe(n){if(!n)return!1;const e=this.constructor.SETTING_KEYS;if(typeof e=="boolean")return e;for(let t=0;t<e.length;t++)if(n[e[t]]!==void 0)return!0;return!1}function Rh(n,e,t){return(e=YSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YSe(n){var e=GSe(n,"string");return typeof e=="symbol"?e:e+""}function GSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let DO=class{constructor(e){Rh(this,"hot",null),Rh(this,"container",null),Rh(this,"injected",!1),Rh(this,"rows",[]),Rh(this,"columns",[]),Rh(this,"samples",null),Rh(this,"settings",{useHeaders:!0}),this.hot=e}addRow(e,t){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));const i={row:e};this.rows.push(i),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol(e)),this.table.tr.appendChild(this.createRow(e)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}addColumnHeadersRow(e){const t=this.hot.getColHeader(0);if(t!=null){const i={row:-1};this.rows.push(i),this.container=this.createContainer(this.hot.rootElement.className),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}}addColumn(e,t){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));const i={col:e};this.columns.push(i),this.samples=t,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(e)!==null&&this.hot.view.appendColHeader(e,this.table.th),this.table.tBody.appendChild(this.createCol(e)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}getHeights(e){this.injected||this.injectTable(),L(this.rows,t=>{const{height:i}=t.table.getBoundingClientRect();e(t.row,Math.ceil(i)-1)})}getWidths(e){this.injected||this.injectTable(),L(this.columns,t=>{const{width:i}=t.table.getBoundingClientRect();e(t.col,Math.ceil(i))})}setSettings(e){this.settings=e}setSetting(e,t){this.settings||(this.settings={}),this.settings[e]=t}getSettings(){return this.settings}getSetting(e){return this.settings?this.settings[e]:null}createColGroupsCol(e){const t=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&t.appendChild(this.createColElement(-1,-1)),this.samples.forEach(i=>{L(i.strings,s=>{t.appendChild(this.createColElement(s.col,e))})}),t}createRow(e){const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),s=t.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(e,s),i.appendChild(s)),this.samples.forEach(r=>{L(r.strings,o=>{const a=o.col,l=this.hot.getCellMeta(e,a),c=this.hot.getCellRenderer(l),h=t.createElement("td");h.setAttribute("ghost-table",1),c(this.hot,h,e,a,this.hot.colToProp(a),o.value,l),i.appendChild(h)})}),i}appendColumnHeadersRow(){const{rootDocument:e}=this.hot,t=e.createDocumentFragment(),i=[];if(this.hot.hasRowHeaders()){const s=e.createElement("th");i.push([-1,s]),t.appendChild(s)}this.samples.forEach(s=>{L(s.strings,r=>{const o=r.col,a=e.createElement("th");i.push([o,a]),t.appendChild(a)})}),this.table.tHead.appendChild(t),L(i,s=>{const[r,o]=s;this.hot.view.appendColHeader(r,o)})}createCol(e){const{rootDocument:t}=this.hot,i=t.createDocumentFragment();return this.samples.forEach(s=>{L(s.strings,r=>{const o=r.row,a=this.hot.getCellMeta(o,e),l=this.hot.getCellRenderer(a),c=t.createElement("td"),h=t.createElement("tr");c.setAttribute("ghost-table",1),l(this.hot,c,o,e,this.hot.colToProp(e),r.value,a),h.appendChild(c),i.appendChild(h)})}),i}clean(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}injectTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((e||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}removeTable(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}createColElement(e,t){const i=this.hot.rootDocument.createElement("col");let s=0;t>=0&&e>=0&&(s=this.hot.getCellMeta(t,e).colspan);let r=this.hot.getColWidth(e);if(s>1)for(let o=e+1;o<e+s;o++)r+=this.hot.getColWidth(o);return i.style.width=`${r}px`,i}createTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),s=t.createElement("table"),r=t.createElement("thead"),o=t.createElement("tbody"),a=t.createElement("colgroup"),l=t.createElement("tr"),c=t.createElement("th");return this.isVertical()&&s.appendChild(a),this.isHorizontal()&&(l.appendChild(c),r.appendChild(l),s.style.tableLayout="auto",s.style.width="auto"),s.appendChild(r),this.isVertical()&&o.appendChild(l),s.appendChild(o),ae(s,e),i.appendChild(s),{fragment:i,table:s,tHead:r,tBody:o,colGroup:a,tr:l,th:c}}createContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),s=t.createElement("div"),r=`htGhostTable htAutoSize ${e.trim()}`;return ae(s,r),i.appendChild(s),{fragment:i,container:s}}isVertical(){return!!(this.rows.length&&!this.columns.length)}isHorizontal(){return!!(this.columns.length&&!this.rows.length)}};function Ob(n,e,t){return(e=KSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KSe(n){var e=qSe(n,"string");return typeof e=="symbol"?e:e+""}function qSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class l_{static get SAMPLE_COUNT(){return 3}constructor(e){Ob(this,"samples",null),Ob(this,"dataFactory",null),Ob(this,"customSampleCount",null),Ob(this,"allowDuplicates",!1),this.dataFactory=e}getSampleCount(){return this.customSampleCount?this.customSampleCount:l_.SAMPLE_COUNT}setSampleCount(e){this.customSampleCount=e}setAllowDuplicates(e){this.allowDuplicates=e}generateRowSamples(e,t){return this.generateSamples("row",t,e)}generateColumnSamples(e,t){return this.generateSamples("col",t,e)}generateSamples(e,t,i){const s=new Map,{from:r,to:o}=typeof i=="number"?{from:i,to:i}:i;return ke(r,o,a=>{const l=this.generateSample(e,t,a);s.set(a,l)}),s}generateSample(e,t,i){if(e!=="row"&&e!=="col")throw new Error("Unsupported sample type");const s=new Map,r=e==="row"?"col":"row",o=[];return ke(t.from,t.to,a=>{const l=e==="row"?this.dataFactory(i,a):this.dataFactory(a,i);if(l===!1)return;const{value:c,bundleSeed:h}=l,u=typeof h=="string"&&h.length>0;let d;u?d=h:Je(c)?d=`${Object.keys(c).length}`:Array.isArray(c)?d=`${c.length}`:d=`${Tn(c).length}`,s.has(d)||s.set(d,{needed:this.getSampleCount(),strings:[]});const f=s.get(d);f.needed&&(!(o.indexOf(c)>-1)||this.allowDuplicates||u)&&(f.strings.push({value:c,[r]:a}),o.push(c),f.needed-=1)}),s}}function XSe(n,e){DG(n,e),e.add(n)}function W$(n,e,t){DG(n,e),e.set(n,t)}function DG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function im(n,e,t){return(e=QSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QSe(n){var e=ZSe(n,"string");return typeof e=="symbol"?e:e+""}function ZSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function uu(n,e){return n.get(zo(n,e))}function NO(n,e,t){return n.set(zo(n,e),t),t}function zo(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ee.getSingleton().register("modifyAutoColumnSizeSeed");const sm="autoColumnSize",JSe=10,e0e="autoColumnSize";var af=new WeakMap,Xf=new WeakMap,Ya=new WeakSet;class bp extends xt{static get PLUGIN_KEY(){return sm}static get PLUGIN_PRIORITY(){return JSe}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 50}constructor(e){super(e),XSe(this,Ya),im(this,"ghostTable",new DO(this.hot)),im(this,"samplesGenerator",new l_((t,i)=>{const s=this.hot.toPhysicalRow(t),r=this.hot.toPhysicalColumn(i);if(this.hot.rowIndexMapper.isHidden(s)||this.hot.columnIndexMapper.isHidden(r))return!1;const o=this.hot.getCellMeta(t,i);let a="";o.spanned||(a=this.hot.getDataAtCell(t,i));let l="";return this.hot.hasHook("modifyAutoColumnSizeSeed")&&(l=this.hot.runHooks("modifyAutoColumnSizeSeed",l,o,a)),{value:a,bundleSeed:l}})),im(this,"inProgress",!1),im(this,"measuredColumns",0),im(this,"columnWidthsMap",new eh),W$(this,af,[]),W$(this,Xf,[]),this.hot.columnIndexMapper.registerMap(e0e,this.columnWidthsMap),this.addHook("beforeColumnResize",(t,i,s)=>zo(Ya,this,j$).call(this,t,i,s))}isEnabled(){return this.hot.getSettings()[sm]!==!1&&!this.hot.getSettings().colWidths}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[sm];t&&t.useHeaders!==null&&t.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",t.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return zo(Ya,e,i0e).call(e,...s)}),this.addHook("beforeChangeRender",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return zo(Ya,e,s0e).call(e,...s)}),this.addHook("afterFormulasValuesUpdate",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return zo(Ya,e,o0e).call(e,...s)}),this.addHook("beforeRender",()=>zo(Ya,this,n0e).call(this)),this.addHook("modifyColWidth",(i,s)=>this.getColumnWidth(s,i)),this.addHook("init",()=>zo(Ya,this,r0e).call(this)),super.enablePlugin()}updatePlugin(){NO(Xf,this,this.findColumnsWhereHeaderWasChanged()),super.updatePlugin()}disablePlugin(){super.disablePlugin(),this.addHook("beforeColumnResize",(e,t,i)=>zo(Ya,this,j$).call(this,e,t,i))}calculateVisibleColumnsWidth(){if(!this.hot.countRows())return;const e=this.getFirstVisibleColumn(),t=this.getLastVisibleColumn();if(e===-1||t===-1)return;const i=this.hot.renderCall;this.calculateColumnsWidth({from:e,to:t},void 0,i)}calculateColumnsWidth(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=typeof e=="number"?{from:e,to:e}:e,r=typeof t=="number"?{from:t,to:t}:t;ke(s.from,s.to,o=>{let a=this.hot.toPhysicalColumn(o);a===null&&(a=o),(i||this.columnWidthsMap.getValueAtIndex(a)===null&&!this.hot._getColWidthFromSettings(a))&&this.samplesGenerator.generateColumnSamples(o,r).forEach((c,h)=>this.ghostTable.addColumn(h,c))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((o,a)=>{const l=this.hot.toPhysicalColumn(o);this.columnWidthsMap.setValueAtIndex(l,a)})},!0),this.measuredColumns=s.to+1,this.ghostTable.clean())}calculateAllColumnsWidth(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0;const s=this.hot.countCols()-1;let r=null;this.inProgress=!0;const o=()=>{if(!this.hot){rw(r),this.inProgress=!1;return}this.calculateColumnsWidth({from:i,to:Math.min(i+bp.CALCULATION_STEP,s)},e,t),i=i+bp.CALCULATION_STEP+1,i<s?r=G0(o):(rw(r),this.inProgress=!1,this.hot.view.adjustElementsSize())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateColumnsWidth({from:0,to:a},e,t),i=a+1),i<s?o():this.inProgress=!1}setSamplingOptions(){const e=this.hot.getSettings()[sm],t=e&&wn(e,"samplingRatio")?e.samplingRatio:void 0,i=e&&wn(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllColumnsWidth(){this.hot.view.isVisible()&&this.calculateAllColumnsWidth({from:0,to:this.hot.countRows()-1},!0)}getSyncCalculationLimit(){const e=this.hot.getSettings()[sm];let t=bp.SYNC_CALCULATION_LIMIT;const i=this.hot.countCols()-1;return Je(e)&&(t=e.syncLimit,nP(t)?t=EP(i,t):t>>=0),Math.min(t,i)}getColumnWidth(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=t;return s===void 0&&(s=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),i&&typeof s=="number"&&(s=Math.max(s,X0))),s}getFirstVisibleColumn(){var e;return(e=this.hot.view.getFirstRenderedVisibleColumn())!==null&&e!==void 0?e:-1}getLastVisibleColumn(){var e;return(e=this.hot.view.getLastRenderedVisibleColumn())!==null&&e!==void 0?e:-1}findColumnsWhereHeaderWasChanged(){return this.hot.getColHeader().reduce((i,s,r)=>{const o=uu(af,this).length;return(o-1<r||uu(af,this)[r]!==s)&&i.push(this.hot.toVisualColumn(r)),o-1<r?uu(af,this).push(s):uu(af,this)[r]=s,i},[])}clearCache(e){Array.isArray(e)?this.hot.batchExecution(()=>{e.forEach(t=>{this.columnWidthsMap.setValueAtIndex(t,null)})},!0):this.columnWidthsMap.clear()}isNeedRecalculate(){return!!this.columnWidthsMap.getValues().slice(0,this.measuredColumns).filter(e=>e===null).length}destroy(){this.ghostTable.clean(),super.destroy()}}function t0e(n){const e={from:0,to:this.hot.countRows()-1};n.forEach(t=>{const i=this.hot.toPhysicalColumn(t);i!==null&&(this.hot._getColWidthFromSettings(i)||this.samplesGenerator.generateColumnSamples(t,e).forEach((r,o)=>this.ghostTable.addColumn(o,r)))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((t,i)=>{const s=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(s,i)})},!0),this.ghostTable.clean())}function n0e(){this.calculateVisibleColumnsWidth(),this.inProgress||(zo(Ya,this,t0e).call(this,uu(Xf,this)),NO(Xf,this,[]))}function i0e(n,e){e||this.recalculateAllColumnsWidth()}function s0e(n){const e=n.reduce((t,i)=>{let[,s]=i;const r=this.hot.propToCol(s);return Number.isInteger(r)&&t.indexOf(r)===-1&&t.push(r),t},[]);uu(Xf,this).push(...e)}function j$(n,e,t){let i=n;return t&&(this.calculateColumnsWidth(e,void 0,!0),i=this.getColumnWidth(e,void 0,!1)),i}function r0e(){NO(af,this,this.hot.getColHeader()),this.recalculateAllColumnsWidth()}function o0e(n){const e=n.reduce((t,i)=>{var s;const r=(s=i.address)===null||s===void 0?void 0:s.col;if(Number.isInteger(r)){const o=this.hot.toVisualColumn(r);t.indexOf(o)===-1&&t.push(o)}return t},[]);uu(Xf,this).push(...e)}const du={horizontal:"horizontal",vertical:"vertical"};function a0e(n,e,t){let i,s,r;return e[0]===n[0]&&e[1]<n[1]?(r="left",i=t(e[0],e[1]),s=t(e[2],n[1]-1)):e[2]===n[2]&&e[0]===n[0]&&e[3]>n[3]?(r="right",i=t(e[0],n[3]+1),s=t(e[2],e[3])):e[0]<n[0]&&e[1]===n[1]?(r="up",i=t(e[0],e[1]),s=t(n[0]-1,e[3])):e[2]>n[2]&&e[1]===n[1]&&(r="down",i=t(n[2]+1,e[1]),s=t(e[2],e[3])),i&&i.normalize(),s&&s.normalize(),{directionOfDrag:r,startOfDragCoords:i,endOfDragCoords:s}}function l0e(n){const e={};return n===!0?(e.directions=Object.keys(du),e.autoInsertRow=!0):Je(n)?(Me(n.autoInsertRow)?n.direction===du.horizontal?e.autoInsertRow=!1:e.autoInsertRow=n.autoInsertRow:e.autoInsertRow=!1,Me(n.direction)?e.directions=[n.direction]:e.directions=Object.keys(du)):typeof n=="string"?(e.directions=[n],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e}function c0e(n,e){h0e(n,e),e.add(n)}function h0e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Id(n,e,t){return(e=u0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function u0e(n){var e=d0e(n,"string");return typeof e=="symbol"?e:e+""}function d0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rm(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ee.getSingleton().register("modifyAutofillRange");Ee.getSingleton().register("beforeAutofill");Ee.getSingleton().register("afterAutofill");const z$="autofill",f0e=20,g0e=["fillHandle"],m0e="insert_row_below",p0e=200;var Od=new WeakSet;class w0e extends xt{constructor(){super(...arguments),c0e(this,Od),Id(this,"addingStarted",!1),Id(this,"mouseDownOnCellCorner",!1),Id(this,"mouseDragOutside",!1),Id(this,"handleDraggedCells",0),Id(this,"directions",[]),Id(this,"autoInsertRow",!1)}static get PLUGIN_KEY(){return z$}static get PLUGIN_PRIORITY(){return f0e}static get SETTING_KEYS(){return[z$,...g0e]}isEnabled(){return this.hot.getSettings().fillHandle}enablePlugin(){this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",e=>rm(Od,this,b0e).call(this,e)),this.addHook("afterOnCellCornerDblClick",e=>rm(Od,this,v0e).call(this,e)),this.addHook("beforeOnCellMouseOver",(e,t)=>rm(Od,this,y0e).call(this,t)),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.clearMappedSettings(),super.disablePlugin()}getSelectionData(){const e=this.hot.getSelectedRangeLast(),{row:t,col:i}=e.getTopStartCorner(),{row:s,col:r}=e.getBottomEndCorner(),o=this.hot.runHooks("modifyCopyableRange",[{startRow:t,startCol:i,endRow:s,endCol:r}]),a=[],l=[],c=[];return L(o,h=>{for(let u=h.startRow;u<=h.endRow;u+=1)a.indexOf(u)===-1&&a.push(u);for(let u=h.startCol;u<=h.endCol;u+=1)l.indexOf(u)===-1&&l.push(u)}),L(a,h=>{const u=[];L(l,d=>{u.push(this.hot.getCopyableData(h,d))}),c.push(u)}),c}fillIn(){if(this.hot.selection.highlight.getFill().isEmpty())return!1;const[e,t,i,s]=this.hot.selection.highlight.getFill().getVisualCorners(),r=this.hot.getSelectedRangeLast(),o=r.getTopStartCorner(),a=r.getBottomEndCorner();this.resetSelectionOfDraggedArea();const l=[o.row,o.col,a.row,a.col],c=this.hot.runHooks("modifyAutofillRange",[Math.min(o.row,e),Math.min(o.col,t),Math.max(a.row,i),Math.max(a.col,s)],l),{directionOfDrag:h,startOfDragCoords:u,endOfDragCoords:d}=a0e(l,c,(f,g)=>this.hot._createCellCoords(f,g));if(u&&u.row>-1&&u.col>-1){const f=this.getSelectionData(),g=r.clone(),m=this.hot._createCellRange(u,u,d),w=this.hot.runHooks("beforeAutofill",f,g,m,h);if(w===!1)return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;let v=w;const C=w;if(["up","left"].indexOf(h)>-1&&!(C.length===1&&C[0].length===0))if(v=[],h==="up"){const S=d.row-u.row+1,x=S%C.length;for(let _=0;_<S;_++)v.push(C[(_+(C.length-x))%C.length])}else{const S=d.col-u.col+1,x=S%C[0].length;for(let _=0;_<C.length;_++){v.push([]);for(let R=0;R<S;R++)v[_].push(C[_][(R+(C[_].length-x))%C[_].length])}}this.hot.populateFromArray(u.row,u.col,v,d.row,d.col,`${this.pluginName}.fill`,null),this.setSelection(c),this.hot.runHooks("afterAutofill",v,g,m,h),this.hot.render()}else this.hot.view.render();return!0}reduceSelectionAreaIfNeeded(e){return e.row<0&&(e.row=0),e.col<0&&(e.col=0),e}getCoordsOfDragAndDropBorders(e){const t=this.hot.getSelectedRangeLast(),i=t.getBottomEndCorner();let s=e;if(this.directions.includes(du.vertical)&&this.directions.includes(du.horizontal)){const r=t.getTopStartCorner();(i.col<=e.col||r.col>=e.col)&&(s=this.hot._createCellCoords(i.row,e.col)),(i.row<e.row||r.row>e.row)&&(s=this.hot._createCellCoords(e.row,i.col))}else if(this.directions.includes(du.vertical))s=this.hot._createCellCoords(e.row,i.col);else if(this.directions.includes(du.horizontal))s=this.hot._createCellCoords(i.row,e.col);else return;return this.reduceSelectionAreaIfNeeded(s)}showBorder(e){const t=this.getCoordsOfDragAndDropBorders(e);t&&this.redrawBorders(t)}addRow(){this.hot._registerTimeout(()=>{this.hot.alter(m0e,void 0,1,`${this.pluginName}.fill`),this.addingStarted=!1},p0e)}addNewRowIfNeeded(){if(!this.hot.selection.highlight.getFill().isEmpty()&&this.addingStarted===!1&&this.autoInsertRow){const e=this.hot.getSelectedLast(),t=this.hot.selection.highlight.getFill().getVisualCorners(),i=this.hot.countRows();e[2]<i-1&&t[2]===i-1&&(this.addingStarted=!0,this.addRow())}}getIndexOfLastAdjacentFilledInRow(e){const t=this.hot.getData(),i=this.hot.countRows();let s;for(let r=e[2]+1;r<i;r++){for(let l=e[1];l<=e[3];l++){const c=t[r][l];if(!Mn(c))return-1}const o=t[r][e[1]-1],a=t[r][e[3]+1];(!Mn(o)||!Mn(a))&&(s=r)}return s}addSelectionFromStartAreaToSpecificRowIndex(e,t){this.hot.selection.highlight.getFill().clear().add(this.hot._createCellCoords(e[0],e[1])).add(this.hot._createCellCoords(t,e[3])).commit()}setSelection(e){this.hot.selectCell(...lt(e,t=>Math.max(t,0)),!1,!1)}selectAdjacent(){const e=this.hot.getSelectedLast(),t=this.getIndexOfLastAdjacentFilledInRow(e);return t===-1||t===void 0?!1:(this.addSelectionFromStartAreaToSpecificRowIndex(e,t),!0)}resetSelectionOfDraggedArea(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}redrawBorders(e){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(e).commit(),this.hot.view.render()}getIfMouseWasDraggedOutside(e){const{documentElement:t}=this.hot.rootDocument,i=li(this.hot.table).top-(this.hot.rootWindow.pageYOffset||t.scrollTop)+$n(this.hot.table),s=li(this.hot.table).left-(this.hot.rootWindow.pageXOffset||t.scrollLeft)+Qt(this.hot.table);return e.clientY>i&&e.clientX<=s}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mouseup",()=>rm(Od,this,C0e).call(this)),this.eventManager.addEventListener(e,"mousemove",t=>rm(Od,this,S0e).call(this,t))}clearMappedSettings(){this.directions.length=0,this.autoInsertRow=!1}mapSettings(){const e=l0e(this.hot.getSettings().fillHandle);this.directions=e.directions,this.autoInsertRow=e.autoInsertRow}destroy(){super.destroy()}}function v0e(){this.selectAdjacent()&&this.fillIn()}function b0e(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}function y0e(n){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(n),this.addNewRowIfNeeded())}function C0e(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}function S0e(n){const e=this.getIfMouseWasDraggedOutside(n);this.addingStarted===!1&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}function _0e(n,e){NG(n,e),e.add(n)}function R0e(n,e,t){NG(n,e),e.set(n,t)}function NG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kd(n,e,t){return(e=x0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function x0e(n){var e=E0e(n,"string");return typeof e=="symbol"?e:e+""}function E0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function T0e(n,e,t){return n.set(Uo(n,e),t),t}function LO(n,e){return n.get(Uo(n,e))}function Uo(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const kb="autoRowSize",M0e=40,A0e="autoRowSize";var hw=new WeakMap,Ga=new WeakSet;class yp extends xt{static get PLUGIN_KEY(){return kb}static get PLUGIN_PRIORITY(){return M0e}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 500}constructor(e){super(e),_0e(this,Ga),kd(this,"headerHeight",null),kd(this,"ghostTable",new DO(this.hot)),kd(this,"samplesGenerator",new l_((t,i)=>{const s=this.hot.toPhysicalRow(t),r=this.hot.toPhysicalColumn(i);if(this.hot.rowIndexMapper.isHidden(s)||this.hot.columnIndexMapper.isHidden(r)||t>=0&&i>=0&&this.hot.getCellMeta(t,i).hidden)return!1;let o;return t>=0?o=this.hot.getDataAtCell(t,i):t===-1&&(o=this.hot.getColHeader(i)),{value:o}})),kd(this,"inProgress",!1),kd(this,"measuredRows",0),kd(this,"rowHeightsMap",new eh),R0e(this,hw,[]),this.hot.rowIndexMapper.registerMap(A0e,this.rowHeightsMap),this.addHook("beforeRowResize",(t,i,s)=>Uo(Ga,this,U$).call(this,t,i,s))}isEnabled(){const e=this.hot.getSettings()[kb];return e===!0||Je(e)}enablePlugin(){var e=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Uo(Ga,e,O0e).call(e,...i)}),this.addHook("beforeChangeRender",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Uo(Ga,e,k0e).call(e,...i)}),this.addHook("beforeColumnResize",()=>this.recalculateAllRowsHeight()),this.addHook("afterFormulasValuesUpdate",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Uo(Ga,e,D0e).call(e,...i)}),this.addHook("beforeRender",()=>Uo(Ga,this,I0e).call(this)),this.addHook("modifyRowHeight",(t,i)=>this.getRowHeight(i,t)),this.addHook("init",()=>Uo(Ga,this,H0e).call(this)),this.addHook("modifyColumnHeaderHeight",()=>this.getColumnHeaderHeight()),super.enablePlugin())}disablePlugin(){this.headerHeight=null,super.disablePlugin(),this.addHook("beforeRowResize",(e,t,i)=>Uo(Ga,this,U$).call(this,e,t,i))}calculateVisibleRowsHeight(){if(!this.hot.countCols())return;const e=this.getFirstVisibleRow(),t=this.getLastVisibleRow();if(e===-1||t===-1)return;const i=this.hot.renderCall;this.calculateRowsHeight({from:e,to:t},void 0,i)}calculateRowsHeight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countCols()-1},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=typeof e=="number"?{from:e,to:e}:e,r=typeof t=="number"?{from:t,to:t}:t;if(this.hot.getColHeader(0)!==null){const o=this.samplesGenerator.generateRowSamples(-1,r);this.ghostTable.addColumnHeadersRow(o.get(-1))}ke(s.from,s.to,o=>{let a=this.hot.toPhysicalRow(o);a===null&&(a=o),(i||this.rowHeightsMap.getValueAtIndex(a)===null)&&this.samplesGenerator.generateRowSamples(o,r).forEach((c,h)=>this.ghostTable.addRow(h,c))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((o,a)=>{o<0?this.headerHeight=a:this.rowHeightsMap.setValueAtIndex(this.hot.toPhysicalRow(o),a)})},!0),this.measuredRows=s.to+1,this.ghostTable.clean())}calculateAllRowsHeight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0;const s=this.hot.countRows()-1;let r=null;this.inProgress=!0;const o=()=>{if(!this.hot){rw(r),this.inProgress=!1;return}this.calculateRowsHeight({from:i,to:Math.min(i+yp.CALCULATION_STEP,s)},e,t),i=i+yp.CALCULATION_STEP+1,i<s?r=G0(o):(rw(r),this.inProgress=!1,this.hot.view.adjustElementsSize(),this.hot.view._wt.wtOverlays.inlineStartOverlay.needFullRender&&this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.draw())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateRowsHeight({from:0,to:a},e,t),i=a+1),i<s?o():(this.inProgress=!1,this.hot.view.adjustElementsSize())}setSamplingOptions(){const e=this.hot.getSettings()[kb],t=e&&wn(e,"samplingRatio")?e.samplingRatio:void 0,i=e&&wn(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllRowsHeight(){this.hot.view.isVisible()&&this.calculateAllRowsHeight({from:0,to:this.hot.countCols()-1},!0)}getSyncCalculationLimit(){const e=this.hot.getSettings()[kb];let t=yp.SYNC_CALCULATION_LIMIT;const i=this.hot.countRows()-1;return Je(e)&&(t=e.syncLimit,nP(t)?t=EP(i,t):t>>=0),Math.min(t,i)}getRowHeight(e,t){const i=e<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(e));let s=t;return i!==null&&i>(t||0)&&(s=i),s}getColumnHeaderHeight(){return this.headerHeight}getFirstVisibleRow(){var e;return(e=this.hot.view.getFirstRenderedVisibleRow())!==null&&e!==void 0?e:-1}getLastVisibleRow(){var e;return(e=this.hot.view.getLastRenderedVisibleRow())!==null&&e!==void 0?e:-1}clearCache(e){this.headerHeight=null,Array.isArray(e)?this.hot.batchExecution(()=>{e.forEach(t=>{this.rowHeightsMap.setValueAtIndex(t,null)})},!0):this.rowHeightsMap.clear()}clearCacheByRange(e){const{from:t,to:i}=typeof e=="number"?{from:e,to:e}:e;this.hot.batchExecution(()=>{ke(Math.min(t,i),Math.max(t,i),s=>{this.rowHeightsMap.setValueAtIndex(s,null)})},!0)}isNeedRecalculate(){return!!this.rowHeightsMap.getValues().slice(0,this.measuredRows).filter(e=>e===null).length}destroy(){this.ghostTable.clean(),super.destroy()}}function P0e(n){const e={from:0,to:this.hot.countCols()-1};n.forEach(t=>{this.samplesGenerator.generateRowSamples(t,e).forEach((s,r)=>this.ghostTable.addRow(r,s))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((t,i)=>{const s=this.hot.toPhysicalRow(t);this.rowHeightsMap.setValueAtIndex(s,i)})},!0),this.ghostTable.clean())}function I0e(){this.calculateVisibleRowsHeight(),this.inProgress||(Uo(Ga,this,P0e).call(this,LO(hw,this)),T0e(hw,this,[]))}function U$(n,e,t){let i=n;return t&&(this.calculateRowsHeight(e,void 0,!0),i=this.getRowHeight(e)),i}function O0e(n,e){e||this.recalculateAllRowsHeight()}function k0e(n){const e=n.reduce((t,i)=>{let[s]=i;return t.indexOf(s)===-1&&t.push(s),t},[]);LO(hw,this).push(...e)}function H0e(){this.recalculateAllRowsHeight()}function D0e(n){const e=n.reduce((t,i)=>{var s;const r=(s=i.address)===null||s===void 0?void 0:s.row;if(Number.isInteger(r)){const o=this.hot.toVisualRow(r);t.indexOf(o)===-1&&t.push(o)}return t},[]);LO(hw,this).push(...e)}const{getListWithInsertedItems:N0e,getListWithRemovedItems:L0e}=GY("physicallyIndexed");class $0e extends ad{constructor(){super(e=>e)}insert(e,t){const i=JP(this.indexedValues,t);this.indexedValues=N0e(i,e,t,this.initValueOrFn),super.insert(e,t)}remove(e){const t=L0e(this.indexedValues,e);this.indexedValues=ZP(t,e),super.remove(e)}}const{getListWithInsertedItems:F0e,getListWithRemovedItems:B0e}=GY("physicallyIndexed");class V0e extends ad{constructor(){super(e=>e)}insert(e,t){this.indexedValues=F0e(this.indexedValues,e,t,(i,s)=>this.getNextValue(s)),super.insert(e,t)}remove(e){this.indexedValues=B0e(this.indexedValues,e),super.remove(e)}getNextValue(e){return Math.max(...this.getValues())+1+e}}function W0e(n,e){j0e(n,e),e.add(n)}function j0e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function z0e(n,e,t){return(e=U0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function U0e(n){var e=Y0e(n,"string");return typeof e=="symbol"?e:e+""}function Y0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function G0e(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const kx="bindRowsWithHeaders",K0e=210,q0e="loose",X0e=new Map([["loose",$0e],["strict",V0e]]);var Y$=new WeakSet;class Q0e extends xt{constructor(){super(...arguments),W0e(this,Y$),z0e(this,"headerIndexes",null)}static get PLUGIN_KEY(){return kx}static get PLUGIN_PRIORITY(){return K0e}isEnabled(){return!!this.hot.getSettings()[kx]}enablePlugin(){if(this.enabled)return;let e=this.hot.getSettings()[kx];typeof e!="string"&&(e=q0e);const t=X0e.get(e);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new t),this.addHook("modifyRowHeader",i=>G0e(Y$,this,Z0e).call(this,i)),super.enablePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),super.disablePlugin()}destroy(){super.destroy()}}function Z0e(n){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(n))}function J0e(n,e){LG(n,e),e.add(n)}function e_e(n,e,t){LG(n,e),e.set(n,t)}function LG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function G$(n,e,t){return(e=t_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t_e(n){var e=n_e(n,"string");return typeof e=="symbol"?e:e+""}function n_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function K$(n,e){return n.get(Sf(n,e))}function Hx(n,e,t){return n.set(Sf(n,e),t),t}function Sf(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Xy="collapsibleColumns",i_e=290,s_e=["nestedHeaders"],kf="collapsibleIndicator",q$=Xy,X$=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]);var Hd=new WeakMap,om=new WeakSet;class r_e extends xt{constructor(){super(...arguments),J0e(this,om),G$(this,"nestedHeadersPlugin",null),G$(this,"headerStateManager",null),e_e(this,Hd,null)}static get PLUGIN_KEY(){return Xy}static get PLUGIN_PRIORITY(){return i_e}static get PLUGIN_DEPS(){return["plugin:NestedHeaders"]}static get SETTING_KEYS(){return[Xy,...s_e]}isEnabled(){return!!this.hot.getSettings()[Xy]}enablePlugin(){var e=this;if(this.enabled)return;const{nestedHeaders:t}=this.hot.getSettings();t||Dt("You need to configure the Nested Headers plugin in order to use collapsible headers."),Hx(Hd,this,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",()=>Sf(om,this,l_e).call(this)),this.addHook("afterLoadData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Sf(om,e,c_e).call(e,...s)}),this.addHook("afterGetColHeader",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Sf(om,e,o_e).call(e,...s)}),this.addHook("beforeOnCellMouseDown",(i,s,r)=>Sf(om,this,a_e).call(this,i,s,r)),this.registerShortcuts(),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){const{collapsibleColumns:e}=this.hot.getSettings();typeof e=="boolean"?this.headerStateManager.mapState(t=>({collapsible:t.origColspan>1})):Array.isArray(e)&&(this.headerStateManager.mapState(()=>({collapsible:!1})),this.headerStateManager.mergeStateWith(e))}super.updatePlugin()}}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),Hx(Hd,this,null),this.nestedHeadersPlugin=null,this.unregisterShortcuts(),this.clearButtons(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{var e;const{row:t,col:i}=this.hot.getSelectedRangeLast().highlight,{collapsible:s,isCollapsed:r,columnIndex:o}=(e=this.headerStateManager.getHeaderTreeNodeData(t,i))!==null&&e!==void 0?e:{};if(s)return r?this.expandSection({row:t,col:o}):this.collapseSection({row:t,col:o}),!1},runOnlyIf:()=>{var e,t;return((e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.isSingle())&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.highlight.isHeader())},group:q$,relativeToGroup:th,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(q$)}clearButtons(){if(!this.hot.view)return;const e=this.hot.view._wt.getSetting("columnHeaders").length,t=this.hot.view._wt.wtTable.THEAD,i=this.hot.view._wt.wtOverlays.topOverlay.clone.wtTable.THEAD,s=this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay?this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,r=function(o){o&&o.parentNode.removeChild(o)};ke(0,e-1,o=>{const a=t.childNodes[o],l=i.childNodes[o],c=s?s.childNodes[o]:null;ke(0,a.childNodes.length-1,h=>{let u=a.childNodes[h].querySelector(`.${kf}`);r(u),l&&l.childNodes[h]&&(u=l.childNodes[h].querySelector(`.${kf}`),r(u)),s&&c&&c.childNodes[h]&&(u=c.childNodes[h].querySelector(`.${kf}`),r(u))})})}expandSection(e){this.toggleCollapsibleSection([e],"expand")}collapseSection(e){this.toggleCollapsibleSection([e],"collapse")}toggleAllCollapsibleSections(e){const t=this.headerStateManager.mapNodes(i=>{const{collapsible:s,origColspan:r,headerLevel:o,columnIndex:a,isCollapsed:l}=i;if(s===!0&&r>1&&(l&&e==="expand"||!l&&e==="collapse"))return{row:this.headerStateManager.levelToRowCoords(o),col:a}});this.toggleCollapsibleSection(t,e)}collapseAll(){this.toggleAllCollapsibleSections("collapse")}expandAll(){this.toggleAllCollapsibleSections("expand")}toggleCollapsibleSection(e,t){if(!X$.has(t))throw new Error(`Unsupported action is passed (${t}).`);if(!Array.isArray(e))return;const i=_l(e,f=>{let{row:g}=f;return g<0});let s=i.length>0;L(i,f=>{var g;let{row:m,col:w}=f;const{collapsible:v,isCollapsed:C}=(g=this.headerStateManager.getHeaderSettings(m,w))!==null&&g!==void 0?g:{};if(!v||C&&t==="collapse"||!C&&t==="expand")return s=!1,!1});const r=[],o=[];s&&L(i,f=>{let{row:g,col:m}=f;const{colspanCompensation:w,affectedColumns:v,rollbackModification:C}=this.headerStateManager.triggerNodeModification(t,g,m);w>0&&(o.push(...v),r.push(C))});const a=this.getCollapsedColumns();let l=[];t==="collapse"?l=eP([...a,...o]):t==="expand"&&(l=_l(a,f=>!o.includes(f)));const c=X$.get(t);if(this.hot.runHooks(c.beforeHook,a,l,s)===!1){L(r,f=>{f()});return}this.hot.batchExecution(()=>{L(o,f=>{K$(Hd,this).setValueAtIndex(this.hot.toPhysicalColumn(f),c.hideColumn)})},!0);const u=this.getCollapsedColumns().length!==a.length,d=this.hot.getSelectedRangeLast();if(t==="collapse"&&u&&d){const{row:f,col:g}=d.highlight;if((this.hot.rowIndexMapper.isHidden(f)||this.hot.columnIndexMapper.isHidden(g))&&o.includes(g)){const w=f>=0?this.hot.rowIndexMapper.getNearestNotHiddenIndex(f,1,!0):f,v=g>=0?this.hot.columnIndexMapper.getNearestNotHiddenIndex(g,1,!0):g;w!==null&&v!==null&&this.hot.selectCell(w,v)}}this.hot.runHooks(c.afterHook,a,l,s,u),this.hot.render(),this.hot.view.adjustElementsSize()}getCollapsedColumns(){return K$(Hd,this).getHiddenIndexes()}destroy(){Hx(Hd,this,null),super.destroy()}}function o_e(n,e,t){var i;const{collapsible:s,origColspan:r,isCollapsed:o}=(i=this.headerStateManager.getHeaderSettings(t,n))!==null&&i!==void 0?i:{},a=s&&r>1&&n>=this.hot.getSettings().fixedColumnsStart,l=this.hot.getSettings().ariaTags;let c=e.querySelector(`.${kf}`);if(rd(e,[Sr("")[0]]),a)c||(c=this.hot.rootDocument.createElement("div"),ae(c,kf),e.querySelector("div:first-child").appendChild(c)),ze(c,["collapsed","expanded"]),o?(ae(c,"collapsed"),$c(c,"+"),l&&$e(e,...Sr(!1))):(ae(c,"expanded"),$c(c,"-"),l&&$e(e,...Sr(!0))),l&&$e(c,...sd());else{var h;(h=c)===null||h===void 0||h.remove()}}function a_e(n,e){Fe(n.target,kf)&&(Fe(n.target,"expanded")?(this.eventManager.fireEvent(n.target,"mouseup"),this.toggleCollapsibleSection([e],"collapse")):Fe(n.target,"collapsed")&&(this.eventManager.fireEvent(n.target,"mouseup"),this.toggleCollapsibleSection([e],"expand")),Ar(n))}function l_e(){this.updatePlugin()}function c_e(n,e){e||this.updatePlugin()}function xh(n,e,t){return(e=h_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function h_e(n){var e=u_e(n,"string");return typeof e=="symbol"?e:e+""}function u_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const d_e=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"],f_e=!1,g_e=!0,m_e=!0;class p_e{constructor(e,t){xh(this,"hot",void 0),xh(this,"sortingStates",new t_),xh(this,"sortEmptyCells",f_e),xh(this,"indicator",g_e),xh(this,"headerAction",m_e),xh(this,"compareFunctionFactory",void 0),xh(this,"mapName",void 0),this.hot=e,this.mapName=t,this.hot.columnIndexMapper.registerMap(t,this.sortingStates)}updateAllColumnsProperties(e){Je(e)&&et(e,(t,i)=>{d_e.includes(i)&&(this[i]=t)})}getAllColumnsProperties(){const e={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return typeof this.compareFunctionFactory=="function"&&(e.compareFunctionFactory=this.compareFunctionFactory),e}getSortOrderOfColumn(e){var t;return(t=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))===null||t===void 0?void 0:t.sortOrder}getIndexOfColumnInSortQueue(e){return e=this.hot.toPhysicalColumn(e),this.sortingStates.getEntries().findIndex(t=>{let[i]=t;return i===e})}getNumberOfSortedColumns(){return this.sortingStates.getLength()}isListOfSortedColumnsEmpty(){return this.getNumberOfSortedColumns()===0}isColumnSorted(e){return Je(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))}getSortStates(){return this.sortingStates===null?[]:this.sortingStates.getEntries().map(t=>{let[i,s]=t;return{column:this.hot.toVisualColumn(i),...s}})}getColumnSortState(e){const t=this.getSortOrderOfColumn(e);if(Me(t))return{column:e,sortOrder:t}}setSortStates(e){this.sortingStates.clear();for(let t=0;t<e.length;t+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(e[t].column),{sortOrder:e[t].sortOrder})}destroy(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}function $G(n,e,t){const i=e.locale;return function(s,r){const{sortEmptyCells:o}=t;return typeof s=="string"&&(s=s.toLocaleLowerCase(i)),typeof r=="string"&&(r=r.toLocaleLowerCase(i)),s===r?ra:Mn(s)?Mn(r)?ra:o&&n==="asc"?xn:En:Mn(r)?o&&n==="asc"?En:xn:isNaN(s)&&!isNaN(r)?n==="asc"?En:xn:!isNaN(s)&&isNaN(r)||(isNaN(s)||isNaN(r)||(s=parseFloat(s),r=parseFloat(r)),s<r)?n==="asc"?xn:En:s>r?n==="asc"?En:xn:ra}}const FG="default";function w_e(n,e,t){return function(i,s){const r=parseFloat(i),o=parseFloat(s),{sortEmptyCells:a}=t;if(r===o||isNaN(r)&&isNaN(o))return ra;if(a){if(Mn(i))return n==="asc"?xn:En;if(Mn(s))return n==="asc"?En:xn}return isNaN(r)?En:isNaN(o)?xn:r<o?n==="asc"?xn:En:r>o?n==="asc"?En:xn:ra}}const v_e="numeric";function b_e(n,e,t){const i=e.checkedTemplate,s=e.uncheckedTemplate,{sortEmptyCells:r}=t;return function(o,a){const l=Mn(o),c=Mn(a),h=l?s:o,u=c?s:a,d=h===s||h===i,f=u===s||u===i;if(r===!1){if(l&&c===!1)return En;if(l===!1&&c)return xn}return d===!1&&f?n==="asc"?xn:En:d&&f===!1?n==="asc"?En:xn:d===!1&&f===!1?$G(n,e,t)(o,a):h===s&&u===i?n==="asc"?xn:En:h===i&&u===s?n==="asc"?En:xn:ra}}const y_e="checkbox";function C_e(n,e,t){return UG(n,e.dateFormat,t)}const S_e="date";function __e(n,e,t){return UG(n,e.timeFormat,t)}const R_e="time",{register:iv,getItem:Q$,hasItem:x_e}=vo("sorting.compareFunctionFactory"),{register:BG,getItem:E_e}=vo("sorting.mainSortComparator");function VG(n){return x_e(n)?Q$(n):Q$(FG)}iv(y_e,b_e);iv(S_e,C_e);iv(FG,$G);iv(v_e,w_e);iv(R_e,__e);const ra=0,xn=-1,En=1;function T_e(n,e){const t=E_e(e);for(var i=arguments.length,s=new Array(i>2?i-2:0),r=2;r<i;r++)s[r-2]=arguments[r];n.sort(t(...s))}const uS="asc",dS="desc",WG="colHeader";function M_e(n){if(Je(n)===!1)return!1;const{column:e,sortOrder:t}=n;return Number.isInteger(e)&&[uS,dS].includes(t)}function A_e(n){if(n.some(t=>M_e(t)===!1))return!1;const e=n.map(t=>{let{column:i}=t;return i});return new Set(e).size===e.length}function Z$(n){if(n!==dS)return n===uS?dS:uS}function jG(n){return n.querySelector(`.${WG}`)}function zG(n,e){if(n<0||!e.parentNode)return!1;const t=e.parentNode.parentNode.childNodes;return Array.from(t).indexOf(e.parentNode)-t.length===-1}function $O(n,e,t){return n===-1&&e>=0&&Fc(t)===!1}function UG(n,e,t){return function(i,s){const{sortEmptyCells:r}=t;if(i===s)return ra;if(Mn(i))return Mn(s)?ra:r&&n==="asc"?xn:En;if(Mn(s))return r&&n==="asc"?En:xn;const o=le(i,e),a=le(s,e);return o.isValid()?a.isValid()?a.isAfter(o)?n==="asc"?xn:En:a.isBefore(o)?n==="asc"?En:xn:ra:xn:En}}const P_e="ascending",I_e="descending",YG="indicatorDisabled",GG="columnSorting",KG="sortAction",qG=new Map([[uS,P_e],[dS,I_e]]);function O_e(n,e,t,i){const s=[GG];if(i&&s.push(KG),t===!1)return s.push(YG),s;const r=n.getSortOrderOfColumn(e);return Me(r)&&s.push(qG.get(r)),s}function k_e(){return Array.from(qG.values()).concat(KG,YG,GG)}function H_e(n,e){return function(t,i){const[,...s]=t,[,...r]=i;return function(a){const l=n[a],c=e[a],h=s[a],u=r[a],d=c.columnSorting;return(d.compareFunctionFactory?d.compareFunctionFactory:VG(c.type))(l,c,d)(h,u)}(0)}}function D_e(n,e){N_e(n,e),e.add(n)}function N_e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Hb(n,e,t){return(e=L_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function L_e(n){var e=$_e(n,"string");return typeof e=="symbol"?e:e+""}function $_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function lf(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const fS="columnSorting",F_e=50,gS="append",B_e="replace",J$=fS;BG(fS,H_e);Ee.getSingleton().register("beforeColumnSort");Ee.getSingleton().register("afterColumnSort");var eu=new WeakSet;class XG extends xt{constructor(){super(...arguments),D_e(this,eu),Hb(this,"columnStatesManager",null),Hb(this,"columnMetaCache",null),Hb(this,"pluginKey",fS),Hb(this,"indexesSequenceCache",null)}static get PLUGIN_KEY(){return fS}static get PLUGIN_PRIORITY(){return F_e}isEnabled(){return!!this.hot.getSettings()[this.pluginKey]}enablePlugin(){var e=this;this.enabled||(this.columnStatesManager=new p_e(this.hot,`${this.pluginKey}.sortingStates`),this.columnMetaCache=new eh(t=>{let i=this.hot.toVisualColumn(t);return i===null&&(i=t),this.getMergedPluginSettings(i)}),this.hot.columnIndexMapper.registerMap(`${this.pluginKey}.columnMeta`,this.columnMetaCache),this.addHook("afterGetColHeader",(t,i)=>lf(eu,this,V_e).call(this,t,i)),this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return lf(eu,e,j_e).call(e,...i)}),this.addHook("afterOnCellMouseDown",(t,i)=>this.onAfterOnCellMouseDown(t,i)),this.addHook("afterInit",()=>lf(eu,this,kM).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return lf(eu,e,W_e).call(e,...i)}),this.hot.view&&lf(eu,this,kM).call(this),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){const e=(t,i)=>{const s=jG(i);zG(t,i)===!1||s===null||this.updateHeaderClasses(s)};this.hot.addHook("afterGetColHeader",e),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("afterGetColHeader",e)}),this.hot.batchExecution(()=>{this.indexesSequenceCache!==null&&(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginKey),this.indexesSequenceCache=null)},!0),this.hot.columnIndexMapper.unregisterMap(`${this.pluginKey}.columnMeta`),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();return this.sort(this.getColumnNextConfig(e.col)),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.row===-1&&i.col>=0},relativeToGroup:th,position:"before",group:J$})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(J$)}sort(e){const t=this.getSortConfig(),i=this.getNormalizedSortConfigs(e),s=this.areValidSortConfigs(i);this.hot.runHooks("beforeColumnSort",t,i,s)!==!1&&(t.length===0&&this.indexesSequenceCache===null&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new KY),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),s&&(this.columnStatesManager.setSortStates(i),this.sortByPresetSortStates(i),this.saveAllSortSettings(i)),this.hot.runHooks("afterColumnSort",t,s?i:t,s),s&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}clearSort(){this.sort([])}isSorted(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}getSortConfig(e){return Me(e)?this.columnStatesManager.getColumnSortState(e):this.columnStatesManager.getSortStates()}setSortConfig(e){const t=this.getNormalizedSortConfigs(e);this.areValidSortConfigs(t)&&this.columnStatesManager.setSortStates(t)}getNormalizedSortConfigs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)?e.slice(0,1):[e]}areValidSortConfigs(e){const t=this.hot.countCols();return A_e(e)&&e.every(i=>{let{column:s}=i;return s<=t&&s>=0})}saveAllSortSettings(e){const t=this.columnStatesManager.getAllColumnsProperties(),i=s=>{let{column:r,...o}=s;return{column:this.hot.toPhysicalColumn(r),...o}};t.initialConfig=lt(e,i),this.hot.runHooks("persistentStateSave","columnSorting",t)}getAllSavedSortSettings(){const e={};this.hot.runHooks("persistentStateLoad","columnSorting",e);const t=e.value,i=s=>{let{column:r,...o}=s;return{column:this.hot.toVisualColumn(r),...o}};return Me(t)&&Array.isArray(t.initialConfig)&&(t.initialConfig=lt(t.initialConfig,i)),t}getColumnNextConfig(e){const t=this.columnStatesManager.getSortOrderOfColumn(e);if(Me(t)){const s=Z$(t);return Me(s)?{column:e,sortOrder:s}:void 0}const i=this.hot.countCols();if(Number.isInteger(e)&&e>=0&&e<i)return{column:e,sortOrder:Z$()}}getNextSortConfig(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gS;const i=this.columnStatesManager.getIndexOfColumnInSortQueue(e),s=i!==-1,r=this.getSortConfig(),o=this.getColumnNextConfig(e);if(s){if(Xt(o))return[...r.slice(0,i),...r.slice(i+1)];if(t===gS)return[...r.slice(0,i),...r.slice(i+1),o];if(t===B_e)return[...r.slice(0,i),o,...r.slice(i+1)]}return Me(o)?r.concat(o):r}getPluginColumnConfig(e){if(Je(e)){const t=e[this.pluginKey];if(Je(t))return t}return{}}getMergedPluginSettings(e){const t=this.hot.getSettings()[this.pluginKey],i=this.columnStatesManager.getAllColumnsProperties(),s=this.hot.getCellMeta(0,e),r=Object.getPrototypeOf(s);return Array.isArray(r.columns)?Object.assign(i,t,this.getPluginColumnConfig(r.columns[e])):Yt(r.columns)?Object.assign(i,t,this.getPluginColumnConfig(r.columns(e))):Object.assign(i,t)}getFirstCellSettings(e){const t=this.hot.getCellMeta(0,e),i=Object.create(t);return i[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(e)),i}getNumberOfRowsToSort(e){const t=this.hot.getSettings();return t.maxRows<=e?t.maxRows:e-t.minSpareRows}sortByPresetSortStates(e){if(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),e.length===0)return;const t=[],i=this.hot.countRows(),s=c=>lt(e,h=>this.hot.getDataAtCell(c,h.column));for(let c=0;c<this.getNumberOfRowsToSort(i);c+=1)t.push([this.hot.toPhysicalRow(c)].concat(s(c)));const r=lt(t,c=>c[0]);T_e(t,this.pluginKey,lt(e,c=>c.sortOrder),lt(e,c=>this.getFirstCellSettings(c.column)));for(let c=t.length;c<i;c+=1)t.push([c].concat(s(c)));const o=lt(t,c=>c[0]),a=new Map(lt(r,(c,h)=>[c,o[h]])),l=lt(this.hot.rowIndexMapper.getIndexesSequence(),c=>a.has(c)?a.get(c):c);this.hot.rowIndexMapper.setIndexesSequence(l)}sortBySettings(e){if(Je(e)){this.columnStatesManager.updateAllColumnsProperties(e);const t=e.initialConfig;(Array.isArray(t)||Je(t))&&this.sort(t)}else this.hot.render()}updateHeaderClasses(e){if(ze(e,k_e()),this.enabled!==!1){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];ae(e,O_e(...i))}}onUpdateSettings(e){super.onUpdateSettings(),this.columnMetaCache!==null&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),Me(e[this.pluginKey])&&this.sortBySettings(e[this.pluginKey])}wasClickableHeaderClicked(e,t){return this.getFirstCellSettings(t)[this.pluginKey].headerAction&&Fe(e.target,WG)}onAfterOnCellMouseDown(e,t){if($O(t.row,t.col,e)!==!1&&this.wasClickableHeaderClicked(e,t.col)){this.hot.getShortcutManager().isCtrlPressed()&&(this.hot.deselectCell(),this.hot.selectColumns(t.col));const i=this.hot.getActiveEditor(),s=this.getColumnNextConfig(t.col);i!=null&&i.isOpened()&&this.hot.getCellValidator(i.row,i.col)?this.hot.addHookOnce("postAfterValidate",()=>{this.sort(s)}):this.sort(s)}}destroy(){var e;(e=this.columnStatesManager)===null||e===void 0||e.destroy(),super.destroy()}}function kM(){const n=this.getAllSavedSortSettings();if(Je(n))this.sortBySettings(n);else{const e=this.hot.getSettings()[this.pluginKey];this.sortBySettings(e)}}function V_e(n,e){const t=jG(e);if(zG(n,e)===!1||t===null)return;const i=this.getFirstCellSettings(n)[this.pluginKey],s=i.indicator,r=i.headerAction;if(this.updateHeaderClasses(t,this.columnStatesManager,n,s,r),this.hot.getSettings().ariaTags){const o=this.columnStatesManager.getSortOrderOfColumn(n);$e(e,...Sde(o?`${o}ending`:"none"))}}function W_e(n){n===!0&&this.hot.view&&lf(eu,this,kM).call(this)}function j_e(n,e,t,i){$O(e.row,e.col,n)!==!1&&this.wasClickableHeaderClicked(n,e.col)&&this.hot.getShortcutManager().isCtrlPressed()&&(i.column=!0)}function Eh(n,e,t){return(e=z_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z_e(n){var e=U_e(n,"string");return typeof e=="symbol"?e:e+""}function U_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Y_e{constructor(e,t){Eh(this,"plugin",void 0),Eh(this,"hot",void 0),Eh(this,"endpoints",[]),Eh(this,"settings",void 0),Eh(this,"settingsType","array"),Eh(this,"currentEndpoint",null),Eh(this,"cellsToSetCache",[]),this.plugin=e,this.hot=this.plugin.hot,this.settings=t}initEndpoints(){this.endpoints=this.parseSettings(),this.refreshAllEndpoints()}getEndpoint(e){return this.settingsType==="function"?this.fillMissingEndpointData(this.settings)[e]:this.endpoints[e]}getAllEndpoints(){return this.settingsType==="function"?this.fillMissingEndpointData(this.settings):this.endpoints}fillMissingEndpointData(e){return this.parseSettings(e.call(this))}parseSettings(e){const t=[];let i=e;if(!i&&typeof this.settings=="function"){this.settingsType="function";return}return i||(i=this.settings),L(i,s=>{const r={};this.assignSetting(s,r,"ranges",[[0,this.hot.countRows()-1]]),this.assignSetting(s,r,"reversedRowCoords",!1),this.assignSetting(s,r,"destinationRow",new Error(`
        You must provide a destination row for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(s,r,"destinationColumn",new Error(`
        You must provide a destination column for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(s,r,"sourceColumn",s.destinationColumn),this.assignSetting(s,r,"type","sum"),this.assignSetting(s,r,"forceNumeric",!1),this.assignSetting(s,r,"suppressDataTypeErrors",!0),this.assignSetting(s,r,"customFunction",null),this.assignSetting(s,r,"readOnly",!0),this.assignSetting(s,r,"roundFloat",!1),t.push(r)}),t}assignSetting(e,t,i,s){if(i==="ranges"&&e[i]===void 0){t[i]=s;return}else if(i==="ranges"&&e[i].length===0)return;if(e[i]===void 0){if(s instanceof Error)throw s;t[i]=s}else i==="destinationRow"&&t.reversedRowCoords?t[i]=this.hot.countRows()-e[i]-1:t[i]=e[i]}resetSetupBeforeStructureAlteration(e,t,i){if(this.settingsType!=="function")return;const s=e.indexOf("row")>-1?"row":"col",r=this.getAllEndpoints();L(r,o=>{s==="row"&&o.destinationRow>=t&&(e==="insert_row"?o.alterRowOffset=i:e==="remove_row"&&(o.alterRowOffset=-1*i)),s==="col"&&o.destinationColumn>=t&&(e==="insert_col"?o.alterColumnOffset=i:e==="remove_col"&&(o.alterColumnOffset=-1*i))}),this.resetAllEndpoints(r,!1)}resetSetupAfterStructureAlteration(e,t,i,s,r){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;if(this.settingsType==="function"){const d=()=>(this.hot.removeHook("beforeViewRender",d),this.refreshAllEndpoints());this.hot.addHookOnce("beforeViewRender",d);return}const a=e.indexOf("row")>-1?"row":"col",l=e.indexOf("remove")>-1?-1:1,c=this.getAllEndpoints(),h=e.indexOf("move_row")===0,u=t;L(c,d=>{a==="row"&&d.destinationRow>=u&&(d.alterRowOffset=l*i),a==="col"&&d.destinationColumn>=u&&(d.alterColumnOffset=l*i)}),this.resetAllEndpoints(c,!h),h?L(c,d=>{this.extendEndpointRanges(d,u,s[0],s.length),this.recreatePhysicalRanges(d),this.clearOffsetInformation(d)}):L(c,d=>{this.shiftEndpointCoordinates(d,u)}),o&&this.refreshAllEndpoints()}clearOffsetInformation(e){e.alterRowOffset=void 0,e.alterColumnOffset=void 0}extendEndpointRanges(e,t,i,s){L(e.ranges,r=>{r[1]&&(t>=r[0]&&t<=r[1]?i>r[1]?r[1]+=s:i<r[0]&&(r[0]-=s):i>=r[0]&&i<=r[1]&&(r[1]-=s,t<=r[0]&&(r[0]+=1,r[1]+=1)))})}recreatePhysicalRanges(e){const t=e.ranges,i=[],s=[];L(t,r=>{const o=[];if(r[1])for(let a=r[0];a<=r[1];a++)o.push(this.hot.toPhysicalRow(a));else o.push(this.hot.toPhysicalRow(r[0]));s.push(o)}),L(s,r=>{let o=[];L(r,(a,l)=>{l===0?o.push(a):r[l]!==r[l-1]+1&&(o.push(r[l-1]),i.push(o),o=[],o.push(a)),l===r.length-1&&(o.push(a),i.push(o))})}),e.ranges=i}shiftEndpointCoordinates(e,t){e.alterRowOffset&&e.alterRowOffset!==0?(e.destinationRow+=e.alterRowOffset||0,L(e.ranges,i=>{L(i,(s,r)=>{s>=t&&(i[r]+=e.alterRowOffset||0)})})):e.alterColumnOffset&&e.alterColumnOffset!==0&&(e.destinationColumn+=e.alterColumnOffset||0,e.sourceColumn+=e.alterColumnOffset||0)}resetAllEndpoints(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getAllEndpoints(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.some(s=>{const r=s.alterRowOffset||0,o=s.alterColumnOffset||0;return s.destinationRow+r>=this.hot.countRows()||s.destinationColumn+o>=this.hot.countCols()})||(this.cellsToSetCache=[],L(e,s=>{this.resetEndpointValue(s,t)}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}refreshAllEndpoints(){this.cellsToSetCache=[],L(this.getAllEndpoints(),e=>{this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e,"init")}),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshChangedEndpoints(e){const t=[];this.cellsToSetCache=[],L(e,(i,s,r)=>{`${i[2]||""}`!=`${i[3]}`&&L(this.getAllEndpoints(),(o,a)=>{this.hot.propToCol(r[s][1])===o.sourceColumn&&t.indexOf(a)===-1&&t.push(a)})}),L(t,i=>{this.refreshEndpoint(this.getEndpoint(i))}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshCellMetas(){this.endpoints.forEach(e=>{const t=this.hot.toVisualRow(e.destinationRow);if(t!==null){const i=this.hot.getCellMeta(t,e.destinationColumn);i.readOnly=e.readOnly,i.className="columnSummaryResult"}})}refreshEndpoint(e){this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e),this.currentEndpoint=null}resetEndpointValue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const i=e.alterRowOffset||0,s=e.alterColumnOffset||0;this.cellsToSetCache.push([this.hot.toVisualRow(e.destinationRow+(t?i:0)),this.hot.toVisualColumn(e.destinationColumn+(t?s:0)),""])}setEndpointValue(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=this.hot.toVisualRow(e.destinationRow);if(e.destinationRow>=this.hot.countRows()||e.destinationColumn>=this.hot.countCols()){this.throwOutOfBoundsWarning();return}const r=this.hot.toVisualRow(e.destinationRow);if(r!==null){const o=this.hot.getCellMeta(r,e.destinationColumn);(t==="init"||o.readOnly!==e.readOnly)&&(o.readOnly=e.readOnly,o.className="columnSummaryResult")}if((e.roundFloat===!0||Number.isInteger(e.roundFloat))&&!isNaN(e.result)){const o=e.roundFloat;let a=0;Number.isInteger(o)&&(a=Math.min(Math.max(0,o),100)),e.result=e.result.toFixed(a)}i?this.hot.setDataAtCell(s,e.destinationColumn,e.result,"ColumnSummary.set"):this.cellsToSetCache.push([s,e.destinationColumn,e.result]),e.alterRowOffset=void 0,e.alterColumnOffset=void 0}throwOutOfBoundsWarning(){Dt("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}}function Dx(n){return n==null||isNaN(n)}function G_e(n,e){K_e(n,e),e.add(n)}function K_e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function q_e(n,e,t){return(e=X_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function X_e(n){var e=Q_e(n,"string");return typeof e=="symbol"?e:e+""}function Q_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Db(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Nx="columnSummary",Z_e=220;var am=new WeakSet;class J_e extends xt{constructor(){super(...arguments),G_e(this,am),q_e(this,"endpoints",null)}static get PLUGIN_KEY(){return Nx}static get PLUGIN_PRIORITY(){return Z_e}isEnabled(){return!!this.hot.getSettings()[Nx]}enablePlugin(){var e=this;this.enabled||(this.settings=this.hot.getSettings()[Nx],this.endpoints=new Y_e(this,this.settings),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Db(am,e,eRe).call(e,...i)}),this.addHook("afterChange",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Db(am,e,nRe).call(e,...i)}),this.addHook("afterUpdateSettings",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Db(am,e,tRe).call(e,...i)}),this.addHook("beforeCreateRow",(t,i,s)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_row",t,i,null,s)),this.addHook("beforeCreateCol",(t,i,s)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_col",t,i,null,s)),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e.endpoints.resetSetupBeforeStructureAlteration("remove_row",...i)}),this.addHook("beforeRemoveCol",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e.endpoints.resetSetupBeforeStructureAlteration("remove_col",...i)}),this.addHook("afterCreateRow",(t,i,s)=>this.endpoints.resetSetupAfterStructureAlteration("insert_row",t,i,null,s)),this.addHook("afterCreateCol",(t,i,s)=>this.endpoints.resetSetupAfterStructureAlteration("insert_col",t,i,null,s)),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e.endpoints.resetSetupAfterStructureAlteration("remove_row",...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e.endpoints.resetSetupAfterStructureAlteration("remove_col",...i)}),this.addHook("afterRowMove",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Db(am,e,iRe).call(e,...i)}),super.enablePlugin())}disablePlugin(){this.endpoints=null,this.settings=null,this.currentEndpoint=null,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.endpoints.initEndpoints(),super.updatePlugin()}calculate(e){switch(e.type.toLowerCase()){case"sum":e.result=this.calculateSum(e);break;case"min":e.result=this.calculateMinMax(e,e.type);break;case"max":e.result=this.calculateMinMax(e,e.type);break;case"count":e.result=this.countEntries(e);break;case"average":e.result=this.calculateAverage(e);break;case"custom":e.result=e.customFunction.call(this,e);break}}calculateSum(e){let t=0;return et(e.ranges,i=>{t+=this.getPartialSum(i,e.sourceColumn)}),t}getPartialSum(e,t){let i=0,s=e[1]||e[0],r=null,o=0;do{if(r=this.getCellValue(s,t),r=Dx(r)?null:r,r!==null){const a=(`${r}`.split(".")[1]||[]).length||1;a>o&&(o=a)}i+=r||0,s-=1}while(s>=e[0]);return Math.round(i*10**o)/10**o}calculateMinMax(e,t){let i=null;return et(e.ranges,s=>{const r=this.getPartialMinMax(s,e.sourceColumn,t);if(i===null&&r!==null&&(i=r),r!==null)switch(t){case"min":i=Math.min(i,r);break;case"max":i=Math.max(i,r);break}}),i===null?"Not enough data":i}getPartialMinMax(e,t,i){let s=null,r=e[1]||e[0],o;do{if(o=this.getCellValue(r,t),o=Dx(o)?null:o,s===null)s=o;else if(o!==null)switch(i){case"min":s=Math.min(s,o);break;case"max":s=Math.max(s,o);break}r-=1}while(r>=e[0]);return s}countEmpty(e,t){let i,s=0,r=e[1]||e[0];do i=this.getCellValue(r,t),i=Dx(i)?null:i,i===null&&(s+=1),r-=1;while(r>=e[0]);return s}countEntries(e){let t=0;const i=e.ranges;return et(i,s=>{const r=s[1]===void 0?1:s[1]-s[0]+1,o=this.countEmpty(s,e.sourceColumn);t+=r,t-=o}),t}calculateAverage(e){const t=this.calculateSum(e),i=this.countEntries(e);return t/i}getCellValue(e,t){const i=this.hot.toVisualRow(e),s=this.hot.toVisualColumn(t);let r=this.hot.getSourceDataAtCell(e,t),o="";if(i!==null&&s!==null&&(o=this.hot.getCellMeta(i,s).className||""),o.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&(typeof r=="string"&&(r=r.replace(/,/,".")),r=parseFloat(r)),isNaN(r)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw new Error(Nt`ColumnSummary plugin: cell at (${e}, ${t}) is not in a\x20
          numeric format. Cannot do the calculation.`);return r}}function eRe(){this.endpoints.initEndpoints()}function tRe(n){n.columns!==void 0&&this.endpoints.refreshCellMetas()}function nRe(n,e){n&&e!=="ColumnSummary.reset"&&e!=="ColumnSummary.set"&&e!=="loadData"&&this.endpoints.refreshChangedEndpoints(n)}function iRe(n,e){this.endpoints.resetSetupBeforeStructureAlteration("move_row",n[0],n.length,n,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",e,n.length,n,this.pluginName)}function sRe(n,e){QG(n,e),e.add(n)}function Lx(n,e,t){QG(n,e),e.set(n,t)}function QG(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cf(n,e){return n.get(FO(n,e))}function HM(n,e,t){return n.set(FO(n,e),t),t}function FO(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var mS=new WeakMap,Nb=new WeakMap,Lb=new WeakMap,eF=new WeakSet;class ZG{constructor(){sRe(this,eF),Lx(this,mS,!0),Lx(this,Nb,null),Lx(this,Lb,new ResizeObserver(e=>FO(eF,this,rRe).call(this,e)))}setObservedElement(e){HM(Nb,this,e)}unobserve(){cf(Lb,this).unobserve(cf(Nb,this))}observe(){HM(mS,this,!0),cf(Lb,this).observe(cf(Nb,this))}destroy(){cf(Lb,this).disconnect()}}function rRe(n){if(cf(mS,this)||!Array.isArray(n)||!n.length){HM(mS,this,!1);return}n.forEach(e=>{let{borderBoxSize:t}=e;const{inlineSize:i,blockSize:s}=t[0];this.runLocalHooks("resize",i,s)})}Lt(ZG,Mi);function Th(n,e,t){oRe(n,e),e.set(n,t)}function oRe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wt(n,e){return n.get(JG(n,e))}function La(n,e,t){return n.set(JG(n,e),t),t}function JG(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Mh=new WeakMap,$x=new WeakMap,$a=new WeakMap,Ah=new WeakMap,Bl=new WeakMap,$b=new WeakMap,Dd=new WeakMap;class fu{static get CLASS_EDITOR_CONTAINER(){return"htCommentsContainer"}static get CLASS_EDITOR(){return"htComments"}static get CLASS_INPUT(){return"htCommentTextArea"}static get CLASS_CELL(){return"htCommentCell"}constructor(e,t){var i=this;Th(this,Mh,void 0),Th(this,$x,!1),Th(this,$a,null),Th(this,Ah,void 0),Th(this,Bl,void 0),Th(this,$b,!0),Th(this,Dd,new ZG),La(Mh,this,e),La($x,this,t),La(Ah,this,this.createEditor()),La(Bl,this,Wt(Ah,this).style),Wt(Dd,this).setObservedElement(this.getInputElement()),Wt(Dd,this).addLocalHook("resize",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.runLocalHooks("resize",...r)}),this.hide()}setPosition(e,t){Wt(Bl,this).left=`${e}px`,Wt(Bl,this).top=`${t}px`}setSize(e,t){if(e&&t){const i=this.getInputElement();i.style.width=`${e}px`,i.style.height=`${t}px`}}getSize(){return{width:Qt(this.getInputElement()),height:$n(this.getInputElement())}}observeSize(){Wt(Dd,this).observe()}resetSize(){const e=this.getInputElement();e.style.width="",e.style.height=""}setReadOnlyState(e){const t=this.getInputElement();t.readOnly=e}show(){Wt(Bl,this).display="block",La($b,this,!1)}hide(){Wt(Dd,this).unobserve(),Wt($b,this)||(Wt(Bl,this).display="none"),La($b,this,!0)}isVisible(){return Wt(Bl,this).display==="block"}setValue(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"")||"";this.getInputElement().value=t}getValue(){return this.getInputElement().value}isFocused(){return Wt(Mh,this).activeElement===this.getInputElement()}focus(){this.getInputElement().focus()}createEditor(){const e=Wt(Mh,this).createElement("div"),t=Wt(Mh,this).createElement("textarea");return e.style.display="none",La($a,this,Wt(Mh,this).createElement("div")),Wt($a,this).setAttribute("dir",Wt($x,this)?"rtl":"ltr"),ae(Wt($a,this),fu.CLASS_EDITOR_CONTAINER),Wt(Mh,this).body.appendChild(Wt($a,this)),ae(e,fu.CLASS_EDITOR),ae(t,fu.CLASS_INPUT),t.setAttribute("data-hot-input",!0),e.appendChild(t),Wt($a,this).appendChild(e),e}getInputElement(){return Wt(Ah,this).querySelector(`.${fu.CLASS_INPUT}`)}destroy(){const e=Wt($a,this)?Wt($a,this).parentNode:null;Wt(Ah,this).parentNode.removeChild(Wt(Ah,this)),La(Ah,this,null),La(Bl,this,null),Wt(Dd,this).destroy(),e&&e.removeChild(Wt($a,this))}}Lt(fu,Mi);function Fx(n,e,t){return(e=aRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aRe(n){var e=lRe(n,"string");return typeof e=="symbol"?e:e+""}function lRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const cRe=250,hRe=250;class e3{constructor(e){Fx(this,"wasLastActionShow",!0),Fx(this,"showDebounced",null),Fx(this,"hidingTimer",null),this.updateDelay(e)}hide(){this.wasLastActionShow=!1,this.hidingTimer=setTimeout(()=>{this.wasLastActionShow===!1&&this.runLocalHooks("hide")},hRe)}show(e){this.wasLastActionShow=!0,this.showDebounced(e)}cancelHiding(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}updateDelay(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cRe;this.showDebounced=z0(t=>{this.wasLastActionShow&&this.runLocalHooks("show",t.from.row,t.from.col)},e)}destroy(){this.clearLocalHooks()}}Lt(e3,Mi);function uRe(n,e){return n.indexOf(e)!==-1?n:`${n.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","")} ${e}`}function dRe(n,e){return n.indexOf(e)!==-1?n:`${n.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","")} ${e}`}function Ph(n,e){const t={};return L(n,i=>{i.forAll((s,r)=>{s>=0&&r>=0&&(t[s]||(t[s]=[]),t[s][r]=e(s,r))})}),t}function Jl(n,e,t,i,s){L(n,r=>{r.forAll((o,a)=>{o>=0&&a>=0&&fRe(o,a,e,t,i,s)})})}function fRe(n,e,t,i,s,r){const o=s(n,e);let a=i;o.className&&(t==="vertical"?a=uRe(o.className,i):a=dRe(o.className,i)),r(n,e,"className",a)}function Qa(n){return`<span class="selected">✓</span>${n}`}function Cp(n,e){let t=!1;return Array.isArray(n)&&L(n,i=>(i.forAll((s,r)=>{if(s>=0&&r>=0&&e(s,r))return t=!0,!1}),t)),t}function c_(n,e){const t={top:0,left:0};if(e!==n.ownerDocument){const{frameElement:i}=e.defaultView,{top:s,left:r}=i.getBoundingClientRect();t.top=s,t.left=r}return t}function gRe(n){return function(e,t){const i=this.getCellMeta(e,t).className;return i&&i.indexOf(n)!==-1}}function ds(n,e){return Cp(n.getSelectedRange(),gRe(e).bind(n))}const nt="---------";function mRe(){return{name:nt}}const dr="alignment";function pRe(){return{key:dr,name(){return this.getTranslatedPhrase(RI)},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()?!0:!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:`${dr}:left`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(tS)},ariaChecked(){return ds(this,"htLeft")},name(){let n=this.getTranslatedPhrase(tS);return ds(this,"htLeft")&&(n=Qa(n)),n},callback(){const n=this.getSelectedRange(),e=Ph(n,(s,r)=>this.getCellMeta(s,r).className),t="horizontal",i="htLeft";this.runHooks("beforeCellAlignment",e,n,t,i),Jl(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{key:`${dr}:center`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(nS)},ariaChecked(){return ds(this,"htCenter")},name(){let n=this.getTranslatedPhrase(nS);return ds(this,"htCenter")&&(n=Qa(n)),n},callback(){const n=this.getSelectedRange(),e=Ph(n,(s,r)=>this.getCellMeta(s,r).className),t="horizontal",i="htCenter";this.runHooks("beforeCellAlignment",e,n,t,i),Jl(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{key:`${dr}:right`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(iS)},ariaChecked(){return ds(this,"htRight")},name(){let n=this.getTranslatedPhrase(iS);return ds(this,"htRight")&&(n=Qa(n)),n},callback(){const n=this.getSelectedRange(),e=Ph(n,(s,r)=>this.getCellMeta(s,r).className),t="horizontal",i="htRight";this.runHooks("beforeCellAlignment",e,n,t,i),Jl(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{key:`${dr}:justify`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(sS)},ariaChecked(){return ds(this,"htJustify")},name(){let n=this.getTranslatedPhrase(sS);return ds(this,"htJustify")&&(n=Qa(n)),n},callback(){const n=this.getSelectedRange(),e=Ph(n,(s,r)=>this.getCellMeta(s,r).className),t="horizontal",i="htJustify";this.runHooks("beforeCellAlignment",e,n,t,i),Jl(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{name:nt},{key:`${dr}:top`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(rS)},ariaChecked(){return ds(this,"htTop")},name(){let n=this.getTranslatedPhrase(rS);return ds(this,"htTop")&&(n=Qa(n)),n},callback(){const n=this.getSelectedRange(),e=Ph(n,(s,r)=>this.getCellMeta(s,r).className),t="vertical",i="htTop";this.runHooks("beforeCellAlignment",e,n,t,i),Jl(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{key:`${dr}:middle`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(oS)},ariaChecked(){return ds(this,"htMiddle")},name(){let n=this.getTranslatedPhrase(oS);return ds(this,"htMiddle")&&(n=Qa(n)),n},callback(){const n=this.getSelectedRange(),e=Ph(n,(s,r)=>this.getCellMeta(s,r).className),t="vertical",i="htMiddle";this.runHooks("beforeCellAlignment",e,n,t,i),Jl(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1},{key:`${dr}:bottom`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(aS)},ariaChecked(){return ds(this,"htBottom")},name(){let n=this.getTranslatedPhrase(aS);return ds(this,"htBottom")&&(n=Qa(n)),n},callback(){const n=this.getSelectedRange(),e=Ph(n,(s,r)=>this.getCellMeta(s,r).className),t="vertical",i="htBottom";this.runHooks("beforeCellAlignment",e,n,t,i),Jl(n,t,i,(s,r)=>this.getCellMeta(s,r),(s,r,o,a)=>this.setCellMeta(s,r,o,a)),this.render()},disabled:!1}]}}}const h_="clear_column";function wRe(){return{key:h_,name(){return this.getTranslatedPhrase(hI)},callback(n,e){const t=e[0].start.col,i=e[0].end.col;this.countRows()&&this.populateFromArray(0,t,[[null]],Math.max(e[0].start.row,e[0].end.row),i,"ContextMenu.clearColumn")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:!this.selection.isSelectedByColumnHeader()}}}const sv="col_left";function vRe(){return{key:sv,name(){return this.getTranslatedPhrase(sI)},callback(){const n=this.getSelectedRangeLast().getTopLeftCorner(),e=this.isRtl()?"insert_col_end":"insert_col_start";this.alter(e,n.col,1,"ContextMenu.columnLeft")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:this.selection.isSelectedByCorner()?this.countCols()===0:this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}}const rv="col_right";function bRe(){return{key:rv,name(){return this.getTranslatedPhrase(rI)},callback(){const n=this.getSelectedRangeLast().getTopRightCorner(),e=this.isRtl()?"insert_col_start":"insert_col_end";this.alter(e,n.col,1,"ContextMenu.columnRight")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:this.selection.isSelectedByCorner()?!1:this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}}const ov="make_read_only";function yRe(){return{key:ov,checkable:!0,ariaChecked(){return Cp(this.getSelectedRange(),(e,t)=>this.getCellMeta(e,t).readOnly)},ariaLabel(){return this.getTranslatedPhrase(eS)},name(){let n=this.getTranslatedPhrase(eS);return Cp(this.getSelectedRange(),(t,i)=>this.getCellMeta(t,i).readOnly)&&(n=Qa(n)),n},callback(){const n=this.getSelectedRange(),e=Cp(n,(t,i)=>this.getCellMeta(t,i).readOnly);L(n,t=>{t.forAll((i,s)=>{i>=0&&s>=0&&this.setCellMeta(i,s,"readOnly",!e)})}),this.render()},disabled(){const n=this.getSelectedRangeLast();return!!(!n||n.isSingleHeader()||this.selection.isSelectedByCorner()||this.countRows()===0||this.countCols()===0||!this.getSelectedRange()||this.getSelectedRange().length===0)}}}const u_="redo";function CRe(){return{key:u_,name(){return this.getTranslatedPhrase(cI)},callback(){this.redo()},hidden(){const n=this.getPlugin("undoRedo");return!n||!n.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isRedoAvailable()}}}const av="remove_col";function SRe(){return{key:av,name(){const n=this.getSelected();let e=0;if(n)if(n.length>1)e=1;else{const[,t,,i]=n[0];t-i!==0&&(e=1)}return this.getTranslatedPhrase(aI,e)},callback(){this.alter("remove_col",hbe(this),null,"ContextMenu.removeColumn")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();if(!n||n.isSingleHeader()&&n.highlight.col<0)return!0;const e=this.countCols();return this.selection.isSelectedByCorner()?e===0:this.selection.isSelectedByRowHeader()||e===0},hidden(){return!this.getSettings().allowRemoveColumn}}}const d_="remove_row";function _Re(){return{key:d_,name(){const n=this.getSelected();let e=0;if(n)if(n.length>1)e=1;else{const[t,,i]=n[0];t-i!==0&&(e=1)}return this.getTranslatedPhrase(oI,e)},callback(){this.alter("remove_row",ube(this),1,"ContextMenu.removeRow")},disabled(){const n=this.getSelectedRangeLast();if(!n||n.isSingleHeader()&&n.highlight.row<0)return!0;const e=this.countRows();return this.selection.isSelectedByCorner()?e===0:this.selection.isSelectedByColumnHeader()||e===0},hidden(){return!this.getSettings().allowRemoveRow}}}const f_="row_above";function RRe(){return{key:f_,name(){return this.getTranslatedPhrase(nI)},callback(){const n=this.getSelectedRangeLast().getTopLeftCorner();this.alter("insert_row_above",n.row,1,"ContextMenu.rowAbove")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.row<0?!0:this.selection.isSelectedByCorner()?this.countRows()===0:this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}}const g_="row_below";function xRe(){return{key:g_,name(){return this.getTranslatedPhrase(iI)},callback(){const n=this.getSelectedRangeLast().getBottomRightCorner();this.alter("insert_row_below",n.row,1,"ContextMenu.rowBelow")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.row<0?!0:this.selection.isSelectedByCorner()?!1:this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}}const uw="no_items";function ERe(){return{key:uw,name(){return this.getTranslatedPhrase(tI)},disabled:!0,isCommand:!1}}const m_="undo";function TRe(){return{key:m_,name(){return this.getTranslatedPhrase(lI)},callback(){this.undo()},hidden(){const n=this.getPlugin("undoRedo");return!n||!n.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isUndoAvailable()}}}const MRe=[f_,g_,sv,rv,h_,d_,av,m_,u_,ov,dr,nt,uw],ARe={[nt]:mRe,[uw]:ERe,[f_]:RRe,[g_]:xRe,[sv]:vRe,[rv]:bRe,[h_]:wRe,[d_]:_Re,[av]:SRe,[m_]:TRe,[u_]:CRe,[ov]:yRe,[dr]:pRe};function t3(){const n={};return et(ARe,(e,t)=>{n[t]=e()}),n}function PRe(n){return{key:"commentsAddEdit",name(){var e;const t=(e=this.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t!=null&&t.isCell()&&n.getCommentAtCell(t.row,t.col)?this.getTranslatedPhrase(CI):this.getTranslatedPhrase(yI)},callback(){const e=this.getSelectedRangeLast();n.setRange(e),n.show(),n.focusEditor()},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function IRe(n){return{key:"commentsRemove",name(){return this.getTranslatedPhrase(SI)},callback(){this.getSelectedRangeLast().forAll((t,i)=>{t>=0&&i>=0&&n.removeCommentAtCell(t,i,!1)}),this.render()},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function ORe(n){return{key:"commentsReadOnly",name(){const e=this.getTranslatedPhrase(_I);return Cp(this.getSelectedRange(),(i,s)=>n.getCommentMeta(i,s,Qy))?Qa(e):e},callback(){this.getSelectedRangeLast().forAll((t,i)=>{if(t>=0&&i>=0){const s=!!n.getCommentMeta(t,i,Qy);n.updateCommentMeta(t,i,{[Qy]:!s})}})},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||!n.getCommentAtCell(e.highlight.row,e.highlight.col)||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function kRe(n,e){n3(n,e),e.add(n)}function Nd(n,e,t){n3(n,e),e.set(n,t)}function n3(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function HRe(n,e,t){return(e=DRe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DRe(n){var e=NRe(n,"string");return typeof e=="symbol"?e:e+""}function NRe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yc(n,e,t){return n.set(Yr(n,e),t),t}function ot(n,e){return n.get(Yr(n,e))}function Yr(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Sp="comments",LRe=60,Za="comment",Vm="value",i3="style",Qy="readOnly",Fb=Sp,DM=`plugin:${Sp}`;var zt=new WeakMap,Bo=new WeakMap,p_=new WeakMap,Zy=new WeakMap,NM=new WeakMap,pS=new WeakMap,To=new WeakSet;class $Re extends xt{constructor(){super(...arguments),kRe(this,To),HRe(this,"range",{}),Nd(this,zt,null),Nd(this,Bo,null),Nd(this,p_,!1),Nd(this,Zy,!1),Nd(this,NM,null),Nd(this,pS,"")}static get PLUGIN_KEY(){return Sp}static get PLUGIN_PRIORITY(){return LRe}isEnabled(){return!!this.hot.getSettings()[Sp]}enablePlugin(){var e=this;this.enabled||(ot(zt,this)||(yc(zt,this,new fu(this.hot.rootDocument,this.hot.isRtl())),ot(zt,this).addLocalHook("resize",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Yr(To,e,URe).call(e,...i)})),ot(Bo,this)||yc(Bo,this,new e3(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",t=>this.addToContextMenu(t)),this.addHook("afterRenderer",(t,i,s,r,o,a)=>Yr(To,this,WRe).call(this,t,a)),this.addHook("afterScroll",()=>Yr(To,this,GRe).call(this)),this.addHook("afterBeginEditing",()=>this.hide()),this.addHook("afterDocumentKeyDown",t=>Yr(To,this,YRe).call(this,t)),ot(Bo,this).addLocalHook("hide",()=>this.hide()),ot(Bo,this).addLocalHook("show",(t,i)=>this.showAtCell(t,i)),this.registerShortcuts(),this.registerListeners(),super.enablePlugin())}updatePlugin(){ot(Bo,this).updateDelay(this.getDisplayDelaySetting()),super.updatePlugin()}disablePlugin(){this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const e=this.hot.getShortcutManager(),t=e.getContext("grid"),i=e.addContext(DM);t.addShortcut({keys:[["Control","Alt","M"]],callback:()=>{const s=this.hot.getSelectedRangeLast();yc(Zy,this,!0),this.hot.scrollToFocusedCell(()=>{this.setRange(s),this.show(),this.focusEditor(),e.setActiveContextName(DM),this.hot._registerTimeout(()=>{yc(Zy,this,!1)})})},stopPropagation:!0,runOnlyIf:()=>{var s;return((s=this.hot.getSelectedRangeLast())===null||s===void 0?void 0:s.highlight.isCell())&&!ot(zt,this).isVisible()},group:Fb}),i.addShortcut({keys:[["Escape"]],callback:()=>{ot(zt,this).setValue(ot(pS,this)),this.hide(),e.setActiveContextName("grid")},runOnlyIf:()=>ot(zt,this).isVisible()&&ot(zt,this).isFocused(),group:Fb}),i.addShortcut({keys:[["Control/Meta","Enter"]],callback:()=>{this.hide(),e.setActiveContextName("grid")},runOnlyIf:()=>ot(zt,this).isVisible()&&ot(zt,this).isFocused(),group:Fb})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(Fb)}registerListeners(){const{rootDocument:e}=this.hot,t=this.getEditorInputElement();this.eventManager.addEventListener(e,"mouseover",i=>Yr(To,this,BRe).call(this,i)),this.eventManager.addEventListener(e,"mousedown",i=>Yr(To,this,FRe).call(this,i)),this.eventManager.addEventListener(e,"mouseup",()=>Yr(To,this,VRe).call(this)),this.eventManager.addEventListener(t,"focus",()=>Yr(To,this,zRe).call(this)),this.eventManager.addEventListener(t,"blur",()=>Yr(To,this,jRe).call(this))}setRange(e){this.range=e}clearRange(){this.range={}}targetIsCellWithComment(e){const t=Lc(e.target,"TD","TBODY");return!!(t&&Fe(t,"htCommentCell")&&Lc(t,[this.hot.rootElement]))}targetIsCommentTextArea(e){return this.getEditorInputElement()===e.target}setComment(e){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const t=ot(zt,this).getValue();let i="";e!=null?i=e:t!=null&&(i=t);const s=this.range.from.row,r=this.range.from.col;this.updateCommentMeta(s,r,{[Vm]:i}),this.hot.render()}setCommentAtCell(e,t,i){this.setRange({from:this.hot._createCellCoords(e,t)}),this.setComment(i)}removeComment(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,Za),e&&this.hot.render(),this.hide()}removeCommentAtCell(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.setRange({from:this.hot._createCellCoords(e,t)}),this.removeComment(i)}getComment(){const e=this.range.from.row,t=this.range.from.col;return this.getCommentMeta(e,t,Vm)}getCommentAtCell(e,t){return this.getCommentMeta(e,t,Vm)}show(){var e;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const{from:{row:t,col:i}}=this.range;if(t<0||t>this.hot.countSourceRows()-1||i<0||i>this.hot.countSourceCols()-1)return!1;const s=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return ot(Bo,this).cancelHiding(),ot(zt,this).setValue((e=s[Za]?s[Za][Vm]:null)!==null&&e!==void 0?e:""),ot(zt,this).show(),this.refreshEditor(!0),!0}showAtCell(e,t){return this.setRange({from:this.hot._createCellCoords(e,t)}),this.show()}hide(){ot(zt,this).hide()}refreshEditor(){var e,t;if(!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(!this.range.from||!ot(zt,this).isVisible()))return;const{rowIndexMapper:s,columnIndexMapper:r}=this.hot,{row:o,col:a}=this.range.from;let l=s.getRenderableFromVisualIndex(o),c=r.getRenderableFromVisualIndex(a);const h=l===null;ot(zt,this).setPosition(0,0),l===null&&(l=s.getRenderableFromVisualIndex(s.getNearestNotHiddenIndex(o,-1))),c===null&&(c=r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(a,-1)));const u=l===null,d=c===null;l=(e=l)!==null&&e!==void 0?e:0,c=(t=c)!==null&&t!==void 0?t:0;const{rootWindow:f,view:{_wt:g}}=this.hot,{wtTable:m}=g,w=g.getCell({row:l,col:c},!0),v=this.getCommentMeta(o,a,i3);v?ot(zt,this).setSize(v.width,v.height):ot(zt,this).resetSize();const C=d?0:m.getStretchedColumnWidth(c),S=h&&!u?$n(w):0,{left:x,top:_,width:R,height:M}=w.getBoundingClientRect(),{width:O,height:P}=ot(zt,this).getSize(),{innerWidth:k,innerHeight:B}=this.hot.rootWindow,z=this.hot.rootDocument.documentElement;let Q=x+f.scrollX+C,te=_+f.scrollY+S;this.hot.isRtl()&&(Q-=O+C),this.hot.isLtr()&&x+R+O>k?Q=x+f.scrollX-O-1:this.hot.isRtl()&&Q<-(z.scrollWidth-z.clientWidth)&&(Q=x+f.scrollX+C+1),_+P>B&&(te-=P-M+1),ot(zt,this).setPosition(Q,te),ot(zt,this).setReadOnlyState(this.getCommentMeta(o,a,Qy)),ot(zt,this).observeSize()}focusEditor(){ot(zt,this).focus()}updateCommentMeta(e,t,i){const s=this.hot.getCellMeta(e,t)[Za];let r;s?(r=Yi(s),Xw(r,i)):r=i,this.hot.setCellMeta(e,t,Za,r)}getCommentMeta(e,t,i){const s=this.hot.getCellMeta(e,t);if(s[Za])return s[Za][i]}addToContextMenu(e){e.items.push({name:nt},PRe(this),IRe(this),ORe(this))}getDisplayDelaySetting(){const e=this.hot.getSettings()[Sp];if(Je(e))return e.displayDelay}getEditorInputElement(){return ot(zt,this).getInputElement()}destroy(){var e,t;(e=ot(zt,this))===null||e===void 0||e.destroy(),(t=ot(Bo,this))===null||t===void 0||t.destroy(),super.destroy()}}function FRe(n){if(!(!this.hot.view||!this.hot.view._wt)&&!ot(p_,this)&&!this.targetIsCommentTextArea(n)){const e=Lc(n.target,"TD","TBODY");let t=null;e&&(t=this.hot.getCoords(e)),(!e||this.range.from&&t&&(this.range.from.row!==t.row||this.range.from.col!==t.col))&&this.hide()}}function BRe(n){const{rootDocument:e}=this.hot;if(!(ot(p_,this)||ot(zt,this).isFocused()||Fe(n.target,"wtBorder")||ot(NM,this)===n.target||!ot(zt,this)))if(yc(NM,this,e.elementFromPoint(n.clientX,n.clientY)),this.targetIsCellWithComment(n)){const t=this.hot._createCellRange(this.hot.getCoords(n.target));ot(Bo,this).show(t)}else Tc(n.target,e)&&!this.targetIsCommentTextArea(n)&&ot(Bo,this).hide()}function VRe(){yc(p_,this,!1)}function WRe(n,e){e[Za]&&e[Za][Vm]&&ae(n,e.commentedCellClassName)}function jRe(){yc(pS,this,""),this.hot.getShortcutManager().setActiveContextName("grid"),this.setComment()}function zRe(){yc(pS,this,this.getComment()),this.hot.listen(),this.hot.getShortcutManager().setActiveContextName(DM)}function URe(n,e){this.updateCommentMeta(this.range.from.row,this.range.from.col,{[i3]:{width:n,height:e}})}function YRe(n){ot(zt,this).isVisible()&&Ar(n)}function GRe(){ot(Zy,this)||this.hide()}var tF=_0,KRe=TypeError,qRe=function(n,e){if(!delete n[e])throw new KRe("Cannot delete property "+tF(e)+" of "+tF(n))},XRe=Ti,QRe=Nw,ZRe=Fw,JRe=hz,exe=qRe,txe=uz,nxe=[].unshift(0)!==1,ixe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(n){return n instanceof TypeError}},sxe=nxe||!ixe();XRe({target:"Array",proto:!0,arity:1,forced:sxe},{unshift:function(e){var t=QRe(this),i=ZRe(t),s=arguments.length;if(s){txe(i+s);for(var r=i;r--;){var o=r+s;r in t?t[o]=t[r]:exe(t,o)}for(var a=0;a<s;a++)t[a]=arguments[a]}return JRe(t,i+s)}});function Bx(n,e,t){return(e=rxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rxe(n){var e=oxe(n,"string");return typeof e=="symbol"?e:e+""}function oxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class s3{constructor(e){Bx(this,"hot",void 0),Bx(this,"commands",{}),Bx(this,"commonCallback",null),this.hot=e}registerCommand(e,t){this.commands[e]=t}setCommonCallback(e){this.commonCallback=e}execute(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];const r=e.split(":"),o=r[0],a=r.length===2?r[1]:null;let l=this.commands[o];if(!l)throw new Error(`Menu command '${o}' not exists.`);if(a&&l.submenu&&(l=axe(a,l.submenu.items)),l.disabled===!0||typeof l.disabled=="function"&&l.disabled.call(this.hot)===!0||wn(l,"submenu"))return;const c=[];typeof l.callback=="function"&&c.push(l.callback),typeof this.commonCallback=="function"&&c.push(this.commonCallback),i.unshift(r.join(":")),L(c,h=>h.apply(this.hot,i))}}function axe(n,e){let t;return L(e,i=>{const s=i.key?i.key.split(":"):null;if(Array.isArray(s)&&s[1]===n)return t=i,!1}),t}function Vx(n,e,t){return(e=lxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lxe(n){var e=cxe(n,"string");return typeof e=="symbol"?e:e+""}function cxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class r3{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Vx(this,"hot",void 0),Vx(this,"predefinedItems",t3()),Vx(this,"defaultOrderPattern",void 0),this.hot=e,this.defaultOrderPattern=t}setPredefinedItems(e){const t={};this.defaultOrderPattern.length=0,et(e,(i,s)=>{let r="";i.name===nt?(t[nt]=i,r=nt):isNaN(parseInt(s,10))?(i.key=i.key===void 0?s:i.key,t[s]=i,r=i.key):(t[i.key]=i,r=i.key),this.defaultOrderPattern.push(r)}),this.predefinedItems=t}getItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return hxe(e,this.defaultOrderPattern,this.predefinedItems)}}function hxe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=[];let s=n;return s&&s.items?s=s.items:Array.isArray(s)||(s=e),Je(s)?et(s,(r,o)=>{let a=t[typeof r=="string"?r:o];a||(a=r),Je(r)?zn(a,r):typeof a=="string"&&(a={name:a}),a.key===void 0&&(a.key=o),i.push(a)}):L(s,(r,o)=>{let a=t[r];!a&&MRe.indexOf(r)>=0||(a||(a={name:r,key:`${o}`}),Je(r)&&zn(a,r),a.key===void 0&&(a.key=o),i.push(a))}),i}function Vl(n,e,t){return(e=uxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uxe(n){var e=dxe(n,"string");return typeof e=="symbol"?e:e+""}function dxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class fxe{constructor(e,t){Vl(this,"top",void 0),Vl(this,"topRelative",void 0),Vl(this,"left",void 0),Vl(this,"leftRelative",void 0),Vl(this,"scrollTop",void 0),Vl(this,"scrollLeft",void 0),Vl(this,"cellHeight",void 0),Vl(this,"cellWidth",void 0);const i=t.scrollY,s=t.scrollX;let r,o,a,l,c,h;this.rootWindow=t,this.type=this.getSourceType(e),this.type==="literal"?(r=parseInt(e.top,10),a=parseInt(e.left,10),c=e.height||0,h=e.width||0,o=r,l=a,r+=i,a+=s):this.type==="event"&&(r=parseInt(e.pageY,10),a=parseInt(e.pageX,10),c=e.target.clientHeight,h=e.target.clientWidth,o=r-i,l=a-s),this.top=r,this.topRelative=o,this.left=a,this.leftRelative=l,this.scrollTop=i,this.scrollLeft=s,this.cellHeight=c,this.cellWidth=h}getSourceType(e){let t="literal";return e instanceof Event&&(t="event"),t}fitsAbove(e){return this.topRelative>=e.offsetHeight}fitsBelow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+e.offsetHeight<=t}fitsOnRight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+e.offsetWidth<=t}fitsOnLeft(e){return this.leftRelative>=e.offsetWidth}}function lm(n,e,t){gxe(n,e),e.set(n,t)}function gxe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ht(n,e){return n.get(o3(n,e))}function Bb(n,e,t){return n.set(o3(n,e),t),t}function o3(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ki=new WeakMap,Wl=new WeakMap,fs=new WeakMap,Wx=new WeakMap,Ld=new WeakMap;class mxe{constructor(e){lm(this,Ki,void 0),lm(this,Wl,void 0),lm(this,fs,void 0),lm(this,Wx,!1),lm(this,Ld,{above:0,below:0,left:0,right:0}),Bb(Wx,this,e)}setOffset(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ht(Ld,this)[e]=t,this}setElement(e){return Bb(Ki,this,e),this}setParentElement(e){return Bb(Wl,this,e),this}updatePosition(e){Bb(fs,this,new fxe(e,ht(Ki,this).ownerDocument.defaultView)),ht(Wx,this)?(ht(fs,this).fitsBelow(ht(Ki,this))?this.setPositionBelowCursor():ht(fs,this).fitsAbove(ht(Ki,this))?this.setPositionAboveCursor():this.setPositionBelowCursor(),this.updateHorizontalPosition()):(this.setPositionBelowCursor(),this.setPositionOnRightOfCursor())}updateHorizontalPosition(){ht(Ki,this).dir==="rtl"?ht(fs,this).fitsOnLeft(ht(Ki,this))?this.setPositionOnLeftOfCursor():this.setPositionOnRightOfCursor():ht(fs,this).fitsOnRight(ht(Ki,this))?this.setPositionOnRightOfCursor():this.setPositionOnLeftOfCursor()}setPositionAboveCursor(){let e=ht(Ld,this).above+ht(fs,this).top-ht(Ki,this).offsetHeight;ht(Wl,this)&&(e=ht(fs,this).top+ht(fs,this).cellHeight-ht(Ki,this).offsetHeight+3),ht(Ki,this).style.top=`${e}px`}setPositionBelowCursor(){let e=ht(Ld,this).below+ht(fs,this).top+1;ht(Wl,this)&&(e=ht(fs,this).top-1),ht(Ki,this).style.top=`${e}px`}setPositionOnRightOfCursor(){let e=ht(fs,this).left;if(ht(Wl,this)){const t=Number.parseInt(getComputedStyle(ht(Wl,this).querySelector(".htCore")).borderRightWidth,10);e+=ht(fs,this).cellWidth+t}else e+=ht(Ld,this).right;ht(Ki,this).style.left=`${e}px`}setPositionOnLeftOfCursor(){let e=ht(Ld,this).left+ht(fs,this).left-ht(Ki,this).offsetWidth;if(ht(Wl,this)){const t=Number.parseInt(getComputedStyle(ht(Wl,this).querySelector(".htCore")).borderLeftWidth,10);e-=t}ht(Ki,this).style.left=`${e}px`}}function a3(n){let{initialPage:e=-1,size:t=()=>0,onItemSelect:i=()=>{},onClear:s=()=>{}}=n;const r=new Set;let o=kt(e,-1,g()-1);function a(w,v){const C=g()-1;return w<0&&(w=C),w>C&&(w=0),r.has(w)?-1:(r.add(w),i(w,!1)===!1&&(w=a(v===1?++w:--w,v)),w)}function l(w){w>-1&&w<g()&&i(w,!0)!==!1&&(o=w)}function c(){return o}function h(){g()>0&&(r.clear(),o=a(0,1))}function u(){g()>0&&(r.clear(),o=a(g()-1,-1))}function d(){g()>0&&(r.clear(),o=a(++o,1))}function f(){g()>0&&(r.clear(),o=a(--o,-1))}function g(){return Math.max(t(),0)}function m(){r.clear(),o=e,s()}return{setCurrentPage:l,getCurrentPage:c,toFirstItem:h,toLastItem:u,toNextItem:d,toPreviousItem:f,getSize:g,clear:m}}function pxe(n){return lt(n,e=>({start:e.getTopStartCorner(),end:e.getBottomEndCorner()}))}function LM(n){return wn(n,"submenu")}function $M(n){return new RegExp(nt,"i").test(n.name)}function Jy(n,e){return n.disabled===!0||typeof n.disabled=="function"&&n.disabled.call(e)===!0}function nF(n){return wn(n,"disableSelection")}function wxe(n){return Fe(n,"htSeparator")}function vxe(n){return Fe(n,"htSubmenu")}function bxe(n){return Fe(n,"htDisabled")}function yxe(n){return Fe(n,"htSelectionDisabled")}function Cxe(n,e){return!n.hidden||!(typeof n.hidden=="function"&&n.hidden.call(e))}function l3(n,e){const t=n.slice(0);for(let i=0;i<t.length&&t[i].name===e;)t.shift();return t}function Sxe(n,e){let t=n.slice(0);return t.reverse(),t=l3(t,e),t.reverse(),t}function _xe(n){const e=[];return L(n,(t,i)=>{i>0?e[e.length-1].name!==t.name&&e.push(t):e.push(t)}),e}function Rxe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt,t=n.slice(0);return t=l3(t,e),t=Sxe(t,e),t=_xe(t),t}function xxe(n){return n.checkable===!0}function Exe(n){return a3({size:()=>n.countRows(),onItemSelect(e,t){const i=n.getCell(e,0);if(!i||wxe(i)||bxe(i)||yxe(i))return!1;n.selectCell(e,0,...t?[e,0,!1,!1]:[])},onClear(){n.deselectCell()}})}function Txe(n){const{hot:e,hotMenu:t}=n;return[{keys:[["Control/Meta","A"]],forwardToContext:e.getShortcutManager().getContext("grid"),callback:()=>n.close(!0)},{keys:[["Tab"],["Shift","Tab"]],callback:(i,s)=>{const r=e.getSettings(),o=typeof r.tabMoves=="function"?r.tabMoves(i):r.tabMoves;s.includes("shift")?e.selection.transformStart(-o.row,-o.col):e.selection.transformStart(o.row,o.col),n.close(!0)}},{keys:[["Escape"]],callback:()=>n.close()},{keys:[["ArrowDown"]],callback:()=>n.getNavigator().toNextItem()},{keys:[["ArrowUp"]],callback:()=>n.getNavigator().toPreviousItem()},{keys:[["ArrowRight"]],callback:()=>{const i=t.getSelectedLast();if(i){const s=n.openSubMenu(i[0]);s&&s.getNavigator().toFirstItem()}}},{keys:[["ArrowLeft"]],callback:()=>{t.getSelectedLast()&&n.isSubMenu()&&(n.close(),n.isSubMenu()&&n.parentMenu.hotMenu.listen())}},{keys:[["Control/Meta","ArrowUp"],["Home"]],callback:()=>n.getNavigator().toFirstItem()},{keys:[["Control/Meta","ArrowDown"],["End"]],callback:()=>n.getNavigator().toLastItem()},{keys:[["Enter"],["Space"]],callback:i=>{const s=t.getSelectedLast();s&&(t.getSourceDataAtRow(s[0]).submenu?n.openSubMenu(s[0]).getNavigator().toFirstItem():(n.executeCommand(i),n.close(!0)))}},{keys:[["PageUp"]],callback:()=>{t.getSelectedLast()?t.selection.transformStart(-t.countVisibleRows(),0):n.getNavigator().toFirstItem()}},{keys:[["PageDown"]],callback:()=>{t.getSelectedLast()?t.selection.transformStart(t.countVisibleRows(),0):n.getNavigator().toLastItem()}}]}const c3="menu",iF=c3;function Mxe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=[];i(Txe(n)),e.forEach(c=>{let{shortcuts:h,contextName:u}=c;s(h,u)});function i(c,h){a(h).addShortcuts(c,{group:c3})}function s(c,h){const u=a(h);c.forEach(d=>{let{keys:f}=d;f.forEach(g=>u.removeShortcutsByKeys(g))}),t.push({shortcuts:c,contextName:h}),i(c,h)}function r(){return[...t]}function o(c){return c?`${iF}:${c}`:iF}function a(c){var h;const u=n.hotMenu.getShortcutManager(),d=o(c);return(h=u.getContext(d))!==null&&h!==void 0?h:u.addContext(d)}function l(c){n.hotMenu.getShortcutManager().setActiveContextName(o(c))}return{addCustomShortcuts:s,getCustomShortcuts:r,getContext:a,listen:l}}function Axe(n){return(e,t,i,s,r,o)=>{const a=e.getSourceDataAtRow(i),l=n.rootDocument.createElement("div"),c=typeof o=="function"?o.call(n):o,h=typeof a.ariaLabel=="function"?a.ariaLabel.call(n):a.ariaLabel,u=typeof a.ariaChecked=="function"?a.ariaChecked.call(n):a.ariaChecked;if(lo(t),ae(l,"htItemWrapper"),n.getSettings().ariaTags){const d=!Jy(a,n)&&!nF(a)&&!$M(a);$e(t,[...xxe(a)?[fde(),KC(h),IU(u)]:[dde(),KC(c)],...d?[lg(-1)]:[],...Jy(a,n)?[yde()]:[],...LM(a)?[Sr(!1)]:[]])}t.className="",t.appendChild(l),$M(a)?ae(t,"htSeparator"):typeof a.renderer=="function"?(ae(t,"htCustomMenuRenderer"),t.appendChild(a.renderer(e,l,i,s,r,c))):od(l,c),Jy(a,n)?ae(t,"htDisabled"):nF(a)?ae(t,"htSelectionDisabled"):LM(a)&&ae(t,"htSubmenu")}}function jx(n,e,t){Pxe(n,e),e.set(n,t)}function Pxe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Mo(n,e,t){return(e=Ixe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ixe(n){var e=Oxe(n,"string");return typeof e=="symbol"?e:e+""}function Oxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zx(n,e,t){return n.set(h3(n,e),t),t}function Ih(n,e){return n.get(h3(n,e))}function h3(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const sF=215;var cm=new WeakMap,Vb=new WeakMap,Wb=new WeakMap;class gg{get tableBorderWidth(){return Ih(Wb,this)===void 0&&this.hotMenu&&zx(Wb,this,parseInt(da(this.hotMenu.view._wt.wtTable.TABLE).borderWidth,10)),Ih(Wb,this)}constructor(e,t){var i=this;Mo(this,"hot",void 0),Mo(this,"options",void 0),Mo(this,"eventManager",new Er(this)),Mo(this,"container",void 0),Mo(this,"positioner",void 0),Mo(this,"hotMenu",null),Mo(this,"hotSubMenus",{}),Mo(this,"parentMenu",void 0),Mo(this,"menuItems",null),Mo(this,"origOutsideClickDeselects",null),jx(this,cm,void 0),jx(this,Vb,void 0),jx(this,Wb,void 0),this.hot=e,this.options=t||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:sF,container:this.hot.rootDocument.documentElement},this.container=this.createContainer(this.options.name),this.positioner=new mxe(this.options.keepInViewport),this.parentMenu=this.options.parent||null,this.registerEvents(),this.isSubMenu()&&this.addLocalHook("afterSelectionChange",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i.parentMenu.runLocalHooks("afterSelectionChange",...r)})}registerEvents(){let e=this.hot.rootWindow;for(;e;)this.eventManager.addEventListener(e.document,"mousedown",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(e.document,"touchstart",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(e.document,"contextmenu",t=>this.onDocumentContextMenu(t)),e=Nu(e)}setMenuItems(e){this.menuItems=e}getNavigator(){return Ih(cm,this)}getKeyboardShortcutsCtrl(){return Ih(Vb,this)}getSelectedItem(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}hasSelectedItem(){return Array.isArray(this.hotMenu.getSelectedLast())}isSubMenu(){return this.parentMenu!==null}open(){this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";const e=z0(a=>this.openSubMenu(a),300),t=this.options.minWidth||sF;let i=!1,s=_l(this.menuItems,a=>(a.key===uw&&(i=!0),Cxe(a,this.hot)));if(s.length<1&&!i)s.push(t3()[uw]);else if(s.length===0)return;s=Rxe(s,nt);let r=!1;const o={data:s,colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth(a){return Me(a)&&a<t?t:a},autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,hiddenRows:!0,maxCols:1,columns:[{data:"name",renderer:Axe(this.hot)}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",layoutDirection:this.hot.isRtl()?"rtl":"ltr",ariaTags:!1,beforeOnCellMouseOver:(a,l)=>{Ih(cm,this).setCurrentPage(l.row)},afterOnCellMouseOver:(a,l)=>{this.isAllSubMenusClosed()?e(l.row):this.openSubMenu(l.row)},rowHeights:a=>s[a].name===nt?1:void 0,afterOnCellContextMenu:a=>{a.preventDefault(),dM()&&r&&this.hasSelectedItem()&&this.close(!0)},afterSelection:(a,l,c,h,u)=>{this.hotMenu.view.isMouseDown()&&(u.value=!0),this.runLocalHooks("afterSelectionChange",this.getSelectedItem())},beforeOnCellMouseUp:a=>{this.hasSelectedItem()&&(r=!this.isCommandPassive(this.getSelectedItem()),this.executeCommand(a))},afterOnCellMouseUp:a=>{(!dM()||!Fc(a))&&r&&this.hasSelectedItem()&&(hl()||bP()?this.hot._registerTimeout(()=>this.close(!0),325):this.close(!0))},afterUnlisten:()=>{!this.hasSelectedItem()&&this.isOpened()&&this.hotMenu.listen()}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new this.hot.constructor(this.container,o),this.hotMenu.addHook("afterInit",()=>this.onAfterInit()),this.hotMenu.init(),zx(cm,this,Exe(this.hotMenu)),zx(Vb,this,Mxe(this)),Ih(Vb,this).listen(),this.focus(),this.isSubMenu()&&this.addLocalHook("afterOpen",()=>this.parentMenu.runLocalHooks("afterSubmenuOpen",this)),this.runLocalHooks("afterOpen",this)}close(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isOpened()){if(e&&this.isSubMenu())this.parentMenu.close();else if(Ih(cm,this).clear(),this.closeAllSubMenus(),this.container.style.display="none",this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.isSubMenu()){if(this.hot.getSettings().ariaTags){const t=this.parentMenu.hotMenu.getSelectedLast();if(t){const i=this.parentMenu.hotMenu.getCell(t[0],0);$e(i,[Sr(!1)])}}this.parentMenu.hotMenu.listen()}}}openSubMenu(e){if(!this.hotMenu)return!1;const t=this.hotMenu.getCell(e,0);if(this.closeAllSubMenus(),!t||!vxe(t))return!1;const i=this.hotMenu.getSourceDataAtRow(e),s=new gg(this.hot,{parent:this,name:i.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return s.setMenuItems(i.submenu.items),s.open(),s.setPosition(t.getBoundingClientRect()),this.hotSubMenus[i.key]=s,this.hot.getSettings().ariaTags&&$e(t,[Sr(!0)]),s}closeSubMenu(e){const t=this.hotMenu.getSourceDataAtRow(e),i=this.hotSubMenus[t.key];if(i){i.destroy(),delete this.hotSubMenus[t.key];const s=this.hotMenu.getCell(e,0);this.hot.getSettings().ariaTags&&$e(s,[Sr(!1)])}}closeAllSubMenus(){L(this.hotMenu.getData(),(e,t)=>this.closeSubMenu(t))}isAllSubMenusClosed(){return Object.keys(this.hotSubMenus).length===0}focus(){this.isOpened()&&(this.hotMenu.rootElement.focus({preventScroll:!0}),this.getKeyboardShortcutsCtrl().listen(),this.hotMenu.listen())}destroy(){const e=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),e&&e.removeChild(this.container)}isOpened(){return this.hotMenu!==null}executeCommand(e){if(!this.isOpened()||!this.hasSelectedItem())return;const t=this.getSelectedItem();if(this.runLocalHooks("select",t,e),this.isCommandPassive(t))return;const i=this.hot.getSelectedRange(),s=i?pxe(i):[];this.runLocalHooks("executeCommand",t.key,s,e),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",t.key,s,e)}isCommandPassive(e){return e.isCommand===!1||$M(e)||Jy(e,this.hot)||LM(e)}setOffset(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.positioner.setOffset(e,t)}setPosition(e){this.isSubMenu()&&this.positioner.setParentElement(this.parentMenu.container),this.positioner.setElement(this.container).updatePosition(e)}updateMenuDimensions(){const{wtTable:e}=this.hotMenu.view._wt,t=this.hotMenu.getSettings().data,i=e.hider.style,s=e.holder.style,r=parseInt(i.width,10),o=Un(t,(a,l,c)=>{const u=this.hotMenu.getCell(c,0)?$n(this.hotMenu.getCell(c,0)):0;return a+(l.name===nt?1:u)},0);s.width=`${r+3}px`,s.height=`${o+3}px`,i.height=s.height}createContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const t=this.options.container.ownerDocument;let i=e,s;return i&&(Yt(i)&&(i=i.call(this.hot),i===null||Xt(i)?i="":i=i.toString()),i=i.replace(/[^A-z0-9]/g,"_"),i=`${this.options.className}Sub_${i}`,s=t.querySelector(`.${this.options.className}.${i}`)),s||(s=t.createElement("div"),ae(s,`htMenu ${this.options.className}`),i&&ae(s,i),this.options.container.appendChild(s)),s}onAfterInit(){this.updateMenuDimensions(),this.hot.getSettings().ariaTags&&$e(this.hotMenu.rootElement,[ude(),lg(-1)])}onDocumentMouseDown(e){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!Tc(e.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&&!Tc(e.target,".htMenu")&&this.close(!0))}onDocumentContextMenu(e){this.isOpened()&&Fe(e.target,"htCore")&&Tc(e.target,this.hotMenu.rootElement)&&e.preventDefault()}}Lt(gg,Mi);function kxe(n,e){Hxe(n,e),e.add(n)}function Hxe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ux(n,e,t){return(e=Dxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dxe(n){var e=Nxe(n,"string");return typeof e=="symbol"?e:e+""}function Nxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function jb(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Wm="contextMenu",Lxe=70,rF=Wm;Ee.getSingleton().register("afterContextMenuDefaultOptions");Ee.getSingleton().register("beforeContextMenuShow");Ee.getSingleton().register("afterContextMenuShow");Ee.getSingleton().register("afterContextMenuHide");Ee.getSingleton().register("afterContextMenuExecute");var hm=new WeakSet;class w_ extends xt{constructor(){super(...arguments),kxe(this,hm),Ux(this,"commandExecutor",new s3(this.hot)),Ux(this,"itemsFactory",null),Ux(this,"menu",null)}static get PLUGIN_KEY(){return Wm}static get PLUGIN_PRIORITY(){return Lxe}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[f_,g_,nt,sv,rv,nt,d_,av,nt,m_,u_,nt,ov,nt,dr]}isEnabled(){return!!this.hot.getSettings()[Wm]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[Wm];typeof t.callback=="function"&&this.commandExecutor.setCommonCallback(t.callback),this.menu=new gg(this.hot,{className:"htContextMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",()=>jb(hm,this,Fxe).call(this)),this.menu.addLocalHook("afterOpen",()=>jb(hm,this,Bxe).call(this)),this.menu.addLocalHook("afterClose",()=>jb(hm,this,Vxe).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e.executeCommand.call(e,...s)}),this.addHook("afterOnCellContextMenu",i=>jb(hm,this,$xe).call(this,i)),this.registerShortcuts(),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control/Meta","Shift","Backslash"],["Shift","F10"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();this.hot.scrollToFocusedCell();const t=this.hot.getCell(e.row,e.col,!0).getBoundingClientRect(),i=c_(this.menu.container,this.hot.rootDocument);this.open({left:t.left+i.left,top:t.top+i.top-1+t.height},{left:t.width,above:-t.height}),this.menu.getNavigator().toFirstItem()},runOnlyIf:()=>{var e;const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t&&this.hot.selection.isCellVisible(t)&&!this.menu.isOpened()},group:rF})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(rF)}open(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{above:0,below:0,left:0,right:0};if((t=this.menu)!==null&&t!==void 0&&t.isOpened())return;this.prepareMenuItems(),this.menu.open(),this.menu.tableBorderWidth>0||(i.below+=1,i.right+=1,i.above-=1,i.left-=1),et(i,(r,o)=>{this.menu.setOffset(o,r)}),this.menu.setPosition(e)}close(){var e;(e=this.menu)===null||e===void 0||e.close(),this.itemsFactory=null}executeCommand(e){this.itemsFactory===null&&this.prepareMenuItems();for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.commandExecutor.execute(e,...i)}prepareMenuItems(){this.itemsFactory=new r3(this.hot,w_.DEFAULT_ITEMS);const e=this.hot.getSettings()[Wm],t={items:this.itemsFactory.getItems(e)};this.hot.runHooks("afterContextMenuDefaultOptions",t),this.itemsFactory.setPredefinedItems(t.items);const i=this.itemsFactory.getItems(e);this.hot.runHooks("beforeContextMenuSetItems",i),this.menu.setMenuItems(i),L(i,s=>this.commandExecutor.registerCommand(s.key,s))}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function $xe(n){const e=this.hot.getSettings(),t=e.rowHeaders,i=e.colHeaders;function s(a){return a.nodeName==="TD"||a.parentNode.nodeName==="TD"}const r=n.target;if(this.close(),Fe(r,"handsontableInput")||(n.preventDefault(),n.stopPropagation(),!(t||i)&&!s(r)&&!(Fe(r,"current")&&Fe(r,"wtBorder"))))return;const o=c_(this.menu.container,this.hot.rootDocument);this.open({top:n.clientY+o.top,left:n.clientX+o.left})}function Fxe(){this.hot.runHooks("beforeContextMenuShow",this)}function Bxe(){this.hot.runHooks("afterContextMenuShow",this)}function Vxe(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}w_.SEPARATOR={name:nt};function Wxe(n){return{key:"copy",name(){return this.getTranslatedPhrase(uI)},callback(){n.copyCellsOnly()},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function jxe(n){return{key:"copy_column_headers_only",name(){const e=this.getSelectedRangeLast(),t=e?kt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(gI,t)},callback(){n.copyColumnHeadersOnly()},disabled(){if(!this.hasColHeaders())return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function zxe(n){return{key:"copy_with_column_group_headers",name(){const e=this.getSelectedRangeLast(),t=e?kt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(fI,t)},callback(){n.copyWithAllColumnHeaders()},disabled(){if(!this.hasColHeaders()||!this.getSettings().nestedHeaders)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function Uxe(n){return{key:"copy_with_column_headers",name(){const e=this.getSelectedRangeLast(),t=e?kt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(dI,t)},callback(){n.copyWithColumnHeaders()},disabled(){if(!this.hasColHeaders())return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function Yxe(n){return{key:"cut",name(){return this.getTranslatedPhrase(mI)},callback(){n.cut()},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}class Gxe{constructor(){this.data={}}setData(e,t){this.data[e]=t}getData(e){return this.data[e]||void 0}}class Kxe{constructor(){this.clipboardData=new Gxe}preventDefault(){}}function qxe(n,e){u3(n,e),e.add(n)}function $d(n,e,t){u3(n,e),e.set(n,t)}function u3(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qi(n,e){return n.get(_f(n,e))}function Fd(n,e,t){return n.set(_f(n,e),t),t}function _f(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var jl=new WeakMap,Yx=new WeakMap,um=new WeakMap,FM=new WeakMap,BM=new WeakMap,dm=new WeakMap,fm=new WeakSet;class Xxe{constructor(e){let{countRows:t,countColumns:i,rowsLimit:s,columnsLimit:r,countColumnHeaders:o}=e;qxe(this,fm),$d(this,jl,void 0),$d(this,Yx,void 0),$d(this,um,void 0),$d(this,FM,void 0),$d(this,BM,void 0),$d(this,dm,void 0),Fd(Yx,this,t),Fd(um,this,i),Fd(FM,this,s),Fd(BM,this,r),Fd(dm,this,o)}setSelectedRange(e){Fd(jl,this,e)}getCellsRange(){if(Qi(Yx,this).call(this)===0||Qi(um,this).call(this)===0)return null;const{row:e,col:t}=Qi(jl,this).getTopStartCorner(),{row:i,col:s}=Qi(jl,this).getBottomEndCorner(),r=_f(fm,this,Qxe).call(this,e,i),o=_f(fm,this,Gx).call(this,t,s);return{isRangeTrimmed:i!==r||s!==o,startRow:e,startCol:t,endRow:r,endCol:o}}getMostBottomColumnHeadersRange(){if(Qi(um,this).call(this)===0||Qi(dm,this).call(this)===0)return null;const{col:e}=Qi(jl,this).getTopStartCorner(),{col:t}=Qi(jl,this).getBottomEndCorner(),i=_f(fm,this,Gx).call(this,e,t);return{isRangeTrimmed:t!==i,startRow:-1,startCol:e,endRow:-1,endCol:i}}getAllColumnHeadersRange(){if(Qi(um,this).call(this)===0||Qi(dm,this).call(this)===0)return null;const{col:e}=Qi(jl,this).getTopStartCorner(),{col:t}=Qi(jl,this).getBottomEndCorner(),i=_f(fm,this,Gx).call(this,e,t);return{isRangeTrimmed:t!==i,startRow:-Qi(dm,this).call(this),startCol:e,endRow:-1,endCol:i}}}function Gx(n,e){return Math.min(e,Math.max(n+Qi(BM,this).call(this)-1,n))}function Qxe(n,e){return Math.min(e,Math.max(n+Qi(FM,this).call(this)-1,n))}function d3(n){const e=[],t=[];return L(n,i=>{const s=Math.min(i.startRow,i.endRow),r=Math.max(i.startRow,i.endRow);ke(s,r,l=>{e.indexOf(l)===-1&&e.push(l)});const o=Math.min(i.startCol,i.endCol),a=Math.max(i.startCol,i.endCol);ke(o,a,l=>{t.indexOf(l)===-1&&t.push(l)})}),{rows:e,columns:t}}function Zxe(n,e){f3(n,e),e.add(n)}function zl(n,e,t){f3(n,e),e.set(n,t)}function f3(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gm(n,e,t){return(e=Jxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jxe(n){var e=eEe(n,"string");return typeof e=="symbol"?e:e+""}function eEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ys(n,e){return n.get(Cs(n,e))}function Ur(n,e,t){return n.set(Cs(n,e),t),t}function Cs(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ee.getSingleton().register("afterCopyLimit");Ee.getSingleton().register("modifyCopyableRange");Ee.getSingleton().register("beforeCut");Ee.getSingleton().register("afterCut");Ee.getSingleton().register("beforePaste");Ee.getSingleton().register("afterPaste");Ee.getSingleton().register("beforeCopy");Ee.getSingleton().register("afterCopy");const zb="copyPaste",tEe=80,nEe=["fragmentSelection"],oF=['<meta name="generator" content="Handsontable"/>','<style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>'].join("");var VM=new WeakMap,WM=new WeakMap,jM=new WeakMap,Bd=new WeakMap,Ub=new WeakMap,Yb=new WeakMap,Vd=new WeakMap,wS=new WeakMap,Hs=new WeakSet;class iEe extends xt{constructor(){super(...arguments),Zxe(this,Hs),gm(this,"columnsLimit",1/0),gm(this,"rowsLimit",1/0),gm(this,"pasteMode","overwrite"),gm(this,"uiContainer",this.hot.rootDocument.body),zl(this,VM,!1),zl(this,WM,!1),zl(this,jM,!1),zl(this,Bd,"cells-only"),zl(this,Ub,!1),zl(this,Yb,!1),zl(this,Vd,new Xxe({countRows:()=>this.hot.countRows(),countColumns:()=>this.hot.countCols(),rowsLimit:()=>this.rowsLimit,columnsLimit:()=>this.columnsLimit,countColumnHeaders:()=>this.hot.view.getColumnHeadersCount()})),zl(this,wS,!1),gm(this,"copyableRanges",[])}static get PLUGIN_KEY(){return zb}static get SETTING_KEYS(){return[zb,...nEe]}static get PLUGIN_PRIORITY(){return tEe}isEnabled(){return!!this.hot.getSettings()[zb]}enablePlugin(){var e=this;if(this.enabled)return;const{[zb]:t}=this.hot.getSettings();if(typeof t=="object"){var i,s;this.pasteMode=(i=t.pasteMode)!==null&&i!==void 0?i:this.pasteMode,this.rowsLimit=isNaN(t.rowsLimit)?this.rowsLimit:t.rowsLimit,this.columnsLimit=isNaN(t.columnsLimit)?this.columnsLimit:t.columnsLimit,Ur(VM,this,!!t.copyColumnHeaders),Ur(WM,this,!!t.copyColumnGroupHeaders),Ur(jM,this,!!t.copyColumnHeadersOnly),this.uiContainer=(s=t.uiContainer)!==null&&s!==void 0?s:this.uiContainer}this.addHook("afterContextMenuDefaultOptions",r=>Cs(Hs,this,oEe).call(this,r)),this.addHook("afterSelection",function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Cs(Hs,e,aEe).call(e,...o)}),this.addHook("afterSelectionEnd",()=>Cs(Hs,this,lEe).call(this)),this.eventManager.addEventListener(this.hot.rootDocument,"copy",function(){return e.onCopy(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"cut",function(){return e.onCut(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"paste",function(){return e.onPaste(...arguments)}),wP()&&(this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseenter",function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Cs(Hs,e,cEe).call(e,...o)}),this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseleave",function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Cs(Hs,e,hEe).call(e,...o)}),this.addHook("afterSelection",()=>Cs(Hs,this,uEe).call(this))),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){super.disablePlugin()}copy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"cells-only";Ur(Bd,this,e),Ur(Ub,this,!0),Cs(Hs,this,aF).call(this,"copy")}copyCellsOnly(){this.copy("cells-only")}copyColumnHeadersOnly(){this.copy("column-headers-only")}copyWithAllColumnHeaders(){this.copy("with-column-group-headers")}copyWithColumnHeaders(){this.copy("with-column-headers")}cut(){Ur(Yb,this,!0),Cs(Hs,this,aF).call(this,"cut")}getRangedCopyableData(e){return vp(this.getRangedData(e))}getRangedData(e){const t=[],{rows:i,columns:s}=d3(e);return L(i,r=>{const o=[];L(s,a=>{r<0?o.push(this.hot.getColHeader(a,r)):o.push(this.hot.getCopyableData(r,a))}),t.push(o)}),t}paste(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;if(!e&&!t)return;const i=new Kxe;e&&i.clipboardData.setData("text/plain",e),t&&i.clipboardData.setData("text/html",t),this.onPaste(i)}setCopyableText(){const e=this.hot.getSelectedRangeLast();if(!e)return;if(e.isSingleHeader()){this.copyableRanges=[];return}ys(Vd,this).setSelectedRange(e);const t=new Map([["headers",null],["cells",null]]);ys(Bd,this)==="column-headers-only"?t.set("headers",ys(Vd,this).getMostBottomColumnHeadersRange()):(ys(Bd,this)==="with-column-headers"?t.set("headers",ys(Vd,this).getMostBottomColumnHeadersRange()):ys(Bd,this)==="with-column-group-headers"&&t.set("headers",ys(Vd,this).getAllColumnHeadersRange()),t.set("cells",ys(Vd,this).getCellsRange())),this.copyableRanges=Array.from(t.values()).filter(s=>s!==null).map(s=>{let{startRow:r,startCol:o,endRow:a,endCol:l}=s;return{startRow:r,startCol:o,endRow:a,endCol:l}}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges);const i=t.get("cells");if(i!==null&&i.isRangeTrimmed){const{startRow:s,startCol:r,endRow:o,endCol:a}=i;this.hot.runHooks("afterCopyLimit",o-s+1,a-r+1,this.rowsLimit,this.columnsLimit)}}isEditorOpened(){var e;return(e=this.hot.getActiveEditor())===null||e===void 0?void 0:e.isOpened()}populateValues(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.hot.getSelectedRangeLast();if(!e.length)return;const i=e.length,s=e[0].length,r=[],{row:o,col:a}=t.getTopStartCorner(),{row:l,col:c}=t.getBottomEndCorner();let h=o,u=a,d=o,f=a;for(;r.length<i||h<=l;){const{skipRowOnPaste:g,visualRow:m}=this.hot.getCellMeta(h,a);if(h=m+1,g===!0)continue;d=m,u=a;const w=[],v=r.length%i;for(;w.length<s||u<=c;){const{skipColumnOnPaste:C,visualCol:S}=this.hot.getCellMeta(o,u);if(u=S+1,C===!0)continue;f=S;const x=w.length%s;w.push(e[v][x])}r.push(w)}return Ur(wS,this,!0),this.hot.populateFromArray(o,a,r,void 0,void 0,"CopyPaste.paste",this.pasteMode),[o,a,d,f]}onCopy(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),s=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!ys(Ub,this)||this.isEditorOpened()||e.target instanceof HTMLElement&&(s&&e.target!==i||!s&&e.target!==this.hot.rootDocument.body))return;e.preventDefault(),this.setCopyableText(),Ur(Ub,this,!1);const r=this.getRangedData(this.copyableRanges),o=Cs(Hs,this,sEe).call(this,this.copyableRanges);if(!!this.hot.runHooks("beforeCopy",r,this.copyableRanges,o)){const l=vp(r);if(e&&e.clipboardData){const c=yM(r,this.hot.rootDocument);e.clipboardData.setData("text/plain",l),e.clipboardData.setData("text/html",[oF,c].join(""))}else typeof ClipboardEvent>"u"&&this.hot.rootWindow.clipboardData.setData("Text",l);this.hot.runHooks("afterCopy",r,this.copyableRanges,o)}Ur(Bd,this,"cells-only")}onCut(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),s=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!ys(Yb,this)||this.isEditorOpened()||e.target instanceof HTMLElement&&(s&&e.target!==i||!s&&e.target!==this.hot.rootDocument.body))return;e.preventDefault(),this.setCopyableText(),Ur(Yb,this,!1);const r=this.getRangedData(this.copyableRanges);if(!!this.hot.runHooks("beforeCut",r,this.copyableRanges)){const a=vp(r);if(e&&e.clipboardData){const l=yM(r,this.hot.rootDocument);e.clipboardData.setData("text/plain",a),e.clipboardData.setData("text/html",[oF,l].join(""))}else typeof ClipboardEvent>"u"&&this.hot.rootWindow.clipboardData.setData("Text",a);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",r,this.copyableRanges)}}onPaste(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),s=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()||this.isEditorOpened()||!this.hot.getSelected()||e.target instanceof HTMLElement&&(s&&e.target!==i||!s&&e.target!==this.hot.rootDocument.body))return;e.preventDefault();let r;if(e&&typeof e.clipboardData<"u"){const h=$0(e.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});h&&/(<table)|(<TABLE)/g.test(h)?r=vY(h,this.hot.rootDocument).data:r=e.clipboardData.getData("text/plain")}else typeof ClipboardEvent>"u"&&typeof this.hot.rootWindow.clipboardData<"u"&&(r=this.hot.rootWindow.clipboardData.getData("Text"));if(typeof r=="string"&&(r=pbe(r)),r===void 0||r&&r.length===0||this.hot.runHooks("beforePaste",r,this.copyableRanges)===!1)return;const[o,a,l,c]=this.populateValues(r);this.hot.selectCell(o,a,Math.min(this.hot.countRows()-1,l),Math.min(this.hot.countCols()-1,c)),this.hot.runHooks("afterPaste",r,this.copyableRanges)}destroy(){super.destroy()}}function aF(n){if(wP()){const e=this.hot.getSelectedRangeLast();if(e){const{row:t,col:i}=e.highlight,s=this.hot.getCell(t,i,!0);s&&UU(s,()=>{this.hot.rootDocument.execCommand(n)})}}else this.hot.rootDocument.execCommand(n)}function sEe(n){const{rows:e}=d3(n);let t=0;for(let i=0;i<e.length&&!(e[i]>=0);i++)t+=1;return{columnHeadersCount:t}}function rEe(){if(this.hot.isListening()){const n=this.hot.getSelectedRangeLast();if(n){const{row:e,col:t}=n.highlight,i=this.hot.getCell(e,t,!0);i&&dP(i)}}}function g3(){if(this.hot.isListening()){const n=this.hot.getSelectedRangeLast();if(n){const{row:e,col:t}=n.highlight,i=this.hot.getCell(e,t,!0);i!=null&&i.hasAttribute("contenteditable")&&fP(i)}}}function oEe(n){n.items.push({name:"---------"},Wxe(this)),ys(VM,this)&&n.items.push(Uxe(this)),ys(WM,this)&&n.items.push(zxe(this)),ys(jM,this)&&n.items.push(jxe(this)),n.items.push(Yxe(this))}function aEe(n,e,t,i,s){ys(wS,this)&&(s.value=!0),Ur(wS,this,!1)}function lEe(){this.isEditorOpened()||this.hot.getSettings().fragmentSelection||this.setCopyableText()}function cEe(){Cs(Hs,this,g3).call(this)}function hEe(){Cs(Hs,this,rEe).call(this)}function uEe(){Cs(Hs,this,g3).call(this)}function m3(n,e){return`border_row${n}col${e}`}function jm(){return{width:1,color:"#000"}}function ul(){return{hide:!0}}function dEe(){return{width:1,color:"#000",cornerVisible:!1}}function Kx(n){if(Me(n.start)||Me(n.left)){var e;n.start=(e=n.start)!==null&&e!==void 0?e:n.left}if(Me(n.end)||Me(n.right)){var t;n.end=(t=n.end)!==null&&t!==void 0?t:n.right}return delete n.left,delete n.right,n}function mm(n){return Me(n.start)&&(n.left=n.start),Me(n.end)&&(n.right=n.end),n}function qx(n,e){return{id:m3(n,e),border:dEe(),row:n,col:e,top:ul(),bottom:ul(),start:ul(),end:ul()}}function fEe(n,e){return wn(e,"border")&&e.border&&(n.border=e.border),wn(e,"top")&&Me(e.top)&&(e.top?(Je(e.top)||(e.top=jm()),n.top=e.top):(e.top=ul(),n.top=e.top)),wn(e,"bottom")&&Me(e.bottom)&&(e.bottom?(Je(e.bottom)||(e.bottom=jm()),n.bottom=e.bottom):(e.bottom=ul(),n.bottom=e.bottom)),wn(e,"start")&&Me(e.start)&&(e.start?(Je(e.start)||(e.start=jm()),n.start=e.start):(e.start=ul(),n.start=e.start)),wn(e,"end")&&Me(e.end)&&(e.end?(Je(e.end)||(e.end=jm()),n.end=e.end):(e.end=ul(),n.end=e.end)),n}function Rl(n,e){let t=!1;return L(n.getSelectedRange(),i=>{i.forAll((s,r)=>{if(s<0||r<0)return;const o=n.getCellMeta(s,r).borders;if(o)if(e){if(!wn(o[e],"hide")||o[e].hide===!1)return t=!0,!1}else return t=!0,!1})}),t}function v_(n){return`<span class="selected">✓</span>${n}`}function gEe(n){return n.some(e=>Me(e.left)||Me(e.right))}function mEe(n){return n.some(e=>Me(e.start)||Me(e.end))}const pEe=new Map([["left","start"],["right","end"]]);function wEe(n){var e;return(e=pEe.get(n))!==null&&e!==void 0?e:n}function vEe(n){return{key:"borders:bottom",name(){let e=this.getTranslatedPhrase(MI);return Rl(this,"bottom")&&(e=v_(e)),e},callback(e,t){const i=Rl(this,"bottom");n.prepareBorder(t,"bottom",i)}}}function bEe(n){const e=n.hot.isRtl()?"end":"start";return{key:"borders:left",name(){let t=this.getTranslatedPhrase(AI);return Rl(this,e)&&(t=v_(t)),t},callback(t,i){const s=Rl(this,e);n.prepareBorder(i,e,s)}}}function yEe(n){return{key:"borders:no_borders",name(){return this.getTranslatedPhrase(PI)},callback(e,t){n.prepareBorder(t,"noBorders")},disabled(){return!Rl(this)}}}function CEe(n){const e=n.hot.isRtl()?"start":"end";return{key:"borders:right",name(){let t=this.getTranslatedPhrase(TI);return Rl(this,e)&&(t=v_(t)),t},callback(t,i){const s=Rl(this,e);n.prepareBorder(i,e,s)}}}function SEe(n){return{key:"borders:top",name(){let e=this.getTranslatedPhrase(EI);return Rl(this,"top")&&(e=v_(e)),e},callback(e,t){const i=Rl(this,"top");n.prepareBorder(t,"top",i)}}}function _Ee(n,e){REe(n,e),e.add(n)}function REe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xEe(n,e,t){return(e=EEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function EEe(n){var e=TEe(n,"string");return typeof e=="symbol"?e:e+""}function TEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function lF(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const eC="customBorders",MEe=90;var Xx=new WeakSet;class AEe extends xt{constructor(){super(...arguments),_Ee(this,Xx),xEe(this,"savedBorders",[])}static get PLUGIN_KEY(){return eC}static get PLUGIN_PRIORITY(){return MEe}isEnabled(){return!!this.hot.getSettings()[eC]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",e=>lF(Xx,this,PEe).call(this,e)),this.addHook("init",()=>lF(Xx,this,IEe).call(this)),super.enablePlugin())}disablePlugin(){this.hideBorders(),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),super.updatePlugin()}setBorders(e,t){let i=["top","bottom","start","end"],s=null;t&&(this.checkSettingsCohesion([t]),i=Object.keys(t),s=Kx(t));const r=Gf(e),o=cw(r,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)});L(e,a=>{o(a).forAll((l,c)=>{L(i,h=>{this.prepareBorderFromCustomAdded(l,c,s,wEe(h))})})}),this.hot.view.render()}getBorders(e){if(!Array.isArray(e))return this.savedBorders;const t=Gf(e),i=cw(t,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)}),s=[];return L(e,r=>{i(r).forAll((o,a)=>{L(this.savedBorders,l=>{l.row===o&&l.col===a&&s.push(mm(l))})})}),s}clearBorders(e){e?this.setBorders(e):(L(this.savedBorders,t=>{this.clearBordersFromSelectionSettings(t.id),this.clearNullCellRange(),this.hot.removeCellMeta(t.row,t.col,"borders")}),this.savedBorders.length=0)}insertBorderIntoSettings(e,t){this.checkSavedBorders(e)||this.savedBorders.push(e);const s=this.hot._createCellRange(this.hot._createCellCoords(e.row,e.col));this.checkCustomSelections(e,s,t)||this.hot.selection.highlight.addCustomSelection({border:e,visualCellRange:s})}prepareBorderFromCustomAdded(e,t,i,s){const r=this.hot.countRows(),o=this.hot.countCols();if(e>=r||t>=o)return;let a=qx(e,t);i&&(a=fEe(a,i),L(this.hot.selection.highlight.customSelections,l=>{if(a.id===l.settings.id)return Object.assign(l.settings,i),a.id=l.settings.id,a.top=l.settings.top,a.bottom=l.settings.bottom,a.start=l.settings.start,a.end=l.settings.end,!1})),this.hot.setCellMeta(e,t,"borders",mm(a)),this.insertBorderIntoSettings(a,s)}prepareBorderFromCustomAddedRange(e,t){const i=Math.min(e.to.row,this.hot.countRows()-1),s=Math.min(e.to.col,this.hot.countCols()-1);ke(e.from.row,i,r=>{ke(e.from.col,s,o=>{const a=qx(r,o);let l=0;r===e.from.row&&wn(t,"top")&&(l+=1,a.top=t.top),r===e.to.row&&wn(t,"bottom")&&(l+=1,a.bottom=t.bottom),o===e.from.col&&wn(t,"start")&&(l+=1,a.start=t.start),o===e.to.col&&wn(t,"end")&&(l+=1,a.end=t.end),l>0&&(this.hot.setCellMeta(r,o,"borders",mm(a)),this.insertBorderIntoSettings(a))})})}removeAllBorders(e,t){const i=m3(e,t);this.spliceBorder(i),this.clearBordersFromSelectionSettings(i),this.clearNullCellRange(),this.hot.removeCellMeta(e,t,"borders")}setBorder(e,t,i,s){let r=this.hot.getCellMeta(e,t).borders;!r||r.border===void 0?r=qx(e,t):r=Kx(r),s?(r[i]=ul(),this.countHide(r)===4?this.removeAllBorders(e,t):(this.checkCustomSelectionsFromContextMenu(r,i,s)||this.insertBorderIntoSettings(r),this.hot.setCellMeta(e,t,"borders",mm(r)))):(r[i]=jm(),this.checkCustomSelectionsFromContextMenu(r,i,s)||this.insertBorderIntoSettings(r),this.hot.setCellMeta(e,t,"borders",mm(r)))}prepareBorder(e,t,i){L(e,s=>{let{start:r,end:o}=s;if(r.row===o.row&&r.col===o.col)t==="noBorders"?this.removeAllBorders(r.row,r.col):this.setBorder(r.row,r.col,t,i);else switch(t){case"noBorders":ke(r.col,o.col,a=>{ke(r.row,o.row,l=>{this.removeAllBorders(l,a)})});break;case"top":ke(r.col,o.col,a=>{this.setBorder(r.row,a,t,i)});break;case"bottom":ke(r.col,o.col,a=>{this.setBorder(o.row,a,t,i)});break;case"start":ke(r.row,o.row,a=>{this.setBorder(a,r.col,t,i)});break;case"end":ke(r.row,o.row,a=>{this.setBorder(a,o.col,t,i)});break}})}createCustomBorders(e){L(e,t=>{const i=Kx(t);t.range?this.prepareBorderFromCustomAddedRange(t.range,i):this.prepareBorderFromCustomAdded(t.row,t.col,i)})}countHide(e){const{top:t,bottom:i,start:s,end:r}=e;return Un([t,i,s,r],(a,l)=>{let c=a;return l&&l.hide&&(c+=1),c},0)}clearBordersFromSelectionSettings(e){const t=lt(this.hot.selection.highlight.customSelections,i=>i.settings.id).indexOf(e);t>-1&&this.hot.selection.highlight.customSelections[t].clear()}clearNullCellRange(){L(this.hot.selection.highlight.customSelections,(e,t)=>{if(e.cellRange===null)return this.hot.selection.highlight.customSelections[t].destroy(),this.hot.selection.highlight.customSelections.splice(t,1),!1})}hideBorders(){L(this.savedBorders,e=>{this.clearBordersFromSelectionSettings(e.id),this.clearNullCellRange()})}spliceBorder(e){const t=lt(this.savedBorders,i=>i.id).indexOf(e);t>-1&&this.savedBorders.splice(t,1)}checkSavedBorders(e){let t=!1;return this.countHide(e)===4?(this.spliceBorder(e.id),t=!0):L(this.savedBorders,(s,r)=>{if(e.id===s.id)return this.savedBorders[r]=e,t=!0,!1}),t}checkCustomSelectionsFromContextMenu(e,t,i){let s=!1;return L(this.hot.selection.highlight.customSelections,r=>{if(e.id===r.settings.id){const o=this.hot.view._wt.selectionManager.getBorderInstances(r);return L(o,a=>{a.toggleHiddenClass(t,i)}),s=!0,!1}}),s}checkCustomSelections(e,t,i){const s=this.countHide(e);let r=!1;return s===4?(this.removeAllBorders(e.row,e.col),r=!0):L(this.hot.selection.highlight.customSelections,o=>{if(e.id===o.settings.id){if(o.visualCellRange=t,o.commit(),i){const a=this.hot.view._wt.selectionManager.getBorderInstances(o);L(a,l=>{l.changeBorderStyle(i,e)})}return r=!0,!1}}),r}changeBorderSettings(){const e=this.hot.getSettings()[eC];if(Array.isArray(e)){const t=Yi(e);this.checkSettingsCohesion(t),t.length||(this.savedBorders=t),this.createCustomBorders(t)}else e!==void 0&&this.createCustomBorders(this.savedBorders)}checkSettingsCohesion(e){const t=gEe(e),i=mEe(e);if(t&&i)throw new Error('The "left"/"right" and "start"/"end" options should not be used together. Please use only the option "start"/"end".');if(this.hot.isRtl()&&t)throw new Error('The "left"/"right" properties are not supported for RTL. Please use option "start"/"end".')}destroy(){super.destroy()}}function PEe(n){this.hot.getSettings()[eC]&&n.items.push({name:"---------"},{key:"borders",name(){return this.getTranslatedPhrase(xI)},disabled(){const e=this.getSelectedRangeLast();return!e||e.isSingleHeader()?!0:this.selection.isSelectedByCorner()},submenu:{items:[SEe(this),CEe(this),vEe(this),bEe(this),yEe(this)]}})}function IEe(){this.changeBorderSettings()}function OEe(n,e){kEe(n,e),e.add(n)}function kEe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qx(n,e,t){return(e=HEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HEe(n){var e=DEe(n,"string");return typeof e=="symbol"?e:e+""}function DEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cF(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const hF="dragToScroll",NEe=100;var Zx=new WeakSet;class LEe extends xt{constructor(){super(...arguments),OEe(this,Zx),Qx(this,"boundaries",null),Qx(this,"callback",null),Qx(this,"listening",!1)}static get PLUGIN_KEY(){return hF}static get PLUGIN_PRIORITY(){return NEe}isEnabled(){return!!this.hot.getSettings()[hF]}enablePlugin(){this.enabled||(this.addHook("afterOnCellMouseDown",e=>cF(Zx,this,uF).call(this,e)),this.addHook("afterOnCellCornerMouseDown",e=>cF(Zx,this,uF).call(this,e)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.unregisterEvents(),super.disablePlugin()}setBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{left:0,right:this.hot.rootWindow.innerWidth,top:0,bottom:this.hot.rootWindow.innerHeight};this.boundaries=e}setCallback(e){this.callback=e}check(e,t){let i=0,s=0;t<this.boundaries.top?s=t-this.boundaries.top:t>this.boundaries.bottom&&(s=t-this.boundaries.bottom),e<this.boundaries.left?i=e-this.boundaries.left:e>this.boundaries.right&&(i=e-this.boundaries.right),this.callback(i,s)}listen(){this.listening=!0}unlisten(){this.listening=!1}isListening(){return this.listening}registerEvents(){const{rootWindow:e}=this.hot;let t=e;for(;t;)this.eventManager.addEventListener(t.document,"contextmenu",()=>this.unlisten()),this.eventManager.addEventListener(t.document,"mouseup",()=>this.unlisten()),this.eventManager.addEventListener(t.document,"mousemove",i=>this.onMouseMove(i)),t=Nu(t)}unregisterEvents(){this.eventManager.clear()}onMouseMove(e){this.isListening()&&this.check(e.clientX,e.clientY)}destroy(){super.destroy()}}function uF(n){if(Fc(n))return;const e=this.hot.view._wt.wtOverlays.topOverlay.mainTableScrollableElement;this.setBoundaries(e!==this.hot.rootWindow?e.getBoundingClientRect():void 0),this.setCallback((t,i)=>{var s,r;const o=(s=e.scrollLeft)!==null&&s!==void 0?s:e.scrollX,a=(r=e.scrollTop)!==null&&r!==void 0?r:e.scrollY;e.scroll(o+Math.sign(t)*50,a+Math.sign(i)*20)}),this.listen()}function $Ee(n,e){p3(n,e),e.add(n)}function FEe(n,e,t){p3(n,e),e.set(n,t)}function p3(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jx(n,e,t){return(e=BEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BEe(n){var e=VEe(n,"string");return typeof e=="symbol"?e:e+""}function VEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function WEe(n,e){return n.get(fr(n,e))}function w3(n,e,t){return n.set(fr(n,e),t),t}function fr(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ee.getSingleton().register("afterDropdownMenuDefaultOptions");Ee.getSingleton().register("beforeDropdownMenuShow");Ee.getSingleton().register("afterDropdownMenuShow");Ee.getSingleton().register("afterDropdownMenuHide");Ee.getSingleton().register("afterDropdownMenuExecute");const tC="dropdownMenu",jEe=230,dw="changeType",eE=tC;var b_=new WeakMap,Gr=new WeakSet;class y_ extends xt{static get PLUGIN_KEY(){return tC}static get PLUGIN_PRIORITY(){return jEe}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[sv,rv,nt,av,nt,h_,nt,ov,nt,dr]}constructor(e){super(e),$Ee(this,Gr),Jx(this,"commandExecutor",new s3(this.hot)),Jx(this,"itemsFactory",null),Jx(this,"menu",null),FEe(this,b_,!1),this.hot.addHook("afterGetColHeader",(t,i)=>fr(Gr,this,UEe).call(this,t,i))}isEnabled(){return this.hot.getSettings()[tC]}enablePlugin(){var e=this;if(this.enabled)return;this.itemsFactory=new r3(this.hot,y_.DEFAULT_ITEMS),this.addHook("beforeOnCellMouseDown",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return fr(Gr,e,QEe).call(e,...r)}),this.addHook("beforeViewportScrollHorizontally",function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return fr(Gr,e,XEe).call(e,...r)});const t=this.hot.getSettings()[tC],i={items:this.itemsFactory.getItems(t)};this.registerEvents(),typeof t.callback=="function"&&this.commandExecutor.setCommonCallback(t.callback),this.registerShortcuts(),super.enablePlugin(),this.callOnPluginsReady(()=>{this.hot.runHooks("afterDropdownMenuDefaultOptions",i),this.itemsFactory.setPredefinedItems(i.items);const s=this.itemsFactory.getItems(t);this.menu&&this.menu.destroy(),this.menu=new gg(this.hot,{className:"htDropdownMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.hot.runHooks("beforeDropdownMenuSetItems",s),this.menu.setMenuItems(s),this.menu.addLocalHook("beforeOpen",()=>fr(Gr,this,YEe).call(this)),this.menu.addLocalHook("afterOpen",()=>fr(Gr,this,GEe).call(this)),this.menu.addLocalHook("afterSubmenuOpen",r=>fr(Gr,this,KEe).call(this,r)),this.menu.addLocalHook("afterClose",()=>fr(Gr,this,qEe).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e.executeCommand.call(e,...o)}),L(s,r=>this.commandExecutor.registerCommand(r.key,r))})}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&this.menu.destroy(),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const e=this.hot.getShortcutManager().getContext("grid"),t=()=>{const{highlight:i}=this.hot.getSelectedRangeLast();if((i.isHeader()&&i.row===-1||i.isCell())&&i.col>=0){this.hot.selectColumns(i.col,i.col,-1);const{from:s}=this.hot.getSelectedRangeLast(),r=c_(this.menu.container,this.hot.rootDocument),o=this.hot.getCell(-1,s.col,!0).querySelector(`.${dw}`),a=o.getBoundingClientRect();this.open({left:a.left+r.left,top:a.top+o.offsetHeight+r.top},{left:a.width,right:0,above:0,below:3}),this.menu.getNavigator().toFirstItem()}};e.addShortcuts([{keys:[["Shift","Alt","ArrowDown"],["Control/Meta","Enter"]],callback:t,runOnlyIf:()=>{var i;const s=(i=this.hot.getSelectedRangeLast())===null||i===void 0?void 0:i.highlight;return s&&this.hot.selection.isCellVisible(s)&&s.isHeader()&&!this.menu.isOpened()},captureCtrl:!0,group:eE},{keys:[["Shift","Alt","ArrowDown"]],callback:t,runOnlyIf:()=>{var i;const s=(i=this.hot.getSelectedRangeLast())===null||i===void 0?void 0:i.highlight;return s&&this.hot.selection.isCellVisible(s)&&s.isCell()&&!this.menu.isOpened()},group:eE}])}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(eE)}registerEvents(){this.eventManager.addEventListener(this.hot.rootElement,"click",e=>fr(Gr,this,zEe).call(this,e))}open(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{above:0,below:0,left:0,right:0};(t=this.menu)!==null&&t!==void 0&&t.isOpened()||(this.menu.open(),et(i,(s,r)=>{this.menu.setOffset(r,s)}),this.menu.setPosition(e))}close(){var e;(e=this.menu)===null||e===void 0||e.close()}executeCommand(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.commandExecutor.execute(e,...i)}setListening(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.menu.isOpened()&&(e?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function v3(n){n.getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Control/Meta","A"]],callback:()=>!1}])}function zEe(n){if(Fe(n.target,dw)){const e=c_(this.menu.container,this.hot.rootDocument),t=n.target.getBoundingClientRect();n.stopPropagation(),w3(b_,this,!1),this.open({left:t.left+e.left,top:t.top+n.target.offsetHeight+e.top},{left:t.width,right:0,above:0,below:3})}}function UEe(n,e){const t=e.parentNode;if(!t)return;const i=t.parentNode.childNodes,s=Array.prototype.indexOf.call(i,t);if(n<0||s!==i.length-1)return;const r=e.querySelector(`.${dw}`);if(this.enabled&&r)return;if(!this.enabled){r&&r.parentNode.removeChild(r);return}const o=this.hot.rootDocument.createElement("button");o.className=dw,o.type="button",o.tabIndex=-1,this.hot.getSettings().ariaTags&&($e(o,[sd(),KC(" ")]),$e(e,[MU("menu")])),o.onclick=function(){return!1},e.firstChild.insertBefore(o,e.firstChild.firstChild)}function YEe(){this.hot.runHooks("beforeDropdownMenuShow",this)}function GEe(){this.hot.runHooks("afterDropdownMenuShow",this),fr(Gr,this,v3).call(this,this.menu)}function KEe(n){fr(Gr,this,v3).call(this,n)}function qEe(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}function XEe(n){return WEe(b_,this)?null:n}function QEe(n){Fe(n.target,dw)&&w3(b_,this,!0)}y_.SEPARATOR={name:nt};function dF(n,e,t){return(e=ZEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZEe(n){var e=JEe(n,"string");return typeof e=="symbol"?e:e+""}function JEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class eTe{constructor(e){dF(this,"hot",void 0),dF(this,"options",{}),this.hot=e}setOptions(e){this.options=e}getData(){const{startRow:e,startCol:t,endRow:i,endCol:s}=this._getDataRange(),r=this.options,o=[];return ke(e,i,a=>{const l=[];!r.exportHiddenRows&&this._isHiddenRow(a)||(ke(t,s,c=>{!r.exportHiddenColumns&&this._isHiddenColumn(c)||l.push(this.hot.getDataAtCell(a,c))}),o.push(l))}),o}getRowHeaders(){const e=[];if(this.options.rowHeaders){const{startRow:t,endRow:i}=this._getDataRange(),s=this.hot.getRowHeader();ke(t,i,r=>{!this.options.exportHiddenRows&&this._isHiddenRow(r)||e.push(s[r])})}return e}getColumnHeaders(){const e=[];if(this.options.columnHeaders){const{startCol:t,endCol:i}=this._getDataRange(),s=this.hot.getColHeader();ke(t,i,r=>{!this.options.exportHiddenColumns&&this._isHiddenColumn(r)||e.push(s[r])})}return e}_getDataRange(){const e=this.hot.countCols()-1,t=this.hot.countRows()-1;let[i=0,s=0,r=t,o=e]=this.options.range;return i=Math.max(i,0),s=Math.max(s,0),r=Math.min(r,t),o=Math.min(o,e),{startRow:i,startCol:s,endRow:r,endCol:o}}_isHiddenRow(e){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(e))}_isHiddenColumn(e){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(e))}}function fF(n,e,t){return(e=tTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tTe(n){var e=nTe(n,"string");return typeof e=="symbol"?e:e+""}function nTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class BO{static get DEFAULT_OPTIONS(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}constructor(e,t){fF(this,"dataProvider",void 0),fF(this,"options",void 0),this.dataProvider=e,this.options=this._mergeOptions(t),this.dataProvider.setOptions(this.options)}_mergeOptions(e){let t=co(this.constructor.DEFAULT_OPTIONS);const i=new Date;return t=zn(co(BO.DEFAULT_OPTIONS),t),t=zn(t,e),t.filename=iP(t.filename,{YYYY:i.getFullYear(),MM:`${i.getMonth()+1}`.padStart(2,"0"),DD:`${i.getDate()}`.padStart(2,"0")}),t}}const iTe="\r",sTe='"',rTe=`
`;class oTe extends BO{static get DEFAULT_OPTIONS(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:`\r
`}}export(){const e=this.options,t=this.dataProvider.getData();let i=this.dataProvider.getColumnHeaders();const s=i.length>0,r=this.dataProvider.getRowHeaders(),o=r.length>0;let a=e.bom?"\uFEFF":"";return s&&(i=lt(i,l=>this._escapeCell(l,!0)),o&&(a+=e.columnDelimiter),a+=i.join(e.columnDelimiter),a+=e.rowDelimiter),L(t,(l,c)=>{c>0&&(a+=e.rowDelimiter),o&&(a+=this._escapeCell(r[c])+e.columnDelimiter),a+=l.map(h=>this._escapeCell(h)).join(e.columnDelimiter)}),a}_escapeCell(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=Tn(e);return i!==""&&(t||i.indexOf(iTe)>=0||i.indexOf(sTe)>=0||i.indexOf(rTe)>=0||i.indexOf(this.options.columnDelimiter)>=0)&&(i=i.replace(new RegExp('"',"g"),'""'),i=`"${i}"`),i}}const aTe="csv",zM={[aTe]:oTe};function lTe(n,e,t){return typeof zM[n]=="function"?new zM[n](e,t):null}const cTe="exportFile",hTe=240;class uTe extends xt{static get PLUGIN_KEY(){return cTe}static get PLUGIN_PRIORITY(){return hTe}isEnabled(){return!0}exportAsString(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._createTypeFormatter(e,t).export()}exportAsBlob(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._createBlob(this._createTypeFormatter(e,t))}downloadFile(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{rootDocument:i,rootWindow:s}=this.hot,r=this._createTypeFormatter(e,t),o=this._createBlob(r),a=s.URL||s.webkitURL,l=i.createElement("a"),c=`${r.options.filename}.${r.options.fileExtension}`;if(l.download!==void 0){const h=a.createObjectURL(o);l.style.display="none",l.setAttribute("href",h),l.setAttribute("download",c),i.body.appendChild(l),l.dispatchEvent(new MouseEvent("click")),i.body.removeChild(l),setTimeout(()=>{a.revokeObjectURL(h)},100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(o,c)}_createTypeFormatter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!zM[e])throw new Error(`Export format type "${e}" is not supported.`);return lTe(e,new eTe(this.hot),t)}_createBlob(e){let t=null;return typeof Blob<"u"&&(t=new Blob([e.export()],{type:`${e.options.mimeType};charset=${e.options.encoding}`})),t}}function Wd(n,e,t){return(e=dTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dTe(n){var e=fTe(n,"string");return typeof e=="symbol"?e:e+""}function fTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class lv{constructor(e,t){let{id:i,stateless:s=!0}=t;Wd(this,"hot",void 0),Wd(this,"id",void 0),Wd(this,"elements",[]),Wd(this,"hidden",!1),Wd(this,"stateId",""),Wd(this,"state",void 0),this.hot=e,this.id=i,this.stateId=`Filters.component.${this.id}`,this.state=s?null:this.hot.columnIndexMapper.registerMap(this.stateId,new t_)}getElements(){return this.elements}reset(){L(this.elements,e=>e.reset())}hide(){this.hidden=!0}show(){this.hidden=!1}isHidden(){return this.hot===null||this.hidden}restoreState(e){this.state&&this.setState(this.state.getValueAtIndex(e))}setState(){throw new Error("The state setting logic is not implemented")}saveState(e){this.state&&this.state.setValueAtIndex(e,this.getState())}getState(){throw new Error("The state gathering logic is not implemented")}destroy(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),L(this.elements,e=>e.destroy()),this.state=null,this.elements=null,this.hot=null}}Lt(lv,Mi);const fw={};function Bc(n,e){if(!fw[n])throw Error(`Filter condition "${n}" does not exist.`);const{condition:t,descriptor:i}=fw[n];let s=e;return i.inputValuesDecorator&&(s=i.inputValuesDecorator(s)),function(r){return t.apply(r.meta.instance,[].concat([r],[s]))}}function gu(n){if(!fw[n])throw Error(`Filter condition "${n}" does not exist.`);return fw[n].descriptor}function Yn(n,e,t){t.key=n,fw[n]={condition:e,descriptor:t}}const pi="none";function gTe(){return!0}Yn(pi,gTe,{name:n_,inputsCount:0,showOperators:!1});const _p="empty";function mTe(n){return Mn(n.value)}Yn(_p,mTe,{name:LI,inputsCount:0,showOperators:!0});const nC="not_empty";function pTe(n,e){return!Bc(_p,e)(n)}Yn(nC,pTe,{name:$I,inputsCount:0,showOperators:!0});const Rp="eq";function wTe(n,e){let[t]=e;return Tn(n.value).toLocaleLowerCase(n.meta.locale)===Tn(t)}Yn(Rp,wTe,{name:FI,inputsCount:1,showOperators:!0});const iC="neq";function vTe(n,e){return!Bc(Rp,e)(n)}Yn(iC,vTe,{name:BI,inputsCount:1,showOperators:!0});const b3="gt";function bTe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value>i}Yn(b3,bTe,{name:UI,inputsCount:1,showOperators:!0});const y3="gte";function yTe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value>=i}Yn(y3,yTe,{name:YI,inputsCount:1,showOperators:!0});const C3="lt";function CTe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value<i}Yn(C3,CTe,{name:GI,inputsCount:1,showOperators:!0});const S3="lte";function STe(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value<=i}Yn(S3,STe,{name:KI,inputsCount:1,showOperators:!0});const VO="date_after";function _Te(n,e){let[t]=e;const i=le(n.value,n.meta.dateFormat),s=le(t,n.meta.dateFormat);return!i.isValid()||!s.isValid()?!1:i.diff(s)>=0}Yn(VO,_Te,{name:QI,inputsCount:1,showOperators:!0});const WO="date_before";function RTe(n,e){let[t]=e;const i=le(n.value,n.meta.dateFormat),s=le(t,n.meta.dateFormat);return!i.isValid()||!s.isValid()?!1:i.diff(s)<=0}Yn(WO,RTe,{name:ZI,inputsCount:1,showOperators:!0});const vS="between";function xTe(n,e){let[t,i]=e,s=t,r=i;if(n.meta.type==="numeric"){const o=parseFloat(s,10),a=parseFloat(r,10);s=Math.min(o,a),r=Math.max(o,a)}else if(n.meta.type==="date"){const o=Bc(WO,[r]),a=Bc(VO,[s]);return o(n)&&a(n)}return n.value>=s&&n.value<=r}Yn(vS,xTe,{name:qI,inputsCount:2,showOperators:!0});const _3="not_between";function ETe(n,e){return!Bc(vS,e)(n)}Yn(_3,ETe,{name:XI,inputsCount:2,showOperators:!0});const R3="begins_with";function TTe(n,e){let[t]=e;return Tn(n.value).toLocaleLowerCase(n.meta.locale).startsWith(Tn(t))}Yn(R3,TTe,{name:VI,inputsCount:1,showOperators:!0});const x3="ends_with";function MTe(n,e){let[t]=e;return Tn(n.value).toLocaleLowerCase(n.meta.locale).endsWith(Tn(t))}Yn(x3,MTe,{name:WI,inputsCount:1,showOperators:!0});const jO="contains";function ATe(n,e){let[t]=e;return Tn(n.value).toLocaleLowerCase(n.meta.locale).indexOf(Tn(t))>=0}Yn(jO,ATe,{name:jI,inputsCount:1,showOperators:!0});const E3="not_contains";function PTe(n,e){return!Bc(jO,e)(n)}Yn(E3,PTe,{name:zI,inputsCount:1,showOperators:!0});const T3="date_tomorrow";function ITe(n){const e=le(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(le().subtract(-1,"days").startOf("day"),"d"):!1}Yn(T3,ITe,{name:eO,inputsCount:0});const M3="date_today";function OTe(n){const e=le(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(le().startOf("day"),"d"):!1}Yn(M3,OTe,{name:JI,inputsCount:0});const A3="date_yesterday";function kTe(n){const e=le(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(le().subtract(1,"days").startOf("day"),"d"):!1}Yn(A3,kTe,{name:tO,inputsCount:0});eY();function HTe(n,e){let t=n;return t===""&&(t=`(${e})`),t}const UM=new Set([1]).has(1),DTe=UM&&typeof Array.from=="function";function cv(n){let e=n;return UM&&(e=new Set(e)),function(t){let i;return UM?i=e.has(t):i=!!~e.indexOf(t),i}}function P3(n){return n??""}function YM(n){let e=n;return DTe?e=Array.from(new Set(e)):e=eP(e),e=e.sort((t,i)=>typeof t=="number"&&typeof i=="number"?t-i:t===i?0:t>i?1:-1),e}function gF(n,e,t,i){const s=[],r=n===e;let o;return r||(o=cv(e)),L(n,a=>{let l=!1;(r||o(a))&&(l=!0);const c={checked:l,value:a,visualValue:HTe(a,t)};i&&i(c),s.push(c)}),s}const mu="by_value";function NTe(n,e){let[t]=e;return t(n.value)}Yn(mu,NTe,{name:"By value",inputsCount:0,inputValuesDecorator(n){let[e]=n;return[cv(e)]},showOperators:!1});const gw={};function LTe(n){if(!gw[n])throw Error(`Operation with id "${n}" does not exist.`);const e=gw[n].func;return function(t,i){return e(t,i)}}function $Te(n){return gw[n].name}function zO(n,e,t){gw[n]={name:e,func:t}}const Pc="conjunction",FTe=sO;function BTe(n,e){return n.every(t=>t.func(e))}zO(Pc,FTe,BTe);const bS="disjunction",VTe=i_;function WTe(n,e){return n.some(t=>t.func(e))}zO(bS,VTe,WTe);const UO="disjunctionWithExtraCondition",jTe=i_;function zTe(n,e){if(n.length<3)throw Error("Operation doesn't work on less then three conditions.");return n.slice(0,n.length-1).some(t=>t.func(e))&&n[n.length-1].func(e)}zO(UO,jTe,zTe);const UTe="numeric",I3="text",YTe="date",mF={[UTe]:[pi,nt,_p,nC,nt,Rp,iC,nt,b3,y3,C3,S3,vS,_3],[I3]:[pi,nt,_p,nC,nt,Rp,iC,nt,R3,x3,nt,jO,E3],[YTe]:[pi,nt,_p,nC,nt,Rp,iC,nt,WO,VO,vS,nt,T3,M3,A3]};function GTe(n){const e=[];let t=n;return mF[t]||(t=I3),L(mF[t],i=>{let s;i===nt?s={name:nt}:s=co(gu(i)),e.push(s)}),e}function pm(n,e,t){return(e=KTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KTe(n){var e=qTe(n,"string");return typeof e=="symbol"?e:e+""}function qTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const tE="built",nE="building",pF=["click","input","keydown","keypress","keyup","focus","blur","change"];let io=class O3{static get DEFAULTS(){return co({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}constructor(e,t){pm(this,"hot",void 0),pm(this,"eventManager",new Er(this)),pm(this,"options",void 0),pm(this,"_element",void 0),pm(this,"buildState",void 0),this.hot=e,this.options=zn(O3.DEFAULTS,t),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName)}setValue(e){this.options.value=e,this.update()}getValue(){return this.options.value}get element(){return this.buildState===nE?this._element:this.buildState===tE?(this.update(),this._element):(this.buildState=nE,this.build(),this.buildState=tE,this._element)}isBuilt(){return this.buildState===tE}translateIfPossible(e){return typeof e=="string"&&e.startsWith(as)?this.hot.getTranslatedPhrase(e):e}build(){const e=(t,i)=>{this.eventManager.addEventListener(t,i,s=>this.runLocalHooks(i,s,this))};if(this.buildState||(this.buildState=nE),this._element.setAttribute("data-hot-input",!0),this.options.tabIndex!==void 0&&this._element.setAttribute("tabindex",this.options.tabIndex),this.options.role!==void 0&&this._element.setAttribute("role",this.options.role),this.options.className&&ae(this._element,this.options.className),this.options.children.length)L(this.options.children,t=>this._element.appendChild(t.element));else if(this.options.wrapIt){const t=this.hot.rootDocument.createElement(this.options.tagName);t.setAttribute("data-hot-input",!0),et(this.options,(i,s)=>{t[s]!==void 0&&s!=="className"&&s!=="tagName"&&s!=="children"&&(t[s]=this.translateIfPossible(i))}),this._element.appendChild(t),L(pF,i=>e(t,i))}else L(pF,t=>e(this._element,t))}update(){}reset(){this.options.value="",this.update()}show(){this.element.style.display=""}hide(){this.element.style.display="none"}focus(){}destroy(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}};Lt(io,Mi);function XTe(n,e){k3(n,e),e.add(n)}function QTe(n,e,t){k3(n,e),e.set(n,t)}function k3(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Gb(n,e){return n.get(YO(n,e))}function ZTe(n,e,t){return n.set(YO(n,e),t),t}function YO(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var jd=new WeakMap,wF=new WeakSet;class Ic extends io{static get DEFAULTS(){return co({placeholder:"",type:"text",tagName:"input",tabIndex:-1})}constructor(e,t){super(e,zn(Ic.DEFAULTS,t)),XTe(this,wF),QTe(this,jd,void 0),this.registerHooks()}registerHooks(){this.addLocalHook("keyup",e=>YO(wF,this,JTe).call(this,e))}build(){super.build();const e=this.hot.rootDocument.createElement("div");ZTe(jd,this,this._element.firstChild),ae(this._element,"htUIInput"),ae(e,"htUIInputIcon"),this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(Gb(jd,this).type=this.options.type,Gb(jd,this).placeholder=this.translateIfPossible(this.options.placeholder),Gb(jd,this).value=this.translateIfPossible(this.options.value))}focus(){this.isBuilt()&&Gb(jd,this).focus()}}function JTe(n){this.options.value=n.target.value}function eMe(n,e){H3(n,e),e.add(n)}function wm(n,e,t){H3(n,e),e.set(n,t)}function H3(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zd(n,e,t){return n.set(xp(n,e),t),t}function Cn(n,e){return n.get(xp(n,e))}function xp(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var si=new WeakMap,Kb=new WeakMap,qb=new WeakMap,iE=new WeakMap,Xb=new WeakMap,Qb=new WeakSet;class mw extends io{static get DEFAULTS(){return co({className:"htUISelect",wrapIt:!1,tabIndex:-1})}constructor(e,t){super(e,zn(mw.DEFAULTS,t)),eMe(this,Qb),wm(this,si,null),wm(this,Kb,[]),wm(this,qb,void 0),wm(this,iE,void 0),wm(this,Xb,void 0),this.registerHooks()}getMenu(){return Cn(si,this)}registerHooks(){this.addLocalHook("click",()=>xp(Qb,this,iMe).call(this))}setItems(e){zd(Kb,this,this.translateNames(e)),Cn(si,this)&&Cn(si,this).setMenuItems(Cn(Kb,this))}translateNames(e){return L(e,t=>{t.name=this.translateIfPossible(t.name)}),e}build(){super.build(),zd(si,this,new gg(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer})),Cn(si,this).setMenuItems(Cn(Kb,this));const e=new io(this.hot,{className:"htUISelectCaption"}),t=new io(this.hot,{className:"htUISelectDropdown"});zd(qb,this,e),zd(iE,this,e.element),zd(Xb,this,t),this.hot.getSettings().ariaTags&&($e(t.element,[sd()]),$e(this._element,[TU()])),L([e,t],i=>this._element.appendChild(i.element)),Cn(si,this).addLocalHook("select",i=>xp(Qb,this,tMe).call(this,i)),Cn(si,this).addLocalHook("afterClose",()=>xp(Qb,this,nMe).call(this)),this.update()}update(){if(!this.isBuilt())return;let e;this.options.value?e=this.options.value.name:e=Cn(si,this).hot.getTranslatedPhrase(n_),Cn(iE,this).textContent=e,super.update()}openOptions(){const e=this.element.getBoundingClientRect();Cn(si,this)&&(Cn(si,this).open(),Cn(si,this).setPosition({left:this.hot.isLtr()?e.left-5:e.left-31,top:e.top-1,width:e.width,height:e.height}),Cn(si,this).getNavigator().toFirstItem(),Cn(si,this).getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:t=>{this.closeOptions(),this.runLocalHooks("tabKeydown",t)}},{keys:[["Control/Meta","A"]],callback:()=>!1}]))}closeOptions(){Cn(si,this)&&Cn(si,this).close()}focus(){this.isBuilt()&&this.element.focus()}destroy(){Cn(si,this)&&(Cn(si,this).destroy(),zd(si,this,null)),Cn(qb,this)&&Cn(qb,this).destroy(),Cn(Xb,this)&&Cn(Xb,this).destroy(),super.destroy()}}function tMe(n){n.name!==nt&&(this.options.value=n,this.update(),this.runLocalHooks("select",this.options.value))}function nMe(){this.runLocalHooks("afterClose")}function iMe(){this.openOptions()}function sMe(n,e){rMe(n,e),e.add(n)}function rMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vF(n,e,t){return(e=oMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oMe(n){var e=aMe(n,"string");return typeof e=="symbol"?e:e+""}function aMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function bF(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var sE=new WeakSet;class GM extends lv{constructor(e,t){super(e,{id:t.id,stateless:!1}),sMe(this,sE),vF(this,"name",""),vF(this,"addSeparator",!1),this.name=t.name,this.addSeparator=t.addSeparator,this.elements.push(new mw(this.hot,{menuContainer:t.menuContainer})),this.elements.push(new Ic(this.hot,{placeholder:hO})),this.elements.push(new Ic(this.hot,{placeholder:uO})),this.registerHooks()}registerHooks(){this.getSelectElement().addLocalHook("select",e=>bF(sE,this,lMe).call(this,e)).addLocalHook("afterClose",()=>this.runLocalHooks("afterClose")).addLocalHook("tabKeydown",e=>this.runLocalHooks("selectTabKeydown",e)),L(this.getInputElements(),e=>{e.addLocalHook("keydown",t=>bF(sE,this,cMe).call(this,t))})}setState(e){if(this.reset(),!e)return;const t=co(e.command);t.name.startsWith(Pn)&&(t.name=this.hot.getTranslatedPhrase(t.name)),this.getSelectElement().setValue(t),L(e.args,(i,s)=>{if(s>t.inputsCount-1)return!1;const r=this.getInputElement(s);r.setValue(i),r[t.inputsCount>s?"show":"hide"](),s||this.hot._registerTimeout(()=>r.focus(),10)})}getState(){const e=this.getSelectElement().getValue()||gu(pi),t=[];return L(this.getInputElements(),(i,s)=>{e.inputsCount>s&&t.push(i.getValue())}),{command:e,args:t}}updateState(e,t){const i=gu(e?e.name:pi);this.state.setValueAtIndex(t,{command:i,args:e?e.args:[]}),e||L(this.getInputElements(),s=>s.setValue(null))}getSelectElement(){return this.elements.filter(e=>e instanceof mw)[0]}getInputElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.getInputElements()[e]}getInputElements(){return this.elements.filter(e=>e instanceof Ic)}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t,i,s,r,o)=>{ae(t.parentNode,"htFiltersMenuCondition"),this.addSeparator&&ae(t.parentNode,"border");const a=this.hot.rootDocument.createElement("div");return ae(a,"htFiltersMenuLabel"),a.textContent=o,t.appendChild(a),t.parentElement.hasAttribute("ghost-table")||L(this.elements,l=>t.appendChild(l.element)),t}}}reset(){const e=this.hot.getPlugin("filters").getSelectedColumn();let t=[gu(pi)];if(e!==null){const{visualIndex:i}=e;t=GTe(this.hot.getDataType(0,i,this.hot.countRows(),i))}L(this.getInputElements(),i=>i.hide()),this.getSelectElement().setItems(t),super.reset(),this.getSelectElement().setValue(t[0])}}function lMe(n){L(this.getInputElements(),(e,t)=>{e[n.inputsCount>t?"show":"hide"](),t===0&&this.hot._registerTimeout(()=>e.focus(),10)}),this.runLocalHooks("change",n)}function cMe(n){hg(n.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),Ar(n))}function yF(n,e,t){hMe(n,e),e.set(n,t)}function hMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vm(n,e){return n.get(D3(n,e))}function CF(n,e,t){return n.set(D3(n,e),t),t}function D3(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ud=new WeakMap,rE=new WeakMap;class yS extends io{static get DEFAULTS(){return co({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}constructor(e,t){super(e,zn(yS.DEFAULTS,t)),yF(this,Ud,void 0),yF(this,rE,void 0)}build(){super.build();const e=this.hot.rootDocument.createElement("label");e.textContent=this.translateIfPossible(this.options.label.textContent),e.htmlFor=this.translateIfPossible(this.options.label.htmlFor),CF(rE,this,e),CF(Ud,this,this._element.firstChild),vm(Ud,this).checked=this.options.checked,this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(vm(rE,this).textContent=this.translateIfPossible(this.options.label.textContent))}isChecked(){return this.isBuilt()?vm(Ud,this).checked:!1}setChecked(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isBuilt()&&(vm(Ud,this).checked=e)}focus(){this.isBuilt()&&vm(Ud,this).focus()}}function uMe(n,e){dMe(n,e),e.add(n)}function dMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fMe(n,e,t){return(e=gMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gMe(n){var e=mMe(n,"string");return typeof e=="symbol"?e:e+""}function mMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pMe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const SF=0;var _F=new WeakSet;class wMe extends lv{constructor(e,t){super(e,{id:t.id,stateless:!1}),uMe(this,_F),fMe(this,"name",""),this.name=t.name,this.buildOperatorsElement()}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t)=>(ae(t.parentNode,"htFiltersMenuOperators"),L(this.elements,i=>t.appendChild(i.element)),t)}}buildOperatorsElement(){const e=[Pc,bS];L(e,t=>{const i=new yS(this.hot,{name:"operator",label:{htmlFor:t,textContent:$Te(t)},value:t,checked:t===e[SF],id:t});i.addLocalHook("change",s=>pMe(_F,this,vMe).call(this,s)),this.elements.push(i)})}setChecked(e){if(this.elements.length<e)throw Error(Nt`Radio button with index ${e} doesn't exist.`);L(this.elements,(t,i)=>{t.setChecked(i===e)})}getActiveOperationId(){const e=this.elements.find(t=>t instanceof yS&&t.isChecked());return e?e.getValue():Pc}getState(){return this.getActiveOperationId()}setState(e){this.reset(),e&&this.getActiveOperationId()!==e&&L(this.elements,t=>{t.setChecked(t.getValue()===e)})}updateState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pc,t=arguments.length>1?arguments[1]:void 0,i=e;i===UO&&(i=bS),this.state.setValueAtIndex(t,i)}reset(){this.setChecked(SF)}}function vMe(n){this.setState(n.target.value)}function bMe(n,e,t){yMe(n,e),e.set(n,t)}function yMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function oE(n,e){return n.get(N3(n,e))}function CMe(n,e,t){return n.set(N3(n,e),t),t}function N3(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var bm=new WeakMap;class pw extends io{static get DEFAULTS(){return co({href:"#",tagName:"a",tabIndex:-1,role:"button"})}constructor(e,t){super(e,zn(pw.DEFAULTS,t)),bMe(this,bm,void 0)}build(){super.build(),CMe(bm,this,this._element.firstChild)}update(){this.isBuilt()&&(oE(bm,this).textContent=this.translateIfPossible(this.options.textContent))}focus(){this.isBuilt()&&oE(bm,this).focus()}activate(){oE(bm,this).click()}}function SMe(n,e){L3(n,e),e.add(n)}function Yd(n,e,t){L3(n,e),e.set(n,t)}function L3(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xe(n,e){return n.get(Rf(n,e))}function Vr(n,e,t){return n.set(Rf(n,e),t),t}function Rf(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const RF="multipleSelect.itemBox";var Kr=new WeakMap,Bn=new WeakMap,aE=new WeakMap,Fa=new WeakMap,Ul=new WeakMap,Yl=new WeakMap,ym=new WeakSet;class ww extends io{static get DEFAULTS(){return co({className:"htUIMultipleSelect",value:[]})}constructor(e,t){super(e,zn(ww.DEFAULTS,t)),SMe(this,ym),Yd(this,Kr,[]),Yd(this,Bn,void 0),Yd(this,aE,void 0),Yd(this,Fa,void 0),Yd(this,Ul,void 0),Yd(this,Yl,void 0),Vr(Fa,this,new Ic(this.hot,{placeholder:cO,className:"htUIMultipleSelectSearch"})),Vr(Ul,this,new pw(this.hot,{textContent:rO,className:"htUISelectAll"})),Vr(Yl,this,new pw(this.hot,{textContent:oO,className:"htUIClearAll"})),this.registerHooks()}getItemsBox(){return Xe(Bn,this)}registerHooks(){Xe(Fa,this).addLocalHook("keydown",e=>Rf(ym,this,RMe).call(this,e)),Xe(Fa,this).addLocalHook("input",e=>Rf(ym,this,_Me).call(this,e)),Xe(Ul,this).addLocalHook("click",e=>Rf(ym,this,xMe).call(this,e)),Xe(Yl,this).addLocalHook("click",e=>Rf(ym,this,EMe).call(this,e))}setItems(e){var t;Vr(Kr,this,e),(t=Xe(Bn,this))===null||t===void 0||t.loadData(Xe(Kr,this))}setLocale(e){Vr(aE,this,e)}getLocale(){return Xe(aE,this)}getItems(){return[...Xe(Kr,this)]}getValue(){return MMe(Xe(Kr,this))}getSearchInputElement(){return Xe(Fa,this)}getSelectAllElement(){return Xe(Ul,this)}getClearAllElement(){return Xe(Yl,this)}isSelectedAllValues(){return Xe(Kr,this).length===this.getValue().length}build(){super.build();const{rootDocument:e}=this.hot,t=e.createElement("div"),i=new io(this.hot,{className:"htUISelectionControls",children:[Xe(Ul,this),Xe(Yl,this)]});this._element.appendChild(Xe(Fa,this).element),this._element.appendChild(i.element),this._element.appendChild(t);const s=r=>{var o;if(!this._element)return;(o=Xe(Bn,this))===null||o===void 0||o.destroy(),ae(r,"htUIMultipleSelectHot"),Vr(Bn,this,new this.hot.constructor(r,{data:Xe(Kr,this),columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:(c,h,u,d,f,g)=>{c.title=g.instance.getDataAtRowProp(h,g.label.property)},afterListen:()=>{this.runLocalHooks("focus",this)},beforeOnCellMouseUp:()=>{Xe(Bn,this).listen()},colWidths:()=>Xe(Bn,this).container.scrollWidth-ui(e),maxCols:1,autoWrapCol:!0,height:110,copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},layoutDirection:this.hot.isRtl()?"rtl":"ltr"})),Xe(Bn,this).init();const l=Xe(Bn,this).getShortcutManager().getContext("grid");l.removeShortcutsByKeys(["Tab"]),l.removeShortcutsByKeys(["Shift","Tab"]),l.addShortcut({keys:[["Escape"]],callback:c=>{this.runLocalHooks("keydown",c,this)},group:RF}),l.addShortcut({keys:[["Tab"],["Shift","Tab"]],callback:c=>{Xe(Bn,this).deselectCell(),this.runLocalHooks("keydown",c,this),this.runLocalHooks("listTabKeydown",c,this)},group:RF})};s(t),this.hot._registerTimeout(()=>s(t),100)}focus(){this.isBuilt()&&Xe(Bn,this).listen()}reset(){Xe(Fa,this).reset(),Xe(Ul,this).reset(),Xe(Yl,this).reset()}update(){this.isBuilt()&&(Xe(Bn,this).loadData(TMe(Xe(Kr,this),this.options.value)),super.update())}destroy(){var e;(e=Xe(Bn,this))===null||e===void 0||e.destroy(),Xe(Fa,this).destroy(),Xe(Yl,this).destroy(),Xe(Ul,this).destroy(),Vr(Fa,this,null),Vr(Yl,this,null),Vr(Ul,this,null),Vr(Bn,this,null),Vr(Kr,this,null),super.destroy()}}function _Me(n){const e=n.target.value.toLocaleLowerCase(this.getLocale());let t;e===""?t=[...Xe(Kr,this)]:t=Xe(Kr,this).filter(i=>`${i.value}`.toLocaleLowerCase(this.getLocale()).indexOf(e)>=0),Xe(Bn,this).loadData(t)}function RMe(n){this.runLocalHooks("keydown",n,this),gP(hg,n.keyCode)("ARROW_DOWN")&&(n.preventDefault(),Ar(n),Xe(Bn,this).listen(),Xe(Bn,this).selectCell(0,0))}function xMe(n){const e=[];n.preventDefault(),Xe(Bn,this).getSourceData().forEach((t,i)=>{t.checked=!0,e.push(GP(t,i)[0])}),Xe(Bn,this).setSourceDataAtCell(e)}function EMe(n){const e=[];n.preventDefault(),Xe(Bn,this).getSourceData().forEach((t,i)=>{t.checked=!1,e.push(GP(t,i)[0])}),Xe(Bn,this).setSourceDataAtCell(e)}function TMe(n,e){const t=cv(e);return n.map(i=>(i.checked=t(i.value),i))}function MMe(n){const e=[];return n.forEach(t=>{t.checked&&e.push(t.value)}),e}function AMe(n,e){PMe(n,e),e.add(n)}function PMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function IMe(n,e,t){return(e=OMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OMe(n){var e=kMe(n,"string");return typeof e=="symbol"?e:e+""}function kMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Zb(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Cm=new WeakSet;class HMe extends lv{constructor(e,t){super(e,{id:t.id,stateless:!1}),AMe(this,Cm),IMe(this,"name",""),this.name=t.name,this.elements.push(new ww(this.hot)),this.registerHooks()}registerHooks(){this.getMultipleSelectElement().addLocalHook("keydown",e=>Zb(Cm,this,DMe).call(this,e)).addLocalHook("listTabKeydown",e=>this.runLocalHooks("listTabKeydown",e)),this.hot.addHook("modifyFiltersMultiSelectValue",(e,t)=>Zb(Cm,this,NMe).call(this,e,t))}getElements(){const e=this.getMultipleSelectElement();return[e.getSearchInputElement(),e.getSelectAllElement(),e.getClearAllElement(),this.getMultipleSelectElement()]}setState(e){if(this.reset(),e&&e.command.key===mu){const t=this.getMultipleSelectElement();t.setItems(e.itemsSnapshot),t.setValue(e.args[0]),t.setLocale(e.locale)}}getState(){const e=this.getMultipleSelectElement(),t=e.getItems();return{command:{key:e.isSelectedAllValues()||!t.length?pi:mu},args:[e.getValue()],itemsSnapshot:t}}updateState(e){const t=(i,s,r,o,a)=>{const[l]=_l(s,u=>u.name===mu),c={},h=this.hot.getTranslatedPhrase(lS);if(l){const u=o(i,a),d=lt(u,C=>C.value),f=new Map(u.map(C=>[C.value,this.hot.getCellMeta(C.meta.visualRow,C.meta.visualCol)])),g=YM(d);r&&(l.args[0]=r);const m=[],w=gF(g,l.args[0],h,C=>{C.checked&&m.push(C.value),Zb(Cm,this,xF).call(this,C,f)}),v=e.editedConditionStack.column;c.locale=this.hot.getCellMeta(0,v).locale,c.args=[m],c.command=gu(mu),c.itemsSnapshot=w}else c.args=[],c.command=gu(pi);this.state.setValueAtIndex(i,c)};t(e.editedConditionStack.column,e.editedConditionStack.conditions,e.conditionArgsChange,e.filteredRowsFactory),e.dependentConditionStacks.length&&t(e.dependentConditionStacks[0].column,e.dependentConditionStacks[0].conditions,e.conditionArgsChange,e.filteredRowsFactory,e.editedConditionStack)}getMultipleSelectElement(){return this.elements.filter(e=>e instanceof ww)[0]}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t,i,s,r,o)=>{ae(t.parentNode,"htFiltersMenuValue");const a=this.hot.rootDocument.createElement("div");return ae(a,"htFiltersMenuLabel"),a.textContent=o,t.appendChild(a),t.parentElement.hasAttribute("ghost-table")||L(this.elements,l=>t.appendChild(l.element)),t}}}reset(){const e=this.hot.getTranslatedPhrase(lS),t=this._getColumnVisibleValues(),i=t.map(l=>l.value),s=new Map(t.map(l=>[l.value,l.meta])),r=YM(i),o=gF(r,r,e,l=>{Zb(Cm,this,xF).call(this,l,s)});this.getMultipleSelectElement().setItems(o),super.reset(),this.getMultipleSelectElement().setValue(r);const a=this.hot.getPlugin("filters").getSelectedColumn();a!==null&&this.getMultipleSelectElement().setLocale(this.hot.getCellMeta(0,a.visualIndex).locale)}_getColumnVisibleValues(){const e=this.hot.getPlugin("filters").getSelectedColumn();return e===null?[]:lt(this.hot.getDataAtCol(e.visualIndex),(t,i)=>({value:P3(t),meta:this.hot.getCellMeta(i,e.visualIndex)}))}}function DMe(n){hg(n.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),Ar(n))}function xF(n,e){this.hot.hasHook("modifyFiltersMultiSelectValue")&&(n.visualValue=this.hot.runHooks("modifyFiltersMultiSelectValue",n.visualValue,e.get(n.value)))}function NMe(n,e){switch(e.type){case"numeric":return PG(n,e);default:return n}}var $3;function LMe(n,e){$Me(n,e),e.add(n)}function $Me(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function FMe(n,e,t){return(e=BMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BMe(n){var e=VMe(n,"string");return typeof e=="symbol"?e:e+""}function VMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function WMe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var EF=new WeakSet;class vw extends lv{static get BUTTON_OK(){return"ok"}static get BUTTON_CANCEL(){return"cancel"}constructor(e,t){super(e,{id:t.id,stateless:!0}),LMe(this,EF),FMe(this,"name",""),this.name=t.name,this.elements.push(new Ic(this.hot,{type:"button",value:aO,className:"htUIButton htUIButtonOK",identifier:vw.BUTTON_OK})),this.elements.push(new Ic(this.hot,{type:"button",value:lO,className:"htUIButton htUIButtonCancel",identifier:vw.BUTTON_CANCEL})),this.registerHooks()}registerHooks(){L(this.elements,e=>{e.addLocalHook("click",(t,i)=>WMe(EF,this,jMe).call(this,t,i))})}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t)=>(ae(t.parentNode,"htFiltersMenuActionBar"),L(this.elements,i=>t.appendChild(i.element)),t)}}accept(){this.runLocalHooks("accept")}cancel(){this.runLocalHooks("cancel")}}$3=vw;function jMe(n,e){e.options.identifier===$3.BUTTON_OK?this.accept():this.cancel()}function Jb(n,e,t){return(e=zMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zMe(n){var e=UMe(n,"string");return typeof e=="symbol"?e:e+""}function UMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const TF="ConditionCollection.filteringStates";class GO{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Jb(this,"hot",void 0),Jb(this,"isMapRegistrable",void 0),Jb(this,"filteringStates",new t_),Jb(this,"previousConditionStack",null),this.hot=e,this.isMapRegistrable=t,this.isMapRegistrable===!0?this.hot.columnIndexMapper.registerMap(TF,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}isEmpty(){return this.getFilteredColumns().length===0}isMatch(e,t){var i;const s=this.filteringStates.getValueAtIndex(t),r=(i=s==null?void 0:s.conditions)!==null&&i!==void 0?i:[],o=s==null?void 0:s.operation;return this.isMatchInConditions(r,e,o)}isMatchInConditions(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pc;return e.length?LTe(i)(e,t):!0}addCondition(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pc,s=arguments.length>3?arguments[3]:void 0;const r=this.hot.getCellMeta(0,e).locale,o=lt(t.args,h=>typeof h=="string"?h.toLocaleLowerCase(r):h),a=t.name||t.command.key;this.previousConditionStack===null&&this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeAdd",e);const l=this.getOperation(e);if(l){if(l!==i)throw Error(Nt`The column of index ${e} has been already applied with a \`${l}\`\x20
        filter operation. Use \`removeConditions\` to clear the current conditions and then add new ones.\x20
        Mind that you cannot mix different types of operations (for instance, if you use \`conjunction\`,\x20
        use it consequently for a particular column).`)}else if(Xt(gw[i]))throw new Error(Nt`Unexpected operation named \`${i}\`. Possible ones are\x20
        \`disjunction\` and \`conjunction\`.`);const c=this.getConditions(e);c.length===0?this.filteringStates.setValueAtIndex(e,{operation:i,conditions:[{name:a,args:o,func:Bc(a,o)}]},s):c.push({name:a,args:o,func:Bc(a,o)}),this.runLocalHooks("afterAdd",e)}getConditions(e){var t,i;return(t=(i=this.filteringStates.getValueAtIndex(e))===null||i===void 0?void 0:i.conditions)!==null&&t!==void 0?t:[]}getOperation(e){var t;return(t=this.filteringStates.getValueAtIndex(e))===null||t===void 0?void 0:t.operation}getFilteredColumns(){return this.filteringStates.getEntries().map(e=>{let[t]=e;return t})}getColumnStackPosition(e){return this.getFilteredColumns().indexOf(e)}exportAllConditions(){return Un(this.filteringStates.getEntries(),(e,t)=>{let[i,{operation:s,conditions:r}]=t;return e.push({column:i,operation:s,conditions:lt(r,o=>{let{name:a,args:l}=o;return{name:a,args:l}})}),e},[])}importAllConditions(e){this.clean(),L(e,t=>{L(t.conditions,i=>this.addCondition(t.column,i))})}removeConditions(e){this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeRemove",e),this.filteringStates.clearValue(e),this.runLocalHooks("afterRemove",e)}clean(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}hasConditions(e,t){const i=this.getConditions(e);return t?i.some(s=>s.name===t):i.length>0}setPreviousConditionStack(e){this.previousConditionStack=e}destroy(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(TF),this.filteringStates=null,this.clearLocalHooks()}}Lt(GO,Mi);function MF(n,e,t){return(e=YMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YMe(n){var e=GMe(n,"string");return typeof e=="symbol"?e:e+""}function GMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class F3{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>[];MF(this,"conditionCollection",void 0),MF(this,"columnDataFactory",void 0),this.conditionCollection=e,this.columnDataFactory=t}filter(){let e=[];return L(this.conditionCollection.getFilteredColumns(),(t,i)=>{let s=this.columnDataFactory(t);i&&(s=this._getIntersectData(s,e)),e=this.filterByColumn(t,s)}),e}filterByColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=[];return L(t,s=>{s!==void 0&&this.conditionCollection.isMatch(s,e)&&i.push(s)}),i}_getIntersectData(e,t){const i=[];return L(t,s=>{const r=s.meta.visualRow;e[r]!==void 0&&(i[r]=e[r])}),i}}function KMe(n,e){qMe(n,e),e.add(n)}function qMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oh(n,e,t){return(e=XMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XMe(n){var e=QMe(n,"string");return typeof e=="symbol"?e:e+""}function QMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function lE(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var ey=new WeakSet;class B3{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>[];KMe(this,ey),Oh(this,"hot",void 0),Oh(this,"conditionCollection",void 0),Oh(this,"columnDataFactory",void 0),Oh(this,"changes",[]),Oh(this,"grouping",!1),Oh(this,"latestEditedColumnPosition",-1),Oh(this,"latestOrderStack",[]),this.hot=e,this.conditionCollection=t,this.columnDataFactory=i,this.conditionCollection.addLocalHook("beforeRemove",s=>lE(ey,this,ZMe).call(this,s)),this.conditionCollection.addLocalHook("afterRemove",s=>this.updateStatesAtColumn(s)),this.conditionCollection.addLocalHook("afterAdd",s=>this.updateStatesAtColumn(s)),this.conditionCollection.addLocalHook("beforeClean",()=>lE(ey,this,JMe).call(this)),this.conditionCollection.addLocalHook("afterClean",()=>lE(ey,this,e1e).call(this))}groupChanges(){this.grouping=!0}flush(){this.grouping=!1,L(this.changes,e=>{this.updateStatesAtColumn(e)}),this.changes.length=0}updateStatesAtColumn(e,t){var i=this;if(this.grouping){this.changes.indexOf(e)===-1&&this.changes.push(e);return}const s=this.conditionCollection.exportAllConditions();let r=this.conditionCollection.getColumnStackPosition(e);r===-1&&(r=this.latestEditedColumnPosition);const o=s.slice(0,r),a=s.slice(r);a.length&&a[0].column===e&&a.shift();const l=GU(function(h,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const f=new GO(i.hot,!1),g=[].concat(h,d);f.importAllConditions(g);const m=i.columnDataFactory(u);let w;f.isEmpty()?w=m:w=new F3(f,C=>i.columnDataFactory(C)).filter(),w=lt(w,C=>C.meta.visualRow);const v=cv(w);return f.destroy(),_l(m,C=>v(C.meta.visualRow))})(o),c=[].concat(this.conditionCollection.getConditions(e));this.runLocalHooks("update",{editedConditionStack:{column:e,conditions:c},dependentConditionStacks:a,filteredRowsFactory:l,conditionArgsChange:t})}destroy(){this.clearLocalHooks(),et(this,(e,t)=>{this[t]=null})}}function ZMe(n){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(n)}function JMe(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}function e1e(){L(this.latestOrderStack,n=>{this.updateStatesAtColumn(n)})}Lt(B3,Mi);function t1e(n){return a3({initialPage:0,size:()=>n.length,onItemSelect:(t,i)=>{const s=n[t];if(s instanceof ww)return i;if(s.element&&!Lu(s.element))return!1;s.focus()}})}const Sm="filters";function n1e(n,e){let t=-1;const i=t1e(e),s=l=>()=>{n.isOpened()&&n.getKeyboardShortcutsCtrl().listen(Sm),i.setCurrentPage(e.indexOf(l))};e.forEach(l=>{l instanceof io&&(l.addLocalHook("click",s(l)),l.addLocalHook("focus",s(l)),l.addLocalHook("afterClose",s(l)))}),n.addLocalHook("afterSelectionChange",l=>{l.key.startsWith("filter_")||i.clear()});function r(l){const c=n.getKeyboardShortcutsCtrl(),h=l.getKeyboardShortcutsCtrl();i.clear(),h.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],forwardToContext:c.getContext(Sm),callback:()=>{l.isSubMenu()&&l.close(),c.listen(Sm)}}]),!l.isSubMenu()&&c.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:u=>{const d=n.getNavigator();d.getCurrentPage()>-1&&(t=d.getCurrentPage()),d.clear(),u.shiftKey?i.toPreviousItem():i.toNextItem()}},{keys:[["Escape"]],callback:()=>{n.close()}},{keys:[["Enter"],["Space"]],preventDefault:!1,callback:u=>{const d=e[i.getCurrentPage()];d instanceof mw&&(d.openOptions(),u.preventDefault()),d instanceof pw&&(d.activate(),u.preventDefault()),d instanceof io||u.preventDefault()}}],Sm)}n.addLocalHook("afterSubmenuOpen",r),n.addLocalHook("afterOpen",r);function o(){n.focus(),n.getKeyboardShortcutsCtrl().listen(Sm)}function a(){return t}return{...i,listen:o,getLastMenuPage:a}}function i1e(n,e){V3(n,e),e.add(n)}function s1e(n,e,t){V3(n,e),e.set(n,t)}function V3(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _m(n,e,t){return(e=r1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r1e(n){var e=o1e(n,"string");return typeof e=="symbol"?e:e+""}function o1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function a1e(n,e,t){return n.set(Os(n,e),t),t}function Rm(n,e){return n.get(Os(n,e))}function Os(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const KM="filters",l1e=250,AF=KM;var kh=new WeakMap,ar=new WeakSet;class c1e extends xt{static get PLUGIN_KEY(){return KM}static get PLUGIN_PRIORITY(){return l1e}static get PLUGIN_DEPS(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}constructor(e){super(e),i1e(this,ar),_m(this,"dropdownMenuPlugin",null),_m(this,"conditionCollection",null),_m(this,"conditionUpdateObserver",null),_m(this,"components",new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]])),_m(this,"filtersRowsMap",null),s1e(this,kh,void 0),this.hot.addHook("afterGetColHeader",(t,i)=>Os(ar,this,m1e).call(this,t,i))}isEnabled(){return!!this.hot.getSettings()[KM]}enablePlugin(){if(this.enabled)return;this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new tv),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");const e=this.hot.getSettings().dropdownMenu,t=e&&e.uiContainer||this.hot.rootDocument.body,i=o=>(o.addLocalHook("accept",()=>Os(ar,this,PF).call(this,"accept")),o.addLocalHook("cancel",()=>Os(ar,this,PF).call(this,"cancel")),o.addLocalHook("change",a=>Os(ar,this,g1e).call(this,o,a)),o),s=()=>`${this.hot.getTranslatedPhrase(nO)}:`,r=()=>`${this.hot.getTranslatedPhrase(iO)}:`;if(!this.components.get("filter_by_condition")){const o=new GM(this.hot,{id:"filter_by_condition",name:s,addSeparator:!1,menuContainer:t});o.addLocalHook("afterClose",()=>Os(ar,this,IF).call(this)),this.components.set("filter_by_condition",i(o))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new wMe(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){const o=new GM(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:t});o.addLocalHook("afterClose",()=>Os(ar,this,IF).call(this)),this.components.set("filter_by_condition2",i(o))}if(this.components.get("filter_by_value")||this.components.set("filter_by_value",i(new HMe(this.hot,{id:"filter_by_value",name:r}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",i(new vw(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new GO(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new B3(this.hot,this.conditionCollection,o=>this.getDataMapAtColumn(o)),this.conditionUpdateObserver.addLocalHook("update",o=>Os(ar,this,p1e).call(this,o))),this.components.forEach(o=>o.show()),this.addHook("afterDropdownMenuDefaultOptions",o=>Os(ar,this,f1e).call(this,o)),this.addHook("afterDropdownMenuShow",()=>Os(ar,this,u1e).call(this)),this.addHook("afterDropdownMenuHide",()=>Os(ar,this,d1e).call(this)),this.addHook("afterChange",o=>Os(ar,this,h1e).call(this,o)),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),!Rm(kh,this)&&this.dropdownMenuPlugin.enabled){const o=this.dropdownMenuPlugin.menu,a=[{focus:()=>{const c=o.getNavigator(),h=Rm(kh,this).getLastMenuPage();o.focus(),h>0?c.setCurrentPage(h):c.toFirstItem()}},...Array.from(this.components).map(c=>{let[,h]=c;return h.getElements()}).flat()];a1e(kh,this,n1e(o,a));const l=c=>{Rm(kh,this).listen(),c.preventDefault(),hg(c.keyCode,"TAB")&&(c.shiftKey?Rm(kh,this).toPreviousItem():Rm(kh,this).toNextItem())};this.components.get("filter_by_value").addLocalHook("listTabKeydown",l),this.components.get("filter_by_condition").addLocalHook("selectTabKeydown",l)}this.registerShortcuts(),super.enablePlugin()}disablePlugin(){if(this.enabled){var e;(e=this.dropdownMenuPlugin)!==null&&e!==void 0&&e.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach((t,i)=>{t.destroy(),this.components.set(i,null)}),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName)}this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Alt","A"]],stopPropagation:!0,callback:()=>{const e=this.hot.getSelected();this.clearConditions(),this.filter(),e&&this.hot.selectCells(e)},group:AF})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(AF)}addCondition(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Pc;const r=this.hot.toPhysicalColumn(e);this.conditionCollection.addCondition(r,{command:{key:t},args:i},s)}removeConditions(e){const t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}clearConditions(e){if(e===void 0)this.conditionCollection.clean();else{const t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}}filter(){const{navigableHeaders:e}=this.hot.getSettings(),t=this._createDataFilter(),i=!this.conditionCollection.isEmpty();let s=[];const r=this.conditionCollection.exportAllConditions();if(this.hot.runHooks("beforeFilter",r,this.conditionCollection.previousConditionStack)!==!1)if(i){const a=[];this.hot.batchExecution(()=>{this.filtersRowsMap.clear(),s=lt(t.filter(),c=>c.meta.visualRow);const l=cv(s);ke(this.hot.countSourceRows()-1,c=>{l(c)||a.push(c)}),L(a,c=>{this.filtersRowsMap.setValueAtIndex(c,!0)})},!0),!e&&!s.length&&this.hot.deselectCell()}else this.filtersRowsMap.clear();this.hot.runHooks("afterFilter",r),this.conditionCollection.setPreviousConditionStack(null),this.hot.view.adjustElementsSize(),this.hot.render(),this.hot.selection.isSelected()&&this.hot.selectCell(e?-1:0,this.hot.getSelectedRangeLast().highlight.col)}getSelectedColumn(){var e;const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t?{visualIndex:t.col,physicalIndex:this.hot.toPhysicalColumn(t.col)}:null}getDataMapAtColumn(e){const t=this.hot.toVisualColumn(e),i=[];return L(this.hot.getSourceDataAtCol(t),(s,r)=>{var o;const{row:a,col:l,visualCol:c,visualRow:h,type:u,instance:d,dateFormat:f,locale:g}=this.hot.getCellMeta(r,t),m=(o=this.hot.getDataAtCell(this.hot.toVisualRow(r),t))!==null&&o!==void 0?o:s;i.push({meta:{row:a,col:l,visualCol:c,visualRow:h,type:u,instance:d,dateFormat:f,locale:g},value:P3(m)})}),i}updateValueComponentCondition(e){const t=this.hot.getDataAtCol(e),i=YM(t);this.conditionUpdateObserver.updateStatesAtColumn(e,i)}restoreComponents(e){var t;const i=(t=this.getSelectedColumn())===null||t===void 0?void 0:t.physicalIndex;e.forEach(s=>{s.isHidden()||s.restoreState(i)}),this.updateDependentComponentsVisibility()}getOperationBasedOnArguments(e,t,i,s){let r=e;return r===bS&&t.command.key!==pi&&i.command.key!==pi&&s.command.key!==pi?r=UO:s.command.key!==pi&&(t.command.key===pi||i.command.key===pi)&&(r=Pc),r}setListeningDropdownMenu(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}updateDependentComponentsVisibility(){const e=this.components.get("filter_by_condition"),{command:t}=e.getState(),i=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];t.showOperators?this.showComponents(...i):this.hideComponents(...i)}_createDataFilter(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.conditionCollection;return new F3(e,t=>this.getDataMapAtColumn(t))}getIndexesOfComponents(){const e=[];if(!this.dropdownMenuPlugin)return e;const t=this.dropdownMenuPlugin.menu;for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return L(s,o=>{L(t.menuItems,(a,l)=>{a.key===o.getMenuItemDescriptor().key&&e.push(l)})}),e}changeComponentsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.dropdownMenuPlugin)return;const i=this.dropdownMenuPlugin.menu.hotMenu,s=i.getPlugin("hiddenRows");for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];const l=this.getIndexesOfComponents(...o);e?s.showRows(l):s.hideRows(l),i.render()}hideComponents(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changeComponentsVisibility(!1,...t)}showComponents(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changeComponentsVisibility(!0,...t)}destroy(){this.enabled&&(this.components.forEach((e,t)=>{e!==null&&(e.destroy(),this.components.set(t,null))}),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),super.destroy()}}function h1e(n){n&&L(n,e=>{const[,t]=e,i=this.hot.propToCol(t);this.conditionCollection.hasConditions(i)&&this.updateValueComponentCondition(i)})}function u1e(){const n=this.dropdownMenuPlugin.menu;this.restoreComponents(Array.from(this.components.values())),n.updateMenuDimensions()}function d1e(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}function f1e(n){n.items.push({name:nt}),this.components.forEach(e=>{n.items.push(e.getMenuItemDescriptor())})}function PF(n){var e;if(n==="accept"){const i=this.getSelectedColumn();if(i===null){var t;(t=this.dropdownMenuPlugin)===null||t===void 0||t.close();return}const{physicalIndex:s}=i,r=this.components.get("filter_by_condition").getState(),o=this.components.get("filter_by_condition2").getState(),a=this.components.get("filter_by_value").getState(),l=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),r,o,a);this.conditionUpdateObserver.groupChanges();let c=this.conditionCollection.getColumnStackPosition(s);c===-1&&(c=void 0),this.conditionCollection.removeConditions(s),r.command.key!==pi&&(this.conditionCollection.addCondition(s,r,l,c),o.command.key!==pi&&this.conditionCollection.addCondition(s,o,l,c)),a.command.key!==pi&&this.conditionCollection.addCondition(s,a,l,c),this.conditionUpdateObserver.flush(),this.components.forEach(h=>h.saveState(s)),this.filtersRowsMap.clear(),this.filter()}(e=this.dropdownMenuPlugin)===null||e===void 0||e.close()}function g1e(n,e){this.updateDependentComponentsVisibility(),n.constructor===GM&&!e.inputsCount&&this.setListeningDropdownMenu()}function IF(){this.setListeningDropdownMenu()}function m1e(n,e){const t=this.hot.toPhysicalColumn(n);this.enabled&&this.conditionCollection.hasConditions(t)?ae(e,"htFiltersActive"):ze(e,"htFiltersActive")}function p1e(n){var e;if(!((e=this.dropdownMenuPlugin)!==null&&e!==void 0&&e.enabled))return;const{editedConditionStack:{conditions:t,column:i}}=n,s=t.filter(o=>o.name===mu),r=t.filter(o=>o.name!==mu);if(s.length>=2||r.length>=3)Dt(Nt`The filter conditions have been applied properly, but couldn’t be displayed visually.\x20
        The overall amount of conditions exceed the capability of the dropdown menu.\x20
        For more details see the documentation.`);else{const o=this.conditionCollection.getOperation(i);this.components.get("filter_by_condition").updateState(r[0],i),this.components.get("filter_by_condition2").updateState(r[1],i),this.components.get("filter_operators").updateState(o,i),this.components.get("filter_by_value").updateState(n)}}const W3="internal-use-in-handsontable",qM={licenseKey:W3,useArrayArithmetic:!0,useColumnIndex:!1,useStats:!1,evaluateNullToZero:!0,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,leapYear1900:!1,nullDate:{year:1899,month:12,day:30},nullYear:30,dateFormats:["DD/MM/YYYY","DD/MM/YY"],timeFormats:["hh:mm","hh:mm:ss.sss"],matchWholeCell:!0,useRegularExpressions:!1,useWildcards:!0,functionArgSeparator:",",thousandSeparator:"",decimalSeparator:".",language:"enGB"};function j3(n){var e;return{maxColumns:n.maxColumns,maxRows:n.maxRows,language:(e=n[$i])===null||e===void 0||(e=e.language)===null||e===void 0?void 0:e.langCode}}function z3(n){return Object.keys(n).reduce((e,t)=>(t!=="hyperformula"&&(e[t]=n[t]),e),{})}function w1e(n){var e;const t=n[$i],i=z3(t!=null&&(e=t.engine)!==null&&e!==void 0&&e.hyperformula?t.engine:{}),s=j3(n);return{...qM,...i,...s}}function v1e(n){var e;const t=n[$i],i=z3(t!=null&&(e=t.engine)!==null&&e!==void 0&&e.hyperformula?t.engine:{}),s=j3(n);return{...i,...s}}function b1e(n,e){return Object.keys(e).some(t=>e[t]!==void 0&&e[t]!==n[t])}function C_(){const n="engine_relationship",e=vo($i);return e.hasItem(n)||e.register(n,new Map),e.getItem(n)}function KO(){const n="shared_engine_usage",e=vo($i);return e.hasItem(n)||e.register(n,new Map),e.getItem(n)}function y1e(n){const e=n.getSettings(),t=e[$i],i=t==null?void 0:t.engine;if(t===!0||Xt(i))return null;if(typeof i.hyperformula=="function"||typeof i=="function"){var s;return C1e((s=i.hyperformula)!==null&&s!==void 0?s:i,e,n)}else if(typeof i=="object"&&Xt(i.hyperformula)){const r=C_(),o=KO().get(i);return r.has(i)||r.set(i,[]),r.get(i).push(n),o&&o.push(n.guid),i.getConfig().licenseKey||i.updateConfig({licenseKey:W3}),(i.getConfig().leapYear1900!==qM.leapYear1900||U0(i.getConfig().nullDate,qM.nullDate)===!1)&&Dt(Nt`If you use HyperFormula with Handsontable, keep the default \`leapYear1900\` and \`nullDate\` 
      settings. Otherwise, HyperFormula's dates may not sync correctly with Handsontable's dates.`),i}return null}function C1e(n,e,t){const i=e[$i],s=w1e(e),r=C_(),o=KO();S1e(n,i.functions),_1e(n,i.language);const a=n.buildEmpty(s);return r.set(a,[t]),o.set(a,[t.guid]),R1e(a,i.namedExpressions),a.on("sheetAdded",()=>{a.rebuildAndRecalculate()}),a.on("sheetRemoved",()=>{a.rebuildAndRecalculate()}),a}function OF(n){var e;const t=C_(),i=t.size===0?[]:Array.from((e=t.get(n))!==null&&e!==void 0?e:[]);return new Map(i.map(s=>[s.getPlugin("formulas").sheetId,s]))}function kF(n,e){if(n){const t=C_(),i=t.get(n),s=KO(),r=s.get(n);i&&i.includes(e)&&(i.splice(i.indexOf(e),1),i.length===0&&t.delete(n)),r&&r.includes(e.guid)&&(r.splice(r.indexOf(e.guid),1),r.length===0&&(s.delete(n),n.destroy()))}}function S1e(n,e){e&&e.forEach(t=>{const{name:i,plugin:s,translations:r}=t;try{n.registerFunction(i,s,r)}catch(o){Dt(o.message)}})}function _1e(n,e){if(e){const{langCode:t}=e;try{n.registerLanguage(t,e)}catch(i){Dt(i.message)}}}function R1e(n,e){e&&(n.suspendEvaluation(),e.forEach(t=>{const{name:i,expression:s,scope:r,options:o}=t;try{n.addNamedExpression(i,s,r,o)}catch(a){Dt(a.message)}}),n.resumeEvaluation())}function x1e(n,e){return(Xt(e)||!n.doesSheetExist(e))&&(e=n.addSheet(e)),e}const U3="DD/MM/YYYY";function Y3(n){return typeof n=="string"&&n.charAt(0)==="'"&&n.charAt(1)==="="}function E1e(n){return Y3(n)?n.substr(1):n}function T1e(n){return typeof n=="string"&&n.startsWith("=")}function qO(n,e){return typeof n=="string"&&e==="date"}function G3(n,e){return le(n,e,!0).isValid()}function K3(n,e){return le(n,e,!0).format(U3)}function M1e(n,e){return le(n,U3,!0).format(e)}function q3(n,e){const i=new Date(Date.UTC(0,0,n+-1));return le(i).format(e)}function A1e(n,e,t){const i=Array.from(Array(t).keys()).filter(r=>n.includes(r)===!1);if(e===0){var s;return(s=i[e])!==null&&s!==void 0?s:0}return i[e-1]+1}function P1e(n,e){const t=[];return n.forEach(i=>{const s={from:i,to:e};t.forEach(r=>{const o=r.from>r.to,a=r.to<=s.from;r.from>s.from&&a&&o&&(s.from+=1)}),s.from>=e&&(e+=1),t.push(s)}),t}function I1e(n){return n.forEach((e,t)=>{n.slice(t+1).forEach(s=>{const r=s.from<s.to;s.from>e.from&&r&&(s.from-=1)})}),n}function XO(n,e,t){const i=P1e(n,A1e(n,e,t));return I1e(i)}function Hh(n,e,t){O1e(n,e),e.set(n,t)}function O1e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function on(n,e){return n.get(X3(n,e))}function Gl(n,e,t){return n.set(X3(n,e),t),t}function X3(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var xm=new WeakMap,Kl=new WeakMap,Ts=new WeakMap,ty=new WeakMap,cE=new WeakMap,hE=new WeakMap,ny=new WeakMap;class HF{constructor(e,t,i){Hh(this,xm,void 0),Hh(this,Kl,void 0),Hh(this,Ts,void 0),Hh(this,ty,[]),Hh(this,cE,[]),Hh(this,hE,void 0),Hh(this,ny,[]),Gl(xm,this,e),Gl(Kl,this,t),Gl(Ts,this,i)}setRemovedHfIndexes(e){return Gl(ny,this,e.map(t=>{const i=on(Kl,this).getVisualFromPhysicalIndex(t);return this.getHfIndexFromVisualIndex(i)})),on(ny,this)}getRemovedHfIndexes(){return on(ny,this)}getHfIndexFromVisualIndex(e){const t=on(Kl,this).getIndexesSequence(),i=on(Kl,this).getNotTrimmedIndexes();return t.indexOf(i[e])}syncMoves(e){const i=`move${Ui(on(xm,this))}s`;on(Ts,this).getEngine().batch(()=>{e.forEach(s=>{const r=s.from!==s.to,o=s.from+1!==s.to;r&&o&&on(Ts,this).getEngine()[i](on(Ts,this).getSheetId(),s.from,1,s.to)})})}storeMovesInformation(e,t,i){i!==!1&&(Gl(cE,this,e.map(s=>this.getHfIndexFromVisualIndex(s))),Gl(hE,this,this.getHfIndexFromVisualIndex(t)))}calculateAndSyncMoves(e,t){if(on(Ts,this).isPerformingUndoRedo()||e===!1||t===!1)return;const i=XO(on(cE,this),on(hE,this),on(Kl,this).getNumberOfIndexes());on(Ts,this).getSheetId()===null?on(Ts,this).getPostponeAction(()=>this.syncMoves(i)):this.syncMoves(i)}getIndexesChangeSyncMethod(){const e=`set${Ui(on(xm,this))}Order`;return t=>{if(on(Ts,this).isPerformingUndoRedo())return;const i=on(Kl,this).getIndexesSequence();if(t==="update"&&i.length>0){const s=on(ty,this).map(l=>i.indexOf(l)),r=on(Ts,this).getEngine().getSheetDimensions(on(Ts,this).getSheetId());let o;on(xm,this)==="row"?o=r.height:o=r.width;const a=s.length;for(let l=a;l<o;l+=1)s.push(l);on(Ts,this).getEngine()[e](on(Ts,this).getSheetId(),s)}Gl(ty,this,i)}}init(){Gl(ty,this,on(Kl,this).getIndexesSequence())}}function Dh(n,e,t){k1e(n,e),e.set(n,t)}function k1e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ba(n,e){return n.get(Q3(n,e))}function Nh(n,e,t){return n.set(Q3(n,e),t),t}function Q3(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var iy=new WeakMap,sy=new WeakMap,uE=new WeakMap,dE=new WeakMap,fE=new WeakMap,gE=new WeakMap,mE=new WeakMap;class H1e{constructor(e,t,i){Dh(this,iy,void 0),Dh(this,sy,void 0),Dh(this,uE,void 0),Dh(this,dE,!1),Dh(this,fE,!1),Dh(this,gE,null),Dh(this,mE,null),Nh(iy,this,new HF("row",e,this)),Nh(sy,this,new HF("column",t,this)),Nh(uE,this,i)}getForAxis(e){return e==="row"?Ba(iy,this):Ba(sy,this)}setPerformUndo(e){Nh(dE,this,e)}setPerformRedo(e){Nh(fE,this,e)}isPerformingUndoRedo(){return Ba(dE,this)||Ba(fE,this)}getSheetId(){return Ba(mE,this)}getEngine(){return Ba(gE,this)}getPostponeAction(){return Ba(uE,this)}setupSyncEndpoint(e,t){Nh(gE,this,e),Nh(mE,this,t),Ba(iy,this).init(),Ba(sy,this).init()}}function D1e(n,e){Z3(n,e),e.add(n)}function Gd(n,e,t){return(e=N1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function N1e(n){var e=L1e(n,"string");return typeof e=="symbol"?e:e+""}function L1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pE(n,e,t){Z3(n,e),e.set(n,t)}function Z3(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vc(n,e,t){return n.set(Ft(n,e),t),t}function Hf(n,e){return n.get(Ft(n,e))}function Ft(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const $i="formulas",$1e=["maxRows","maxColumns","language"],F1e=260;Ee.getSingleton().register("afterNamedExpressionAdded");Ee.getSingleton().register("afterNamedExpressionRemoved");Ee.getSingleton().register("afterSheetAdded");Ee.getSingleton().register("afterSheetRemoved");Ee.getSingleton().register("afterSheetRenamed");Ee.getSingleton().register("afterFormulasValuesUpdate");const mg=n=>n==="UndoRedo.undo"||n==="UndoRedo.redo"||n==="auto";var xl=new WeakMap,QO=new WeakMap,Em=new WeakMap,jt=new WeakSet;class B1e extends xt{constructor(){var e;super(...arguments),e=this,D1e(this,jt),pE(this,xl,!1),pE(this,QO,!1),pE(this,Em,[["valuesUpdated",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ft(jt,e,nAe).call(e,...i)}],["namedExpressionAdded",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ft(jt,e,iAe).call(e,...i)}],["namedExpressionRemoved",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ft(jt,e,sAe).call(e,...i)}],["sheetAdded",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ft(jt,e,rAe).call(e,...i)}],["sheetRenamed",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ft(jt,e,oAe).call(e,...i)}],["sheetRemoved",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ft(jt,e,aAe).call(e,...i)}]]),Gd(this,"staticRegister",vo("formulas")),Gd(this,"engine",null),Gd(this,"sheetName",null),Gd(this,"indexSyncer",null),Gd(this,"rowAxisSyncer",null),Gd(this,"columnAxisSyncer",null)}static get PLUGIN_KEY(){return $i}static get PLUGIN_PRIORITY(){return F1e}static get SETTING_KEYS(){return[$i,...$1e]}get sheetId(){return this.sheetName===null?null:this.engine.getSheetId(this.sheetName)}isEnabled(){return!!this.hot.getSettings()[$i]}enablePlugin(){var e,t=this;if(!this.enabled){if(this.engine=(e=y1e(this.hot))!==null&&e!==void 0?e:this.engine,!this.engine){Dt("Missing the required `engine` key in the Formulas settings. Please fill it with either an engine class or an engine instance.");return}if(this.sheetName!==null&&!this.engine.doesSheetExist(this.sheetName)){const i=this.addSheet(this.sheetName,this.hot.getSourceDataArray());i!==!1&&(this.sheetName=i)}this.addHook("beforeLoadData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,DF).call(t,...s)}),this.addHook("afterLoadData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,NF).call(t,...s)}),this.addHook("beforeUpdateData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,DF).call(t,...s)}),this.addHook("afterUpdateData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,NF).call(t,...s)}),this.addHook("modifyData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,z1e).call(t,...s)}),this.addHook("modifySourceData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,U1e).call(t,...s)}),this.addHook("beforeValidate",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,V1e).call(t,...s)}),this.addHook("afterSetSourceDataAtCell",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,Y1e).call(t,...s)}),this.addHook("afterSetDataAtCell",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,LF).call(t,...s)}),this.addHook("afterSetDataAtRowProp",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,LF).call(t,...s)}),this.addHook("beforeCreateRow",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,G1e).call(t,...s)}),this.addHook("beforeCreateCol",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,K1e).call(t,...s)}),this.addHook("afterCreateRow",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,Q1e).call(t,...s)}),this.addHook("afterCreateCol",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,Z1e).call(t,...s)}),this.addHook("beforeRemoveRow",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,q1e).call(t,...s)}),this.addHook("beforeRemoveCol",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,X1e).call(t,...s)}),this.addHook("afterRemoveRow",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,J1e).call(t,...s)}),this.addHook("afterRemoveCol",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,eAe).call(t,...s)}),this.indexSyncer=new H1e(this.hot.rowIndexMapper,this.hot.columnIndexMapper,i=>{this.hot.addHookOnce("init",()=>{i()})}),this.rowAxisSyncer=this.indexSyncer.getForAxis("row"),this.columnAxisSyncer=this.indexSyncer.getForAxis("column"),this.hot.addHook("afterRowSequenceChange",this.rowAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("afterColumnSequenceChange",this.columnAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("beforeRowMove",(i,s,r,o)=>{this.rowAxisSyncer.storeMovesInformation(i,s,o)}),this.hot.addHook("beforeColumnMove",(i,s,r,o)=>{this.columnAxisSyncer.storeMovesInformation(i,s,o)}),this.hot.addHook("afterRowMove",(i,s,r,o,a)=>{this.rowAxisSyncer.calculateAndSyncMoves(o,a)}),this.hot.addHook("afterColumnMove",(i,s,r,o,a)=>{this.columnAxisSyncer.calculateAndSyncMoves(o,a)}),this.hot.addHook("beforeColumnFreeze",(i,s)=>{this.columnAxisSyncer.storeMovesInformation([i],this.hot.getSettings().fixedColumnsStart,s)}),this.hot.addHook("afterColumnFreeze",(i,s)=>{this.columnAxisSyncer.calculateAndSyncMoves(s,s)}),this.hot.addHook("beforeColumnUnfreeze",(i,s)=>{this.columnAxisSyncer.storeMovesInformation([i],this.hot.getSettings().fixedColumnsStart-1,s)}),this.hot.addHook("afterColumnUnfreeze",(i,s)=>{this.columnAxisSyncer.calculateAndSyncMoves(s,s)}),this.addHook("afterCellMetaReset",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,j1e).call(t,...s)}),this.addHook("beforeUndo",()=>{this.indexSyncer.setPerformUndo(!0),this.engine.undo()}),this.addHook("beforeRedo",()=>{this.indexSyncer.setPerformRedo(!0),this.engine.redo()}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformUndo(!1)}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformRedo(!1)}),this.addHook("afterDetachChild",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,tAe).call(t,...s)}),this.addHook("beforeAutofill",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return Ft(jt,t,W1e).call(t,...s)}),Hf(Em,this).forEach(i=>{let[s,r]=i;return this.engine.on(s,r)}),super.enablePlugin()}}disablePlugin(){Hf(Em,this).forEach(e=>{let[t,i]=e;return this.engine.off(t,i)}),kF(this.engine,this.hot),this.engine=null,super.disablePlugin()}updatePlugin(e){const t=v1e(this.hot.getSettings());b1e(this.engine.getConfig(),t)&&this.engine.updateConfig(t);const i=this.hot.getSettings()[$i];if(Me(i)&&Me(i.sheetName)&&i.sheetName!==this.sheetName&&this.switchSheet(i.sheetName),!e.data&&this.sheetName===null){const s=this.hot.getSettings()[$i].sheetName;s&&this.engine.doesSheetExist(s)?this.switchSheet(this.sheetName):this.sheetName=this.addSheet(s??void 0,this.hot.getSourceDataArray())}super.updatePlugin(e)}destroy(){Hf(Em,this).forEach(e=>{var t;let[i,s]=e;return(t=this.engine)===null||t===void 0?void 0:t.off(i,s)}),Vc(Em,this,null),kF(this.engine,this.hot),this.engine=null,super.destroy()}addSheet(e,t){if(Me(t)&&!UY(t))return Dt("The provided data should be an array of arrays."),!1;if(e!=null&&this.engine.doesSheetExist(e))return Dt("Sheet with the provided name already exists."),!1;try{const i=this.engine.addSheet(e??void 0);return t&&this.engine.setSheetContent(this.engine.getSheetId(i),t),i}catch(i){return Dt(i.message),!1}}switchSheet(e){if(!this.engine.doesSheetExist(e)){SP(`The sheet named \`${e}\` does not exist, switch aborted.`);return}this.sheetName=e;const t=this.engine.getSheetSerialized(this.sheetId);t.length>0&&this.hot.loadData(t,`${Ui($i)}.switchSheet`)}getCellType(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.sheetId;const s=this.hot.toPhysicalRow(e),r=this.hot.toPhysicalColumn(t);return s!==null&&r!==null?this.engine.getCellType({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t)}):"EMPTY"}isFormulaCellType(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.sheetId;return this.engine.doesCellHaveFormula({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t)})}renderDependentSheets(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=new Set;e.forEach(s=>{var r;const o=s==null||(r=s.address)===null||r===void 0?void 0:r.sheet;o!==void 0&&(i.has(o)||i.add(o))}),OF(this.engine).forEach((s,r)=>{if((t||r!==this.sheetId)&&i.has(r)){var o;s.render(),(o=s.view)===null||o===void 0||o.adjustElementsSize()}})}validateDependentCells(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=r=>{var o;const{row:a,col:l,sheet:c}=(o=r==null?void 0:r.address)!==null&&o!==void 0?o:{};return Me(c)?`${c}:${a}x${l}`:""},s=new Set(t.map(r=>i(r)));e.forEach(r=>{var o,a;const{row:l,col:c}=(o=r.address)!==null&&o!==void 0?o:{};if(Me(l)===!1||Me(c)===!1||l>=this.hot.countRows()||c>=this.hot.countCols())return;const h=r==null||(a=r.address)===null||a===void 0?void 0:a.sheet,u=i(r);if(h!==void 0&&!s.has(u)){const d=OF(this.engine).get(h);if(!d)return;d.validateCell(d.getDataAtCell(l,c),d.getCellMeta(l,c),()=>{})}})}syncChangeWithEngine(e,t,i){const s={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(s)){Dt(`Not possible to set cell data at ${JSON.stringify(s)}`);return}const r=this.hot.getCellMeta(e,t);return qO(i,r.type)&&(G3(i,r.dateFormat)?i=K3(i,r.dateFormat):T1e(i)===!1&&(i=`'${i}`)),this.engine.setCellContents(s,i)}}function V1e(n,e,t){const i=this.hot.propToCol(t);if(this.isFormulaCellType(e,i)){const s={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(i),sheet:this.sheetId},r=this.hot.getCellMeta(e,i);let o=this.engine.getCellValue(s);return r.type==="date"&&Li(o)&&(o=q3(o,r.dateFormat)),typeof o=="object"&&o!==null?o.value:o}return n}function W1e(n,e,t){const{row:i,col:s}=e.getTopStartCorner(),{row:r,col:o}=e.getBottomEndCorner(),{row:a,col:l}=t.getTopStartCorner(),{row:c,col:h}=t.getBottomEndCorner(),u={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(i),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(s),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(o),sheet:this.sheetId}},d={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(a),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(c),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(h),sheet:this.sheetId}};if(this.engine.isItPossibleToSetCellContents(d)===!1)return!1;const f=this.engine.getFillRangeData(u,d),{row:g,col:m}=u.start,{row:w,col:v}=u.end,C=w-g+1,S=v-m+1;for(let x=0;x<f.length;x+=1)for(let _=0;_<f[x].length;_+=1){const R=f[x][_],M=g+x%C,O=m+_%S,P=this.hot.getCellMeta(M,O);qO(R,P.type)&&(R.startsWith("'")?f[x][_]=R.slice(1):this.isFormulaCellType(M,O,this.sheetId)===!1&&(f[x][_]=M1e(R,P.dateFormat)))}return f}function DF(n,e){(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"").includes(Ui($i))||Vc(QO,this,Xt(this.hot.getSettings().data))}function j1e(){const n=this.hot.getSourceDataArray();let e=!1;n.forEach((t,i)=>{t.forEach((s,r)=>{const o=this.hot.getCellMeta(i,r),a=o.dateFormat;qO(s,o.type)&&(e=!0,G3(s,a)?n[i][r]=K3(s,a):this.isFormulaCellType(i,r)===!1&&(n[i][r]=`'${s}`))})}),e===!0&&(Vc(xl,this,!0),this.engine.setSheetContent(this.sheetId,n),Vc(xl,this,!1))}function NF(n,e){if(!(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"").includes(Ui($i)))if(this.sheetName=x1e(this.engine,this.hot.getSettings()[$i].sheetName),Hf(QO,this))this.switchSheet(this.sheetName);else{const i=this.hot.getSourceDataArray();if(this.engine.isItPossibleToReplaceSheetContent(this.sheetId,i)){Vc(xl,this,!0);const s=this.engine.setSheetContent(this.sheetId,i);this.indexSyncer.setupSyncEndpoint(this.engine,this.sheetId),this.renderDependentSheets(s),Vc(xl,this,!1)}}}function z1e(n,e,t,i){if(i!=="get"||Hf(xl,this)||this.sheetName===null||!this.engine.doesSheetExist(this.sheetName))return;const s=this.hot.toVisualRow(n);if(s===null||e===null)return;if(!this.isFormulaCellType(s,e)&&this.getCellType(s,e)!=="ARRAY"){Y3(t.value)&&(t.value=E1e(t.value));return}const o={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(s),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e),sheet:this.sheetId};let a=this.engine.getCellValue(o),l=this.hot.getCellsMeta().find(h=>h.visualRow===s&&h.visualCol===e);l===void 0&&(l={}),l.type==="date"&&Li(a)&&(a=q3(a,l.dateFormat));const c=typeof a=="object"&&a!==null?a.value:a;t.value=c}function U1e(n,e,t,i){if(i!=="get"||Hf(xl,this)||this.sheetName===null||!this.engine.doesSheetExist(this.sheetName))return;const s=this.hot.toVisualRow(n),r=this.hot.propToCol(e);if(s===null||r===null||!this.isFormulaCellType(s,r)&&this.getCellType(s,r)!=="ARRAY")return;const a=this.engine.getSheetDimensions(this.engine.getSheetId(this.sheetName));if(a.width===0&&a.height===0)return;const l={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(s),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(r),sheet:this.sheetId};t.value=this.engine.getCellSerialized(l)}function LF(n,e){if(mg(e))return;const t=[],i=[],s=this.engine.batch(()=>{n.forEach(r=>{let[o,a,,l]=r;const c=this.hot.propToCol(a),h=this.hot.toPhysicalRow(o),u=this.hot.toPhysicalColumn(c),d={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(o),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(c),sheet:this.sheetId};h!==null&&u!==null?this.syncChangeWithEngine(o,c,l):t.push([o,c,l]),i.push({address:d})})});t.length&&this.hot.addHookOnce("afterChange",()=>{const r=this.engine.batch(()=>{t.forEach(o=>{let[a,l,c]=o;this.syncChangeWithEngine(a,l,c)})});this.renderDependentSheets(r,!0)}),this.renderDependentSheets(s),this.validateDependentCells(s,i)}function Y1e(n,e){if(mg(e))return;const t=[],i=[];n.forEach(s=>{let[r,o,,a]=s;const l=this.hot.propToCol(o);if(!Li(l))return;const c={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(c)){Dt(`Not possible to set source cell data at ${JSON.stringify(c)}`);return}i.push({address:c}),t.push(...this.engine.setCellContents(c,a))}),this.renderDependentSheets(t),this.validateDependentCells(t,i)}function G1e(n,e){let t=this.rowAxisSyncer.getHfIndexFromVisualIndex(n);if(n>=this.hot.countRows()&&(t=n),this.sheetId===null||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddRows(this.sheetId,[t,e]))return!1}function K1e(n,e){let t=this.columnAxisSyncer.getHfIndexFromVisualIndex(n);if(n>=this.hot.countCols()&&(t=n),this.sheetId===null||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddColumns(this.sheetId,[t,e]))return!1}function q1e(n,e,t){return this.rowAxisSyncer.setRemovedHfIndexes(t).every(r=>this.engine.isItPossibleToRemoveRows(this.sheetId,[r,1]))===!1?!1:void 0}function X1e(n,e,t){return this.columnAxisSyncer.setRemovedHfIndexes(t).every(r=>this.engine.isItPossibleToRemoveColumns(this.sheetId,[r,1]))===!1?!1:void 0}function Q1e(n,e,t){if(mg(t))return;const i=this.engine.addRows(this.sheetId,[this.rowAxisSyncer.getHfIndexFromVisualIndex(n),e]);this.renderDependentSheets(i)}function Z1e(n,e,t){if(mg(t))return;const i=this.engine.addColumns(this.sheetId,[this.columnAxisSyncer.getHfIndexFromVisualIndex(n),e]);this.renderDependentSheets(i)}function J1e(n,e,t,i){if(mg(i))return;const s=this.rowAxisSyncer.getRemovedHfIndexes().sort((o,a)=>a-o),r=this.engine.batch(()=>{s.forEach(o=>{this.engine.removeRows(this.sheetId,[o,1])})});this.renderDependentSheets(r)}function eAe(n,e,t,i){if(mg(i))return;const s=this.columnAxisSyncer.getRemovedHfIndexes().sort((o,a)=>a-o),r=this.engine.batch(()=>{s.forEach(o=>{this.engine.removeColumns(this.sheetId,[o,1])})});this.renderDependentSheets(r)}function tAe(n,e,t){var i;Vc(xl,this,!0);const s=this.hot.getSourceDataArray(t,0,t+(((i=e.__children)===null||i===void 0?void 0:i.length)||0),this.hot.countSourceCols());Vc(xl,this,!1),s.forEach((r,o)=>{r.forEach((a,l)=>{this.engine.setCellContents({col:l,row:t+o,sheet:this.sheetId},[[a]])})})}function nAe(n){this.hot.runHooks("afterFormulasValuesUpdate",n)}function iAe(n,e){this.hot.runHooks("afterNamedExpressionAdded",n,e)}function sAe(n,e){this.hot.runHooks("afterNamedExpressionRemoved",n,e)}function rAe(n){this.hot.runHooks("afterSheetAdded",n)}function oAe(n,e){this.sheetName=e,this.hot.runHooks("afterSheetRenamed",n,e)}function aAe(n,e){this.hot.runHooks("afterSheetRemoved",n,e)}function lAe(n){return{key:"hidden_columns_hide",name(){const e=this.getSelectedLast();let t=0;if(Array.isArray(e)){const[,i,,s]=e;i-s!==0&&(t=1)}return this.getTranslatedPhrase(kI,t)},callback(){const{from:e,to:t}=this.getSelectedRangeLast(),i=Math.max(Math.min(e.col,t.col),0),s=Math.max(e.col,t.col),r=[];for(let l=i;l<=s;l+=1)r.push(l);n.hideColumns(r);const o=r[r.length-1],a=this.columnIndexMapper.getNearestNotHiddenIndex(o,1,!0);Number.isInteger(a)&&a>=0?this.selectColumns(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}}function cAe(n){const e=[];return{key:"hidden_columns_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(HI,t)},callback(){var t,i;if(e.length===0)return;let s=e[0],r=e[e.length-1];s=(t=this.columnIndexMapper.getNearestNotHiddenIndex(s-1,-1))!==null&&t!==void 0?t:0,r=(i=this.columnIndexMapper.getNearestNotHiddenIndex(r+1,1))!==null&&i!==void 0?i:this.countCols()-1,n.showColumns(e),this.render(),this.view.adjustElementsSize(),r-s+1===this.countCols()||this.selectColumns(s,r)},disabled:!1,hidden(){const t=lt(n.getHiddenColumns(),u=>this.toPhysicalColumn(u));if(!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())||t.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),s=i.getTopStartCorner().col,r=i.getBottomEndCorner().col,o=this.columnIndexMapper,a=o.getRenderableFromVisualIndex(s),l=o.getRenderableFromVisualIndex(r),c=o.getNotTrimmedIndexes(),h=[];if(s!==r){const u=r-s+1,d=l-a+1;if(u>d){const f=c.slice(s,r+1);h.push(...f.filter(g=>t.includes(g)))}}else if(a===0&&a<s)h.push(...c.slice(0,s));else if(a===null)h.push(...c.slice(0,this.countCols()));else{const u=this.countCols()-1,d=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(u,-1));l===d&&u>r&&h.push(...c.slice(r+1))}return L(h,u=>{e.push(this.toVisualColumn(u))}),e.length===0}}}function hAe(n,e){J3(n,e),e.add(n)}function $F(n,e,t){J3(n,e),e.set(n,t)}function J3(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vs(n,e){return n.get(nc(n,e))}function Tm(n,e,t){return n.set(nc(n,e),t),t}function nc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ee.getSingleton().register("beforeHideColumns");Ee.getSingleton().register("afterHideColumns");Ee.getSingleton().register("beforeUnhideColumns");Ee.getSingleton().register("afterUnhideColumns");const wE="hiddenColumns",uAe=310;var ta=new WeakMap,Ao=new WeakMap,Lh=new WeakSet;class dAe extends xt{constructor(){super(...arguments),hAe(this,Lh),$F(this,ta,{}),$F(this,Ao,null)}static get PLUGIN_KEY(){return wE}static get PLUGIN_PRIORITY(){return uAe}isEnabled(){return!!this.hot.getSettings()[wE]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[wE];Je(t)&&(Tm(ta,this,t),Xt(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),Tm(Ao,this,new e_),Vs(Ao,this).addLocalHook("init",()=>nc(Lh,this,vAe).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,Vs(Ao,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return nc(Lh,e,wAe).call(e,...s)}),this.addHook("afterGetCellMeta",(i,s,r)=>nc(Lh,this,gAe).call(this,i,s,r)),this.addHook("modifyColWidth",(i,s)=>nc(Lh,this,fAe).call(this,i,s),2),this.addHook("afterGetColHeader",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return nc(Lh,e,pAe).call(e,...s)}),this.addHook("modifyCopyableRange",i=>nc(Lh,this,mAe).call(this,i)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),Tm(ta,this,{}),super.disablePlugin(),this.resetCellsMeta()}showColumns(e){const t=this.getHiddenColumns(),i=this.isValidConfig(e);let s=t;const r=Vs(Ao,this).getValues().slice(),o=e.length>0;if(i&&o){const l=e.map(c=>this.hot.toPhysicalColumn(c));L(l,c=>{r[c]=!1}),s=Un(r,(c,h,u)=>(h&&c.push(this.hot.toVisualColumn(u)),c),[])}this.hot.runHooks("beforeUnhideColumns",t,s,i&&o)!==!1&&(i&&o&&Vs(Ao,this).setValues(r),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",t,s,i&&o,i&&s.length<t.length))}showColumn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.showColumns(t)}hideColumns(e){const t=this.getHiddenColumns(),i=this.isValidConfig(e);let s=t;i&&(s=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeHideColumns",t,s,i)!==!1&&(i&&this.hot.batchExecution(()=>{L(e,o=>{Vs(Ao,this).setValueAtIndex(this.hot.toPhysicalColumn(o),!0)})},!0),this.hot.runHooks("afterHideColumns",t,s,i,i&&s.length>t.length))}hideColumn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.hideColumns(t)}getHiddenColumns(){return lt(Vs(Ao,this).getHiddenIndexes(),e=>this.hot.toVisualColumn(e))}isHidden(e){return Vs(Ao,this).getValueAtIndex(this.hot.toPhysicalColumn(e))||!1}isValidConfig(e){const t=this.hot.countCols();return Array.isArray(e)&&e.length>0?e.every(i=>Number.isInteger(i)&&i>=0&&i<t):!1}resetCellsMeta(){L(this.hot.getCellsMeta(),e=>{e&&(e.skipColumnOnPaste=!1)})}destroy(){Tm(ta,this,null),Tm(Ao,this,null),super.destroy()}}function fAe(n,e){if(this.isHidden(e))return 0;if(Vs(ta,this).indicators&&(this.isHidden(e+1)||this.isHidden(e-1))&&typeof n=="number"&&this.hot.hasColHeaders())return n+15}function gAe(n,e,t){if(Vs(ta,this).copyPasteEnabled===!1&&this.isHidden(e)&&(t.skipColumnOnPaste=!0),this.isHidden(e-1))t.className=t.className||"",t.className.indexOf("afterHiddenColumn")===-1&&(t.className+=" afterHiddenColumn");else if(t.className){const i=t.className.split(" ");if(i.length>0){const s=i.indexOf("afterHiddenColumn");s>-1&&i.splice(s,1),t.className=i.join(" ")}}}function mAe(n){if(Vs(ta,this).copyPasteEnabled)return n;const e=[],t=(i,s,r,o)=>{e.push({startRow:i,endRow:s,startCol:r,endCol:o})};return L(n,i=>{let s=!0,r=0;ke(i.startCol,i.endCol,o=>{this.isHidden(o)?(s||t(i.startRow,i.endRow,r,o-1),s=!0):(s&&(r=o),o===i.endCol&&t(i.startRow,i.endRow,r,o),s=!1)})}),e}function pAe(n,e){if(!Vs(ta,this).indicators||n<0)return;const t=[];n>=1&&this.isHidden(n-1)&&t.push("afterHiddenColumn"),n<this.hot.countCols()-1&&this.isHidden(n+1)&&t.push("beforeHiddenColumn"),ae(e,t)}function wAe(n){n.items.push({name:nt},lAe(this),cAe(this))}function vAe(){Array.isArray(Vs(ta,this).columns)&&this.hideColumns(Vs(ta,this).columns)}function bAe(n){return{key:"hidden_rows_hide",name(){const e=this.getSelectedLast();let t=0;if(Array.isArray(e)){const[i,,s]=e;i-s!==0&&(t=1)}return this.getTranslatedPhrase(DI,t)},callback(){const{from:e,to:t}=this.getSelectedRangeLast(),i=Math.max(Math.min(e.row,t.row),0),s=Math.max(e.row,t.row),r=[];for(let l=i;l<=s;l+=1)r.push(l);n.hideRows(r);const o=r[r.length-1],a=this.rowIndexMapper.getNearestNotHiddenIndex(o,1,!0);Number.isInteger(a)&&a>=0?this.selectRows(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}}function yAe(n){const e=[];return{key:"hidden_rows_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(NI,t)},callback(){var t,i;if(e.length===0)return;let s=e[0],r=e[e.length-1];s=(t=this.rowIndexMapper.getNearestNotHiddenIndex(s-1,-1))!==null&&t!==void 0?t:0,r=(i=this.rowIndexMapper.getNearestNotHiddenIndex(r+1,1))!==null&&i!==void 0?i:this.countRows()-1,n.showRows(e),this.render(),this.view.adjustElementsSize(),r-s+1===this.countRows()||this.selectRows(s,r)},disabled:!1,hidden(){const t=lt(n.getHiddenRows(),u=>this.toPhysicalRow(u));if(!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())||t.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),s=i.getTopStartCorner().row,r=i.getBottomEndCorner().row,o=this.rowIndexMapper,a=o.getRenderableFromVisualIndex(s),l=o.getRenderableFromVisualIndex(r),c=o.getNotTrimmedIndexes(),h=[];if(s!==r){const u=r-s+1,d=l-a+1;if(u>d){const f=c.slice(s,r+1);h.push(...f.filter(g=>t.includes(g)))}}else if(a===0&&a<s)h.push(...c.slice(0,s));else if(a===null)h.push(...c.slice(0,this.countRows()));else{const u=this.countRows()-1,d=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(u,-1));l===d&&u>r&&h.push(...c.slice(r+1))}return L(h,u=>{e.push(this.toVisualRow(u))}),e.length===0}}}function CAe(n,e){eK(n,e),e.add(n)}function FF(n,e,t){eK(n,e),e.set(n,t)}function eK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mr(n,e){return n.get(ic(n,e))}function Mm(n,e,t){return n.set(ic(n,e),t),t}function ic(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ee.getSingleton().register("beforeHideRows");Ee.getSingleton().register("afterHideRows");Ee.getSingleton().register("beforeUnhideRows");Ee.getSingleton().register("afterUnhideRows");const vE="hiddenRows",SAe=320;var dl=new WeakMap,Po=new WeakMap,$h=new WeakSet;class _Ae extends xt{constructor(){super(...arguments),CAe(this,$h),FF(this,dl,{}),FF(this,Po,null)}static get PLUGIN_KEY(){return vE}static get PLUGIN_PRIORITY(){return SAe}isEnabled(){return!!this.hot.getSettings()[vE]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[vE];Je(t)&&(Mm(dl,this,t),Xt(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),Mm(Po,this,new e_),mr(Po,this).addLocalHook("init",()=>ic($h,this,AAe).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,mr(Po,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return ic($h,e,MAe).call(e,...s)}),this.addHook("afterGetCellMeta",(i,s,r)=>ic($h,this,xAe).call(this,i,s,r)),this.addHook("modifyRowHeight",(i,s)=>ic($h,this,RAe).call(this,i,s)),this.addHook("afterGetRowHeader",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return ic($h,e,TAe).call(e,...s)}),this.addHook("modifyCopyableRange",i=>ic($h,this,EAe).call(this,i)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),Mm(dl,this,{}),super.disablePlugin(),this.resetCellsMeta()}showRows(e){const t=this.getHiddenRows(),i=this.isValidConfig(e);let s=t;const r=mr(Po,this).getValues().slice(),o=e.length>0;if(i&&o){const l=e.map(c=>this.hot.toPhysicalRow(c));L(l,c=>{r[c]=!1}),s=Un(r,(c,h,u)=>(h&&c.push(this.hot.toVisualRow(u)),c),[])}this.hot.runHooks("beforeUnhideRows",t,s,i&&o)!==!1&&(i&&o&&mr(Po,this).setValues(r),this.hot.runHooks("afterUnhideRows",t,s,i&&o,i&&s.length<t.length))}showRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.showRows(t)}hideRows(e){const t=this.getHiddenRows(),i=this.isValidConfig(e);let s=t;i&&(s=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeHideRows",t,s,i)!==!1&&(i&&this.hot.batchExecution(()=>{L(e,o=>{mr(Po,this).setValueAtIndex(this.hot.toPhysicalRow(o),!0)})},!0),this.hot.runHooks("afterHideRows",t,s,i,i&&s.length>t.length))}hideRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.hideRows(t)}getHiddenRows(){return lt(mr(Po,this).getHiddenIndexes(),e=>this.hot.toVisualRow(e))}isHidden(e){return mr(Po,this).getValueAtIndex(this.hot.toPhysicalRow(e))||!1}isValidConfig(e){const t=this.hot.countRows();return Array.isArray(e)&&e.length>0?e.every(i=>Number.isInteger(i)&&i>=0&&i<t):!1}resetCellsMeta(){L(this.hot.getCellsMeta(),e=>{e&&(e.skipRowOnPaste=!1)})}destroy(){Mm(dl,this,null),Mm(Po,this,null),super.destroy()}}function RAe(n,e){return this.isHidden(e)?0:n}function xAe(n,e,t){if(mr(dl,this).copyPasteEnabled===!1&&this.isHidden(n)&&(t.skipRowOnPaste=!0),this.isHidden(n-1))t.className=t.className||"",t.className.indexOf("afterHiddenRow")===-1&&(t.className+=" afterHiddenRow");else if(t.className){const i=t.className.split(" ");if(i.length>0){const s=i.indexOf("afterHiddenRow");s>-1&&i.splice(s,1),t.className=i.join(" ")}}}function EAe(n){if(mr(dl,this).copyPasteEnabled)return n;const e=[],t=(i,s,r,o)=>{e.push({startRow:i,endRow:s,startCol:r,endCol:o})};return L(n,i=>{let s=!0,r=0;ke(i.startRow,i.endRow,o=>{this.isHidden(o)?(s||t(r,o-1,i.startCol,i.endCol),s=!0):(s&&(r=o),o===i.endRow&&t(r,o,i.startCol,i.endCol),s=!1)})}),e}function TAe(n,e){if(!mr(dl,this).indicators||n<0)return;const t=[];n>=1&&this.isHidden(n-1)&&t.push("afterHiddenRow"),n<this.hot.countRows()-1&&this.isHidden(n+1)&&t.push("beforeHiddenRow"),ae(e,t)}function MAe(n){n.items.push({name:nt},bAe(this),yAe(this))}function AAe(){Array.isArray(mr(dl,this).rows)&&this.hideRows(mr(dl,this).rows)}function PAe(n){return{key:"freeze_column",name(){return this.getTranslatedPhrase(pI)},callback(e,t){const[{start:{col:i}}]=t;n.freezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const e=this.getSelectedRange();let t=!1;return(e===void 0||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col<=this.getSettings().fixedColumnsStart-1)&&(t=!0),t}}}function IAe(n){return{key:"unfreeze_column",name(){return this.getTranslatedPhrase(wI)},callback(e,t){const[{start:{col:i}}]=t;n.unfreezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const e=this.getSelectedRange();let t=!1;return(e===void 0||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col>=this.getSettings().fixedColumnsStart)&&(t=!0),t}}}function OAe(n,e){tK(n,e),e.add(n)}function kAe(n,e,t){tK(n,e),e.set(n,t)}function tK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function XM(n,e){return n.get(CS(n,e))}function bE(n,e,t){return n.set(CS(n,e),t),t}function CS(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ee.getSingleton().register("beforeColumnFreeze");Ee.getSingleton().register("afterColumnFreeze");Ee.getSingleton().register("beforeColumnUnfreeze");Ee.getSingleton().register("afterColumnUnfreeze");const BF="manualColumnFreeze",HAe=110;var tu=new WeakMap,yE=new WeakSet;class DAe extends xt{constructor(){super(...arguments),OAe(this,yE),kAe(this,tu,!1)}static get PLUGIN_KEY(){return BF}static get PLUGIN_PRIORITY(){return HAe}isEnabled(){return!!this.hot.getSettings()[BF]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",e=>CS(yE,this,NAe).call(this,e)),this.addHook("beforeColumnMove",(e,t)=>CS(yE,this,LAe).call(this,e,t)),super.enablePlugin())}disablePlugin(){bE(tu,this,!1),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}freezeColumn(e){const t=this.hot.getSettings(),i=t.fixedColumnsStart<this.hot.countCols()&&e>t.fixedColumnsStart-1;XM(tu,this)||bE(tu,this,!0),this.hot.runHooks("beforeColumnFreeze",e,i)!==!1&&(i&&(this.hot.columnIndexMapper.moveIndexes(e,t.fixedColumnsStart),t._fixedColumnsStart+=1),this.hot.runHooks("afterColumnFreeze",e,i))}unfreezeColumn(e){const t=this.hot.getSettings(),i=t.fixedColumnsStart>0&&e<=t.fixedColumnsStart-1;XM(tu,this)||bE(tu,this,!0),this.hot.runHooks("beforeColumnUnfreeze",e,i)!==!1&&(i&&(t._fixedColumnsStart-=1,this.hot.columnIndexMapper.moveIndexes(e,t.fixedColumnsStart)),this.hot.runHooks("afterColumnUnfreeze",e,i))}}function NAe(n){n.items.push({name:"---------"},PAe(this),IAe(this))}function LAe(n,e){if(XM(tu,this)){const t=this.hot.getSettings().fixedColumnsStart;if(e<t||n.some(i=>i<t))return!1}}function ry(n,e,t){return(e=$Ae(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Ae(n){var e=FAe(n,"string");return typeof e=="symbol"?e:e+""}function FAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const CE=0,VF=1,WF=2,Kd="px";let nK=class{constructor(e){ry(this,"hot",void 0),ry(this,"_element",null),ry(this,"state",CE),ry(this,"inlineProperty",void 0),this.hot=e,this.inlineProperty=e.isRtl()?"right":"left"}appendTo(e){e.appendChild(this._element),this.state=WF}build(){this.state===CE&&(this._element=this.hot.rootDocument.createElement("div"),this.state=VF)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=CE}isAppended(){return this.state===WF}isBuilt(){return this.state>=VF}setPosition(e,t){Li(e)&&(this._element.style.top=e+Kd),Li(t)&&(this._element.style[this.inlineProperty]=t+Kd)}getPosition(){const e=this._element.style;return{top:e.top?parseInt(e.top,10):0,start:e[this.inlineProperty]?parseInt(e[this.inlineProperty],10):0}}setSize(e,t){Li(e)&&(this._element.style.width=e+Kd),Li(t)&&(this._element.style.height=t+Kd)}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(e,t){Li(e)&&(this._element.style.marginTop=e+Kd),Li(t)&&(this._element.style[`margin${Ui(this.inlineProperty)}`]=t+Kd)}getOffset(){const e=this._element.style,t=`margin${Ui(this.inlineProperty)}`;return{top:e.marginTop?parseInt(e.marginTop,10):0,start:e[t]?parseInt(e[t],10):0}}};const BAe="ht__manualColumnMove--backlight";let VAe=class extends nK{build(){super.build(),ae(this._element,BAe)}};const WAe="ht__manualColumnMove--guideline";let jAe=class extends nK{build(){super.build(),ae(this._element,WAe)}};function zAe(n,e){iK(n,e),e.add(n)}function Wr(n,e,t){iK(n,e),e.set(n,t)}function iK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ss(n,e,t){return n.set(sc(n,e),t),t}function Pe(n,e){return n.get(sc(n,e))}function sc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ee.getSingleton().register("beforeColumnMove");Ee.getSingleton().register("afterColumnMove");const SE="manualColumnMove",UAe=120,jF="ht__manualColumnMove",SS="show-ui",QM="on-moving--columns",ZM="after-selection--columns";var es=new WeakMap,cc=new WeakMap,fl=new WeakMap,sC=new WeakMap,Cc=new WeakMap,Ji=new WeakMap,oy=new WeakMap,hr=new WeakMap,hf=new WeakMap,_S=new WeakMap,Ep=new WeakMap,Fh=new WeakSet;class YAe extends xt{constructor(){super(...arguments),zAe(this,Fh),Wr(this,es,new VAe(this.hot)),Wr(this,cc,new jAe(this.hot)),Wr(this,fl,[]),Wr(this,sC,0),Wr(this,Cc,!1),Wr(this,Ji,{}),Wr(this,oy,void 0),Wr(this,hr,void 0),Wr(this,hf,void 0),Wr(this,_S,void 0),Wr(this,Ep,void 0)}static get PLUGIN_KEY(){return SE}static get PLUGIN_PRIORITY(){return UAe}isEnabled(){return!!this.hot.getSettings()[SE]}enablePlugin(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return sc(Fh,e,GAe).call(e,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return sc(Fh,e,qAe).call(e,...i)}),this.addHook("afterScrollVertically",()=>sc(Fh,this,QAe).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return sc(Fh,e,ZAe).call(e,...i)}),this.buildPluginUI(),this.registerEvents(),ae(this.hot.rootElement,jF),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){ze(this.hot.rootElement,jF),this.unregisterEvents(),Pe(es,this).destroy(),Pe(cc,this).destroy(),super.disablePlugin()}moveColumn(e,t){return this.moveColumns([e],t)}moveColumns(e,t){const i=Pe(oy,this),s=this.isMovePossible(e,t),r=this.hot.runHooks("beforeColumnMove",e,t,i,s);if(Ss(oy,this,void 0),r===!1)return;s&&this.hot.columnIndexMapper.moveIndexes(e,t);const o=s&&this.isColumnOrderChanged(e,t);return this.hot.runHooks("afterColumnMove",e,t,i,s,o),o}dragColumn(e,t){return this.dragColumns([e],t)}dragColumns(e,t){const i=this.countFinalIndex(e,t);return Ss(oy,this,t),this.moveColumns(e,i)}isMovePossible(e,t){const i=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),s=e.length+t>i,r=t<0,o=e.some(l=>l<0),a=e.some(l=>l>=i);return!(s||r||o||a)}isColumnOrderChanged(e,t){return e.some((i,s)=>i-s!==t)}countFinalIndex(e,t){const i=Un(e,(s,r)=>(r<t&&(s+=1),s),0);return t-i}getColumnsWidth(e,t){const i=this.hot.columnIndexMapper;let s=0;for(let r=e;r<=t;r+=1){const o=i.getRenderableFromVisualIndex(r);r<0?s+=this.hot.view._wt.wtViewport.getRowHeaderWidth()||0:o!==null&&(s+=this.hot.view._wt.wtTable.getStretchedColumnWidth(o)||0)}return s}moveBySettingsOrLoad(){const e=this.hot.getSettings()[SE];if(Array.isArray(e))this.moveColumns(e,0);else if(e!==void 0){const t=this.persistentStateLoad();t.length&&this.moveColumns(t,0)}}isFixedColumnsStart(e){return e<this.hot.getSettings().fixedColumnsStart}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}persistentStateLoad(){const e={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",e),e.value?e.value:[]}prepareColumnsToMoving(e,t){const i=[];return ke(e,t,s=>{i.push(s)}),i}refreshPositions(){const e=this.hot.view.getFirstFullyVisibleColumn();this.isFixedColumnsStart(Pe(hr,this))&&e>0&&this.hot.scrollViewportTo({col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(e-1,-1)});const t=this.hot.view._wt.wtTable,i=this.hot.view._wt.wtOverlays.scrollableElement,s=typeof i.scrollX=="number"?i.scrollX:i.scrollLeft;let r=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,Pe(hr,this)-1);const o=t.hider.offsetWidth,a=t.TBODY.offsetLeft,l=Pe(es,this).getOffset().start,c=Pe(es,this).getSize().width;let h=0,u=0;if(this.hot.isRtl()){const g=this.hot.rootWindow,m=Qt(this.hot.rootElement),w=g.innerWidth-Pe(hf,this)-m;u=g.innerWidth-Pe(Ji,this).eventPageX-w-(i.scrollX===void 0?s:0)}else u=Pe(Ji,this).eventPageX-(Pe(hf,this)-(i.scrollX===void 0?s:0));if(Pe(_S,this)&&(h=this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsStart(Pe(hr,this))&&(r+=s),r+=h,Pe(hr,this)<0)Pe(Ep,this)>0?Pe(Ji,this).col=0:Pe(Ji,this).col=e>0?e-1:e;else if(Pe(Ji,this).TD.offsetWidth/2+r<=u){const g=Pe(hr,this)>=Pe(sC,this)?Pe(sC,this)-1:Pe(hr,this);Pe(Ji,this).col=g+1,r+=Pe(Ji,this).TD.offsetWidth}else Pe(Ji,this).col=Pe(hr,this);let d=u,f=r;u+c+l>=o?d=o-c-l:u+l<a+h&&(d=a+h+Math.abs(l)),r>=o-1?f=o-1:f===0?f=1:i.scrollX!==void 0&&Pe(hr,this)<Pe(Ep,this)&&(f-=Pe(hf,this)<=i.scrollX?Pe(hf,this):0),Pe(es,this).setPosition(null,d),Pe(cc,this).setPosition(null,f)}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mousemove",t=>sc(Fh,this,KAe).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>sc(Fh,this,XAe).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){Pe(es,this).build(),Pe(cc,this).build()}destroy(){Pe(es,this).destroy(),Pe(cc,this).destroy(),super.destroy()}}function GAe(n,e,t,i){const s=this.hot.view._wt.wtTable,r=this.hot.selection.isSelectedByColumnHeader(),o=this.hot.getSelectedRangeLast(),a=Fe(n.target,"sortAction");if(!o||!r||Pe(Cc,this)||n.button!==0||a){Ss(Cc,this,!1),Pe(fl,this).length=0,ze(this.hot.rootElement,[QM,SS]);return}const l=Pe(cc,this).isBuilt()&&!Pe(cc,this).isAppended(),c=Pe(es,this).isBuilt()&&!Pe(es,this).isAppended();l&&c&&(Pe(cc,this).appendTo(s.hider),Pe(es,this).appendTo(s.hider));const{from:h,to:u}=o,d=Math.min(h.col,u.col),f=Math.max(h.col,u.col);if(e.row<0&&e.col>=d&&e.col<=f){i.column=!0,Ss(Cc,this,!0);const g=t.firstChild?cY(n,t.firstChild).x:n.offsetX;Pe(Ji,this).eventPageX=n.pageX,Ss(hr,this,e.col),Pe(Ji,this).TD=t,Pe(Ji,this).col=e.col,Ss(fl,this,this.prepareColumnsToMoving(d,f)),Ss(_S,this,!!this.hot.getSettings().rowHeaders),Ss(sC,this,this.hot.countCols()),Ss(Ep,this,this.hot.getSettings().fixedColumnsStart),Ss(hf,this,li(this.hot.rootElement).left);const m=Pe(_S,this)?-1:0,w=s.holder.scrollTop+s.getColumnHeaderHeight(0)+1,v=e.col<Pe(Ep,this),C=this.hot.view._wt.wtOverlays.inlineStartOverlay.getOverlayOffset(),S=Math.abs(g-(this.hot.isRtl()?t.offsetWidth:0)),x=this.getColumnsWidth(d,e.col-1)+S,_=this.getColumnsWidth(m,d-1)+(v?C:0)+x;Pe(es,this).setPosition(w,_),Pe(es,this).setSize(this.getColumnsWidth(d,f),s.hider.offsetHeight-w),Pe(es,this).setOffset(null,-x),ae(this.hot.rootElement,QM)}else ze(this.hot.rootElement,ZM),Ss(Cc,this,!1),Pe(fl,this).length=0}function KAe(n){Pe(Cc,this)&&(Pe(Ji,this).eventPageX=n.pageX,this.refreshPositions())}function qAe(n,e,t,i){!this.hot.getSelectedRangeLast()||!Pe(Cc,this)||(Pe(fl,this).indexOf(e.col)>-1?ze(this.hot.rootElement,SS):ae(this.hot.rootElement,SS),i.row=!0,i.column=!0,i.cell=!0,Ss(hr,this,e.col),Pe(Ji,this).TD=t)}function XAe(){const n=Pe(Ji,this).col,e=Pe(fl,this).length;if(Ss(hr,this,void 0),Ss(Cc,this,!1),ze(this.hot.rootElement,[QM,SS,ZM]),this.hot.selection.isSelectedByColumnHeader()&&ae(this.hot.rootElement,ZM),e<1||n===void 0)return;const t=Pe(fl,this)[0],i=this.hot.toPhysicalColumn(t),s=this.dragColumns(Pe(fl,this),n);if(Pe(fl,this).length=0,s===!0){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const r=this.hot.toVisualColumn(i),o=r+e-1;this.hot.selectColumns(r,o)}}function QAe(){const n=this.hot.view._wt.wtTable,e=n.getColumnHeaderHeight(0)+1,t=n.holder.scrollTop,i=e+t;Pe(es,this).setPosition(i),Pe(es,this).setSize(null,n.hider.offsetHeight-i)}function ZAe(){this.moveBySettingsOrLoad()}function JAe(n,e){sK(n,e),e.add(n)}function ki(n,e,t){sK(n,e),e.set(n,t)}function sK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Hn(n,e,t){return n.set(qr(n,e),t),t}function ve(n,e){return n.get(qr(n,e))}function qr(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const RS="manualColumnResize",ePe=130,zF="manualColumnWidths";var Ja=new WeakMap,ay=new WeakMap,Ls=new WeakMap,xS=new WeakMap,Qo=new WeakMap,tPe=new WeakMap,Df=new WeakMap,ly=new WeakMap,ps=new WeakMap,Ka=new WeakMap,ju=new WeakMap,ES=new WeakMap,Tp=new WeakMap,Mp=new WeakMap,Fs=new WeakMap,Ap=new WeakMap,Io=new WeakSet;class nPe extends xt{static get PLUGIN_KEY(){return RS}static get PLUGIN_PRIORITY(){return ePe}constructor(e){super(e),JAe(this,Io),ki(this,Ja,null),ki(this,ay,null),ki(this,Ls,[]),ki(this,xS,null),ki(this,Qo,null),ki(this,tPe,null),ki(this,Df,null),ki(this,ly,null),ki(this,ps,this.hot.rootDocument.createElement("DIV")),ki(this,Ka,this.hot.rootDocument.createElement("DIV")),ki(this,ju,null),ki(this,ES,!1),ki(this,Tp,0),ki(this,Mp,null),ki(this,Fs,void 0),ki(this,Ap,void 0),ae(ve(ps,this),"manualColumnResizer"),ae(ve(Ka,this),"manualColumnResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[RS]}enablePlugin(){this.enabled||(Hn(Fs,this,new eh),ve(Fs,this).addLocalHook("init",()=>qr(Io,this,iPe).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,ve(Fs,this)),this.addHook("modifyColWidth",(e,t)=>qr(Io,this,cPe).call(this,e,t),1),this.addHook("beforeStretchingColumnWidth",(e,t)=>qr(Io,this,hPe).call(this,e,t)),this.addHook("beforeColumnResize",(e,t,i)=>qr(Io,this,uPe).call(this,e,t,i)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Hn(Ap,this,ve(Fs,this).getValues()),this.hot.columnIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualColumnWidths(){this.hot.runHooks("persistentStateSave",zF,ve(Fs,this).getValues())}loadManualColumnWidths(){const e={};return this.hot.runHooks("persistentStateLoad",zF,e),e.value}setManualSize(e,t){const i=Math.max(t,20),s=this.hot.toPhysicalColumn(e);return ve(Fs,this).setValueAtIndex(s,i),i}clearManualSize(e){const t=this.hot.toPhysicalColumn(e);ve(Fs,this).setValueAtIndex(t,null)}setupHandlePosition(e){if(!e.parentNode)return;Hn(Ja,this,e);const{_wt:t}=this.hot.view,i=t.wtTable.getCoords(ve(Ja,this)),s=i.col;if(s<0)return;const r=$n(ve(Ja,this)),o=ve(Ja,this).getBoundingClientRect(),a=s<t.getSetting("fixedColumnsStart");let l;a&&(l=t.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(ve(Ja,this),i.row,i.col)),l||(l=t.wtOverlays.topOverlay.getRelativeCellPosition(ve(Ja,this),i.row,i.col)),Hn(ay,this,this.hot.columnIndexMapper.getVisualFromRenderableIndex(s)),Hn(Ls,this,[]);const c=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&c){const h=this.hot.getSelectedRange();L(h,u=>{const d=u.getTopStartCorner().col,f=u.getBottomEndCorner().col;ke(d,f,g=>{ve(Ls,this).includes(g)||ve(Ls,this).push(g)})})}ve(Ls,this).includes(ve(ay,this))||Hn(Ls,this,[ve(ay,this)]),Hn(ly,this,l.start-6),Hn(Df,this,parseInt(o.width,10)),ve(ps,this).style.top=`${l.top}px`,ve(ps,this).style[this.inlineDir]=`${ve(ly,this)+ve(Df,this)}px`,ve(ps,this).style.height=`${r}px`,this.hot.rootElement.appendChild(ve(ps,this))}refreshHandlePosition(){ve(ps,this).style[this.inlineDir]=`${ve(ly,this)+ve(xS,this)}px`}setupGuidePosition(){const e=parseInt($n(ve(ps,this)),10),t=parseInt(ve(ps,this).style.top,10)+e,i=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);ae(ve(ps,this),"active"),ae(ve(Ka,this),"active"),ve(Ka,this).style.top=`${t}px`,this.refreshGuidePosition(),ve(Ka,this).style.height=`${i-e}px`,this.hot.rootElement.appendChild(ve(Ka,this))}refreshGuidePosition(){ve(Ka,this).style[this.inlineDir]=ve(ps,this).style[this.inlineDir]}hideHandleAndGuide(){ze(ve(ps,this),"active"),ze(ve(Ka,this),"active")}checkIfColumnHeader(e){const t=Lc(e,["THEAD"],this.hot.rootElement),{topOverlay:i,topInlineStartCornerOverlay:s}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.THEAD,s.clone.wtTable.THEAD].includes(t)}getClosestTHParent(e){return e.tagName!=="TABLE"?e.tagName==="TH"?e:this.getClosestTHParent(e.parentNode):null}afterMouseDownTimeout(){const e=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},t=(i,s)=>{const r=this.hot.runHooks("beforeColumnResize",ve(Qo,this),i,!0);r!==void 0&&Hn(Qo,this,r),this.hot.getSettings().stretchH==="all"?this.clearManualSize(i):this.setManualSize(i,ve(Qo,this)),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",ve(Qo,this),i,!0),s&&e()};ve(Tp,this)>=2&&(ve(Ls,this).length>1?(L(ve(Ls,this),s=>{t(s)}),e()):L(ve(Ls,this),s=>{t(s,!0)})),Hn(Tp,this,0),Hn(Mp,this,null)}bindEvents(){const{rootWindow:e,rootElement:t}=this.hot;this.eventManager.addEventListener(t,"mouseover",i=>qr(Io,this,sPe).call(this,i)),this.eventManager.addEventListener(t,"mousedown",i=>qr(Io,this,rPe).call(this,i)),this.eventManager.addEventListener(e,"mousemove",i=>qr(Io,this,oPe).call(this,i)),this.eventManager.addEventListener(e,"mouseup",()=>qr(Io,this,aPe).call(this)),this.eventManager.addEventListener(ve(ps,this),"contextmenu",()=>qr(Io,this,lPe).call(this))}destroy(){super.destroy()}}function iPe(){const n=this.hot.getSettings()[RS],e=this.loadManualColumnWidths();typeof e<"u"?this.hot.batchExecution(()=>{e.forEach((t,i)=>{ve(Fs,this).setValueAtIndex(i,t)})},!0):Array.isArray(n)?(this.hot.batchExecution(()=>{n.forEach((t,i)=>{ve(Fs,this).setValueAtIndex(i,t)})},!0),Hn(Ap,this,n)):n===!0&&Array.isArray(ve(Ap,this))&&this.hot.batchExecution(()=>{ve(Ap,this).forEach((t,i)=>{ve(Fs,this).setValueAtIndex(i,t)})},!0)}function sPe(n){if(!uP(n.target)&&ve(ES,this)!==!0&&this.checkIfColumnHeader(n.target)){const e=this.getClosestTHParent(n.target);if(!e)return;const t=e.getAttribute("colspan");e&&(t===null||t==="1")&&(ve(ju,this)||this.setupHandlePosition(e))}}function rPe(n){n.target.parentNode===this.hot.rootElement&&Fe(n.target,"manualColumnResizer")&&(this.setupHandlePosition(ve(Ja,this)),this.setupGuidePosition(),Hn(ju,this,!0),ve(Mp,this)===null&&(Hn(Mp,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(ve(Mp,this))),Hn(Tp,this,ve(Tp,this)+1),this.startX=n.pageX,Hn(Qo,this,ve(Df,this)))}function oPe(n){if(ve(ju,this)){const e=(n.pageX-this.startX)*this.hot.getDirectionFactor();Hn(xS,this,ve(Df,this)+e),L(ve(Ls,this),t=>{Hn(Qo,this,this.setManualSize(t,ve(xS,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition()}}function aPe(){const n=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(t,i)=>{this.hot.runHooks("beforeColumnResize",ve(Qo,this),t,!1),i&&n(),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",ve(Qo,this),t,!1)};ve(ju,this)&&(this.hideHandleAndGuide(),Hn(ju,this,!1),ve(Qo,this)!==ve(Df,this)&&(ve(Ls,this).length>1?(L(ve(Ls,this),i=>{e(i)}),n()):L(ve(Ls,this),i=>{e(i,!0)})),this.setupHandlePosition(ve(Ja,this)))}function lPe(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(ve(ps,this)),this.hot.rootElement.removeChild(ve(Ka,this)),Hn(ju,this,!1),Hn(ES,this,!0),this.hot._registerImmediate(()=>{Hn(ES,this,!1)})}function cPe(n,e){let t=n;if(this.enabled){const i=this.hot.toPhysicalColumn(e),s=ve(Fs,this).getValueAtIndex(i);this.hot.getSettings()[RS]&&s&&(t=s)}return t}function hPe(n,e){let t=ve(Fs,this).getValueAtIndex(e);return t===null&&(t=n),t}function uPe(){this.hot.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked()}function _E(n,e,t){return(e=dPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dPe(n){var e=fPe(n,"string");return typeof e=="symbol"?e:e+""}function fPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const RE=0,UF=1,YF=2,qd="px";let rK=class{constructor(e){_E(this,"hot",void 0),_E(this,"_element",null),_E(this,"state",RE),this.hot=e}appendTo(e){e.appendChild(this._element),this.state=YF}build(){this.state===RE&&(this._element=this.hot.rootDocument.createElement("div"),this.state=UF)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=RE}isAppended(){return this.state===YF}isBuilt(){return this.state>=UF}setPosition(e,t){e!==void 0&&(this._element.style.top=e+qd),t!==void 0&&(this._element.style.left=t+qd)}getPosition(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}setSize(e,t){e&&(this._element.style.width=e+qd),t&&(this._element.style.height=t+qd)}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(e,t){e&&(this._element.style.marginTop=e+qd),t&&(this._element.style.marginLeft=t+qd)}getOffset(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}};const gPe="ht__manualRowMove--backlight";class mPe extends rK{build(){super.build(),ae(this._element,gPe)}}const pPe="ht__manualRowMove--guideline";class wPe extends rK{build(){super.build(),ae(this._element,pPe)}}function vPe(n,e){oK(n,e),e.add(n)}function Xd(n,e,t){oK(n,e),e.set(n,t)}function oK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pu(n,e,t){return n.set(rc(n,e),t),t}function Ye(n,e){return n.get(rc(n,e))}function rc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ee.getSingleton().register("beforeRowMove");Ee.getSingleton().register("afterRowMove");const xE="manualRowMove",bPe=140,GF="ht__manualRowMove",TS="show-ui",JM="on-moving--rows",e1="after-selection--rows";var ts=new WeakMap,hc=new WeakMap,gl=new WeakMap,Sc=new WeakMap,_s=new WeakMap,cy=new WeakMap,Bh=new WeakSet;class yPe extends xt{constructor(){super(...arguments),vPe(this,Bh),Xd(this,ts,new mPe(this.hot)),Xd(this,hc,new wPe(this.hot)),Xd(this,gl,[]),Xd(this,Sc,void 0),Xd(this,_s,{}),Xd(this,cy,void 0)}static get PLUGIN_KEY(){return xE}static get PLUGIN_PRIORITY(){return bPe}isEnabled(){return!!this.hot.getSettings()[xE]}enablePlugin(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return rc(Bh,e,CPe).call(e,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return rc(Bh,e,_Pe).call(e,...i)}),this.addHook("afterScrollHorizontally",()=>rc(Bh,this,xPe).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return rc(Bh,e,EPe).call(e,...i)}),this.buildPluginUI(),this.registerEvents(),ae(this.hot.rootElement,GF),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){ze(this.hot.rootElement,GF),this.unregisterEvents(),Ye(ts,this).destroy(),Ye(hc,this).destroy(),super.disablePlugin()}moveRow(e,t){return this.moveRows([e],t)}moveRows(e,t){const i=Ye(cy,this),s=this.isMovePossible(e,t),r=this.hot.runHooks("beforeRowMove",e,t,i,s);if(pu(cy,this,void 0),r===!1)return;s&&this.hot.rowIndexMapper.moveIndexes(e,t);const o=s&&this.isRowOrderChanged(e,t);return this.hot.runHooks("afterRowMove",e,t,i,s,o),o}dragRow(e,t){return this.dragRows([e],t)}dragRows(e,t){const i=this.countFinalIndex(e,t);return pu(cy,this,t),this.moveRows(e,i)}isMovePossible(e,t){const i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),s=e.length+t>i,r=t<0,o=e.some(l=>l<0),a=e.some(l=>l>=i);return!(s||r||o||a)}isRowOrderChanged(e,t){return e.some((i,s)=>i-s!==t)}countFinalIndex(e,t){const i=Un(e,(s,r)=>(r<t&&(s+=1),s),0);return t-i}getRowsHeight(e,t){const i=this.hot.rowIndexMapper;let s=0;for(let r=e;r<=t;r++){const o=i.getRenderableFromVisualIndex(r);o!==null&&(s+=this.hot.view._wt.wtTable.getRowHeight(o)||23)}return s}moveBySettingsOrLoad(){const e=this.hot.getSettings()[xE];if(Array.isArray(e))this.moveRows(e,0);else if(e!==void 0){const t=this.persistentStateLoad();t.length&&this.moveRows(t,0)}}isFixedRowTop(e){return e<this.hot.getSettings().fixedRowsTop}isFixedRowBottom(e){return e>this.hot.countRows()-1-this.hot.getSettings().fixedRowsBottom}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}persistentStateLoad(){const e={};return this.hot.runHooks("persistentStateLoad","manualRowMove",e),e.value?e.value:[]}prepareRowsToMoving(){const e=this.hot.getSelectedRangeLast(),t=[];if(!e)return t;const{from:i,to:s}=e,r=Math.min(i.row,s.row),o=Math.max(i.row,s.row);return ke(r,o,a=>{t.push(a)}),t}refreshPositions(){const e=Ye(_s,this).coords,t=this.hot.view.getFirstFullyVisibleRow(),i=this.hot.view.getLastFullyVisibleRow(),s=this.hot.countRows();this.isFixedRowTop(e.row)&&t>0&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(t-1,-1)),this.isFixedRowBottom(e.row)&&i<s&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(i+1,1),void 0,!0);const r=this.hot.view._wt.wtTable,o=Ye(_s,this).TD,a=this.hot.rootElement,l=li(a),c=$u(a),h=r.holder.scrollTop,u=this.hot.rootWindow!==c?c.scrollTop:0,d=l.top-u,f=Ye(_s,this).eventPageY-d+h,g=r.hider.offsetHeight,m=r.TBODY.offsetTop,w=Ye(ts,this).getOffset().top,v=Ye(ts,this).getSize().height,C=o.offsetHeight/2,S=o.offsetHeight;let x=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,e.row-1);const _=f>=x+C;this.isFixedRowTop(e.row)&&(x+=this.hot.view._wt.wtOverlays.topOverlay.getOverlayOffset()),e.row<0?Ye(_s,this).row=t>0?t-1:t:_?(Ye(_s,this).row=e.row+1,x+=e.row===0?S-1:S):Ye(_s,this).row=e.row;let R=f,M=x;f+v+w>=g?R=g-v-w:f+w<m&&(R=m+Math.abs(w)),x>=g-1&&(M=g-1),Ye(ts,this).setPosition(R),Ye(hc,this).setPosition(M)}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mousemove",t=>rc(Bh,this,SPe).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>rc(Bh,this,RPe).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){Ye(ts,this).build(),Ye(hc,this).build()}destroy(){Ye(ts,this).destroy(),Ye(hc,this).destroy(),super.destroy()}}function CPe(n,e,t,i){const{wtTable:s,wtViewport:r}=this.hot.view._wt,o=this.hot.selection.isSelectedByRowHeader(),a=this.hot.getSelectedRangeLast();if(!a||!o||Ye(Sc,this)||n.button!==0){pu(Sc,this,!1),Ye(gl,this).length=0,ze(this.hot.rootElement,[JM,TS]);return}const l=Ye(hc,this).isBuilt()&&!Ye(hc,this).isAppended(),c=Ye(ts,this).isBuilt()&&!Ye(ts,this).isAppended();l&&c&&(Ye(hc,this).appendTo(s.hider),Ye(ts,this).appendTo(s.hider));const{from:h,to:u}=a,d=Math.min(h.row,u.row),f=Math.max(h.row,u.row);if(e.col<0&&e.row>=d&&e.row<=f){i.row=!0,pu(Sc,this,!0),Ye(_s,this).eventPageY=n.pageY,Ye(_s,this).coords=e,Ye(_s,this).TD=t,pu(gl,this,this.prepareRowsToMoving());const g=s.holder.scrollLeft+r.getRowHeaderWidth(),m=this.getRowsHeight(d,e.row-1)+n.offsetY;Ye(ts,this).setPosition(null,g),Ye(ts,this).setSize(s.hider.offsetWidth-g,this.getRowsHeight(d,f)),Ye(ts,this).setOffset(-m,null),ae(this.hot.rootElement,JM),this.refreshPositions()}else ze(this.hot.rootElement,e1),pu(Sc,this,!1),Ye(gl,this).length=0}function SPe(n){Ye(Sc,this)&&(Ye(_s,this).eventPageY=n.pageY,this.refreshPositions())}function _Pe(n,e,t,i){!this.hot.getSelectedRangeLast()||!Ye(Sc,this)||(Ye(gl,this).indexOf(e.row)>-1?ze(this.hot.rootElement,TS):ae(this.hot.rootElement,TS),i.row=!0,i.column=!0,i.cell=!0,Ye(_s,this).coords=e,Ye(_s,this).TD=t)}function RPe(){const n=Ye(_s,this).row,e=Ye(gl,this).length;if(pu(Sc,this,!1),ze(this.hot.rootElement,[JM,TS,e1]),this.hot.selection.isSelectedByRowHeader()&&ae(this.hot.rootElement,e1),e<1||n===void 0)return;const t=Ye(gl,this)[0],i=this.hot.toPhysicalRow(t),s=this.dragRows(Ye(gl,this),n);if(Ye(gl,this).length=0,s===!0){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const r=this.hot.toVisualRow(i),o=r+e-1;this.hot.selectRows(r,o)}}function xPe(){const n=this.hot.view._wt.wtTable,e=this.hot.view._wt.wtViewport.getRowHeaderWidth(),t=n.holder.scrollLeft,i=e+t;Ye(ts,this).setPosition(null,i),Ye(ts,this).setSize(n.hider.offsetWidth-i)}function EPe(){this.moveBySettingsOrLoad()}function TPe(n,e){aK(n,e),e.add(n)}function Hi(n,e,t){aK(n,e),e.set(n,t)}function aK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rn(n,e,t){return n.set(el(n,e),t),t}function we(n,e){return n.get(el(n,e))}function el(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const MS="manualRowResize",MPe=30,KF="manualRowHeights";var Vo=new WeakMap,hy=new WeakMap,$s=new WeakMap,Pp=new WeakMap,uc=new WeakMap,ZO=new WeakMap,Nf=new WeakMap,uy=new WeakMap,Xi=new WeakMap,Fo=new WeakMap,zu=new WeakMap,AS=new WeakMap,Ip=new WeakMap,Op=new WeakMap,Xr=new WeakMap,kp=new WeakMap,ql=new WeakSet;class APe extends xt{static get PLUGIN_KEY(){return MS}static get PLUGIN_PRIORITY(){return MPe}constructor(e){super(e),TPe(this,ql),Hi(this,Vo,null),Hi(this,hy,null),Hi(this,$s,[]),Hi(this,Pp,null),Hi(this,uc,null),Hi(this,ZO,null),Hi(this,Nf,null),Hi(this,uy,null),Hi(this,Xi,this.hot.rootDocument.createElement("DIV")),Hi(this,Fo,this.hot.rootDocument.createElement("DIV")),Hi(this,zu,!1),Hi(this,AS,!1),Hi(this,Ip,0),Hi(this,Op,null),Hi(this,Xr,void 0),Hi(this,kp,void 0),ae(we(Xi,this),"manualRowResizer"),ae(we(Fo,this),"manualRowResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[MS]}enablePlugin(){this.enabled||(Rn(Xr,this,new eh),we(Xr,this).addLocalHook("init",()=>el(ql,this,NPe).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,we(Xr,this)),this.addHook("modifyRowHeight",(e,t)=>el(ql,this,DPe).call(this,e,t)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Rn(kp,this,we(Xr,this).getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualRowHeights(){this.hot.runHooks("persistentStateSave",KF,we(Xr,this).getValues())}loadManualRowHeights(){const e={};return this.hot.runHooks("persistentStateLoad",KF,e),e.value}setManualSize(e,t){const i=this.hot.toPhysicalRow(e),s=Math.max(t,TY);return we(Xr,this).setValueAtIndex(i,s),s}getLastDesiredRowHeight(){return we(Pp,this)}setupHandlePosition(e){Rn(Vo,this,e);const{view:t}=this.hot,{_wt:i}=t,s=i.wtTable.getCoords(we(Vo,this)),r=s.row;if(r<0)return;const o=Qt(we(Vo,this)),a=we(Vo,this).getBoundingClientRect(),l=r<i.getSetting("fixedRowsTop"),c=r>=t.countNotHiddenRowIndexes(0,1)-i.getSetting("fixedRowsBottom");let h;l?h=i.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(we(Vo,this),s.row,s.col):c&&(h=i.wtOverlays.bottomInlineStartCornerOverlay.getRelativeCellPosition(we(Vo,this),s.row,s.col)),h||(h=i.wtOverlays.inlineStartOverlay.getRelativeCellPosition(we(Vo,this),s.row,s.col)),Rn(hy,this,this.hot.rowIndexMapper.getVisualFromRenderableIndex(r)),Rn($s,this,[]);const u=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&u){const d=this.hot.getSelectedRange();L(d,f=>{const g=f.getTopStartCorner().row,m=f.getBottomStartCorner().row;ke(g,m,w=>{we($s,this).includes(w)||we($s,this).push(w)})})}we($s,this).includes(we(hy,this))||Rn($s,this,[we(hy,this)]),Rn(uy,this,h.top-6),Rn(Nf,this,parseInt(a.height,10)),we(Xi,this).style.top=`${we(uy,this)+we(Nf,this)}px`,we(Xi,this).style[this.inlineDir]=`${h.start}px`,we(Xi,this).style.width=`${o}px`,this.hot.rootElement.appendChild(we(Xi,this))}refreshHandlePosition(){we(Xi,this).style.top=`${we(uy,this)+we(Pp,this)}px`}setupGuidePosition(){const e=parseInt(Qt(we(Xi,this)),10),t=parseInt(we(Xi,this).style[this.inlineDir],10)+e,i=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);ae(we(Xi,this),"active"),ae(we(Fo,this),"active"),we(Fo,this).style.top=we(Xi,this).style.top,we(Fo,this).style[this.inlineDir]=`${t}px`,we(Fo,this).style.width=`${i-e}px`,this.hot.rootElement.appendChild(we(Fo,this))}refreshGuidePosition(){we(Fo,this).style.top=we(Xi,this).style.top}hideHandleAndGuide(){ze(we(Xi,this),"active"),ze(we(Fo,this),"active")}checkIfRowHeader(e){const t=Lc(e,["TBODY"],this.hot.rootElement),{inlineStartOverlay:i,topInlineStartCornerOverlay:s,bottomInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.TBODY,s.clone.wtTable.TBODY,r.clone.wtTable.TBODY].includes(t)}getClosestTHParent(e){return e.tagName!=="TABLE"?e.tagName==="TH"?e:this.getClosestTHParent(e.parentNode):null}getActualRowHeight(e){const t=this.hot.view._wt.wtTable.getRowHeight(e);return t!==void 0&&we(uc,this)<t?t:we(uc,this)}afterMouseDownTimeout(){const e=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},t=(i,s)=>{const r=this.hot.runHooks("beforeRowResize",this.getActualRowHeight(i),i,!0);r!==void 0&&Rn(uc,this,r),this.setManualSize(i,we(uc,this)),this.hot.runHooks("afterRowResize",this.getActualRowHeight(i),i,!0),s&&e()};we(Ip,this)>=2&&(we($s,this).length>1?(L(we($s,this),s=>{t(s)}),e()):L(we($s,this),s=>{t(s,!0)})),Rn(Ip,this,0),Rn(Op,this,null)}bindEvents(){const{rootElement:e,rootWindow:t}=this.hot;this.eventManager.addEventListener(e,"mouseover",i=>el(ql,this,PPe).call(this,i)),this.eventManager.addEventListener(e,"mousedown",i=>el(ql,this,IPe).call(this,i)),this.eventManager.addEventListener(t,"mousemove",i=>el(ql,this,OPe).call(this,i)),this.eventManager.addEventListener(t,"mouseup",()=>el(ql,this,kPe).call(this)),this.eventManager.addEventListener(we(Xi,this),"contextmenu",()=>el(ql,this,HPe).call(this))}destroy(){super.destroy()}}function PPe(n){if(!uP(n.target)&&we(AS,this)!==!0&&this.checkIfRowHeader(n.target)){const e=this.getClosestTHParent(n.target);e&&(we(zu,this)||this.setupHandlePosition(e))}}function IPe(n){Fe(n.target,"manualRowResizer")&&(this.setupHandlePosition(we(Vo,this)),this.setupGuidePosition(),Rn(zu,this,!0),we(Op,this)===null&&(Rn(Op,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(we(Op,this))),Rn(Ip,this,we(Ip,this)+1),Rn(ZO,this,n.pageY),Rn(uc,this,we(Nf,this)))}function OPe(n){we(zu,this)&&(Rn(Pp,this,we(Nf,this)+(n.pageY-we(ZO,this))),L(we($s,this),e=>{Rn(uc,this,this.setManualSize(e,we(Pp,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition())}function kPe(){const n=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(t,i)=>{this.hot.runHooks("beforeRowResize",this.getActualRowHeight(t),t,!1),i&&n(),this.saveManualRowHeights(),this.hot.runHooks("afterRowResize",this.getActualRowHeight(t),t,!1)};we(zu,this)&&(this.hideHandleAndGuide(),Rn(zu,this,!1),we(uc,this)!==we(Nf,this)&&(we($s,this).length>1?(L(we($s,this),i=>{e(i)}),n()):L(we($s,this),i=>{e(i,!0)})),this.setupHandlePosition(we(Vo,this)))}function HPe(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(we(Xi,this)),this.hot.rootElement.removeChild(we(Fo,this)),Rn(zu,this,!1),Rn(AS,this,!0),this.hot._registerImmediate(()=>{Rn(AS,this,!1)})}function DPe(n,e){let t=n;if(this.enabled){const i=this.hot.toPhysicalRow(e),s=we(Xr,this).getValueAtIndex(i);this.hot.getSettings()[MS]&&s&&(t=s)}return t}function NPe(){const n=this.hot.getSettings()[MS],e=this.loadManualRowHeights();this.hot.batchExecution(()=>{typeof e<"u"?e.forEach((t,i)=>{we(Xr,this).setValueAtIndex(i,t)}):Array.isArray(n)?(n.forEach((t,i)=>{we(Xr,this).setValueAtIndex(i,t)}),Rn(kp,this,n)):n===!0&&Array.isArray(we(kp,this))&&we(kp,this).forEach((t,i)=>{we(Xr,this).setValueAtIndex(i,t)})},!0)}function LPe(n,e,t){$Pe(n,e),e.set(n,t)}function $Pe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vh(n,e,t){return(e=FPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FPe(n){var e=BPe(n,"string");return typeof e=="symbol"?e:e+""}function BPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qF(n,e){return n.get(lK(n,e))}function dy(n,e,t){return n.set(lK(n,e),t),t}function lK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Wh=new WeakMap;class Wo{constructor(e,t,i,s,r,o){Vh(this,"row",void 0),Vh(this,"col",void 0),Vh(this,"rowspan",void 0),Vh(this,"colspan",void 0),Vh(this,"removed",!1),Vh(this,"cellCoordsFactory",void 0),Vh(this,"cellRangeFactory",void 0),LPe(this,Wh,null),this.row=e,this.col=t,this.rowspan=i,this.colspan=s,this.cellCoordsFactory=r,this.cellRangeFactory=o}static NEGATIVE_VALUES_WARNING(e){let{row:t,col:i,rowspan:s,colspan:r}=e;return Nt`The merged cell declared with {row: ${t}, col: ${i},\x20
      rowspan: ${s}, colspan: ${r}} contains negative values, which is\x20
      not supported. It will not be added to the collection.`}static IS_OUT_OF_BOUNDS_WARNING(e){let{row:t,col:i}=e;return Nt`The merged cell declared at [${t}, ${i}] is positioned\x20
      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup.`}static IS_SINGLE_CELL(e){let{row:t,col:i}=e;return Nt`The merged cell declared at [${t}, ${i}] has both "rowspan"\x20
      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.`}static ZERO_SPAN_WARNING(e){let{row:t,col:i}=e;return Nt`The merged cell declared at [${t}, ${i}] has "rowspan"\x20
      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.`}static containsNegativeValues(e){let{row:t,col:i,rowspan:s,colspan:r}=e;return t<0||i<0||s<0||r<0}static isSingleCell(e){let{rowspan:t,colspan:i}=e;return i===1&&t===1}static containsZeroSpan(e){let{rowspan:t,colspan:i}=e;return i===0||t===0}static isOutOfBounds(e,t,i){return e.row<0||e.col<0||e.row>=t||e.row+e.rowspan-1>=t||e.col>=i||e.col+e.colspan-1>=i}normalize(e){const t=e.countRows(),i=e.countCols();this.row<0?this.row=0:this.row>t-1&&(this.row=t-1),this.col<0?this.col=0:this.col>i-1&&(this.col=i-1),this.row+this.rowspan>t-1&&(this.rowspan=t-this.row),this.col+this.colspan>i-1&&(this.colspan=i-this.col),dy(Wh,this,null)}includes(e,t){return this.row<=e&&this.col<=t&&this.row+this.rowspan-1>=e&&this.col+this.colspan-1>=t}includesHorizontally(e){return this.col<=e&&this.col+this.colspan-1>=e}includesVertically(e){return this.row<=e&&this.row+this.rowspan-1>=e}shift(e,t){const i=e[0]||e[1],s=t+Math.abs(e[0]||e[1])-1,r=e[0]?"colspan":"rowspan",o=e[0]?"col":"row",a=Math.min(t,s),l=Math.max(t,s),c=this[o],h=this[o]+this[r]-1;if(c>=t&&(this[o]+=i),i>0)t<=h&&t>c&&(this[r]+=i);else if(i<0){if(a<=c&&l>=h)return this.removed=!0,dy(Wh,this,null),!1;if(c>=a&&c<=l){const u=l-c+1,d=Math.abs(i)-u;this[o]-=d+i,this[r]-=u}else if(c<=a&&h>=l)this[r]+=i;else if(c<=a&&h>=a&&h<l){const u=h-a+1;this[r]-=u}}return dy(Wh,this,null),!0}isFarther(e,t){return e?t==="down"?e.row+e.rowspan-1<this.row+this.rowspan-1:t==="up"?e.row>this.row:t==="right"?e.col+e.colspan-1<this.col+this.colspan-1:t==="left"?e.col>this.col:null:!0}getLastRow(){return this.row+this.rowspan-1}getLastColumn(){return this.col+this.colspan-1}getRange(){return qF(Wh,this)||dy(Wh,this,this.cellRangeFactory(this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.getLastRow(),this.getLastColumn()))),qF(Wh,this)}}function VPe(n,e){WPe(n,e),e.add(n)}function WPe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fy(n,e,t){return(e=jPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jPe(n){var e=zPe(n,"string");return typeof e=="symbol"?e:e+""}function zPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function jh(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Xl=new WeakSet;class PS{constructor(e){VPe(this,Xl),fy(this,"plugin",void 0),fy(this,"mergedCells",[]),fy(this,"mergedCellsMatrix",new Map),fy(this,"hot",void 0),this.plugin=e,this.hot=e.hot}static IS_OVERLAPPING_WARNING(e){let{row:t,col:i}=e;return Nt`The merged cell declared at [${t}, ${i}], overlaps\x20
      with the other declared merged cell. The overlapping merged cell was not added to the table, please\x20
      fix your setup.`}get(e,t){var i;return this.mergedCellsMatrix.has(e)&&(i=this.mergedCellsMatrix.get(e).get(t))!==null&&i!==void 0?i:!1}getByRange(e){let t=!1;return L(this.mergedCells,i=>i.row<=e.from.row&&i.row+i.rowspan-1>=e.to.row&&i.col<=e.from.col&&i.col+i.colspan-1>=e.to.col?(t=i,t):!0),t}filterOverlappingMergeCells(e){const t=new Set;return this.mergedCells.forEach(s=>{const{row:r,col:o,colspan:a,rowspan:l}=s;for(let c=r;c<r+l;c++)for(let h=o;h<o+a;h++)t.add(`r${c},c${h}`)}),e.filter(s=>{const{row:r,col:o,colspan:a,rowspan:l}=s,c=new Set;let h=!1;for(let u=r;u<r+l;u++){for(let d=o;d<o+a;d++){const f=`r${u},c${d}`;if(t.has(f)){Dt(PS.IS_OVERLAPPING_WARNING(s)),h=!0;break}c.add(f)}if(h)break}return h||t.add(...c),!h})}getWithinRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{row:i,col:s}=e.getTopStartCorner(),{row:r,col:o}=e.getBottomEndCorner(),a=[];for(let l=i;l<=r;l++)for(let c=s;c<=o;c++){const h=this.get(l,c);h&&(t||!t&&h.row===l&&h.col===c)&&a.push(h)}return a}add(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=e.row,s=e.col,r=e.rowspan,o=e.colspan,a=new Wo(i,s,r,o,this.hot._createCellCoords,this.hot._createCellRange),l=this.get(i,s),c=t?!1:this.isOverlapping(a);return!l&&!c?(this.hot&&a.normalize(this.hot),this.mergedCells.push(a),jh(Xl,this,XF).call(this,a),a):(Dt(PS.IS_OVERLAPPING_WARNING(a)),!1)}remove(e,t){const i=this.get(e,t),s=i?this.mergedCells.indexOf(i):-1;return i&&s!==-1?(this.mergedCells.splice(s,1),jh(Xl,this,UPe).call(this,i),i):!1}clear(){L(this.mergedCells,e=>{let{row:t,col:i,rowspan:s,colspan:r}=e;ke(t,t+s,o=>{ke(i,i+r,a=>{const l=this.hot.getCell(o,a);l&&(l.removeAttribute("rowspan"),l.removeAttribute("colspan"),l.style.display="")})})}),this.mergedCells.length=0,this.mergedCellsMatrix=new Map}isOverlapping(e){const t=e.getRange();for(let i=0;i<this.mergedCells.length;i++)if(this.mergedCells[i].getRange().overlaps(t))return!0;return!1}isFirstRenderableMergedCell(e,t){const i=this.get(e,t);return i&&this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1)===e&&this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1)===t}getFirstRenderableCoords(e,t){const i=this.get(e,t);if(!i||this.isFirstRenderableMergedCell(e,t))return this.hot._createCellCoords(e,t);const s=this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1),r=this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1);return this.hot._createCellCoords(s,r)}getStartMostColumnIndex(e,t){const i=jh(Xl,this,gy).call(this,e,"col",-1);let s=t;for(let r=0;r<i.length;r++)if(i[r]<=t){s=i[r];break}return s}getEndMostColumnIndex(e,t){const i=jh(Xl,this,gy).call(this,e,"col",1);let s=t;for(let r=0;r<i.length;r++)if(i[r]>=t){s=i[r];break}return s}getTopMostRowIndex(e,t){const i=jh(Xl,this,gy).call(this,e,"row",-1);let s=t;for(let r=0;r<i.length;r++)if(i[r]<=t){s=i[r];break}return s}getBottomMostRowIndex(e,t){const i=jh(Xl,this,gy).call(this,e,"row",1);let s=t;for(let r=0;r<i.length;r++)if(i[r]>=t){s=i[r];break}return s}shiftCollections(e,t,i){const s=[0,0];switch(e){case"right":s[0]+=i;break;case"left":s[0]-=i;break;case"down":s[1]+=i;break;case"up":s[1]-=i;break}const r=[];this.mergedCells.forEach(o=>{o.shift(s,t),o.removed&&r.push(o)}),r.forEach(o=>{this.mergedCells.splice(this.mergedCells.indexOf(o),1)}),this.mergedCellsMatrix.clear(),this.mergedCells.forEach(o=>{jh(Xl,this,XF).call(this,o)})}}function gy(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=new Map,s=t===1?n.getTopStartCorner():n.getBottomEndCorner(),r=t===1?n.getBottomEndCorner():n.getTopStartCorner();for(let o=s.row;t===1?o<=r.row:o>=r.row;o+=t)for(let a=s.col;t===1?a<=r.col:a>=r.col;a+=t){const l=e==="row"?o:a,c=this.get(o,a);let h=l;c&&(h=t===1?c[e]+c[`${e}span`]-1:c[e]),i.has(l)||i.set(l,new Set),i.get(l).add(h)}return Array.from(new Set(Array.from(i.entries()).filter(o=>{let[,a]=o;return a.size===1}).flatMap(o=>{let[,a]=o;return Array.from(a)})))}function XF(n){for(let e=n.row;e<n.row+n.rowspan;e++)for(let t=n.col;t<n.col+n.colspan;t++)this.mergedCellsMatrix.has(e)||this.mergedCellsMatrix.set(e,new Map),this.mergedCellsMatrix.get(e).set(t,n)}function UPe(n){for(let e=n.row;e<n.row+n.rowspan;e++)for(let t=n.col;t<n.col+n.colspan;t++)this.mergedCellsMatrix.get(e).delete(t)}function EE(n,e,t){return(e=YPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YPe(n){var e=GPe(n,"string");return typeof e=="symbol"?e:e+""}function GPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class KPe{constructor(e){EE(this,"plugin",void 0),EE(this,"mergedCellsCollection",void 0),EE(this,"currentFillData",null),this.plugin=e,this.mergedCellsCollection=this.plugin.mergedCellsCollection}correctSelectionAreaSize(e){if(e[0]===e[2]&&e[1]===e[3]){const t=this.mergedCellsCollection.get(e[0],e[1]);t&&(e[2]=e[0]+t.rowspan-1,e[3]=e[1]+t.colspan-1)}}getDirection(e,t){let i=null;return t[0]===e[0]&&t[1]===e[1]&&t[3]===e[3]?i="down":t[2]===e[2]&&t[1]===e[1]&&t[3]===e[3]?i="up":t[1]===e[1]&&t[2]===e[2]?i="right":i="left",i}snapDragArea(e,t,i,s){const r=t.slice(0),o=this.getAutofillSize(e,t,i),[a,l,c,h]=e,d=["up","down"].indexOf(i)>-1?c-a+1:h-l+1,f=Math.floor(o/d)*d,g=o-f,m=this.getFarthestCollection(e,t,i,s);if(m){if(i==="down"){const w=m.row+m.rowspan-a-g;r[2]+w>=this.plugin.hot.countRows()?r[2]-=g:r[2]+=g?w:0}else if(i==="right"){const w=m.col+m.colspan-l-g;r[3]+w>=this.plugin.hot.countCols()?r[3]-=g:r[3]+=g?w:0}else if(i==="up"){const w=c-g-m.row+1;r[0]+w<0?r[0]+=g:r[0]-=g?w:0}else if(i==="left"){const w=h-g-m.col+1;r[1]+w<0?r[1]+=g:r[1]-=g?w:0}}return this.updateCurrentFillCache({baseArea:e,dragDirection:i,foundMergedCells:s,fillSize:o,dragArea:r,cycleLength:d}),r}updateCurrentFillCache(e){this.currentFillData||(this.currentFillData={}),zn(this.currentFillData,e)}getAutofillSize(e,t,i){const[s,r,o,a]=e,[l,c,h,u]=t;switch(i){case"up":return s-l;case"down":return h-o;case"left":return r-c;case"right":return u-a;default:return null}}getDragArea(e,t,i){const[s,r,o,a]=e,[l,c,h,u]=t;switch(i){case"up":return[l,c,s-1,a];case"down":return[o+1,r,h,a];case"left":return[l,c,o,r-1];case"right":return[s,a+1,h,u];default:return null}}getFarthestCollection(e,t,i,s){const[r,o,a,l]=e,c=["up","down"].indexOf(i)>-1,h=c?a:l,u=c?r:o,d=this.getAutofillSize(e,t,i),f=c?a-r+1:l-o+1,g=Math.floor(d/f)*f,m=d-g;let w=null,v=null,C=null;switch(i){case"up":w="includesVertically",C=h-m+1;break;case"left":w="includesHorizontally",C=h-m+1;break;case"down":w="includesVertically",C=u+m-1;break;case"right":w="includesHorizontally",C=u+m-1;break}return L(s,S=>{S[w](C)&&S.isFarther(v,i)&&(v=S)}),v}recreateAfterDataPopulation(e){if(!this.currentFillData)return;const t=this.getRangeFromChanges(e),i=this.currentFillData.foundMergedCells,s=this.currentFillData.dragDirection,r=(c,h)=>{switch(s){case"up":return c.row-h>=t.from.row;case"down":return c.row+c.rowspan-1+h<=t.to.row;case"left":return c.col-h>=t.from.column;case"right":return c.col+c.colspan-1+h<=t.to.column;default:return null}};let o=0,a=null,l=1;do for(let c=0;c<i.length;c+=1){if(a=i[c],o=l*this.currentFillData.cycleLength,r(a,o))switch(s){case"up":this.plugin.mergedCellsCollection.add({row:a.row-o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:a.row+o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col-o,colspan:a.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col+o,colspan:a.colspan});break}c===i.length-1&&(l+=1)}while(r(a,o));this.currentFillData=null,this.plugin.hot.render(),i.length>0&&this.plugin.ifChromeForceRepaint()}getRangeFromChanges(e){const t={min:null,max:null},i={min:null,max:null};return L(e,s=>{const r=s[0],o=this.plugin.hot.propToCol(s[1]);(t.min===null||r<t.min)&&(t.min=r),(t.max===null||r>t.max)&&(t.max=r),(i.min===null||o<i.min)&&(i.min=o),(i.max===null||o>i.max)&&(i.max=o)}),{from:{row:t.min,column:i.min},to:{row:t.max,column:i.max}}}dragAreaOverlapsCollections(e,t,i){const s=this.getDragArea(e,t,i),[r,o,a,l]=s,c=this.plugin.hot._createCellCoords(r,o),h=this.plugin.hot._createCellCoords(a,l),u=this.plugin.hot._createCellRange(c,c,h);return this.mergedCellsCollection.getWithinRange(u,!0).length>0}}function TE(n,e,t){return(e=qPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qPe(n){var e=XPe(n,"string");return typeof e=="symbol"?e:e+""}function XPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class QPe{constructor(e){TE(this,"plugin",void 0),TE(this,"hot",void 0),TE(this,"fullySelectedMergedCellClassName","fullySelectedMergedCell"),this.plugin=e,this.hot=e.hot}getSelectedMergedCellClassName(e,t,i,s){const r=Math.min(i[0],i[2]),o=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),l=Math.max(i[1],i[3]);if(s===void 0||!this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(e,t))return;const h=this.plugin.mergedCellsCollection.get(e,t);if(!h)return;const u=h.getLastRow(),d=h.getLastColumn();if(r<=h.row&&o<=h.col&&a>=u&&l>=d)return`${this.fullySelectedMergedCellClassName}-${s}`;if(this.isMergeCellFullySelected(h,this.plugin.hot.getSelectedRange()))return`${this.fullySelectedMergedCellClassName}-multiple`}isMergeCellFullySelected(e,t){const i=[];if(!t||!e)return!1;for(let s=0;s<e.rowspan;s+=1)for(let r=0;r<e.colspan;r+=1)i.push(this.hot._createCellCoords(e.row+s,e.col+r));for(let s=0;s<i.length;s+=1){const r=[];for(let o=0;o<t.length;o+=1)r[o]=t[o].includes(i[s]);if(!r.includes(!0))return!1}return!0}getSelectedMergedCellClassNameToRemove(){const e=[];for(let t=0;t<=7;t+=1)e.push(`${this.fullySelectedMergedCellClassName}-${t}`);return e.push(`${this.fullySelectedMergedCellClassName}-multiple`),e}}function ZPe(n){return{key:"mergeCells",name(){const e=this.getSelectedLast();if(e){const t=n.mergedCellsCollection.get(e[0],e[1]);if(t.row===e[0]&&t.col===e[1]&&t.row+t.rowspan-1===e[2]&&t.col+t.colspan-1===e[3])return this.getTranslatedPhrase(bI)}return this.getTranslatedPhrase(vI)},callback(){const e=this.getSelectedRangeLast();if(!e)return;e.setDirection(this.isRtl()?"NE-SW":"NW-SE");const{from:t,to:i}=e;n.toggleMerge(e),this.selectCell(t.row,t.col,i.row,i.col,!1)},disabled(){const e=this.getSelectedLast();return e?Wo.isSingleCell({row:e[0],col:e[1],rowspan:e[2]-e[0]+1,colspan:e[3]-e[1]+1})||this.selection.isSelectedByCorner():!0},hidden:!1}}function Hp(n,e,t){return(e=JPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JPe(n){var e=eIe(n,"string");return typeof e=="symbol"?e:e+""}function eIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class QF{constructor(e){Hp(this,"data",void 0),Hp(this,"next",null),Hp(this,"prev",null),this.data=e}}class my{constructor(){Hp(this,"first",null),Hp(this,"last",null)}push(e){const t=new QF(e);if(this.first===null)this.first=t,this.last=t;else{const i=this.last;this.last=t,t.prev=i,i.next=t}return t}unshift(e){const t=new QF(e);if(this.first===null)this.first=t,this.last=t;else{const i=this.first;this.first=t,t.next=i,i.prev=t}}inorder(e){let t=this.first;for(;t;){const i=e(t);if(t===this.last||i===!0)break;t=t.next}}remove(e){if(this.first===null)return!1;let t=this.first,i,s;for(;t;){if(t.data===e)return i=t.next,s=t.prev,i&&(i.prev=s),s&&(s.next=i),t===this.first&&(this.first=i),t===this.last&&(this.last=s),!0;t=t.next}return!1}hasCycle(){let e=this.first,t=this.first;for(;;){if(e===null||(e=e.next,e===null))return!1;if(e=e.next,t=t.next,e===t)return!0}}pop(){if(this.last===null)return null;const e=this.last;return this.last=this.last.prev,e}shift(){if(this.first===null)return null;const e=this.first;return this.first=this.first.next,e}recursiveReverse(){function e(i,s){s&&(e(s,s.next),s.next=i)}if(!this.first)return;e(this.first,this.first.next),this.first.next=null;const t=this.first;this.first=this.last,this.last=t}reverse(){if(!this.first||!this.first.next)return;let e=this.first.next,t=this.first,i;for(;e;)i=e.next,e.next=t,t.prev=e,t=e,e=i;this.first.next=null,this.last.prev=null,i=this.first,this.first=t,this.last=i}}function tIe(n,e){cK(n,e),e.add(n)}function zh(n,e,t){cK(n,e),e.set(n,t)}function cK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pt(n,e){return n.get(IS(n,e))}function Ms(n,e,t){return n.set(IS(n,e),t),t}function IS(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Oo=new WeakMap,ko=new WeakMap,Ho=new WeakMap,Do=new WeakMap,t1=new WeakMap,py=new WeakMap,wy=new WeakMap,ME=new WeakSet;class nIe{constructor(e){let{mergedCellsGetter:t,rowIndexMapper:i,columnIndexMapper:s}=e;tIe(this,ME),zh(this,Oo,new my),zh(this,ko,new my),zh(this,Ho,null),zh(this,Do,null),zh(this,t1,null),zh(this,py,null),zh(this,wy,null),Ms(t1,this,t),Ms(py,this,i),Ms(wy,this,s)}getCurrentVerticalNode(){return Pt(Do,this).data}getFirstVerticalNode(){return Pt(ko,this).first.data}getNextVerticalNode(){return Pt(Do,this).next.data}getPrevVerticalNode(){return Pt(Do,this).prev.data}getCurrentHorizontalNode(){return Pt(Ho,this).data}getFirstHorizontalNode(){return Pt(Oo,this).first.data}getNextHorizontalNode(){return Pt(Ho,this).next.data}getPrevHorizontalNode(){return Pt(Ho,this).prev.data}setPrevNodeAsActive(){Ms(Do,this,Pt(Do,this).prev),Ms(Ho,this,Pt(Ho,this).prev)}setNextNodeAsActive(){Ms(Do,this,Pt(Do,this).next),Ms(Ho,this,Pt(Ho,this).next)}buildFocusOrder(e){const t=e.getTopStartCorner(),i=e.getBottomEndCorner(),s=new WeakSet;Ms(Oo,this,new my);for(let o=t.row;o<=i.row;o++)if(!Pt(py,this).isHidden(o))for(let a=t.col;a<=i.col;a++){if(Pt(wy,this).isHidden(a))continue;const l=IS(ME,this,ZF).call(this,e,Pt(Oo,this),s,o,a);l&&Ms(Ho,this,l)}Pt(Oo,this).first&&(Pt(Oo,this).first.prev=Pt(Oo,this).last,Pt(Oo,this).last.next=Pt(Oo,this).first);const r=new WeakSet;Ms(ko,this,new my);for(let o=t.col;o<=i.col;o++)if(!Pt(wy,this).isHidden(o))for(let a=t.row;a<=i.row;a++){if(Pt(py,this).isHidden(a))continue;const l=IS(ME,this,ZF).call(this,e,Pt(ko,this),r,a,o);l&&Ms(Do,this,l)}Pt(ko,this).first&&(Pt(ko,this).first.prev=Pt(ko,this).last,Pt(ko,this).last.next=Pt(ko,this).first)}setActiveNode(e,t){return Pt(Oo,this).inorder(i=>{const{rowStart:s,rowEnd:r,colStart:o,colEnd:a}=i.data;if(e>=s&&e<=r&&t>=o&&t<=a)return Ms(Ho,this,i),!1}),Pt(ko,this).inorder(i=>{const{rowStart:s,rowEnd:r,colStart:o,colEnd:a}=i.data;if(e>=s&&e<=r&&t>=o&&t<=a)return Ms(Do,this,i),!1}),this}}function ZF(n,e,t,i,s){const r=n.getTopStartCorner(),o=n.getBottomEndCorner(),a=n.highlight.clone().normalize(),l=Pt(t1,this).call(this,i,s);if(l&&t.has(l))return null;const c={colStart:s,colEnd:s,rowStart:i,rowEnd:i};if(l){if(t.add(l),l.row<r.row||l.row+l.rowspan-1>o.row||l.col<r.col||l.col+l.colspan-1>o.col)return null;c.colStart=l.col,c.colEnd=l.col+l.colspan-1,c.rowStart=l.row,c.rowEnd=l.row+l.rowspan-1}const h=e.push(c);return i===a.row&&s===a.col||l&&a.row>=l.row&&a.row<=l.row+l.rowspan-1&&a.col>=l.col&&a.col<=l.col+l.colspan-1?h:null}function iIe(n){const{hot:e}=n,{rowIndexMapper:t,columnIndexMapper:i}=e;function s(){}function r(o,a,l){const c=n.mergedCellsCollection.get(a,l);if(!Je(c)){o.removeAttribute("rowspan"),o.removeAttribute("colspan"),o.style.display="";return}const{row:h,col:u,colspan:d,rowspan:f}=c,[g,m]=n.translateMergedCellToRenderable(h,f,u,d),w=t.getRenderableFromVisualIndex(a),v=i.getRenderableFromVisualIndex(l),C=g-w+1,S=m-v+1,x=t.getNearestNotHiddenIndex(h,1),_=i.getNearestNotHiddenIndex(u,1),R=Math.min(f,C),M=Math.min(d,S);x===a&&_===l?(o.setAttribute("rowspan",R),o.setAttribute("colspan",M)):(o.removeAttribute("rowspan"),o.removeAttribute("colspan"),o.style.display="none")}return{before:s,after:r}}function sIe(n,e){hK(n,e),e.add(n)}function vy(n,e,t){hK(n,e),e.set(n,t)}function hK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function AE(n,e,t){return(e=rIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rIe(n){var e=oIe(n,"string");return typeof e=="symbol"?e:e+""}function oIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function bw(n,e,t){return n.set(Ot(n,e),t),t}function Gt(n,e){return n.get(Ot(n,e))}function Ot(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Ee.getSingleton().register("beforeMergeCells");Ee.getSingleton().register("afterMergeCells");Ee.getSingleton().register("beforeUnmergeCells");Ee.getSingleton().register("afterUnmergeCells");const Dp="mergeCells",aIe=150,JF=Dp;var wr=new WeakMap,vr=new WeakMap,Zo=new WeakMap,eB=new WeakMap,$t=new WeakSet;class lIe extends xt{constructor(){super(...arguments),sIe(this,$t),AE(this,"mergedCellsCollection",null),AE(this,"autofillCalculations",null),AE(this,"selectionCalculations",null),vy(this,wr,null),vy(this,vr,{row:0,col:0}),vy(this,Zo,new nIe({mergedCellsGetter:(e,t)=>this.mergedCellsCollection.get(e,t),rowIndexMapper:this.hot.rowIndexMapper,columnIndexMapper:this.hot.columnIndexMapper})),vy(this,eB,iIe(this))}static get PLUGIN_KEY(){return Dp}static get PLUGIN_PRIORITY(){return aIe}isEnabled(){return!!this.hot.getSettings()[Dp]}enablePlugin(){var e=this;this.enabled||(this.mergedCellsCollection=new PS(this),this.autofillCalculations=new KPe(this),this.selectionCalculations=new QPe(this),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,cIe).call(e,...i)}),this.addHook("modifyTransformFocus",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,uIe).call(e,...i)}),this.addHook("modifyTransformStart",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,dIe).call(e,...i)}),this.addHook("modifyTransformEnd",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,fIe).call(e,...i)}),this.addHook("beforeSelectionHighlightSet",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,gIe).call(e,...i)}),this.addHook("beforeSetRangeStart",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,tB).call(e,...i)}),this.addHook("beforeSetRangeStartOnly",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,tB).call(e,...i)}),this.addHook("beforeSelectionFocusSet",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,wIe).call(e,...i)}),this.addHook("afterSelectionFocusSet",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,vIe).call(e,...i)}),this.addHook("afterSelectionEnd",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,bIe).call(e,...i)}),this.addHook("modifyGetCellCoords",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,mIe).call(e,...i)}),this.addHook("afterIsMultipleSelection",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,hIe).call(e,...i)}),this.addHook("afterRenderer",function(){return Gt(eB,e).after(...arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,pIe).call(e,...i)}),this.addHook("afterGetCellMeta",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,yIe).call(e,...i)}),this.addHook("afterViewportRowCalculatorOverride",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,CIe).call(e,...i)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,SIe).call(e,...i)}),this.addHook("modifyAutofillRange",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,_Ie).call(e,...i)}),this.addHook("afterCreateCol",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,RIe).call(e,...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,xIe).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,EIe).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,TIe).call(e,...i)}),this.addHook("afterChange",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,MIe).call(e,...i)}),this.addHook("beforeDrawBorders",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,AIe).call(e,...i)}),this.addHook("afterDrawSelection",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,PIe).call(e,...i)}),this.addHook("beforeRemoveCellClassNames",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,IIe).call(e,...i)}),this.addHook("beforeBeginEditing",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,OIe).call(e,...i)}),this.addHook("modifyRowHeightByOverlayName",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Ot($t,e,kIe).call(e,...i)}),this.addHook("beforeUndoStackChange",(t,i)=>{if(i==="MergeCells")return!1}),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.clearCollections(),this.unregisterShortcuts(),this.hot.render(),super.disablePlugin()}updatePlugin(){const e=this.hot.getSettings()[Dp];this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(e),super.updatePlugin()}ifChromeForceRepaint(){if(!pP())return;const e=[];let t=[];this.mergedCellsCollection.mergedCells.forEach(i=>{const{row:s,rowspan:r}=i;for(let o=s+1;o<s+r;o++)t.push(o)}),t=[...new Set(t)],t.forEach(i=>{const s=this.hot.rowIndexMapper.getRenderableFromVisualIndex(i);this.hot.view._wt.wtOverlays.getOverlays(!0).map(r=>(r==null?void 0:r.name)==="master"?r:r.clone.wtTable).forEach(r=>{const o=r.getRow(s);o&&(o.style.background=Uf(o,"backgroundColor").replace(")",", 0.99)"),e.push(o))})}),this.hot._registerTimeout(()=>{e.forEach(i=>{i.style.background=Uf(i,"backgroundColor").replace(", 0.99)",")")})},1)}validateSetting(e){return e?Wo.containsNegativeValues(e)?(Dt(Wo.NEGATIVE_VALUES_WARNING(e)),!1):Wo.isOutOfBounds(e,this.hot.countRows(),this.hot.countCols())?(Dt(Wo.IS_OUT_OF_BOUNDS_WARNING(e)),!1):Wo.isSingleCell(e)?(Dt(Wo.IS_SINGLE_CELL(e)),!1):Wo.containsZeroSpan(e)?(Dt(Wo.ZERO_SPAN_WARNING(e)),!1):!0:!1}generateFromSettings(e){if(!Array.isArray(e))return;const t=e.filter(r=>this.validateSetting(r)),i=this.mergedCellsCollection.filterOverlappingMergeCells(t),s=[];i.forEach(r=>{const{row:o,col:a,rowspan:l,colspan:c}=r,h=this.hot._createCellCoords(o,a),u=this.hot._createCellCoords(o+l-1,a+c-1),d=this.hot._createCellRange(h,h,u);this.mergeRange(d,!0,!0);for(let f=o;f<o+l;f++)for(let g=a;g<a+c;g++)(f!==o||g!==a)&&s.push([f,g,null])}),s.length!==0&&this.hot.setDataAtCell(s,void 0,void 0,this.pluginName)}clearCollections(){this.mergedCellsCollection.clear()}canMergeRange(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?!0:this.validateSetting(e)}mergeSelection(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hot.getSelectedRangeLast();if(!e)return;e.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");const{from:t,to:i}=e;this.unmergeRange(e,!0),this.mergeRange(e),this.hot.selectCell(t.row,t.col,i.row,i.col,!1)}unmergeSelection(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hot.getSelectedRangeLast();if(!e)return;const{from:t,to:i}=e;this.unmergeRange(e,!0),this.hot.selectCell(t.row,t.col,i.row,i.col,!1)}mergeRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=e.getTopStartCorner(),r=e.getBottomEndCorner(),o={row:s.row,col:s.col,rowspan:r.row-s.row+1,colspan:r.col-s.col+1},a=[];let l=null;return this.canMergeRange(o,t)?(this.hot.runHooks("beforeMergeCells",e,t),ke(0,o.rowspan-1,h=>{ke(0,o.colspan-1,u=>{let d=null;a[h]||(a[h]=[]),h===0&&u===0?d=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o.row),this.hot.toPhysicalColumn(o.col)):this.hot.setCellMeta(o.row+h,o.col+u,"hidden",!0),a[h][u]=d})}),this.hot.setCellMeta(o.row,o.col,"spanned",!0),this.mergedCellsCollection.add(o,t)?(i?l=[o.row,o.col,a]:this.hot.populateFromArray(o.row,o.col,a,void 0,void 0,this.pluginName),t||this.ifChromeForceRepaint(),this.hot.runHooks("afterMergeCells",e,o,t),l):!0):!1}unmergeRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=this.mergedCellsCollection.getWithinRange(e);i.length!==0&&(this.hot.runHooks("beforeUnmergeCells",e,t),L(i,s=>{this.mergedCellsCollection.remove(s.row,s.col),ke(0,s.rowspan-1,r=>{ke(0,s.colspan-1,o=>{this.hot.removeCellMeta(s.row+r,s.col+o,"hidden"),this.hot.removeCellMeta(s.row+r,s.col+o,"copyable")})}),this.hot.removeCellMeta(s.row,s.col,"spanned")}),this.hot.runHooks("afterUnmergeCells",e,t),this.hot.render())}toggleMerge(e){const t=this.mergedCellsCollection.get(e.from.row,e.from.col);t.row===e.from.row&&t.col===e.from.col&&t.row+t.rowspan-1===e.to.row&&t.col+t.colspan-1===e.to.col?this.unmergeRange(e):this.mergeSelection(e)}merge(e,t,i,s){const r=this.hot._createCellCoords(e,t),o=this.hot._createCellCoords(i,s);this.mergeRange(this.hot._createCellRange(r,r,o))}unmerge(e,t,i,s){const r=this.hot._createCellCoords(e,t),o=this.hot._createCellCoords(i,s);this.unmergeRange(this.hot._createCellRange(r,r,o))}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control","m"]],callback:()=>{const i=this.hot.getSelectedRangeLast();i&&!i.isSingleHeader()&&(this.toggleMerge(i),this.hot.render())},runOnlyIf:i=>!i.altKey,group:JF})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(JF)}modifyViewportRowStart(e,t){const i=this.hot.rowIndexMapper,s=i.getVisualFromRenderableIndex(e.startRow);for(let r=0;r<t;r+=1){const o=this.mergedCellsCollection.get(s,r);if(Je(o)){const a=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.row,1));if(a<e.startRow){e.startRow=a,this.modifyViewportRowStart(e,t);return}}}}modifyViewportRowEnd(e,t){const i=this.hot.rowIndexMapper,s=i.getVisualFromRenderableIndex(e.endRow);for(let r=0;r<t;r+=1){const o=this.mergedCellsCollection.get(s,r);if(Je(o)){const a=o.row+o.rowspan-1,l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(a,-1));if(l>e.endRow){e.endRow=l,this.modifyViewportRowEnd(e,t);return}}}}modifyViewportColumnStart(e,t){const i=this.hot.columnIndexMapper,s=i.getVisualFromRenderableIndex(e.startColumn);for(let r=0;r<t;r+=1){const o=this.mergedCellsCollection.get(r,s);if(Je(o)){const a=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.col,1));if(a<e.startColumn){e.startColumn=a,this.modifyViewportColumnStart(e,t);return}}}}modifyViewportColumnEnd(e,t){const i=this.hot.columnIndexMapper,s=i.getVisualFromRenderableIndex(e.endColumn);for(let r=0;r<t;r+=1){const o=this.mergedCellsCollection.get(r,s);if(Je(o)){const a=o.col+o.colspan-1,l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(a,-1));if(l>e.endColumn){e.endColumn=l,this.modifyViewportColumnEnd(e,t);return}}}}translateMergedCellToRenderable(e,t,i,s){const{rowIndexMapper:r,columnIndexMapper:o}=this.hot;let a,l;t===0?a=r.getNearestNotHiddenIndex(e,1):a=r.getNearestNotHiddenIndex(e+t-1,-1),s===0?l=o.getNearestNotHiddenIndex(i,1):l=o.getNearestNotHiddenIndex(i+s-1,-1);const c=e>=0?r.getRenderableFromVisualIndex(a):e,h=i>=0?o.getRenderableFromVisualIndex(l):i;return[c,h]}}function cIe(){this.generateFromSettings(this.hot.getSettings()[Dp]),this.hot.render()}function hIe(n){if(n){const e=this.mergedCellsCollection.mergedCells,t=this.hot.getSelectedRangeLast(),i=t.getTopStartCorner(),s=t.getBottomEndCorner();for(let r=0;r<e.length;r+=1)if(i.row===e[r].row&&i.col===e[r].col&&s.row===e[r].row+e[r].rowspan-1&&s.col===e[r].col+e[r].colspan-1)return!1}return n}function uIe(n){Gt(vr,this).row=n.row,Gt(vr,this).col=n.col}function dIe(n){const e=this.hot.getSelectedRangeLast(),{highlight:t}=e,{columnIndexMapper:i,rowIndexMapper:s}=this.hot;Gt(wr,this)&&(s.getRenderableFromVisualIndex(Gt(wr,this).row)!==null&&(t.row=Gt(wr,this).row),i.getRenderableFromVisualIndex(Gt(wr,this).col)!==null&&(t.col=Gt(wr,this).col),bw(wr,this,null));const r=this.mergedCellsCollection.get(t.row,t.col);if(!r)return;const o=r.col,a=r.col+r.colspan-1;if(n.col<0){const h=t.col>=o&&t.col<=a?o-1:a,u=i.getNearestNotHiddenIndex(h,-1);u===null?n.col=-this.hot.view.countRenderableColumnsInRange(0,t.col):n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(u,t.col)-1,1)}else if(n.col>0){const h=t.col>=o&&t.col<=a?a+1:o,u=i.getNearestNotHiddenIndex(h,1);u===null?n.col=this.hot.view.countRenderableColumnsInRange(t.col,this.hot.countCols()):n.col=Math.max(this.hot.view.countRenderableColumnsInRange(t.col,u)-1,1)}const l=r.row,c=r.row+r.rowspan-1;if(n.row<0){const h=t.row>=l&&t.row<=c?l-1:c,u=s.getNearestNotHiddenIndex(h,-1);u===null?n.row=-this.hot.view.countRenderableRowsInRange(0,t.row):n.row=-Math.max(this.hot.view.countRenderableRowsInRange(u,t.row)-1,1)}else if(n.row>0){const h=t.row>=l&&t.row<=c?c+1:l,u=s.getNearestNotHiddenIndex(h,1);u===null?n.row=this.hot.view.countRenderableRowsInRange(t.row,this.hot.countRows()):n.row=Math.max(this.hot.view.countRenderableRowsInRange(t.row,u)-1,1)}}function fIe(n){const e=this.hot.getSelectedRangeLast(),t=e.clone(),{to:i}=e,{columnIndexMapper:s,rowIndexMapper:r}=this.hot,o=(a,l)=>{t.expand(this.hot._createCellCoords(a,l));for(let c=0;c<this.mergedCellsCollection.mergedCells.length;c+=1)t.expandByRange(this.mergedCellsCollection.mergedCells[c].getRange())};if(n.col<0){let a=this.mergedCellsCollection.getStartMostColumnIndex(e,i.col)+n.col;o(i.row,a),e.getHorizontalDirection()==="E-W"&&t.getHorizontalDirection()==="E-W"&&(a=t.getTopStartCorner().col);const l=s.getNearestNotHiddenIndex(a,1);l!==null&&(n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(l,i.col)-1,1))}else if(n.col>0){let a=this.mergedCellsCollection.getEndMostColumnIndex(e,i.col)+n.col;o(i.row,a),e.getHorizontalDirection()==="W-E"&&t.getHorizontalDirection()==="W-E"&&(a=t.getBottomEndCorner().col);const l=s.getNearestNotHiddenIndex(a,-1);l!==null&&(n.col=Math.max(this.hot.view.countRenderableColumnsInRange(i.col,l)-1,1))}if(n.row<0){let a=this.mergedCellsCollection.getTopMostRowIndex(e,i.row)+n.row;o(a,i.col),e.getVerticalDirection()==="S-N"&&t.getVerticalDirection()==="S-N"&&(a=t.getTopStartCorner().row);const l=r.getNearestNotHiddenIndex(a,1);l!==null&&(n.row=-Math.max(this.hot.view.countRenderableRowsInRange(l,i.row)-1,1))}else if(n.row>0){let a=this.mergedCellsCollection.getBottomMostRowIndex(e,i.row)+n.row;o(a,i.col),e.getVerticalDirection()==="N-S"&&t.getVerticalDirection()==="N-S"&&(a=t.getBottomStartCorner().row);const l=r.getNearestNotHiddenIndex(a,-1);l!==null&&(n.row=Math.max(this.hot.view.countRenderableRowsInRange(i.row,l)-1,1))}}function gIe(){const n=this.hot.getSelectedRangeLast(),{highlight:e}=n;if(this.hot.selection.isSelectedByColumnHeader()||this.hot.selection.isSelectedByRowHeader()){bw(wr,this,e.clone());return}for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);const t=this.mergedCellsCollection.get(e.row,e.col);bw(wr,this,e.clone()),t&&e.assign(t)}function mIe(n,e){if(n<0||e<0)return;const t=this.mergedCellsCollection.get(n,e);if(!t)return;const{row:i,col:s,colspan:r,rowspan:o}=t;return[i,s,i+o-1,s+r-1]}function pIe(n){n.items.push({name:"---------"},ZPe(this))}function tB(){bw(wr,this,null)}function wIe(){if(Gt(wr,this).isCell())return;const n=this.hot.getSelectedRangeLast(),e=n.getVerticalDirection(),t=n.getHorizontalDirection(),i=Gt(wr,this).clone().normalize();Gt(Zo,this).setActiveNode(i.row,i.col),Gt(vr,this).row>0||Gt(vr,this).col>0?Gt(Zo,this).setPrevNodeAsActive():(t==="E-W"&&Gt(vr,this).col<0||e==="S-N"&&Gt(vr,this).row<0)&&Gt(Zo,this).setNextNodeAsActive()}function vIe(n,e){const t=this.hot.getSelectedRangeLast(),{columnIndexMapper:i,rowIndexMapper:s}=this.hot;let r=null,o=null;if(Gt(vr,this).col<0){const{rowEnd:a,colEnd:l}=Gt(Zo,this).getPrevHorizontalNode();o=i.getNearestNotHiddenIndex(l,-1),r=s.getNearestNotHiddenIndex(a,-1)}else if(Gt(vr,this).col>0){const{rowStart:a,colStart:l}=Gt(Zo,this).getNextHorizontalNode();o=i.getNearestNotHiddenIndex(l,1),r=s.getNearestNotHiddenIndex(a,1)}else if(Gt(vr,this).row<0){const{rowEnd:a,colEnd:l}=Gt(Zo,this).getPrevVerticalNode();o=i.getNearestNotHiddenIndex(l,-1),r=s.getNearestNotHiddenIndex(a,-1)}else if(Gt(vr,this).row>0){const{rowStart:a,colStart:l}=Gt(Zo,this).getNextVerticalNode();o=i.getNearestNotHiddenIndex(l,1),r=s.getNearestNotHiddenIndex(a,1)}if(r!==null||o!==null){const a=this.hot._createCellCoords(r,o),l=this.mergedCellsCollection.get(a.row,a.col),c=this.hot.selection.highlight.getFocus();n=a.row,e=a.col,l?t.highlight.assign({row:this.hot.rowIndexMapper.getNearestNotHiddenIndex(l.row,1),col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(l.col,1)}):t.highlight.assign(a),c.clear(),c.add(a).commit()}Gt(Zo,this).setActiveNode(n,e),bw(vr,this,{row:0,col:0})}function bIe(){this.hot.getSelectedRangeLast().isHeader()||Gt(Zo,this).buildFocusOrder(this.hot.getSelectedRangeLast())}function yIe(n,e,t){const i=this.mergedCellsCollection.get(n,e);i&&(i.row!==n||i.col!==e?t.copyable=!1:(t.rowspan=i.rowspan,t.colspan=i.colspan))}function CIe(n){const e=this.hot.countCols();this.modifyViewportRowStart(n,e),this.modifyViewportRowEnd(n,e)}function SIe(n){const e=this.hot.countRows();this.modifyViewportColumnStart(n,e),this.modifyViewportColumnEnd(n,e)}function _Ie(n,e){this.autofillCalculations.correctSelectionAreaSize(e);const t=this.autofillCalculations.getDirection(e,n);let i=n;if(this.autofillCalculations.dragAreaOverlapsCollections(e,i,t))return i=e,i;const s=this.hot._createCellCoords(e[0],e[1]),r=this.hot._createCellCoords(e[2],e[3]),o=this.hot._createCellRange(s,s,r),a=this.mergedCellsCollection.getWithinRange(o);return a.length===0||(i=this.autofillCalculations.snapDragArea(e,i,t,a)),i}function RIe(n,e){this.mergedCellsCollection.shiftCollections("right",n,e)}function xIe(n,e){this.mergedCellsCollection.shiftCollections("left",n,e)}function EIe(n,e,t){t!=="auto"&&this.mergedCellsCollection.shiftCollections("down",n,e)}function TIe(n,e){this.mergedCellsCollection.shiftCollections("up",n,e)}function MIe(n,e){e==="Autofill.fill"&&this.autofillCalculations.recreateAfterDataPopulation(n)}function AIe(n,e){if(e&&e==="area"){const t=this.hot.getSelectedRangeLast(),i=this.mergedCellsCollection.getWithinRange(t);L(i,s=>{t.getBottomEndCorner().row===s.getLastRow()&&t.getBottomEndCorner().col===s.getLastColumn()&&(n[2]=s.row,n[3]=s.col)})}}function PIe(n,e,t,i){if(t)return this.selectionCalculations.getSelectedMergedCellClassName(n,e,t,i)}function IIe(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}function OIe(n,e,t,i){if(!(i instanceof MouseEvent))return;const s=this.hot.getSelectedRangeLast(),r=this.mergedCellsCollection.getByRange(s);if(!r)return;const o=this.hot._createCellCoords(r.row,r.col),a=this.hot._createCellCoords(r.row+r.rowspan-1,r.col+r.colspan-1);return this.hot.selection.getLayerLevel()===0&&s.isEqual(this.hot._createCellRange(o,o,a))}function kIe(n,e,t){if(this.hot.getSettings().rowHeaders||t==="bottom"||t==="bottom_inline_start_corner")return n;let i,s;if(t==="master")i=this.hot.view.getFirstRenderedVisibleColumn(),s=this.hot.view.getLastRenderedVisibleColumn();else{const d=this.hot.view.getOverlayByName(t);i=this.hot.columnIndexMapper.getVisualFromRenderableIndex(d.clone.wtTable.getFirstRenderedColumn()),s=this.hot.columnIndexMapper.getVisualFromRenderableIndex(d.clone.wtTable.getLastRenderedColumn())}if(!this.mergedCellsCollection.get(e,i))return n;const o=this.hot._createCellCoords(e,i),a=this.hot._createCellCoords(e,s),l=this.hot._createCellRange(o,o,a),c=this.mergedCellsCollection.getWithinRange(l),h=c.reduce((d,f)=>{let{rowspan:g}=f;return Math.max(d,g)},1);let u=0;return c.length>1&&c[0].rowspan<h&&(u=h-c[0].rowspan),c.forEach(d=>{var f;let{rowspan:g}=d,m=0;t==="top"||t==="top_inline_start_corner"?m=Math.min(h,this.hot.view.countNotHiddenFixedRowsTop()-e):m=g-u,n=Math.max((f=n)!==null&&f!==void 0?f:0,Ot($t,this,HIe).call(this,e,m))}),n}function HIe(n,e){const t=this.hot.view._wt.wtSettings.getSettingPure("defaultRowHeight"),i=this.hot.getPlugin("autoRowSize");let s=0;for(let o=n;o<n+e;o++)if(!this.hot.rowIndexMapper.isHidden(o)){var r;s+=(r=i==null?void 0:i.getRowHeight(o))!==null&&r!==void 0?r:t}return s}function DIe(n,e){return function(t,i){const[,...s]=t,[,...r]=i;return function o(a){const l=n[a],c=e[a],h=s[a],u=r[a],d=c.multiColumnSorting,g=(d.compareFunctionFactory?d.compareFunctionFactory:VG(c.type))(l,c,d)(h,u);if(g===ra){const m=a+1;if(typeof e[m]<"u")return o(m)}return g}(0)}}function nB(){Dt(Nt`Plugins \`columnSorting\` and \`multiColumnSorting\` should not be enabled simultaneously. 
    Only \`multiColumnSorting\` will work. The \`columnSorting\` plugin will be disabled.`)}const uK="sort";function NIe(n,e,t){const i=[];return t===!1||n.isColumnSorted(e)&&n.getNumberOfSortedColumns()>1&&i.push(`${uK}-${n.getIndexOfColumnInSortQueue(e)+1}`),i}function LIe(n){const e=n.className.split(" "),t=new RegExp(`^${uK}-[0-9]{1,2}$`);return e.filter(i=>t.test(i))}function $Ie(n,e,t){return(e=FIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FIe(n){var e=BIe(n,"string");return typeof e=="symbol"?e:e+""}function BIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const OS="multiColumnSorting",VIe=170,PE="columnSorting",iB=OS;BG(OS,DIe);class WIe extends XG{constructor(){super(...arguments),$Ie(this,"pluginKey",OS)}static get PLUGIN_KEY(){return OS}static get PLUGIN_PRIORITY(){return VIe}isEnabled(){return super.isEnabled()}enablePlugin(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[PE]&&(nB(),this.hot.getPlugin(PE).disablePlugin()),super.enablePlugin()}disablePlugin(){super.disablePlugin()}registerShortcuts(){super.registerShortcuts(),this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Shift","Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();return e.row===-1&&e.col>=0&&this.sort(this.getNextSortConfig(e.col,gS)),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.isHeader()},relativeToGroup:th,position:"before",group:iB})}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(iB)}sort(e){super.sort(e)}clearSort(){super.clearSort()}isSorted(){return super.isSorted()}getSortConfig(e){return super.getSortConfig(e)}setSortConfig(e){super.setSortConfig(e)}getNormalizedSortConfigs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)?e:[e]}updateHeaderClasses(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];super.updateHeaderClasses(e,...i),ze(e,LIe(e)),this.enabled!==!1&&ae(e,NIe(...i))}onUpdateSettings(e){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[PE]&&nB(),super.onUpdateSettings(e)}onAfterOnCellMouseDown(e,t){$O(t.row,t.col,e)!==!1&&this.wasClickableHeaderClicked(e,t.col)&&(this.hot.getShortcutManager().isCtrlPressed()?(this.hot.deselectCell(),this.hot.selectColumns(t.col),this.sort(this.getNextSortConfig(t.col,gS))):this.sort(this.getColumnNextConfig(t.col)))}}function sB(n,e,t){return(e=jIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jIe(n){var e=zIe(n,"string");return typeof e=="symbol"?e:e+""}function zIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const UIe="multipleSelectionHandles",YIe=160;class GIe extends xt{constructor(){super(...arguments),sB(this,"dragged",[]),sB(this,"lastSetCell",null)}static get PLUGIN_KEY(){return UIe}static get PLUGIN_PRIORITY(){return YIe}isEnabled(){return hl()}enablePlugin(){this.enabled||(this.registerListeners(),super.enablePlugin())}registerListeners(){const e=this,{rootElement:t}=this.hot;function i(s){if(e.dragged.length===1)return e.dragged.splice(0,e.dragged.length),!0;const r=e.dragged.indexOf(s);if(r===-1)return!1;r===0?e.dragged=e.dragged.slice(0,1):r===1&&(e.dragged=e.dragged.slice(-1))}this.eventManager.addEventListener(t,"touchstart",s=>{let r;if(Fe(s.target,"topSelectionHandle-HitArea"))return r=e.hot.getSelectedRangeLast(),e.dragged.push("top"),e.touchStartRange={width:r.getWidth(),height:r.getHeight(),direction:r.getDirection()},s.preventDefault(),!1;if(Fe(s.target,"bottomSelectionHandle-HitArea"))return r=e.hot.getSelectedRangeLast(),e.dragged.push("bottom"),e.touchStartRange={width:r.getWidth(),height:r.getHeight(),direction:r.getDirection()},s.preventDefault(),!1}),this.eventManager.addEventListener(t,"touchend",s=>{if(Fe(s.target,"topSelectionHandle-HitArea"))return i.call(e,"top"),e.touchStartRange=void 0,s.preventDefault(),!1;if(Fe(s.target,"bottomSelectionHandle-HitArea"))return i.call(e,"bottom"),e.touchStartRange=void 0,s.preventDefault(),!1}),this.eventManager.addEventListener(t,"touchmove",s=>{const{rootDocument:r}=this.hot;let o,a,l,c,h,u;if(e.dragged.length===0)return;const d=r.elementFromPoint(s.touches[0].clientX,s.touches[0].clientY);!d||d===e.lastSetCell||((d.nodeName==="TD"||d.nodeName==="TH")&&(o=e.hot.getCoords(d),o.col===-1&&(o.col=0),a=e.hot.getSelectedRangeLast(),l=a.getWidth(),c=a.getHeight(),h=a.getDirection(),l===1&&c===1&&e.hot.selection.setRangeEnd(o),u=e.getCurrentRangeCoords(a,o,e.touchStartRange.direction,h,e.dragged[0]),u.start!==null&&e.hot.selection.setRangeStart(u.start),e.hot.selection.setRangeEnd(u.end),e.lastSetCell=d),s.preventDefault())})}getCurrentRangeCoords(e,t,i,s,r){const o=e.getTopStartCorner(),a=e.getBottomEndCorner(),l=e.getBottomStartCorner(),c=e.getTopEndCorner();let h={start:null,end:null};switch(i){case"NE-SW":switch(s){case"NE-SW":case"NW-SE":r==="top"?h={start:this.hot._createCellCoords(t.row,e.highlight.col),end:this.hot._createCellCoords(l.row,t.col)}:h={start:this.hot._createCellCoords(e.highlight.row,t.col),end:this.hot._createCellCoords(t.row,o.col)};break;case"SE-NW":r==="bottom"&&(h={start:this.hot._createCellCoords(a.row,t.col),end:this.hot._createCellCoords(t.row,o.col)});break}break;case"NW-SE":switch(s){case"NE-SW":r==="top"?h={start:t,end:l}:h.end=t;break;case"NW-SE":r==="top"?h={start:t,end:a}:h.end=t;break;case"SE-NW":r==="top"?h={start:t,end:o}:h.end=t;break;case"SW-NE":r==="top"?h={start:t,end:c}:h.end=t;break}break;case"SW-NE":switch(s){case"NW-SE":r==="bottom"?h={start:this.hot._createCellCoords(t.row,o.col),end:this.hot._createCellCoords(l.row,t.col)}:h={start:this.hot._createCellCoords(o.row,t.col),end:this.hot._createCellCoords(t.row,a.col)};break;case"SW-NE":r==="top"?h={start:this.hot._createCellCoords(e.highlight.row,t.col),end:this.hot._createCellCoords(t.row,a.col)}:h={start:this.hot._createCellCoords(t.row,o.col),end:this.hot._createCellCoords(o.row,t.col)};break;case"SE-NW":r==="bottom"?h={start:this.hot._createCellCoords(t.row,c.col),end:this.hot._createCellCoords(o.row,t.col)}:r==="top"&&(h={start:l,end:t});break}break;case"SE-NW":switch(s){case"NW-SE":case"NE-SW":case"SW-NE":r==="top"&&(h.end=t);break;case"SE-NW":r==="top"?h.end=t:h={start:t,end:o};break}break}return h}isDragged(){return this.dragged.length>0}}function n1(){let{label:n="",colspan:e=1,origColspan:t=1,collapsible:i=!1,crossHiddenColumns:s=[],isCollapsed:r=!1,isHidden:o=!1,isRoot:a=!1,isPlaceholder:l=!1,headerClassNames:c=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{label:n,colspan:e,origColspan:t,collapsible:i,isCollapsed:r,crossHiddenColumns:s,isHidden:o,isRoot:a,isPlaceholder:l,headerClassNames:c}}function dK(){return{label:"",isPlaceholder:!0}}function KIe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0;const t=[];if(e===0)return t;L(n,s=>{const r=[];let o=0;t.push(r),L(s,a=>{const l=n1();if(Je(a)){const{label:h,colspan:u,headerClassName:d}=a;l.label=Tn(h),typeof u=="number"&&u>1&&(l.colspan=u,l.origColspan=u),typeof d=="string"&&(l.headerClassNames=[...d.split(" ")])}else l.label=Tn(a);o+=l.origColspan;let c=!1;if(o>=e&&(l.colspan=l.origColspan-(o-e),l.origColspan=l.colspan,c=!0),r.push(l),l.colspan>1)for(let h=0;h<l.colspan-1;h++)r.push(dK());return!c})});const i=Math.max(...lt(t,s=>s.length));return L(t,s=>{if(s.length<i){const r=lt(new Array(i-s.length),()=>n1());s.splice(s.length,0,...r)}}),t}function IE(n,e,t){qIe(n,e),e.set(n,t)}function qIe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jr(n,e){return n.get(fK(n,e))}function Am(n,e,t){return n.set(fK(n,e),t),t}function fK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const rB=["label","collapsible"];var Va=new WeakMap,Uh=new WeakMap,OE=new WeakMap;class XIe{constructor(){IE(this,Va,[]),IE(this,Uh,0),IE(this,OE,1/0)}setColumnsLimit(e){Am(OE,this,e)}setData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Am(Va,this,KIe(e,jr(OE,this))),Am(Uh,this,jr(Va,this).length)}getData(){return jr(Va,this)}mergeWith(e){L(e,t=>{let{row:i,col:s,...r}=t;const o=this.getHeaderSettings(i,s);o!==null&&zn(o,r,rB)})}map(e){L(jr(Va,this),t=>{L(t,i=>{const s=e({...i});Je(s)&&zn(i,s,rB)})})}getHeaderSettings(e,t){var i;if(e>=jr(Uh,this)||e<0)return null;const s=jr(Va,this)[e];return Array.isArray(s)===!1||t>=s.length?null:(i=s[t])!==null&&i!==void 0?i:null}getHeadersSettings(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const s=[];if(e>=jr(Uh,this)||e<0)return s;const r=jr(Va,this)[e];let o=0;for(let a=t;a<r.length;a++){const l=r[a];if(l.isPlaceholder)throw new Error("The first column settings cannot overlap the other header layers");if(o+=l.colspan,s.push(l),l.colspan>1&&(a+=l.colspan-1),o===i)break;if(o>i)throw new Error("The last column settings cannot overlap the other header layers")}return s}getLayersCount(){return jr(Uh,this)}getColumnsCount(){return jr(Uh,this)>0?jr(Va,this)[0].length:0}clear(){Am(Va,this,[]),Am(Uh,this,0)}}function kE(n,e,t){return(e=QIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QIe(n){var e=ZIe(n,"string");return typeof e=="symbol"?e:e+""}function ZIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const gK="DF-pre-order";function mK(n,e){let t=n.call(e,this);for(let i=0;i<this.childs.length;i++){if(t===!1)return!1;t=mK.call(this.childs[i],n,e)}return t}const JIe="DF-post-order";function pK(n,e){for(let t=0;t<this.childs.length;t++)if(pK.call(this.childs[t],n,e)===!1)return!1;return n.call(e,this)}const wK="BF";function eOe(n,e){const t=[this];function i(){if(t.length===0)return;const s=t.shift();t.push(...s.childs),n.call(e,s)!==!1&&i()}i()}const tOe=wK,oB=new Map([[gK,mK],[JIe,pK],[wK,eOe]]);class kS{constructor(e){kE(this,"data",{}),kE(this,"parent",null),kE(this,"childs",[]),this.data=e}addChild(e){e.parent=this,this.childs.push(e)}cloneTree(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this;const t=new kS({...e.data});for(let i=0;i<e.childs.length;i++)t.addChild(this.cloneTree(e.childs[i]));return t}replaceTreeWith(e){this.data={...e.data},this.childs=[];for(let t=0;t<e.childs.length;t++)this.addChild(e.childs[t])}walkDown(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tOe;if(!oB.has(t))throw new Error(`Traversal strategy "${t}" does not exist`);oB.get(t).call(this,e,this)}walkUp(e){const t=this,i=s=>{e.call(t,s)!==!1&&s.parent!==null&&i(s.parent)};i(this)}}function HE(n,e,t){nOe(n,e),e.set(n,t)}function nOe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qi(n,e){return n.get(vK(n,e))}function iOe(n,e,t){return n.set(vK(n,e),t),t}function vK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Qd=new WeakMap,Yh=new WeakMap,Zd=new WeakMap;class sOe{constructor(e){HE(this,Qd,new Map),HE(this,Yh,new Map),HE(this,Zd,null),iOe(Zd,this,e)}getRoots(){return Array.from(qi(Qd,this).values())}getRootByColumn(e){let t;return qi(Yh,this).has(e)&&(t=qi(Qd,this).get(qi(Yh,this).get(e))),t}getNode(e,t){const i=this.getRootByColumn(t);if(!i)return;const s=t-qi(Yh,this).get(t);let r=0,o;return i.walkDown(a=>{const{data:{origColspan:l,headerLevel:c}}=a;if(e===c){if(s>=r&&s<=r+l-1)return o=a,o.data.isRoot=t===o.data.columnIndex,!1;r+=l}}),o}rebuildTreeIndex(){let e=0;qi(Yh,this).clear(),L(qi(Qd,this),t=>{let[,{data:{colspan:i}}]=t;for(let s=e;s<e+i;s++)qi(Yh,this).set(s,e);e+=i})}buildTree(){this.clear();const e=qi(Zd,this).getColumnsCount();let t=0;for(;t<e;){const i=qi(Zd,this).getHeaderSettings(0,t),s=new kS;qi(Qd,this).set(t,s),this.buildLeaves(s,t,0,i.origColspan),t+=i.origColspan}this.rebuildTreeIndex()}buildLeaves(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;const r=qi(Zd,this).getHeadersSettings(i,t,s);i+=1,L(r,o=>{const a={...o,headerLevel:i-1,columnIndex:t};let l;i===1?(e.data=a,l=e):(l=new kS(a),e.addChild(l)),i<qi(Zd,this).getLayersCount()&&this.buildLeaves(l,t,i,o.origColspan),t+=o.origColspan})}clear(){qi(Qd,this).clear(),qi(Yh,this).clear()}}function bK(n,e){n.walkDown(t=>{let{data:i,childs:s}=t;if(!i.isHidden&&(e(i.columnIndex),s.length===0))for(let r=1;r<i.colspan;r++)e(i.columnIndex+r)})}function HS(n,e){let{childs:t}=n;if(t.length!==0)return t[0].data[e]}function DS(n){return HS(n,"origColspan")===n.data.origColspan}function JO(n){const{data:e,childs:t}=n;if(!e.isCollapsed||e.isHidden||e.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(DS(n))return JO(t[0]);e.isCollapsed=!1;const s=t.slice(1),r=new Set;let o=0;if(s.length>0)L(s,a=>{a.replaceTreeWith(a.data.clonedTree),a.data.clonedTree=null;const l=a.data;o+=l.colspan,bK(a,c=>{r.add(c)})});else{const{colspan:a,origColspan:l,columnIndex:c}=e;o=l-a;for(let h=1;h<l;h++)r.add(c+h)}return n.walkUp(a=>{const{data:l}=a;l.colspan+=o,l.colspan>=l.origColspan?(l.colspan=l.origColspan,l.isCollapsed=!1):DS(a)&&(l.isCollapsed=HS(a,"isCollapsed"))}),{rollbackModification:()=>ek(n),affectedColumns:Array.from(r),colspanCompensation:o}}function ek(n){var e;const{data:t,childs:i}=n;if(t.isCollapsed||t.isHidden||t.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(DS(n))return ek(i[0]);t.isCollapsed=!0;const r=i.slice(1),o=new Set;if(r.length>0)L(r,l=>{bK(l,c=>{o.add(c)}),l.data.clonedTree=l.cloneTree(),l.walkDown(c=>{let{data:h}=c;h.isHidden=!0})});else{const{origColspan:l,columnIndex:c}=t;for(let h=1;h<l;h++){const u=c+h;o.add(u)}}const a=t.colspan-((e=HS(n,"colspan"))!==null&&e!==void 0?e:1);return n.walkUp(l=>{const{data:c}=l;c.colspan-=a,c.colspan<=1?(c.colspan=1,c.isCollapsed=!0):DS(l)&&(c.isCollapsed=HS(l,"isCollapsed"))}),{rollbackModification:()=>JO(n),affectedColumns:Array.from(o),colspanCompensation:a}}function rOe(n,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(n.childs.length>0)throw new Error(Nt`The passed node is not the last node on the tree. Only for\x20
the last node, the hide column modification can be applied.`);const{crossHiddenColumns:t}=n.data;if(t.includes(e))return;let i=!1;n.walkUp(s=>{const{data:{collapsible:r}}=s;if(r)return i=!0,!1}),!i&&n.walkUp(s=>{const{data:r}=s;r.crossHiddenColumns.push(e),r.colspan>1?r.colspan-=1:r.isHidden=!0})}function oOe(n,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(n.childs.length>0)throw new Error(Nt`The passed node is not the last node on the tree. Only for\x20
the last node, the show column modification can be applied.`);const{crossHiddenColumns:t}=n.data;if(!t.includes(e))return;let i=!1;n.walkUp(s=>{const{data:{collapsible:r}}=s;if(r)return i=!0,!1}),!i&&n.walkUp(s=>{const{data:r}=s;r.crossHiddenColumns.splice(r.crossHiddenColumns.indexOf(e),1),!r.isHidden&&r.colspan<r.origColspan&&(r.colspan+=1),r.isHidden=!1})}const aB=new Map([["collapse",ek],["expand",JO],["hide-column",rOe],["show-column",oOe]]);function aOe(n,e,t){if(!aB.has(n))throw new Error(`The node modifier action ("${n}") does not exist.`);return aB.get(n)(e,t)}function by(n){const e=[];return L(n,t=>{t.walkDown(i=>{const s=i.data,{origColspan:r,columnIndex:o,headerLevel:a,crossHiddenColumns:l}=s,c=cOe(e,a);let h=!1;for(let u=o;u<o+r;u++)if(l.includes(u)||h)c.push(dK());else{const f=lOe(s);f.isRoot=!0,c.push(f),h=!0}})}),e}function lOe(n){const{crossHiddenColumns:e,...t}=n1(n);return t}function cOe(n,e){let t;return Array.isArray(n[e])?t=n[e]:(t=[],n[e]=t),t}function DE(n,e,t){hOe(n,e),e.set(n,t)}function hOe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pm(n,e,t){return n.set(yK(n,e),t),t}function Sn(n,e){return n.get(yK(n,e))}function yK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var No=new WeakMap,gs=new WeakMap,Gh=new WeakMap;class uOe{constructor(){DE(this,No,new XIe),DE(this,gs,new sOe(Sn(No,this))),DE(this,Gh,[[]])}setState(e){Sn(No,this).setData(e);let t=!1;try{Sn(gs,this).buildTree()}catch{Sn(gs,this).clear(),Sn(No,this).clear(),t=!0}return Pm(Gh,this,by(Sn(gs,this).getRoots())),t}setColumnsLimit(e){Sn(No,this).setColumnsLimit(e)}mergeStateWith(e){const t=lt(e,i=>{let{row:s,...r}=i;return{row:s<0?this.rowCoordsToLevel(s):s,...r}});Sn(No,this).mergeWith(t),Sn(gs,this).buildTree(),Pm(Gh,this,by(Sn(gs,this).getRoots()))}mapState(e){Sn(No,this).map(e),Sn(gs,this).buildTree(),Pm(Gh,this,by(Sn(gs,this).getRoots()))}mapNodes(e){return Un(Sn(gs,this).getRoots(),(t,i)=>(i.walkDown(s=>{const r=e(s.data);r!==void 0&&t.push(r)}),t),[])}triggerNodeModification(e,t,i){t<0&&(t=this.rowCoordsToLevel(t));const s=Sn(gs,this).getNode(t,i);let r;return s&&(r=aOe(e,s,i),Pm(Gh,this,by(Sn(gs,this).getRoots()))),r}triggerColumnModification(e,t){return this.triggerNodeModification(e,-1,t)}rowCoordsToLevel(e){if(e>=0)return null;const t=e+Math.max(this.getLayersCount(),1);return t<0?null:t}levelToRowCoords(e){if(e<0)return null;const t=e-Math.max(this.getLayersCount(),1);return t>=0?null:t}getHeaderSettings(e,t){var i,s;return e<0&&(e=this.rowCoordsToLevel(e)),e===null||e>=this.getLayersCount()?null:(i=(s=Sn(Gh,this)[e])===null||s===void 0?void 0:s[t])!==null&&i!==void 0?i:null}getHeaderTreeNodeData(e,t){const i=this.getHeaderTreeNode(e,t);return i?{...i.data}:null}getHeaderTreeNode(e,t){if(e<0&&(e=this.rowCoordsToLevel(e)),e===null||e>=this.getLayersCount())return null;const i=Sn(gs,this).getNode(e,t);return i||null}findTopMostEntireHeaderLevel(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;const s=i-e+1;let r=!1,o=null;for(let a=e;a<=i;a++){const l=Sn(gs,this).getRootByColumn(a);if(!l)break;r=!0,l.walkDown(c=>{const{columnIndex:h,headerLevel:u,origColspan:d,isHidden:f}=c.data;f||d<=s&&h>=e&&h+d-1<=i&&(o===null||u<o)&&(o=u)},gK)}return r&&o===null?-1:this.levelToRowCoords((t=o)!==null&&t!==void 0?t:0)}findLeftMostColumnIndex(e,t){var i;const{isRoot:s}=(i=this.getHeaderSettings(e,t))!==null&&i!==void 0?i:{isRoot:!0};if(s)return t;let r=t-1;for(;r>=0;){var o;const{isRoot:a}=(o=this.getHeaderSettings(e,r))!==null&&o!==void 0?o:{isRoot:!0};if(a)break;r-=1}return r}findRightMostColumnIndex(e,t){var i;const{isRoot:s,origColspan:r}=(i=this.getHeaderSettings(e,t))!==null&&i!==void 0?i:{isRoot:!0,origColspan:1};if(s)return t+r-1;let o=t+1;for(;o<this.getColumnsCount();){var a;const{isRoot:l}=(a=this.getHeaderSettings(e,o))!==null&&a!==void 0?a:{isRoot:!0};if(l)break;o+=1}return o-1}getLayersCount(){return Sn(No,this).getLayersCount()}getColumnsCount(){return Sn(No,this).getColumnsCount()}clear(){Pm(Gh,this,[]),Sn(No,this).clear(),Sn(gs,this).clear()}}function Im(n,e,t){return(e=dOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dOe(n){var e=fOe(n,"string");return typeof e=="symbol"?e:e+""}function fOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class gOe{constructor(e,t){Im(this,"hot",void 0),Im(this,"nestedHeaderSettingsGetter",void 0),Im(this,"layersCount",0),Im(this,"container",void 0),Im(this,"widthsMap",void 0),this.hot=e,this.nestedHeaderSettingsGetter=t,this.widthsMap=this.hot.columnIndexMapper.createAndRegisterIndexMap("nestedHeaders.widthsMap","physicalIndexToValue")}setLayersCount(e){return this.layersCount=e,this}getWidth(e){return this.widthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e))}buildWidthsMap(){this.container=this.hot.rootDocument.createElement("div"),this.container.classList.add("handsontable","htGhostTable","htAutoSize"),this._buildGhostTable(this.container),this.hot.rootDocument.body.appendChild(this.container);const e=this.container.querySelectorAll("tr:last-of-type th"),t=e.length;this.widthsMap.clear();for(let i=0;i<t;i++){const s=this.hot.columnIndexMapper.getVisualFromRenderableIndex(i),r=this.hot.toPhysicalColumn(s);this.widthsMap.setValueAtIndex(r,e[i].offsetWidth)}this.container.parentNode.removeChild(this.container),this.container=null}_buildGhostTable(e){const{rootDocument:t,columnIndexMapper:i}=this.hot,s=t.createDocumentFragment(),r=t.createElement("table"),o=!!this.hot.getSettings().dropdownMenu,a=i.getRenderableIndexesLength();for(let l=0;l<this.layersCount;l++){const c=t.createElement("tr");for(let h=0;h<a;h++){let u=i.getVisualFromRenderableIndex(h);u===null&&(u=h);const d=t.createElement("th"),f=this.nestedHeaderSettingsGetter(l,u);if(f&&(!f.isPlaceholder||f.isHidden)){let g=f.label;o&&(g+='<button class="changeType"></button>'),od(d,g),d.colSpan=f.colspan,c.appendChild(d)}}r.appendChild(c)}s.appendChild(r),e.appendChild(s)}clear(){this.widthsMap.clear(),this.container=null}}function mOe(n,e){CK(n,e),e.add(n)}function lB(n,e,t){return(e=pOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pOe(n){var e=wOe(n,"string");return typeof e=="symbol"?e:e+""}function wOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yy(n,e,t){CK(n,e),e.set(n,t)}function CK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wu(n,e,t){return n.set(_n(n,e),t),t}function wt(n,e){return n.get(_n(n,e))}function _n(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const cB="nestedHeaders",vOe=280;var Bt=new WeakMap,Ql=new WeakMap,Np=new WeakMap,S_=new WeakMap,In=new WeakSet;class bOe extends xt{constructor(){super(...arguments),mOe(this,In),yy(this,Bt,new uOe),yy(this,Ql,null),yy(this,Np,null),yy(this,S_,!1),lB(this,"ghostTable",new gOe(this.hot,(e,t)=>this.getHeaderSettings(e,t))),lB(this,"detectedOverlappedHeaders",!1)}static get PLUGIN_KEY(){return cB}static get PLUGIN_PRIORITY(){return vOe}isEnabled(){return!!this.hot.getSettings()[cB]}enablePlugin(){var e=this;if(this.enabled)return;const{nestedHeaders:t}=this.hot.getSettings();(!Array.isArray(t)||!Array.isArray(t[0]))&&Dt(Nt`Your Nested Headers plugin configuration is invalid. The settings has to be\x20
                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]`),this.addHook("init",()=>_n(In,this,DOe).call(this)),this.addHook("afterLoadData",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,NOe).call(e,...s)}),this.addHook("beforeOnCellMouseDown",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,_Oe).call(e,...s)}),this.addHook("afterOnCellMouseDown",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,ROe).call(e,...s)}),this.addHook("beforeOnCellMouseOver",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,xOe).call(e,...s)}),this.addHook("beforeOnCellMouseUp",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,EOe).call(e,...s)}),this.addHook("beforeSelectionHighlightSet",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,TOe).call(e,...s)}),this.addHook("modifyTransformStart",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,MOe).call(e,...s)}),this.addHook("afterSelection",()=>_n(In,this,Cy).call(this)),this.addHook("afterSelectionFocusSet",()=>_n(In,this,Cy).call(this)),this.addHook("beforeViewportScrollHorizontally",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,yOe).call(e,...s)}),this.addHook("afterGetColumnHeaderRenderers",i=>_n(In,this,POe).call(this,i)),this.addHook("modifyColWidth",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,OOe).call(e,...s)}),this.addHook("modifyColumnHeaderValue",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,kOe).call(e,...s)}),this.addHook("beforeHighlightingColumnHeader",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,COe).call(e,...s)}),this.addHook("beforeCopy",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,SOe).call(e,...s)}),this.addHook("beforeSelectColumns",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,AOe).call(e,...s)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,IOe).call(e,...s)}),this.addHook("modifyFocusedElement",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return _n(In,e,HOe).call(e,...s)}),this.hot.columnIndexMapper.addLocalHook("cacheUpdated",()=>_n(In,this,Cy).call(this)),this.hot.rowIndexMapper.addLocalHook("cacheUpdated",()=>_n(In,this,Cy).call(this)),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(!this.hot.view)return;const{nestedHeaders:e}=this.hot.getSettings();wt(Bt,this).setColumnsLimit(this.hot.countCols()),Array.isArray(e)&&(this.detectedOverlappedHeaders=wt(Bt,this).setState(e)),this.detectedOverlappedHeaders&&Dt(Nt`Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\x20
                        is currently not supported.`),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach((t,i)=>{const s=t===!0?"hide-column":"show-column";wt(Bt,this).triggerColumnModification(s,i)}),!wt(Ql,this)&&this.enabled&&wu(Ql,this,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe(t=>{t.forEach(i=>{let{op:s,index:r,newValue:o}=i;if(s==="replace"){const a=o===!0?"hide-column":"show-column";wt(Bt,this).triggerColumnModification(a,r)}}),this.ghostTable.buildWidthsMap()})),this.ghostTable.setLayersCount(this.getLayersCount()).buildWidthsMap(),super.updatePlugin()}disablePlugin(){this.clearColspans(),wt(Bt,this).clear(),wt(Ql,this).unsubscribe(),wu(Ql,this,null),this.ghostTable.clear(),super.disablePlugin()}getStateManager(){return wt(Bt,this)}getLayersCount(){return wt(Bt,this).getLayersCount()}getHeaderSettings(e,t){return wt(Bt,this).getHeaderSettings(e,t)}clearColspans(){if(!this.hot.view)return;const{_wt:e}=this.hot.view,t=e.getSetting("columnHeaders").length,i=e.wtTable.THEAD,s=e.wtOverlays.topOverlay.clone.wtTable.THEAD,r=e.wtOverlays.topInlineStartCornerOverlay?e.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null;for(let o=0;o<t;o++){const a=i.childNodes[o];if(!a)break;const l=s.childNodes[o],c=r?r.childNodes[o]:null;for(let h=0,u=a.childNodes.length;h<u;h++)a.childNodes[h].removeAttribute("colspan"),ze(a.childNodes[h],"hiddenHeader"),l&&l.childNodes[h]&&(l.childNodes[h].removeAttribute("colspan"),ze(l.childNodes[h],"hiddenHeader")),r&&c&&c.childNodes[h]&&(c.childNodes[h].removeAttribute("colspan"),ze(c.childNodes[h],"hiddenHeader"))}}headerRendererFactory(e){var t=this;const i=this.hot.view._wt.getSetting("fixedColumnsStart");return(s,r)=>{var o;const{columnIndexMapper:a,view:l}=this.hot;let c=a.getVisualFromRenderableIndex(s);c===null&&(c=s),r.removeAttribute("colspan"),ze(r,"hiddenHeader");const{colspan:h,isHidden:u,isPlaceholder:d,headerClassNames:f}=(o=wt(Bt,this).getHeaderSettings(e,c))!==null&&o!==void 0?o:{label:""};if(d||u)ae(r,"hiddenHeader");else if(h>1){var g,m;const{wtOverlays:w}=l._wt,v=(g=w.topInlineStartCornerOverlay)===null||g===void 0?void 0:g.clone.wtTable.THEAD.contains(r),C=(m=w.inlineStartOverlay)===null||m===void 0?void 0:m.clone.wtTable.THEAD.contains(r),S=v||C?Math.min(h,i-s):h;S>1&&r.setAttribute("colspan",S)}if(this.hot.view.appendColHeader(c,r,function(){return t.getColumnHeaderValue(...arguments)},e),!d&&!u){const w=r.querySelector("div.relative");w&&f&&f.length>0&&(ze(w,this.hot.getColumnMeta(c).headerClassName),ae(w,f))}}}getColumnHeaderValue(e,t){var i;const{isHidden:s,isPlaceholder:r}=(i=wt(Bt,this).getHeaderSettings(t,e))!==null&&i!==void 0?i:{};return r||s?"":this.hot.getColHeader(e,t)}destroy(){wu(Bt,this,null),wt(Ql,this)!==null&&(wt(Ql,this).unsubscribe(),wu(Ql,this,null)),super.destroy()}_getHeaderTreeNodeDataByCoords(e){if(!(e.row>=0||e.col<0))return wt(Bt,this).getHeaderTreeNodeData(e.row,e.col)}}function Cy(){var n;const e=(n=this.hot)===null||n===void 0?void 0:n.getSelectedRangeLast();if(!e)return;const{highlight:t}=e;if(t.isHeader()&&t.col>=0){const s=wt(Bt,this).findLeftMostColumnIndex(t.row,t.col),r=this.hot.selection.highlight.getFocus();r.visualCellRange.highlight.col=s,r.visualCellRange.from.col=s,r.visualCellRange.to.col=s,r.commit()}}function yOe(n){const e=this.hot.getSelectedRangeLast();if(!e)return n;const{highlight:t}=e;if(!(t.isHeader()&&t.col>=0))return n;const s=this.hot.view.getFirstFullyVisibleColumn(),r=this.hot.view.getLastFullyVisibleColumn(),o=wt(Bt,this).findLeftMostColumnIndex(t.row,t.col),a=wt(Bt,this).findRightMostColumnIndex(t.row,t.col);return o<s&&a>r?n:o<s?o:a}function COe(n,e,t){const i=wt(Bt,this).getHeaderTreeNodeData(e,n);if(!i)return n;const{columnCursor:s,selectionType:r,selectionWidth:o}=t,{isRoot:a,colspan:l}=wt(Bt,this).getHeaderSettings(e,n);if(r===NP){if(!a)return i.columnIndex}else if(r===LY&&(l>o-s||!a))return null;return n}function SOe(n,e,t){let{columnHeadersCount:i}=t;if(i!==0)for(let r=0;r<e.length;r++){const{startRow:o,startCol:a,endRow:l,endCol:c}=e[r],h=l-o+1,u=a-c+1;if(o>=0||u===1)break;for(let d=a;d<=c;d++)for(let f=o;f<=l;f++){var s;const g=h+f,m=d-a;if(m===0)continue;((s=wt(Bt,this).getHeaderTreeNodeData(f,d))===null||s===void 0?void 0:s.isRoot)===!1&&(n[g][m]="")}}}function _Oe(n,e,t,i){this._getHeaderTreeNodeDataByCoords(e)&&(i.column=!0)}function ROe(n,e){const t=this._getHeaderTreeNodeDataByCoords(e);if(!t)return;wu(Np,this,e.clone()),wu(S_,this,!0);const{selection:i}=this.hot,s=i.isSelected()?i.getSelectedRange().current():null,r=[],{columnIndex:o,origColspan:a}=t,l=!i.inInSelection(e);n.shiftKey&&s?e.col<s.from.col?r.push(s.getTopEndCorner().col,o,e.row):e.col>s.from.col?r.push(s.getTopStartCorner().col,o+a-1,e.row):r.push(o,o+a-1,e.row):(K0(n)||Fc(n)&&l||lY(n))&&r.push(o,o+a-1,e.row),i.selectColumns(...r)}function xOe(n,e,t,i){if(!this.hot.view.isMouseDown())return;const s=this._getHeaderTreeNodeDataByCoords(e);if(!s)return;const{columnIndex:r,origColspan:o}=s,a=this.hot.getSelectedRangeLast(),l=a.getTopStartCorner(),c=a.getBottomEndCorner(),{from:h}=a;i.column=!0,i.cell=!0;const u=[],d=kt(e.row,-1/0,-1);e.col<h.col?u.push(c.col,r,d):e.col>h.col?u.push(l.col,r+o-1,d):u.push(r,r+o-1,d),this.hot.selection.selectColumns(...u)}function EOe(){wu(S_,this,!1)}function TOe(){const{navigableHeaders:n}=this.hot.getSettings();if(!this.hot.view.isMouseDown()||!wt(S_,this)||!n)return;const e=this.hot.getSelectedRangeLast(),t=e.getTopStartCorner().col,i=e.getBottomEndCorner().col,{columnIndex:s,origColspan:r}=wt(Bt,this).getHeaderTreeNodeData(wt(Np,this).row,wt(Np,this).col);if(e.setHighlight(wt(Np,this)),r>e.getWidth()||s<t||s+r-1>i){const o=wt(Bt,this).findTopMostEntireHeaderLevel(kt(t,s,s+r-1),kt(i,s,s+r-1));e.highlight.row=o,e.highlight.col=e.from.col}}function MOe(n){const{highlight:e}=this.hot.getSelectedRangeLast(),t=this.hot._createCellCoords(e.row+n.row,e.col+n.col);if(!(t.isHeader()&&t.col>=0))return;const s=wt(Bt,this).findLeftMostColumnIndex(t.row,t.col),r=wt(Bt,this).findRightMostColumnIndex(t.row,t.col);if(n.col<0){const o=e.col>=s&&e.col<=r?s-1:r,a=this.hot.columnIndexMapper.getNearestNotHiddenIndex(o,-1);a===null?n.col=-this.hot.view.countRenderableColumnsInRange(0,e.col):n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(a,e.col)-1,1)}else if(n.col>0){const o=e.col>=s&&e.col<=r?r+1:s,a=this.hot.columnIndexMapper.getNearestNotHiddenIndex(o,1);a===null?n.col=this.hot.view.countRenderableColumnsInRange(e.col,this.hot.countCols()):n.col=Math.max(this.hot.view.countRenderableColumnsInRange(e.col,a)-1,1)}}function AOe(n,e){const t=n.row,i=this._getHeaderTreeNodeDataByCoords({row:t,col:n.col}),s=this._getHeaderTreeNodeDataByCoords({row:t,col:e.col});e.col<n.col?(i&&(n.col=i.columnIndex+i.origColspan-1),s&&(e.col=s.columnIndex)):e.col>=n.col&&(i&&(n.col=i.columnIndex),s&&(e.col=s.columnIndex+s.origColspan-1))}function POe(n){n.length=0;for(let e=0;e<wt(Bt,this).getLayersCount();e++)n.push(this.headerRendererFactory(e))}function IOe(n){const e=wt(Bt,this).getLayersCount();let t=n.startColumn,i=!!e;for(let s=0;s<e;s++){const r=wt(Bt,this).findLeftMostColumnIndex(s,n.startColumn),o=this.hot.columnIndexMapper.getRenderableFromVisualIndex(r);if(r>=0&&(i=!1),Li(o)&&o<n.startColumn){t=o;break}}n.startColumn=i?wt(Bt,this).getHeaderTreeNodeData(0,t).columnIndex:t}function OOe(n,e){const t=this.ghostTable.getWidth(e);return n>t?n:t}function kOe(n,e,t){var i;const{label:s}=(i=wt(Bt,this).getHeaderTreeNodeData(t,e))!==null&&i!==void 0?i:{label:""};return s}function HOe(n,e){if(n<0)return this.hot.getCell(n,wt(Bt,this).findLeftMostColumnIndex(n,e),!0)}function DOe(){this.updatePlugin()}function NOe(n,e){e||this.updatePlugin()}function Om(n,e,t){return(e=LOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LOe(n){var e=$Oe(n,"string");return typeof e=="symbol"?e:e+""}function $Oe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class FOe{constructor(e,t){Om(this,"hot",void 0),Om(this,"data",null),Om(this,"plugin",void 0),Om(this,"parentReference",new WeakMap),Om(this,"cache",{levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}),this.hot=t,this.plugin=e}setData(e){this.data=e}getData(){return this.data}getRawSourceData(){let e=null;return this.plugin.disableCoreAPIModifiers(),e=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),e}updateWithData(e){this.setData(e),this.rewriteCache()}rewriteCache(){this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},ke(0,this.data.length-1,e=>{this.cacheNode(this.data[e],0,null)})}cacheNode(e,t,i){this.cache.levels[t]||(this.cache.levels[t]=[],this.cache.levelCount+=1),this.cache.levels[t].push(e),this.cache.rows.push(e),this.cache.nodeInfo.set(e,{parent:i,row:this.cache.rows.length-1,level:t}),this.hasChildren(e)&&L(e.__children,s=>{this.cacheNode(s,t+1,e)})}getDataObject(e){return e==null?null:this.cache.rows[e]}readTreeNodes(e,t,i,s){let r=!1,o=t;if(isNaN(o)&&o.end)return o;let a=e;return a||(a={__children:this.data},r=!0,o-=1),i!=null&&o===i?{result:a,end:!0}:s!=null&&a===s?{result:o,end:!0}:(o+=1,a.__children&&L(a.__children,l=>{if(this.parentReference.set(l,r?null:a),o=this.readTreeNodes(l,o,i,s),isNaN(o)&&o.end)return!1}),o)}mockParent(){const e=this.mockNode();return e.__children=this.data,e}mockNode(){const e={};return et(this.data[0],(t,i)=>{e[i]=null}),e}getRowIndex(e){return e==null?null:this.cache.nodeInfo.get(e).row}getRowIndexWithinParent(e){let t=null;isNaN(e)?t=e:t=this.getDataObject(e);const i=this.getRowParent(e);return i==null?this.data.indexOf(t):i.__children.indexOf(t)}countAllRows(){const e={__children:this.data};return this.countChildren(e)}countChildren(e){let t=0,i=e;return isNaN(i)||(i=this.getDataObject(i)),!i||!i.__children?0:(L(i.__children,s=>{t+=1,s.__children&&(t+=this.countChildren(s))}),t)}getRowParent(e){let t;return isNaN(e)?t=e:t=this.getDataObject(e),this.getRowObjectParent(t)}getRowObjectParent(e){return!e||typeof e!="object"?null:this.cache.nodeInfo.get(e).parent}getRowLevel(e){let t=null;return isNaN(e)?t=e:t=this.getDataObject(e),t?this.getRowObjectLevel(t):null}getRowObjectLevel(e){return e==null?null:this.cache.nodeInfo.get(e).level}hasChildren(e){let t=e;return isNaN(t)||(t=this.getDataObject(t)),!!(t.__children&&t.__children.length)}isChild(e){return this.getRowParent(e)!==null}getChild(e,t){var i;return((i=e.__children)===null||i===void 0?void 0:i[t])||null}isRowHighestLevel(e){return!this.isChild(e)}isParent(e){var t;let i=e;return isNaN(i)||(i=this.getDataObject(i)),i&&!!i.__children&&((t=i.__children)===null||t===void 0?void 0:t.length)!==0}addChild(e,t){let i=t;this.hot.runHooks("beforeAddChild",e,i);let s=null;e&&(s=this.getRowIndex(e)),this.hot.runHooks("beforeCreateRow",s+this.countChildren(e)+1,1);let r=e;e||(r=this.mockParent()),r.__children||(r.__children=[]),i||(i=this.mockNode()),r.__children.push(i),this.rewriteCache();const o=this.getRowIndex(i);this.hot.rowIndexMapper.insertIndexes(o,1),this.hot.runHooks("afterCreateRow",o,1),this.hot.runHooks("afterAddChild",e,i)}addChildAtIndex(e,t,i){let s=i,r;if(s||(s=this.mockNode()),this.hot.runHooks("beforeAddChild",e,s,t),e){const a=this.getRowIndex(e)+t+1;this.hot.runHooks("beforeCreateRow",a,1),e.__children.splice(t,null,s),this.rewriteCache(),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(e),"__children",e.__children,"NestedRows.addChildAtIndex"),this.hot.rowIndexMapper.insertIndexes(a,1),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",a,1),r=a}else this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row_above",t,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),r=this.getRowIndex(this.data[t]);s=this.getDataObject(r),this.hot.runHooks("afterAddChild",e,s,t)}addSibling(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"below";const i=this.translateTrimmedRow(e),s=this.getRowParent(i),r=this.getRowIndexWithinParent(i);switch(t){case"below":this.addChildAtIndex(s,r+1,null);break;case"above":this.addChildAtIndex(s,r,null);break}}detachFromParent(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=null;const s=[];Array.isArray(e)?(ke(e[0],e[2],d=>{const f=this.translateTrimmedRow(d);s.push(this.getDataObject(f))}),ke(0,s.length-2,d=>{this.detachFromParent(s[d],!1)}),i=s[s.length-1]):i=e;const r=this.getRowIndex(i),o=this.countChildren(i),a=this.getRowIndexWithinParent(i),l=this.getRowParent(i),c=this.getRowParent(l),h=this.getRowIndex(c);let u=null;if(this.hot.runHooks("beforeDetachChild",l,i),a!=null){const d=Array.from(new Array(r+o+1).keys()).splice(-1*(o+1));if(this.hot.runHooks("beforeRemoveRow",r,o+1,d,this.plugin.pluginName),l.__children.splice(a,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",r,o+1,d,this.plugin.pluginName),c){u=h+this.countChildren(c);const f=this.getChild(c,this.countChildren(c)-1),g=this.getRowIndex(f);this.hot.runHooks("beforeCreateRow",g+1,o+1,this.plugin.pluginName),c.__children.push(i)}else u=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",u-2,o+1,this.plugin.pluginName),this.data.push(i)}this.rewriteCache(),this.hot.runHooks("afterCreateRow",u-2,o+1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",l,i,this.getRowIndex(i)),t&&this.hot.render()}filterData(e,t,i){const s=[];L(i,r=>{s.push(this.getDataObject(r))}),L(s,r=>{const o=this.getRowIndexWithinParent(r),a=this.getRowParent(r);a===null?this.data.splice(o,1):a.__children.splice(o,1)}),this.rewriteCache()}spliceData(e,t,i){const s=this.getDataObject(e-1);let r=null,o=e;s&&s.__children&&s.__children.length===0?(r=s,o=0):e<this.countAllRows()&&(r=this.getRowParent(e),o=this.getRowIndexWithinParent(e)),r?i?r.__children.splice(o,t,...i):r.__children.splice(o,t):i?this.data.splice(o,t,...i):this.data.splice(o,t),this.rewriteCache()}syncRowWithRawSource(e){let t=e,i=null;do i=this.getRowParent(i),i!==null&&(t=i);while(i!==null);this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(t),"__children",t.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}moveRow(e,t,i,s){const r=t===this.hot.countRows(),o=this.getRowParent(e),a=this.getRowIndexWithinParent(e),l=o.__children.slice(a,a+1),c=e>t;let h=r?this.getRowParent(t-1):this.getRowParent(t);h==null&&(h=this.getRowParent(t-1)),h==null&&(h=this.getDataObject(t-1)),h?h.__children||(h.__children=[]):(h=this.getDataObject(t),h.__children=[]);const u=r||i||s?h.__children.length:this.getRowIndexWithinParent(t),d=o===h;h.__children.splice(u,0,l[0]),o.__children.splice(a+(c&&d?1:0),1),this.syncRowWithRawSource(o),d||this.syncRowWithRawSource(h)}translateTrimmedRow(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(e):e}untranslateTrimmedRow(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(e):e}}function hB(n,e,t){return(e=BOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BOe(n){var e=VOe(n,"string");return typeof e=="symbol"?e:e+""}function VOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class tk{constructor(e,t){hB(this,"hot",void 0),hB(this,"plugin",void 0),this.hot=t,this.plugin=e}}class Yo extends tk{static get CSS_CLASSES(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}constructor(e,t){super(e,t),this.dataManager=this.plugin.dataManager,this.collapsingUI=this.plugin.collapsingUI,this.rowHeaderWidthCache=null}appendLevelIndicators(e,t){const i=this.hot.toPhysicalRow(e),s=this.dataManager.getRowLevel(i),r=this.dataManager.getDataObject(i),o=t.getElementsByTagName("DIV")[0],a=o.querySelector("span.rowHeader"),l=o.querySelectorAll('[class^="ht_nesting"]'),c=this.hot.getSettings().ariaTags;if(L(l,h=>{h&&o.removeChild(h)}),ae(t,Yo.CSS_CLASSES.indicatorContainer),s){const{rootDocument:h}=this.hot,u=a.cloneNode(!0);o.innerHTML="",ke(0,s-1,()=>{const d=h.createElement("SPAN");ae(d,Yo.CSS_CLASSES.emptyIndicator),o.appendChild(d)}),o.appendChild(u)}if(this.dataManager.hasChildren(r)){const h=this.hot.rootDocument.createElement("DIV");c&&$e(h,[sd()]),ae(t,Yo.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(i)?(ae(h,`${Yo.CSS_CLASSES.button} ${Yo.CSS_CLASSES.expandButton}`),c&&$e(t,[Sr(!1)])):(ae(h,`${Yo.CSS_CLASSES.button} ${Yo.CSS_CLASSES.collapseButton}`),c&&$e(t,[Sr(!0)])),o.appendChild(h)}}updateRowHeaderWidth(e){let t=e;t||(t=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*t+25),this.hot.render()}}class WOe extends tk{constructor(e,t){var i;super(e,t),i=this,this.dataManager=this.plugin.dataManager,this.collapsedRows=[],this.collapsedRowsStash={stash:function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;i.lastCollapsedRows=i.collapsedRows.slice(0),i.expandMultipleChildren(i.lastCollapsedRows,s)},shiftStash:function(s,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;r==null&&(r=1/0),L(i.lastCollapsedRows,(a,l)=>{a>=s&&a<r&&(i.lastCollapsedRows[l]=a+o)})},applyStash:function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i.collapseMultipleChildren(i.lastCollapsedRows,s),i.lastCollapsedRows=void 0},trimStash:(s,r)=>{ke(s,s+r-1,o=>{const a=this.lastCollapsedRows.indexOf(o);a>-1&&this.lastCollapsedRows.splice(a,1)})}}}collapseChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=[];let r=null,o=null,a=null;return isNaN(e)?(r=e,o=this.dataManager.getRowIndex(r)):(r=this.dataManager.getDataObject(e),o=e),this.dataManager.hasChildren(r)&&L(r.__children,l=>{s.push(this.dataManager.getRowIndex(l))}),a=this.collapseRows(s,!0,!1),i&&this.trimRows(a),t&&this.renderAndAdjust(),this.collapsedRows.indexOf(o)===-1&&this.collapsedRows.push(o),a}collapseMultipleChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=[];L(e,r=>{s.push(...this.collapseChildren(r,!1,!1))}),i&&this.trimRows(s),t&&this.renderAndAdjust()}collapseRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.collapseRows([e],t)}collapseRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=[];return L(e,r=>{s.push(r),t&&this.collapseChildRows(r,s)}),i&&this.trimRows(s),s}collapseChildRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(this.dataManager.hasChildren(e)){const s=this.dataManager.getDataObject(e);L(s.__children,r=>{const o=this.dataManager.getRowIndex(r);t.push(o),this.collapseChildRows(o,t)})}i&&this.trimRows(t)}expandRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.expandRows([e],t)}expandRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=[];return L(e,r=>{s.push(r),t&&this.expandChildRows(r,s)}),i&&this.untrimRows(s),s}expandChildRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(this.dataManager.hasChildren(e)){const s=this.dataManager.getDataObject(e);L(s.__children,r=>{if(!this.isAnyParentCollapsed(r)){const o=this.dataManager.getRowIndex(r);t.push(o),this.expandChildRows(o,t)}})}i&&this.untrimRows(t)}expandChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=[];let r=null,o=null,a=null;return isNaN(e)?(r=e,o=this.dataManager.getRowIndex(e)):(r=this.dataManager.getDataObject(e),o=e),this.collapsedRows.splice(this.collapsedRows.indexOf(o),1),this.dataManager.hasChildren(r)&&L(r.__children,l=>{const c=this.dataManager.getRowIndex(l);s.push(c)}),a=this.expandRows(s,!0,!1),i&&this.untrimRows(a),t&&this.renderAndAdjust(),a}expandMultipleChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const s=[];L(e,r=>{s.push(...this.expandChildren(r,!1,!1))}),i&&this.untrimRows(s),t&&this.renderAndAdjust()}collapseAll(){const e=this.dataManager.getData(),t=[];L(e,i=>{this.dataManager.hasChildren(i)&&t.push(i)}),this.collapseMultipleChildren(t),this.renderAndAdjust()}expandAll(){const e=this.dataManager.getData(),t=[];L(e,i=>{this.dataManager.hasChildren(i)&&t.push(i)}),this.expandMultipleChildren(t),this.renderAndAdjust()}trimRows(e){this.hot.batchExecution(()=>{L(e,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!0)})},!0)}untrimRows(e){this.hot.batchExecution(()=>{L(e,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!1)})},!0)}areChildrenCollapsed(e){let t=isNaN(e)?e:this.dataManager.getDataObject(e),i=!0;return t===null&&(t={__children:this.dataManager.data}),this.dataManager.hasChildren(t)&&L(t.__children,s=>{const r=this.dataManager.getRowIndex(s);if(!this.plugin.collapsedRowsMap.getValueAtIndex(r))return i=!1,!1}),i}isAnyParentCollapsed(e){let t=e;for(;t!==null;){t=this.dataManager.getRowParent(t);const i=this.dataManager.getRowIndex(t);if(this.collapsedRows.indexOf(i)>-1)return!0}return!1}toggleState(e,t){if(t.col>=0)return;const i=this.translateTrimmedRow(t.row);Fe(e.target,Yo.CSS_CLASSES.button)&&(this.areChildrenCollapsed(i)?this.expandChildren(i):this.collapseChildren(i),Ar(e))}translateTrimmedRow(e){return this.hot.toPhysicalRow(e)}untranslateTrimmedRow(e){return this.hot.toVisualRow(e)}renderAndAdjust(){this.hot.render(),this.hot.view.adjustElementsSize()}}function jOe(n,e,t){zOe(n,e),e.set(n,t)}function zOe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function UOe(n,e,t){return(e=YOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YOe(n){var e=GOe(n,"string");return typeof e=="symbol"?e:e+""}function GOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KOe(n,e){return n.get(qOe(n,e))}function qOe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var uB=new WeakMap;class XOe extends tk{constructor(){super(...arguments),UOe(this,"dataManager",this.plugin.dataManager),jOe(this,uB,{row_above:(e,t)=>{const i=t[t.length-1];this.dataManager.addSibling(i.start.row,"above")},row_below:(e,t)=>{const i=t[t.length-1];this.dataManager.addSibling(i.start.row,"below")}})}appendOptions(e){const t=[{key:"add_child",name(){return this.getTranslatedPhrase(II)},callback:()=>{const i=this.dataManager.translateTrimmedRow(this.hot.getSelectedLast()[0]),s=this.dataManager.getDataObject(i);this.dataManager.addChild(s)},disabled:()=>{const i=this.hot.getSelectedLast();return!i||i[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{key:"detach_from_parent",name(){return this.getTranslatedPhrase(OI)},callback:()=>{this.dataManager.detachFromParent(this.hot.getSelectedLast())},disabled:()=>{const i=this.hot.getSelectedLast(),s=this.dataManager.translateTrimmedRow(i[0]);return!this.dataManager.getRowParent(s)||!i||i[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{name:"---------"}];return ke(0,e.items.length-1,i=>{if(i===0)return L(t,(s,r)=>{e.items.splice(i+r,0,s)}),!1}),this.modifyRowInsertingOptions(e)}modifyRowInsertingOptions(e){return ke(0,e.items.length-1,t=>{const i=KOe(uB,this)[e.items[t].key];i!=null&&(e.items[t].callback=i)}),e}}function Sy(n,e,t){return(e=QOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QOe(n){var e=ZOe(n,"string");return typeof e=="symbol"?e:e+""}function ZOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class JOe{constructor(e){Sy(this,"plugin",void 0),Sy(this,"hot",void 0),Sy(this,"dataManager",void 0),Sy(this,"collapsingUI",void 0),this.plugin=e,this.hot=e.hot,this.dataManager=e.dataManager,this.collapsingUI=e.collapsingUI}onBeforeRowMove(e,t,i,s){if(this.displayAPICompatibilityWarning({rows:e,finalIndex:t,dropIndex:i,movePossible:s}))return!1;this.movedToCollapsed=!1;const o=i===this.hot.countRows(),a=o?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(i);let l=!0;const c=e.map(g=>{if(!l)return!1;const m=this.dataManager.translateTrimmedRow(g);return l=this.shouldAllowMoving(m,a),m}),h=c.indexOf(a)===-1;if(!l||!h)return!1;const u=this.getBaseParent(c),d=this.getTargetParent(o,a),f=u===d;return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(d),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(c,a,f),this.moveRows(c,a,d),this.dataManager.rewriteCache(),this.moveCellsMeta(c,a),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",e,t,i,s,s&&this.isRowOrderChanged(e,t)),this.hot.render(),this.selectCells(e,i),!1}displayAPICompatibilityWarning(e){const{rows:t,finalIndex:i,dropIndex:s,movePossible:r}=e;let o=!1;return Xt(s)&&(Dt(Nt`Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\x20
      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead.`),this.hot.runHooks("afterRowMove",t,i,s,r,!1),o=!0),o}shouldAllowMoving(e,t){return!(this.dataManager.isParent(e)||this.dataManager.isRowHighestLevel(e)||e===t||t===0)}getBaseParent(e){return this.dataManager.getRowParent(e[0])}getTargetParent(e,t){let i=this.dataManager.getRowParent(e?t-1:t);return i==null&&(i=this.dataManager.getRowParent(t-1)),i}shiftCollapsibleParentsLocations(e,t,i){i||(Math.max(...e)<=t?this.collapsingUI.collapsedRowsStash.shiftStash(e[0],t,-1*e.length):this.collapsingUI.collapsedRowsStash.shiftStash(t,e[0],e.length))}moveRows(e,t,i){const s=t===this.dataManager.getRowIndex(i)+this.dataManager.countChildren(i)+1;this.hot.batchRender(()=>{e.forEach(r=>{this.dataManager.moveRow(r,t,this.movedToCollapsed,s)})})}moveCellsMeta(e,t){const i=[],s=Math.max(...e)<t;e.forEach(r=>{i.push(this.hot.getCellMetaAtRow(r))}),this.hot.spliceCellsMeta(e[0],e.length),this.hot.spliceCellsMeta(t-(s?i.length:0),0,...i)}selectCells(e,t){const i=e.length;let s=0,r=0,o=null,a=null;if(this.movedToCollapsed){let l=null;e[i-1]<t?l=this.dataManager.translateTrimmedRow(t-i):l=this.dataManager.translateTrimmedRow(t);const c=this.dataManager.getRowParent(l===null?this.hot.countSourceRows()-1:l-1),h=this.dataManager.getRowIndex(c);s=this.dataManager.untranslateTrimmedRow(h),r=s}else e[i-1]<t?(r=t-1,s=r-i+1):(s=t,r=s+i-1);o=this.hot.selection,a=this.hot.countCols()-1,o.setRangeStart(this.hot._createCellCoords(s,0)),o.setRangeEnd(this.hot._createCellCoords(r,a),!0)}isRowOrderChanged(e,t){return e.some((i,s)=>i-s!==t)}}function eke(n,e){SK(n,e),e.add(n)}function dB(n,e,t){SK(n,e),e.set(n,t)}function SK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function NE(n,e,t){return(e=tke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tke(n){var e=nke(n,"string");return typeof e=="symbol"?e:e+""}function nke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rC(n,e){return n.get(oi(n,e))}function NS(n,e,t){return n.set(oi(n,e),t),t}function oi(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const LS="nestedRows",ike=300,fB=LS,ske="The Nested Rows plugin requires an Array of Objects as a dataset to be provided. The plugin has been disabled.";var __=new WeakMap,Jd=new WeakMap,gi=new WeakSet;class rke extends xt{constructor(){super(...arguments),eke(this,gi),NE(this,"dataManager",null),NE(this,"headersUI",null),NE(this,"collapsedRowsMap",null),dB(this,__,!1),dB(this,Jd,!1)}static get PLUGIN_KEY(){return LS}static get PLUGIN_PRIORITY(){return ike}isEnabled(){return!!this.hot.getSettings()[LS]}enablePlugin(){var e=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new tv),this.dataManager=new FOe(this,this.hot),this.collapsingUI=new WOe(this,this.hot),this.headersUI=new Yo(this,this.hot),this.contextMenuUI=new XOe(this,this.hot),this.rowMoveController=new JOe(this),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,bke).call(e,...i)}),this.addHook("beforeViewRender",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,yke).call(e,...i)}),this.addHook("modifyRowData",function(){return e.onModifyRowData(...arguments)}),this.addHook("modifySourceLength",function(){return e.onModifySourceLength(...arguments)}),this.addHook("beforeDataSplice",function(){return e.onBeforeDataSplice(...arguments)}),this.addHook("filterData",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,lke).call(e,...i)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,cke).call(e,...i)}),this.addHook("afterGetRowHeader",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,hke).call(e,...i)}),this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,ake).call(e,...i)}),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,fke).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,dke).call(e,...i)}),this.addHook("beforeAddChild",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,gke).call(e,...i)}),this.addHook("afterAddChild",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,mke).call(e,...i)}),this.addHook("beforeDetachChild",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,pke).call(e,...i)}),this.addHook("afterDetachChild",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,wke).call(e,...i)}),this.addHook("modifyRowHeaderWidth",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,uke).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,vke).call(e,...i)}),this.addHook("beforeRowMove",function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return oi(gi,e,oke).call(e,...i)}),this.addHook("beforeLoadData",t=>oi(gi,this,gB).call(this,t)),this.addHook("beforeUpdateData",t=>oi(gi,this,gB).call(this,t)),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),this.unregisterShortcuts(),super.disablePlugin()}updatePlugin(){this.disablePlugin();const e=this.dataManager.getData();this.enablePlugin(),this.dataManager.updateWithData(e),super.updatePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast(),t=this.collapsingUI.translateTrimmedRow(e.row);return this.collapsingUI.areChildrenCollapsed(t)?this.collapsingUI.expandChildren(t):this.collapsingUI.collapseChildren(t),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.col===-1&&i.row>=0},group:fB,relativeToGroup:th,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(fB)}disableCoreAPIModifiers(){NS(Jd,this,!0)}enableCoreAPIModifiers(){NS(Jd,this,!1)}onModifyRowData(e){if(!rC(Jd,this))return this.dataManager.getDataObject(e)}onModifySourceLength(){if(!rC(Jd,this))return this.dataManager.countAllRows()}onBeforeDataSplice(e,t,i){return rC(Jd,this)||this.dataManager.isRowHighestLevel(e)?!0:(this.dataManager.spliceData(e,t,i),!1)}destroy(){super.destroy()}}function oke(n,e,t,i){return this.rowMoveController.onBeforeRowMove(n,e,t,i)}function ake(n,e,t){this.collapsingUI.toggleState(n,e,t)}function lke(n,e,t){return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(t[0],e),this.collapsingUI.collapsedRowsStash.shiftStash(t[0],null,-1*e),this.dataManager.filterData(n,e,t),NS(__,this,!0),this.dataManager.getData().slice()}function cke(n){return this.contextMenuUI.appendOptions(n)}function hke(n,e){this.headersUI.appendLevelIndicators(n,e)}function uke(n){return Math.max(this.headersUI.rowHeaderWidthCache,n)}function dke(n,e,t,i){i!==this.pluginName&&this.hot._registerTimeout(()=>{NS(__,this,!1),this.headersUI.updateRowHeaderWidth(),this.collapsingUI.collapsedRowsStash.applyStash()})}function fke(n,e,t){const i=Array.from(t.reduce((s,r)=>{if(this.dataManager.isParent(r)){const o=this.dataManager.getDataObject(r).__children;return s.add(r),Array.isArray(o)&&o.forEach(a=>s.add(this.dataManager.getRowIndex(a))),s}return s.add(r)},new Set));t.length=0,t.push(...i)}function gke(){this.collapsingUI.collapsedRowsStash.stash()}function mke(n,e){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(e)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function pke(){this.collapsingUI.collapsedRowsStash.stash()}function wke(n,e,t){this.collapsingUI.collapsedRowsStash.shiftStash(t,null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function vke(){this.dataManager.rewriteCache()}function bke(){this.headersUI.updateRowHeaderWidth()}function yke(n,e){rC(__,this)&&(e.skipRender=!0)}function gB(n){if(!YY(n)){SP(ske),this.hot.getSettings()[LS]=!1,this.disablePlugin();return}this.dataManager.setData(n),this.dataManager.rewriteCache()}function LE(n,e,t){return(e=Cke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cke(n){var e=Ske(n,"string");return typeof e=="symbol"?e:e+""}function Ske(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class _ke{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;LE(this,"rootWindow",void 0),LE(this,"prefix",void 0),LE(this,"savedKeys",[]),this.rootWindow=t,this.prefix=e,this.loadSavedKeys()}saveValue(e,t){this.rootWindow.localStorage.setItem(`${this.prefix}_${e}`,JSON.stringify(t)),this.savedKeys.indexOf(e)===-1&&(this.savedKeys.push(e),this.saveSavedKeys())}loadValue(e,t){const i=typeof e>"u"?t:e,s=this.rootWindow.localStorage.getItem(`${this.prefix}_${i}`);return s===null?void 0:JSON.parse(s)}reset(e){this.rootWindow.localStorage.removeItem(`${this.prefix}_${e}`)}resetAll(){L(this.savedKeys,(e,t)=>{this.rootWindow.localStorage.removeItem(`${this.prefix}_${this.savedKeys[t]}`)}),this.clearSavedKeys()}loadSavedKeys(){const e=this.rootWindow.localStorage.getItem(`${this.prefix}__persistentStateKeys`),t=typeof e=="string"?JSON.parse(e):void 0;this.savedKeys=t||[]}saveSavedKeys(){this.rootWindow.localStorage.setItem(`${this.prefix}__persistentStateKeys`,JSON.stringify(this.savedKeys))}clearSavedKeys(){this.savedKeys.length=0,this.saveSavedKeys()}}function Rke(n,e,t){return(e=xke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xke(n){var e=Eke(n,"string");return typeof e=="symbol"?e:e+""}function Eke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}Ee.getSingleton().register("persistentStateSave");Ee.getSingleton().register("persistentStateLoad");Ee.getSingleton().register("persistentStateReset");const mB="persistentState",Tke=0;class Mke extends xt{constructor(){super(...arguments),Rke(this,"storage",void 0)}static get PLUGIN_KEY(){return mB}static get PLUGIN_PRIORITY(){return Tke}isEnabled(){return!!this.hot.getSettings()[mB]}enablePlugin(){this.enabled||(this.storage||(this.storage=new _ke(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",(e,t)=>this.saveValue(e,t)),this.addHook("persistentStateLoad",(e,t)=>this.loadValue(e,t)),this.addHook("persistentStateReset",()=>this.resetValue()),super.enablePlugin())}disablePlugin(){this.storage=void 0,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}loadValue(e,t){t.value=this.storage.loadValue(e)}saveValue(e,t){this.storage.saveValue(e,t)}resetValue(e){typeof e>"u"?this.storage.resetAll():this.storage.reset(e)}destroy(){super.destroy()}}function Ake(n,e){Pke(n,e),e.add(n)}function Pke(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $E(n,e,t){return(e=Ike(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ike(n){var e=Oke(n,"string");return typeof e=="symbol"?e:e+""}function Oke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pB(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const FE="search",kke=190,Hke="htSearchResult",Dke=function(n,e,t,i,s){n.getCellMeta(e,t).isSearchResult=s},Nke=function(n,e,t){return Xt(n)||n===null||!n.toLocaleLowerCase||n.length===0||Xt(e)||e===null?!1:e.toString().toLocaleLowerCase(t.locale).indexOf(n.toLocaleLowerCase(t.locale))!==-1};var BE=new WeakSet;class Lke extends xt{constructor(){super(...arguments),Ake(this,BE),$E(this,"callback",Dke),$E(this,"queryMethod",Nke),$E(this,"searchResultClass",Hke)}static get PLUGIN_KEY(){return FE}static get PLUGIN_PRIORITY(){return kke}isEnabled(){return this.hot.getSettings()[FE]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[FE];this.updatePluginSettings(t),this.addHook("beforeRenderer",function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return pB(BE,e,wB).call(e,...s)}),super.enablePlugin()}disablePlugin(){var e=this;const t=function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return pB(BE,e,wB).call(e,...s)};this.hot.addHook("beforeRenderer",t),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("beforeRenderer",t)}),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}query(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getCallback(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getQueryMethod();const s=this.hot.countRows(),r=this.hot.countCols(),o=[],a=this.hot;return ke(0,s-1,l=>{ke(0,r-1,c=>{const h=this.hot.getDataAtCell(l,c),u=this.hot.getCellMeta(l,c),d=u.search.callback||t,g=(u.search.queryMethod||i)(e,h,u);if(g){const m={row:l,col:c,data:h};o.push(m)}d&&d(a,l,c,h,g)})}),o}getCallback(){return this.callback}setCallback(e){this.callback=e}getQueryMethod(){return this.queryMethod}setQueryMethod(e){this.queryMethod=e}getSearchResultClass(){return this.searchResultClass}setSearchResultClass(e){this.searchResultClass=e}updatePluginSettings(e){Je(e)&&(e.searchResultClass&&this.setSearchResultClass(e.searchResultClass),e.queryMethod&&this.setQueryMethod(e.queryMethod),e.callback&&this.setCallback(e.callback))}destroy(){super.destroy()}}function wB(n,e,t,i,s,r){const o=r.className||[];let a=[];typeof o=="string"?a=o.split(" "):a.push(...o),this.isEnabled()&&r.isSearchResult?a.includes(this.searchResultClass)||a.push(`${this.searchResultClass}`):a.includes(this.searchResultClass)&&a.splice(a.indexOf(this.searchResultClass),1),r.className=a.join(" ")}function $ke(n,e){Fke(n,e),e.add(n)}function Fke(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _y(n,e,t){return(e=Bke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bke(n){var e=Vke(n,"string");return typeof e=="symbol"?e:e+""}function Vke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function VE(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Wke="touchScroll",jke=200;var Ry=new WeakSet;class zke extends xt{constructor(){super(...arguments),$ke(this,Ry),_y(this,"scrollbars",[]),_y(this,"clones",[]),_y(this,"lockedCollection",!1),_y(this,"freezeOverlays",!1)}static get PLUGIN_KEY(){return Wke}static get PLUGIN_PRIORITY(){return jke}static get SETTING_KEYS(){return!0}isEnabled(){return mP()}enablePlugin(){this.enabled||(this.addHook("afterViewRender",()=>VE(Ry,this,Uke).call(this)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.lockedCollection=!1,super.updatePlugin()}disablePlugin(){super.disablePlugin()}registerEvents(){this.addHook("beforeTouchScroll",()=>VE(Ry,this,Yke).call(this)),this.addHook("afterMomentumScroll",()=>VE(Ry,this,Gke).call(this))}}function Uke(){if(this.lockedCollection)return;const{topOverlay:n,bottomOverlay:e,inlineStartOverlay:t,topInlineStartCornerOverlay:i,bottomInlineStartCornerOverlay:s}=this.hot.view._wt.wtOverlays;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(n),e.clone&&this.scrollbars.push(e),this.scrollbars.push(t),i&&this.scrollbars.push(i),s&&s.clone&&this.scrollbars.push(s),this.clones=[],n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),t.needFullRender&&this.clones.push(t.clone.wtTable.holder.parentNode),i&&this.clones.push(i.clone.wtTable.holder.parentNode),s&&s.clone&&this.clones.push(s.clone.wtTable.holder.parentNode)}function Yke(){this.freezeOverlays=!0,L(this.clones,n=>{ae(n,"hide-tween")})}function Gke(){this.freezeOverlays=!1,L(this.clones,n=>{ze(n,"hide-tween"),ae(n,"show-tween")}),this.hot._registerTimeout(()=>{L(this.clones,n=>{ze(n,"show-tween")})},400),L(this.scrollbars,n=>{n.refresh(),n.resetFixedPosition()}),this.hot.view._wt.wtOverlays.syncScrollWithMaster()}function Kke(n,e){qke(n,e),e.add(n)}function qke(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xke(n,e,t){return(e=Qke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qke(n){var e=Zke(n,"string");return typeof e=="symbol"?e:e+""}function Zke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Jke(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const oC="trimRows",eHe=330;var vB=new WeakSet;class tHe extends xt{constructor(){super(...arguments),Kke(this,vB),Xke(this,"trimmedRowsMap",null)}static get PLUGIN_KEY(){return oC}static get PLUGIN_PRIORITY(){return eHe}isEnabled(){return!!this.hot.getSettings()[oC]}enablePlugin(){this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new tv),this.trimmedRowsMap.addLocalHook("init",()=>Jke(vB,this,nHe).call(this)),super.enablePlugin())}updatePlugin(){const e=this.hot.getSettings()[oC];Array.isArray(e)&&this.hot.batchExecution(()=>{this.trimmedRowsMap.clear(),L(e,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("trimRows"),super.disablePlugin()}getTrimmedRows(){return this.trimmedRowsMap.getTrimmedIndexes()}trimRows(e){const t=this.getTrimmedRows(),i=this.isValidConfig(e);let s=t;i&&(s=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeTrimRow",t,s,i)!==!1&&(i&&this.hot.batchExecution(()=>{L(e,o=>{this.trimmedRowsMap.setValueAtIndex(o,!0)})},!0),this.hot.runHooks("afterTrimRow",t,s,i,i&&s.length>t.length))}trimRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.trimRows(t)}untrimRows(e){const t=this.getTrimmedRows(),i=this.isValidConfig(e);let s=t;const r=this.trimmedRowsMap.getValues().slice(),o=e.length>0;i&&o&&(L(e,l=>{r[l]=!1}),s=Un(r,(l,c,h)=>(c&&l.push(h),l),[])),this.hot.runHooks("beforeUntrimRow",t,s,i&&o)!==!1&&(i&&o&&this.trimmedRowsMap.setValues(r),this.hot.runHooks("afterUntrimRow",t,s,i&&o,i&&s.length<t.length))}untrimRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.untrimRows(t)}isTrimmed(e){return this.trimmedRowsMap.getValueAtIndex(e)||!1}untrimAll(){this.untrimRows(this.getTrimmedRows())}isValidConfig(e){const t=this.hot.countSourceRows();return e.every(i=>Number.isInteger(i)&&i>=0&&i<t)}destroy(){super.destroy()}}function nHe(){const n=this.hot.getSettings()[oC];Array.isArray(n)&&this.hot.batchExecution(()=>{L(n,e=>{this.trimmedRowsMap.setValueAtIndex(e,!0)})},!0)}var _K={},iHe=Zc,sHe=_K,rHe=iHe("iterator"),oHe=Array.prototype,aHe=function(n){return n!==void 0&&(sHe.Array===n||oHe[rHe]===n)},lHe=sz,bB=R0,cHe=b0,hHe=_K,uHe=Zc,dHe=uHe("iterator"),RK=function(n){if(!cHe(n))return bB(n,dHe)||bB(n,"@@iterator")||hHe[lHe(n)]},fHe=mo,gHe=Dw,mHe=Il,pHe=_0,wHe=RK,vHe=TypeError,bHe=function(n,e){var t=arguments.length<2?wHe(n):e;if(gHe(t))return mHe(fHe(t,n));throw new vHe(pHe(n)+" is not iterable")},yHe=yz,CHe=mo,SHe=Il,_He=_0,RHe=aHe,xHe=Fw,yB=C0,EHe=bHe,THe=RK,CB=MA,MHe=TypeError,aC=function(n,e){this.stopped=n,this.result=e},SB=aC.prototype,AHe=function(n,e,t){var i=t&&t.that,s=!!(t&&t.AS_ENTRIES),r=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=yHe(e,i),c,h,u,d,f,g,m,w=function(C){return c&&CB(c,"normal",C),new aC(!0,C)},v=function(C){return s?(SHe(C),a?l(C[0],C[1],w):l(C[0],C[1])):a?l(C,w):l(C)};if(r)c=n.iterator;else if(o)c=n;else{if(h=THe(n),!h)throw new MHe(_He(n)+" is not iterable");if(RHe(h)){for(u=0,d=xHe(n);d>u;u++)if(f=v(n[u]),f&&yB(SB,f))return f;return new aC(!1)}c=EHe(n,h)}for(g=r?n.next:c.next;!(m=CHe(g,c)).done;){try{f=v(m.value)}catch(C){CB(c,"throw",C)}if(typeof f=="object"&&f&&yB(SB,f))return f}return new aC(!1)},PHe=go,IHe=Jc,OHe=v0,kHe=function(n,e,t){PHe?IHe.f(n,e,OHe(0,t)):n[e]=t},HHe=Ti,DHe=AHe,NHe=kHe;HHe({target:"Object",stat:!0},{fromEntries:function(e){var t={};return DHe(e,function(i,s){NHe(t,i,s)},{AS_ENTRIES:!0}),t}});const xK="undoRedo",LHe="undoRedo";function me(n){const e=this;this.instance=n,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,n.addHook("afterChange",function(i,s){const r=i&&i.length;if(!r||!i.find(l=>{const[,,c,h]=l;return c!==h}))return;const a=()=>{const l=i.reduce((h,u)=>(h.push([...u]),h),[]);L(l,h=>{h[1]=n.propToCol(h[1])});const c=r>1?this.getSelected():[[l[0][0],l[0][1]]];return new me.ChangeAction(l,c)};e.done(a,s)}),n.addHook("afterCreateRow",(i,s,r)=>{e.done(()=>new me.CreateRowAction(i,s),r)});const t=(i,s,r,o)=>{const a=["visualRow","visualCol","row","col","prop"],l=a.length,c=[];return ke(r,o,h=>{ke(i,s,u=>{const d=n.getCellMeta(u,h);if(Object.keys(d).length!==l){const f=Object.fromEntries(Object.entries(d).filter(g=>{let[m]=g;return a.includes(m)===!1}));c.push([d.visualRow,d.visualCol,f])}})}),c};n.addHook("beforeRemoveRow",(i,s,r,o)=>{const a=()=>{const l=n.toPhysicalRow(i),c=l+s-1,h=Yi(e.instance.getSourceData(l,0,l+s-1,e.instance.countSourceCols()-1));return new me.RemoveRowAction(l,h,n.getSettings().fixedRowsBottom,n.getSettings().fixedRowsTop,n.rowIndexMapper.getIndexesSequence(),t(l,c,0,n.countCols()-1))};e.done(a,o)}),n.addHook("afterCreateCol",(i,s,r)=>{e.done(()=>new me.CreateColumnAction(i,s),r)}),n.addHook("beforeRemoveCol",(i,s,r,o)=>{const a=()=>{const l=e.instance.getSourceDataArray(),c=(e.instance.countCols()+i)%e.instance.countCols(),h=c+s-1,u=[],d=[],f=[];ke(l.length-1,w=>{const v=[],C=l[w];ke(c,h,S=>{v.push(C[n.toPhysicalColumn(S)])}),u.push(v)}),ke(s-1,w=>{f.push(n.toPhysicalColumn(c+w))}),Array.isArray(n.getSettings().colHeaders)&&ke(s-1,w=>{d.push(n.getSettings().colHeaders[n.toPhysicalColumn(c+w)]||null)});const g=n.columnIndexMapper.getIndexesSequence(),m=n.rowIndexMapper.getIndexesSequence();return new me.RemoveColumnAction(c,f,u,d,g,m,n.getSettings().fixedColumnsStart,t(0,n.countRows(),c,h))};e.done(a,o)}),n.addHook("beforeCellAlignment",(i,s,r,o)=>{e.done(()=>new me.CellAlignmentAction(i,s,r,o))}),n.addHook("beforeFilter",(i,s)=>{e.done(()=>new me.FiltersAction(i,s))}),n.addHook("beforeRowMove",(i,s)=>{i!==!1&&e.done(()=>new me.RowMoveAction(i,s))}),n.addHook("beforeColumnMove",(i,s)=>{i!==!1&&e.done(()=>new me.ColumnMoveAction(i,s))}),n.addHook("beforeMergeCells",(i,s)=>{s||e.done(()=>new me.MergeCellsAction(n,i))}),n.addHook("afterUnmergeCells",(i,s)=>{s||e.done(()=>new me.UnmergeCellsAction(n,i))}),n.addHook("beforeColumnSort",(i,s,r)=>{r&&e.done(()=>new me.ColumnSortAction(i,s))}),n.addHook("afterInit",()=>{e.init()})}me.prototype.done=function(n,e){if(this.ignoreNewActions||e==="UndoRedo.undo"||e==="UndoRedo.redo"||e==="auto")return;const i=this.doneActions.slice();if(this.instance.runHooks("beforeUndoStackChange",i,e)===!1)return;const r=n(),o=this.undoneActions.slice();this.doneActions.push(r),this.instance.runHooks("afterUndoStackChange",i,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",o),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",o,this.undoneActions.slice())};me.prototype.undo=function(){if(this.isUndoAvailable()){const n=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",n);const e=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",n,this.doneActions.slice());const t=Yi(e);if(this.instance.runHooks("beforeUndo",t)===!1)return;this.ignoreNewActions=!0;const s=this,r=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",r),e.undo(this.instance,()=>{s.ignoreNewActions=!1,s.undoneActions.push(e)}),this.instance.runHooks("afterRedoStackChange",r,this.undoneActions.slice()),this.instance.runHooks("afterUndo",t)}};me.prototype.redo=function(){if(this.isRedoAvailable()){const n=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",n);const e=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",n,this.undoneActions.slice());const t=Yi(e);if(this.instance.runHooks("beforeRedo",t)===!1)return;this.ignoreNewActions=!0;const s=this,r=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",r),e.redo(this.instance,()=>{s.ignoreNewActions=!1,s.doneActions.push(e)}),this.instance.runHooks("afterUndoStackChange",r,this.doneActions.slice()),this.instance.runHooks("afterRedo",t)}};me.prototype.isUndoAvailable=function(){return this.doneActions.length>0};me.prototype.isRedoAvailable=function(){return this.undoneActions.length>0};me.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0};me.prototype.isEnabled=function(){return this.enabled};me.prototype.enable=function(){if(this.isEnabled())return;const n=this.instance;this.enabled=!0,BHe(n),this.registerShortcuts(),n.addHook("afterChange",EK)};me.prototype.disable=function(){if(!this.isEnabled())return;const n=this.instance;this.enabled=!1,VHe(n),this.unregisterShortcuts(),n.removeHook("afterChange",EK)};me.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null};me.Action=function(){};me.Action.prototype.undo=function(){};me.Action.prototype.redo=function(){};me.ChangeAction=function(n,e){this.changes=n,this.selected=e,this.actionType="change"};wo(me.ChangeAction,me.Action);me.ChangeAction.prototype.undo=function(n,e){const t=Yi(this.changes),i=n.countEmptyRows(!0),s=n.countEmptyCols(!0);for(let o=0,a=t.length;o<a;o++)t[o].splice(3,1);n.addHookOnce("afterChange",e),n.setDataAtCell(t,null,null,"UndoRedo.undo");for(let o=0,a=t.length;o<a;o++){const[l,c]=t[o];n.getSettings().minSpareRows&&l+1+n.getSettings().minSpareRows===n.countRows()&&i===n.getSettings().minSpareRows&&(n.alter("remove_row",parseInt(l+1,10),n.getSettings().minSpareRows),n.undoRedo.doneActions.pop()),n.getSettings().minSpareCols&&c+1+n.getSettings().minSpareCols===n.countCols()&&s===n.getSettings().minSpareCols&&(n.alter("remove_col",parseInt(c+1,10),n.getSettings().minSpareCols),n.undoRedo.doneActions.pop())}const r=n.getSelectedLast();if(r!==void 0){const[o,a]=t[0],[l,c]=r,h=n.view.getFirstFullyVisibleRow(),u=n.view.getFirstFullyVisibleColumn(),d=o>=h,f=a>=u;if((d&&f)===!1&&(l!==o||c!==a)===!0){const w={row:o,col:a};d===!1&&(w.verticalSnap="top"),f===!1&&(w.horizontalSnap="start"),n.scrollViewportTo(w)}}n.selectCells(this.selected,!1,!1)};me.ChangeAction.prototype.redo=function(n,e){const t=Yi(this.changes);for(let i=0,s=t.length;i<s;i++)t[i].splice(2,1);n.addHookOnce("afterChange",e),n.setDataAtCell(t,null,null,"UndoRedo.redo"),this.selected&&n.selectCells(this.selected,!1,!1)};me.CreateRowAction=function(n,e){this.index=n,this.amount=e,this.actionType="insert_row"};wo(me.CreateRowAction,me.Action);me.CreateRowAction.prototype.undo=function(n,e){const t=n.countRows(),i=n.getSettings().minSpareRows;this.index>=t&&this.index-i<t&&(this.index-=i),n.addHookOnce("afterRemoveRow",e),n.alter("remove_row",this.index,this.amount,"UndoRedo.undo")};me.CreateRowAction.prototype.redo=function(n,e){n.addHookOnce("afterCreateRow",e),n.alter("insert_row_above",this.index,this.amount,"UndoRedo.redo")};me.RemoveRowAction=function(n,e,t,i,s,r){this.index=n,this.data=e,this.actionType="remove_row",this.fixedRowsBottom=t,this.fixedRowsTop=i,this.rowIndexesSequence=s,this.removedCellMetas=r};wo(me.RemoveRowAction,me.Action);me.RemoveRowAction.prototype.undo=function(n,e){const t=n.getSettings(),i=[];t.fixedRowsBottom=this.fixedRowsBottom,t.fixedRowsTop=this.fixedRowsTop,this.data.forEach((s,r)=>{Object.keys(s).forEach(o=>{const a=parseInt(o,10);i.push([this.index+r,isNaN(a)?o:a,s[o]])})}),n.alter("insert_row_above",this.index,this.data.length,"UndoRedo.undo"),this.removedCellMetas.forEach(s=>{let[r,o,a]=s;n.setCellMetaObject(r,o,a)}),n.addHookOnce("afterViewRender",e),n.setSourceDataAtCell(i,null,null,"UndoRedo.undo"),n.rowIndexMapper.setIndexesSequence(this.rowIndexesSequence)};me.RemoveRowAction.prototype.redo=function(n,e){n.addHookOnce("afterRemoveRow",e),n.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")};me.CreateColumnAction=function(n,e){this.index=n,this.amount=e,this.actionType="insert_col"};wo(me.CreateColumnAction,me.Action);me.CreateColumnAction.prototype.undo=function(n,e){n.addHookOnce("afterRemoveCol",e),n.alter("remove_col",this.index,this.amount,"UndoRedo.undo")};me.CreateColumnAction.prototype.redo=function(n,e){n.addHookOnce("afterCreateCol",e),n.alter("insert_col_start",this.index,this.amount,"UndoRedo.redo")};me.RemoveColumnAction=function(n,e,t,i,s,r,o,a){this.index=n,this.indexes=e,this.data=t,this.amount=this.data[0].length,this.headers=i,this.columnPositions=s.slice(0),this.rowPositions=r.slice(0),this.actionType="remove_col",this.fixedColumnsStart=o,this.removedCellMetas=a};wo(me.RemoveColumnAction,me.Action);me.RemoveColumnAction.prototype.undo=function(n,e){const t=n.getSettings();t.fixedColumnsStart=this.fixedColumnsStart;const i=this.indexes.slice(0).sort(),s=(c,h,u)=>u[this.indexes.indexOf(i[h])],r=this.data.length,o=[];for(let c=0;c<r;c++)o.push(lt(this.data[c],s));const a=lt(this.headers,s),l=[];n.alter("insert_col_start",this.indexes[0],this.indexes.length,"UndoRedo.undo"),L(n.getSourceDataArray(),(c,h)=>{L(i,(u,d)=>{c[u]=o[h][d],l.push([h,u,c[u]])})}),n.setSourceDataAtCell(l,void 0,void 0,"UndoRedo.undo"),typeof this.headers<"u"&&L(a,(c,h)=>{n.getSettings().colHeaders[i[h]]=c}),this.removedCellMetas.forEach(c=>{let[h,u,d]=c;n.setCellMetaObject(h,u,d)}),n.batchExecution(()=>{n.rowIndexMapper.setIndexesSequence(this.rowPositions),n.columnIndexMapper.setIndexesSequence(this.columnPositions)},!0),n.addHookOnce("afterViewRender",e),n.render()};me.RemoveColumnAction.prototype.redo=function(n,e){n.addHookOnce("afterRemoveCol",e),n.alter("remove_col",this.index,this.amount,"UndoRedo.redo")};me.CellAlignmentAction=function(n,e,t,i){this.stateBefore=n,this.range=e,this.type=t,this.alignment=i};me.CellAlignmentAction.prototype.undo=function(n,e){L(this.range,t=>{t.forAll((i,s)=>{i>=0&&s>=0&&n.setCellMeta(i,s,"className",this.stateBefore[i][s]||" htLeft")})}),n.addHookOnce("afterViewRender",e),n.render()};me.CellAlignmentAction.prototype.redo=function(n,e){Jl(this.range,this.type,this.alignment,(t,i)=>n.getCellMeta(t,i),(t,i,s,r)=>n.setCellMeta(t,i,s,r)),n.addHookOnce("afterViewRender",e),n.render()};me.FiltersAction=function(n,e){this.previousConditionsStack=e,this.conditionsStack=n,this.actionType="filter"};wo(me.FiltersAction,me.Action);me.FiltersAction.prototype.undo=function(n,e){const t=n.getPlugin("filters");n.addHookOnce("afterViewRender",e),this.previousConditionsStack&&t.conditionCollection.importAllConditions(this.previousConditionsStack),t.filter()};me.FiltersAction.prototype.redo=function(n,e){const t=n.getPlugin("filters");n.addHookOnce("afterViewRender",e),t.conditionCollection.importAllConditions(this.conditionsStack),t.filter()};class $He extends me.Action{constructor(e,t){super(),this.cellRange=t;const i=this.cellRange.getTopStartCorner(),s=this.cellRange.getBottomEndCorner();this.rangeData=e.getData(i.row,i.col,s.row,s.col)}undo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.unmergeRange(this.cellRange,!0);const s=this.cellRange.getTopStartCorner();e.populateFromArray(s.row,s.col,this.rangeData,void 0,void 0,"MergeCells")}redo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.mergeRange(this.cellRange)}}me.MergeCellsAction=$He;class FHe extends me.Action{constructor(e,t){super(),this.cellRange=t}undo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.mergeRange(this.cellRange,!0)}redo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.unmergeRange(this.cellRange,!0),e.render()}}me.UnmergeCellsAction=FHe;me.RowMoveAction=function(n,e){this.rows=n.slice(),this.finalRowIndex=e,this.actionType="row_move"};wo(me.RowMoveAction,me.Action);me.RowMoveAction.prototype.undo=function(n,e){const t=n.getPlugin("manualRowMove");n.addHookOnce("afterViewRender",e),XO(this.rows,this.finalRowIndex,n.rowIndexMapper.getNumberOfIndexes()).reverse().forEach(s=>{let{from:r,to:o}=s;r<o&&(o-=1),t.moveRow(o,r)}),n.render(),n.deselectCell(),n.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)};me.RowMoveAction.prototype.redo=function(n,e){const t=n.getPlugin("manualRowMove");n.addHookOnce("afterViewRender",e),t.moveRows(this.rows.slice(),this.finalRowIndex),n.render(),n.deselectCell(),n.selectRows(this.finalRowIndex,this.finalRowIndex+this.rows.length-1)};me.ColumnMoveAction=function(n,e){this.columns=n.slice(),this.finalColumnIndex=e,this.actionType="col_move"};wo(me.ColumnMoveAction,me.Action);me.ColumnMoveAction.prototype.undo=function(n,e){const t=n.getPlugin("manualColumnMove");n.addHookOnce("afterViewRender",e),XO(this.columns,this.finalColumnIndex,n.columnIndexMapper.getNumberOfIndexes()).reverse().forEach(s=>{let{from:r,to:o}=s;r<o&&(o-=1),t.moveColumn(o,r)}),n.render(),n.deselectCell(),n.selectColumns(this.columns[0],this.columns[0]+this.columns.length-1)};me.ColumnMoveAction.prototype.redo=function(n,e){const t=n.getPlugin("manualColumnMove");n.addHookOnce("afterViewRender",e),t.moveColumns(this.columns.slice(),this.finalColumnIndex),n.render(),n.deselectCell(),n.selectColumns(this.finalColumnIndex,this.finalColumnIndex+this.columns.length-1)};me.ColumnSortAction=function(n,e){this.previousSortState=n,this.nextSortState=e};wo(me.ColumnSortAction,me.Action);me.ColumnSortAction.prototype.undo=function(n,e){const t=n.getPlugin("columnSorting"),i=n.getPlugin("multiColumnSorting"),s=i.isEnabled()?i:t;this.previousSortState.length?s.sort(this.previousSortState):s.clearSort(),e()};me.ColumnSortAction.prototype.redo=function(n,e){const t=n.getPlugin("columnSorting"),i=n.getPlugin("multiColumnSorting");(i.isEnabled()?i:t).sort(this.nextSortState),e()};me.prototype.init=function(){const n=this.instance.getSettings().undo,e=typeof n>"u"||n;this.instance.undoRedo||(this.instance.undoRedo=this),e?this.instance.undoRedo.enable():this.instance.undoRedo.disable()};me.prototype.registerShortcuts=function(){const e=this.instance.getShortcutManager().getContext("grid"),i={runOnlyIf:s=>!s.altKey,group:xK};e.addShortcuts([{keys:[["Control/Meta","z"]],callback:()=>{this.undo()}},{keys:[["Control/Meta","y"],["Control/Meta","Shift","z"]],callback:()=>{this.redo()}}],i)};me.prototype.unregisterShortcuts=function(){this.instance.getShortcutManager().getContext("grid").removeShortcutsByGroup(xK)};function EK(n,e){const t=this;if(e==="loadData")return t.undoRedo.clear()}function BHe(n){n.undo=function(){return n.undoRedo.undo()},n.redo=function(){return n.undoRedo.redo()},n.isUndoAvailable=function(){return n.undoRedo.isUndoAvailable()},n.isRedoAvailable=function(){return n.undoRedo.isRedoAvailable()},n.clearUndo=function(){return n.undoRedo.clear()}}function VHe(n){delete n.undo,delete n.redo,delete n.isUndoAvailable,delete n.isRedoAvailable,delete n.clearUndo}const hv=Ee.getSingleton();hv.add("afterUpdateSettings",function(){var n;(n=this.getPlugin("undoRedo"))===null||n===void 0||n.init()});hv.register("beforeUndo");hv.register("afterUndo");hv.register("beforeRedo");hv.register("afterRedo");me.PLUGIN_KEY=LHe;me.SETTING_KEYS=!0;function WHe(){vt(bp),vt(w0e),vt(yp),vt(Q0e),vt(r_e),vt(XG),vt(J_e),vt($Re),vt(w_),vt(iEe),vt(AEe),vt(LEe),vt(y_),vt(uTe),vt(c1e),vt(B1e),vt(dAe),vt(_Ae),vt(DAe),vt(YAe),vt(nPe),vt(yPe),vt(APe),vt(lIe),vt(WIe),vt(GIe),vt(bOe),vt(rke),vt(Mke),vt(Lke),vt(zke),vt(tHe),vt(me)}function jHe(){YCe(),hSe(),bSe(),FSe(),WHe()}function zHe(n){const e=typeof window>"u"?!1:window.jQuery;e&&(e.fn.handsontable=function(t){const i=this.first();let s=i.data("handsontable");if(typeof t!="string"){const c=t||{};return s?s.updateSettings(c):(s=new n.Core(i[0],c),i.data("handsontable",s),s.init()),i}let r;if(s)if(typeof s[t]<"u"){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];r=s[t].call(s,...a),t==="destroy"&&i.removeData()}else throw new Error(`Handsontable do not provide action: ${t}`);return r})}var WE,jE,zE,UE,YE;jHe();zHe(Ue);Ue.__GhostTable=DO;Ue._getListenersCounter=Gfe;Ue._getRegisteredMapsCounter=pve;Ue.EventManager=Er;const UHe=[ede,lfe,ive,dSe,rfe,Wde,sde,Lge,sfe,ode,ufe,Nge],YHe=[$de,dfe];Ue.helper={};Ue.dom={};L(UHe,n=>{L(Object.getOwnPropertyNames(n),e=>{e.charAt(0)!=="_"&&(Ue.helper[e]=n[e])})});L(YHe,n=>{L(Object.getOwnPropertyNames(n),e=>{e.charAt(0)!=="_"&&(Ue.dom[e]=n[e])})});Ue.cellTypes=(WE=Ue.cellTypes)!==null&&WE!==void 0?WE:{};L(Cbe(),n=>{Ue.cellTypes[n]=wO(n)});Ue.cellTypes.registerCellType=cr;Ue.cellTypes.getCellType=wO;Ue.editors=(jE=Ue.editors)!==null&&jE!==void 0?jE:{};L(Vfe(),n=>{Ue.editors[`${Ui(n)}Editor`]=XC(n)});Ue.editors.registerEditor=vs;Ue.editors.getEditor=XC;Ue.renderers=(zE=Ue.renderers)!==null&&zE!==void 0?zE:{};L(Zge(),n=>{const e=QC(n);n==="base"&&(Ue.renderers.cellDecorator=e),Ue.renderers[`${Ui(n)}Renderer`]=e});Ue.renderers.registerRenderer=Is;Ue.renderers.getRenderer=QC;Ue.validators=(UE=Ue.validators)!==null&&UE!==void 0?UE:{};L(tme(),n=>{Ue.validators[`${Ui(n)}Validator`]=AP(n)});Ue.validators.registerValidator=au;Ue.validators.getValidator=AP;Ue.plugins=(YE=Ue.plugins)!==null&&YE!==void 0?YE:{};L(MP(),n=>{Ue.plugins[n]=Qw(n)});Ue.plugins[`${Ui(xt.PLUGIN_KEY)}Plugin`]=xt;Ue.plugins.registerPlugin=vt;Ue.plugins.getPlugin=Qw;var TK;let MK;function GHe(n,e,t,i,s,r){var o,a,l,c,h,u,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,m=Object.create,w=[m(null),m(null)],v=e.length;function C(R,M,O){return function(P,k){M&&(k=P,P=n);for(var B=0;B<R.length;B++)k=R[B].apply(P,O?[k]:[]);return O?k:P}}function S(R,M,O,P){if(typeof R!="function"&&(P||R!==void 0))throw new TypeError(M+" must "+(O||"be")+" a function"+(P?"":" or undefined"));return R}function x(R,M,O,P,k,B,z,Q,te,ne,j){function ie(re){if(!j(re))throw new TypeError("Attempted to access private element on non-instance")}var oe=[].concat(M[0]),J=M[3],pe=!z,p=k===1,b=k===3,y=k===4,T=k===2;function H(re,ce,Be){return function(Se,_e){return ce&&(_e=Se,Se=R),Be&&Be(Se),E[re].call(Se,_e)}}if(!pe){var E={},D=[],K=b?"get":y||p?"set":"value";if(te?(ne||p?E={get:_B(function(){return J(this)},P,"get"),set:function(re){M[4](this,re)}}:E[K]=J,ne||_B(E[K],P,T?"":K)):ne||(E=Object.getOwnPropertyDescriptor(R,P)),!ne&&!te){if((a=w[+Q][P])&&(a^k)!=7)throw Error("Decorating two elements with the same name ("+E[K].name+") is not supported yet");w[+Q][P]=k<3?1:k}}for(var ee=R,he=oe.length-1;he>=0;he-=O?2:1){var se=S(oe[he],"A decorator","be",!0),Ie=O?oe[he-1]:void 0,xe={},X={kind:["field","accessor","method","getter","setter","class"][k],name:P,metadata:o,addInitializer:(function(re,ce){if(re.v)throw new TypeError("attempted to call addInitializer after decoration was finished");S(ce,"An initializer","be",!0),B.push(ce)}).bind(null,xe)};if(pe)a=se.call(Ie,ee,X),xe.v=1,S(a,"class decorators","return")&&(ee=a);else if(X.static=Q,X.private=te,a=X.access={has:te?j.bind():function(re){return P in re}},y||(a.get=te?T?function(re){return ie(re),E.value}:H("get",0,ie):function(re){return re[P]}),T||b||(a.set=te?H("set",0,ie):function(re,ce){re[P]=ce}),ee=se.call(Ie,p?{get:E.get,set:E.set}:E[K],X),xe.v=1,p){if(typeof ee=="object"&&ee)(a=S(ee.get,"accessor.get"))&&(E.get=a),(a=S(ee.set,"accessor.set"))&&(E.set=a),(a=S(ee.init,"accessor.init"))&&D.unshift(a);else if(ee!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else S(ee,(ne?"field":"method")+" decorators","return")&&(ne?D.unshift(ee):E[K]=ee)}return k<2&&z.push(C(D,Q,1),C(B,Q,0)),ne||pe||(te?p?z.splice(-1,0,H("get",Q),H("set",Q)):z.push(T?E[K]:S.call.bind(E[K])):g(R,P,E)),ee}function _(R){return g(R,f,{configurable:!0,enumerable:!0,value:o})}return o=m(o??null),h=[],u=function(R){R&&h.push(C(R))},d=function(R,M){for(var O=0;O<t.length;O++){var P=t[O],k=P[1],B=7&k;if((8&k)==R&&!B==M){var z=P[2],Q=!!P[3],te=16&k;x(R?n:n.prototype,P,te,Q?"#"+z:KHe(z),B,B<2?[]:R?c=c||[]:l=l||[],h,!!R,Q,M,R&&Q?function(ne){return XHe(ne)===n}:s)}}},d(8,0),d(0,0),d(8,1),d(0,1),u(l),u(c),a=h,v||_(n),{e:a,get c(){var R=[];return v&&[_(n=x(n,[e],i,n.name,5,R)),C(R,1)]}}}function KHe(n){var e=qHe(n,"string");return typeof e=="symbol"?e:e+""}function qHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _B(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function XHe(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let AK;class QHe{constructor(){this.mytable=void 0,this.hot=void 0}attached(){let e=[["","Tesla","Volvo","Toyota","Honda"],["2017",10,11,12,13],["2018",20,11,14,13],["2019",30,15,12,13]];this.hot=new Ue(this.mytable,{data:e,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,autoWrapCol:!0,licenseKey:"non-commercial-and-evaluation"})}}TK=QHe;[AK,MK]=GHe(TK,[n0({...dee,name:"sv-table"})],[]).c;MK();const ZHe=Object.freeze(Object.defineProperty({__proto__:null,get Table(){return AK}},Symbol.toStringTag,{value:"Module"})),PK="my-app",i1=`


<div class="message">\${message}</div>

<h1>Web components list</h1>
<h2>table</h2>
&lt;table&gt;
<sv-table></sv-table>

<h2>chartjs</h2>
&lt;chartjs&gt;

<sv-chartjs></sv-chartjs>

<h2>chart-scatter</h2>
&lt;chart-scatter&gt;

<sv-chartjs-scatter></sv-chartjs-scatter>



`,IK=[nee,hee,ZHe],OK={};let GE;function JHe(n){GE||(GE=yr.define({name:PK,template:i1,dependencies:IK,bindables:OK})),n.register(GE)}const eDe=Object.freeze(Object.defineProperty({__proto__:null,bindables:OK,default:i1,dependencies:IK,name:PK,register:JHe,template:i1},Symbol.toStringTag,{value:"Module"}));var kK;let HK;function tDe(n,e,t,i,s,r){var o,a,l,c,h,u,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,m=Object.create,w=[m(null),m(null)],v=e.length;function C(R,M,O){return function(P,k){M&&(k=P,P=n);for(var B=0;B<R.length;B++)k=R[B].apply(P,O?[k]:[]);return O?k:P}}function S(R,M,O,P){if(typeof R!="function"&&(P||R!==void 0))throw new TypeError(M+" must "+(O||"be")+" a function"+(P?"":" or undefined"));return R}function x(R,M,O,P,k,B,z,Q,te,ne,j){function ie(re){if(!j(re))throw new TypeError("Attempted to access private element on non-instance")}var oe=[].concat(M[0]),J=M[3],pe=!z,p=k===1,b=k===3,y=k===4,T=k===2;function H(re,ce,Be){return function(Se,_e){return ce&&(_e=Se,Se=R),Be&&Be(Se),E[re].call(Se,_e)}}if(!pe){var E={},D=[],K=b?"get":y||p?"set":"value";if(te?(ne||p?E={get:RB(function(){return J(this)},P,"get"),set:function(re){M[4](this,re)}}:E[K]=J,ne||RB(E[K],P,T?"":K)):ne||(E=Object.getOwnPropertyDescriptor(R,P)),!ne&&!te){if((a=w[+Q][P])&&(a^k)!=7)throw Error("Decorating two elements with the same name ("+E[K].name+") is not supported yet");w[+Q][P]=k<3?1:k}}for(var ee=R,he=oe.length-1;he>=0;he-=O?2:1){var se=S(oe[he],"A decorator","be",!0),Ie=O?oe[he-1]:void 0,xe={},X={kind:["field","accessor","method","getter","setter","class"][k],name:P,metadata:o,addInitializer:(function(re,ce){if(re.v)throw new TypeError("attempted to call addInitializer after decoration was finished");S(ce,"An initializer","be",!0),B.push(ce)}).bind(null,xe)};if(pe)a=se.call(Ie,ee,X),xe.v=1,S(a,"class decorators","return")&&(ee=a);else if(X.static=Q,X.private=te,a=X.access={has:te?j.bind():function(re){return P in re}},y||(a.get=te?T?function(re){return ie(re),E.value}:H("get",0,ie):function(re){return re[P]}),T||b||(a.set=te?H("set",0,ie):function(re,ce){re[P]=ce}),ee=se.call(Ie,p?{get:E.get,set:E.set}:E[K],X),xe.v=1,p){if(typeof ee=="object"&&ee)(a=S(ee.get,"accessor.get"))&&(E.get=a),(a=S(ee.set,"accessor.set"))&&(E.set=a),(a=S(ee.init,"accessor.init"))&&D.unshift(a);else if(ee!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else S(ee,(ne?"field":"method")+" decorators","return")&&(ne?D.unshift(ee):E[K]=ee)}return k<2&&z.push(C(D,Q,1),C(B,Q,0)),ne||pe||(te?p?z.splice(-1,0,H("get",Q),H("set",Q)):z.push(T?E[K]:S.call.bind(E[K])):g(R,P,E)),ee}function _(R){return g(R,f,{configurable:!0,enumerable:!0,value:o})}return o=m(o??null),h=[],u=function(R){R&&h.push(C(R))},d=function(R,M){for(var O=0;O<t.length;O++){var P=t[O],k=P[1],B=7&k;if((8&k)==R&&!B==M){var z=P[2],Q=!!P[3],te=16&k;x(R?n:n.prototype,P,te,Q?"#"+z:nDe(z),B,B<2?[]:R?c=c||[]:l=l||[],h,!!R,Q,M,R&&Q?function(ne){return sDe(ne)===n}:s)}}},d(8,0),d(0,0),d(8,1),d(0,1),u(l),u(c),a=h,v||_(n),{e:a,get c(){var R=[];return v&&[_(n=x(n,[e],i,n.name,5,R)),C(R,1)]}}}function nDe(n){var e=iDe(n,"string");return typeof e=="symbol"?e:e+""}function iDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RB(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function sDe(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let DK;class rDe{constructor(){this.message="Hello World 5!"}}kK=rDe;[DK,HK]=tDe(kK,[n0(eDe)],[]).c;HK();rp.app(DK).start()});export default oDe();
